var requirejs,require,define;!function(global){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.14",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,
readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){var i;if(ary)for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}function eachReverse(ary,func){var i;if(ary)for(i=ary.length-1;-1<i&&(!ary[i]||!func(ary[i],i,ary));i-=1);}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){
return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(!deepStringMixin||"object"!=typeof value||!value||isArray(value)||isFunction(value)||value instanceof RegExp?target[prop]=value:(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)))}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){
throw err}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,
isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),(context=getOwn(contexts,contextName))||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick="undefined"!=typeof setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){
req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser
)return(node=req.createNode(config,moduleName,url)).setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{importScripts(url),context.completeLoad(
moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head||(head=script.parentNode),dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(name,deps,callback){var node,context
;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript())&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")]),(context?context.defQueue:globalDefQueue).push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(
text)},req(cfg)}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;function normalize(name,baseName,applyMap){var mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"];if(name&&(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(
name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),function(ary){var i,part;for(i=0;i<ary.length;i++)if("."===(part=ary[i]))ary.splice(i,1),i-=1;else if(".."===part){if(0===i||1==i&&".."===ary[2]||".."===ary[i-1])continue;0<i&&(ary.splice(i-1,2),i-=2)}}(name),name=name.join("/")),applyMap&&map&&(baseParts||starMap)){outerLoop:for(i=(nameParts=name.split("/")).length;0<i;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;0<j;j-=1)if((mapValue=getOwn(map,baseParts.slice(0,j).join("/")))&&(mapValue=getOwn(mapValue,nameSegment)
)){foundMap=mapValue,foundI=i;break outerLoop}!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return getOwn(config.pkgs,name)||name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName)return scriptNode.parentNode.removeChild(scriptNode),!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(
pathConfig&&isArray(pathConfig)&&1<pathConfig.length)return pathConfig.shift(),context.require.undef(id),context.makeRequire(null,{skipMap:!0})([id]),!0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return-1<index&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),prefix=(nameParts=splitPrefix(name))[0],name=nameParts[1],
prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):-1===name.indexOf("!")?normalize(name,parentName,applyMap):name:(prefix=(nameParts=splitPrefix(normalizedName=normalize(name,parentName,applyMap)))[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!(suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1)),url:url,
originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap)).error&&"error"===name?fn(mod.error):mod.on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit(
"error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(apsp.apply(defQueue,[defQueue.length,0].concat(globalDefQueue)),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function checkLoaded(){var err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired
)hasPathFallback(modId)?stillLoading=usingPathFallback=!0:(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return(err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads)).contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){!function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(
mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement
;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}}return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine
)return mod.exports?defined[mod.map.id]=mod.exports:mod.exports=defined[mod.map.id]={}},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}},(Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(
errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;if(!this.shim)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},
load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&void 0===exports&&((
cjsModule=this.module)?exports=cjsModule.exports:this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad&&req.onResourceLoad(context,this.map,this.depMaps)),cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var map=this.map,
id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),on(normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),"defined",bind(this,function(value){this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),
void((normalizedMod=getOwn(registry,normalizedMap.id))&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):bundleId?(this.map.url=context.nameToUrl(bundleId),void this.load()):((load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})})).error=bind(this,function(err){this.inited=!0,(this.error=err).requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,
moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){(enabledRegistry[this.map.id]=this).enabled=!0,
this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.defineDep(i,depExports),this.check()})),this.errback&&on(depMap,"error",bind(this,this.errback))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,
pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},(context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/");var shim=config.shim,objs={paths:!0,bundles:!0,
config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?(config[prop]||(config[prop]={}),mixin(config[prop],value,!0,!0)):config[prop]=value}),cfg.bundles&&eachProp(cfg.bundles,function(value,prop){each(value,function(v){v!==prop&&(bundlesMap[v]=prop)})}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&each(cfg.packages,function(pkgObj){var name;name=(pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj).name,pkgObj.location&&(config.paths[name]=pkgObj.location),
config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){return function(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),
"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(id=makeModuleMap(deps,relMap,!1,!0).id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),(requireMod=getModule(makeModuleMap(null,relMap))).skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}
return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0];return-1!==index&&(!("."===segment||".."===segment)||1<index)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(
localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],eachReverse(defQueue,function(args,i){args[0]===id&&defQueue.splice(i,1)}),mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){getOwn(registry,depMap.id)&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0]){if(args[0]=moduleName,found
)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain&&(moduleName=pkgMain),bundleId=getOwn(bundlesMap,moduleName))return context.nameToUrl(bundleId,ext,skipExt)
;if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,i=(syms=moduleName.split("/")).length;0<i;i-=1)if(parentPath=getOwn(paths,syms.slice(0,i).join("/"))){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}url=syms.join("/"),url=("/"===(url+=ext||(/^data\:|\?/.test(url)||skipExt?"":".js")).charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs?url+(-1===url.indexOf("?")?"?":"&")+config.urlArgs:url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if(
"load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id))return onError(makeError("scripterror","Script error for: "+data.id,evt,[data.id]))}}).require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(script){if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript}}(this),define("lib/require",function(){}),define("text"
,["module"],function(module){"use strict";var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation="undefined"!=typeof location&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||void 0),buildMap={},masterConfig=module.config&&module.config()||{};return text={version:"2.0.10",strip:function(content){if(content){var matches=(content=content.replace(
xmlRegExp,"")).match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,
ext,temp,strip=!1,index=name.indexOf("."),isRelative=0===name.indexOf("./")||0===name.indexOf("../");return-1!==index&&(!isRelative||1<index)?(modName=name.substring(0,index),ext=name.substring(index+1,name.length)):modName=name,-1!==(index=(temp=ext||modName).indexOf("!"))&&(strip="strip"===temp.substring(index+1),temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return!match||(uProtocol=match[2],uPort=(uHostName=(uHostName=match[3]).split(":"))[1],uHostName=uHostName[0],
!(uProtocol&&uProtocol!==protocol||uHostName&&uHostName.toLowerCase()!==hostname.toLowerCase()||(uPort||uHostName)&&uPort!==port))},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(!config.isBuild||config.inlineText){masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;0!==url.indexOf("empty:")?!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(
url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)}):onLoad()}else onLoad()},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",
nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},"node"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync(url,"utf8");0===file.indexOf("\ufeff")&&(
file=file.substring(1)),callback(file)}catch(e){errback(e)}}):"xhr"===masterConfig.env||!masterConfig.env&&text.createXhr()?text.get=function(url,callback,errback,headers){var header,xhr=text.createXhr();if(xhr.open("GET",url,!0),headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;4===xhr.readyState&&(399<(status=xhr.status)&&status<600?((err=new Error(url+" HTTP status: "+status)).xhr=xhr,errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url)
)},xhr.send(null)}:"rhino"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?text.get=function(url,callback){var stringBuffer,line,file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),"utf-8")),content="";try{for(stringBuffer=new java.lang.StringBuffer,(line=input.readLine())&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1)),null!==line&&stringBuffer.append(line);null!==(line=input.readLine());)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(
stringBuffer.toString())}finally{input.close()}callback(content)}:("xpconnect"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(Cc=Components.classes,Ci=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{(inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream)).init(fileObj,1,0,!1),(
convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream)).init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}}),text}),define("json",["text"],function(text){var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};function cacheBust(url){
return url=url.replace(CACHE_BUST_FLAG,""),(url+=url.indexOf("?")<0?"?":"&")+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}return{load:function(name,req,onLoad,config){!config.isBuild||!1!==config.inlineJSON&&-1===name.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(req.toUrl(name),function(data){config.isBuild?(buildMap[name]=data,onLoad(data)):onLoad(jsonParse(data))},onLoad.error,{accept:"application/json"}):onLoad(null)},normalize:function(name,normalize){return-1!==name.indexOf(CACHE_BUST_FLAG)&&(name=cacheBust(name)),normalize(name)},write:function(pluginName,moduleName,write){moduleName in buildMap&&write(
'define("'+pluginName+"!"+moduleName+'", function(){ return '+buildMap[moduleName]+";});\n")}}}),define("css",[],function(){if("undefined"==typeof window)return{load:function(n,r,load){load()}};var head=document.getElementsByTagName("head")[0],engine=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,useImportLoad=!1,useOnload=!0;engine[1]||engine[7]?useImportLoad=parseInt(engine[1])<6||parseInt(engine[7])<=9:engine[2]||engine[8]?useOnload=!1:engine[4]&&(useImportLoad=parseInt(engine[4])<18);var curStyle,curSheet,cssAPI={}
;cssAPI.pluginBuilder="./css-builder";var ieCurCallback,createStyle=function(){curStyle=document.createElement("style"),head.appendChild(curStyle),curSheet=curStyle.styleSheet||curStyle.sheet},ieCnt=0,ieLoads=[],createIeLoad=function(url){32==++ieCnt&&(createStyle(),ieCnt=0),curSheet.addImport(url),curStyle.onload=function(){processIeLoad()}},processIeLoad=function(){ieCurCallback();var nextLoad=ieLoads.shift();nextLoad?(ieCurCallback=nextLoad[1],createIeLoad(nextLoad[0])):ieCurCallback=null};return cssAPI.normalize=function(name,normalize){return".css"==name.substr(name.length-4,4)&&(name=name.substr(0,name.length-4)),normalize(name)},cssAPI.load=function(
cssId,req,load,config){(useImportLoad?function(url,callback){if(curSheet&&curSheet.addImport||createStyle(),curSheet&&curSheet.addImport)ieCurCallback?ieLoads.push([url,callback]):(createIeLoad(url),ieCurCallback=callback);else{curStyle.textContent='@import "'+url+'";';var loadInterval=setInterval(function(){try{curStyle.sheet.cssRules,clearInterval(loadInterval),callback()}catch(e){}},10)}}:function(url,callback){var link=document.createElement("link");if(link.type="text/css",link.rel="stylesheet",useOnload)link.onload=function(){link.onload=function(){},setTimeout(callback,7)};else var loadInterval=setInterval(function(){for(
var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href==link.href)return clearInterval(loadInterval),callback()},10);link.href=url,head.appendChild(link)})(req.toUrl(cssId+".css"),load)},cssAPI}),define("handlebars",[],function(){var __module4__,__module3__,__module5__,__module2__,__module6__,__module1__,__module7__,__module9__;return __module4__=function(){"use strict";function SafeString(string){this.string=string}return SafeString.prototype.toString=function(){return""+this.string},SafeString}(),__module3__=function(__dependency1__){"use strict";var __exports__={},SafeString=__module4__,escape={"&":"&amp;","<":"&lt;",">":"&gt;",
'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]||"&amp;"}__exports__.extend=function(obj,value){for(var key in value)Object.prototype.hasOwnProperty.call(value,key)&&(obj[key]=value[key])};var isFunction,toString=Object.prototype.toString;__exports__.toString=toString,(isFunction=function(value){return"function"==typeof value})(/x/)&&(isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)}),__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return!(!value||"object"!=typeof value
)&&"[object Array]"===toString.call(value)};return __exports__.isArray=isArray,__exports__.escapeExpression=function(string){return string instanceof SafeString?string.toString():string||0===string?(string=""+string,possible.test(string)?string.replace(badChars,escapeChar):string):""},__exports__.isEmpty=function(value){return!value&&0!==value||!(!isArray(value)||0!==value.length)},__exports__}(),__module5__=function(){"use strict";var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var line;node&&node.firstLine&&(message+=" - "+(line=node.firstLine)+":"+node.firstColumn);for(
var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];line&&(this.lineNumber=line,this.column=node.firstColumn)}return Exception.prototype=new Error,Exception}(),__module2__=function(__dependency1__,__dependency2__){"use strict";var __exports__={},Utils=__module3__,Exception=__module5__;__exports__.VERSION="1.3.0";__exports__.COMPILER_REVISION=4;__exports__.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString;function HandlebarsEnvironment(helpers,partials){var instance
;this.helpers=helpers||{},this.partials=partials||{},(instance=this).registerHelper("helperMissing",function(arg){if(2!==arguments.length)throw new Exception("Missing helper: '"+arg+"'")}),instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;return isFunction(context)&&(context=context.call(this)),!0===context?fn(this):!1===context||null==context?inverse(this):isArray(context)?0<context.length?instance.helpers.each(context,options):inverse(this):fn(context)}),instance.registerHelper("each",function(context,options){var data,fn=options.fn,inverse=options.inverse,i=0,ret="";if(
isFunction(context)&&(context=context.call(this)),options.data&&(data=createFrame(options.data)),context&&"object"==typeof context)if(isArray(context))for(var j=context.length;i<j;i++)data&&(data.index=i,data.first=0===i,data.last=i===context.length-1),ret+=fn(context[i],{data:data});else for(var key in context)context.hasOwnProperty(key)&&(data&&(data.key=key,data.index=i,data.first=0===i),ret+=fn(context[key],{data:data}),i++);return 0===i&&(ret=inverse(this)),ret}),instance.registerHelper("if",function(conditional,options){return isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||Utils.isEmpty(
conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers.if.call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})}),instance.registerHelper("with",function(context,options){if(isFunction(context)&&(context=context.call(this)),!Utils.isEmpty(context))return options.fn(context)}),instance.registerHelper("log",function(context,options){var level=options.data&&null!=options.data.level?parseInt(options.data.level,10):1;instance.log(level,context)})}(__exports__.HandlebarsEnvironment=HandlebarsEnvironment).prototype={constructor:HandlebarsEnvironment,
logger:logger,log:log,registerHelper:function(name,fn,inverse){if("[object Object]"===toString.call(name)){if(inverse||fn)throw new Exception("Arg not supported with multiple helpers");Utils.extend(this.helpers,name)}else inverse&&(fn.not=inverse),this.helpers[name]=fn},registerPartial:function(name,str){"[object Object]"===toString.call(name)?Utils.extend(this.partials,name):this.partials[name]=str}};var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];"undefined"!=typeof console&&console[method]&&console[method].call(console,obj
)}}};function log(level,obj){logger.log(level,obj)}__exports__.logger=logger,__exports__.log=log;var createFrame=function(object){var obj={};return Utils.extend(obj,object),obj};return __exports__.createFrame=createFrame,__exports__}(),__module6__=function(__dependency1__,__dependency2__,__dependency3__){"use strict";var __exports__={},Utils=__module3__,Exception=__module5__,COMPILER_REVISION=__dependency3__.COMPILER_REVISION,REVISION_CHANGES=__dependency3__.REVISION_CHANGES;function program(i,fn,data){var prog=function(context,options){return fn(context,(options=options||{}).data||data)};return prog.program=i,prog.depth=0,prog}
return __exports__.checkRevision=function(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1;if(compilerRevision!==COMPILER_REVISION){if(compilerRevision<COMPILER_REVISION){var runtimeVersions=REVISION_CHANGES[COMPILER_REVISION],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new Exception(
"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}},__exports__.template=function(templateSpec,env){if(!env)throw new Exception("No environment passed to template");var container={escapeExpression:Utils.escapeExpression,invokePartial:function(partial,name,context,helpers,partials,data){var result=env.VM.invokePartial.apply(this,arguments);if(null!=result)return result;if(env.compile){var options={helpers:helpers,partials:partials,data:data};return partials[name]=env.compile(partial,{data:void 0!==data},env),partials[name](context,options)}
throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")},programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];return data?programWrapper=program(i,fn,data):programWrapper||(programWrapper=this.programs[i]=program(i,fn)),programWrapper},merge:function(param,common){var ret=param||common;return param&&common&&param!==common&&(ret={},Utils.extend(ret,common),Utils.extend(ret,param)),ret},programWithDepth:env.VM.programWithDepth,noop:env.VM.noop,compilerInfo:null};return function(context,options){var helpers,partials,namespace=(options=options||{}).partial?options:env;options.partial||(
helpers=options.helpers,partials=options.partials);var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);return options.partial||env.VM.checkRevision(container.compilerInfo),result}},__exports__.programWithDepth=function(i,fn,data){var args=Array.prototype.slice.call(arguments,3),prog=function(context,options){return options=options||{},fn.apply(this,[context,options.data||data].concat(args))};return prog.program=i,prog.depth=args.length,prog},__exports__.program=program,__exports__.invokePartial=function(partial,name,context,helpers,partials,data){var options={partial:!0,helpers:helpers,partials:partials,data:data};if(
void 0===partial)throw new Exception("The partial "+name+" could not be found");if(partial instanceof Function)return partial(context,options)},__exports__.noop=function(){return""},__exports__}(0,0,__module2__),__module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var base=__module2__,SafeString=__module4__,Exception=__module5__,Utils=__module3__,runtime=__module6__,create=function(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=SafeString,hb.Exception=Exception,hb.Utils=Utils,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb},
Handlebars=create();return Handlebars.create=create,Handlebars}(),__module7__=function(__dependency1__){"use strict";var Exception=__module5__;function LocationInfo(locInfo){locInfo=locInfo||{},this.firstLine=locInfo.first_line,this.firstColumn=locInfo.first_column,this.lastColumn=locInfo.last_column,this.lastLine=locInfo.last_line}var AST={ProgramNode:function(statements,inverseStrip,inverse,locInfo){var inverseLocationInfo,firstInverseNode;3===arguments.length?(locInfo=inverse,inverse=null):2===arguments.length&&(locInfo=inverseStrip,inverseStrip=null),LocationInfo.call(this,locInfo),this.type="program",this.statements=statements,this.strip={},inverse?(
firstInverseNode=inverse[0],this.inverse=firstInverseNode?(inverseLocationInfo={first_line:firstInverseNode.firstLine,last_line:firstInverseNode.lastLine,last_column:firstInverseNode.lastColumn,first_column:firstInverseNode.firstColumn},new AST.ProgramNode(inverse,inverseStrip,inverseLocationInfo)):new AST.ProgramNode(inverse,inverseStrip),this.strip.right=inverseStrip.left):inverseStrip&&(this.strip.left=inverseStrip.right)},MustacheNode:function(rawParams,hash,open,strip,locInfo){if(LocationInfo.call(this,locInfo),this.type="mustache",this.strip=strip,null!=open&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2)
;this.escaped="{"!==escapeFlag&&"&"!==escapeFlag}else this.escaped=!!open;rawParams instanceof AST.SexprNode?this.sexpr=rawParams:this.sexpr=new AST.SexprNode(rawParams,hash),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo),this.type="sexpr",this.hash=hash;var id=this.id=rawParams[0],params=this.params=rawParams.slice(1),eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)},PartialNode:function(partialName,
context,strip,locInfo){LocationInfo.call(this,locInfo),this.type="partial",this.partialName=partialName,this.context=context,this.strip=strip},BlockNode:function(mustache,program,inverse,close,locInfo){if(LocationInfo.call(this,locInfo),mustache.sexpr.id.original!==close.path.original)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,this);this.type="block",this.mustache=mustache,this.program=program,this.inverse=inverse,this.strip={left:mustache.strip.left,right:close.strip.right},(program||inverse).strip.left=mustache.strip.right,(inverse||program).strip.right=close.strip.left,inverse&&!program&&(this.isInverse=!0)},
ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="content",this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo),this.type="hash",this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo),this.type="ID";for(var original="",dig=[],depth=0,i=0,l=parts.length;i<l;i++){var part=parts[i].part;if(original+=(parts[i].separator||"")+part,".."===part||"."===part||"this"===part){if(0<dig.length)throw new Exception("Invalid path: "+original,this);".."===part?depth++:this.isScoped=!0}else dig.push(part)}this.original=original,this.parts=dig,this.string=dig.join("."),this.depth=depth,
this.isSimple=1===parts.length&&!this.isScoped&&0===depth,this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo),this.type="PARTIAL_NAME",this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo),this.type="DATA",this.id=id},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="STRING",this.original=this.string=this.stringModeValue=string},IntegerNode:function(integer,locInfo){LocationInfo.call(this,locInfo),this.type="INTEGER",this.original=this.integer=integer,this.stringModeValue=Number(integer)},BooleanNode:function(bool,locInfo){LocationInfo.call(this
,locInfo),this.type="BOOLEAN",this.bool=bool,this.stringModeValue="true"===bool},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo),this.type="comment",this.comment=comment}};return AST}(),__module9__=function(){"use strict";return function(){var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,
sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[
7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return new yy.ProgramNode($$[$0-1],this._$);case 2:return new yy.ProgramNode([],this._$);case 3:this.$=new yy.ProgramNode([],$$[$0-1],$$[$0],this._$);break;case 4:this.$=new yy.ProgramNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 5:this.$=new yy.ProgramNode($$[$0-1],$$[$0],[],this._$);break;case 6:this.$=new yy.ProgramNode($$[$0],this._$);break;case 7:case 8:
this.$=new yy.ProgramNode([],this._$);break;case 9:this.$=[$$[$0]];break;case 10:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0],this._$);break;case 12:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0],this._$);break;case 13:case 14:this.$=$$[$0];break;case 15:this.$=new yy.ContentNode($$[$0],this._$);break;case 16:this.$=new yy.CommentNode($$[$0],this._$);break;case 17:case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$={path:$$[$0-1],strip:stripFlags($$[$0-2],$$[$0])};break;case 20:case 21:
this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1],stripFlags($$[$0-3],$$[$0]),this._$);break;case 23:this.$=stripFlags($$[$0-1],$$[$0]);break;case 24:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 25:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 26:this.$=$$[$0];break;case 27:this.$=new yy.StringNode($$[$0],this._$);break;case 28:this.$=new yy.IntegerNode($$[$0],this._$);break;case 29:this.$=new yy.BooleanNode($$[$0],this._$);break;case 30:this.$=$$[$0];break;case 31:$$[$0-1].isHelper=!0,this.$=$$[$0-1];break;case 32:
this.$=new yy.HashNode($$[$0],this._$);break;case 33:this.$=[$$[$0-2],$$[$0]];break;case 34:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 35:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 36:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0],this._$));break;case 37:this.$=new yy.DataNode($$[$0],this._$);break;case 38:this.$=new yy.IdNode($$[$0],this._$);break;case 39:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 40:this.$=[{part:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 47:this.$=[$$[$0]];break;case 48:$$[$0-1].push($$[$0])}},table:[{3:1,
4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],
16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],
20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],
43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],
21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24
]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],
39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31
],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(str,hash){throw new Error(str)},parse:function(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this).lexer.yylloc&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var symbol,preErrorSymbol,state,action
,r,p,len,newState,expected,token,yyval={};;){if(state=stack[stack.length-1],void 0===(action=this.defaultActions[state]?this.defaultActions[state]:(null==symbol&&(token=void 0,"number"!=typeof(token=self.lexer.lex()||1)&&(token=self.symbols_[token]||token),symbol=token),table[state]&&table[state][symbol]))||!action.length||!action[0]){var errStr="";if(!recovering){for(p in expected=[],table[state])this.terminals_[p]&&2<p&&expected.push("'"+this.terminals_[p]+"'");errStr=this.lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol
)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&1<action.length)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,
yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,0<recovering&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack)))return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),
lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}};function stripFlags(open,close){return{left:"~"===open.charAt(2),right:"~"===close.charAt(0)||"~"===close.charAt(1)}}var lexer=function(){var lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",
this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len
;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(
this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(20<past.length?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(20<next.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;var token,match,tempMatch,index,lines;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(
var rules=this._currentRules(),i=0;i<rules.length&&(!(tempMatch=this._input.match(this.rules[rules[i]]))||match&&!(tempMatch[0].length>match[0].length)||(match=tempMatch,index=i,this.options.flex));i++);return match?((lines=match[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(
this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return void 0!==r?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},
_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(condition){this.begin(condition)},options:{},performAction:function(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}switch($avoiding_name_collisions){case 0:if("\\\\"===yy_.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===yy_.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),yy_.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:
return strip(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return strip(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),32;case 24:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 29:return 40;case 30:
return yy_.yytext=strip(1,2),40;case 31:return"INVALID";case 32:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,
/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}}};return lexer}();function Parser(){this.yy={}}return parser.lexer=lexer,new((Parser.prototype=parser).Parser=Parser)}()}(),function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var Handlebars=__module1__,AST=__module7__,Parser=__dependency3__.parser,parse=__dependency3__.parse,
Compiler=__dependency4__.Compiler,compile=__dependency4__.compile,precompile=__dependency4__.precompile,JavaScriptCompiler=__dependency5__,_create=Handlebars.create,create=function(){var hb=_create();return hb.compile=function(input,options){return compile(input,options,hb)},hb.precompile=function(input,options){return precompile(input,options,hb)},hb.AST=AST,hb.Compiler=Compiler,hb.JavaScriptCompiler=JavaScriptCompiler,hb.Parser=Parser,hb.parse=parse,hb};return(Handlebars=create()).create=create,Handlebars}(0,0,function(__dependency1__,__dependency2__){"use strict";var __exports__={},parser=__module9__,AST=__module7__;return __exports__.parser=parser,
__exports__.parse=function(input){return input.constructor===AST.ProgramNode?input:(parser.yy=AST,parser.parse(input))},__exports__}(),function(__dependency1__){"use strict";var __exports__={},Exception=__module5__;function Compiler(){}return(__exports__.Compiler=Compiler).prototype={compiler:Compiler,disassemble:function(){for(var opcode,params,param,opcodes=this.opcodes,out=[],i=0,l=opcodes.length;i<l;i++)if("DECLARE"===(opcode=opcodes[i]).opcode)out.push("DECLARE "+opcode.name+"="+opcode.value);else{params=[];for(var j=0;j<opcode.args.length;j++)"string"==typeof(param=opcode.args[j])&&(param='"'+param.replace("\n","\\n")+'"'),params.push(param);out.push(
opcode.opcode+" "+params.join(" "))}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length)return!1;for(var j=0;j<opcode.args.length;j++)if(opcode.args[j]!==otherOpcode.args[j])return!1}if(len=this.children.length,other.children.length!==len)return!1;for(i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function(program,options){this.opcodes=[],this.children=[],this.depths={list:[]},
this.options=options;var knownHelpers=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];return this.accept(program)},accept:function(node){var ret,strip=node.strip||{};return strip.left&&this.opcode("strip"),ret=this[node.type](node),strip.right&&this.opcode("strip"),ret},program:function(program){for(var statements=program.statements,i=0,l=statements.length;i<l;i++)this.accept(statements[i]);return this.isSimple=1===l,this.depths.list=this.depths.list.sort(function(a,b){return a-b})
,this},compileProgram:function(program){var depth,result=(new this.compiler).compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial;for(var i=0,l=(this.children[guid]=result).depths.list.length;i<l;i++)(depth=result.depths.list[i])<2||this.addDepth(depth-1);return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;program&&(program=this.compileProgram(program)),inverse&&(inverse=this.compileProgram(inverse));var sexpr=mustache.sexpr,type=this.classifySexpr(sexpr);"helper"===type?this.helperSexpr(sexpr,program,inverse):"simple"===type?(this.simpleSexpr(sexpr),
this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(sexpr,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(hash){var pair,val,pairs=hash.pairs;this.opcode("pushHash");for(var i=0,l=pairs.length;i<l;i++)val=(pair=pairs[i])[1],this.options.stringParams?(val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",val.stringModeValue,val.type),"sexpr"===val.type&&this.sexpr(val)):this.accept(val
),this.opcode("assignToHash",pair[0]);this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=!0,partial.context?this.ID(partial.context):this.opcode("push","depth0"),this.opcode("invokePartial",partialName.name),this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr),mustache.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=null!=program||null!=inverse;this.opcode("getContext",id.depth),this.opcode(
"pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;"DATA"===id.type?this.DATA(id):id.parts.length?this.ID(id):(this.addDepth(id.depth),this.opcode("getContext",id.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),name=sexpr.id.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new Exception(
"You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);this.opcode("invokeHelper",params.length,name,sexpr.isRoot)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);"simple"===type?this.simpleSexpr(sexpr):"helper"===type?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ID:function(id){this.addDepth(id.depth),this.opcode("getContext",id.depth),id.parts[0]?this.opcode("lookupOnContext",id.parts[0]):this.opcode("pushContext");for(var i=1,l=id.parts.length;i<l;i++)this.opcode("lookup",id.parts[i])},DATA:function(data){if(this.options.data=!0,data.id.isScoped||data.id.depth)throw new Exception(
"Scoped data references are not supported: "+data.original,data);this.opcode("lookupData");for(var parts=data.id.parts,i=0,l=parts.length;i<l;i++)this.opcode("lookup",parts[i])},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){0!==depth&&(this.depths[depth]||(this.depths[depth]=!0,
this.depths.list.push(depth)))},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper,isEligible=sexpr.eligibleHelper,options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];options.knownHelpers[name]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function(params){for(var param,i=params.length;i--;)param=params[i],this.options.stringParams?(param.depth&&this.addDepth(param.depth),this.opcode("getContext",param.depth||0),this.opcode("pushStringParam",param.stringModeValue,param.type),"sexpr"===param.type&&this.sexpr(param)):this[param.type](param)},
setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.hash(sexpr.hash):this.opcode("emptyHash"),params}},__exports__.precompile=function(input,options,env){if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);"data"in(options=options||{})||(options.data=!0);var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(
environment,options)},__exports__.compile=function(input,options,env){if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);var compiled;function compileInput(){var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,void 0,!0);return env.template(templateSpec)}return"data"in(options=options||{})||(options.data=!0),function(context,options){return compiled||(compiled=compileInput()),compiled.call(this,context,options)}},__exports__}(),
function(__dependency1__,__dependency2__){"use strict";var COMPILER_REVISION=__dependency1__.COMPILER_REVISION,REVISION_CHANGES=__dependency1__.REVISION_CHANGES,log=__dependency1__.log,Exception=__dependency2__;function Literal(value){this.value=value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function(parent,name){var wrap,ret;return 0===parent.indexOf("depth")&&(wrap=!0),ret=/^[0-9]+$/.test(name)?parent+"["+name+"]":JavaScriptCompiler.isValidJavaScriptVariableName(name)?parent+"."+name:parent+"['"+name+"']",wrap?"("+parent+" && "+ret+")":ret},compilerInfo:function(){
return"this.compilerInfo = ["+COMPILER_REVISION+",'"+REVISION_CHANGES[COMPILER_REVISION]+"'];\n"},appendToBuffer:function(string){return this.environment.isSimple?"return "+string+";":{appendToBuffer:!0,content:string,toString:function(){return"buffer += "+string+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment,this.options=options||{},log("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!context,this.context=context||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,
this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(environment,options);var opcode,opcodes=environment.opcodes;this.i=0;for(var l=opcodes.length;this.i<l;this.i++)"DECLARE"===(opcode=opcodes[this.i]).opcode?this[opcode.name]=opcode.value:this[opcode.opcode].apply(this,opcode.args),opcode.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Exception("Compile completed with content left on stack");return this.createFunctionContext(asObject)},preamble:function(){var out=[];if(this.isChild)out.push(""
);else{var namespace=this.namespace,copies="helpers = this.merge(helpers, "+namespace+".helpers);";this.environment.usePartial&&(copies=copies+" partials = this.merge(partials, "+namespace+".partials);"),this.options.data&&(copies+=" data = data || {};"),out.push(copies)}this.environment.isSimple?out.push(""):out.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(0<locals.length&&(this.source[1]=this.source[1]+", "+locals.join(", ")),!this.isChild)for(var alias in this.context.aliases)this.context.aliases.hasOwnProperty(alias)&&(
this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],i=0,l=this.environment.depths.list.length;i<l;i++)params.push("depth"+this.environment.depths.list[i]);var source=this.mergeSource();if(this.isChild||(source=this.compilerInfo()+source),asObject)return params.push(source),Function.apply(this,params);var functionSource="function "+(
this.name||"")+"("+params.join(",")+") {\n  "+source+"}";return log("debug",functionSource+"\n\n"),functionSource},mergeSource:function(){for(var buffer,source="",i=0,len=this.source.length;i<len;i++){var line=this.source[i];line.appendToBuffer?buffer=buffer?buffer+"\n    + "+line.content:line.content:(buffer&&(source+="buffer += "+buffer+";\n  ",buffer=void 0),source+=line+"\n  ")}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params),this.replaceStack(function(current){return params.splice(1,0,current),"blockHelperMissing.call("+params.join(", ")+")"})},
ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current),this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){this.pendingContent&&(content=this.pendingContent+content),this.stripNext&&(content=content.replace(/^\s+/,"")),this.pendingContent=content},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline()
;var local=this.popStack();this.pushSource("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){this.lastContext!==depth&&(this.lastContext=depth)},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){
this.context.aliases.functionType='"function"',this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext),this.pushString(type),"sexpr"!==type&&("string"==typeof string?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function(){this.pushStackLiteral("{}"),
this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+hash.contexts.join(",")+"}"),this.push("{"+hash.types.join(",")+"}")),this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){return this.inlineStack.push(expr),expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){null!=guid?this.pushStackLiteral(
this.programExpression(guid)):this.pushStackLiteral(null)},invokeHelper:function(paramSize,name,isRoot){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var helper=this.lastHelper=this.setupHelper(paramSize,name,!0),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),lookup="helper = "+helper.name+" || "+nonHelper;helper.paramsInit&&(lookup+=","+helper.paramsInit),this.push("("+lookup+",helper ? helper.call("+helper.callParams+") : helperMissing.call("+helper.helperMissingParams+"))"),isRoot||this.flushInline()},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name)
;this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName=this.lastHelper=this.nameLookup("helpers",name,"helper"),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),nextStack=this.nextStack();helper.paramsInit&&this.pushSource(helper.paramsInit),this.pushSource("if (helper = "+helperName+") { "+nextStack+" = helper.call("+helper.callParams+"); }"),this.pushSource(
"else { helper = "+nonHelper+"; "+nextStack+" = typeof helper === functionType ? helper.call("+helper.callParams+") : helper; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];this.options.data&&params.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var context,type,value=this.popStack();this.options.stringParams&&(type=this.popStack(),context=this.popStack());var hash=this.hash;context&&hash.contexts.push("'"+key+"': "+context),type&&hash.types.push("'"+key+"': "+type),hash.values.push(
"'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){for(var child,compiler,children=environment.children,i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler;var index=this.matchExistingProgram(child);null==index?(this.context.programs.push(""),index=this.context.programs.length,child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context),this.context.environments[index]=child):(child.index=index,child.name="program"+index)}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){
var environment=this.context.environments[i];if(environment&&environment.equals(child))return i}},programExpression:function(guid){if(this.context.aliases.self="this",null==guid)return"self.noop";for(var depth,child=this.environment.children[guid],depths=child.depths.list,programParams=[child.index,child.name,"data"],i=0,l=depths.length;i<l;i++)1===(depth=depths[i])?programParams.push("depth0"):programParams.push("depth"+(depth-1));return(0===depths.length?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name),this.pushSource(name+" = "+val+";")},useRegister:function(name){
this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),source&&this.source.push(source)},pushStack:function(item){this.flushInline();var stack=this.incrStack();return item&&this.pushSource(stack+" = "+item+";"),this.compileStack.push(stack),stack},replaceStack:function(callback){var stack,createdStack,usedLiteral,prefix="",inline=this.isInline();if(inline){var top=this.popStack(!0);if(top instanceof Literal
)stack=top.value,usedLiteral=!0;else{var name=(createdStack=!this.stackSlot)?this.incrStack():this.topStackName();prefix="("+this.push(name)+" = "+top+"),",stack=this.topStack()}}else stack=this.topStack();var item=callback.call(this,stack);return inline?(usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push("("+prefix+item+")")):(/^stack/.test(stack)||(stack=this.nextStack()),this.pushSource(stack+" = ("+prefix+item+");")),stack},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},
topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];entry instanceof Literal?this.compileStack.push(entry):this.pushStack(entry)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;if(!inline){if(!this.stackSlot)throw new Exception("Invalid stack pop");this.stackSlot--}return item},topStack:function(wrapped){
var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];return!wrapped&&item instanceof Literal?item.value:item},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[];return{params:params,paramsInit:this.setupParams(paramSize,params,missingParams),name:this.nameLookup("helpers",name,"helper"),callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(
", ")}},setupOptions:function(paramSize,params){var param,inverse,program,options=[],contexts=[],types=[];options.push("hash:"+this.popStack()),this.options.stringParams&&(options.push("hashTypes:"+this.popStack()),options.push("hashContexts:"+this.popStack())),inverse=this.popStack(),((program=this.popStack())||inverse)&&(program||(this.context.aliases.self="this",program="self.noop"),inverse||(this.context.aliases.self="this",inverse="self.noop"),options.push("inverse:"+inverse),options.push("fn:"+program));for(var i=0;i<paramSize;i++)param=this.popStack(),params.push(param),this.options.stringParams&&(types.push(this.popStack()),contexts.push(
this.popStack()));return this.options.stringParams&&(options.push("contexts:["+contexts.join(",")+"]"),options.push("types:["+types.join(",")+"]")),this.options.data&&options.push("data:data"),options},setupParams:function(paramSize,params,useRegister){var options="{"+this.setupOptions(paramSize,params).join(",")+"}";return useRegister?(this.useRegister("options"),params.push("options"),"options="+options):(params.push(options),"")}};for(
var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={},i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0;return JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!(
JavaScriptCompiler.RESERVED_WORDS[name]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name))},JavaScriptCompiler}(__module2__,__module5__))}),function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:b+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=!0;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:b+n;t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=!0}}function r(n){
return n.charCodeAt(0)}function u(n,t){for(var e=n.m,r=t.m,u=-1,o=e.length;++u<o;){var a=e[u],i=r[u];if(a!==i){if(i<a||void 0===a)return 1;if(a<i||void 0===i)return-1}}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for((u=l()).false=u.null=u.true=u.undefined=!1,(o=l()).k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function a(n){return"\\"+Y[n]}function i(){return v.pop()||[]}function l(){return y.pop()||{k:null,l:null,m:null,false:!1,n:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,o:null}}function f(n){
return"function"!=typeof n.toString&&"string"==typeof(n+"")}function c(n){n.length=0,v.length<w&&v.push(n)}function p(n){var t=n.l;t&&p(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,y.length<w&&y.push(n)}function s(n,t,e){t||(t=0),void 0===e&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(e<0?0:e);++r<e;)u[r]=n[t+r];return u}var h,v=[],y=[],m=0,d={},b=+new Date+"",_=75,w=40,j=" \t\v\f\ufeff\n\r\u2028\u2029",x=/\b__p\+='';/g,C=/\b(__p\+=)''\+/g,E=/(__e\(.*?\)|\b__t\))\+'';/g,O=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,D=RegExp("^["+j+"]*0+(?=.$)"),N=/($^)/,B=/\bthis\b/,
P=/['\n\r\t\u2028\u2029\\]/g,R="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),T="[object Arguments]",$="[object Array]",L="[object Boolean]",z="[object Date]",q="[object Error]",K="[object Function]",W="[object Number]",G="[object Object]",J="[object RegExp]",M="[object String]",V={};V[K]=!1,V[T]=V[$]=V[L]=V[z]=V[W]=V[G]=V[J]=V[M]=!0;var H={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},Q={a:"",b:null,c:"",d:"",
e:"",v:null,g:"",h:null,support:null,i:"",j:!1},X={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,nt=X[typeof exports]&&exports&&!exports.nodeType&&exports,tt=X[typeof module]&&module&&!module.nodeType&&module,et=tt&&tt.exports===nt&&nt,rt=X[typeof global]&&global;!rt||rt.global!==rt&&rt.window!==rt||(Z=rt);var ut=function g(e){function v(n){return n&&"object"==typeof n&&!qe(n)&&we.call(n,"__wrapped__")?n:new y(n)}function y(n,t){this.__chain__=!!t,this.__wrapped__=n}function Y(n,t,e,r,u){if(e){var o=e(n);if(void 0!==o
)return o}if(!xt(n))return n;var a=he.call(n);if(!V[a]||!Le.nodeClass&&f(n))return n;var l=Te[a];switch(a){case L:case z:return new l(+n);case W:case M:return new l(n);case J:return(o=l(n.source,S.exec(n))).lastIndex=n.lastIndex,o}if(a=qe(n),t){var p=!r;r||(r=i()),u||(u=i());for(var g=r.length;g--;)if(r[g]==n)return u[g];o=a?l(n.length):{}}else o=a?s(n):Ye({},n);return a&&(we.call(n,"index")&&(o.index=n.index),we.call(n,"input")&&(o.input=n.input)),t&&(r.push(n),u.push(o),(a?Xe:tr)(n,function(n,a){o[a]=Y(n,t,e,r,u)}),p&&(c(r),c(u))),o}function nt(n){return xt(n)?Se(n):{}}function tt(n,t,e){if("function"!=typeof n)return Ht;if(void 0===t||!("prototype"in n)
)return n;var r=n.__bindData__;if(void 0===r&&(Le.funcNames&&(r=!n.name),!(r=r||!Le.funcDecomp))){var u=be.call(n);Le.funcNames||(r=!A.test(u)),r||(r=B.test(u),ze(n,r))}if(!1===r||!0!==r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function rt(e,r){var u=-1,a=ht(),i=e?e.length:0,l=_<=i&&a===n,f=[];if(l){var c=o(r);c?(a=t,r=c):l=!1}for(;++u<i;)a(r,c=e[u])<0&&f.push(c);return l&&p(r),f}function ot(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){
var a=n[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(qe(a)||dt(a))){t||(a=ot(a,t,e));var i=-1,l=a.length,f=o.length;for(o.length+=l;++i<l;)o[f++]=a[i]}else e||o.push(a)}return o}function at(n,t,e,r,u,o){if(e&&void 0!==(a=e(n,t)))return!!a;if(n===t)return 0!==n||1/n==1/t;if(n==n&&!(n&&X[typeof n]||t&&X[typeof t]))return!1;if(null==n||null==t)return n===t;var l=he.call(n),p=he.call(t);if(l==T&&(l=G),p==T&&(p=G),l!=p)return!1;switch(l){case L:case z:return+n==+t;case W:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case J:case M:return n==ie(t)}if(!(p=l==$)){var s=we.call(n,"__wrapped__"),g=we.call(t,"__wrapped__");if(s||g)return at(s?n.__wrapped__:n,
g?t.__wrapped__:t,e,r,u,o);if(l!=G||!Le.nodeClass&&(f(n)||f(t)))return!1;if((l=!Le.argsObject&&dt(n)?oe:n.constructor)!=(s=!Le.argsObject&&dt(t)?oe:t.constructor)&&!(jt(l)&&l instanceof l&&jt(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}for(l=!u,u||(u=i()),o||(o=i()),s=u.length;s--;)if(u[s]==n)return o[s]==t;var h=0,a=!0;if(u.push(n),o.push(t),p){if(s=n.length,h=t.length,(a=h==s)||r)for(;h--;)if(p=s,g=t[h],r)for(;p--&&!(a=at(n[p],g,e,r,u,o)););else if(!(a=at(n[h],g,e,r,u,o)))break}else nr(t,function(t,i,l){return we.call(l,i)?(h++,a=we.call(n,i)&&at(n[i],t,e,r,u,o)):void 0}),a&&!r&&nr(n,function(n,t,e){return we.call(e,t
)?a=-1<--h:void 0});return u.pop(),o.pop(),l&&(c(u),c(o)),a}function it(n,t,e,r,u){(qe(t)?Dt:tr)(t,function(t,o){var a,i,l=t,f=n[o];if(t&&((i=qe(t))||er(t))){for(l=r.length;l--;)if(a=r[l]==t){f=u[l];break}var c;a||(e&&(c=void 0!==(l=e(f,t)))&&(f=l),c||(f=i?qe(f)?f:[]:er(f)?f:{}),r.push(t),u.push(f),c||it(f,t,e,r,u))}else e&&void 0===(l=e(f,t))&&(l=t),void 0!==l&&(f=l);n[o]=f})}function lt(n,t){return n+de(Fe()*(t-n+1))}function ft(e,r,u){var a=-1,l=ht(),f=e?e.length:0,s=[],g=!r&&_<=f&&l===n,h=u||g?i():s;for(g&&(h=o(h),l=t);++a<f;){var v=e[a],y=u?u(v,a,e):v;(r?!a||h[h.length-1]!==y:l(h,y)<0)&&((u||g)&&h.push(y),s.push(v))}return g?(c(h.k),p(h)):u&&c(h),s}
function ct(n){return function(t,e,r){var u={};if(e=v.createCallback(e,r,3),qe(t)){r=-1;for(var o=t.length;++r<o;){var a=t[r];n(u,a,e(a,r,t),t)}}else Xe(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function pt(n,t,e,r,u,o){var a=1&t,i=4&t,l=16&t,f=32&t;if(!(2&t||jt(n)))throw new le;l&&!e.length&&(t&=-17,l=e=!1),f&&!r.length&&(t&=-33,f=r=!1);var c=n&&n.__bindData__;return c&&!0!==c?((c=s(c))[2]&&(c[2]=s(c[2])),c[3]&&(c[3]=s(c[3])),!a||1&c[1]||(c[4]=u),!a&&1&c[1]&&(t|=8),!i||4&c[1]||(c[5]=o),l&&je.apply(c[2]||(c[2]=[]),e),f&&Ee.apply(c[3]||(c[3]=[]),r),c[1]|=t,pt.apply(null,c)):(1==t||17===t?function(n){function t(){if(r){var n=s(r);je.apply(n,arguments)}
if(this instanceof t){var o=nt(e.prototype);return xt(n=e.apply(o,n||arguments))?n:o}return e.apply(u,n||arguments)}var e=n[0],r=n[2],u=n[4];return ze(t,n),t}:function et(n){function t(){var n=l?a:this;if(u){var h=s(u);je.apply(h,arguments)}return(o||c)&&(h||(h=s(arguments)),o&&je.apply(h,o),c&&h.length<i)?(r|=16,et([e,p?r:-4&r,h,null,a,i])):(h||(h=arguments),f&&(e=n[g]),this instanceof t?(n=nt(e.prototype),xt(h=e.apply(n,h))?h:n):e.apply(n,h))}var e=n[0],r=n[1],u=n[2],o=n[3],a=n[4],i=n[5],l=1&r,f=2&r,c=4&r,p=8&r,g=e;return ze(t,n),t})([n,t,e,r,u,o])}function st(){Q.h=F,Q.b=Q.c=Q.g=Q.i="",Q.e="t",Q.j=!0;for(var n,t=0;n=arguments[t];t++)for(var e in n
)Q[e]=n[e];t=Q.a,Q.d=/^[^,]+/.exec(t)[0],n=ee,t="return function("+t+"){";var r="var n,t="+(e=Q).d+",E="+e.e+";if(!t)return E;"+e.i+";";e.b?(r+="var u=t.length;n=-1;if("+e.b+"){",Le.unindexedChars&&(r+="if(s(t)){t=t.split('')}"),r+="while(++n<u){"+e.g+";}}else{"):Le.nonEnumArgs&&(r+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+e.g+";}}else{"),Le.enumPrototypes&&(r+="var G=typeof t=='function';"),Le.enumErrorProps&&(r+="var F=t===k||t instanceof Error;");var u=[];if(Le.enumPrototypes&&u.push('!(G&&n=="prototype")'),Le.enumErrorProps&&u.push('!(F&&(n=="message"||n=="name"))'),e.j&&e.f
)r+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}";else if(r+="for(n in t){",e.j&&u.push("m.call(t, n)"),u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}",Le.nonEnumShadows){for(r+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;k<7;k++)r+="n='"+e.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",e.j||(r+="||(!x[n]&&t[n]!==A[n])"),r+="){"+e.g+"}";r+="}"}return(e.b||Le.nonEnumArgs)&&(r+="}"),n("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+(r+=e.c+";return E")+"}")(tt,q,ce,we,d,dt,qe,kt,Q.f,pe,X,$e,M,se,he)}
function gt(n){return Ve[n]}function ht(){var t=(t=v.indexOf)===zt?n:t;return t}function vt(n){return"function"==typeof n&&ve.test(n)}function yt(n){var t,e;return!(!n||he.call(n)!=G||jt(t=n.constructor)&&!(t instanceof t)||!Le.argsClass&&dt(n)||!Le.nodeClass&&f(n))&&(Le.ownLast?(nr(n,function(n,t,r){return e=we.call(r,t),!1}),!1!==e):(nr(n,function(n,t){e=t}),void 0===e||we.call(n,e)))}function mt(n){return He[n]}function dt(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==T||!1}function bt(n,t,e){var r=We(n),u=r.length;for(t=tt(t,e,3);u--&&!1!==t(n[e=r[u]],e,n););return n}function _t(n){var t=[];return nr(n,function(n,e){jt(n
)&&t.push(e)}),t.sort()}function wt(n){for(var t=-1,e=We(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function jt(n){return"function"==typeof n}function xt(n){return!(!n||!X[typeof n])}function Ct(n){return"number"==typeof n||n&&"object"==typeof n&&he.call(n)==W||!1}function kt(n){return"string"==typeof n||n&&"object"==typeof n&&he.call(n)==M||!1}function Et(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;)u[t]=n[e[t]];return u}function Ot(n,t,e){var r=-1,u=ht(),o=n?n.length:0,a=!1;return e=(e<0?Be(0,o+e):e)||0,qe(n)?a=-1<u(n,t,e):"number"==typeof o?a=-1<(kt(n)?n.indexOf(t,e):u(n,t,e)):Xe(n,function(n){return++r<e?void 0:!(a=n===t)}),a}
function St(n,t,e){var r=!0;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&(r=!!t(n[e],e,n)););}else Xe(n,function(n,e,u){return r=!!t(n,e,u)});return r}function At(n,t,e){var r=[];if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}}else Xe(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function It(n,t,e){var r;if(t=v.createCallback(t,e,3),!qe(n))return Xe(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r;e=-1;for(var u=n.length;++e<u;){var o=n[e];if(t(o,e,n))return o}}function Dt(n,t,e){if(t&&void 0===e&&qe(n)){e=-1;for(var r=n.length;++e<r&&!1!==t(n[e],e,n););}else Xe(n,t,e);return n
}function Nt(n,t,e){var r=n,u=n?n.length:0;if(t=t&&void 0===e?t:tt(t,e,3),qe(n))for(;u--&&!1!==t(n[u],u,n););else{if("number"!=typeof u){var o=We(n);u=o.length}else Le.unindexedChars&&kt(n)&&(r=n.split(""));Xe(n,function(n,e,a){return e=o?o[--u]:--u,t(r[e],e,a)})}return n}function Bt(n,t,e){var r=-1,u=n?n.length:0,o=Zt("number"==typeof u?u:0);if(t=v.createCallback(t,e,3),qe(n))for(;++r<u;)o[r]=t(n[r],r,n);else Xe(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function Pt(n,t,e){var u=-1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];o<i&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n
,function(n,e,r){e=t(n,e,r),u<e&&(u=e,o=n)});return o}function Rt(n,t,e,r){var u=arguments.length<3;if(t=v.createCallback(t,r,4),qe(n)){var o=-1,a=n.length;for(u&&(e=n[++o]);++o<a;)e=t(e,n[o],o,n)}else Xe(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)});return e}function Ft(n,t,e,r){var u=arguments.length<3;return t=v.createCallback(t,r,4),Nt(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)}),e}function Tt(n){var t=-1,e=n?n.length:0,r=Zt("number"==typeof e?e:0);return Dt(n,function(n){var e=lt(0,++t);r[t]=r[e],r[e]=n}),r}function $t(n,t,e){var r;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&!(r=t(n[e],e,n)););}else Xe(n,function(n,e,u){return!(r=t(n
,e,u))});return!!r}function Lt(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=v.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(null==(r=t)||e)return n?n[0]:h;return s(n,0,Pe(Be(0,r),u))}function zt(t,e,r){if("number"==typeof r){var u=t?t.length:0;r=r<0?Be(0,u+r):r||0}else if(r)return t[r=Kt(t,e)]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if("number"!=typeof t&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=v.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++}else r=null==t||e?1:Be(0,t);return s(n,r)}function Kt(n,t,e,r){var u=0,o=n?n.length:u;for(t=(e=e?v.createCallback(e,r,1):Ht)(t);u<o;)e(n[r=u+o>>>1])<t?u=r+1:o=r;return u}
function Wt(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(e=v.createCallback(e,r,3)),ft(n,t,e)}function Gt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?Pt(ar(n,"length")):0,r=Zt(e<0?0:e);++t<e;)r[t]=ar(n,t);return r}function Jt(n,t){var e=-1,r=n?n.length:0,u={};for(t||!r||qe(n[0])||(t=[]);++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?pt(n,17,s(arguments,2),null,t):pt(n,1,null,null,t)}function Vt(n,t,e){var r,u,o,a,i,l,f,c=0,p=!1,s=!0;if(!jt(n))throw new le;if(t=Be(0,t)||0,!0===e){var g=!0;s=!1}else xt(e)&&(g=e.leading,
p="maxWait"in e&&(Be(t,e.maxWait)||0),s="trailing"in e?e.trailing:s);var v=function(){var e=t-(ir()-a);0<e?l=Ce(v,e):(u&&me(u),e=f,u=l=f=h,e&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null)))},y=function(){l&&me(l),u=l=f=h,(s||p!==t)&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null))};return function(){if(r=arguments,a=ir(),i=this,f=s&&(l||!g),!1===p)var e=g&&!l;else{u||g||(c=a);var h=p-(a-c),m=h<=0;m?(u&&(u=me(u)),c=a,o=n.apply(i,r)):u||(u=Ce(y,h))}return m&&l?l=me(l):l||t===p||(l=Ce(v,t)),e&&(m=!0,o=n.apply(i,r)),!m||l||u||(r=i=null),o}}function Ht(n){return n}function Ut(n,t,e){var r=!0,u=t&&_t(t);t&&(e||u.length)||(null==e&&(e=t),o=y,t=n,n=v,u=_t(t)),!1===e?r=!1:xt(e
)&&"chain"in e&&(r=e.chain);var o=n,a=jt(o);Dt(u,function(e){var u=n[e]=t[e];a&&(o.prototype[e]=function(){var t=this.__chain__,e=this.__wrapped__,a=[e];if(je.apply(a,arguments),a=u.apply(n,a),r||t){if(e===a&&xt(a))return this;(a=new o(a)).__chain__=t}return a})})}function Qt(){}function Xt(n){return function(t){return t[n]}}function Yt(){return this.__wrapped__}var Zt=(e=e?ut.defaults(Z.Object(),e,ut.pick(Z,R)):Z).Array,ne=e.Boolean,te=e.Date,ee=e.Function,re=e.Math,ue=e.Number,oe=e.Object,ae=e.RegExp,ie=e.String,le=e.TypeError,fe=[],ce=e.Error.prototype,pe=oe.prototype,se=ie.prototype,ge=e._,he=pe.toString,ve=ae("^"+ie(he).replace(/[.*+?^${}()|[\]\\]/g,
"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ye=re.ceil,me=e.clearTimeout,de=re.floor,be=ee.prototype.toString,_e=vt(_e=oe.getPrototypeOf)&&_e,we=pe.hasOwnProperty,je=fe.push,xe=pe.propertyIsEnumerable,Ce=e.setTimeout,ke=fe.splice,Ee=fe.unshift,Oe=function(){try{var n={},t=vt(t=oe.defineProperty)&&t,e=t(n,n,n)&&t}catch(r){}return e}(),Se=vt(Se=oe.create)&&Se,Ae=vt(Ae=Zt.isArray)&&Ae,Ie=e.isFinite,De=e.isNaN,Ne=vt(Ne=oe.keys)&&Ne,Be=re.max,Pe=re.min,Re=e.parseInt,Fe=re.random,Te={};Te[$]=Zt,Te[L]=ne,Te[z]=te,Te[K]=ee,Te[G]=oe,Te[W]=ue,Te[J]=ae,Te[M]=ie;var $e={};$e[$]=$e[z]=$e[W]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$e[L]=$e[M]={
constructor:!0,toString:!0,valueOf:!0},$e[q]=$e[K]=$e[J]={constructor:!0,toString:!0},$e[G]={constructor:!0},function(){for(var n=F.length;n--;){var t,e=F[n];for(t in $e)we.call($e,t)&&!we.call($e[t],e)&&($e[t][e]=!1)}}(),y.prototype=v.prototype;var Le=v.support={};!function(){var n=function(){this.x=1},t={0:1,length:1},r=[];for(var u in n.prototype={valueOf:1,y:1},new n)r.push(u);for(u in arguments);Le.argsClass=he.call(arguments)==T,Le.argsObject=arguments.constructor==oe&&!(arguments instanceof Zt),Le.enumErrorProps=xe.call(ce,"message")||xe.call(ce,"name"),Le.enumPrototypes=xe.call(n,"prototype"),Le.funcDecomp=!vt(e.WinRTError)&&B.test(g),
Le.funcNames="string"==typeof ee.name,Le.nonEnumArgs=0!=u,Le.nonEnumShadows=!/valueOf/.test(r),Le.ownLast="x"!=r[0],Le.spliceObjects=(fe.splice.call(t,0,1),!t[0]),Le.unindexedChars="xx"!="x"[0]+oe("x")[0];try{Le.nodeClass=!(he.call(document)==G&&!({toString:0}+""))}catch(o){Le.nodeClass=!0}}(1),v.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:I,variable:"",imports:{_:v}},Se||(nt=function(){function n(){}return function(t){if(xt(t)){n.prototype=t;var r=new n;n.prototype=null}return r||e.Object()}}());var ze=Oe?function(n,t){U.value=t,Oe(n,"__bindData__",U)}:Qt;Le.argsClass||(dt=function(n){
return n&&"object"==typeof n&&"number"==typeof n.length&&we.call(n,"callee")&&!xe.call(n,"callee")||!1});var qe=Ae||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==$||!1},Ke=st({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),We=Ne?function(n){return xt(n)?Le.enumPrototypes&&"function"==typeof n||Le.nonEnumArgs&&n.length&&dt(n)?Ke(n):Ne(n):[]}:Ke,Ge={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:We,g:"if(e(t[n],n,g)===false)return E"},Je={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:We,
g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Me={i:"if(!B[typeof t])return E;"+Ge.i,b:!1},Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=wt(Ve),Ue=ae("("+We(He).join("|")+")","g"),Qe=ae("["+We(Ve).join("")+"]","g"),Xe=st(Ge),Ye=st(Je,{i:Je.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Ze=st(Je),nr=st(Ge,Me,{j:!1}),tr=st(Ge,Me);jt(/x/)&&(jt=function(n){return"function"==typeof n&&he.call(n)==K});var er=_e?function(n){if(!n||he.call(n)!=G||!Le.argsClass&&dt(n))return!1;var t=n.valueOf,e=vt(t)&&(e=_e(t))&&_e(e)
;return e?n==e||_e(n)==e:yt(n)}:yt,rr=ct(function(n,t,e){we.call(n,e)?n[e]++:n[e]=1}),ur=ct(function(n,t,e){(we.call(n,e)?n[e]:n[e]=[]).push(t)}),or=ct(function(n,t,e){n[e]=t}),ar=Bt,ir=vt(ir=te.now)&&ir||function(){return(new te).getTime()},lr=8==Re(j+"08")?Re:function(n,t){return Re(kt(n)?n.replace(D,""):n,t||0)};return v.after=function(n,t){if(!jt(t))throw new le;return function(){return--n<1?t.apply(this,arguments):void 0}},v.assign=Ye,v.at=function(n){var e=-1,r=ot(t=arguments,!0,!1,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Zt(t);for(Le.unindexedChars&&kt(n)&&(n=n.split(""));++e<t;)u[e]=n[r[e]];return u},v.bind=Mt,v.bindAll=function(n){for(
var t=1<arguments.length?ot(arguments,!0,!1,1):_t(n),e=-1,r=t.length;++e<r;){var u=t[e];n[u]=pt(n[u],1,null,null,n)}return n},v.bindKey=function(n,t){return 2<arguments.length?pt(t,19,s(arguments,2),null,n):pt(t,3,null,null,n)},v.chain=function(n){return(n=new y(n)).__chain__=!0,n},v.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},v.compose=function(){for(var n=arguments,t=n.length;t--;)if(!jt(n[t]))throw new le;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},v.constant=function(n){return function(){return n}},v.countBy=rr,v.create=function(n,t){var e=nt(n);return t?Ye(
e,t):e},v.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return tt(n,t,e);if("object"!=r)return Xt(n);var u=We(n),o=u[0],a=n[o];return 1!=u.length||a!=a||xt(a)?function(t){for(var e=u.length,r=!1;e--&&(r=at(t[u[e]],n[u[e]],null,!0)););return r}:function(n){return n=n[o],a===n&&(0!==a||1/a==1/n)}},v.curry=function(n,t){return pt(n,4,null,null,null,t="number"==typeof t?t:+t||n.length)},v.debounce=Vt,v.defaults=Ze,v.defer=function(n){if(!jt(n))throw new le;var t=s(arguments,1);return Ce(function(){n.apply(h,t)},1)},v.delay=function(n,t){if(!jt(n))throw new le;var e=s(arguments,2);return Ce(function(){n.apply(h,e)},t)},
v.difference=function(n){return rt(n,ot(arguments,!0,!0,1))},v.filter=At,v.flatten=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(n=Bt(n,e,r)),ot(n,t)},v.forEach=Dt,v.forEachRight=Nt,v.forIn=nr,v.forInRight=function(n,t,e){var r=[];nr(n,function(n,t){r.push(t,n)});var u=r.length;for(t=tt(t,e,3);u--&&!1!==t(r[u--],r[u],n););return n},v.forOwn=tr,v.forOwnRight=bt,v.functions=_t,v.groupBy=ur,v.indexBy=or,v.initial=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;return s(n,0,Pe(Be(0,u-r
),u))},v.intersection=function(){for(var e=[],r=-1,u=arguments.length,a=i(),l=ht(),f=l===n,s=i();++r<u;){var g=arguments[r];(qe(g)||dt(g))&&(e.push(g),a.push(f&&g.length>=_&&o(r?e[r]:s)))}var h=-1,v=(f=e[0])?f.length:0,y=[];n:for(;++h<v;){var m=a[0];if(g=f[h],(m?t(m,g):l(s,g))<0){for(r=u,(m||s).push(g);--r;)if(((m=a[r])?t(m,g):l(e[r],g))<0)continue n;y.push(g)}}for(;u--;)(m=a[u])&&p(m);return c(a),c(s),y},v.invert=wt,v.invoke=function(n,t){var e=s(arguments,2),r=-1,u="function"==typeof t,o=n?n.length:0,a=Zt("number"==typeof o?o:0);return Dt(n,function(n){a[++r]=(u?t:n[t]).apply(n,e)}),a},v.keys=We,v.map=Bt,v.mapValues=function(n,t,e){var r={}
;return t=v.createCallback(t,e,3),tr(n,function(n,e,u){r[e]=t(n,e,u)}),r},v.max=Pt,v.memoize=function(n,t){if(!jt(n))throw new le;var e=function(){var r=e.cache,u=t?t.apply(this,arguments):b+arguments[0];return we.call(r,u)?r[u]:r[u]=n.apply(this,arguments)};return e.cache={},e},v.merge=function(n){var t=arguments,e=2;if(!xt(n))return n;if("number"!=typeof t[2]&&(e=t.length),3<e&&"function"==typeof t[e-2])var r=tt(t[--e-1],t[e--],2);else 2<e&&"function"==typeof t[e-1]&&(r=t[--e]);t=s(arguments,1,e);for(var u=-1,o=i(),a=i();++u<e;)it(n,t[u],r,o,a);return c(o),c(a),n},v.min=function(n,t,e){var u=1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),
null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i<o&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){(e=t(n,e,r))<u&&(u=e,o=n)});return o},v.omit=function(n,t,e){var r={};if("function"!=typeof t){var u=[];nr(n,function(n,t){u.push(t)});for(var o=-1,a=(u=rt(u,ot(arguments,!0,!1,1))).length;++o<a;){var i=u[o];r[i]=n[i]}}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)||(r[e]=n)});return r},v.once=function(n){var t,e;if(!jt(n))throw new le;return function(){return t||(t=!0,e=n.apply(this,arguments),n=null),e}},v.pairs=function(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u}
,v.partial=function(n){return pt(n,16,s(arguments,1))},v.partialRight=function(n){return pt(n,32,null,s(arguments,1))},v.pick=function(n,t,e){var r={};if("function"!=typeof t)for(var u=-1,o=ot(arguments,!0,!1,1),a=xt(n)?o.length:0;++u<a;){var i=o[u];i in n&&(r[i]=n[i])}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},v.pluck=ar,v.property=Xt,v.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,a=t[e];++o<u;)n[o]===a&&(ke.call(n,o--,1),u--);return n},v.range=function(n,t,e){n=+n||0,null==t&&(t=n,n=0);var r=-1;t=Be(0,ye((t-n)/((e="number"==typeof e?e:+e||1)||1)));for(var u=Zt(t);++r<t;
)u[r]=n,n+=e;return u},v.reject=function(n,t,e){return t=v.createCallback(t,e,3),At(n,function(n,e,r){return!t(n,e,r)})},v.remove=function(n,t,e){var r=-1,u=n?n.length:0,o=[];for(t=v.createCallback(t,e,3);++r<u;)t(e=n[r],r,n)&&(o.push(e),ke.call(n,r--,1),u--);return o},v.rest=qt,v.shuffle=Tt,v.sortBy=function(n,t,e){var r=-1,o=qe(t),a=n?n.length:0,f=Zt("number"==typeof a?a:0);for(o||(t=v.createCallback(t,e,3)),Dt(n,function(n,e,u){var a=f[++r]=l();o?a.m=Bt(t,function(t){return n[t]}):(a.m=i())[0]=t(n,e,u),a.n=r,a.o=n}),a=f.length,f.sort(u);a--;)n=f[a],f[a]=n.o,o||c(n.m),p(n);return f},v.tap=function(n,t){return t(n),n},v.throttle=function(n,t,e){var r=!0,
u=!0;if(!jt(n))throw new le;return!1===e?r=!1:xt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),H.leading=r,H.maxWait=t,H.trailing=u,Vt(n,t,H)},v.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Zt(n);for(t=tt(t,e,1);++r<n;)u[r]=t(r);return u},v.toArray=function(n){return n&&"number"==typeof n.length?Le.unindexedChars&&kt(n)?n.split(""):s(n):Et(n)},v.transform=function(n,t,e,r){var u=qe(n);if(null==e)if(u)e=[];else{var o=n&&n.constructor;e=nt(o&&o.prototype)}return t&&(t=v.createCallback(t,r,4),(u?Xe:tr)(n,function(n,r,u){return t(e,n,r,u)})),e},v.union=function(){return ft(ot(arguments,!0,!0))},v.uniq=Wt,v.values=Et,v.where=At,
v.without=function(n){return rt(n,s(arguments,1))},v.wrap=function(n,t){return pt(t,16,[n])},v.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var e=arguments[n];if(qe(e)||dt(e))var r=r?ft(rt(r,e).concat(rt(e,r))):e}return r||[]},v.zip=Gt,v.zipObject=Jt,v.collect=Bt,v.drop=qt,v.each=Dt,v.eachRight=Nt,v.extend=Ye,v.methods=_t,v.object=Jt,v.select=At,v.tail=qt,v.unique=Wt,v.unzip=Gt,Ut(v),v.clone=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e=t,t=!1),Y(n,t,"function"==typeof e&&tt(e,r,1))},v.cloneDeep=function(n,t,e){return Y(n,!0,"function"==typeof t&&tt(t,e,1))},v.contains=Ot,v.escape=function(n){return null==n?"":ie(n).replace(Qe,gt)},
v.every=St,v.find=It,v.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=v.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},v.findKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),tr(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.findLast=function(n,t,e){var r;return t=v.createCallback(t,e,3),Nt(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r},v.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=v.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},v.findLastKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),bt(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.has=function(n,t){
return!!n&&we.call(n,t)},v.identity=Ht,v.indexOf=zt,v.isArguments=dt,v.isArray=qe,v.isBoolean=function(n){return!0===n||!1===n||n&&"object"==typeof n&&he.call(n)==L||!1},v.isDate=function(n){return n&&"object"==typeof n&&he.call(n)==z||!1},v.isElement=function(n){return n&&1===n.nodeType||!1},v.isEmpty=function(n){var t=!0;if(!n)return t;var e=he.call(n),r=n.length;return e==$||e==M||(Le.argsClass?e==T:dt(n))||e==G&&"number"==typeof r&&jt(n.splice)?!r:(tr(n,function(){return t=!1}),t)},v.isEqual=function(n,t,e,r){return at(n,t,"function"==typeof e&&tt(e,r,2))},v.isFinite=function(n){return Ie(n)&&!De(parseFloat(n))},v.isFunction=jt,v.isNaN=function(n){
return Ct(n)&&n!=+n},v.isNull=function(n){return null===n},v.isNumber=Ct,v.isObject=xt,v.isPlainObject=er,v.isRegExp=function(n){return n&&X[typeof n]&&he.call(n)==J||!1},v.isString=kt,v.isUndefined=function(n){return void 0===n},v.lastIndexOf=function(n,t,e){var r=n?n.length:0;for("number"==typeof e&&(r=(e<0?Be(0,r+e):Pe(e,r-1))+1);r--;)if(n[r]===t)return r;return-1},v.mixin=Ut,v.noConflict=function(){return e._=ge,this},v.noop=Qt,v.now=ir,v.parseInt=lr,v.random=function(n,t,e){var r=null==n,u=null==t;return null==e&&("boolean"==typeof n&&u?(e=n,n=1):u||"boolean"!=typeof t||(e=t,u=!0)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,e||n%1||t%1?(e=Fe(),Pe(n+e*(
t-n+parseFloat("1e-"+((e+"").length-1))),t)):lt(n,t)},v.reduce=Rt,v.reduceRight=Ft,v.result=function(n,t){if(n){var e=n[t];return jt(e)?n[t]():e}},v.runInContext=g,v.size=function(n){var t=n?n.length:0;return"number"==typeof t?t:We(n).length},v.some=$t,v.sortedIndex=Kt,v.template=function(n,t,e){var r=v.templateSettings;n=ie(n||""),e=Ze({},e,r);var u,o=Ze({},e.imports,r.imports),i=(r=We(o),o=Et(o),0),l=e.interpolate||N,f="__p+='";l=ae((e.escape||N).source+"|"+l.source+"|"+(l===I?O:N).source+"|"+(e.evaluate||N).source+"|$","g"),n.replace(l,function(t,e,r,o,l,c){return r||(r=o),f+=n.slice(i,c).replace(P,a),e&&(f+="'+__e("+e+")+'"),l&&(u=!0,
f+="';"+l+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),i=c+t.length,t}),f+="';",(l=e=e.variable)||(f="with("+(e="obj")+"){"+f+"}"),f=(u?f.replace(x,""):f).replace(C,"$1").replace(E,"$1;"),f="function("+e+"){"+(l?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var c=ee(r,"return "+f).apply(h,o)}catch(p){throw p.source=f,p}return t?c(t):(c.source=f,c)},v.unescape=function(n){return null==n?"":ie(n).replace(Ue,mt)},v.uniqueId=function(n){var t=++m;return ie(null==n?"":n)+t},v.all=St,v.any=$t,v.detect=It,v.findWhere=It,v.foldl=Rt,v.foldr=Ft,
v.include=Ot,v.inject=Rt,Ut(function(){var n={};return tr(v,function(t,e){v.prototype[e]||(n[e]=t)}),n}(),!1),v.first=Lt,v.last=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(null==(r=t)||e)return n?n[u-1]:h;return s(n,Be(0,u-r))},v.sample=function(n,t,e){return n&&"number"!=typeof n.length?n=Et(n):Le.unindexedChars&&kt(n)&&(n=n.split("")),null==t||e?n?n[lt(0,n.length-1)]:h:((n=Tt(n)).length=Pe(Be(0,t),n.length),n)},v.take=Lt,v.head=Lt,tr(v,function(n,t){var e="sample"!==t;v.prototype[t]||(v.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r)
;return u||null!=t&&(!r||e&&"function"==typeof t)?new y(o,u):o})}),v.VERSION="2.4.1",v.prototype.chain=function(){return this.__chain__=!0,this},v.prototype.toString=function(){return ie(this.__wrapped__)},v.prototype.value=Yt,v.prototype.valueOf=Yt,Xe(["join","pop","shift"],function(n){var t=fe[n];v.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);return n?new y(e,n):e}}),Xe(["push","reverse","sort","unshift"],function(n){var t=fe[n];v.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Xe(["concat","slice","splice"],function(n){var t=fe[n];v.prototype[n]=function(){return new y(t.apply(
this.__wrapped__,arguments),this.__chain__)}}),Le.spliceObjects||Xe(["pop","shift","splice"],function(n){var t=fe[n],e="splice"==n;v.prototype[n]=function(){var n=this.__chain__,r=this.__wrapped__,u=t.apply(r,arguments);return 0===r.length&&delete r[0],n||e?new y(u,n):u}}),v}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=ut,define("lodash",[],function(){return ut})):nt&&tt?et?(tt.exports=ut)._=ut:nt._=ut:Z._=ut}.call(this),define("json!i18ntr/messages.json",function(){return{serial:"58a5ba28402e2f44616249a138c56b51",date:1521453424,translations:{"Manage test takers":"Manage test-takers",
"Record and manage test takers.":"Record and manage test-takers.","Test takers library":"Test-takers library","Edit subject":"Edit test-taker","Test taker saved":"Test-taker saved","Test takers":"Test-takers","Test takers may be assigned to sets according to the relevant assessment context (Human resources management, education, edumetric monitoring, etc.).":"Assign test-takers to groups before scheduling tests for delivery.\0","The Test takers module allows to record and manage  test takers.":"Create and manage test-takers with as many properties as needed, such as name, address, gender, age, etc.\0"},version:"3.3.0-sprint72-"}}),define("context",["module"
],function(module){return module.config()}),define("core/format",["lodash"],function(_){"use strict";var pattern=/(%[sdj])/g;return function(message){var replacements=Array.prototype.slice.call(arguments,1);return _.reduce(message.match(pattern),function(acc,match,index){var replacement="";if(void 0!==replacements[index]){switch(match){case"%d":replacement=Number(replacements[index]);break;case"%j":try{replacement=JSON.stringify(replacements[index]).replace(/"/g,"")}catch(e){}break;default:replacement=replacements[index]}message=message.replace(match,replacement)}return message},message)}}),define("i18n",["lodash","json!i18ntr/messages.json","context",
"core/format"],function(_,i18nTr,context,format){"use strict";var translations=i18nTr.translations;return function(message){var localized=translations[message]?translations[message]:message;return 1<arguments.length&&(message=localized,localized=format.apply(null,arguments)),localized}}),define("tpl",["handlebars","i18n","lodash"],function(hb,__,_){var buildMap={},extension=".tpl";return hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",
wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),
hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)}),{load:function(name,req,onload,config){extension=extension||config.extension,config.isBuild?(buildMap[name]=fs.readFileSync(req.toUrl(name+extension)).toString(),onload()):req(["text!"+name+extension],function(raw){onload(hb.compile(raw))})},write:function(pluginName,moduleName,write){moduleName in buildMap&&write(
"define('tpl!"+moduleName+"', ['handlebars'], function(hb){ \nreturn hb.template("+hb.precompile(buildMap[moduleName]).toString()+");\n});\n")}}}),function(a,b){function J(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(I,"-$1").toLowerCase();if("string"==typeof(d=a.getAttribute(e))){try{d="true"===d||"false"!==d&&("null"===d?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d)}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a)if(("data"!==b||!p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function bi(a,b){for(;(
a=a[b])&&1!==a.nodeType;);return a}function bj(a,b,c){if(b=b||0,p.isFunction(b))return p.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if("string"==typeof b){var d=p.grep(a,function(a){return 1===a.nodeType});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return 0<=p.inArray(a,b)===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(
1===b.nodeType&&p.hasData(a)){var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h)for(c in delete g.handle,g.events={},h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d]);g.data&&(g.data=p.extend({},g.data))}}function bE(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),"object"===(c=b.nodeName.toLowerCase())?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)
):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando))}function bF(a){return void 0!==a.getElementsByTagName?a.getElementsByTagName("*"):void 0!==a.querySelectorAll?a.querySelectorAll("*"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bX(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bV.length;e--;)if((b=bV[e]+c)in a)return b;return d}function bY(a,b){return a=b||a,"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)}function bZ(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++
)(c=a[f]).style&&(e[f]=p._data(c,"olddisplay"),b?(!e[f]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&bY(c)&&(e[f]=p._data(c,"olddisplay",cb(c.nodeName)))):(d=bH(c,"display"),!e[f]&&"none"!==d&&p._data(c,"olddisplay",d)));for(f=0;f<g;f++)(c=a[f]).style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function b$(a,b,c){var d=bO.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function b_(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;e<4;e+=2)"margin"===c&&(f+=p.css(a,c+bU[e],!0)),d?("content"===c&&(f-=parseFloat(bH(a,"padding"+bU[e]))||0),"margin"!==c&&(
f-=parseFloat(bH(a,"border"+bU[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bU[e]))||0,"padding"!==c&&(f+=parseFloat(bH(a,"border"+bU[e]+"Width"))||0));return f}function ca(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&"border-box"===p.css(a,"boxSizing");if(d<=0){if(((d=bH(a,b))<0||null==d)&&(d=a.style[b]),bP.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+b_(a,b,c||(f?"border":"content"),e)+"px"}function cb(a){if(bR[a])return bR[a];var b=p("<"+a+">").appendTo(e.body),c=b.css("display");return b.remove(),"none"!==c&&""!==c||(bI=e.body.appendChild(bI||p.extend(
e.createElement("iframe"),{frameBorder:0,width:0,height:0})),bJ&&bI.createElement||((bJ=(bI.contentWindow||bI.contentDocument).document).write("<!doctype html><html><body>"),bJ.close()),b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)),bR[a]=c}function ch(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||cd.test(a)?d(a,e):ch(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==p.type(b))d(a,b);else for(e in b)ch(a+"["+e+"]",b[e],c,d)}function cy(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],(f=/^\+/.test(d
))&&(d=d.substr(1)||"*"),(a[d]=a[d]||[])[f?"unshift":"push"](c)}}function cz(a,c,d,e,f,g){(g=g||{})[f=f||c.dataTypes[0]]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===cu;j<k&&(l||!h);j++)"string"==typeof(h=i[j](c,d,e))&&(h=!l||g[h]?b:(c.dataTypes.unshift(h),cz(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=cz(a,c,d,e,"*",g)),h}function cA(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function cK(){try{return new a.XMLHttpRequest}catch(b){}}function cT(){return setTimeout(function(){cM=b},0),cM=p.now()}function cV(a,b,c){var d,e=0,g=cR.length,h=p.Deferred().always(function(){delete i.elem}),
i=function(){for(var b=cM||cT(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;e<f;e++)j.tweens[e].run(d);return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cM||cT(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){for(var c=0,d=b?j.tweens.length:0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(!function(a,b
){var c,d,e,f,g;for(c in a)if(d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=p.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}(k,j.opts.specialEasing);e<g;e++)if(d=cR[e].call(j,a,k,j.opts))return d;return function(a,b){p.each(b,function(b,c){for(var d=(cS[b]||[]).concat(cS["*"]),e=0,f=d.length;e<f;e++)if(d[e].call(a,b,c))return})}(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}
function cY(a,b,c,d,e){return new cY.prototype.init(a,b,c,d,e)}function cZ(a,b){for(var c,d={height:a},e=0;e<4;e+=2-b)d["margin"+(c=bU[e])]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function c_(a){return p.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=r.test("")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,
u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):"complete"===e.readyState&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"!=typeof a)return p.isFunction(a
)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this));if(!(f="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:u.exec(a))||!f[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(f[1])return i=(c=c instanceof p?c[0]:c)&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);if((g=e.getElementById(f[2]))&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},
toArray:function(){return k.call(this)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return-1===(a=+a)?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments
).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"!=typeof h&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);i<j;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],h!==(e=a[c])&&(k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(g=f?(f=!1,d&&p.isArray(d)?d:[]):d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e));return h},
p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(!0===a?!--p.readyWait:!p.isReady){if(!e.body)return setTimeout(p.ready,1);(p.isReady=!0)!==a&&0<--p.readyWait||(d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===p.type(a)},isArray:Array.isArray||function(a){return"array"===p.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):E[m.call(a)]||"object"},
isPlainObject:function(a){if(!a||"object"!==p.type(a)||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(
b=p.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):w.test(b.replace(y,"@").replace(z,"]").replace(x,""))?new Function("return "+b)():void p.error("Invalid JSON: "+b)):null},parseXML:function(c){var d;if(!c||"string"!=typeof c)return null;try{a.DOMParser?d=(new DOMParser).parseFromString(c,"text/xml"):((d=new ActiveXObject("Microsoft.XMLDOM")).async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},
nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d)if(h){for(e in a)if(!1===c.apply(a[e],d))break}else for(;f<g&&!1!==c.apply(a[f++],d););else if(h){for(e in a)if(!1===c.call(a[e],e,a[e]))break}else for(;f<g&&!1!==c.call(a[f],f,a[f++]););return a},trim:o?function(a){return null==a?"":o.call(a)}:function(a){return null==a?"":a.toString().replace(t,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=p.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b
){if(l)return l.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var e=[],f=0,g=a.length;for(c=!!c;f<g;f++)c!==!!b(a[f],f)&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length;if(a instanceof p||i!==b&&"number"==typeof i&&(0<i&&a[0]&&a[i-1]||0===i||p.isArray(a)))for(;h<i;h++)null!=(e=c(a[h],h,d))&&(g[g.length]=e);else for(f in a)null!=(e=c(a[f],f,d))&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(
a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),(f=function(){return a.apply(c,e.concat(k.call(arguments)))}).guid=a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&p.isFunction(e),j&&(c=i?(i=c,function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),null)),c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d)if(d=p.Deferred(),
"complete"===e.readyState||"loading"!==e.readyState&&e.addEventListener)setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1);else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=null==a.frameElement&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){
a="string"==typeof a?F[a]||function(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){for(c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;i&&h<g;h++)if(!1===i[h].apply(b[0],b[1])&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){!p.isFunction(c)||a.unique&&l.has(c)?c&&c.length&&d(c):i.push(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){for(var c;-1<(c=p.inArray(b,i,c));)i.splice(c,1),e&&(c<=g&&g--,
c<=h&&h--)}),this},has:function(a){return-1<p.inArray(a,i)},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=[a,(b=b||[]).slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){
return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return"object"==typeof a?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),
e},when:function(a){var h,i,j,b=0,c=k.call(arguments),d=c.length,e=1!==d||a&&p.isFunction(a.promise)?d:0,f=1===e?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=1<arguments.length?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}};if(1<d)for(h=new Array(d),i=new Array(d),j=new Array(d);b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e;return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");if(n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
c=n.getElementsByTagName("*"),(d=n.getElementsByTagName("a")[0]).style.cssText="top:1px;float:left;opacity:.5",!c||!c.length||!d)return{};g=(f=e.createElement("select")).appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:3===n.firstChild.nodeType,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===h.value,optSelected:g.selected,getSetAttribute:"t"!==n.className,enctype:!!e.createElement("form"
).enctype,html5Clone:"<:nav></:nav>"!==e.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===e.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}if(!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),(h=e.createElement("input")
).value="t",h.setAttribute("type","radio"),b.radioValue="t"===h.value,h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),(i=e.createDocumentFragment()).appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n),n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})(l=(j="on"+k)in n)||(n.setAttribute(j,"return;"),l="function"==typeof n[j]),b[k+"Bubbles"]=l;return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];i&&((c=e.createElement("div")
).style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(f=d.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===f[0].offsetHeight,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&0===f[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==i.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,(g=e.createElement("div")).style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),void 0!==d.style.zoom&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",
d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),i.removeChild(c),c=d=f=g=null)}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/^(?:\{.*\}|\[.*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return!!(a=a.nodeType?p.cache[a[p.expando]]:a[p.expando])&&!K(a)},data:function(a,c,d,e){if(p.acceptData(a)){var f,g,h=p.expando,i="string"==typeof c,j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b
)return l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop)),"object"!=typeof c&&"function"!=typeof c||(e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?null==(g=f[c])&&(g=f[p.camelCase(c)]):g=f,g}},removeData:function(a,b,c){if(p.acceptData(a)){var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(h[i]){if(b&&(d=c?h[i]:h[i].data)){p.isArray(b)||(b=b in d?[b]:(b=p.camelCase(b))in d?[b]:b.split(" "));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}(c||(delete h[i].data,K(h[i])))&&(g?p.cleanData([a],!0
):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null)}}},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a!==b)return"object"==typeof a?this.each(function(){p.data(this,a)}):((d=a.split(".",2))[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b)return(k=this.triggerHandler("getData"+e,[d[0]]))===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a
,c),b.triggerHandler("changeData"+e,d)})},null,c,1<arguments.length,null,!1));if(this.length&&(k=p.data(i),1===i.nodeType&&!p._data(i,"parsedAttrs"))){for(h=(f=i.attributes).length;j<h;j++)0===(g=f[j].name).indexOf("data-")&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,"parsedAttrs",!0)}return k},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.shift(),e=p._queueHooks(a,b);"inprogress"===d&&(d=c.shift()),d&&(
"fx"===b&&c.unshift("inprogress"),delete e.stop,d.call(a,function(){p.dequeue(a,b)},e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){
return a=p.fx&&p.fx.speeds[a]||a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)(d=p._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,
T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(
b=a.split(s),c=0,d=this.length;c<d;c++)if(1===(e=this[c]).nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=p.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(s),h=0,i=this.length;h<i;h++)if(1===(e=this[h]).nodeType&&e.className){for(d=(" "+e.className+" ").replace(O," "),f=0,g=c.length;f<g;f++)for(;-1<d.indexOf(" "+c[f]+" ");)d=d.replace(" "+c[f]+" "," ");e.className=a?p.trim(d):""}
return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=p(this),h=b,i=a.split(s);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else"undefined"!==c&&"boolean"!==c||(this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&-1<(" "+this[c].className+" ").replace(O," ").indexOf(b))return!0;return!1},
val:function(a){var c,d,e,f=this[0];return arguments.length?(e=p.isFunction(a),this.each(function(d){var f,g=p(this);1===this.nodeType&&(null==(f=e?a.call(this,d,g.val()):a)?f="":"number"==typeof f?f+="":p.isArray(f)&&(f=p.map(f,function(a){return null==a?"":a+""})),(c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))})):f?(c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==b?d:"string"==typeof(d=f.value)?d.replace(P,""):null==d?"":d:void 0}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text
}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(f<0)return null;for(c=i?f:0,d=i?f+1:h.length;c<d;c++)if((e=h[c]).selected&&(p.support.optDisabled?!e.disabled:null===e.getAttribute("disabled"))&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){if(b=p(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=0<=p.inArray(p(this).val(),c)}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&p.isFunction(
p.fn[c])?p(a)[c](d):void 0===a.getAttribute?p.prop(a,c,d):((h=1!==i||!p.isXMLDoc(a))&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L)),d!==b?null===d?void p.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:null===(f=a.getAttribute(c))?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(s);g<d.length;g++)(e=d[g])&&(c=p.propFix[e]||e,(f=T.test(e))||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(
!p.support.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return(1!==h||!p.isXMLDoc(a))&&(
c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return!0===e||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){var d;return!1===b?p.removeAttr(a,c):((d=p.propFix[c]||c)in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return(
d=a.getAttributeNode(c))&&(N[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){""===b&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),p.support.style||(p.attrHooks.style={
get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}})})
;var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=p._data(a))){for(d.handler&&(d=(o=d).handler,f=o.selector),d.guid||(d.guid=p.guid++),(i=g.events)||(g.events=i={}),(h=g.handle)||(g.handle=h=function(a){return void 0===p||a&&p.event.triggered===a.type?b:p.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=p.trim(_(c)).split(" "),j=0;j<c.length;j++)l=(
k=W.exec(c[j])||[])[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(".")},o),(q=i[l])||((q=i[l]=[]).delegateCount=0,r.setup&&!1!==r.setup.call(a,e,m,h)||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(r&&(m=r.events)){for(b=p.trim(_(
b||"")).split(" "),f=0;f<b.length;f++)if(h=i=(g=W.exec(b[f])||[])[1],j=g[2],h){for(n=p.event.special[h]||{},k=(o=m[h=(d?n.delegateType:n.bindType)||h]||[]).length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||"**"===d&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));0===o.length&&k!==o.length&&((!n.teardown||!1===n.teardown.call(a,j,r.handle))&&p.removeEvent(a,h,r.handle),delete m[h])}else for(h in m)p.event.remove(a,h+b[f],c,d,!0);p.isEmptyObject(m)&&(
delete r.handle,p.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||3!==f.nodeType&&8!==f.nodeType){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;if(0<=s.indexOf("!")&&(s=s.slice(0,-1),i=!0),0<=s.indexOf(".")&&(s=(t=s.split(".")).shift(),t.sort()),(!f||p.event.customEvent[s])&&!p.event.global[s])return;if((c="object"==typeof c?c[p.expando]?c:new p.Event(s,c):new p.Event(s)).type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"",!f){for(
j in h=p.cache)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}if(c.result=b,c.target||(c.target=f),(d=null!=d?p.makeArray(d):[]).unshift(c),(n=p.event.special[s]||{}).trigger&&!1===n.trigger.apply(f,d))return;if(q=[[f,n.bindType||s]],!g&&!n.noBubble&&!p.isWindow(f)){for(r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode,l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],(o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"))&&o.apply(k,d),(o=m&&k[m])&&p.acceptData(k)&&!1===o.apply(k,d
)&&c.preventDefault();return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||!1===n._default.apply(f.ownerDocument,d))&&("click"!==s||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&("focus"!==s&&"blur"!==s||0!==c.target.offsetWidth)&&!p.isWindow(f)&&((l=f[m])&&(f[m]=null),f[p.event.triggered=s](),p.event.triggered=b,l&&(f[m]=l)),c.result}},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=[].slice.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];if((r[0]=c).delegateTarget=this,!t.preDispatch||!1!==t.preDispatch.call(this,c)){if(q&&(
!c.button||"click"!==c.type))for((g=p(this)).context=this,f=c.target;f!=this;f=f.parentNode||this)if(!0!==f.disabled||"click"!==c.type){for(i={},k=[],g[0]=f,d=0;d<q;d++)i[m=(l=o[d]).selector]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);k.length&&u.push({elem:f,matches:k})}for(o.length>q&&u.push({elem:this,matches:o.slice(q)}),d=0;d<u.length&&!c.isPropagationStopped();d++)for(j=u[d],c.currentTarget=j.elem,e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++)l=j.matches[e],(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))&&(c.data=l.data,c.handleObj=l,(h=((p.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,r)
)!==b&&(!1===(c.result=h)&&(c.preventDefault(),c.stopPropagation())));return t.postDispatch&&t.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement
;return null==a.pageX&&null!=c.clientX&&(f=(d=a.target.ownerDocument||e).documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=1&h?1:2&h?3:4&h?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;for(a=p.Event(d),b=g.length;b;)a[c=g[--b]]=d[c];return a.target||(a.target=d.srcElement||e),3===a.target.nodeType&&(
a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){
a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(void 0===a[d]&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){
this.isPropagationStopped=bb;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,f=a.handleObj;f.selector;return e&&(e===this||p.contains(this,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(
p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)
)return"checkbox"!==this.type&&"radio"!==this.type||(p.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)})),!1;p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(
this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){0==c++&&e.addEventListener(a,d,!0)},teardown:function(){0==--c&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){for(h in"string"!=typeof c&&(d=d||c,c=b),a)this.on(h,c,d,a[h],f);return this}if(null==d&&null==e?(e=c,
d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),!1===e)e=ba;else if(!e)return this;return 1===f&&(g=e,(e=function(a){return p().off(a),g.apply(this,arguments)}).guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"!=typeof a)return!1!==c&&"function"!=typeof c||(d=c,c=b),!1===d&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)});for(f in a)this.off(f,c,a[f]);return this
},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid
)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return null==c&&(c=a,a=null),0<arguments.length?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(
p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bd(a,b,c,d){for(var e=0,f=b.length;e<f;e++)Z(a,b[e],c,d)}function be(a,b,c,d,e,f){var g,h=$.setFilters[b.toLowerCase()];return h||Z.error(b),(a||!(g=e))&&bd(a||"*",d,g=[],e),0<g.length?h(g,c,f):[]}function bf(a,c,d,e,f){for(var g,h,i,j,k,l,m,n,p=0,q=f.length,s=L.POS,t=new RegExp("^"+s.source+"(?!"+r+")","i"),u=function(){for(var a=1,c=arguments.length-2;a<c;a++)arguments[a]===b&&(g[a]=b)};p<q;p++){for(s.exec(""),a=f[p],j=[],i=0,k=e;g=s.exec(a);)i<(n=s.lastIndex=g.index+g[0].length)&&(m=a.slice(i,g.index),i=n,l=[c],B.test(m)&&(k&&(l=k),k=e),(h=H.test(m))&&(m=m.slice(0,-5).replace(B,"$&*")),
1<g.length&&g[0].replace(t,u),k=be(m,g[1],g[2],l,k,h));k?(j=j.concat(k),(m=a.slice(i))&&")"!==m?B.test(m)?bd(m,j,d,e):Z(m,c,d,e?e.concat(k):k):o.apply(d,j)):Z(a,c,d,e)}return 1===q?d:Z.uniqueSort(d)}function bh(a,b,e){var f=b.dir,g=m++;return a||(a=function(a){return a===e}),b.first?function(b,c){for(;b=b[f];)if(1===b.nodeType)return a(b,c)&&b}:function(b,e){for(var h,i=g+"."+d,j=i+"."+c;b=b[f];)if(1===b.nodeType){if((h=b[q])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[q]=j,a(b,e))return b.sizset=!0,b;b.sizset=!1}}}}function bi(a,b){return a?function(c,d){var e=b(c,d);return e&&a(!0===e?c:e,d)}:b}function bj(a,
b,c){for(var d,e,f=0;d=a[f];f++)e=$.relative[d.part]?bh(e,$.relative[d.part],b):(d.captures.push(b,c),bi(e,$.filter[d.part].apply(null,d.captures)));return e}var c,d,e,f,g,h=a.document,i=h.documentElement,j="undefined",k=!1,l=!0,m=0,n=[].slice,o=[].push,q=("sizcache"+Math.random()).replace(".",""),r="[\\x20\\t\\r\\n\\f]",s="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",t=s.replace("w","w#"),v="\\["+r+"*("+s+")"+r+"*(?:([*^$|!~]?=)"+r+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+t+")|)|)"+r+"*\\]",w=":("+s+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",
x=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",y=r+"*([\\x20\\t\\r\\n\\f>+~])"+r+"*",z="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+v+"|"+w.replace(2,7)+"|[^\\\\(),])+",A=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),B=new RegExp("^"+y),C=new RegExp(z+"?(?="+r+"*,|$)","g"),D=new RegExp("^(?:(?!,)(?:(?:^|,)"+r+"*"+z+")*?|"+r+"*(.*?))(\\)|$)"),E=new RegExp(z.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+y,"g"),F=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,G=/[\x20\t\r\n\f]*[+~]/,H=/:not\($/,I=/h\d/i,J=/input|select|textarea|button/i,K=/\\(?!\\)/g,L={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),NAME:new RegExp(
"^\\[name=['\"]?("+s+")['\"]?\\]"),TAG:new RegExp("^("+s.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+v),PSEUDO:new RegExp("^"+w),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),POS:new RegExp(x,"ig"),needsContext:new RegExp("^"+r+"*[>+~]|"+x,"i")},M={},N=[],O={},P=[],Q=function(a){return a.sizzleFilter=!0,a},R=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},S=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},T=function(a){var b=!1,c=h.createElement("div");try{b=a(c)}catch(d
){}return c=null,b},U=T(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),V=T(function(a){a.id=q+0,a.innerHTML="<a name='"+q+"'></a><div name='"+q+"'></div>",i.insertBefore(a,i.firstChild);var b=h.getElementsByName&&h.getElementsByName(q).length===2+h.getElementsByName(q+0).length;return g=!h.getElementById(q),i.removeChild(a),b}),W=T(function(a){return a.appendChild(h.createComment("")),0===a.getElementsByTagName("*").length}),X=T(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==j&&"#"===a.firstChild.getAttribute("href")}),Y=T(
function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!a.getElementsByClassName||0===a.getElementsByClassName("e").length)&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length)}),Z=function(a,b,c,d){c=c||[];var e,f,g,i,j=(b=b||h).nodeType;if(1!==j&&9!==j)return[];if(!a||"string"!=typeof a)return c;if(!(g=ba(b))&&!d&&(e=F.exec(a)))if(i=e[1]){if(9===j){if(!(f=b.getElementById(i))||!f.parentNode)return c;if(f.id===i)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(i))&&bb(b,f)&&f.id===i)return c.push(f),c}else{if(e[2])return o.apply(c,n.call(b.getElementsByTagName(a),0)),c;if((
i=e[3])&&Y&&b.getElementsByClassName)return o.apply(c,n.call(b.getElementsByClassName(i),0)),c}return bm(a,b,c,d,g)},$=Z.selectors={cacheLength:50,match:L,order:["ID","TAG"],attrHandle:{},createPseudo:Q,find:{ID:g?function(a,b,c){if(typeof b.getElementById!==j&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==j&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==j&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:W?function(a,b){if(typeof b.getElementsByTagName!==j)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"!==a)return c;for(var d,
e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(K,""),a[3]=(a[4]||a[5]||"").replace(K,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||Z.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&Z.error(a[0]),a},PSEUDO:function(a){var b,c=a[4];return L.CHILD.test(a[0])?null:(c&&(b=D.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),
c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:g?function(a){return a=a.replace(K,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(K,""),function(b){var c=typeof b.getAttributeNode!==j&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(K,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=M[a];return b||(b=M[a]=new RegExp("(^|"+r+")"+a+"("+r+"|$)"),N.push(a),N.length>$.cacheLength&&delete M[N.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==j&&a.getAttribute("class")||"")}},
ATTR:function(a,b,c){return b?function(d){var e=Z.attr(d,a),f=e+"";if(null==e)return"!="===b;switch(b){case"=":return f===c;case"!=":return f!==c;case"^=":return c&&0===f.indexOf(c);case"*=":return c&&-1<f.indexOf(c);case"$=":return c&&f.substr(f.length-c.length)===c;case"~=":return-1<(" "+f+" ").indexOf(c);case"|=":return f===c||f.substr(0,c.length+1)===c+"-"}}:function(b){return null!=Z.attr(b,a)}},CHILD:function(a,b,c,d){if("nth"!==a)return function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}};var e=m++
;return function(a){var b,f,g=0,h=a;if(1===c&&0===d)return!0;if((b=a.parentNode)&&(b[q]!==e||!a.sizset)){for(h=b.firstChild;h&&(1!==h.nodeType||(h.sizset=++g,h!==a));h=h.nextSibling);b[q]=e}return f=a.sizset-d,0===c?0===f:f%c==0&&0<=f/c}},PSEUDO:function(a,b,c,d){var e=$.pseudos[a]||$.pseudos[a.toLowerCase()];return e||Z.error("unsupported pseudo: "+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:Q(function(a,b,c){var d=bl(a.replace(A,"$1"),b,c);return function(a){return!d(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase()
;return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},parent:function(a){return!$.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},contains:Q(function(a){return function(b){return-1<(b.textContent||b.innerText||bc(b)).indexOf(a)}}),has:Q(function(a){return function(b){return 0<Z(a,b).length}}),header:function(a){return I.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type")
)||c.toLowerCase()===b)},radio:R("radio"),checkbox:R("checkbox"),file:R("file"),password:R("password"),image:R("image"),submit:S("submit"),reset:S("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return J.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){for(var d=[],e=c?1:0,f=a.length;e<f;e+=2)d.push(
a[e]);return d},odd:function(a,b,c){for(var d=[],e=c?0:1,f=a.length;e<f;e+=2)d.push(a[e]);return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}};$.setFilters.nth=$.setFilters.eq,$.filters=$.pseudos,X||($.attrHandle={href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}}),V&&($.order.push("NAME"),$.find.NAME=function(a,b){if(typeof b.getElementsByName!==j)return b.getElementsByName(a)}),Y&&($.order.splice(1,0,"CLASS"),$.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!==j&&!c
)return b.getElementsByClassName(a)});try{n.call(i.childNodes,0)[0].nodeType}catch(_){n=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}var ba=Z.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},bb=Z.contains=i.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:i.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},bc=Z.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if(
"string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=bc(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=bc(b);return c};Z.attr=function(a,b){var c,d=ba(a);return d||(b=b.toLowerCase()),$.attrHandle[b]?$.attrHandle[b](a):U||d?a.getAttribute(b):(c=a.getAttributeNode(b))?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null},Z.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},[0,0].sort(function(){return l=0}),i.compareDocumentPosition?e=function(a,b){return a===b?(k=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b
):a.compareDocumentPosition)?-1:1}:(e=function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return f(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var l=0;l<c&&l<d;l++)if(e[l]!==g[l])return f(e[l],g[l]);return l===c?f(a,g[l],-1):f(e[l],b,1)},f=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),Z.uniqueSort=function(a){var b,c=1;if(e&&(k=l,a.sort(e),k))for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a}
;var bl=Z.compile=function(a,b,c){var d,e,f,g=O[a];if(g&&g.context===b)return g;for(e=function(a,b,c){for(var d,e,f,g=[],i=0,j=D.exec(a),k=!j.pop()&&!j.pop(),l=k&&a.match(C)||[""],m=$.preFilter,n=$.filter,o=!c&&b!==h;null!=(e=l[i])&&k;i++)for(g.push(d=[]),o&&(e=" "+e);e;){for(f in k=!1,(j=B.exec(e))&&(e=e.slice(j[0].length),k=d.push({part:j.pop().replace(A," "),captures:j})),n)(j=L[f].exec(e))&&(!m[f]||(j=m[f](j,b,c)))&&(e=e.slice(j.shift().length),k=d.push({part:f,captures:j}));if(!k)break}return k||Z.error(a),g}(a,b,c),f=0;d=e[f];f++)e[f]=bj(d,b,c);return(g=O[a]=function(a){return function(b,c){for(var d,e=0;d=a[e];e++)if(d(b,c))return!0;return!1}}(e)
).context=b,g.runs=g.dirruns=0,P.push(a),P.length>$.cacheLength&&delete O[P.shift()],g};Z.matches=function(a,b){return Z(a,null,null,b)},Z.matchesSelector=function(a,b){return 0<Z(b,null,null,[a]).length};var bm=function(a,b,e,f,g){var h,i,j,k,l,m,p,q,r,s=(a=a.replace(A,"$1")).match(C),t=a.match(E),u=b.nodeType;if(L.POS.test(a))return bf(a,b,e,f,s);if(f)h=n.call(f,0);else if(s&&1===s.length){if(1<t.length&&9===u&&!g&&(s=L.ID.exec(t[0]))){if(!(b=$.find.ID(s[1],b,g)[0]))return e;a=a.slice(t.shift().length)}for(q=(s=G.exec(t[0]))&&!s.index&&b.parentNode||b,m=(r=t.pop()).split(":not")[0],j=0,k=$.order.length;j<k;j++)if(p=$.order[j],s=L[p].exec(m)){if(null==(
h=$.find[p]((s[1]||"").replace(K,""),q,g)))continue;m===r&&((a=a.slice(0,a.length-r.length)+m.replace(L[p],""))||o.apply(e,n.call(h,0)));break}}if(a)for(i=bl(a,b,g),d=i.dirruns++,null==h&&(h=$.find.TAG("*",G.test(a)&&b.parentNode||b)),j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l);return e};h.querySelectorAll&&function(){var a,b=bm,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[],f=[":active"],g=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;T(function(a){a.innerHTML="<select><option selected></option></select>",a.querySelectorAll("[selected]").length||e.push(
"\\["+r+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),T(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+r+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=e.length&&new RegExp(e.join("|")),bm=function(a,d,f,g,h){if(!(g||h||e&&e.test(a)))if(9===d.nodeType)try{return o.apply(f,n.call(d.querySelectorAll(a),0)),f}catch(i){}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var j=d.getAttribute("id"),k=j||q,l=G.test(a)&&d.parentNode||d;j?k=k.replace(c
,"\\$&"):d.setAttribute("id",k);try{return o.apply(f,n.call(l.querySelectorAll(a.replace(C,"[id='"+k+"'] $&")),0)),f}catch(i){}finally{j||d.removeAttribute("id")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,"div");try{g.call(b,"[test!='']:sizzle"),f.push($.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join("|")),Z.matchesSelector=function(b,c){if(c=c.replace(d,"='$1']"),!(ba(b)||f.test(c)||e&&e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(i){}return 0<Z(c,null,null,[b]).length})}(),Z.attr=p.attr,p.find=Z,p.expr=Z.selectors,p.expr[":"]=p.expr.pseudos,p.unique=Z.uniqueSort,p.text=Z.getText,p.isXMLDoc=Z.isXML,
p.contains=Z.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;b<c;b++)if(d=g.length,p.find(a,this[b],g),0<b)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(
a){return this.pushStack(bj(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?bf.test(a)?0<=p(a,this.context).index(this[0]):0<p.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=bf.test(a)||"string"!=typeof a?p(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?-1<g.index(c):p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=1<f.length?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?p.inArray(this[0],p(a)):p.inArray(
a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){
return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&"string"==typeof d&&(e=p.filter(d,e)),e=1<this.length&&!bg[a]?p.unique(e):e,1<this.length&&bd.test(a)&&(e=e.reverse()),
this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!p(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,
bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,
"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(
var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]
);d++)a&&!p.filter(a,[c]).length||(!b&&1===c.nodeType&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&p.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(bm,""):b;if("string"==typeof a&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(
p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++)1===(c=this[d]||{}).nodeType&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},
detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=0,j=(a=[].concat.apply([],a))[0],k=[],l=this.length;if(!p.support.checkClone&&1<l&&"string"==typeof j&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(f=(g=(e=p.buildFragment(a,this,k)).fragment).firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&p.nodeName(f,"tr"),h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0));g=f=null,k.length&&p.each(k,function(a,b){
b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return void 0===(c=((c=c||e)[0]||c).ownerDocument||c[0]||c).createDocumentFragment&&(c=e),1===a.length&&"string"==typeof i&&i.length<512&&c===e&&"<"===i.charAt(0)&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,h=(f=p.fragments[i])!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,
cacheable:g}},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;e<h;e++)d=(0<e?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;if(p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild)),!(
p.support.noCloneEvent&&p.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(bE(a,g),d=bF(a),e=bF(g),f=0;d[f];++f)e[f]&&bE(d[f],e[f]);if(b&&(bD(a,g),c))for(d=bF(a),e=bF(g),f=0;d[f];++f)bD(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,q,r,s=0,t=[];for(b&&void 0!==b.createDocumentFragment||(b=e),g=b===e&&bA;null!=(h=a[s]);s++)if("number"==typeof h&&(h+=""),h){if("string"==typeof h)if(br.test(h)){for(g=g||bk(b),l=l||g.appendChild(b.createElement("div")),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),k=(j=bz[i]||bz._default)[0],l.innerHTML=j[1]+h+j[2];k--;)l=l.lastChild;if(
!p.support.tbody)for(m=bq.test(h),f=(n="table"!==i||m?"<table>"!==j[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes).length-1;0<=f;--f)p.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l=g.lastChild}else h=b.createTextNode(h);h.nodeType?t.push(h):t=p.merge(t,h)}if(l&&(g.removeChild(l),h=l=g=null),!p.support.appendChecked)for(s=0;null!=(h=t[s]);s++)p.nodeName(h,"input")?bG(h):void 0!==h.getElementsByTagName&&p.grep(h.getElementsByTagName("input"),bG);if(c)for(q=function(a){if(!a.type||bx.test(
a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)},s=0;null!=(h=t[s]);s++)p.nodeName(h,"script")&&q(h)||(c.appendChild(h),void 0!==h.getElementsByTagName&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[s+1,0].concat(r)),s+=r.length));return t},cleanData:function(a,b){for(var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;null!=(e=a[g]);g++)if((b||p.acceptData(e))&&(c=(d=e[h])&&i[d])){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d
))}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},b={},(a=p.uaMatch(g.userAgent)).browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,((a.fn=a.prototype=this()).constructor=a).sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof p&&!(d instanceof a)&&(
d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^margin/,bO=new RegExp("^("+q+")(.*)$","i"),bP=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bQ=new RegExp("^([-+])=("+q+")","i"),bR={},bS={position:"absolute",visibility:"hidden",display:"block"},bT={letterSpacing:0,fontWeight:400,lineHeight:1},bU=["Top","Right","Bottom","Left"],bV=["Webkit","O","Moz","ms"],bW=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,1<arguments.length)},show:function(){return bZ(this,!0)},
hide:function(){return bZ(this)},toggle:function(a,b){var c="boolean"==typeof a;return p.isFunction(a)&&p.isFunction(b)?bW.apply(this,arguments):this.each(function(){(c?a:bY(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=p.camelCase(c),j=a.style;if(c=p.cssProps[i]||(p.cssProps[i]=bX(j,i)),h=p.cssHooks[c]||p.cssHooks[i],
d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if("string"===(g=typeof d)&&(f=bQ.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"===g&&!p.cssNumber[i]&&(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bX(a.style,i)),(h=p.cssHooks[c]||p.cssHooks[i])&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),"normal"===f&&c in bT&&(f=bT[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];for(e in d=c.call(a),b
)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(""===(c=g[b])&&!p.contains(a.ownerDocument.documentElement,a)&&(c=p.style(a,b)),bP.test(c)&&bN.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),bP.test(e)&&!bM.test(b)&&(c=f.left,(d=a.runtimeStyle&&a.runtimeStyle.left)&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,
d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return 0!==a.offsetWidth||"none"!==bH(a,"display")?ca(a,b,d):p.swap(a,bS,function(){return ca(a,b,d)})},set:function(a,c,d){return b$(0,c,d?b_(a,b,d,p.support.boxSizing&&"border-box"===p.css(a,"boxSizing")):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";(c.zoom=1)<=b&&""===p.trim(
f.replace(bK,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=bK.test(f)?f.replace(bK,e):f+" "+e)}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b)return bH(a,"marginRight")})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bP.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!p.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||bH(
a,"display"))},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bU[d]+b]=e[d]||e[d-2]||e[0];return f}},bN.test(a)||(p.cssHooks[a+b].set=b$)});var cc=/%20/g,cd=/\[\]$/,ce=/\r?\n/g,cf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,cg=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){
return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cg.test(this.nodeName)||cf.test(this.type))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(ce,"\r\n")}}):{name:b.name,value:c.replace(ce,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(
d in a)ch(d,a[d],c,f);return e.join("&").replace(cc,"+")};var ci,cj,ck=/#.*$/,cl=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,cn=/^(?:GET|HEAD)$/,co=/^\/\//,cp=/\?/,cq=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cr=/([?&])_=[^&]*/,cs=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,ct=p.fn.load,cu={},cv={},cw=["*/"]+["*"];try{ci=f.href}catch(cx){(ci=e.createElement("a")).href="",ci=ci.href}cj=cs.exec(ci.toLowerCase())||[],p.fn.load=function(a,c,d){if("string"!=typeof a&&ct)return ct.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return 0<=i&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b
):"object"==typeof c&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cq,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b
){return b?cA(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cA(a,b),a},ajaxSettings:{url:ci,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(cj[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cw},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cy(cu),ajaxTransport:cy(
cv),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;2!==v&&(v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=0<a?4:0,f&&(u=function(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}(l,x,f)),200<=a&&a<300||304===a?(l.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(p.lastModified[d]=w),(w=x.getResponseHeader("Etag")
)&&(p.etag[d]=w)),k=304===a?(y="notmodified",!0):(y=(k=function(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(!(c=i[h+" "+e]||i["* "+e]))for(d in i)if((f=d.split(" "))[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){!0===c?c=i[d]:!0!==i[d]&&(e=f[0],g.splice(j--,0,e));break}if(!0!==c)if(c&&a.throws)b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}(l,u)).state,s=k.data,!(t=k.error))):(t=y)&&!a||(y="error",a<0&&(
a=0)),x.status=a,x.statusText=""+(c||y),k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return 2===v?e:null},
getResponseHeader:function(a){var c;if(2===v){if(!f)for(f={};c=cl.exec(e);)f[c[1].toLowerCase()]=c[2];c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};if(o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){var b;if(a)if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b);return this},l.url=((a||l.url)+"").replace(ck,"").replace(co,cj[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),null==l.crossDomain&&(i=cs.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==cj[1]&&i[2]==cj[2]&&(
i[3]||("http:"===i[1]?80:443))==(cj[3]||("http:"===cj[1]?80:443)))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=p.param(l.data,l.traditional)),cz(cu,l,c,x),2===v)return x;if(j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!cn.test(l.type),j&&0==p.active++&&p.event.trigger("ajaxStart"),!l.hasContent&&(l.data&&(l.url+=(cp.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url,!1===l.cache)){var z=p.now(),A=l.url.replace(cr,"$1_="+z);l.url=A+(A===l.url?(cp.test(l.url)?"&":"?")+"_="+z:"")}for(k in(l.data&&l.hasContent&&!1!==l.contentType||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,
p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+cw+"; q=0.01":""):l.accepts["*"]),l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||!1!==l.beforeSend.call(m,x,l)&&2!==v){for(k in w="abort",{success:1,error:1,complete:1})x[k](l[k]);if(g=cz(cv,l,c,x)){x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&0<l.timeout&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(!(v<2))throw B;y(-1,B)}}else y(-1,
"No Transport");return x}return x.abort()},active:0,lastModified:{},etag:{}});var cD=[],cE=/\?/,cF=/(=)\?(?=&|$)|\?\?/,cG=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cD.pop()||p.expando+"_"+cG++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=!1!==c.jsonp,l=k&&cF.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cF.test(i);if("jsonp"===c.dataTypes[0]||l||m)return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cF,"$1"+f):m?c.data=i.replace(cF,"$1"+f):k&&(c.url+=(cE.test(j
)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cD.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(
a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){(c=e.createElement("script")).async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cH,cI=!!a.ActiveXObject&&function(){for(var a in cH)cH[a](0,1)},cJ=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cK()||function(){try{
return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}()}:cK,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){var d;if(!c.crossDomain||p.support.cors)return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(
c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=p.noop,cI&&delete cH[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},(m=i.responseXML)&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++cJ,cI&&(cH||(cH={},p(a).unload(cI)),cH[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}});var cM,cN,cO=/^(?:toggle|show|hide)$/,cP=new RegExp(
"^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cQ=/queueHooks$/,cR=[function(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bY(a);for(d in c.queue||(null==(j=p._queueHooks(a,"fx")).unqueued&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===p.css(a,"display")&&"none"===p.css(a,"float")&&(p.support.inlineBlockNeedsLayout&&"inline"!==cb(a.nodeName)?m.zoom=1:m.display="inline-block")),c.overflow&&(m.overflow="hidden",
p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]})),b)if(f=b[d],cO.exec(f)){if(delete b[d],f===(q?"hide":"show"))continue;o.push(d)}if(g=o.length)for(h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;for(b in p.removeData(a,"fxshow",!0),n)p.style(a,b,n[b])}),d=0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start="width"===e||"height"===e?1:0))}],cS={"*":[function(a,b){var c,d,e,f=this.createTween(a,b),g=cP.exec(b),h=f.cur(),i=+h||0,j=1;if(g){if(c=+g[2],
"px"!==(d=g[3]||(p.cssNumber[a]?"":"px"))&&i)for(i=p.css(f.elem,a,!0)||c||1;e=j=j||".5",i/=j,p.style(f.elem,a,i+d),1!==(j=f.cur()/h)&&j!==e;);f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};p.Animation=p.extend(cV,{tweener:function(a,b){for(var c,d=0,e=(a=p.isFunction(a)?(b=a,["*"]):a.split(" ")).length;d<e;d++)c=a[d],cS[c]=cS[c]||[],cS[c].unshift(b)},prefilter:function(a,b){b?cR.unshift(a):cR.push(a)}}),((p.Tween=cY).prototype={constructor:cY,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){
var a=cY.propHooks[this.prop];return a&&a.get?a.get(this):cY.propHooks._default.get(this)},run:function(a){var b,c=cY.propHooks[this.prop];return this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cY.propHooks._default.set(this),this}}).init.prototype=cY.prototype,(cY.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=p.css(a.elem,a.prop,!1,""))&&"auto"!==b?b:0:a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a
):a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}}).scrollTop=cY.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(cZ(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bY).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){
var b=cV(this,p.extend({},a),f);e&&b.stop(!0)};return e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cQ.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(null==a||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:cZ("show"),slideUp:cZ("hide"),slideToggle:cZ("toggle"),fadeIn:{opacity:"show"},fadeOut:{
opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&"object"==typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};return d.duration=p.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},
p.timers=[],p.fx=cY.prototype.init,p.fx.tick=function(){for(var a,b=p.timers,c=0;c<b.length;c++)!(a=b[c])()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cN&&(cN=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cN),cN=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c$=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j,
m=this[0],n=m&&m.ownerDocument;return n?(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=c_(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,{top:c.top+i-g,left:c.left+j-h}):{top:0,left:0}):void 0},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");"static"===d&&(a.style.position="relative");var l,m,e=p(a),f=e.offset(
),g=p.css(a,"top"),h=p.css(a,"left"),j={},k={};m=("absolute"===d||"fixed"===d)&&-1<p.inArray("auto",[g,h])?(l=(k=e.position()).top,k.left):(l=parseFloat(g)||0,parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),null!=b.top&&(j.top=b.top-f.top+l),null!=b.left&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=c$.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],
"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||e.body;a&&!c$.test(a.nodeName)&&"static"===p.css(a,"position");)a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=c_(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a}
,function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(!0===e||!0===f?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g)}})}),a.jQuery=a.$=p,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})}(window),define("jquery.cookie",["jquery"],function(jQuery){jQuery.cookie=function(name,value,options){if(void 0===value){
var cookieValue=null;if(document.cookie&&""!=document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue}options=options||{},null===value&&(value="",options.expires=-1);var date,expires="";options.expires&&("number"==typeof options.expires||options.expires.toUTCString)&&("number"==typeof options.expires?(date=new Date).setTime(date.getTime()+24*options.expires*60*60*1e3):date=options.expires,expires="; expires="+date.toUTCString())
;var path=options.path?"; path="+options.path:"",domain=options.domain?"; domain="+options.domain:"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")}}),define("jqueryui",["jquery"],function(jQuery){var a,c;!function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"!==e)return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e&&b.href||c)&&d(b);var h,f=b.parentNode,g=f.name;return!(!b.href||!g||"map"!==f.nodeName.toLowerCase())&&(!!(h=a("img[usemap=#"+g+"]")[0])&&d(h))}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(
this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d
).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(
c!==b)return this.css("zIndex",c);if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(("absolute"===(e=d.css("position"))||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(
a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}
):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||0<=d)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},
call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return 0<b[d]||(b[d]=1,e=0<b[d],b[d]=0,e)},isOverAxis:function(a,b,c){return b<a&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var e,d=0;null!=(e=b[d]
);d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var f,e=b.split(".")[0];f=e+"-"+(b=b.split(".")[1]),d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,
widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)||(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))})),h}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",
options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];(e={})[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,
g=this.options[b];if(d=d||{},(c=a.Event(c)).type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&!1===g.call(this.element[0],c,d)||c.isDefaultPrevented())}}}(jQuery),a=jQuery,c=!1,a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent")
)return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1==b.which,f=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return e&&!f&&this._mouseCapture(b)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(
this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?b.preventDefault():(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0)),!0}},_mouseMove:function(b){
return!a.browser.msie||9<=document.documentMode||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},
_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}}),function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var l,m,n,h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0];return n=9===i.nodeType?(
l=h.width(),m=h.height(),{top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),{top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,{top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");1===a.length&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),1===j.length&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,1===k.length&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,"right"===b.at[0]?n.left+=l:b.at[0]===e&&(n.left+=l/2),"bottom"===b.at[1]?n.top+=m:b.at[1]===e&&(n.top+=m/2),
n.left+=k[0],n.top+=k[1],this.each(function(){var r,c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n);"right"===b.my[0]?q.left-=d:b.my[0]===e&&(q.left-=d/2),"bottom"===b.my[1]?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,
collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=0<e?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=0<e?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==e){var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),
g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:0<f?g+h+i:0}},top:function(b,c){if(c.at[1]!==e){var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:0<f?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",
!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?a.isFunction(b)?this.each(function(c){a(this).offset(b.call(this,c,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,b)}):h.call(this):null}),a.curCSS||(a.curCSS=a.css),function(){var d,e,g,h,i,b=document.getElementsByTagName("body")[0],c=document.createElement("div");for(var j in d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",
top:"-1000px"}),g)d.style[j]=g[j];d.appendChild(c),(e=b||document.documentElement).insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=21<i&&i<22}()}(jQuery),function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,
scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){
var c=this.options;return!(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(b),!!this.handle&&(c.iframeFix&&a(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0))},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),
this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(
this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},
_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==f._trigger("stop",b)&&f._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},
_mouseUp:function(b){return!0===this.options.iframeFix&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])
):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(
this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css(
"borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),"document"!=b.containment&&"window"!=b.containment||(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a(
"document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;c.offset();var f="hidden"!=a(d).css("overflow");this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css(
"borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName)
;return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,
e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY
)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),
left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{
helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.23"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(
this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(
this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,
this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)
})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this
).data("draggable");d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(e.axis&&"x"==e.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed)),e.axis&&"y"==e.axis||(
d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed))):(e.axis&&"x"==e.axis||(b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed))),e.axis&&"y"==e.axis||(b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(
document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)))),!1!==f&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){for(var d=a(this).data(
"draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;0<=k;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{
top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(
c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b
).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",
tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},
_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(
this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(
b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return!(e=!0)}),!e&&(!!this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element))},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.23"}),
a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click
).top;return a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);case"touch":return(k<=g&&g<=l||k<=h&&h<=l||g<k&&l<h)&&(i<=e&&e<=j||i<=f&&f<=j||e<i&&j<f);default:return!1}},a.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++)if(!(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))){for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible="none"!=d[h].element.css("display"),
d[h].visible&&("mousedown"==e&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",
function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&((f=a.data(g[0],"droppable")).greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,
this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),
a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({
marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element
).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),h=a('<div class="ui-resizable-handle '+("ui-resizable-"+f)+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){for(var c in b=b||this.element,this.handles){
if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var e,d=a(this.handles[c],this.element);e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(
/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(
this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left
}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},
this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,g=(this.options,this.originalMousePosition),h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]);a.browser.msie&&a.browser.version,this.sizeDiff;return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(l=this._updateRatio(l,b)),
l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(
d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var c,e,f,g,h,b=this.options;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:1/0,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight
)?b.maxHeight:1/0},(this._aspectRatio||a)&&(c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g)),this._vBoundaries=h},_updateCache:function(a){this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){this.options;var e=this.position,f=this.size,g=this.axis;return d(a.height
)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==g&&(a.left=e.left+(f.width-a.width),a.top=null),"nw"==g&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){this.helper;var e=this._vBoundaries,g=(this._aspectRatio||b.shiftKey,this.axis),h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight)
;var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var c=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css(
"borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){return(parseInt(a,10)||0)+(parseInt(g[b],10)||0)})}a.browser.msie&&(a(c).is(":hidden")||a(c).parents(":hidden").length)||e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1
;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){this.options;var e=this.originalSize;return{left:this.originalPosition.left+b,width:e.width-b}},n:function(a,b,c){this.options;var e=this.originalSize;return{top:this.originalPosition.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},
se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,
position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.23"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var e=a(this).data("resizable").options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?f(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)})},resize:function(b,c){
var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&0<=c&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(b,c){a(this).removeData(
"resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10
),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(i)if(e.containerElement=a(i),/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height(
)||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,g=(d.containerSize,d.containerOffset),i=(d.size,d.position),j=d._aspectRatio||b.shiftKey,k={top:0,
left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper,d.offset.left-k.left+d.sizeDiff.width)),n=Math.abs((
d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,g=(d.position,d.containerOffset),h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,
m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(
this).data("resizable");d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable");d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis;e._aspectRatio||b.shiftKey;e.grid="number"==typeof e.grid?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,
d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):(/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l),d.position.left=h.left-k)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a,b){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c,b=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(c=a(b.options.filter,b.element[0])
).addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable"
).unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target
).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,(d.selected=e)?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(g<e){var i=g;g=e,e=i}if(h<f){i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),
this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(
i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected"
,b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.23"})}(jQuery),function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",
opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--
)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var e=null,f=this;a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==f)return e=a(this),!1});if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var h=!1;if(a(this.options.handle,e).find("*"
).andSelf().each(function(){this==b.target&&(h=!0)}),!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css(
"position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",
e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;0<=g;g--)this.containers[g]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b
),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),
this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft(
)-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),!1!==d&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;0<=e;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&!(g==this.currentItem[0]||this.placeholder[1==h?"next":"prev"](
)[0]==g||a.ui.contains(this.placeholder[0],g)||"semi-dynamic"==this.options.type&&a.ui.contains(this.element[0],g))){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({
left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("deactivate",null,this._uiHash(this)),
this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,this._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(
function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=h<d+j&&d+j<i&&f<b+k&&b+k<g
;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),
g=this._getDragHorizontalDirection();return!!e&&(this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1))},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){
var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;0<=g;g--)for(var h=a(f[g]),i=h.length-1;0<=i;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}e.push([
a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(g=e.length-1;0<=g;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,e=[[a.isFunction(this.options.items)?this.options.items.call(
this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;0<=g;g--)for(var h=a(f[g]),i=h.length-1;0<=i;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}for(g=e.length-1;0<=g;g--)for(var k=e[g][1],l=e[g][0],m=(i=0,l.length);i<m;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){
this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;0<=c;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;0<=c;c--){f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,
this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){e&&!d.forcePlaceholderSize||(b.height()||b.height(
c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;0<=e;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(
this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;0<=i;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset(
).left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=0<j-h?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b
,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "))
,a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(
this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css(
"marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),"document"!=b.containment&&"window"!=b.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height(
)||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0
)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:(
"fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(
this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment&&(
h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),
left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(
this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)"auto"!=this._storedCSS[f]&&"static"!=this._storedCSS[f]||(this._storedCSS[f]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())}),!a.ui.contains(this.element[0],this.currentItem[0])){
c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(f=this.containers.length-1;0<=f;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(f=this.containers.length-1;0<=f;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,
this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!(this.fromOutside=!1)},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.23"})}(jQuery),function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,
event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){
c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),
b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault(
)})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass(
"ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){
a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return!f||(a(b.target).attr(
"tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1)}},resize:function(){var c,b=this.options;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){
this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):!1===b?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled)if(b.target){var h=a(b.currentTarget||c),i=h[0]===this.active[0];if(d.active=(!d.collapsible||!i)&&this.headers.index(h),!(this.running||!d.collapsible&&i)){var j=this.active,k=(g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},
this.headers.index(this.active[0])>this.headers.index(h[0]));this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"))}}else{if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon"
).removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f)}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(g)return g._completed.apply(g,arguments)};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){var j={};j=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,
autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},
_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.23",animations:{slide:function(b,c){if((b=a.extend({easing:"swing",duration:300},b,c)).toHide.size())if(b.toShow.size()){var i,d=b.toShow.css("overflow"),e=0,f={},g={},j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css(
"paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(["height","paddingTop","paddingBottom"],function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){"height"==c.prop&&(e=c.end-c.start==0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({
width:i,overflow:d}),b.complete()}})}else b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);else b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var d,b=this,c=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr(
"autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!b.options.disabled&&!b.element.propAttr("readOnly")){d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){
b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){b.options.disabled||(b.selectedItem=null,b.previous=b.element.val())}).bind("blur.autocomplete",function(a){b.options.disabled||(clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one(
"mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){
b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){
a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var c,d,b=this;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):"string"==typeof this.options.source?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){
return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),!1!==this._trigger("search",b)?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),
this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),
this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))return this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b);this.search(null,b)},widget:function(){
return this.menu.element},_keyEvent:function(a,b){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a"
).length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):e<=c&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id",
"ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(this.active){var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))
}else this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&-10<b});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()
)return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&-10<b});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a,b){var c,d,e,f,
g="ui-button ui-widget ui-state-default ui-corner-all",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),
"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";null===h.label&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this
).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){f||b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup.button",function(a){h.disabled||d===a.pageX&&e===a.pageY||(f=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr(
"aria-pressed",b.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(
h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){if(this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),
b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" ui-state-hover ui-state-active  "+i).removeAttr("role"
).removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"disabled"!==b?this._resetButton():c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget"
).removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var b=this.buttonElement.removeClass(i),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),
d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){
"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button(
"widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this
).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog",
"aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),i=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i);(
b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog"
).removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var d,e,c=this;if(!1!==c._trigger("beforeClose",b))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),
a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var f,d=this,e=d.options;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(
c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(
".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){"click"!==a&&(a in e?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var e,b=this,c=b.options,d=a(document);b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){
e="auto"===c.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=void 0===c?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),
g="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){
var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var e,c=[],d=[0,0];b=b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(1===(c=b.split?b.split(" "):[b[0],b[1]]).length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")}),a.extend({},a.ui.dialog.prototype.options.position,b)):a.ui.dialog.prototype.options.position,(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b
,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d)
;break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),!h&&!1!==d&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var c,d,b=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c),"auto"===b.height)if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{
this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){
return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()})
;return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?a(window).height()+"px":b+"px":a(document).height()+"px"},width:function(){var b
;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))<Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)?a(window).width()+"px":b+"px":a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a,b){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,
orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(!0===d.range&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[
d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;i<g;i+=1)h.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus"
).removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var g,h,i,e=a(this).data("index.ui-slider-handle");if(!b.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!b._keySliding&&(b._keySliding=!0,a(this).addClass("ui-state-active"),!1===b._start(d,e)))return}switch(i=b.options.step,
g=h=b.options.values&&b.options.values.length?b.values(e):b.value(),d.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===b._valueMin())return;h=b._trimAlignValue(g-i)}b._slide(d,e,h)}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,
b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var d,e,f,g,h,i,k,l,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax(
)-this._valueMin()+1,(h=this).handles.each(function(b){var c=Math.abs(e-h.values(b));c<f&&(f=c,g=a(this),i=b)}),!0===c.range&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),!1!==this._start(b,i)&&(this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0))},
_mouseStart:function(a){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,d,e,f;return 1<(d=("horizontal"===this.orientation?(b=this.elementSize.width,a.x-this.elementOffset.left-(
this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/b)&&(d=1),d<0&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&!0===this.options.range&&(
0===b&&d<c||1===b&&c<d)&&(c=d),c!==this.values(b)&&((e=this.values())[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),!1!==f&&this.values(b,c,!0))):c!==this.value()&&(!1!==(f=this._trigger("slide",a,{handle:this.handles[b],value:c}))&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(
c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(1<arguments.length)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(b))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=b,f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},
_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),
this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c
)>=b&&(d+=0<c?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var f,h,i,j,k,b=this.options.range,c=this.options,d=this,e=!this._animateOff&&c.animate,g={};this.options.values&&this.options.values.length?this.handles.each(function(b,i){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g["horizontal"===d.orientation?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),!0===d.options.range&&("horizontal"===d.orientation?(0===b&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),1===b&&d.range[e?"animate":"css"]({
width:f-h+"%"},{queue:!1,duration:c.animate})):(0===b&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate),1===b&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g["horizontal"===d.orientation?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),"min"===b&&"horizontal"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),"max"===b&&"horizontal"===this.orientation&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate}),
"min"===b&&"vertical"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),"max"===b&&"vertical"===this.orientation&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.23"})}(jQuery),function(a,b){var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},
_create:function(){this._tabify(!0)},_setOption:function(a,b){if("selected"==a){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++c},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++d);return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing"
).removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var k,l,d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var i,g=a(c).attr("href"),h=g.split("#")[0];if(h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g),f.test(g)
)d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&"#"!==g){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list)).data("destroy.tabs",!0),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),
this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return e.selected=a,!1}),"number"!=typeof e.selected&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),"number"!=typeof e.selected&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):null===e.selected&&(e.selected=-1),e.selected=0<=e.selected&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){
return d.lis.index(a)}))).sort(),-1!=a.inArray(e.selected,e.disabled)&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),0<=e.selected&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"
),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var h,g=0;h=this.lis[g];g++)a(h)[-1==a.inArray(g,e.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(!1===e.cache&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==e.event){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",
a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){
b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||!1===d._trigger("select",null,d._ui(this,g[0]))
)return this.blur(),!1;if(e.selected=d.anchors.index(this),d.abort(),e.collapsible){if(c.hasClass("ui-tabs-selected"))return e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}if(e.cookie&&d._cookie(e.selected,e.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),a.browser.msie&&this.blur()
}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(
".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i)
;return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a,b){return e<=a?++a:a}),this._tabify(),1==this.anchors.length&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this
},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return b<=a?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(-1!=a.inArray(b,c.disabled))return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],
this.panels[b])),this},disable:function(a){a=this._getIndex(a);var c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(-1==(a=this._getIndex(a))){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),f&&(0===this.element.queue("tabs").length||!a.data(e,"cache.tabs"
))){if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this}this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),
this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.23"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){e()}:function(a){
a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",
this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:[
"Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,
stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b)
;!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function extendRemove(a,b){for(var c in $.extend(a,b),b)null!=b[c]&&b[c]!=undefined||(a[c]=b[c]);return a}function isArray(a){return a&&($.browser.safari&&"object"==typeof a&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}})
;var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),
inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([
]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),
b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():(
$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]&&$.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(
c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),(
f=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(
this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(
b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!0,
c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){
throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&((e={})[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(
d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(
".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:
$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),
c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars(
$.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||-1<c.indexOf(d)}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b))&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){if("input"!=(a=a.target||a).nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a
)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(!1!==d){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return!(e|="fixed"==$(this).css("position"))}),
e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){
var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);(instActive=a).dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],
top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1];if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<f&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em"),a.dpDiv[(1!=e[0]||1!=e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml
){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL"
)?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&d<h?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&e<i?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){
$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target)
,c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent"
)&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(
e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){var b=$(a);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),
this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[0<b&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(""==(b="object"==typeof b?b.toString():b+""))return null;var d=(c?c.shortYearCutoff:null
)||this._defaults.shortYearCutoff;d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),e=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,
function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;if($.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase())return f=c[0],r+=d.length,!1}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":i=(t=new Date(o("@"))).getFullYear(),j=t.getMonth()+1,k=t.getDate();break
;case"!":var t;i=(t=new Date((o("!")-this._ticksTo1970)/1e4)).getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==i?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100)),-1<l)for(j=1,k=l;;){var u=this._getDaysInMonth(i,j-1);if(k<=u)break;j++,k-=u}if((t=this._daylightSavingAdjust(new Date(i,j-1,k))).getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",
RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b
)for(var m=0;m<a.length;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){
for(var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var e,f,c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),
d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var f=null==b||""===b?c:"string"==typeof b?function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}for(var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),
f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)}(b):"number"==typeof b?isNaN(b)?c:function(a){var b=new Date;return b.setDate(b.getDate()+a),b}(b):new Date(b.getTime());return(f=f&&"Invalid Date"==f.toString()?c:f)&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(
f)},_daylightSavingAdjust:function(a){return a?(a.setHours(12<a.getHours()?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,
a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){
return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(
a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;if(n<0&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&p<l?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)--n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n
)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e"
)+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v
)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;for(var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),C=(this._get(a,"dayNamesShort"),this._get(a,"dayNamesMin")),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),J=(this._get(a,"calculateWeek")||this.iso8601Week,this._getDefaultDate(a)),K="",L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++
){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){if(Q+='<div class="ui-datepicker-group',1<g[1])switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&0==L?c?t:r:"")+(/all|right/.test(P)&&0==L?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,0<L||0<N,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(
var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",S=0;S<7;S++){var T=(S+y)%7;R+="<th"+(5<=(S+y+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j&&this.maxRows>W?this.maxRows:W;this.maxRows=X;for(var Y=this._daylightSavingAdjust(new Date(o,n,1-V)),Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(S=0;S<7;S++){
var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&m<Y;_+='<td class="'+(5<=(S+y+6)%7?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(bb&&!G||!ba[2]?"":' title="'+ba[2]+'"')+(bc?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth(
)+'" data-year="'+Y.getFullYear()+'"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}11<++n&&(n=0,o++),M+=Q+="</tbody></table>"+(j?"</div>"+(0<g[0]&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10
)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':""
)+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':""
)+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&d<e?d:e},
_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(
this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return{shortYearCutoff:b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,
a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1)
;return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),jQuery.effects||function(a,b){function c(b){var c
;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b
).toLowerCase()]}function d(b,d){var e;do{if(""!=(e=(a.curCSS||a.css)(b,d))&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var c,d,a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={};if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)"string"==typeof a[c=a[e]]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"==typeof a[c]&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)(null==(d=b[c])||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}
function k(b,c,d,e){return"object"==typeof b&&(e=c,d=null,b=(c=b).effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,[b,c,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete]}function l(b){return!(b&&"number"!=typeof b&&!a.fx.speeds[b])||"string"==typeof b&&!a.effects[b]}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),
a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],
darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1}
;a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var m,g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(function(a,b){var d,c={_:0};for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),"object"==typeof g.attr("style")?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,
c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.23",save:function(a,b){for(var c=0;c<b.length;c++
)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),float:b.css("float")},d=a(
"<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,
d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);0<f[0]&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments)
;return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(
b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return a<.5?c(2*a)/2:c(-2*a+2)/-2+1}})}(jQuery),function(a,b){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top",
"bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,
b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg";g=b.options.distance||("top"==j?c.outerHeight(!0)/3:c.outerWidth(!0)/3);("show"==e&&c.css("opacity",0).css(j,"pos"==k?-g:g),"hide"==e&&(g/=2*h),"hide"!=e&&h--,"show"==e)&&((l={opacity:1})[j]=("pos"==k?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g/=2,h--);for(var m=0;m<h;m++){var p={};(n={})[j]=("pos"==k?"-=":"+=")+g,p[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing
).animate(p,i/2,b.options.easing),g="hide"==e?2*g:g/2}if("hide"==e){var l;(l={opacity:0})[j]=("pos"==k?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n;p={};(n={})[j]=("pos"==k?"-=":"+=")+g,p[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=[
"position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="IMG"==c[0].tagName?g:c,i={size:"vertical"==f?"height":"width",position:"vertical"==f?"top":"left"},j="vertical"==f?h.height():h.width();"show"==e&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]="show"==e?j:0,k[i.position]="show"==e?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(
c[0],arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0)/2:c.outerWidth(!0)/2);"show"==e&&c.css("opacity",0).css(g,"pos"==h?-i:i);var j={opacity:"show"==e?1:0};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,
complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;i<c;i++)for(
var j=0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:g/d*-j,top:h/c*-i}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+("show"==b.options.mode?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+("show"==b.options.mode?(i-Math.floor(c/2))*(h/c):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+j*(g/d)+("show"==b.options.mode?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+("show"==b.options.mode?0:(i-Math.floor(c/2))*(h/c)),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){
"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,
b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j="show"==e!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l["hide"==e?0:1]),"show"==e&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},p={};n[k[0]]="show"==e?l[0]:f,p[k[1]]="show"==e?l[1]:0,i.animate(n,h,b.options.easing).animate(p,h,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),
b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};"hide"==e&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),"show"==e&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments
),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=2*(b.options.times||5)-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),("hide"==d&&g||"show"==d&&!g)&&e--;for(var i=0;i<e;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){0==h&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a,b){a.effects.puff=function(b){return this.queue(function(){var c=a(this),
d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",h=b.options.origin;"effect"!=e&&(d.origin=h||["middle","center"],d.restore=!0);var i={
height:c.height(),width:c.width()};c.from=b.options.from||("show"==e?{height:0,width:0}:i);var j_y="horizontal"!=g?f/100:1,j_x="vertical"!=g?f/100:1;c.to={height:i.height*j_y,width:i.width*j_x},b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),"hide"==e&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=[
"borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};if(c.from=b.options.from||n,c.to=b.options.to||n,m){var p=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*p.y,c.from.left=(n.width-c.from.width)*p.x,c.to.top=(n.height-c.to.height)*p.y,c.to.left=(n.width-c.to.width)*p.x}var q={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};"box"!=l&&"both"!=l||(
q.from.y!=q.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to))),("content"==l||"both"==l)&&q.from.y!=q.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,q.from.y,c.from),c.to=a.effects.setTransition(c,g,q.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from),"content"!=l&&"both"!=l||(h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),
c.find("*[width]").each(function(){var c=a(this);k&&a.effects.save(c,f);var d_height=c.height(),d_width=c.width();c.from={height:d_height*q.from.y,width:d_width*q.from.x},c.to={height:d_height*q.to.y,width:d_width*q.to.x},q.from.y!=q.to.y&&(c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})})),c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){
0===c.to.opacity&&c.css("opacity",c.from.opacity),"hide"==j&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],f=(a.effects.setMode(c,b.options.mode||"effect"),b.options.direction||"left"),g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg",l={},m={},n={};l[j]=("pos"==k?"-=":"+=")+g,m[j]=(
"pos"==k?"+=":"-=")+2*g,n[j]=("pos"==k?"-=":"+=")+2*g,c.animate(l,i,b.options.easing);for(var p=1;p<h;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c
).css({overflow:"hidden"});var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0):c.outerWidth(!0));"show"==e&&c.css(g,"pos"==h?isNaN(i)?"-"+i:-i:i);var j={};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,
height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery)}),define("select2",["jquery"],function(jQuery){var a;void 0===(a=jQuery).fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&!1!==b.call(c[0],d,c););return this}}),function(a,b){"use strict";function n(b){var c=a(
document.createTextNode(""));b.before(c),c.before(b),c.remove()}function o(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return m[a]||a})}function p(a,b){for(var c=0,d=b.length;c<d;c+=1)if(r(a,b[c]))return c;return-1}function r(a,c){return a===c||a!==b&&c!==b&&(null!==a&&null!==c&&(a.constructor===String?a+""==c+"":c.constructor===String&&c+""==a+""))}function s(b,c){var d,e,f;if(null===b||b.length<1)return[];for(e=0,f=(d=b.split(c)).length;e<f;e+=1)d[e]=a.trim(d[e]);return d}function t(a){return a.outerWidth(!1)-a.width()}function u(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){
var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function v(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function w(a,c,d){var e;return d=d||b,function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function z(b){var c=0,d=0;if("selectionStart"in(b=a(b)[0]))c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,
length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function C(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);(h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,g,f=[];(e=a.trim(b.attr("class")))&&a((e=""+e).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&f.push(this)}),(e=a.trim(
c.attr("class")))&&a((e=""+e).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&((g=d(this))&&f.push(g))}),b.attr("class",f.join(" "))}function E(a,b,c,d){var e=o(a.toUpperCase()).indexOf(o(b.toUpperCase())),f=b.length;return e<0?void c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+f))),c.push("</span>"),void c.push(d(a.substring(e+f,a.length))))}function F(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this
;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={
hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};i.callback(d)}}),e=j.call(h,l)},f)}}function H(b){var d,e,c=b,f=function(a){return""+a.text};a.isArray(c)&&(c={results:e=c}),!1===a.isFunction(c)&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return""===d?void b.callback(c()):(g=function(c,e){var h,i;if((c=c[0]).children){for(i in h={},c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(
function(a,b){g(b,e.results)}),void b.callback(e))}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function K(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}
function N(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function O(b,c){var d=function(){};return((d.prototype=new b).constructor=d).prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var d,e,f,g,h,j,k,i={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!a.metaKey},
isFunctionKey:function(a){return 112<=(a=a.which?a.which:a)&&a<=123}},m={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D",
"":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I",
"":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O",
"":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T",
"":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z",
"":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz",
"":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i",
"":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o",
"":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t",
"":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z",
"":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};j=a(document),g=function(){var a=1;return function(){return a++}}(),e=O(d=O(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass(
"select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(K(c.containerCss,this.opts.element)),this.container.addClass(K(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),
this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),v(this.results),this.dropdown.on("mousemove-filtered",f,this.bind(
this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",f,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",f,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",f,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(a,b){var c=w(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){0<=p(a.target,b.get())&&c(a)})}(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",
function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();0<e&&f-e<=0?(d.scrollTop(0),A(a)):e<0&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),u(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){0<a(b.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(b),
this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||function(){var b=a("<div class='select2-measure-scrollbar'></div>");b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}(),
this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2"),d=this;this.close(),a.length&&a[0].detachEvent&&d._sync&&a.each(function(){this.detachEvent("onpropertychange",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({
tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),N.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:r(a.attr("locked"),"locked")||r(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,h,i=this;if("select"===(d=c.element).get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],
function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(c=a.extend({},{populateResults:function(d,e,f){var h,j=this.opts.id,k=this.liveRegion;(h=function(d,e,l){var m,n,o,p,q,r,s,t,u,v,w=[];for(m=0,n=(d=c.sortResults(d,e,f)).length;m<n;m+=1)p=!(q=!0===(o=d[m]).disabled)&&j(o)!==b,r=o.children&&0<o.children.length,(s=a("<li></li>")).addClass("select2-results-dept-"+l),s.addClass("select2-result"),s.addClass(p?"select2-result-selectable":"select2-result-unselectable"),q&&s.addClass("select2-disabled"),r&&s.addClass("select2-result-with-children"),s.addClass(
i.opts.formatResultCssClass(o)),s.attr("role","presentation"),(t=a(document.createElement("div"))).addClass("select2-result-label"),t.attr("id","select2-result-label-"+g()),t.attr("role","option"),(v=c.formatResult(o,t,f,i.opts.escapeMarkup))!==b&&(t.html(v),s.append(t)),r&&((u=a("<ul></ul>")).addClass("select2-result-sub"),h(o.children,u,l+1),s.append(u)),s.data("select2-data",o),w.push(s[0]);e.append(w),k.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c)).id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c
)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var f,g,h,c={results:[],more:!1},e=a.term;h=function(b,c){var d;b.is("option")?a.matcher(e,b.text(),b)&&c.push(i.optionToData(b)):b.is("optgroup")&&(d=i.optionToData(b),b.children().each2(function(a,b){h(b,d.children)}),0<d.children.length&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&0<f.length&&((g=this.getPlaceholderOption())&&(f=f.not(g))),f.each2(function(a,b){h(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?((
h=c.element.data("ajax-url"))&&0<h.length&&(c.ajax.url=h),c.query=G.call(c.element,c.ajax)):"data"in c?c.query=H(c.data):"tags"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(s(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return r(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition
)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var d,c=this.opts.element,e=this;c.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var a=c.prop("disabled");a===b&&(a=!1),this.enable(!a);var d=c.prop("readonly");d===b&&(d=!1),this.readonly(d),D(this.container,
this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass,this.opts.element)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass,this.opts.element))}),c.length&&c[0].attachEvent&&c.each(function(){this.attachEvent("onpropertychange",e._sync)}),(d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(c.get(0),{attributes:!0,subtree:!1}))},
triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a!==this.enabledInterface&&(this.container.toggleClass(
"select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,u,v,w,x,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window),h=g.width(),
i=g.height(),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,o=m+f<=l,p=c.top-f>=g.scrollTop(),q=b.outerWidth(!1),r=n+q<=j;b.hasClass("select2-drop-above")?(u=!0,!p&&o&&(u=!(v=!0))):(u=!1,!o&&p&&(u=v=!0)),v&&(b.hide(),c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,r=(n=c.left)+(q=b.outerWidth(!1))<=j,b.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),e<(q=b.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:k.width))?e=q:q=e,f=b.outerHeight(!1),
r=n+q<=j):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(m-=(t=this.body.offset()).top,n-=t.left),r||(n=c.left+this.container.outerWidth(!1)-q),w={left:n,width:e},u?(w.top=c.top-f,w.bottom="auto",this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(w.top=m,w.bottom="auto",this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),w=a.extend(w,K(this.opts.dropdownCss,this.opts.element)),b.css(w)},shouldOpen:function(){var b;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(b=a.Event("select2-opening"),this.opts.element.trigger(b),
!b.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),j.on("mousemove.select2Event",function(a){i.x=a.pageX,i.y=a.pageY}),!0)},opening:function(){var f,b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(f=a("#select2-drop-mask")).length&&((
f=a(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body),f.on("mousedown touchstart",function(b){n(f);var d,c=a("#select2-drop");0<c.length&&((d=c.data("select2")).opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){
a(this).on(d+" "+c+" "+e,function(){g.opened()&&g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),j.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},
externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,j,b=this.results;if(!((d=this.highlight())<0)){if(0==d)return void b.scrollTop(0);c=this.findHighlightableChoices().find(".select2-result-label"),f=(j=((e=a(c[d])).offset()||{}).top||0)+e.outerHeight(!0),d===c.length-1&&(0<(i=b.find("li.select2-more-results")).length&&(f=i.offset().top+i.outerHeight(!0))),(g=b.offset().top+b.outerHeight(!0))<f&&b.scrollTop(b.scrollTop()+(f-g)),(h=j-b.offset().top
)<0&&"none"!=e.css("display")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();-1<d&&d<c.length;){var e=a(c[d+=b]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?p(c.filter(".select2-highlighted")[0],c.get()):(b>=c.length&&(b=c.length-1),b<0&&(b=0),this.removeHighlight(),(
d=a(c[b])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",d.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(d.text()),void((e=d.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable"
);if(0<c.length&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(b.offset().top-a.offset().top-a.height()<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),
!0===c.more?(b.detach().appendTo(a).text(K(e.opts.formatLoadMore,e.opts.element,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass("select2-active"),h.positionDropdown(),e.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?h.liveRegion.text(e.text()):h.liveRegion.text(h.opts.formatMatches(e.find(".select2-result-selectable").length))}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,
h=this,j=d.val(),k=a.data(this.container,"select2-last-term");if((!0===c||!k||!r(j,k))&&(a.data(this.container,"select2-last-term",j),!0===c||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var o=this.getMaximumSelectionSize();if(1<=o&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+K(f.formatSelectionTooBig,f.element,o)+"</li>");if(d.val().length<f.minimumInputLength)return J(f.formatInputTooShort,"formatInputTooShort")?n("<li class='select2-no-results'>"+K(f.formatInputTooShort,f.element,d.val(),f.minimumInputLength)+"</li>"):n(""),void(
c&&this.showSearch&&this.showSearch(!0));if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return void(J(f.formatInputTooLong,"formatInputTooLong")?n("<li class='select2-no-results'>"+K(f.formatInputTooLong,f.element,d.val(),f.maximumInputLength)+"</li>"):n(""));f.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+K(f.formatSearching,f.element)+"</li>"),d.addClass("select2-active"),this.removeHighlight(),(i=this.tokenize())!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(
l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(g.hasError!==b&&J(f.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+K(f.formatAjaxError,f.element,g.jqXHR,g.textStatus,g.errorThrown)+"</li>");if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==d.val()&&((i=this.opts.createSearchChoice.call(h,d.val(),g.results))!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return r(h.id(this),h.id(i))}).length&&this.opts.createSearchChoicePosition(g.results,i)),0===g.results.length&&J(f.formatNoMatches,"formatNoMatches"))return void n(
"<li class='select2-no-results'>"+K(f.formatNoMatches,f.element,d.val())+"</li>");e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),!0===g.more&&J(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+f.escapeMarkup(K(f.formatLoadMore,f.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:"select2-loaded",items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass(
"select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a;(a=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus(),(0<b.offsetWidth||0<b.offsetHeight)&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&((d=b.createTextRange()).collapse(!1),d.select()))},0)},selectHighlighted:function(a){if(this._touchMoved)this.clearTouchMoved();else{var b=this.highlight(),d=this.results.find(
".select2-highlighted").closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()}},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text()
)&&""===c.val())return c}},initContainerWidth:function(){var d=function(){var c,d,e,f,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return a.isFunction(this.opts.width)?this.opts.width():this.opts.width;if((c=this.opts.element.attr("style"))!==b)for(f=0,g=(d=c.split(";")).length;f<g;f+=1)if(null!==(e=d[f].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=e.length)return e[1];return"resolve"===this.opts.width?0<(c=this.opts.element.css("width")
).indexOf("%")?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==d&&this.container.css("width",d)}}),{createContainer:function(){return a(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>",
"<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",
!this.isInterfaceEnabled())},opening:function(){var c,d,e;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(c=this.search.get(0)).createTextRange?((d=c.createTextRange()).collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))
},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),
this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")},initContainer:function(){var b,h,d=this.container,e=this.dropdown,f=g();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=d.find(".select2-choice"),this.focusser=d.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+f),this.focusser.attr("aria-labelledby","select2-chosen-"+f),this.results.attr("id","select2-results-"+f),this.search.attr("aria-owns","select2-results-"+f),this.focusser.attr("id","s2id_autogen"+f),h=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(h.text()).attr("for",
this.focusser.attr("id"));var i=this.opts.element.attr("title");this.opts.element.attr("title",i||h.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return void A(a);switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:
return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(a),void A(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.ESC){if(!1===this.opts.openOnEnter&&a.which===c.ENTER)return void A(a);if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void A(a)}
return a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),void A(a)):void 0}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(0<=this.opts.minimumResultsForSearch){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),function(a){a.preventDefault(),a.stopImmediatePropagation()}(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(c){n(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened(
)?this.close():this.isInterfaceEnabled()&&this.open(),A(c)})),e.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){A(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass(
"select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==b&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),
this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder(),c.nextSearchTerm=c.opts.nextSearchTerm(a,c.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()!==b&&((a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val())},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,
arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=r(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(
this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return r(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0)),!0===b){var g=this.opts.minimumResultsForSearch;0<=g&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search"
).toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,
c=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),(e=this.opts.formatSelectionCssClass(a,c))!==b&&c.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],1<arguments.length&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){
return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?((c=this.selection.data("select2-data"))==b&&(c=null),c):(1<arguments.length&&(
d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),f=O(d,{createContainer:function(){return a(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>",
"   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=s(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return r(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],
h=0;h<f.length;h++){var i=f[h];if(r(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var d,
b=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b);var e=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){e.search[0].focus(),e.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+g()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),
this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var b=d.find(".select2-search-choice-focus"),e=b.prev(".select2-search-choice:not(.select2-locked)"),f=b.next(".select2-search-choice:not(.select2-locked)"),g=z(this.search);if(b.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var h=b;return a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?this.unselect(b.first())&&(this.search.width(10),h=e.length?e:f):a.which==c.DELETE?this.unselect(b.first())&&(
this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),void(h&&h.length||this.open())}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==g.offset&&!g.length)return this.selectChoice(d.find(".select2-search-choice:not(.select2-locked)").last()),void A(a);if(this.selectChoice(null),this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(a),void A(a)}if(a.which!==c.TAB&&!c.isControl(a
)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",b,
this.bind(function(b){this.isInterfaceEnabled()&&(0<a(b.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",b,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),
this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal(
).length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<c?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"
))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){p(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();null!=(a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts))&&a!=b&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,c){
this.triggerSelect(a)&&""!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),
this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal();(j=this.opts.formatSelection(c,g.find("div"),this.opts.escapeMarkup))!=b&&g.find("div").replaceWith("<div>"+j+"</div>"),(k=this.opts.formatSelectionCssClass(c,g.find("div"))
)!=b&&g.addClass(k),d&&g.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),A(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(0===(b=b.closest(".select2-search-choice")).length
)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(d=b.data("select2-data")){var f=a.Event("select2-removing");if(f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented())return!1;for(;0<=(e=p(this.id(d),c));)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(d),choice:d}),this.triggerChange({removed:d}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){0<=p(g.id(b.data("select2-data")),d)&&(
b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&!1!==c&&g.highlight(0),!this.opts.createSearchChoice&&0<!e.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&J(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+K(g.opts.formatNoMatches,g.opts.element,g.search.val())+"</li>")},getMaxSearchWidth:function(){
return this.selection.width()-t(this.search)},resizeSearch:function(){var a,b,c,e,f=t(this.search);a=C(this.search)+10,b=this.search.offset().left,(e=(c=this.selection.width())-(b-this.selection.offset().left)-f)<a&&(e=c-f),e<40&&(e=c-f),e<=0&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?null===(a=this.select.val())?[]:a:s(a=this.opts.element.val(),this.opts.separator)},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){p(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){b=b.slice(0),a=a.slice(0);for(
var c=0;c<b.length;c++)for(var d=0;d<a.length;d++)r(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if((e=this.data()).length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error(
"val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice"
).each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),void(c&&this.triggerChange(this.buildChangeDetails(f,this.data()))))}}),a.fn.select2=function(){var d,e,f,g,h,c=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd"
,"enable","disable","readonly","positionDropdown","data","search"],j=["opened","isFocused","container","dropdown"],k=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])(d=0===c.length?{}:a.extend({},c[0])).element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?h=d.element.prop("multiple"):(h=d.multiple||!1,"tags"in d&&(d.multiple=h=!0)),(e=h?new window.Select2.class.multi:new window.Select2.class.single).init(d);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(p(c[0],i)<0)throw"Unknown method: "+c[0];if(g=b,(e=a(this).data("select2"))===b)return;if(f=c[0],
g="container"===f?e.container:"dropdown"===f?e.dropdown:(l[f]&&(f=l[f]),e[f].apply(e,c.slice(1))),0<=p(c[0],j)||0<=p(c[0],k)&&1==c.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return E(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,
maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return 0<=o(""+b).toUpperCase().indexOf(o(""+a).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;j<k&&(l=e.tokenSeparators[j],!(0<=(i=a.indexOf(l))));j++);if(i<0)break;if(h=a.substring(0,i),a=a.substring(i+l.length),0<h.length&&(h=e.createSearchChoice.call(this,h,c))!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h)){for(g=!1,j=0,k=c.length;j<k;j++)if(r(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}
return f!==a?a:void 0},escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(a.opts.minimumResultsForSearch<0)}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},
formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{
debounce:w,markMatch:E,escapeMarkup:F,stripDiacritics:o},class:{abstract:d,single:e,multi:f}}}}(jQuery)}),define("nouislider",["jquery"],function($){"use strict";var doc=$(document),namespace=".nui",$val=$.fn.val,actions=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Classes=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","",
"noUi-state-drag","","noUi-state-tap","noUi-active","noUi-extended","noUi-stacking"],Formatting=["decimals","mark","thousand","prefix","postfix","encoder","decoder","negative","negativeBefore"],FormatDefaults=[2,".","","","",function(a){return a},function(a){return a},"-",""];function throwError(message){throw new RangeError("noUiSlider: "+message)}function throwEqualError(F,a,b){(F[a]||F[b])&&F[a]===F[b]&&throwError("(Link) '"+a+"' can't match '"+b+"'.'")}function limit(a){return Math.max(Math.min(a,100),0)}function subRangeRatio(pa,pb){return 100/(pb-pa)}function isNumeric(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function addClassFor(element,
className,duration){element.addClass(className),setTimeout(function(){element.removeClass(className)},duration)}function fromPercentage(range,value){return 100*value/(range[1]-range[0])}function toStepping(options,value){if(value>=options.xVal.slice(-1)[0])return 100;for(var va,vb,pa,pb,j=1;value>=options.xVal[j];)j++;return va=options.xVal[j-1],vb=options.xVal[j],pa=options.xPct[j-1],pb=options.xPct[j],pa+function(range,value){return fromPercentage(range,range[0]<0?value+Math.abs(range[0]):value-range[0])}([va,vb],value)/subRangeRatio(pa,pb)}function getStep(options,value){for(var a,b,j=1;value>=options.xPct[j];)j++;return options.snap?(a=options.xPct[j-1],
((b=options.xPct[j])-a)/2<value-a?b:a):options.xSteps[j-1]?options.xPct[j-1]+function(value,to){return Math.round(value/to)*to}(value-options.xPct[j-1],options.xSteps[j-1]):value}function Format(options){void 0===options&&(options={}),"object"!=typeof options&&throwError("(Format) 'format' option must be an object.");var settings={};$(Formatting).each(function(i,val){var a,b;void 0===options[val]?settings[val]=FormatDefaults[i]:(a=options[val],b=FormatDefaults[i],typeof a==typeof b?("decimals"===val&&(options[val]<0||7<options[val])&&throwError("(Format) 'format.decimals' option must be between 0 and 7."),settings[val]=options[val]):throwError(
"(Format) 'format."+val+"' must be a "+typeof FormatDefaults[i]+"."))}),throwEqualError(settings,"mark","thousand"),throwEqualError(settings,"prefix","negative"),throwEqualError(settings,"prefix","negativeBefore"),this.settings=settings}function Link(entry,update){if(!(this instanceof Link))throw new Error("Link: Don't use Link as a function. Use the 'new' keyword.");if(!entry)throw new RangeError("Link: missing parameters.");this.formatting=entry.format||{},this.update=!update;var a,that=this,target=entry.target||function(){},method=entry.method,isTooltip="string"==typeof target&&0===target.indexOf("-tooltip-"),
isHidden="string"==typeof target&&0!==target.indexOf("-"),isMethod="function"==typeof target,is$=(a=target)instanceof $||$.zepto&&$.zepto.isZ(a),isInput=is$&&target.is("input, select, textarea"),methodIsFunction=is$&&"function"==typeof method,methodIsName=is$&&"string"==typeof method&&target[method];if(isTooltip)return this.method=method||"html",void(this.el=$(target.replace("-tooltip-","")||"<div/>")[0]);if(isHidden)return this.method="val",this.el=document.createElement("input"),this.el.name=target,void(this.el.type="hidden");if(isMethod)return this.target=!1,void(this.method=target);if(is$){if(method&&(methodIsFunction||methodIsName)
)return this.target=target,void(this.method=method);if(!method&&isInput)return this.method="val",this.target=target,void this.target.on("change",function(e){var a,b,c,output=(a=null,b=$(e.target).val(),[(c=that.N)?a:b,c?b:a]);that.obj.val(output,{link:that})});if(!method&&!isInput)return this.method="html",void(this.target=target)}throw new RangeError("Link: Invalid Link.")}function testStep(parsed,entry){isNumeric(entry)||throwError("'step' is not numeric."),parsed.xSteps[0]=entry}function testRange(parsed,entry){("object"!=typeof entry||$.isArray(entry))&&throwError("'range' is not an object."),$.each(entry,function(index,value){var percentage
;"number"==typeof value&&(value=[value]),$.isArray(value)||throwError("'range' contains invalid value."),isNumeric(percentage="min"===index?0:"max"===index?100:parseFloat(index))&&isNumeric(value[0])||throwError("'range' value isn't numeric."),parsed.xPct.push(percentage),parsed.xVal.push(value[0]),percentage?parsed.xSteps.push(!isNaN(value[1])&&value[1]):isNaN(value[1])||(parsed.xSteps[0]=value[1])}),$.each(parsed.xSteps,function(i,n){if(!n)return!0;parsed.xSteps[i]=fromPercentage([parsed.xVal[i],parsed.xVal[i+1]],n)/subRangeRatio(parsed.xPct[i],parsed.xPct[i+1])})}function testStart(parsed,entry){"number"==typeof entry&&(entry=[entry]),(!$.isArray(entry
)||!entry.length||2<entry.length)&&throwError("'start' option is incorrect."),parsed.handles=entry.length,parsed.start=entry}function testSnap(parsed,entry){"boolean"!=typeof(parsed.snap=entry)&&throwError("'snap' option must be a boolean.")}function testConnect(parsed,entry){"lower"===entry&&1===parsed.handles?parsed.connect=1:"upper"===entry&&1===parsed.handles?parsed.connect=2:!0===entry&&2===parsed.handles?parsed.connect=3:!1===entry?parsed.connect=0:throwError("'connect' option was doesn't match handle count.")}function testOrientation(parsed,entry){switch(entry){case"horizontal":parsed.ort=0;break;case"vertical":parsed.ort=1;break;default:throwError(
"'orientation' option is invalid.")}}function testMargin(parsed,entry){2<parsed.xPct.length&&throwError("'margin' option is only supported on linear sliders."),parsed.margin=fromPercentage(parsed.xVal,entry),isNumeric(entry)||throwError("'margin' option must be numeric.")}function testDirection(parsed,entry){switch(entry){case"ltr":parsed.dir=0;break;case"rtl":parsed.dir=1,parsed.connect=[0,2,1,3][parsed.connect];break;default:throwError("'direction' option was not recognized.")}}function testBehaviour(parsed,entry){"string"!=typeof entry&&throwError("'behaviour' must be a string containing options.");var tap=0<=entry.indexOf("tap"),extend=0<=entry.indexOf(
"extend"),drag=0<=entry.indexOf("drag"),fixed=0<=entry.indexOf("fixed"),snap=0<=entry.indexOf("snap");parsed.events={tap:tap||snap,extend:extend,drag:drag,fixed:fixed,snap:snap}}function testSerialization(parsed,entry,sliders){parsed.ser=[entry.lower,entry.upper],parsed.formatting=new Format(entry.format),$.each(parsed.ser,function(i,a){$.isArray(a)||throwError("'serialization."+(i?"upper":"lower")+"' must be an array."),$.each(a,function(){this instanceof Link||throwError("'serialization."+(i?"upper":"lower")+"' can only contain Link instances."),this.N=i,this.obj=sliders,this.scope=this.scope||sliders,this.formatting=new Format($.extend({},entry.format,
this.formatting))})}),parsed.dir&&1<parsed.handles&&parsed.ser.reverse()}function addHandle(options,index){var handle=$("<div><div/></div>").addClass(Classes[2]),additions=["-lower","-upper"];return options.dir&&additions.reverse(),handle.children().addClass(Classes[3]+" "+Classes[3]+additions[index]),handle}function addElement(handle,link){return link.el&&(link=new Link({target:$(link.el).clone().appendTo(handle),method:link.method,format:link.formatting},!0)),link}function addElements(elements,handle,formatting){var index,list=[];for(list.push(new Link({format:formatting},!0)),index=0;index<elements.length;index++)list.push(addElement(handle,
elements[index]));return list}function closure(target,options,originalOptions){var $Base,$Serialization,$Handles,$Target=$(target),$Locations=[-1,-1];function baseSize(){return $Base[["width","height"][options.ort]]()}function fireEvents(events){var index,values=[$Target.val()];for(index=0;index<events.length;index++)$Target.trigger(events[index],values)}function setHandle(handle,to,delimit){var n=handle[0]!==$Handles[0][0]?1:0,lower=$Locations[0]+options.margin,upper=$Locations[1]-options.margin;return delimit&&1<$Handles.length&&(to=n?Math.max(to,lower):Math.min(to,upper)),to<100&&(to=getStep(options,to)),(to=limit(parseFloat(to.toFixed(7)))
)===$Locations[n]?1!==$Handles.length&&((to===lower||to===upper)&&0):(handle.css(options.style,to+"%"),handle.is(":first-child")&&handle.toggleClass(Classes[17],50<to),$Locations[n]=to,options.dir&&(to=100-to),$($Serialization[n]).each(function(){this.write(options,to,handle.children(),$Target)}),!0)}function jump(handle,to,instant){instant||addClassFor($Target,Classes[14],300),setHandle(handle,to,!1),fireEvents(["slide","set","change"])}function attach(events,element,callback,data){return events=events.replace(/\s/g,namespace+" ")+namespace,element.on(events,function(e){var disabled=$Target.attr("disabled");if(disabled=!(null==disabled),$Target.hasClass(
Classes[14])||disabled)return!1;(e=function(e){e.preventDefault();var x,y,touch=0===e.type.indexOf("touch"),mouse=0===e.type.indexOf("mouse"),pointer=0===e.type.indexOf("pointer"),event=e;return 0===e.type.indexOf("MSPointer")&&(pointer=!0),e.originalEvent&&(e=e.originalEvent),touch&&(x=e.changedTouches[0].pageX,y=e.changedTouches[0].pageY),(mouse||pointer)&&(pointer||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),x=e.clientX+window.pageXOffset,y=e.clientY+window.pageYOffset),event.points=[x,y],event.cursor=mouse,event}(e)).calcPoint=e.points[options.ort],callback(e,
data)})}function move(event,data){var positions,a,b,delimit,c,d,handles=data.handles||$Handles,state=!1,proposal=100*(event.calcPoint-data.start)/baseSize(),h=handles[0][0]!==$Handles[0][0]?1:0;a=proposal,b=data.positions,delimit=1<handles.length,c=a+b[0],d=a+b[1],positions=delimit?(c<0&&(d+=Math.abs(c)),100<d&&(c-=d-100),[limit(c),limit(d)]):[c,d],state=setHandle(handles[0],positions[h],1===handles.length),1<handles.length&&(state=setHandle(handles[1],positions[h?0:1],!1)||state),state&&fireEvents(["slide"])}function end(event){$("."+Classes[15]).removeClass(Classes[15]),event.cursor&&$("body").css("cursor","").off(namespace),doc.off(namespace),
$Target.removeClass(Classes[12]),fireEvents(["set","change"])}function start(event,data){1===data.handles.length&&data.handles[0].children().addClass(Classes[15]),event.stopPropagation(),attach(actions.move,doc,move,{start:event.calcPoint,handles:data.handles,positions:[$Locations[0],$Locations[$Handles.length-1]]}),attach(actions.end,doc,end,null),event.cursor&&($("body").css("cursor",$(event.target).css("cursor")),1<$Handles.length&&$Target.addClass(Classes[12]),$("body").on("selectstart"+namespace,!1))}function tap(event){var to,location=event.calcPoint,total=0;event.stopPropagation(),$.each($Handles,function(){total+=this.offset()[options.style]}),
total=location<total/2||1===$Handles.length?0:1,to=100*(location-=$Base.offset()[options.style])/baseSize(),jump($Handles[total],to,options.events.snap),options.events.snap&&start(event,{handles:[$Handles[total]]})}function edge(event){var i=event.calcPoint<$Base.offset()[options.style],to=i?0:100;i=i?0:$Handles.length-1,jump($Handles[i],to,!1)}if(!$Target.is(":empty"))throw new Error("Slider was already initialized.");$Base=function(options,target){return target.addClass([Classes[0],Classes[8+options.dir],Classes[4+options.ort]].join(" ")),$("<div/>").appendTo(target).addClass(Classes[1])}(options,$Target),$Handles=function(options,base){var index,handles=[
];for(index=0;index<options.handles;index++)handles.push(addHandle(options,index).appendTo(base));return handles}(options,$Base),$Serialization=function(options,handles){var index,links=[];for(index=0;index<options.handles;index++)links[index]=addElements(options.ser[index],handles[index].children(),options.formatting);return links}(options,$Handles),function(connect,target,handles){switch(connect){case 1:target.addClass(Classes[7]),handles[0].addClass(Classes[6]);break;case 3:handles[1].addClass(Classes[6]);case 2:handles[0].addClass(Classes[7]);case 0:target.addClass(Classes[6])}}(options.connect,$Target,$Handles),function(behaviour){var i,drag;if(
!behaviour.fixed)for(i=0;i<$Handles.length;i++)attach(actions.start,$Handles[i].children(),start,{handles:[$Handles[i]]});behaviour.tap&&attach(actions.start,$Base,tap,{handles:$Handles}),behaviour.extend&&($Target.addClass(Classes[16]),behaviour.tap&&attach(actions.start,$Target,edge,{handles:$Handles})),behaviour.drag&&(drag=$Base.find("."+Classes[7]).addClass(Classes[10]),behaviour.fixed&&(drag=drag.add($Base.children().not(drag).children())),attach(actions.start,drag,start,{handles:$Handles}))}(options.events),target.vSet=function(values,callback,link,update,animate){var i,to;for(options.dir&&1<options.handles&&values.reverse(),animate&&addClassFor(
$Target,Classes[14],300),i=0;i<(1<$Handles.length?3:1);i++)!1!==(to=(to=link||$Serialization[i%2][0]).valueOf(values[i%2]))&&(to=toStepping(options,to),options.dir&&(to=100-to),!0!==setHandle($Handles[i%2],to,!0)&&$($Serialization[i%2]).each(function(){this.write(options,$Locations[i%2],$Handles[i%2].children(),$Target,update)}));return!0===callback&&fireEvents(["set"]),this},target.vGet=function(){var i,retour=[];for(i=0;i<options.handles;i++)retour[i]=$Serialization[i][0].saved;return 1===retour.length?retour[0]:options.dir&&1<options.handles?retour.reverse():retour},target.destroy=function(){return $.each($Serialization,function(){$.each(this,function(){
this.target&&this.target.off(namespace)})}),$(this).off(namespace).removeClass(Classes.join(" ")).empty(),originalOptions},$Target.val(options.start)}function initialize(originalOptions){if(this.length){var options=function(options,sliders){var tests,parsed={xPct:[],xVal:[],xSteps:[!1],margin:0};return tests={step:{r:!1,t:testStep},range:{r:!0,t:testRange},start:{r:!0,t:testStart},snap:{r:!1,t:testSnap},connect:{r:!0,t:testConnect},orientation:{r:!1,t:testOrientation},margin:{r:!1,t:testMargin},direction:{r:!0,t:testDirection},behaviour:{r:!0,t:testBehaviour},serialization:{r:!0,t:testSerialization}},(options=$.extend({connect:!1,direction:"ltr",
behaviour:"tap",orientation:"horizontal"},options)).serialization=$.extend({lower:[],upper:[],format:{}},options.serialization),$.each(tests,function(name,test){if(void 0===options[name]){if(!test.r)return!0;throwError("'"+name+"' is required.")}test.t(parsed,options[name],sliders)}),parsed.style=parsed.ort?"top":"left",parsed}(originalOptions,this);return this.each(function(){closure(this,options,originalOptions)})}}Format.prototype.v=function(a){return this.settings[a]},Format.prototype.to=function(number){function reverse(a){return a.split("").reverse().join("")}var negative="",preNegative="",base="",mark="";return(number=this.v("encoder")(number))<0&&(
negative=this.v("negative"),preNegative=this.v("negativeBefore")),number=(number=Math.abs(number).toFixed(this.v("decimals")).toString()).split("."),0===parseFloat(number)&&(number[0]="0"),base=this.v("thousand")?reverse((base=reverse(number[0]).match(/.{1,3}/g)).join(reverse(this.v("thousand")))):number[0],this.v("mark")&&1<number.length&&(mark=this.v("mark")+number[1]),preNegative+this.v("prefix")+negative+base+mark+this.v("postfix")},Format.prototype.from=function(input){function esc(s){return s.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var isNeg;return null!=input&&(isNeg=(input=input.toString()).replace(new RegExp("^"+esc(this.v("negativeBefore"))),""
),isNeg=input!==isNeg?(input=isNeg,"-"):"",input=input.replace(new RegExp("^"+esc(this.v("prefix"))),""),this.v.negative&&(isNeg="",input=input.replace(new RegExp("^"+esc(this.v("negative"))),"-")),input=input.replace(new RegExp(esc(this.v("postfix"))+"$"),"").replace(new RegExp(esc(this.v("thousand")),"g"),"").replace(this.v("mark"),"."),input=this.v("decoder")(parseFloat(isNeg+input)),!isNaN(input)&&input)},Link.prototype.write=function(options,value,handle,slider,update){this.update&&!1===update||(value=function(options,value){if(100<=value)return options.xVal.slice(-1)[0];for(var pa,j=1;value>=options.xPct[j];)j++;return function(range,value){
return value*(range[1]-range[0])/100+range[0]}([options.xVal[j-1],options.xVal[j]],(value-(pa=options.xPct[j-1]))*subRangeRatio(pa,options.xPct[j]))}(options,value),value=this.format(value),this.saved=value,"function"==typeof this.method?this.method.call(this.target[0]||slider[0],value,handle,slider):this.target[this.method](value,handle,slider))},Link.prototype.format=function(a){return this.formatting.to(a)},Link.prototype.valueOf=function(a){return this.formatting.from(a)},$.noUiSlider={Link:Link},$.fn.noUiSlider=function(options,re){return(re?function(options){return this.each(function(){var values=$(this).val(),originalOptions=this.destroy(),
newOptions=$.extend({},originalOptions,options);$(this).noUiSlider(newOptions),originalOptions.start===newOptions.start&&$(this).val(values)})}:initialize).call(this,options)},$.fn.val=function(){var set,link,update,animate,args=Array.prototype.slice.call(arguments,0);return args.length?("object"==typeof args[1]?(set=args[1].set,link=args[1].link,update=args[1].update,animate=args[1].animate):!0===args[1]&&(set=!0),this.each(function(){var a;$(this).hasClass(Classes[0])?this.vSet((a=args[0],$.isArray(a)?a:[a]),set,link,update,animate):$val.apply($(this),args)})):this.hasClass(Classes[0])?this[0].vGet():$val.apply(this)}}),function(window,document,undefined){
!function(factory){"use strict";"function"==typeof define&&define.amd?define("qtip",["jquery"],factory):jQuery&&!jQuery.fn.qtip&&factory(jQuery)}(function($){"use strict";var QTIP,PROTOTYPE,CORNER,CHECKS,trackingBound,TRUE=!0,FALSE=!1,NULL=null,X="x",Y="y",TOP="top",LEFT="left",RIGHT="right",CENTER="center",PLUGINS={},NAMESPACE="qtip",ATTR_ID="data-qtip-id",WIDGET=["ui-widget","ui-tooltip"],SELECTOR="."+NAMESPACE,INACTIVE_EVENTS="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),CLASS_FIXED=NAMESPACE+"-fixed",CLASS_DEFAULT=NAMESPACE+"-default",CLASS_FOCUS=NAMESPACE+"-focus",CLASS_HOVER=NAMESPACE+"-hover",
CLASS_DISABLED=NAMESPACE+"-disabled",BROWSER={ie:function(){for(var v=4,i=document.createElement("div");(i.innerHTML="\x3c!--[if gt IE "+v+"]><i></i><![endif]--\x3e")&&i.getElementsByTagName("i")[0];v+=1);return 4<v?v:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||FALSE};function QTip(target,options,id,attr){this.id=id,this.target=target,this.tooltip=NULL,this.elements={target:target},this._id=NAMESPACE+"-"+id,this.timers={img:{}},this.options=options,this.plugins={},this.cache={event:{},target:$(),disabled:FALSE,
attr:attr,onTooltip:FALSE,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=FALSE}function invalidOpt(a){return a===NULL||"object"!==$.type(a)}function invalidContent(c){return!($.isFunction(c)||c&&c.attr||c.length||"object"===$.type(c)&&(c.jquery||c.then))}function sanitizeOptions(opts){var content,text,ajax,once;return invalidOpt(opts)?FALSE:(invalidOpt(opts.metadata)&&(opts.metadata={type:opts.metadata}),"content"in opts&&(invalidOpt(content=opts.content)||content.jquery||content.done?content=opts.content={text:text=invalidContent(content)?FALSE:content}:text=content.text,
"ajax"in content&&(ajax=content.ajax,once=ajax&&ajax.once!==FALSE,delete content.ajax,content.text=function(event,api){var loading=text||$(this).attr(api.options.content.attr)||"Loading...",deferred=$.ajax($.extend({},ajax,{context:api})).then(ajax.success,NULL,ajax.error).then(function(content){return content&&once&&api.set("content.text",content),content},function(xhr,status,error){api.destroyed||0===xhr.status||api.set("content.text",status+": "+error)});return once?loading:(api.set("content.text",loading),deferred)}),"title"in content&&($.isPlainObject(content.title)&&(content.button=content.title.button,content.title=content.title.text),invalidContent(
content.title||FALSE)&&(content.title=FALSE))),"position"in opts&&invalidOpt(opts.position)&&(opts.position={my:opts.position,at:opts.position}),"show"in opts&&invalidOpt(opts.show)&&(opts.show=opts.show.jquery?{target:opts.show}:opts.show===TRUE?{ready:TRUE}:{event:opts.show}),"hide"in opts&&invalidOpt(opts.hide)&&(opts.hide=opts.hide.jquery?{target:opts.hide}:{event:opts.hide}),"style"in opts&&invalidOpt(opts.style)&&(opts.style={classes:opts.style}),$.each(PLUGINS,function(){this.sanitize&&this.sanitize(opts)}),opts)}function convertNotation(options,notation){for(var obj,i=0,option=options,levels=notation.split(".");option=option[levels[i++]];
)i<levels.length&&(obj=option);return[obj||options,levels.pop()]}function setCallback(notation,args){var category,rule,match;for(category in this.checks)for(rule in this.checks[category])(match=new RegExp(rule,"i").exec(notation))&&(args.push(match),("builtin"===category||this.plugins[category])&&this.checks[category][rule].apply(this.plugins[category]||this,args))}(PROTOTYPE=QTip.prototype)._when=function(deferreds){return $.when.apply($,deferreds)},PROTOTYPE.render=function(show){if(this.rendered||this.destroyed)return this;var self=this,options=this.options,cache=this.cache,elements=this.elements,text=options.content.text,title=options.content.title,
button=options.content.button,posOptions=options.position,deferreds=(this._id,[]);return $.attr(this.target[0],"aria-describedby",this._id),cache.posClass=this._createPosClass((this.position={my:posOptions.my,at:posOptions.at}).my),this.tooltip=elements.tooltip=$("<div/>",{id:this._id,class:[NAMESPACE,CLASS_DEFAULT,options.style.classes,cache.posClass].join(" "),width:options.style.width||"",height:options.style.height||"",tracking:"mouse"===posOptions.target&&posOptions.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":FALSE,"aria-describedby":this._id+"-content","aria-hidden":TRUE}).toggleClass(CLASS_DISABLED,this.disabled).attr(ATTR_ID,this.id
).data(NAMESPACE,this).appendTo(posOptions.container).append(elements.content=$("<div />",{class:NAMESPACE+"-content",id:this._id+"-content","aria-atomic":TRUE})),this.rendered=-1,this.positioning=TRUE,title&&(this._createTitle(),$.isFunction(title)||deferreds.push(this._updateTitle(title,FALSE))),button&&this._createButton(),$.isFunction(text)||deferreds.push(this._updateContent(text,FALSE)),this.rendered=TRUE,this._setWidget(),$.each(PLUGINS,function(name){var instance;"render"===this.initialize&&(instance=this(self))&&(self.plugins[name]=instance)}),this._unassignEvents(),this._assignEvents(),this._when(deferreds).then(function(){self._trigger("render"),
self.positioning=FALSE,self.hiddenDuringWait||!options.show.ready&&!show||self.toggle(TRUE,cache.event,FALSE),self.hiddenDuringWait=FALSE}),QTIP.api[this.id]=this},PROTOTYPE.destroy=function(immediate){if(this.destroyed)return this.target;function process(){if(!this.destroyed){this.destroyed=TRUE;var timer,target=this.target,title=target.attr("oldtitle");for(timer in this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),$.each(this.plugins,function(name){this.destroy&&this.destroy()}),this.timers)clearTimeout(this.timers[timer]);target.removeData(NAMESPACE).removeAttr(ATTR_ID).removeAttr("data-hasqtip").removeAttr("aria-describedby"),
this.options.suppress&&title&&target.attr("title",title).removeAttr("oldtitle"),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=NULL,delete QTIP.api[this.id]}}return immediate===TRUE&&"hide"!==this.triggering||!this.rendered?process.call(this):(this.tooltip.one("tooltiphidden",$.proxy(process,this)),!this.triggering&&this.hide()),this.target},CHECKS=PROTOTYPE.checks={builtin:{"^id$":function(obj,o,v,prev){var id=v===TRUE?QTIP.nextid:v,new_id=NAMESPACE+"-"+id;id!==FALSE&&0<id.length&&!$("#"+new_id).length?(this._id=new_id,this.rendered&&(this.tooltip[0].id=this._id,
this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):obj[o]=prev},"^prerender":function(obj,o,v){v&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(obj,o,v){this._updateContent(v)},"^content.attr$":function(obj,o,v,prev){this.options.content.text===this.target.attr(prev)&&this._updateContent(this.target.attr(v))},"^content.title$":function(obj,o,v){if(!v)return this._removeTitle();v&&!this.elements.title&&this._createTitle(),this._updateTitle(v)},"^content.button$":function(obj,o,v){this._updateButton(v)},"^content.title.(text|button)$":function(obj,o,v){this.set("content."+o,v)},
"^position.(my|at)$":function(obj,o,v){"string"==typeof v&&(this.position[o]=obj[o]=new CORNER(v,"at"===o))},"^position.container$":function(obj,o,v){this.rendered&&this.tooltip.appendTo(v)},"^show.ready$":function(obj,o,v){v&&(!this.rendered&&this.render(TRUE)||this.toggle(TRUE))},"^style.classes$":function(obj,o,v,p){this.rendered&&this.tooltip.removeClass(p).addClass(v)},"^style.(width|height)":function(obj,o,v){this.rendered&&this.tooltip.css(o,v)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(obj,o,v){this.rendered&&this.tooltip.toggleClass(CLASS_DEFAULT,!!v)},
"^events.(render|show|move|hide|focus|blur)$":function(obj,o,v){this.rendered&&this.tooltip[($.isFunction(v)?"":"un")+"bind"]("tooltip"+o,v)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var posOptions=this.options.position;this.tooltip.attr("tracking","mouse"===posOptions.target&&posOptions.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},PROTOTYPE.get=function(notation){if(this.destroyed)return this;var o=convertNotation(this.options,notation.toLowerCase()),result=o[0][o[1]];return result.precedance?result.string():result}
;var rmove=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,rrender=/^prerender|show\.ready/i;PROTOTYPE.set=function(option,value){if(this.destroyed)return this;var name,rendered=this.rendered,reposition=FALSE,options=this.options;this.checks;return"string"==typeof option?(name=option,(option={})[name]=value):option=$.extend({},option),$.each(option,function(notation,value){if(rendered&&rrender.test(notation))delete option[notation];else{var previous,obj=convertNotation(options,notation.toLowerCase());previous=obj[0][obj[1]],obj[0][obj[1]]=value&&value.nodeType?$(value):value,reposition=rmove.test(notation)||reposition,
option[notation]=[obj[0],obj[1],value,previous]}}),sanitizeOptions(options),this.positioning=TRUE,$.each(option,$.proxy(setCallback,this)),this.positioning=FALSE,this.rendered&&0<this.tooltip[0].offsetWidth&&reposition&&this.reposition("mouse"===options.position.target?NULL:this.cache.event),this},PROTOTYPE._update=function(content,element,reposition){var self=this,cache=this.cache;return this.rendered&&content?($.isFunction(content)&&(content=content.call(this.elements.target,cache.event,this)||""),$.isFunction(content.then)?(cache.waiting=TRUE,content.then(function(c){return cache.waiting=FALSE,self._update(c,element)},NULL,function(e){return self._update(
e,element)})):content===FALSE||!content&&""!==content?FALSE:(content.jquery&&0<content.length?element.empty().append(content.css({display:"block",visibility:"visible"})):element.html(content),this._waitForContent(element).then(function(images){self.rendered&&0<self.tooltip[0].offsetWidth&&self.reposition(cache.event,!images.length)}))):FALSE},PROTOTYPE._waitForContent=function(element){var cache=this.cache;return cache.waiting=TRUE,($.fn.imagesLoaded?element.imagesLoaded():$.Deferred().resolve([])).done(function(){cache.waiting=FALSE}).promise()},PROTOTYPE._updateContent=function(content,reposition){this._update(content,this.elements.content,reposition)},
PROTOTYPE._updateTitle=function(content,reposition){this._update(content,this.elements.title,reposition)===FALSE&&this._removeTitle(FALSE)},PROTOTYPE._createTitle=function(){var elements=this.elements,id=this._id+"-title";elements.titlebar&&this._removeTitle(),elements.titlebar=$("<div />",{class:NAMESPACE+"-titlebar "+(this.options.style.widget?createWidgetClass("header"):"")}).append(elements.title=$("<div />",{id:id,class:NAMESPACE+"-title","aria-atomic":TRUE})).insertBefore(elements.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(event){$(this).toggleClass("ui-state-active ui-state-focus","down"===event.type.substr(-4)
)}).delegate(".qtip-close","mouseover mouseout",function(event){$(this).toggleClass("ui-state-hover","mouseover"===event.type)}),this.options.content.button&&this._createButton()},PROTOTYPE._removeTitle=function(reposition){var elements=this.elements;elements.title&&(elements.titlebar.remove(),elements.titlebar=elements.title=elements.button=NULL,reposition!==FALSE&&this.reposition())},PROTOTYPE._createPosClass=function(my){return NAMESPACE+"-pos-"+(my||this.options.position.my).abbrev()},PROTOTYPE.reposition=function(event,effect){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=TRUE;var pluginCalculations,offset,adjusted,
newClass,cache=this.cache,tooltip=this.tooltip,posOptions=this.options.position,target=posOptions.target,my=posOptions.my,at=posOptions.at,viewport=posOptions.viewport,container=posOptions.container,adjust=posOptions.adjust,method=adjust.method.split(" "),tooltipWidth=tooltip.outerWidth(FALSE),tooltipHeight=tooltip.outerHeight(FALSE),targetWidth=0,targetHeight=0,type=tooltip.css("position"),position={left:0,top:0},visible=0<tooltip[0].offsetWidth,isScroll=event&&"scroll"===event.type,win=$(window),doc=container[0].ownerDocument,mouse=this.mouse;if($.isArray(target)&&2===target.length)at={x:LEFT,y:TOP},position={left:target[0],top:target[1]};else if(
"mouse"===target)at={x:LEFT,y:TOP},(!adjust.mouse||this.options.hide.distance)&&cache.origin&&cache.origin.pageX?event=cache.origin:!event||event&&("resize"===event.type||"scroll"===event.type)?event=cache.event:mouse&&mouse.pageX&&(event=mouse),"static"!==type&&(position=container.offset()),doc.body.offsetWidth!==(window.innerWidth||doc.documentElement.clientWidth)&&(offset=$(document.body).offset()),position={left:event.pageX-position.left+(offset&&offset.left||0),top:event.pageY-position.top+(offset&&offset.top||0)},adjust.mouse&&isScroll&&mouse&&(position.left-=(mouse.scrollX||0)-win.scrollLeft(),position.top-=(mouse.scrollY||0)-win.scrollTop());else{if(
"event"===target?event&&event.target&&"scroll"!==event.type&&"resize"!==event.type?cache.target=$(event.target):event.target||(cache.target=this.elements.target):"event"!==target&&(cache.target=$(target.jquery?target:this.elements.target)),target=cache.target,0===(target=$(target).eq(0)).length)return this;target[0]===document||target[0]===window?(targetWidth=BROWSER.iOS?window.innerWidth:target.width(),targetHeight=BROWSER.iOS?window.innerHeight:target.height(),target[0]===window&&(position={top:(viewport||target).scrollTop(),left:(viewport||target).scrollLeft()})):PLUGINS.imagemap&&target.is("area")?pluginCalculations=PLUGINS.imagemap(this,target,at,
PLUGINS.viewport?method:FALSE):PLUGINS.svg&&target&&target[0].ownerSVGElement?pluginCalculations=PLUGINS.svg(this,target,at,PLUGINS.viewport?method:FALSE):(targetWidth=target.outerWidth(FALSE),targetHeight=target.outerHeight(FALSE),position=target.offset()),pluginCalculations&&(targetWidth=pluginCalculations.width,targetHeight=pluginCalculations.height,offset=pluginCalculations.offset,position=pluginCalculations.position),position=this.reposition.offset(target,position,container),(3.1<BROWSER.iOS&&BROWSER.iOS<4.1||4.3<=BROWSER.iOS&&BROWSER.iOS<4.33||!BROWSER.iOS&&"fixed"===type)&&(position.left-=win.scrollLeft(),position.top-=win.scrollTop()),(
!pluginCalculations||pluginCalculations&&pluginCalculations.adjustable!==FALSE)&&(position.left+=at.x===RIGHT?targetWidth:at.x===CENTER?targetWidth/2:0,position.top+="bottom"===at.y?targetHeight:at.y===CENTER?targetHeight/2:0)}return position.left+=adjust.x+(my.x===RIGHT?-tooltipWidth:my.x===CENTER?-tooltipWidth/2:0),position.top+=adjust.y+("bottom"===my.y?-tooltipHeight:my.y===CENTER?-tooltipHeight/2:0),PLUGINS.viewport?(adjusted=position.adjusted=PLUGINS.viewport(this,position,posOptions,targetWidth,targetHeight,tooltipWidth,tooltipHeight),offset&&adjusted.left&&(position.left+=offset.left),offset&&adjusted.top&&(position.top+=offset.top),adjusted.my&&(
this.position.my=adjusted.my)):position.adjusted={left:0,top:0},cache.posClass!==(newClass=this._createPosClass(this.position.my))&&tooltip.removeClass(cache.posClass).addClass(cache.posClass=newClass),this._trigger("move",[position,viewport.elem||viewport],event)&&(delete position.adjusted,effect===FALSE||!visible||isNaN(position.left)||isNaN(position.top)||"mouse"===target||!$.isFunction(posOptions.effect)?tooltip.css(position):$.isFunction(posOptions.effect)&&(posOptions.effect.call(tooltip,this,$.extend({},position)),tooltip.queue(function(next){$(this).css({opacity:"",height:""}),BROWSER.ie&&this.style.removeAttribute("filter"),next()})),
this.positioning=FALSE),this},PROTOTYPE.reposition.offset=function(elem,pos,container){if(!container[0])return pos;var scrolled,position,parentOffset,overflow,ownerDocument=$(elem[0].ownerDocument),quirks=!!BROWSER.ie&&"CSS1Compat"!==document.compatMode,parent=container[0];function scroll(e,i){pos.left+=i*e.scrollLeft(),pos.top+=i*e.scrollTop()}for(;"static"!==(position=$.css(parent,"position"))&&("fixed"===position?(parentOffset=parent.getBoundingClientRect(),scroll(ownerDocument,-1)):((parentOffset=$(parent).position()).left+=parseFloat($.css(parent,"borderLeftWidth"))||0,parentOffset.top+=parseFloat($.css(parent,"borderTopWidth"))||0),
pos.left-=parentOffset.left+(parseFloat($.css(parent,"marginLeft"))||0),pos.top-=parentOffset.top+(parseFloat($.css(parent,"marginTop"))||0),scrolled||"hidden"===(overflow=$.css(parent,"overflow"))||"visible"===overflow||(scrolled=$(parent))),parent=parent.offsetParent;);return scrolled&&(scrolled[0]!==ownerDocument[0]||quirks)&&scroll(scrolled,1),pos};var C=(CORNER=PROTOTYPE.reposition.Corner=function(corner,forceY){corner=(""+corner).replace(/([A-Z])/," $1").replace(/middle/gi,CENTER).toLowerCase(),this.x=(corner.match(/left|right/i)||corner.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(corner.match(/top|bottom|center/i)||["inherit"]
)[0].toLowerCase(),this.forceY=!!forceY;var f=corner.charAt(0);this.precedance="t"===f||"b"===f?Y:X}).prototype;function createWidgetClass(cls){return WIDGET.concat("").join(cls?"-"+cls+" ":" ")}function delay(callback,duration){if(0<duration)return setTimeout($.proxy(callback,this),duration);callback.call(this)}function showMethod(event){this.tooltip.hasClass(CLASS_DISABLED)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=delay.call(this,function(){this.toggle(TRUE,event)},this.options.show.delay))}function hideMethod(event){if(!this.tooltip.hasClass(CLASS_DISABLED)&&!this.destroyed){var relatedTarget=$(event.relatedTarget),
ontoTooltip=relatedTarget.closest(SELECTOR)[0]===this.tooltip[0],ontoTarget=relatedTarget[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==relatedTarget[0]&&"mouse"===this.options.position.target&&ontoTooltip||this.options.hide.fixed&&/mouse(out|leave|move)/.test(event.type)&&(ontoTooltip||ontoTarget))try{event.preventDefault(),event.stopImmediatePropagation()}catch(e){}else this.timers.hide=delay.call(this,function(){this.toggle(FALSE,event)},this.options.hide.delay,this)}}function inactiveMethod(event){!this.tooltip.hasClass(CLASS_DISABLED)&&this.options.hide.inactive&&(clearTimeout(
this.timers.inactive),this.timers.inactive=delay.call(this,function(){this.hide(event)},this.options.hide.inactive))}function repositionMethod(event){this.rendered&&0<this.tooltip[0].offsetWidth&&this.reposition(event)}function delegate(selector,events,method){$(document.body).delegate(selector,(events.split?events:events.join("."+NAMESPACE+" "))+"."+NAMESPACE,function(){var api=QTIP.api[$.attr(this,ATTR_ID)];api&&!api.disabled&&method.apply(api,arguments)})}C.invert=function(z,center){this[z]=this[z]===LEFT?RIGHT:this[z]===RIGHT?LEFT:center||this[z]},C.string=function(join){var x=this.x,y=this.y,result=x!==y?"center"===x||"center"!==y&&(
this.precedance===Y||this.forceY)?[y,x]:[x,y]:[x];return!1!==join?result.join(" "):result},C.abbrev=function(){var result=this.string(!1);return result[0].charAt(0)+(result[1]&&result[1].charAt(0)||"")},C.clone=function(){return new CORNER(this.string(),this.forceY)},PROTOTYPE.toggle=function(state,event){var cache=this.cache,options=this.options,tooltip=this.tooltip;if(event){if(/over|enter/.test(event.type)&&cache.event&&/out|leave/.test(cache.event.type)&&options.show.target.add(event.target).length===options.show.target.length&&tooltip.has(event.relatedTarget).length)return this;cache.event=$.event.fix(event)}if(this.waiting&&!state&&(
this.hiddenDuringWait=TRUE),!this.rendered)return state?this.render(1):this;if(this.destroyed||this.disabled)return this;var identicalState,allow,after,type=state?"show":"hide",opts=this.options[type],posOptions=(this.options[state?"hide":"show"],this.options.position),contentOptions=this.options.content,width=this.tooltip.css("width"),visible=this.tooltip.is(":visible"),animate=state||1===opts.target.length,sameTarget=!event||opts.target.length<2||cache.target[0]===event.target;return(typeof state).search("boolean|number")&&(state=!visible),allow=(identicalState=!tooltip.is(":animated")&&visible===state&&sameTarget)?NULL:!!this._trigger(type,[90]),
this.destroyed?this:(allow!==FALSE&&state&&this.focus(event),!allow||identicalState||($.attr(tooltip[0],"aria-hidden",!state),state?(this.mouse&&(cache.origin=$.event.fix(this.mouse)),$.isFunction(contentOptions.text)&&this._updateContent(contentOptions.text,FALSE),$.isFunction(contentOptions.title)&&this._updateTitle(contentOptions.title,FALSE),!trackingBound&&"mouse"===posOptions.target&&posOptions.adjust.mouse&&($(document).bind("mousemove."+NAMESPACE,this._storeMouse),trackingBound=TRUE),width||tooltip.css("width",tooltip.outerWidth(FALSE)),this.reposition(event,arguments[2]),width||tooltip.css("width",""),opts.solo&&("string"==typeof opts.solo?$(
opts.solo):$(SELECTOR,opts.solo)).not(tooltip).not(opts.target).qtip("hide",$.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete cache.origin,trackingBound&&!$(SELECTOR+'[tracking="true"]:visible',opts.solo).not(tooltip).length&&($(document).unbind("mousemove."+NAMESPACE),trackingBound=FALSE),this.blur(event)),after=$.proxy(function(){state?(BROWSER.ie&&tooltip[0].style.removeAttribute("filter"),tooltip.css("overflow",""),"string"==typeof opts.autofocus&&$(this.options.show.autofocus,tooltip).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):tooltip.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(
state?"visible":"hidden")},this),opts.effect===FALSE||animate===FALSE?(tooltip[type](),after()):$.isFunction(opts.effect)?(tooltip.stop(1,1),opts.effect.call(tooltip,this),tooltip.queue("fx",function(n){after(),n()})):tooltip.fadeTo(90,state?1:0,after),state&&opts.target.trigger("qtip-"+this.id+"-inactive")),this)},PROTOTYPE.show=function(event){return this.toggle(TRUE,event)},PROTOTYPE.hide=function(event){return this.toggle(FALSE,event)},PROTOTYPE.focus=function(event){if(!this.rendered||this.destroyed)return this;var qtips=$(SELECTOR),tooltip=this.tooltip,curIndex=parseInt(tooltip[0].style.zIndex,10),newIndex=QTIP.zindex+qtips.length
;return tooltip.hasClass(CLASS_FOCUS)||this._trigger("focus",[newIndex],event)&&(curIndex!==newIndex&&(qtips.each(function(){this.style.zIndex>curIndex&&(this.style.zIndex=this.style.zIndex-1)}),qtips.filter("."+CLASS_FOCUS).qtip("blur",event)),tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex),this},PROTOTYPE.blur=function(event){return!this.rendered||this.destroyed||(this.tooltip.removeClass(CLASS_FOCUS),this._trigger("blur",[this.tooltip.css("zIndex")],event)),this},PROTOTYPE.disable=function(state){return this.destroyed||("toggle"===state?state=!(this.rendered?this.tooltip.hasClass(CLASS_DISABLED):this.disabled):"boolean"!=typeof state&&(state=TRUE)
,this.rendered&&this.tooltip.toggleClass(CLASS_DISABLED,state).attr("aria-disabled",state),this.disabled=!!state),this},PROTOTYPE.enable=function(){return this.disable(FALSE)},PROTOTYPE._createButton=function(){var self=this,elements=this.elements,tooltip=elements.tooltip,button=this.options.content.button,close="string"==typeof button?button:"Close tooltip";elements.button&&elements.button.remove(),button.jquery?elements.button=button:elements.button=$("<a />",{class:"qtip-close "+(this.options.style.widget?"":NAMESPACE+"-icon"),title:close,"aria-label":close}).prepend($("<span />",{class:"ui-icon ui-icon-close",html:"&times;"})),elements.button.appendTo(
elements.titlebar||tooltip).attr("role","button").click(function(event){return tooltip.hasClass(CLASS_DISABLED)||self.hide(event),FALSE})},PROTOTYPE._updateButton=function(button){if(!this.rendered)return FALSE;var elem=this.elements.button;button?this._createButton():elem.remove()},PROTOTYPE._setWidget=function(){var on=this.options.style.widget,elements=this.elements,tooltip=elements.tooltip,disabled=tooltip.hasClass(CLASS_DISABLED);tooltip.removeClass(CLASS_DISABLED),CLASS_DISABLED=on?"ui-state-disabled":"qtip-disabled",tooltip.toggleClass(CLASS_DISABLED,disabled),tooltip.toggleClass("ui-helper-reset "+createWidgetClass(),on).toggleClass(CLASS_DEFAULT,
this.options.style.def&&!on),elements.content&&elements.content.toggleClass(createWidgetClass("content"),on),elements.titlebar&&elements.titlebar.toggleClass(createWidgetClass("header"),on),elements.button&&elements.button.toggleClass(NAMESPACE+"-icon",!on)},PROTOTYPE._storeMouse=function(event){return(this.mouse=$.event.fix(event)).type="mousemove",this},PROTOTYPE._bind=function(targets,events,method,suffix,context){if(targets&&method&&events.length){var ns="."+this._id+(suffix?"-"+suffix:"");return $(targets).bind((events.split?events:events.join(ns+" "))+ns,$.proxy(method,context||this)),this}},PROTOTYPE._unbind=function(targets,suffix){return targets&&$(
targets).unbind("."+this._id+(suffix?"-"+suffix:"")),this},PROTOTYPE._trigger=function(type,args,event){var callback=$.Event("tooltip"+type);return callback.originalEvent=event&&$.extend({},event)||this.cache.event||NULL,this.triggering=type,this.tooltip.trigger(callback,[this].concat(args||[])),this.triggering=FALSE,!callback.isDefaultPrevented()},PROTOTYPE._bindEvents=function(showEvents,hideEvents,showTargets,hideTargets,showMethod,hideMethod){var similarTargets=showTargets.filter(hideTargets).add(hideTargets.filter(showTargets)),toggleEvents=[];similarTargets.length&&($.each(hideEvents,function(i,type){var showIndex=$.inArray(type,showEvents)
;-1<showIndex&&toggleEvents.push(showEvents.splice(showIndex,1)[0])}),toggleEvents.length&&(this._bind(similarTargets,toggleEvents,function(event){(!!this.rendered&&0<this.tooltip[0].offsetWidth?hideMethod:showMethod).call(this,event)}),showTargets=showTargets.not(similarTargets),hideTargets=hideTargets.not(similarTargets))),this._bind(showTargets,showEvents,showMethod),this._bind(hideTargets,hideEvents,hideMethod)},PROTOTYPE._assignInitialEvents=function(event){var options=this.options,showTarget=options.show.target,hideTarget=options.hide.target,showEvents=options.show.event?$.trim(""+options.show.event).split(" "):[],hideEvents=options.hide.event?$.trim(
""+options.hide.event).split(" "):[];function hoverIntent(event){if(this.disabled||this.destroyed)return FALSE;this.cache.event=event&&$.event.fix(event),this.cache.target=event&&$(event.target),clearTimeout(this.timers.show),this.timers.show=delay.call(this,function(){this.render("object"==typeof event||options.show.ready)},options.prerender?0:options.show.delay)}this._bind(this.elements.target,["remove","removeqtip"],function(event){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(options.show.event)&&!/mouse(out|leave)/i.test(options.hide.event)&&hideEvents.push("mouseleave"),this._bind(showTarget,"mousemove",function(event){this._storeMouse(event),
this.cache.onTarget=TRUE}),this._bindEvents(showEvents,hideEvents,showTarget,hideTarget,hoverIntent,function(){if(!this.timers)return FALSE;clearTimeout(this.timers.show)}),(options.show.ready||options.prerender)&&hoverIntent.call(this,event)},PROTOTYPE._assignEvents=function(){var self=this,options=this.options,posOptions=options.position,tooltip=this.tooltip,showTarget=options.show.target,hideTarget=options.hide.target,containerTarget=posOptions.container,viewportTarget=posOptions.viewport,documentTarget=$(document),windowTarget=($(document.body),$(window)),showEvents=options.show.event?$.trim(""+options.show.event).split(" "):[],
hideEvents=options.hide.event?$.trim(""+options.hide.event).split(" "):[];$.each(options.events,function(name,callback){self._bind(tooltip,"toggle"===name?["tooltipshow","tooltiphide"]:["tooltip"+name],callback,null,tooltip)}),/mouse(out|leave)/i.test(options.hide.event)&&"window"===options.hide.leave&&this._bind(documentTarget,["mouseout","blur"],function(event){/select|option/.test(event.target.nodeName)||event.relatedTarget||this.hide(event)}),options.hide.fixed?hideTarget=hideTarget.add(tooltip.addClass(CLASS_FIXED)):/mouse(over|enter)/i.test(options.show.event)&&this._bind(hideTarget,"mouseleave",function(){clearTimeout(this.timers.show)}),-1<(
""+options.hide.event).indexOf("unfocus")&&this._bind(containerTarget.closest("html"),["mousedown","touchstart"],function(event){var elem=$(event.target),enabled=this.rendered&&!this.tooltip.hasClass(CLASS_DISABLED)&&0<this.tooltip[0].offsetWidth,isAncestor=0<elem.parents(SELECTOR).filter(this.tooltip[0]).length;elem[0]===this.target[0]||elem[0]===this.tooltip[0]||isAncestor||this.target.has(elem[0]).length||!enabled||this.hide(event)}),"number"==typeof options.hide.inactive&&(this._bind(showTarget,"qtip-"+this.id+"-inactive",inactiveMethod,"inactive"),this._bind(hideTarget.add(tooltip),QTIP.inactiveEvents,inactiveMethod)),this._bindEvents(showEvents,
hideEvents,showTarget,hideTarget,showMethod,hideMethod),this._bind(showTarget.add(tooltip),"mousemove",function(event){if("number"==typeof options.hide.distance){var origin=this.cache.origin||{},limit=this.options.hide.distance,abs=Math.abs;(abs(event.pageX-origin.pageX)>=limit||abs(event.pageY-origin.pageY)>=limit)&&this.hide(event)}this._storeMouse(event)}),"mouse"===posOptions.target&&posOptions.adjust.mouse&&(options.hide.event&&this._bind(showTarget,["mouseenter","mouseleave"],function(event){if(!this.cache)return FALSE;this.cache.onTarget="mouseenter"===event.type}),this._bind(documentTarget,"mousemove",function(event){
this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(CLASS_DISABLED)&&0<this.tooltip[0].offsetWidth&&this.reposition(event)})),(posOptions.adjust.resize||viewportTarget.length)&&this._bind($.event.special.resize?viewportTarget:windowTarget,"resize",repositionMethod),posOptions.adjust.scroll&&this._bind(windowTarget.add(posOptions.container),"scroll",repositionMethod)},PROTOTYPE._unassignEvents=function(){var options=this.options,showTargets=options.show.target,hideTargets=options.hide.target,targets=$.grep([this.elements.target[0],this.rendered&&this.tooltip[0],options.position.container[0],options.position.viewport[0],
options.position.container.closest("html")[0],window,document],function(i){return"object"==typeof i});showTargets&&showTargets.toArray&&(targets=targets.concat(showTargets.toArray())),hideTargets&&hideTargets.toArray&&(targets=targets.concat(hideTargets.toArray())),this._unbind(targets)._unbind(targets,"destroy")._unbind(targets,"inactive")},$(function(){delegate(SELECTOR,["mouseenter","mouseleave"],function(event){var state="mouseenter"===event.type,tooltip=$(event.currentTarget),target=$(event.relatedTarget||event.target),options=this.options;state?(this.focus(event),tooltip.hasClass(CLASS_FIXED)&&!tooltip.hasClass(CLASS_DISABLED)&&clearTimeout(
this.timers.hide)):"mouse"===options.position.target&&options.position.adjust.mouse&&options.hide.event&&options.show.target&&!target.closest(options.show.target[0]).length&&this.hide(event),tooltip.toggleClass(CLASS_HOVER,state)}),delegate("["+ATTR_ID+"]",INACTIVE_EVENTS,inactiveMethod)}),QTIP=$.fn.qtip=function(options,notation,newValue){var command=(""+options).toLowerCase(),returned=NULL,args=$.makeArray(arguments).slice(1),event=args[args.length-1],opts=this[0]?$.data(this[0],NAMESPACE):NULL;return!arguments.length&&opts||"api"===command?opts:"string"==typeof options?(this.each(function(){var api=$.data(this,NAMESPACE);if(!api)return TRUE;if(
event&&event.timeStamp&&(api.cache.event=event),!notation||"option"!==command&&"options"!==command)api[command]&&api[command].apply(api,args);else{if(void 0===newValue&&!$.isPlainObject(notation))return returned=api.get(notation),FALSE;api.set(notation,newValue)}}),returned!==NULL?returned:this):"object"!=typeof options&&arguments.length?void 0:(opts=sanitizeOptions($.extend(TRUE,{},options)),this.each(function(i){var api,id;if(id=!(id=$.isArray(opts.id)?opts.id[i]:opts.id)||id===FALSE||id.length<1||QTIP.api[id]?QTIP.nextid++:id,(api=function(elem,id,opts){var obj,posOptions,attr,config,title,docBody=$(document.body),newTarget=elem[0]===document?docBody:elem
,metadata=elem.metadata?elem.metadata(opts.metadata):NULL,metadata5="html5"===opts.metadata.type&&metadata?metadata[opts.metadata.name]:NULL,html5=elem.data(opts.metadata.name||"qtipopts");try{html5="string"==typeof html5?$.parseJSON(html5):html5}catch(e){}if(posOptions=(config=$.extend(TRUE,{},QTIP.defaults,opts,"object"==typeof html5?sanitizeOptions(html5):NULL,sanitizeOptions(metadata5||metadata))).position,config.id=id,"boolean"==typeof config.content.text){if(attr=elem.attr(config.content.attr),config.content.attr===FALSE||!attr)return FALSE;config.content.text=attr}if(posOptions.container.length||(posOptions.container=docBody),
posOptions.target===FALSE&&(posOptions.target=newTarget),config.show.target===FALSE&&(config.show.target=newTarget),config.show.solo===TRUE&&(config.show.solo=posOptions.container.closest("body")),config.hide.target===FALSE&&(config.hide.target=newTarget),config.position.viewport===TRUE&&(config.position.viewport=posOptions.container),posOptions.container=posOptions.container.eq(0),posOptions.at=new CORNER(posOptions.at,TRUE),posOptions.my=new CORNER(posOptions.my),elem.data(NAMESPACE))if(config.overwrite)elem.qtip("destroy",!0);else if(config.overwrite===FALSE)return FALSE;return elem.attr("data-hasqtip",id),config.suppress&&(title=elem.attr("title")
)&&elem.removeAttr("title").attr("oldtitle",title).attr("title",""),obj=new QTip(elem,config,id,!!attr),elem.data(NAMESPACE,obj),obj}($(this),id,opts))===FALSE)return TRUE;QTIP.api[id]=api,$.each(PLUGINS,function(){"initialize"===this.initialize&&this(api)}),api._assignInitialEvents(event)}))},$.qtip=QTip,QTIP.api={},$.each({attr:function(attr,val){if(this.length){var self=this[0],api=$.data(self,"qtip");if("title"===attr&&api&&"object"==typeof api&&api.options.suppress)return arguments.length<2?$.attr(self,"oldtitle"):(api&&"title"===api.options.content.attr&&api.cache.attr&&api.set("content.text",val),this.attr("oldtitle",val))}
return $.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(keepData){$([]);var elems=$.fn.clone_replacedByqTip.apply(this,arguments);return keepData||elems.filter("[oldtitle]").attr("title",function(){return $.attr(this,"oldtitle")}).removeAttr("oldtitle"),elems}},function(name,func){if(!func||$.fn[name+"_replacedByqTip"])return TRUE;var old=$.fn[name+"_replacedByqTip"]=$.fn[name];$.fn[name]=function(){return func.apply(this,arguments)||old.apply(this,arguments)}}),$.ui||($.cleanData_replacedByqTip=$.cleanData,$.cleanData=function(elems){for(var elem,i=0;(elem=$(elems[i])).length;i++)if(elem.attr("data-hasqtip"))try{elem.triggerHandler(
"removeqtip")}catch(e){}$.cleanData_replacedByqTip.apply(this,arguments)}),QTIP.version="2.2.1",QTIP.nextid=0,QTIP.inactiveEvents=INACTIVE_EVENTS,QTIP.zindex=15e3,QTIP.defaults={prerender:FALSE,id:FALSE,overwrite:TRUE,suppress:TRUE,content:{text:TRUE,attr:"title",title:FALSE,button:FALSE},position:{my:"top left",at:"bottom right",target:FALSE,container:FALSE,viewport:FALSE,adjust:{x:0,y:0,mouse:TRUE,scroll:TRUE,resize:TRUE,method:"flipinvert flipinvert"},effect:function(api,pos,viewport){$(this).animate(pos,{duration:200,queue:FALSE})}},show:{target:FALSE,event:"mouseenter",effect:TRUE,delay:90,solo:FALSE,ready:FALSE,autofocus:FALSE},hide:{target:FALSE,
event:"mouseleave",effect:TRUE,delay:0,fixed:FALSE,inactive:FALSE,leave:"window",distance:FALSE},style:{classes:"",widget:FALSE,width:FALSE,height:FALSE,def:TRUE},events:{render:NULL,move:NULL,show:NULL,hide:NULL,toggle:NULL,visible:NULL,hidden:NULL,focus:NULL,blur:NULL}};var TIP,BG_COLOR="background-color",HASCANVAS=!!document.createElement("canvas").getContext,INVALID=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;function camel(s){return s.charAt(0).toUpperCase()+s.slice(1)}var context,cssProps={},cssPrefixes=["Webkit","O","Moz","ms"];function intCss(elem,prop){return Math.ceil(parseFloat(function(elem,prop){var cur,val,ucProp=prop.charAt(0).toUpperCase(
)+prop.slice(1),props=(prop+" "+cssPrefixes.join(ucProp+" ")+ucProp).split(" "),i=0;if(cssProps[prop])return elem.css(cssProps[prop]);for(;cur=props[i++];)if(void 0!==(val=elem.css(cur)))return cssProps[prop]=cur,val}(elem,prop)))}if(HASCANVAS)var SCALE=(window.devicePixelRatio||1)/((context=document.createElement("canvas").getContext("2d")).backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||1);else var createVML=function(tag,props,style){return"<qtipvml:"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(props||""
)+' style="behavior: url(#default#VML); '+(style||"")+'" />'};function Tip(qtip,options){this._ns="tip",this.options=options,this.offset=options.offset,this.size=[options.width,options.height],this.init(this.qtip=qtip)}$.extend(Tip.prototype,{init:function(qtip){var context,tip;tip=this.element=qtip.elements.tip=$("<div />",{class:NAMESPACE+"-tip"}).prependTo(qtip.tooltip),HASCANVAS?((context=$("<canvas />").appendTo(this.element)[0].getContext("2d")).lineJoin="miter",context.miterLimit=1e5,context.save()):(context=createVML("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(context+context),qtip._bind($("*",tip).add(tip),["click",
"mousedown"],function(event){event.stopPropagation()},this._ns)),qtip._bind(qtip.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(corner){var titlebar=this.qtip.elements.titlebar;return titlebar&&(corner.y===TOP||corner.y===CENTER&&this.element.position().top+this.size[1]/2+this.options.offset<titlebar.outerHeight(TRUE))},_parseCorner:function(corner){var my=this.qtip.options.position.my
;return corner===FALSE||my===FALSE?corner=FALSE:corner===TRUE?corner=new CORNER(my.string()):corner.string||((corner=new CORNER(corner)).fixed=TRUE),corner},_parseWidth:function(corner,side,use){var elements=this.qtip.elements,prop="border"+camel(side)+"Width";return(use?intCss(use,prop):intCss(elements.content,prop)||intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,prop))||0},_parseRadius:function(corner){var elements=this.qtip.elements,prop="border"+camel(corner.y)+camel(corner.x)+"Radius";return BROWSER.ie<9?0:intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,
prop)||0},_invalidColour:function(elem,prop,compare){var val=elem.css(prop);return!val||compare&&val===elem.css(compare)||INVALID.test(val)?FALSE:val},_parseColours:function(corner){var elements=this.qtip.elements,tip=this.element.css("cssText",""),borderSide="border"+camel(corner[corner.precedance])+camel("color"),colorElem=this._useTitle(corner)&&elements.titlebar||elements.content,css=this._invalidColour,color=[];return color[0]=css(tip,BG_COLOR)||css(colorElem,BG_COLOR)||css(elements.content,BG_COLOR)||css(elements.tooltip,BG_COLOR)||tip.css(BG_COLOR),color[1]=css(tip,borderSide,"color")||css(colorElem,borderSide,"color")||css(elements.content,borderSide
,"color")||css(elements.tooltip,borderSide,"color")||elements.tooltip.css(borderSide),$("*",tip).add(tip).css("cssText",BG_COLOR+":transparent !important;border:0 !important;"),color},_calculateSize:function(corner){var ratio,result,y=corner.precedance===Y,width=this.options.width,height=this.options.height,isCenter="c"===corner.abbrev(),base=(y?width:height)*(isCenter?.5:1),pow=Math.pow,round=Math.round,smallHyp=Math.sqrt(pow(base,2)+pow(height,2)),hyp=[this.border/base*smallHyp,this.border/height*smallHyp];return hyp[2]=Math.sqrt(pow(hyp[0],2)-pow(this.border,2)),hyp[3]=Math.sqrt(pow(hyp[1],2)-pow(this.border,2)),result=[round((ratio=(
smallHyp+hyp[2]+hyp[3]+(isCenter?0:hyp[0]))/smallHyp)*width),round(ratio*height)],y?result:result.reverse()},_calculateTip:function(corner,size,scale){scale=scale||1;var width=(size=size||this.size)[0]*scale,height=size[1]*scale,width2=Math.ceil(width/2),height2=Math.ceil(height/2),tips={br:[0,0,width,height,width,0],bl:[0,0,width,0,0,height],tr:[0,height,width,0,width,height],tl:[0,0,0,height,width,height],tc:[0,height,width2,0,width,height],bc:[0,0,width,0,width2,height],rc:[0,0,width,height2,0,height],lc:[width,0,width,height,0,height2]};return tips.lt=tips.br,tips.rt=tips.bl,tips.lb=tips.tr,tips.rb=tips.tl,tips[corner.abbrev()]},_drawCoords:function(
context,coords){context.beginPath(),context.moveTo(coords[0],coords[1]),context.lineTo(coords[2],coords[3]),context.lineTo(coords[4],coords[5]),context.closePath()},create:function(){var c=this.corner=(HASCANVAS||BROWSER.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=c.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(corner,position){if(!this.enabled)return this;var color,precedance,context,coords,bigCoords,translate,newSize,border,elements=this.qtip.elements,tip=this.element,inner=tip.children(),options=this.options,curSize=this.size,
mimic=options.mimic,round=Math.round;corner||(corner=this.qtip.cache.corner||this.corner),mimic===FALSE?mimic=corner:((mimic=new CORNER(mimic)).precedance=corner.precedance,"inherit"===mimic.x?mimic.x=corner.x:"inherit"===mimic.y?mimic.y=corner.y:mimic.x===mimic.y&&(mimic[corner.precedance]=corner[corner.precedance])),precedance=mimic.precedance,corner.precedance===X?this._swapDimensions():this._resetDimensions(),"transparent"!==(color=this.color=this._parseColours(corner))[1]?(border=this.border=this._parseWidth(corner,corner[corner.precedance]),options.border&&border<1&&!INVALID.test(color[1])&&(color[0]=color[1]),
this.border=border=options.border!==TRUE?options.border:border):this.border=border=0,newSize=this.size=this._calculateSize(corner),tip.css({width:newSize[0],height:newSize[1],lineHeight:newSize[1]+"px"}),translate=corner.precedance===Y?[round(mimic.x===LEFT?border:mimic.x===RIGHT?newSize[0]-curSize[0]-border:(newSize[0]-curSize[0])/2),round(mimic.y===TOP?newSize[1]-curSize[1]:0)]:[round(mimic.x===LEFT?newSize[0]-curSize[0]:0),round(mimic.y===TOP?border:"bottom"===mimic.y?newSize[1]-curSize[1]-border:(newSize[1]-curSize[1])/2)],HASCANVAS?((context=inner[0].getContext("2d")).restore(),context.save(),context.clearRect(0,0,6e3,6e3),coords=this._calculateTip(
mimic,curSize,SCALE),bigCoords=this._calculateTip(mimic,this.size,SCALE),inner.attr("width",newSize[0]*SCALE).attr("height",newSize[1]*SCALE),inner.css("width",newSize[0]).css("height",newSize[1]),this._drawCoords(context,bigCoords),context.fillStyle=color[1],context.fill(),context.translate(translate[0]*SCALE,translate[1]*SCALE),this._drawCoords(context,coords),context.fillStyle=color[0],context.fill()):(coords="m"+(coords=this._calculateTip(mimic))[0]+","+coords[1]+" l"+coords[2]+","+coords[3]+" "+coords[4]+","+coords[5]+" xe",translate[2]=border&&/^(r|b)/i.test(corner.string())?8===BROWSER.ie?2:1:0,inner.css({coordsize:newSize[0]+border+" "+(
newSize[1]+border),antialias:""+(-1<mimic.string().indexOf(CENTER)),left:translate[0]-translate[2]*Number(precedance===X),top:translate[1]-translate[2]*Number(precedance===Y),width:newSize[0]+border,height:newSize[1]+border}).each(function(i){var $this=$(this);$this[$this.prop?"prop":"attr"]({coordsize:newSize[0]+border+" "+(newSize[1]+border),path:coords,fillcolor:color[0],filled:!!i,stroked:!i}).toggle(!(!border&&!i)),!i&&$this.html(createVML("stroke",'weight="'+2*border+'px" color="'+color[1]+'" miterlimit="1000" joinstyle="miter"'))})),window.opera&&setTimeout(function(){elements.tip.css({display:"inline-block",visibility:"visible"})},1),
position!==FALSE&&this.calculate(corner,newSize)},calculate:function(corner,size){if(!this.enabled)return FALSE;var precedance,corners,self=this,elements=this.qtip.elements,tip=this.element,userOffset=this.options.offset,position=(elements.tooltip.hasClass("ui-widget"),{});return corner=corner||this.corner,precedance=corner.precedance,size=size||this._calculateSize(corner),corners=[corner.x,corner.y],precedance===X&&corners.reverse(),$.each(corners,function(i,side){var b,bc,br;side===CENTER?(position[b=precedance===Y?LEFT:TOP]="50%",position["margin-"+b]=-Math.round(size[precedance===Y?0:1]/2)+userOffset):(b=self._parseWidth(corner,side,elements.tooltip),
bc=self._parseWidth(corner,side,elements.content),br=self._parseRadius(corner),position[side]=Math.max(-self.border,i?bc:userOffset+(b<br?br:-b)))}),position[corner[precedance]]-=size[precedance===X?0:1],tip.css({margin:"",top:"",bottom:"",left:"",right:""}).css(position),position},reposition:function(event,api,pos,viewport){if(this.enabled){var offset,props,cache=api.cache,newCorner=this.corner.clone(),adjust=pos.adjusted,method=api.options.position.adjust.method.split(" "),horizontal=method[0],vertical=method[1]||method[0],shift={left:FALSE,top:FALSE,x:0,y:0},css={};this.corner.fixed!==TRUE&&(shiftflip(horizontal,X,Y,LEFT,RIGHT),shiftflip(vertical,Y,X,TOP,
"bottom"),newCorner.string()===cache.corner.string()&&cache.cornerTop===adjust.top&&cache.cornerLeft===adjust.left||this.update(newCorner,FALSE)),void 0!==(offset=this.calculate(newCorner)).right&&(offset.left=-offset.right),void 0!==offset.bottom&&(offset.top=-offset.bottom),offset.user=this.offset,(shift.left="shift"===horizontal&&!!adjust.left)&&shiftonly(X,LEFT,RIGHT),(shift.top="shift"===vertical&&!!adjust.top)&&shiftonly(Y,TOP,"bottom"),this.element.css(css).toggle(!(shift.x&&shift.y||newCorner.x===CENTER&&shift.y||newCorner.y===CENTER&&shift.x)),
pos.left-=offset.left.charAt?offset.user:"shift"!==horizontal||shift.top||!shift.left&&!shift.top?offset.left+this.border:0,pos.top-=offset.top.charAt?offset.user:"shift"!==vertical||shift.left||!shift.left&&!shift.top?offset.top+this.border:0,cache.cornerLeft=adjust.left,cache.cornerTop=adjust.top,cache.corner=newCorner.clone()}function shiftflip(direction,precedance,popposite,side,opposite){"shift"===direction&&newCorner.precedance===precedance&&adjust[side]&&newCorner[popposite]!==CENTER?newCorner.precedance=newCorner.precedance===X?Y:X:"shift"!==direction&&adjust[side]&&(
newCorner[precedance]=newCorner[precedance]===CENTER?0<adjust[side]?side:opposite:newCorner[precedance]===side?opposite:side)}function shiftonly(xy,side,opposite){newCorner[xy]===CENTER?css["margin-"+side]=shift[xy]=offset["margin-"+side]-adjust[side]:(props=void 0!==offset[opposite]?[adjust[side],-offset[side]]:[-adjust[side],offset[side]],(shift[xy]=Math.max(props[0],props[1]))>props[0]&&(pos[side]-=adjust[side],shift[side]=FALSE),css[void 0!==offset[opposite]?opposite:side]=shift[xy])}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),(
TIP=PLUGINS.tip=function(api){return new Tip(api,api.options.style.tip)}).initialize="render",TIP.sanitize=function(options){if(options.style&&"tip"in options.style){var opts=options.style.tip;"object"!=typeof opts&&(opts=options.style.tip={corner:opts}),/string|boolean/i.test(typeof opts.corner)||(opts.corner=TRUE)}},CHECKS.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(obj){this.size=[obj.width,obj.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},$.extend(TRUE,QTIP.defaults,{style:{tip:{corner:TRUE,
mimic:FALSE,width:6,height:6,border:TRUE,offset:0}}}),PLUGINS.viewport=function(api,position,posOptions,targetWidth,targetHeight,elemWidth,elemHeight){var fixed,newMy,containerOffset,containerStatic,viewportWidth,viewportHeight,viewportScroll,viewportOffset,target=posOptions.target,tooltip=api.elements.tooltip,my=posOptions.my,at=posOptions.at,adjust=posOptions.adjust,method=adjust.method.split(" "),methodX=method[0],methodY=method[1]||method[0],viewport=posOptions.viewport,container=posOptions.container,adjusted=(api.cache,{left:0,top:0});if(!viewport.jquery||target[0]===window||target[0]===document.body||"none"===adjust.method)return adjusted
;function calculate(side,otherSide,type,adjust,side1,side2,lengthName,targetLength,elemLength){var initialPos=position[side1],mySide=my[side],atSide=at[side],isShift="shift"===type,myLength=mySide===side1?elemLength:mySide===side2?-elemLength:-elemLength/2,atLength=atSide===side1?targetLength:atSide===side2?-targetLength:-targetLength/2,sideOffset=viewportScroll[side1]+viewportOffset[side1]-(containerStatic?0:containerOffset[side1]),overflow1=sideOffset-initialPos,overflow2=initialPos+elemLength-("width"===lengthName?viewportWidth:viewportHeight)-sideOffset,offset=myLength-(my.precedance===side||mySide===my[otherSide]?atLength:0)-(
atSide===CENTER?targetLength/2:0);return isShift?(offset=(mySide===side1?1:-1)*myLength,position[side1]+=0<overflow1?overflow1:0<overflow2?-overflow2:0,position[side1]=Math.max(-containerOffset[side1]+viewportOffset[side1],initialPos-offset,Math.min(Math.max(-containerOffset[side1]+viewportOffset[side1]+("width"===lengthName?viewportWidth:viewportHeight),initialPos+offset),position[side1],"center"===mySide?initialPos-myLength:1e9))):(adjust*="flipinvert"===type?2:0,0<overflow1&&(mySide!==side1||0<overflow2)?(position[side1]-=offset+adjust,newMy.invert(side,side1)):0<overflow2&&(mySide!==side2||0<overflow1)&&(position[side1]-=(mySide===CENTER?-offset:offset
)+adjust,newMy.invert(side,side2)),position[side1]<viewportScroll&&-position[side1]>overflow2&&(position[side1]=initialPos,newMy=my.clone())),position[side1]-initialPos}return containerOffset=container.offset()||adjusted,containerStatic="static"===container.css("position"),fixed="fixed"===tooltip.css("position"),viewportWidth=viewport[0]===window?viewport.width():viewport.outerWidth(FALSE),viewportHeight=viewport[0]===window?viewport.height():viewport.outerHeight(FALSE),viewportScroll={left:fixed?0:viewport.scrollLeft(),top:fixed?0:viewport.scrollTop()},viewportOffset=viewport.offset()||adjusted,"shift"===methodX&&"shift"===methodY||(newMy=my.clone()),
adjusted={left:"none"!==methodX?calculate(X,Y,methodX,adjust.x,LEFT,RIGHT,"width",targetWidth,elemWidth):0,top:"none"!==methodY?calculate(Y,X,methodY,adjust.y,TOP,"bottom","height",targetHeight,elemHeight):0,my:newMy}},PLUGINS.polys={polygon:function(baseCoords,corner){var next,newWidth,newHeight,result={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:FALSE},i=0,coords=[],compareX=1,compareY=1,realX=0,realY=0;for(i=baseCoords.length;i--;)(next=[parseInt(baseCoords[--i],10),parseInt(baseCoords[i+1],10)])[0]>result.position.right&&(result.position.right=next[0]),next[0]<result.position.left&&(result.position.left=next[0]),
next[1]>result.position.bottom&&(result.position.bottom=next[1]),next[1]<result.position.top&&(result.position.top=next[1]),coords.push(next);if(newWidth=result.width=Math.abs(result.position.right-result.position.left),newHeight=result.height=Math.abs(result.position.bottom-result.position.top),"c"===corner.abbrev())result.position={left:result.position.left+result.width/2,top:result.position.top+result.height/2};else{for(;0<newWidth&&0<newHeight&&0<compareX&&0<compareY;)for(newWidth=Math.floor(newWidth/2),newHeight=Math.floor(newHeight/2),corner.x===LEFT?compareX=newWidth:corner.x===RIGHT?compareX=result.width-newWidth:compareX+=Math.floor(newWidth/2),
corner.y===TOP?compareY=newHeight:"bottom"===corner.y?compareY=result.height-newHeight:compareY+=Math.floor(newHeight/2),i=coords.length;i--&&!(coords.length<2);)realX=coords[i][0]-result.position.left,realY=coords[i][1]-result.position.top,(corner.x===LEFT&&compareX<=realX||corner.x===RIGHT&&realX<=compareX||corner.x===CENTER&&(realX<compareX||realX>result.width-compareX)||corner.y===TOP&&compareY<=realY||"bottom"===corner.y&&realY<=compareY||corner.y===CENTER&&(realY<compareY||realY>result.height-compareY))&&coords.splice(i,1);result.position={left:coords[0][0],top:coords[0][1]}}return result},rect:function(ax,ay,bx,by){return{width:Math.abs(bx-ax),
height:Math.abs(by-ay),position:{left:Math.min(ax,bx),top:Math.min(ay,by)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(cx,cy,rx,ry,corner){var c=PLUGINS.polys._angles[corner.abbrev()],rxc=0===c?0:rx*Math.cos(c*Math.PI),rys=ry*Math.sin(c*Math.PI);return{width:2*rx-Math.abs(rxc),height:2*ry-Math.abs(rys),position:{left:cx+rxc,top:cy+rys},adjustable:FALSE}},circle:function(cx,cy,r,corner){return PLUGINS.polys.ellipse(cx,cy,r,r,corner)}},PLUGINS.svg=function(api,svg,corner){$(document);for(var frameOffset,mtx,transformed,len,next,i,points,result,position,elem=svg[0],root=$(elem.ownerSVGElement),
ownerDocument=elem.ownerDocument,strokeWidth2=(parseInt(svg.css("stroke-width"),10)||0)/2;!elem.getBBox;)elem=elem.parentNode;if(!elem.getBBox||!elem.parentNode)return FALSE;switch(elem.nodeName){case"ellipse":case"circle":result=PLUGINS.polys.ellipse(elem.cx.baseVal.value,elem.cy.baseVal.value,(elem.rx||elem.r).baseVal.value+strokeWidth2,(elem.ry||elem.r).baseVal.value+strokeWidth2,corner);break;case"line":case"polygon":case"polyline":for(result=[],i=-1,len=(points=elem.points||[{x:elem.x1.baseVal.value,y:elem.y1.baseVal.value},{x:elem.x2.baseVal.value,y:elem.y2.baseVal.value}]).numberOfItems||points.length;++i<len;)next=points.getItem?points.getItem(i
):points[i],result.push.apply(result,[next.x,next.y]);result=PLUGINS.polys.polygon(result,corner);break;default:result={width:(result=elem.getBBox()).width,height:result.height,position:{left:result.x,top:result.y}}}return position=result.position,(root=root[0]).createSVGPoint&&(mtx=elem.getScreenCTM(),(points=root.createSVGPoint()).x=position.left,points.y=position.top,transformed=points.matrixTransform(mtx),position.left=transformed.x,position.top=transformed.y),ownerDocument!==document&&"mouse"!==api.position.target&&(frameOffset=$((ownerDocument.defaultView||ownerDocument.parentWindow).frameElement).offset())&&(position.left+=frameOffset.left,
position.top+=frameOffset.top),ownerDocument=$(ownerDocument),position.left+=ownerDocument.scrollLeft(),position.top+=ownerDocument.scrollTop(),result};var MODAL,OVERLAY;function Modal(api,options){this.options=options,this._ns="-modal",this.init(this.qtip=api)}OVERLAY=new(OVERLAY=function(){var current,prevState,elem,self=this,focusableElems={};function focusInputs(blurElems){focusableElems.length<1&&blurElems.length?blurElems.not("body").blur():focusableElems.first().focus()}function stealFocus(event){if(elem.is(":visible")){var target=$(event.target),tooltip=current.tooltip,container=target.closest(SELECTOR);(container.length<1?FALSE:parseInt(
container[0].style.zIndex,10)>parseInt(tooltip[0].style.zIndex,10))||target.closest(SELECTOR)[0]===tooltip[0]||focusInputs(target),event.target===focusableElems[focusableElems.length-1]}}$.extend(self,{init:function(){return elem=self.elem=$("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return FALSE}}).hide(),$(document.body).bind("focusin.qtip-modal",stealFocus),$(document).bind("keydown.qtip-modal",function(event){current&&current.options.show.modal.escape&&27===event.keyCode&&current.hide(event)}),elem.bind("click.qtip-modal",function(event){current&&current.options.show.modal.blur&&current.hide(event)}),self},update:function(api){
focusableElems=(current=api).options.show.modal.stealfocus!==FALSE?api.tooltip.find("*").filter(function(){return function(element){if($.expr[":"].focusable)return $.expr[":"].focusable;var map,mapName,img,isTabIndexNotNaN=!isNaN($.attr(element,"tabindex")),nodeName=element.nodeName&&element.nodeName.toLowerCase();return"area"===nodeName?(mapName=(map=element.parentNode).name,!(!element.href||!mapName||"map"!==map.nodeName.toLowerCase())&&!!(img=$("img[usemap=#"+mapName+"]")[0])&&img.is(":visible")):/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName&&element.href||isTabIndexNotNaN}(this)}):[]},toggle:function(api,state,
duration){$(document.body);var tooltip=api.tooltip,options=api.options.show.modal,effect=options.effect,type=state?"show":"hide",visible=elem.is(":visible"),visibleModals=$(".qtip-modal").filter(":visible:not(:animated)").not(tooltip);return self.update(api),state&&options.stealfocus!==FALSE&&focusInputs($(":focus")),elem.toggleClass("blurs",options.blur),state&&elem.appendTo(document.body),elem.is(":animated")&&visible===state&&prevState!==FALSE||!state&&visibleModals.length||(elem.stop(TRUE,FALSE),$.isFunction(effect)?effect.call(elem,state):effect===FALSE?elem[type]():elem.fadeTo(parseInt(duration,10)||90,state?1:0,function(){state||elem.hide()}),
state||elem.queue(function(next){elem.css({left:"",top:""}),$(".qtip-modal").length||elem.detach(),next()}),prevState=state,current.destroyed&&(current=NULL)),self}}),self.init()}),$.extend(Modal.prototype,{init:function(qtip){var tooltip=qtip.tooltip;if(!this.options.on)return this;qtip.elements.overlay=OVERLAY.elem,tooltip.addClass("qtip-modal").css("z-index",QTIP.modal_zindex+$(".qtip-modal").length),qtip._bind(tooltip,["tooltipshow","tooltiphide"],function(event,api,duration){var oEvent=event.originalEvent;if(event.target===tooltip[0])if(oEvent&&"tooltiphide"===event.type&&/mouse(leave|enter)/.test(oEvent.type)&&$(oEvent.relatedTarget).closest(
OVERLAY.elem[0]).length)try{event.preventDefault()}catch(e){}else(!oEvent||oEvent&&"tooltipsolo"!==oEvent.type)&&this.toggle(event,"tooltipshow"===event.type,duration)},this._ns,this),qtip._bind(tooltip,"tooltipfocus",function(event,api){if(!event.isDefaultPrevented()&&event.target===tooltip[0]){var qtips=$(".qtip-modal"),newIndex=QTIP.modal_zindex+qtips.length,curIndex=parseInt(tooltip[0].style.zIndex,10);OVERLAY.elem[0].style.zIndex=newIndex-1,qtips.each(function(){this.style.zIndex>curIndex&&(this.style.zIndex-=1)}),qtips.filter("."+CLASS_FOCUS).qtip("blur",event.originalEvent),tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex,OVERLAY.update(api)
;try{event.preventDefault()}catch(e){}}},this._ns,this),qtip._bind(tooltip,"tooltiphide",function(event){event.target===tooltip[0]&&$(".qtip-modal").filter(":visible").not(tooltip).last().qtip("focus",event)},this._ns,this)},toggle:function(event,state,duration){if(event&&event.isDefaultPrevented())return this;OVERLAY.toggle(this.qtip,!!state,duration)},destroy:function(){this.qtip.tooltip.removeClass("qtip-modal"),this.qtip._unbind(this.qtip.tooltip,this._ns),OVERLAY.toggle(this.qtip,FALSE),delete this.qtip.elements.overlay}}),(MODAL=PLUGINS.modal=function(api){return new Modal(api,api.options.show.modal)}).sanitize=function(opts){opts.show&&(
"object"!=typeof opts.show.modal?opts.show.modal={on:!!opts.show.modal}:void 0===opts.show.modal.on&&(opts.show.modal.on=TRUE))},QTIP.modal_zindex=QTIP.zindex-200,MODAL.initialize="render",CHECKS.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(0<this.qtip.tooltip[0].offsetWidth)}},$.extend(TRUE,QTIP.defaults,{show:{modal:{on:FALSE,effect:TRUE,blur:TRUE,stealfocus:TRUE,escape:TRUE}}})})}(window,document),function(){var root,previous_async,async={};function only_once(fn){var called=!1;return function(){if(called)throw new Error("Callback was already called.");called=!0,fn.apply(root,arguments)}}null!=(
root=this)&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,async};var _each=function(arr,iterator){if(arr.forEach)return arr.forEach(iterator);for(var i=0;i<arr.length;i+=1)iterator(arr[i],i,arr)},_map=function(arr,iterator){if(arr.map)return arr.map(iterator);var results=[];return _each(arr,function(x,i,a){results.push(iterator(x,i,a))}),results},_keys=function(obj){if(Object.keys)return Object.keys(obj);var keys=[];for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k);return keys};"undefined"!=typeof process&&process.nextTick?(async.nextTick=process.nextTick,
"undefined"!=typeof setImmediate?async.setImmediate=function(fn){setImmediate(fn)}:async.setImmediate=async.nextTick):("function"==typeof setImmediate?async.nextTick=function(fn){setImmediate(fn)}:async.nextTick=function(fn){setTimeout(fn,0)},async.setImmediate=async.nextTick),async.each=function(arr,iterator,callback){if(callback=callback||function(){},!arr.length)return callback();var completed=0;_each(arr,function(x){iterator(x,only_once(function(err){err?(callback(err),callback=function(){}):(completed+=1)>=arr.length&&callback(null)}))})},async.forEach=async.each,async.eachSeries=function(arr,iterator,callback){if(callback=callback||function(){},
!arr.length)return callback();var completed=0,iterate=function(){iterator(arr[completed],function(err){err?(callback(err),callback=function(){}):(completed+=1)>=arr.length?callback(null):iterate()})};iterate()},async.forEachSeries=async.eachSeries,async.eachLimit=function(arr,limit,iterator,callback){_eachLimit(limit).apply(null,[arr,iterator,callback])},async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){if(callback=callback||function(){},!arr.length||limit<=0)return callback();var completed=0,started=0,running=0;!function replenish(){if(completed>=arr.length)return callback();for(
;running<limit&&started<arr.length;)running+=1,iterator(arr[(started+=1)-1],function(err){err?(callback(err),callback=function(){}):(running-=1,(completed+=1)>=arr.length?callback():replenish())})}()}},doParallel=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args))}},doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args))}},_asyncMap=function(eachfn,arr,iterator,callback){var results=[];eachfn(arr=_map(arr,function(x,i){return{index:i,value:x}}),function(x,callback){iterator(x.value,function(err,v){
results[x.index]=v,callback(err)})},function(err){callback(err,results)})};async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback)};var _mapLimit=function(limit){return function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args))}}(limit,_asyncMap)};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})},async.inject=async.reduce,
async.foldl=async.reduce,async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse();async.reduce(reversed,memo,iterator,callback)},async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];eachfn(arr=_map(arr,function(x,i){return{index:i,value:x}}),function(x,callback){iterator(x.value,function(v){v&&results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.filter=doParallel(_filter),async.filterSeries=doSeries(_filter),async.select=async.filter,
async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];eachfn(arr=_map(arr,function(x,i){return{index:i,value:x}}),function(x,callback){iterator(x.value,function(v){v||results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.reject=doParallel(_reject),async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){result?(main_callback(x),main_callback=function(){}):callback()})},function(err){main_callback()})}
;async.detect=doParallel(_detect),async.detectSeries=doSeries(_detect),async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v&&(main_callback(!0),main_callback=function(){}),callback()})},function(err){main_callback(!1)})},async.any=async.some,async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v||(main_callback(!1),main_callback=function(){}),callback()})},function(err){main_callback(!0)})},async.all=async.every,async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err
):callback(null,{value:x,criteria:criteria})})},function(err,results){if(err)return callback(err);callback(null,_map(results.sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:b<a?1:0}),function(x){return x.value}))})},async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks);if(!keys.length)return callback(null);var results={},listeners=[],addListener=function(fn){listeners.unshift(fn)},taskComplete=function(){_each(listeners.slice(0),function(fn){fn()})};addListener(function(){_keys(results).length===keys.length&&(callback(null,results),callback=function(){})}),_each(keys,function(k){
var task=tasks[k]instanceof Function?[tasks[k]]:tasks[k],taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1&&(args=args[0]),err){var safeResults={};_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey]}),safeResults[k]=args,callback(err,safeResults),callback=function(){}}else results[k]=args,async.setImmediate(taskComplete)},requires=task.slice(0,Math.abs(task.length-1))||[],ready=function(){return iterator=function(a,x){return a&&results.hasOwnProperty(x)},memo=!0,((arr=requires).reduce?arr.reduce(iterator,memo):(_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo))&&!results.hasOwnProperty(k)
;var arr,iterator,memo};if(ready())task[task.length-1](taskCallback,results);else{var listener=function(){ready()&&(!function(fn){for(var i=0;i<listeners.length;i+=1)if(listeners[i]===fn)return listeners.splice(i,1)}(listener),task[task.length-1](taskCallback,results))};addListener(listener)}})},async.waterfall=function(tasks,callback){if(callback=callback||function(){},tasks.constructor!==Array){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length)return callback();var wrapIterator=function(iterator){return function(err){if(err)callback.apply(null,arguments),callback=function(){};else{
var args=Array.prototype.slice.call(arguments,1),next=iterator.next();next?args.push(wrapIterator(next)):args.push(callback),async.setImmediate(function(){iterator.apply(null,args)})}}};wrapIterator(async.iterator(tasks))()};var _parallel=function(eachfn,tasks,callback){if(callback=callback||function(){},tasks.constructor===Array)eachfn.map(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1)
;args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)},async.parallelLimit=function(tasks,limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)},async.series=function(tasks,callback){if(callback=callback||function(){},tasks.constructor===Array)async.mapSeries(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};async.eachSeries(_keys(tasks),
function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}},async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){return tasks.length&&tasks[index].apply(null,arguments),fn.next()};return fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null},fn};return makeCallback(0)},async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}};var _concat=function(eachfn,arr,fn,callback
){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]),cb(err)})},function(err){callback(err,r)})};async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,callback){test()?iterator(function(err){if(err)return callback(err);async.whilst(test,iterator,callback)}):callback()},async.doWhilst=function(iterator,test,callback){iterator(function(err){if(err)return callback(err);test()?async.doWhilst(iterator,test,callback):callback()})},async.until=function(test,iterator,callback){test()?callback():iterator(function(err){if(err)return callback(err);async.until(test,iterator,callback)})},
async.doUntil=function(iterator,test,callback){iterator(function(err){if(err)return callback(err);test()?callback():async.doUntil(iterator,test,callback)})},async.queue=function(worker,concurrency){function _insert(q,data,pos,callback){data.constructor!==Array&&(data=[data]),_each(data,function(task){var item={data:task,callback:"function"==typeof callback?callback:null};pos?q.tasks.unshift(item):q.tasks.push(item),q.saturated&&q.tasks.length===concurrency&&q.saturated(),async.setImmediate(q.process)})}void 0===concurrency&&(concurrency=1);var workers=0,q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,push:function(data,callback){
_insert(q,data,!1,callback)},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){if(workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift();q.empty&&0===q.tasks.length&&q.empty(),workers+=1;var cb=only_once(function(){workers-=1,task.callback&&task.callback.apply(task,arguments),q.drain&&q.tasks.length+workers===0&&q.drain(),q.process()});worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers}};return q},async.cargo=function(worker,payload){var working=!1,tasks=[],cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,push:function(data,callback){
data.constructor!==Array&&(data=[data]),_each(data,function(task){tasks.push({data:task,callback:"function"==typeof callback?callback:null}),cargo.saturated&&tasks.length===payload&&cargo.saturated()}),async.setImmediate(cargo.process)},process:function process(){if(!working)if(0!==tasks.length){var ts="number"==typeof payload?tasks.splice(0,payload):tasks.splice(0),ds=_map(ts,function(task){return task.data});cargo.empty&&cargo.empty(),working=!0,worker(ds,function(){working=!1;var args=arguments;_each(ts,function(data){data.callback&&data.callback.apply(null,args)}),process()})}else cargo.drain&&cargo.drain()},length:function(){return tasks.length},
running:function(){return working}};return cargo};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(err?console.error&&console.error(err):console[name]&&_each(args,function(x){console[name](x)}))}]))}};async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={};hasher=hasher||function(x){return x};var memoized=function(){var args=Array.prototype.slice.call(arguments),callback=args.pop(),key=hasher.apply(null,args)
;key in memo?callback.apply(null,memo[key]):key in queues?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++)q[i].apply(null,arguments)}])))};return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}},async.times=function(count,iterator,callback){for(var counter=[],i=0;i<count;i++)counter.push(i);return async.map(counter,iterator,callback)},async.timesSeries=function(count,iterator,callback){for(var counter=[],i=0;i<count;i++)counter.push(
i);return async.mapSeries(counter,iterator,callback)},async.compose=function(){var fns=Array.prototype.reverse.call(arguments);return function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0],nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}};var _applyEach=function(eachfn,fns){var go=function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb])
)},callback)};if(2<arguments.length){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args)}return go};async.applyEach=doParallel(_applyEach),async.applyEachSeries=doSeries(_applyEach),async.forever=function(fn,callback){!function next(err){if(err){if(callback)return callback(err);throw err}fn(next)}()},void 0!==define&&define.amd?define("async",[],function(){return async}):"undefined"!=typeof module&&module.exports?module.exports=async:root.async=async}(),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("moment",b):a.moment=b()}(this,function(){
"use strict";function a(){return Rd.apply(null,arguments)}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Da(a,b,c,d,!0).utc()}function j(a){return null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,
nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(
b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),0<Td.length)for(c in Td)m(e=b[d=Td[c]])||(a[d]=e);return a}function o(b){n(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),!1===Ud&&(Ud=!0,a.updateOffset(this),Ud=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return a<0?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(
c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(){}function u(a){return a?a.toLowerCase().replace("_","-"):a}function w(a){var b=null;if(!Vd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Sd._abbr,require("./locale/"+a),x(b)}catch(c){}return Vd[a]}function x(a,b){var c;return a&&((c=m(b)?z(a):y(a,b))&&(Sd=c)),Sd._abbr}function y(a,b){return null!==b?(b.abbr=a,Vd[a]=Vd[a]||new t,Vd[a].set(b),x(a),Vd[a]):(delete Vd[a],null)}function z(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Sd;if(!c(a)){if(b=w(a))return b;a=[a]}return function(a){for(var b,c,d,e,f=0;f<a.length;){for(b=(e=u(a[f]).split("-")
).length,c=(c=u(a[f+1]))?c.split("-"):null;0<b;){if(d=w(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}(a)}function A(a,b){var c=a.toLowerCase();Wd[c]=Wd[c+"s"]=Wd[b]=a}function B(a){return"string"==typeof a?Wd[a]||Wd[a.toLowerCase()]:void 0}function C(a){var b,c,d={};for(c in a)f(a,c)&&((b=B(c))&&(d[b]=a[c]));return d}function D(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function E(b,c){return function(d){return null!=d?(G(this,b,d),a.updateOffset(this,c),this):F(this,b)}}function F(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function G(a,b,c){
a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(D(this[a=B(a)]))return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length;return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&($d[a]=e),b&&($d[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&($d[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a,b){
return a.isValid()?(b=N(b,a.localeData()),Zd[b]=Zd[b]||function(a){var b,c,d=a.match(Xd);for(b=0,c=d.length;b<c;b++)$d[d[b]]?d[b]=$d[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;b<c;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}(b),Zd[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Yd.lastIndex=0;0<=d&&Yd.test(a);)a=a.replace(Yd,c),Yd.lastIndex=0,d-=1;return a}function O(a,b,c){qe[a]=D(b)?b:function(a,d){return a&&c?c:b}}function P(a,b){return f(qe,a)?qe[a](b._strict,b._locale):new RegExp(function(a){return R(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,
function(a,b,c,d,e){return b||c||d||e}))}(a))}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)re[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&f(re,a)&&re[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function Z(a,b){var c;return a.isValid()&&("string"==typeof b&&"number"!=typeof(b=a.localeData().monthsParse(b))||(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c))),a}function $(b){return null!=b?(Z(
this,b),a.updateOffset(this,!0),this):F(this,"Month")}function ca(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=R(d[b]),e[b]=R(e[b]),f[b]=R(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")$","i")}function da(a){var b,c=a._a;return c&&-2===j(a).overflow&&(
b=c[te]<0||11<c[te]?te:c[ue]<1||c[ue]>V(c[se],c[te])?ue:c[ve]<0||24<c[ve]||24===c[ve]&&(0!==c[we]||0!==c[xe]||0!==c[ye])?ve:c[we]<0||59<c[we]?we:c[xe]<0||59<c[xe]?xe:c[ye]<0||999<c[ye]?ye:-1,j(a)._overflowDayOfYear&&(b<se||ue<b)&&(b=ue),j(a)._overflowWeeks&&-1===b&&(b=ze),j(a)._overflowWeekday&&-1===b&&(b=Ae),j(a).overflow=b),a}function ea(b){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function fa(a,b){var c=!0;return g(function(){return c&&(ea(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ha(a){
var b,c,d,e,f,g,h=a._i,i=He.exec(h)||Ie.exec(h);if(i){for(j(a).iso=!0,b=0,c=Ke.length;b<c;b++)if(Ke[b][1].exec(i[1])){e=Ke[b][0],d=!1!==Ke[b][2];break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Le.length;b<c;b++)if(Le[b][1].exec(i[3])){f=(i[2]||" ")+Le[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Je.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),wa(a)}else a._isValid=!1}function ka(a){var b=new Date(Date.UTC.apply(null,arguments));return a<100&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function la(a){return ma(a)?366:365}function ma(a){
return a%4==0&&a%100!=0||a%400==0}function oa(a,b,c){var d=7+b-c;return-((7+ka(a,0,d).getUTCDay()-b)%7)+d-1}function pa(a,b,c,d,e){var f,g,j=1+7*(b-1)+(7+c-d)%7+oa(a,d,e);return g=j<=0?la(f=a-1)+j:j>la(a)?(f=a+1,j-la(a)):(f=a,j),{year:f,dayOfYear:g}}function qa(a,b,c){var d,e,f=oa(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return g<1?d=g+ra(e=a.year()-1,b,c):g>ra(a.year(),b,c)?(d=g-ra(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ra(a,b,c){var d=oa(a,b,c),e=oa(a+1,b,c);return(la(a)-d+e)/7}function sa(a,b,c){return null!=a?a:null!=b?b:c}function ta(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth()
,c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ua(a){var b,c,d,e,f=[];if(!a._d){for(d=ta(a),a._w&&null==a._a[ue]&&null==a._a[te]&&function(a){var b,c,d,e,f,g,h,i;null!=(b=a._w).GG||null!=b.W||null!=b.E?(f=1,g=4,c=sa(b.GG,a._a[se],qa(Ea(),1,4).year),d=sa(b.W,1),((e=sa(b.E,1))<1||7<e)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=sa(b.gg,a._a[se],qa(Ea(),f,g).year),d=sa(b.w,1),null!=b.d?((e=b.d)<0||6<e)&&(i=!0):null!=b.e?(e=b.e+f,(b.e<0||6<b.e)&&(i=!0)):e=f),d<1||d>ra(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=pa(c,d,e,f,g),a._a[se]=h.year,a._dayOfYear=h.dayOfYear)}(a),a._dayOfYear&&(e=sa(a._a[se],d[se]),
a._dayOfYear>la(e)&&(j(a)._overflowDayOfYear=!0),c=ka(e,0,a._dayOfYear),a._a[te]=c.getUTCMonth(),a._a[ue]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ve]&&0===a._a[we]&&0===a._a[xe]&&0===a._a[ye]&&(a._nextDay=!0,a._a[ve]=0),a._d=(a._useUTC?ka:function(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<100&&0<=a&&isFinite(h.getFullYear())&&h.setFullYear(a),h}).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ve]=24)}}function wa(b){if(b._f!==a.ISO_8601){b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=N(b._f,
b._locale).match(Xd)||[],c=0;c<e.length;c++)f=e[c],(d=(h.match(P(f,b))||[])[0])&&(0<(g=h.substr(0,h.indexOf(d))).length&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),$d[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),U(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,0<h.length&&j(b).unusedInput.push(h),!0===j(b).bigHour&&b._a[ve]<=12&&0<b._a[ve]&&(j(b).bigHour=void 0),b._a[ve]=function(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):(null!=a.isPM&&((d=a.isPM(c))&&b<12&&(b+=12),d||12!==b||(b=0)),b)}(b._locale,b._a[ve],b._meridiem),ua(b),da(b)}else ha(b)}function Ba(a){var b=a._i,e=a._f
;return a._locale=a._locale||z(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(da(b)):(c(e)?function(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,a._d=new Date(NaN);for(e=0;e<a._f.length;e++)f=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],wa(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||f<d)&&(d=f,c=b));g(a,c||b)}(a):e?wa(a):d(b)?a._d=b:Ca(a),k(a)||(a._d=null),a))}function Ca(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(+f):"string"==typeof f?function(b){var c=Me.exec(b._i)
;null!==c?b._d=new Date(+c[1]):(ha(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ua(b)):"object"==typeof f?function(a){if(!a._d){var b=C(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ua(a)}}(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Da(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,function(a){var b=new o(da(Ba(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}(f)}
function Ea(a,b,c,d){return Da(a,b,c,d,!1)}function Fa(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ea();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Ia(a){var b=C(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=z(),this._bubble()}function Ja(a){return a instanceof Ia}function Ka(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function La(a,b){var c=(
b||"").match(a)||[],e=((c[c.length-1]||[])+"").match(Re)||["-",0,0],f=60*e[1]+r(e[2]);return"+"===e[0]?f:-f}function Ma(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?+b:+Ea(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ea(b).local()}function Na(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Ya(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Za(a,b){var c,d,e,g=a,h=null;return Ja(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Se.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[ue])*c,h:r(h[ve])*c,m:r(h[we])*c,s:r(h[xe])*c,ms:r(h[ye])*c}):(h=Te.exec(a))?(
c="-"===h[1]?-1:1,g={y:$a(h[2],c),M:$a(h[3],c),d:$a(h[4],c),h:$a(h[5],c),m:$a(h[6],c),s:$a(h[7],c),w:$a(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=function(a,b){var c;return a.isValid()&&b.isValid()?(b=Ma(b,a),a.isBefore(b)?c=_a(a,b):((c=_a(b,a)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}(Ea(g.from),Ea(g.to)),(g={}).ms=e.milliseconds,g.M=e.months),d=new Ia(g),Ja(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function $a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function _a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),
a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function bb(a,b){return function(c,d){var f;return null===d||isNaN(+d)||(function(a,b){Ge[a]||(ea(b),Ge[a]=!0)}(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),cb(this,Za(c="string"==typeof c?+c:c,d),a),this}}function cb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;b.isValid()&&(e=null==e||e,f&&b._d.setTime(+b._d+f*d),g&&G(b,"Date",F(b,"Date")+g*d),h&&Z(b,F(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function ub(a){var b;return void 0===a?this._locale._abbr:(null!=(b=z(a))&&(this._locale=b),this
)}function vb(){return this._locale}function Ib(a,b){J(0,[a,a.length],0,b)}function Nb(a,b,c,d,e){var f;return null==a?qa(this,d,e).year:((f=ra(a,d,e))<b&&(b=f),function(a,b,c,d,e){var f=pa(a,b,c,d,e),g=ka(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}.call(this,a,b,c,d,e))}function cc(){return this.hours()%12||12}function dc(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function ec(a,b){return b._meridiemParse}function hc(a,b){b[ye]=r(1e3*("0."+a))}function qc(a){return a}function uc(a,b,c,d){var e=z(),f=h().set(d,b);return e[c](f,a)}
function vc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return uc(a,b,c,e);var f,g=[];for(f=0;f<d;f++)g[f]=uc(a,f,c,e);return g}function Cc(a,b,c,d){var e=Za(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Fc(a){return a<0?Math.floor(a):Math.ceil(a)}function Hc(a){return 4800*a/146097}function Ic(a){return 146097*a/4800}function Lc(a){return function(){return this.as(a)}}function Nc(a){return function(){return this._data[a]}}function Tc(){var a,b,d=If(this._milliseconds)/1e3,e=If(this._days),f=If(this._months);b=q((a=q(d/60))/60),d%=60,a%=60;var g=q(f/12),h=f%=12,i=e,j=b,k=a,
l=d,m=this.asSeconds();return m?(m<0?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}function Vc(a,b,c){return"m"===c?b?"":"":"h"===c?b?"":"":a+" "+function(a,b){var c=a.split("_");return b%10==1&&b%100!=11?c[0]:2<=b%10&&b%10<=4&&(b%100<10||20<=b%100)?c[1]:c[2]}({mm:b?"__":"__",hh:b?"__":"__",dd:"__",MM:"__",yy:"__"}[c],+a)}function Wc(a,b,c){return a+" "+function(a,b){return 2===b?function(a){var b={m:"v",b:"v",d:"z"};return void 0===b[a.charAt(0
)]?a:b[a.charAt(0)]+a.substring(1)}(a):a}({mm:"munutenn",MM:"miz",dd:"devezh"}[c],a)}function _c(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+(1===a?"minuta":2===a||3===a||4===a?"minute":"minuta");case"h":return b?"jedan sat":"jednog sata";case"hh":return d+(1===a?"sat":2===a||3===a||4===a?"sata":"sati");case"dd":return d+(1===a?"dan":"dana");case"MM":return d+(1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci");case"yy":return d+(1===a?"godina":2===a||3===a||4===a?"godine":"godina")}}function ad(a){return 1<a&&a<5&&1!=~~(a/10)}function bd(a,b,c,d){var e=a+" ";switch(c){case"s":
return b||d?"pr sekund":"pr sekundami";case"m":return b?"minuta":d?"minutu":"minutou";case"mm":return b||d?e+(ad(a)?"minuty":"minut"):e+"minutami";case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(ad(a)?"hodiny":"hodin"):e+"hodinami";case"d":return b||d?"den":"dnem";case"dd":return b||d?e+(ad(a)?"dny":"dn"):e+"dny";case"M":return b||d?"msc":"mscem";case"MM":return b||d?e+(ad(a)?"msce":"msc"):e+"msci";case"y":return b||d?"rok":"rokem";case"yy":return b||d?e+(ad(a)?"roky":"let"):e+"lety"}}function cd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",
a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}function dd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}function ed(a,b,c,d){var e={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[a+" minuti",a+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[a+" tunni",a+" tundi"],d:["he peva",
"ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[a+" kuu",a+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[a+" aasta",a+" aastat"]};return b?e[c][2]?e[c][2]:e[c][1]:d?e[c][0]:e[c][1]}function fd(a,b,c,d){var e="";switch(c){case"s":return d?"muutaman sekunnin":"muutama sekunti";case"m":return d?"minuutin":"minuutti";case"mm":e=d?"minuutin":"minuuttia";break;case"h":return d?"tunnin":"tunti";case"hh":e=d?"tunnin":"tuntia";break;case"d":return d?"pivn":"piv";case"dd":e=d?"pivn":"piv";break;case"M":return d?"kuukauden":"kuukausi";case"MM":e=d?"kuukauden":"kuukautta";break;case"y":return d?"vuoden":"vuosi";case"yy":e=d?"vuoden":"vuotta"}
return function(a,b){return a<10?b?fg[a]:eg[a]:a}(a,d)+" "+e}function hd(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+(1===a?"minuta":2===a||3===a||4===a?"minute":"minuta");case"h":return b?"jedan sat":"jednog sata";case"hh":return d+(1===a?"sat":2===a||3===a||4===a?"sata":"sati");case"dd":return d+(1===a?"dan":"dana");case"MM":return d+(1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci");case"yy":return d+(1===a?"godina":2===a||3===a||4===a?"godine":"godina")}}function id(a,b,c,d){var e=a;switch(c){case"s":return d||b?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(d||b?" perc":" perce")
;case"mm":return e+(d||b?" perc":" perce");case"h":return"egy"+(d||b?" ra":" rja");case"hh":return e+(d||b?" ra":" rja");case"d":return"egy"+(d||b?" nap":" napja");case"dd":return e+(d||b?" nap":" napja");case"M":return"egy"+(d||b?" hnap":" hnapja");case"MM":return e+(d||b?" hnap":" hnapja");case"y":return"egy"+(d||b?" v":" ve");case"yy":return e+(d||b?" v":" ve")}return""}function jd(a){return(a?"":"[mlt] ")+"["+pg[this.day()]+"] LT[-kor]"}function kd(a){return a%100==11||a%10!=1}function ld(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nokkrar sekndur":"nokkrum sekndum";case"m":return b?"mnta":"mntu";case"mm":return kd(a)?e+(
b||d?"mntur":"mntum"):b?e+"mnta":e+"mntu";case"hh":return kd(a)?e+(b||d?"klukkustundir":"klukkustundum"):e+"klukkustund";case"d":return b?"dagur":d?"dag":"degi";case"dd":return kd(a)?b?e+"dagar":e+(d?"daga":"dgum"):b?e+"dagur":e+(d?"dag":"degi");case"M":return b?"mnuur":d?"mnu":"mnui";case"MM":return kd(a)?b?e+"mnuir":e+(d?"mnui":"mnuum"):b?e+"mnuur":e+(d?"mnu":"mnui");case"y":return b||d?"r":"ri";case"yy":return kd(a)?e+(b||d?"r":"rum"):e+(b||d?"r":"ri")}}function md(a,b,c,d){var e={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]}
;return b?e[c][0]:e[c][1]}function pd(a){if(a=parseInt(a,10),isNaN(a))return!1;if(a<0)return!0;if(a<10)return 4<=a&&a<=7;if(a<100){var b=a%10;return pd(0===b?a/10:b)}if(a<1e4){for(;10<=a;)a/=10;return pd(a)}return pd(a/=1e3)}function rd(a,b,c,d){return b?td(c)[0]:d?td(c)[1]:td(c)[2]}function sd(a){return a%10==0||10<a&&a<20}function td(a){return rg[a].split("_")}function ud(a,b,c,d){var e=a+" ";return 1===a?e+rd(0,b,c[0],d):b?e+(sd(a)?td(c)[1]:td(c)[0]):d?e+td(c)[1]:e+(sd(a)?td(c)[1]:td(c)[2])}function vd(a,b,c){return c?b%10==1&&11!==b?a[2]:a[3]:b%10==1&&11!==b?a[0]:a[1]}function wd(a,b,c){return a+" "+vd(sg[c],a,b)}function xd(a,b,c){return vd(sg[c],a,b)}
function zd(a,b,c,d){var e="";if(b)switch(c){case"s":e=" ";break;case"m":e=" ";break;case"mm":e="%d ";break;case"h":e=" ";break;case"hh":e="%d ";break;case"d":e=" ";break;case"dd":e="%d ";break;case"M":e=" ";break;case"MM":e="%d ";break;case"y":e=" ";break;case"yy":e="%d "}else switch(c){case"s":e=" ";break;case"m":e=" ";break;case"mm":e="%d ";break;case"h":e=" ";break;case"hh":e="%d ";break;case"d":e=" ";break;case"dd":e="%d ";break;case"M":e=" ";break;case"MM":e="%d ";break;case"y":e=" ";break;case"yy":e="%d "}
return e.replace(/%d/i,a)}function Ad(a){return a%10<5&&1<a%10&&~~(a/10)%10!=1}function Bd(a,b,c){var d=a+" ";switch(c){case"m":return b?"minuta":"minut";case"mm":return d+(Ad(a)?"minuty":"minut");case"h":return b?"godzina":"godzin";case"hh":return d+(Ad(a)?"godziny":"godzin");case"MM":return d+(Ad(a)?"miesice":"miesicy");case"yy":return d+(Ad(a)?"lata":"lat")}}function Cd(a,b,c){var e=" ";return(20<=a%100||100<=a&&a%100==0)&&(e=" de "),a+e+{mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[c]}function Ed(a,b,c){return"m"===c?b?"":"":a+" "+function(a,b){var c=a.split("_");return b%10==1&&b%100!=11?c[0]:2<=b%10&&b%10<=4&&(b%100<10||20<=b%100
)?c[1]:c[2]}({mm:b?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"}[c],+a)}function Fd(a){return 1<a&&a<5}function Gd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pr seknd":"pr sekundami";case"m":return b?"minta":d?"mintu":"mintou";case"mm":return b||d?e+(Fd(a)?"minty":"mint"):e+"mintami";case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(Fd(a)?"hodiny":"hodn"):e+"hodinami";case"d":return b||d?"de":"dom";case"dd":return b||d?e+(Fd(a)?"dni":"dn"):e+"dami";case"M":return b||d?"mesiac":"mesiacom";case"MM":return b||d?e+(Fd(a
)?"mesiace":"mesiacov"):e+"mesiacmi";case"y":return b||d?"rok":"rokom";case"yy":return b||d?e+(Fd(a)?"roky":"rokov"):e+"rokmi"}}function Hd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nekaj sekund":"nekaj sekundami";case"m":return b?"ena minuta":"eno minuto";case"mm":return e+(1===a?b?"minuta":"minuto":2===a?b||d?"minuti":"minutama":a<5?b||d?"minute":"minutami":b||d?"minut":"minutami");case"h":return b?"ena ura":"eno uro";case"hh":return e+(1===a?b?"ura":"uro":2===a?b||d?"uri":"urama":a<5?b||d?"ure":"urami":b||d?"ur":"urami");case"d":return b||d?"en dan":"enim dnem";case"dd":return e+(
1===a?b||d?"dan":"dnem":2===a?b||d?"dni":"dnevoma":b||d?"dni":"dnevi");case"M":return b||d?"en mesec":"enim mesecem";case"MM":return e+(1===a?b||d?"mesec":"mesecem":2===a?b||d?"meseca":"mesecema":a<5?b||d?"mesece":"meseci":b||d?"mesecev":"meseci");case"y":return b||d?"eno leto":"enim letom";case"yy":return e+(1===a?b||d?"leto":"letom":2===a?b||d?"leti":"letoma":a<5?b||d?"leta":"leti":b||d?"let":"leti")}}function Kd(a,b,c,d){var e=function(a){var b=Math.floor(a%1e3/100),c=Math.floor(a%100/10),d=a%10,e="";return 0<b&&(e+=Lg[b]+"vatlh"),0<c&&(e+=(""!==e?" ":"")+Lg[c]+"maH"),0<d&&(e+=(""!==e?" ":"")+Lg[d]),""===e?"pagh":e}(a);switch(c){case"mm":return e+" tup"
;case"hh":return e+" rep";case"dd":return e+" jaj";case"MM":return e+" jar";case"yy":return e+" DIS"}}function Md(a,b,c,d){var e={s:["viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[a+" muts",a+" muts"],h:["'n ora","'iensa ora"],hh:[a+" oras",a+" oras"],d:["'n ziua","'iensa ziua"],dd:[a+" ziuas",a+" ziuas"],M:["'n mes","'iens mes"],MM:[a+" mesen",a+" mesen"],y:["'n ar","'iens ar"],yy:[a+" ars",a+" ars"]};return d?e[c][0]:b?e[c][0]:e[c][1]}function Od(a,b,c){return"m"===c?b?"":"":"h"===c?b?"":"":a+" "+function(a,b){var c=a.split("_");return b%10==1&&b%100!=11?c[0]:2<=b%10&&b%10<=4&&(b%100<10||20<=b%100
)?c[1]:c[2]}({mm:b?"__":"__",hh:b?"__":"__",dd:"__",MM:"__",yy:"__"}[c],+a)}function Qd(a){return function(){return a+""+(11===this.hours()?"":"")+"] LT"}}var Rd,Sd,Td=a.momentProperties=[],Ud=!1,Vd={},Wd={},Xd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Yd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zd={},$d={},_d=/\d/,ae=/\d\d/,be=/\d{3}/,ce=/\d{4}/,de=/[+-]?\d{6}/,ee=/\d\d?/,fe=/\d\d\d\d?/,
ge=/\d\d\d\d\d\d?/,he=/\d{1,3}/,ie=/\d{1,4}/,je=/[+-]?\d{1,6}/,ke=/\d+/,le=/[+-]?\d+/,me=/Z|[+-]\d\d:?\d\d/gi,ne=/Z|[+-]\d\d(?::?\d\d)?/gi,pe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qe={},re={},se=0,te=1,ue=2,ve=3,we=4,xe=5,ye=6,ze=7,Ae=8;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),A("month","M"),O("M",ee),O("MM",ee,ae),O("MMM",function(a,b){return b.monthsShortRegex(a)}),O("MMMM",function(a,b){return b.monthsRegex(a)}),S(["M","MM"],
function(a,b){b[te]=r(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[te]=e:j(c).invalidMonth=a});var Be=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),De="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ee=pe,Fe=pe,Ge={},He=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ie=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
Je=/Z|[+-]\d\d(?::?\d\d)?/,Ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,a.suppressDeprecationWarnings=!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Le=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],
Me=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=fa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),A("year","y"),O("Y",le),O("YY",ee,ae),O("YYYY",ie,ce),O("YYYYY",je,de),O("YYYYYY",je,de),S(["YYYYY","YYYYYY"],se),S("YYYY",function(b,c){
c[se]=2===b.length?a.parseTwoDigitYear(b):r(b)}),S("YY",function(b,c){c[se]=a.parseTwoDigitYear(b)}),S("Y",function(a,b){b[se]=parseInt(a,10)});var Ne=E("FullYear",!(a.parseTwoDigitYear=function(a){return r(a)+(68<r(a)?1900:2e3)}));a.ISO_8601=function(){};var Oe=fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:l()}),Pe=fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?this<a?this:a:l()})
;Ka("Z",":"),Ka("ZZ",""),O("Z",ne),O("ZZ",ne),S(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=La(ne,a)});var Re=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Se=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Te=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Za.fn=Ia.prototype;var Ue=bb(1,"add"),Ve=bb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var We=fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData(
):this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ib("gggg","weekYear"),Ib("ggggg","weekYear"),Ib("GGGG","isoWeekYear"),Ib("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),O("G",le),O("g",le),O("GG",ee,ae),O("gg",ee,ae),O("GGGG",ie,ce),O("gggg",ie,ce),O("GGGGG",je,de),O("ggggg",je,de),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),T(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),J("Q",0,"Qo","quarter"),A("quarter","Q"),O("Q",_d),S("Q",function(a,b){b[te]=3*(r(a)-1)}),J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo",
"isoWeek"),A("week","w"),A("isoWeek","W"),O("w",ee),O("ww",ee,ae),O("W",ee),O("WW",ee,ae),T(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});J("D",["DD",2],"Do","date"),A("date","D"),O("D",ee),O("DD",ee,ae),O("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],ue),S("Do",function(a,b){b[ue]=r(a.match(ee)[0])});var Ye=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),A("day","d"),
A("weekday","e"),A("isoWeekday","E"),O("d",ee),O("e",ee),O("E",ee),O("dd",pe),O("ddd",pe),O("dddd",pe),T(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_e="Su_Mo_Tu_We_Th_Fr_Sa".split("_");J("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),O("DDD",he),O("DDDD",be),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),J("H",["HH",2],0,"hour"),J("h",["hh",2],0,cc),J("hmm",0,0,function(){return""+cc.apply(this)+I(
this.minutes(),2)}),J("hmmss",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),dc("a",!0),dc("A",!1),A("hour","h"),O("a",ec),O("A",ec),O("H",ee),O("h",ee),O("HH",ee,ae),O("hh",ee,ae),O("hmm",fe),O("hmmss",ge),O("Hmm",fe),O("Hmmss",ge),S(["H","HH"],ve),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[ve]=r(a),j(c).bigHour=!0}),S("hmm",function(a,b,c){var d=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d)),j(c
).bigHour=!0}),S("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d,2)),b[xe]=r(a.substr(e)),j(c).bigHour=!0}),S("Hmm",function(a,b,c){var d=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d))}),S("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d,2)),b[xe]=r(a.substr(e))});var bf=E("Hours",!0);J("m",["mm",2],0,"minute"),A("minute","m"),O("m",ee),O("mm",ee,ae),S(["m","mm"],we);var cf=E("Minutes",!1);J("s",["ss",2],0,"second"),A("second","s"),O("s",ee),O("ss",ee,ae),S(["s","ss"],xe);var ef,df=E("Seconds",!1);for(J("S",0,0,function(){return~~(this.millisecond()/100)}),
J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),O("S",he,_d),O("SS",he,ae),O("SSS",he,be),ef="SSSS";ef.length<=9;ef+="S")O(ef,ke);for(ef="S";ef.length<=9;ef+="S")S(ef,hc);var ff=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz"
,0,0,"zoneName");var gf=o.prototype;gf.add=Ue,gf.calendar=function(a,b){var c=a||Ea(),d=Ma(c,this).startOf("day"),e=this.diff(d,"days",!0),f=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse",g=b&&(D(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ea(c)))},gf.clone=function(){return new o(this)},gf.diff=function(a,b,c){var d,e,f,g;return this.isValid()&&(d=Ma(a,this)).isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),"year"===(b=B(b))||"month"===b||"quarter"===b?(g=function(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return d=b-f<0?(
c=a.clone().add(e-1,"months"),(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),(b-f)/(c-f)),-(e+d)}(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN},gf.endOf=function(a){return void 0===(a=B(a))||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},gf.format=function(b){var c=M(this,b||a.defaultFormat);return this.localeData().postformat(c)},gf.from=function(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData(
).invalidDate()},gf.fromNow=function(a){return this.from(Ea(),a)},gf.to=function(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},gf.toNow=function(a){return this.to(Ea(),a)},gf.get=H,gf.invalidAt=function(){return j(this).overflow},gf.isAfter=function(a,b){var c=p(a)?a:Ea(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=B(m(b)?"millisecond":b))?+c<+this:+c<+this.clone().startOf(b))},gf.isBefore=function(a,b){var c=p(a)?a:Ea(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=B(m(b)?"millisecond":b))?+this<+c:+this.clone().endOf(b
)<+c)},gf.isBetween=function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)},gf.isSame=function(a,b){var c,d=p(a)?a:Ea(a);return!(!this.isValid()||!d.isValid())&&("millisecond"===(b=B(b||"millisecond"))?+this==+d:(c=+d,+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b)))},gf.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)},gf.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)},gf.isValid=function(){return k(this)},gf.lang=We,gf.locale=ub,gf.localeData=vb,gf.max=Pe,gf.min=Oe,gf.parsingFlags=function(){return g({},j(this))},gf.set=H,gf.startOf=function(a){switch(a=B(a)){case"year":this.month(0)
;case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},gf.subtract=Ve,gf.toArray=function(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]},gf.toObject=function(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}},gf.toDate=function(){return this._offset?new Date(
+this):this._d},gf.toISOString=function(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},gf.toJSON=function(){return this.isValid()?this.toISOString():"null"},gf.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},gf.unix=function(){return Math.floor(+this/1e3)},gf.valueOf=function(){return+this._d-6e4*(this._offset||0)},gf.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},gf.year=Ne,
gf.isLeapYear=function(){return ma(this.year())},gf.weekYear=function(a){return Nb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},gf.isoWeekYear=function(a){return Nb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)},gf.quarter=gf.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},gf.month=$,gf.daysInMonth=function(){return V(this.year(),this.month())},gf.week=gf.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},gf.isoWeek=gf.isoWeeks=function(a){var b=qa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},
gf.weeksInYear=function(){var a=this.localeData()._week;return ra(this.year(),a.dow,a.doy)},gf.isoWeeksInYear=function(){return ra(this.year(),1,4)},gf.date=Ye,gf.day=gf.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=function(a,b){return"string"!=typeof a?a:isNaN(a)?"number"==typeof(a=b.weekdaysParse(a))?a:null:parseInt(a,10)}(a,this.localeData()),this.add(a-b,"d")):b},gf.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},gf.isoWeekday=function(a){return this.isValid(
)?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN},gf.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},gf.hour=gf.hours=bf,gf.minute=gf.minutes=cf,gf.second=gf.seconds=df,gf.millisecond=gf.milliseconds=ff,gf.utcOffset=function(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=La(ne,b):Math.abs(b)<16&&(b*=60),!this._isUTC&&c&&(d=Na(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?cb(this,Za(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,
a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Na(this):null!=b?this:NaN},gf.utc=function(a){return this.utcOffset(0,a)},gf.local=function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Na(this),"m")),this},gf.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(La(me,this._i)),this},gf.hasAlignedHourOffset=function(a){return!!this.isValid()&&(a=a?Ea(a).utcOffset():0,(this.utcOffset()-a)%60==0)},gf.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},gf.isDSTShifted=function(){
if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),(a=Ba(a))._a){var b=a._isUTC?h(a._a):Ea(a._a);this._isDSTShifted=this.isValid()&&0<s(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted},gf.isLocal=function(){return!!this.isValid()&&!this._isUTC},gf.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},gf.isUtc=Ya,gf.isUTC=Ya,gf.zoneAbbr=function(){return this._isUTC?"UTC":""},gf.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},gf.dates=fa("dates accessor is deprecated. Use date instead.",Ye),gf.months=fa("months accessor is deprecated. Use month instead",$),gf.years=fa(
"years accessor is deprecated. Use year instead",Ne),gf.zone=fa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});var hf=gf,pf=t.prototype;pf._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},pf.calendar=function(a,b,c){var d=this._calendar[a];return D(d)?d.call(b,c):d},pf._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",
LLLL:"dddd, MMMM D, YYYY h:mm A"},pf.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])},pf._invalidDate="Invalid date",pf.invalidDate=function(){return this._invalidDate},pf._ordinal="%d",pf.ordinal=function(a){return this._ordinal.replace("%d",a)},pf._ordinalParse=/\d{1,2}/,pf.preparse=qc,pf.postformat=qc,pf._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",
yy:"%d years"},pf.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return D(e)?e(a,b,c,d):e.replace(/%d/i,a)},pf.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return D(c)?c(b):c.replace(/%s/i,b)},pf.set=function(a){var b,c;for(c in a)D(b=a[c])?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},pf.months=function(a,b){return c(this._months)?this._months[a.month()]:this._months[Be.test(b)?"format":"standalone"][a.month()]},pf._months=Ce,pf.monthsShort=function(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Be.test(b
)?"format":"standalone"][a.month()]},pf._monthsShort=De,pf.monthsParse=function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(
c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},pf._monthsRegex=Fe,pf.monthsRegex=function(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex},pf._monthsShortRegex=Ee,pf.monthsShortRegex=function(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex},pf.week=function(a){return qa(a,this._week.dow,this._week.doy).week
},pf._week={dow:0,doy:6},pf.firstDayOfYear=function(){return this._week.doy},pf.firstDayOfWeek=function(){return this._week.dow},pf.weekdays=function(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]},pf._weekdays=Ze,pf.weekdaysMin=function(a){return this._weekdaysMin[a.day()]},pf._weekdaysMin=_e,pf.weekdaysShort=function(a){return this._weekdaysShort[a.day()]},pf._weekdaysShort=$e,pf.weekdaysParse=function(a,b,c){var d,e,f;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(e=Ea([
2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a)
)return d;if(!c&&this._weekdaysParse[d].test(a))return d}},pf.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)},pf._meridiemParse=/[ap]\.?m?\.?/i,pf.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;return a+(1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),a.lang=fa("moment.lang is deprecated. Use moment.locale instead.",x),a.langData=fa("moment.langData is deprecated. Use moment.localeData instead.",z);var qf=Math.abs,rf=Lc("ms"),sf=Lc("s"),tf=Lc("m"),uf=Lc("h"),vf=Lc("d"),wf=Lc("w"),xf=Lc("M"),yf=Lc("y"),zf=Nc("milliseconds"),Af=Nc("seconds"),
Bf=Nc("minutes"),Cf=Nc("hours"),Df=Nc("days"),Ef=Nc("months"),Ff=Nc("years"),Gf=Math.round,Hf={s:45,m:45,h:22,d:26,M:11},If=Math.abs,Jf=Ia.prototype;Jf.abs=function(){var a=this._data;return this._milliseconds=qf(this._milliseconds),this._days=qf(this._days),this._months=qf(this._months),a.milliseconds=qf(a.milliseconds),a.seconds=qf(a.seconds),a.minutes=qf(a.minutes),a.hours=qf(a.hours),a.months=qf(a.months),a.years=qf(a.years),this},Jf.add=function(a,b){return Cc(this,a,b,1)},Jf.subtract=function(a,b){return Cc(this,a,b,-1)},Jf.as=function(a){var b,c,d=this._milliseconds;if("month"===(a=B(a))||"year"===a)return b=this._days+d/864e5,c=this._months+Hc(b),
"month"===a?c:c/12;switch(b=this._days+Math.round(Ic(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}},Jf.asMilliseconds=rf,Jf.asSeconds=sf,Jf.asMinutes=tf,Jf.asHours=uf,Jf.asDays=vf,Jf.asWeeks=wf,Jf.asMonths=xf,Jf.asYears=yf,Jf.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)},Jf._bubble=function(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data
;return 0<=f&&0<=g&&0<=h||f<=0&&g<=0&&h<=0||(f+=864e5*Fc(Ic(h)+g),h=g=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,h+=e=q(Hc(g+=q(c/24))),g-=Fc(Ic(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this},Jf.get=function(a){return this[(a=B(a))+"s"]()},Jf.milliseconds=zf,Jf.seconds=Af,Jf.minutes=Bf,Jf.hours=Cf,Jf.days=Df,Jf.weeks=function(){return q(this.days()/7)},Jf.months=Ef,Jf.years=Ff,Jf.humanize=function(a){var b=this.localeData(),c=function(a,b,c){var d=Za(a).abs(),e=Gf(d.as("s")),f=Gf(d.as("m")),g=Gf(d.as("h")),h=Gf(d.as("d")),i=Gf(d.as("M")),j=Gf(d.as("y")),k=e<Hf.s&&["s",e]||f<=1&&["m"]||f<Hf.m&&[
"mm",f]||g<=1&&["h"]||g<Hf.h&&["hh",g]||h<=1&&["d"]||h<Hf.d&&["dd",h]||i<=1&&["M"]||i<Hf.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=0<+a,k[4]=c,function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}.apply(null,k)}(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)},Jf.toISOString=Tc,Jf.toString=Tc,Jf.toJSON=Tc,Jf.locale=ub,Jf.localeData=vb,Jf.toIsoString=fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tc),Jf.lang=We,J("X",0,0,"unix"),J("x",0,0,"valueOf"),O("x",le),O("X",/[+-]?\d+(\.\d{1,3})?/),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(r(a))
}),a.version="2.11.1",function(a){Rd=a}(Ea),a.fn=hf,a.min=function(){return Fa("isBefore",[].slice.call(arguments,0))},a.max=function(){return Fa("isAfter",[].slice.call(arguments,0))},a.now=function(){return Date.now?Date.now():+new Date},a.utc=h,a.unix=function(a){return Ea(1e3*a)},a.months=function(a,b){return vc(a,b,"months",12,"month")},a.isDate=d,a.locale=x,a.invalid=l,a.duration=Za,a.isMoment=p,a.weekdays=function(a,b){return vc(a,b,"weekdays",7,"day")},a.parseZone=function(){return Ea.apply(null,arguments).parseZone()},a.localeData=z,a.isDuration=Ja,a.monthsShort=function(a,b){return vc(a,b,"monthsShort",12,"month")},a.weekdaysMin=function(a,b){
return vc(a,b,"weekdaysMin",7,"day")},a.defineLocale=y,a.weekdaysShort=function(a,b){return vc(a,b,"weekdaysShort",7,"day")},a.normalizeUnits=B,a.relativeTimeThreshold=function(a,b){return void 0!==Hf[a]&&(void 0===b?Hf[a]:(Hf[a]=b,!0))},a.prototype=hf;var Kf=a,Lf=(Kf.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),
meridiemParse:/vm|nm/i,isPM:function(a){return/^nm$/i.test(a)},meridiem:function(a,b,c){return a<12?c?"vm":"VM":c?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(
1===a||8===a||20<=a?"ste":"de")},week:{dow:1,doy:4}}),Kf.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",
nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Mf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Nf=(Kf.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),
weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",
h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Mf[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Lf[a]}).replace(/,/g,"")},week:{dow:6,doy:12}}),Kf.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),
weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Of={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8",
"":"9","":"0"},Pf=function(a){return 0===a?0:1===a?1:2===a?2:3<=a%100&&a%100<=10?3:11<=a%100?4:5},Qf={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},Rf=function(a){return function(b,c,d,e){var f=Pf(b),g=Qf[a][Pf(b)]
;return 2===f&&(g=g[c?0:1]),g.replace(/%d/i,b)}},Sf=["  "," "," "," "," "," "," "," "," ","  ","  ","  "],Tf=(Kf.defineLocale("ar",{months:Sf,monthsShort:Sf,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},
meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:Rf("s"),m:Rf("m"),mm:Rf("m"),h:Rf("h"),hh:Rf("h"),d:Rf("d"),dd:Rf("d"),M:Rf("M"),MM:Rf("M"),y:Rf("y"),yy:Rf("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/[]/g,function(a){return Of[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Nf[a]}).replace(/,/g,"")},week:{dow:6,doy:12}}),{1:"-inci",5:"-inci",8:"-inci",70:"-inci",
80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"}),Uf=(Kf.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},
calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(a){return/^(gndz|axam)$/.test(a)},meridiem:function(a,b,c){return a<4?"gec":a<12?"shr":a<17?"gndz":"axam"},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(a){if(0===a)return a+"-nc";var b=a%10;return a+(
Tf[b]||Tf[a%100-b]||Tf[100<=a?100:null])},week:{dow:1,doy:7}}),Kf.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},
weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Vc,mm:Vc,h:Vc,hh:Vc,d:"",dd:Vc,M:"",MM:Vc,y:"",yy:Vc},
meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<12?"":a<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a%10!=2&&a%10!=3||a%100==12||a%100==13?a+"-":a+"-";case"D":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split(
"_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",
y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-":0===c?a+"-":10<c&&c<20?a+"-":1===b?a+"-":2===b?a+"-":7===b||8===b?a+"-":a+"-"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Vf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Wf=(Kf.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),
weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",
yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Vf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Uf[a]})},meridiemParse:/||||/,isPM:function(a){return/^(||)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Xf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Yf=(Kf.defineLocale("bo",{
months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",
LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Xf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Wf[a]})},meridiemParse:/||||/,isPM:function(a){
return/^(||)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",
LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:Wc,h:"un eur",hh:"%d eur",d:"un devezh",dd:Wc,M:"ur miz",MM:Wc,y:"ur bloaz",yy:function(a){switch(function Yc(a){return 9<a?Yc(a%10):a}(a)){case 1:case 3:case 4:case 5:case 9:return a+" bloaz";default:return a+" vloaz"}}},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(a){return a+(1===a?"a":"vet")},week:{dow:1,doy:4}}),Kf.defineLocale("bs",{
months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:
return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:_c,mm:_c,h:_c,hh:_c,d:"dan",dd:_c,M:"mjesec",MM:_c,y:"godinu",yy:_c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),
monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(
1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(a,b){var c=1===a?"r":2===a?"n":3===a?"r":4===a?"t":"";return("w"===b||"W"===b)&&(c="a"),a+c},week:{dow:1,doy:4}}),"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_")),Zf="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),$f=(
Kf.defineLocale("cs",{months:Yf,monthsShort:Zf,monthsParse:function(a,b){var c,d=[];for(c=0;c<12;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(Yf,Zf),shortMonthsParse:function(a){var b,c=[];for(b=0;b<12;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Zf),longMonthsParse:function(a){var b,c=[];for(b=0;b<12;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Yf),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},
calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:bd,m:bd,mm:bd,h:bd,hh:bd,d:bd,dd:bd,M:bd,MM:bd,y:bd,
yy:bd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{
sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(a){return a+(/$/i.exec(a)?"":/$/i.exec(a)?"":"")},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}}),Kf.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),
monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",
hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(a){var c="";return 20<a?c=40===a||50===a||60===a||80===a||100===a?"fed":"ain":0<a&&(c=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][a]),a+c},week:{dow:1,doy:4}}),Kf.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),
weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale(
"de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",
lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:cd,mm:"%d Minuten",h:cd,hh:"%d Stunden",d:cd,dd:cd,M:cd,MM:cd,y:cd,yy:cd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",
LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:dd,mm:"%d Minuten",h:dd,hh:"%d Stunden",d:dd,dd:dd,M:dd,MM:dd,y:dd,yy:dd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),["","","","","","","","","","","",""]),_f=["","","",""
,"","",""],ag=(Kf.defineLocale("dv",{months:$f,monthsShort:$f,weekdays:_f,weekdaysShort:_f,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",
hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(a){return a.replace(//g,",")},postformat:function(a){return a.replace(/,/g,"")},week:{dow:7,doy:12}}),Kf.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(a,b){return/D/.test(b.substring(0,b.indexOf("MMMM")))?this._monthsGenitiveEl[a.month(
)]:this._monthsNominativeEl[a.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(a,b,c){return 11<a?c?"":"":c?"":""},isPM:function(a){return""===(a+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",
lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(a,b){var c=this._calendarEl[a],d=b&&b.hours();return D(c)&&(c=c.apply(b)),c.replace("{}",d%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("en-au",{
months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{
future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY h:mm A",LLLL:"dddd, D MMMM, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(
1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),Kf.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",
lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},
ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",
LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("eo",{
months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(a){return"p"===a.charAt(0).toLowerCase()},meridiem:function(a,b,c){
return 11<a?c?"p.t.m.":"P.T.M.":c?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}}),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_")),bg="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),cg=(Kf.defineLocale("es",{
months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?bg[a.month()]:ag[a.month()]},weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours(
)?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),
monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:ed,m:ed,mm:ed,h:ed,hh:ed,d:ed,dd:"%d peva",M:ed,MM:ed,y:ed,yy:ed},
ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",
ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),dg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",
"":"0"},eg=(Kf.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(a){return/  /.test(a)},meridiem:function(a,b,c){
return a<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(a){return a.replace(/[-]/g,function(a){return dg[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return cg[a]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}}),
"nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" ")),fg=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",eg[7],eg[8],eg[9]],gg=(Kf.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",
LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:fd,m:fd,mm:fd,h:fd,hh:fd,d:fd,dd:fd,M:fd,MM:fd,y:fd,yy:fd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"
),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",
h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}}),Kf.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),
monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",
h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")},week:{dow:1,doy:4}}),Kf.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",
LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}}),"jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_")),hg="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),ig=(
Kf.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?hg[a.month()]:gg[a.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",
sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||20<=a?"ste":"de")},week:{dow:1,doy:4}}),["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"]),ng=(Kf.defineLocale("gd",{months:ig,monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,
weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",
MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(a){return a+(1===a?"d":a%10==2?"na":"mh")},week:{dow:1,doy:4}}),Kf.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",
LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(a){return"uns segundos"===a?"nuns segundos":"en "+a},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},
ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}}),Kf.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",
nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(a){return 2===a?"":a+" "},d:"",dd:function(a){return 2===a?"":a+" "},M:"",MM:function(a){return 2===a?"":a+" "},y:"",yy:function(a){return 2===a?"":a%10==0&&10!==a?a+" ":a+" "}}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),og={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},pg=(Kf.defineLocale("hi",{
months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",
past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return og[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return ng[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("hr",{months:{
format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{
sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:hd,mm:hd,h:hd,hh:hd,d:"dan",dd:hd,M:"mjesec",MM:hd,y:"godinu",yy:hd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),
"vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ")),qg=(Kf.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(a){return"u"===a.charAt(1
).toLowerCase()},meridiem:function(a,b,c){return a<12?!0===c?"de":"DE":!0===c?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return jd.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return jd.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:id,m:id,mm:id,h:id,hh:id,d:id,dd:id,M:id,MM:id,y:id,yy:id},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("hy-am",{months:{format:"___________".split("_"),
standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){
return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a){return a<4?"":a<12?"":a<17?"":""},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(a,b){switch(b){case"DDD":case"w":case"W":case"DDDo":return 1===a?a+"-":a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("id",{
months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"siang"===b?11<=a?a:a+12:"sore"===b||"malam"===b?a+12:void 0},
meridiem:function(a,b,c){return a<11?"pagi":a<15?"siang":a<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),Kf.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),
weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:ld,m:ld,mm:ld,h:"klukkustund",hh:ld,d:ld,dd:ld,M:ld,MM:ld,y:ld,yy:ld},ordinalParse:/\d{1,2}\./,
ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",
lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(a){return(/^[0-9].+$/.test(a)?"tra":"in")+" "+a},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),
weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"Ahms",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhm",LLLL:"YYYYMDAhm dddd"},meridiemParse:/|/i,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}}),Kf.defineLocale("jv",{
months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(a,b){return 12===a&&(a=0),"enjing"===b?a:"siyang"===b?11<=a?a:a+12:"sonten"===b||"ndalu"===b?a+12:void 0},
meridiem:function(a,b,c){return a<11?"enjing":a<15?"siyang":a<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),Kf.defineLocale("ka",{months:{standalone:"___________".split(
"_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{
sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(a){return/(|||)/.test(a)?a.replace(/$/,""):a+""},past:function(a){return/(||||)/.test(a)?a.replace(/(|)$/," ")://.test(a)?a.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(a){return 0===a?a:1===a?a+"-":a<20||a<=100&&a%20==0||a%100==0?"-"+a:a+"-"},
week:{dow:1,doy:7}}),{0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"}),rg=(Kf.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|)/,ordinal:function(a){return a+(qg[a]||qg[a%10]||qg[100<=a?100:null])},week:{dow:1,doy:7}}),Kf.defineLocale("km",{months:"___________".split("_"),
monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",
s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}}),Kf.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h m",LLLL:"YYYY MMMM D dddd A h m"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",
lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""}}),Kf.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),
weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(a){return pd(a.substr(0,a.indexOf(" ")))?"a "+a:"an "+a},past:function(a){return pd(a.substr(0,a.indexOf(" "))
)?"viru "+a:"virun "+a},s:"e puer Sekonnen",m:md,mm:"%d Minutten",h:md,hh:"%d Stonnen",d:md,dd:"%d Deeg",M:md,MM:"%d Mint",y:md,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinalParse:/()\d{1,2}/,ordinal:function(a){return""+a}}),{m:"minut_minuts_minut",
mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"}),sg=(Kf.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_")},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{
format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{
sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(a,b,c,d){return b?"kelios sekunds":d?"keli sekundi":"kelias sekundes"},m:rd,mm:ud,h:rd,hh:ud,d:rd,dd:ud,M:rd,MM:ud,y:rd,yy:ud},ordinalParse:/\d{1,2}-oji/,ordinal:function(a){return a+"-oji"},week:{dow:1,doy:4}}),{m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),
dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")}),tg=(Kf.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",
L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(a,b){return b?"daas sekundes":"dam sekundm"},m:xd,mm:wd,h:xd,hh:wd,d:xd,dd:wd,M:xd,MM:wd,y:xd,yy:wd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan",
"dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:2<=a&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=tg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+tg.correctGrammaticalCase(a,d)}}),ug=(Kf.defineLocale("me",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sri.","et.","pet.","sub."],
weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT",
"[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:tg.translate,mm:tg.translate,h:tg.translate,hh:tg.translate,d:"dan",dd:tg.translate,M:"mjesec",MM:tg.translate,y:"godinu",yy:tg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),
weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},
ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-":0===c?a+"-":10<c&&c<20?a+"-":1===b?a+"-":2===b?a+"-":7===b||8===b?a+"-":a+"-"},week:{dow:1,doy:7}}),Kf.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{
LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,isPM:function(a){return/^( ||)$/.test(a)},meridiem:function(a,b,c){
return a<4?"":a<12?"":a<17?" ":a<20?"":""}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),vg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},wg=(Kf.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{
LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:zd,m:zd,mm:zd,h:zd,hh:zd,d:zd,dd:zd,M:zd,MM:zd,y:zd,yy:zd},preparse:function(a){return a.replace(/[]/g,function(a){return vg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return ug[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),
""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?11<=a?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"pagi":a<15?"tengahari":a<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",
MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),Kf.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),
"pagi"===b?a:"tengahari"===b?11<=a?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"pagi":a<15?"tengahari":a<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),xg={"":"1","":"2","":"3","":"4","":"5",
"":"6","":"7","":"8","":"9","":"0"},yg=(Kf.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",
lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return xg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return wg[a]})},week:{dow:1,doy:4}}),Kf.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),
weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",
y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),zg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Ag=(Kf.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{
LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(a){return a.replace(/[]/g,function(a){return zg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return yg[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<3?"":a<12?"":a<16?"":a<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",
lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}}),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_")),Bg="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Cg=(Kf.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Bg[a.month()]:Ag[a.month()]},
weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",
y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||20<=a?"ste":"de")},week:{dow:1,doy:4}}),Kf.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},
calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),"stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_")),Dg="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"
),Eg=(Kf.defineLocale("pl",{months:function(a,b){return""===b?"("+Dg[a.month()]+"|"+Cg[a.month()]+")":/D MMMM/.test(b)?Dg[a.month()]:Cg[a.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(
this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:Bd,mm:Bd,h:Bd,hh:Bd,d:"1 dzie",dd:"%d dni",M:"miesic",MM:Bd,y:"rok",yy:Bd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),
weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",
m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"}),Kf.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",
LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("ro",{
months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{
future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:Cd,h:"o or",hh:Cd,d:"o zi",dd:Cd,M:"o lun",MM:Cd,y:"un an",yy:Cd},week:{dow:1,doy:7}}),[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]),Fg=(Kf.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"___________".split("_"),standalone:"___________".split("_")},
weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:Eg,longMonthsParse:Eg,shortMonthsParse:Eg,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(a){if(a.week()===this.week()
)return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Ed,mm:Ed,h:"",hh:Ed,d:"",dd:Ed,M:"",MM:Ed,y:"",yy:Ed},
meridiemParse:/|||/i,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<12?"":a<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-";case"D":return a+"-";case"w":case"W":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),
weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",
dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",
LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},ordinalParse:/\d{1,2} /,ordinal:function(a){return a+" "},meridiem:function(a,b,c){return 11<a?c?"..":" ":c?"..":" "}}),"janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_")),Gg="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_")
,Hg=(Kf.defineLocale("sk",{months:Fg,monthsShort:Gg,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",
lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:Gd,m:Gd,mm:Gd,h:Gd,hh:Gd,d:Gd,dd:Gd,M:Gd,MM:Gd,y:Gd,yy:Gd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),
weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:
return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:Hd,m:Hd,mm:Hd,h:Hd,hh:Hd,d:Hd,dd:Hd,M:Hd,MM:Hd,y:Hd,yy:Hd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),
weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(a){return"M"===a.charAt(0)},meridiem:function(a,b,c){return a<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",
y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:2<=a&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=Hg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Hg.correctGrammaticalCase(a,d)}}),Ig=(Kf.defineLocale("sr-cyrl",{months:["","","","","","","","","","","",""],monthsShort:[".","."
,".",".","","","",".",".",".",".","."],weekdays:["","","","","","",""],weekdaysShort:[".",".",".",".",".",".","."],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",
lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:Hg.translate,mm:Hg.translate,h:Hg.translate,hh:Hg.translate,d:"",dd:Hg.translate,M:"",MM:Hg.translate,y:"",yy:Hg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"
],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:2<=a&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=Ig.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Ig.correctGrammaticalCase(a,d)}}),Jg=(Kf.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","et.","pet.","sub."],weekdaysMin:["ne","po","ut",
"sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]
},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:Ig.translate,mm:Ig.translate,h:Ig.translate,hh:Ig.translate,d:"dan",dd:Ig.translate,M:"mesec",MM:Ig.translate,y:"godinu",yy:Ig.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),
longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"e":1===b?"a":2===b?"a":"e")},week:{dow:1,doy:4}}),Kf.defineLocale("sw",{
months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"
},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Kg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Lg=(Kf.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),
weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",
dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(a){return a+""},preparse:function(a){return a.replace(/[]/g,function(a){return Kg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Jg[a]})},meridiemParse:/|||||/,meridiem:function(a,b,c){return a<2?" ":a<6?" ":a<10?" ":a<14?" ":a<18?" ":a<22?" ":" "},meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<2?a:a+12:""===b||""===b?a:""===b&&10<=a?a:a+12},week:{dow:0,doy:6}}),Kf.defineLocale("te",{
months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{
future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("th",{
months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"H  m ",LTS:"H  m  s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H  m ",LLLL:"dddd D MMMM YYYY  H  m "},meridiemParse:/|/,isPM:function(a){
return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),Kf.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),
weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",
MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),"pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_")),Mg=(Kf.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),
weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(a){var b=a;return-1!==a.indexOf("jaj")?b.slice(0,-3)+"leS":-1!==a.indexOf("jar")?b.slice(0,-3)+"waQ":-1!==a.indexOf("DIS")?b.slice(0,-3)+"nem":b+" pIq"},past:function(a){var b=a;return-1!==a.indexOf("jaj")?b.slice(0,-3
)+"Hu":-1!==a.indexOf("jar")?b.slice(0,-3)+"wen":-1!==a.indexOf("DIS")?b.slice(0,-3)+"ben":b+" ret"},s:"puS lup",m:"wa tup",mm:Kd,h:"wa rep",hh:Kd,d:"wa jaj",dd:Kd,M:"wa jar",MM:Kd,y:"wa DIS",yy:Kd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"}),Ng=(Kf.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),
weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",
yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(a){if(0===a)return a+"'nc";var b=a%10;return a+(Mg[b]||Mg[a%100-b]||Mg[100<=a?100:null])},week:{dow:1,doy:7}}),Kf.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",
LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiem:function(a,b,c){return 11<a?c?"d'o":"D'O":c?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:Md,m:Md,mm:Md,h:Md,hh:Md,d:Md,dd:Md,M:Md,MM:Md,y:Md,yy:Md},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),
monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",
m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),Kf.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}}),Kf.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},
monthsShort:"___________".split("_"),weekdays:function(a,b){return{nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")}[/(\[[]\]) ?dddd/.test(b)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(b)?"genitive":"nominative"][a.day()]},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",
LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:Qd("[ "),nextDay:Qd("[ "),lastDay:Qd("[ "),nextWeek:Qd("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return Qd("[] dddd [").call(this);case 1:case 2:case 4:return Qd("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Od,mm:Od,h:"",hh:Od,d:"",dd:Od,M:"",MM:Od,y:"",yy:Od},meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<12?"":a<17?"":""},
ordinalParse:/\d{1,2}-(|)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a+"-";case"D":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",
LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}}),Kf.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split(
"_"),weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",
h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),Kf.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"
},meridiemParse:/|||||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b||""===b||""===b?a:""===b||""===b?a+12:11<=a?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return d<600?"":d<900?"":d<1130?"":d<1230?"":d<1800?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var a,b;return a=Kf().startOf("week"),b=604800<=this.unix()-a.unix()?"[]":"[]",0===this.minutes()?b+"dddAh":b+"dddAhmm"},lastWeek:function(){var a,b;return a=Kf(
).startOf("week"),b=this.unix()<a.unix()?"[]":"[]",0===this.minutes()?b+"dddAh":b+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"";case"M":return a+"";case"w":case"W":return a+"";default:return a}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}}),Kf.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),
weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/||||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b||""===b?a:""===b?11<=a?a:a+12:""===b||""===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return d<900?"":d<1130?"":d<1230?"":d<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},
ordinalParse:/\d{1,2}(||)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"";case"M":return a+"";case"w":case"W":return a+"";default:return a}},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"}}),Kf);return Ng.locale("en"),Ng});var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(prop){var _super=this.prototype;initializing=!0;var prototype=new this;for(var name in initializing=!1,prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name]
)?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);return this._super=tmp,ret}}(name,prop[name]):prop[name];return Class=function(){!initializing&&this.init&&this.init.apply(this,arguments)},Class.prototype=prototype,Class.constructor=Class,Class.extend=arguments.callee,Class},"undefined"!=typeof exports&&(exports.Class=Class),define("class",function(global){return function(){return global.Class}}(this)),function(glob){var current_event,stop,has="hasOwnProperty",separator=/[\.\/]/,fun=function(){},numsort=function(a,b){return a-b},events={n:{}},eve=function(name,scope){name=String(name);var l,
oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,indexed=[],queue={},out=[],ce=current_event;current_event=name;for(var i=stop=0,ii=listeners.length;i<ii;i++)"zIndex"in listeners[i]&&(indexed.push(listeners[i].zIndex),listeners[i].zIndex<0&&(queue[listeners[i].zIndex]=listeners[i]));for(indexed.sort(numsort);indexed[z]<0;)if(l=queue[indexed[z++]],out.push(l.apply(scope,args)),stop)return stop=oldstop,out;for(i=0;i<ii;i++)if("zIndex"in(l=listeners[i]))if(l.zIndex==indexed[z]){if(out.push(l.apply(scope,args)),stop)break;do{if((l=queue[indexed[++z]])&&out.push(l.apply(scope,args)),stop)break}while(l)
}else queue[l.zIndex]=l;else if(out.push(l.apply(scope,args)),stop)break;return stop=oldstop,current_event=ce,out.length?out:null};eve._events=events,eve.listeners=function(name){var item,items,k,i,ii,j,jj,nes,names=name.split(separator),e=events,es=[e],out=[];for(i=0,ii=names.length;i<ii;i++){for(nes=[],j=0,jj=es.length;j<jj;j++)for(items=[(e=es[j].n)[names[i]],e["*"]],k=2;k--;)(item=items[k])&&(nes.push(item),out=out.concat(item.f||[]));es=nes}return out},eve.on=function(name,f){if(name=String(name),"function"!=typeof f)return function(){};for(var names=name.split(separator),e=events,i=0,ii=names.length;i<ii;i++)e=(e=e.n).hasOwnProperty(names[i]
)&&e[names[i]]||(e[names[i]]={n:{}});for(e.f=e.f||[],i=0,ii=e.f.length;i<ii;i++)if(e.f[i]==f)return fun;return e.f.push(f),function(zIndex){+zIndex==+zIndex&&(f.zIndex=+zIndex)}},eve.f=function(event){var attrs=[].slice.call(arguments,1);return function(){eve.apply(null,[event,null].concat(attrs).concat([].slice.call(arguments,0)))}},eve.stop=function(){stop=1},eve.nt=function(subname){return subname?new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.|\\/|$)").test(current_event):current_event},eve.nts=function(){return current_event.split(separator)},eve.off=eve.unbind=function(name,f){if(name){var e,key,splice,i,ii,j,jj,names=name.split(separator),cur=[events];for(
i=0,ii=names.length;i<ii;i++)for(j=0;j<cur.length;j+=splice.length-2){if(splice=[j,1],e=cur[j].n,"*"!=names[i])e[names[i]]&&splice.push(e[names[i]]);else for(key in e)e[has](key)&&splice.push(e[key]);cur.splice.apply(cur,splice)}for(i=0,ii=cur.length;i<ii;i++)for(e=cur[i];e.n;){if(f){if(e.f){for(j=0,jj=e.f.length;j<jj;j++)if(e.f[j]==f){e.f.splice(j,1);break}!e.f.length&&delete e.f}for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;for(j=0,jj=funcs.length;j<jj;j++)if(funcs[j]==f){funcs.splice(j,1);break}!funcs.length&&delete e.n[key].f}}else for(key in delete e.f,e.n)e.n[has](key)&&e.n[key].f&&delete e.n[key].f;e=e.n}}else eve._events=events={
n:{}}},eve.once=function(name,f){var f2=function(){return eve.unbind(name,f2),f.apply(this,arguments)};return eve.on(name,f2)},eve.version="0.4.2",eve.toString=function(){return"You are running Eve 0.4.2"},"undefined"!=typeof module&&module.exports?module.exports=eve:void 0!==define?define("eve",[],function(){return eve}):glob.eve=eve}(window||this),function(glob,factory){"function"==typeof define&&define.amd?define("raphael",["eve"],function(eve){return factory(glob,eve)}):factory(glob,glob.eve||"function"==typeof require&&require("eve"))}(this,function(window,eve){function R(first){if(R.is(first,"function"))return loaded?first():eve.on("raphael.DOMload",
first);if(R.is(first,array))return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first);var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args))})}return R._engine.create[apply](R,arguments)}R.version="2.1.2",R.eve=eve;var loaded,paperproto,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael
},Paper=function(){this.ca=this.customAttributes={}},apply="apply",concat="concat",supportsTouch="ontouchstart"in g.win||g.win.DocumentTouch&&g.doc instanceof DocumentTouch,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",array="array",objectToString=Object.prototype.toString,colourRegExp=(R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,
/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),isnan={NaN:1,Infinity:1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,
font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour","stroke-opacity":nu,
"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,
pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,eldata=(R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),
sortByNumber=function(a,b){return toFloat(a)-toFloat(b)},pipe=function(x){return x},rectPath=R._rectPath=function(x,y,w,h,r){return r?[["M",x+r,y],["l",w-2*r,0],["a",r,r,0,0,1,r,r],["l",0,h-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-w,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-h],["a",r,r,0,0,1,r,-r],["z"]]:[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath=function(x,y,rx,ry){return null==ry&&(ry=rx),[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPath=R._getPath={path:function(el){return el.attr("path")},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.r)},ellipse:function(el){var a=el.attrs
;return ellipsePath(a.cx,a.cy,a.rx,a.ry)},rect:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height,a.r)},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height)},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)},set:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)}},mapPath=R.mapPath=function(path,matrix){if(!matrix)return path;var x,y,i,j,ii,jj,pathi;for(i=0,ii=(path=path2curve(path)).length;i<ii;i++)for(j=1,jj=(pathi=path[i]).length;j<jj;j+=2)x=matrix.x(pathi[j],pathi[j+1]),y=matrix.y(pathi[j],pathi[j+1]),pathi[j]=x,pathi[j+1]=y
;return path};if(R._g=g,"VML"==(R.type=g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML")){var b,d=g.doc.createElement("div");if(d.innerHTML='<v:shape adj="1"/>',(b=d.firstChild).style.behavior="url(#default#VML)",!b||"object"!=typeof b.adj)return R.type=E;d=null}function clone(obj){if("function"==typeof obj||Object(obj)!==obj)return obj;var res=new obj.constructor;for(var key in obj)obj[has](key)&&(res[key]=clone(obj[key]));return res}R.svg=!(R.vml="VML"==R.type),R._Paper=Paper,R.fn=paperproto=Paper.prototype=R.prototype,R._id=0,R._oid=0,R.is=function(o,type){return"finite"==(
type=lowerCase.call(type))?!isnan[has](+o):"array"==type?o instanceof Array:"null"==type&&null===o||type==typeof o&&null!==o||"object"==type&&o===Object(o)||"array"==type&&Array.isArray&&Array.isArray(o)||objectToString.call(o).slice(8,-1).toLowerCase()==type},R.angle=function(x1,y1,x2,y2,x3,y3){if(null!=x3)return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3);var x=x1-x2,y=y1-y2;return x||y?(180+180*math.atan2(-y,-x)/PI+360)%360:0},R.rad=function(deg){return deg%360*PI/180},R.deg=function(rad){return 180*rad/PI%360},R.snapTo=function(values,value,tolerance){if(tolerance=R.is(tolerance,"finite")?tolerance:10,R.is(values,array)){for(var i=values.length;i--;)if(
abs(values[i]-value)<=tolerance)return values[i]}else{var rem=value%(values=+values);if(rem<tolerance)return value-rem;if(values-tolerance<rem)return value-rem+values}return value};var uuidRegEx,uuidReplacer;R.createUUID=(uuidRegEx=/[xy]/g,uuidReplacer=function(c){var r=16*math.random()|0;return("x"==c?r:3&r|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase()});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin),g.win=newwin,g.doc=g.win.document,R._engine.initWin&&R._engine.initWin(g.win)};var toHex=function(color){if(R.vml){var bod,trim=/^\s+|\s+$/g;try{
var docum=new ActiveXObject("htmlfile");docum.write("<body>"),docum.close(),bod=docum.body}catch(e){bod=createPopup().document.body}var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");return"#"+("000000"+(value=(255&value)<<16|65280&value|(16711680&value)>>>16).toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=g.doc.createElement("i");i.title="Raphal Colour Picker",i.style.display="none",g.doc.body.appendChild(i),toHex=cacher(function(color){var computedStyle;return i.style.color=color,(computedStyle=g.doc.defaultView.getComputedStyle(i,E)
)?computedStyle.getPropertyValue("color"):color})}return toHex(color)},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")"},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")"},rgbtoString=function(){return this.hex},prepareRGB=function(r,g,b){if(null==g&&R.is(r,"object")&&"r"in r&&"g"in r&&"b"in r&&(b=r.b,g=r.g,r=r.r),null==g&&R.is(r,"string")){var clr=R.getRGB(r);r=clr.r,g=clr.g,b=clr.b}return(1<r||1<g||1<b)&&(r/=255,g/=255,b/=255),[r,g,b]},packageRGB=function(r,g,b,o){var rgb={r:r*=255,g:g*=255,b:b*=255,hex:R.rgb(r,g,b),toString:rgbtoString};return R.is(o,"finite")&&(rgb.opacity=o),rgb};function cacher(f,scope,postprocessor){
return function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join(""),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];return cache[has](args)?function(array,item){for(var i=0,ii=array.length;i<ii;i++)if(array[i]===item)return array.push(array.splice(i,1)[0])}(count,args):(1e3<=count.length&&delete cache[count.shift()],count.push(args),cache[args]=f[apply](scope,arg)),postprocessor?postprocessor(cache[args]):cache[args]}}R.color=function(clr){var rgb;return R.is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr?(rgb=R.hsb2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):R.is(clr,"object"
)&&"h"in clr&&"s"in clr&&"l"in clr?(rgb=R.hsl2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):(R.is(clr,"string")&&(clr=R.getRGB(clr)),R.is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr?(rgb=R.rgb2hsl(clr),clr.h=rgb.h,clr.s=rgb.s,clr.l=rgb.l,rgb=R.rgb2hsb(clr),clr.v=rgb.b):(clr={hex:"none"}).r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1),clr.toString=rgbtoString,clr},R.hsb2rgb=function(h,s,v,o){var R,G,B,X,C;return this.is(h,"object")&&"h"in h&&"s"in h&&"b"in h&&(v=h.b,s=h.s,o=(h=h.h).o),X=(C=v*s)*(1-abs((h=(h*=360)%360/60)%2-1)),R=G=B=v-C,packageRGB(R+=[C,X,0,0,X,C][h=~~h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],o)},R.hsl2rgb=function(h,s,l,o){
var R,G,B,X,C;return this.is(h,"object")&&"h"in h&&"s"in h&&"l"in h&&(l=h.l,s=h.s,h=h.h),(1<h||1<s||1<l)&&(h/=360,s/=100,l/=100),X=(C=2*s*(l<.5?l:1-l))*(1-abs((h=(h*=360)%360/60)%2-1)),R=G=B=l-C/2,packageRGB(R+=[C,X,0,0,X,C][h=~~h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],o)},R.rgb2hsb=function(r,g,b){var V,C;return r=(b=prepareRGB(r,g,b))[0],g=b[1],b=b[2],{h:((0==(C=(V=mmax(r,g,b))-mmin(r,g,b))?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4)+360)%6*60/360,s:0==C?0:C/V,b:V,toString:hsbtoString}},R.rgb2hsl=function(r,g,b){var L,M,m,C;return r=(b=prepareRGB(r,g,b))[0],g=b[1],b=b[2],L=((M=mmax(r,g,b))+(m=mmin(r,g,b)))/2,{h:((0==(C=M-m)?null:M==r?(g-b)/C:M==g?(b-r
)/C+2:(r-g)/C+4)+360)%6*60/360,s:0==C?0:L<.5?C/(2*L):C/(2-2*L),l:L,toString:hsltoString}},R._path2string=function(){return this.join(",").replace(p2s,"$1")};R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em",img.onload=function(){f.call(this),this.onload=null,g.doc.body.removeChild(this)},img.onerror=function(){g.doc.body.removeChild(this)},g.doc.body.appendChild(img),img.src=src};function clrToString(){return this.hex}function catmullRom2bezier(crp,z){for(var d=[],i=0,iLen=crp.length;i<iLen-2*!z;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{
x:+crp[i+4],y:+crp[i+5]}];z?i?iLen-4==i?p[3]={x:+crp[0],y:+crp[1]}:iLen-2==i&&(p[2]={x:+crp[0],y:+crp[1]},p[3]={x:+crp[2],y:+crp[3]}):p[0]={x:+crp[iLen-2],y:+crp[iLen-1]}:iLen-4==i?p[3]=p[2]:i||(p[0]={x:+crp[i],y:+crp[i+1]}),d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}R.getRGB=cacher(function(colour){if(!colour||(colour=Str(colour)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString};if("none"==colour)return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString};!hsrg[has](colour.toLowerCase().substring(0,2))&&"#"!=colour.charAt()&&(
colour=toHex(colour));var red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);return rgb?(rgb[2]&&(blue=toInt(rgb[2].substring(5),16),green=toInt(rgb[2].substring(3,5),16),red=toInt(rgb[2].substring(1,3),16)),rgb[3]&&(blue=toInt((t=rgb[3].charAt(3))+t,16),green=toInt((t=rgb[3].charAt(2))+t,16),red=toInt((t=rgb[3].charAt(1))+t,16)),rgb[4]&&(values=rgb[4][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),"rgba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),
values[3]&&"%"==values[3].slice(-1)&&(opacity/=100)),rgb[5]?(values=rgb[5][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||""==values[0].slice(-1))&&(red/=360),"hsba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsb2rgb(red,green,blue,opacity)):rgb[6]?(values=rgb[6][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(
green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||""==values[0].slice(-1))&&(red/=360),"hsla"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsl2rgb(red,green,blue,opacity)):((rgb={r:red,g:green,b:blue,toString:clrToString}).hex="#"+(16777216|blue|green<<8|red<<16).toString(16).slice(1),R.is(opacity,"finite")&&(rgb.opacity=opacity),rgb)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}},R),R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex}),R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex}),R.rgb=cacher(
function(r,g,b){return"#"+(16777216|b|g<<8|r<<16).toString(16).slice(1)}),(R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||.75},rgb=this.hsb2rgb(start.h,start.s,start.b);return start.h+=.075,1<start.h&&(start.h=0,start.s-=.2,start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b})),rgb.hex}).reset=function(){delete this.start},R.parsePathString=function(pathString){if(!pathString)return null;var pth=paths(pathString);if(pth.arr)return pathClone(pth.arr);var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];return R.is(pathString,array)&&R.is(pathString[0],array)&&(data=pathClone(pathString)),
data.length||Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();if(c.replace(pathValues,function(a,b){b&&params.push(+b)}),"m"==name&&2<params.length&&(data.push([b][concat](params.splice(0,2))),name="l",b="m"==b?"l":"L"),"r"==name)data.push([b][concat](params));else for(;params.length>=paramCounts[name]&&(data.push([b][concat](params.splice(0,paramCounts[name]))),paramCounts[name]););}),data.toString=R._path2string,pth.arr=pathClone(data),data},R.parseTransformString=cacher(function(TString){if(!TString)return null;var data=[];return R.is(TString,array)&&R.is(TString[0],array)&&(data=pathClone(TString)),data.length||Str(
TString).replace(tCommand,function(a,b,c){var params=[];lowerCase.call(b);c.replace(pathValues,function(a,b){b&&params.push(+b)}),data.push([b][concat](params))}),data.toString=R._path2string,data});var paths=function(ps){var p=paths.ps=paths.ps||{};return p[ps]?p[ps].sleep=100:p[ps]={sleep:100},setTimeout(function(){for(var key in p)p[has](key)&&key!=ps&&(p[key].sleep--,!p[key].sleep&&delete p[key])}),p[ps]};function base3(t,p1,p2,p3,p4){return t*(t*(-3*p1+9*p2-9*p3+3*p4)+6*p1-12*p2+6*p3)-3*p1+3*p2}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){null==z&&(z=1);for(var z2=(z=1<z?1:z<0?0:z)/2,Tvalues=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,
.9041,-.9816,.9816],Cvalues=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],sum=0,i=0;i<12;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb)}return z2*sum}function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(!(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4))){var denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(denominator){var px=((x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4))/denominator,py=((x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4))/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(!(
px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)))return{x:px,y:py}}}}function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2))return justCount?0:[];for(var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=mmax(~~(l1/5),1),n2=mmax(~~(l2/5),1),dots1=[],dots2=[],xy={},res=justCount?0:[],i=0;i<n1+1;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1})}for(i=0;i<n2+1;i++
)p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2)),dots2.push({x:p.x,y:p.y,t:i/n2});for(i=0;i<n1;i++)for(var j=0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<.001?"y":"x",cj=abs(dj1.x-dj.x)<.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4))continue;xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);0<=t1&&t1<=1.001&&0<=t2&&t2<=1.001&&(justCount?res++:res.push({x:is.x,y:is.y,t1:mmin(t1,1),t2:mmin(t2,1)}))}}return res}function interPathHelper(path1
,path2,justCount){path1=R._path2curve(path1),path2=R._path2curve(path2);for(var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[],i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if("M"==pi[0])x1=x1m=pi[1],y1=y1m=pi[2];else{y1="C"==pi[0]?(x1=(bez1=[x1,y1].concat(pi.slice(1)))[6],bez1[7]):(bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m],x1=x1m,y1m);for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if("M"==pj[0])x2=x2m=pj[1],y2=y2m=pj[2];else{y2="C"==pj[0]?(x2=(bez2=[x2,y2].concat(pj.slice(1)))[6],bez2[7]):(bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m],x2=x2m,y2m);var intr=interHelper(bez1,bez2,justCount);if(justCount)res+=intr;else{for(var k=0,kk=intr.length;k<kk;k++
)intr[k].segment1=i,intr[k].segment2=j,intr[k].bez1=bez1,intr[k].bez2=bez2;res=res.concat(intr)}}}}}return res}R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+3*t12*t*c1x+3*t1*t*t*c2x+t3*p2x,y=t13*p1y+3*t12*t*c1y+3*t1*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=90-180*math.atan2(mx-nx,my-ny)/PI;return(nx<mx||my<ny)&&(alpha+=180),{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay
},end:{x:cx,y:cy},alpha:alpha}},R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){R.is(p1x,"array")||(p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y]);var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y}},R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2},R.isBBoxIntersect=function(bbox1,bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,
bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y)},R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2)},R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1)},R.isPointInsidePath=function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1},R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"Raphal: you are calling to method "+methodname+" of removed object",methodname)}}
;var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox)return clone(pth.bbox);if(!path)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var p,x=0,y=0,X=[],Y=[],i=0,ii=(path=path2curve(path)).length;i<ii;i++)if("M"==(p=path[i])[0])x=p[1],y=p[2],X.push(x),Y.push(y);else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x),Y=Y[concat](dim.min.y,dim.max.y),x=p[5],y=p[6]}var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),width=xmax-xmin,height=ymax-ymin,bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:width,height:height,cx:xmin+width/2,cy:ymin+height/2};return pth.bbox=clone(bb)
,bb},pathClone=function(pathArray){var res=clone(pathArray);return res.toString=R._path2string,res},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);if(pth.rel)return pathClone(pth.rel);R.is(pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray));var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(mx=x=pathArray[0][1],my=y=pathArray[0][2],start++,res.push(["M",x,y]));for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0]))switch(r[0]=lowerCase.call(pa[0]),r[0]){case"a":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],
r[6]=+(pa[6]-x).toFixed(3),r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1],my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++)r[j]=+(pa[j]-(j%2?x:y)).toFixed(3)}else{r=res[i]=[],"m"==pa[0]&&(mx=pa[1]+x,my=pa[2]+y);for(var k=0,kk=pa.length;k<kk;k++)res[i][k]=pa[k]}var len=res[i].length;switch(res[i][0]){case"z":x=mx,y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2],y+=+res[i][len-1]}}return res.toString=R._path2string,pth.rel=pathClone(res),res},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs)return pathClone(pth.abs);if(R.is(
pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray)),!pathArray||!pathArray.length)return[["M",0,0]];var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(mx=x=+pathArray[0][1],my=y=+pathArray[0][2],start++,res[0]=["M",x,y]);for(var r,pa,crz=3==pathArray.length&&"M"==pathArray[0][0]&&"R"==pathArray[1][0].toUpperCase()&&"Z"==pathArray[2][0].toUpperCase(),i=start,ii=pathArray.length;i<ii;i++){if(res.push(r=[]),(pa=pathArray[i])[0]!=upperCase.call(pa[0]))switch(r[0]=upperCase.call(pa[0]),r[0]){case"A":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],r[6]=+(pa[6]+x),r[7]=+(pa[7]+y);break;case"V":
r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":for(var dots=[x,y][concat](pa.slice(1)),j=2,jj=dots.length;j<jj;j++)dots[j]=+dots[j]+x,dots[++j]=+dots[j]+y;res.pop(),res=res[concat](catmullRom2bezier(dots,crz));break;case"M":mx=+pa[1]+x,my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++)r[j]=+pa[j]+(j%2?x:y)}else if("R"==pa[0])dots=[x,y][concat](pa.slice(1)),res.pop(),res=res[concat](catmullRom2bezier(dots,crz)),r=["R"][concat](pa.slice(-2));else for(var k=0,kk=pa.length;k<kk;k++)r[k]=pa[k];switch(r[0]){case"Z":x=mx,y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2],my=r[r.length-1];default:x=r[r.length-2],y=r[r.length-1]}}
return res.toString=R._path2string,pth.abs=pathClone(res),res},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]},q2c=function(x1,y1,ax,ay,x2,y2){return[1/3*x1+2/3*ax,1/3*y1+2/3*ay,1/3*x2+2/3*ax,1/3*y2+2/3*ay,x2,y2]},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var xy,_120=120*PI/180,rad=PI/180*(+angle||0),res=[],rotate=cacher(function(x,y,rad){return{x:x*math.cos(rad)-y*math.sin(rad),y:x*math.sin(rad)+y*math.cos(rad)}});if(recursive)f1=recursive[0],f2=recursive[1],cx=recursive[2],cy=recursive[3];else{x1=(xy=rotate(x1,y1,-rad)).x,y1=xy.y,x2=(xy=rotate(x2,y2,-rad)).x,y2=xy.y;math.cos(PI/180*angle),math.sin(PI/180*angle);var x=(
x1-x2)/2,y=(y1-y2)/2,h=x*x/(rx*rx)+y*y/(ry*ry);1<h&&(rx*=h=math.sqrt(h),ry*=h);var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));(f1=x1<cx?PI-f1:f1)<0&&(f1=2*PI+f1),(f2=x2<cx?PI-f2:f2)<0&&(f2=2*PI+f2),sweep_flag&&f2<f1&&(f1-=2*PI),!sweep_flag&&f1<f2&&(f2-=2*PI)}var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f1<f2?1:-1),x2=cx+rx*math.cos(f2),y2=cy+ry*math.sin(f2),res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}
df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];if(m2[0]=2*m1[0]-m2[0],m2[1]=2*m1[1]-m2[1],recursive)return[m2,m3,m4][concat](res);for(var newres=[],i=0,ii=(res=[m2,m3,m4][concat](res).join()[split](",")).length;i<ii;i++)newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;return newres},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+3*pow(t1,2)*t*c1x+3*t1*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+3*pow(t1,2)*t*c1y+3*t1*t*t*c2y+pow(t,3)*p2y}},curveDim=cacher(
function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var dot,a=c2x-2*c1x+p1x-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x];return"1e12"<abs(t1)&&(t1=.5),"1e12"<abs(t2)&&(t2=.5),0<t1&&t1<1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),0<t2&&t2<1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),a=c2y-2*c1y+p1y-(p2y-2*c2y+c1y),c=p1y-c1y,t1=(-(b=2*(c1y-p1y)-2*(c2y-c1y))+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,"1e12"<abs(t1)&&(t1=.5),"1e12"<abs(t2)&&(t2=.5),0<t1&&t1<1&&(
dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),0<t2&&t2<1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),{min:{x:mmin[apply](0,x),y:mmin[apply](0,y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}}}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve)return pathClone(pth.curve);for(var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d,pcom){var nx,ny;if(!path)return["C",d.x,d.y,d.x,d.y,d.x,d.y]
;switch(!(path[0]in{T:1,Q:1})&&(d.qx=d.qy=null),path[0]){case"M":d.X=path[1],d.Y=path[2];break;case"A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case"S":ny="C"==pcom||"S"==pcom?(nx=2*d.x-d.bx,2*d.y-d.by):(nx=d.x,d.y),path=["C",nx,ny][concat](path.slice(1));break;case"T":d.qy="Q"==pcom||"T"==pcom?(d.qx=2*d.x-d.qx,2*d.y-d.qy):(d.qx=d.x,d.y),path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1],d.qy=path[2],path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break
;case"V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y))}return path},fixArc=function(pp,i){if(7<pp[i].length){pp[i].shift();for(var pi=pp[i];pi.length;)pp.splice(i++,0,["C"][concat](pi.splice(0,6)));pp.splice(i,1),ii=mmax(p.length,p2&&p2.length||0)}},fixM=function(path1,path2,a1,a2,i){path1&&path2&&"M"==path1[i][0]&&"M"!=path2[i][0]&&(path2.splice(i,0,["M",a2.x,a2.y]),a1.bx=0,a1.by=0,a1.x=path1[i][1],a1.y=path1[i][2],ii=mmax(p.length,p2&&p2.length||0))},i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]=processPath(p[i],attrs),fixArc(p,i),p2&&(p2[i]=processPath(p2[i],attrs2)),p2&&fixArc(p2,i),fixM(p,p2,
attrs,attrs2,i),fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2],attrs.y=seg[seglen-1],attrs.bx=toFloat(seg[seglen-4])||attrs.x,attrs.by=toFloat(seg[seglen-3])||attrs.y,attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x),attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y),attrs2.x=p2&&seg2[seg2len-2],attrs2.y=p2&&seg2[seg2len-1]}return p2||(pth.curve=pathClone(p)),p2?[p,p2]:p},null,pathClone),tear=(R._parseDots=cacher(function(gradient){for(var dots=[],i=0,ii=gradient.length;i<ii;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);if(dot.color=R.getRGB(par[1]),dot.color.error
)return null;dot.color=dot.color.hex,par[2]&&(dot.offset=par[2]+"%"),dots.push(dot)}for(i=1,ii=dots.length-1;i<ii;i++)if(!dots[i].offset){for(var start=toFloat(dots[i-1].offset||0),end=0,j=i+1;j<ii;j++)if(dots[j].offset){end=dots[j].offset;break}end||(end=100,j=ii);for(var d=((end=toFloat(end))-start)/(j-i+1);i<j;i++)start+=d,dots[i].offset=start+"%"}return dots}),R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev),el==paper.bottom&&(paper.bottom=el.next),el.next&&(el.next.prev=el.prev),el.prev&&(el.prev.next=el.next)}),toMatrix=(R._tofront=function(el,paper){paper.top!==el&&(tear(el,paper),el.next=null,el.prev=paper.top,paper.top.next=el,
paper.top=el)},R._toback=function(el,paper){paper.bottom!==el&&(tear(el,paper),el.next=paper.bottom,el.prev=null,paper.bottom.prev=el,paper.bottom=el)},R._insertafter=function(el,el2,paper){tear(el,paper),el2==paper.top&&(paper.top=el),el2.next&&(el2.next.prev=el),el.next=el2.next,(el.prev=el2).next=el},R._insertbefore=function(el,el2,paper){tear(el,paper),el2==paper.bottom&&(paper.bottom=el),el2.prev&&(el2.prev.next=el),el.prev=el2.prev,(el2.prev=el).next=el2},R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb}};return extractTransform(el,transform),el.matrix}),extractTransform=(
R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform))},R._extractTransform=function(el,tstr){if(null==tstr)return el._.transform;tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var dx,dy,tdata=R.parseTransformString(tstr),deg=0,sx=1,sy=1,_=el._,m=new Matrix;if(_.transform=tdata||[],tdata)for(var i=0,ii=tdata.length;i<ii;i++){var x1,y1,x2,y2,bb,t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0;"t"==command&&3==tlen?absolute?(x1=inver.x(0,0),y1=inver.y(0,0),x2=inver.x(t[1],t[2]),y2=inver.y(t[1],t[2]),m.translate(x2-x1,y2-y1)):m.translate(t[1],t[2]
):"r"==command?2==tlen?(bb=bb||el.getBBox(1),m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2),deg+=t[1]):4==tlen&&(absolute?(x2=inver.x(t[2],t[3]),y2=inver.y(t[2],t[3]),m.rotate(t[1],x2,y2)):m.rotate(t[1],t[2],t[3]),deg+=t[1]):"s"==command?2==tlen||3==tlen?(bb=bb||el.getBBox(1),m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2),sx*=t[1],sy*=t[tlen-1]):5==tlen&&(absolute?(x2=inver.x(t[3],t[4]),y2=inver.y(t[3],t[4]),m.scale(t[1],t[2],x2,y2)):m.scale(t[1],t[2],t[3],t[4]),sx*=t[1],sy*=t[2]):"m"==command&&7==tlen&&m.add(t[1],t[2],t[3],t[4],t[5],t[6]),_.dirtyT=1,el.matrix=m}el.matrix=m,_.sx=sx,_.sy=sy,_.deg=deg,_.dx=dx=m.e,_.dy=dy=m.f,
1==sx&&1==sy&&!deg&&_.bbox?(_.bbox.x+=+dx,_.bbox.y+=+dy):_.dirtyT=1}),getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":return 4==item.length?[l,0,item[2],item[3]]:[l,0];case"s":return 5==item.length?[l,1,1,item[3],item[4]]:3==item.length?[l,1,1]:[l,1]}},equaliseTransform=R._equaliseTransform=function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1),t1=R.parseTransformString(t1)||[],t2=R.parseTransformString(t2)||[];for(var j,jj,tt1,tt2,maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0;i<maxlength;i++){if(tt1=t1[i]||getEmpty(t2[i]),tt2=t2[i]||getEmpty(tt1),
tt1[0]!=tt2[0]||"r"==tt1[0].toLowerCase()&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3])||"s"==tt1[0].toLowerCase()&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))return;for(from[i]=[],to[i]=[],j=0,jj=mmax(tt1.length,tt2.length);j<jj;j++)j in tt1&&(from[i][j]=tt1[j]),j in tt2&&(to[i][j]=tt2[j])}return{from:from,to:to}};function Matrix(a,b,c,d,e,f){this.f=null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0)}R._getContainer=function(x,y,w,h){var container;if(null!=(container=null!=h||R.is(x,"object")?x:g.doc.getElementById(x)))return container.tagName?null==y?{container:container,
width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight}:{container:container,width:y,height:w}:{container:1,x:x,y:y,width:w,height:h}},R.pathToRelative=pathToRelative,R._engine={},R.path2curve=path2curve,R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f)},function(matrixproto){function norm(a){return a[0]*a[0]+a[1]*a[1]}function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag),a[1]&&(a[1]/=mag)}matrixproto.add=function(a,b,c,d,e,f){var x,y,z,res,out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof Matrix&&(
matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),x=0;x<3;x++)for(y=0;y<3;y++){for(z=res=0;z<3;z++)res+=m[x][z]*matrix[z][y];out[x][y]=res}this.a=out[0][0],this.b=out[1][0],this.c=out[0][1],this.d=out[1][1],this.e=out[0][2],this.f=out[1][2]},matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x)},matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},matrixproto.translate=function(x,y){this.add(1,0,0,1,x,y)},matrixproto.scale=function(x,y,cx,cy){null==y&&(y=x),(cx||cy)&&this.add(1,0,0,1,cx,cy),this.add(x,0,0,y,0,0),(cx||cy
)&&this.add(1,0,0,1,-cx,-cy)},matrixproto.rotate=function(a,x,y){a=R.rad(a),x=x||0,y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y),this.add(1,0,0,1,-x,-y)},matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e},matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f},matrixproto.get=function(i){return+this[Str.fromCharCode(97+i)].toFixed(4)},matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},matrixproto.toFilter=function(){
return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},matrixproto.split=function(){var out={};out.dx=this.e,out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0])),normalize(row[0]),out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1],row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear],out.scaley=math.sqrt(norm(row[1])),normalize(row[1]),out.shear/=out.scaley;var sin=-row[0][1],cos=row[1][1]
;return cos<0?(out.rotate=R.deg(math.acos(cos)),sin<0&&(out.rotate=360-out.rotate)):out.rotate=R.deg(math.asin(sin)),out.isSimple=!(+out.shear.toFixed(9)||out.scalex.toFixed(9)!=out.scaley.toFixed(9)&&out.rotate),out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate,out.noRotation=!+out.shear.toFixed(9)&&!out.rotate,out},matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();return s.isSimple?(s.scalex=+s.scalex.toFixed(4),s.scaley=+s.scaley.toFixed(4),s.rotate=+s.rotate.toFixed(4),(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+(1!=s.scalex||1!=s.scaley?"s"+[s.scalex,s.scaley,0,0]:E)+(s.rotate?"r"+[s.rotate
,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(version&&version[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&version&&version[1]<8?paperproto.safari=function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove()})}:paperproto.safari=function(){};for(var preventDefault=function(){this.returnValue=!1},preventTouch=function(){
return this.originalEvent.preventDefault()},stopPropagation=function(){this.cancelBubble=!0},stopTouch=function(){return this.originalEvent.stopPropagation()},getEventPosition=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;return{x:e.clientX+scrollX,y:e.clientY+scrollY}},addEvent=g.doc.addEventListener?function(obj,type,fn,element){var f=function(e){var pos=getEventPosition(e);return fn.call(element,e,pos.x,pos.y)};return obj.addEventListener(type,f,!1),supportsTouch&&touchMap[type]&&obj.addEventListener(touchMap[type],function(e){for(var pos=getEventPosition(e),
olde=e,i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++)if(e.targetTouches[i].target==obj){(e=e.targetTouches[i]).originalEvent=olde,e.preventDefault=preventTouch,e.stopPropagation=stopTouch;break}return fn.call(element,e,pos.x,pos.y)},!1),function(){return obj.removeEventListener(type,f,!1),supportsTouch&&touchMap[type]&&obj.removeEventListener(touchMap[type],f,!1),!0}}:g.doc.attachEvent?function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY
;return e.preventDefault=e.preventDefault||preventDefault,e.stopPropagation=e.stopPropagation||stopPropagation,fn.call(element,e,x,y)};return obj.attachEvent("on"+type,f),function(){return obj.detachEvent("on"+type,f),!0}}:void 0,drag=[],dragMove=function(e){for(var dragi,x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,j=drag.length;j--;){if(dragi=drag[j],supportsTouch&&e.touches){for(var touch,i=e.touches.length;i--;)if((touch=e.touches[i]).identifier==dragi.el._drag.id){x=touch.clientX,y=touch.clientY,(e.originalEvent?e.originalEvent:e).preventDefault()
;break}}else e.preventDefault();var o,node=dragi.el.node,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node),node.style.display="none",o=dragi.el.paper.getElementByPoint(x,y),node.style.display=display,g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node)),o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o),x+=scrollX,y+=scrollY,eve("raphael.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e)}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);for(var dragi,i=drag.length;i--;)(dragi=drag[i]).el._drag={},eve(
"raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e);drag=[]},elproto=R.el={},i=events.length;i--;)!function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){return R.is(fn,"function")&&(this.events=this.events||[],this.events.push({name:eventName,f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)})),this},R["un"+eventName]=elproto["un"+eventName]=function(fn){for(var events=this.events||[],l=events.length;l--;)events[l].name!=eventName||!R.is(fn,"undefined")&&events[l].f!=fn||(events[l].unbind(),events.splice(l,1),!events.length&&delete this.events);return this}}(events[i])
;elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(0==arguments.length)return data;if(1!=arguments.length)return data[key]=value,eve("raphael.data.set."+this.id,this,value,key),this;if(R.is(key,"object")){for(var i in key)key[has](i)&&this.data(i,key[i]);return this}return eve("raphael.data.get."+this.id,this,data[key],key),data[key]},elproto.removeData=function(key){return null==key?eldata[this.id]={}:eldata[this.id]&&delete eldata[this.id][key],this},elproto.getData=function(){return clone(eldata[this.id]||{})},elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,
scope_out||scope_in)},elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out)};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;if(this._drag.id=e.identifier,supportsTouch&&e.touches)for(var touch,i=e.touches.length;i--;)if(touch=e.touches[i],this._drag.id=touch.identifier,touch.identifier==this._drag.id){x=touch.clientX,y=touch.clientY;break}this._drag.x=x+scrollX,
this._drag.y=y+scrollY,!drag.length&&R.mousemove(dragMove).mouseup(dragUp),drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope}),onstart&&eve.on("raphael.drag.start."+this.id,onstart),onmove&&eve.on("raphael.drag.move."+this.id,onmove),onend&&eve.on("raphael.drag.end."+this.id,onend),eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e)}return this._drag={},draggable.push({el:this,start:start}),this.mousedown(start),this},elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id)},elproto.undrag=function(){for(
var i=draggable.length;i--;)draggable[i].el==this&&(this.unmousedown(draggable[i].start),draggable.splice(i,1),eve.unbind("raphael.drag.*."+this.id));!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp),drag=[]},paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);return this.__set__&&this.__set__.push(out),out},paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);return this.__set__&&this.__set__.push(out),out},paperproto.ellipse=function(x,y,rx,ry){var out=R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);return this.__set__&&this.__set__.push(out),out},paperproto.path=function(pathString
){pathString&&!R.is(pathString,"string")&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);return this.__set__&&this.__set__.push(out),out},paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);return this.__set__&&this.__set__.push(out),out},paperproto.text=function(x,y,text){var out=R._engine.text(this,x||0,y||0,Str(text));return this.__set__&&this.__set__.push(out),out},paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray)
;return this.__set__&&this.__set__.push(out),out.paper=this,out.type="set",out},paperproto.setStart=function(set){this.__set__=set||this.set()},paperproto.setFinish=function(set){var out=this.__set__;return delete this.__set__,out},paperproto.setSize=function(width,height){return R._engine.setSize.call(this,width,height)},paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit)},paperproto.top=paperproto.bottom=null,paperproto.raphael=R;function x_y_w_h(){return this.x+S+this.y+S+this.width+"  "+this.height}paperproto.getElementByPoint=function(x,y){var elem,box,doc,body,docElem,clientTop,clientLeft,svg=this.canvas,
target=g.doc.elementFromPoint(x,y);if(g.win.opera&&"svg"==target.tagName){var so=(box=(elem=svg).getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,{y:box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,x:box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft}),sr=svg.createSVGRect();sr.x=x-so.x,sr.y=y-so.y,sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);hits.length&&(target=hits[hits.length-1])}if(!target)return null;for(
;target.parentNode&&target!=svg.parentNode&&!target.raphael;)target=target.parentNode;return target==this.canvas.parentNode&&(target=svg),target=target&&target.raphael?this.getById(target.raphaelid):null},paperproto.getElementsByBBox=function(bbox){var set=this.set();return this.forEach(function(el){R.isBBoxIntersect(el.getBBox(),bbox)&&set.push(el)}),set},paperproto.getById=function(id){for(var bot=this.bottom;bot;){if(bot.id==id)return bot;bot=bot.next}return null},paperproto.forEach=function(callback,thisArg){for(var bot=this.bottom;bot;){if(!1===callback.call(thisArg,bot))return this;bot=bot.next}return this},paperproto.getElementsByPoint=function(x,y){
var set=this.set();return this.forEach(function(el){el.isPointInside(x,y)&&set.push(el)}),set},elproto.isPointInside=function(x,y){var rp=this.realPath=getPath[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(rp=R.transformPath(rp,this.attr("transform"))),R.isPointInsidePath(rp,x,y)},elproto.getBBox=function(isWithoutTransform){if(this.removed)return{};var _=this._;return isWithoutTransform?(!_.dirty&&_.bboxwt||(this.realPath=getPath[this.type](this),_.bboxwt=pathDimensions(this.realPath),_.bboxwt.toString=x_y_w_h,_.dirty=0),_.bboxwt):((_.dirty||_.dirtyT||!_.bbox)&&(!_.dirty&&this.realPath||(_.bboxwt=0,
this.realPath=getPath[this.type](this)),_.bbox=pathDimensions(mapPath(this.realPath,this.matrix)),_.bbox.toString=x_y_w_h,_.dirty=_.dirtyT=0),_.bbox)},elproto.clone=function(){if(this.removed)return null;var out=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(out),out},elproto.glow=function(glow){if("text"==this.type)return null;var s={width:((glow=glow||{}).width||10)+(+this.attr("stroke-width")||1),fill:glow.fill||!1,opacity:glow.opacity||.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);path=this.matrix?mapPath(path
,this.matrix):path;for(var i=1;i<c+1;i++)out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}));return out.insertBefore(this).translate(s.offsetx,s.offsety)};var getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){return null==length?bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y):R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,function(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(!(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll)){var l,step=.5,t2=1-step;for(l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);.01<abs(l-ll);)l=bezlen(
x1,y1,x2,y2,x3,y3,x4,y4,t2+=(l<ll?1:-1)*(step/=2));return t2}}(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){for(var x,y,p,l,point,sp="",subpaths={},len=0,i=0,ii=(path=path2curve(path)).length;i<ii;i++){if("M"==(p=path[i])[0])x=+p[1],y=+p[2];else{if(length<len+(l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]))){if(subpath&&!subpaths.start){if(sp+=["C"+(point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len)).start.x,point.start.y,point.m.x,point.m.y,point.x,point.y],onlystart)return sp;subpaths.start=sp,sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y
,point.end.x,point.end.y,p[5],p[6]].join(),len+=l,x=+p[5],y=+p[6];continue}if(!istotal&&!subpath)return{x:(point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len)).x,y:point.y,alpha:point.alpha}}len+=l,x=+p[5],y=+p[6]}sp+=p.shift()+p}return subpaths.end=sp,(point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1)).alpha&&(point={x:point.x,y:point.y,alpha:point.alpha}),point}},getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength,R.getPointAtLength=getPointAtLength,R.getSubpath=function(path,from,to){if(
this.getTotalLength(path)-to<1e-6)return getSubpathsAtLength(path,from).end;var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a},elproto.getTotalLength=function(){var path=this.getPath();if(path)return this.node.getTotalLength?this.node.getTotalLength():getTotalLength(path)},elproto.getPointAtLength=function(length){var path=this.getPath();if(path)return getPointAtLength(path,length)},elproto.getPath=function(){var path,getPath=R._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return getPath&&(path=getPath(this)),path},elproto.getSubpath=function(from,to){var path=this.getPath();if(path)return R.getSubpath(path,from,
to)};var ef=R.easing_formulas={linear:function(n){return n},"<":function(n){return pow(n,1.7)},">":function(n){return pow(n,.48)},"<>":function(n){var q=.48-n/1.04,Q=math.sqrt(.1734+q*q),x=Q-q,y=-Q-q,t=pow(abs(x),1/3)*(x<0?-1:1)+pow(abs(y),1/3)*(y<0?-1:1)+.5;return 3*(1-t)*t*t+t*t*t},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s)},backOut:function(n){var s=1.70158;return(n-=1)*n*((s+1)*n+s)+1},elastic:function(n){return n==!!n?n:pow(2,-10*n)*math.sin(2*PI*(n-.075)/.3)+1},bounce:function(n){var s=7.5625,p=2.75;return n<1/p?s*n*n:n<2/p?s*(n-=1.5/p)*n+.75:n<2.5/p?s*(n-=2.25/p)*n+.9375:s*(n-=2.625/p)*n+.984375}};ef.easeIn=ef["ease-in"]=ef["<"],
ef.easeOut=ef["ease-out"]=ef[">"],ef.easeInOut=ef["ease-in-out"]=ef["<>"],ef["back-in"]=ef.backIn,ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16)},animation=function(){for(var Now=+new Date,l=0;l<animationElements.length;l++){var e=animationElements[l];if(!e.el.removed&&!e.paused){var now,key,time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,that=(e.t,e.el),set={},init={};if(e.initstatus?(time=(
e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*ms,e.status=e.initstatus,delete e.initstatus,e.stop&&animationElements.splice(l--,1)):e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top,!(time<0))if(time<ms){var pos=easing(time/ms);for(var attr in from)if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case"colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+")";break;case"path":now=[];for(var i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(var j=1,
jj=from[attr][i].length;j<jj;j++)now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j];now[i]=now[i].join(S)}now=now.join(S);break;case"transform":if(diff[attr].real)for(now=[],i=0,ii=from[attr].length;i<ii;i++)for(now[i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;j<jj;j++)now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j];else{var get=function(i){return+from[attr][i]+pos*ms*diff[attr][i]};now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]]}break;case"csv":if("clip-rect"==attr)for(now=[],i=4;i--;)now[i]=+from[attr][i]+pos*ms*diff[attr][i];break;default:var from2=[][concat](from[attr]);for(now=[],i=that.paper.customAttributes[attr].length;i--;
)now[i]=+from2[i]+pos*ms*diff[attr][i]}set[attr]=now}that.attr(set),function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim)})}(that.id,that,e.anim)}else{if(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+el.id,el,a),eve("raphael.anim.finish."+el.id,el,a),R.is(f,"function")&&f.call(el)})}(e.callback,that,e.anim),that.attr(to),animationElements.splice(l--,1),1<e.repeat&&!e.next){for(key in to)to[has](key)&&(init[key]=e.totalOrigin[key]);e.el.attr(init),runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}
R.svg&&that&&that.paper&&that.paper.safari(),animationElements.length&&requestAnimFrame(animation)},upto255=function(color){return 255<color?255:color<0?0:color};function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}return function(x,epsilon){var t=function(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){if(x2=sampleCurveX(t2)-x,abs(x2)<epsilon)return t2;if(abs(d2=(3*ax*t2+2*bx)*t2+cx)<1e-6)break;t2-=x2/d2}if(t1=1,(t2=x)<(t0=0))return t0;if(t1<t2)return t1;for(;t0<t1;){if(x2=sampleCurveX(t2),abs(x2-x)<epsilon)return t2
;x2<x?t0=t2:t1=t2,t2=(t1-t0)/2+t0}return t2}(x,epsilon);return((ay*t+by)*t+cy)*t}(t,1/(200*duration))}function Animation(anim,ms){var percents=[],newAnim={};if(this.ms=ms,this.times=1,anim){for(var attr in anim)anim[has](attr)&&(newAnim[toFloat(attr)]=anim[attr],percents.push(toFloat(attr)));percents.sort(sortByNumber)}this.anim=newAnim,this.top=percents[percents.length-1],this.percents=percents}function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);var params,isInAnim,isInAnimSet,next,prev,timestamp,ms=anim.ms,from={},to={},diff={};if(status)for(i=0,ii=animationElements.length;i<ii;i++){var e=animationElements[i];if(
e.el.id==element.id&&e.anim==anim){e.percent!=percent?(animationElements.splice(i,1),isInAnimSet=1):isInAnim=e,element.attr(e.totalOrigin);break}}else status=+to;for(var i=0,ii=anim.percents.length;i<ii;i++){if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i],prev=anim.percents[i-1]||0,ms=ms/anim.top*(percent-prev),next=anim.percents[i+1],params=anim.anim[percent];break}status&&element.attr(anim.anim[anim.percents[i]])}if(params){if(isInAnim)isInAnim.initstatus=status,isInAnim.start=new Date-isInAnim.ms*status;else{for(var attr in params)if(params[has](attr)&&(availableAnimAttrs[has](attr
)||element.paper.customAttributes[has](attr)))switch(from[attr]=element.attr(attr),null==from[attr]&&(from[attr]=availableAttrs[attr]),to[attr]=params[attr],availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case"colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case"path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];for(from[attr]=pathes[0],diff[attr]=[],i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;j<jj;j++)diff[attr][i][j]=(
toPath[i][j]-from[attr][i][j])/ms}break;case"transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq)for(from[attr]=eq.from,to[attr]=eq.to,diff[attr]=[],diff[attr].real=!0,i=0,ii=from[attr].length;i<ii;i++)for(diff[attr][i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;j<jj;j++)diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms;else{var m=element.matrix||new Matrix,to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1)}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f],extractTransform(to2,to[attr]),to[attr]=to2._.transform,diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(
to2.matrix.e-m.e)/ms,(to2.matrix.f-m.f)/ms]}break;case"csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if("clip-rect"==attr)for(from[attr]=from2,diff[attr]=[],i=from2.length;i--;)diff[attr][i]=(values[i]-from[attr][i])/ms;to[attr]=values;break;default:for(values=[][concat](params[attr]),from2=[][concat](from[attr]),diff[attr]=[],i=element.paper.customAttributes[attr].length;i--;)diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms}var easing=params.easing,easyeasy=R.easing_formulas[easing];if(!easyeasy)if((easyeasy=Str(easing).match(bezierrg))&&5==easyeasy.length){var curve=easyeasy;easyeasy=function(t){
return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms)}}else easyeasy=pipe;if(e={anim:anim,percent:percent,timestamp:timestamp=params.start||anim.start||+new Date,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:!1,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,origin:element.attr(),totalOrigin:totalOrigin},animationElements.push(e),status&&!isInAnim&&!isInAnimSet&&(e.stop=!0,e.start=new Date-ms*status,1==animationElements.length))return animation();isInAnimSet&&(e.start=new Date-e.ms*status),1==animationElements.length&&requestAnimFrame(
animation)}eve("raphael.anim.start."+element.id,element,anim)}}function stopAnimation(paper){for(var i=0;i<animationElements.length;i++)animationElements[i].el.paper==paper&&animationElements.splice(i--,1)}elproto.animateWith=function(el,anim,params,ms,easing,callback){if(this.removed)return callback&&callback.call(this),this;var a=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(a,this,a.percents[0],null,this.attr());for(var i=0,ii=animationElements.length;i<ii;i++)if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;break}return this},
elproto.onAnimation=function(f){return f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id),this},Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);return a.times=this.times,a.del=+delay||0,a},Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);return a.del=this.del,a.times=math.floor(mmax(times,0))||1,a},R.animation=function(params,ms,easing,callback){if(params instanceof Animation)return params;!R.is(easing,"function")&&easing||(callback=callback||easing||null,easing=null),params=Object(params),ms=+ms||0;var json,attr,p={};for(attr in params)params[has](attr
)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr&&(json=!0,p[attr]=params[attr]);return json?(easing&&(p.easing=easing),callback&&(p.callback=callback),new Animation({100:p},ms)):new Animation(params,ms)},elproto.animate=function(params,ms,easing,callback){if(this.removed)return callback&&callback.call(this),this;var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);return runAnimation(anim,this,anim.percents[0],null,this.attr()),this},elproto.setTime=function(anim,value){return anim&&null!=value&&this.status(anim,mmin(value,anim.ms)/anim.ms),this},elproto.status=function(anim,value){var len,e,out=[],i=0;if(null!=value
)return runAnimation(anim,this,-1,mmin(value,1)),this;for(len=animationElements.length;i<len;i++)if((e=animationElements[i]).el.id==this.id&&(!anim||e.anim==anim)){if(anim)return e.status;out.push({anim:e.anim,status:e.status})}return anim?0:out},elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||!1!==eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)&&(animationElements[i].paused=!0);return this},elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)
){var e=animationElements[i];!1!==eve("raphael.anim.resume."+this.id,this,e.anim)&&(delete e.paused,this.status(e.anim,e.status))}return this},elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||!1!==eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)&&animationElements.splice(i--,1);return this},eve.on("raphael.remove",stopAnimation),eve.on("raphael.clear",stopAnimation),elproto.toString=function(){return"Raphals object"};var tokenRegex,objNotationRegex,doc,f,Set=function(items){if(this.items=[],this.length=0,this.type="set",items)for(var i=0,
ii=items.length;i<ii;i++)!items[i]||items[i].constructor!=elproto.constructor&&items[i].constructor!=Set||(this[this.items.length]=this.items[this.items.length]=items[i],this.length++)},setproto=Set.prototype;for(var method in setproto.push=function(){for(var item,len,i=0,ii=arguments.length;i<ii;i++)!(item=arguments[i])||item.constructor!=elproto.constructor&&item.constructor!=Set||(this[len=this.items.length]=this.items[len]=item,this.length++);return this},setproto.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++)if(!1===callback.call(
thisArg,this.items[i],i))return this;return this},elproto)elproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg)})}}(method));return setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object"))for(var j=0,jj=name.length;j<jj;j++)this.items[j].attr(name[j]);else for(var i=0,ii=this.items.length;i<ii;i++)this.items[i].attr(name,value);return this},setproto.clear=function(){for(;this.length;)this.pop()},setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index,count=mmax(0,mmin(this.length-index,
count));var i,tail=[],todel=[],args=[];for(i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;i<count;i++)todel.push(this[index+i]);for(;i<this.length-index;i++)tail.push(this[index+i]);var arglen=args.length;for(i=0;i<arglen+tail.length;i++)this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen];for(i=this.items.length=this.length-=count-arglen;this[i];)delete this[i++];return new Set(todel)},setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++)if(this[i]==el)return this.splice(i,1),!0},setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var item,collector,
len=this.items.length,i=len,set=this;if(!len)return this;callback&&(collector=function(){!--len&&callback.call(set)}),easing=R.is(easing,"string")?easing:collector;var anim=R.animation(params,ms,easing,collector);for(item=this.items[--i].animate(anim);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim),this.items[i]&&!this.items[i].removed||len--;return this},setproto.insertAfter=function(el){for(var i=this.items.length;i--;)this.items[i].insertAfter(el);return this},setproto.getBBox=function(){for(var x=[],y=[],x2=[],y2=[],i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x),
y.push(box.y),x2.push(box.x+box.width),y2.push(box.y+box.height)}return{x:x=mmin[apply](0,x),y:y=mmin[apply](0,y),x2:x2=mmax[apply](0,x2),y2:y2=mmax[apply](0,y2),width:x2-x,height:y2-y}},setproto.clone=function(s){s=this.paper.set();for(var i=0,ii=this.items.length;i<ii;i++)s.push(this.items[i].clone());return s},setproto.toString=function(){return"Raphals set"},setproto.glow=function(glowConfig){var ret=this.paper.set();return this.forEach(function(shape,index){var g=shape.glow(glowConfig);null!=g&&g.forEach(function(shape2,index2){ret.push(shape2)})}),ret},setproto.isPointInside=function(x,y){var isPointInside=!1;return this.forEach(function(el){if(
el.isPointInside(x,y))return!(isPointInside=!0)}),isPointInside},R.registerFont=function(font){if(!font.face)return font;this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face)font.face[has](prop)&&(fontcopy.face[prop]=font.face[prop]);if(this.fonts[family]?this.fonts[family].push(fontcopy):this.fonts[family]=[fontcopy],!font.svg)for(var glyph in fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10),font.glyphs)if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];if(fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{
l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M"})+"z"},path.k)for(var k in path.k)path[has](k)&&(fontcopy.glyphs[glyph].k[k]=path.k[k])}return font},paperproto.getFont=function(family,weight,style,stretch){if(stretch=stretch||"normal",style=style||"normal",weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400,R.fonts){var thefont,font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts)if(R.fonts[has](fontName)&&name.test(fontName)){font=R.fonts[fontName];break}}if(font)for(var i=0,ii=font.length;i<ii&&((thefont=font[i]
).face["font-weight"]!=weight||thefont.face["font-style"]!=style&&thefont.face["font-style"]||thefont.face["font-stretch"]!=stretch);i++);return thefont}},paperproto.print=function(x,y,string,font,size,origin,letter_spacing,line_spacing){origin=origin||"middle",letter_spacing=mmax(mmin(letter_spacing||0,1),-1),line_spacing=mmax(mmin(line_spacing||1,3),1);var scale,letters=Str(string)[split](E),shift=0,notfirst=0,path=E;if(R.is(font,"string")&&(font=this.getFont(font)),font){scale=(size||16)/font.face["units-per-em"];for(var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+(
"baseline"==origin?lineHeight+ +font.face.descent:lineHeight/2),i=0,ii=letters.length;i<ii;i++){if("\n"==letters[i])notfirst=curr=shift=0,shifty+=lineHeight*line_spacing;else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+font.w*letter_spacing:0,notfirst=1}curr&&curr.d&&(path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale]))}}return this.path(path).attr({fill:"#000",stroke:"none"})},paperproto.add=function(json){if(R.is(json,"array"))for(var j,res=this.set(),i=0,ii=json.length;i<ii;i++
)j=json[i]||{},elements[has](j.type)&&res.push(this[j.type]().attr(j));return res},R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;return token&&R.is(token,"string")&&args.length-1&&(token=token.replace(formatrg,function(str,i){return null==args[++i]?E:args[i]})),token||E},R.fullfill=(tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(str,obj){return String(str).replace(tokenRegex,function(all,key){return function(all,key,obj){var res=obj;return key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName,res&&(
name in res&&(res=res[name]),"function"==typeof res&&isFunc&&(res=res()))}),res=(null==res||res==obj?all:res)+""}(all,key,obj)})}),R.ninja=function(){return oldRaphael.was?g.win.Raphael=oldRaphael.is:delete Raphael,R},R.st=setproto,null==(doc=document).readyState&&doc.addEventListener&&(doc.addEventListener("DOMContentLoaded",f=function(){doc.removeEventListener("DOMContentLoaded",f,!1),doc.readyState="complete"},!1),doc.readyState="loading"),function isLoaded(){/in/.test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload")}(),eve.on("raphael.DOMload",function(){loaded=!0}),function(){if(R.svg){var has="hasOwnProperty",Str=String,
toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,abs=math.abs,pow=math.pow,separator=/[, ]+/,eve=R.eve,E="",S=" ",xlink="http://www.w3.org/1999/xlink",markers={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},markerCounter={};R.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var $=function(el,attr){if(attr)for(var key in"string"==typeof el&&(el=$(el)),attr)attr[has](key)&&("xlink:"==key.substring(0,6)?el.setAttributeNS(xlink,key.substring(6),Str(attr[key])):el.setAttribute(key,
Str(attr[key])));else(el=R._g.doc.createElementNS("http://www.w3.org/2000/svg",el)).style&&(el.style.webkitTapHighlightColor="rgba(0,0,0,0)");return el},addGradientFill=function(element,gradient){var type="linear",id=element.id+gradient,fx=.5,fy=.5,o=element.node,SVG=element.paper,s=o.style,el=R._g.doc.getElementById(id);if(!el){if(gradient=(gradient=Str(gradient).replace(R._radial_gradient,function(all,_fx,_fy){if(type="radial",_fx&&_fy){fx=toFloat(_fx);var dir=2*(.5<(fy=toFloat(_fy)))-1;.25<pow(fx-.5,2)+pow(fy-.5,2)&&(fy=math.sqrt(.25-pow(fx-.5,2))*dir+.5)&&.5!=fy&&(fy=fy.toFixed(5)-1e-5*dir)}return E})).split(/\s*\-\s*/),"linear"==type){
var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null;var vector=[0,0,math.cos(R.rad(angle)),math.sin(R.rad(angle))],max=1/(mmax(abs(vector[2]),abs(vector[3]))||1);vector[2]*=max,vector[3]*=max,vector[2]<0&&(vector[0]=-vector[2],vector[2]=0),vector[3]<0&&(vector[1]=-vector[3],vector[3]=0)}var dots=R._parseDots(gradient);if(!dots)return null;if(id=id.replace(/[\(\)\s,\xb0#]/g,"_"),element.gradient&&id!=element.gradient.id&&(SVG.defs.removeChild(element.gradient),delete element.gradient),!element.gradient){el=$(type+"Gradient",{id:id}),element.gradient=el,$(el,"radial"==type?{fx:fx,fy:fy}:{x1:vector[0],y1:vector[1],x2:vector[2],
y2:vector[3],gradientTransform:element.matrix.invert()}),SVG.defs.appendChild(el);for(var i=0,ii=dots.length;i<ii;i++)el.appendChild($("stop",{offset:dots[i].offset?dots[i].offset:i?"100%":"0%","stop-color":dots[i].color||"#fff"}))}}return $(o,{fill:"url(#"+id+")",opacity:1,"fill-opacity":1}),s.fill=E,s.opacity=1,s.fillOpacity=1},updatePosition=function(o){var bbox=o.getBBox(1);$(o.pattern,{patternTransform:o.matrix.invert()+" translate("+bbox.x+","+bbox.y+")"})},addArrow=function(o,value,isEnd){if("path"==o.type){for(var from,to,dx,refX,attr,values=Str(value).toLowerCase().split("-"),p=o.paper,se=isEnd?"end":"start",node=o.node,attrs=o.attrs,
stroke=attrs["stroke-width"],i=values.length,type="classic",w=3,h=3,t=5;i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":h=5;break;case"narrow":h=2;break;case"long":w=5;break;case"short":w=2}if(attr="open"==type?(w+=2,h+=2,t+=2,dx=1,refX=isEnd?4:1,{fill:"none",stroke:attrs.stroke}):(refX=dx=w/2,{fill:attrs.stroke,stroke:"none"}),o._.arrows?isEnd?(o._.arrows.endPath&&markerCounter[o._.arrows.endPath]--,o._.arrows.endMarker&&markerCounter[o._.arrows.endMarker]--):(o._.arrows.startPath&&markerCounter[o._.arrows.startPath]--,
o._.arrows.startMarker&&markerCounter[o._.arrows.startMarker]--):o._.arrows={},"none"!=type){var pathId="raphael-marker-"+type,markerId="raphael-marker-"+se+type+w+h;R._g.doc.getElementById(pathId)?markerCounter[pathId]++:(p.defs.appendChild($($("path"),{"stroke-linecap":"round",d:markers[type],id:pathId})),markerCounter[pathId]=1);var use,marker=R._g.doc.getElementById(markerId);marker?(markerCounter[markerId]++,use=marker.getElementsByTagName("use")[0]):(marker=$($("marker"),{id:markerId,markerHeight:h,markerWidth:w,orient:"auto",refX:refX,refY:h/2}),use=$($("use"),{"xlink:href":"#"+pathId,transform:(isEnd?"rotate(180 "+w/2+" "+h/2+") ":E
)+"scale("+w/t+","+h/t+")","stroke-width":(1/((w/t+h/t)/2)).toFixed(4)}),marker.appendChild(use),p.defs.appendChild(marker),markerCounter[markerId]=1),$(use,attr);var delta=dx*("diamond"!=type&&"oval"!=type);to=isEnd?(from=o._.arrows.startdx*stroke||0,R.getTotalLength(attrs.path)-delta*stroke):(from=delta*stroke,R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),(attr={})["marker-"+se]="url(#"+markerId+")",(to||from)&&(attr.d=R.getSubpath(attrs.path,from,to)),$(node,attr),o._.arrows[se+"Path"]=pathId,o._.arrows[se+"Marker"]=markerId,o._.arrows[se+"dx"]=delta,o._.arrows[se+"Type"]=type,o._.arrows[se+"String"]=value}else to=isEnd?(
from=o._.arrows.startdx*stroke||0,R.getTotalLength(attrs.path)-from):(from=0,R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),o._.arrows[se+"Path"]&&$(node,{d:R.getSubpath(attrs.path,from,to)}),delete o._.arrows[se+"Path"],delete o._.arrows[se+"Marker"],delete o._.arrows[se+"dx"],delete o._.arrows[se+"Type"],delete o._.arrows[se+"String"];for(attr in markerCounter)if(markerCounter[has](attr)&&!markerCounter[attr]){var item=R._g.doc.getElementById(attr);item&&item.parentNode.removeChild(item)}}},dasharray={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8
,3,1,3,1,3]},addDashes=function(o,value,params){if(value=dasharray[Str(value).toLowerCase()]){for(var width=o.attrs["stroke-width"]||"1",butt={round:width,square:width,butt:0}[o.attrs["stroke-linecap"]||params["stroke-linecap"]]||0,dashes=[],i=value.length;i--;)dashes[i]=value[i]*width+(i%2?1:-1)*butt;$(o.node,{"stroke-dasharray":dashes.join(",")})}},setFillAndStroke=function(o,params){var node=o.node,attrs=o.attrs,vis=node.style.visibility;for(var att in node.style.visibility="hidden",params)if(params[has](att)){if(!R._availableAttrs[has](att))continue;var value=params[att];switch(attrs[att]=value,att){case"blur":o.blur(value);break;case"title":
var title=node.getElementsByTagName("title");if(title.length&&(title=title[0]))title.firstChild.nodeValue=value;else{title=$("title");var val=R._g.doc.createTextNode(value);title.appendChild(val),node.appendChild(title)}break;case"href":case"target":var pn=node.parentNode;if("a"!=pn.tagName.toLowerCase()){var hl=$("a");pn.insertBefore(hl,node),hl.appendChild(node),pn=hl}"target"==att?pn.setAttributeNS(xlink,"show","blank"==value?"new":value):pn.setAttributeNS(xlink,att,value);break;case"cursor":node.style.cursor=value;break;case"transform":o.transform(value);break;case"arrow-start":addArrow(o,value);break;case"arrow-end":addArrow(o,value,1);break
;case"clip-rect":var rect=Str(value).split(separator);if(4==rect.length){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var el=$("clipPath"),rc=$("rect");el.id=R.createUUID(),$(rc,{x:rect[0],y:rect[1],width:rect[2],height:rect[3]}),el.appendChild(rc),o.paper.defs.appendChild(el),$(node,{"clip-path":"url(#"+el.id+")"}),o.clip=rc}if(!value){var path=node.getAttribute("clip-path");if(path){var clip=R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g,E));clip&&clip.parentNode.removeChild(clip),$(node,{"clip-path":E}),delete o.clip}}break;case"path":"path"==o.type&&($(node,{d:value?attrs.path=R._pathToAbsolute(value):"M0,0"}),o._.dirty=1,
o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1)));break;case"width":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fx)break;att="x",value=attrs.x;case"x":attrs.fx&&(value=-attrs.x-(attrs.width||0));case"rx":if("rx"==att&&"rect"==o.type)break;case"cx":node.setAttribute(att,value),o.pattern&&updatePosition(o),o._.dirty=1;break;case"height":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fy)break;att="y",value=attrs.y;case"y":attrs.fy&&(value=-attrs.y-(attrs.height||0));case"ry":if("ry"==att&&"rect"==o.type)break;case"cy":node.setAttribute(att,value),
o.pattern&&updatePosition(o),o._.dirty=1;break;case"r":"rect"==o.type?$(node,{rx:value,ry:value}):node.setAttribute(att,value),o._.dirty=1;break;case"src":"image"==o.type&&node.setAttributeNS(xlink,"href",value);break;case"stroke-width":1==o._.sx&&1==o._.sy||(value/=mmax(abs(o._.sx),abs(o._.sy))||1),o.paper._vbSize&&(value*=o.paper._vbSize),node.setAttribute(att,value),attrs["stroke-dasharray"]&&addDashes(o,attrs["stroke-dasharray"],params),o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));break;case"stroke-dasharray":addDashes(o,value,params);break;case"fill":
var isURL=Str(value).match(R._ISURL);if(isURL){el=$("pattern");var ig=$("image");el.id=R.createUUID(),$(el,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),$(ig,{x:0,y:0,"xlink:href":isURL[1]}),el.appendChild(ig),function(el){R._preload(isURL[1],function(){var w=this.offsetWidth,h=this.offsetHeight;$(el,{width:w,height:h}),$(ig,{width:w,height:h}),o.paper.safari()})}(el),o.paper.defs.appendChild(el),$(node,{fill:"url(#"+el.id+")"}),o.pattern=el,o.pattern&&updatePosition(o);break}var clr=R.getRGB(value);if(clr.error){if(("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value)){if(
"opacity"in attrs||"fill-opacity"in attrs){var gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){var stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":("opacity"in attrs?attrs.opacity:1)*("fill-opacity"in attrs?attrs["fill-opacity"]:1)})}}attrs.gradient=value,attrs.fill="none";break}}else delete params.gradient,delete attrs.gradient,!R.is(attrs.opacity,"undefined")&&R.is(params.opacity,"undefined")&&$(node,{opacity:attrs.opacity}),!R.is(attrs["fill-opacity"],"undefined")&&R.is(params["fill-opacity"],"undefined")&&$(node,{"fill-opacity":attrs["fill-opacity"]});clr[has](
"opacity")&&$(node,{"fill-opacity":1<clr.opacity?clr.opacity/100:clr.opacity});case"stroke":clr=R.getRGB(value),node.setAttribute(att,clr.hex),"stroke"==att&&clr[has]("opacity")&&$(node,{"stroke-opacity":1<clr.opacity?clr.opacity/100:clr.opacity}),"stroke"==att&&o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));break;case"gradient":("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value);break;case"opacity":attrs.gradient&&!attrs[has]("stroke-opacity")&&$(node,{"stroke-opacity":1<value?value/100:value});case"fill-opacity":if(attrs.gradient
){(gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E)))&&(stops=gradient.getElementsByTagName("stop"),$(stops[stops.length-1],{"stop-opacity":value}));break}default:"font-size"==att&&(value=toInt(value,10)+"px");var cssrule=att.replace(/(\-.)/g,function(w){return w.substring(1).toUpperCase()});node.style[cssrule]=value,o._.dirty=1,node.setAttribute(att,value)}}tuneText(o,params),node.style.visibility=vis},tuneText=function(el,params){if("text"==el.type&&(params[has]("text")||params[has]("font")||params[has]("font-size")||params[has]("x")||params[has]("y"))){var a=el.attrs,node=el.node,
computedStyle=node.firstChild?R._g.doc.defaultView.getComputedStyle(node.firstChild,E):void 0,fontSize=computedStyle?toInt(computedStyle.getPropertyValue("font-size"),10):10;if(params[has]("text")){for(a.text=params.text;node.firstChild;)node.removeChild(node.firstChild);for(var tspan,texts=Str(params.text).split("\n"),tspans=[],i=0,ii=texts.length;i<ii;i++)tspan=$("tspan"),i&&$(tspan,{dy:1.2*fontSize,x:a.x}),tspan.appendChild(R._g.doc.createTextNode(texts[i])),node.appendChild(tspan),tspans[i]=tspan}else for(i=0,ii=(tspans=node.getElementsByTagName("tspan")).length;i<ii;i++)i?$(tspans[i],{dy:1.2*fontSize,x:a.x}):$(tspans[0],{dy:0});$(node,{x:a.x,y:a.y}),
el._.dirty=1;var bb=el._getBBox(),dif=a.y-(bb.y+bb.height/2);dif&&R.is(dif,"finite")&&$(tspans[0],{dy:dif})}},Element=function(node,svg){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.matrix=R.matrix(),this.realPath=null,this.paper=svg,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!svg.bottom&&(svg.bottom=this),this.prev=svg.top,svg.top&&(svg.top.next=this),(svg.top=this).next=null},elproto=R.el;(Element.prototype=elproto).constructor=Element,R._engine.path=function(pathString,SVG){var el=$("path");SVG.canvas&&SVG.canvas.appendChild(el);var p=new Element(el,SVG);return p.type="path",
setFillAndStroke(p,{fill:"none",stroke:"#000",path:pathString}),p},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if((deg=Str(deg).split(separator)).length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this.transform(this._.transform.concat([["r",deg,cx,cy]])),this},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if((sx=Str(sx).split(separator)).length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3])),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy
)var bbox=this.getBBox(1);return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this},elproto.translate=function(dx,dy){return this.removed||((dx=Str(dx).split(separator)).length-1&&(dy=toFloat(dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this.transform(this._.transform.concat([["t",dx,dy]]))),this},elproto.transform=function(tstr){var _=this._;if(null==tstr)return _.transform;if(R._extractTransform(this,tstr),this.clip&&$(this.clip,{transform:this.matrix.invert()}),this.pattern&&updatePosition(this),this.node&&$(this.node,{transform:this.matrix}),1!=_.sx||1!=_.sy){
var sw=this.attrs[has]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":sw})}return this},elproto.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},elproto.remove=function(){if(!this.removed&&this.node.parentNode){var paper=this.paper;for(var i in paper.__set__&&paper.__set__.exclude(this),eve.unbind("raphael.*.*."+this.id),this.gradient&&paper.defs.removeChild(this.gradient),R._tear(this,paper),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(
this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;this.removed=!0}},elproto._getBBox=function(){if("none"==this.node.style.display){this.show();var hide=!0}var bbox={};try{bbox=this.node.getBBox()}catch(e){}finally{bbox=bbox||{}}return hide&&this.hide(),bbox},elproto.attr=function(name,value){if(this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if(
"fill"==name&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==name)return this._.transform;for(var names=name.split(separator),out={},i=0,ii=names.length;i<ii;i++)(name=names[i])in this.attrs?out[name]=this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?out[name]=this.paper.customAttributes[name].def:out[name]=R._availableAttrs[name];return ii-1?out:out[names[0]]}if(null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;i<ii;i++)out[name[i]]=this.attr(name[i]);return out}if(null!=value){var params={};params[name]=value}else null!=name&&R.is(name,"object")&&(params=name);for(var key in params
)eve("raphael.attr."+key+"."+this.id,this,params[key]);for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));for(var subkey in this.attrs[key]=params[key],par)par[has](subkey)&&(params[subkey]=par[subkey])}return setFillAndStroke(this,params),this},elproto.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var svg=this.paper
;return svg.top!=this&&R._tofront(this,svg),this},elproto.toBack=function(){if(this.removed)return this;var parent=this.node.parentNode;"a"==parent.tagName.toLowerCase()?parent.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):parent.firstChild!=this.node&&parent.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper);this.paper;return this},elproto.insertAfter=function(element){if(this.removed)return this;var node=element.node||element[element.length-1].node;return node.nextSibling?node.parentNode.insertBefore(this.node,node.nextSibling):node.parentNode.appendChild(this.node),R._insertafter(
this,element,this.paper),this},elproto.insertBefore=function(element){if(this.removed)return this;var node=element.node||element[0].node;return node.parentNode.insertBefore(this.node,node),R._insertbefore(this,element,this.paper),this},elproto.blur=function(size){var t=this;if(0!=+size){var fltr=$("filter"),blur=$("feGaussianBlur");t.attrs.blur=size,fltr.id=R.createUUID(),$(blur,{stdDeviation:+size||1.5}),fltr.appendChild(blur),t.paper.defs.appendChild(fltr),t._blur=fltr,$(t.node,{filter:"url(#"+fltr.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},
R._engine.circle=function(svg,x,y,r){var el=$("circle");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,r:r,fill:"none",stroke:"#000"},res.type="circle",$(el,res.attrs),res},R._engine.rect=function(svg,x,y,w,h,r){var el=$("rect");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},res.type="rect",$(el,res.attrs),res},R._engine.ellipse=function(svg,x,y,rx,ry){var el=$("ellipse");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,rx:rx,ry:ry,fill:"none",
stroke:"#000"},res.type="ellipse",$(el,res.attrs),res},R._engine.image=function(svg,src,x,y,w,h){var el=$("image");$(el,{x:x,y:y,width:w,height:h,preserveAspectRatio:"none"}),el.setAttributeNS(xlink,"href",src),svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,src:src},res.type="image",res},R._engine.text=function(svg,x,y,text){var el=$("text");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,"text-anchor":"middle",text:text,font:R._availableAttrs.font,stroke:"none",fill:"#000"},res.type="text",setFillAndStroke(res,res.attrs),res},
R._engine.setSize=function(width,height){return this.width=width||this.width,this.height=height||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con&&con.container,x=con.x,y=con.y,width=con.width,height=con.height;if(!container)throw new Error("SVG container not found.");var isFloating,cnvs=$("svg"),css="overflow:hidden;";return x=x||0,y=y||0,$(cnvs,{height:height=height||342,version:1.1,width:width=width||512,xmlns:"http://www.w3.org/2000/svg"}),1==container?(
cnvs.style.cssText=css+"position:absolute;left:"+x+"px;top:"+y+"px",R._g.doc.body.appendChild(cnvs),isFloating=1):(cnvs.style.cssText=css+"position:relative",container.firstChild?container.insertBefore(cnvs,container.firstChild):container.appendChild(cnvs)),(container=new R._Paper).width=width,container.height=height,container.canvas=cnvs,container.clear(),container._left=container._top=0,isFloating&&(container.renderfix=function(){}),container.renderfix(),container},R._engine.setViewBox=function(x,y,w,h,fit){eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var vb,sw,size=mmax(w/this.width,h/this.height),top=this.top,
aspectRatio=fit?"xMidYMid meet":"xMinYMin";for(vb=null==x?(this._vbSize&&(size=1),delete this._vbSize,"0 0 "+this.width+S+this.height):(this._vbSize=size,x+S+y+S+w+S+h),$(this.canvas,{viewBox:vb,preserveAspectRatio:aspectRatio});size&&top;)sw="stroke-width"in top.attrs?top.attrs["stroke-width"]:1,top.attr({"stroke-width":sw}),top._.dirty=1,top._.dirtyT=1,top=top.prev;return this._viewBox=[x,y,w,h,!!fit],this},R.prototype.renderfix=function(){var pos,cnvs=this.canvas,s=cnvs.style;try{pos=cnvs.getScreenCTM()||cnvs.createSVGMatrix()}catch(e){pos=cnvs.createSVGMatrix()}var left=-pos.e%1,top=-pos.f%1;(left||top)&&(left&&(this._left=(this._left+left)%1,
s.left=this._left+"px"),top&&(this._top=(this._top+top)%1,s.top=this._top+"px"))},R.prototype.clear=function(){R.eve("raphael.clear",this);for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null,(this.desc=$("desc")).appendChild(R._g.doc.createTextNode("Created with Raphal "+R.version)),c.appendChild(this.desc),c.appendChild(this.defs=$("defs"))},R.prototype.remove=function(){for(var i in eve("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null};var setproto=R.st;for(var method in elproto)elproto[has](method
)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method))}}(),function(){if(R.vml){var has="hasOwnProperty",Str=String,toFloat=parseFloat,math=Math,round=math.round,mmax=math.max,mmin=math.min,abs=math.abs,separator=/[, ]+/,eve=R.eve,S=" ",E="",map={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bites=/([clmz]),?([^clmz]*)/gi,blurregexp=/ progid:\S+Blur\([^\)]+\)/g,val=/-?[^,\s-]+/g,cssDot="position:absolute;left:0;top:0;width:1px;height:1px",zoom=21600,pathTypes={path:1,rect:1,image:1},ovalTypes={circle:1,ellipse:1},compensation=function(
deg,dx,dy){var m=R.matrix();return m.rotate(-deg,.5,.5),{dx:m.x(dx,dy),dy:m.y(dx,dy)}},setCoords=function(p,sx,sy,dx,dy,deg){var _=p._,m=p.matrix,fillpos=_.fillpos,o=p.node,s=o.style,y=1,flip="",kx=zoom/sx,ky=zoom/sy;if(s.visibility="hidden",sx&&sy){if(o.coordsize=abs(kx)+S+abs(ky),s.rotation=deg*(sx*sy<0?-1:1),deg){var c=compensation(deg,dx,dy);dx=c.dx,dy=c.dy}if(sx<0&&(flip+="x"),sy<0&&(flip+=" y")&&(y=-1),s.flip=flip,o.coordorigin=dx*-kx+S+dy*-ky,fillpos||_.fillsize){var fill=o.getElementsByTagName("fill");fill=fill&&fill[0],o.removeChild(fill),fillpos&&(c=compensation(deg,m.x(fillpos[0],fillpos[1]),m.y(fillpos[0],fillpos[1])),
fill.position=c.dx*y+S+c.dy*y),_.fillsize&&(fill.size=_.fillsize[0]*abs(sx)+S+_.fillsize[1]*abs(sy)),o.appendChild(fill)}s.visibility="visible"}};R.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var createNode,addArrow=function(o,value,isEnd){for(var values=Str(value).toLowerCase().split("-"),se=isEnd?"end":"start",i=values.length,type="classic",w="medium",h="medium";i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":case"narrow":h=values[i];break;case"long":case"short":w=values[i]}
var stroke=o.node.getElementsByTagName("stroke")[0];stroke[se+"arrow"]=type,stroke[se+"arrowlength"]=w,stroke[se+"arrowwidth"]=h},setFillAndStroke=function(o,params){o.attrs=o.attrs||{};var node=o.node,a=o.attrs,s=node.style,newpath=pathTypes[o.type]&&(params.x!=a.x||params.y!=a.y||params.width!=a.width||params.height!=a.height||params.cx!=a.cx||params.cy!=a.cy||params.rx!=a.rx||params.ry!=a.ry||params.r!=a.r),isOval=ovalTypes[o.type]&&(a.cx!=params.cx||a.cy!=params.cy||a.r!=params.r||a.rx!=params.rx||a.ry!=params.ry),res=o;for(var par in params)params[has](par)&&(a[par]=params[par]);if(newpath&&(a.path=R._getPath[o.type](o),o._.dirty=1),params.href&&(
node.href=params.href),params.title&&(node.title=params.title),params.target&&(node.target=params.target),params.cursor&&(s.cursor=params.cursor),"blur"in params&&o.blur(params.blur),(params.path&&"path"==o.type||newpath)&&(node.path=function(path){var total=/[ahqstv]/gi,command=R._pathToAbsolute;if(Str(path).match(total)&&(command=R._path2curve),total=/[clmz]/g,command==R._pathToAbsolute&&!Str(path).match(total)){var res=Str(path).replace(bites,function(all,command,args){var vals=[],isMove="m"==command.toLowerCase(),res=map[command];return args.replace(val,function(value){isMove&&2==vals.length&&(res+=vals+map["m"==command?"l":"L"],vals=[]),vals.push(round(
value*zoom))}),res+vals});return res}var p,r,pa=command(path);res=[];for(var i=0,ii=pa.length;i<ii;i++){p=pa[i],"z"==(r=pa[i][0].toLowerCase())&&(r="x");for(var j=1,jj=p.length;j<jj;j++)r+=round(p[j]*zoom)+(j!=jj-1?",":E);res.push(r)}return res.join(S)}(~Str(a.path).toLowerCase().indexOf("r")?R._pathToAbsolute(a.path):a.path),"image"==o.type&&(o._.fillpos=[a.x,a.y],o._.fillsize=[a.width,a.height],setCoords(o,1,1,0,0,0))),"transform"in params&&o.transform(params.transform),isOval){var cx=+a.cx,cy=+a.cy,rx=+a.rx||+a.r||0,ry=+a.ry||+a.r||0;node.path=R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",round((cx-rx)*zoom),round((cy-ry)*zoom),round((cx+rx)*zoom),round((
cy+ry)*zoom),round(cx*zoom)),o._.dirty=1}if("clip-rect"in params){var rect=Str(params["clip-rect"]).split(separator);if(4==rect.length){rect[2]=+rect[2]+ +rect[0],rect[3]=+rect[3]+ +rect[1];var div=node.clipRect||R._g.doc.createElement("div"),dstyle=div.style;dstyle.clip=R.format("rect({1}px {2}px {3}px {0}px)",rect),node.clipRect||(dstyle.position="absolute",dstyle.top=0,dstyle.left=0,dstyle.width=o.paper.width+"px",dstyle.height=o.paper.height+"px",node.parentNode.insertBefore(div,node),div.appendChild(node),node.clipRect=div)}params["clip-rect"]||node.clipRect&&(node.clipRect.style.clip="auto")}if(o.textpath){var textpathStyle=o.textpath.style
;params.font&&(textpathStyle.font=params.font),params["font-family"]&&(textpathStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,E)+'"'),params["font-size"]&&(textpathStyle.fontSize=params["font-size"]),params["font-weight"]&&(textpathStyle.fontWeight=params["font-weight"]),params["font-style"]&&(textpathStyle.fontStyle=params["font-style"])}if("arrow-start"in params&&addArrow(res,params["arrow-start"]),"arrow-end"in params&&addArrow(res,params["arrow-end"],1),
null!=params.opacity||null!=params["stroke-width"]||null!=params.fill||null!=params.src||null!=params.stroke||null!=params["stroke-width"]||null!=params["stroke-opacity"]||null!=params["fill-opacity"]||null!=params["stroke-dasharray"]||null!=params["stroke-miterlimit"]||null!=params["stroke-linejoin"]||null!=params["stroke-linecap"]){var fill=node.getElementsByTagName("fill");if(!(fill=fill&&fill[0])&&(fill=createNode("fill")),"image"==o.type&&params.src&&(fill.src=params.src),params.fill&&(fill.on=!0),null!=fill.on&&"none"!=params.fill&&null!==params.fill||(fill.on=!1),fill.on&&params.fill){var isURL=Str(params.fill).match(R._ISURL);if(isURL){
fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=isURL[1],fill.type="tile";var bbox=o.getBBox(1);fill.position=bbox.x+S+bbox.y,o._.fillpos=[bbox.x,bbox.y],R._preload(isURL[1],function(){o._.fillsize=[this.offsetWidth,this.offsetHeight]})}else fill.color=R.getRGB(params.fill).hex,fill.src=E,fill.type="solid",R.getRGB(params.fill).error&&(res.type in{circle:1,ellipse:1}||"r"!=Str(params.fill).charAt())&&addGradientFill(res,params.fill,fill)&&(a.fill="none",a.gradient=params.fill,fill.rotate=!1)}if("fill-opacity"in params||"opacity"in params){var opacity=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+R.getRGB(params.fill).o+1||2)-1)
;opacity=mmin(mmax(opacity,0),1),fill.opacity=opacity,fill.src&&(fill.color="none")}node.appendChild(fill);var stroke=node.getElementsByTagName("stroke")&&node.getElementsByTagName("stroke")[0],newstroke=!1;!stroke&&(newstroke=stroke=createNode("stroke")),(params.stroke&&"none"!=params.stroke||params["stroke-width"]||null!=params["stroke-opacity"]||params["stroke-dasharray"]||params["stroke-miterlimit"]||params["stroke-linejoin"]||params["stroke-linecap"])&&(stroke.on=!0),("none"==params.stroke||null===params.stroke||null==stroke.on||0==params.stroke||0==params["stroke-width"])&&(stroke.on=!1);var strokeColor=R.getRGB(params.stroke)
;stroke.on&&params.stroke&&(stroke.color=strokeColor.hex),opacity=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+strokeColor.o+1||2)-1);var width=.75*(toFloat(params["stroke-width"])||1);if(opacity=mmin(mmax(opacity,0),1),null==params["stroke-width"]&&(width=a["stroke-width"]),params["stroke-width"]&&(stroke.weight=width),width&&width<1&&(opacity*=width)&&(stroke.weight=1),stroke.opacity=opacity,params["stroke-linejoin"]&&(stroke.joinstyle=params["stroke-linejoin"]||"miter"),stroke.miterlimit=params["stroke-miterlimit"]||8,params["stroke-linecap"]&&(
stroke.endcap="butt"==params["stroke-linecap"]?"flat":"square"==params["stroke-linecap"]?"square":"round"),"stroke-dasharray"in params){var dasharray={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};stroke.dashstyle=dasharray[has](params["stroke-dasharray"])?dasharray[params["stroke-dasharray"]]:E}newstroke&&node.appendChild(stroke)}if("text"==res.type){res.paper.canvas.style.display=E;var span=res.paper.span,fontSize=a.font&&a.font.match(/\d+(?:\.\d*)?(?=px)/);s=span.style,a.font&&(s.font=a.font),a["font-family"]&&(
s.fontFamily=a["font-family"]),a["font-weight"]&&(s.fontWeight=a["font-weight"]),a["font-style"]&&(s.fontStyle=a["font-style"]),fontSize=toFloat(a["font-size"]||fontSize&&fontSize[0])||10,s.fontSize=100*fontSize+"px",res.textpath.string&&(span.innerHTML=Str(res.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var brect=span.getBoundingClientRect();res.W=a.w=(brect.right-brect.left)/100,res.H=a.h=(brect.bottom-brect.top)/100,res.X=a.x,res.Y=a.y+res.H/2,("x"in params||"y"in params)&&(res.path.v=R.format("m{0},{1}l{2},{1}",round(a.x*zoom),round(a.y*zoom),round(a.x*zoom)+1));for(var dirtyattrs=["x","y","text","font",
"font-family","font-weight","font-style","font-size"],d=0,dd=dirtyattrs.length;d<dd;d++)if(dirtyattrs[d]in params){res._.dirty=1;break}switch(a["text-anchor"]){case"start":res.textpath.style["v-text-align"]="left",res.bbx=res.W/2;break;case"end":res.textpath.style["v-text-align"]="right",res.bbx=-res.W/2;break;default:res.textpath.style["v-text-align"]="center",res.bbx=0}res.textpath.style["v-text-kern"]=!0}},addGradientFill=function(o,gradient,fill){o.attrs=o.attrs||{};o.attrs;var pow=Math.pow,type="linear",fxfy=".5 .5";if(o.attrs.gradient=gradient,gradient=(gradient=Str(gradient).replace(R._radial_gradient,function(all,fx,fy){return type="radial",fx&&fy&&(
fx=toFloat(fx),fy=toFloat(fy),.25<pow(fx-.5,2)+pow(fy-.5,2)&&(fy=math.sqrt(.25-pow(fx-.5,2))*(2*(.5<fy)-1)+.5),fxfy=fx+S+fy),E})).split(/\s*\-\s*/),"linear"==type){var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null}var dots=R._parseDots(gradient);if(!dots)return null;if(o=o.shape||o.node,dots.length){o.removeChild(fill),fill.on=!0,fill.method="none",fill.color=dots[0].color,fill.color2=dots[dots.length-1].color;for(var clrs=[],i=0,ii=dots.length;i<ii;i++)dots[i].offset&&clrs.push(dots[i].offset+S+dots[i].color);fill.colors=clrs.length?clrs.join():"0% "+fill.color,fill.angle="radial"==type?(fill.type="gradientTitle",fill.focus="100%"
,fill.focussize="0 0",fill.focusposition=fxfy,0):(fill.type="gradient",(270-angle)%360),o.appendChild(fill)}return 1},Element=function(node,vml){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=vml,this.matrix=R.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!vml.bottom&&(vml.bottom=this),this.prev=vml.top,vml.top&&(vml.top.next=this),(vml.top=this).next=null},elproto=R.el;(Element.prototype=elproto).constructor=Element,elproto.transform=function(tstr){if(null==tstr)return this._.transform;var oldt,vbs=this.paper._viewBoxShift,vbt=vbs?"s"+[vbs.scale,vbs.scale
]+"-1-1t"+[vbs.dx,vbs.dy]:E;vbs&&(oldt=tstr=Str(tstr).replace(/\.{3}|\u2026/g,this._.transform||E)),R._extractTransform(this,vbt+tstr);var split,matrix=this.matrix.clone(),skew=this.skew,o=this.node,isGrad=~Str(this.attrs.fill).indexOf("-"),isPatt=!Str(this.attrs.fill).indexOf("url(");if(matrix.translate(1,1),isPatt||isGrad||"image"==this.type)if(skew.matrix="1 0 0 1",skew.offset="0 0",split=matrix.split(),isGrad&&split.noRotation||!split.isSimple){o.style.filter=matrix.toFilter();var bb=this.getBBox(),bbt=this.getBBox(1),dx=bb.x-bbt.x,dy=bb.y-bbt.y;o.coordorigin=dx*-zoom+S+dy*-zoom,setCoords(this,1,1,dx,dy,0)}else o.style.filter=E,setCoords(this,
split.scalex,split.scaley,split.dx,split.dy,split.rotate);else o.style.filter=E,skew.matrix=Str(matrix),skew.offset=matrix.offset();return oldt&&(this._.transform=oldt),this},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if(null!=deg){if((deg=Str(deg).split(separator)).length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",deg,cx,cy]])),this}},elproto.translate=function(dx,dy){return this.removed||((dx=Str(dx).split(separator)).length-1&&(dy=toFloat(
dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this._.bbox&&(this._.bbox.x+=dx,this._.bbox.y+=dy),this.transform(this._.transform.concat([["t",dx,dy]]))),this},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if((sx=Str(sx).split(separator)).length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3]),isNaN(cx)&&(cx=null),isNaN(cy)&&(cy=null)),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy)var bbox=this.getBBox(1);return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this._.dirtyT=1,this},elproto.hide=function(){return!this.removed&&(
this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&(this.node.style.display=E),this},elproto._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},elproto.remove=function(){if(!this.removed&&this.node.parentNode){for(var i in this.paper.__set__&&this.paper.__set__.exclude(this),R.eve.unbind("raphael.*.*."+this.id),R._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;this.removed=!0}},elproto.attr=function(name,value){if(
this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if("fill"==name&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var names=name.split(separator),out={},i=0,ii=names.length;i<ii;i++)(name=names[i])in this.attrs?out[name]=this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?out[name]=this.paper.customAttributes[name].def:out[name]=R._availableAttrs[name];return ii-1?out:out[names[0]]}if(
this.attrs&&null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;i<ii;i++)out[name[i]]=this.attr(name[i]);return out}var params;for(var key in null!=value&&((params={})[name]=value),null==value&&R.is(name,"object")&&(params=name),params)eve("raphael.attr."+key+"."+this.id,this,params[key]);if(params){for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));for(var subkey in this.attrs[key]=params[key],par)par[has](subkey)&&(params[subkey]=par[subkey])}
params.text&&"text"==this.type&&(this.textpath.string=params.text),setFillAndStroke(this,params)}return this},elproto.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&R._tofront(this,this.paper),this},elproto.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper)),this},elproto.insertAfter=function(element){return this.removed||(element.constructor==R.st.constructor&&(element=element[element.length-1]),
element.node.nextSibling?element.node.parentNode.insertBefore(this.node,element.node.nextSibling):element.node.parentNode.appendChild(this.node),R._insertafter(this,element,this.paper)),this},elproto.insertBefore=function(element){return this.removed||(element.constructor==R.st.constructor&&(element=element[0]),element.node.parentNode.insertBefore(this.node,element.node),R._insertbefore(this,element,this.paper)),this},elproto.blur=function(size){var s=this.node.runtimeStyle,f=s.filter;return f=f.replace(blurregexp,E),0!=+size?(this.attrs.blur=size,s.filter=f+S+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+size||1.5)+")",s.margin=R.format(
"-{0}px 0 0 -{0}px",round(+size||1.5))):(s.filter=f,s.margin=0,delete this.attrs.blur),this},R._engine.path=function(pathString,vml){var el=createNode("shape");el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin=vml.coordorigin;var p=new Element(el,vml),attr={fill:"none",stroke:"#000"};pathString&&(attr.path=pathString),p.type="path",p.path=[],p.Path=E,setFillAndStroke(p,attr),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.rect=function(vml,x,y,w,h,r){var path=R._rectPath(x,y,w,h,r),res=vml.path(path),a=res.attrs;return res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,
res.H=a.height=h,a.r=r,a.path=path,res.type="rect",res},R._engine.ellipse=function(vml,x,y,rx,ry){var res=vml.path();res.attrs;return res.X=x-rx,res.Y=y-ry,res.W=2*rx,res.H=2*ry,res.type="ellipse",setFillAndStroke(res,{cx:x,cy:y,rx:rx,ry:ry}),res},R._engine.circle=function(vml,x,y,r){var res=vml.path();res.attrs;return res.X=x-r,res.Y=y-r,res.W=res.H=2*r,res.type="circle",setFillAndStroke(res,{cx:x,cy:y,r:r}),res},R._engine.image=function(vml,src,x,y,w,h){var path=R._rectPath(x,y,w,h),res=vml.path(path).attr({stroke:"none"}),a=res.attrs,node=res.node,fill=node.getElementsByTagName("fill")[0];return a.src=src,res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,
res.H=a.height=h,a.path=path,res.type="image",fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=src,fill.type="tile",res._.fillpos=[x,y],res._.fillsize=[w,h],node.appendChild(fill),setCoords(res,1,1,0,0,0),res},R._engine.text=function(vml,x,y,text){var el=createNode("shape"),path=createNode("path"),o=createNode("textpath");x=x||0,y=y||0,text=text||"",path.v=R.format("m{0},{1}l{2},{1}",round(x*zoom),round(y*zoom),round(x*zoom)+1),path.textpathok=!0,o.string=Str(text),o.on=!0,el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin="0 0";var p=new Element(el,vml),attr={fill:"#000",stroke:"none",font:R._availableAttrs.font,text:text}
;p.shape=el,p.path=path,p.textpath=o,p.type="text",p.attrs.text=Str(text),p.attrs.x=x,p.attrs.y=y,p.attrs.w=1,p.attrs.h=1,setFillAndStroke(p,attr),el.appendChild(o),el.appendChild(path),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.setSize=function(width,height){var cs=this.canvas.style;return(this.width=width)==+width&&(width+="px"),(this.height=height)==+height&&(height+="px"),cs.width=width,cs.height=height,cs.clip="rect(0 "+width+" "+height+" 0)",this._viewBox&&R._engine.setViewBox.apply(this,this._viewBox),this},R._engine.setViewBox=function(x,y,w,h,fit){R.eve(
"raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var H,W,width=this.width,height=this.height,size=1/mmax(w/width,h/height);return fit&&(w*(H=height/h)<width&&(x-=(width-w*H)/2/H),h*(W=width/w)<height&&(y-=(height-h*W)/2/W)),this._viewBox=[x,y,w,h,!!fit],this._viewBoxShift={dx:-x,dy:-y,scale:size},this.forEach(function(el){el.transform("...")}),this},R._engine.initWin=function(win){var doc=win.document;doc.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!doc.namespaces.rvml&&doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),createNode=function(tagName){return doc.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){
createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},R._engine.initWin(R._g.win),R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con.container,height=con.height,width=con.width,x=con.x,y=con.y;if(!container)throw new Error("VML container not found.");var res=new R._Paper,c=res.canvas=R._g.doc.createElement("div"),cs=c.style;return x=x||0,y=y||0,width=width||512,height=height||342,(res.width=width)==+width&&(width+="px"),(res.height=height)==+height&&(height+="px"),res.coordsize=216e5+S+216e5,res.coordorigin="0 0",res.span=R._g.doc.createElement("span"),
res.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(res.span),cs.cssText=R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",width,height),1==container?(R._g.doc.body.appendChild(c),cs.left=x+"px",cs.top=y+"px",cs.position="absolute"):container.firstChild?container.insertBefore(c,container.firstChild):container.appendChild(c),res.renderfix=function(){},res},R.prototype.clear=function(){R.eve("raphael.clear",this),this.canvas.innerHTML=E,this.span=R._g.doc.createElement("span"),
this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},R.prototype.remove=function(){for(var i in R.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;return!0};var setproto=R.st;for(var method in elproto)elproto[has](method)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method))}}(),oldRaphael.was?g.win.Raphael=R:Raphael=R,
"object"==typeof exports&&(module.exports=R),R}),define("scale.raphael",["jquery","raphael"],function($,Raphael){return function(container,width,height){var nestedWrapper,wrapper=container.style?container:document.getElementById(container);wrapper.style.position||(wrapper.style.position="relative"),wrapper.style.width=width+"px",wrapper.style.height=height+"px",nestedWrapper="VML"===Raphael.type?(wrapper.innerHTML="<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml'></rvml:group>",$(".rvml",$(wrapper))[0]):(wrapper.innerHTML="<div class='svggroup'></div>",$(".svggroup",$(wrapper))[0])
;var vmlDiv,paper=new Raphael(nestedWrapper,width,height);return"SVG"===Raphael.type?paper.canvas.setAttribute("viewBox","0 0 "+width+" "+height):vmlDiv=wrapper.getElementsByTagName("div")[0],paper.changeSize=function(w,h,center,clipping){clipping=!clipping;var ratioW=w/width,ratioH=h/height,scale=ratioW<ratioH?ratioW:ratioH,newHeight=parseInt(height*scale),newWidth=parseInt(width*scale);if("VML"===Raphael.type){var newSize,txt=document.getElementsByTagName("textpath");for(var i in txt){var curr=txt[i];if(curr.style){if(!curr._fontSize){var mod=curr.style.font.split("px");curr._fontSize=parseInt(mod[0]),curr._font=mod[1]}
curr.style.font=curr._fontSize*scale+"px"+curr._font}}newSize=newWidth<newHeight?1e3*newWidth/width:1e3*newHeight/height,newSize=parseInt(newSize),nestedWrapper.style.width=newSize+"px",nestedWrapper.style.height=newSize+"px",clipping&&(nestedWrapper.style.left=parseInt((w-newWidth)/2)+"px",nestedWrapper.style.top=parseInt((h-newHeight)/2)+"px"),vmlDiv.style.overflow="visible"}clipping&&(newWidth=w,newHeight=h),wrapper.style.width=newWidth+"px",wrapper.style.height=newHeight+"px",paper.setSize(newWidth,newHeight),center&&(wrapper.style.position="absolute",wrapper.style.left=parseInt((w-newWidth)/2)+"px",wrapper.style.top=parseInt((h-newHeight)/2)+"px")},
paper.scaleAll=function(amount){paper.changeSize(width*amount,height*amount)},paper.changeSize(width,height),paper.w=width,paper.h=height,paper}}),function(realWindow){"use strict";if(realWindow){var pEventTypes,ie8MatchesSelector,el,window=(el=realWindow.document.createTextNode("")).ownerDocument!==realWindow.document&&"function"==typeof realWindow.wrap&&realWindow.wrap(el)===el?realWindow.wrap(realWindow):realWindow,document=window.document,DocumentFragment=window.DocumentFragment||blank,SVGElement=window.SVGElement||blank,SVGSVGElement=window.SVGSVGElement||blank,SVGElementInstance=window.SVGElementInstance||blank,
HTMLElement=window.HTMLElement||window.Element,PointerEvent=window.PointerEvent||window.MSPointerEvent,hypot=Math.hypot||function(x,y){return Math.sqrt(x*x+y*y)},tmpXY={},documents=[],interactables=[],interactions=[],dynamicDrop=!1,delegatedEvents={},defaultOptions={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:document,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,
maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},autoScroll={interaction:null,i:null,x:0,y:0,scroll:function(){var vx,vy,sx,sy,
options=autoScroll.interaction.target.options[autoScroll.interaction.prepared.name].autoScroll,container=options.container||getWindow(autoScroll.interaction.element),now=(new Date).getTime(),dtx=(now-autoScroll.prevTimeX)/1e3,dty=(now-autoScroll.prevTimeY)/1e3;options.velocity?(vx=options.velocity.x,vy=options.velocity.y):vx=vy=options.speed,sy=vy*dty,(1<=(sx=vx*dtx)||1<=sy)&&(isWindow(container)?container.scrollBy(autoScroll.x*sx,autoScroll.y*sy):container&&(container.scrollLeft+=autoScroll.x*sx,container.scrollTop+=autoScroll.y*sy),1<=sx&&(autoScroll.prevTimeX=now),1<=sy&&(autoScroll.prevTimeY=now)),autoScroll.isScrolling&&(cancelFrame(autoScroll.i),
autoScroll.i=reqFrame(autoScroll.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(interaction){autoScroll.isScrolling=!0,cancelFrame(autoScroll.i),autoScroll.interaction=interaction,autoScroll.prevTimeX=(new Date).getTime(),autoScroll.prevTimeY=(new Date).getTime(),autoScroll.i=reqFrame(autoScroll.scroll)},stop:function(){autoScroll.isScrolling=!1,cancelFrame(autoScroll.i)}},supportsTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsPointerEvent=PointerEvent&&!/Chrome/.test(navigator.userAgent),margin=supportsTouch||supportsPointerEvent?20:10,pointerMoveTolerance=1,prevTouchTime=0,
maxInteractions=1/0,actionCursors=document.all&&!window.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},actionIsEnabled={
drag:!0,resize:!0,gesture:!0},wheelEvent="onmousewheel"in document?"mousewheel":"wheel",eventTypes=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],globalEvents={},isOperaMobile="Opera"==navigator.appName&&supportsTouch&&navigator.userAgent.match("Presto"),isIOS7=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),
prefixedMatchesSelector="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",reqFrame=realWindow.requestAnimationFrame,cancelFrame=realWindow.cancelAnimationFrame,events=function(){var useAttachEvent="attachEvent"in window&&!("addEventListener"in window),addEvent=useAttachEvent?"attachEvent":"addEventListener",removeEvent=useAttachEvent?"detachEvent":"removeEventListener",on=useAttachEvent?"on":"",elements=[],targets=[],attachedListeners=[];function preventDef(){
this.returnValue=!1}function stopProp(){this.cancelBubble=!0}function stopImmProp(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}return{add:function(element,type,listener,useCapture){var elementIndex=indexOf(elements,element),target=targets[elementIndex];if(target||(target={events:{},typeCount:0},elementIndex=elements.push(element)-1,targets.push(target),attachedListeners.push(useAttachEvent?{supplied:[],wrapped:[],useCount:[]}:null)),target.events[type]||(target.events[type]=[],target.typeCount++),!contains(target.events[type],listener)){var ret;if(useAttachEvent){var listeners=attachedListeners[elementIndex],listenerIndex=indexOf(
listeners.supplied,listener),wrapped=listeners.wrapped[listenerIndex]||function(event){event.immediatePropagationStopped||(event.target=event.srcElement,event.currentTarget=element,event.preventDefault=event.preventDefault||preventDef,event.stopPropagation=event.stopPropagation||stopProp,event.stopImmediatePropagation=event.stopImmediatePropagation||stopImmProp,/mouse|click/.test(event.type)&&(event.pageX=event.clientX+getWindow(element).document.documentElement.scrollLeft,event.pageY=event.clientY+getWindow(element).document.documentElement.scrollTop),listener(event))};ret=element[addEvent](on+type,wrapped,Boolean(useCapture)),-1===listenerIndex?(
listeners.supplied.push(listener),listeners.wrapped.push(wrapped),listeners.useCount.push(1)):listeners.useCount[listenerIndex]++}else ret=element[addEvent](type,listener,useCapture||!1);return target.events[type].push(listener),ret}},remove:function remove(element,type,listener,useCapture){var i,listeners,listenerIndex,elementIndex=indexOf(elements,element),target=targets[elementIndex],wrapped=listener;if(target&&target.events)if(useAttachEvent&&(listenerIndex=indexOf((listeners=attachedListeners[elementIndex]).supplied,listener),wrapped=listeners.wrapped[listenerIndex]),"all"!==type){if(target.events[type]){var len=target.events[type].length;if(
"all"===listener){for(i=0;i<len;i++)remove(element,type,target.events[type][i],Boolean(useCapture));return}for(i=0;i<len;i++)if(target.events[type][i]===listener){element[removeEvent](on+type,wrapped,useCapture||!1),target.events[type].splice(i,1),useAttachEvent&&listeners&&(listeners.useCount[listenerIndex]--,0===listeners.useCount[listenerIndex]&&(listeners.supplied.splice(listenerIndex,1),listeners.wrapped.splice(listenerIndex,1),listeners.useCount.splice(listenerIndex,1)));break}target.events[type]&&0===target.events[type].length&&(target.events[type]=null,target.typeCount--)}target.typeCount||(targets.splice(elementIndex,1),elements.splice(elementIndex,
1),attachedListeners.splice(elementIndex,1))}else for(type in target.events)target.events.hasOwnProperty(type)&&remove(element,type,"all")},useAttachEvent:useAttachEvent,_elements:elements,_targets:targets,_attachedListeners:attachedListeners}}(),prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};Interaction.prototype={getPageXY:function(pointer,xy){return getPageXY(pointer,xy)},getClientXY:function(pointer,xy){return getClientXY(pointer,xy)},setEventXY:function(target,ptr){return targetObj=target,getPageXY(pointer=1<(pointers=ptr).length?pointerAverage(pointers):pointers[0],tmpXY),targetObj.page.x=tmpXY.x,targetObj.page.y=tmpXY.y,
getClientXY(pointer,tmpXY),targetObj.client.x=tmpXY.x,targetObj.client.y=tmpXY.y,void(targetObj.timeStamp=(new Date).getTime());var targetObj,pointers,pointer},pointerOver:function(pointer,event,eventTarget){if(!this.prepared.name&&this.mouse){var curMatches=[],curMatchElements=[],prevTargetElement=this.element;this.addPointer(pointer),!this.target||!testIgnore(this.target,this.element,eventTarget)&&testAllow(this.target,this.element,eventTarget)||(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var elementInteractable=interactables.get(eventTarget),elementAction=elementInteractable&&!testIgnore(elementInteractable,eventTarget,
eventTarget)&&testAllow(elementInteractable,eventTarget,eventTarget)&&validateAction(elementInteractable.getAction(pointer,event,this,eventTarget),elementInteractable);elementAction&&!withinInteractionLimit(elementInteractable,eventTarget,elementAction)&&(elementAction=null),elementAction?(this.target=elementInteractable,this.element=eventTarget,this.matches=[],this.matchElements=[]):(interactables.forEachSelector(function(interactable,selector){interactable&&inContext(interactable,eventTarget)&&!testIgnore(interactable,eventTarget,eventTarget)&&testAllow(interactable,eventTarget,eventTarget)&&matchesSelector(eventTarget,selector)&&(curMatches.push(
interactable),curMatchElements.push(eventTarget))}),this.validateSelector(pointer,event,curMatches,curMatchElements)?(this.matches=curMatches,this.matchElements=curMatchElements,this.pointerHover(pointer,event,this.matches,this.matchElements),events.add(eventTarget,supportsPointerEvent?pEventTypes.move:"mousemove",listeners.pointerHover)):this.target&&(nodeContains(prevTargetElement,eventTarget)?(this.pointerHover(pointer,event,this.matches,this.matchElements),events.add(this.element,supportsPointerEvent?pEventTypes.move:"mousemove",listeners.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(
pointer,event,eventTarget,curEventTarget,matches,matchElements){var action,target=this.target;!this.prepared.name&&this.mouse?(this.setEventXY(this.curCoords,[pointer]),matches?action=this.validateSelector(pointer,event,matches,matchElements):target&&(action=validateAction(target.getAction(this.pointers[0],event,this,this.element),this.target)),target&&target.options.styleCursor&&(target._doc.documentElement.style.cursor=action?getActionCursor(action):"")):this.prepared.name&&this.checkAndPreventDefault(event,target,this.element)},pointerOut:function(pointer,event,eventTarget){this.prepared.name||(interactables.get(eventTarget)||events.remove(eventTarget,
supportsPointerEvent?pEventTypes.move:"mousemove",listeners.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(pointer,event,eventTarget,curEventTarget){var action,that=this,eventCopy=events.useAttachEvent?extend({},event):event,element=eventTarget,pointerIndex=this.addPointer(pointer);if(this.holdTimers[pointerIndex]=setTimeout(function(){that.pointerHold(events.useAttachEvent?eventCopy:pointer,eventCopy,eventTarget,curEventTarget)},defaultOptions._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;isElement(element
);){if(element===this.element&&validateAction(this.target.getAction(pointer,event,this,this.element),this.target).name===this.prepared.name)return cancelFrame(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(pointer,event,eventTarget,"down");element=parentElement(element)}if(this.interacting())this.collectEventTargets(pointer,event,eventTarget,"down");else{for(this.setEventXY(this.curCoords,[pointer]),this.downEvent=event;isElement(element)&&!action;)this.matches=[],this.matchElements=[],interactables.forEachSelector(pushMatches),action=this.validateSelector(pointer,event,this.matches,this.matchElements),element=parentElement(
element);if(action)return this.prepared.name=action.name,this.prepared.axis=action.axis,this.prepared.edges=action.edges,this.collectEventTargets(pointer,event,eventTarget,"down"),this.pointerDown(pointer,event,eventTarget,curEventTarget,action);this.downTimes[pointerIndex]=(new Date).getTime(),this.downTargets[pointerIndex]=eventTarget,pointerExtend(this.downPointer,pointer),copyCoords(this.prevCoords,this.curCoords),this.pointerWasMoved=!1,this.collectEventTargets(pointer,event,eventTarget,"down")}function pushMatches(interactable,selector,context){var elements=ie8MatchesSelector?context.querySelectorAll(selector):void 0;inContext(interactable,element
)&&!testIgnore(interactable,element,eventTarget)&&testAllow(interactable,element,eventTarget)&&matchesSelector(element,selector,elements)&&(that.matches.push(interactable),that.matchElements.push(element))}},pointerDown:function(pointer,event,eventTarget,curEventTarget,forceAction){if(forceAction||this.inertiaStatus.active||!this.pointerWasMoved||!this.prepared.name){this.pointerIsDown=!0,this.downEvent=event;var action,pointerIndex=this.addPointer(pointer);if(1<this.pointerIds.length&&this.target._element===this.element){var newAction=validateAction(forceAction||this.target.getAction(pointer,event,this,this.element),this.target);withinInteractionLimit(
this.target,this.element,newAction)&&(action=newAction),this.prepared.name=null}else if(!this.prepared.name){var interactable=interactables.get(curEventTarget);interactable&&!testIgnore(interactable,curEventTarget,eventTarget)&&testAllow(interactable,curEventTarget,eventTarget)&&(action=validateAction(forceAction||interactable.getAction(pointer,event,this,curEventTarget),interactable))&&withinInteractionLimit(interactable,curEventTarget,action)&&(this.target=interactable,this.element=curEventTarget)}var target=this.target,options=target&&target.options;if(!target||!forceAction&&this.prepared.name
)this.inertiaStatus.active&&curEventTarget===this.element&&validateAction(target.getAction(pointer,event,this,this.element),target).name===this.prepared.name&&(cancelFrame(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(event,target,this.element));else{if(action=action||validateAction(forceAction||target.getAction(pointer,event,this,curEventTarget),target,this.element),this.setEventXY(this.startCoords,this.pointers),!action)return;options.styleCursor&&(target._doc.documentElement.style.cursor=getActionCursor(action)),this.resizeAxes="resize"===action.name?action.axis:null,"gesture"===action&&this.pointerIds.length<2&&(
action=null),this.prepared.name=action.name,this.prepared.axis=action.axis,this.prepared.edges=action.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[pointerIndex]=(new Date).getTime(),this.downTargets[pointerIndex]=eventTarget,pointerExtend(this.downPointer,pointer),copyCoords(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(event,target,this.element)}}else this.checkAndPreventDefault(event,this.target,this.element)},setModifications:function(coords,preEnd){var target=this.target,shouldMove=!0,shouldSnap=checkSnap(target,
this.prepared.name)&&(!target.options[this.prepared.name].snap.endOnly||preEnd),shouldRestrict=checkRestrict(target,this.prepared.name)&&(!target.options[this.prepared.name].restrict.endOnly||preEnd);return shouldSnap?this.setSnapping(coords):this.snapStatus.locked=!1,shouldRestrict?this.setRestriction(coords):this.restrictStatus.restricted=!1,shouldSnap&&this.snapStatus.locked&&!this.snapStatus.changed?shouldMove=shouldRestrict&&this.restrictStatus.restricted&&this.restrictStatus.changed:shouldRestrict&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(shouldMove=!1),shouldMove},setStartOffsets:function(action,interactable,element){var width,
height,rect=interactable.getRect(element),origin=getOriginXY(interactable,element),snap=interactable.options[this.prepared.name].snap,restrict=interactable.options[this.prepared.name].restrict;rect?(this.startOffset.left=this.startCoords.page.x-rect.left,this.startOffset.top=this.startCoords.page.y-rect.top,this.startOffset.right=rect.right-this.startCoords.page.x,this.startOffset.bottom=rect.bottom-this.startCoords.page.y,width="width"in rect?rect.width:rect.right-rect.left,height="height"in rect?rect.height:rect.bottom-rect.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0)
;var snapOffset=snap&&"startCoords"===snap.offset?{x:this.startCoords.page.x-origin.x,y:this.startCoords.page.y-origin.y}:snap&&snap.offset||{x:0,y:0};if(rect&&snap&&snap.relativePoints&&snap.relativePoints.length)for(var i=0;i<snap.relativePoints.length;i++)this.snapOffsets.push({x:this.startOffset.left-width*snap.relativePoints[i].x+snapOffset.x,y:this.startOffset.top-height*snap.relativePoints[i].y+snapOffset.y});else this.snapOffsets.push(snapOffset);rect&&restrict.elementRect?(this.restrictOffset.left=this.startOffset.left-width*restrict.elementRect.left,this.restrictOffset.top=this.startOffset.top-height*restrict.elementRect.top,
this.restrictOffset.right=this.startOffset.right-width*(1-restrict.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-height*(1-restrict.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(action,interactable,element){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===action.name?2:1)||(-1===indexOf(interactions,this)&&interactions.push(this),this.prepared.name||this.setEventXY(this.startCoords,this.pointers),this.prepared.name=action.name,this.prepared.axis=action.axis,this.prepared.edges=action.edges,this.target=interactable
,this.element=element,this.setStartOffsets(action.name,interactable,element),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(pointer,event,eventTarget,curEventTarget,preEnd){if(this.inertiaStatus.active){var pageUp=this.inertiaStatus.upCoords.page,clientUp=this.inertiaStatus.upCoords.client,inertiaPosition={pageX:pageUp.x+this.inertiaStatus.sx,pageY:pageUp.y+this.inertiaStatus.sy,clientX:clientUp.x+this.inertiaStatus.sx,clientY:clientUp.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[inertiaPosition])}else this.recordPointer(pointer),this.setEventXY(this.curCoords,
this.pointers);var dx,dy,duplicateMove=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));if(this.pointerIsDown&&!this.pointerWasMoved&&(dx=this.curCoords.client.x-this.startCoords.client.x,dy=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=hypot(dx,dy)>pointerMoveTolerance),duplicateMove||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[pointerIndex]),
this.collectEventTargets(pointer,event,eventTarget,"move")),this.pointerIsDown)if(duplicateMove&&this.pointerWasMoved&&!preEnd)this.checkAndPreventDefault(event,this.target,this.element);else if(setEventDeltas(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||pointer instanceof InteractEvent&&/inertiastart/.test(pointer.type))){if(!this.interacting()&&(setEventDeltas(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){var absX=Math.abs(dx),absY=Math.abs(dy),targetAxis=this.target.options.drag.axis,axis=absY<absX?"x":absX<absY?"y":"xy";if(
"xy"!==axis&&"xy"!==targetAxis&&targetAxis!==axis){this.prepared.name=null;for(var element=eventTarget;isElement(element);){var elementInteractable=interactables.get(element);if(elementInteractable&&elementInteractable!==this.target&&!elementInteractable.options.drag.manualStart&&"drag"===elementInteractable.getAction(this.downPointer,this.downEvent,this,element).name&&checkAxis(axis,elementInteractable)){this.prepared.name="drag",this.target=elementInteractable,this.element=element;break}element=parentElement(element)}if(!this.prepared.name){var thisInteraction=this,getDraggable=function(interactable,selector,context){
var elements=ie8MatchesSelector?context.querySelectorAll(selector):void 0;if(interactable!==thisInteraction.target)return inContext(interactable,eventTarget)&&!interactable.options.drag.manualStart&&!testIgnore(interactable,element,eventTarget)&&testAllow(interactable,element,eventTarget)&&matchesSelector(element,selector,elements)&&"drag"===interactable.getAction(thisInteraction.downPointer,thisInteraction.downEvent,thisInteraction,element).name&&checkAxis(axis,interactable)&&withinInteractionLimit(interactable,element,"drag")?interactable:void 0};for(element=eventTarget;isElement(element);){var selectorInteractable=interactables.forEachSelector(
getDraggable);if(selectorInteractable){this.prepared.name="drag",this.target=selectorInteractable,this.element=element;break}element=parentElement(element)}}}}var starting=!!this.prepared.name&&!this.interacting();if(starting&&(this.target.options[this.prepared.name].manualStart||!withinInteractionLimit(this.target,this.element,this.prepared)))return void this.stop(event);if(this.prepared.name&&this.target)starting&&this.start(this.prepared,this.target,this.element),(this.setModifications(this.curCoords.page,preEnd)||starting)&&(this.prevEvent=this[this.prepared.name+"Move"](event)),this.checkAndPreventDefault(event,this.target,this.element)}copyCoords(
this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&this.autoScrollMove(pointer)}},dragStart:function(event){var dragEvent=new InteractEvent(this,event,"drag","start",this.element);this.dragging=!0,this.target.fire(dragEvent),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var dropEvents=this.getDropEvents(event,dragEvent);return dropEvents.activate&&this.fireActiveDrops(dropEvents.activate),dragEvent},dragMove:function(event){var target=this.target,dragEvent=new InteractEvent(this,event,"drag","move",this.element),draggableElement=this.element,
drop=this.getDrop(dragEvent,event,draggableElement);this.dropTarget=drop.dropzone,this.dropElement=drop.element;var dropEvents=this.getDropEvents(event,dragEvent);return target.fire(dragEvent),dropEvents.leave&&this.prevDropTarget.fire(dropEvents.leave),dropEvents.enter&&this.dropTarget.fire(dropEvents.enter),dropEvents.move&&this.dropTarget.fire(dropEvents.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,dragEvent},resizeStart:function(event){var resizeEvent=new InteractEvent(this,event,"resize","start",this.element);if(this.prepared.edges){var startRect=this.target.getRect(this.element);if(
this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var linkedEdges=extend({},this.prepared.edges);linkedEdges.top=linkedEdges.top||linkedEdges.left&&!linkedEdges.bottom,linkedEdges.left=linkedEdges.left||linkedEdges.top&&!linkedEdges.right,linkedEdges.bottom=linkedEdges.bottom||linkedEdges.right&&!linkedEdges.top,linkedEdges.right=linkedEdges.right||linkedEdges.bottom&&!linkedEdges.left,this.prepared._linkedEdges=linkedEdges}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=startRect.width/startRect.height),this.resizeRects={start:startRect,current:extend({},
startRect),restricted:extend({},startRect),previous:extend({},startRect),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},resizeEvent.rect=this.resizeRects.restricted,resizeEvent.deltaRect=this.resizeRects.delta}return this.target.fire(resizeEvent),this.resizing=!0,resizeEvent},resizeMove:function(event){var resizeEvent=new InteractEvent(this,event,"resize","move",this.element),edges=this.prepared.edges,invert=this.target.options.resize.invert,invertible="reposition"===invert||"negate"===invert;if(edges){var swap,dx=resizeEvent.dx,dy=resizeEvent.dy,start=this.resizeRects.start,current=this.resizeRects.current,restricted=this.resizeRects.restricted,
delta=this.resizeRects.delta,previous=extend(this.resizeRects.previous,restricted),originalEdges=edges;if(this.target.options.resize.preserveAspectRatio){var resizeStartAspectRatio=this.resizeStartAspectRatio;edges=this.prepared._linkedEdges,originalEdges.left&&originalEdges.bottom||originalEdges.right&&originalEdges.top?dy=-dx/resizeStartAspectRatio:originalEdges.left||originalEdges.right?dy=dx/resizeStartAspectRatio:(originalEdges.top||originalEdges.bottom)&&(dx=dy*resizeStartAspectRatio)}else this.target.options.resize.square&&(edges=this.prepared._linkedEdges,
originalEdges.left&&originalEdges.bottom||originalEdges.right&&originalEdges.top?dy=-dx:originalEdges.left||originalEdges.right?dy=dx:(originalEdges.top||originalEdges.bottom)&&(dx=dy));if(edges.top&&(current.top+=dy),edges.bottom&&(current.bottom+=dy),edges.left&&(current.left+=dx),edges.right&&(current.right+=dx),invertible){if(extend(restricted,current),"reposition"===invert)restricted.top>restricted.bottom&&(swap=restricted.top,restricted.top=restricted.bottom,restricted.bottom=swap),restricted.left>restricted.right&&(swap=restricted.left,restricted.left=restricted.right,restricted.right=swap)}else restricted.top=Math.min(current.top,start.bottom),
restricted.bottom=Math.max(current.bottom,start.top),restricted.left=Math.min(current.left,start.right),restricted.right=Math.max(current.right,start.left);for(var edge in restricted.width=restricted.right-restricted.left,restricted.height=restricted.bottom-restricted.top,restricted)delta[edge]=restricted[edge]-previous[edge];resizeEvent.edges=this.prepared.edges,resizeEvent.rect=restricted,resizeEvent.deltaRect=delta}return this.target.fire(resizeEvent),resizeEvent},gestureStart:function(event){var gestureEvent=new InteractEvent(this,event,"gesture","start",this.element);return gestureEvent.ds=0,
this.gesture.startDistance=this.gesture.prevDistance=gestureEvent.distance,this.gesture.startAngle=this.gesture.prevAngle=gestureEvent.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(gestureEvent),gestureEvent},gestureMove:function(event){return this.pointerIds.length?((gestureEvent=new InteractEvent(this,event,"gesture","move",this.element)).ds=gestureEvent.scale-this.gesture.scale,this.target.fire(gestureEvent),this.gesture.prevAngle=gestureEvent.angle,this.gesture.prevDistance=gestureEvent.distance,gestureEvent.scale===1/0||null===gestureEvent.scale||void 0===gestureEvent.scale||isNaN(gestureEvent.scale)||(
this.gesture.scale=gestureEvent.scale),gestureEvent):this.prevEvent;var gestureEvent},pointerHold:function(pointer,event,eventTarget){this.collectEventTargets(pointer,event,eventTarget,"hold")},pointerUp:function(pointer,event,eventTarget,curEventTarget){var pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));clearTimeout(this.holdTimers[pointerIndex]),this.collectEventTargets(pointer,event,eventTarget,"up"),this.collectEventTargets(pointer,event,eventTarget,"tap"),this.pointerEnd(pointer,event,eventTarget,curEventTarget),this.removePointer(pointer)},pointerCancel:function(pointer,event,eventTarget,curEventTarget){
var pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));clearTimeout(this.holdTimers[pointerIndex]),this.collectEventTargets(pointer,event,eventTarget,"cancel"),this.pointerEnd(pointer,event,eventTarget,curEventTarget),this.removePointer(pointer)},ie8Dblclick:function(pointer,event,eventTarget){this.prevTap&&event.clientX===this.prevTap.clientX&&event.clientY===this.prevTap.clientY&&eventTarget===this.prevTap.target&&(this.downTargets[0]=eventTarget,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(pointer,event,eventTarget,"tap"))},pointerEnd:function(pointer,event,eventTarget,curEventTarget){var endEvent,
target=this.target,options=target&&target.options,inertiaOptions=options&&this.prepared.name&&options[this.prepared.name].inertia,inertiaStatus=this.inertiaStatus;if(this.interacting()){if(inertiaStatus.active&&!inertiaStatus.ending)return;var pointerSpeed,inertiaPossible,inertia,now=(new Date).getTime(),smoothEnd=!1,endSnap=checkSnap(target,this.prepared.name)&&options[this.prepared.name].snap.endOnly,endRestrict=checkRestrict(target,this.prepared.name)&&options[this.prepared.name].restrict.endOnly,dx=0,dy=0;if(pointerSpeed=this.dragging?"x"===options.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===options.drag.axis?Math.abs(
this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,inertia=(inertiaPossible=inertiaOptions&&inertiaOptions.enabled&&"gesture"!==this.prepared.name&&event!==inertiaStatus.startEvent)&&now-this.curCoords.timeStamp<50&&pointerSpeed>inertiaOptions.minSpeed&&pointerSpeed>inertiaOptions.endSpeed,inertiaPossible&&!inertia&&(endSnap||endRestrict)){var snapRestrict={};snapRestrict.snap=snapRestrict.restrict=snapRestrict,endSnap&&(this.setSnapping(this.curCoords.page,snapRestrict),snapRestrict.locked&&(dx+=snapRestrict.dx,dy+=snapRestrict.dy)),endRestrict&&(this.setRestriction(this.curCoords.page,snapRestrict),
snapRestrict.restricted&&(dx+=snapRestrict.dx,dy+=snapRestrict.dy)),(dx||dy)&&(smoothEnd=!0)}if(inertia||smoothEnd){if(copyCoords(inertiaStatus.upCoords,this.curCoords),this.pointers[0]=inertiaStatus.startEvent=new InteractEvent(this,event,this.prepared.name,"inertiastart",this.element),inertiaStatus.t0=now,target.fire(inertiaStatus.startEvent),inertia){inertiaStatus.vx0=this.pointerDelta.client.vx,inertiaStatus.vy0=this.pointerDelta.client.vy,inertiaStatus.v0=pointerSpeed,this.calcInertia(inertiaStatus);var statusObject,page=extend({},this.curCoords.page),origin=getOriginXY(target,this.element);if(page.x=page.x+inertiaStatus.xe-origin.x,
page.y=page.y+inertiaStatus.ye-origin.y,(statusObject={useStatusXY:!0,x:page.x,y:page.y,dx:0,dy:0,snap:null}).snap=statusObject,dx=dy=0,endSnap){var snap=this.setSnapping(this.curCoords.page,statusObject);snap.locked&&(dx+=snap.dx,dy+=snap.dy)}if(endRestrict){var restrict=this.setRestriction(this.curCoords.page,statusObject);restrict.restricted&&(dx+=restrict.dx,dy+=restrict.dy)}inertiaStatus.modifiedXe+=dx,inertiaStatus.modifiedYe+=dy,inertiaStatus.i=reqFrame(this.boundInertiaFrame)}else inertiaStatus.smoothEnd=!0,inertiaStatus.xe=dx,inertiaStatus.ye=dy,inertiaStatus.sx=inertiaStatus.sy=0,inertiaStatus.i=reqFrame(this.boundSmoothEndFrame);return void(
inertiaStatus.active=!0)}(endSnap||endRestrict)&&this.pointerMove(pointer,event,eventTarget,curEventTarget,!0)}if(this.dragging){endEvent=new InteractEvent(this,event,"drag","end",this.element);var draggableElement=this.element,drop=this.getDrop(endEvent,event,draggableElement);this.dropTarget=drop.dropzone,this.dropElement=drop.element;var dropEvents=this.getDropEvents(event,endEvent);dropEvents.leave&&this.prevDropTarget.fire(dropEvents.leave),dropEvents.enter&&this.dropTarget.fire(dropEvents.enter),dropEvents.drop&&this.dropTarget.fire(dropEvents.drop),dropEvents.deactivate&&this.fireActiveDrops(dropEvents.deactivate),target.fire(endEvent)
}else this.resizing?(endEvent=new InteractEvent(this,event,"resize","end",this.element),target.fire(endEvent)):this.gesturing&&(endEvent=new InteractEvent(this,event,"gesture","end",this.element),target.fire(endEvent));this.stop(event)},collectDrops:function(element){var i,drops=[],elements=[];for(element=element||this.element,i=0;i<interactables.length;i++)if(interactables[i].options.drop.enabled){var current=interactables[i],accept=current.options.drop.accept;if(!(isElement(accept)&&accept!==element||isString(accept)&&!matchesSelector(element,accept)))for(var dropElements=current.selector?current._context.querySelectorAll(current.selector):[
current._element],j=0,len=dropElements.length;j<len;j++){var currentElement=dropElements[j];currentElement!==element&&(drops.push(current),elements.push(currentElement))}}return{dropzones:drops,elements:elements}},fireActiveDrops:function(event){var i,current,currentElement,prevElement;for(i=0;i<this.activeDrops.dropzones.length;i++)current=this.activeDrops.dropzones[i],(currentElement=this.activeDrops.elements[i])!==prevElement&&(event.target=currentElement,current.fire(event)),prevElement=currentElement},setActiveDrops:function(dragElement){var possibleDrops=this.collectDrops(dragElement,!0);this.activeDrops.dropzones=possibleDrops.dropzones,
this.activeDrops.elements=possibleDrops.elements,this.activeDrops.rects=[];for(var i=0;i<this.activeDrops.dropzones.length;i++)this.activeDrops.rects[i]=this.activeDrops.dropzones[i].getRect(this.activeDrops.elements[i])},getDrop:function(dragEvent,event,dragElement){var validDrops=[];dynamicDrop&&this.setActiveDrops(dragElement);for(var j=0;j<this.activeDrops.dropzones.length;j++){var current=this.activeDrops.dropzones[j],currentElement=this.activeDrops.elements[j],rect=this.activeDrops.rects[j];validDrops.push(current.dropCheck(dragEvent,event,this.target,dragElement,currentElement,rect)?currentElement:null)}var dropIndex=function(elements){var dropzone,
parent,child,i,n,deepestZone=elements[0],index=deepestZone?0:-1,deepestZoneParents=[],dropzoneParents=[];for(i=1;i<elements.length;i++)if((dropzone=elements[i])&&dropzone!==deepestZone)if(deepestZone){if(dropzone.parentNode!==dropzone.ownerDocument)if(deepestZone.parentNode!==dropzone.ownerDocument){if(!deepestZoneParents.length)for(parent=deepestZone;parent.parentNode&&parent.parentNode!==parent.ownerDocument;)deepestZoneParents.unshift(parent),parent=parent.parentNode;if(deepestZone instanceof HTMLElement&&dropzone instanceof SVGElement&&!(dropzone instanceof SVGSVGElement)){if(dropzone===deepestZone.parentNode)continue;parent=dropzone.ownerSVGElement
}else parent=dropzone;for(dropzoneParents=[];parent.parentNode!==parent.ownerDocument;)dropzoneParents.unshift(parent),parent=parent.parentNode;for(n=0;dropzoneParents[n]&&dropzoneParents[n]===deepestZoneParents[n];)n++;var parents=[dropzoneParents[n-1],dropzoneParents[n],deepestZoneParents[n]];for(child=parents[0].lastChild;child;){if(child===parents[1]){deepestZone=dropzone,index=i,deepestZoneParents=[];break}if(child===parents[2])break;child=child.previousSibling}}else deepestZone=dropzone,index=i}else deepestZone=dropzone,index=i;return index}(validDrops);return{dropzone:this.activeDrops.dropzones[dropIndex]||null,
element:this.activeDrops.elements[dropIndex]||null}},getDropEvents:function(pointerEvent,dragEvent){var dropEvents={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(dropEvents.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dragleave"},dragEvent.dragLeave=this.prevDropElement,dragEvent.prevDropzone=this.prevDropTarget),this.dropTarget&&(dropEvents.enter={target:this.dropElement,dropzone:this.dropTarget,
relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dragenter"},dragEvent.dragEnter=this.dropElement,dragEvent.dropzone=this.dropTarget)),"dragend"===dragEvent.type&&this.dropTarget&&(dropEvents.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"drop"},dragEvent.dropzone=this.dropTarget),"dragstart"===dragEvent.type&&(dropEvents.activate={target:null,dropzone:null,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,
dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dropactivate"}),"dragend"===dragEvent.type&&(dropEvents.deactivate={target:null,dropzone:null,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dropdeactivate"}),"dragmove"===dragEvent.type&&this.dropTarget&&(dropEvents.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,dragmove:dragEvent,timeStamp:dragEvent.timeStamp,type:"dropmove"},dragEvent.dropzone=this.dropTarget),dropEvents},
currentAction:function(){return(this.dragging?"drag":this.resizing&&"resize")||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null,this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(event){if(this.interacting()){autoScroll.stop(),this.matches=[],this.matchElements=[];var target=this.target;target.options.styleCursor&&(target._doc.documentElement.style.cursor=""),event&&isFunction(event.preventDefault)&&this.checkAndPreventDefault(event,target,this.element),this.dragging&&(
this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets(),this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var i=0;i<this.pointers.length;i++)-1===indexOf(this.pointerIds,getPointerId(this.pointers[i]))&&this.pointers.splice(i,1)},inertiaFrame:function(){var startX,startY,cpX,cpY,endX,endY,position,inertiaStatus=this.inertiaStatus,lambda=this.target.options[this.prepared.name].inertia.resistance,t=(new Date).getTime()/1e3-inertiaStatus.t0;if(t<inertiaStatus.te){var progress=1-(
Math.exp(-lambda*t)-inertiaStatus.lambda_v0)/inertiaStatus.one_ve_v0;if(inertiaStatus.modifiedXe===inertiaStatus.xe&&inertiaStatus.modifiedYe===inertiaStatus.ye)inertiaStatus.sx=inertiaStatus.xe*progress,inertiaStatus.sy=inertiaStatus.ye*progress;else{var quadPoint=(startY=startX=0,cpX=inertiaStatus.xe,cpY=inertiaStatus.ye,endX=inertiaStatus.modifiedXe,endY=inertiaStatus.modifiedYe,{x:_getQBezierValue(position=progress,startX,cpX,endX),y:_getQBezierValue(position,startY,cpY,endY)});inertiaStatus.sx=quadPoint.x,inertiaStatus.sy=quadPoint.y}this.pointerMove(inertiaStatus.startEvent,inertiaStatus.startEvent),inertiaStatus.i=reqFrame(this.boundInertiaFrame)
}else inertiaStatus.ending=!0,inertiaStatus.sx=inertiaStatus.modifiedXe,inertiaStatus.sy=inertiaStatus.modifiedYe,this.pointerMove(inertiaStatus.startEvent,inertiaStatus.startEvent),this.pointerEnd(inertiaStatus.startEvent,inertiaStatus.startEvent),inertiaStatus.active=inertiaStatus.ending=!1},smoothEndFrame:function(){var inertiaStatus=this.inertiaStatus,t=(new Date).getTime()-inertiaStatus.t0,duration=this.target.options[this.prepared.name].inertia.smoothEndDuration;t<duration?(inertiaStatus.sx=easeOutQuad(t,0,inertiaStatus.xe,duration),inertiaStatus.sy=easeOutQuad(t,0,inertiaStatus.ye,duration),this.pointerMove(inertiaStatus.startEvent,
inertiaStatus.startEvent),inertiaStatus.i=reqFrame(this.boundSmoothEndFrame)):(inertiaStatus.ending=!0,inertiaStatus.sx=inertiaStatus.xe,inertiaStatus.sy=inertiaStatus.ye,this.pointerMove(inertiaStatus.startEvent,inertiaStatus.startEvent),this.pointerEnd(inertiaStatus.startEvent,inertiaStatus.startEvent),inertiaStatus.smoothEnd=inertiaStatus.active=inertiaStatus.ending=!1)},addPointer:function(pointer){var id=getPointerId(pointer),index=this.mouse?0:indexOf(this.pointerIds,id);return-1===index&&(index=this.pointerIds.length),this.pointerIds[index]=id,this.pointers[index]=pointer,index},removePointer:function(pointer){var id=getPointerId(pointer),
index=this.mouse?0:indexOf(this.pointerIds,id);-1!==index&&(this.pointers.splice(index,1),this.pointerIds.splice(index,1),this.downTargets.splice(index,1),this.downTimes.splice(index,1),this.holdTimers.splice(index,1))},recordPointer:function(pointer){var index=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));-1!==index&&(this.pointers[index]=pointer)},collectEventTargets:function(pointer,event,eventTarget,eventType){var pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));if("tap"!==eventType||!this.pointerWasMoved&&this.downTargets[pointerIndex]&&this.downTargets[pointerIndex]===eventTarget){for(var targets=[],elements=[],
element=eventTarget;element;)interact.isSet(element)&&interact(element)._iEvents[eventType]&&(targets.push(interact(element)),elements.push(element)),interactables.forEachSelector(collectSelectors),element=parentElement(element);(targets.length||"tap"===eventType)&&this.firePointers(pointer,event,eventTarget,targets,elements,eventType)}function collectSelectors(interactable,selector,context){var els=ie8MatchesSelector?context.querySelectorAll(selector):void 0;interactable._iEvents[eventType]&&isElement(element)&&inContext(interactable,element)&&!testIgnore(interactable,element,eventTarget)&&testAllow(interactable,element,eventTarget)&&matchesSelector(element
,selector,els)&&(targets.push(interactable),elements.push(element))}},firePointers:function(pointer,event,eventTarget,targets,elements,eventType){var i,interval,createNewDoubleTap,pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer)),pointerEvent={};for("doubletap"===eventType?pointerEvent=pointer:(pointerExtend(pointerEvent,event),event!==pointer&&pointerExtend(pointerEvent,pointer),pointerEvent.preventDefault=preventOriginalDefault,pointerEvent.stopPropagation=InteractEvent.prototype.stopPropagation,pointerEvent.stopImmediatePropagation=InteractEvent.prototype.stopImmediatePropagation,pointerEvent.interaction=this,
pointerEvent.timeStamp=(new Date).getTime(),pointerEvent.originalEvent=event,pointerEvent.originalPointer=pointer,pointerEvent.type=eventType,pointerEvent.pointerId=getPointerId(pointer),pointerEvent.pointerType=this.mouse?"mouse":supportsPointerEvent?isString(pointer.pointerType)?pointer.pointerType:[,,"touch","pen","mouse"][pointer.pointerType]:"touch"),"tap"===eventType&&(pointerEvent.dt=pointerEvent.timeStamp-this.downTimes[pointerIndex],interval=pointerEvent.timeStamp-this.tapTime,createNewDoubleTap=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===pointerEvent.target&&interval<500),pointerEvent.double=createNewDoubleTap,
this.tapTime=pointerEvent.timeStamp),i=0;i<targets.length&&(pointerEvent.currentTarget=elements[i],pointerEvent.interactable=targets[i],targets[i].fire(pointerEvent),!(pointerEvent.immediatePropagationStopped||pointerEvent.propagationStopped&&elements[i+1]!==pointerEvent.currentTarget));i++);if(createNewDoubleTap){var doubleTap={};extend(doubleTap,pointerEvent),doubleTap.dt=interval,doubleTap.type="doubletap",this.collectEventTargets(doubleTap,event,eventTarget,"doubletap"),this.prevTap=doubleTap}else"tap"===eventType&&(this.prevTap=pointerEvent)},validateSelector:function(pointer,event,matches,matchElements){for(var i=0,len=matches.length;i<len;i++){
var match=matches[i],matchElement=matchElements[i],action=validateAction(match.getAction(pointer,event,this,matchElement),match);if(action&&withinInteractionLimit(match,matchElement,action))return this.target=match,this.element=matchElement,action}},setSnapping:function(pageCoords,status){var target,page,i,snap=this.target.options[this.prepared.name].snap,targets=[];if((status=status||this.snapStatus).useStatusXY)page={x:status.x,y:status.y};else{var origin=getOriginXY(this.target,this.element);(page=extend({},pageCoords)).x-=origin.x,page.y-=origin.y}status.realX=page.x,status.realY=page.y,page.x=page.x-this.inertiaStatus.resumeDx,
page.y=page.y-this.inertiaStatus.resumeDy;for(var len=snap.targets?snap.targets.length:0,relIndex=0;relIndex<this.snapOffsets.length;relIndex++){var relative={x:page.x-this.snapOffsets[relIndex].x,y:page.y-this.snapOffsets[relIndex].y};for(i=0;i<len;i++)(target=isFunction(snap.targets[i])?snap.targets[i](relative.x,relative.y,this):snap.targets[i])&&targets.push({x:isNumber(target.x)?target.x+this.snapOffsets[relIndex].x:relative.x,y:isNumber(target.y)?target.y+this.snapOffsets[relIndex].y:relative.y,range:isNumber(target.range)?target.range:snap.range})}var snapChanged,closest={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(i=0,
len=targets.length;i<len;i++){var range=(target=targets[i]).range,dx=target.x-page.x,dy=target.y-page.y,distance=hypot(dx,dy),inRange=distance<=range;range===1/0&&closest.inRange&&closest.range!==1/0&&(inRange=!1),closest.target&&!(inRange?closest.inRange&&range!==1/0?distance/range<closest.distance/closest.range:range===1/0&&closest.range!==1/0||distance<closest.distance:!closest.inRange&&distance<closest.distance)||(range===1/0&&(inRange=!0),closest.target=target,closest.distance=distance,closest.range=range,closest.inRange=inRange,closest.dx=dx,closest.dy=dy,status.range=range)}return closest.target?(
snapChanged=status.snappedX!==closest.target.x||status.snappedY!==closest.target.y,status.snappedX=closest.target.x,status.snappedY=closest.target.y):(snapChanged=!0,status.snappedX=NaN,status.snappedY=NaN),status.dx=closest.dx,status.dy=closest.dy,status.changed=snapChanged||closest.inRange&&!status.locked,status.locked=closest.inRange,status},setRestriction:function(pageCoords,status){var page,rect,restrictedX,restrictedY,target=this.target,restrict=target&&target.options[this.prepared.name].restrict,restriction=restrict&&restrict.restriction;return restriction?(page=page=(status=status||this.restrictStatus).useStatusXY?{x:status.x,y:status.y}:extend({},
pageCoords),status.snap&&status.snap.locked&&(page.x+=status.snap.dx||0,page.y+=status.snap.dy||0),page.x-=this.inertiaStatus.resumeDx,page.y-=this.inertiaStatus.resumeDy,status.dx=0,status.dy=0,status.restricted=!1,isString(restriction)&&!(restriction="parent"===restriction?parentElement(this.element):"self"===restriction?target.getRect(this.element):closest(this.element,restriction))||(isFunction(restriction)&&(restriction=restriction(page.x,page.y,this.element)),isElement(restriction)&&(restriction=getElementRect(restriction)),restrictedY=(rect=restriction)?"x"in restriction&&"y"in restriction?(restrictedX=Math.max(Math.min(
rect.x+rect.width-this.restrictOffset.right,page.x),rect.x+this.restrictOffset.left),Math.max(Math.min(rect.y+rect.height-this.restrictOffset.bottom,page.y),rect.y+this.restrictOffset.top)):(restrictedX=Math.max(Math.min(rect.right-this.restrictOffset.right,page.x),rect.left+this.restrictOffset.left),Math.max(Math.min(rect.bottom-this.restrictOffset.bottom,page.y),rect.top+this.restrictOffset.top)):(restrictedX=page.x,page.y),status.dx=restrictedX-page.x,status.dy=restrictedY-page.y,status.changed=status.restrictedX!==restrictedX||status.restrictedY!==restrictedY,status.restricted=!(!status.dx&&!status.dy),status.restrictedX=restrictedX,
status.restrictedY=restrictedY),status):status},checkAndPreventDefault:function(event,interactable,element){if(interactable=interactable||this.target){var options=interactable.options,prevent=options.preventDefault;if("auto"!==prevent||!element||/^(input|select|textarea)$/i.test(event.target.nodeName))"always"!==prevent||event.preventDefault();else{if(/down|start/i.test(event.type)&&"drag"===this.prepared.name&&"xy"!==options.drag.axis)return;if(options[this.prepared.name]&&options[this.prepared.name].manualStart&&!this.interacting())return;event.preventDefault()}}},calcInertia:function(status){
var inertiaOptions=this.target.options[this.prepared.name].inertia,lambda=inertiaOptions.resistance,inertiaDur=-Math.log(inertiaOptions.endSpeed/status.v0)/lambda;status.x0=this.prevEvent.pageX,status.y0=this.prevEvent.pageY,status.t0=status.startEvent.timeStamp/1e3,status.sx=status.sy=0,status.modifiedXe=status.xe=(status.vx0-inertiaDur)/lambda,status.modifiedYe=status.ye=(status.vy0-inertiaDur)/lambda,status.te=inertiaDur,status.lambda_v0=lambda/status.v0,status.one_ve_v0=1-inertiaOptions.endSpeed/status.v0},autoScrollMove:function(pointer){if(this.interacting()&&function(interactable,action){var options=interactable.options;return/^resize/.test(action)&&(
action="resize"),options[action].autoScroll&&options[action].autoScroll.enabled}(this.target,this.prepared.name))if(this.inertiaStatus.active)autoScroll.x=autoScroll.y=0;else{var top,right,bottom,left,options=this.target.options[this.prepared.name].autoScroll,container=options.container||getWindow(this.element);if(isWindow(container))left=pointer.clientX<autoScroll.margin,top=pointer.clientY<autoScroll.margin,right=pointer.clientX>container.innerWidth-autoScroll.margin,bottom=pointer.clientY>container.innerHeight-autoScroll.margin;else{var rect=getElementClientRect(container);left=pointer.clientX<rect.left+autoScroll.margin,
top=pointer.clientY<rect.top+autoScroll.margin,right=pointer.clientX>rect.right-autoScroll.margin,bottom=pointer.clientY>rect.bottom-autoScroll.margin}autoScroll.x=right?1:left?-1:0,autoScroll.y=bottom?1:top?-1:0,autoScroll.isScrolling||(autoScroll.margin=options.margin,autoScroll.speed=options.speed,autoScroll.start(this))}},_updateEventTargets:function(target,currentTarget){this._eventTarget=target,this._curEventTarget=currentTarget}},InteractEvent.prototype={preventDefault:blank,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var listeners={},
interactionListeners=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer","autoScrollMove"],i=0,len=interactionListeners.length;i<len;i++){var name=interactionListeners[i];listeners[name]=doOnInteractions(name)}interactables.indexOfElement=function(element,context){context=context||document;for(var i=0;i<this.length;i++){var interactable=this[i];if(
interactable.selector===element&&interactable._context===context||!interactable.selector&&interactable._element===element)return i}return-1},interactables.get=function(element,options){return this[this.indexOfElement(element,options&&options.context)]},interactables.forEachSelector=function(callback){for(var i=0;i<this.length;i++){var interactable=this[i];if(interactable.selector){var ret=callback(interactable,interactable.selector,interactable._context,i,this);if(void 0!==ret)return ret}}},(Interactable.prototype={setOnEvents:function(action,phases){return"drop"===action?(isFunction(phases.ondrop)&&(this.ondrop=phases.ondrop),isFunction(
phases.ondropactivate)&&(this.ondropactivate=phases.ondropactivate),isFunction(phases.ondropdeactivate)&&(this.ondropdeactivate=phases.ondropdeactivate),isFunction(phases.ondragenter)&&(this.ondragenter=phases.ondragenter),isFunction(phases.ondragleave)&&(this.ondragleave=phases.ondragleave),isFunction(phases.ondropmove)&&(this.ondropmove=phases.ondropmove)):(action="on"+action,isFunction(phases.onstart)&&(this[action+"start"]=phases.onstart),isFunction(phases.onmove)&&(this[action+"move"]=phases.onmove),isFunction(phases.onend)&&(this[action+"end"]=phases.onend),isFunction(phases.oninertiastart)&&(this[action+"inertiastart"]=phases.oninertiastart)),this},
draggable:function(options){return isObject(options)?(this.options.drag.enabled=!1!==options.enabled,this.setPerAction("drag",options),this.setOnEvents("drag",options),/^x$|^y$|^xy$/.test(options.axis)?this.options.drag.axis=options.axis:null===options.axis&&delete this.options.drag.axis,this):isBool(options)?(this.options.drag.enabled=options,this):this.options.drag},setPerAction:function(action,options){for(var option in options)option in defaultOptions[action]&&(isObject(options[option])?(this.options[action][option]=extend(this.options[action][option]||{},options[option]),isObject(defaultOptions.perAction[option]
)&&"enabled"in defaultOptions.perAction[option]&&(this.options[action][option].enabled=!1!==options[option].enabled)):isBool(options[option])&&isObject(defaultOptions.perAction[option])?this.options[action][option].enabled=options[option]:void 0!==options[option]&&(this.options[action][option]=options[option]))},dropzone:function(options){return isObject(options)?(this.options.drop.enabled=!1!==options.enabled,this.setOnEvents("drop",options),/^(pointer|center)$/.test(options.overlap)?this.options.drop.overlap=options.overlap:isNumber(options.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,options.overlap),0)),"accept"in options&&(
this.options.drop.accept=options.accept),"checker"in options&&(this.options.drop.checker=options.checker),this):isBool(options)?(this.options.drop.enabled=options,this):this.options.drop},dropCheck:function(dragEvent,event,draggable,draggableElement,dropElement,rect){var dropped=!1;if(!(rect=rect||this.getRect(dropElement)))return!!this.options.drop.checker&&this.options.drop.checker(dragEvent,event,dropped,this,dropElement,draggable,draggableElement);var dropOverlap=this.options.drop.overlap;if("pointer"===dropOverlap){var horizontal,vertical,page=getPageXY(dragEvent),origin=getOriginXY(draggable,draggableElement);page.x+=origin.x,page.y+=origin.y,
horizontal=page.x>rect.left&&page.x<rect.right,vertical=page.y>rect.top&&page.y<rect.bottom,dropped=horizontal&&vertical}var dragRect=draggable.getRect(draggableElement);if("center"===dropOverlap){var cx=dragRect.left+dragRect.width/2,cy=dragRect.top+dragRect.height/2;dropped=cx>=rect.left&&cx<=rect.right&&cy>=rect.top&&cy<=rect.bottom}isNumber(dropOverlap)&&(dropped=dropOverlap<=Math.max(0,Math.min(rect.right,dragRect.right)-Math.max(rect.left,dragRect.left))*Math.max(0,Math.min(rect.bottom,dragRect.bottom)-Math.max(rect.top,dragRect.top))/(dragRect.width*dragRect.height));return this.options.drop.checker&&(dropped=this.options.drop.checker(dragEvent,event,
dropped,this,dropElement,draggable,draggableElement)),dropped},dropChecker:function(checker){return isFunction(checker)?(this.options.drop.checker=checker,this):null===checker?(delete this.options.getRect,this):this.options.drop.checker},accept:function(newValue){return isElement(newValue)?(this.options.drop.accept=newValue,this):trySelector(newValue)?(this.options.drop.accept=newValue,this):null===newValue?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(options){return isObject(options)?(this.options.resize.enabled=!1!==options.enabled,this.setPerAction("resize",options),this.setOnEvents("resize",options),
/^x$|^y$|^xy$/.test(options.axis)?this.options.resize.axis=options.axis:null===options.axis&&(this.options.resize.axis=defaultOptions.resize.axis),isBool(options.preserveAspectRatio)?this.options.resize.preserveAspectRatio=options.preserveAspectRatio:isBool(options.square)&&(this.options.resize.square=options.square),this):isBool(options)?(this.options.resize.enabled=options,this):this.options.resize},squareResize:function(newValue){return isBool(newValue)?(this.options.resize.square=newValue,this):null===newValue?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(options){return isObject(options)?(
this.options.gesture.enabled=!1!==options.enabled,this.setPerAction("gesture",options),this.setOnEvents("gesture",options),this):isBool(options)?(this.options.gesture.enabled=options,this):this.options.gesture},autoScroll:function(options){return isObject(options)?options=extend({actions:["drag","resize"]},options):isBool(options)&&(options={actions:["drag","resize"],enabled:options}),this.setOptions("autoScroll",options)},snap:function(options){var ret=this.setOptions("snap",options);return ret===this?this:ret.drag},setOptions:function(option,options){var i,actions=options&&isArray(options.actions)?options.actions:["drag"];if(isObject(options)||isBool(
options)){for(i=0;i<actions.length;i++){var action=/resize/.test(actions[i])?"resize":actions[i];if(isObject(this.options[action])){var thisOption=this.options[action][option];isObject(options)?(extend(thisOption,options),thisOption.enabled=!1!==options.enabled,"snap"===option&&("grid"===thisOption.mode?thisOption.targets=[interact.createSnapGrid(extend({offset:thisOption.gridOffset||{x:0,y:0}},thisOption.grid||{}))]:"anchor"===thisOption.mode?thisOption.targets=thisOption.anchors:"path"===thisOption.mode&&(thisOption.targets=thisOption.paths),"elementOrigin"in options&&(thisOption.relativePoints=[options.elementOrigin]))):isBool(options)&&(
thisOption.enabled=options)}}return this}var ret={},allActions=["drag","resize","gesture"];for(i=0;i<allActions.length;i++)option in defaultOptions[allActions[i]]&&(ret[allActions[i]]=this.options[allActions[i]][option]);return ret},inertia:function(options){var ret=this.setOptions("inertia",options);return ret===this?this:ret.drag},getAction:function(pointer,event,interaction,element){var action=this.defaultActionChecker(pointer,interaction,element);return this.options.actionChecker?this.options.actionChecker(pointer,event,action,this,element,interaction):action},defaultActionChecker:defaultActionChecker,actionChecker:function(checker){return isFunction(
checker)?(this.options.actionChecker=checker,this):null===checker?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(element){return element=element||this._element,this.selector&&!isElement(element)&&(element=this._context.querySelector(this.selector)),getElementRect(element)},rectChecker:function(checker){return isFunction(checker)?(this.getRect=checker,this):null===checker?(delete this.options.getRect,this):this.getRect},styleCursor:function(newValue){return isBool(newValue)?(this.options.styleCursor=newValue,this):null===newValue?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(
newValue){return/^(always|never|auto)$/.test(newValue)?(this.options.preventDefault=newValue,this):isBool(newValue)?(this.options.preventDefault=newValue?"always":"never",this):this.options.preventDefault},origin:function(newValue){return trySelector(newValue)?(this.options.origin=newValue,this):isObject(newValue)?(this.options.origin=newValue,this):this.options.origin},deltaSource:function(newValue){return"page"===newValue||"client"===newValue?(this.options.deltaSource=newValue,this):this.options.deltaSource},restrict:function(options){if(!isObject(options))return this.setOptions("restrict",options);for(var ret,actions=["drag","resize","gesture"],
i=0;i<actions.length;i++){var action=actions[i];if(action in options){var perAction=extend({actions:[action],restriction:options[action]},options);ret=this.setOptions("restrict",perAction)}}return ret},context:function(){return this._context},_context:document,ignoreFrom:function(newValue){return trySelector(newValue)?(this.options.ignoreFrom=newValue,this):isElement(newValue)?(this.options.ignoreFrom=newValue,this):this.options.ignoreFrom},allowFrom:function(newValue){return trySelector(newValue)?(this.options.allowFrom=newValue,this):isElement(newValue)?(this.options.allowFrom=newValue,this):this.options.allowFrom},element:function(){return this._element},
fire:function(iEvent){if(!iEvent||!iEvent.type||!contains(eventTypes,iEvent.type))return this;var listeners,i,len,onEvent="on"+iEvent.type;if(iEvent.type in this._iEvents)for(i=0,len=(listeners=this._iEvents[iEvent.type]).length;i<len&&!iEvent.immediatePropagationStopped;i++)listeners[i].name,listeners[i](iEvent);if(isFunction(this[onEvent])&&(this[onEvent].name,this[onEvent](iEvent)),iEvent.type in globalEvents&&(listeners=globalEvents[iEvent.type]))for(i=0,len=listeners.length;i<len&&!iEvent.immediatePropagationStopped;i++)listeners[i].name,listeners[i](iEvent);return this},on:function(eventType,listener,useCapture){var i;if(isString(eventType
)&&-1!==eventType.search(" ")&&(eventType=eventType.trim().split(/ +/)),isArray(eventType)){for(i=0;i<eventType.length;i++)this.on(eventType[i],listener,useCapture);return this}if(isObject(eventType)){for(var prop in eventType)this.on(prop,eventType[prop],listener);return this}if("wheel"===eventType&&(eventType=wheelEvent),useCapture=!!useCapture,contains(eventTypes,eventType))eventType in this._iEvents?this._iEvents[eventType].push(listener):this._iEvents[eventType]=[listener];else if(this.selector){if(!delegatedEvents[eventType])for(delegatedEvents[eventType]={selectors:[],contexts:[],listeners:[]},i=0;i<documents.length;i++)events.add(documents[i],
eventType,delegateListener),events.add(documents[i],eventType,delegateUseCapture,!0);var index,delegated=delegatedEvents[eventType];for(index=delegated.selectors.length-1;0<=index&&(delegated.selectors[index]!==this.selector||delegated.contexts[index]!==this._context);index--);-1===index&&(index=delegated.selectors.length,delegated.selectors.push(this.selector),delegated.contexts.push(this._context),delegated.listeners.push([])),delegated.listeners[index].push([listener,useCapture])}else events.add(this._element,eventType,listener,useCapture);return this},off:function(eventType,listener,useCapture){var i;if(isString(eventType)&&-1!==eventType.search(" ")&&(
eventType=eventType.trim().split(/ +/)),isArray(eventType)){for(i=0;i<eventType.length;i++)this.off(eventType[i],listener,useCapture);return this}if(isObject(eventType)){for(var prop in eventType)this.off(prop,eventType[prop],listener);return this}var eventList,index=-1;if(useCapture=!!useCapture,"wheel"===eventType&&(eventType=wheelEvent),contains(eventTypes,eventType))(eventList=this._iEvents[eventType])&&-1!==(index=indexOf(eventList,listener))&&this._iEvents[eventType].splice(index,1);else if(this.selector){var delegated=delegatedEvents[eventType],matchFound=!1;if(!delegated)return this;for(index=delegated.selectors.length-1;0<=index;index--)if(
delegated.selectors[index]===this.selector&&delegated.contexts[index]===this._context){var listeners=delegated.listeners[index];for(i=listeners.length-1;0<=i;i--){var fn=listeners[i][0],useCap=listeners[i][1];if(fn===listener&&useCap===useCapture){listeners.splice(i,1),listeners.length||(delegated.selectors.splice(index,1),delegated.contexts.splice(index,1),delegated.listeners.splice(index,1),events.remove(this._context,eventType,delegateListener),events.remove(this._context,eventType,delegateUseCapture,!0),delegated.selectors.length||(delegatedEvents[eventType]=null)),matchFound=!0;break}}if(matchFound)break}}else events.remove(this._element,eventType,
listener,useCapture);return this},set:function(options){isObject(options)||(options={}),this.options=extend({},defaultOptions.base);var i,actions=["drag","drop","resize","gesture"],methods=["draggable","dropzone","resizable","gesturable"],perActions=extend(extend({},defaultOptions.perAction),options[action]||{});for(i=0;i<actions.length;i++){var action=actions[i];this.options[action]=extend({},defaultOptions[action]),this.setPerAction(action,perActions),this[methods[i]](options[action])}var settings=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker","styleCursor"];for(i=0,
len=settings.length;i<len;i++){var setting=settings[i];this.options[setting]=defaultOptions.base[setting],setting in options&&this[setting](options[setting])}return this},unset:function(){if(events.remove(this._element,"all"),isString(this.selector))for(var type in delegatedEvents)for(var delegated=delegatedEvents[type],i=0;i<delegated.selectors.length;i++){delegated.selectors[i]===this.selector&&delegated.contexts[i]===this._context&&(delegated.selectors.splice(i,1),delegated.contexts.splice(i,1),delegated.listeners.splice(i,1),delegated.selectors.length||(delegatedEvents[type]=null)),events.remove(this._context,type,delegateListener),events.remove(
this._context,type,delegateUseCapture,!0);break}else events.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),interactables.splice(indexOf(interactables,this),1),interact}}).snap=warnOnce(Interactable.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),Interactable.prototype.restrict=warnOnce(Interactable.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),Interactable.prototype.inertia=warnOnce(Interactable.prototype.inertia,
"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),Interactable.prototype.autoScroll=warnOnce(Interactable.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),Interactable.prototype.squareResize=warnOnce(Interactable.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square"),Interactable.prototype.accept=warnOnce(Interactable.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead"),
Interactable.prototype.dropChecker=warnOnce(Interactable.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead"),Interactable.prototype.context=warnOnce(Interactable.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead"),interact.isSet=function(element,options){return-1!==interactables.indexOfElement(element,options&&options.context)},interact.on=function(type,listener,useCapture){if(isString(type)&&-1!==type.search(" ")&&(type=type.trim().split(/ +/)),isArray(type)){for(var i=0;i<type.length;i++)interact.on(type[i],listener,
useCapture);return interact}if(isObject(type)){for(var prop in type)interact.on(prop,type[prop],listener);return interact}return contains(eventTypes,type)?globalEvents[type]?globalEvents[type].push(listener):globalEvents[type]=[listener]:events.add(document,type,listener,useCapture),interact},interact.off=function(type,listener,useCapture){if(isString(type)&&-1!==type.search(" ")&&(type=type.trim().split(/ +/)),isArray(type)){for(var i=0;i<type.length;i++)interact.off(type[i],listener,useCapture);return interact}if(isObject(type)){for(var prop in type)interact.off(prop,type[prop],listener);return interact}var index;contains(eventTypes,type
)?type in globalEvents&&-1!==(index=indexOf(globalEvents[type],listener))&&globalEvents[type].splice(index,1):events.remove(document,type,listener,useCapture);return interact},interact.enableDragging=warnOnce(function(newValue){return null!=newValue?(actionIsEnabled.drag=newValue,interact):actionIsEnabled.drag},"interact.enableDragging is deprecated and will soon be removed."),interact.enableResizing=warnOnce(function(newValue){return null!=newValue?(actionIsEnabled.resize=newValue,interact):actionIsEnabled.resize},"interact.enableResizing is deprecated and will soon be removed."),interact.enableGesturing=warnOnce(function(newValue){return null!=newValue?(
actionIsEnabled.gesture=newValue,interact):actionIsEnabled.gesture},"interact.enableGesturing is deprecated and will soon be removed."),interact.eventTypes=eventTypes,interact.debug=function(){var interaction=interactions[0]||new Interaction;return{interactions:interactions,target:interaction.target,dragging:interaction.dragging,resizing:interaction.resizing,gesturing:interaction.gesturing,prepared:interaction.prepared,matches:interaction.matches,matchElements:interaction.matchElements,prevCoords:interaction.prevCoords,startCoords:interaction.startCoords,pointerIds:interaction.pointerIds,pointers:interaction.pointers,addPointer:listeners.addPointer,
removePointer:listeners.removePointer,recordPointer:listeners.recordPointer,snap:interaction.snapStatus,restrict:interaction.restrictStatus,inertia:interaction.inertiaStatus,downTime:interaction.downTimes[0],downEvent:interaction.downEvent,downPointer:interaction.downPointer,prevEvent:interaction.prevEvent,Interactable:Interactable,interactables:interactables,pointerIsDown:interaction.pointerIsDown,defaultOptions:defaultOptions,defaultActionChecker:defaultActionChecker,actionCursors:actionCursors,dragMove:listeners.dragMove,resizeMove:listeners.resizeMove,gestureMove:listeners.gestureMove,pointerUp:listeners.pointerUp,pointerDown:listeners.pointerDown,
pointerMove:listeners.pointerMove,pointerHover:listeners.pointerHover,eventTypes:eventTypes,events:events,globalEvents:globalEvents,delegatedEvents:delegatedEvents,prefixedPropREs:prefixedPropREs}},interact.getPointerAverage=pointerAverage,interact.getTouchBBox=touchBBox,interact.getTouchDistance=touchDistance,interact.getTouchAngle=touchAngle,interact.getElementRect=getElementRect,interact.getElementClientRect=getElementClientRect,interact.matchesSelector=matchesSelector,interact.closest=closest,interact.margin=warnOnce(function(newvalue){return isNumber(newvalue)?(margin=newvalue,interact):margin},
"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead."),interact.supportsTouch=function(){return supportsTouch},interact.supportsPointerEvent=function(){return supportsPointerEvent},interact.stop=function(event){for(var i=interactions.length-1;0<=i;i--)interactions[i].stop(event);return interact},interact.dynamicDrop=function(newValue){return isBool(newValue)?(dynamicDrop=newValue,interact):dynamicDrop},interact.pointerMoveTolerance=function(newValue){return isNumber(newValue)?(pointerMoveTolerance=newValue,this):pointerMoveTolerance},interact.maxInteractions=function(newValue){return isNumber(newValue)?(
maxInteractions=newValue,this):maxInteractions},interact.createSnapGrid=function(grid){return function(x,y){var offsetX=0,offsetY=0;isObject(grid.offset)&&(offsetX=grid.offset.x,offsetY=grid.offset.y);var gridx=Math.round((x-offsetX)/grid.x),gridy=Math.round((y-offsetY)/grid.y);return{x:gridx*grid.x+offsetX,y:gridy*grid.y+offsetY,range:grid.range}}},listenToDocument(document),prefixedMatchesSelector in Element.prototype&&isFunction(Element.prototype[prefixedMatchesSelector])||(ie8MatchesSelector=function(element,selector,elems){for(var i=0,len=(elems=elems||element.parentNode.querySelectorAll(selector)).length;i<len;i++)if(elems[i]===element)return!0
;return!1}),function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!realWindow.requestAnimationFrame;++x)reqFrame=realWindow[vendors[x]+"RequestAnimationFrame"],cancelFrame=realWindow[vendors[x]+"CancelAnimationFrame"]||realWindow[vendors[x]+"CancelRequestAnimationFrame"];reqFrame||(reqFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),cancelFrame||(cancelFrame=function(id){clearTimeout(id)})}(),"undefined"!=typeof exports?(
"undefined"!=typeof module&&module.exports&&(exports=module.exports=interact),exports.interact=interact):"function"==typeof define&&define.amd?define("interact",[],function(){return interact}):realWindow.interact=interact}function blank(){}function isElement(o){if(!o||"object"!=typeof o)return!1;var _window=getWindow(o)||window;return/object|function/.test(typeof _window.Element)?o instanceof _window.Element:1===o.nodeType&&"string"==typeof o.nodeName}function isWindow(thing){return thing===window||!(!thing||!thing.Window)&&thing instanceof thing.Window}function isDocFrag(thing){return!!thing&&thing instanceof DocumentFragment}function isArray(thing){
return isObject(thing)&&void 0!==typeof thing.length&&isFunction(thing.splice)}function isObject(thing){return!!thing&&"object"==typeof thing}function isFunction(thing){return"function"==typeof thing}function isNumber(thing){return"number"==typeof thing}function isBool(thing){return"boolean"==typeof thing}function isString(thing){return"string"==typeof thing}function trySelector(value){return!!isString(value)&&(document.querySelector(value),!0)}function extend(dest,source){for(var prop in source)dest[prop]=source[prop];return dest}function pointerExtend(dest,source){for(var prop in source){var deprecated=!1;for(var vendor in prefixedPropREs)if(
0===prop.indexOf(vendor)&&prefixedPropREs[vendor].test(prop)){deprecated=!0;break}deprecated||(dest[prop]=source[prop])}return dest}function copyCoords(dest,src){dest.page=dest.page||{},dest.page.x=src.page.x,dest.page.y=src.page.y,dest.client=dest.client||{},dest.client.x=src.client.x,dest.client.y=src.client.y,dest.timeStamp=src.timeStamp}function setEventDeltas(targetObj,prev,cur){targetObj.page.x=cur.page.x-prev.page.x,targetObj.page.y=cur.page.y-prev.page.y,targetObj.client.x=cur.client.x-prev.client.x,targetObj.client.y=cur.client.y-prev.client.y,targetObj.timeStamp=(new Date).getTime()-prev.timeStamp;var dt=Math.max(targetObj.timeStamp/1e3,.001)
;targetObj.page.speed=hypot(targetObj.page.x,targetObj.page.y)/dt,targetObj.page.vx=targetObj.page.x/dt,targetObj.page.vy=targetObj.page.y/dt,targetObj.client.speed=hypot(targetObj.client.x,targetObj.page.y)/dt,targetObj.client.vx=targetObj.client.x/dt,targetObj.client.vy=targetObj.client.y/dt}function isNativePointer(pointer){return pointer instanceof window.Event||supportsTouch&&window.Touch&&pointer instanceof window.Touch}function getXY(type,pointer,xy){return type=type||"page",(xy=xy||{}).x=pointer[type+"X"],xy.y=pointer[type+"Y"],xy}function getPageXY(pointer,page){return page=page||{},isOperaMobile&&isNativePointer(pointer)?(getXY("screen",pointer,
page),page.x+=window.scrollX,page.y+=window.scrollY):getXY("page",pointer,page),page}function getClientXY(pointer,client){return client=client||{},isOperaMobile&&isNativePointer(pointer)?getXY("screen",pointer,client):getXY("client",pointer,client),client}function getPointerId(pointer){return isNumber(pointer.pointerId)?pointer.pointerId:pointer.identifier}function getActualElement(element){return element instanceof SVGElementInstance?element.correspondingUseElement:element}function getWindow(node){if(isWindow(node))return node;var rootNode=node.ownerDocument||node;return rootNode.defaultView||rootNode.parentWindow||window}function getElementClientRect(
element){var clientRect=element instanceof SVGElement?element.getBoundingClientRect():element.getClientRects()[0];return clientRect&&{left:clientRect.left,right:clientRect.right,top:clientRect.top,bottom:clientRect.bottom,width:clientRect.width||clientRect.right-clientRect.left,height:clientRect.height||clientRect.bottom-clientRect.top}}function getElementRect(element){var win,clientRect=getElementClientRect(element);if(!isIOS7&&clientRect){var scroll={x:(win=(win=getWindow(element))||window).scrollX||win.document.documentElement.scrollLeft,y:win.scrollY||win.document.documentElement.scrollTop};clientRect.left+=scroll.x,clientRect.right+=scroll.x,
clientRect.top+=scroll.y,clientRect.bottom+=scroll.y}return clientRect}function getTouchPair(event){var touches=[];return isArray(event)?(touches[0]=event[0],touches[1]=event[1]):"touchend"===event.type?1===event.touches.length?(touches[0]=event.touches[0],touches[1]=event.changedTouches[0]):0===event.touches.length&&(touches[0]=event.changedTouches[0],touches[1]=event.changedTouches[1]):(touches[0]=event.touches[0],touches[1]=event.touches[1]),touches}function pointerAverage(pointers){for(var prop,average={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<pointers.length;i++)for(prop in average)average[prop]+=pointers[i][prop];for(
prop in average)average[prop]/=pointers.length;return average}function touchBBox(event){if(event.length||event.touches&&1<event.touches.length){var touches=getTouchPair(event),minX=Math.min(touches[0].pageX,touches[1].pageX),minY=Math.min(touches[0].pageY,touches[1].pageY);return{x:minX,y:minY,left:minX,top:minY,width:Math.max(touches[0].pageX,touches[1].pageX)-minX,height:Math.max(touches[0].pageY,touches[1].pageY)-minY}}}function touchDistance(event,deltaSource){var sourceX=(deltaSource=deltaSource||defaultOptions.deltaSource)+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event),dx=touches[0][sourceX]-touches[1][sourceX],
dy=touches[0][sourceY]-touches[1][sourceY];return hypot(dx,dy)}function touchAngle(event,prevAngle,deltaSource){var sourceX=(deltaSource=deltaSource||defaultOptions.deltaSource)+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event),dx=touches[0][sourceX]-touches[1][sourceX],dy=touches[0][sourceY]-touches[1][sourceY],angle=180*Math.atan(dy/dx)/Math.PI;if(isNumber(prevAngle)){var drClamped=(angle-prevAngle)%360;315<drClamped?angle-=360+angle/360|0:135<drClamped?angle-=180+angle/360|0:drClamped<-315?angle+=360+angle/360|0:drClamped<-135&&(angle+=180+angle/360|0)}return angle}function getOriginXY(interactable,element){
var origin=interactable?interactable.options.origin:defaultOptions.origin;return"parent"===origin?origin=parentElement(element):"self"===origin?origin=interactable.getRect(element):trySelector(origin)&&(origin=closest(element,origin)||{x:0,y:0}),isFunction(origin)&&(origin=origin(interactable&&element)),isElement(origin)&&(origin=getElementRect(origin)),origin.x="x"in origin?origin.x:origin.left,origin.y="y"in origin?origin.y:origin.top,origin}function _getQBezierValue(t,p1,p2,p3){var iT=1-t;return iT*iT*p1+2*iT*t*p2+t*t*p3}function easeOutQuad(t,b,c,d){return-c*(t/=d)*(t-2)+b}function nodeContains(parent,child){for(;child;){if(child===parent)return!0
;child=child.parentNode}return!1}function closest(child,selector){for(var parent=parentElement(child);isElement(parent);){if(matchesSelector(parent,selector))return parent;parent=parentElement(parent)}return null}function parentElement(node){var parent=node.parentNode;if(isDocFrag(parent)){for(;(parent=parent.host)&&isDocFrag(parent););return parent}return parent}function inContext(interactable,element){return interactable._context===element.ownerDocument||nodeContains(interactable._context,element)}function testIgnore(interactable,interactableElement,element){var ignoreFrom=interactable.options.ignoreFrom;return!(!ignoreFrom||!isElement(element))&&(
isString(ignoreFrom)?matchesUpTo(element,ignoreFrom,interactableElement):!!isElement(ignoreFrom)&&nodeContains(ignoreFrom,element))}function testAllow(interactable,interactableElement,element){var allowFrom=interactable.options.allowFrom;return!allowFrom||!!isElement(element)&&(isString(allowFrom)?matchesUpTo(element,allowFrom,interactableElement):!!isElement(allowFrom)&&nodeContains(allowFrom,element))}function checkAxis(axis,interactable){if(!interactable)return!1;var thisAxis=interactable.options.drag.axis;return"xy"===axis||"xy"===thisAxis||thisAxis===axis}function checkSnap(interactable,action){var options=interactable.options;return/^resize/.test(
action)&&(action="resize"),options[action].snap&&options[action].snap.enabled}function checkRestrict(interactable,action){var options=interactable.options;return/^resize/.test(action)&&(action="resize"),options[action].restrict&&options[action].restrict.enabled}function withinInteractionLimit(interactable,element,action){for(var options=interactable.options,maxActions=options[action.name].max,maxPerElement=options[action.name].maxPerElement,activeInteractions=0,targetCount=0,targetElementCount=0,i=0,len=interactions.length;i<len;i++){var interaction=interactions[i],otherAction=interaction.prepared.name;if(interaction.interacting()){if(
maxInteractions<=++activeInteractions)return!1;if(interaction.target===interactable){if(maxActions<=(targetCount+=otherAction===action.name|0))return!1;if(interaction.element===element&&(targetElementCount++,otherAction!==action.name||maxPerElement<=targetElementCount))return!1}}}return 0<maxInteractions}function Interaction(){if(this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,
duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},isFunction(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var that=this;this.boundInertiaFrame=function(){return that.inertiaFrame()},this.boundSmoothEndFrame=function(){return that.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{
x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,
restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,interactions.push(this)}function getInteractionFromPointer(pointer,eventType,eventTarget){var interaction,i=0,len=interactions.length,mouseEvent=/mouse/i.test(pointer.pointerType||eventType)||4===pointer.pointerType,id=getPointerId(pointer);if(/down|start/i.test(eventType))for(i=0;i<len;i++){var element=eventTarget;if((interaction=interactions[i]
).inertiaStatus.active&&interaction.target.options[interaction.prepared.name].inertia.allowResume&&interaction.mouse===mouseEvent)for(;element;){if(element===interaction.element)return interaction;element=parentElement(element)}}if(mouseEvent||!supportsTouch&&!supportsPointerEvent){for(i=0;i<len;i++)if(interactions[i].mouse&&!interactions[i].inertiaStatus.active)return interactions[i];for(i=0;i<len;i++)if(interactions[i].mouse&&(!/down/.test(eventType)||!interactions[i].inertiaStatus.active))return interaction;return(interaction=new Interaction).mouse=!0,interaction}for(i=0;i<len;i++)if(contains(interactions[i].pointerIds,id))return interactions[i];if(
/up|end|out/i.test(eventType))return null;for(i=0;i<len;i++)if((!(interaction=interactions[i]).prepared.name||interaction.target.options.gesture.enabled)&&!interaction.interacting()&&(mouseEvent||!interaction.mouse))return interaction;return new Interaction}function doOnInteractions(method){return function(event){var interaction,i,eventTarget=getActualElement(event.path?event.path[0]:event.target),curEventTarget=getActualElement(event.currentTarget);if(supportsTouch&&/touch/.test(event.type))for(prevTouchTime=(new Date).getTime(),i=0;i<event.changedTouches.length;i++){var pointer=event.changedTouches[i];(interaction=getInteractionFromPointer(pointer,
event.type,eventTarget))&&(interaction._updateEventTargets(eventTarget,curEventTarget),interaction[method](pointer,event,eventTarget,curEventTarget))}else{if(!supportsPointerEvent&&/mouse/.test(event.type)){for(i=0;i<interactions.length;i++)if(!interactions[i].mouse&&interactions[i].pointerIsDown)return;if((new Date).getTime()-prevTouchTime<500)return}if(!(interaction=getInteractionFromPointer(event,event.type,eventTarget)))return;interaction._updateEventTargets(eventTarget,curEventTarget),interaction[method](event,event,eventTarget,curEventTarget)}}}function InteractEvent(interaction,event,action,phase,element,related){var client,page,
target=interaction.target,snapStatus=interaction.snapStatus,restrictStatus=interaction.restrictStatus,pointers=interaction.pointers,deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",options=target?target.options:defaultOptions,origin=getOriginXY(target,element),starting="start"===phase,ending="end"===phase,coords=starting?interaction.startCoords:interaction.curCoords;element=element||interaction.element,page=extend({},coords.page),client=extend({},coords.client),page.x-=origin.x,page.y-=origin.y,client.x-=origin.x,client.y-=origin.y
;var relativePoints=options[action].snap&&options[action].snap.relativePoints;!checkSnap(target,action)||starting&&relativePoints&&relativePoints.length||(this.snap={range:snapStatus.range,locked:snapStatus.locked,x:snapStatus.snappedX,y:snapStatus.snappedY,realX:snapStatus.realX,realY:snapStatus.realY,dx:snapStatus.dx,dy:snapStatus.dy},snapStatus.locked&&(page.x+=snapStatus.dx,page.y+=snapStatus.dy,client.x+=snapStatus.dx,client.y+=snapStatus.dy)),!checkRestrict(target,action)||starting&&options[action].restrict.elementRect||!restrictStatus.restricted||(page.x+=restrictStatus.dx,page.y+=restrictStatus.dy,client.x+=restrictStatus.dx,
client.y+=restrictStatus.dy,this.restrict={dx:restrictStatus.dx,dy:restrictStatus.dy}),this.pageX=page.x,this.pageY=page.y,this.clientX=client.x,this.clientY=client.y,this.x0=interaction.startCoords.page.x-origin.x,this.y0=interaction.startCoords.page.y-origin.y,this.clientX0=interaction.startCoords.client.x-origin.x,this.clientY0=interaction.startCoords.client.y-origin.y,this.ctrlKey=event.ctrlKey,this.altKey=event.altKey,this.shiftKey=event.shiftKey,this.metaKey=event.metaKey,this.button=event.button,this.buttons=event.buttons,this.target=element,this.t0=interaction.downTimes[0],this.type=action+(phase||""),this.interaction=interaction,
this.interactable=target;var inertiaStatus=interaction.inertiaStatus;if(inertiaStatus.active&&(this.detail="inertia"),related&&(this.relatedTarget=related),this.dy=ending?"client"===deltaSource?(this.dx=client.x-interaction.startCoords.client.x,client.y-interaction.startCoords.client.y):(this.dx=page.x-interaction.startCoords.page.x,page.y-interaction.startCoords.page.y):starting?this.dx=0:"inertiastart"===phase?(this.dx=interaction.prevEvent.dx,interaction.prevEvent.dy):"client"===deltaSource?(this.dx=client.x-interaction.prevEvent.clientX,client.y-interaction.prevEvent.clientY):(this.dx=page.x-interaction.prevEvent.pageX,page.y-interaction.prevEvent.pageY)
,interaction.prevEvent&&"inertia"===interaction.prevEvent.detail&&!inertiaStatus.active&&options[action].inertia&&options[action].inertia.zeroResumeDelta&&(inertiaStatus.resumeDx+=this.dx,inertiaStatus.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===action&&interaction.resizeAxes?options.resize.square?("y"===interaction.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=interaction.resizeAxes,"x"===interaction.resizeAxes?this.dy=0:"y"===interaction.resizeAxes&&(this.dx=0)):"gesture"===action&&(this.touches=[pointers[0],pointers[1]],this.da=starting?(this.distance=touchDistance(pointers,deltaSource),this.box=touchBBox(pointers),this.scale=1
,this.ds=0,this.angle=touchAngle(pointers,void 0,deltaSource),0):ending||event instanceof InteractEvent?(this.distance=interaction.prevEvent.distance,this.box=interaction.prevEvent.box,this.scale=interaction.prevEvent.scale,this.ds=this.scale-1,this.angle=interaction.prevEvent.angle,this.angle-interaction.gesture.startAngle):(this.distance=touchDistance(pointers,deltaSource),this.box=touchBBox(pointers),this.scale=this.distance/interaction.gesture.startDistance,this.angle=touchAngle(pointers,interaction.gesture.prevAngle,deltaSource),this.ds=this.scale-interaction.gesture.prevScale,this.angle-interaction.gesture.prevAngle)),starting
)this.timeStamp=interaction.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===phase)this.timeStamp=interaction.prevEvent.timeStamp,this.dt=interaction.prevEvent.dt,this.duration=interaction.prevEvent.duration,this.speed=interaction.prevEvent.speed,this.velocityX=interaction.prevEvent.velocityX,this.velocityY=interaction.prevEvent.velocityY;else if(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-interaction.prevEvent.timeStamp,this.duration=this.timeStamp-interaction.downTimes[0],event instanceof InteractEvent){var dx=this[sourceX]-interaction.prevEvent[sourceX],
dy=this[sourceY]-interaction.prevEvent[sourceY],dt=this.dt/1e3;this.speed=hypot(dx,dy)/dt,this.velocityX=dx/dt,this.velocityY=dy/dt}else this.speed=interaction.pointerDelta[deltaSource].speed,this.velocityX=interaction.pointerDelta[deltaSource].vx,this.velocityY=interaction.pointerDelta[deltaSource].vy;if((ending||"inertiastart"===phase)&&600<interaction.prevEvent.speed&&this.timeStamp-interaction.prevEvent.timeStamp<150){var angle=180*Math.atan2(interaction.prevEvent.velocityY,interaction.prevEvent.velocityX)/Math.PI;angle<0&&(angle+=360);var left=112.5<=angle&&angle<247.5,up=202.5<=angle&&angle<337.5,right=!left&&(292.5<=angle||angle<67.5),
down=!up&&22.5<=angle&&angle<157.5;this.swipe={up:up,down:down,left:left,right:right,angle:angle,speed:interaction.prevEvent.speed,velocity:{x:interaction.prevEvent.velocityX,y:interaction.prevEvent.velocityY}}}}function preventOriginalDefault(){this.originalEvent.preventDefault()}function getActionCursor(action){var cursor="";if("drag"===action.name&&(cursor=actionCursors.drag),"resize"===action.name)if(action.axis)cursor=actionCursors[action.name+action.axis];else if(action.edges){for(var cursorKey="resize",edgeNames=["top","bottom","left","right"],i=0;i<4;i++)action.edges[edgeNames[i]]&&(cursorKey+=edgeNames[i]);cursor=actionCursors[cursorKey]}
return cursor}function checkResizeEdge(name,value,page,element,interactableElement,rect,margin){if(!value)return!1;if(!0===value){var width=isNumber(rect.width)?rect.width:rect.right-rect.left,height=isNumber(rect.height)?rect.height:rect.bottom-rect.top;if(width<0&&("left"===name?name="right":"right"===name&&(name="left")),height<0&&("top"===name?name="bottom":"bottom"===name&&(name="top")),"left"===name)return page.x<(0<=width?rect.left:rect.right)+margin;if("top"===name)return page.y<(0<=height?rect.top:rect.bottom)+margin;if("right"===name)return page.x>(0<=width?rect.right:rect.left)-margin;if("bottom"===name)return page.y>(
0<=height?rect.bottom:rect.top)-margin}return!!isElement(element)&&(isElement(value)?value===element:matchesUpTo(element,value,interactableElement))}function defaultActionChecker(pointer,interaction,element){var resizeEdges,rect=this.getRect(element),shouldResize=!1,action=null,resizeAxes=null,page=extend({},interaction.curCoords.page),options=this.options;if(!rect)return null;if(actionIsEnabled.resize&&options.resize.enabled){var resizeOptions=options.resize;if(resizeEdges={left:!1,right:!1,top:!1,bottom:!1},isObject(resizeOptions.edges)){for(var edge in resizeEdges)resizeEdges[edge]=checkResizeEdge(edge,resizeOptions.edges[edge],page,
interaction._eventTarget,element,rect,resizeOptions.margin||margin);resizeEdges.left=resizeEdges.left&&!resizeEdges.right,resizeEdges.top=resizeEdges.top&&!resizeEdges.bottom,shouldResize=resizeEdges.left||resizeEdges.right||resizeEdges.top||resizeEdges.bottom}else{var right="y"!==options.resize.axis&&page.x>rect.right-margin,bottom="x"!==options.resize.axis&&page.y>rect.bottom-margin;shouldResize=right||bottom,resizeAxes=(right?"x":"")+(bottom?"y":"")}}return action=shouldResize?"resize":actionIsEnabled.drag&&options.drag.enabled?"drag":null,actionIsEnabled.gesture&&2<=interaction.pointerIds.length&&!interaction.dragging&&!interaction.resizing&&(
action="gesture"),action?{name:action,axis:resizeAxes,edges:resizeEdges}:null}function validateAction(action,interactable){if(!isObject(action))return null;var actionName=action.name,options=interactable.options;return("resize"===actionName&&options.resize.enabled||"drag"===actionName&&options.drag.enabled||"gesture"===actionName&&options.gesture.enabled)&&actionIsEnabled[actionName]?("resize"!==actionName&&"resizeyx"!==actionName||(actionName="resizexy"),action):null}function delegateListener(event,useCapture){var fakeEvent={},delegated=delegatedEvents[event.type],eventTarget=getActualElement(event.path?event.path[0]:event.target),element=eventTarget;for(
var prop in useCapture=!!useCapture,event)fakeEvent[prop]=event[prop];for(fakeEvent.originalEvent=event,fakeEvent.preventDefault=preventOriginalDefault;isElement(element);){for(var i=0;i<delegated.selectors.length;i++){var selector=delegated.selectors[i],context=delegated.contexts[i];if(matchesSelector(element,selector)&&nodeContains(context,eventTarget)&&nodeContains(context,element)){var listeners=delegated.listeners[i];fakeEvent.currentTarget=element;for(var j=0;j<listeners.length;j++)listeners[j][1]===useCapture&&listeners[j][0](fakeEvent)}}element=parentElement(element)}}function delegateUseCapture(event){return delegateListener.call(this,event,!0)}
function interact(element,options){return interactables.get(element,options)||new Interactable(element,options)}function Interactable(element,options){var _window;if(this._element=element,this._iEvents=this._iEvents||{},trySelector(element)){this.selector=element;var context=options&&options.context;_window=context?getWindow(context):window,context&&(_window.Node?context instanceof _window.Node:isElement(context)||context===_window.document)&&(this._context=context)}else _window=getWindow(element),isElement(element)&&(supportsPointerEvent?(events.add(this._element,pEventTypes.down,listeners.pointerDown),events.add(this._element,pEventTypes.move,
listeners.pointerHover)):(events.add(this._element,"mousedown",listeners.pointerDown),events.add(this._element,"mousemove",listeners.pointerHover),events.add(this._element,"touchstart",listeners.pointerDown),events.add(this._element,"touchmove",listeners.pointerHover)));this._doc=_window.document,contains(documents,this._doc)||listenToDocument(this._doc),interactables.push(this),this.set(options)}function warnOnce(method,message){var warned=!1;return function(){return warned||(window.console.warn(message),warned=!0),method.apply(this,arguments)}}function endAllInteractions(event){for(var i=0;i<interactions.length;i++)interactions[i].pointerEnd(event,event)}
function listenToDocument(doc){if(!contains(documents,doc)){var win=doc.defaultView||doc.parentWindow;for(var eventType in delegatedEvents)events.add(doc,eventType,delegateListener),events.add(doc,eventType,delegateUseCapture,!0);supportsPointerEvent?(pEventTypes=PointerEvent===win.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},events.add(doc,pEventTypes.down,listeners.selectorDown),events.add(doc,pEventTypes.move,listeners.pointerMove),events.add(doc,
pEventTypes.over,listeners.pointerOver),events.add(doc,pEventTypes.out,listeners.pointerOut),events.add(doc,pEventTypes.up,listeners.pointerUp),events.add(doc,pEventTypes.cancel,listeners.pointerCancel),events.add(doc,pEventTypes.move,listeners.autoScrollMove)):(events.add(doc,"mousedown",listeners.selectorDown),events.add(doc,"mousemove",listeners.pointerMove),events.add(doc,"mouseup",listeners.pointerUp),events.add(doc,"mouseover",listeners.pointerOver),events.add(doc,"mouseout",listeners.pointerOut),events.add(doc,"touchstart",listeners.selectorDown),events.add(doc,"touchmove",listeners.pointerMove),events.add(doc,"touchend",listeners.pointerUp),
events.add(doc,"touchcancel",listeners.pointerCancel),events.add(doc,"mousemove",listeners.autoScrollMove),events.add(doc,"touchmove",listeners.autoScrollMove)),events.add(win,"blur",endAllInteractions);try{if(win.frameElement){var parentDoc=win.frameElement.ownerDocument,parentWindow=parentDoc.defaultView;events.add(parentDoc,"mouseup",listeners.pointerEnd),events.add(parentDoc,"touchend",listeners.pointerEnd),events.add(parentDoc,"touchcancel",listeners.pointerEnd),events.add(parentDoc,"pointerup",listeners.pointerEnd),events.add(parentDoc,"MSPointerUp",listeners.pointerEnd),events.add(parentWindow,"blur",endAllInteractions)}}catch(error){
interact.windowParentError=error}events.add(doc,"dragstart",function(event){for(var i=0;i<interactions.length;i++){var interaction=interactions[i];if(interaction.element&&(interaction.element===event.target||nodeContains(interaction.element,event.target)))return void interaction.checkAndPreventDefault(event,interaction.target,interaction.element)}}),events.useAttachEvent&&(events.add(doc,"selectstart",function(event){var interaction=interactions[0];interaction.currentAction()&&interaction.checkAndPreventDefault(event)}),events.add(doc,"dblclick",doOnInteractions("ie8Dblclick"))),documents.push(doc)}}function indexOf(array,target){for(var i=0,
len=array.length;i<len;i++)if(array[i]===target)return i;return-1}function contains(array,target){return-1!==indexOf(array,target)}function matchesSelector(element,selector,nodeList){return ie8MatchesSelector?ie8MatchesSelector(element,selector,nodeList):(window!==realWindow&&(selector=selector.replace(/\/deep\//g," ")),element[prefixedMatchesSelector](selector))}function matchesUpTo(element,selector,limit){for(;isElement(element);){if(matchesSelector(element,selector))return!0;if((element=parentElement(element))===limit)return matchesSelector(element,selector)}return!1}}("undefined"==typeof window?void 0:window),define("jquery.fileDownload",["jquery"],
function($){$.extend({fileDownload:function(fileUrl,options){var defaultFailCallback=function(responseHtml,url){alert("A file download error has occurred, please try again.")},settings=$.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},successCallback:function(url){},failCallback:defaultFailCallback,httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},
options),userAgent=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),isIos=!1,isAndroid=!1,isOtherMobileBrowser=!1;/ip(ad|hone|od)/.test(userAgent)?isIos=!0:-1!=userAgent.indexOf("android")?isAndroid=!0:isOtherMobileBrowser=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(userAgent
)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(
userAgent.substr(0,4));var httpMethodUpper=settings.httpMethod.toUpperCase();if(isAndroid&&"GET"!=httpMethodUpper)$().dialog?$("<div>").html(settings.androidPostUnsupportedMessageHtml).dialog(settings.dialogOptions):alert(settings.androidPostUnsupportedMessageHtml);else{var $preparingDialog=null;settings.preparingMessageHtml&&($preparingDialog=$("<div>").html(settings.preparingMessageHtml).dialog(settings.dialogOptions));var $iframe,downloadWindow,formDoc,$form,internalCallbacks={onSuccess:function(url){$preparingDialog&&$preparingDialog.dialog("close"),settings.successCallback(url)},onFail:function(responseHtml,url){
$preparingDialog&&$preparingDialog.dialog("close"),settings.failMessageHtml?($("<div>").html(settings.failMessageHtml).dialog(settings.dialogOptions),settings.failCallback!=defaultFailCallback&&settings.failCallback(responseHtml,url)):settings.failCallback(responseHtml,url)}};if(null!==settings.data&&"string"!=typeof settings.data&&(settings.data=$.param(settings.data)),"GET"===httpMethodUpper){if(null!==settings.data)-1!=fileUrl.indexOf("?")?"&"!==fileUrl.substring(fileUrl.length-1)&&(fileUrl+="&"):fileUrl+="?",fileUrl+=settings.data;isIos||isAndroid?((downloadWindow=window.open(fileUrl)).document.title=settings.popupWindowTitle,window.focus()
):isOtherMobileBrowser?window.location(fileUrl):$iframe=$("<iframe>").hide().attr("src",fileUrl).appendTo("body")}else{var formInnerHtml="";null!==settings.data&&$.each(settings.data.replace(/\+/g," ").split("&"),function(){var kvp=this.split("="),key=settings.encodeHTMLEntities?htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[0])):decodeURIComponent(kvp[0]);if(key){var value=kvp[1];value=settings.encodeHTMLEntities?htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[1])):decodeURIComponent(kvp[1]),formInnerHtml+='<input type="hidden" name="'+key+'" value="'+value+'" />'}}),isOtherMobileBrowser?($form=$("<form>").appendTo("body")).hide().attr("method",
settings.httpMethod).attr("action",fileUrl).html(formInnerHtml):(isIos?((downloadWindow=window.open("about:blank")).document.title=settings.popupWindowTitle,formDoc=downloadWindow.document,window.focus()):formDoc=getiframeDocument($iframe=$("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body")),formDoc.write("<html><head></head><body><form method='"+settings.httpMethod+"' action='"+fileUrl+"'>"+formInnerHtml+"</form>"+settings.popupWindowTitle+"</body></html>"),$form=$(formDoc).find("form")),$form.submit()}setTimeout(function checkFileDownloadComplete(){if(-1!=document.cookie.indexOf(settings.cookieName+"="+settings.cookieValue)){
internalCallbacks.onSuccess(fileUrl);var date=new Date(1e3);return document.cookie=settings.cookieName+"=; expires="+date.toUTCString()+"; path="+settings.cookiePath,void cleanUp(!1)}if(downloadWindow||$iframe)try{var formDoc;if((formDoc=downloadWindow?downloadWindow.document:getiframeDocument($iframe))&&null!=formDoc.body&&0<formDoc.body.innerHTML.length){var isFailure=!0;if($form&&0<$form.length){var $contents=$(formDoc.body).contents().first();0<$contents.length&&$contents[0]===$form[0]&&(isFailure=!1)}if(isFailure)return internalCallbacks.onFail(formDoc.body.innerHTML,fileUrl),void cleanUp(!0)}}catch(err){return internalCallbacks.onFail("",fileUrl),
void cleanUp(!0)}setTimeout(checkFileDownloadComplete,settings.checkInterval)},settings.checkInterval)}function getiframeDocument($iframe){var iframeDoc=$iframe[0].contentWindow||$iframe[0].contentDocument;return iframeDoc.document&&(iframeDoc=iframeDoc.document),iframeDoc}function cleanUp(isFailure){setTimeout(function(){downloadWindow&&(isAndroid&&downloadWindow.close(),isIos&&(isFailure?(downloadWindow.focus(),downloadWindow.close()):downloadWindow.focus()))},0)}function htmlSpecialCharsEntityEncode(str){return str.replace(/&/gm,"&amp;").replace(/\n/gm,"&#10;").replace(/\r/gm,"&#13;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"
).replace(/'/gm,"&apos;")}}})}),function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return n<t?-1:t<n?1:t<=n?0:NaN}function r(n){return null===n?NaN:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);r<u;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);r<u;){var i=r+u>>>1;0<n(t[i],e)?u=i:r=i+1}return r}}}function a(n){return n.length}
function l(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function c(){this._=Object.create(null)}function s(n){return(n+="")===xa||n[0]===ba?ba+n:n}function f(n){return(n+="")[0]===ba?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n
)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=_a.length;e<r;++e){var u=_a[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new c;return t.on=function(t,u){var i,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,i=e.indexOf(a)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){oa.event.preventDefault()}function k(){for(var n,t=oa.event;n=t.sourceEvent;)t=n;return t}function N(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r
){return function(u){try{var i=u.sourceEvent=oa.event;u.target=n,oa.event=u,t[u.type].apply(e,r)}finally{oa.event=i}}},t}function E(n){return Sa(n,Aa),n}function A(n){return"function"==typeof n?n:function(){return ka(n,this)}}function C(n){return"function"==typeof n?n:function(){return Na(n,this)}}function z(n,t){return n=oa.ns.qualify(n),null==t?n.local?function(){this.removeAttributeNS(n.space,n.local)}:function(){this.removeAttribute(n)}:"function"==typeof t?n.local?function(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}:function(){var e=t.apply(this,arguments)
;null==e?this.removeAttribute(n):this.setAttribute(n,e)}:n.local?function(){this.setAttributeNS(n.space,n.local,t)}:function(){this.setAttribute(n,t)}}function L(n){return n.trim().replace(/\s+/g," ")}function q(n){return new RegExp("(?:^|\\s+)"+oa.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){var u=(n=T(n).map(D)).length;return"function"==typeof t?function(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}:function(){for(var e=-1;++e<u;)n[e](this,t)}}function D(n){var t=q(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(
u)||e.setAttribute("class",L(u+" "+n))):e.setAttribute("class",L(u.replace(t," ")))}}function P(n,t,e){return null==t?function(){this.style.removeProperty(n)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}:function(){this.style.setProperty(n,t,e)}}function U(n,t){return null==t?function(){delete this[n]}:"function"==typeof t?function(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}:function(){this[n]=t}}function j(n){return"function"==typeof n?n:(n=oa.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){
var t=this.ownerDocument,e=this.namespaceURI;return e===Ca&&t.documentElement.namespaceURI===Ca?t.createElement(n):t.createElementNS(e,n)}}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return Ea(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;e<r;e++)for(var u,i=n[e],a=0,o=i.length;a<o;a++)(u=i[a])&&t(u,a,e);return n}function Z(n){return Sa(n,La),n}function X(n,t,e){function r(){var t=this[a];t&&(this.removeEventListener(n,t,t.$),delete this[a])}var a="__on"+n,o=n.indexOf("."),l=$
;0<o&&(n=n.slice(0,o));var c=qa.get(n);return c&&(n=c,l=B),o?t?function(){var u=l(t,ca(arguments));r.call(this),this.addEventListener(n,this[a]=u,u.$=e),u._=t}:r:t?b:function(){var t,e=new RegExp("^__on([^.]+)"+oa.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}}function $(n,t){return function(e){var r=oa.event;oa.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{oa.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Ra,u="click"+r,i=oa.select(t(e)).on(
"touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ta&&(Ta=!("onselectstart"in e)&&x(e.style,"userSelect")),Ta){var a=n(e).style,o=a[Ta];a[Ta]="none"}return function(n){if(i.on(r,null),Ta&&(a[Ta]=o),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(Da<0){var i=t(n);if(i.scrollX||i.scrollY){var a=(r=oa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Da=!(a.f||a.e),r.remove()}}
return u.y=Da?(u.x=e.pageX,e.pageY):(u.x=e.clientX,e.clientY),[(u=u.matrixTransform(n.getScreenCTM().inverse())).x,u.y]}var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}function G(){return oa.event.changedTouches[0].identifier}function K(n){return 0<n?1:n<0?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nn(n){return 1<n?0:n<-1?ja:Math.acos(n)}function tn(n){return 1<n?Oa:n<-1?-Oa:Math.asin(n)}function rn(n){return((n=Math.exp(n))+1/n)/2}function an(n){return(n=Math.sin(n/2))*n}function on(){}function ln(n,t,e){return this instanceof ln?(this.h=+n,this.s=+t,void(this.l=+e)
):arguments.length<2?n instanceof ln?new ln(n.h,n.s,n.l):_n(""+n,wn,ln):new ln(n,t,e)}function cn(n,t,e){function u(n){return Math.round(255*function(n){return 360<n?n-=360:n<0&&(n+=360),n<60?i+(a-i)*n/60:n<180?a:n<240?i+(a-i)*(240-n)/60:i}(n))}var i,a;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:t<0?0:1<t?1:t,i=2*(e=e<0?0:1<e?1:e)-(a=e<=.5?e*(1+t):e+t-e*t),new yn(u(n+120),u(n),u(n-120))}function sn(n,t,e){return this instanceof sn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof sn?new sn(n.h,n.c,n.l):pn(n instanceof hn?n.l:(n=Sn((n=oa.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new sn(n,t,e)}function fn(n,t,e){return isNaN(n)&&(n=0),isNaN(t
)&&(t=0),new hn(e,Math.cos(n*=Ia)*t,Math.sin(n)*t)}function hn(n,t,e){return this instanceof hn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof hn?new hn(n.l,n.a,n.b):n instanceof sn?fn(n.h,n.c,n.l):Sn((n=yn(n)).r,n.g,n.b):new hn(n,t,e)}function gn(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return new yn(mn(3.2404542*(u=vn(u)*Qa)-1.5371385*(r=vn(r)*no)-.4985314*(i=vn(i)*to)),mn(-.969266*u+1.8760108*r+.041556*i),mn(.0556434*u-.2040259*r+1.0572252*i))}function pn(n,t,e){return 0<n?new sn(Math.atan2(e,t)*Ya,Math.sqrt(t*t+e*e),n):new sn(NaN,NaN,n)}function vn(n){return.206893034<n?n*n*n:(n-4/29)/7.787037}function dn(n){
return.008856<n?Math.pow(n,1/3):7.787037*n+4/29}function mn(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function yn(n,t,e){return this instanceof yn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof yn?new yn(n.r,n.g,n.b):_n(""+n,yn,cn):new yn(n,t,e)}function Mn(n){return new yn(n>>16,n>>8&255,255&n)}function xn(n){return Mn(n)+""}function bn(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _n(n,t,e){var r,u,i,a=0,o=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2]
)/100);case"rgb":return t(Nn(u[0]),Nn(u[1]),Nn(u[2]))}return(i=uo.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(a=(3840&i)>>4,a|=a>>4,o=240&i,o|=o>>4,l=15&i,l|=l<<4):7===n.length&&(a=(16711680&i)>>16,o=(65280&i)>>8,l=255&i)),t(a,o,l))}function wn(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),a=Math.max(n,t,e),o=a-i,l=(a+i)/2;return o?(u=l<.5?o/(a+i):o/(2-a-i),r=n==a?(t-e)/o+(t<e?6:0):t==a?(e-n)/o+2:(n-t)/o+4,r*=60):(r=NaN,u=0<l&&l<1?0:r),new ln(r,u,l)}function Sn(n,t,e){var r=dn((.4124564*(n=kn(n))+.3575761*(t=kn(t))+.1804375*(e=kn(e)))/Qa),u=dn((.2126729*n+.7151522*t+.072175*e)/no);return hn(116*u-16,
500*(r-u),200*(u-dn((.0193339*n+.119192*t+.9503041*e)/to)))}function kn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Nn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function En(n){return"function"==typeof n?n:function(){return n}}function An(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Cn(t,e,n,r)}}function Cn(n,t,e,r){function u(){var n,t=l.status;if(!t&&function(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}(l)||200<=t&&t<300||304===t){try{n=e.call(i,l)}catch(r){return void a.error.call(i,r)}a.load.call(i,n)}else a.error.call(i,l
)}var i={},a=oa.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(n)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=u:l.onreadystatechange=function(){3<l.readyState&&u()},l.onprogress=function(n){var t=oa.event;oa.event=n;try{a.progress.call(i,l)}finally{oa.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:o[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(c=n,i):c},i.response=function(n){
return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ca(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),l.open(e,n,!0),null==t||"accept"in o||(o.accept=t+",*/*"),l.setRequestHeader)for(var s in o)l.setRequestHeader(s,o[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},oa.rebind(i,a,"on"),null==r?i:i.get(function(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}(r))}
function qn(n,t,e){var r=arguments.length;r<2&&(t=0),r<3&&(e=Date.now());var i={c:n,t:e+t,n:null};return ao?ao.n=i:io=i,ao=i,oo||(lo=clearTimeout(lo),oo=1,co(Tn)),i}function Tn(){var n=Rn(),t=Dn()-n;24<t?(isFinite(t)&&(clearTimeout(lo),lo=setTimeout(Tn,t)),oo=0):(oo=1,co(Tn))}function Rn(){for(var n=Date.now(),t=io;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Dn(){for(var n,t=io,e=1/0;t;)t=t.c?(t.t<e&&(e=t.t),(n=t).n):n?n.n=t.n:io=t.n;return ao=n,e}function Pn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Fn(n){return n+""}function Hn(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function On(n,
t,e){function r(t){var e=n(t),r=i(e,1);return t-e<r-t?e:r}function u(e){return t(e=n(new po(e-1)),1),e}function i(n,e){return t(n=new po(+n),e),n}function a(n,r,i){var a=u(n),o=[];if(1<i)for(;a<r;)e(a)%i||o.push(new Date(+a)),t(a,1);else for(;a<r;)o.push(new Date(+a)),t(a,1);return o}(n.floor=n).round=r,n.ceil=u,n.offset=i,n.range=a;var l=n.utc=In(n);return(l.floor=l).round=In(r),l.ceil=In(u),l.offset=In(i),l.range=function(n,t,e){try{var r=new(po=Hn);return r._=n,a(r,t,e)}finally{po=Date}},n}function In(n){return function(t,e){try{var r=new(po=Hn);return r._=t,n(r,e)._}finally{po=Date}}}function Zn(n,t,e){var r=n<0?"-":"",u=(r?-n:n)+"",i=u.length;return r+(
i<e?new Array(e-i+1).join(t)+u:u)}function Vn(n){return new RegExp("^(?:"+n.map(oa.requote).join("|")+")","i")}function Xn(n){for(var t=new c,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function $n(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Bn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Wn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Jn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2))
;return r?(n.y=function(n){return n+(68<n?1900:2e3)}(+r[0]),e+r[0].length):-1}function Kn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function nt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function tt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function et(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function rt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ut(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1
}function it(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function at(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ot(n){var t=n.getTimezoneOffset(),e=0<t?"-":"+",r=Ma(t)/60|0,u=Ma(t)%60;return e+Zn(r,"0",2)+Zn(u,"0",2)}function lt(n,t,e){Mo.lastIndex=0;var r=Mo.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ct(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function st(){}function ft(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function ht(n,t){n&&wo.hasOwnProperty(
n.type)&&wo[n.type](n,t)}function gt(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function pt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)gt(n[e],t,1);t.polygonEnd()}function vt(){function n(n,t){t=t*Ia/2+ja/4;var e=(n*=Ia)-r,a=0<=e?1:-1,o=a*e,l=Math.cos(t),c=Math.sin(t),s=i*c,f=u*l+s*Math.cos(o),h=s*a*Math.sin(o);ko.add(Math.atan2(h,f)),r=n,u=l,i=c}var t,e,r,u,i;No.point=function(a,o){No.point=n,r=(t=a)*Ia,u=Math.cos(o=(e=o)*Ia/2+ja/4),i=Math.sin(o)},No.lineEnd=function(){n(t,e)}}function dt(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function mt(n,t){
return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function yt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Mt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function xt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n){return[Math.atan2(n[1],n[0]),tn(n[2])]}function wt(n,t){return Ma(n[0]-t[0])<Pa&&Ma(n[1]-t[1])<Pa}function St(n,t){n*=Ia;var e=Math.cos(t*=Ia);kt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function kt(n,t,e){Co+=(n-Co)/++Eo,zo+=(t-zo)/Eo,Lo+=(e-Lo)/Eo}function Nt(){function n(n,u){n*=Ia;var i=Math.cos(u*=Ia),a=i*Math.cos(n),o=i*Math.sin(n),
l=Math.sin(u),c=Math.atan2(Math.sqrt((c=e*l-r*o)*c+(c=r*a-t*l)*c+(c=t*o-e*a)*c),t*a+e*o+r*l);Ao+=c,qo+=c*(t+(t=a)),To+=c*(e+(e=o)),Ro+=c*(r+(r=l)),kt(t,e,r)}var t,e,r;jo.point=function(u,i){u*=Ia;var a=Math.cos(i*=Ia);t=a*Math.cos(u),e=a*Math.sin(u),r=Math.sin(i),jo.point=n,kt(t,e,r)}}function Et(){jo.point=St}function At(){function n(n,t){n*=Ia;var e=Math.cos(t*=Ia),a=e*Math.cos(n),o=e*Math.sin(n),l=Math.sin(t),c=u*l-i*o,s=i*a-r*l,f=r*o-u*a,h=Math.sqrt(c*c+s*s+f*f),g=r*a+u*o+i*l,p=h&&-nn(g)/h,v=Math.atan2(h,g);Do+=p*c,Po+=p*s,Uo+=p*f,Ao+=v,qo+=v*(r+(r=a)),To+=v*(u+(u=o)),Ro+=v*(i+(i=l)),kt(r,u,i)}var t,e,r,u,i;jo.point=function(a,o){t=a,e=o,jo.point=n,a*=Ia
;var l=Math.cos(o*=Ia);r=l*Math.cos(a),u=l*Math.sin(a),i=Math.sin(o),kt(r,u,i)},jo.lineEnd=function(){n(t,e),jo.lineEnd=Et,jo.point=St}}function Ct(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return(e=t.invert(e,r))&&n.invert(e[0],e[1])}),e}function zt(){return!0}function Lt(n,t,e,r,u){var i=[],a=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(wt(e,r)){u.lineStart();for(var o=0;o<t;++o)u.point((e=n[o])[0],e[1]);return void u.lineEnd()}var l=new Tt(e,n,null,!0),c=new Tt(e,null,l,!1);l.o=c,i.push(l),a.push(c),c=new Tt(r,null,l=new Tt(r,n,null,!1),!0),l.o=c,i.push(l),a.push(c)}
}),a.sort(t),qt(i),qt(a),i.length){for(var o=0,l=e,c=a.length;o<c;++o)a[o].e=l=!l;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(o=0,c=s.length;o<c;++o)u.point((f=s[o])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p)for(o=(s=g.p.z).length-1;0<=o;--o)u.point((f=s[o])[0],f[1]);else r(g.x,g.p.x,-1,u);g=g.p}s=(g=g.o).z,p=!p}while(!g.v);u.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Rt(n,t,e,r){return function(u,i){function a(t,e){
var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function o(n,t){var e=u(n,t);d.point(e[0],e[1])}function l(){y.point=o,d.lineStart()}function c(){y.point=a,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){var u,a=-1;if(0<(r=(n=e[0]).length-1)){for(b||(i.polygonStart(),b=!0),i.lineStart();++a<r;)i.point((u=n[a])[0],u[1]);i.lineEnd()}}else 1<r&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Dt))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:c,
polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=c,g=oa.merge(g);var n=function(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,a=0;ko.reset();for(var o=0,l=t.length;o<l;++o){var c=t[o],s=c.length;if(s)for(var f=c[0],h=f[0],g=f[1]/2+ja/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0);var m=(n=c[d])[0],y=n[1]/2+ja/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=0<=b?1:-1,w=_*b,S=ja<w,k=p*M;if(ko.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*Fa:b,S^e<=h^e<=m){var N=yt(dt(f),dt(n));bt(N);var E=yt(u,N);bt(E);var A=(S^0<=b?-1:1)*tn(E[2]);(A<r||r===A&&(N[0]||N[1]))&&(
a+=S^0<=b?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(i<-Pa||i<Pa&&ko<0)^1&a}(m,p);g.length?(b||(i.polygonStart(),b=!0),Lt(g,Ut,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Pt(),x=t(M),b=!1;return y}}function Dt(n){return 1<n.length}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function Ut(n,t){return((n=n.x
)[0]<0?n[1]-Oa-Pa:Oa-n[1])-((t=t.x)[0]<0?t[1]-Oa-Pa:Oa-t[1])}function Yt(n,t,e,r){return function(u){var i,a=u.a,o=u.b,l=a.x,c=a.y,h=0,g=1,p=o.x-l,v=o.y-c;if(i=n-l,p||!(0<i)){if(i/=p,p<0){if(i<h)return;i<g&&(g=i)}else if(0<p){if(g<i)return;h<i&&(h=i)}if(i=e-l,p||!(i<0)){if(i/=p,p<0){if(g<i)return;h<i&&(h=i)}else if(0<p){if(i<h)return;i<g&&(g=i)}if(i=t-c,v||!(0<i)){if(i/=v,v<0){if(i<h)return;i<g&&(g=i)}else if(0<v){if(g<i)return;h<i&&(h=i)}if(i=r-c,v||!(i<0)){if(i/=v,v<0){if(g<i)return;h<i&&(h=i)}else if(0<v){if(i<h)return;i<g&&(g=i)}return 0<h&&(u.a={x:l+h*p,y:c+h*v}),g<1&&(u.b={x:l+g*p,y:c+g*v}),u}}}}}}function Zt(n,t,e,r){function u(r,u){return Ma(r[0]-n
)<Pa?0<u?0:3:Ma(r[0]-e)<Pa?0<u?2:1:Ma(r[1]-t)<Pa?0<u?1:0:0<u?3:2}function i(n,t){return a(n.x,t.x)}function a(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(o){function c(i,o,l,c){var s=0,f=0;if(null==i||(s=u(i,l))!==(f=u(o,l))||a(i,o)<0^0<l)for(;c.point(0===s||3===s?n:e,1<s?r:t),(s=(s+l+4)%4)!==f;);else c.point(o[0],o[1])}function s(u,i){return n<=u&&u<=e&&t<=i&&i<=r}function f(n,t){s(n,t)&&o.point(n,t)}function p(n,t){var e=s(n=Math.max(-Ho,Math.min(Ho,n)),t=Math.max(-Ho,Math.min(Ho,t)));if(d&&m.push([n,t]),S)y=n,M=t,S=!1,(x=e)&&(o.lineStart(),o.point(n,t));else if(e&&w)o.point(n,t
);else{var r={a:{x:b,y:_},b:{x:n,y:t}};A(r)?(w||(o.lineStart(),o.point(r.a.x,r.a.y)),o.point(r.b.x,r.b.y),e||o.lineEnd(),k=!1):e&&(o.lineStart(),o.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,N=o,E=Pt(),A=Yt(n,t,e,r),C={point:f,lineStart:function(){C.point=p,d&&d.push(m=[]),w=!(S=!0),b=_=NaN},lineEnd:function(){v&&(p(y,M),x&&w&&E.rejoin(),v.push(E.buffer())),C.point=f,w&&o.lineEnd()},polygonStart:function(){o=E,v=[],d=[],k=!0},polygonEnd:function(){o=N,v=oa.merge(v);var t=function(n){for(var t=0,e=d.length,r=n[1],u=0;u<e;++u)for(var i,a=1,o=d[u],l=o.length,c=o[0];a<l;++a)i=o[a],c[1]<=r?i[1]>r&&0<Q(c,i,n)&&++t:i[1]<=r&&Q(c,i,n)<0&&--t,c=i
;return 0!==t}([n,r]),e=k&&t,u=v.length;(e||u)&&(o.polygonStart(),e&&(o.lineStart(),c(null,null,1,o),o.lineEnd()),u&&Lt(v,i,t,c,o),o.polygonEnd()),v=d=m=null}};return C}}function Vt(n){var t=0,e=ja/3,r=oe(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*ja/180,e=n[1]*ja/180):[t/ja*180,e/ja*180]},u}function Xt(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),a-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),a=Math.sqrt(i)/u;return e.invert=function(n,t){var e=a-t;return[Math.atan2(n,e)/u,tn((i-(n*n+e*e)*u*u)/(2*u))]},e}function $t(){function n(n,t){Io+=u*n-r*t,r=n,u=t}var t,e,r,u
;$o.point=function(i,a){$o.point=n,t=r=i,e=u=a},$o.lineEnd=function(){n(t,e)}}function Wt(){function n(n,t){a.push("M",n,",",t,i)}function t(n,t){a.push("M",n,",",t),o.point=e}function e(n,t){a.push("L",n,",",t)}function r(){o.point=n}function u(){a.push("Z")}var i=Jt(4.5),a=[],o={point:n,lineStart:function(){o.point=t},lineEnd:r,polygonStart:function(){o.lineEnd=u},polygonEnd:function(){o.lineEnd=r,o.point=n},pointRadius:function(n){return i=Jt(n),o},result:function(){if(a.length){var n=a.join("");return a=[],n}}};return o}function Jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Gt(n,t){Co+=n,zo+=t,++Lo}function Kt(
){function n(n,r){var u=n-t,i=r-e,a=Math.sqrt(u*u+i*i);qo+=a*(t+n)/2,To+=a*(e+r)/2,Ro+=a,Gt(t=n,e=r)}var t,e;Wo.point=function(r,u){Wo.point=n,Gt(t=r,e=u)}}function Qt(){Wo.point=Gt}function ne(){function n(n,t){var e=n-r,i=t-u,a=Math.sqrt(e*e+i*i);qo+=a*(r+n)/2,To+=a*(u+t)/2,Ro+=a,Do+=(a=u*n-r*t)*(r+n),Po+=a*(u+t),Uo+=3*a,Gt(r=n,u=t)}var t,e,r,u;Wo.point=function(i,a){Wo.point=n,Gt(t=r=i,e=u=a)},Wo.lineEnd=function(){n(t,e)}}function te(n){function t(t,e){n.moveTo(t+a,e),n.arc(t,e,a,0,Fa)}function e(t,e){n.moveTo(t,e),o.point=r}function r(t,e){n.lineTo(t,e)}function u(){o.point=t}function i(){n.closePath()}var a=4.5,o={point:t,lineStart:function(){o.point=e
},lineEnd:u,polygonStart:function(){o.lineEnd=i},polygonEnd:function(){o.lineEnd=u,o.point=t},pointRadius:function(n){return a=n,o},result:b};return o}function ee(n){function t(n){return(o?r:e)(n)}function e(t){return ie(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=NaN,S.point=i,t.lineStart()}function i(e,r){var i=dt([e,r]),a=n(e,r);u(M,x,y,b,_,w,M=a[0],x=a[1],y=e,b=i[0],_=i[1],w=i[2],o,t),t.point(M,x)}function a(){S.point=e,t.lineEnd()}function l(){r(),S.point=c,S.lineEnd=s}function c(n,t){i(f=n,t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,o,t),(S.lineEnd=a
)()}var f,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,o,l,c,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(4*i<x&&d--){var b=o+g,_=l+p,w=c+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),N=Ma(Ma(w)-1)<Pa||Ma(r-h)<Pa?(r+h)/2:Math.atan2(_,b),E=n(N,k),A=E[0],C=E[1],z=A-t,L=C-e,q=M*z-y*L;(i<q*q/x||.3<Ma((y*z+M*L)/x-.5)||o*g+l*p+c*v<a)&&(u(t,e,r,o,l,c,A,C,N,b/=S,_/=S,w,d,m),m.point(A,C),u(A,C,N,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,a=Math.cos(30*Ia),o=16;return t.precision=function(n){return arguments.length?(o=0<(i=n*n)&&16,t
):Math.sqrt(i)},t}function ue(n){this.stream=n}function ie(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ae(n){return oe(function(){return n})()}function oe(n){function t(n){return[(n=o(n[0]*Ia,n[1]*Ia))[0]*h+l,c-n[1]*h]}function e(n){return(n=o.invert((n[0]-l)/h,(c-n[1])/h))&&[n[0]*Ya,n[1]*Ya]}function r(){o=Ct(a=fe(m,M,x),i);var n=i(v,d);return l=g-n[0]*h,c=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,a,o,l,c,s,f=ee(function(n,t){return[(n=i(n,t))[0]*h+l,c-n[1]*h]}),h=150,g=480,
p=250,v=0,d=0,m=0,M=0,x=0,b=Fo,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),(s=le(b(a,f(_(n))))).valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Fo):function(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function r(n,t,e){var a=[1,0,0],o=yt(dt(n),dt(t)),l=mt(o,o),c=o[0],s=l-c*c;if(!s)return!e&&n;var f=i*l/s,h=-i*c/s,g=yt(a,o),p=xt(a,f);Mt(p,xt(o,h));var d=g,m=mt(p,d),y=mt(d,d),M=m*m-y*(mt(p,p)-1);if(!(M<0)){var x=Math.sqrt(M),b=xt(d,(-m-x)/y);if(Mt(b,p),b=_t(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],N=t[1];S<w&&(_=w,w=S,S=_);var E=S-w,A=Ma(E-ja)<Pa;if(!A&&N<k&&(_=k,k=N,N=_),A||E<Pa?A?0<k+N^b[1]<(Ma(
b[0]-w)<Pa?k:N):k<=b[1]&&b[1]<=N:ja<E^(w<=b[0]&&b[0]<=S)){var z=xt(d,(-m+x)/y);return Mt(z,p),[b,_t(z)]}}}function u(t,e){var r=a?n:ja-n,u=0;return t<-r?u|=1:r<t&&(u|=2),e<-r?u|=4:r<e&&(u|=8),u}var i=Math.cos(n),a=0<i,o=Ma(i)>Pa;return Rt(t,function(n){var e,i,l,c,s;return{lineStart:function(){c=l=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=a?v?0:u(f,h):v?u(f+(f<0?ja:-ja),h):0;if(!e&&(c=l=v)&&n.lineStart(),v!==l&&(g=r(e,p),(wt(e,g)||wt(p,g))&&(p[0]+=Pa,p[1]+=Pa,v=t(p[0],p[1]))),v!==l)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(o&&e&&a^v){var m;d&i||!(m=r(p,e,!0))||(s=0,a?(n.lineStart(),
n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&wt(e,p)||n.point(p[0],p[1]),e=p,l=v,i=d},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return s|(c&&l)<<1}}},ve(n,6*Ia),a?[0,-n]:[-ja,n-ja])}((w=+n)*Ia),u()):w},t.clipExtent=function(n){return arguments.length?(_=(S=n)?Zt(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Ia,d=n[1]%360*Ia,r()):[v*Ya,d*Ya]},
t.rotate=function(n){return arguments.length?(m=n[0]%360*Ia,M=n[1]%360*Ia,x=2<n.length?n[2]%360*Ia:0,r()):[m*Ya,M*Ya,x*Ya]},oa.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function le(n){return ie(n,function(t,e){n.point(t*Ia,e*Ia)})}function ce(n,t){return[n,t]}function se(n,t){return[ja<n?n-Fa:n<-ja?n+Fa:n,t]}function fe(n,t,e){return n?t||e?Ct(ge(n),pe(t,e)):ge(n):t||e?pe(t,e):se}function he(n){return function(t,e){return[ja<(t+=n)?t-Fa:t<-ja?t+Fa:t,e]}}function ge(n){var t=he(n);return t.invert=he(-n),t}function pe(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),
s=c*r+o*u;return[Math.atan2(l*i-s*a,o*r-c*u),tn(s*i+l*a)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),a=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),s=c*i-l*a;return[Math.atan2(l*i+c*a,o*r+s*u),tn(s*r-o*u)]},e}function ve(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,a,o){var l=a*t;null!=u?(u=de(e,u),i=de(e,i),(0<a?u<i:i<u)&&(u+=a*Fa)):(u=n+a*Fa,i=n-.5*l);for(var c,s=u;0<a?i<s:s<i;s-=l)o.point((c=_t([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function de(n,t){var e=dt(t);e[0]-=n,bt(e);var r=nn(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Pa)%(2*Math.PI)}function me(n,t,e){var r=oa.range(n,
t-Pa,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function ye(n,t,e){var r=oa.range(n,t-Pa,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Me(n){return n.source}function xe(n){return n.target}function we(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),a=Math.cos(u);return[Math.atan2(n*i,r*a),Math.asin(r&&e*i/r)]},e}function Se(n,t){function e(n,t){0<a?t<-Oa+Pa&&(t=-Oa+Pa):Oa-Pa<t&&(t=Oa-Pa);var e=a/Math.pow(u(t),i);return[e*Math.sin(i*n),a-e*Math.cos(i*n)]}var r=Math.cos(n)
,u=function(n){return Math.tan(ja/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),a=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=a-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(a/r,1/i))-Oa]},e):Ne}function ke(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return Ma(u)<Pa?ce:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Ne(n,t){return[n,Math.log(Math.tan(ja/4+t/2))]}function Ee(n){var t,e=ae(n),r=e.scale,u=e.translate,i=e.clipExtent
;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var a=i.apply(e,arguments);if(a===e){if(t=null==n){var o=ja*r(),l=u();i([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else t&&(a=null);return a},e.clipExtent(null)}function Ae(n,t){return[Math.log(Math.tan(ja/4+t/2)),-n]}function Ce(n){return n[0]}function ze(n){return n[1]}function Le(n){for(var t=n.length,e=[0,1],r=2,u=2;u<t;u++){for(;1<r&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function qe(n,t){return n[0]-t[0]||n[1]-t[1]}function Te(n,t
,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Re(n,t,e,r){var u=n[0],i=e[0],a=t[0]-u,o=r[0]-i,l=n[1],c=e[1],s=t[1]-l,f=r[1]-c,h=(o*(l-c)-f*(u-i))/(f*a-o*s);return[u+h*a,l+h*s]}function De(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Pe(){rr(this),this.edge=this.site=this.circle=null}function Ue(n){var t=cl.pop()||new Pe;return t.site=n,t}function je(n){Be(n),al.remove(n),cl.push(n),rr(n)}function Fe(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,a=n.N,o=[n];je(n);for(var l=i;l.circle&&Ma(e-l.circle.x)<Pa&&Ma(r-l.circle.cy)<Pa;)i=l.P,o.unshift(l),je(l),l=i;o.unshift(l),Be(l);for(var c=a;c.circle&&Ma(e-c.circle.x
)<Pa&&Ma(r-c.circle.cy)<Pa;)a=c.N,o.push(c),je(c),c=a;o.push(c),Be(c);var s,f=o.length;for(s=1;s<f;++s)c=o[s],l=o[s-1],nr(c.edge,l.site,c.site,u);l=o[0],(c=o[f-1]).edge=Ke(l.site,c.site,null,u),$e(l),$e(c)}function He(n){for(var t,e,r,u,i=n.x,a=n.y,o=al._;o;)if(r=Oe(o,a)-i,Pa<r)o=o.L;else{if(u=i-Ie(o,a),!(Pa<u)){-Pa<r?(t=o.P,e=o):-Pa<u?e=(t=o).N:t=e=o;break}if(!o.R){t=o;break}o=o.R}var l=Ue(n);if(al.insert(t,l),t||e){if(t===e)return Be(t),e=Ue(t.site),al.insert(l,e),l.edge=e.edge=Ke(t.site,l.site),$e(t),void $e(e);if(!e)return void(l.edge=Ke(t.site,l.site));Be(t),Be(e);var c=t.site,s=c.x,f=c.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,
M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};nr(e.edge,c,p,x),l.edge=Ke(c,n,null,x),e.edge=Ke(n,p,null,x),$e(t),$e(e)}}function Oe(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var a=n.P;if(!a)return-1/0;var o=(e=a.site).x,l=e.y,c=l-t;if(!c)return o;var s=o-r,f=1/i-1/c,h=s/c;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*c)-l+c/2+u-i/2)))/f+r:(r+o)/2}function Ie(n,t){var e=n.N;if(e)return Oe(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ye(n){this.site=n,this.edges=[]}function Ve(n,t){return t.angle-n.angle}function Xe(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){
var a=u.x,o=u.y,l=r.x-a,c=r.y-o,s=i.x-a,h=2*(l*(f=i.y-o)-c*s);if(!(-Ua<=h)){var g=l*l+c*c,p=s*s+f*f,v=(f*g-c*p)/h,d=(l*p-s*g)/h,f=d+o,m=sl.pop()||new Xe;m.arc=n,m.site=u,m.x=v+a,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=ll._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}ll.insert(y,m),y||(ol=m)}}}}function Be(n){var t=n.circle;t&&(t.P||(ol=t.N),ll.remove(t),sl.push(t),rr(t),n.circle=null)}function Je(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,a=t[0][0],o=t[1][0],l=t[0][1],c=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(d<a||o<=d)return;if(p<h){if(i){if(i.y>=c
)return}else i={x:d,y:l};e={x:d,y:c}}else{if(i){if(i.y<l)return}else i={x:d,y:c};e={x:d,y:l}}}else if(u=m-(r=(h-p)/(v-g))*d,r<-1||1<r)if(p<h){if(i){if(i.y>=c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else{if(i){if(i.y<l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else if(g<v){if(i){if(i.x>=o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}else{if(i){if(i.x<a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}return n.a=i,n.b=e,!0}function Ge(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ke(n,t,e,r){var u=new Ge(n,t);return ul.push(u),e&&nr(u,n,t,e),r&&nr(u,t,n,r),il[n.i].edges.push(new tr(u,n,t)),il[t.i].edges.push(new tr(u,t,n)),u}function Qe(n,t,e){
var r=new Ge(n,null);return r.a=t,r.b=e,ul.push(r),r}function nr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function tr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function er(){this._=null}function rr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ur(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ir(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function ar(n){for(;n.L;)n=n.L;return n}function or(n,t){var e,r,u,i=n.sort(lr).pop();for(ul=[],
il=new Array(n.length),al=new er,ll=new er;;)if(u=ol,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(il[i.i]=new Ye(i),He(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Fe(u.arc)}t&&(function(n){for(var t,e=ul,r=Yt(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)(!Je(t=e[u],n)||!r(t)||Ma(t.a.x-t.b.x)<Pa&&Ma(t.a.y-t.b.y)<Pa)&&(t.a=t.b=null,e.splice(u,1))}(t),function(n){for(var t,e,r,u,i,a,o,l,c,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=il,d=v.length;d--;)if((i=v[d])&&i.prepare())for(l=(o=i.edges).length,a=0;a<l;)r=(s=o[a].end()).x,u=s.y,t=(c=o[++a%l].start()).x,e=c.y,(Ma(r-t)>Pa||Ma(u-e)>Pa)&&(o.splice(a,0,new tr(Qe(i.site,s,Ma(r-f)<Pa&&Pa<p-u?{x:f,
y:Ma(t-f)<Pa?e:p}:Ma(u-p)<Pa&&Pa<h-r?{x:Ma(e-p)<Pa?t:h,y:p}:Ma(r-h)<Pa&&Pa<u-g?{x:h,y:Ma(t-h)<Pa?e:g}:Ma(u-g)<Pa&&Pa<r-f?{x:Ma(e-g)<Pa?t:f,y:g}:null),i.site,null)),++l)}(t));var a={cells:il,edges:ul};return al=ll=ul=il=null,a}function lr(n,t){return t.y-n.y||t.x-n.x}function cr(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function sr(n){return n.x}function fr(n){return n.y}function vr(n,t){n=oa.rgb(n),t=oa.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,a=t.g-r,o=t.b-u;return function(n){return"#"+bn(Math.round(e+i*n))+bn(Math.round(r+a*n))+bn(Math.round(u+o*n))}}function dr(n,t){var e,r={},u={};for(e in n)e in t?r[e]=Mr(n[e],t[e]):u[e]=n[e];for(e in t
)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function mr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function yr(n,t){var e,r,u,i=hl.lastIndex=gl.lastIndex=0,a=-1,o=[],l=[];for(n+="",t+="";(e=hl.exec(n))&&(r=gl.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),o[a]?o[a]+=u:o[++a]=u),(e=e[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:mr(e,r)})),i=gl.lastIndex;return i<t.length&&(u=t.slice(i),o[a]?o[a]+=u:o[++a]=u),o.length<2?l[0]?(t=l[0].x,function(n){return t(n)+""}):function(){return t}:(t=l.length,function(n){for(var e,r=0;r<t;++r)o[(e=l[r]).i]=e.x(n);return o.join("")})}function Mr(n,t){for(var e,
r=oa.interpolators.length;0<=--r&&!(e=oa.interpolators[r](n,t)););return e}function xr(n,t){var e,r=[],u=[],i=n.length,a=t.length,o=Math.min(n.length,t.length);for(e=0;e<o;++e)r.push(Mr(n[e],t[e]));for(;e<i;++e)u[e]=n[e];for(;e<a;++e)u[e]=t[e];return function(n){for(e=0;e<o;++e)u[e]=r[e](n);return u}}function _r(n){return function(t){return 1-n(1-t)}}function wr(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function Sr(n){return n*n}function kr(n){return n*n*n}function Nr(n){if(n<=0)return 0;if(1<=n)return 1;var t=n*n,e=t*n;return 4*(n<.5?e:3*(n-t)+e-.75)}function Ar(n){return 1-Math.cos(n*Oa)}function Cr(n){return Math.pow(2,10*(n-1))}
function zr(n){return 1-Math.sqrt(1-n*n)}function Tr(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Ur(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function jr(n){var t=[n.a,n.b],e=[n.c,n.d],r=Hr(t),u=Fr(t,e),i=Hr(function(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ya:0}function Fr(n,t){return n[0]*t[0]+n[1]*t[1]}function Hr(n){var t=Math.sqrt(Fr(n,n))
;return t&&(n[0]/=t,n[1]/=t),t}function Ir(n){return n.length?n.pop()+",":""}function $r(n,t){var e=[],r=[];return n=oa.transform(n),t=oa.transform(t),function(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push("translate(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}(n.translate,t.translate,e,r),function(n,t,e,r){n!==t?(180<n-t?t+=360:180<t-n&&(n+=360),r.push({i:e.push(Ir(e)+"rotate(",null,")")-2,x:mr(n,t)})):t&&e.push(Ir(e)+"rotate("+t+")")}(n.rotate,t.rotate,e,r),function(n,t,e,r){n!==t?r.push({i:e.push(Ir(e)+"skewX(",null,")")-2,x:mr(n,t)}):t&&e.push(Ir(e)+"skewX("+t+")")}(n.skew
,t.skew,e,r),function(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push(Ir(e)+"scale(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(1!==t[0]||1!==t[1])&&e.push(Ir(e)+"scale("+t+")")}(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,u=-1,i=r.length;++u<i;)e[(t=r[u]).i]=t.x(n);return e.join("")}}function Br(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Wr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Jr(n){for(var t=n.source,e=n.target,r=function(n,t){if(n===t)return n;for(var e=Gr(n),r=Gr(t),u=e.pop(),i=r.pop(),a=null;u===i;)a=u,u=e.pop(),i=r.pop();return a}(
t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Gr(n){for(var t=[],e=n.parent;null!=e;)t.push(n),e=(n=e).parent;return t.push(n),t}function Qr(n){n.fixed|=2}function nu(n){n.fixed&=-7}function tu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function eu(n){n.fixed&=-5}function uu(n,t){return oa.rebind(n,t,"sort","children","value"),(n.nodes=n).links=su,n}function iu(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;0<=--r;)e.push(u[r])}function au(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,a=-1;++a<u;)e.push(i[a]);for(
;null!=(n=r.pop());)t(n)}function ou(n){return n.children}function lu(n){return n.value}function cu(n,t){return t.value-n.value}function su(n){return oa.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function fu(n){return n.x}function hu(n){return n.y}function gu(n,t,e){n.y0=t,n.y=e}function pu(n){return oa.range(n.length)}function vu(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function du(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;e<i;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function mu(n){return n.reduce(yu,0)}function yu(n,t){return n+t[1]}function Mu(n,t){return xu(n,Math.ceil(Math.log(t.length
)/Math.LN2+1))}function xu(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function bu(n){return[oa.min(n),oa.max(n)]}function _u(n,t){return n.value-t.value}function wu(n,t){var e=n._pack_next;(n._pack_next=t)._pack_prev=n,(t._pack_next=e)._pack_prev=t}function Su(n,t){(n._pack_next=t)._pack_prev=n}function ku(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return e*e+r*r<.999*u*u}function Nu(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(c=e.length)){var e,r,u,i,a,o,l,c,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(Eu),(r=e[0]).x=-r.r,r.y=0,t(r),1<c&&((u=e[1]).x=u.r,u.y=0
,t(u),2<c))for(zu(r,u,i=e[2]),t(i),wu(r,i),wu(r._pack_prev=i,u),u=r._pack_next,a=3;a<c;a++){zu(r,u,i=e[a]);var p=0,v=1,d=1;for(o=u._pack_next;o!==u;o=o._pack_next,v++)if(ku(o,i)){p=1;break}if(1==p)for(l=r._pack_prev;l!==o._pack_prev&&!ku(l,i);l=l._pack_prev,d++);p?(v<d||v==d&&u.r<r.r?Su(r,u=o):Su(r=l,u),a--):(wu(r,i),t(u=i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(a=0;a<c;a++)(i=e[a]).x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(Au)}}function Eu(n){n._pack_next=n._pack_prev=n}function Au(n){delete n._pack_next,delete n._pack_prev}function zu(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var a=t.r+e.r,o=u*u+i*i,l=.5+((r*=r)-(a*=a)
)/(2*o),c=Math.sqrt(Math.max(0,2*a*(r+o)-(r-=o)*r-a*a))/(2*o);e.x=n.x+l*u+c*i,e.y=n.y+l*i-c*u}else e.x=n.x+r,e.y=n.y}function Lu(n,t){return n.parent==t.parent?1:2}function qu(n){var t=n.children;return t.length?t[0]:n.t}function Tu(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ru(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Pu(n,t,e){return n.a.parent===t.parent?n.a:e}function Ou(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Iu(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return u<0&&(e+=u/2,u=0),i<0&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Yu(n){var t=n[0],e=n[n.length-1];return t<e?[t,e]:[e,t]
}function Zu(n){return n.rangeExtent?n.rangeExtent():Yu(n.range())}function Vu(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Xu(n,t){var e,r=0,u=n.length-1,i=n[r],a=n[u];return a<i&&(e=r,r=u,u=e,e=i,i=a,a=e),n[r]=t.floor(i),n[u]=t.ceil(a),n}function $u(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:Sl}function Bu(n,t,e,r){var u=[],i=[],a=0,o=Math.min(n.length,t.length)-1;for(n[o]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<=o;)u.push(e(n[a-1],n[a])),i.push(r(t[a-1],t[a]));return function(t){var e=oa.bisect(n,t,1,o)-1;return i[e](u[e](t))}}function Ju(n,t
){return oa.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Gu(n,t){return Xu(n,$u(Ku(n,t)[2])),Xu(n,$u(Ku(n,t)[2])),n}function Ku(n,t){null==t&&(t=10);var e=Yu(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return i<=.15?u*=10:i<=.35?u*=5:i<=.75&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Qu(n,t){return oa.range.apply(oa,Ku(n,t))}function ni(n,t,e){var r=Ku(n,t);if(e){var u=fo.exec(e);if(u.shift(),"s"===u[8]){var i=oa.formatPrefix(Math.max(Ma(r[0]),Ma(r[1])));return u[7]||(u[7]="."+ti(i.scale(r[2]))),u[8]="f",e=oa.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}
u[7]||(u[7]="."+function(n,t){var e=ti(t[2]);return n in kl?Math.abs(e-ti(Math.max(Ma(t[0]),Ma(t[1]))))+ +("e"!==n):e-2*("%"===n)}(u[8],r)),e=u.join("")}else e=",."+ti(r[2])+"f";return oa.format(e)}function ti(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function ii(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function fi(){return 0}function hi(n){return n.innerRadius}function gi(n){return n.outerRadius}function pi(n){return n.startAngle}function vi(n){return n.endAngle}function di(n){return n&&n.padAngle}function mi(n,t,e,r){return 0<(n-e)*t-(t-r)*n?0:1}function yi(n,t,e,r,u){var i=n[0]-t[0],a=n[1]-t[1],o=(u?r:-r)/Math.sqrt(i*i+a*a),
l=o*a,c=-o*i,s=n[0]+l,f=n[1]+c,h=t[0]+l,g=t[1]+c,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(m<0?-1:1)*Math.sqrt(Math.max(0,M*M*y-x*x)),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,N=_-p,E=w-v,A=S-p,C=k-v;return A*A+C*C<N*N+E*E&&(_=S,w=k),[[_-l,w-c],[_*e/M,w*e/M]]}function Mi(n){function t(t){function a(){c.push("M",i(n(s),o))}for(var l,c=[],s=[],f=-1,h=t.length,g=En(e),p=En(r);++f<h;)u.call(this,l=t[f],f)?s.push([+g.call(this,l,f),+p.call(this,l,f)]):s.length&&(a(),s=[]);return s.length&&a(),c.length?c.join(""):null}var e=Ce,r=ze,u=zt,i=xi,a=i.key,o=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){
return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(a="function"==typeof n?i=n:(i=Tl.get(n)||xi).key,t):a},t.tension=function(n){return arguments.length?(o=n,t):o},t}function xi(n){return 1<n.length?n.join("L"):n+"Z"}function bi(n){return n.join("L")+"Z"}function wi(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function Si(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function Ai(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2
)return xi(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],a=t[0],o=a,l=1;if(e&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],u=n[1],l=2),1<t.length){o=t[1],i=n[l],l++,r+="C"+(u[0]+a[0])+","+(u[1]+a[1])+","+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++)i=n[l],o=t[c],r+="S"+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1]}if(e){var s=n[l];r+="Q"+(i[0]+2*o[0]/3)+","+(i[1]+2*o[1]/3)+","+s[0]+","+s[1]}return r}function Ci(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],a=n[1],o=1,l=n.length;++o<l;)e=i,i=a,a=n[o],r.push([u*(a[0]-e[0]),u*(a[1]-e[1])]);return r}function zi(n){if(n.length<3)return xi(n);var t=1,e=n.length,r=n[0],
u=r[0],i=r[1],a=[u,u,u,(r=n[1])[0]],o=[i,i,i,r[1]],l=[u,",",i,"L",Ri(Pl,a),",",Ri(Pl,o)];for(n.push(n[e-1]);++t<=e;)r=n[t],a.shift(),a.push(r[0]),o.shift(),o.push(r[1]),Di(l,a,o);return n.pop(),l.push("L",r),l.join("")}function Ri(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Di(n,t,e){n.push("C",Ri(Rl,t),",",Ri(Rl,e),",",Ri(Dl,t),",",Ri(Dl,e),",",Ri(Pl,t),",",Ri(Pl,e))}function Pi(n,t){return(t[1]-n[1])/(t[0]-n[0])}function ji(n){for(var t,e,r,u,i=[],a=function(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],a=r[0]=Pi(u,i);++t<e;)r[t]=(a+(a=Pi(u=i,i=n[t+1])))/2;return r[t]=a,r}(n),o=-1,l=n.length-1;++o<l;)t=Pi(n[o],n[o+1]),Ma(t
)<Pa?a[o]=a[o+1]=0:9<(u=(e=a[o]/t)*e+(r=a[o+1]/t)*r)&&(u=3*t/Math.sqrt(u),a[o]=u*e,a[o+1]=u*r);for(o=-1;++o<=l;)u=(n[Math.min(l,o+1)][0]-n[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),i.push([u||0,a[o]*u||0]);return i}function Hi(n){for(var t,e,r,u=-1,i=n.length;++u<i;)e=(t=n[u])[0],r=t[1]-Oa,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Oi(n){function t(t){function l(){v.push("M",o(n(m),f),s,c(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=En(e),b=En(u),_=e===r?function(){return g}:En(r),w=u===i?function(){return p}:En(i);++y<M;)a.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),
+w.call(this,h,y)])):d.length&&(l(),d=[],m=[]);return d.length&&l(),v.length?v.join(""):null}var e=Ce,r=Ce,u=0,i=ze,a=zt,o=xi,l=o.key,c=o,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(a=n,t):a},t.interpolate=function(n){return arguments.length?(l="function"==typeof n?o=n:(o=Tl.get(n)||xi).key,c=o.reverse||o,s=o.closed?"M":"L",t):l}
,t.tension=function(n){return arguments.length?(f=n,t):f},t}function Ii(n){return n.radius}function Yi(n){return[n.x,n.y]}function Vi(){return 64}function Xi(){return"circle"}function $i(n){var t=Math.sqrt(n/ja);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Bi(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Wi(n,t,e){return Sa(n,Yl),n.namespace=t,n.id=e,n}function Ji(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,a,o){
n[i][u].tween.set(t,r(e.call(n,n.__data__,a,o)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Gi(n){return null==n&&(n=""),function(){this.textContent=n}}function Ki(n){return null==n?"__transition__":"__transition_"+n+"__"}function Qi(n,t,e,r,u){function a(e){var u=p.active,i=p[u];for(var a in i&&(i.timer.c=null,i.timer.t=NaN,--p.count,delete p[u],i.event&&i.event.interrupt.call(n,n.__data__,i.index)),p)if(+a<r){var c=p[a];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[a]}s.c=o,qn(function(){return s.c&&o(e||1)&&(s.c=null,s.t=NaN),1},0,l),p.active=r,v.event&&v.event.start.call(n,n.__data__,t),g=[],v.tween.forEach(function(e,r){(r=r.call(n,
n.__data__,t))&&g.push(r)}),h=v.ease,f=v.duration}function o(u){for(var i=u/f,a=h(i),o=g.length;0<o;)g[--o].call(n,a);return 1<=i?(v.event&&v.event.end.call(n,n.__data__,t),--p.count?delete p[r]:delete n[e],1):void 0}var l,s,f,h,g,p=n[e]||(n[e]={active:0,count:0}),v=p[r];v||(l=u.time,s=qn(function(n){var t=v.delay;return s.t=t+l,t<=n?a(n-t):void(s.c=a)},0,l),v=p[r]={tween:new c,time:l,timer:s,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++p.count)}function na(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function ta(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(
isFinite(r)?r:e(n))+")"})}function ea(n){return n.toISOString()}function ra(n,t,e){function r(t){return n(t)}function u(n,e){var u=(n[1]-n[0])/e,i=oa.bisect(Kl,u);return i==Kl.length?[t.year,Ku(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Kl[i-1]<Kl[i]/u?i-1:i]:[tc,Ku(n,e)[2]]}return r.invert=function(t){return ua(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(ua)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,ua(+e+1),t).length}var i=r.domain(),a=Yu(i),o=null==n?u(a,10):"number"==typeof n&&u(a,n);return o&&(n=o[0],t=o[1]),r.domain(Xu(i,1<t?{floor:function(t){for(;e(t=n.floor(t));)t=ua(t-1)
;return t},ceil:function(t){for(;e(t=n.ceil(t));)t=ua(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Yu(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],ua(+e[1]+1),t<1?1:t)},r.tickFormat=function(){return e},r.copy=function(){return ra(n.copy(),t,e)},Ju(r,n)}function ua(n){return new Date(n)}function ia(n){return JSON.parse(n.responseText)}function aa(n){var t=sa.createRange();return t.selectNode(sa.body),t.createContextualFragment(n.responseText)}var oa={version:"3.5.16"},la=[].slice,ca=function(n){return la.call(n)},sa=this.document;if(sa)try{ca(sa.documentElement.childNodes
)[0].nodeType}catch(fa){ca=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),sa)try{sa.createElement("DIV").style.setProperty("opacity",0,"")}catch(ha){var ga=this.Element.prototype,pa=ga.setAttribute,va=ga.setAttributeNS,da=this.CSSStyleDeclaration.prototype,ma=da.setProperty;ga.setAttribute=function(n,t){pa.call(this,n,t+"")},ga.setAttributeNS=function(n,t,e){va.call(this,n,t,e+"")},da.setProperty=function(n,t,e){ma.call(this,n,t+"",e)}}oa.ascending=e,oa.descending=function(n,t){return t<n?-1:n<t?1:n<=t?0:NaN},oa.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(
;++u<i;)if(null!=(r=n[u])&&r<=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r<e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r<=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r<e&&(e=r)}return e},oa.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r<=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e<r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r<=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e<r&&(e=r)}return e},oa.extent=function(n,t){var e,r,u,i=-1,a=n.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=n[i])&&r<=r){e=u=r;break}for(;++i<a;)null!=(r=n[i])&&(r<e&&(e=r),u<r&&(u=r))
}else{for(;++i<a;)if(null!=(r=t.call(n,n[i],i))&&r<=r){e=u=r;break}for(;++i<a;)null!=(r=t.call(n,n[i],i))&&(r<e&&(e=r),u<r&&(u=r))}return[e,u]},oa.sum=function(n,t){var e,r=0,i=n.length,a=-1;if(1===arguments.length)for(;++a<i;)u(e=+n[a])&&(r+=e);else for(;++a<i;)u(e=+t.call(n,n[a],a))&&(r+=e);return r},oa.mean=function(n,t){var e,i=0,a=n.length,o=-1,l=a;if(1===arguments.length)for(;++o<a;)u(e=r(n[o]))?i+=e:--l;else for(;++o<a;)u(e=r(t.call(n,n[o],o)))?i+=e:--l;return l?i/l:void 0},oa.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},oa.median=function(n,t){var i,a=[],o=n.length,l=-1;if(1===arguments.length
)for(;++l<o;)u(i=r(n[l]))&&a.push(i);else for(;++l<o;)u(i=r(t.call(n,n[l],l)))&&a.push(i);return a.length?oa.quantile(a.sort(e),.5):void 0},oa.variance=function(n,t){var e,i,a=n.length,o=0,l=0,c=-1,s=0;if(1===arguments.length)for(;++c<a;)u(e=r(n[c]))&&(l+=(i=e-o)*(e-(o+=i/++s)));else for(;++c<a;)u(e=r(t.call(n,n[c],c)))&&(l+=(i=e-o)*(e-(o+=i/++s)));return 1<s?l/(s-1):void 0},oa.deviation=function(){var n=oa.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ya=i(e);oa.bisectLeft=ya.left,oa.bisect=oa.bisectRight=ya.right,oa.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},oa.shuffle=function(n,t,e){(i=arguments.length
)<3&&(e=n.length,i<2&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},oa.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},oa.pairs=function(n){for(var e=0,r=n.length-1,u=n[0],i=new Array(r<0?0:r);e<r;)i[e]=[u,u=n[++e]];return i},oa.transpose=function(n){if(!(u=n.length))return[];for(var t=-1,e=oa.min(n,a),r=new Array(e);++t<e;)for(var u,i=-1,o=r[t]=new Array(u);++i<u;)o[i]=n[i][t];return r},oa.zip=function(){return oa.transpose(arguments)},oa.keys=function(n){var t=[];for(var e in n)t.push(e);return t},oa.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},
oa.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},oa.merge=function(n){for(var t,e,r,u=n.length,i=-1,a=0;++i<u;)a+=n[i].length;for(e=new Array(a);0<=--u;)for(t=(r=n[u]).length;0<=--t;)e[--a]=r[t];return e};var Ma=Math.abs;oa.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e==1/0)throw new Error("infinite range");var r,u=[],i=function(n){for(var t=1;n*t%1;)t*=10;return t}(Ma(e)),a=-1;if(n*=i,t*=i,(e*=i)<0)for(;(r=n+e*++a)>t;)u.push(r/i);else for(;(r=n+e*++a)<t;)u.push(r/i);return u},oa.map=function(n,t){var e=new c;if(n instanceof c)n.forEach(function(n,t){e.set(n,t)});else if(
Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var a in n)e.set(a,n[a]);return e};var xa="__proto__",ba="\0";l(c,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),oa.nest=function(){function n(t,a,o){if(o>=i.length)return r?r.call(u,a):e?a.sort(e):a;for(var l,s,f,
h,g=-1,p=a.length,v=i[o++],d=new c;++g<p;)(h=d.get(l=v(s=a[g])))?h.push(s):d.set(l,[s]);return f=t?(s=t(),function(e,r){s.set(e,n(t,r,o))}):(s={},function(e,r){s[e]=n(t,r,o)}),d.forEach(f),s}var e,r,u={},i=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return function t(n,e){if(e>=i.length)return n;var r=[],u=a[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}(n(oa.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return a[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},oa.set=function(n){
var t=new m;if(n)for(var e=0,r=n.length;e<r;++e)t.add(n[e]);return t},l(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),oa.behavior={},oa.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var _a=["webkit","ms","moz","Moz","o","O"];oa.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(0<=e&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(
null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},oa.event=null,oa.requote=function(n){return n.replace(wa,"\\$&")};var wa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},ka=function(n,t){return t.querySelector(n)},Na=function(n,t){return t.querySelectorAll(n)},Ea=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(Ea=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(ka=function(n,t){return Sizzle(n,t)[0]||null},Na=Sizzle,Ea=Sizzle.matchesSelector),oa.selection=function(){return oa.select(sa.documentElement)}
;var Aa=oa.selection.prototype=[];Aa.select=function(n){var t,e,r,u,i=[];n=A(n);for(var a=-1,o=this.length;++a<o;){i.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(u=r[l])?(t.push(e=n.call(u,u.__data__,l,a)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return E(i)},Aa.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var a=this[u],o=-1,l=a.length;++o<l;)(e=a[o])&&(r.push(t=ca(n.call(e,e.__data__,o,u))),t.parentNode=e);return E(r)};var Ca="http://www.w3.org/1999/xhtml",za={svg:"http://www.w3.org/2000/svg",xhtml:Ca,xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oa.ns={prefix:za,qualify:function(n){var t=n.indexOf(":"),e=n;return 0<=t&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),za.hasOwnProperty(e)?{space:za[e],local:n}:n}},Aa.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return(n=oa.ns.qualify(n)).local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},Aa.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1
}else for(t=e.getAttribute("class");++u<r;)if(!q(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},Aa.style=function(n,e,r){var u=arguments.length;if(u<3){if("string"!=typeof n){for(r in u<2&&(e=""),n)this.each(P(r,n[r],e));return this}if(u<2){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},Aa.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},Aa.text=function(n){return arguments.length?this.each("function"==typeof n?function(){
var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Aa.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Aa.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},Aa.insert=function(n,t){return n=j(n),t=A(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},
Aa.remove=function(){return this.each(F)},Aa.data=function(n,t){function e(n,e){var r,u,i,a=n.length,f=e.length,h=Math.min(a,f),g=new Array(f),p=new Array(f),v=new Array(a);if(t){var d,m=new c,y=new Array(a);for(r=-1;++r<a;)(u=n[r])&&(m.has(d=t.call(u,u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d);for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?!0!==u&&((g[r]=u).__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<a;)r in y&&!0!==m.get(y[r])&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;r<f;++r)p[r]=H(e[r]);for(;r<a;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,o.push(p),l.push(g),s.push(v)}var r,u,
i=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++i<a;)(u=r[i])&&(n[i]=u.__data__);return n}var o=Z([]),l=E([]),s=E([]);if("function"==typeof n)for(;++i<a;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<a;)e(r=this[i],n);return l.enter=function(){return o},l.exit=function(){return s},l},Aa.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},Aa.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;i<a;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var o=0,l=e.length;o<l;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}
return E(u)},Aa.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];0<=--u;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},Aa.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},Aa.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},Aa.call=function(n){var t=ca(arguments);return n.apply(t[0]=this,t),this},Aa.empty=function(){return!this.node()},Aa.node=function(){for(var n=0,t=this.length;n<t;n++)for(var e=this[n],r=0,u=e.length;r<u;r++){var i=e[r];if(i)return i}return null},Aa.size=function(){var n=0
;return Y(this,function(){++n}),n};var La=[];oa.selection.enter=Z,(oa.selection.enter.prototype=La).append=Aa.append,La.empty=Aa.empty,La.node=Aa.node,La.call=Aa.call,La.size=Aa.size,La.select=function(n){for(var t,e,r,u,i,a=[],o=-1,l=this.length;++o<l;){r=(u=this[o]).update,a.push(t=[]),t.parentNode=u.parentNode;for(var c=-1,s=u.length;++c<s;)(i=u[c])?(t.push(r[c]=e=n.call(u.parentNode,i.__data__,c,o)),e.__data__=i.__data__):t.push(null)}return E(a)},La.insert=function(n,t){return arguments.length<2&&(t=function(n){var t,e;return function(r,u,i){var a,o=n[i].update,l=o.length;for(i!=e&&(e=i,t=0),t<=u&&(t=u+1);!(a=o[t])&&++t<l;);return a}}(this)),
Aa.insert.call(this,n,t)},oa.select=function(t){var e;return e.parentNode="string"==typeof t?(e=[ka(t,sa)],sa.documentElement):(e=[t],n(t)),E([e])},oa.selectAll=function(n){var t;return t.parentNode="string"==typeof n?(t=ca(Na(n,sa)),sa.documentElement):(t=ca(n),null),E([t])},Aa.on=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){for(e in r<2&&(t=!1),n)this.each(X(e,n[e],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var qa=oa.map({mouseenter:"mouseover",mouseleave:"mouseout"});sa&&qa.forEach(function(n){"on"+n in sa&&qa.remove(n)});var Ta,Ra=0;oa.mouse=function(n){return J(n,k())}
;var Da=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;oa.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;u<i;++u)if((r=t[u]).identifier===e)return J(n,r)},oa.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function e(n,t,e,i,a){return function(){var c,s=this,f=oa.event.target.correspondingElement||oa.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=oa.select(e(f)).on(i+d,function(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,g({type:"drag",x:(M=r)[0]+c[0],y:r[1]+c[1],dx:n,dy:e}))}).on(a+d,function(){t(h,v
)&&(m.on(i+d,null).on(a+d,null),y(p),g({type:"dragend"}))}),y=W(f),M=t(h,v);c=u?[(c=u.apply(s,arguments)).x-M[0],c.y-M[1]]:[0,0],g({type:"dragstart"})}}var r=N(n,"drag","dragstart","dragend"),u=null,i=e(b,oa.mouse,t,"mousemove","mouseup"),a=e(G,oa.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},oa.rebind(n,r,"on")},oa.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ca(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Pa=1e-6,Ua=Pa*Pa,ja=Math.PI,Fa=2*ja,Ha=Fa-Pa,Oa=ja/2,Ia=ja/180,Ya=180/ja,Za=Math.SQRT2;oa.interpolateZoom=function(n,t){var e,r,u=n[0],i=n[1],a=n[2],
o=t[0],l=t[1],c=t[2],s=o-u,f=l-i,h=s*s+f*f;if(h<Ua)r=Math.log(c/a)/Za,e=function(n){return[u+n*s,i+n*f,a*Math.exp(Za*n*r)]};else{var g=Math.sqrt(h),p=(c*c-a*a+4*h)/(2*a*2*g),v=(c*c-a*a-4*h)/(2*c*2*g),d=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-d)/Za,e=function(n){var t=n*r,e=rn(d),o=a/(2*g)*(e*function(n){return((n=Math.exp(2*n))-1)/(n+1)}(Za*t+d)-function(n){return((n=Math.exp(n))-1/n)/2}(d));return[u+o*s,i+o*f,a*e/rn(Za*t+d)]}}return e.duration=1e3*r,e},oa.behavior.zoom=function(){function n(n){n.on(L,f).on(Ba+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function u(n){k.k=Math.max(A[0],
Math.min(A[1],n))}function i(n,t){t=function(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function a(t,e,r,a){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,a)),i(d=e,r),t=oa.select(t),0<C&&(t=t.transition().duration(C)),t.call(n.event)}function o(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function l(n){z++||n({type:"zoomstart"})}function c(n){o(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||(n({type:"zoomend"}),d=null)}function f(){var u=this,a=D.of(u,arguments),o=0,f=oa.select(t(u)).on(q,function(){o=1,i(
oa.mouse(u),h),c(a)}).on(T,function(){f.on(q,null).on(T,null),g(o),s(a)}),h=e(oa.mouse(u)),g=W(u);Il.call(u),l(a)}function h(){function n(){var n=oa.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=oa.event.target;oa.select(t).on(x,r).on(b,o),_.push(t);for(var e=oa.event.changedTouches,u=0,i=e.length;u<i;++u)d[e[u].identifier]=null;var l=n(),c=Date.now();if(1===l.length){if(c-M<500){var s=l[0];a(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=c}else if(1<l.length){s=l[0];var f=l[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,a=oa.touches(p);Il.call(p);for(var o=0,
l=a.length;o<l;++o,r=null)if(e=a[o],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),c(v)}function o(){if(oa.event.touches.length){for(var t=oa.event.changedTouches,e=0,r=t.length;e<r;++e)delete d[t[e].identifier];for(var u in d)return void n()}oa.selectAll(_).on(y,null),w.on(L,f).on(R,h),N(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+oa.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=oa.select(p),N=W(p);t(),l(v),w.on(L,null).on(R,t)}function g(){var n=D.of(this,arguments)
;y?clearTimeout(y):(Il.call(this),v=e(d=m||oa.mouse(this)),l(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*$a())*k.k),i(d,v),c(n)}function p(){var n=oa.mouse(this),t=Math.log(k.k)/Math.LN2;a(this,n,e(n),oa.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},E=[960,500],A=Wa,C=250,z=0,L="mousedown.zoom",q="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=N(n,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in sa?($a=function(){return-oa.event.deltaY*(oa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in sa?($a=function(){return oa.event.wheelDelta},"mousewheel"):($a=function(){
return-oa.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Hl?oa.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],u=d?d[0]:e/2,i=d?d[1]:r/2,a=oa.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=a(t),o=e/r[2];this.__chart__=k={x:u-r[0]*o,y:i-r[1]*o,k:o},c(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,l(n),c(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},o(),n):[k.x,
k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},u(+t),o(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Wa:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(x=(b=t).copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(_=(w=t).copy(),k={x:0,y:0,k:1},n):w},oa.rebind(n,D,"on")};var $a,Ba,Wa=[0,1/0];(oa.color=on).prototype.toString=function(){return this.rgb()+""};var Ja=(oa.hsl=ln
).prototype=new on;Ja.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,this.l/n)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,n*this.l)},Ja.rgb=function(){return cn(this.h,this.s,this.l)};var Ga=(oa.hcl=sn).prototype=new on;Ga.brighter=function(n){return new sn(this.h,this.c,Math.min(100,this.l+Ka*(arguments.length?n:1)))},Ga.darker=function(n){return new sn(this.h,this.c,Math.max(0,this.l-Ka*(arguments.length?n:1)))},Ga.rgb=function(){return fn(this.h,this.c,this.l).rgb()},oa.lab=hn;var Ka=18,Qa=.95047,no=1,to=1.08883,eo=hn.prototype=new on;eo.brighter=function(n){return new hn(
Math.min(100,this.l+Ka*(arguments.length?n:1)),this.a,this.b)},eo.darker=function(n){return new hn(Math.max(0,this.l-Ka*(arguments.length?n:1)),this.a,this.b)},eo.rgb=function(){return gn(this.l,this.a,this.b)};var ro=(oa.rgb=yn).prototype=new on;ro.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&t<u&&(t=u),e&&e<u&&(e=u),r&&r<u&&(r=u),new yn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new yn(u,u,u)},ro.darker=function(n){return new yn((n=Math.pow(.7,arguments.length?n:1))*this.r,n*this.g,n*this.b)},ro.hsl=function(){return wn(this.r,this.g,this.b)},ro.toString=function(){
return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var uo=oa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,
darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,
lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,
olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});uo.forEach(function(n,t){uo.set(n,Mn(t))}),oa.functor=En,oa.xhr=An(y),oa.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var a=Cn(n,t,null==e?r:u(e),i);return a.row=function(n){return arguments.length?a.response(null==(e=n)?r:u(n)):e},a}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(a).join(n)}function a(n){return o.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var o=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0)
;return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(c<=s)return a;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}return s=e+2,13===(r=n.charCodeAt(e+1))?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;s<c;){var r,o=1;if(10===(r=n.charCodeAt(s++)))u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++o
);else if(r!==l)continue;return n.slice(t,s-o)}return n.slice(t)}for(var r,u,i={},a={},o=[],c=n.length,s=0,f=0;(r=e())!==a;){for(var h=[];r!==i&&r!==a;)h.push(r),r=e();t&&null==(h=t(h,f++))||o.push(h)}return o},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(a).join(n)].concat(t.map(function(t){return u.map(function(n){return a(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},oa.csv=oa.dsv(",","text/csv"),oa.tsv=oa.dsv("\t","text/tab-separated-values");var io,ao,oo,lo,co=this[x(this,"requestAnimationFrame"
)]||function(n){setTimeout(n,17)};oa.timer=function(){qn.apply(this,arguments)},oa.timer.flush=function(){Rn(),Dn()},oa.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var so=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(n,t){var e=Math.pow(10,3*Ma(8-t));return{scale:8<t?function(n){return n/e}:function(n){return n*e},symbol:n}});oa.formatPrefix=function(n,t){var e=0;return(n=+n)&&(n<0&&(n*=-1),t&&(n=oa.round(n,Pn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),so[8+e/3]}
;var fo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ho=oa.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=oa.round(n,Pn(n,t))).toFixed(Math.max(0,Math.min(20,Pn(n*(1+1e-15),t))))}}),go=oa.time={},po=Date;Hn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},
getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){vo.setUTCDate.apply(this._,arguments)},setDay:function(){vo.setUTCDay.apply(this._,arguments)},setFullYear:function(){vo.setUTCFullYear.apply(this._,arguments)},setHours:function(){
vo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){vo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){vo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){vo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){vo.setUTCSeconds.apply(this._,arguments)},setTime:function(){vo.setTime.apply(this._,arguments)}};var vo=Date.prototype;go.year=On(function(n){return(n=go.day(n)).setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),go.years=go.year.range,go.years.utc=go.year.utc.range,go.day=On(function(n){var t=new po(2e3,0);return t.setFullYear(n.getFullYear(),
n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),go.days=go.day.range,go.days.utc=go.day.utc.range,go.dayOfYear=function(n){var t=go.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=go[n]=On(function(n){return(n=go.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});go[n+"s"]=e.range,go[n+"s"].utc=e.utc.range,
go[n+"OfYear"]=function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)}}),go.week=go.sunday,go.weeks=go.sunday.range,go.weeks.utc=go.sunday.utc.range,go.weekOfYear=go.sundayOfYear;var mo={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,Mo=/^%/;oa.locale=function(n){return{numberFormat:function(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],a=0,o=r[0],l=0;0<u&&0<o&&(t<l+o+1&&(o=Math.max(1,t-l)),i.push(n.substring(u-=o,u+o)),!((l+=o+1)>t));)o=r[a=(a+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=fo.exec(n),r=e[1]||" ",a=e[2]||">",o=e[3]||"-",l=e[4]||"",c=e[5],s=+e[6],
f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===a)&&(c=r="0",a="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===l&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=ho.get(g)||Fn;var M=c&&f;return function(n){var e=d;if(m&&n%1)return"";var u=n<0||0===n&&1/n<0?(n=-n,"-"):"-"===o?"":o;if(p<0){var l=oa.formatPrefix(n,h);n=l.scale(n),e=l.symbol+d}else n*=p;var x,b,
_=(n=g(n,h)).lastIndexOf(".");if(_<0){var w=y?n.lastIndexOf("e"):-1;b=w<0?(x=n,""):(x=n.substring(0,w),n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!c&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=S<s?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===a?u+n+k:">"===a?k+u+n:"^"===a?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}(n),timeFormat:function(n){function t(n){function t(t){for(var e,u,i,a=[],o=-1,l=0;++o<r;)37===n.charCodeAt(o)&&(a.push(n.slice(l,o)),null!=(u=mo[e=n.charAt(++o)])&&(e=n.charAt(++o)),(i=A[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),a.push(e),l=o+1)
;return a.push(n.slice(l,o)),a.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(r,n,t,0)!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&po!==Hn,a=new(i?Hn:po);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?a._:a},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,a,o=0,l=t.length,c=e.length;o<l;){if(c<=r)return-1;if(37===(u=t.charCodeAt(o++))){if(
a=t.charAt(o++),!(i=C[a in mo?t.charAt(o++):a])||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.multi=(t.utc=function(n){function e(n){try{var t=new(po=Hn);return t._=n,r(t)}finally{po=Date}}var r=t(n);return e.parse=function(n){try{po=Hn;var t=r.parse(n);return t&&t._}finally{po=Date}},e.toString=r.toString,e}).multi=ct;var M=oa.map(),x=Vn(v),b=Xn(v),_=Vn(d),w=Xn(d),S=Vn(m),k=Xn(m),N=Vn(y),E=Xn(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(
n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return Zn(n.getDate(),t,2)},e:function(n,t){return Zn(n.getDate(),t,2)},H:function(n,t){return Zn(n.getHours(),t,2)},I:function(n,t){return Zn(n.getHours()%12||12,t,2)},j:function(n,t){return Zn(1+go.dayOfYear(n),t,3)},L:function(n,t){return Zn(n.getMilliseconds(),t,3)},m:function(n,t){return Zn(n.getMonth()+1,t,2)},M:function(n,t){return Zn(n.getMinutes(),t,2)},p:function(n){return p[+(12<=n.getHours())]},S:function(n,t){return Zn(n.getSeconds(),t,2)},U:function(n,t){return Zn(go.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Zn(
go.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return Zn(n.getFullYear()%100,t,2)},Y:function(n,t){return Zn(n.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},C={a:function(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(n,t,e){N.lastIndex=0;var r=N.exec(t.slice(e));return r?(n.m=E.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(n,t,r){
return e(n,A.c.toString(),t,r)},d:tt,e:tt,H:rt,I:rt,j:et,L:at,m:nt,M:ut,p:function(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)},S:it,U:Bn,w:$n,W:Wn,x:function(n,t,r){return e(n,A.x.toString(),t,r)},X:function(n,t,r){return e(n,A.X.toString(),t,r)},y:Gn,Y:Jn,Z:Kn,"%":lt};return t}(n)}};var xo=oa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June",
"July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});oa.format=xo.numberFormat,oa.geo={},st.prototype={s:0,t:0,add:function(n){ft(n,this.t,bo),ft(bo.s,this.s,this),this.s?this.t+=bo.t:this.s=bo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bo=new st;oa.geo.stream=function(n,t){n&&_o.hasOwnProperty(n.type)?_o[n.type](n,t):ht(n,t)};var _o={Feature:function(n,t){ht(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)ht(e[r].geometry,t)}},wo={Sphere:function(n,t){t.sphere()},Point:function(n,t){
n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){gt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)gt(e[r],t,0)},Polygon:function(n,t){pt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)pt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)ht(e[r],t)}};oa.geo.area=function(n){return So=0,oa.geo.stream(n,No),So};var So,ko=new st,No={sphere:function(){So+=4*ja},point:b,lineStart:b,lineEnd:b,polygonStart:function(
){ko.reset(),No.lineStart=vt},polygonEnd:function(){var n=2*ko;So+=n<0?4*ja+n:n,No.lineStart=No.lineEnd=No.point=b}};oa.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),t<f&&(f=t),g<t&&(g=t)}function t(t,e){var r=dt([t*Ia,e*Ia]);if(m){var u=yt(m,r),a=yt([u[1],-u[0],0],u);bt(a),a=_t(a);var l=t-p,c=0<l?1:-1,v=a[0]*Ya*c,d=180<Ma(l);if(d^(c*p<v&&v<c*t)){var y=a[1]*Ya;g<y&&(g=y)}else if(d^(c*p<(v=(v+360)%360-180)&&v<c*t)){(y=-a[1]*Ya)<f&&(f=y)}else e<f&&(f=e),g<e&&(g=e);d?t<p?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t):s<=h?(t<s&&(s=t),h<t&&(h=t)):p<t?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,
x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=180<Ma(r)?r+(0<r?360:-360):r}else v=n,d=e;No.point(n,e),t(n,e)}function i(){No.lineStart()}function a(){u(v,d),No.lineEnd(),Ma(y)>Pa&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function o(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function c(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=a,y=0,No.polygonStart()},polygonEnd:function(){No.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,ko<0?(s=-(h=180),f=-(g=90)):Pa<y?g=90:y<-Pa&&(f=-90),x[0]=s,x[1]=h}};return function(
n){if(g=h=-(s=f=1/0),M=[],oa.geo.stream(n,b),t=M.length){M.sort(l);for(var r=1,i=[u=M[0]];r<t;++r)c((e=M[r])[0],u)||c(e[1],u)?(o(u[0],e[1])>o(u[0],u[1])&&(u[1]=e[1]),o(e[0],u[1])>o(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var a,e,t,p=-1/0,u=(r=0,i[t=i.length-1]);r<=t;u=e,++r)e=i[r],(a=o(u[1],e[0]))>p&&(p=a,s=e[0],h=u[1])}return M=x=null,s===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[s,f],[h,g]]}}(),oa.geo.centroid=function(n){Eo=Ao=Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,jo);var t=Do,e=Po,r=Uo,u=t*t+e*e+r*r;return u<Ua&&(t=qo,e=To,r=Ro,Ao<Pa&&(t=Co,e=zo,r=Lo),(u=t*t+e*e+r*r)<Ua)?[NaN,NaN]:[Math.atan2(e,t)*Ya,tn(r/Math.sqrt(u))*Ya]};var Eo,Ao,Co,zo,Lo,qo,To,Ro
,Do,Po,Uo,jo={sphere:b,point:St,lineStart:Nt,lineEnd:Et,polygonStart:function(){jo.lineStart=At},polygonEnd:function(){jo.lineStart=Nt}},Fo=Rt(zt,function(n){var t,e=NaN,r=NaN,u=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(i,a){var o=0<i?ja:-ja,l=Ma(i-e);Ma(l-ja)<Pa?(n.point(e,r=0<(r+a)/2?Oa:-Oa),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(o,r),n.point(i,r),t=0):u!==o&&ja<=l&&(Ma(e-u)<Pa&&(e-=u*Pa),Ma(i-o)<Pa&&(i-=o*Pa),r=function(n,t,e,r){var u,i,a=Math.sin(n-e);return Ma(a)>Pa?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*a)):(t+r)/2}(e,r,i,a),n.point(u,r),n.lineEnd(),n.lineStart(),
n.point(o,r),t=0),n.point(e=i,r=a),u=o},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}},function(n,t,e,r){var u;if(null==n)u=e*Oa,r.point(-ja,u),r.point(0,u),r.point(ja,u),r.point(ja,0),r.point(ja,-u),r.point(0,-u),r.point(-ja,-u),r.point(-ja,0),r.point(-ja,u);else if(Ma(n[0]-t[0])>Pa){var i=n[0]<t[0]?ja:-ja;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])},[-ja,-ja/2]),Ho=1e9;oa.geo.clipExtent=function(){var n,t,e,r,u,i,a={stream:function(n){return u&&(u.valid=!1),(u=i(n)).valid=!0,u},extent:function(o){return arguments.length?(i=Zt(n=+o[0][0],t=+o[0][1],e=+o[1][0],r=+o[1][1]),u&&(u.valid=!1,u=null),a):[[n,t],[e
,r]]}};return a.extent([[0,0],[960,500]])},(oa.geo.conicEqualArea=function(){return Vt(Xt)}).raw=Xt,oa.geo.albers=function(){return oa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oa.geo.albersUsa=function(){function n(n){var i=n[0],a=n[1];return t=null,e(i,a),t||(r(i,a),t)||u(i,a),t}var t,e,r,u,i=oa.geo.albers(),a=oa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=oa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(
.12<=u&&u<.234&&-.425<=r&&r<-.214?a:.166<=u&&u<.234&&-.214<=r&&r<-.115?o:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=a.stream(n),r=o.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),o.precision(t),n):i.precision()},
n.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),o.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var c=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*c,f-.238*c],[s+.455*c,f+.238*c]]).stream(l).point,r=a.translate([s-.307*c,f+.201*c]).clipExtent([[s-.425*c+Pa,f+.12*c+Pa],[s-.214*c-Pa,f+.234*c-Pa]]).stream(l).point,u=o.translate([s-.205*c,f+.212*c]).clipExtent([[s-.214*c+Pa,f+.166*c+Pa],[s-.115*c-Pa,f+.234*c-Pa]]).stream(l).point,n},n.scale(1070)};var Oo,Io,Yo,Zo,Vo,Xo,$o={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Io=0,$o.lineStart=$t},
polygonEnd:function(){$o.lineStart=$o.lineEnd=$o.point=b,Oo+=Ma(Io/2)}},Bo={point:function(n,t){n<Yo&&(Yo=n),Vo<n&&(Vo=n),t<Zo&&(Zo=t),Xo<t&&(Xo=t)},lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Wo={point:Gt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){Wo.lineStart=ne},polygonEnd:function(){Wo.point=Gt,Wo.lineStart=Kt,Wo.lineEnd=Qt}};oa.geo.path=function(){function n(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=u(i)),oa.geo.stream(n,a)),i.result()}function t(){return a=null,n}var e,r,u,i,a,o=4.5;return n.area=function(n){return Oo=0,oa.geo.stream(n,u($o)),Oo},n.centroid=function(n){
return Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,u(Wo)),Uo?[Do/Uo,Po/Uo]:Ro?[qo/Ro,To/Ro]:Lo?[Co/Lo,zo/Lo]:[NaN,NaN]},n.bounds=function(n){return Vo=Xo=-(Yo=Zo=1/0),oa.geo.stream(n,u(Bo)),[[Yo,Zo],[Vo,Xo]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||function(n){var t=ee(function(t,e){return n([t*Ya,e*Ya])});return function(n){return le(t(n))}}(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new Wt:new te(n),"function"!=typeof o&&i.pointRadius(o),t()):r},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(oa.geo.albersUsa()).context(null)},
oa.geo.transform=function(n){return{stream:function(t){var e=new ue(t);for(var r in n)e[r]=n[r];return e}}},ue.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oa.geo.projection=ae,oa.geo.projectionMutator=oe,(oa.geo.equirectangular=function(){return ae(ce)}).raw=ce.invert=ce,oa.geo.rotation=function(n){function t(t){return(t=n(t[0]*Ia,t[1]*Ia))[0]*=Ya,t[1]*=Ya,t}return n=fe(n[0]%360*Ia,n[1]*Ia,2<n.length?n[2]*Ia:0),
t.invert=function(t){return(t=n.invert(t[0]*Ia,t[1]*Ia))[0]*=Ya,t[1]*=Ya,t},t},se.invert=ce,oa.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=fe(-n[0]*Ia,-n[1]*Ia,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ya,n[1]*=Ya}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ve((t=+r)*Ia,u*Ia),n):t},n.precision=function(r){return arguments.length?(e=ve(t*Ia,(u=+r)*Ia),n):u},n.angle(90)},oa.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Ia,u=n[1]*Ia,i=t[1]*Ia,a=Math.sin(r),
o=Math.cos(r),l=Math.sin(u),c=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*a)*e+(e=c*s-l*f*o)*e),l*s+c*f*o)},oa.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return oa.range(Math.ceil(i/d)*d,u,d).map(h).concat(oa.range(Math.ceil(c/m)*m,l,m).map(g)).concat(oa.range(Math.ceil(r/p)*p,e,p).filter(function(n){return Ma(n%d)>Pa}).map(s)).concat(oa.range(Math.ceil(o/v)*v,a,v).filter(function(n){return Ma(n%m)>Pa}).map(f))}var e,r,u,i,a,o,l,c,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},
n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(l).slice(1),h(u).reverse().slice(1),g(c).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],c=+t[0][1],l=+t[1][1],u<i&&(t=i,i=u,u=t),l<c&&(t=c,c=l,l=t),n.precision(y)):[[i,c],[u,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],e<r&&(t=r,r=e,e=t),a<o&&(t=o,o=a,a=t),n.precision(y)):[[r,o],[e,a]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){
return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=me(o,a,90),f=ye(r,e,y),h=me(c,l,90),g=ye(i,u,y),n):y},n.majorExtent([[-180,-90+Pa],[180,90-Pa]]).minorExtent([[-180,-80-Pa],[180,80+Pa]])},oa.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=Me,u=xe;return n.distance=function(){return oa.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(t="function"==typeof(r=e)?null:e,n):r},
n.target=function(t){return arguments.length?(e="function"==typeof(u=t)?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},oa.geo.interpolate=function(n,t){return function(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),a=Math.cos(r),o=Math.sin(r),l=u*Math.cos(n),c=u*Math.sin(n),s=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(an(r-t)+u*a*an(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*l+t*s,u=e*c+t*f,a=e*i+t*o;return[Math.atan2(u,r)*Ya,Math.atan2(a,Math.sqrt(r*r+u*u))*Ya]}:function(){return[n*Ya,t*Ya]};return p.distance=h,p}(n[0]*Ia,n[1]*Ia,t[0]*Ia,t[1]*Ia)},oa.geo.length=function(n){return Jo=0,
oa.geo.stream(n,Go),Jo};var Jo,Go={sphere:b,point:b,lineStart:function(){function n(n,u){var i=Math.sin(u*=Ia),a=Math.cos(u),o=Ma((n*=Ia)-t),l=Math.cos(o);Jo+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=r*i-e*a*l)*o),e*i+r*a*l),t=n,e=i,r=a}var t,e,r;Go.point=function(u,i){t=u*Ia,e=Math.sin(i*=Ia),r=Math.cos(i),Go.point=n},Go.lineEnd=function(){Go.point=Go.lineEnd=b}},lineEnd:b,polygonStart:b,polygonEnd:b},Ko=we(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(oa.geo.azimuthalEqualArea=function(){return ae(Ko)}).raw=Ko;var Qo=we(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(oa.geo.azimuthalEquidistant=function(){
return ae(Qo)}).raw=Qo,(oa.geo.conicConformal=function(){return Vt(Se)}).raw=Se,(oa.geo.conicEquidistant=function(){return Vt(ke)}).raw=ke;var nl=we(function(n){return 1/n},Math.atan);(oa.geo.gnomonic=function(){return ae(nl)}).raw=nl,Ne.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Oa]},(oa.geo.mercator=function(){return Ee(Ne)}).raw=Ne;var tl=we(function(){return 1},Math.asin);(oa.geo.orthographic=function(){return ae(tl)}).raw=tl;var el=we(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(oa.geo.stereographic=function(){return ae(el)}).raw=el,Ae.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Oa]},(
oa.geo.transverseMercator=function(){var n=Ee(Ae),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):[(n=t())[1],-n[0]]},n.rotate=function(n){return n?e([n[0],n[1],2<n.length?n[2]+90:90]):[(n=e())[0],n[1],n[2]-90]},e([0,0,90])}).raw=Ae,oa.geom={},oa.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=En(e),i=En(r),a=n.length,o=[],l=[];for(t=0;t<a;t++)o.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(o.sort(qe),t=0;t<a;t++)l.push([o[t][0],-o[t][1]]);var c=Le(o),s=Le(l),f=s[0]===c[0],h=s[s.length-1]===c[c.length-1],g=[];for(t=c.length-1;0<=t;--t)g.push(n[o[c[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[o[s[t]][2]])
;return g}var e=Ce,r=ze;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},oa.geom.polygon=function(n){return Sa(n,rl),n};var rl=oa.geom.polygon.prototype=[];rl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},rl.centroid=function(n){var t,e,r=-1,u=this.length,i=0,a=0,o=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=o,o=this[r],e=t[0]*o[1]-o[0]*t[1],i+=(t[0]+o[0])*e,a+=(t[1]+o[1])*e;return[i*n,a*n]},rl.clip=function(n){for(var t,e,r,u,i,a,o=De(n),l=-1,c=this.length-De(this),
s=this[c-1];++l<c;){for(t=n.slice(),n.length=0,u=this[l],i=t[(r=t.length-o)-1],e=-1;++e<r;)Te(a=t[e],s,u)?(Te(i,s,u)||n.push(Re(i,a,s,u)),n.push(a)):Te(i,s,u)&&n.push(Re(i,a,s,u)),i=a;o&&n.push(n[0]),s=u}return n};var ul,il,al,ol,ll,cl=[],sl=[];Ye.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)(n=t[e].edge).b&&n.a||t.splice(e,1);return t.sort(Ve),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t
}else n.R=t;e=n}else e=this._?(n=ar(this._),t.P=null,(t.N=n).P=n.L=t,n):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)e===(r=e.U).L?(u=r.R)&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(ur(this,e),e=(n=e).U),e.C=!1,r.C=!0,ir(this,r)):(u=r.L)&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ir(this,e),e=(n=e).U),e.C=!1,r.C=!0,ur(this,r)),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,a=n.R;if(e=i?a?ar(a):i:a,u?u.L===n?u.L=e:u.R=e:this._=e,i&&a?(r=e.C,e.C=n.C,((e.L=i).U=e)!==a?(u=e.U,e.U=n.U,n=e.R,u.L=n,(e.R=a).U=e):(e.U=u,n=(u=e).R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1)
;do{if(n===this._)break;if(n===u.L){if((t=u.R).C&&(t.C=!1,u.C=!0,ur(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ir(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,ur(this,u),n=this._;break}}else if((t=u.L).C&&(t.C=!1,u.C=!0,ir(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ur(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ir(this,u),n=this._;break}t.C=!0,u=(n=u).U}while(!n.C);n&&(n.C=!1)}}},oa.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=o[0][0],u=o[0][1],i=o[1][0],a=o[1][1];return or(e(n),o).cells.forEach(function(e,o){var l=e.edges,c=e.site;(t[o]=l.length?l.map(function(n){var t=n.start();return[t.x,t.y]}
):c.x>=r&&c.x<=i&&c.y>=u&&c.y<=a?[[r,a],[i,a],[i,u],[r,u]]:[]).point=n[o]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Pa)*Pa,y:Math.round(a(n,t)/Pa)*Pa,i:t}})}var r=Ce,u=ze,i=r,a=u,o=fl;return n?t(n):(t.links=function(n){return or(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return or(e(n)).cells.forEach(function(e,r){for(var i,a=e.site,o=e.edges.sort(Ve),l=-1,c=o.length,s=o[c-1].edge,f=s.l===a?s.r:s.l;++l<c;)s,i=f,f=(s=o[l].edge).l===a?s.r:s.l,r<i.i&&r<f.i&&cr(a,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){
return arguments.length?(i=En(r=n),t):r},t.y=function(n){return arguments.length?(a=En(u=n),t):u},t.clipExtent=function(n){return arguments.length?(o=null==n?fl:n,t):o===fl?null:o},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):o===fl?null:o&&o[1]},t)};var fl=[[-1e6,-1e6],[1e6,1e6]];oa.geom.delaunay=function(n){return oa.geom.voronoi().triangles(n)},oa.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,a,o){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var l=n.x,s=n.y;if(null!=l)if(Ma(l-e)+Ma(s-r)<.01)c(n,t,e,r,u,i,a,o);else{var f=n.point;n.x=n.y=n.point=null,c(n,f,l,s,u,i,a,o),c(n,t,e,r,u,i,a,o)}else n.x=e,n.y=r,n.point=t
}else c(n,t,e,r,u,i,a,o)}function c(n,t,e,r,u,a,o,l){var c=.5*(u+o),s=.5*(a+l),f=c<=e,h=s<=r,g=h<<1|f;n.leaf=!1,f?u=c:o=c,h?a=s:l=s,i(n=n.nodes[g]||(n.nodes[g]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,e,r,u,a,o,l)}var s,f,h,g,p,v,d,m,y,M=En(o),x=En(l);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,a)for(g=0;g<p;++g)(s=n[g]).x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;g<p;++g){var b=+M(s=n[g],g),_=+x(s,g);b<v&&(v=b),_<d&&(d=_),m<b&&(m=b),y<_&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;S<w?y=d+w:m=v+S;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(n){i(k,n,+M(n,++g),
+x(n,g),v,d,m,y)}};if(k.visit=function(n){!function gr(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var a=.5*(e+u),o=.5*(r+i),l=t.nodes;l[0]&&gr(n,l[0],e,r,a,o),l[1]&&gr(n,l[1],a,r,u,o),l[2]&&gr(n,l[2],e,o,a,i),l[3]&&gr(n,l[3],a,o,u,i)}}(n,k,v,d,m,y)},k.find=function(n){return function(n,t,e,r,u,i,a){var o,l=1/0;return function c(n,s,f,h,g){if(!(i<s||a<f||h<r||g<u)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(m<l){var y=Math.sqrt(l=m);r=t-y,u=e-y,i=t+y,a=e+y,o=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),S=(b<=e)<<1|x<=t,k=S+4;S<k;++S)if(n=M[3&S])switch(3&S){case 0:c(n,s,f,x,b);break;case 1:c(n,x,f,h,b);break;case 2:c(n,s,b,x,g);break;case 3:c(n,x,b,h,g)}}}(n,r,u,i,a),
o}(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var a,o=Ce,l=ze;return(a=arguments.length)?(o=sr,l=fr,3===a&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(o=n,i):o},i.y=function(n){return arguments.length?(l=n,i):l},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},oa.interpolateRgb=vr,oa.interpolateObject=dr,oa.interpolateNumber=mr,
oa.interpolateString=yr;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(hl.source,"g");oa.interpolate=Mr,oa.interpolators=[function(n,t){var e=typeof t;return("string"===e?uo.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:yr:t instanceof on?vr:Array.isArray(t)?xr:"object"===e&&isNaN(t)?dr:mr)(n,t)}],oa.interpolateArray=xr;var pl=function(){return y},vl=oa.map({linear:pl,poly:function(n){return function(t){return Math.pow(t,n)}},quad:function(){return Sr},cubic:function(){return kr},sin:function(){return Ar},exp:function(){return Cr},circle:function(){return zr},elastic:function(n,t){var e;return arguments.length<2&&(t=.45),
e=arguments.length?t/Fa*Math.asin(1/n):(n=1,t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Fa/t)}},back:function(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}},bounce:function(){return Tr}}),dl=oa.map({in:y,out:_r,"in-out":wr,"out-in":function(n){return wr(_r(n))}});oa.ease=function(n){var t=n.indexOf("-"),e=0<=t?n.slice(0,t):n,r=0<=t?n.slice(t+1):"in";return e=vl.get(e)||pl,function(n){return function(t){return t<=0?0:1<=t?1:n(t)}}((r=dl.get(r)||y)(e.apply(null,la.call(arguments,1))))},oa.interpolateHcl=function(n,t){n=oa.hcl(n),t=oa.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,a=t.c-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),
isNaN(i)?(i=0,e=isNaN(e)?t.h:e):180<i?i-=360:i<-180&&(i+=360),function(n){return fn(e+i*n,r+a*n,u+o*n)+""}},oa.interpolateHsl=function(n,t){n=oa.hsl(n),t=oa.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,a=t.s-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):180<i?i-=360:i<-180&&(i+=360),function(n){return cn(e+i*n,r+a*n,u+o*n)+""}},oa.interpolateLab=function(n,t){n=oa.lab(n),t=oa.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,a=t.a-r,o=t.b-u;return function(n){return gn(e+i*n,r+a*n,u+o*n)+""}},oa.interpolateRound=Ur,oa.transform=function(n){var t=sa.createElementNS(oa.ns.prefix.svg,"g");return(oa.transform=function(n){if(null!=n){
t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new jr(e?e.matrix:ml)})(n)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ml={a:1,b:0,c:0,d:1,e:0,f:0};oa.interpolateTransform=$r,oa.layout={},oa.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Jr(n[e]));return t}},oa.layout.chord=function(){function n(){var n,c,f,h,g,p={},v=[],d=oa.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(c=0,g=-1;++g<i;)c+=u[h][g];v.push(c),m.push(oa.range(i)),n+=c}for(a&&d.sort(function(n,t){return a(v[n],v[t])}),
o&&m.forEach(function(n,t){n.sort(function(n,e){return o(u[t][n],u[t][e])})}),n=(Fa-s*i)/n,c=0,h=-1;++h<i;){for(f=c,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=c,_=c+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:c,value:v[y]},c+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){e.sort(function(n,t){return l((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,a,o,l,c={},s=0;return c.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,
e=r=null,c):u},c.padding=function(n){return arguments.length?(s=n,e=r=null,c):s},c.sortGroups=function(n){return arguments.length?(a=n,e=r=null,c):a},c.sortSubgroups=function(n){return arguments.length?(o=n,e=null,c):o},c.sortChords=function(n){return arguments.length?(l=n,e&&t(),c):l},c.chords=function(){return e||n(),e},c.groups=function(){return r||n(),r},c},oa.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,a=t.cy-n.y,o=u-e,l=i*i+a*a;if(o*o/m<l){if(l<v){var c=t.charge/l;n.px-=i*c,n.py-=a*c}return!0}if(t.point&&l&&l<v){c=t.pointCharge/l;n.px-=i*c,n.py-=a*c}}return!t.charge}}function t(n){n.px=oa.event.x,
n.py=oa.event.y,l.resume()}var e,r,u,i,a,o,l={},c=oa.dispatch("start","tick","end"),s=[1,1],f=.9,h=yl,g=Ml,p=-30,v=xl,d=.1,m=.64,M=[],x=[];return l.tick=function(){if((u*=.99)<.005)return e=null,c.end({type:"end",alpha:u=0}),!0;var t,r,l,h,g,v,m,y,b,_=M.length,w=x.length;for(r=0;r<w;++r)h=(l=x[r]).source,(v=(y=(g=l.target).x-h.x)*y+(b=g.y-h.y)*b)&&(y*=v=u*a[r]*((v=Math.sqrt(v))-i[r])/v,b*=v,g.x-=y*(m=h.weight+g.weight?h.weight/(h.weight+g.weight):.5),g.y-=b*m,h.x+=y*(m=1-m),h.y+=b*m);if((m=u*d)&&(y=s[0]/2,b=s[1]/2,r=-1,m))for(;++r<_;)(l=M[r]).x+=(y-l.x)*m,l.y+=(b-l.y)*m;if(p)for(function ru(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,a=n.nodes,
o=a.length,l=-1;++l<o;)null!=(i=a[l])&&(ru(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=t*e[n.point.index];n.charge+=n.pointCharge=c,r+=c*n.point.x,u+=c*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}(t=oa.geom.quadtree(M),u,o),r=-1;++r<_;)(l=M[r]).fixed||t.visit(n(l));for(r=-1;++r<_;)(l=M[r]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);c.tick({type:"tick",alpha:u})},l.nodes=function(n){return arguments.length?(M=n,l):M},l.links=function(n){return arguments.length?(x=n,l):x},l.size=function(n){return arguments.length?(s=n,l):s},
l.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,l):h},l.distance=l.linkDistance,l.linkStrength=function(n){return arguments.length?(g="function"==typeof n?n:+n,l):g},l.friction=function(n){return arguments.length?(f=+n,l):f},l.charge=function(n){return arguments.length?(p="function"==typeof n?n:+n,l):p},l.chargeDistance=function(n){return arguments.length?(v=n*n,l):Math.sqrt(v)},l.gravity=function(n){return arguments.length?(d=+n,l):d},l.theta=function(n){return arguments.length?(m=n*n,l):Math.sqrt(m)},l.alpha=function(n){return arguments.length?(n=+n,u?0<n?u=n:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:u=0})):0<n&&(
c.start({type:"start",alpha:u=n}),e=qn(l.tick)),l):u},l.start=function(){function n(n,r){if(!e){for(e=new Array(u),l=0;l<u;++l)e[l]=[];for(l=0;l<c;++l){var i=x[l];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,o=e[t],l=-1,s=o.length;++l<s;)if(!isNaN(a=o[l][n]))return a;return Math.random()*r}var t,e,r,u=M.length,c=x.length,f=s[0],v=s[1];for(t=0;t<u;++t)(r=M[t]).index=t,r.weight=0;for(t=0;t<c;++t)"number"==typeof(r=x[t]).source&&(r.source=M[r.source]),"number"==typeof r.target&&(r.target=M[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<u;++t)r=M[t],isNaN(r.x)&&(r.x=n("x",f)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(
r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(t=0;t<c;++t)i[t]=+h.call(this,x[t],t);else for(t=0;t<c;++t)i[t]=h;if(a=[],"function"==typeof g)for(t=0;t<c;++t)a[t]=+g.call(this,x[t],t);else for(t=0;t<c;++t)a[t]=g;if(o=[],"function"==typeof p)for(t=0;t<u;++t)o[t]=+p.call(this,M[t],t);else for(t=0;t<u;++t)o[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=oa.behavior.drag().origin(y).on("dragstart.force",Qr).on("drag.force",t).on("dragend.force",nu)),arguments.length?void this.on("mouseover.force",tu).on("mouseout.force",eu).call(r):r},oa.rebind(l,c,"on")}
;var yl=20,Ml=1,xl=1/0;oa.layout.hierarchy=function(){function n(u){var i,a=[u],o=[];for(u.depth=0;null!=(i=a.pop());)if(o.push(i),(c=e.call(n,i,i.depth))&&(l=c.length)){for(var l,c,s;0<=--l;)a.push(s=c[l]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=c}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return au(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),o}var t=cu,e=ou,r=lu;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(iu(t,function(n
){n.children&&(n.value=0)}),au(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},oa.layout.partition=function(){function e(e,i){var a=r.call(this,e,i);return function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(a=i.length)){var a,o,l,c=-1;for(r=t.value?r/t.value:0;++c<a;)n(o=i[c],e,l=o.value*r,u),e+=l}}(a[0],0,u[0],u[1]/function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}(a[0])),a}var r=oa.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},uu(e,r)},oa.layout.pie=function(){function n(
a){var o,l=a.length,c=a.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/l,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(f<0?-1:1),p=oa.sum(c),v=p?(f-l*g)/p:0,d=oa.range(l),m=[];return null!=e&&d.sort(e===bl?function(n,t){return c[t]-c[n]}:function(n,t){return e(a[n],a[t])}),d.forEach(function(n){m[n]={data:a[n],value:o=c[n],startAngle:s,endAngle:s+=o*v+g,padAngle:h}}),m}var t=Number,e=bl,r=0,u=Fa,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},
n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var bl={};oa.layout.stack=function(){function n(o,l){if(!(h=o.length))return o;var c=o.map(function(e,r){return t.call(n,e,r)}),s=c.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),a.call(n,t,e)]})}),f=e.call(n,s,l);c=oa.permute(c,f),s=oa.permute(s,f);var h,g,p,v,d=r.call(n,s,l),m=c[0].length;for(p=0;p<m;++p)for(u.call(n,c[0][p],v=d[p],s[0][p][1]),g=1;g<h;++g)u.call(n,c[g][p],v+=s[g-1][p][1],s[g][p][1]);return o}var t=y,e=pu,r=vu,u=gu,i=fu,a=hu
;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:_l.get(t)||pu,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:wl.get(t)||vu,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(a=t,n):a},n.out=function(t){return arguments.length?(u=t,n):u},n};var _l=oa.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(du),i=n.map(mu),a=oa.range(r).sort(function(n,t){return u[n]-u[t]}),o=0,l=0,c=[],s=[];for(t=0;t<r;++t)e=a[t],o<l?(o+=i[e],c.push(e)):(l+=i[e],s.push(e));return s.reverse().concat(c)},
reverse:function(n){return oa.range(n.length).reverse()},default:pu}),wl=oa.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,a=[],o=0,l=[];for(e=0;e<i;++e){for(r=t=0;t<u;t++)r+=n[t][e][1];o<r&&(o=r),a.push(r)}for(e=0;e<i;++e)l[e]=(o-a[e])/2;return l},wiggle:function(n){var t,e,r,u,i,a,o,l,c,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=l=c=0,e=1;e<h;++e){for(u=t=0;t<s;++t)u+=n[t][e][1];for(i=t=0,o=f[e][0]-f[e-1][0];t<s;++t){for(r=0,a=(n[t][e][1]-n[t][e-1][1])/(2*o);r<t;++r)a+=(n[r][e][1]-n[r][e-1][1])/o;i+=a*n[t][e][1]}g[e]=l-=u?i/u*o:0,l<c&&(c=l)}for(e=0;e<h;++e)g[e]-=c;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,a=1/u,o=[]
;for(e=0;e<i;++e){for(r=t=0;t<u;t++)r+=n[t][e][1];if(r)for(t=0;t<u;t++)n[t][e][1]/=r;else for(t=0;t<u;t++)n[t][e][1]=a}for(e=0;e<i;++e)o[e]=0;return o},zero:vu});oa.layout.histogram=function(){function n(n,i){for(var a,o,l=[],c=n.map(e,this),s=r.call(this,c,i),f=u.call(this,s,c,i),h=(i=-1,c.length),g=f.length-1,p=t?1:1/h;++i<g;)(a=l[i]=[]).dx=f[i+1]-(a.x=f[i]),a.y=0;if(0<g)for(i=-1;++i<h;)(o=c[i])>=s[0]&&o<=s[1]&&((a=l[oa.bisect(f,o,1,g)-1]).y+=p,a.push(n[i]));return l}var t=!0,e=Number,r=bu,u=Mu;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=En(t),n):r},n.bins=function(t){
return arguments.length?(u="number"==typeof t?function(n){return xu(n,t)}:En(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},oa.layout.pack=function(){function n(n,i){var a=e.call(this,n,i),o=a[0],l=u[0],c=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(o.x=o.y=0,au(o,function(n){n.r=+s(n.value)}),au(o,Nu),r){var f=r*(t?1:Math.max(2*o.r/l,2*o.r/c))/2;au(o,function(n){n.r+=f}),au(o,Nu),au(o,function(n){n.r-=f})}return function Cu(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,a=u.length;++i<a;)Cu(u[i],t,e,r)}(o,l/2,c/2,t?1:1/Math.max(2*o.r/l,2*o.r/c)),a}var t,e=oa.layout.hierarchy(
).sort(_u),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},uu(n,e)},oa.layout.tree=function(){function n(n,u){var s=a.call(this,n,u),f=s[0],h=function(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,a=0,o=i.length;a<o;++a)r.push((i[a]=u={_:i[a],parent:t,children:(u=i[a].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=u);return e.children[0]}(f);if(au(h,e),h.parent.m=-h.z,iu(h,r),c)iu(f,i);else{var g=f,p=f,v=f;iu(f,function(n){
n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=o(g,p)/2-g.x,m=l[0]/(p.x+o(p,g)/2+d),y=l[1]/(v.depth||1);iu(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){!function(n){for(var t,e=0,r=0,u=n.children,i=u.length;0<=--i;)(t=u[i]).z+=e,t.m+=e,e+=t.s+(r+=t.c)}(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+o(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+o(n._,r._));n.parent.A=function(n,t,e){if(t){for(var r,u=n,i=n,a=t,l=u.parent.children[0],c=u.m,s=i.m,f=a.m,h=l.m;a=Tu(a),u=qu(u),a&&u;)l=qu(l),(i=Tu(i)).a=n,0<(r=a.z+f-u.z-c+o(a._,u._))&&(Ru(Pu(a,n,e),n,r),c+=r,
s+=r),f+=a.m,c+=u.m,h+=l.m,s+=i.m;a&&!Tu(i)&&(i.t=a,i.m+=f-s),u&&!qu(l)&&(l.t=u,l.m+=c-h,e=n)}return e}(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function i(n){n.x*=l[0],n.y=n.depth*l[1]}var a=oa.layout.hierarchy().sort(null).value(null),o=Lu,l=[1,1],c=null;return n.separation=function(t){return arguments.length?(o=t,n):o},n.size=function(t){return arguments.length?(c=null==(l=t)?i:null,n):c?null:l},n.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:i,n):c?l:null},uu(n,a)},oa.layout.cluster=function(){function n(n,i){var a,o=t.call(this,n,i),l=o[0],c=0;au(l,function(n){var t=n.children;t&&t.length?(n.x=function(
n){return n.reduce(function(n,t){return n+t.x},0)/n.length}(t),n.y=function(n){return 1+oa.max(n,function(n){return n.y})}(t)):(n.x=a?c+=e(n,a):0,n.y=0,a=n)});var s=function Fu(n){var t=n.children;return t&&t.length?Fu(t[0]):n}(l),f=function Hu(n){var t,e=n.children;return e&&(t=e.length)?Hu(e[t-1]):n}(l),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return au(l,u?function(n){n.x=(n.x-l.x)*r[0],n.y=(l.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(l.y?n.y/l.y:1))*r[1]}),o}var t=oa.layout.hierarchy().sort(null).value(null),e=Lu,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n
):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},uu(n,t)},oa.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(t<0?0:t),e.area=isNaN(r)||r<=0?0:r}function t(e){var i=e.children;if(i&&i.length){var a,o,l,c=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?c.dx:"dice"===g?c.dy:"slice-dice"===g?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(n(h,c.dx*c.dy/e.value),s.area=0;0<(l=h.length);)s.push(a=h[l-1]),s.area+=a.area,p="squarify"!==g||(o=r(s,v))<=p?(h.pop(),o):(s.area-=s.pop().area,u(s,v,c,!1),v=Math.min(c.dx,c.dy),s.length=s.area=0,1/0);s.length&&(u(s,v,c,!0),s.length=s.area=0),
i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,a=f(t),o=r.slice(),l=[];for(n(o,a.dx*a.dy/t.value),l.area=0;i=o.pop();)l.push(i),l.area+=i.area,null!=i.z&&(u(l,i.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,a=-1,o=n.length;++a<o;)(e=n[a].area)&&(e<i&&(i=e),u<e&&(u=e));return t*=t,(r*=r)?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,a=n.length,o=e.x,c=e.y,s=t?l(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<a;)(u=n[i]).x=o,u.y=c,u.dy=s,o+=u.dx=Math.min(e.x+e.dx-o,s?l(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-o,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<a;)(
u=n[i]).x=o,u.y=c,u.dx=s,c+=u.dy=Math.min(e.y+e.dy-c,s?l(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-c,e.x+=s,e.dx-=s}}function i(r){var u=a||o(r),i=u[0];return i.x=i.y=0,i.value?(i.dx=c[0],i.dy=c[1]):i.dx=i.dy=0,a&&o.revalue(i),n([i],i.dx*i.dy/i.value),(a?e:t)(i),h&&(a=u),u}var a,o=oa.layout.hierarchy(),l=Math.round,c=[1,1],s=null,f=Ou,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(c=n,i):c},i.padding=function(n){function e(t){return Iu(t,n)}return arguments.length?(f=null==(s=n)?Ou:"function"==(r=typeof n)?function(t){var e=n.call(i,t,t.depth);return null==e?Ou(t):Iu(t,"number"==typeof e?[e,e,e,e]:e)}:("number"===r&&(n=[n
,n,n,n]),e),i):s;var r},i.round=function(n){return arguments.length?(l=n?Math.round:Number,i):l!=Number},i.sticky=function(n){return arguments.length?(h=n,a=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},uu(i,o)},oa.random={normal:function(n,t){var e=arguments.length;return e<2&&(t=1),e<1&&(n=0),function(){for(var e,r,u;!(u=(e=2*Math.random()-1)*e+(r=2*Math.random()-1)*r)||1<u;);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=oa.random.normal.apply(oa,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=oa.random.irwinHall(n)
;return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},oa.scale={};var Sl={floor:y,ceil:y};oa.scale.linear=function(){return function Wu(n,t,e,r){function u(){var u=2<Math.min(n.length,t.length)?Bu:Vu,l=r?Wr:Br;return a=u(n,t,l,e),o=u(t,n,l,Mr),i}function i(n){return a(n)}var a,o;return i.invert=function(n){return o(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Ur)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){
return arguments.length?(e=n,u()):e},i.ticks=function(t){return Qu(n,t)},i.tickFormat=function(t,e){return ni(n,t,e)},i.nice=function(t){return Gu(n,t),u()},i.copy=function(){return Wu(n,t,e,r)},u()}([0,1],[0,1],Mr,!1)};var kl={s:1,g:1,p:1,r:1,e:1};oa.scale.log=function(){return function ri(n,t,e,r){function u(n){return(e?Math.log(n<0?0:n):-Math.log(0<n?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function a(t){return n(u(t))}return a.invert=function(t){return i(n.invert(t))},a.domain=function(t){return arguments.length?(e=0<=t[0],n.domain((r=t.map(Number)).map(u)),a):r},a.base=function(e){return arguments.length?(t=+e,n.domain(
r.map(u)),a):t},a.nice=function(){var t=Xu(r.map(u),e?Math:El);return n.domain(t),r=t.map(i),a},a.ticks=function(){var n=Yu(r),a=[],o=n[0],l=n[1],c=Math.floor(u(o)),s=Math.ceil(u(l)),f=t%1?2:t;if(isFinite(s-c)){if(e){for(;c<s;c++)for(var h=1;h<f;h++)a.push(i(c)*h);a.push(i(c))}else for(a.push(i(c));c++<s;)for(h=f-1;0<h;h--)a.push(i(c)*h);for(c=0;a[c]<o;c++);for(s=a.length;a[s-1]>l;s--);a=a.slice(c,s)}return a},a.tickFormat=function(n,e){if(!arguments.length)return Nl;arguments.length<2?e=Nl:"function"!=typeof e&&(e=oa.format(e));var r=Math.max(1,t*n/a.ticks().length);return function(n){var a=n/i(Math.round(u(n)));return a*t<t-.5&&(a*=t),a<=r?e(n):""}},
a.copy=function(){return ri(n.copy(),t,e,r)},Ju(a,n)}(oa.scale.linear().domain([0,1]),10,!0,[1,10])};var Nl=oa.format(".0e"),El={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};oa.scale.pow=function(){return function ui(n,t,e){function r(t){return n(u(t))}var u=ii(t),i=ii(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Qu(e,n)},r.tickFormat=function(n,t){return ni(e,n,t)},r.nice=function(n){return r.domain(Gu(e,n))},r.exponent=function(a){return arguments.length?(u=ii(t=a),i=ii(1/t),n.domain(e.map(u)),r):t
},r.copy=function(){return ui(n.copy(),t,e)},Ju(r,n)}(oa.scale.linear(),1,[0,1])},oa.scale.sqrt=function(){return oa.scale.pow().exponent(.5)},oa.scale.ordinal=function(){return function ai(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):NaN))-1)%i.length]}function r(t,e){return oa.range(n.length).map(function(n){return t+e*n})}var u,i,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new c;for(var i,a=-1,o=r.length;++a<o;)u.has(i=r[a])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,a=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,o){arguments.length<2&&(
o=0);var l=u[0],c=u[1],s=n.length<2?(l=(l+c)/2,0):(c-l)/(n.length-1+o);return i=r(l+s*o/2,s),a=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,o){arguments.length<2&&(o=0);var l=u[0],c=u[1],s=n.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(n.length-1+o)|0;return i=r(l+Math.round(s*o/2+(c-l-(n.length-1+o)*s)/2),s),a=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],h=(u[1-c]-s)/(n.length-o+2*l);return i=r(s+h*l,h),c&&i.reverse(),a=h*(1-o),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,o,l){arguments.length<2&&(o=0),
arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],f=u[1-c],h=Math.floor((f-s)/(n.length-o+2*l));return i=r(s+Math.round((f-s-(n.length-o)*h)/2),h),c&&i.reverse(),a=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Yu(t.a[0])},e.copy=function(){return ai(n,t)},e.domain(n)}([],{t:"range",a:[[]]})},oa.scale.category10=function(){return oa.scale.ordinal().range(Al)},oa.scale.category20=function(){return oa.scale.ordinal().range(Cl)},oa.scale.category20b=function(){return oa.scale.ordinal().range(zl)},oa.scale.category20c=function(){return oa.scale.ordinal().range(Ll)};var Al=[2062260,
16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),zl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Ll=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn)
;oa.scale.quantile=function(){return function oi(n,t){function i(){var e=0,r=t.length;for(o=[];++e<r;)o[e-1]=oa.quantile(n,e/r);return a}function a(n){return isNaN(n=+n)?void 0:t[oa.bisect(o,n)]}var o;return a.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},a.range=function(n){return arguments.length?(t=n,i()):t},a.quantiles=function(){return o},a.invertExtent=function(e){return(e=t.indexOf(e))<0?[NaN,NaN]:[0<e?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},a.copy=function(){return oi(n,t)},i()}([],[])},oa.scale.quantize=function(){return function li(n,t,e){function r(t){return e[Math.max(0,Math.min(a,Math.floor(i*(t-n))))]}
function u(){return i=e.length/(t-n),a=e.length-1,r}var i,a;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return[t=(t=e.indexOf(t))<0?NaN:t/i+n,t+1/i]},r.copy=function(){return li(n,t,e)},u()}(0,1,[0,1])},oa.scale.threshold=function(){return function ci(n,t){function e(e){return e<=e?t[oa.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return ci(n,t)},e}([.5],[0,1
])},oa.scale.identity=function(){return function si(n){function t(n){return+n}return(t.invert=t).domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Qu(n,t)},t.tickFormat=function(t,e){return ni(n,t,e)},t.copy=function(){return si(n)},t}([0,1])},oa.svg={},oa.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),s=a.apply(this,arguments)-Oa,f=o.apply(this,arguments)-Oa,h=Math.abs(f-s),g=f<s?0:1;if(c<n&&(p=c,c=n,n=p),Ha<=h)return t(c,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,N=0,E=0,A=[];if((m=(+l.apply(this,arguments)||0)/2)&&(d=i===ql?Math.sqrt(
n*n+c*c):+i.apply(this,arguments),g||(E*=-1),c&&(E=tn(d/c*Math.sin(m))),n&&(N=tn(d/n*Math.sin(m)))),c){y=c*Math.cos(s+E),M=c*Math.sin(s+E),x=c*Math.cos(f-E),b=c*Math.sin(f-E);var C=Math.abs(f-s-2*E)<=ja?0:1;if(E&&mi(y,M,x,b)===g^C){var z=(s+f)/2;y=c*Math.cos(z),M=c*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-N),w=n*Math.sin(f-N),S=n*Math.cos(s+N),k=n*Math.sin(s+N);var L=Math.abs(s-f+2*N)<=ja?0:1;if(N&&mi(_,w,S,k)===1-g^L){var q=(s+f)/2;_=n*Math.cos(q),w=n*Math.sin(q),S=k=null}}else _=w=0;if(Pa<h&&.001<(p=Math.min(Math.abs(c-n)/2,+u.apply(this,arguments)))){v=n<c^g?0:1;var T=p,R=p;if(h<ja){var D=null==S?[_,w]:null==x?[y,M]:Re([y,M],[S,k],[x,b],[_,w]
),P=y-D[0],U=M-D[1],j=x-D[0],F=b-D[1],H=1/Math.sin(Math.acos((P*j+U*F)/(Math.sqrt(P*P+U*U)*Math.sqrt(j*j+F*F)))/2),O=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(p,(n-O)/(H-1)),T=Math.min(p,(c-O)/(H+1))}if(null!=x){var I=yi(null==S?[_,w]:[S,k],[y,M],c,T,g),Y=yi([x,b],[_,w],c,T,g);p===T?A.push("M",I[0],"A",T,",",T," 0 0,",v," ",I[1],"A",c,",",c," 0 ",1-g^mi(I[1][0],I[1][1],Y[1][0],Y[1][1]),",",g," ",Y[1],"A",T,",",T," 0 0,",v," ",Y[0]):A.push("M",I[0],"A",T,",",T," 0 1,",v," ",Y[0])}else A.push("M",y,",",M);if(null!=S){var Z=yi([y,M],[S,k],n,-R,g),V=yi([_,w],null==x?[y,M]:[x,b],n,-R,g);p===R?A.push("L",V[0],"A",R,",",R," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^mi(
V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",R,",",R," 0 0,",v," ",Z[0]):A.push("L",V[0],"A",R,",",R," 0 0,",v," ",Z[0])}else A.push("L",_,",",w)}else A.push("M",y,",",M),null!=x&&A.push("A",c,",",c," 0 ",C,",",g," ",x,",",b),A.push("L",_,",",w),null!=S&&A.push("A",n,",",n," 0 ",L,",",1-g," ",S,",",k);return A.push("Z"),A.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=hi,r=gi,u=fi,i=ql,a=pi,o=vi,l=di;return n.innerRadius=function(t){return arguments.length?(e=En(t),n):e},n.outerRadius=function(t){return arguments.length?(r=En(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=En(
t),n):u},n.padRadius=function(t){return arguments.length?(i=t==ql?ql:En(t),n):i},n.startAngle=function(t){return arguments.length?(a=En(t),n):a},n.endAngle=function(t){return arguments.length?(o=En(t),n):o},n.padAngle=function(t){return arguments.length?(l=En(t),n):l},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Oa;return[Math.cos(t)*n,Math.sin(t)*n]},n};var ql="auto";oa.svg.line=function(){return Mi(y)};var Tl=oa.map({linear:xi,"linear-closed":bi,step:function(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1])
;return 1<e&&u.push("H",r[0]),u.join("")},"step-before":wi,"step-after":Si,basis:zi,"basis-open":function(n){if(n.length<4)return xi(n);for(var t,e=[],r=-1,u=n.length,i=[0],a=[0];++r<3;)t=n[r],i.push(t[0]),a.push(t[1]);for(e.push(Ri(Pl,i)+","+Ri(Pl,a)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),a.shift(),a.push(t[1]),Di(e,i,a);return e.join("")},"basis-closed":function(n){for(var t,e,r=-1,u=n.length,i=u+4,a=[],o=[];++r<4;)e=n[r%u],a.push(e[0]),o.push(e[1]);for(t=[Ri(Pl,a),",",Ri(Pl,o)],--r;++r<i;)e=n[r%u],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Di(t,a,o);return t.join("")},bundle:function(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],a=n[0][1],
o=n[e][0]-i,l=n[e][1]-a,c=-1;++c<=e;)u=c/e,(r=n[c])[0]=t*r[0]+(1-t)*(i+u*o),r[1]=t*r[1]+(1-t)*(a+u*l);return zi(n)},cardinal:function(n,t){return n.length<3?xi(n):n[0]+Ai(n,Ci(n,t))},"cardinal-open":function(n,t){return n.length<4?xi(n):n[1]+Ai(n.slice(1,-1),Ci(n,t))},"cardinal-closed":function(n,t){return n.length<3?bi(n):n[0]+Ai((n.push(n[0]),n),Ci([n[n.length-2]].concat(n,[n[1]]),t))},monotone:function(n){return n.length<3?xi(n):n[0]+Ai(n,ji(n))}});Tl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Rl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];oa.svg.line.radial=function(){var n=Mi(Hi);return n.radius=n.x,delete n.x,n.angle=n.y,
delete n.y,n},(wi.reverse=Si).reverse=wi,oa.svg.area=function(){return Oi(y)},oa.svg.area.radial=function(){var n=Oi(Hi);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},oa.svg.chord=function(){function n(n,o){var l=t(this,i,n,o),c=t(this,a,n,o);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(function(n,t){return n.a0==t.a0&&n.a1==t.a1}(l,c)?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=o.call(n,u,r),a=l.call(n,u,r)-Oa,s=c.call(n,u,r)-Oa;return{r:i,a0:a,
a1:s,p0:[i*Math.cos(a),i*Math.sin(a)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(ja<e)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=Me,a=xe,o=Ii,l=pi,c=vi;return n.radius=function(t){return arguments.length?(o=En(t),n):o},n.source=function(t){return arguments.length?(i=En(t),n):i},n.target=function(t){return arguments.length?(a=En(t),n):a},n.startAngle=function(t){return arguments.length?(l=En(t),n):l},n.endAngle=function(t){return arguments.length?(c=En(t),n):c},n},oa.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),a=e.call(this,n,u),o=(i.y+a.y)/2,l=[i,{x:i.x,y:o},{x:a.x,y:o},a];return"M"+(l=l.map(r)
)[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Me,e=xe,r=Yi;return n.source=function(e){return arguments.length?(t=En(e),n):t},n.target=function(t){return arguments.length?(e=En(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},oa.svg.diagonal.radial=function(){var n=oa.svg.diagonal(),t=Yi,e=n.projection;return n.projection=function(n){return arguments.length?e(function(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Oa;return[e*Math.cos(r),e*Math.sin(r)]}}(t=n)):t},n},oa.svg.symbol=function(){function n(n,r){return(Ul.get(t.call(this,n,r))||$i)(e.call(this,n,r))}var t=Xi,e=Vi;return n.type=function(e){return arguments.length?(
t=En(e),n):t},n.size=function(t){return arguments.length?(e=En(t),n):e},n};var Ul=oa.map({circle:$i,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Fl)),e=t*Fl;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}})
;oa.svg.symbolTypes=Ul.keys();var jl=Math.sqrt(3),Fl=Math.tan(30*Ia);Aa.transition=function(n){for(var t,e,r=Hl||++Zl,u=Ki(n),i=[],a=Ol||{time:Date.now(),ease:Nr,delay:0,duration:250},o=-1,l=this.length;++o<l;){i.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(e=c[s])&&Qi(e,s,u,r,a),t.push(e)}return Wi(i,u,r)},Aa.interrupt=function(n){return this.each(null==n?Il:Bi(Ki(n)))};var Hl,Ol,Il=Bi(Ki()),Yl=[],Zl=0;Yl.call=Aa.call,Yl.empty=Aa.empty,Yl.node=Aa.node,Yl.size=Aa.size,oa.transition=function(n,t){return n&&n.transition?Hl?n.transition(t):n:oa.selection().transition(n)},(oa.transition.prototype=Yl).select=function(n){var t,e,r,u=this.id,
i=this.namespace,a=[];n=A(n);for(var o=-1,l=this.length;++o<l;){a.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(r=c[s])&&(e=n.call(r,r.__data__,s,o))?("__data__"in r&&(e.__data__=r.__data__),Qi(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Wi(a,i,u)},Yl.selectAll=function(n){var t,e,r,u,i,a=this.id,o=this.namespace,l=[];n=C(n);for(var c=-1,s=this.length;++c<s;)for(var f=this[c],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[o][a],e=n.call(r,r.__data__,h,c),l.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&Qi(u,p,o,a,i),t.push(u)}return Wi(l,o,a)},Yl.filter=function(n){var t,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;i<a;i++){u.push(
t=[]);for(var e,o=0,l=(e=this[i]).length;o<l;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}return Wi(u,this.namespace,this.id)},Yl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Yl.attr=function(n,t){function e(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var a="transform"==n?$r:Mr,o=oa.ns.qualify(n);return Ji(this,"attr."+n,t,o.local?function(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(
o.space,o.local);return e!==n&&(t=a(e,n),function(n){this.setAttributeNS(o.space,o.local,t(n))})})}:function(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(o);return e!==n&&(t=a(e,n),function(n){this.setAttribute(o,t(n))})})})},Yl.attrTween=function(n,t){var u=oa.ns.qualify(n);return this.tween("attr."+n,u.local?function(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}:function(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}})},Yl.style=function(n,e,r){function u(){this.style.removeProperty(n)}
var a=arguments.length;if(a<3){if("string"!=typeof n){for(r in a<2&&(e=""),n)this.style(r,n[r],e);return this}r=""}return Ji(this,"style."+n,e,function(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=Mr(i,e),function(t){this.style.setProperty(n,u(t),r)})})})},Yl.styleTween=function(n,e,r){return arguments.length<3&&(r=""),this.tween("style."+n,function(u,i){var a=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return a&&function(t){this.style.setProperty(n,a(t),r)}})},Yl.text=function(n){return Ji(this,"text",n,Gi)},Yl.remove=function(){var n=this.namespace
;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=oa.ease.apply(oa,arguments)),Y(this,function(r){r[e][t].ease=n}))},Yl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Yl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,
"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Yl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Ol,i=Hl;try{Hl=e,Y(this,function(t,u,i){Ol=t[r][e],n.call(t,t.__data__,u,i)})}finally{Ol=u,Hl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=oa.dispatch("start","end","interrupt"))).on(n,t)});return this},Yl.transition=function(){for(var n,e,r,u=this.id,i=++Zl,a=this.namespace,o=[],l=0,c=this.length;l<c;l++){o.push(n=[]);for(var t,s=0,f=(t=this[l]).length;s<f;s++)(e=t[s])&&Qi(e,s,a,i,{time:(r=e[a][u]).time,ease:r.ease,
delay:r.delay+r.duration,duration:r.duration}),n.push(e)}return Wi(o,a,i)},oa.svg.axis=function(){function n(n){n.each(function(){var n,c=oa.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,o):f.domain():l,g=null==t?f.tickFormat?f.tickFormat.apply(f,o):y:t,p=c.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Pa),d=oa.transition(p.exit()).style("opacity",Pa).remove(),m=oa.transition(p.order()).style("opacity",1),M=Math.max(u,0)+a,x=Zu(f),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),oa.transition(b));v.append("line"),v.append(
"text");var w,S,k,N,E=v.select("line"),A=m.select("line"),C=p.select("text").text(g),z=v.select("text"),L=m.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=na,w="x",k="y",S="x2",N="y2",C.attr("dy",q<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+q*i+"V0H"+x[1]+"V"+q*i)):(n=ta,w="y",k="x",S="y2",N="x2",C.attr("dy",".32em").style("text-anchor",q<0?"end":"start"),_.attr("d","M"+q*i+","+x[0]+"H0V"+x[1]+"H"+q*i)),E.attr(N,q*u),z.attr(k,q*M),A.attr(S,0).attr(N,q*u),L.attr(w,0).attr(k,q*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,
f,f)})}var t,e=oa.scale.linear(),r=Vl,u=6,i=6,a=3,o=[10],l=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Xl?t+"":Vl,n):r},n.ticks=function(){return arguments.length?(o=ca(arguments),n):o},n.tickValues=function(t){return arguments.length?(l=t,n):l},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(a=+t,n):a},
n.tickSubdivide=function(){return arguments.length&&n},n};var Vl="bottom",Xl={top:1,right:1,bottom:1,left:1};oa.svg.brush=function(){function n(t){t.each(function(){var t=oa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=t.selectAll(".resize").data(v,y);o.exit().remove(),o.enter().append("g").attr("class",
function(n){return"resize "+n}).style("cursor",function(n){return $l[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",n.empty()?"none":null);var l,f=oa.transition(t),h=oa.transition(a);c&&(l=Zu(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),s&&(l=Zu(s),h.attr("y",l[0]).attr("height",l[1]-l[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(
".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function d(){var n=oa.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(oa.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(n[0]<M[0])],L[1]=h[+(n[1]<M[1])]):M=null),E&&m(n,c,0)&&(r(k),t=!0),A&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Zu(t),l=i[0],c=i[1],s=L[e],v=e?h:f,d=v[1]-v[0];return C&&(l-=s,c-=d+s),r=(e?p:g)?Math.max(l,Math.min(c,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(l,Math.min(c,2*M[e]-r))),s<r?(u=r,r=s):u=s),
v[0]!=r||v[1]!=u?(e?o=null:a=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),oa.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=oa.select(oa.event.target),w=l.of(b,arguments),k=oa.select(b),N=_.datum(),E=!/^(n|s)$/.test(N)&&c,A=!/^(e|w)$/.test(N)&&s,C=_.classed("extent"),z=W(b),L=oa.mouse(b),q=oa.select(t(b)).on("keydown.brush",function(){32==oa.event.keyCode&&(C||(M=null,L[0]-=f[1],
L[1]-=h[1],C=2),S())}).on("keyup.brush",function(){32==oa.event.keyCode&&2==C&&(L[0]+=f[1],L[1]+=h[1],C=0,S())});if(oa.event.changedTouches?q.on("touchmove.brush",d).on("touchend.brush",y):q.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(N){var T=+/w$/.test(N),R=+/^n/.test(N);x=[f[1-T]-L[0],h[1-R]-L[1]],L[0]=f[T],L[1]=h[R]}else oa.event.altKey&&(M=L.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),oa.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var a,o,l=N(n,"brushstart","brush","brushend"),c=null,s=null,f=[0,0],
h=[0,0],g=!0,p=!0,v=Bl[0];return n.event=function(n){n.each(function(){var n=l.of(this,arguments),t={x:f,y:h,i:a,j:o},e=this.__chart__||t;this.__chart__=t,Hl?oa.select(this).transition().each("start.brush",function(){a=e.i,o=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(f,t.x),r=xr(h,t.y);return a=o=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(v=Bl[!(c=t)<<1|!s],n):c},n.y=function(t
){return arguments.length?(v=Bl[!c<<1|!(s=t)],n):s},n.clamp=function(t){return arguments.length?(c&&s?(g=!!t[0],p=!!t[1]):c?g=!!t:s&&(p=!!t),n):c&&s?[g,p]:c?g:s?p:null},n.extent=function(t){var e,r,u,i,l;return arguments.length?(c&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),a=[e,r],c.invert&&(e=c(e),r=c(r)),r<e&&(l=e,e=r,r=l),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],c&&(u=u[1],i=i[1]),o=[u,i],s.invert&&(u=s(u),i=s(i)),i<u&&(l=u,u=i,i=l),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(c&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),r<e&&(l=e,e=r,r=l))),s&&(o?(u=o[0],i=o[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),i<u&&(l=u,u=i,
i=l))),c&&s?[[e,u],[r,i]]:c?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],a=o=null),n},n.empty=function(){return!!c&&f[0]==f[1]||!!s&&h[0]==h[1]},oa.rebind(n,l,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=go.format=xo.timeFormat,Jl=Wl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ea:Gl,ea.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},ea.toString=Gl.toString,go.second=On(function(n){return new po(
1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),go.seconds=go.second.range,go.seconds.utc=go.second.utc.range,go.minute=On(function(n){return new po(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),go.minutes=go.minute.range,go.minutes.utc=go.minute.utc.range,go.hour=On(function(n){var t=n.getTimezoneOffset()/60;return new po(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),go.hours=go.hour.range,go.hours.utc=go.hour.utc.range,go.month=On(function(n){
return(n=go.day(n)).setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),go.months=go.month.range,go.months.utc=go.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[go.second,1],[go.second,5],[go.second,15],[go.second,30],[go.minute,1],[go.minute,5],[go.minute,15],[go.minute,30],[go.hour,1],[go.hour,3],[go.hour,6],[go.hour,12],[go.day,1],[go.day,2],[go.week,1],[go.month,1],[go.month,3],[go.year,1]],nc=Wl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}]
,["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",zt]]),tc={range:function(n,t,e){return oa.range(Math.ceil(n/e)*e,+t,e).map(ua)},floor:y,ceil:y};Ql.year=go.year,go.scale=function(){return ra(oa.scale.linear(),Ql,nc)};var ec=Ql.map(function(n){return[n[0].utc,n[1]]}),rc=Jl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay(
)&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",zt]]);ec.year=go.year.utc,go.scale.utc=function(){return ra(oa.scale.linear(),ec,rc)},oa.text=An(function(n){return n.responseText}),oa.json=function(n,t){return Cn(n,"application/json",ia,t)},oa.html=function(n,t){return Cn(n,"text/html",aa,t)},oa.xml=An(function(n){return n.responseXML}),"function"==typeof define&&define.amd?(this.d3=oa,define("d3",oa)):"object"==typeof module&&module.exports?module.exports=oa:this.d3=oa}(),define("normalize",[],function(){var slashes=/([^:])\/+/g,removeDoubleSlashes=function(uri){return uri.replace(
slashes,"$1/")},protocolRegEx=/[^\:\/]*:\/\/([^\/])*/,absUrlRegEx=/^(\/|data:)/;function absoluteURI(uri,base){if("./"==uri.substr(0,2)&&(uri=uri.substr(2)),uri.match(absUrlRegEx)||uri.match(protocolRegEx))return uri;var baseParts=base.split("/"),uriParts=uri.split("/");for(baseParts.pop();curPart=uriParts.shift();)".."==curPart?baseParts.pop():baseParts.push(curPart);return baseParts.join("/")}function relativeURI(uri,base){var baseParts=base.split("/");for(baseParts.pop(),base=baseParts.join("/")+"/",i=0;base.substr(i,1)==uri.substr(i,1);)i++;for(;"/"!=base.substr(i,1);)i--;base=base.substr(i+1),uri=uri.substr(i+1),baseParts=base.split("/")
;var uriParts=uri.split("/");for(out="";baseParts.shift();)out+="../";for(;curPart=uriParts.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var normalizeCSS=function(source,fromBase,toBase){fromBase=removeDoubleSlashes(fromBase),toBase=removeDoubleSlashes(toBase);return source};return normalizeCSS.convertURIBase=function(uri,fromBase,toBase){if(uri.match(absUrlRegEx)||uri.match(protocolRegEx))return uri;uri=removeDoubleSlashes(uri);var toBaseProtocol=toBase.match(protocolRegEx),fromBaseProtocol=fromBase.match(protocolRegEx)
;return!fromBaseProtocol||toBaseProtocol&&toBaseProtocol[1]==fromBaseProtocol[1]&&toBaseProtocol[2]==fromBaseProtocol[2]?relativeURI(absoluteURI(uri,fromBase),toBase):absoluteURI(uri,fromBase)},normalizeCSS.absoluteURI=absoluteURI,normalizeCSS.relativeURI=relativeURI,normalizeCSS}),define("css!lib/c3js/c3",[],function(){}),function(a){"use strict";function b(a){this.owner=a}function d(a){var b=this.internal=new e(this);b.loadConfig(a),b.beforeInit(a),b.init(),b.afterInit(a),function c(a,b,d){Object.keys(a).forEach(function(e){b[e]=a[e].bind(d),0<Object.keys(a[e]).length&&c(a[e],b[e],d)})}(h,this,this)}function e(b){var c=this
;c.d3=a.d3?a.d3:void 0!==require?require("d3"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function f(a){b.call(this,a)}function g(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return 0<d.length&&0<d[0]&&d.unshift(d[0]-(d[1]-d[0])),d}function h(a){var b=m?m(a):a;return void 0!==b?b:""}function i(a){if(A)return A;var b={h:11.5,w:5.5};return a.select("text").text(h).each(
function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),A=b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=function(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}(),G=t||f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),
L=p.rangeExtent?p.rangeExtent():function(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;(T=(S=H.select("text")).selectAll("tspan").data(function(a,c){var d=b.tickMultiline?function(a,c){var e,f,g,i=h(a);return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||c<=0)&&(
c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,c<g)return d(a.concat(b.substr(0,f||h)),b.slice(f?f+1:h));return a.concat(b)}([],i+""))}(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})})).enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",function(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}),R.attr("x",0).attr("y",function(a){
return a?11.5-a/15*2.5*(0<a?1:-1):W}(Y)).style("text-anchor",function(a){return a?0<a?"start":"end":"middle"}(Y)).attr("transform",function(a){return a?"rotate("+a+")":""}(Y)),T.attr("x",0).attr("dy",n).attr("dx",function(a){return a?8*Math.sin(Math.PI*(a/180)):0}(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style(
"text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return l=(b=b||{}).withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,
bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a;return(a=b.isCategory?2*u:(k.g.select("path.domain").node().getTotalLength()-2*l)/k.g.selectAll("line").size())===1/0?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var h,i,k={version:"0.4.11",generate:function(a){
return new d(a)}};k.chart={fn:d.prototype,internal:{fn:e.prototype,axis:{fn:f.prototype}}},h=k.chart.fn,i=k.chart.internal.fn,k.chart.internal.axis.fn,i.beforeInit=function(){},i.afterInit=function(){},i.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_headers,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},
i.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),
a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],
a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,
a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},i.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},i.initWithData=function(a){var b,c,d=this,e=d.d3,g=d.config,h=!0;d.axis=new f(d),d.initPie&&d.initPie(),d.initBrush&&d.initBrush(),d.initZoom&&d.initZoom(),g.bindto?"function"==typeof g.bindto.node?d.selectChart=g.bindto:d.selectChart=e.select(g.bindto):d.selectChart=e.selectAll([]),d.selectChart.empty()&&(
d.selectChart=e.select(document.createElement("div")).style("opacity",0),d.observeInserted(d.selectChart),h=!1),d.selectChart.html("").classed("c3",!0),d.data.xs={},d.data.targets=d.convertDataToTargets(a),g.data_filter&&(d.data.targets=d.data.targets.filter(g.data_filter)),g.data_hide&&d.addHiddenTargetIds(!0===g.data_hide?d.mapToIds(d.data.targets):g.data_hide),g.legend_hide&&d.addHiddenLegendIds(!0===g.legend_hide?d.mapToIds(d.data.targets):g.legend_hide),d.hasType("gauge")&&(g.legend_show=!1),d.updateSizes(),d.updateScales(),d.x.domain(e.extent(d.getXDomain(d.data.targets))),d.y.domain(d.getYDomain(d.data.targets,"y")),d.y2.domain(d.getYDomain(
d.data.targets,"y2")),d.subX.domain(d.x.domain()),d.subY.domain(d.y.domain()),d.subY2.domain(d.y2.domain()),d.orgXDomain=d.x.domain(),d.brush&&d.brush.scale(d.subX),g.zoom_enabled&&d.zoom.scale(d.x),d.svg=d.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return g.onmouseover.call(d)}).on("mouseleave",function(){return g.onmouseout.call(d)}),d.config.svg_classname&&d.svg.attr("class",d.config.svg_classname),b=d.svg.append("defs"),d.clipChart=d.appendClip(b,d.clipId),d.clipXAxis=d.appendClip(b,d.clipIdForXAxis),d.clipYAxis=d.appendClip(b,d.clipIdForYAxis),d.clipGrid=d.appendClip(b,d.clipIdForGrid),d.clipSubchart=d.appendClip(b,
d.clipIdForSubchart),d.updateSvgSize(),c=d.main=d.svg.append("g").attr("transform",d.getTranslate("main")),d.initSubchart&&d.initSubchart(),d.initTooltip&&d.initTooltip(),d.initLegend&&d.initLegend(),d.initTitle&&d.initTitle(),c.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d.initRegion(),d.initGrid(),c.append("g").attr("clip-path",d.clipPath).attr("class",l.chart),g.grid_lines_front&&d.initGridLines(),d.initEventRect(),d.initChartElements(),c.insert("rect",g.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",d.width).attr("height",d.height).style("opacity",0).on(
"dblclick.zoom",null),g.axis_x_extent&&d.brush.extent(d.getDefaultExtent()),d.axis.init(),d.updateTargets(d.data.targets),h&&(d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),d.bindResize(),d.api.element=d.selectChart.node()},i.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},i.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,
d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{
top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),
a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&!b.gauge_fullCircle&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},i.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},i.showTargets=function(){var a=this;a.svg.selectAll("."+l.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration
).style("opacity",1)},i.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B,C,D,E,F,G,H=this,I=H.main,J=H.d3,K=H.config,L=H.getShapeIndices(H.isAreaType),M=H.getShapeIndices(H.isBarType),N=H.getShapeIndices(H.isLineType),O=H.hasArcType(),P=H.filterTargetsToShow(H.data.targets),Q=H.xv.bind(H);if(c=w(a=a||{},"withY",!0),d=w(a,"withSubchart",!0),e=w(a,"withTransition",!0),h=w(a,"withTransform",!1),i=w(a,"withUpdateXDomain",!1),j=w(a,"withUpdateOrgXDomain",!1),k=w(a,"withTrimXDomain",!0),p=w(a,"withUpdateXAxis",i),m=w(a,"withLegend",!1),n=w(a,"withEventRect",!0),o=w(a,"withDimension",!0),f=w(a,"withTransitionForExit",e),g=w(a,
"withTransitionForAxis",e),v=e?K.transition_duration:0,x=f?v:0,y=g?v:0,b=b||H.axis.generateTransitions(y),m&&K.legend_show?H.updateLegend(H.mapToIds(H.data.targets),a,b):o&&H.updateDimension(!0),H.isCategorized()&&0===P.length&&H.x.domain([0,H.axes.x.selectAll(".tick").size()]),P.length?(H.updateXDomain(P,i,j,k),K.axis_x_tick_values||(B=H.axis.updateXAxisTickValues(P))):(H.xAxis.tickValues([]),H.subXAxis.tickValues([])),K.zoom_rescale&&!a.flow&&(E=H.x.orgDomain()),H.y.domain(H.getYDomain(P,"y",E)),H.y2.domain(H.getYDomain(P,"y2",E)),!K.axis_y_tick_values&&K.axis_y_tick_count&&H.yAxis.tickValues(H.axis.generateTickValues(H.y.domain(),K.axis_y_tick_count)),
!K.axis_y2_tick_values&&K.axis_y2_tick_count&&H.y2Axis.tickValues(H.axis.generateTickValues(H.y2.domain(),K.axis_y2_tick_count)),H.axis.redraw(b,O),H.axis.updateLabels(e),(i||p)&&P.length)if(K.axis_x_tick_culling&&B){for(C=1;C<B.length;C++)if(B.length/C<K.axis_x_tick_culling_max){D=C;break}H.svg.selectAll("."+l.axisX+" .tick text").each(function(a){var b=B.indexOf(a);0<=b&&J.select(this).style("display",b%D?"none":"block")})}else H.svg.selectAll("."+l.axisX+" .tick text").style("display","block");q=H.generateDrawArea?H.generateDrawArea(L,!1):void 0,r=H.generateDrawBar?H.generateDrawBar(M):void 0,s=H.generateDrawLine?H.generateDrawLine(N,!1):void 0,
t=H.generateXYForText(L,M,N,!0),u=H.generateXYForText(L,M,N,!1),c&&(H.subY.domain(H.getYDomain(P,"y")),H.subY2.domain(H.getYDomain(P,"y2"))),H.updateXgridFocus(),I.select("text."+l.text+"."+l.empty).attr("x",H.width/2).attr("y",H.height/2).text(K.data_empty_label_text).transition().style("opacity",P.length?0:1),H.updateGrid(v),H.updateRegion(v),H.updateBar(x),H.updateLine(x),H.updateArea(x),H.updateCircle(),H.hasDataLabel()&&H.updateText(x),H.redrawTitle&&H.redrawTitle(),H.redrawArc&&H.redrawArc(v,x,h),H.redrawSubchart&&H.redrawSubchart(d,b,v,x,L,M,N),I.selectAll("."+l.selectedCircles).filter(H.isBarType.bind(H)).selectAll("circle").remove(),
K.interaction_enabled&&!a.flow&&n&&(H.redrawEventRect(),H.updateZoom&&H.updateZoom()),H.updateCircleY(),F=(H.config.axis_rotated?H.circleY:H.circleX).bind(H),G=(H.config.axis_rotated?H.circleX:H.circleY).bind(H),a.flow&&(A=H.generateFlow({targets:P,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:F,cy:G,xv:Q,xForText:t,yForText:u})),(v||A)&&H.isTabVisible()?J.transition().duration(v).each(function(){var b=[];[H.redrawBar(r,!0),H.redrawLine(s,!0),H.redrawArea(q,!0),H.redrawCircle(F,G,!0),H.redrawText(t,u,a.flow,!0),H.redrawRegion(!0),H.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),z=H.generateWait(),b.forEach(
function(a){z.add(a)})}).call(z,function(){A&&A(),K.onrendered&&K.onrendered.call(H)}):(H.redrawBar(r),H.redrawLine(s),H.redrawArea(q),H.redrawCircle(F,G),H.redrawText(t,u,a.flow),H.redrawRegion(),H.redrawGrid(),K.onrendered&&K.onrendered.call(H)),H.mapToIds(H.data.targets).forEach(function(a){H.withoutFadeIn[a]=!0})},i.updateAndRedraw=function(a){var b,c=this,d=c.config;(a=a||{}).withTransition=w(a,"withTransition",!0),a.withTransform=w(a,"withTransform",!1),a.withLegend=w(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=w(a,"withTransitionForTransform",a.withTransition),
c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},i.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},i.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},i.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},i.isCustomX=function(){var b=this.config;return!this.isTimeSeries()&&(b.data_x||v(b.data_xs))},i.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},
i.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=s(d.margin.left),c=s(d.margin.top)):"context"===a?(b=s(d.margin2.left),c=s(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},i.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},i.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0}
,i.opacityForCircle=function(a){var b=this.config.point_show?1:0;return m(a.value)?this.isScatterType(a)?.5:b:0},i.opacityForText=function(){return this.hasDataLabel()?1:0},i.xx=function(a){return a?this.x(a.x):null},i.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},i.yv=function(a){var c=a.axis&&"y2"===a.axis?this.y2:this.y;return Math.ceil(c(a.value))},i.subxx=function(a){return a?this.subX(a.x):null},i.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+l.axisX),a&&(
c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+l.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+l.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+l.chartArcs).attr("transform",f.getTranslate("arc"))},i.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},i.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr(
"width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",
b.size()?b.attr("height"):0),a.svg.select("."+l.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},i.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},i.observeInserted=function(b){var c,d=this;return"undefined"==typeof MutationObserver?void a.console.error("MutationObserver not defined."):void(c=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(c.disconnect(),
d.intervalForObserveInserted=a.setInterval(function(){b.node().parentNode&&(a.clearInterval(d.intervalForObserveInserted),d.updateDimension(),d.brush&&d.brush.update(),d.config.oninit.call(d),d.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),b.transition().style("opacity",1))},10))})})).observe(b.node(),{attributes:!0,childList:!0,characterData:!0})},i.bindResize=function(){var b=this,c=b.config;if(b.resizeFunction=b.generateResize(),b.resizeFunction.add(function(){c.onresize.call(b)}),c.resize_auto&&b.resizeFunction.add(function(){void 0!==b.resizeTimeout&&a.clearTimeout(
b.resizeTimeout),b.resizeTimeout=a.setTimeout(function(){delete b.resizeTimeout,b.api.flush()},100)}),b.resizeFunction.add(function(){c.onresized.call(b)}),a.attachEvent)a.attachEvent("onresize",b.resizeFunction);else if(a.addEventListener)a.addEventListener("resize",b.resizeFunction,!1);else{var d=a.onresize;d?d.add&&d.remove||(d=b.generateResize()).add(a.onresize):d=b.generateResize(),d.add(b.resizeFunction),a.onresize=d}},i.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},a},i.endall=function(a,b){var c=0
;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},i.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())b+=1;else try{a.transition()}catch(c){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},i.parseDate=function(b){var c;return b instanceof Date?c=b:"string"==typeof b?c=this.dataTimeFormat(this.config.data_xFormat).parse(b):"number"!=typeof b||isNaN(b)||(c=new Date(+b)),c&&!isNaN(+c)||a.console.error("Failed to parse x '"+b+"' to Date object"),c},i.isTabVisible=function(){var a
;return void 0!==document.hidden?a="hidden":void 0!==document.mozHidden?a="mozHidden":void 0!==document.msHidden?a="msHidden":void 0!==document.webkitHidden&&(a="webkitHidden"),!document[a]},i.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},
onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},
data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,
legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,
axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,
point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,
donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig
).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},i.additionalConfig={},i.loadConfig=function(a){var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}(),q(e)&&(f[g]=e)})},i.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},i.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;for(e in g=f.isCategorized()?(d=d||function(){return 0},function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):function(a,b){var c=h(a);return b?c:Math.ceil(c)},h)g[e]=h[e]
;return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):[(a=this.orgDomain())[0],a[1]+1]}),g},i.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},i.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},i.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},i.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,
a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),
a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},i.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(
0<i.data_groups.length)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(0!==(e=i.data_groups[b].filter(function(a){return 0<=j.indexOf(a)})).length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a<0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&0<+a||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},i.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(0<i.data_groups.length)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(0!==(e=i.data_groups[b].filter(
function(a){return 0<=j.indexOf(a)})).length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=0<a?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a<0||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},i.getYDomain=function(a,b,c){var d,e,g,h,i,j,k,l,n,o,p=this,q=p.config,r=a.filter(function(a){return p.axis.getId(a.id)===b}),s=c?p.filterByXDomain(r,c):r,u="y2"===b?q.axis_y2_min:q.axis_y_min,w="y2"===b?q.axis_y2_max:q.axis_y_max,x=p.getYDomainMin(s),y=p.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=p.hasType("bar",s
)&&q.bar_zerobased||p.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=p.hasDataLabel()&&q.axis_rotated,D=p.hasDataLabel()&&!q.axis_rotated;return x=m(u)?u:m(w)?x<w?x:w-10:x,y=m(w)?w:m(u)?u<y?y:u+10:y,0===s.length?"y2"===b?p.y2.domain():p.y.domain():(isNaN(x)&&(x=0),isNaN(y)&&(y=x),x===y&&(x<0?y=0:x=0),n=0<=x&&0<=y,o=x<=0&&y<=0,(m(u)&&n||m(w)&&o)&&(A=!1),A&&(n&&(x=0),o&&(y=0)),g=h=.1*(e=Math.abs(y-x)),void 0!==z&&(y=z+(i=Math.max(Math.abs(x),Math.abs(y))),x=z-i),C?(j=p.getDataLabelLength(x,y,"width"),k=t(p.y.range()),g+=e*((l=[j[0]/k,j[1]/k])[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=p.getDataLabelLength(x,y,
"height"),g+=p.axis.convertPixelsToAxisPadding(j[1],e),h+=p.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&v(q.axis_y_padding)&&(g=p.axis.getPadding(q.axis_y_padding,"top",g,e),h=p.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&v(q.axis_y2_padding)&&(g=p.axis.getPadding(q.axis_y2_padding,"top",g,e),h=p.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(n&&(h=x),o&&(g=-y)),d=[x-h,y+g],B?d.reverse():d)},i.getXDomainMin=function(a){var b=this,c=b.config;return q(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},i.getXDomainMax=function(a){
var b=this,c=b.config;return q(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},i.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return c=f.isCategorized()?0:f.hasType("bar")?1<(b=f.getMaxDataCount())?h/(b-1)/2:.5:.01*h,"object"==typeof g.axis_x_padding&&v(g.axis_x_padding)?(d=m(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=m(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},i.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],
e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!=0||b.isCategorized()||(e=b.isTimeSeries()?(d=new Date(.5*d.getTime()),new Date(1.5*e.getTime())):(d=0===d?1:.5*d,0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},i.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e||f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e||(!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent())),
g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},i.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],d=b[1];return a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c),d<=a[1]&&(a[0]=+a[0]-(a[1]-d),a[1]=d),a},i.isX=function(a){var c=this.config;return c.data_x&&a===c.data_x||v(c.data_xs)&&x(c.data_xs,a)},i.isNotX=function(a){return!this.isX(a)},i.getXKey=function(a){var c=this.config;return c.data_x?c.data_x:v(c.data_xs)?c.data_xs[a]:null},i.getXValuesOfXKey=function(a,b){var c,d=this;return(b&&v(b)?d.mapToIds(b):[]).forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},i.getIndexByX=function(a
){var c=this.filterByX(this.data.targets,a);return c.length?c[0].index:null},i.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&m(c.data.xs[a][b])?c.data.xs[a][b]:b},i.getOtherTargetXs=function(){var b=Object.keys(this.data.xs);return b.length?this.data.xs[b[0]]:null},i.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},i.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},i.hasMultipleX=function(a){return 1<this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()},i.isMultipleX=function(){return v(this.config.data_xs
)||!this.config.data_xSort||this.hasType("scatter")},i.addName=function(a){var b;return a&&(b=this.config.data_names[a.id],a.name=void 0!==b?b:a.id),a},i.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},i.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},i.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},i.generateTargetX=function(a,b,c){var e=this;return e.isTimeSeries()?a?e.parseDate(a):e.parseDate(e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized(
)?m(a)?+a:e.getXValue(b,c):c},i.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},i.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},i.getPrevX=function(a){var b=this.xs[a-1];return void 0!==b?b:null},i.getNextX=function(a){var b=this.xs[a+1];return void 0!==b?b:null},i.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(a){return a.values.length})},i.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return 1<c?a.forEach(function(a){a.values.length>d&&(d=(b=a).values.length)}
):b=c?a[0]:null,b},i.getEdgeX=function(a){return a.length?[this.d3.min(a,function(a){return a.values[0].x}),this.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},i.mapToIds=function(a){return a.map(function(a){return a.id})},i.mapToTargetIds=function(a){return a?[].concat(a):this.mapToIds(this.data.targets)},i.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},i.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},i.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},i.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){
return b.isTargetToShow(a.id)})},i.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return(c=b.isTimeSeries()?c.map(function(a){return new Date(+a)}):c.map(function(a){return+a})).sort(function(a,b){return a<b?-1:b<a?1:b<=a?0:NaN})},i.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},i.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},i.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},i.removeHiddenLegendIds=function(a){
this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},i.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},i.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},i.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a<0})},i.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0<a})},i.isOrderDesc=function(){var a=this.config
;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},i.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},i.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):n(c.data_order)&&a.sort(c.data_order),a},i.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b==0})},i.filterRemoveNull=function(a){return a.filter(function(a){return m(a.value)})},
i.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},i.hasDataLabel=function(){var a=this.config;return!("boolean"!=typeof a.data_labels||!a.data_labels)||!("object"!=typeof a.data_labels||!v(a.data_labels))},i.getDataLabelLength=function(a,b,c){var d=this,e=[0,0];return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=1.3*this.getBoundingClientRect()[c]}).remove(),e},i.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},
i.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},i.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;0<=c&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},i.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},i.findClosest=function(a,b){var c,d=this,e=d.config.point_sensitivity;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+l.bars+d.getTargetSelectorSuffix(a.id)+" ."+l.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){
return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);f<e&&(e=f,c=a)}),c},i.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.sqrt(Math.pow(h-b[e],2)+Math.pow(g-b[f],2))},i.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;0<b;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},i.updateDataAttributes=function(a,b){var e=this.config["data_"+a];return void 0===b||(Object.keys(b).forEach(function(a){e[a]=b[a]}),
this.redraw({withLegend:!0})),e},i.convertUrlToData=function(a,b,c,d,e){var f=this,g=b||"csv",h=f.d3.xhr(a);c&&Object.keys(c).forEach(function(a){h.header(a,c[a])}),h.get(function(a,b){var c;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");c="json"===g?f.convertJsonToData(JSON.parse(b.response),d):"tsv"===g?f.convertTsvToData(b.response):f.convertCsvToData(b.response),e.call(f,c)})},i.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},i.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},i.convertTsvToData=function(a){
return this.convertXsvToData(a,this.d3.tsv)},i.convertJsonToData=function(a,b){var c,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=e.findValueInJson(a,c);p(d)&&(d=null),b.push(d)}),f.push(b)}),e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),e.convertColumnsToData(f))},i.findValueInJson=function(a,b){for(var c=(b=(b=b.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),d=0;d<c.length;++d){var e=c[d];if(!(e in a))return;a=a[e]}return a},i.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(
b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},i.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(p(e[c-1])&&(e[c-1]={}),p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[c-1][d]=a[b][c]}return e},i.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?0<=g.indexOf(f)?d.data.xs[c]=(
b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(m).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():v(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),(c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h,j=a[d.getXKey(b)],k=null===a[b]||isNaN(a[b])?null:+a[b];return d.isCustomX()&&d.isCategorized()&&0===c&&!p(j)?(0===c&&0===g&&(e.axis_x_categories=[]),-1===(
h=e.axis_x_categories.indexOf(j))&&(h=e.axis_x_categories.length,e.axis_x_categories.push(j))):h=d.generateTargetX(j,b,g),(p(a[b])||d.data.xs[b].length<=g)&&(h=void 0),{x:h,value:k,id:f}}).filter(function(a){return q(a.x)})}})).forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){return(a.x||0===a.x?a.x:1/0)-(b.x||0===b.x?b.x:1/0)})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),d.hasNegativeValue=d.hasNegativeValueInTargets(c),d.hasPositiveValue=d.hasPositiveValueInTargets(c),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),
c.forEach(function(a){d.addCache(a.id_org,a)}),c},i.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},i.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,
a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},i.unload=function(a,b){var c=this;return b||(b=function(){}),(a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}))&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll(
"."+l.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},i.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},i.initEventRect=function(){this.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)},i.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+l.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,e).classed(l.eventRectsSingle,!e);f.selectAll("."+l.eventRect).remove(),
c.eventRect=f.selectAll("."+l.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+l.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},i.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),e=h.isMultipleX()?(c=b=0,d=h.width,h.height):(g=!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){
var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},i.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",
b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select(
"."+l.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+l.shape+"-"+f).each(function(){c.select(this).classed(l.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),
d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+l.shape+"-"+e
).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},i.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+l.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height
).attr("class",l.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();h=(c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x)).map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<e.point_sensitivity)&&(
c.svg.select("."+l.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),(b=c.findClosestFromTargets(f,a))&&(c.isBarType(b.id)||c.dist(b,a)<e.point_sensitivity)&&c.main.selectAll("."+l.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+l.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(
d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},i.dispatchEvent=function(b,c,d){var f="."+l.eventRect+(this.isMultipleX()?"":"-"+c),g=this.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(d?d[0]:0),j=h.top+(d?d[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},i.getCurrentWidth=function(){var b=this.config;return b.size_width?b.size_width:this.getParentWidth()},i.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return 0<c?c:320/(a.hasType("gauge"
)&&!b.gauge_fullCircle?2:1)},i.getCurrentPaddingTop=function(){var a=this,b=a.config,c=m(b.padding_top)?b.padding_top:0;return a.title&&a.title.node()&&(c+=a.getTitlePadding()),c},i.getCurrentPaddingBottom=function(){var a=this.config;return m(a.padding_bottom)?a.padding_bottom:0},i.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return m(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(r(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:r(b.getAxisWidthByAxisId("y",a))},i.getCurrentPaddingRight=function(){var a=this,b=a.config,d=a.isLegendRight?a.getLegendWidth()+20:0
;return m(b.padding_right)?b.padding_right+1:b.axis_rotated?10+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):r(a.getAxisWidthByAxisId("y2"))+d},i.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},i.getParentWidth=function(){return this.getParentRectValue("width")},i.getParentHeight=function(){var a=this.selectChart.style("height");return 0<a.indexOf("px")?+a.replace("px",""):0},i.getSvgLeft=function(a){var b=this,c=b.config,
d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?l.axisX:l.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return 0<j?j:0},i.getAxisWidthByAxisId=function(a,b){var d=this.axis.getLabelPositionById(a);return this.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},i.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(
d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),"y"===a&&c.axis_rotated&&c.axis_y_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_y_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},i.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},i.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(
c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}p(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},i.getShapeX=function(a,b,c,d){var f=d?this.subX:this.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},i.getShapeY=function(a){var b=this;return function(c){return(a?b.getSubYScale(c.id):b.getYScale(c.id))(c.value)}},i.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){
var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&(void 0!==e[g]&&+e[g].x==+a.x||(g=-1,e.forEach(function(b,c){b.x===a.x&&(g=c)})),g in e&&0<=e[g].value*a.value&&(j+=h(e[g].value)-i))}),j}},i.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=!e.classed(l.bar)||d.isWithinBar(a)):c=!1,c},i.getInterpolate=function(a){var b=this,c=b.isInterpolationType(b.config.spline_interpolation_type
)?b.config.spline_interpolation_type:"cardinal";return b.isSplineType(a)?c:b.isStepType(a)?b.config.line_step_type:"linear"},i.initLine=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartLines)},i.updateTargetsForLine=function(a){var c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);(c=d.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}).enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none")).append("g").attr("class",g),c.append("g").attr("class",h),c.append(
"g").attr("class",function(a){return d.generateClass(l.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+l.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+l.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},i.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",
function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLine=function(a,b){return[(b?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},i.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return 0<d.data_groups.length?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(
function(a){return null!=a.value})),function(a){var h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return(c.isLineType(a)?d.data_regions[a.id]?c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),l=j(h[0].value)),d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l))||"M 0 0"}},i.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,
k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},i.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,o,r,s,t,u=this,v=u.config,x="M",y=u.isCategorized()?.5:0,z=[];if(q(d))for(g=0;g<d.length;g++)z[g]={},p(d[g].start)?z[g].start=a[0].x:z[g].start=u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,p(d[g].end)?z[g].end=a[a.length-1].x:z[g].end=u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(s=v.axis_rotated?function(a){
return c(a.value)}:function(a){return b(a.x)},t=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return f(v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]])}:function(a,d,e,g){return f(v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]])},g=0;g<a.length;g++){if(p(z)||!e(a[g].x,z))x+=" "+s(a[g])+" "+t(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(
a[g].value)-c(a[g-1].value),r=2*(o=2/Math.sqrt(Math.pow(l,2)+Math.pow(m,2))),h=o;h<=1;h+=r)x+=i(a[g-1],a[g],h,o);a[g].x}return x},i.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr(
"d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},i.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return 0<d.data_groups.length?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return 0<d.data_groups.length?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(d.area_above?0:i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,
h=0;return(c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h))||"M 0 0"}},i.getAreaBaseValue=function(){return 0},i.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},i.updateCircle=function(){var a=this
;a.mainCircle=a.main.selectAll("."+l.circles).selectAll("."+l.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},i.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+l.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition(Math.random().toString()):d).attr("cx",a).attr("cy",b)]},
i.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},i.updateCircleY=function(){var a,b,c=this;0<c.config.data_groups.length?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},i.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+l.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.circle+(m(a)?"-"+a:""))},i.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(l.EXPANDED,!0).attr("r",e)},i.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b)
;b.getCircles(a).filter(function(){return b.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",c)},i.pointR=function(a){var c=this.config;return this.isStepType(a)?0:n(c.point_r)?c.point_r(a):c.point_r},i.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},i.pointSelectR=function(a){var c=this.config;return n(c.point_select_r)?c.point_select_r(a):c.point_select_r?c.point_select_r:4*this.pointR(a)},i.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],
2)+Math.pow(g-d[1],2))<b},i.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},i.initBar=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartBars)},i.updateTargetsForBar=function(a){var d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);d.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}).enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none").append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},i.updateBar=function(a){var b=this,
c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+l.bars).selectAll("."+l.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},i.getBarW=function(a,b){var d=this.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0
;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},i.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+l.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.bar+(m(a)?"-"+a:""))},i.expandBars=function(a,b,c){c&&this.unexpandBars(),this.getBars(a,b).classed(l.EXPANDED,!0)},i.unexpandBars=function(a){this.getBars(a).classed(l.EXPANDED,!1)},i.generateDrawBar=function(a,b){var d=this.config,e=this.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1;return"M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z"}},
i.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&l<d||a.value<0&&d<l)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},i.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),l=f+c.width+2,m=g+c.height+2,n=g-2;return f-2<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},
i.initText=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartTexts),a.mainText=a.d3.selectAll([])},i.updateTargetsForText=function(a){var d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);d.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(a).attr("class",function(a){return e(a)+g(a)}).enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none").append("g").attr("class",f)},i.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+l.texts).selectAll("."+l.text).data(d),b.mainText.enter(
).append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},i.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},i.getTextRect=function(a,b,c){var d,e=this.d3.select("body").append("div").classed("c3",!0),
f=e.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g=this.d3.select(c).style("font");return f.selectAll(".dummy").data([a]).enter().append("text").classed(b||"",!0).style("font",g).text(a).each(function(){d=this.getBoundingClientRect()}),e.remove(),d},i.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},i.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect()
;return d=f.config.axis_rotated?(e=f.isBarType(b)?4:6,a[2][1]+e*(b.value<0?-1:1)):f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:d<0&&(d=4)),d},i.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0||0===b.value&&!e.hasPositiveValue?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},i.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(
function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},i.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return(b=b||c.data.targets)&&b.length?b.forEach(function(b){var c=d[b.id];(c&&0<=c.indexOf(a)||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},i.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},i.isLineType=function(a){var b=this.config,c=o(a)?a:a.id;return!b.data_types[c]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])},
i.isStepType=function(a){var b=o(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[b])},i.isSplineType=function(a){var b=o(a)?a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[b])},i.isAreaType=function(a){var b=o(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[b])},i.isBarType=function(a){var b=o(a)?a:a.id;return"bar"===this.config.data_types[b]},i.isScatterType=function(a){var b=o(a)?a:a.id;return"scatter"===this.config.data_types[b]},i.isPieType=function(a){var b=o(a)?a:a.id;return"pie"===this.config.data_types[b]},i.isGaugeType=function(a){var b=o(a)?a:a.id
;return"gauge"===this.config.data_types[b]},i.isDonutType=function(a){var b=o(a)?a:a.id;return"donut"===this.config.data_types[b]},i.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},i.lineData=function(a){return this.isLineType(a)?[a]:[]},i.arcData=function(a){return this.isArcType(a.data)?[a]:[]},i.barData=function(a){return this.isBarType(a)?a.values:[]},i.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},i.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},i.isInterpolationType=function(a){return 0<=["linear","linear-closed","basis",
"basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(a)},i.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid),b.grid_x_show&&a.grid.append("g").attr("class",l.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",l.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},i.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",
l.grid+" "+l.gridLines),a.gridLines.append("g").attr("class",l.xgridLines),a.gridLines.append("g").attr("class",l.ygridLines),a.xgridLines=b.selectAll([])},i.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(e),b.xgrid.enter().append("line").attr("class",l.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){
return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},i.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(c),a.ygrid.enter().append("line").attr("class",l.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},i.gridTextAnchor=function(a){return a.position?a.position:"end"},i.gridTextDx=function(a){
return"start"===a.position?4:"middle"===a.position?0:-4},i.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},i.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},i.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+l.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(g.grid_x_lines),(b=e.xgridLines.enter().append("g").attr("class",function(a){return l.xgridLine+(
a.class?" "+a.class:"")})).append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(g.grid_y_lines),(c=e.ygridLines.enter().append("g").attr("class",function(a){return l.ygridLine+(a.class?" "+a.class:"")})).append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr(
"dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},i.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(
a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},i.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&m(a.value)}),e=b.main.selectAll("line."+l.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,
"grid")))},i.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility","hidden")},i.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+l.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},i.generateGridData=function(a,b){var c,d,e,f,h=[],i=this.main.select("."+l.axisX).selectAll(".tick").size();if("year"===a)for(d=(c=this.getXDomain())[0].getFullYear(),e=c[1].getFullYear(),f=d;f<=e;f++)h.push(new Date(f+"-01-01 00:00:00"));else(h=b.ticks(10)).length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}))
;return h},i.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b.class===a.class)&&(c=!0)}),c}:function(){return!0}},i.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?l.xgridLines:l.ygridLines,h=b?l.xgridLine:l.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},i.initTooltip=function(){var a,b=this,c=b.config;if(
b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&o(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!=0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",
c.tooltip_init_position.left).style("display","block")}},i.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c,p=k.isOrderAsc();if(0===l.data_groups.length)a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return p?c-d:d-c});else{var q=k.orderTargets(k.data.targets).map(function(a){return a.id});a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return 0<c&&0<d&&(c=a?q.indexOf(a.id):null,d=b?q.indexOf(b.id):null),p?c-d:d-c})}for(f=0;f<a.length;f++)if(a[f]&&(a[f].value||0===a[f].value)&&(e||(g=y(m?m(a[f].x):a[f].x),
e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),void 0!==(h=y(o(a[f].value,a[f].ratio,a[f].id,a[f].index,a))))){if(null===a[f].name)continue;i=y(n(a[f].name,a[f].ratio,a[f].id,a[f].index)),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+k.CLASS.tooltipName+"-"+k.getTargetSelectorSuffix(a[f].id)+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"}return e+"</table>"},i.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(
j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),h=k.axis_rotated?(g=(f=e+n[0]+100)+b,i=j.currentWidth-j.getCurrentPaddingRight(),j.x(a[0].x)+20):(g=(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20)+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),n[1]+15),i<g&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),h<0&&(h=0),{top:h,left:f}},i.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),j=a.filter(function(a){return a&&m(a.value)}),k=g.tooltip_position||i.tooltipPosition;0!==j.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style(
"display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=k.call(this,j,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},i.hideTooltip=function(){this.tooltip.style("display","none")},i.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},i.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,
withTransitionForTransform:!1,withTransition:!1})},i.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},i.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},
i.updateLegendStep=function(a){this.legendStep=a},i.updateLegendItemWidth=function(a){this.legendItemWidth=a},i.updateLegendItemHeight=function(a){this.legendItemHeight=a},i.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},i.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},i.opacityForLegend=function(a){return a.classed(l.legendItemHidden)?null:1},i.opacityForUnfocusedLegend=function(a){return a.classed(l.legendItemHidden)?null:.3},
i.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+l.legendItem).filter(function(b){return 0<=a.indexOf(b)}).classed(l.legendItemFocused,b).transition().duration(100).style("opacity",function(){return(b?c.opacityForLegend:c.opacityForUnfocusedLegend).call(c,c.d3.select(this))})},i.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},i.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),
b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},i.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&u(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},i.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},i.updateLegend=function(a,b,c){function d(a,b){return y.legendItemTextBox[b]||(y.legendItemTextBox[b]=y.getTextRect(
a.textContent,l.legendItem,a)),y.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-G-n)/2)<E&&(g=(o-n)/2,G=0,M++),L[a]=M,K[M]=y.isLegendInset?10:g,H[a]=G,G+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+F+(!j||y.isLegendRight||y.isLegendInset?B:0)+z.legend_padding,m=k.height+A,n=y.isLegendRight||y.isLegendInset?m:l,o=y.isLegendRight||y.isLegendInset?y.getLegendHeight():y.getLegendWidth();return i&&(D=C=M=G=0),z.legend_show&&!y.isLegendToShow(c)?void(I[c]=J[c]=L[c]=H[c]=0):(I[c]=l,J[c]=m,(!C||C<=l)&&(C=l),(!D||D<=m)&&(D=m),h=y.isLegendRight||y.isLegendInset?D:C,void(z.legend_equally?(Object.keys(I).forEach(function(a){I[a]=C}),
Object.keys(J).forEach(function(a){J[a]=D}),(g=(o-h*a.length)/2)<E?(M=G=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,m,n,o,p,r,s,t,u,v,x,y=this,z=y.config,A=4,B=10,C=0,D=0,E=10,F=z.legend_item_tile_width+5,G=0,H={},I={},J={},K=[0],L={},M=0;a=a.filter(function(a){return!q(z.data_names[a])||null!==z.data_names[a]}),r=w(b=b||{},"withTransition",!0),s=w(b,"withTransitionForTransform",!0),y.isLegendInset&&(M=z.legend_inset_step?z.legend_inset_step:a.length,y.updateLegendStep(M)),i=y.isLegendRight?(f=function(a){return C*L[a]},function(a){return K[L[a]]+H[a]}):y.isLegendInset?(f=function(a){return C*L[a]+10},function(a){return K[L[a]]+H[a]}):(
f=function(a){return K[L[a]]+H[a]},function(a){return D*L[a]}),g=function(a,b){return f(a,b)+4+z.legend_item_tile_width},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},m=function(a,b){return f(a,b)-2},n=function(a,b){return f(a,b)-2+z.legend_item_tile_width},o=function(a,b){return i(a,b)+4},(p=y.legend.selectAll("."+l.legendItem).data(a).enter().append("g").attr("class",function(a){return y.generateClass(l.legendItem,a)}).style("visibility",function(a){return y.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){z.legend_item_onclick?z.legend_item_onclick.call(y,a
):y.d3.event.altKey?(y.api.hide(),y.api.show(a)):(y.api.toggle(a),y.isTargetToShow(a)?y.api.focus(a):y.api.revert())}).on("mouseover",function(a){z.legend_item_onmouseover?z.legend_item_onmouseover.call(y,a):(y.d3.select(this).classed(l.legendItemFocused,!0),!y.transiting&&y.isTargetToShow(a)&&y.api.focus(a))}).on("mouseout",function(a){z.legend_item_onmouseout?z.legend_item_onmouseout.call(y,a):(y.d3.select(this).classed(l.legendItemFocused,!1),y.api.revert())})).append("text").text(function(a){return q(z.data_names[a])?z.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",y.isLegendRight||y.isLegendInset?g:-200).attr(
"y",y.isLegendRight||y.isLegendInset?-200:j),p.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",y.isLegendRight||y.isLegendInset?h:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:k),p.append("line").attr("class",l.legendItemTile).style("stroke",y.color).style("pointer-events","none").attr("x1",y.isLegendRight||y.isLegendInset?m:-200).attr("y1",y.isLegendRight||y.isLegendInset?-200:o).attr("x2",y.isLegendRight||y.isLegendInset?n:-200).attr("y2",y.isLegendRight||y.isLegendInset?-200:o).attr("stroke-width",z.legend_item_tile_height),x=y.legend.select("."+l.legendBackground+" rect"),y.isLegendInset&&0<C&&0===x.size()&&(
x=y.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect")),t=y.legend.selectAll("text").data(a).text(function(a){return q(z.data_names[a])?z.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(r?t.transition():t).attr("x",g).attr("y",j),u=y.legend.selectAll("rect."+l.legendItemEvent).data(a),(r?u.transition():u).attr("width",function(a){return I[a]}).attr("height",function(a){return J[a]}).attr("x",h).attr("y",k),v=y.legend.selectAll("line."+l.legendItemTile).data(a),(r?v.transition():v).style("stroke",y.color).attr("x1",m).attr("y1",o).attr("x2",n).attr("y2",o),x&&(r?x.transition():x).attr("height",y.getLegendHeight()-12).attr(
"width",C*(M+1)+10),y.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,function(a){return!y.isTargetToShow(a)}),y.updateLegendItemWidth(C),y.updateLegendItemHeight(D),y.updateLegendStep(M),y.updateSizes(),y.updateScales(),y.updateSvgSize(),y.transformAll(s,c),y.legendHasRendered=!0},i.initTitle=function(){var a=this;a.title=a.svg.append("text").text(a.config.title_text).attr("class",a.CLASS.title)},i.redrawTitle=function(){var a=this;a.title.attr("x",a.xForTitle.bind(a)).attr("y",a.yForTitle.bind(a))},i.xForTitle=function(){var b=this,c=b.config,d=c.title_position||"left";return 0<=d.indexOf("right")?b.currentWidth-b.getTextRect(b.title.node(
).textContent,b.CLASS.title,b.title.node()).width-c.title_padding.right:0<=d.indexOf("center")?(b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width)/2:c.title_padding.left},i.yForTitle=function(){var a=this;return a.config.title_padding.top+a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).height},i.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},function(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}b.prototype.constructor=b}(b,f),f.prototype.init=function(){var a=this.owner,
b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",l.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",
b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",l.axis+" "+l.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},f.prototype.getXAxis=function(a,b,c,d,e,f,h){var i=this.owner,j=i.config,k={isCategory:i.isCategorized(),withOuterTick:e,tickMultiline:j.axis_x_tick_multiline,tickWidth:j.axis_x_tick_width,tickTextRotate:h?0:j.axis_x_tick_rotate,withoutTransition:f},l=g(
i.d3,k).scale(a).orient(b);return i.isTimeSeries()&&d&&"function"!=typeof d&&(d=d.map(function(a){return i.parseDate(a)})),l.tickFormat(c).tickValues(d),i.isCategorized()&&(l.tickCentered(j.axis_x_tick_centered),u(j.axis_x_tick_culling)&&(j.axis_x_tick_culling=!1)),l},f.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},f.prototype.getYAxis=function(a,b,c,d,e,f,h){var i=this.owner,j=i.config,k={withOuterTick:e,
withoutTransition:f,tickTextRotate:h?0:j.axis_y_tick_rotate},l=g(i.d3,k).scale(a).orient(b).tickFormat(c);return i.isTimeSeriesY()?l.ticks(i.d3.time[j.axis_y_tick_time_value],j.axis_y_tick_time_interval):l.tickValues(d),l},f.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},f.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return a<0?a.toFixed(0):a};return b.axis_x_tick_format&&(n(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c
):""})),n(c)?function(b){return c.call(a,b)}:c},f.prototype.getTickValues=function(a,b){return a||(b?b.tickValues():void 0)},f.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},f.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},f.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},f.prototype.getLabelOptionByAxisId=function(a){var b,d=this.owner.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},
f.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return o(b)?b:b?b.text:null},f.prototype.setLabelText=function(a,b){var d=this.owner.config,e=this.getLabelOptionByAxisId(a);o(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},f.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:0<=d.indexOf("inner"),isOuter:0<=d.indexOf("outer"),isLeft:0<=d.indexOf("left"),isCenter:0<=d.indexOf("center"),isRight:0<=d.indexOf("right"),isTop:0<=d.indexOf("top"),isMiddle:0<=d.indexOf("middle"),isBottom:0<=d.indexOf(
"bottom")}},f.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},f.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},f.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},
f.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},f.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},f.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},f.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},f.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},f.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(
!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(
this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dyForXAxisLabel=function(){var b=this.owner.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},f.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},f.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition()
;return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},f.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,h=this.owner,
i=h.config,j=0;return b&&h.currentMaxTickWidths[a]||(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),(f=h.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0
).append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=j<=0?h.currentMaxTickWidths[a]:j),h.currentMaxTickWidths[a]},f.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+l.axisX+" ."+l.axisXLabel),d=b.main.select("."+l.axisY+" ."+l.axisYLabel),e=b.main.select("."+l.axisY2+" ."+l.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",
this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},f.prototype.getPadding=function(a,b,c,d){var e="number"==typeof a?a:a[b];return m(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c},f.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner;return b*(a/(c.config.axis_rotated?c.width:c.height))},f.prototype.generateTickValues=function(a
,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(1===(d=n(b)?b():b))k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(2<d){for(g=d-2,e=a[0],h=((f=a[a.length-1])-e)/(g+1),k=[e],i=0;i<g;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},f.prototype.generateTransitions=function(a){var c=this.owner.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},f.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style(
"opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},i.getClipPath=function(b){return"url("+(0<=a.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+b+")"},i.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},i.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},i.getAxisClipY=function(a){return a?-20:-this.margin.top},i.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},i.getXAxisClipY=function(){return this.getAxisClipY(
!this.config.axis_rotated)},i.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},i.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},i.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},i.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},i.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},i.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},i.getYAxisClipWidth=function(){
var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},i.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},i.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},i.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},
i.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},i.updateAngle=function(a){var b,c,d,e,f=this,g=f.config,h=!1,i=0;return g?(f.pie(f.filterTargetsToShow(f.data.targets)).forEach(function(b){h||b.data.id!==a.data.id||(h=!0,(a=b).index=i),i++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),f.isGaugeType(a.data)&&(b=g.gauge_min,c=g.gauge_max,d=Math.PI*(g.gauge_fullCircle?2:1)/(c-b),e=a.value<b?0:a.value<c?a.value-b:c-b,a.startAngle=g.gauge_startingAngle,a.endAngle=a.startAngle+d*e),h?a:null):null},i.getSvgArc=function(){var a=this,
b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c))?b(e):"M 0 0"};return c.centroid=b.centroid,c},i.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a||1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},i.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},i.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.config,i=g.updateAngle(a),j="";return i&&!g.hasType("gauge")&&(b=this.svgArc.centroid(i),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),
j="translate("+c*(f=g.hasType("donut")&&h.donut_label_ratio?n(h.donut_label_ratio)?h.donut_label_ratio(a,g.radius,e):h.donut_label_ratio:g.hasType("pie")&&h.pie_label_ratio?n(h.pie_label_ratio)?h.pie_label_ratio(a,g.radius,e):h.pie_label_ratio:g.radius&&e?(.375<36/g.radius?1.175-36/g.radius:.8)*g.radius/e:0)+","+d*f+")"),j},i.getArcRatio=function(a){var c=this.config,d=Math.PI*(this.hasType("gauge")&&!c.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/d:null},i.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},i.textForArcLabel=function(a){var b,c,d,e,f,g=this
;return g.shouldShowArcLabel()?(c=(b=g.updateAngle(a))?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat())?f(c,d,e):g.defaultArcValueFormat(c,d):""):""},i.expandArc=function(b){var c,d=this;return d.transiting?void(c=a.setInterval(function(){d.transiting||(a.clearInterval(c),0<d.legend.selectAll(".c3-legend-item-focused").size()&&d.expandArc(b))},10)):(b=d.mapToTargetIds(b),void d.svg.selectAll(d.selectorTargets(b,"."+l.chartArc)).each(function(a){d.shouldExpand(a.data.id)&&d.d3.select(this).selectAll("path").transition().duration(d.expandDuration(a.data.id)).attr("d",d.svgArcExpanded
).transition().duration(2*d.expandDuration(a.data.id)).attr("d",d.svgArcExpandedSub).each(function(a){d.isDonutType(a.data)})}))},i.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+l.arc).style("opacity",1))},i.expandDuration=function(a){var b=this,c=b.config;return b.isDonutType(a)?c.donut_expand_duration:b.isGaugeType(a)?c.gauge_expand_duration:b.isPieType(a)?c.pie_expand_duration:50},i.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a
)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},i.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},i.meetsArcLabelThreshold=function(a){var c=this.config;return(this.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold)<=a},i.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},i.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},i.updateTargetsForArc=function(a){var c,d=this,
e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);(c=e.select("."+l.chartArcs).selectAll("."+l.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}).enter().append("g").attr("class",f)).append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},i.initArc=function(){var a=this;a.arcs=a.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},
i.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;(d=h.selectAll("."+l.arcs).selectAll("."+l.arc).data(e.arcData.bind(e))).enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=g.gauge_startingAngle),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){
var b,c;e.transiting||(b=e.updateAngle(a))&&(c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this))}:null).on("mousemove",g.interaction_enabled?function(a){var c,d=e.updateAngle(a);d&&(c=[e.convertToArcData(d)],e.showTooltip(c,this))}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a))&&(c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this))}:null).on("click",g.interaction_enabled?function(a,b){var c,d=e.updateAngle(a);d&&(c=e.convertToArcData(d),
e.toggleShape&&e.toggleShape(this,c,b),e.config.data_onclick.call(e.api,c,this))}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,
function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?l.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+l.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+l.chartArcsBackground
).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:g.gauge_startingAngle,endAngle:-1*g.gauge_startingAngle};return e.getArc(a,!0,!0)}),e.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/(g.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+l.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/(g.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},i.initGauge=function(){var a=this.arcs
;this.hasType("gauge")&&(a.append("path").attr("class",l.chartArcsBackground),a.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},i.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},i.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",l.regions)},i.updateRegion=function(a){var b=this,c=b.config
;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+l.regions).selectAll("."+l.region).data(c.regions),b.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),b.mainRegion.attr("class",b.classRegion.bind(b)),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},i.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect").each(function(){var a=b.d3.select(this.parentNode).datum();b.d3.select(this).datum(a)}),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr(
"height",g).style("fill-opacity",function(a){return m(a.opacity)?a.opacity:.1})]},i.regionX=function(a){var c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return"y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionY=function(a){var c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return"y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return(
b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width)<e?0:b-e},i.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return(b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height)<e?0:b-e},i.isRegionOnX=function(a){return!a.axis||"x"===a.axis},i.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,m=j.main,n=j.d3;j.hasArcType()||k.data_selection_enabled&&(
k.zoom_enabled&&!j.zoom.altDomain||k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),m.select("."+l.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),m.selectAll("."+l.shapes).selectAll("."+l.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,m,o,p=n.select(this),q=p.classed(l.SELECTED),r=p.classed(l.INCLUDED),s=!1;if(p.classed(l.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),m=j.togglePoint,s=f<c&&c<g&&h<d&&d<i;else{if(!p.classed(l.bar
))return;c=(o=z(this)).x,d=o.y,e=o.width,k=o.height,m=j.togglePath,s=!(g<c||c+e<f||i<d||d+k<h)}s^r&&(p.classed(l.INCLUDED,!r),p.classed(l.SELECTED,!q),m.call(j,!q,p,a,b))})))},i.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),b.dragging=!0)},i.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),a.dragging=!1)},i.selectPoint=function(a,b,c){var d=this,
e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(l.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},i.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected.call(d.api,b,a.node()),d.main.select(
"."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},i.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},i.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},i.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})},i.togglePath=function(a,b,c,d){
a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},i.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},i.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(l.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+l.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+l.shape).each(function(a,b){var c=e.select(this);c.classed(l.SELECTED)&&i(!1,c.classed(l.SELECTED,!1),a,b)}),g.classed(l.SELECTED,!h),i(!h,g,b,
c))},i.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+l.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},i.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context")),d=b.subchart_show?"visible":"hidden";c.style("visibility",d),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",l.chart),c.select("."+l.chart).append("g").attr("class",l.chartBars),c.select("."+l.chart).append("g").attr("class",l.chartLines),
c.append("g").attr("clip-path",a.clipPath).attr("class",l.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",l.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis).style("visibility",b.subchart_axis_x_show?d:"hidden")},i.updateTargetsForSubchart=function(a){var b,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),m=f.classLines.bind(f),n=f.classAreas.bind(f);h.subchart_show&&(g.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",i).enter().append("g").style("opacity",0).attr("class",i).append("g").attr("class",j),(b=g.select(
"."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",k).enter().append("g").style("opacity",0).attr("class",k)).append("g").attr("class",m),b.append("g").attr("class",n),g.selectAll("."+l.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},i.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+l.bars).selectAll("."+l.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove(
)},i.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)},i.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a
).style("opacity",1)},i.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},
i.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},i.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,
withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},i.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+l.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},i.getDefaultExtent=function(){var a=this,b=a.config,c=n(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},i.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,
b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=t(b.x.orgDomain())/t(b.getZoomDomain()),c=this.orgScaleExtent()
;return this.scaleExtent([c[0]*a,c[1]*a]),this}},i.getZoomDomain=function(){var a=this,b=a.config,c=a.d3;return[c.min([a.orgXDomain[0],b.zoom_x_min]),c.max([a.orgXDomain[1],b.zoom_x_max])]},i.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+l.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+l.eventRect).call(b).on("dblclick.zoom",null)},i.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent()
;a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},i.generateColor=function(){var b=this.config,c=this.d3,d=b.data_colors,e=v(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}
},i.generateLevelColor=function(){var b=this.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return v(b.color_threshold)?function(a){var b,h=c[c.length-1];for(b=0;b<f.length;b++)if((e?a:100*a/g)<f[b]){h=c[b];break}return h}:null},i.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){return("y2"===b.axis.getId(f)?d:c).call(b,a,e)}},i.yFormat=function(a){var c=this.config;return(c.axis_y_tick_format?c.axis_y_tick_format:this.defaultValueFormat)(a)},i.y2Format=function(a
){var c=this.config;return(c.axis_y2_tick_format?c.axis_y2_tick_format:this.defaultValueFormat)(a)},i.defaultValueFormat=function(a){return m(a)?+a:""},i.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},i.dataLabelFormat=function(a){var d=this.config.data_labels,e=function(a){return m(a)?+a:""};return"function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?!0===d.format[a]?e:d.format[a]:function(){return""}:e},i.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},i.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},i.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++
)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var l=i.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",
eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",
xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",
INCLUDED:"_included_"};i.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},i.classText=function(a){return this.generateClass(l.text,a.index)},i.classTexts=function(a){return this.generateClass(l.texts,a.id)},i.classShape=function(a){return this.generateClass(l.shape,a.index)},i.classShapes=function(a){return this.generateClass(l.shapes,a.id)},i.classLine=function(a){return this.classShape(a)+this.generateClass(l.line,a.id)},i.classLines=function(a){return this.classShapes(a)+this.generateClass(l.lines,a.id)},i.classCircle=function(a){return this.classShape(a)+this.generateClass(l.circle,a.index)},i.classCircles=function(a){
return this.classShapes(a)+this.generateClass(l.circles,a.id)},i.classBar=function(a){return this.classShape(a)+this.generateClass(l.bar,a.index)},i.classBars=function(a){return this.classShapes(a)+this.generateClass(l.bars,a.id)},i.classArc=function(a){return this.classShape(a.data)+this.generateClass(l.arc,a.data.id)},i.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(l.arcs,a.data.id)},i.classArea=function(a){return this.classShape(a)+this.generateClass(l.area,a.id)},i.classAreas=function(a){return this.classShapes(a)+this.generateClass(l.areas,a.id)},i.classRegion=function(a,b){return this.generateClass(l.region,b)+" "+(
"class"in a?a.class:"")},i.classEvent=function(a){return this.generateClass(l.eventRect,a.index)},i.classTarget=function(a){var c=this.config.data_classes[a],d="";return c&&(d=" "+l.target+"-"+c),this.generateClass(l.target,a)+d},i.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},i.classFocused=function(a){return" "+(0<=this.focusedTargetIds.indexOf(a.id)?l.focused:"")},i.classDefocused=function(a){return" "+(0<=this.defocusedTargetIds.indexOf(a.id)?l.defocused:"")},i.classChartText=function(a){return l.chartText+this.classTarget(a.id)},i.classChartLine=function(a){return l.chartLine+this.classTarget(a.id)},i.classChartBar=function(
a){return l.chartBar+this.classTarget(a.id)},i.classChartArc=function(a){return l.chartArc+this.classTarget(a.data.id)},i.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},i.selectorTarget=function(a,b){return(b||"")+"."+l.target+this.getTargetSelectorSuffix(a)},i.selectorTargets=function(a,b){var c=this;return(a=a||[]).length?a.map(function(a){return c.selectorTarget(a,b)}):null},i.selectorLegend=function(a){return"."+l.legendItem+this.getTargetSelectorSuffix(a)},i.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var A,
m=i.isValue=function(a){return a||0===a},n=i.isFunction=function(a){return"function"==typeof a},o=i.isString=function(a){return"string"==typeof a},p=i.isUndefined=function(a){return void 0===a},q=i.isDefined=function(a){return void 0!==a},r=i.ceil10=function(a){return 10*Math.ceil(a/10)},s=i.asHalfPixel=function(a){return Math.ceil(a)+.5},t=i.diffDomain=function(a){return a[1]-a[0]},u=i.isEmpty=function(a){return null==a||o(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},v=i.notEmpty=function(a){return!i.isEmpty(a)},w=i.getOption=function(a,b,c){return q(a[b])?a[b]:c},x=i.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(
function(d){a[d]===b&&(c=!0)}),c},y=i.sanitise=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},z=i.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:c[0].x,y:Math.min(c[0].y,c[1].y),width:b.width,height:b.height}};h.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(l.focused,!0).classed(l.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){
return a.indexOf(b)<0})},h.defocus=function(a){var c=this.internal;a=c.mapToTargetIds(a),c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))).classed(l.focused,!1).classed(l.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},h.revert=function(a){var c=this.internal;a=c.mapToTargetIds(a),c.svg.selectAll(c.selectorTargets(a)).classed(l.focused,!1).classed(l.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(
function(){return c.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},h.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),(c=d.svg.selectAll(d.selectorTargets(a))).transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),(c=d.svg.selectAll(d.selectorTargets(a))).transition().style(
"opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},h.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},h.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,
b.updateAndRedraw()},h.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},h.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_max=d.max([b.orgXDomain[1],a])):c.zoom_x_max},h.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_min=d.min([b.orgXDomain[0],a])):c.zoom_x_min},h.zoom.range=function(a){return arguments.length?(q(a.max)&&this.domain.max(a.max),void(q(a.min)&&this.domain.min(a.min))):{max:this.domain.max(),min:this.domain.min()}},h.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),
"names"in a&&h.data.names.bind(this)(a.names),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},h.unload=function(a){var b=this.internal;(a=a||{}
)instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},h.flow=function(a){var b,c,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),n=0,o=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(o=a.values[a.values.length-1].index+1),n=b[c].values.length,
d=0;d<n;d++)b[c].values[d].index=o+d,j.isTimeSeries()||(b[c].values[d].x=o+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(o=a.values[a.values.length-1].index+1,c=0;c<n;c++)a.values.push({id:a.id,index:o+c,x:j.isTimeSeries()?j.getOtherTargetX(o+c):o+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;b<o;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=o,j.isTimeSeries()||(a.x+=o)}),a.values=c.concat(a.values)}),
j.data.targets=j.data.targets.concat(b),j.getMaxDataCount(),g=(f=j.data.targets[0]).values[0],q(a.to)?(n=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&n++})):q(a.length)&&(n=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?1<f.values.length?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:n,duration:m(a.duration)?a.duration:j.config.transition_duration,done:a.done,
orgDataCount:l},withLegend:!0,withTransition:1<l,withTrimXDomain:!1,withUpdateXAxis:!0})},i.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,u,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,m=a.drawArea,n=a.cx,o=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,v=i.index,w=i.length,x=b.getValueOnIndex(b.data.targets[0].values,v),y=b.getValueOnIndex(b.data.targets[0].values,v+w),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([])
,J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,w)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),e=i.orgDataCount?1===i.orgDataCount||(x&&x.x)===(y&&y.x)?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),b.x(x.x)-b.x(y.x)):t(g)/2,u=t(z)/t(g),f="translate("+e+",0) scale("+u+",1)",b.hideXGridFocus(),d.transition().ease("linear").duration(A
).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))}).call(C,function(){var a,d=[],e=[],f=[];if(w){for(a=0;a<w;a++)d.push("."+l.shape+"-"+(v+a)),e.push("."+l.text+"-"+(v+a)),f.push("."+l.eventRect+"-"+(v+a));b.svg.selectAll("."+l.shapes).selectAll(d).remove(),b.svg.selectAll("."+l.texts).selectAll(
e).remove(),b.svg.selectAll("."+l.eventRects).selectAll(f).remove(),b.svg.select("."+l.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",m),K.attr("transform",null).attr("cx",n).attr("cy",o),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)
).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},h.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+l.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+l.shape).filter(function(){return c.select(this).classed(l.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},h.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),
m=f.data_selection_grouped||!a||0<=a.indexOf(j),n=!b||0<=b.indexOf(h),o=i.classed(l.SELECTED);i.classed(l.line)||i.classed(l.area)||(m&&n?f.data_selection_isselectable(g)&&!o&&k(!0,i.classed(l.SELECTED,!0),g,h):q(c)&&c&&o&&k(!1,i.classed(l.SELECTED,!1),g,h))})},h.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||0<=a.indexOf(i),m=!b||0<=b.indexOf(g),n=h.classed(l.SELECTED);h.classed(l.line)||h.classed(l.area
)||k&&m&&e.data_selection_isselectable(f)&&n&&j(!1,h.classed(l.SELECTED,!1),f,g)})},h.transform=function(a,b){var c=this.internal,d=0<=["pie","donut"].indexOf(a)?{withTransform:!0}:null;c.transformTo(b,a,d)},i.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},h.groups=function(a){var b=this.internal,c=b.config;return p(a)||(c.data_groups=a,b.redraw()),c.data_groups},h.xgrids=function(a){var b=this.internal,c=b.config;return a&&(c.grid_x_lines=a,b.redrawWithoutRescale()),c.grid_x_lines},
h.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a||[]))},h.xgrids.remove=function(a){this.internal.removeGridLines(a,!0)},h.ygrids=function(a){var b=this.internal,c=b.config;return a&&(c.grid_y_lines=a,b.redrawWithoutRescale()),c.grid_y_lines},h.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a||[]))},h.ygrids.remove=function(a){this.internal.removeGridLines(a,!1)},h.regions=function(a){var b=this.internal,c=b.config;return a&&(c.regions=a,b.redrawWithoutRescale()),c.regions},h.regions.add=function(a){var b=this.internal,c=b.config;return a&&(c.regions=c.regions.concat(a)
,b.redrawWithoutRescale()),c.regions},h.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[l.region]),d=e.main.select("."+l.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return!a.class||(a.class.split(" ").forEach(function(a){0<=c.indexOf(a)&&(b=!0)}),!b)}),f.regions},h.data=function(a){var b=this.internal.data.targets;return void 0===a?b:b.filter(function(b){return 0<=[].concat(a).indexOf(b.id)})},h.data.shown=function(a){
return this.internal.filterTargetsToShow(this.data(a))},h.data.values=function(a){var b,c=null;return a&&(c=(b=this.data(a))[0]?b[0].values.map(function(a){return a.value}):null),c},h.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},h.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},h.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},h.category=function(a,b){var c=this.internal,d=c.config;return 1<arguments.length&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},h.categories=function(a){var b=this.internal,c=b.config
;return arguments.length&&(c.axis_x_categories=a,b.redraw()),c.axis_x_categories},h.color=function(a){return this.internal.color(a)},h.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.axis=function(){},h.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},h.axis.max=function(a){
var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_max=a.x),m(a.y)&&(c.axis_y_max=a.y),m(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},h.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_min=a.x),m(a.y)&&(c.axis_y_min=a.y),m(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},h.axis.range=function(a){
return arguments.length?(q(a.max)&&this.axis.max(a.max),void(q(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},h.legend=function(){},h.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.resize=function(a){var c=this.internal.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},h.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},h.destroy=function(){var b=this.internal
;if(a.clearInterval(b.intervalForObserveInserted),void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),a.detachEvent)a.detachEvent("onresize",b.resizeFunction);else if(a.removeEventListener)a.removeEventListener("resize",b.resizeFunction);else{var c=a.onresize;c&&c.add&&c.remove&&c.remove(b.resizeFunction)}return b.selectChart.classed("c3",!1).html(""),Object.keys(b).forEach(function(a){b[a]=null}),null},h.tooltip=function(){},h.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?b=d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],null):m(a.data.index)?a.data.index:d.getIndexByX(a.data.x
):void 0!==a.x?b=d.getIndexByX(a.x):void 0!==a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c),d.config.tooltip_onshow.call(d,a.data)},h.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},i.isSafari=function(){var b=a.navigator.userAgent;return 0<=b.indexOf("Safari")&&b.indexOf("Chrome")<0},i.isChrome=function(){return 0<=a.navigator.userAgent.indexOf("Chrome")},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")
;var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"SVGPathSeg"in a||(a.SVGPathSeg=function(a,b,c){this.pathSegType=a,this.pathSegTypeAsLetter=b,this._owningPathSegList=c},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,
SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},a.SVGPathSegClosePath=function(a){SVGPathSeg.call(this,
SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},a.SVGPathSegMovetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a),this._x=b,this._y=c},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},
SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegMovetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",a),this._x=b,this._y=c},
SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},
enumerable:!0}),a.SVGPathSegLinetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",a),this._x=b,this._y=c},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),
Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",a),this._x=b,this._y=c},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(
SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},
SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(
SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),
a.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,
this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),
Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){
return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),
Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){
return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),
Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcAbs=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){
return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(a){
this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,
this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcRel=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){
return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(
SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(
SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a),this._x=b},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){
return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a),this._x=b},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},
SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a),this._y=b},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){
return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a),this._y=b},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},
SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),
SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){
return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype)
,SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){
return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),
SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},
set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,
this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new SVGPathSegMovetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,b){return new SVGPathSegMovetoRel(
void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new SVGPathSegLinetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new SVGPathSegLinetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicRel(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},
SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,g){return new SVGPathSegArcAbs(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,g){return new SVGPathSegArcRel(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new SVGPathSegLinetoHorizontalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new SVGPathSegLinetoHorizontalRel(void 0,a)},
SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new SVGPathSegLinetoVerticalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new SVGPathSegLinetoVerticalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},
SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)}),"SVGPathSegList"in a||(a.SVGPathSegList=function(a){this._pathElement=a,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),
this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),
SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)}),b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},
SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(a){a._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(a){return this._checkPathSynchronizedToList(),this._list=[a],(a._owningPathSegList=this)._writeListToPath(),a},SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||a<0||a>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(a){return this._checkPathSynchronizedToList(),this._checkValidIndex(a),this._list[a]},
SVGPathSegList.prototype.insertItemBefore=function(a,b){return this._checkPathSynchronizedToList(),b>this.numberOfItems&&(b=this.numberOfItems),a._owningPathSegList&&(a=a.clone()),this._list.splice(b,0,a),(a._owningPathSegList=this)._writeListToPath(),a},SVGPathSegList.prototype.replaceItem=function(a,b){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._checkValidIndex(b),((this._list[b]=a)._owningPathSegList=this)._writeListToPath(),a},SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList(),this._checkValidIndex(a);var b=this._list[a];return this._list.splice(a,1),this._writeListToPath(),b},
SVGPathSegList.prototype.appendItem=function(a){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._list.push(a),(a._owningPathSegList=this)._writeListToPath(),a},SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;return a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()}),b},SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,
this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return a<=" "&&(" "==a||"\n"==a||"\t"==a||"\r"==a||"\f"==a)},d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},d.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(
this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},d.prototype.peekSegmentType=function(){var a=this._string[this._currentIndex];return this._pathSegTypeFromChar(a)},d.prototype._pathSegTypeFromChar=function(a){switch(a){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":
return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":
return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||"0"<=a&&a<="9")&&b!=SVGPathSeg.PATHSEG_CLOSEPATH?b==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:b==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:b:SVGPathSeg.PATHSEG_UNKNOWN},d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==SVGPathSeg.PATHSEG_MOVETO_ABS||a==SVGPathSeg.PATHSEG_MOVETO_REL},d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(
this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=h)for(var i=this._currentIndex-1,j=1;h<=i;)b+=j*(
this._string.charAt(i--)-"0"),j*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)d+=(this._string.charAt(this._currentIndex++)-"0")*(c*=.1)}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(
this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)a*=10,a+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var k=b+d;if(k*=e,a&&(k*=Math.pow(10,f*a)),g!=this._currentIndex
)return this._skipOptionalSpacesOrDelimiter(),k}},d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,b=this._string.charAt(this._currentIndex++);if("0"==b)a=!1;else{if("1"!=b)return;a=!0}return this._skipOptionalSpacesOrDelimiter(),a}},d.prototype.parseSegment=function(){var a=this._string[this._currentIndex],c=this._pathSegTypeFromChar(a);if(c==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if((c=this._nextCommandHelper(a,this._previousCommand))==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=c){
case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(b,this._parseNumber())
;case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(b);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),
x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoCubicAbs(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoCubicSmoothRel(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoCubicSmoothAbs(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return d={x1:this._parseNumber(),y1:this._parseNumber(
),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoQuadraticRel(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegCurvetoQuadraticAbs(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:return d={x1:this._parseNumber(),
y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegArcRel(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:return d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new SVGPathSegArcAbs(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);default:throw"Unknown path seg type."}};var e=new c,f=new d(a);if(!f.initialCommandIsMoveTo())return[];for(;f.hasMoreData();){
var g=f.parseSegment();if(!g)return[];e.appendSegment(g)}return e.pathSegList}),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return k}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=k:a.c3=k}(window),define("core/areaBroker",["jquery","lodash"],function($,_){"use strict";return function(requiredAreas,$container,mapping){var broker,areas,components={};if(("string"==typeof $container||$container instanceof HTMLElement)&&($container=$($container)),!$container||!$container.length)throw new TypeError("Please provide the areaBroker a container");return requiredAreas=requiredAreas||[],(broker={defineAreas:function(
areasMapping){var keys;if(!_.isPlainObject(areasMapping))throw new TypeError("A mapping has the form of a plain object");if(keys=_.keys(areasMapping),!_.all(requiredAreas,function(val){return _.contains(keys,val)}))throw new TypeError("You have to define a mapping for at least : "+requiredAreas.join(", "));areas=areasMapping},getContainer:function(){return $container},getArea:function(name){if(_.isEmpty(areas))throw new Error("Sorry areas have not been defined yet!");return areas[name]},setComponent:function(areaName,component){if(!areas[areaName])throw new TypeError("There is no areas defined or no area named "+areaName);if(!_.isObject(component)
)throw new TypeError("A component has to be an object");components[areaName]=component,this["get"+areaName[0].toUpperCase()+areaName.slice(1)]=this.getComponent.bind(this,areaName)},getComponent:function(areaName){return components[areaName]}}).defineAreas(mapping),_.forEach(requiredAreas,function(area){var areaIdentifier=area[0].toUpperCase()+area.slice(1);broker["get"+areaIdentifier+"Area"]=_.bind(_.partial(broker.getArea,area),broker)}),broker}}),function(){"use strict";function lib$es6$promise$utils$$isFunction(x){return"function"==typeof x}var lib$es6$promise$asap$$vertxNext,lib$es6$promise$asap$$customSchedulerFn,
lib$es6$promise$utils$$isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},lib$es6$promise$asap$$len=0,lib$es6$promise$asap$$asap=function(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback,lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg,2===(lib$es6$promise$asap$$len+=2)&&(lib$es6$promise$asap$$customSchedulerFn?lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush):lib$es6$promise$asap$$scheduleFlush())};var lib$es6$promise$asap$$browserWindow="undefined"!=typeof window?window:void 0,
lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{},lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver,lib$es6$promise$asap$$isNode="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),lib$es6$promise$asap$$isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}var lib$es6$promise$asap$$scheduleFlush,channel,iterations,observer,node,
nextTick,version,lib$es6$promise$asap$$queue=new Array(1e3);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){(0,lib$es6$promise$asap$$queue[i])(lib$es6$promise$asap$$queue[i+1]),lib$es6$promise$asap$$queue[i]=void 0,lib$es6$promise$asap$$queue[i+1]=void 0}lib$es6$promise$asap$$len=0}function lib$es6$promise$$internal$$noop(){}lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$isNode?(nextTick=process.nextTick,version=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(version)&&"0"===version[1]&&"10"===version[2]&&(nextTick=setImmediate),function(){nextTick(lib$es6$promise$asap$$flush)}
):lib$es6$promise$asap$$BrowserMutationObserver?(iterations=0,observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}):lib$es6$promise$asap$$isWorker?((channel=new MessageChannel).port1.onmessage=lib$es6$promise$asap$$flush,function(){channel.port2.postMessage(0)}):void 0===lib$es6$promise$asap$$browserWindow&&"function"==typeof require?function(){try{var vertx=require("vertx");return lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext,function(){lib$es6$promise$asap$$vertxNext(
lib$es6$promise$asap$$flush)}}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}():lib$es6$promise$asap$$useSetTimeout();var lib$es6$promise$$internal$$PENDING=void 0,lib$es6$promise$$internal$$FULFILLED=1,lib$es6$promise$$internal$$REJECTED=2,lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor)!function(promise,thenable){thenable._state===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,thenable._result
):thenable._state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,thenable._result):lib$es6$promise$$internal$$subscribe(thenable,void 0,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}(promise,maybeThenable);else{var then=function(promise){try{return promise.then}catch(error){return lib$es6$promise$$internal$$GET_THEN_ERROR.error=error,lib$es6$promise$$internal$$GET_THEN_ERROR}}(maybeThenable);then===lib$es6$promise$$internal$$GET_THEN_ERROR?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error
):void 0===then?lib$es6$promise$$internal$$fulfill(promise,maybeThenable):lib$es6$promise$utils$$isFunction(then)?function(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=!1,error=function(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}(then,thenable,function(value){sealed||(sealed=!0,thenable!==value?lib$es6$promise$$internal$$resolve(promise,value):lib$es6$promise$$internal$$fulfill(promise,value))},function(reason){sealed||(sealed=!0,lib$es6$promise$$internal$$reject(promise,reason))},promise._label);!sealed&&error&&(sealed=!0,
lib$es6$promise$$internal$$reject(promise,error))},promise)}(promise,maybeThenable,then):lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}function lib$es6$promise$$internal$$resolve(promise,value){var x;promise===value?lib$es6$promise$$internal$$reject(promise,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(x=value)||"object"==typeof x&&null!==x?lib$es6$promise$$internal$$handleMaybeThenable(promise,value):lib$es6$promise$$internal$$fulfill(promise,value)}function lib$es6$promise$$internal$$publishRejection(promise){promise._onerror&&promise._onerror(promise._result),lib$es6$promise$$internal$$publish(promise)}
function lib$es6$promise$$internal$$fulfill(promise,value){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._result=value,promise._state=lib$es6$promise$$internal$$FULFILLED,0!==promise._subscribers.length&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise))}function lib$es6$promise$$internal$$reject(promise,reason){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._state=lib$es6$promise$$internal$$REJECTED,promise._result=reason,lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise))}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){
var subscribers=parent._subscribers,length=subscribers.length;parent._onerror=null,subscribers[length]=child,subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment,subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection,0===length&&parent._state&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child,callback,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?lib$es6$promise$$internal$$invokeCallback(
settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var value,error,succeeded,failed,hasCallback=lib$es6$promise$utils$$isFunction(callback);if(hasCallback){if((value=function(callback,detail){try{return callback(detail)}catch(e){return lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e,lib$es6$promise$$internal$$TRY_CATCH_ERROR}}(callback,detail))===lib$es6$promise$$internal$$TRY_CATCH_ERROR?(
failed=!0,error=value.error,value=null):succeeded=!0,promise===value)return void lib$es6$promise$$internal$$reject(promise,new TypeError("A promises callback cannot return that same promise."))}else value=detail,succeeded=!0;promise._state!==lib$es6$promise$$internal$$PENDING||(hasCallback&&succeeded?lib$es6$promise$$internal$$resolve(promise,value):failed?lib$es6$promise$$internal$$reject(promise,error):settled===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,value):settled===lib$es6$promise$$internal$$REJECTED&&lib$es6$promise$$internal$$reject(promise,value))}function lib$es6$promise$enumerator$$Enumerator(Constructor,
input){this._instanceConstructor=Constructor,this.promise=new Constructor(lib$es6$promise$$internal$$noop),this._validateInput(input)?(this._input=input,this.length=input.length,this._remaining=input.length,this._init(),0===this.length?lib$es6$promise$$internal$$fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&lib$es6$promise$$internal$$fulfill(this.promise,this._result))):lib$es6$promise$$internal$$reject(this.promise,this._validationError())}lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)},
lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){for(var length=this.length,promise=this.promise,input=this._input,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++)this._eachEntry(input[i],i)},lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var x,
c=this._instanceConstructor;"object"==typeof(x=entry)&&null!==x?entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING?(entry._onerror=null,this._settledAt(entry._state,i,entry._result)):this._willSettleAt(c.resolve(entry),i):(this._remaining--,this._result[i]=entry)},lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===lib$es6$promise$$internal$$PENDING&&(this._remaining--,state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,value):this._result[i]=value),0===this._remaining&&lib$es6$promise$$internal$$fulfill(promise,this._result)},
lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,void 0,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};var lib$es6$promise$promise$race$$default=function(entries){var promise=new this(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries))return lib$es6$promise$$internal$$reject(promise,new TypeError("You must pass an array to race.")),promise;var length=entries.length;function onFulfillment(value){
lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++)lib$es6$promise$$internal$$subscribe(this.resolve(entries[i]),void 0,onFulfillment,onRejection);return promise};var lib$es6$promise$promise$resolve$$default=function(object){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$resolve(promise,object),promise};var lib$es6$promise$promise$reject$$default=function(reason){var promise=new this(
lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$reject(promise,reason),promise},lib$es6$promise$promise$$counter=0;var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++,this._state=void 0,this._result=void 0,this._subscribers=[],lib$es6$promise$$internal$$noop!==resolver&&(lib$es6$promise$utils$$isFunction(resolver)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof lib$es6$promise$promise$$Promise||function(){throw new TypeError(
"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(promise,resolver){try{resolver(function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}(this,resolver))}lib$es6$promise$promise$$Promise.all=function(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise},lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default,lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default,
lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default,lib$es6$promise$promise$$Promise._setScheduler=function(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn},lib$es6$promise$promise$$Promise._setAsap=function(asapFn){lib$es6$promise$asap$$asap=asapFn},lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap,lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var state=this._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection)return this
;var child=new this.constructor(lib$es6$promise$$internal$$noop),result=this._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})}else lib$es6$promise$$internal$$subscribe(this,child,onFulfillment,onRejection);return child},catch:function(onRejection){return this.then(null,onRejection)}};var lib$es6$promise$polyfill$$default=function(){var local;if("undefined"!=typeof global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error(
"polyfill failed because global object is unavailable in this environment")}var P=local.Promise;P&&"[object Promise]"===Object.prototype.toString.call(P.resolve())&&!P.cast||(local.Promise=lib$es6$promise$promise$$default)},lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};"function"==typeof define&&define.amd?define("lib/polyfill/es6-promise",[],function(){return lib$es6$promise$umd$$ES6Promise}):"undefined"!=typeof module&&module.exports?module.exports=lib$es6$promise$umd$$ES6Promise:void 0!==this&&(this.ES6Promise=lib$es6$promise$umd$$ES6Promise),lib$es6$promise$polyfill$$default()}.call(
this),define("core/promise",["lib/polyfill/es6-promise"],function(es6Promise){"use strict";return window.Promise||es6Promise.Promise}),define("lib/uuid",[],function(){var CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(len,radix){var i,r,chars=CHARS,uuid=[];if(radix=radix||chars.length,len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else for(uuid[8]=uuid[13]=uuid[18]=uuid[23]="-",uuid[14]="4",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?3&r|8:r]);return uuid.join("")}}),define("core/logger/api",["lodash","core/format","core/promise"],function(_,format,Promise){"use strict"
;var defaultLevel="info",levels={fatal:60,error:50,warn:40,info:30,debug:20,trace:10},logQueue=[],getLevel=function(level){return void 0===level||_.isString(level)&&!_.has(levels,level)?defaultLevel:_.isNumber(level)?_.findKey(levels,function(l){return l===level})||defaultLevel:level},getLevelNum=function(level){return _.isString(level)&&_.has(levels,level)?levels[level]:_.isNumber(level)&&_.contains(levels,level)?level:levels[defaultLevel]},checkMinLevel=function(minLevel,level){return getLevelNum(level)>=getLevelNum(minLevel)},loggerFactory=function loggerFactory(name,minLevel,fields){var baseRecord,logger;if(!_.isString(name)||_.isEmpty(name)
)throw new TypeError("A logger needs a name");return _.isPlainObject(minLevel)&&"undefined"==typeof field&&(fields=minLevel,minLevel=defaultLevel),baseRecord=_.defaults(fields||{},{name:name,pid:1,hostname:navigator.userAgent}),logger={log:function(level,recordFields,message){var record,err,rest=[],time=(new Date).toISOString();if(!1!==loggerFactory.providers&&checkMinLevel(minLevel||defaultLevel,level))return rest=_.isString(recordFields)||recordFields instanceof Error?(message=recordFields,recordFields={},[].slice.call(arguments,2)):[].slice.call(arguments,3),record={level:getLevel(level),v:0,time:time},checkMinLevel(levels.error,level
)||message instanceof Error?(err=message instanceof Error?message:(message=_.isObject(message)?JSON.stringify(message):message,new Error(message)),record.msg=err.message,record.err=err):record.msg=format.apply(null,[message].concat(rest)),_.merge(record,baseRecord,recordFields),logQueue.push(record),loggerFactory.flush(),this},level:function(value){return void 0!==value?(minLevel=getLevelNum(value),this):getLevel(minLevel)},child:function(childFields){return loggerFactory(name,minLevel,_.defaults(childFields,baseRecord))}},_.reduce(levels,function(target,level,levelName){return target[levelName]=_.partial(logger.log,level),target},logger)}
;return loggerFactory.levels=levels,loggerFactory.providers=!1,loggerFactory.load=function(providerConfigs){var self=this,modules=[];return this.providers=[],new Promise(function(resolve,reject){_.forEach(providerConfigs,function(providerConfig,providerName){modules.push(providerName)}),require(modules,function(){var loadedProviders=[].slice.call(arguments);_.forEach(loadedProviders,function(provider,moduleKey){try{self.register(provider,providerConfigs[modules[moduleKey]])}catch(err){reject(err)}}),self.flush(),resolve()},reject)})},loggerFactory.register=function(provider,providerConfig){if(!_.isPlainObject(provider)||!_.isFunction(provider.log)
)throw new TypeError("A log provider is an object with a log method");provider.checkMinLevel=checkMinLevel,_.isFunction(provider.setConfig)&&provider.setConfig(providerConfig),this.providers=this.providers||[],this.providers.push(provider)},loggerFactory.flush=function(){_.isArray(this.providers)&&0<this.providers.length&&(_.forEach(logQueue,function(message){_.forEach(loggerFactory.providers,function(provider){provider.log.call(provider,message)})}),logQueue=[])},loggerFactory.setDefaultLevel=function(level){return defaultLevel=getLevel(level)},loggerFactory}),define("core/logger",["lodash","module","core/logger/api"],function(_,module,loggerFactory){
"use strict";var defaultConfig={level:loggerFactory.levels.warn,loggers:{"core/logger/console":{level:"warn"}}},config=_.defaults(module.config()||{},defaultConfig),logger=loggerFactory("core/logger");return loggerFactory.setDefaultLevel(config.level),loggerFactory.load(config.loggers),window.onerror=function(msg,url,line,col,error){logger.error("Caught[via window.onerror]: '"+msg+"' from "+url+":"+line+":"+col)},window.setTaoLogLevel=function(level){return loggerFactory.setDefaultLevel(level)},loggerFactory}),define("core/eventifier",["lodash","async","core/promise","lib/uuid","core/logger"],function(_,async,Promise,uuid,loggerFactory){"use strict"
;var defaultNs="@",eventifierLogger=loggerFactory("core/eventifier");function getEventNames(eventNames){return!_.isString(eventNames)||_.isEmpty(eventNames)?[]:_(eventNames.split(/\s/g)).compact().uniq().value()}function getName(eventName){return-1<eventName.indexOf(".")?eventName.substr(0,eventName.indexOf(".")):eventName}function getNamespace(eventName){return-1<eventName.indexOf(".")?eventName.substr(eventName.indexOf(".")+1):defaultNs}return function(target){var targetName,logger,stoppedEvents,eventHandlers={},getHandlers=function(eventName,type){var name=getName(eventName),ns=getNamespace(eventName);return type=type||"between",
eventHandlers[ns]=eventHandlers[ns]||{},eventHandlers[ns][name]=eventHandlers[ns][name]||{before:[],between:[],after:[]},eventHandlers[ns][name][type]},eventApi={on:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName).push(handler)}),this},off:function(eventNames){return _.forEach(getEventNames(eventNames),function(eventName){var offNamespaces,name=getName(eventName),ns=getNamespace(eventName);ns&&!name?"*"===ns?((offNamespaces={})[defaultNs]=eventHandlers[defaultNs],eventHandlers=offNamespaces):eventHandlers[ns]={}:_.forEach(eventHandlers,function(nsHandlers,namespace){
!nsHandlers[name]||ns!==defaultNs&&ns!==namespace||(nsHandlers[name]={before:[],between:[],after:[]})})}),this},removeAllListeners:function(){return eventHandlers={},this},trigger:function(eventNames){var self=this,args=[].slice.call(arguments,1);function triggerBetween(allHandlers,event){shouldStop(event.name)?logHandlerStop("before",event):triggerHandlers(allHandlers.between,event).then(function(){!function(handlers,event){shouldStop(event.name)?logHandlerStop("on",event):triggerHandlers(handlers,event).then(function(){shouldStop(event.name)&&logHandlerStop("after",event)}).catch(function(err){logHandlerStop("after",event,err)})}(allHandlers.after,event)}
).catch(function(err){logHandlerStop("on",event,err)})}function triggerHandlers(handlers,event){var pHandlers;return pHandlers=handlers.map(function(handler){return shouldStop(event.name)?Promise.reject():handler.apply(self,args)}),Promise.all(pHandlers)}function logHandlerStop(stoppedIn,event,err){err instanceof Error&&logger.error(err),logger.trace({err:err,event:event.name,stoppedIn:stoppedIn},event.name+" handlers stopped")}function shouldStop(name){return stoppedEvents[name]}return stoppedEvents={},_.forEach(getEventNames(eventNames),function(eventName){var ns=getNamespace(eventName),name=getName(eventName),mergedHandlers=_(eventHandlers).filter(
function(nsHandlers,namespace){return nsHandlers[name]&&(ns===defaultNs||ns===namespace||"*"===namespace)}).reduce(function(acc,nsHandlers){return acc.before=acc.before.concat(nsHandlers[name].before),acc.between=acc.between.concat(nsHandlers[name].between),acc.after=acc.after.concat(nsHandlers[name].after),acc},{before:[],between:[],after:[]});logger.trace({event:eventName,args:args},"trigger %s",eventName),mergedHandlers&&function(allHandlers,name,ns){var event={name:name,namespace:ns};allHandlers.before.length?function(handlers,event){var pHandlers,beforeArgs=args.slice();return beforeArgs.unshift(event),pHandlers=handlers.map(function(handler){
var value=!shouldStop(event.name)&&handler.apply(self,beforeArgs);return!1===value?Promise.reject():value}),Promise.all(pHandlers)}(allHandlers.before,event).then(function(){triggerBetween(allHandlers,event)}).catch(function(err){logHandlerStop("before",event,err)}):triggerBetween(allHandlers,event)}(mergedHandlers,name,ns)}),this},before:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"before").push(handler)}),this},after:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"after"
).push(handler)}),this},stopEvent:function(name){_.isString(name)&&!_.isEmpty(name.trim())&&(stoppedEvents[name.trim()]=!0)},spread:function(destination,eventNames){var self=this;return destination&&_.isFunction(destination.trigger)&&(_.isString(eventNames)&&(eventNames=getEventNames(eventNames)),_.forEach(eventNames,function(eventName){self.on(eventName,function(){var args=[eventName].concat([].slice.call(arguments));destination.trigger.apply(destination,args)})})),this}};return targetName=(target=target||{}).name||target.id||target.serial||uuid(6),logger=eventifierLogger.child({target:targetName}),_(eventApi).functions().forEach(function(method){
_.isFunction(target[method])&&eventifierLogger.warn("The target object has already a method named "+method,target),target[method]=function(){var args=[].slice.call(arguments);return eventApi[method].apply(target,args)}}),target}}),define("core/asyncProcess",["lodash","core/promise","core/eventifier"],function(_,Promise,eventifier){"use strict";return function(){var running=!1,steps=[];return eventifier({isRunning:function(){return running},start:function(cb){var started=!1;return running||(steps=[],started=running=!0,_.isFunction(cb)&&cb(),this.trigger("start")),started},addStep:function(step){return steps.push(step),this.trigger("step",step),this},
done:function(cb){var self=this,finish=Promise.all(steps);return finish.then(function(data){running=!1,_.isFunction(cb)&&cb(null,data),self.trigger("resolve",data)}).catch(function(error){running=!1,_.isFunction(cb)&&cb(error||!0),self.trigger("reject",error)}),finish}})}}),define("core/promiseQueue",["lodash","core/promise","core/eventifier","lib/uuid"],function(_,Promise,eventifier,uuid){"use strict";return function(){var queue={},getId=function getId(){var id="promise-"+uuid(6);return void 0===queue[id]?id:getId()};return{add:function(promise){return queue[getId()]=promise,this},getValues:function(){return _.values(queue)},clear:function(){return queue={}
,this},serie:function(promiseFn){var id=getId(),currentQueue=this.getValues(),emitter=eventifier();return queue[id]=new Promise(function(resolve){emitter.on("fulfilled",resolve)}),Promise.all(currentQueue).then(function(){if(_.isFunction(promiseFn))return promiseFn()}).then(function(data){return emitter.trigger("fulfilled"),delete queue[id],data}).catch(function(err){throw queue={},err})}}}}),define("core/store/localstorage",["lodash","core/promise","core/promiseQueue","lib/uuid"],function(_,Promise,promiseQueue,uuid){"use strict";var storage=window.localStorage,writingQueue=promiseQueue(),setEntry=function(storeName,key,value){return new Promise(function(
resolve,reject){try{storage.setItem("tao-store-"+storeName+"."+key,JSON.stringify(value)),resolve(!0)}catch(ex){reject(ex)}})},getEntry=function(storeName,key){return new Promise(function(resolve,reject){var value;try{null===(value=storage.getItem("tao-store-"+storeName+"."+key))?resolve():resolve(JSON.parse(value))}catch(ex){reject(ex)}})},getKnownStores=function(){return getEntry("index","stores")},localStorageBackend=function(storeName){var name,registered=!1,openStore=function(){return registered?Promise.resolve():function(storeName){return getKnownStores().then(function(stores){return(stores=stores||{})[storeName]={name:storeName,lastOpen:Date.now()},
setEntry("index","stores",stores)})}(storeName).then(function(){registered=!0})};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return name="tao-store-"+storeName+".",{getItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return getEntry(storeName,key)})})},setItem:function(key,value){return writingQueue.serie(function(){return openStore().then(function(){return setEntry(storeName,key,value)})})},removeItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return storage.removeItem(name+key),!0})})},getItems:function(){
var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).reduce(function(acc,key){var value,exposedKey=key.replace(name,"");try{null!==(value=storage.getItem(key))&&(acc[exposedKey]=JSON.parse(value))}catch(ex){acc[exposedKey]=null}return acc},{})})})},clear:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){
return keyPattern.test(key)}).forEach(function(key){storage.removeItem(key)}),!0})})},removeStore:function(){return this.clear().then(function(){return function(storeName){return getKnownStores().then(function(stores){return delete(stores=stores||{})[storeName],setEntry("index","stores",stores)})}(storeName)})}}};return localStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(stores){var removing=_(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store&&store.name?localStorageBackend(store.name).removeStore():Promise.resolve()
}).value();return Promise.all(removing)})},localStorageBackend.getAll=function(validate){return getKnownStores().then(function(stores){return _(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store.name}).value()})},localStorageBackend.getStoreIdentifier=function(){var idStore=localStorageBackend("id");return idStore.getItem("id").then(function(id){return _.isEmpty(id)?(id=uuid(),idStore.setItem("id",id).then(function(){return id})):id})},localStorageBackend}),function(name,definition,global){"use strict";"function"==typeof define?define("lib/store/idbstore",definition
):"undefined"!=typeof module&&module.exports?module.exports=definition():global.IDBStore=definition()}(0,function(){"use strict";var defaultErrorHandler=function(error){throw error},defaultSuccessHandler=function(){},defaults={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:defaultErrorHandler,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},IDBStore=function(kwArgs,onStoreReady){for(var key in void 0===onStoreReady&&"function"==typeof kwArgs&&(onStoreReady=kwArgs),"[object Object]"!=Object.prototype.toString.call(kwArgs)&&(kwArgs={}),
defaults)this[key]=void 0!==kwArgs[key]?kwArgs[key]:defaults[key];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,onStoreReady&&(this.onStoreReady=onStoreReady);var env="object"==typeof window?window:self,availableImplementations=this.implementationPreference.filter(function(implName){return implName in env});this.implementation=availableImplementations[0],this.idb=env[this.implementation],this.keyRange=env.IDBKeyRange||env.webkitIDBKeyRange||env.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",
PREV_NO_DUPLICATE:"prevunique"},this.openDB()},proto={constructor:IDBStore,version:"1.7.0",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var openRequest=this.idb.open(this.dbName,this.dbVersion),preventSuccessCallback=!1;openRequest.onerror=function(error){var gotVersionErr=!1;"error"in error.target?gotVersionErr="VersionError"==error.target.error.name:"errorCode"in error.target&&(gotVersionErr=12==error.target.errorCode),gotVersionErr?this.onError(new Error(
"The version number provided is lower than the existing one.")):this.onError(error)}.bind(this),openRequest.onsuccess=function(event){if(!preventSuccessCallback)if(this.db)this.onStoreReady();else if(this.db=event.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var emptyTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=emptyTransaction.objectStore(this.storeName);var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(!indexName)return preventSuccessCallback=!0,void this.onError(new Error(
"Cannot create index: No index name given."));if(this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(preventSuccessCallback=!0,this.onError(new Error('Cannot modify index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else preventSuccessCallback=!0,this.onError(new Error('Cannot create new index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),existingIndexes.length&&(preventSuccessCallback=!0,
this.onError(new Error('Cannot delete index(es) "'+existingIndexes.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),preventSuccessCallback||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),openRequest.onupgradeneeded=function(event){if(this.db=event.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=event.target.transaction.objectStore(this.storeName);else{var optionalParameters={autoIncrement:this.autoIncrement}
;null!==this.keyPath&&(optionalParameters.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,optionalParameters)}var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(indexName||(preventSuccessCallback=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(this.store.deleteIndex(indexName),this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,
multiEntry:indexData.multiEntry})),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})},this),existingIndexes.length&&existingIndexes.forEach(function(_indexName){this.store.deleteIndex(_indexName)},this)}.bind(this)},deleteDatabase:function(onSuccess,onError){if(this.idb.deleteDatabase){this.db.close();var deleteRequest=this.idb.deleteDatabase(this.dbName);deleteRequest.onsuccess=onSuccess,deleteRequest.onerror=onError}else onError(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(key,value,onSuccess,
onError){null!==this.keyPath&&(onError=onSuccess,onSuccess=value,value=key),onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var putRequest,hasSuccess=!1,result=null,putTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);return putTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},putTransaction.onabort=onError,putTransaction.onerror=onError,(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),putTransaction.objectStore(this.storeName).put(value)):putTransaction.objectStore(this.storeName).put(value,key)).onsuccess=function(event){hasSuccess=!0,
result=event.target.result},putRequest.onerror=onError,putTransaction},get:function(key,onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,getTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);getTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getTransaction.onabort=onError,getTransaction.onerror=onError;var getRequest=getTransaction.objectStore(this.storeName).get(key);return getRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getRequest.onerror=onError,getTransaction},remove:function(key,onSuccess,
onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,removeTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);removeTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},removeTransaction.onabort=onError,removeTransaction.onerror=onError;var deleteRequest=removeTransaction.objectStore(this.storeName).delete(key);return deleteRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},deleteRequest.onerror=onError,removeTransaction},batch:function(dataArray,onSuccess,onError){if(onError||(onError=defaultErrorHandler),onSuccess||(
onSuccess=defaultSuccessHandler),"[object Array]"!=Object.prototype.toString.call(dataArray))onError(new Error("dataArray argument must be of type Array."));else if(0===dataArray.length)return onSuccess(!0);var count=dataArray.length,called=!1,hasSuccess=!1,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(hasSuccess)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(){0!==--count||called||(hasSuccess=called=!0)};return dataArray.forEach(function(operation){var type=operation.type,key=operation.key,
value=operation.value,onItemError=function(err){batchTransaction.abort(),called||(called=!0,onError(err,type,key))};if("remove"==type){var deleteRequest=batchTransaction.objectStore(this.storeName).delete(key);deleteRequest.onsuccess=onItemSuccess,deleteRequest.onerror=onItemError}else if("put"==type){var putRequest;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),batchTransaction.objectStore(this.storeName).put(value)):batchTransaction.objectStore(this.storeName).put(value,key)).onsuccess=onItemSuccess,putRequest.onerror=onItemError}},this),batchTransaction},putBatch:function(dataArray,onSuccess,onError){var batchData=dataArray.map(
function(item){return{type:"put",value:item}});return this.batch(batchData,onSuccess,onError)},upsertBatch:function(dataArray,options,onSuccess,onError){"function"==typeof options&&(onError=onSuccess=options,options={}),onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),options||(options={}),"[object Array]"!=Object.prototype.toString.call(dataArray)&&onError(new Error("dataArray argument must be of type Array."));var keyField=options.keyField||this.keyPath,count=dataArray.length,called=!1,hasSuccess=!1,index=0,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(
){hasSuccess?onSuccess(dataArray):onError(!1)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){dataArray[index++][keyField]=event.target.result,0!==--count||called||(hasSuccess=called=!0)};return dataArray.forEach(function(record){var putRequest,key=record.key;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(record),batchTransaction.objectStore(this.storeName).put(record)):batchTransaction.objectStore(this.storeName).put(record,key)).onsuccess=onItemSuccess,putRequest.onerror=function(err){batchTransaction.abort(),called||(called=!0,onError(err))}},this),batchTransaction},removeBatch:function(
keyArray,onSuccess,onError){var batchData=keyArray.map(function(key){return{type:"remove",key:key}});return this.batch(batchData,onSuccess,onError)},getBatch:function(keyArray,onSuccess,onError,arrayType){if(onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),arrayType||(arrayType="sparse"),"[object Array]"!=Object.prototype.toString.call(keyArray))onError(new Error("keyArray argument must be of type Array."));else if(0===keyArray.length)return onSuccess([]);var data=[],count=keyArray.length,hasSuccess=!1,result=null,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY)
;batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){event.target.result||"dense"==arrayType?data.push(event.target.result):"sparse"==arrayType&&data.length++,0===--count&&(hasSuccess=!0,result=data)};return keyArray.forEach(function(key){var getRequest=batchTransaction.objectStore(this.storeName).get(key);getRequest.onsuccess=onItemSuccess,getRequest.onerror=function(err){!0,onError(result=err),batchTransaction.abort()}},this),batchTransaction},getAll:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(
onSuccess=defaultSuccessHandler);var getAllTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY),store=getAllTransaction.objectStore(this.storeName);return store.getAll?this._getAllNative(getAllTransaction,store,onSuccess,onError):this._getAllCursor(getAllTransaction,store,onSuccess,onError),getAllTransaction},_getAllNative:function(getAllTransaction,store,onSuccess,onError){var hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var getAllRequest=store.getAll();getAllRequest.onsuccess=function(event){hasSuccess=!0,
result=event.target.result},getAllRequest.onerror=onError},_getAllCursor:function(getAllTransaction,store,onSuccess,onError){var all=[],hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var cursorRequest=store.openCursor();cursorRequest.onsuccess=function(event){var cursor=event.target.result;cursor?(all.push(cursor.value),cursor.continue()):(hasSuccess=!0,result=all)},cursorRequest.onError=onError},clear:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,
result=null,clearTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);clearTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},clearTransaction.onabort=onError,clearTransaction.onerror=onError;var clearRequest=clearTransaction.objectStore(this.storeName).clear();return clearRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},clearRequest.onerror=onError,clearTransaction},_addIdPropertyIfNeeded:function(dataObj){void 0===dataObj[this.keyPath]&&(dataObj[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(indexName){
return this.store.indexNames.contains(indexName)},normalizeIndexData:function(indexData){indexData.keyPath=indexData.keyPath||indexData.name,indexData.unique=!!indexData.unique,indexData.multiEntry=!!indexData.multiEntry},indexComplies:function(actual,expected){return["keyPath","unique","multiEntry"].every(function(key){if("multiEntry"==key&&void 0===actual[key]&&!1===expected[key])return!0;if("keyPath"!=key||"[object Array]"!=Object.prototype.toString.call(expected[key]))return expected[key]==actual[key];var exp=expected.keyPath,act=actual.keyPath;if("string"==typeof act)return exp.toString()==act;if(
"function"!=typeof act.contains&&"function"!=typeof act.indexOf)return!1;if(act.length!==exp.length)return!1;for(var i=0,m=exp.length;i<m;i++)if(!(act.contains&&act.contains(exp[i])||act.indexOf(-1!==exp[i])))return!1;return!0})},iterate:function(onItem,options){var directionType="desc"==(options=mixin({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:defaultErrorHandler,limit:1/0,offset:0,allowItemRejection:!1},options||{})).order.toLowerCase()?"PREV":"NEXT";options.filterDuplicates&&(directionType+="_NO_DUPLICATE");var hasSuccess=!1,cursorTransaction=this.db.transaction([this.storeName],
this.consts[options.writeAccess?"READ_WRITE":"READ_ONLY"]),cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var recordCount=0;cursorTransaction.oncomplete=function(){hasSuccess?options.onEnd?options.onEnd():onItem(null):options.onError(null)},cursorTransaction.onabort=options.onError,cursorTransaction.onerror=options.onError;var cursorRequest=cursorTarget.openCursor(options.keyRange,this.consts[directionType]);return cursorRequest.onerror=options.onError,cursorRequest.onsuccess=function(event){var cursor=event.target.result;if(cursor)if(options.offset)cursor.advance(options.offset),
options.offset=0;else{var onItemReturn=onItem(cursor.value,cursor,cursorTransaction);options.allowItemRejection&&!1===onItemReturn||recordCount++,options.autoContinue&&(recordCount+options.offset<options.limit?cursor.continue():hasSuccess=!0)}else hasSuccess=!0},cursorTransaction},query:function(onSuccess,options){var result=[],processedItems=0;return(options=options||{}).autoContinue=!0,options.writeAccess=!1,options.allowItemRejection=!!options.filter,options.onEnd=function(){onSuccess(result,processedItems)},this.iterate(function(item){processedItems++;var accept=!options.filter||options.filter(item);return!1!==accept&&result.push(item),accept},options)},
count:function(onSuccess,options){var onError=(options=mixin({index:null,keyRange:null},options||{})).onError||defaultErrorHandler,hasSuccess=!1,result=null,cursorTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);cursorTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},cursorTransaction.onabort=onError,cursorTransaction.onerror=onError;var cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var countRequest=cursorTarget.count(options.keyRange);return countRequest.onsuccess=function(evt){hasSuccess=!0,result=evt.target.result},
countRequest.onError=onError,cursorTransaction},makeKeyRange:function(options){var keyRange,hasLower=void 0!==options.lower,hasUpper=void 0!==options.upper;switch(!0){case void 0!==options.only:keyRange=this.keyRange.only(options.only);break;case hasLower&&hasUpper:keyRange=this.keyRange.bound(options.lower,options.upper,options.excludeLower,options.excludeUpper);break;case hasLower:keyRange=this.keyRange.lowerBound(options.lower,options.excludeLower);break;case hasUpper:keyRange=this.keyRange.upperBound(options.upper,options.excludeUpper);break;default:throw new Error(
'Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return keyRange}},empty={};function mixin(target,source){var name,s;for(name in source)(s=source[name])!==empty[name]&&s!==target[name]&&(target[name]=s);return target}return IDBStore.prototype=proto,IDBStore.version=proto.version,IDBStore},this),define("core/store/indexeddb",["lodash","core/promise","lib/store/idbstore","lib/uuid"],function(_,Promise,IDBStore,uuid){"use strict";var knownStores,isIndexedDB2="getAll"in IDBObjectStore.prototype,openStore=function(storeName){return new Promise(function(resolve,reject){var store=new IDBStore({dbVersion:1,
storeName:storeName,storePrefix:"tao-store-",keyPath:"key",autoIncrement:!0,onStoreReady:function(){store.db.onversionchange=function(e){e&&e.newVersion||store.db.close()},resolve(store)},onError:reject})})},setEntry=function(store,key,value){return new Promise(function(resolve,reject){var entry={key:key,value:value};store.put(entry,function(returnKey){resolve(returnKey===key)},reject)})},getEntry=function(store,key){return new Promise(function(resolve,reject){store.get(key,function(entry){if(!entry||void 0===entry.value)return resolve(entry);resolve(entry.value)},reject)})},removeEntry=function(store,key){return new Promise(function(resolve,reject){
store.remove(key,function(result){resolve(!1!==result)},reject)})},getKnownStores=function(){return knownStores||(knownStores=openStore("index")),knownStores},deleteStore=function(store,storeName){return new Promise(function(resolve,reject){var success=function(){(function(storeName){return getKnownStores().then(function(store){return removeEntry(store,storeName)})})(storeName).then(function(){resolve(!0)}).catch(reject)};isIndexedDB2?store.deleteDatabase(success,reject):store.clear(success,reject)})},indexDbBackend=function(storeName){var innerStore,writePromise,getStore=function(){return innerStore||(innerStore=openStore(storeName).then(function(store){
return function(storeName){return getKnownStores().then(function(store){return setEntry(store,storeName,{name:storeName,lastOpen:Date.now()})})}(storeName).then(function(){return Promise.resolve(store)})})),innerStore},ensureSerie=function(getWritingPromise){return writePromise?new Promise(function(resolve,reject){var runWrite=function(){var p=getWritingPromise();(writePromise=p).then(resolve).catch(reject)};writePromise.then(runWrite).catch(runWrite)}):writePromise=getWritingPromise()};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return{getItem:function(key){return ensureSerie(function(){return getStore(
).then(function(store){return getEntry(store,key)})})},setItem:function(key,value){return ensureSerie(function(){return getStore().then(function(store){return setEntry(store,key,value)})})},removeItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return removeEntry(store,key)})})},getItems:function(){return ensureSerie(function(){return getStore().then(function(store){return function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){if(!_.isArray(entries))return resolve({});resolve(_.reduce(entries,function(acc,entry){return entry.key&&entry.value&&(acc[entry.key]=entry.value),acc},{}))},
reject)})}(store)})})},clear:function(){return ensureSerie(function(){return getStore().then(function(store){return new Promise(function(resolve,reject){store.clear(function(){resolve(!0)},reject)})})})},removeStore:function(){return ensureSerie(function(){return getStore().then(function(store){return deleteStore(store,storeName)})})}}};return indexDbBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var all=[];_.forEach(entries,function(entry){var storeName=entry&&entry.key;storeName&&all.push(openStore(storeName
).then(function(storeToRemove){if(!validate||validate(storeName,entry.value))return deleteStore(storeToRemove,storeName)}))}),Promise.all(all).then(resolve).catch(reject)},reject)})})},indexDbBackend.getAll=function(validate){return _.isFunction(validate)||(validate=function(){return!0}),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var storeNames=_(entries).filter(function(entry){return entry&&entry.key&&validate(entry.key,entry.value)}).map(function(entry){return entry.key}).value();return resolve(storeNames)},reject)})})},indexDbBackend.getStoreIdentifier=function(){return openStore("id"
).then(function(store){return getEntry(store,"id").then(function(id){return _.isEmpty(id)?(id=uuid(),setEntry(store,"id",id).then(function(){return id})):id})})},indexDbBackend}),define("core/store/memory",["lodash","core/promise","lib/uuid"],function(_,Promise,uuid){"use strict";var idStore,memoryStore={},memoryStorageBackend=function(storeName){if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return memoryStore[storeName]=memoryStore[storeName]||{},{getItem:function(key){return _.isPlainObject(memoryStore[storeName])?Promise.resolve(memoryStore[storeName][key]):Promise.resolve()},setItem:function(key,value){
return _.isPlainObject(memoryStore[storeName])||(memoryStore[storeName]={}),memoryStore[storeName][key]=value,Promise.resolve(!0)},removeItem:function(key){return memoryStore[storeName]=_.omit(memoryStore[storeName],key),Promise.resolve(void 0===memoryStore[storeName][key])},getItems:function(){return Promise.resolve(memoryStore[storeName])},clear:function(){return memoryStore[storeName]={},Promise.resolve(!0)},removeStore:function(){return memoryStore=_.omit(memoryStore,storeName),Promise.resolve(void 0===memoryStore[storeName])}}};return memoryStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),memoryStore=_.omit(
memoryStore,function(store,storeName){return!validate||validate(storeName)}),Promise.resolve(!0)},memoryStorageBackend.getAll=function(validate){var storeNames;return _.isFunction(validate)||(validate=null),storeNames=_(memoryStore).map(function(store,storeName){return storeName}).filter(function(storeName){return!validate||validate(storeName)}).value(),Promise.resolve(storeNames)},memoryStorageBackend.getStoreIdentifier=function(){return _.isEmpty(idStore)&&(idStore=uuid()),Promise.resolve(idStore)},memoryStorageBackend}),define("core/store",["lodash","moment","module","core/logger","core/promise","core/store/localstorage","core/store/indexeddb",
"core/store/memory"],function(_,moment,module,loggerFactory,Promise,localStorageBackend,indexedDBBackend,memoryBackend){"use strict";var store,supportsIndexedDB=!1,dectectionDone=!1,quotaChecked=!1,backendApi=["removeAll","getAll","getStoreIdentifier"],storeApi=["getItem","setItem","removeItem","getItems","clear","removeStore"],logger=loggerFactory("core/store"),config=_.defaults(module.config()||{},{lowSpaceRatio:80,invalidation:{staled:"P2W",oldster:"P2M"}}),isIndexDBSupported=function(){return dectectionDone?Promise.resolve(supportsIndexedDB):new Promise(function(resolve){var test,indexedDB,done=function(result){return dectectionDone=!0,resolve(
supportsIndexedDB=!!result)};try{if(!(indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB))return done(!1);(test=indexedDB.open("__feature_test",1)).onsuccess=function(){if(test.result)return test.result.close(),done(!0)},test.onerror=function(e){return e.preventDefault(),done(!1),!1}}catch(err){done(!1)}})},loadBackend=function(preselectedBackend){return isIndexDBSupported().then(function(){var backend=preselectedBackend||(supportsIndexedDB?indexedDBBackend:localStorageBackend);return _.isFunction(backend)?function(backend){return _.all(backendApi,function(method){return _.isFunction(backend[method]
)})}(backend)?(backend!==memoryBackend&&(!quotaChecked&&"storage"in window.navigator&&window.navigator.storage.estimate&&window.navigator.storage.estimate().then(function(estimate){var usedRatio=0;_.isNumber(estimate.usage)&&_.isNumber(estimate.quota)&&0<estimate.quota&&((usedRatio=estimate.usage/estimate.quota)>config.lowSpaceRatio?(logger.warn("The browser storage is getting low "+usedRatio.toFixed(2)+"% used",estimate),logger.warn("We will attempt to clean oldster databases in persistent backends"),store.cleanUpSpace(config.invalidation.oldster,[],localStorageBackend),store.cleanUpSpace(config.invalidation.oldster,[],indexedDBBackend)):logger.debug(
"Browser storage estimate : "+usedRatio.toFixed(2)+"% used",estimate))}).catch(function(err){logger.warn("Unable to retrieve quotas : "+err.message)}),quotaChecked=!0),backend):Promise.reject(new TypeError("This backend doesn't comply with the store backend API")):Promise.reject(new TypeError("No backend, no storage!"))})};return(store=function(storeName,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){var storage,storeInstance=backend(storeName);return storage=storeInstance,_.all(storeApi,function(method){return _.isFunction(storage[method])})?storeInstance:Promise.reject(new TypeError(
"The store doesn't comply with the Storage interface"))})}).backends={localStorage:localStorageBackend,indexedDB:indexedDBBackend,memory:memoryBackend},store.removeAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.removeAll(validate)})},store.cleanUpSpace=function(since,storeNamePattern,preselectedBackend){var tsThreshold;return tsThreshold=_.isNumber(since)&&0<since?since:(_.isString(since)||(since=config.invalidation.oldster),moment().subtract(moment.duration(since)).valueOf()),logger.info("Trying to remove stores lastly opened before "+tsThreshold+"("+since+")"),store.removeAll(function(
storeName,storeEntry){return!(!storeName||!storeEntry)&&!(storeNamePattern instanceof RegExp&&!storeNamePattern.test(storeName))&&_.isNumber(storeEntry.lastOpen)&&_.isNumber(tsThreshold)&&storeEntry.lastOpen<=tsThreshold},preselectedBackend)},store.getAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getAll(validate)})},store.getIdentifier=function(preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getStoreIdentifier()})},store}),define("core/cachedStore",["core/store"],function(store){"use strict";return function(storageName,storageKey){
return storageKey=storageKey||"cachedData",store(storageName).then(function(storage){return storage.getItem(storageKey).then(function(data){return data=data||{},{getItem:function(name){return data[name]},setItem:function(name,value){return data[name]=value,storage.setItem(storageKey,data)},removeItem:function(name){return data[name]=void 0,storage.setItem(storageKey,data)},clear:function(){return data={},storage.removeItem(storageKey)},removeStore:function(){return data={},storage.removeStore()}}})})}}),function(e){function f(a,c){function b(a){if(!this||this.constructor!==b)return new b(a);this._keys=[],this._values=[],this._itp=[],this.objectOnly=c,
a&&function(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}.call(this,a)}return c||w(a,"size",{get:x}),(a.constructor=b).prototype=a,b}function d(a){return this.has(a)&&(this._keys.splice(b,1),this._values.splice(b,1),this._itp.forEach(function(a){b<a[0]&&a[0]--})),-1<b}function m(a){return this.has(a)?this._values[b]:void 0}function n(a,c){if(this.objectOnly&&c!==Object(c))throw new TypeError("Invalid value used as weak collection key");if(c!=c||0===c)for(b=a.length;b--&&!y(a[b],c););else b=a.indexOf(c);return-1<b}function p(a){return n.call(this,this._values,a)}function q(a){return n.call(this,this._keys,a)}
function r(a,c){return this.has(a)?this._values[b]=c:this._values[this._keys.push(a)-1]=c,this}function t(a){return this.has(a)||this._values.push(a),this}function h(){(this._keys||0).length=this._values.length=0}function l(){return k(this._itp,this._values)}function k(a,c,b){var g=[0],e=!1;return a.push(g),{next:function(){var f,d=g[0];return!e&&d<c.length?(f=b?[c[d],b[d]]:c[d],g[0]++):(e=!0,a.splice(a.indexOf(g),1)),{done:e,value:f}}}}function x(){return this._values.length}function u(a,c){for(var b=this.entries();;){var d=b.next();if(d.done)break;a.call(c,d.value[1],d.value[0],this)}}var b,w=Object.defineProperty,y=function(a,b){return isNaN(a)?isNaN(b
):a===b};"undefined"==typeof WeakMap&&(e.WeakMap=f({delete:d,clear:h,get:m,has:q,set:r},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=f({delete:d,has:q,get:m,set:r,keys:function(){return k(this._itp,this._keys)},values:l,entries:function(){return k(this._itp,this._keys,this._values)},forEach:u,clear:h})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=f({has:p,add:t,delete:d,clear:h,keys:l,values:l,entries:function(){return k(this._itp,this._values,this._values)},forEach:u})),"undefined"==typeof WeakSet&&(e.WeakSet=f({delete:d,add:t,clear:h,has:p},!0))}(
"undefined"!=typeof exports&&"undefined"!=typeof global?global:window),define("lib/polyfill/es6-collections",function(){}),define("core/collections",["lib/polyfill/es6-collections"],function(){"use strict";return{Map:window.Map,Set:window.Set,WeakMap:window.WeakMap,WeakSet:window.WeakSet}}),define("core/providerRegistry",["lodash"],function(_){"use strict";return function(target,validator){var _providers={};return(target=target||{}).registerProvider=function(name,provider){var valid=!0;if(!_.isString(name)||name.length<=0)throw new TypeError("It is required to give a name to your provider.");if(!_.isPlainObject(provider)||!_.isFunction(provider.init)
)throw new TypeError("A provider is an object that contains at least an init function.");return(valid=validator&&_.isFunction(validator)?validator(provider):valid)&&(_providers[name]=provider),this},target.getProvider=function(providerName){var provider;if(!_providers||0===_.size(_providers))throw new Error("No provider registered");if(_.isString(providerName)&&0<providerName.length?provider=_providers[providerName]:1===_.size(_providers)&&(providerName=_.keys(_providers)[0],provider=_providers[providerName]),!provider)throw new Error("No candidate found for the provider");return provider},target.getAvailableProviders=function(){return _.keys(_providers)},
target.clearProviders=function(){return _providers={},this},target}}),define("core/delegator",["lodash"],function(_){"use strict";var defaults={name:"provided",eventifier:!0},_slice=[].slice;return function(api,provider,config){var extendedConfig=_.defaults(config||{},defaults),eventifier=!!(extendedConfig.eventifier&&api&&api.trigger),context=extendedConfig.forward?provider:api,defaultProvider=_.isFunction(extendedConfig.defaultProvider)?extendedConfig.defaultProvider:_.noop,wrapper=_.isFunction(extendedConfig.wrapper)?extendedConfig.wrapper:null,name=extendedConfig.name;return extendedConfig.required&&(defaultProvider=null),function(fnName){var response,
args;if(!provider)throw new Error("There is no "+name+" provider!");if(!_.isFunction(provider[fnName])&&!defaultProvider)throw new Error("There is no method called "+fnName+" in the "+name+" provider!");return args=_slice.call(arguments,1),response=(provider[fnName]||defaultProvider).apply(context,args),wrapper&&(response=wrapper(response)),eventifier&&api.trigger.apply(api,[fnName,response].concat(args)),response}}}),define("core/communicator",["lodash","core/promise","core/providerRegistry","core/delegator","core/eventifier"],function(_,Promise,providerRegistry,delegator,eventifier){"use strict";var defaults={timeout:3e4};return providerRegistry(
function communicatorFactory(providerName,config){var communicator,delegate,extendedConfig=_(config||{}).defaults(defaults).value(),states={},provider=communicatorFactory.getProvider(providerName);return(communicator=eventifier({init:function(){var self=this;return this.getState("ready")?Promise.resolve():delegate("init").then(function(){self.setState("ready").trigger("ready")})},destroy:function(){var self=this;return(self.getState("open")?self.close():Promise.resolve()).then(function(){return delegate("destroy").then(function(){self.trigger("destroyed"),states={}})})},open:function(){var self=this;return this.getState("open")?Promise.resolve():delegate(
"open").then(function(){self.setState("open").trigger("opened")})},close:function(){var self=this;return delegate("close").then(function(){self.setState("open",!1).trigger("closed")})},send:function(channel,message){var self=this;return this.getState("open")?delegate("send",channel,message).then(function(response){return self.trigger("sent",channel,message,response),Promise.resolve(response)}):Promise.reject()},channel:function(name,handler){if(!_.isString(name)||name.length<=0)throw new TypeError("A channel must have a name");if(!_.isFunction(handler))throw new TypeError("A handler must be attached to a channel");return this.on("channel-"+name,handler),this
},getConfig:function(){return extendedConfig},setState:function(name,state){return _.isUndefined(state)&&(state=!0),states[name]=!!state,this},getState:function(name){return!!states[name]}})).on("message",function(channel,message){this.trigger("channel-"+channel,message)}),delegate=delegator(communicator,provider,{name:"communicator"}),communicator})}),define("core/polling",["jquery","lodash","core/promise","core/eventifier"],function($,_,Promise,eventifier){"use strict";return function(config){var timer,promise,interval,max,iter,action,context,autoStart,state={},startTimer=function(){timer=setTimeout(iteration,interval),state.stopped=!1,state.pending=!0},
stopTimer=function(){clearTimeout(timer),timer=null,state.stopped=!0,state.pending=!1},iteration=function(){max&&max<=iter?polling.stop():(iter=(iter||0)+1,state.processing=!0,state.pending=!1,polling.trigger("call"),action.call(context,polling),promise||state.stopped||(state.processing=!1,startTimer()))},polling={async:function(){var resolver={};return(promise=new Promise(function(resolve,reject){resolver.resolve=resolve,resolver.reject=reject})).then(function(){promise=null,state.processing=!1,state.stopped||startTimer(),polling.trigger("resolved")}).catch(function(){promise=null,state.processing=!1,polling.stop(),polling.trigger("rejected")}),
polling.trigger("async",resolver),resolver},next:function(){var _next;return state.stopped&&(iter=0),stopTimer(),max&&max<=iter||(state.stopped=!1,promise?(_next=this.next.bind(this),promise.then(_next).catch(_next)):(this.trigger("next"),iteration())),this},start:function(){return timer||(iter=0,startTimer(),this.trigger("start")),this},stop:function(){return stopTimer(),this.trigger("stop"),this},setInterval:function(value){return interval=Math.abs(parseInt(value,10)||6e4),this.trigger("setinterval",interval),this},getInterval:function(){return interval},setAction:function(fn){return action=fn,this.trigger("setaction",action),this},getAction:function(){
return action},setContext:function(ctx){return context=ctx||this,this.trigger("setcontext",ctx),this},getContext:function(){return context},setMax:function(value){return max=Math.abs(parseInt(value,10)||0),this},getMax:function(){return max},getIteration:function(){return iter||0},is:function(stateName){return!!state[stateName]}};return eventifier(polling),interval=6e4,context=polling,action=null,autoStart=!(state.stopped=!0),iter=0,_.isFunction(config)&&(polling.setAction(config),config=null),_.isObject(config)&&(polling.setAction(config.action),polling.setInterval(config.interval||arguments[1]),polling.setContext(config.context),polling.setMax(config.max),
autoStart=!!config.autoStart),autoStart&&polling.start(),polling}}),define("core/tokenHandler",[],function(){"use strict";return function(initialToken){var token=initialToken||null;return{getToken:function(){var currentToken=token;return token=null,currentToken},setToken:function(newToken){return token=newToken,this}}}}),define("core/communicator/poll",["jquery","lodash","i18n","core/communicator","core/polling","core/promise","core/tokenHandler"],function($,_,__,communicator,pollingFactory,Promise,tokenHandlerFactory){"use strict";var defaults={timeout:3e4,interval:3e4,throttle:1e3};return{init:function(){var self=this,config=_.defaults(this.getConfig(),
defaults),tokenHandler=tokenHandlerFactory(config.token);return config.service?(this.messagesQueue=[],this.request=function(){return new Promise(function(resolve){var headers={},token=tokenHandler.getToken(),promises=[],request=_.map(self.messagesQueue,function(msg){return promises.push(msg.promise),{channel:msg.channel,message:msg.message}});self.messagesQueue=[],token&&(headers["X-Auth-Token"]=token),$.ajax({url:config.service,type:"POST",cache:!1,headers:headers,data:JSON.stringify(request),async:!0,dataType:"json",contentType:"application/json",timeout:config.timeout}).done(function(response){(response=response||{}).token&&tokenHandler.setToken(
response.token),_.forEach(promises,function(promise,idx){promise.resolve(response.responses&&response.responses[idx])}),self.polling.is("stopped")||_.forEach(response.messages,function(msg){msg.channel?self.trigger("message",msg.channel,msg.message):self.trigger("message","malformed",msg)}),self.trigger("receive",response),resolve()}).fail(function(jqXHR,textStatus,errorThrown){var error={source:"network",purpose:"communicator",context:this,sent:0<jqXHR.readyState,code:jqXHR.status,type:textStatus||"error",message:errorThrown||__("An error occurred!")};token&&tokenHandler.setToken(token),_.forEach(promises,function(promise){promise.reject(error)}),
self.trigger("error",error),resolve()})})},this.polling=pollingFactory({interval:config.interval,autoStart:!1,action:function(){var async=this.async();self.request().then(function(){async.resolve()})}}),this.throttledSend=_.throttle(function(){self.polling.next()},config.throttle),Promise.resolve()):Promise.reject(new Error("You must provide a service URL"))},destroy:function(){var self=this;return(this.polling?new Promise(function(resolve){self.polling.off("stop.api").on("stop.api",resolve).stop()}):Promise.resolve()).then(function(){self.polling=self.throttledSend=self.messagesQueue=null})},open:function(){var self=this;return this.polling?new Promise(
function(resolve){self.polling.off("next.api").on("next.api",resolve).start().next()}):Promise.reject(new Error("The communicator has not been properly initialized"))},close:function(){var self=this;return this.polling?new Promise(function(resolve){self.polling.off("stop.api").on("stop.api",resolve).stop()}):Promise.reject(new Error("The communicator has not been properly initialized"))},send:function(channel,message){var pending={channel:channel,message:message},promise=new Promise(function(resolve,reject){pending.promise={resolve:resolve,reject:reject}});return this.messagesQueue.push(pending),this.throttledSend(),promise}}}),define(
"core/communicator/request",["lodash","core/communicator/poll"],function(_,pollProvider){"use strict";return _.defaults({destroy:function(){return this.throttledSend=null,this.messagesQueue=null,Promise.resolve()},open:function(){return Promise.resolve()},close:function(){return Promise.resolve()},send:function(channel,message){var pending={channel:channel,message:message},promise=new Promise(function(resolve,reject){pending.promise={resolve:resolve,reject:reject}});return this.messagesQueue.push(pending),this.request(),promise}},pollProvider)}),define("core/connectivity",["core/eventifier"],function(eventifier){"use strict";var status=navigator.onLine,
connectivity=eventifier({setOnline:function(){return this.isOffline()&&(status=!0,this.trigger("online").trigger("change",status)),this},setOffline:function(){return this.isOnline()&&(status=!1,this.trigger("offline").trigger("change",status)),this},isOnline:function(){return status},isOffline:function(){return!status}});return window.addEventListener("online",function(){connectivity.setOnline()}),window.addEventListener("offline",function(){connectivity.setOffline()}),connectivity}),define("core/customEvent",[],function(){"use strict";var createEvent,dispatchEvent;createEvent=window.CustomEvent?function(eventName,data){var event;try{event=new CustomEvent(
eventName,{detail:data,bubbles:!0,cancelable:!0})}catch(e){(event=document.createEvent("CustomEvent")).initCustomEvent(eventName,!0,!0,data)}return event}:document.createEvent?function(eventName,data){var event=document.createEvent("Event");return event.initEvent(eventName,!0,!0),event.detail=data,event}:document.createEventObject?function(eventName,data){var event=document.createEventObject();return event.detail=data,event}:function(){},dispatchEvent=document.dispatchEvent?function(element,eventName,event){return!!element&&(element.dispatchEvent(event),!0)}:document.fireEvent?function(element,eventName,event){return!!element&&(element.fireEvent(
"on"+eventName,event),!0)}:function(){return!1};return function(element,eventName,data){var event=createEvent(eventName,data);return dispatchEvent(element,eventName,event)}}),define("core/dataattrhandler",["jquery","lodash"],function($,_){"use strict";var defaults={container:!1,listenerEvent:"click",useTarget:!0,bubbled:!1},letDefaultOn=[":radio",":checkbox"],shouldPreventDefault=function($elt){return!$elt.is(letDefaultOn.join(","))},DataAttrHandler=function(attrName,options){var self=this;this.options=_.defaults(options,defaults);var selector="[data-"+attrName+"]";if(!_.has(this.options,"namespace")||!_.isString(this.options.namespace))return $.error(
"The plugin data namespace option is required");this.options.container&&this.options.container.selector&&(selector=this.options.container.selector+" "+selector),this.options.inner&&(selector+=" "+this.options.inner),$(document).off(this.options.listenerEvent,selector).on(this.options.listenerEvent,selector,function(e){var $target,$outer,$elt=$(e.target);(!0===self.options.bubbled||$elt.is(selector))&&(void 0===$elt.data(attrName)&&(self.options.inner||self.options.bubbled)&&($elt=($outer=$elt).parents("[data-"+attrName+"]")),$target=!0===self.options.useTarget?DataAttrHandler.getTarget(attrName,$elt):self.options.inner?$outer:void 0,$elt.data(
self.options.namespace)||("function"==typeof self.createPlugin&&self.createPlugin($elt,$target),$elt.is(":radio")&&$elt.attr("name")&&$(':radio[name="'+$elt.attr("name")+'"]').not($elt).on(self.options.listenerEvent,function(e){"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault()})),"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault())})};return DataAttrHandler.prototype.init=function(cb){return this.createPlugin=cb,this},DataAttrHandler.prototype.trigger=function(cb){return this.callPluginMethod=cb,this},
DataAttrHandler.getTarget=function(attrName,$elt){var relativeRegex=/^(\+|>|~|:parent|<)/,$target=[],targetSelector=$elt.attr("data-"+attrName)||$elt.attr("href")||$elt.attr("attrName");if(!_.isEmpty(targetSelector)){var matches=relativeRegex.exec(targetSelector);if(null!==matches){var selector=targetSelector.replace(relativeRegex,"");$target=":parent"===matches[0]||"<"===matches[0]?$elt.parents(selector):"~"===matches[0]?$elt.siblings(selector):"+"===matches[0]?$elt.next(selector):$(selector,$elt)}else $target=$(targetSelector)}return $target},DataAttrHandler}),define("core/encoder/boolean",[],function(){return{encode:function(modelValue){
return!0===modelValue?"true":"false"},decode:function(nodeValue){return"true"===nodeValue}}}),define("core/encoder/number",[],function(){return{encode:function(modelValue){return modelValue+""},decode:function(nodeValue){return parseInt(nodeValue,10)}}}),define("core/encoder/float",[],function(){"use strict";return{encode:function(modelValue){return modelValue+""},decode:function(nodeValue){return parseFloat(nodeValue.replace(",","."))}}}),define("core/encoder/time",["moment"],function(moment){return{encode:function(modelValue){var seconds=parseInt(modelValue,10);isNaN(seconds)&&(seconds=0);var time=moment.duration(seconds,"seconds");return(10<=time.get(
"hours")?time.get("hours"):"0"+time.get("hours"))+":"+(10<=time.get("minutes")?time.get("minutes"):"0"+time.get("minutes"))+":"+(10<=time.get("seconds")?time.get("seconds"):"0"+time.get("seconds"))},decode:function(nodeValue){var time=moment(nodeValue,"HH:mm:ss");return time.seconds()+60*time.minutes()+3600*time.hours()}}}),define("core/encoder/array2str",["lodash"],function(_){return{encode:function(modelValue,glue){return glue=glue||",",modelValue.split(glue)},decode:function(nodeValue,glue){return glue=glue||",",_.isArray(nodeValue)?nodeValue.join(glue):nodeValue}}}),define("core/encoder/str2array",["lodash"],function(_){"use strict";return{
encode:function(modelValue,glue){return glue=glue||",",_.isArray(modelValue)?modelValue.join(glue):modelValue},decode:function(nodeValue,glue){glue=glue||",";var input=_.isString(nodeValue)?nodeValue.trim():nodeValue;return _.isEmpty(input)?[]:input.split(glue)}}}),define("core/encoder/entity",[],function(){"use strict";var guiltyChars=["&","<",">",'"'];return{encode:function(input){return(input+="").split("").map(function(character){return-1<guiltyChars.indexOf(character)?"&#"+character.charCodeAt()+";":character}).join("")},decode:function(input){return(input+="").replace(/&#(\d+);/g,function(matches,code){return String.fromCharCode(code)})}}}),define(
"core/encoder/encoders",["lodash","core/encoder/boolean","core/encoder/number","core/encoder/float","core/encoder/time","core/encoder/array2str","core/encoder/str2array","core/encoder/entity"],function(_,boolean,number,float,time,array2str,str2array,entity){"use strict";var extractArgs=function(name){var args=[],matches=[];return-1<name.indexOf("(")&&(matches=/\((.+?)\)/.exec(name))&&1<=matches.length&&(args=matches[1].split(",")),args},extractName=function(name){return-1<name.indexOf("(")?name.substr(0,name.indexOf("(")):name};return{number:number,float:float,time:time,boolean:boolean,array2str:array2str,str2array:str2array,entity:entity,register:function(
name,encode,decode){if(!_.isString(name))throw new Error("An encoder must have a valid name");if(!_.isFunction(encode))throw new Error("Encode must be a function");if(!_.isFunction(decode))throw new Error("Decode must be a function");this[name]={encode:encode,decode:decode}},encode:function(name,value){var encoder,args;return this[name=extractName(name)]?(args=[value],(encoder=this[name]).encode.apply(encoder,args.concat(extractArgs(name)))):value},decode:function(name,value){var decoder,args;return this[name=extractName(name)]?(args=[value],(decoder=this[name]).decode.apply(decoder,args.concat(extractArgs(name)))):value}}}),define("core/filter/filters",[
"lodash"],function(_){return{register:function(name,filter){if(!_.isString(name))throw new Error("An filter must have a valid name");if(!_.isFunction(filter))throw new Error("Filter must be a function");this[name]=filter},filter:function(name,value){return this[name]&&_.isArray(value)?_.filter(value,this[name]):value}}}),define("core/databinder",["jquery","lodash","handlebars","core/encoder/encoders","core/filter/filters"],function($,_,Handlebars,Encoders,Filters){"use strict";var locate=function(obj,path){var result,nodes=path.split("."),size=nodes.length,i=1;if(1<=size&&void 0!==(result=obj[nodes[0]]))for(i=1;i<size&&void 0!==(result=result[nodes[i]]);i++
);return result},update=function(obj,path,value){for(var nodes=path.split("."),size=nodes.length,i=0;i<size;i++){if(i===size-1)return void(obj[nodes[i]]=value);obj[nodes[i]]||(i+1<size&&/^\d$/.test(nodes[i+1])?obj[nodes[i]]=[]:obj[nodes[i]]={}),obj=obj[nodes[i]]}},remove=function(obj,path){for(var nodes=path.split("."),size=nodes.length,i=0;i<size;i++){if(i===size-1)return void(_.isArray(obj)?obj.splice(parseInt(nodes[i],10),1):delete obj[nodes[i]]);obj=obj[nodes[i]]}},resyncIndexes=function(obj,path,$node){var values=locate(obj,path);_.isArray(values)&&_.forEach(values,function(value,position){values[position].index=position,$node&&$node.children(
"[data-bind-index]").eq(position).attr("data-bind-index",position+"").data("bind-index",position+"")})},toBind=function($node,$container){if($node[0].type&&$node[0].name){if("radio"===$node[0].type)return $("[name='"+$node[0].name+"']",$container);if("checkbox"===$node[0].type)return $("[name='"+$node[0].name+"']",$container)}return $node},_bindOnce=function($node,$container,eventName,cb){var bounds;_unbind($node,$container,eventName),0<$node.length&&(!(bounds=$._data($node[0],"events"))||_(bounds[eventName]).where({namespace:"internalbinder"}).size()<1)&&toBind($node,$container).on(eventName+".internalbinder",function(e){$(this).is(e.target)&&cb.apply(null,
Array.prototype.splice.call(arguments,1))})},_unbind=function($node,$container,eventName){var bounds;0<$node.length&&(bounds=$._data($node[0],"events"))&&0<_(bounds[eventName]).where({namespace:"internalbinder"}).size()&&toBind($node,$container).off(eventName+".internalbinder")},DataBinder=function($container,model,options){var self=this;this.$container=$container,this.model=model||{},this.encoders=_.clone(Encoders),this.filters=_.clone(Filters),options&&(_.isPlainObject(options.encoders)&&_.forEach(options.encoders,function(encoder,name){self.encoders.register(name,encoder.encode,encoder.decode)}),_.isPlainObject(options.filters)&&_.forEach(options.filters,
function(filter,name){self.filters.register(name,filter)}),this.templates=options.templates||{})};return DataBinder.prototype._bindNode=function($node,path,model,domFirst){$node.data("bound")||(!0!==domFirst&&void 0!==locate(model,path)||update(model,path,this._getNodeValue($node)),this._setNodeValue($node,locate(model,path)),this._listenUpdates($node,path,model),this._listenRemoves($node,path,model),$node.data("bound",path))},DataBinder.prototype._bindArrayNode=function($node,path,model,domFirst){var self=this;if(!$node.data("bound")){var template,values=locate(model,path);$node.data("bind-tmpl")?"function"!=typeof(template=self.templates[$node.data(
"bind-tmpl")])&&0<$($node.data("bind-tmpl")).length&&(template=Handlebars.compile($($node.data("bind-tmpl")).html())):template=Handlebars.compile($node.html()),values&&_.isArray(values)?$node.data("bind-filter")&&(values=this.filters.filter($node.data("bind-filter"),values)):update(model,path,[]),$node.empty(),_.forEach(values,function(value,index){var $newNode;value.index=index,($newNode=$(template(value))).appendTo($node).filter(":first").attr("data-bind-index",index),self.bind($newNode,self.model,path+"."+index+".",domFirst),self._listenRemoves($newNode,path+"."+index,self.model)}),self._listenUpdates($node,path,model),self._listenAdds($node,path,model),
$node.data("bound",path)}},DataBinder.prototype._bindRmNode=function($node,path,model,domFirst){$node.data("bound")||(this._listenUpdates($node,path,model),!0===domFirst&&$node.trigger("change"),$node.data("bound",path))},DataBinder.prototype._listenUpdates=function($node,path,model){var self=this;_bindOnce($node,this.$container,"change",function(){if($node.is("[data-bind-each]"))!function order(obj,path,$node,retry){var values=locate(obj,path),changed=!1;_.isArray(values)&&($node.children("[data-bind-index]").each(function(position){var $item=$(this),index=parseInt($item.data("bind-index"),10);if(!values[index])return retry||_.delay(function(){order(obj,
path,$node,!0)},100),!1;values[index].index=position,changed=changed||position!==index}),!0===changed&&values.sort(function(a,b){return a.index-b.index}))}(model,path,$node),resyncIndexes(model,path,$node),$node.data("bind-each",path),self._rebind($node),self.$container.trigger("order.binder",[self.model]);else if($node.is("[data-bind-rm]")){!0===self._getNodeValue($node)&&remove(model,path),self.$container.trigger("delete.binder",[self.model])}else update(model,path,self._getNodeValue($node)),self._resyncIndexOnceRm($node,path),self.$container.trigger("update.binder",[self.model]);self.$container.trigger("change.binder",[self.model])})},
DataBinder.prototype._listenRemoves=function($node,path,model){var self=this;_bindOnce($node,this.$container,"delete",function(undoable){function doRemoval(){remove(model,path),self.$container.trigger("delete.binder",[self.model]).trigger("change.binder",[self.model])}!0===undoable?(self._resyncIndexOnceRm($node,path),$node.parent().off("deleted.deleter").on("deleted.deleter",function(){doRemoval()}),$node.is("[data-bind-index]")&&$node.off("undo.deleter").one("undo.deleter",function(){var $parentNode=$node.parent().closest("[data-bind-each]"),parentPath=path.replace(/\.[0-9]+$/,"");resyncIndexes(self.model,parentPath,$parentNode)})):(doRemoval(),
self._resyncIndexOnceRm($node,path))})},DataBinder.prototype._listenAdds=function($node,path,model){var self=this;_bindOnce($node,this.$container,"add",function(content,data){var size=$node.children("[data-bind-index]").length;$node.children().not("[data-bind-index]").each(function(){var $newNode=$(this),realPath=path+"."+size;$newNode.attr("data-bind-index",size),data&&update(self.model,realPath,data),self.bind($newNode,self.model,realPath+".",!0),self._listenRemoves($newNode,realPath,self.model)}),self.$container.trigger("add.binder",[self.model]).trigger("change.binder",[self.model]),$node.trigger("add.binder",[content,data])})},
DataBinder.prototype._resyncIndexOnceRm=function($node,path){if($node.is("[data-bind-index]")){var removedIndex=parseInt($node.data("bind-index"),10),$parentNode=$node.parent().closest("[data-bind-each]"),parentPath=path.replace(/\.[0-9]+$/,"");resyncIndexes(this.model,parentPath),$parentNode.children("[data-bind-index]").length-1!==removedIndex&&$parentNode.children("[data-bind-index]").filter(":gt("+removedIndex+")").each(function(){var $item=$(this),newIndex=parseInt($item.data("bind-index"),10)-1;$item.attr("data-bind-index",newIndex).data("bind-index",newIndex+"")}),this._rebind($parentNode,parentPath.replace($parentNode.data("bind-each"),""))}},
DataBinder.prototype._setNodeValue=function($node,value){void 0!==value&&($node.data("bind-encoder")&&(value=this.encoders.encode($node.data("bind-encoder"),value)),_.contains(["INPUT","SELECT","TEXTAREA"],$node[0].nodeName)?$node.is(":text, input[type='hidden'], textarea, select")?$node.val(value).trigger("change"):$node.is(":radio, :checkbox")&&toBind($node,this.$container).each(function(){var $elt=$(this);$elt.prop("checked",$elt.val()===value)}):$node.hasClass("button-group")?$node.find("[data-bind-value]").each(function(){var $elt=$(this);$elt.data("bind-value")+""===value?$elt.addClass("active"):$elt.removeClass("active")}):!0===$node.data("bind-html"
)?$node.html(value):$node.text(value))},DataBinder.prototype._getNodeValue=function($node){var value;return _.contains(["INPUT","SELECT","TEXTAREA"],$node[0].nodeName)?$node.is(":text, input[type='hidden'], textarea, select")?value=$node.val():$node.is(":radio, :checkbox")?value=toBind($node,this.$container).filter(":checked").val():$node.hasClass("button-group")&&$node.find("[data-bind-value]").each(function(){var $elt=$(this);$elt.hasClass("active")&&(value=$elt.data("bind-value")+"")}):value=!0===$node.data("bind-html")?$node.html():$node.text(),$node.data("bind-encoder")&&(value=this.encoders.decode($node.data("bind-encoder"),value)),value},
DataBinder.prototype.bind=function($elt,model,prefix,domFirst){var self=this;$elt=$elt||this.$container,model=model||this.model,prefix=prefix||"",domFirst=domFirst||!1;var bindElements=function($elt,dataAttrName,binding){var selector="[data-"+dataAttrName+"]";$elt.find(selector).andSelf().filter(selector).each(function(){var $node=$(this),path=prefix+$node.data(dataAttrName);self[binding]($node,path,model,domFirst)})};bindElements($elt,"bind-each","_bindArrayNode"),bindElements($elt,"bind-rm","_bindRmNode"),bindElements($elt,"bind","_bindNode")},DataBinder.prototype._rebind=function($elt,prefix){var self=this;if(prefix=prefix||"",$elt.is("[data-bind-each]")
){var path=prefix+$elt.data("bind-each"),values=locate(self.model,path);_.forEach(values,function(value,index){var $childNode=$elt.children('[data-bind-index="'+index+'"]');self._rebind($childNode,path+"."+index+"."),self._listenRemoves($childNode,path+"."+index,self.model)}),void 0!==values&&(self._listenUpdates($elt,path,self.model),self._listenAdds($elt,path,self.model))}else $elt.find("[data-bind]").each(function(){var $node=$(this),path=prefix+$node.data("bind");self._listenUpdates($node,path,self.model),self._listenRemoves($node,path,self.model)}),$elt.find("[data-bind-each]").each(function(){self._rebind($(this),prefix)})},DataBinder}),define(
"core/databindcontroller",["jquery","lodash","core/databinder"],function($,_,DataBinder){"use strict";return{takeControl:function($container,options){var control={},model={},binderOpts=_.pick(options,function(value,key){return"encoders"===key||"filters"===key||"templates"===key});return options.get&&(control.get=function(cb,errBack){return $.getJSON(options.get).done(function(data){data&&(new DataBinder($container,model=data,binderOpts).bind(),"function"==typeof cb&&cb(model))}),this}),options.save&&(control.save=function(cb,errBack){var allowSave=!0;return"function"==typeof options.beforeSave&&(allowSave=!!options.beforeSave(model)),!0===allowSave&&$.post(
options.save,{model:JSON.stringify(model)},function(data){data&&"function"==typeof cb&&cb(data)},"json").fail(function(){"function"==typeof errBack&&errBack()}),this}),control}}}),define("core/dataProvider/proxy",["lodash","core/delegator","core/eventifier","core/promise","core/providerRegistry","core/tokenHandler"],function(_,delegator,eventifier,Promise,providerRegistry,tokenHandlerFactory){"use strict";var _defaults={};return providerRegistry(function crudProxyFactory(proxyName,middlewares){var initConfig,proxyAdapter=crudProxyFactory.getProvider(proxyName),tokenHandler=tokenHandlerFactory(),extraParams={},initialized=!1,proxy=eventifier({init:function(
config){return delegate("init",initConfig=_.defaults({},config,_defaults)).then(function(){return initialized=!0,proxy})},destroy:function(){return delegate("destroy").then(function(){initialized=!1,initConfig=null,extraParams={}})},create:function(params){return delegate("create",getParams(params))},read:function(params){return delegate("read",getParams(params))},write:function(params){return delegate("write",getParams(params))},remove:function(params){return delegate("remove",getParams(params))},action:function(name,params){return delegate("action",name,getParams(params))},addExtraParams:function(params){return _.isPlainObject(params)&&_.merge(extraParams,
params),this},getTokenHandler:function(){return tokenHandler},getConfig:function(){return initConfig},getMiddlewares:function(){return middlewares},setMiddlewares:function(handler){return middlewares=handler,this}}),delegateProxy=delegator(proxy,proxyAdapter,{name:"proxy",wrapper:function(response){return Promise.resolve(response)}});function getParams(params){var mergedParams=_.merge({},params,extraParams);return extraParams={},mergedParams}function delegate(fnName){var request={command:fnName,params:Array.prototype.slice.call(arguments,1)};return initialized||"init"===fnName?delegateProxy.apply(null,arguments).then(function(data){
return middlewares?middlewares.apply(request,data):data}).catch(function(err){return proxy.trigger("error",err),Promise.reject(err)}):Promise.reject(new Error("Proxy is not properly initialized or has been destroyed!"))}return proxy})}),define("core/dataProvider/request",["jquery","lodash","i18n","core/promise"],function($,_,__,Promise){"use strict";var createError=function(response,fallbackMessage,httpCode){var err;return response&&response.errorCode?(err=new Error(response.errorCode+" : "+(response.errorMsg||response.errorMessage||response.error))).response=response:err=new Error(fallbackMessage),httpCode&&(err.code=httpCode),err};return function(url,data,
method,headers,background){return new Promise(function(resolve,reject){if(_.isEmpty(url))return reject(new TypeError("At least give a URL..."));$.ajax({url:url,type:method||"GET",dataType:"json",headers:headers,data:data,global:!background}).done(function(response,status,xhr){return 204===xhr.status||response&&204===response.errorCode?resolve():response&&!0===response.success?resolve(response.data):reject(createError(response,__("The server has sent an empty response"),xhr.status))}).fail(function(xhr){var response;try{response=JSON.parse(xhr.responseText)}catch(parseErr){_.noop()}return reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status)
)})})}}),define("core/dataProvider/proxy/ajax",["lodash","core/dataProvider/request","core/promise"],function(_,request,Promise){"use strict";var _defaults={noCache:!0,noToken:!1,actions:{}};function rejectAction(type,action,params){return Promise.reject({success:!1,type:type,action:action,params:params})}return{name:"ajax",init:function(config){this.processRequest=function(action,params,method){var token,descriptor=config.actions[action],headers={},tokenHandler=this.getTokenHandler();return _.isString(descriptor)&&(descriptor={url:descriptor}),descriptor&&descriptor.url?_.isFunction(descriptor.validate)&&!1===descriptor.validate(params)?rejectAction(
"invalid",action,params):(config.noCache&&(params=_.merge({_:(new Date).getTime()},params)),config.noToken||(token=tokenHandler.getToken())&&(headers["X-Auth-Token"]=token),request(descriptor.url,params,descriptor.method||method,headers).then(function(data){return data&&data.token&&tokenHandler.setToken(data.token),data}).catch(function(err){var t=err.response&&(err.response.token||err.response.data&&err.response.data.token);return t?tokenHandler.setToken(t):config.noToken||tokenHandler.setToken(token),Promise.reject(err)})):rejectAction("notimplemented",action,params)},_.defaults(config,_defaults)},destroy:function(){this.processRequest=null},
create:function(params){return this.processRequest("create",params,"POST")},read:function(params){return this.processRequest("read",params,"GET")},write:function(params){return this.processRequest("write",params,"POST")},remove:function(params){return this.processRequest("remove",params,"GET")},action:function(actionName,params){return this.processRequest(actionName,params,"POST")}}}),define("core/encoder/array",["lodash"],function(_){return{encode:function(modelValue,glue){return glue=glue||",",_.isArray(modelValue)?modelValue.join(glue):modelValue},decode:function(nodeValue,glue){return glue=glue||",",nodeValue.split(glue)}}}),define("core/errorHandler",[
"lodash"],function(_){"use strict";return{_contexts:{},getContext:function(name){if(_.isString(name)&&name.length)return this._contexts[name]=this._contexts[name]||{typedHandlers:{},globalHandler:null},this._contexts[name]},listen:function(name,type,handler){var context=this.getContext(name);context&&(_.isFunction(type)&&!handler&&(handler=type),_.isFunction(handler)&&(_.isString(type)&&!_.isEmpty(type)?context.typedHandlers[type]=handler:context.globalHandler=handler))},throw:function(name,err){var context=this.getContext(name);if(context)return _.isString(err)&&(err=new Error(err)),_.isFunction(context.typedHandlers[err.name]
)&&context.typedHandlers[err.name](err),_.isFunction(context.globalHandler)&&context.globalHandler(err),!1},reset:function(name){this._contexts[name]&&(this._contexts=_.omit(this._contexts,name))}}}),define("core/history",["jquery"],function($){"use strict";var ns="history";return{fixBrokenBrowsers:function(){var enabledSelector=["input","textarea","[contenteditable=true]"].join(","),preventBackSpace=function(e){return 8!==e.keyCode},preventBackSpacePropag=function(e){return 8!==e.keyCode||e.target.readonly||e.target.disbaled||e.stopPropagation(),!0};$(document).off("."+ns),$(document).off("."+ns,enabledSelector),$(document).on("keydown."+ns,preventBackSpace
),$(document).on("keypress."+ns,preventBackSpace),$(document).on("keydown."+ns,enabledSelector,preventBackSpacePropag),$(document).on("keypress."+ns,enabledSelector,preventBackSpacePropag)}}}),define("urlParser",["lodash"],function(_){"use strict";var urlParts=["hash","host","hostname","pathname","port","protocol","search"];function UrlParser(url){var detachedAnchor;this.url=url,(detachedAnchor=document.createElement("a")).href=url,this.data=_.pick(detachedAnchor,urlParts),this.params=UrlParser.extractParams(this.data.search)}return UrlParser.extractParams=function(search){var params={};return search.replace(/^\?/,"").replace(/([^=&]+)=([^&]*)/g,function(m,
key,value){params[decodeURIComponent(key)]=decodeURIComponent(value)}),params},UrlParser.prototype.get=function(what){return!!_.contains(urlParts,what)&&this.data[what]},UrlParser.prototype.getParams=function(){return this.params},UrlParser.prototype.setParams=function(params){_.isObject(params)&&(this.params=params)},UrlParser.prototype.addParam=function(key,value){key&&(this.params[key]=value)},UrlParser.prototype.getPaths=function(){return this.data.pathname.replace(/^\/|\/$/g,"").split("/")},UrlParser.prototype.getUrl=function(exclude){var url="";return exclude=exclude||[],this.data&&(this.data.hostname&&!_.contains(exclude,"host")&&(url+=(
this.data.protocol?this.data.protocol:"http:")+"//"+this.data.hostname.replace(/\/$/,""),this.data.port&&80!==this.data.port&&"80"!==this.data.port&&"0"!==this.data.port&&(url+=":"+this.data.port)),/\/$/.test(url)||/^\//.test(this.data.pathname)||(url+="/"),url+=this.data.pathname,this.params&&!_.contains(exclude,"params")&&(url+="?",_.forEach(this.params,function(value,key){url+=encodeURIComponent(key)+"="+encodeURIComponent(value)+"&"}),url=url.substring(0,url.length-1)),this.data.hash&&!_.contains(exclude,"hash")&&(url+=this.data.hash)),url},UrlParser.prototype.getBaseUrl=function(){var baseUrl=this.getUrl(["params","hash"]),paths=this.getPaths(),
lastPart=paths[paths.length-1];return 0<paths.length&&/\.[a-z]+$/.test(lastPart)&&(baseUrl=baseUrl.replace(lastPart,"").replace(/\/\/$/,"/")),baseUrl},UrlParser.prototype.checkCORS=UrlParser.prototype.sameDomain=function(url){var parsedUrl;if(void 0===url&&(parsedUrl=new UrlParser(window.location)),"string"==typeof url&&(parsedUrl=new UrlParser(url)),url instanceof UrlParser&&(parsedUrl=url),!(parsedUrl instanceof UrlParser))throw new TypeError("Invalid url format");return"data:"===this.get("protocol")||"data:"===parsedUrl.get("protocol")||this.get("protocol")===parsedUrl.get("protocol")&&this.get("hostname")===parsedUrl.get("hostname")&&this.get("port"
)===parsedUrl.get("port")},UrlParser}),define("router",["jquery","lodash","context","urlParser","async"],function($,_,context,UrlParser,async){"use strict";var router={dispatch:function(urls,cb){var size,routed=!1,counter=0;_.isArray(urls)||(urls=[urls]),size=urls.length,async.whilst(function(){return!1===routed&&counter<size},function(done){_dispatch(urls[counter],function(){_.isFunction(cb)&&cb(),routed=!0},done),counter++},function(err){if(err)return console.error(err)})}},_dispatch=function(url,cb,done){var routeModule,routeBundle,route=function(url){var route,parser=new UrlParser(url),paths=parser.getPaths();return 3<=paths.length&&(route={
action:paths[paths.length-1],module:paths[paths.length-2],extension:paths[paths.length-3],params:parser.getParams()}),route}(url);route&&(routeBundle="tao"===route.extension?"loader/tao.min":route.extension+"/loader/"+route.extension+".min",require([routeBundle],function(){routeModule="tao"===route.extension?"controller/routes":route.extension+"/controller/routes",require([routeModule],function(routes){var moduleRoutes,action,dependencies=[],styles=[],mapStyle=function(style){return"css!"+route.extension+"Css/"+style};if(routes&&routes[route.module]){if((moduleRoutes=routes[route.module]).deps&&(dependencies=dependencies.concat(moduleRoutes.deps)),
moduleRoutes.css&&(styles=_.isArray(moduleRoutes.css)?moduleRoutes.css:[moduleRoutes.css],dependencies=dependencies.concat(_.map(styles,mapStyle))),(moduleRoutes.actions&&moduleRoutes.actions[route.action]||moduleRoutes[route.action])&&(action=moduleRoutes.actions[route.action]||moduleRoutes[route.action],(_.isString(action)||_.isArray(action))&&(dependencies=dependencies.concat(action)),action.deps&&(dependencies=dependencies.concat(action.deps)),action.css&&(styles=_.isArray(action.css)?action.css:[action.css],dependencies=dependencies.concat(_.map(styles,mapStyle)))),dependencies=_.map(dependencies,function(dep){return/^controller/.test(dep
)&&"tao"!==route.extension?route.extension+"/"+dep:dep}),!_.isEmpty(route.params)){var moduleConfig={};_.forEach(dependencies,function(dependency){moduleConfig[dependency]=_.merge(_.clone(requirejs.s.contexts._.config.config[dependency]||{}),route.params)}),requirejs.config({config:moduleConfig})}0<dependencies.length&&require(dependencies,function(){_.forEach(arguments,function(dependency){dependency&&_.isFunction(dependency.start)&&dependency.start()}),_.isFunction(cb)&&cb()})}_.isFunction(done)&&done()})}))};return router}),define("core/statifier",["lodash"],function(_){"use strict";return function(target){var states={},statesApi={getState:function(name){
return!!states[name]},setState:function(name,value){return void 0===value&&(value=!0),states[name]=!!value,this},clearStates:function(){return states={},this},getStates:function(){return _.reduce(states,function(result,state,key){return state&&result.push(key),result},[])}};return target=target||{},_(statesApi).functions().forEach(function(method){target[method]=function(){var args=[].slice.call(arguments);return statesApi[method].apply(target,args)}}),target}}),define("core/historyRouter",["jquery","lodash","router","core/eventifier","core/statifier","core/promise"],function($,_,router,eventifier,statifier,Promise){"use strict";var historyRouter,location=(
window.history.location||window.location)+"";return function(){var pendingPromise;return historyRouter||(historyRouter=eventifier(statifier({redirect:function(url){return this.pushState(url)},forward:function(url){var state=_.isString(url)?{url:url}:url;return window.history.replaceState(state,"",window.location+""),this.dispatch(state,!1)},replace:function(url){return this.dispatch(url,!0)},dispatch:function(state,replace){var self=this;function doDispatch(){return new Promise(function(resolve,reject){if(_.isString(state)&&(state={url:state}),!state||!state.url)return reject(new TypeError("The state should contain an URL!"));self.setState("dispatching"
).trigger("dispatching",state.url),!0===replace&&window.history.replaceState(state,"",state.url),router.dispatch(state.url,function(){self.trigger("dispatched",state.url).setState("dispatching",!1),resolve(state.url)})})}return pendingPromise=pendingPromise?pendingPromise.then(doDispatch).catch(doDispatch):doDispatch()},pushState:function(state){return _.isString(state)&&(state={url:state}),window.history.pushState(state,"",state.url),this.dispatch(state)}})),window.history.replaceState({url:location},"",location),$(window).on("popstate",function(){historyRouter.dispatch(window.history.state)}),historyRouter.on("dispatch",function(state){
state&&this.pushState(state)}),historyRouter)}}),define("core/logger/console",["lodash"],function(_){"use strict";var config={level:"info"},mapping={trace:"debug",debug:"debug",info:"info",warn:"warn",error:"error",fatal:"error"};return{setConfig:function(newConfig){config=_.defaults(newConfig||{},config)},log:function(record){var level=record.level;this.checkMinLevel(config.level,level)&&(_.isFunction(window.console[mapping[level]])?record.err?window.console[mapping[level]].call(window.console,record.name,record.msg,record.err,record):window.console[mapping[level]].call(window.console,record.name,record.msg,record):window.console.log("["+level.toUpperCase(
)+"]",record.name,record.msg,record))}}}),define("util/url",["lodash","context"],function(_,context){"use strict";var parsers={absolute:/^(?:[a-z]+:)?\/\//i,base64:/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/,query:/(?:^|&)([^&=]*)=?([^&]*)/g,url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/};return{parse:function(url){var matches,keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","queryString","hash"],i=keys.length,parsed=Object.create({toString:function(){return this.source}});if(
parsed.base64=parsers.base64.test(url),parsed.base64)parsed.source=url;else{for(matches=parsers.url.exec(url);i--;)parsed[keys[i]]=matches[i]||"";parsed.query={},parsed.queryString.replace(parsers.query,function($0,$1,$2){$1&&(parsed.query[$1]=$2)})}return parsed},isAbsolute:function(url){return"object"==typeof url&&url.hasOwnProperty("source")?url.source!==url.relative:"string"==typeof url?parsers.absolute.test(url):void 0},isRelative:function(url){var absolute=this.isAbsolute(url);if("boolean"==typeof absolute)return!absolute},isBase64:function(url){return"object"==typeof url&&url.hasOwnProperty("source"
)?url.base64:"string"==typeof url?parsers.base64.test(url):void 0},encodeAsXmlAttr:function(uri){return/[<>&']+/.test(uri)?encodeURIComponent(uri):uri},build:function(path,params){var url,hasQueryString,queryString="";return path&&(_.isString(path)&&(url=path),_.isArray(path)&&(url="",_.forEach(path,function(chunk){/\/$/.test(url)&&/^\//.test(chunk)?url+=chunk.substr(1):""===url||/\/$/.test(url)||/^\//.test(chunk)?url+=chunk:url+="/"+chunk})),_.isPlainObject(params)&&(hasQueryString=-1<url.indexOf("?"),queryString=_.reduce(params,function(acc,value,key){return _.isEmpty(acc)&&!hasQueryString||(acc+="&"),acc+=encodeURIComponent(key)+"="+encodeURIComponent(
value)},queryString),_.isEmpty(queryString)||(hasQueryString||(url+="?"),url+=queryString))),url},route:function(action,controller,extension,params,rootUrl){var routeParts=[extension,controller,action];if(_.some(routeParts,function(value){return _.isEmpty(value)||!_.isString(value)}))throw new TypeError("All parts are required to build an URL");return rootUrl=rootUrl||context&&context.root_url,this.build([rootUrl].concat(routeParts),params)}}}),define("core/logger/http",["lodash","jquery","util/url"],function(_,$,url){"use strict";var config,debouncedFlush,defaultConfig={url:url.route("log","Log","tao"),level:"warning",delay:500},logQueue=[];function push(
message){logQueue.push(message)}function flush(){var messages=logQueue;logQueue=[],function(messages){$.ajax({url:config.url,type:"POST",cache:!1,data:{messages:JSON.stringify(messages)},dataType:"json",global:!1,error:function(){_.forEach(flush,function(message){push(message)})}})}(messages)}return debouncedFlush=_.debounce(flush,defaultConfig.delay),{setConfig:function(newConfig){config=_.defaults(newConfig||{},defaultConfig),_.isArray(config.url)&&(config.url=url.route.apply(url,config.url)),debouncedFlush=_.debounce(flush,config.delay)},log:function(message){this.checkMinLevel(config.level,message.level)&&(push(message),debouncedFlush())}}}),define(
"core/middleware",["lodash","core/eventifier","core/promise"],function(_,eventifier,Promise){"use strict";return function(){var middlewares={},middlewareHandler=eventifier({use:function(command){var queue=command&&_.isString(command)?command:"all",list=middlewares[queue]||[];return middlewares[queue]=list,_.forEach(arguments,function(cb){_.isFunction(cb)&&(list.push(cb),middlewareHandler.trigger("add",command,cb))}),this},apply:function(request,response,context){var queue,list,stack=(queue=request.command,list=middlewares[queue]||[],middlewares.all&&(list=list.concat(middlewares.all)),list),pointer=0;return new Promise(function(resolve,reject){
!function next(){var middleware=stack[pointer++];middleware?Promise.resolve(middleware.call(context,request,response)).then(function(res){!1!==res?next():resolve()}).catch(reject):resolve()}()}).then(function(){return!1===response.success?Promise.reject(response):(middlewareHandler.trigger("applied",request,response,context),response)}).catch(function(err){return middlewareHandler.trigger("failed",request,response,context),Promise.reject(err)})}});return middlewareHandler}}),define("json!core/mimetype/categories.json",function(){return{video:{category:"media",mimes:["application/ogg","video/*"],extensions:["avi","mp4","ogg","mpeg","flv"]},audio:{
category:"media",mimes:["audio/*"],extensions:["mp3","wav","aac"]},image:{category:"media",mimes:["image/*","application/x-gzip"],extensions:["png","jpg","jpeg","gif","svg","svgz","ico"]},flash:{category:"media",mimes:["application/x-shockwave-flash"],extensions:["flv","swf"]},geogebra:{category:"media",mimes:["application/vnd.geogebra.file","application/vnd.geogebra.tool"],extensions:["ggb","ggt"]},rdf:{category:"sources",mimes:["application/rdf+xml"],extensions:["rdf"]},xml:{category:"sources",mimes:["application/xml","application/xml-dtd","text/xml"],extensions:["xml","dtd","qti"]},html:{category:"sources",mimes:["text/html","text/xhtml",
"application/xhtml+xml","application/qti+xml"],extensions:["html","htm","html5","xhtml"]},font:{category:"sources",mimes:["application/font-woff"],extensions:["woff","eot","ttf"]},js:{category:"sources",mimes:["application/javascript","application/json","text/javascript"],extensions:["js","json"]},css:{category:"sources",mimes:["text/css"],extensions:["css","sass","scss","less"]},shell:{category:"sources",mimes:["application/x-sh"],extensions:["sh"]},mathml:{category:"sources",mimes:["application/mathml+xml"],extensions:["mathml"]},pdf:{category:"document",mimes:["application/pdf"],extensions:["pdf"]},office:{category:"document",mimes:[
"application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/vnd.ms-excel","application/msword"],extensions:["doc","odt","docx","xls","xlsx","ods","ppt","pptx","odp"]},text:{category:["document"],mimes:["text/*"],extensions:["txt","csv"]},archive:{category:"archive",mimes:["application/zip","application/gzip",
"application/rar","application/x-7z-compressed","application/x-bzip","application/x-bzip2"],extensions:["zip","gz","bz","bz2","rar","p7z","7z"]},generic:{category:"generic",mimes:["application/octet-stream","application/force-download","application/x-force-download"]}}}),define("json!core/mimetype/extensions.json",function(){return{txt:"text/plain",htm:"text/html",html:"text/html",xhtml:"application/xhtml+xml",php:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"text/xml",rdf:"text/xml",swf:"application/x-shockwave-flash",flv:"video/x-flv",csv:"text/csv",rtx:"text/richtext",rtf:"text/rtf",png:"image/png",jpe:"image/jpeg",
jpeg:"image/jpeg",jpg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",ico:"image/vnd.microsoft.icon",tiff:"image/tiff",tif:"image/tiff",svg:"image/svg+xml",svgz:"image/svg+xml",zip:"application/zip",rar:"application/x-rar-compressed",exe:"application/x-msdownload",msi:"application/x-msdownload",cab:"application/vnd.ms-cab-compressed",mp3:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",aac:"audio/aac",qt:"video/quicktime",mov:"video/quicktime",mp4:"video/mp4",webm:"video/webm",ogv:"video/ogg",pdf:"application/pdf",psd:"image/vnd.adobe.photoshop",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",doc:"application/msword",
rtf:"application/rtf",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet",woff:"application/x-font-woff",eot:"application/vnd.ms-fontobject",ttf:"application/x-font-ttf"}}),define("core/mimetype",["jquery","lodash","json!core/mimetype/categories.json","json!core/mimetype/extensions.json"],function($,_,categories,extensions){"use strict";var mimetypeHelper={getResourceType:function(url,callback){return $.ajax({type:"HEAD",async:!0,url:url,success:function(message,text,jqXHR){var mime=jqXHR.getResponseHeader("Content-Type");callback&&callback(null,
mime)},error:function(jqXHR){var error=jqXHR.status||404;callback&&callback(error)}}),this},getFileType:function(file){var type,ext,mime=file.mime;return mime&&((type=_.findKey(categories,{mimes:[mime]}))||(type=_.findKey(categories,{mimes:[mime.replace(/\/.*$/,"/*")]}))),type||(ext=getFileExtension(file.name))&&(type=_.findKey(categories,{extensions:[ext]})),type},match:function(type,validTypes){var checkType=type.replace(/^["']+|['"]+$/g,""),starType=checkType.replace(/\/.*$/,"/*");return _.contains(validTypes,checkType)||_.contains(validTypes,starType)},getCategory:function(type){if(categories[type])return categories[type].category},getMimeType:function(
file){var ext,type=file.type,category=mimetypeHelper.getFileType({name:file.name,mime:type});return type&&!type.match(/invalid/)&&"generic"!==category?type:(ext=getFileExtension(file.name))&&extensions[ext]?extensions[ext]:type}};function getFileExtension(fileName){var extMatch=fileName.match(/\.([0-9a-z]+)(?:[\?#]|$)/i);if(extMatch&&1<extMatch.length)return extMatch[1]}return mimetypeHelper}),define("core/moduleLoader",["lodash","core/promise"],function(_,Promise){"use strict";return function(requiredModules,validate,specs){var loaded={},modules={},excludes=[],bundles=[],loader={addList:function(moduleList){return _.forEach(moduleList,this.add,this),this},
add:function(def){if(_.isEmpty(def.module)||!_.isString(def.module))throw new TypeError("An AMD module must be defined");if(_.isEmpty(def.category)||!_.isString(def.category))throw new TypeError("Providers must belong to a category");return modules[def.category]=modules[def.category]||[],_.isNumber(def.position)?modules[def.category][def.position]=def.module:"prepend"===def.position||"before"===def.position?modules[def.category].unshift(def.module):modules[def.category].push(def.module),def.bundle&&!_.contains(bundles,def.bundle)&&bundles.push(def.bundle),this},append:function(def){return this.add(_.merge({position:"append"},def))},prepend:function(def){
return this.add(_.merge({position:"prepend"},def))},remove:function(module){return excludes.push(module),this},load:function(loadBundles){var self=this,dependencies=_(modules).values().flatten().uniq().difference(excludes).value(),loadModules=function(amdModules){return _.isArray(amdModules)&&amdModules.length?new Promise(function(resolve,reject){require(amdModules,function(){resolve([].slice.call(arguments))},reject)}):Promise.resolve()};return loadModules(loadBundles?bundles:[]).then(function(){return loadModules(dependencies)}).then(function(loadedModules){return _.forEach(dependencies,function(dependency,index){var module=loadedModules[index],
category=_.findKey(modules,function(val){return _.contains(val,dependency)});if(!validate(module))throw new TypeError("Invalid module");_.isString(category)&&(loaded[category]=loaded[category]||[],loaded[category].push(module))}),self.getModules()})},getModules:function(category){return _.isString(category)?loaded[category]||[]:_(loaded).values().flatten().uniq().value()},getCategories:function(){return _.keys(loaded)}};return validate=_.isFunction(validate)?validate:_.isPlainObject,_.forEach(requiredModules,function(moduleList,category){if(_.isEmpty(category)||!_.isString(category))throw new TypeError("Modules must belong to a category");if(!_.isArray(
moduleList))throw new TypeError("A list of modules must be an array");if(!_.all(moduleList,validate))throw new TypeError("The list does not contain valid modules");loaded[category]?loaded[category]=loaded[category].concat(moduleList):loaded[category]=moduleList}),specs&&_(specs).functions().forEach(function(method){loader[method]=function(){return specs[method].apply(loader,[].slice.call(arguments))}}),loader}}),define("core/mouseEvent",[],function(){"use strict";var dispatchEvent,allowedEvents=["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","show"]
;return dispatchEvent=document.dispatchEvent?function(element,eventName,event){return!!element&&(element.dispatchEvent(event),!0)}:document.fireEvent?function(element,eventName,event){return!!element&&(element.fireEvent("on"+eventName,event),!0)}:function(){return!1},function(element,eventName,eventOptions){var event;return-1!==allowedEvents.indexOf(eventName)&&(event=function(eventName,eventOptions){var event;try{event=new MouseEvent(eventName,eventOptions)}catch(e){(event=document.createEvent("MouseEvents")).initMouseEvent(eventName,eventOptions.bubbles||!1,eventOptions.cancelable||!1,eventOptions.view||null,eventOptions.detail||0,eventOptions.screenX||0,
eventOptions.screenY||0,eventOptions.clientX||0,eventOptions.clientY||0,eventOptions.ctrlKey||!1,eventOptions.altKey||!1,eventOptions.shiftKey||!1,eventOptions.metaKey||!1,eventOptions.button||0,eventOptions.relatedTarget||null)}return event}(eventName,eventOptions),dispatchEvent(element,eventName,event))}}),define("core/plugin",["lodash","core/delegator","core/promise"],function(_,delegator,Promise){"use strict";return function(provider,defaults){var pluginName;if(!_.isPlainObject(provider)||!_.isString(provider.name)||_.isEmpty(provider.name)||!_.isFunction(provider.init))throw new TypeError(
"A plugin should be defined at least by a name property and an init method");return pluginName=provider.name,defaults=defaults||{},function(host,areaBroker,config){var plugin,delegate,states={},pluginContent={};if(!_.isObject(host)||!_.isFunction(host.on)||!_.isFunction(host.trigger))throw new TypeError("A plugin host should be a valid eventified object");return config=_.defaults(config||{},defaults),delegate=delegator(plugin={install:function(){var self=this;return delegate("install").then(function(){self.trigger("install")})},init:function(content){var self=this;return states={},content&&(pluginContent=content),delegate("init",content).then(function(){
self.setState("init",!0).trigger("init")})},render:function(){var self=this;return delegate("render").then(function(){self.setState("ready",!0).trigger("render").trigger("ready")})},finish:function(){var self=this;return delegate("finish").then(function(){self.setState("finish",!0).trigger("finish")})},destroy:function(){var self=this;return delegate("destroy").then(function(){config={},states={},self.setState("init",!1),self.trigger("destroy")})},trigger:function(name){var args=[].slice.call(arguments,1);return host.trigger.apply(host,["plugin-"+name+"."+pluginName,plugin].concat(args)),this},getHost:function(){return host},getAreaBroker:function(){
return areaBroker},getConfig:function(){return config},setConfig:function(name,value){return _.isPlainObject(name)?config=_.defaults(name,config):config[name]=value,this},getState:function(name){return!!states[name]},setState:function(name,active){if(!_.isString(name)||_.isEmpty(name))throw new TypeError("The state must have a name");return states[name]=!!active,this},getContent:function(){return pluginContent},setContent:function(content){return pluginContent=content,this},getName:function(){return pluginName},show:function(){var self=this;return delegate("show").then(function(){self.setState("visible",!0).trigger("show")})},hide:function(){var self=this
;return delegate("hide").then(function(){self.setState("visible",!1).trigger("hide")})},enable:function(){var self=this;return delegate("enable").then(function(){self.setState("enabled",!0).trigger("enable")})},disable:function(){var self=this;return delegate("disable").then(function(){self.setState("enabled",!1).trigger("disable")})}},provider,{eventifier:!1,wrapper:function(response){return Promise.resolve(response)}}),_.isString(defaults.hostName)&&!_.isEmpty(defaults.hostName)&&(plugin["get"+defaults.hostName.charAt(0).toUpperCase()+defaults.hostName.slice(1)]=plugin.getHost),plugin}}}),define("core/pluginifier",["jquery","lodash"],function($,_){
"use strict";var basePlugin={options:function(dataNs,ns,options){return this.each(function(){var $elt=$(this),currentOptions=$elt.data(dataNs);currentOptions&&$elt.data(dataNs,_.merge(currentOptions,options))})},disable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.addClass(options.disableClass||"disabled").trigger("disable."+ns)})},enable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.removeClass(options.disableClass||"disabled").trigger("enable."+ns)})}};return{register:function(pluginName,plugin,config){var ns=(config=config||{}
).ns||pluginName.toLowerCase(),dataNs=config.dataNs||"ui."+ns,expose=config.expose||[];return _.isFunction($.fn[pluginName])?$.error("A plugin named "+pluginName+" is already registered"):_.isPlainObject(plugin)&&_.isFunction(plugin.init)?(_.assign(plugin,_.transform(basePlugin,function(result,prop,key){_.isFunction(prop)&&(result[key]=_.partial(basePlugin[key],dataNs,ns))})),_.forEach(expose,function(toExposeName){var privateMethod=toExposeName,publicMethod=toExposeName;/^_/.test(expose)?publicMethod=publicMethod.replace(/^_/,""):privateMethod="_"+privateMethod,_.isFunction(plugin[privateMethod])&&!_.isFunction(plugin[publicMethod])&&(
plugin[publicMethod]=function(){var returnValue,args=Array.prototype.slice.call(arguments,0);return this.each(function(){returnValue=plugin[privateMethod].apply(plugin,[$(this)].concat(args))}),returnValue||this})}),void($.fn[pluginName]=function(method){if(plugin[method]){if(!/^_/.test(method))return plugin[method].apply(this,Array.prototype.slice.call(arguments,1));$.error("Trying to call a private method `"+method+"`")}else if("object"==typeof method||!method)return plugin.init.apply(this,arguments);$.error("Method "+method+" does not exist on plugin")})):$.error("The object to register as a jQuery plugin must be a plain object with an `init` method.")}}}
),define("core/pluginLoader",["lodash","core/moduleLoader"],function(_,moduleLoaderFactory){"use strict";return function(requiredPlugins){return moduleLoaderFactory(requiredPlugins,_.isFunction,{getPlugins:function(category){return this.getModules(category)}})}}),define("core/providerLoader",["lodash","core/moduleLoader"],function(_,moduleLoaderFactory){"use strict";function validateProvider(provider){return _.isPlainObject(provider)&&_.isFunction(provider.init)&&_.isString(provider.name)&&!_.isEmpty(provider.name)}return function(requiredProviders){return moduleLoaderFactory(requiredProviders,validateProvider,{getProviders:function(category){
return this.getModules(category)}})}}),define("core/requireIfExists",["core/promise"],function(Promise){"use strict";return function(uri){return new Promise(function(resolve){require([uri],resolve,function(err){var failedId=err.requireModules&&err.requireModules[0];if(failedId!==uri)throw err;requirejs.undef(failedId),define(failedId,function(){return null}),require([failedId],resolve)})})}}),define("core/taskQueue",["lodash","core/promise","core/eventifier","core/dataProvider/request","core/polling"],function(_,Promise,eventifier,request,polling){"use strict";var _defaults={url:{}};return function(config){config=_.defaults(config||{},_defaults);var poll,
pollingIntervals=[{iteration:10,interval:1e3},{iteration:10,interval:1e4},{iteration:10,interval:3e4},{iteration:0,interval:6e4}],api=eventifier({getStatus:function(taskId){var status;if(!config.url||!config.url.status)throw new TypeError("config.url.status is not configured while getStatus() is being called");return(status=request(config.url.status,{taskId:taskId}).then(function(taskData){return taskData&&taskData.status?Promise.resolve(taskData):Promise.reject(new Error("failed to get task data"))})).catch(function(err){api.trigger("error",err)}),status},pollStatus:function(taskId){var loop=0;if(!config.url||!config.url.status)throw new TypeError(
"config.url.status is not configured while getStatus() is being called");var _updateInterval=function(pollingInstance){var pollingInterval;loop?loop--:(pollingInterval=pollingIntervals.shift())&&pollingInterval.iteration&&pollingInterval.interval&&(loop=pollingInterval.iteration,pollingInstance.setInterval(pollingInterval.interval))};return api.pollStop(),poll=polling({action:function(){var done=this.async();api.getStatus(taskId).then(function(taskData){"finished"===taskData.status?(api.trigger("finished",taskData),poll.stop()):(api.trigger("running",taskData),_updateInterval(poll),done.resolve())}).catch(function(){done.reject()})}}),_updateInterval(poll),
poll.start(),api.trigger("pollStart"),api},pollStop:function(){return poll&&(poll.stop(),api.trigger("pollStop")),api},remove:function(taskId){var status;if(!config.url||!config.url.remove)throw new TypeError("config.url.remove is not configured while remove is being called");return(status=request(config.url.remove,{taskId:taskId}).then(function(taskData){return taskData&&"archived"===taskData.status?Promise.resolve(taskData):Promise.reject(new Error("removed task status should be archived"))})).catch(function(res){api.trigger("error",res)}),status}});return api}}),define("core/timer",[],function(){"use strict";return function(config){
var initConfig=config||{},begin=now(),last=begin,duration=initConfig.startDuration||0,state={},timer={start:function(startDuration){return begin=now(),last=begin,duration=startDuration||0,state.running=!0,state.started=!0,this},tick:function(){var elapsed,timestamp=now();return state.running&&(elapsed=timestamp-last,last=timestamp),elapsed},pause:function(){return state.running&&(duration+=now()-begin,state.running=!1),this},resume:function(){return state.running||(begin=now(),last=begin,state.started=!0,state.running=!0),this},stop:function(){return state.running&&(duration+=now()-begin),state.running=!1,state.started=!1,this},getDuration:function(){
return state.running?duration+(now()-begin):duration},is:function(stateName){return!!state[stateName]},add:function(time){return time=parseFloat(time),duration+=time,last-=time,this},sub:function(time){return time=parseFloat(time),duration-=time,last+=time,this}};function now(){return window.performance.now()}return!1===initConfig.autoStart||timer.start(initConfig.startDuration),timer}}),define("core/validator/Report",[],function(){var Report=function(type,data){this.type=type,this.data=data};return Report.prototype.isError=function(){return"failure"===this.type||"error"===this.type},Report}),define("core/validator/validators",["jquery","lodash","i18n"],
function($,_,__){"use strict";var validators={numeric:{name:"numeric",message:__("must be numeric"),options:{},validate:function(value,callback){var parsedValue=parseFloat(value),r=parsedValue.toString()===value.toString()&&_.isNumber(parsedValue)&&!_.isNaN(parsedValue);"function"==typeof callback&&callback.call(null,r)}},notEmpty:{name:"notEmpty",message:__("this is required"),options:{},validate:function(value,callback){var r;r=!!_.isNumber(value)||!_.isEmpty(value),"function"==typeof callback&&callback.call(null,r)}},pattern:{name:"pattern",message:__("does not match"),options:{pattern:"",modifier:"igm"},validate:function(value,callback,options){
var regex=new RegExp(options.pattern,options.modifier||""),r=null!==value.match(regex);return"function"==typeof callback&&callback.call(null,r),r}},length:{name:"length",message:__("required length"),options:{min:0,max:0},validate:function(value,callback,options){var r=!1;value.length>=options.min&&(r=!options.max||value.length<=options.max),"function"==typeof callback&&callback.call(null,r)}},fileExists:{name:"fileExists",message:__("no file not found in this location"),options:{baseUrl:""},validate:function(value,callback,options){value?new RegExp(
"^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])?)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(value)||/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/.test(value)?callback(!0):$.ajax({type:"HEAD",url:options.baseUrl+encodeURIComponent(value),success:function(){callback(!0)},error:function(jqXHR,textStatus,errorThrown){callback(!1)}}):callback(!1)}},validRegex:{name:"validRegex",message:__("invalid regular expression"),options:{},validate:function(value,callback){if("function"==typeof callback){var valid=!1;if(""!==value)try{new RegExp("^"+value+"$"),valid=!0}catch(e){valid=!1
}else valid=!0;callback(valid)}}}};return{validators:validators,register:function(name,validator,force){if(_.isPlainObject(name)&&name.name&&!validator&&(name=(validator=name).name),!_.isString(name)||_.isEmpty(name))throw new Error("Please name your validator");if(!_.isObject(validator)||!_.isString(validator.message)||!_.isFunction(validator.validate))throw new Error("A validator must be an object with a message and a validate method, but given : "+JSON.stringify(validator));validators[name]&&!force||(validators[name]=validator)}}}),define("core/validator/Validator",["lodash","async","core/validator/Report","core/validator/validators"],function(_,async,
Report,validators){"use strict";var _defaultOptions={lazy:!1},Validator=function(rules,options){this.options=_.merge(_.cloneDeep(_defaultOptions),options),this.rules=[],this.addRules(rules)};return Validator.getDefaultOptions=function(){return _.clone(_defaultOptions)},Validator.prototype.validate=function(value,arg1,arg2){var callback,callstack=[],options=_.cloneDeep(this.options);return _.isFunction(arg1)?callback=arg1:_.isObject(arg1)&&(_.merge(options,arg1),_.isFunction(arg2)&&(callback=arg2)),_.each(this.rules,function(rule){var message,validatorOptions={};callstack.push(function(cb){!function(value,rule,callback,options){options=_.merge(_.cloneDeep(
rule.options),options),rule.validate(value,callback,options)}(value,rule,function(success){if(success)cb(null,new Report("success",{validator:rule.name}));else{message=rule.options.message||rule.message;var report=new Report("failure",{validator:rule.name,message:message});options.lazy?cb(new Error("lazy mode"),report):cb(null,report)}},validatorOptions)})}),async.series(callstack,function(err,results){_.isFunction(callback)&&callback(results)}),this},Validator.prototype.addRule=function(rule){var _rules=validators.validators;return _.isString(rule)&&_rules[rule]?this.rules.push(_rules[rule]):(rule=function(rule){var ret=null,_rules=validators.validators
;return _.isString(rule)&&_rules[rule]?ret=_rules[rule]:_.isObject(rule)&&rule.name&&(_rules[rule.name]?ret=_.merge(_.cloneDeep(_rules[rule.name]),rule):rule.message&&_.isFunction(rule.validate)&&(ret=rule)),ret}(rule))&&this.rules.push(rule),this},Validator.prototype.addRules=function(rules){var _this=this;return _.each(rules,function(rule){_this.addRule(rule)}),this},Validator}),define("tpl!ui/component/tpl/component",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="component"></div>'})}),define(
"ui/component",["jquery","lodash","core/eventifier","tpl!ui/component/tpl/component"],function($,_,eventifier,defaultTpl){"use strict";var _slice=[].slice;function delegatedResize(){var width=this.config.width,height=this.config.height,$container=this.getContainer(),$element=this.getElement();$container&&("auto"===width&&(width=$container.width()),"auto"===height&&(height=$container.height())),$element&&(_.isNumber(width)&&$element.css({width:width+"px"}),_.isNumber(height)&&$element.css({height:height+"px"})),this._width=width,this._height=height}return function(specs,defaults){var $container,componentTpl=defaultTpl,componentState={},componentApi={
init:function(config){return this.config=_(config||{}).omit(function(value){return null==value}).defaults(defaults||{}).value(),componentState={},this.trigger("init"),this.config.renderTo&&($container=$(this.config.renderTo),this.render()),this},destroy:function(){return this.trigger("destroy"),this.$component&&this.$component.remove(),this.$component=null,componentState={},this},render:function(container){return container&&($container=$(container)),this.$component=$(componentTpl(this.config)),$container&&(this.config.replace&&$container.empty(),$container.append(this.$component)),this.setState("rendered",!0),delegatedResize.call(this),this.trigger("render",
this.$component),this},setSize:function(width,height){return this.config.width=width,this.config.height=height,this.is("rendered")&&delegatedResize.call(this),this.trigger("setsize",width,height),this},getSize:function(){if(this.is("rendered"))return{width:this._width||0,height:this._height||0}},getOuterSize:function(includeMargin){var $component;if(this.is("rendered"))return $component=this.getElement(),includeMargin=includeMargin||!1,{width:Math.round($component.outerWidth(includeMargin)),height:Math.round($component.outerHeight(includeMargin))}},show:function(){return this.trigger("show",this),this.setState("hidden",!1)},hide:function(){
return this.trigger("hide",this),this.setState("hidden",!0)},enable:function(){return this.trigger("enable",this),this.setState("disabled",!1)},disable:function(){return this.trigger("disable",this),this.setState("disabled",!0)},is:function(state){return!!componentState[state]},setState:function(state,flag){return flag=!!flag,componentState[state]=flag,this.$component&&this.$component.toggleClass(state,flag),this.trigger("state",state,flag,this),this},getContainer:function(){return $container},getElement:function(){return this.$component},getTemplate:function(){return componentTpl},setTemplate:function(template){var tpl=template||defaultTpl
;return componentTpl=tpl,_.isFunction(componentTpl)||(componentTpl=function(){return tpl}),this.trigger("template",componentTpl),this},getConfig:function(){return this.config||defaults||{}}};return specs&&_(specs).functions().forEach(function(method){componentApi[method]=function(){return specs[method].apply(componentApi,_slice.call(arguments))}}),eventifier(componentApi)}}),define("tpl!ui/actionbar/tpl/main",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",
escapeExpression=this.escapeExpression,self=this;function program6(depth0,data){return" conditional hidden"}function program8(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program10(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'"></span>'}return buffer+='<aside class="action-bar ',((stack1=helpers.if.call(depth0,depth0&&depth0.vertical,{hash:{},inverse:self.program(3,function(depth0,data){return"horizontal-action-bar"},data),fn:self.program(1,function(depth0,data){return"vertical-action-bar"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' clearfix">\n    ',((stack1=helpers.each.call(depth0,depth0&&depth0.buttons,{hash:{},inverse:self.noop,fn:self.program(5,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-info small ',((stack1=helpers.if.call(depth0,depth0&&depth0.conditional,{hash:{},
inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n        ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n    </button>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</aside>\n"})}),define("ui/actionbar",["jquery","lodash","i18n","ui/component","tpl!ui/actionbar/tpl/main"],function($,_,__,component,mainTpl){"use strict";var actionbar={getButton:function(id){if(this.is("rendered"))return this.buttons[id]},getButtonElement:function(id){if(this.is("rendered"))return this.controls.$buttons[id]},showButton:function(id){
var $btn=this.getButtonElement(id);return $btn&&$btn.removeClass("hidden"),this},hideButton:function(id){var $btn=this.getButtonElement(id);return $btn&&$btn.addClass("hidden"),this},toggleButton:function(id,condition){var $btn=this.getButtonElement(id);return $btn&&(void 0!==condition&&(condition=!condition),$btn.toggleClass("hidden",condition)),this},showConditionals:function(){return this.is("rendered")&&this.controls.$conditional.removeClass("hidden"),this},hideConditionals:function(){return this.is("rendered")&&this.controls.$conditional.addClass("hidden"),this},toggleConditionals:function(condition){return this.is("rendered")&&(void 0!==condition&&(
condition=!condition),this.controls.$conditional.toggleClass("hidden",condition)),this},showAll:function(){return this.is("rendered")&&this.controls.$all.removeClass("hidden"),this},hideAll:function(){return this.is("rendered")&&this.controls.$all.addClass("hidden"),this},toggleAll:function(condition){return this.is("rendered")&&(void 0!==condition&&(condition=!condition),this.controls.$all.toggleClass("hidden",condition)),this}};return function(config){return component(actionbar).setTemplate(mainTpl).on("destroy",function(){this.buttons=null,this.controls=null}).on("render",function(){var self=this,$component=this.getElement();this.setState("horizontal",
$component.hasClass("horizontal-action-bar")),this.setState("vertical",$component.hasClass("vertical-action-bar")),this.buttons={},this.controls={$buttons:{},$conditional:$component.find("button.conditional"),$all:$component.find("button")},_.forEach(this.config.buttons,function(button){self.buttons[button.id]=button,self.controls.$buttons[button.id]=$component.find('[data-control="'+button.id+'"]')}),this.$component.on("click","button",function(e){var buttonId=$(this).closest("button").data("control"),button=self.getButton(buttonId);e.preventDefault(),button&&button.action&&button.action.call(self,buttonId,button),self.trigger("button",buttonId,button)})}
).init(config)}}),define("ui/adder",["jquery","lodash","handlebars","core/pluginifier","core/dataattrhandler"],function($,_,Handlebars,Pluginifier,DataAttrHandler){"use strict";var ns="adder",dataNs="ui."+ns,positions=["append","prepend"],defaults={bindEvent:"click",disableClass:"disabled",position:"append",templateData:function(dataCallback){dataCallback({})}},Adder={init:function(options){if("function"==typeof(options=_.defaults(options||{},defaults)).content)options._template=options.content;else{var $content=options.content;"SCRIPT"===$content.prop("tagName")&&"text/template"===$content.attr("type")?options._template=Handlebars.compile($content.html()
):options._html=$content.html()}return _.contains(positions,options.position)?this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),Adder._add($elt)}),$elt.trigger("create."+ns))}):$.error("Unsupported position option")},_add:function($elt){var options=$elt.data(dataNs),$target=options.target,position=options.position+"To",applyTemplate=function($content,position,$target,data){$content[position]($target),$target.trigger("add",[$content,data]),$elt.trigger("add."+ns,[$target,$content,data])};"function"==typeof options._template?options.templateData(
function(data){applyTemplate($(options._template(data)),position,$target,data)}):applyTemplate($(options._html),position,$target)},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Adder,{expose:["add"]}),function($container){new DataAttrHandler("add",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$elt.adder({target:$target,bindEvent:!1,content:$($elt.attr("data-content"))})}).trigger(function($elt){$elt.adder("add")})}}),define(
"lib/unmatrix/unmatrix",[],function(){"use strict";function parse(str){if("none"===str)return{translateX:0,translateY:0,rotate:0,skew:0,scaleX:1,scaleY:1};var m=function(str){var m=[];if(window.WebKitCSSMatrix)return[(m=new window.WebKitCSSMatrix(str)).a,m.b,m.c,m.d,m.e,m.f];var n,rdigit=/[\d\.\-]+/g;for(;n=rdigit.exec(str);)m.push(+n);return m}(str),A=m[0],B=m[1],C=m[2],D=m[3];if(A*D==B*C)throw new Error("transform#unmatrix: matrix is singular");var scaleX=Math.sqrt(A*A+B*B),skew=(A/=scaleX)*C+(B/=scaleX)*D;C-=A*skew,D-=B*skew;var scaleY=Math.sqrt(C*C+D*D);return skew/=scaleY,A*(D/=scaleY)<B*(C/=scaleY)&&(A=-A,B=-B,skew=-skew,scaleX=-scaleX),{
translateX:m[4],translateY:m[5],rotate:rtod(Math.atan2(B,A)),skew:rtod(Math.atan(skew)),scaleX:round(scaleX),scaleY:round(scaleY)}}function rtod(radians){return round(180*radians/Math.PI)}function round(n){return Math.round(100*n)/100}return function(input){return parse("string"!=typeof input?(el=input,(_style=window.getComputedStyle(el)).getPropertyValue("transform")||_style.getPropertyValue("-webkit-transform")||_style.getPropertyValue("-ms-transform")):input);var el,_style}}),define("ui/transformer",["jquery","lodash","lib/unmatrix/unmatrix"],function($,_,_unmatrix){"use strict";var ns="transformer",vendorPrefixes=["webkit","ms"],prefix=function(){
var i=vendorPrefixes.length,style=window.getComputedStyle(document.body,null);if(style.getPropertyValue("transform"))return"";for(;i--;)if(void 0!==style[vendorPrefixes[i]+"Transform"])return"-"+vendorPrefixes[i]+"-"}(),_getTransformation=function(elem){var _style=window.getComputedStyle(elem,null),matrix=_style.getPropertyValue("transform")||_style.getPropertyValue("-webkit-transform")||_style.getPropertyValue("-ms-transform");return{matrix:matrix,obj:_unmatrix(matrix)}};function _transform($elem,transforms){var oriTrans,elem,_style,cssObj={},defaults=_unmatrix("none"),classNames=[];transforms=function(transforms){for(var xy=["translate","scale"],
i=xy.length;i--;)transforms[xy[i]]&&(_.isArray(transforms[xy[i]])&&2===transforms[xy[i]].length?(transforms[xy[i]+"X"]=transforms[xy[i]][0],transforms[xy[i]+"Y"]=transforms[xy[i]][1]):(transforms[xy[i]+"X"]=transforms[xy[i]],transforms[xy[i]+"Y"]=transforms[xy[i]]),delete transforms[xy[i]]);return transforms}(transforms),$elem.data("oriTrans")||((oriTrans=_getTransformation($elem[0])).origin=(elem=$elem[0],(_style=window.getComputedStyle(elem,null)).getPropertyValue("transform-origin")||_style.getPropertyValue("-webkit-transform-origin")||_style.getPropertyValue("-ms-transform-origin")),$elem.data("oriTrans",oriTrans)),cssObj[prefix+"transform"]="",_.forIn(
transforms,function(value,key){if(_.isNaN(value))return!0;value=parseFloat(value),$elem.data("oriTrans").obj[key]!==defaults[key]&&(-1<key.indexOf("scale")?value*=$elem.data("oriTrans").obj[key]:value+=$elem.data("oriTrans").obj[key]),void 0!==defaults[key]&&value!==defaults[key]&&(-1<key.indexOf("translate")?value+="px":("rotate"===key||-1<key.indexOf("skew"))&&(value+="deg"),cssObj[prefix+"transform"]+=key+"("+value+") ",classNames.push("transform-"+key.replace(/(X|Y)$/i,"")))}),cssObj[prefix+"transform"]=$.trim(cssObj[prefix+"transform"]),$elem.css(cssObj),$elem.removeClass("transform-translate transform-rotate transform-skew transform-scale"),
$elem.addClass(_.unique(classNames).join(" ")),$elem.trigger("transform."+ns,transforms)}return{translate:function($elem,valueX,valueY){_transform($elem,{translateX:valueX,translateY:valueY=valueY||valueX})},translateXY:function($elem,valueX,valueY){_transform($elem,{translateX:valueX,translateY:valueY})},translateX:function($elem,value){_transform($elem,{translateX:value})},translateY:function($elem,value){_transform($elem,{translateY:value})},rotate:function($elem,value){_transform($elem,{rotate:value})},skew:function($elem,value){_transform($elem,{skew:value})},scale:function($elem,valueX,valueY){_transform($elem,{scaleX:valueX,
scaleY:valueY=valueY||valueX})},scaleX:function($elem,value){_transform($elem,{scaleX:value})},scaleY:function($elem,value){_transform($elem,{scaleY:value})},reset:function($elem){var cssObj={};$elem.data("oriTrans")&&(cssObj[prefix+"transform"]=$elem.data("oriTrans").matrix,cssObj[prefix+"transform-origin"]=$elem.data("oriTrans").origin,$elem.css(cssObj),$elem.removeClass("transform-translate transform-rotate transform-skew transform-scale"),$elem.trigger("reset."+ns,$elem.data("oriTrans")))},getTransformation:function(elem){return elem instanceof $&&(elem=elem[0]),_getTransformation(elem)},setTransformOrigin:function($elem,value){var cssObj={}
;cssObj[prefix+"transform-origin"]=value,$elem.css(cssObj)}}}),define("ui/component/placeable",["lodash","ui/transformer"],function(_,transformer){"use strict";var defaultConfig={initialX:0,initialY:0},placeableComponent={_translate:function(xOffsetAbsolute,yOffsetAbsolute){var $element=this.getElement();transformer.translateXY($element,xOffsetAbsolute,yOffsetAbsolute),this._translateX=xOffsetAbsolute,this._translateY=yOffsetAbsolute,this._x=xOffsetAbsolute+this.config.initialX,this._y=yOffsetAbsolute+this.config.initialY,this.trigger("move",this._x,this._y)},center:function(){var centerX,centerY,$container=this.getContainer(),$element=this.getElement()
;return this.is("rendered")&&!this.is("disabled")&&$container.length&&(centerX=$container.width()/2-$element.width()/2,centerY=$container.height()/2-$element.height()/2,this.moveTo(centerX,centerY),this.trigger("center",centerX,centerY)),this},moveBy:function(xOffsetRelative,yOffsetRelative){var xOffsetAbsolute,yOffsetAbsolute;return this.is("rendered")&&!this.is("disabled")&&(xOffsetAbsolute=this._translateX+xOffsetRelative,yOffsetAbsolute=this._translateY+yOffsetRelative,this._translate(xOffsetAbsolute,yOffsetAbsolute)),this},moveTo:function(x,y){var xOffsetAbsolute,yOffsetAbsolute;return this.is("rendered")&&!this.is("disabled")&&(
xOffsetAbsolute=x-this.config.initialX,yOffsetAbsolute=y-this.config.initialY,this._translate(xOffsetAbsolute,yOffsetAbsolute)),this},moveToX:function(x){return this.moveTo(x,this._y)},moveToY:function(y){return this.moveTo(this._x,y)},resetPosition:function(){var $element=this.getElement();return this.is("rendered")&&($element.css({left:this.config.initialX,top:this.config.initialY}),this._translate(0,0)),this},getPosition:function(){var position;return this.is("rendered")&&(position={x:this._x||0,y:this._y||0}),position}};function makePlaceable(component,config){return _.assign(component,placeableComponent),component.off(".makePlaceable").on(
"init.makePlaceable",function(){_.defaults(this.config,config||{},defaultConfig)}).on("render.makePlaceable",function(){this.getElement().css({position:"absolute"}),this.resetPosition()})}return makePlaceable.isPlaceable=function(component){return Object.keys(placeableComponent).every(function(method){return"function"==typeof component[method]})},makePlaceable}),define("ui/component/alignable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){"use strict";var defaultConfig={},alignDefaults_hPos="center",alignDefaults_vPos="center",alignableComponent={alignWith:function($element,options){
var alignedCoords=this._getAlignedCoords($element,options);return this.moveTo(alignedCoords.x,alignedCoords.y)},hAlignWith:function($element,hPos,hOrigin,hOffset){var alignedCoords=this._getAlignedCoords($element,{hPos:hPos,hOrigin:hOrigin,hOffset:hOffset});return this.moveToX(alignedCoords.x)},vAlignWith:function($element,vPos,vOrigin,vOffset){var alignedCoords=this._getAlignedCoords($element,{vPos:vPos,vOrigin:vOrigin,vOffset:vOffset});return this.moveToY(alignedCoords.y)},_getAlignedCoords:function($element,options){var componentOuterSize,containerOffset,elementOffset,elementWidth,elementHeight,x,y,hPos,vPos,hOrigin,vOrigin,$container=this.getContainer()
;switch(options=options||{},componentOuterSize=this.getOuterSize(),containerOffset=$container.offset(),elementOffset=$element.offset(),elementWidth=$element.outerWidth(),elementHeight=$element.outerHeight(),hPos=options.hPos||alignDefaults_hPos,vPos=options.vPos||alignDefaults_vPos,hOrigin=options.hOrigin||this._getDefaultHOrigin(options.hPos),vOrigin=options.vOrigin||this._getDefaultVOrigin(options.vPos),x=elementOffset.left-containerOffset.left,y=elementOffset.top-containerOffset.top,hPos){case"center":x+=elementWidth/2;break;case"right":x+=elementWidth}switch(hOrigin){case"center":x-=componentOuterSize.width/2;break;case"right":x-=componentOuterSize.width
}switch(x+=options.hOffset||0,vPos){case"center":y+=elementHeight/2;break;case"bottom":y+=elementHeight}switch(vOrigin){case"center":y-=componentOuterSize.height/2;break;case"bottom":y-=componentOuterSize.height}return{x:x,y:y+=options.vOffset||0}},_getDefaultHOrigin:function(hPos){var hOrigin;switch(hPos){default:case"center":hOrigin="center";break;case"left":hOrigin="right";break;case"right":hOrigin="left"}return hOrigin},_getDefaultVOrigin:function(vPos){var vOrigin;switch(vPos){default:case"center":vOrigin="center";break;case"top":vOrigin="bottom";break;case"bottom":vOrigin="top"}return vOrigin}};return function(component,config){return _.assign(
component,alignableComponent),makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(".makeAlignable").on("init.makeAlignable",function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("tpl!ui/animable/absorbable/tpl/absorb",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="absorbable"></div>'})}),define("css!ui/animable/absorbable/css/absorb",[],function(){}),define("ui/animable/absorbable/absorbable",["lodash","core/promise","ui/component",
"ui/component/alignable","tpl!ui/animable/absorbable/tpl/absorb","css!ui/animable/absorbable/css/absorb"],function(_,Promise,componentFactory,makeAlignable,absorbTpl){"use strict";var defaultConfig={animationDuration:1},absorbableComponent={absorb:function($target){var self=this,$component=this.getElement(),targetWidth=$target.width(),targetHeight=$target.height(),animationDuration=parseInt(this.config.animationDuration,10)||defaultConfig.animationDuration,animatedComponent=makeAlignable(componentFactory()).setTemplate(absorbTpl).init().render($component).setSize(targetWidth,targetHeight).alignWith($target,{hPos:"center",vPos:"center",hOrigin:"center",
vOrigin:"center"});return"static"===$component.css("position")&&$component.css("position","relative"),new Promise(function(resolve){_.delay(function(){animatedComponent.getElement().addClass("animate").css({transitionDuration:animationDuration+"s"}),animatedComponent.setSize(10,10).alignWith($component,{hPos:"center",vPos:"center",hOrigin:"center",vOrigin:"center",hOffset:targetWidth/2-5,vOffset:targetHeight/2-5}),_.delay(function(){animatedComponent.destroy(),resolve(self)},1e3*animationDuration+10)},10)})},absorbBurst:function($target,delayArray){var animations=[],self=this;return delayArray=_.isArray(delayArray)?delayArray:[0],_.forEach(delayArray,
function(startTimeOffset){animations.push(new Promise(function(resolve){_.delay(function(){self.absorb($target).then(resolve)},startTimeOffset)}))}),Promise.all(animations)}};return function(component,config){return _.assign(component,absorbableComponent),component.off(".makeAbsorbable").on("init.makeAbsorbable",function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("tpl!ui/animable/pulsable/tpl/pulse",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="pulsable animate"></div>'})}),
define("css!ui/animable/pulsable/css/pulse",[],function(){}),define("ui/animable/pulsable/pulsable",["jquery","lodash","core/promise","ui/component","ui/component/alignable","tpl!ui/animable/pulsable/tpl/pulse","css!ui/animable/pulsable/css/pulse"],function($,_,Promise,componentFactory,makeAlignable,pulseTpl){"use strict";var defaultConfig={pulseCount:3},pulsableComponent={pulse:function(pulseCount){var $component,pulseNb,animatedComponent,self=this;return this.config&&this.is("rendered")?("static"===($component=this.getElement()).css("position")&&$component.css("position","relative"),pulseNb=parseInt(
pulseCount||this.config.pulseCount||defaultConfig.pulseCount,10),animatedComponent=makeAlignable(componentFactory()).setTemplate(pulseTpl).init().render($component).alignWith($component,{hPos:"center",vPos:"center",hOrigin:"center",vOrigin:"center"}),new Promise(function(resolve){_.delay(function(){animatedComponent.destroy(),resolve(self)},1e3*pulseNb)})):Promise.resolve(this)}};return function(component,config){return _.assign(component,pulsableComponent),component.off(".makePulsable").on("init.makePulsable",function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("util/capitalize",["lodash"],function(_){"use strict";return function(input,
allWords){var ucFirst=function(str){return str.charAt(0).toUpperCase()+str.substr(1)};return _.isString(input)?!1!==allWords&&-1<input.indexOf(" ")?_.map(input.split(" "),ucFirst).join(" "):ucFirst(input):input}}),function(factory){"use strict";"function"==typeof define&&define.amd?define("jquery.autocomplete",["jquery"],factory):"object"==typeof exports&&"function"==typeof require?factory(require("jquery")):factory(jQuery)}(function($){"use strict";var utils={escapeRegExChars:function(value){return value.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(containerClass){var div=document.createElement("div")
;return div.className=containerClass,div.style.position="absolute",div.style.display="none",div}},keys_ESC=27,keys_TAB=9,keys_RETURN=13,keys_UP=38,keys_RIGHT=39,keys_DOWN=40;function Autocomplete(el,options){var noop=function(){},defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:Autocomplete.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:noop,onSearchComplete:noop,onSearchError:noop,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,
triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(suggestion,originalQuery,queryLowerCase){return-1!==suggestion.value.toLowerCase().indexOf(queryLowerCase)},paramName:"query",transformResult:function(response){return"string"==typeof response?$.parseJSON(response):response},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};this.element=el,this.el=$(el),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.intervalId=0,this.cachedResponse={},this.onChangeInterval=null,this.onChange=null,this.isLocal=!1,this.suggestionsContainer=null,
this.noSuggestionsContainer=null,this.options=$.extend({},defaults,options),this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},this.hint=null,this.hintValue="",this.selection=null,this.initialize(),this.setOptions(options)}Autocomplete.utils=utils,($.Autocomplete=Autocomplete).formatResult=function(suggestion,currentValue){var htmlSafeString=suggestion.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),pattern="("+utils.escapeRegExChars(currentValue)+")";return htmlSafeString.replace(new RegExp(pattern,"gi"),"<strong>$1</strong>")},Autocomplete.prototype={killerFn:null,
initialize:function(){var container,that=this,suggestionSelector="."+that.classes.suggestion,selected=that.classes.selected,options=that.options;that.element.setAttribute("autocomplete","off"),that.killerFn=function(e){0===$(e.target).closest("."+that.options.containerClass).length&&(that.killSuggestions(),that.disableKillerFn())},that.noSuggestionsContainer=$('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),that.suggestionsContainer=Autocomplete.utils.createNode(options.containerClass),(container=$(that.suggestionsContainer)).appendTo(options.appendTo),"auto"!==options.width&&container.width(options.width),
container.on("mouseover.autocomplete",suggestionSelector,function(){that.activate($(this).data("index"))}),container.on("mouseout.autocomplete",function(){that.selectedIndex=-1,container.children("."+selected).removeClass(selected)}),container.on("click.autocomplete",suggestionSelector,function(){that.select($(this).data("index"))}),that.fixPositionCapture=function(){that.visible&&that.fixPosition()},$(window).on("resize.autocomplete",that.fixPositionCapture),that.el.on("keydown.autocomplete",function(e){that.onKeyPress(e)}),that.el.on("keyup.autocomplete",function(e){that.onKeyUp(e)}),that.el.on("blur.autocomplete",function(){that.onBlur()}),that.el.on(
"focus.autocomplete",function(){that.onFocus()}),that.el.on("change.autocomplete",function(e){that.onKeyUp(e)}),that.el.on("input.autocomplete",function(e){that.onKeyUp(e)})},onFocus:function(){this.fixPosition(),this.options.minChars<=this.el.val().length&&this.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(suppliedOptions){var options=this.options;$.extend(options,suppliedOptions),this.isLocal=$.isArray(options.lookup),this.isLocal&&(options.lookup=this.verifySuggestionsFormat(options.lookup)),
options.orientation=this.validateOrientation(options.orientation,"bottom"),$(this.suggestionsContainer).css({"max-height":options.maxHeight+"px",width:options.width+"px","z-index":options.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearInterval(this.onChangeInterval),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var $container=$(this.suggestionsContainer),containerParent=$container.parent().get(0);if(containerParent===document.body||this.options.forceFixPosition){
var orientation=this.options.orientation,containerHeight=$container.outerHeight(),height=this.el.outerHeight(),offset=this.el.offset(),styles={top:offset.top,left:offset.left};if("auto"===orientation){var viewPortHeight=$(window).height(),scrollTop=$(window).scrollTop(),topOverflow=-scrollTop+offset.top-containerHeight,bottomOverflow=scrollTop+viewPortHeight-(offset.top+height+containerHeight);orientation=Math.max(topOverflow,bottomOverflow)===topOverflow?"top":"bottom"}if(styles.top+="top"===orientation?-containerHeight:height,containerParent!==document.body){var parentOffsetDiff,opacity=$container.css("opacity");this.visible||$container.css("opacity",0
).show(),parentOffsetDiff=$container.offsetParent().offset(),styles.top-=parentOffsetDiff.top,styles.left-=parentOffsetDiff.left,this.visible||$container.css("opacity",opacity).hide()}"auto"===this.options.width&&(styles.width=this.el.outerWidth()-2+"px"),$container.css(styles)}},enableKillerFn:function(){$(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){$(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var that=this;that.stopKillSuggestions(),that.intervalId=window.setInterval(function(){that.hide(),that.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)
},isCursorAtEnd:function(){var range,valLength=this.el.val().length,selectionStart=this.element.selectionStart;return"number"==typeof selectionStart?selectionStart===valLength:!document.selection||((range=document.selection.createRange()).moveStart("character",-valLength),valLength===range.text.length)},onKeyPress:function(e){if(this.disabled||this.visible||e.which!==keys_DOWN||!this.currentValue){if(!this.disabled&&this.visible){switch(e.which){case keys_ESC:this.el.val(this.currentValue),this.hide();break;case keys_RIGHT:if(this.hint&&this.options.onHint&&this.isCursorAtEnd()){this.selectHint();break}return;case keys_TAB:if(this.hint&&this.options.onHint
)return void this.selectHint();if(-1===this.selectedIndex)return void this.hide();if(this.select(this.selectedIndex),!1===this.options.tabDisabled)return;break;case keys_RETURN:if(-1===this.selectedIndex)return void this.hide();this.select(this.selectedIndex);break;case keys_UP:this.moveUp();break;case keys_DOWN:this.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else this.suggest()},onKeyUp:function(e){var that=this;if(!that.disabled){switch(e.which){case keys_UP:case keys_DOWN:return}clearInterval(that.onChangeInterval),that.currentValue!==that.el.val()&&(that.findBestHint(),
0<that.options.deferRequestBy?that.onChangeInterval=setInterval(function(){that.onValueChange()},that.options.deferRequestBy):that.onValueChange())}},onValueChange:function(){var index,options=this.options,value=this.el.val(),query=this.getQuery(value);this.selection&&this.currentValue!==query&&(this.selection=null,(options.onInvalidateSelection||$.noop).call(this.element)),clearInterval(this.onChangeInterval),this.currentValue=value,this.selectedIndex=-1,options.triggerSelectOnValidInput&&-1!==(index=this.findSuggestionIndex(query))?this.select(index):query.length<options.minChars?this.hide():this.getSuggestions(query)},findSuggestionIndex:function(query){
var index=-1,queryLowerCase=query.toLowerCase();return $.each(this.suggestions,function(i,suggestion){if(suggestion.value.toLowerCase()===queryLowerCase)return index=i,!1}),index},getQuery:function(value){var parts,delimiter=this.options.delimiter;return delimiter?(parts=value.split(delimiter),$.trim(parts[parts.length-1])):value},getSuggestionsLocal:function(query){var data,options=this.options,queryLowerCase=query.toLowerCase(),filter=options.lookupFilter,limit=parseInt(options.lookupLimit,10);return data={suggestions:$.grep(options.lookup,function(suggestion){return filter(suggestion,query,queryLowerCase)})},limit&&data.suggestions.length>limit&&(
data.suggestions=data.suggestions.slice(0,limit)),data},getSuggestions:function(q){var response,params,cacheKey,ajaxSettings,that=this,options=that.options,serviceUrl=options.serviceUrl;options.params[options.paramName]=q,params=options.ignoreParams?null:options.params,!1!==options.onSearchStart.call(that.element,options.params)&&($.isFunction(options.lookup)?options.lookup(q,function(data){that.suggestions=data.suggestions,that.suggest(),options.onSearchComplete.call(that.element,q,data.suggestions)}):(response=that.isLocal?that.getSuggestionsLocal(q):($.isFunction(serviceUrl)&&(serviceUrl=serviceUrl.call(that.element,q)),cacheKey=serviceUrl+"?"+$.param(
params||{}),that.cachedResponse[cacheKey]))&&$.isArray(response.suggestions)?(that.suggestions=response.suggestions,that.suggest(),options.onSearchComplete.call(that.element,q,response.suggestions)):that.isBadQuery(q)?options.onSearchComplete.call(that.element,q,[]):(that.abortAjax(),ajaxSettings={url:serviceUrl,data:params,type:options.type,dataType:options.dataType},$.extend(ajaxSettings,options.ajaxSettings),that.currentRequest=$.ajax(ajaxSettings).done(function(data){var result;that.currentRequest=null,result=options.transformResult(data),that.processResponse(result,q,cacheKey),options.onSearchComplete.call(that.element,q,result.suggestions)}).fail(
function(jqXHR,textStatus,errorThrown){options.onSearchError.call(that.element,q,jqXHR,textStatus,errorThrown)})))},isBadQuery:function(q){if(!this.options.preventBadQueries)return!1;for(var badQueries=this.badQueries,i=badQueries.length;i--;)if(0===q.indexOf(badQueries[i]))return!0;return!1},hide:function(){var container=$(this.suggestionsContainer);$.isFunction(this.options.onHide)&&this.visible&&this.options.onHide.call(this.element,container),this.visible=!1,this.selectedIndex=-1,clearInterval(this.onChangeInterval),$(this.suggestionsContainer).hide(),this.signalHint(null)},suggest:function(){if(0!==this.suggestions.length){var category,index,
options=this.options,groupBy=options.groupBy,formatResult=options.formatResult,value=this.getQuery(this.currentValue),className=this.classes.suggestion,classSelected=this.classes.selected,container=$(this.suggestionsContainer),noSuggestionsContainer=$(this.noSuggestionsContainer),beforeRender=options.beforeRender,html="";options.triggerSelectOnValidInput&&-1!==(index=this.findSuggestionIndex(value))?this.select(index):($.each(this.suggestions,function(i,suggestion){groupBy&&(html+=function(suggestion,index){var currentCategory=suggestion.data[groupBy];return category===currentCategory?"":'<div class="autocomplete-group"><strong>'+(category=currentCategory
)+"</strong></div>"}(suggestion,0)),html+='<div class="'+className+'" data-index="'+i+'">'+formatResult(suggestion,value)+"</div>"}),this.adjustContainerWidth(),noSuggestionsContainer.detach(),container.html(html),$.isFunction(beforeRender)&&beforeRender.call(this.element,container),this.fixPosition(),container.show(),options.autoSelectFirst&&(this.selectedIndex=0,container.scrollTop(0),container.children("."+className).first().addClass(classSelected)),this.visible=!0,this.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var container=$(this.suggestionsContainer),noSuggestionsContainer=$(
this.noSuggestionsContainer);this.adjustContainerWidth(),noSuggestionsContainer.detach(),container.empty(),container.append(noSuggestionsContainer),this.fixPosition(),container.show(),this.visible=!0},adjustContainerWidth:function(){var width,options=this.options,container=$(this.suggestionsContainer);"auto"===options.width&&(width=this.el.outerWidth()-2,container.width(0<width?width:300))},findBestHint:function(){var value=this.el.val().toLowerCase(),bestMatch=null;value&&($.each(this.suggestions,function(i,suggestion){var foundMatch=0===suggestion.value.toLowerCase().indexOf(value);return foundMatch&&(bestMatch=suggestion),!foundMatch}),this.signalHint(
bestMatch))},signalHint:function(suggestion){var hintValue="";suggestion&&(hintValue=this.currentValue+suggestion.value.substr(this.currentValue.length)),this.hintValue!==hintValue&&(this.hintValue=hintValue,this.hint=suggestion,(this.options.onHint||$.noop)(hintValue))},verifySuggestionsFormat:function(suggestions){return suggestions.length&&"string"==typeof suggestions[0]?$.map(suggestions,function(value){return{value:value,data:null}}):suggestions},validateOrientation:function(orientation,fallback){return orientation=$.trim(orientation||"").toLowerCase(),-1===$.inArray(orientation,["auto","bottom","top"])&&(orientation=fallback),orientation},
processResponse:function(result,originalQuery,cacheKey){var options=this.options;result.suggestions=this.verifySuggestionsFormat(result.suggestions),options.noCache||(this.cachedResponse[cacheKey]=result,options.preventBadQueries&&0===result.suggestions.length&&this.badQueries.push(originalQuery)),originalQuery===this.getQuery(this.currentValue)&&(this.suggestions=result.suggestions,this.suggest())},activate:function(index){var activeItem,selected=this.classes.selected,container=$(this.suggestionsContainer),children=container.find("."+this.classes.suggestion);return container.find("."+selected).removeClass(selected),this.selectedIndex=index,
-1!==this.selectedIndex&&children.length>this.selectedIndex?(activeItem=children.get(this.selectedIndex),$(activeItem).addClass(selected),activeItem):null},selectHint:function(){var i=$.inArray(this.hint,this.suggestions);this.select(i)},select:function(i){this.hide(),this.onSelect(i)},moveUp:function(){if(-1!==this.selectedIndex)return 0===this.selectedIndex?($(this.suggestionsContainer).children().first().removeClass(this.classes.selected),this.selectedIndex=-1,this.el.val(this.currentValue),void this.findBestHint()):void this.adjustScroll(this.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(
this.selectedIndex+1)},adjustScroll:function(index){var activeItem=this.activate(index);if(activeItem){var offsetTop,upperBound,lowerBound,heightDelta=$(activeItem).outerHeight();offsetTop=activeItem.offsetTop,lowerBound=(upperBound=$(this.suggestionsContainer).scrollTop())+this.options.maxHeight-heightDelta,offsetTop<upperBound?$(this.suggestionsContainer).scrollTop(offsetTop):lowerBound<offsetTop&&$(this.suggestionsContainer).scrollTop(offsetTop-this.options.maxHeight+heightDelta),this.options.preserveInput||this.el.val(this.getValue(this.suggestions[index].value)),this.signalHint(null)}},onSelect:function(index){var onSelectCallback=this.options.onSelect,
suggestion=this.suggestions[index];this.currentValue=this.getValue(suggestion.value),this.currentValue===this.el.val()||this.options.preserveInput||this.el.val(this.currentValue),this.signalHint(null),this.suggestions=[],this.selection=suggestion,$.isFunction(onSelectCallback)&&onSelectCallback.call(this.element,suggestion)},getValue:function(value){var currentValue,parts,delimiter=this.options.delimiter;return delimiter?1===(parts=(currentValue=this.currentValue).split(delimiter)).length?value:currentValue.substr(0,currentValue.length-parts[parts.length-1].length)+value:value},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),
this.disableKillerFn(),$(window).off("resize.autocomplete",this.fixPositionCapture),$(this.suggestionsContainer).remove()}},$.fn.autocomplete=$.fn.devbridgeAutocomplete=function(options,args){return 0===arguments.length?this.first().data("autocomplete"):this.each(function(){var inputElement=$(this),instance=inputElement.data("autocomplete");"string"==typeof options?instance&&"function"==typeof instance[options]&&instance[options](args):(instance&&instance.dispose&&instance.dispose(),instance=new Autocomplete(this,options),inputElement.data("autocomplete",instance))})}}),define("ui/tooltip",["jquery","lodash","core/dataattrhandler","qtip"],function($,_,
DataAttrHandler){"use strict";var themes=["dark","default","info","warning","error","success","danger"],themesMap={default:"qtip-rounded qtip-plain",dark:"qtip-rounded qtip-dark",error:"qtip-rounded qtip-red",success:"qtip-rounded qtip-green",info:"qtip-rounded qtip-blue",warning:"qtip-rounded qtip-orange",danger:"qtip-rounded qtip-danger"},defaultOptions={theme:"warning",position:{my:"bottom center",at:"top center",viewport:$(window)}},qtipConstructor=$.fn.qtip;return $.fn.qtip=function(options,notation,newValue){return"object"==typeof options&&(options=_.merge({},defaultOptions,options)).theme&&themesMap[options.theme]&&(void 0===options.style&&(
options.style={}),options.style.classes=themesMap[options.theme],options=_.omit(options,["theme"])),qtipConstructor.call(this,options,notation,newValue)},function($container){$("[data-tooltip]",$container).each(function(){var $elt=$(this),$target=DataAttrHandler.getTarget("tooltip",$elt),theme=_.contains(themes,$elt.data("tooltip-theme"))?$elt.data("tooltip-theme"):"default";$elt.qtip({theme:theme,content:{text:$target}})})}}),define("ui/autocomplete",["jquery","lodash","i18n","util/capitalize","jquery.autocomplete","ui/tooltip"],function($,_,__,capitalize){"use strict";var NS="autocompleter",tooltipConfigTooMany={position:{viewport:$(window)},theme:"info",
content:{text:__("Too many suggestions match your query. Only a few are listed")},show:{event:"custom"}},defaults={pluginName:"autocomplete",url:null,params:null,paramsRoot:null,ontologyParam:"rootNode",queryParam:"query",type:"GET",ontology:null,value:null,label:null,valueField:"id",labelField:"http://www.w3.org/2000/01/rdf-schema#label",isProvider:!1,preventSubmit:!1,delay:250,minChars:3,tooManySuggestions:!1,addWilcard:!1},autocompleter={init:function(element,options){return this.$element=$(element),this.$element.is(":input")||(this.$element=this.$element.find(":input")),options=_.assign(_.clone(options||{}),_.pick(this.$element.data(),["url","ontology",
"paramsRoot","ontologyParam","queryParam","type","valueField","labelField","isProvider","preventSubmit","delay","minChars"])),this.$element.qtip(tooltipConfigTooMany),this.on("keyup keydown keypress",this._onKeyEvent.bind(this)),this.on("focus",this._onFocus.bind(this)),this.on("blur",this._onBlur.bind(this)),this.$element[this.pluginName](this.parseOptions(options)),this},destroy:function(){return this.applyPlugin("dispose"),this.$element&&(this.$element.off("."+NS),this.$element.qtip("destroy",!0)),this.$element=null,this},parseOptions:function(options){var that=this,pluginOptions={};return _.forOwn(options,function(value,name){
var setterName="set"+capitalize(name);that[setterName]?that[setterName](value):"on"===name.substr(0,2)?that.on(name.substr(2),value):options[name]=value}),_.assign(pluginOptions,{onSelect:this._onSelect.bind(this),onSearchStart:this._onSearchStart.bind(this),onSearchComplete:this._onSearchComplete.bind(this),onSearchError:this._onSearchError.bind(this),onInvalidateSelection:this._onInvalidateSelection.bind(this),beforeRender:this._onBeforeRender.bind(this),transformResult:this._transformResult.bind(this),deferRequestBy:this.delay||0,preventBadQueries:!1,triggerSelectOnValidInput:!1,autoSelectFirst:!0,minChars:this.minChars||1,serviceUrl:this.url,
type:this.getType(),params:this.getParams(),paramName:this.getQueryParam(),ajaxSettings:{dataType:"json"}}),pluginOptions},setOptions:function(options){return this.applyPlugin("setOptions",[this.parseOptions(options)]),this},applyElement:function(action,params){var $element=this.$element;if($element)return $element[action].apply($element,params)},applyPlugin:function(action,params){var $element=this.$element,$plugin=$element&&$element[this.pluginName]();if($plugin)return $plugin[action].apply($plugin,params)},showTooltipTooMany:function(){this.$element&&this.$element.qtip("show")},hideTooltipTooMany:function(){this.$element&&this.$element.qtip("hide")},
trigger:function(eventName,params){return eventName=adjustEventName(eventName),this.applyElement("triggerHandler",arguments)},on:function(eventName,callback){return eventName=adjustEventName(eventName),this.applyElement("on",arguments),this},off:function(eventName,callback){return eventName=adjustEventName(eventName),this.applyElement("off",arguments),this},getElement:function(){return this.$element},hasTooManySuggestions:function(){return!!this.tooManySuggestions},getValue:function(){return this.value},setValue:function(value,label){return this.value=value,_.isUndefined(label)||this.setLabel(label),this},getLabel:function(){return this.label},
setLabel:function(label){return this.label=label,this.$element&&this.$element.val(label),this},getOntology:function(){return this.ontology},setOntology:function(ontology){return this.ontology=ontology,this},getValueField:function(){return this.valueField},setValueField:function(valueField){return this.valueField=valueField,this},getLabelField:function(){return this.labelField},setLabelField:function(labelField){return this.labelField=labelField,this},getIsProvider:function(){return this.isProvider},setIsProvider:function(isProvider){return this.isProvider=toBoolean(isProvider),this},getPreventSubmit:function(){return this.preventSubmit},
setPreventSubmit:function(preventSubmit){return this.preventSubmit=toBoolean(preventSubmit),this},getParamsRoot:function(){return this.paramsRoot},setParamsRoot:function(paramsRoot){return this.paramsRoot=paramsRoot,this},getParams:function(){var params=_.merge({},this.params||{}),searchParams=params;return this.paramsRoot&&(searchParams=params[this.paramsRoot]||{},params[this.paramsRoot]=searchParams),this.ontology&&(searchParams[this.ontologyParam]=this.ontology),params},setParams:function(params){return this.params=params,this},getQueryParam:function(){return this.adjustParam(this.queryParam)},setQueryParam:function(queryParam){
return this.queryParam=queryParam,this},getOntologyParam:function(){return this.adjustParam(this.ontologyParam)},setOntologyParam:function(ontologyParam){return this.ontologyParam=ontologyParam,this},getUrl:function(){return this.url},setUrl:function(url){return this.url=url,this},getType:function(){return this.type||"GET"},setType:function(type){return this.type=type,this},getDelay:function(){return this.delay},setDelay:function(delay){return this.delay=Math.max(0,Number(delay)),this},getMinChars:function(){return this.minChars},setMinChars:function(minChars){return this.minChars=Math.max(1,Number(minChars)),this},enable:function(){return this.applyPlugin(
"enable"),this},disable:function(){return this.applyPlugin("disable"),this},hide:function(){return this.applyPlugin("hide"),this},clear:function(){return this.tooManySuggestions=!1,this.applyPlugin("clear"),this},clearCache:function(){return this.applyPlugin("clearCache"),this},reset:function(){return this.setValue(null,""),this.clear(),this.applyPlugin("hide"),this},_onKeyEvent:function(event){this.preventSubmit&&13===event.which&&event.preventDefault()},_onSelect:function(suggestion){var value=suggestion&&suggestion.data,label=suggestion&&suggestion.value;if(!1===this.trigger("beforeSelectItem",[value,label,this]))return!1;this.value=value,this.label=label
,this.isProvider&&(this.$element.val(""),this.clear()),this.trigger("selectItem",[value,label,this])},_onSearchStart:function(params){var query,queryParam=this.getQueryParam();if(!1===this.trigger("searchStart",[params,this]))return!1;this.addWilcard&&params&&params[queryParam]&&("*"!==(query=params[queryParam]||"").substr(-1)&&(query+="*"),params[queryParam]=query)},_onSearchComplete:function(query,suggestions){return suggestions&&suggestions.length||this.clear(),this.trigger("searchComplete",[query,suggestions,this])},_onSearchError:function(query,jqXHR,textStatus,errorThrown){return this.trigger("searchError",[query,jqXHR,textStatus,errorThrown,this])},
_onInvalidateSelection:function(){return this.trigger("invalidateSelection",[this])},_onBeforeRender:function($container){this.trigger("beforeRender",[$container,this])},_onFocus:function(event){this.hasTooManySuggestions()&&this.showTooltipTooMany()},_onBlur:function(event){this.hideTooltipTooMany()},_transformResult:function(response){var that=this,results={suggestions:[]};return _.isString(response)&&(response=JSON.parse(response)),response.records&&(results.suggestions=_.map(response.data,function(dataItem){return{value:dataItem[that.labelField],data:dataItem[that.valueField]}})),this.tooManySuggestions=response.total&&1<response.total,
this.hasTooManySuggestions()?this.showTooltipTooMany():this.hideTooltipTooMany(),results},adjustParam:function(param){return this.paramsRoot&&(param=this.paramsRoot+"["+param+"]"),param}},adjustEventName=function(eventName){return _(eventName.split(" ")).map(function(name){return-1===(name=name.toLowerCase()).indexOf(".")&&(name+="."+NS),name}).join(" ")},toBoolean=function(value){return _.isString(value)&&("false"!==value.toLowerCase()&&"0"!==value||(value=!1)),!!value};return function(element,options){var autocomplete=_.clone(autocompleter,!0);return _.defaults(autocomplete,defaults),autocomplete.init(element,options)}}),define("ui/autoscroll",["jquery",
"core/promise"],function($,Promise){"use strict";return function(element,container){return new Promise(function(resolve){var currentScrollTop,minScrollTop,maxScrollTop,scrollTop,$element=$(element),$container=$(container||$element.parent());$element.length&&$container.length?(currentScrollTop=$container.scrollTop(),minScrollTop=(maxScrollTop=$element.offset().top-$container.offset().top+currentScrollTop)-$container.height()+$element.outerHeight(),(scrollTop=Math.max(Math.min(maxScrollTop,currentScrollTop),minScrollTop))!==currentScrollTop?$container.animate({scrollTop:scrollTop}).promise().done(resolve):resolve()):resolve()})}}),define("ui/hider",["jquery",
"lodash","core/eventifier"],function($,_){"use strict";function jqWrap(element){return element instanceof $?element:$(element)}return{show:function(element){return jqWrap(element).removeClass("hidden")},hide:function(element){return jqWrap(element).addClass("hidden")},toggle:function(element,state){return void 0!==state&&(state=!state),jqWrap(element).toggleClass("hidden",state)},isHidden:function(element,real){var $elt=jqWrap(element);return real?$elt.hasClass("hidden")||"none"===$elt.css("display")||"hidden"===$elt.css("visibility"):$elt.hasClass("hidden")}}}),define("tpl!ui/badge/tpl/badge",["handlebars"],function(hb){return hb.template(function(
Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="badge-component">\n    <div class="loader"></div>\n    <span class="badge-border"></span>\n    <span class="badge"></span>\n</div>'})}),define("css!ui/badge/css/badge",[],function(){}),define("ui/badge/badge",["jquery","lodash","i18n","ui/hider","ui/component","tpl!ui/badge/tpl/badge","css!ui/badge/css/badge"],function($,_,__,hider,component,badgeTpl){"use strict";var _defaults={loading:!1,type:"info",value:0},_allowedTypes=["success","warning","error","info"],badgeApi={update:function(config){
var displayValue,$component=this.getElement(),$border=$component.find(".badge-border"),$badge=$component.find(".badge").removeClass("badge-info badge-success badge-warning badge-error icon-result-ok"),$loader=$component.find(".loader");if(_.assign(this.config,config),this.config&&this.config.value){if(displayValue=99<(displayValue=parseInt(this.config.value,10))?"99+":displayValue,-1===_allowedTypes.indexOf(this.config.type))throw new Error("Invalid badge type : ".this.config.type);$badge.addClass("badge-"+this.config.type).html(displayValue),this.config.loading?(hider.show($loader),hider.hide($border)):(hider.hide($loader),hider.show($border))
}else hider.hide($loader),hider.hide($border),$badge.addClass("icon-result-ok").empty();return this}};return function(config){var initConfig=_.defaults(config||{},_defaults);return component(badgeApi).setTemplate(badgeTpl).on("render",function(){this.update(this.config)}).init(initConfig)}}),define("tpl!ui/breadcrumbs/tpl/breadcrumbs",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program4(depth0,data){var stack1,
helper,buffer="";return buffer+='\n        <a href="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</a>\n        "}function program5(depth0,
data){var stack1,helper,buffer="";return buffer+=" - ",stack1=(helper=helpers.data)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.data)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)}function program7(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <span class="a">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,
data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</span>\n        "}function program9(depth0,data){var stack1,buffer="";return buffer+='\n        <ul class="entries plain">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.entries,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n        "}function program10(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <li data-breadcrumb="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+'">\n                <a href="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="</a>\n            </li>\n            "}return buffer+='<ul class="breadcrumbs plain',((stack1=helpers.if.call(depth0,depth0&&depth0.cls,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.cls)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    ',((stack1=helpers.each.call(depth0,depth0&&depth0.breadcrumbs,{hash:{},inverse:self.noop,fn:self.program(3,function(depth0,data){var stack1,
helper,buffer="";return buffer+='\n    <li class="breadcrumb" data-breadcrumb="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.url,{hash:{},inverse:self.program(7,program7,data),fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.entries,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n    </li>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</ul>\n"})}),define("ui/breadcrumbs",["jquery","lodash","i18n","ui/component","tpl!ui/breadcrumbs/tpl/breadcrumbs"],function($,_,__,component,breadcrumbsTpl){"use strict";var breadcrumbs={update:function(breadcrumbs){var $component,$oldComponent=this.getContainer();return this.config.breadcrumbs=breadcrumbs,this.trigger("update",breadcrumbs,this),$component=this.render(),$oldComponent&&(this.config.renderTo?this.config.replace||$oldComponent.remove():$oldComponent.replaceWith($component)),$component}},removeLastLink=function(){var breadcrumbs=this.config.breadcrumbs
;breadcrumbs&&breadcrumbs.length&&((breadcrumbs=_.cloneDeep(this.config.breadcrumbs))[breadcrumbs.length-1].url=null,this.config.breadcrumbs=breadcrumbs)};return function(config){return component(breadcrumbs).on("init",removeLastLink).on("update",removeLastLink).setTemplate(breadcrumbsTpl).init(config)}}),define("ui/btngrouper",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";var ns="btngrouper",dataNs="ui."+ns,defaults={bindEvent:"click",activeClass:"active",disableClass:"disabled",innerElt:"li",action:"toggle"},availableActions=["toggle","switch"],BtnGrouper={init:function(options){
return options=_.defaults(options||{},defaults),_.contains(availableActions,options.action)?this.each(function(){var $elt=$(this);if(!$elt.data(dataNs)){if($elt.data(dataNs,options),"toggle"===options.action){var $activeElt=$elt.find(options.innerElt+"."+options.activeClass);0===$activeElt.length?$elt.find(options.innerElt+":first").addClass(options.activeClass):1<$activeElt.length&&$elt.find(options.innerElt+"."+options.activeClass).not(":first").removeClass(options.activeClass)}!1!==options.bindEvent&&$elt.on(options.bindEvent,options.innerElt,function(e){e.preventDefault();var action="_"+options.action
;"function"==typeof BtnGrouper[action]&&BtnGrouper[action]($elt,$(this))}),$elt.trigger("create."+ns)}}):$.error("Action "+options.action+" not supported")},_toggle:function($elt){var options=$elt.data(dataNs);$elt.find(options.innerElt).toggleClass(options.activeClass),$elt.trigger("toggle."+ns).trigger("change")},_switch:function($elt,$target){var options=$elt.data(dataNs);$target.toggleClass(options.activeClass),$elt.trigger("switch."+ns).trigger("change")},value:function(){var value=[];return this.each(function(){var $elt=$(this),options=$elt.data(dataNs),eltValue=$elt.find(options.innerElt).filter("."+options.activeClass).text();$.isArray(eltValue
)?value.concat(eltValue):value.push(eltValue)}),1===value.length?value[0]:value},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent,options.innerElt),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,BtnGrouper,{expose:["toggle","switch"]}),function($container){new DataAttrHandler("button-group",{container:$container,inner:"li",bubbled:!0,listenerEvent:"click",namespace:dataNs,useTarget:!1}).init(function($elt,$target){$elt.on("create."+ns,function(e){e.namespace===ns&&$elt.btngrouper($elt.data("button-group"),$target)}),$elt.btngrouper({
action:$elt.data("button-group")})})}}),define("tpl!ui/bulkActionPopup/tpl/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,self=this;function program2(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <div class="single" data-resource="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.allowedResources)||!1===stack1?stack1:stack1[0]
)||!1===stack1?stack1:stack1.id)===functionType?stack1.apply(depth0):stack1)+'">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"The action will be applied to",options):helperMissing.call(depth0,"__","The action will be applied to",options)))+" ",stack1=(helper=helpers.resourceType)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceType)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+' <span class="resource-label">'+escapeExpression(typeof(stack1=null==(stack1=null==(
stack1=depth0&&depth0.allowedResources)||!1===stack1?stack1:stack1[0])||!1===stack1?stack1:stack1.label)===functionType?stack1.apply(depth0):stack1)+"</span>\n        </p>\n    </div>\n        "}function program4(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <div class="multiple">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"The action will be applied to the following",options):helperMissing.call(depth0,"__","The action will be applied to the following",options)))+' <span class="resource-count">',stack1=(helper=helpers.resourceCount)?helper.call(
depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceCount)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span> ",stack1=(helper=helpers.resourceTypes)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceTypes)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+':\n        </p>\n        <ul class="plain applicables">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.allowedResources,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n        </ul>\n    </div>\n        "}function program5(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <li data-resource="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n                <span class="resource-label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n            </li>\n            "}
function program8(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <div class="single" data-resource="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.deniedResources)||!1===stack1?stack1:stack1[0])||!1===stack1?stack1:stack1.id)===functionType?stack1.apply(depth0):stack1)+'">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"The action will not be applied to ",options):helperMissing.call(depth0,"__","The action will not be applied to ",options)))+" ",stack1=(helper=helpers.resourceType)?helper.call(depth0,{hash:{},data:data}
):typeof(helper=depth0&&depth0.resourceType)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+' <span class="resource-label">'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.deniedResources)||!1===stack1?stack1:stack1[0])||!1===stack1?stack1:stack1.label)===functionType?stack1.apply(depth0):stack1)+"</span>\n        </p>\n    </div>\n        "}function program10(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n    <p>\n        "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"The action will not be applied to the following",options):helperMissing.call(depth0,"__","The action will not be applied to the following",options)))+" ",stack1=(helper=helpers.resourceTypes)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceTypes)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+':\n    </p>\n    <ul class="plain no-applicables">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.deniedResources,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </ul>\n        "}function program11(
depth0,data){var stack1,helper,buffer="";return buffer+='\n        <li data-resource="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <span class="resource-label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span>\n            <span class="reason">(',stack1=(helper=helpers.reason)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.reason)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+")</span>\n        </li>\n            "}return buffer+='<div class="bulk-action-popup">\n    <h2 class="title">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Action",options):helperMissing.call(depth0,"__","Action",options)))+": ",stack1=(helper=helpers.actionName)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.actionName)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h2>\n\n    ",((
stack1=helpers.if.call(depth0,depth0&&depth0.resourceCount,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+="\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.single,{hash:{},inverse:self.program(4,program4,data),fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    \n    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.deniedResources)||!1===stack1?stack1:stack1.length,{hash:{},inverse:self.noop,fn:self.program(7,function(depth0,data){var stack1,buffer=""
;return buffer+="\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.singleDenied,{hash:{},inverse:self.program(10,program10,data),fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    \n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.reason,{hash:{},inverse:self.noop,fn:self.program(13,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <div class="reason">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Please provide a reason",options
):helperMissing.call(depth0,"__","Please provide a reason",options)))+':\n        </p>\n        <div class="categories"></div>\n        <div class="comment">\n            <textarea placeholder="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"comment...",options):helperMissing.call(depth0,"__","comment...",options)))+'"></textarea>\n        </div>\n    </div>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    \n    <div class="actions">\n        <button class="btn btn-info small done">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__
)?helper.call(depth0,"OK",options):helperMissing.call(depth0,"__","OK",options)))+'</button>\n        <a href="#" class="btn cancel" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"cancel the action",options):helperMissing.call(depth0,"__","cancel the action",options)))+'">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"cancel",options):helperMissing.call(depth0,"__","cancel",options)))+"</a>\n    </div>\n    \n</div>"})}),define("util/namespace",["lodash"],function(_){"use strict";var reSplit=/\s/g,namespaceHelper={split:function(
names,normalize){return!_.isString(names)||_.isEmpty(names)?[]:(normalize&&(names=names.toLowerCase()),_(names.trim().split(reSplit)).compact().uniq().value())},getName:function(namespaced){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(0,namespaced.indexOf(".")):namespaced},getNamespace:function(namespaced,defaultNs){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(namespaced.indexOf(".")+1):defaultNs||"@"},namespaceAll:function(names,namespace,normalize){var suffix;return _.isArray(names)||(names=namespaceHelper.split(names,normalize)),normalize&&(
namespace=namespace.toLowerCase()),suffix=namespace?"."+namespace:"",_(names).map(function(sh){return sh.indexOf(".")<0?sh+suffix:sh}).compact().uniq().value().join(" ")}};return namespaceHelper}),define("util/shortcut/registry",["jquery","lodash","util/namespace"],function($,_,namespaceHelper){"use strict";var modifiers={ctrl:"ctrlKey",alt:"altKey",option:"altKey",shift:"shiftKey",meta:"metaKey",cmd:"metaKey",win:"metaKey"},translateKeys={escape:"esc",arrowdown:"down",arrowleft:"left",arrowright:"right",arrowup:"up"},specialKeys={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",
37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"meta",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",145:"scrolllock",144:"numlock"};function registerEvent(target,eventName,listener){target.addEventListener?target.addEventListener(eventName,listener,!1):target.attachEvent?target.attachEvent("on"+eventName,listener):target["on"+eventName]=listener}function unregisterEvent(target,eventName,listener){target.removeEventListener?target.removeEventListener(eventName,listener,!1):target.detachEvent?target.detachEvent("on"+eventName,listener):target["on"+eventName]=null}
function normalizeCommand(descriptor){var key=translateKeys[descriptor.key]||descriptor.key,parts=[];return descriptor.ctrlKey&&parts.push("control"),descriptor.altKey&&parts.push("alt"),descriptor.shiftKey&&parts.push("shift"),descriptor.metaKey&&parts.push("meta"),descriptor.scrollDown&&parts.push("scrollDown"),descriptor.scrollUp&&parts.push("scrollUp"),descriptor.clickLeft&&parts.push("clickLeft"),descriptor.clickRight&&parts.push("clickRight"),descriptor.clickMiddle&&parts.push("clickMiddle"),descriptor.clickBack&&parts.push("clickBack"),descriptor.clickForward&&parts.push("clickForward"),key&&parts.indexOf(key)<0&&parts.push(key),parts.join("+")}
function parseCommand(shortcut){var parts=namespaceHelper.getName(shortcut).split("+"),descriptor={keyboardInvolved:!1,mouseClickInvolved:!1,mouseWheelInvolved:!1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,key:null,scrollUp:null,scrollDown:null,clickLeft:null,clickRight:null,clickMiddle:null,clickBack:null,clickForward:null};return _.forEach(parts,function(part){if(modifiers[part])descriptor[modifiers[part]]=!0;else if(0<=part.indexOf("mouse")){if(descriptor.keyboardInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");0<=part.indexOf("scroll")&&(descriptor.mouseWheelInvolved=!0,descriptor.scrollUp=0<=part.indexOf("up"),
descriptor.scrollDown=0<=part.indexOf("down")),0<=part.indexOf("click")&&(descriptor.mouseClickInvolved=!0,descriptor.clickLeft=0<=part.indexOf("left"),descriptor.clickRight=0<=part.indexOf("right"),descriptor.clickMiddle=0<=part.indexOf("middle"),descriptor.clickBack=0<=part.indexOf("back"),descriptor.clickForward=0<=part.indexOf("forward"))}else{if(descriptor.mouseClickInvolved||descriptor.mouseWheelInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");descriptor.keyboardInvolved=!0,descriptor.key=part}}),descriptor}return function(root,defaultOptions){var keyboardIsRegistered=!1,mouseClickIsRegistered=!1,
mouseWheelIsRegistered=!1,keyboardCount=0,mouseClickCount=0,mouseWheelCount=0,shortcuts={},handlers={},states={};function getHandlers(command,namespace){return handlers[namespace]=handlers[namespace]||{},handlers[namespace][command]=handlers[namespace][command]||[],handlers[namespace][command]}function getCommandHandlers(command){return _.reduce(handlers,function(acc,nsHandlers){return nsHandlers[command]&&(acc=acc.concat(nsHandlers[command])),acc},[])}function setOptions(descriptor,options){descriptor.options=_.defaults(_.merge(descriptor.options||{},options),defaultOptions)}function unregisterKeyboard(){--keyboardCount<=0&&(keyboardCount=0,
keyboardIsRegistered&&(unregisterEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!1))}function unregisterMouseClick(){--mouseClickCount<=0&&(mouseClickCount=0,mouseClickIsRegistered&&(unregisterEvent(root,"click",onMouseClick),mouseClickIsRegistered=!1))}function unregisterMouseWheel(){--mouseWheelCount<=0&&(mouseWheelCount=0,mouseWheelIsRegistered&&(unregisterEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!1))}function registerCommand(command,descriptor){(shortcuts[command]=descriptor).keyboardInvolved&&(keyboardIsRegistered||(registerEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!0),keyboardCount++),descriptor.mouseClickInvolved&&(
mouseClickIsRegistered||(registerEvent(root,"click",onMouseClick),mouseClickIsRegistered=!0),mouseClickCount++),descriptor.mouseWheelInvolved&&(mouseWheelIsRegistered||(registerEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!0),mouseWheelCount++)}function onKeyboard(event){processShortcut(event,{keyboardInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey,key:function(event){var code=event.which||event.keyCode,character=32<=code?String.fromCharCode(code).toLowerCase():"",key=event.key&&event.key.toLowerCase(),keyName=event.code&&event.code.toLowerCase();return keyName&&(0===keyName.indexOf("key")?(
key<"a"||"z"<key)&&"a"<=character&&character<="z"&&(key=character):0===keyName.indexOf("digit")&&(key=keyName.substr(5))),specialKeys[code]||key||character}(event)})}function onMouseClick(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},function(event){var buttons={clickLeft:!1,clickRight:!1,clickMiddle:!1,clickBack:!1,clickForward:!1};if(event.buttons)buttons.clickLeft=!!(1&event.buttons),buttons.clickRight=!!(2&event.buttons),buttons.clickMiddle=!!(4&event.buttons),buttons.clickBack=!!(8&event.buttons),buttons.clickForward=!!(16&event.buttons);else switch(
event.button){case 0:buttons.clickLeft=!0;break;case 1:buttons.clickMiddle=!0;break;case 2:buttons.clickRight=!0;break;case 3:buttons.clickBack=!0;break;case 4:buttons.clickForward=!0}return buttons}(event)))}function onMouseWheel(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},function(event){return{scrollUp:event.deltaY<0,scrollDown:0<event.deltaY}}(event)))}function processShortcut(event,descriptor){var shortcutHandlers,$target,command=normalizeCommand(descriptor),shortcut=shortcuts[command];if(shortcut&&!states.disabled){if(
!0===shortcut.options.avoidInput&&($target=$(event.target)).closest('[type="text"],textarea').length&&(!shortcut.options.allowIn||!$target.closest(shortcut.options.allowIn).length))return;!1===shortcut.options.propagate&&event.stopPropagation(),!0===shortcut.options.prevent&&event.preventDefault(),(shortcutHandlers=getCommandHandlers(command))&&_.forEach(shortcutHandlers,function(handler){handler(event,command)})}}return root.jquery&&(root=root.get(0)),{set:function(shortcut,options){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,
options),registerCommand(command,descriptor)}),this},add:function(shortcut,handler,options){return _.isFunction(handler)&&_.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor),getHandlers(command,namespace).push(handler)}),this},remove:function(shortcut){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(parseCommand(normalized));!function(command
,namespace){namespace&&!command?handlers[namespace]={}:_.forEach(handlers,function(nsHandlers,ns){!nsHandlers[command]||"*"!==namespace&&namespace!==ns||(nsHandlers[command]=[])})}(command,namespace),getCommandHandlers(command).length||function(command){var descriptor=shortcuts[command];shortcuts[command]=null,descriptor&&(descriptor.keyboardInvolved&&unregisterKeyboard(),descriptor.mouseClickInvolved&&unregisterMouseClick(),descriptor.mouseWheelInvolved&&unregisterMouseWheel())}(command)}),this},exists:function(shortcut){var normalized=String(shortcut).trim().toLowerCase(),namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(
parseCommand(normalized)),shortcutExists=!1;return shortcuts[command]?shortcutExists="*"===namespace||!!getHandlers(command,namespace).length:command||(shortcutExists=!_.isEmpty(handlers[namespace])),shortcutExists},clear:function(){return shortcuts={},handlers={},mouseWheelCount=mouseClickCount=keyboardCount=0,unregisterKeyboard(),unregisterMouseClick(),unregisterMouseWheel(),this},getState:function(name){return!!states[name]},setState:function(name,state){return states[name]=!!state,this},enable:function(){return this.setState("disabled",!1),this},disable:function(){return this.setState("disabled",!0),this}}}}),define("ui/keyNavigation/navigator",["jquery"
,"lodash","core/eventifier","util/shortcut/registry"],function($,_,eventifier,shortcutRegistry){"use strict";var _navigationGroups={},_ns=".ui-key-navigator",_defaults={defaultPosition:0,keepState:!1,replace:!1,loop:!1,propagateTab:!0},keyNavigatorFactory=function(config){var id,navigables,keyNavigator,$group,_cursor={position:-1,navigable:null},getCurrentCursor=function(){var isFocused=!1;return document.activeElement&&_.forEach(navigables,function(navigable,index){if(navigable.isVisible()&&navigable.isEnabled()&&(document.activeElement===navigable.getElement().get(0)||(!$(document.activeElement).hasClass("key-navigation-highlight")||$(
document.activeElement).data("key-navigatior-id")!==id)&&$.contains(navigable.getElement().get(0),document.activeElement)))return _cursor.position=index,_cursor.navigable=navigable,!(isFocused=!0)}),isFocused?_cursor:null},getClosestPositionRight=function(fromPosition){var pos;for(pos=fromPosition;pos<navigables.length;pos++)if(navigables[pos]&&navigables[pos].isVisible()&&navigables[pos].isEnabled())return pos;return-1},getClosestPositionLeft=function(fromPosition){var pos;for(pos=fromPosition;0<=pos;pos--)if(navigables[pos]&&navigables[pos].isVisible()&&navigables[pos].isEnabled())return pos;return-1};if(config=_.defaults(config||{},_defaults),
id=config.id||_.uniqueId("navigator_"),navigables=config.elements||[],_navigationGroups[id]){if(!config.replace)throw new TypeError("the navigation group id is already in use : "+id);_navigationGroups[id].destroy()}if(_.each(navigables,function(navigable){navigable.init(),navigable.getElement().data("key-navigatior-id",id)}),config.group){if(!($group=$(config.group)).length)throw new TypeError("group element does not exist");$group.addClass("key-navigation-group").attr("data-navigation-id",id)}return keyNavigator=eventifier({getId:function(){return id},getGroup:function(){return $group},isFocused:function(){return!!getCurrentCursor()},next:function(){var pos
,cursor=getCurrentCursor();return cursor?(0<=(pos=getClosestPositionRight(cursor.position+1))?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionRight(0)):this.trigger("upperbound"),this.trigger("next",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},previous:function(){var pos,cursor=getCurrentCursor();return cursor?(0<=(pos=getClosestPositionLeft(cursor.position-1))?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionLeft(navigables.length-1)):this.trigger("lowerbound"),this.trigger("previous",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},activate:function(
target){var cursor=getCurrentCursor();return cursor&&this.trigger("activate",cursor,target),this},goto:function(groupId){return _navigationGroups[groupId]?_navigationGroups[groupId].focus():this.trigger("error",new Error("goto an unknown navigation group")),this},focus:function(originNavigator){var pos;return config.keepState&&_cursor&&0<=_cursor.position?pos=_cursor.position:_.isFunction(config.defaultPosition)?(pos=config.defaultPosition(navigables))<0&&(pos=0):pos=config.defaultPosition,this.focusPosition(getClosestPositionRight(pos),originNavigator),this},focusPosition:function(position,originNavigator){return navigables[position]&&(
_cursor.navigable&&this.trigger("blur",this.getCursor(),originNavigator),_cursor.position=position,navigables[_cursor.position].focus(),_cursor.navigable=navigables[_cursor.position],this.trigger("focus",this.getCursor(),originNavigator)),this},first:function(){return this.focusPosition(getClosestPositionRight(0)),this},last:function(){return this.focusPosition(getClosestPositionLeft(navigables.length-1)),this},destroy:function(){return _.each(navigables,function(navigable){navigable.getElement().off(_ns),navigable.destroy(),navigable.shortcuts&&navigable.shortcuts.clear()}),delete _navigationGroups[id],this},blur:function(){var cursor=this.getCursor()
;return cursor&&cursor.navigable&&cursor.navigable.getElement().blur(),this},getCursor:function(){return _.clone(_cursor)},getNavigables:function(){return _.clone(navigables)}}),_.each(navigables,function(navigable){if(!((navElement=navigable)&&_.isFunction(navElement.init)&&_.isFunction(navElement.destroy)&&_.isFunction(navElement.getElement)&&_.isFunction(navElement.isVisible)&&_.isFunction(navElement.isEnabled)&&_.isFunction(navElement.focus)))throw new TypeError("not a valid navigable element");var navElement;navigable.shortcuts=shortcutRegistry(navigable.getElement()).add("tab shift+tab",function(e,key){keyNavigator.trigger(key,e.target)},{
propagate:!!config.propagateTab,prevent:!0}).add("enter",function(e){$(e.target).is(":text,textarea")||(e.preventDefault(),keyNavigator.activate(e.target))},{propagate:!1}).add("up down left right",function(e,key){var $target=$(e.target);$target.is(":text,textarea")||($target.is("img")||$target.hasClass("key-navigation-scrollable")||e.preventDefault(),keyNavigator.trigger(key,e.target))},{propagate:!1}),navigable.getElement().on("keyup"+_ns,function(e){32===(e.keyCode?e.keyCode:e.charCode)&&(e.target!==this&&$(e.target).is(":input")?e.stopPropagation():(e.preventDefault(),keyNavigator.activate(e.target)))}).on("blur"+_ns,function(){
var cursor=keyNavigator.getCursor();cursor&&cursor.navigable&&keyNavigator.trigger("blur",cursor)})}),_navigationGroups[id]=keyNavigator};return keyNavigatorFactory.get=function(id){if(_navigationGroups[id])return _navigationGroups[id]},keyNavigatorFactory}),define("ui/keyNavigation/navigableDomElement",["jquery","lodash","core/eventifier"],function($,_,eventifier){"use strict";var navigableDomElement=function($element){return $element=$($element),eventifier({init:function(){if(!$element.length)throw new TypeError("dom element does not exist");return $element.attr("tabindex",-1),$element.addClass("key-navigation-highlight"),this},destroy:function(){
return $element.removeClass("key-navigation-highlight"),this},getElement:function(){return $element},isVisible:function(){return $element.is(":visible")},isEnabled:function(){return!$element.is(":disabled")},focus:function(){return $element.focus(),this}})};return navigableDomElement.createFromDoms=function($elements){var list=[];return $elements.each(function(){list.push(navigableDomElement($(this)))}),list},navigableDomElement}),define("util/shortcut",["util/shortcut/registry"],function(shortcutRegistry){"use strict";return shortcutRegistry(window,{propagate:!1,prevent:!0})}),define("ui/modal",["jquery","core/pluginifier","core/dataattrhandler"],function($
,Pluginifier,DataAttrHandler){"use strict";var dataNs="ui.modal",defaults={modalCloseClass:"modal-close",modalOverlayClass:"modal-bg",startClosed:!1,disableClosing:!1,width:"responsive",minWidth:0,minHeight:0,vCenter:!0,$context:null,animate:400},modal={init:function(options){return(options=$.extend(!0,{},defaults,options)).animate&&("number"!=typeof options.animate?options.animate=defaults.animate:options.animate=Math.max(100,options.animate)),$(this).each(function(){var $modal=$(this);if(options.modalOverlay="__modal-bg-"+($modal.attr("id")||(new Date).getTime()),$modal.data(dataNs,options),0===$("#"+options.modalOverlay).length){var $overlay=$("<div/>"
).attr({id:options.modalOverlay,class:options.modalOverlayClass});options.$context instanceof $&&options.$context.length?($overlay.css("position","absolute"),options.$context.append($overlay)):$modal.after($overlay)}0!==$("."+options.modalCloseClass,$modal).length||options.disableClosing||$('<div class="'+options.modalCloseClass+'"><span class="icon-close"></span></div>').appendTo($modal),options.startClosed||modal._open($modal),$modal.trigger("create.modal")})},_destroy:function($element){return $element.each(function(){var $modal=$(this),options=$modal.data(dataNs);$modal.removeData(dataNs),$("#"+options.modalOverlay).remove(),$modal.hide(),
$element.trigger("destroyed.modal")})},_bindEvents:function($element){var options=$element.data(dataNs);options&&("responsive"===options.width&&$(window).on("resize.modal",function(e){e.preventDefault(),modal._resize($element)}),options.disableClosing||($("."+options.modalCloseClass,$element).on("click.modal",function(e){e.preventDefault(),closeModal($element,"close")}),$("#"+options.modalOverlay).on("click.modal",function(e){e.preventDefault(),closeModal($element,"overlay")}),options.disableEscape||$(document).on("keydown.modal",function(e){27===e.keyCode&&(e.preventDefault(),closeModal($element,"escape"))})))},_unBindEvents:function($element){
var options=$element.data(dataNs);options&&"responsive"===options.width&&$(window).off("resize.modal"),$element.off("click.modal"),options&&!options.disableClosing&&($("."+options.modalCloseClass,$element).off("click.modal"),$("#"+options.modalOverlay).off("click.modal"),$(document).off("keydown.modal"))},_open:function($element){var topOffset,onOpen,$overlay,to,modalHeight=$element.outerHeight(),windowHeight=$(window).height(),options=$element.data(dataNs);void 0!==options&&(onOpen=function(){$element.addClass("opened"),modal._bindEvents($element),$element.trigger("opened.modal")},topOffset=options.vCenter||windowHeight<modalHeight?40:(
windowHeight-modalHeight)/2,$element.parent().hasClass("no-scroll-offset")||$element.parents().map(function(){"BODY"!==this.tagName&&"HTML"!==this.tagName&&(topOffset+=parseInt($(this).scrollTop(),10))}),to={opacity:"1",top:topOffset+"px"},modal._resize($element),$overlay=$("#"+options.modalOverlay),$element.show(),options.animate&&$element.is(":visible")?($element.css({top:"-"+modalHeight+"px",display:"block"}),$overlay.fadeIn(options.animate-100),$element.animate(to,options.animate,onOpen)):($overlay.show(),$element.css(to),onOpen()))},_close:function($element){closeModal($element,"api")},_resize:function($element){var options=$element.data(dataNs),
windowWidth=parseInt($(window).width(),10),css={},modalWidth="responsive"===options.width?.7*windowWidth:parseInt(options.width,10);css.width=Math.max(modalWidth,options.minWidth),options.minHeight&&(css.minHeight=parseInt(options.minHeight)+"px"),$element.css(css)}};function closeModal($element,reason){var options=$element.data(dataNs),$overlay=$("#"+options.modalOverlay),onClose=function(){$element.removeClass("opened"),$element.css("display","none"),$element.trigger("closed.modal",reason)};modal._unBindEvents($element),options.animate&&$element.is(":visible")?($overlay.fadeOut(options.animate-100),$element.animate({opacity:"0",top:"-1000px"},
options.animate,onClose)):($overlay.hide(),$element.hide(),onClose())}return Pluginifier.register("modal",modal,{expose:["open","close","destroy"]}),function($container){new DataAttrHandler("modal",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$target.modal()})}}),define("ui/bulkActionPopup",["jquery","lodash","i18n","tpl!ui/bulkActionPopup/tpl/layout","ui/component","ui/keyNavigation/navigator","ui/keyNavigation/navigableDomElement","util/shortcut/registry","util/shortcut","util/namespace","ui/modal","select2"],function($,_,__,layoutTpl,component,keyNavigator,navigableDomElement,shortcutRegistry,globalShortcut,
namespaceHelper){"use strict";var _ns="bulk-action-popup";return function(config){var state={reasons:null,comment:""},instance=component({validate:function(){var $error,$element=this.getElement();return $element&&($(".feedback-error",$element).remove(),0!==$("select, textarea",$element).filter(function(){return 0===$.trim($(this).val()).length}).length)?($error=$('<div class="feedback-error small"></div>').text(__("All fields are required")),$element.find(".actions").prepend($error),!1):(this.trigger("ok",state),this.destroy(),!0)},cancel:function(){this.trigger("cancel"),this.destroy()}}).setTemplate(layoutTpl).on("destroy",function(){globalShortcut.enable(
),this.dialogShortcut&&(this.dialogShortcut.disable(),this.dialogShortcut.clear(),this.dialogShortcut=null),this.navigator&&(this.navigator.destroy(),this.navigator=null),this.getElement().removeClass("modal").modal("destroy")}).on("action-ok",function(){this.validate()}).on("action-cancel",function(){this.cancel()}).on("render",function(){var $reason,modalConfig,self=this,$element=this.getElement();modalConfig={disableEscape:!0,width:!this.config.single||this.config.deniedResources.length||this.config.reason?800:600},instance.getElement().addClass("modal").on("closed.modal",function(){instance.destroy()}).modal(modalConfig).focus(),_.isObject(
this.config.categoriesSelector)&&($reason=$element.find(".reason").children(".categories"),this.config.categoriesSelector.render($reason)),$element.on(namespaceHelper.namespaceAll("selected.cascading-combobox",_ns),function(e,reasons){state.reasons=reasons,self.config.allowShortcuts&&initNavigator(),self.trigger("change",state)}).on(namespaceHelper.namespaceAll("change",_ns),"textarea",function(){state.comment=$(this).val(),self.trigger("change",state)}).on(namespaceHelper.namespaceAll("click",_ns),".actions .done",function(e){e.preventDefault(),self.trigger("action-ok")}).on(namespaceHelper.namespaceAll("click",_ns),".actions .cancel",function(e){
e.preventDefault(),self.trigger("action-cancel")}),this.config.allowShortcuts&&(initNavigator(),globalShortcut.disable(),this.dialogShortcut=shortcutRegistry($("body"),{avoidInput:!0,propagate:!1,prevent:!0}).add(namespaceHelper.namespaceAll("Tab",_ns,!0),function(){self.navigator.next()},{avoidInput:!1}).add(namespaceHelper.namespaceAll("Shift+Tab",_ns,!0),function(){self.navigator.previous()},{avoidInput:!1}).add(namespaceHelper.namespaceAll("esc",_ns,!0),function(e,shortcut){instance.trigger("action-cancel",shortcut)}).add(namespaceHelper.namespaceAll("enter",_ns,!0),function(e,shortcut){instance.trigger("action-ok",shortcut)}))});function initNavigator(
){var $element=instance.getElement();instance.navigator=keyNavigator({id:_ns,replace:!0,loop:!0,group:$element,defaultPosition:1,elements:navigableDomElement.createFromDoms($element.find(":input:not(button,select.select2-offscreen)").add($element))}).on("activate",function(cursor,target){$(target).is($element)&&instance.validate()}).focus()}return instance.init(_.defaults(config,{deniedResources:[],reason:!1,allowShortcuts:!0,reasonRequired:!1,resourceCount:config.allowedResources.length,single:1===config.allowedResources.length,singleDenied:config.deniedResources&&1===config.deniedResources.length,resourceTypes:config.resourceType+"s"}))}}),define(
"tpl!ui/button/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<button class="',((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="btn-",stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},
data:data}):helper,buffer+=escapeExpression(stack1)},data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.small,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){return" small"},data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.cls,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.cls)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)},data),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(7,function(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}
))||0===stack1)&&(buffer+=stack1),buffer+=">\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <span class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n</button>\n"})}),define("ui/button",["lodash","ui/component","tpl!ui/button/tpl/button"],function(_,component,buttonTpl){"use strict";var defaults={small:!0};return function(config){return component({getId:function(){return this.config.id}},defaults).setTemplate(buttonTpl).on("render",function(){var self=this;this.getElement().on("click",function(e){e.preventDefault(),self.trigger("click",self.config.id)})}).init(config)}}),define("ui/stacker",["jquery"],function($){"use strict";var ns=".stacker",indexes={};function isElementValid($element){
return $element instanceof $&&$element.length}return function(scope){return function(scope){indexes[scope]||(indexes[scope]=1e3)}(scope=scope||"global"),{bringToFront:function($element){isElementValid($element)&&!function($element,scope){return parseInt($element.css("z-index"),10)>=indexes[scope]}($element,scope)&&($element.get(0).style.zIndex=function(scope){return indexes[scope]+=10,indexes[scope]}(scope))},autoBringToFront:function($element){var self=this;isElementValid($element)&&($element.off("mousedown"+ns),$element.on("mousedown"+ns,function(){self.bringToFront($element)}))},reset:function($element){isElementValid($element)&&($element.get(0
).style.zIndex="auto")},getCurrent:function(){return indexes[scope]}}}}),define("ui/component/stackable",["lodash","ui/stacker"],function(_,stackerFactory){"use strict";var defaultConfig={stackingScope:""},stackableComponent={bringToFront:function(){var $element=this.getElement();this._stacker.bringToFront($element)}};return function(component,config){return _.assign(component,stackableComponent),component.off(".makeStackable").on("init.makeStackable",function(){_.defaults(this.config,config||{},defaultConfig),this._stacker=stackerFactory(this.config.stackingScope)}).on("show.makeStackable",function(){this.bringToFront()}).on("render.makeStackable",function(
){var $element=this.getElement();this._stacker.reset($element),this._stacker.autoBringToFront($element),this.bringToFront()})}}),define("ui/interactUtils",["jquery","lodash","interact","core/mouseEvent"],function($,_,interact,triggerMouseEvent){"use strict";var simulateDrop;function iFrameDragFixCb(){_.isFunction(simulateDrop)&&simulateDrop(),interact.stop()}return{iFrameDragFixOn:function(simulateDropCb){simulateDrop=simulateDropCb,document.body.addEventListener("mouseleave",iFrameDragFixCb)},iFrameDragFixOff:function(){document.body.removeEventListener("mouseleave",iFrameDragFixCb)},tapOn:function(element,cb,delay){var domElement,eventOptions={bubbles:!0}
;element&&(domElement=element instanceof $?element.get(0):element,triggerMouseEvent(domElement,"mousedown",eventOptions),triggerMouseEvent(domElement,"mouseup",eventOptions),cb&&_.delay(cb,delay||0))},moveElement:function(element,dx,dy){var domElement=element instanceof $?element.get(0):element,x=(parseFloat(domElement.getAttribute("data-x"))||0)+dx,y=(parseFloat(domElement.getAttribute("data-y"))||0)+dy,transform="translate("+x+"px, "+y+"px) translateZ(0px)";domElement.style.webkitTransform=transform,domElement.style.transform=transform,domElement.setAttribute("data-x",x),domElement.setAttribute("data-y",y)},restoreOriginalPosition:function(element){
var domElement=element instanceof $?element.get(0):element;domElement.style.webkitTransform="translate(0px, 0px) translateZ(0px)",domElement.style.transform="translate(0px, 0px) translateZ(0px)",domElement.setAttribute("data-x",0),domElement.setAttribute("data-y",0)}}}),define("util/position",[],function(){"use strict";return{isInside:function(container,element){var containerCoords,elementCoords;if(container instanceof HTMLElement&&element instanceof HTMLElement&&(containerCoords=container.getBoundingClientRect(),elementCoords=element.getBoundingClientRect(),"object"==typeof containerCoords&&"object"==typeof elementCoords)
)return elementCoords.top>=containerCoords.top&&elementCoords.top<=containerCoords.bottom&&elementCoords.left>=containerCoords.left&&elementCoords.left<=containerCoords.right&&elementCoords.bottom<=containerCoords.bottom&&elementCoords.bottom>=containerCoords.top&&elementCoords.right<=containerCoords.right&&elementCoords.right>=containerCoords.left},isOver:function(container,element){var containerCoords,elementCoords;if(container instanceof HTMLElement&&element instanceof HTMLElement&&(containerCoords=container.getBoundingClientRect(),elementCoords=element.getBoundingClientRect(),"object"==typeof containerCoords&&"object"==typeof elementCoords)
)return elementCoords.top>=containerCoords.top&&elementCoords.top<=containerCoords.bottom&&elementCoords.left>=containerCoords.left&&elementCoords.left<=containerCoords.right}}}),define("tpl!ui/dynamicComponent/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="dynamic-component-container">\n    <div class="dynamic-component-title-bar">\n        <h3>',stack1=(helper=helpers.title
)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h3>\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.resizable,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var helper,options,buffer="";return buffer+='\n        <a title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Reset the original size",options):helperMissing.call(depth0,"__","Reset the original size",options)))+'" class="reset" href="#"></a>\n        '},data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+='\n        <a title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Close",options):helperMissing.call(depth0,"__","Close",options)))+'" class="closer" href="#"></a>\n    </div>\n    <div class="dynamic-component-content">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.draggableContainer,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){return'\n        <div class="dynamic-component-layer"></div>\n        '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>\n"})}),define("ui/dynamicComponent",["jquery","lodash",
"interact","ui/component","ui/component/stackable","ui/transformer","ui/interactUtils","util/position","lib/uuid","tpl!ui/dynamicComponent/layout"],function($,_,interact,componentFactory,makeStackable,transformer,interactUtils,position,uuid,layoutTpl){"use strict";var _defaults={title:"",resizable:!0,draggable:!0,width:240,height:360,minWidth:150,maxWidth:600,minHeight:100,maxHeight:900,largeWidthThreshold:380,smallWidthThreshold:200,draggableContainer:"parent",preserveAspectRatio:!0,top:0,left:0},dynamicComponent={reset:function(){return this.is("rendered")&&!this.is("disabled")&&(this.resetPosition(),this.resetSize(),this.trigger("reset")),this},
resetPosition:function(){var $element=this.getElement();return this.is("rendered")&&!this.is("disabled")&&(interactUtils.restoreOriginalPosition($element),this.setCoords(),$element.css({left:this.config.left,top:this.config.top}),this.trigger("move",this.position)),this},setCoords:function(){var $element=this.getElement();this.position.x=parseFloat($element.attr("data-x"))+this.config.left,this.position.y=parseFloat($element.attr("data-y"))+this.config.top},resetSize:function(){var $element,$content,$titleBar,self=this;return this.is("rendered")&&!this.is("disabled")&&($element=this.getElement(),$content=$(".dynamic-component-content",$element),$titleBar=$(
".dynamic-component-title-bar",$element),$element.css({width:this.config.width+"px",height:this.config.height+"px"}),_.defer(function(){self.position.width=self.config.width,self.position.height=self.config.height,self.position.contentWidth=$titleBar.width(),self.position.contentHeight=$element.height()-$titleBar.outerHeight(),$content.css({width:self.position.contentWidth+"px",height:self.position.contentHeight+"px"}),self.trigger("resize",self.position)})),this}};return function(specs,defaults){var component;return defaults=_.defaults(defaults||{},_defaults),specs=_.defaults(specs||{},dynamicComponent),component=componentFactory(specs,defaults
).setTemplate(layoutTpl).on("init",function(){this.id=uuid()}).on("render",function(){var interactElement,self=this,$element=this.getElement(),config=this.config,$content=$(".dynamic-component-content",$element),$titleBar=$(".dynamic-component-title-bar",$element),$contentOverlay=$(".dynamic-component-layer",$element),pixelRatio=window.devicePixelRatio;function getRestriction(){var draggableContainer=getDraggableContainer();return draggableContainer?{restriction:draggableContainer,endOnly:!1}:{restriction:"parent",endOnly:!1}}function getDraggableContainer(){var draggableContainer=config.draggableContainer
;return draggableContainer instanceof $&&draggableContainer.length&&(draggableContainer=draggableContainer[0]),draggableContainer}self.position={x:this.config.left,y:this.config.top,width:this.config.width,height:this.config.height},this.resetPosition(),this.resetSize(),$titleBar.on("click touchstart",".closer",function(e){e.preventDefault(),self.hide()}).on("click touchstart",".reset",function(e){e.preventDefault(),self.resetSize()}),this.trigger("rendercontent",$content),interactElement=interact($element[0]),config.draggable&&(interactElement.draggable({inertia:!1,autoScroll:!0,manualStart:!0,restrict:_.merge(getRestriction(),{elementRect:{left:0,right:1,
top:0,bottom:1}}),onmove:function(event){interactUtils.moveElement($element,event.dx,event.dy)},onend:function(){self.setCoords()}}),interact($titleBar[0]).on("down",function(event){var interaction=event.interaction,handle=event.currentTarget;interaction.start({name:"drag",edges:{top:handle.dataset.top,left:handle.dataset.left,bottom:handle.dataset.bottom,right:handle.dataset.right}},interactElement,$element[0])}),$(window).on("resize.dynamic-component-"+self.id,function(){var container;window.devicePixelRatio!==pixelRatio&&(pixelRatio=window.devicePixelRatio,container=getDraggableContainer(),!1===position.isInside(container,$element[0])&&self.resetPosition(
))})),config.resizable&&interactElement.resizable({preserveAspectRatio:config.preserveAspectRatio,autoScroll:!0,restrict:getRestriction(),edges:{left:!0,right:!0,bottom:!0,top:!0},onmove:function(e){var width=e.rect.width<config.minWidth?config.minWidth:e.rect.width>config.maxWidth?config.maxWidth:e.rect.width,height=e.rect.height<config.minHeight?config.minHeight:e.rect.height>config.maxHeight?config.maxHeight:e.rect.height;width<=config.smallWidthThreshold?$element.addClass("small").removeClass("large"):width>=config.largeWidthThreshold?$element.addClass("large").removeClass("small"):$element.removeClass("small").removeClass("large"),
interactUtils.moveElement($element,width>config.minWidth&&width<config.maxWidth?e.deltaRect.left:0,height>config.minHeight&&height<config.maxHeight?e.deltaRect.top:0),self.position.width=width,self.position.height=height,self.setCoords(),$element.css({width:width+"px",height:height+"px"}),_.defer(function(){self.position.contentWidth=$titleBar.width(),self.position.contentHeight=$element.height()-$titleBar.outerHeight(),$content.css({width:self.position.contentWidth+"px",height:self.position.contentHeight+"px"}),self.trigger("resize",self.position)})}}),interactElement.on("dragstart resizeinertiastart resizestart",function(){$contentOverlay.addClass(
"dragging-active")}).on("dragend resizeend",function(){$contentOverlay.removeClass("dragging-active")}),$element.on("mousedown",function(){/\-resize/.test($("html").css("cursor"))&&!$contentOverlay.hasClass("dragging-active")&&$contentOverlay.addClass("dragging-active")})}).on("destroy",function(){$(window).off("resize.dynamic-component-"+this.id)}),makeStackable(component,{stackingScope:defaults.stackingScope})}}),define("tpl!lib/calculator/template",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},
'<div class="calcContainer">\n    <form action="">\n        <input type="text" class="calcDisplay" readonly="readonly"/>\n\n        <button type="button" value="%" data-key="%" class="calcFunction calcFirst calcPercentage">&#37;</button>\n        <button type="button" value="sqrt" data-key="sqrt" class="calcFunction calcSqrt">&radic;</button>\n        <button type="button" value="pow" data-key="pow" class="calcFunction calcPower">x<sup class="letter">y</sup></button>\n        <button type="button" value="1/x" data-key="1/x" class="calcFunction calcInverse"><sup class="digit">1</sup>&frasl;<sub>x</sub></button>\n\n        <button type="button" value="C" data-key="C" class="calcClear calcFirst">C</button>\n        <button type="button" value="CE" data-key="CE" class="calcClear">CE</button>\n        <button type="button" value="DEL" data-key="DEL" class="calcClear">DEL</button>\n        <button type="button" value="/" data-key="/" class="calcFunction calcDivision">&divide;</button>\n\n        <button type="button" value="7" data-key="7" class="calcInput calcDigit calcFirst">7</button>\n        <button type="button" value="8" data-key="8" class="calcInput calcDigit">8</button>\n        <button type="button" value="9" data-key="9" class="calcInput calcDigit">9</button>\n        <button type="button" value="*" data-key="*" class="calcFunction calcMultiplication">&times;</button>\n\n        <button type="button" value="4" data-key="4" class="calcFirst calcDigit calcInput">4</button>\n        <button type="button" value="5" data-key="5" class="calcInput calcDigit">5</button>\n        <button type="button" value="6" data-key="6" class="calcInput calcDigit">6</button>\n        <button type="button" value="-" data-key="-" class="calcFunction calcSubtraction">&minus;</button>\n\n        <button type="button" value="1" data-key="1" class="calcFirst calcDigit calcInput">1</button>\n        <button type="button" value="2" data-key="2" class="calcInput calcDigit">2</button>\n        <button type="button" value="3" data-key="3" class="calcInput calcDigit">3</button>\n        <button type="button" value="+" data-key="+" class="calcFunction calcSum">+</button>\n\n        <button type="button" value="+/-" data-key="+/-" class="calcFirst calcInput calcPlusMinus">&plusmn;</button>\n        <button type="button" value="0" data-key="0" class="calcInput calcDigit">0</button>\n        <button type="button" value="." data-key="." class="calcInput calcDot">.</button>\n        <input type="submit" value="=" data-key="=" class="calcFunction calcSubmit calcEqual"/>\n    </form>\n</div>'
})}),define("lib/gamp/gamp",[],function(){"use strict";function gamp(){for(var val,digits,point,i=arguments.length-1,factor=-1/0;0<=i;)factor=Math.max(factor,(val=arguments[i--],digits=void 0,digits=String(val),(point=digits.indexOf("."))<0?1:Math.pow(10,digits.length-point-1)));return Math.abs(factor)}return gamp.normalize=function(val,factor){return Math.round(factor*Number(val))},gamp.round=function(val,digits){return Number(Number(val).toPrecision(void 0===digits?16:digits))},gamp.add=function(a,b){var factor=gamp(a,b);return gamp.round((gamp.normalize(a,factor)+gamp.normalize(b,factor))/factor)},gamp.sub=function(a,b){var factor=gamp(a,b)
;return gamp.round((gamp.normalize(a,factor)-gamp.normalize(b,factor))/factor)},gamp.mul=function(a,b){var factor=gamp(a,b);return gamp.round(gamp.normalize(a,factor)*gamp.normalize(b,factor)/(factor*factor),15)},gamp.div=function(a,b){var factor=gamp(a,b);return gamp.round(gamp.normalize(a,factor)/gamp.normalize(b,factor))},gamp.pow=function(a,b){var factor=gamp(a),ta=gamp.normalize(a,factor),ib=Math.floor(b),fb=b-ib,res=ib?Math.pow(ta,ib)/Math.pow(factor,ib):1;return fb&&(res=gamp.div(gamp.mul(res,Math.pow(ta,fb)),Math.pow(factor,fb))),gamp.round(res,15)},gamp}),define("lib/calculator/index",["jquery","lodash","tpl!lib/calculator/template","i18n",
"lib/gamp/gamp"],function($,_,templateTpl,__,gamp){"use strict";var JSCALC={},calculators={},nextID=0,_defaults={template:templateTpl};function createCalc(calcMod,config){var calcTemplate,forms,form,display,operation,lastKeyDown,total=0,clearNext=!0,dot=/\./,lastNum=null,getLastNum=!1,operationPressed=!1,calcObj={},id=nextID;if(config=_.defaults(config||{},_defaults),!_.isFunction(config.template))throw new TypeError("invalid template in configuration");function setFocus(){display.focus()}function calculate(val){switch(total&&!isNaN(total)||(total=0),operation){case"+":total=gamp.add(total,val);break;case"-":total=gamp.sub(total,val);break;case"*":
total=gamp.mul(total,val);break;case"/":total=gamp.div(total,val);break;case"pow":total=gamp.pow(total,val)}display.value=total}function handleInput(e){var key,code,val,target,isOperation=!1;switch((e=e||window.event).type){case"keydown":switch(lastKeyDown=code=e.keyCode,code){case 27:key="C";break;case 8:key="DEL";break;case 46:key="CE";break;case 111:case 191:key="/";break;default:return!0}break;case"keypress":if(13===(code=e.charCode||e.keyCode)||9===code||37===lastKeyDown||39===lastKeyDown)return!0;if(27===code||8===code||46===lastKeyDown)return!1;key=188===lastKeyDown?".":String.fromCharCode(code).toLowerCase();break;case"click":if("INPUT"!==(
target=e.target||e.srcElement).tagName&&"BUTTON"!==target.tagName||"button"!==target.type)return!0;key=target.value;break;case"calculatorPressMethod":key=e.calckey;break;default:return!0}switch(val=parseFloat(display.value),key){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":clearNext?(display.value=key,clearNext=!1):"."===key&&dot.test(display.value)||(display.value+=key);break;case"*":case"+":case"-":case"/":case"pow":operationPressed||(0===total||null!==lastNum?total=val:calculate(val),clearNext=getLastNum=!(lastNum=null)),operation=key,isOperation=!0;break;case"C":display.blur(),total=0,lastNum=null,getLastNum=!(
clearNext=!(operation="")),display.value="0";break;case"CE":display.value="0",clearNext=!0;break;case"DEL":display.value=display.value.slice(0,display.value.length-1);break;case"+/-":display.value=gamp.mul(val,-1);break;case"%":val&&(display.value=gamp.div(gamp.mul(total,val),100));break;case"sqrt":display.value=0<=val?Math.sqrt(val):__("Invalid input for function");break;case"a":case"c":case"v":case"x":if(e.ctrlKey)return!0;break;case"1/x":case"r":display.value=val?gamp.div(1,val):__("Cannot divide by zero");break;case"=":form.onsubmit()}return operationPressed=isOperation,setFocus(),isOperation||$(display).trigger("change"),_initButtonHighlight(form,key),
!1}return calcTemplate=config.template.call(null),nextID+=1,calcMod.innerHTML+=calcTemplate,forms=calcMod.getElementsByTagName("form"),form=forms[forms.length-1],(display=form.getElementsByTagName("input")[0]).setAttribute("autocomplete","off"),display.value="0",display.onkeydown=display.onkeypress=form.onclick=handleInput,form.onsubmit=function(){return getLastNum&&(lastNum=parseFloat(display.value)||0,getLastNum=!1),calculate(lastNum),clearNext=!0,setFocus(),$(display).trigger("change"),_initButtonHighlight(form,"="),!1},calcObj.focus=function(){setFocus()},calcObj.press=function(button){var buttons,num,i;if("number"==typeof button)buttons=button.toString(
).split("");else{if("string"!=typeof button||!button)return this;buttons=[button]}for(num=buttons.length,i=0;i<num;i+=1)handleInput({type:"calculatorPressMethod",calckey:buttons[i]});return this},calcObj.remove=function(){display.onkeydown=display.onkeypress=form.onclick=null,calcMod.removeChild(form.parentNode),delete calculators[id],calcObj=null},calcObj.container=calcMod,calculators[id]=calcObj}function _initButtonHighlight(form,key){var $btn=$(form).find('[data-key="'+key+'"]');$btn.addClass("triggered"),setTimeout(function(){$btn.removeClass("triggered")},160)}return JSCALC.get=function(container){if(!container||1!==container.nodeType)return null;var id
,calc,calcs=calculators;for(id in calcs)if(calcs.hasOwnProperty(id)&&container===calcs[id].container){calc=calcs[id];break}return calc||null},JSCALC.getCalcs=function(){var id,calcArray=[],calcs=calculators;for(id in calcs)calcs.hasOwnProperty(id)&&(calcArray[calcArray.length]=calcs[id]);return calcArray},JSCALC.init=function(elem,config){var calcMod,len,i,calcMods=[],args=!1,newCalcs=[];if("string"==typeof elem&&(elem=document.getElementById(elem)),"object"==typeof elem&&1===elem.nodeType?(elem.className?-1===elem.className.indexOf("calc")&&(elem.className+=" calc"):elem.className="calc",calcMods[0]=elem,args=!0):elem instanceof $?elem.each(function(){
calcMods.push(this),args=!0}):$(".calc").each(function(){calcMods.push(this),args=!0}),len=calcMods.length)for(i=0;i<len;i+=1)calcMod=calcMods[i],JSCALC.get(calcMod)||(newCalcs[newCalcs.length]=createCalc(calcMod,config));return args?newCalcs[0]||null:newCalcs},JSCALC.removeAll=function(){var id,calcs=calculators;for(id in calcs)calcs.hasOwnProperty(id)&&calcs[id].remove()},JSCALC}),define("ui/calculator",["jquery","lodash","i18n","ui/dynamicComponent","lib/calculator/index"],function($,_,__,dynamicComponent,calculatorBuild){"use strict";var _defaults={title:__("Calculator"),preserveAspectRatio:!1,width:240,height:360,minWidth:150,minHeight:220,
alternativeTemplate:null},computeFontSize=function(width,height){return(width*(10/240)+height*(10/340))/2},calculator={press:function(key){return this.calc.press(key),this}};function adjustFontSize($text,fontRatio,fontSize){var len,width=$text.width(),height=$text.height(),charWidth=fontSize/fontRatio;$text.is(":input")?width<=(len=$text.val().length)*charWidth&&(fontSize=Math.max(height/4,Math.min(width/len*(fontRatio||1.6),fontSize))):fontSize=computeFontSize(width,height),$text.css("fontSize",fontSize)}return function(config){return config=_.defaults(config||{},_defaults),dynamicComponent(calculator).on("rendercontent",function($content){var $input,
$element,$sample,fontRatio,self=this,calcConfig={};_.isFunction(config.alternativeTemplate)&&(calcConfig.template=config.alternativeTemplate),this.calc=calculatorBuild.init($content,calcConfig),$input=$content.find("input.calcDisplay").on("change",function(){adjustFontSize($input,self.fontRatio,self.fontSize)}),this.fontSize=parseFloat($input.css("font-size")),this.fontRatio=($element=$input,$sample=$("<div />").text("0").css({"font-family":$element.css("font-family"),"font-size":"10px","line-height":"10px",position:"absolute",padding:"0",top:-1e3,left:-1e3}).appendTo("body"),fontRatio=$sample.height()/$sample.width(),$sample.remove(),fontRatio)}).after(
"show",function(){var self=this;_.defer(function(){var $display=self.getElement().find(".calcDisplay"),strLength=$display.val().length+1;$display.focus(),$display[0].setSelectionRange(strLength,strLength)})}).on("reset",function(){this.calc.press("C")}).on("resize",function(){var $element=this.getElement();$element&&(adjustFontSize($element.find("form"),this.fontRatio,this.fontSize),adjustFontSize($element.find("input.calcDisplay"),this.fontRatio,this.fontSize))}).on("destroy",function(){this.calc&&this.calc.remove()}).init(config)}}),define("tpl!ui/bulkActionPopup/tpl/select",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<span class="cascading-combo-box">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.comboboxLabel,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="<label>",stack1=(helper=helpers.comboboxLabel)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.comboboxLabel)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</label>"
},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <select class="" data-id="',stack1=(helper=helpers.comboboxId)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.comboboxId)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-has-search="false">\n        <option></option>\n        ',((stack1=helpers.each.call(depth0,depth0&&depth0.options,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <option value="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-categories="',stack1=(helper=helpers.categories)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.categories)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</option>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </select>\n</span>"})}),define(
"ui/cascadingComboBox",["jquery","lodash","i18n","ui/component","tpl!ui/bulkActionPopup/tpl/select","select2"],function($,_,__,component,selectTpl){"use strict";var selectedValues={};return function(options){return component().on("render",function($container){if(_.isArray(options.categoriesDefinitions)&&_.isArray(options.categories)){var $comboBox=function createCombobox(level,categoriesDefinitions,categories){if(!categoriesDefinitions[level])throw"missing category definition on level : "+level;var _categories,$comboBox,categoryDef=categoriesDefinitions[level];if(categoryDef.id)return _categories=_.map(categories,function(cat){var _cat=_.clone(cat)
;return _cat.categories&&(_cat.categories=JSON.stringify(_cat.categories)),_cat}),$comboBox=$(selectTpl({comboboxId:categoryDef.id,comboboxLabel:categoryDef.label||"",options:_categories})),(categoriesDefinitions[level].$comboBox=$comboBox).on("change",function(){var subCategories,$subComboBox,$selected=$comboBox.find(":selected");selectedValues={},_.forEach(categoriesDefinitions,function(category,key){category.$comboBox&&level<key&&(category.$comboBox.remove(),category.$comboBox=null)}),subCategories=$selected.data("categories"),_.isArray(subCategories)&&subCategories.length&&($subComboBox=createCombobox(level+1,categoriesDefinitions,subCategories))&&(
categoriesDefinitions[level+1].$comboBox=$subComboBox,$comboBox.after($subComboBox)),_.forEach(categoriesDefinitions,function(value){if(value.$comboBox){var $select=value.$comboBox.find("select");selectedValues[value.id]=$select.val()}}),$comboBox.trigger("selected.cascading-combobox",[selectedValues])}),$comboBox.find("select").select2({dropdownAutoWidth:!0,placeholder:categoryDef.placeholder||__("select..."),minimumResultsForSearch:-1}),$comboBox}(0,options.categoriesDefinitions,options.categories);$container.append($comboBox)}}).init(options)}}),function(){var a,f,c,e,b,g,i,d,h,j;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(
window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,f={timestamp:"HAEG",version:"4.4.7 TAO-7",revision:"3e00178",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var g=document.getElementsByTagName("script"),c=0;c<g.length;c++){var d=g[c].src.match(a);if(d){b=d[1];break}}if(-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+b:location.href.match(/^[^\?]*\/(?:)/)[0]+b),!b
)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(b){return-1==b.indexOf(":/")&&0!==b.indexOf("/")&&(b=this.basePath+b),this.timestamp&&"/"!=b.charAt(b.length-1)&&!/[&?]t=/.test(b)&&(b+=(0<=b.indexOf("?")?"&":"?")+"t="+this.timestamp),b},domReady:function(){function b(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",b,!1),a()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",b),a())}catch(d){}}function a(){for(var b;b=c.shift();)b()}var c=[]
;return function(a){if(c.push(a),"complete"===document.readyState&&setTimeout(b,1),1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",b,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",b),window.attachEvent("onload",b),a=!1;try{a=!window.frameElement}catch(e){}document.documentElement.doScroll&&a&&function g(){try{document.documentElement.doScroll("left")}catch(k){return void setTimeout(g,1)}b()}()}}}()},c=window.CKEDITOR_GETURL;if(c){var e=f.getUrl;f.getUrl=function(b){return c.call(f,b)||e.call(f,b)}}return f}()),CKEDITOR.event||(CKEDITOR.event=function(){},
CKEDITOR.event.implementOn=function(a){var c,f=CKEDITOR.event.prototype;for(c in f)null==a[c]&&(a[c]=f[c])},CKEDITOR.event.prototype=function(){function a(a){var b=f(this);return b[a]||(b[a]=new c(a))}var f=function(a){return(a=a.getPrivate&&a.getPrivate()||a._||(a._={})).events||(a.events={})},c=function(a){this.name=a,this.listeners=[]};return c.prototype={getListenerIndex:function(a){for(var b=0,g=this.listeners;b<g.length;b++)if(g[b].fn==a)return b;return-1}},{define:function(c,b){var g=a.call(this,c);CKEDITOR.tools.extend(g,b,!0)},on:function(c,b,g,i,d){function h(k,a,d,l){return!(k={name:c,sender:this,editor:k,data:a,listenerData:i,stop:d,cancel:l,
removeListener:f})!==b.call(g,k)&&k.data}function f(){l.removeListener(c,b)}var k=a.call(this,c);if(k.getListenerIndex(b)<0){k=k.listeners,g||(g=this),isNaN(d)&&(d=10);var l=this;h.fn=b,h.priority=d;for(var o=k.length-1;0<=o;o--)if(k[o].priority<=d)return k.splice(o+1,0,h),{removeListener:f};k.unshift(h)}return{removeListener:f}},once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];return a[1]=function(a){return a.removeListener(),b.apply(this,arguments)},this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:function(){var a=0,b=function(){a=1},g=0,
c=function(){g=1};return function(d,h,j){var k=f(this)[d],l=(d=a,g);if((a=g=0,k)&&(o=k.listeners).length)for(var n,o=o.slice(0),m=0;m<o.length;m++){if(k.errorProof)try{n=o[m].call(this,j,h,b,c)}catch(p){}else n=o[m].call(this,j,h,b,c);if(!1===n?g=1:void 0!==n&&(h=n),a||g)break}return h=!g&&(void 0===h||h),a=d,g=l,h}}(),fireOnce:function(a,b,g){return b=this.fire(a,b,g),delete f(this)[a],b},removeListener:function(a,b){var g=f(this)[a];if(g){var c=g.getListenerIndex(b);0<=c&&g.listeners.splice(c,1)}},removeAllListeners:function(){var b,a=f(this);for(b in a)delete a[b]},hasListeners:function(a){return(a=f(this)[a])&&0<a.listeners.length}}}()),
CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,f){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fire.call(this,a,f,this)},CKEDITOR.editor.prototype.fireOnce=function(a,f){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fireOnce.call(this,a,f,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),f={ie:-1<a.indexOf("trident/"),webkit:-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),
mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||document.documentMode<10),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var b=document.domain,a=window.location.hostname;return b!=a&&b!="["+a+"]"},secure:"https:"==location.protocol};f.gecko="Gecko"==navigator.product&&!f.webkit&&!f.ie,f.webkit&&(-1<a.indexOf("chrome")?f.chrome=!0:f.safari=!0);var c=0;if(f.ie&&(c=f.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,f.ie9Compat=9==c,f.ie8Compat=8==c,f.ie7Compat=7==c,f.ie6Compat=c<7||f.quirks),f.gecko){
var e=a.match(/rv:([\d\.]+)/);e&&(c=1e4*(e=e[1].split("."))[0]+100*(e[1]||0)+1*(e[2]||0))}return f.air&&(c=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),f.webkit&&(c=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),f.version=c,f.isCompatible=f.iOS&&534<=c||!f.mobile&&(f.ie&&6<c||f.gecko&&2e4<=c||f.air&&1<=c||f.webkit&&522<=c||!1),f.hidpi=2<=window.devicePixelRatio,f.needsBrFiller=f.gecko||f.webkit||f.ie&&10<c,f.needsNbspFiller=f.ie&&c<11,f.cssClass="cke_browser_"+(f.ie?"ie":f.gecko?"gecko":f.webkit?"webkit":"unknown"),f.quirks&&(f.cssClass=f.cssClass+" cke_browser_quirks"),f.ie&&(f.cssClass=f.cssClass+" cke_browser_ie"+(
f.quirks?"6 cke_browser_iequirks":f.version)),f.air&&(f.cssClass=f.cssClass+" cke_browser_air"),f.iOS&&(f.cssClass=f.cssClass+" cke_browser_ios"),f.hidpi&&(f.cssClass=f.cssClass+" cke_hidpi"),f}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript",a.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(a)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)},
CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,f=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():f&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*f))}),CKEDITOR.status="basic_loaded"),CKEDITOR.dom={},a=[],f=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",c=/&/g,e=/>/g,b=/</g,g=/"/g,i=/&amp;/g,d=/&gt;/g,h=/&lt;/g,j=/&quot;/g,CKEDITOR.on("reset",function(){a=[]}),CKEDITOR.tools={arrayCompare:function(b,a){if(!b&&!a)return!0;if(!b||!a||b.length!=a.length)return!1;for(var g=0;g<b.length;g++)if(b[g]!=a[g])return!1;return!0},clone:function(b){var a;if(
b&&b instanceof Array){a=[];for(var g=0;g<b.length;g++)a[g]=CKEDITOR.tools.clone(b[g]);return a}if(null===b||"object"!=typeof b||b instanceof String||b instanceof Number||b instanceof Boolean||b instanceof Date||b instanceof RegExp||b.nodeType||b.window===b)return b;for(g in a=new b.constructor,b)a[g]=CKEDITOR.tools.clone(b[g]);return a},capitalize:function(b,a){return b.charAt(0).toUpperCase()+(a?b.slice(1):b.slice(1).toLowerCase())},extend:function(b){var g,d,a=arguments.length;"boolean"==typeof(g=arguments[a-1])?a--:"boolean"==typeof(g=arguments[a-2])&&(d=arguments[a-1],a-=2);for(var c=1;c<a;c++){var e,i=arguments[c];for(e in i)!0!==g&&null!=b[e]||(
!d||e in d)&&(b[e]=i[e])}return b},prototypedCopy:function(b){var a=function(){};return a.prototype=b,new a},copy:function(b){var g,a={};for(g in b)a[g]=b[g];return a},isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)},isEmpty:function(b){for(var a in b)if(b.hasOwnProperty(a))return!1;return!0},cssVendorPrefix:function(b,a,g){return g?f+b+":"+a+";"+b+":"+a:((g={})[b]=a,g[f+b]=a,g)},cssStyleToDomStyle:function(){var b=document.createElement("div").style,a=void 0!==b.cssFloat?"cssFloat":void 0!==b.styleFloat?"styleFloat":"float";return function(b){return"float"==b?a:b.replace(/-./g,function(b){return b.substr(1).toUpperCase()})}}(),
buildStyleHtml:function(b){b=[].concat(b);for(var a,g=[],d=0;d<b.length;d++)(a=b[d])&&(/@import|[{}]/.test(a)?g.push("<style>"+a+"</style>"):g.push('<link type="text/css" rel=stylesheet href="'+a+'">'));return g.join("")},htmlEncode:function(a){return(""+a).replace(c,"&amp;").replace(e,"&gt;").replace(b,"&lt;")},htmlDecode:function(b){return b.replace(i,"&").replace(d,">").replace(h,"<")},htmlEncodeAttr:function(a){return a.replace(g,"&quot;").replace(b,"&lt;").replace(e,"&gt;")},htmlDecodeAttr:function(b){return b.replace(j,'"').replace(h,"<").replace(d,">")},getNextNumber:function(){var b=0;return function(){return++b}}(),getNextId:function(){
return"cke_"+this.getNextNumber()},override:function(b,a){var g=a(b);return g.prototype=b.prototype,g},setTimeout:function(b,a,g,d,c){return c||(c=window),g||(g=c),c.setTimeout(function(){d?b.apply(g,[].concat(d)):b.apply(g)},a||0)},trim:function(){var b=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(a){return a.replace(b,"")}}(),ltrim:function(){var b=/^[ \t\n\r]+/g;return function(a){return a.replace(b,"")}}(),rtrim:function(){var b=/[ \t\n\r]+$/g;return function(a){return a.replace(b,"")}}(),indexOf:function(b,a){if("function"==typeof a){for(var g=0,d=b.length;g<d;g++)if(a(b[g]))return g}else{if(b.indexOf)return b.indexOf(a);for(g=0,d=b.length;g<d;g++
)if(b[g]===a)return g}return-1},search:function(b,a){var g=CKEDITOR.tools.indexOf(b,a);return 0<=g?b[g]:null},bind:function(b,a){return function(){return b.apply(a,arguments)}},createClass:function(b){var a=b.$,g=b.base,d=b.privates||b._,c=b.proto;if(b=b.statics,!a&&(a=function(){g&&this.base.apply(this,arguments)}),d){var i=a;a=function(){var a,b=this._||(this._={});for(a in d){var g=d[a];b[a]="function"==typeof g?CKEDITOR.tools.bind(g,this):g}i.apply(this,arguments)}}return g&&(a.prototype=this.prototypedCopy(g.prototype),(a.prototype.constructor=a).base=g,a.baseProto=g.prototype,a.prototype.base=function(){this.base=g.prototype.base,g.apply(this,arguments
),this.base=arguments.callee}),c&&this.extend(a.prototype,c,!0),b&&this.extend(a,b,!0),a},addFunction:function(b,g){return a.push(function(){return b.apply(g||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var g=a[b];return g&&g.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a,b=/^-?\d+\.?\d*px$/;return function(g){return a=CKEDITOR.tools.trim(g+"")+"px",b.test(a)?a:g||""}}(),convertToPx:function(){var b;return function(a){return b||(b=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),
CKEDITOR.document.getBody().append(b)),/%$/.test(a)?a:(b.setStyle("width",a),b.$.clientWidth)}}(),repeat:function(b,a){return Array(a+1).join(b)},tryThese:function(){for(var b,a=0,g=arguments.length;a<g;a++){var d=arguments[a];try{b=d();break}catch(c){}}return b},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(b){return function(){var a=arguments,g=this;window.setTimeout(function(){b.apply(g,a)},0)}},normalizeCssText:function(b,a){var d,g=[],c=CKEDITOR.tools.parseCssText(b,!0,a);for(d in c)g.push(d+":"+c[d]);return g.sort(),g.length?g.join(";")+";":""},convertRgbToHex:function(b){return b.replace(
/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(b,a,g,d){for(b=[a,g,d],a=0;a<3;a++)b[a]=("0"+parseInt(b[a],10).toString(16)).slice(-2);return"#"+b.join("")})},parseCssText:function(b,a,g){var d={};return g&&((g=new CKEDITOR.dom.element("span")).setAttribute("style",b),b=CKEDITOR.tools.convertRgbToHex(g.getAttribute("style")||"")),b&&";"!=b&&b.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(b,g,c){a&&("font-family"==(g=g.toLowerCase())&&(c=c.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),c=CKEDITOR.tools.trim(c)),d[g]=c}),d},writeCssText:function(b,a){var g,d=[];for(g in b)d.push(g+":"+b[g])
;return a&&d.sort(),d.join("; ")},objectCompare:function(b,a,g){var d;if(!b&&!a)return!0;if(!b||!a)return!1;for(d in b)if(b[d]!=a[d])return!1;if(!g)for(d in a)if(b[d]!=a[d])return!1;return!0},objectKeys:function(b){var g,a=[];for(g in b)a.push(g);return a},convertArrayToObject:function(b,a){var g={};1==arguments.length&&(a=!0);for(var d=0,c=b.length;d<c;++d)g[b[d]]=a;return g},fixDomain:function(){for(var b;;)try{b=window.parent.document.domain;break}catch(a){if(!(b=b?b.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=b}return!!b},eventsBuffer:function(b,a){function g(){c=(new Date).getTime(),d=!1,a()}var d,c=0;return{input:function(){if(!d){
var a=(new Date).getTime()-c;a<b?d=setTimeout(g,b-a):g()}},reset:function(){d&&clearTimeout(d),d=c=0}}},enableHtml5Elements:function(b,a){for(var c,g=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],d=g.length;d--;)c=b.createElement(g[d]),a&&b.appendChild(c)},checkIfAnyArrayItemMatches:function(b,a){for(var g=0,d=b.length;g<d;++g)if(b[g].match(a))return!0;return!1},checkIfAnyObjectPropertyMatches:function(b,a){for(var g in b)if(g.match(a))return!0;return!1},
transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="},CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,f=function(b,a){for(var g=CKEDITOR.tools.clone(b),d=1;d<arguments.length;d++){var c;a=arguments[d];for(c in a)delete g[c]}return g},c={},e={},b={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},g={command:1,link:1,meta:1,noscript:1,script:1,style:1},i={},d={"#":1},h={center:1,dir:1,noframes:1};return a(c,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,
bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},d,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),a(e,b,c,h),a(f={a:f(c,{a:1,button:1}),abbr:c,address:e,area:i,article:e,aside:e,audio:a({source:1,track:1},e),b:c,base:i,bdi:c,bdo:c,blockquote:e,body:e,br:i,button:f(c,{a:1,button:1}),canvas:c,caption:e,cite:c,code:c,col:i,colgroup:{col:1},command:i,
datalist:a({option:1},c),dd:e,del:c,details:a({summary:1},e),dfn:c,div:e,dl:{dt:1,dd:1},dt:e,em:c,embed:i,fieldset:a({legend:1},e),figcaption:e,figure:a({figcaption:1},e),footer:e,form:e,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:a({title:1,base:1},g),header:e,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:i,html:a({head:1,body:1},e,g),i:c,iframe:d,img:i,input:i,ins:c,kbd:c,keygen:i,label:c,legend:c,li:e,link:i,main:e,map:e,mark:c,menu:a({li:1},e),meta:i,meter:f(c,{meter:1}),nav:e,noscript:a({link:1,meta:1,style:1},c),object:a({param:1},c),ol:{li:1},optgroup:{option:1},option:d,output:c,p:c,param:i,pre:c,progress:f(c,{progress:1}),q:c,rp:c,rt:c,ruby:a({rp:1,rt:1},c),s:c,
samp:c,script:d,section:e,select:{optgroup:1,option:1},small:c,source:i,span:c,strong:c,style:d,sub:c,summary:c,sup:c,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:e,textarea:d,tfoot:{tr:1},th:e,thead:{tr:1},time:f(c,{time:1}),title:d,tr:{th:1,td:1},track:i,u:c,ul:{li:1},var:c,video:a({source:1,track:1},e),wbr:i,acronym:c,applet:a({param:1},e),basefont:i,big:c,center:e,dialog:i,dir:{li:1},font:c,isindex:i,noframes:e,strike:c,tt:c},{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},b,h),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,
hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:c,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},f.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,
textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,
optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),f}(),CKEDITOR.dom.event=function(a){this.$=a},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(a+=CKEDITOR.CTRL),this.$.shiftKey&&(a+=CKEDITOR.SHIFT),this.$.altKey&&(a+=CKEDITOR.ALT),a},preventDefault:function(a){var f=this.$;f.preventDefault?f.preventDefault():f.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement
;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(a){a&&(this.$=a)},CKEDITOR.dom.domObject.prototype={getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a
},on:function(f){var c=this.getCustomData("_cke_nativeListeners");return c||(c={},this.setCustomData("_cke_nativeListeners",c)),c[f]||(c=c[f]=function(a,c){return function(e){"undefined"!=typeof CKEDITOR&&a.fire(c,new CKEDITOR.dom.event(e))}}(this,f),this.$.addEventListener?this.$.addEventListener(f,c,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+f,c)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(a)){var c=this.getCustomData("_cke_nativeListeners"),e=c&&c[a];e&&(this.$.removeEventListener?this.$.removeEventListener(a
,e,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,e),delete c[a])}},removeAllListeners:function(){var c,a=this.getCustomData("_cke_nativeListeners");for(c in a){var e=a[c];this.$.detachEvent?this.$.detachEvent("on"+c,e):this.$.removeEventListener&&this.$.removeEventListener(c,e,!1),delete a[c]}CKEDITOR.event.prototype.removeAllListeners.call(this)}},function(a){var f={};CKEDITOR.on("reset",function(){f={}}),a.equals=function(a){try{return a&&a.$===this.$}catch(e){return!1}},a.setCustomData=function(a,e){var b=this.getUniqueId();return(f[b]||(f[b]={}))[a]=e,this},a.getCustomData=function(a){var e=this.$["data-cke-expando"];return(e=e&&f[e]
)&&a in e?e[a]:null},a.removeCustomData=function(a){var e,b,g;return(e=(e=this.$["data-cke-expando"])&&f[e])&&(b=e[a],g=a in e,delete e[a]),g?b:null},a.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete f[a]},a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(a)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(a){
return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,
CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,f){return a.append(this,f),a},clone:function(a,f){var c=this.$.cloneNode(a),e=function(b){if(b["data-cke-expando"]&&(b["data-cke-expando"]=!1),b.nodeType==CKEDITOR.NODE_ELEMENT&&(f||b.removeAttribute("id",!1),a)){b=b.childNodes;for(var g=0;g<b.length;g++)e(b[g])}};return e(c),new CKEDITOR.dom.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){
return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){for(var f=[],c=this.getDocument().$.documentElement,e=this.$;e&&e!=c;){var b=e.parentNode;b&&f.unshift(this.getIndex.call({$:e},a)),e=b}return f},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function f(b,a){var d=a?b.nextSibling:b.previousSibling;return d&&d.nodeType==CKEDITOR.NODE_TEXT?d.nodeValue?d:f(d,a):null}var b,c=this.$,e=-1;if(!this.$.parentNode||a&&c.nodeType==CKEDITOR.NODE_TEXT&&!c.nodeValue&&!f(c)&&!f(c,!0))return-1;for(;(!a||c==this.$||c.nodeType!=CKEDITOR.NODE_TEXT||!b&&c.nodeValue
)&&(e++,b=c.nodeType==CKEDITOR.NODE_TEXT),c=c.previousSibling;);return e},getNextSourceNode:function(a,f,c){if(c&&!c.call){var e=c;c=function(b){return!b.equals(e)}}var b;if(!(a=!a&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&!1===c(this,!0))return null;a=this.getNext()}for(;!a&&(b=(b||this).getParent());){if(c&&!1===c(b,!0))return null;a=b.getNext()}return!a||c&&!1===c(a)?null:f&&f!=a.type?a.getNextSourceNode(!1,f,c):a},getPreviousSourceNode:function(a,f,c){if(c&&!c.call){var e=c;c=function(b){return!b.equals(e)}}var b;if(!(a=!a&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&!1===c(this,!0))return null
;a=this.getPrevious()}for(;!a&&(b=(b||this).getParent());){if(c&&!1===c(b,!0))return null;a=b.getPrevious()}return!a||c&&!1===c(a)?null:f&&a.type!=f?a.getPreviousSourceNode(!1,f,c):a},getPrevious:function(a){for(var c,f=this.$;(c=(f=f.previousSibling)&&10!=f.nodeType&&new CKEDITOR.dom.node(f))&&a&&!a(c););return c},getNext:function(a){for(var c,f=this.$;(c=(f=f.nextSibling)&&new CKEDITOR.dom.node(f))&&a&&!a(c););return c},getParent:function(a){var f=this.$.parentNode;return f&&(f.nodeType==CKEDITOR.NODE_ELEMENT||a&&f.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(f):null},getParents:function(a){for(var f=this,c=[];c[a?"push":"unshift"](f),
f=f.getParent(););return c},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var f=this.contains?this:this.getParent();do{if(f.contains(a))return f}while(f=f.getParent());return null},getPosition:function(a){var f=this.$,c=a.$;if(f.compareDocumentPosition)return f.compareDocumentPosition(c);if(f==c)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(f.contains){if(f.contains(c))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(c.contains(f))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in f
)return f.sourceIndex<0||c.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:f.sourceIndex<c.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}f=this.getAddress(),a=a.getAddress(),c=Math.min(f.length,a.length);for(var e=0;e<=c-1;e++)if(f[e]!=a[e]){if(e<c)return f[e]<a[e]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return f.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,f){var e,b,c=this.$;for(f||(c=c.parentNode),e="function"==typeof a?(b=!0,a):(b=!1,function(b){return b="string"==typeof b.nodeName?b.nodeName.toLowerCase(
):"","string"==typeof a?b==a:b in a});c;){if(e(b?new CKEDITOR.dom.node(c):c))return new CKEDITOR.dom.node(c);try{c=c.parentNode}catch(g){c=null}}return null},hasAscendant:function(a,f){var c=this.$;for(f||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,f){a.append(this.remove(),f)},remove:function(a){var f=this.$,c=f.parentNode;if(c){if(a)for(;a=f.firstChild;)c.insertBefore(f.removeChild(a),f);c.removeChild(f)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(
a.type==CKEDITOR.NODE_TEXT){var f=CKEDITOR.tools.ltrim(a.getText()),c=a.getLength();if(!f){a.remove();continue}f.length<c&&(a.split(c-f.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var f=CKEDITOR.tools.rtrim(a.getText()),c=a.getLength();if(!f){a.remove();continue}f.length<c&&(a.split(f.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(){var a=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(
a=this.getParent()),a&&void 0!==a.$.isContentEditable)return!(a.$.isContentEditable||a.data("cke-editable"));for(;a&&!a.data("cke-editable");){if("false"==a.getAttribute("contentEditable"))return!0;if("true"==a.getAttribute("contentEditable"))break;a=a.getParent()}return!a}}),CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,f="CSS1Compat"==a.compatMode;return{width:(f?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(
f?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;return"pageXOffset"in a?{x:a.pageXOffset||0,y:a.pageYOffset||0}:{x:(a=a.document).documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}}),CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet
)this.$.createStyleSheet(a);else{var f=new CKEDITOR.dom.element("link");f.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(f)}},appendStyleText:function(a){if(this.$.createStyleSheet){var f=this.$.createStyleSheet("");f.cssText=a}else{var c=new CKEDITOR.dom.element("style",this);c.append(new CKEDITOR.dom.text(a,this)),this.getHead().append(c)}return f||c.$.sheet},createElement:function(a,f){var c=new CKEDITOR.dom.element(a,this);return f&&(f.attributes&&c.setAttributes(f.attributes),f.styles&&c.setStyles(f.styles)),c},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},
getActive:function(){var a;try{a=this.$.activeElement}catch(f){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,f){for(var c=this.$.documentElement,e=0;c&&e<a.length;e++){var b=a[e];if(f)for(var g=-1,i=0;i<c.childNodes.length;i++){var d=c.childNodes[i];if((!0!==f||3!=d.nodeType||!d.previousSibling||3!=d.previousSibling.nodeType)&&++g==b){c=d;break}}else c=c.childNodes[b]}return c?new CKEDITOR.dom.node(c):null},getElementsByTag:function(a,f){return!(CKEDITOR.env.ie&&document.documentMode<=8)&&f&&(a=f+":"+a),new CKEDITOR.dom.nodeList(
this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(a),
this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");return a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a)),a}}),CKEDITOR.dom.nodeList=function(a){this.$=a},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return a<0||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}},CKEDITOR.dom.element=function(a,f){"string"==typeof a&&(a=(
f?f.$:document).createElement(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(a,f){var c=new CKEDITOR.dom.element("div",f);return c.setHtml(a),c.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(a,f,c,e){var b=f.getCustomData("list_marker_id")||f.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),g=f.getCustomData("list_marker_names"
)||f.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[b]=f,g[c]=1,f.setCustomData(c,e)},CKEDITOR.dom.element.clearAllMarkers=function(a){for(var f in a)CKEDITOR.dom.element.clearMarkers(a,a[f],1)},CKEDITOR.dom.element.clearMarkers=function(a,f,c){var g,e=f.getCustomData("list_marker_names"),b=f.getCustomData("list_marker_id");for(g in e)f.removeCustomData(g);f.removeCustomData("list_marker_names"),c&&(f.removeCustomData("list_marker_id"),delete a[b])},function(){function a(b){var a=!0;return b.$.id||(b.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),a=!1),function(){a||b.removeAttribute("id")}}function f(b,a){
return"#"+b.$.id+" "+a.split(/,\s*/).join(", #"+b.$.id+" ")}function c(b){for(var a=0,c=0,d=e[b].length;c<d;c++)a+=parseInt(this.getComputedStyle(e[b][c])||0,10)||0;return a}var b;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(b){var a=this.$.className;return a&&(RegExp("(?:^|\\s)"+b+"(?:\\s|$)","").test(a)||(a=a+" "+b)),this.$.className=a||b,this},removeClass:function(b){var a=this.getAttribute("class");return a&&(b=RegExp("(?:^|\\s+)"+b+"(?=\\s|$)","i")).test(a)&&((a=a.replace(b,"").replace(/^\s+/,""))?this.setAttribute("class",a):this.removeAttribute("class")),this},hasClass:function(b){return RegExp(
"(?:^|\\s+)"+b+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(b,a){return"string"==typeof b&&(b=this.getDocument().createElement(b)),a?this.$.insertBefore(b.$,this.$.firstChild):this.$.appendChild(b.$),b},appendHtml:function(b){if(this.$.childNodes.length){var a=new CKEDITOR.dom.element("div",this.getDocument());a.setHtml(b),a.moveChildren(this)}else this.setHtml(b)},appendText:function(b){null!=this.$.text?this.$.text=this.$.text+b:this.append(new CKEDITOR.dom.text(b))},appendBogus:function(b){if(b||CKEDITOR.env.needsBrFiller){for(b=this.getLast();b&&b.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(b.getText());)b=b.getPrevious()
;b&&b.is&&b.is("br")||(b=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&b.setAttribute("type","_moz"),this.append(b))}},breakParent:function(b){var a=new CKEDITOR.dom.range(this.getDocument());a.setStartAfter(this),a.setEndAfter(b),b=a.extractContents(),a.insertNode(this.remove()),b.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(b){var a=this.$;return b.type!=CKEDITOR.NODE_ELEMENT?a.contains(b.getParent().$):a!=b.$&&a.contains(b.$)}:function(b){return!!(16&this.$.compareDocumentPosition(b.$))},focus:function(){function b(){try{this.$.focus()}catch(b){}}return function(a){a?CKEDITOR.tools.setTimeout(b,100,this
):b.call(this)}}(),getHtml:function(){var b=this.$.innerHTML;return CKEDITOR.env.ie?b.replace(/<\?[^>]*>/g,""):b},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var b=this.$.ownerDocument.createElement("div");return b.appendChild(this.$.cloneNode(!0)),b.innerHTML},getClientRect:function(){var b=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!b.width&&(b.width=b.right-b.left),!b.height&&(b.height=b.bottom-b.top),b},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(b){try{var a=this.$;if(this.getParent())return a.innerHTML=b;var c=this.getDocument()._getHtml5ShivFrag();return c.appendChild(a),
a.innerHTML=b,c.removeChild(a),b}catch(d){for(this.$.innerHTML="",(a=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=b,a=a.getChildren();a.count();)this.append(a.getItem(0));return b}}:function(b){return this.$.innerHTML=b},setText:(b=document.createElement("p"),b.innerHTML="x",b=b.textContent,function(a){this.$[b?"textContent":"innerText"]=a}),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b){switch(b){case"class":b="className";break;case"http-equiv":b="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(b=this.$.getAttribute(b,2))&&0===this.$.tabIndex&&(b=null),b;case"checked":
return((b=this.$.attributes.getNamedItem(b)).specified?b.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[b];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(b,2)}:function(b){return this.$.getAttribute(b,2)},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(b){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(b)]}:function(b){var a=this.getWindow().$.getComputedStyle(this.$,null)
;return a?a.getPropertyValue(b):""},getDtd:function(){var b=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return b},b},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var b=this.$.tabIndex;return 0===b&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(b=-1),b}:CKEDITOR.env.webkit?function(){var b=this.$.tabIndex;return void 0===b&&(b=parseInt(this.getAttribute("tabindex"),10),isNaN(b)&&(b=-1)),b}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument(
).getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var b=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&document.documentMode<=8){var a=this.$.scopeName;"HTML"!=a&&(b=a.toLowerCase()+":"+b)}return this.getName=function(){return b},this.getName()},getValue:function(){return this.$.value},getFirst:function(b){var a=this.$.firstChild;return(a=a&&new CKEDITOR.dom.node(a))&&b&&!b(a)&&(a=a.getNext(b)),a},getLast:function(b){var a=this.$.lastChild;return(a=a&&new CKEDITOR.dom.node(a))&&b&&!b(a)&&(a=a.getPrevious(b)),a},getStyle:function(b){
return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(b)]},is:function(){var b=this.getName();if("object"==typeof arguments[0])return!!arguments[0][b];for(var a=0;a<arguments.length;a++)if(arguments[a]==b)return!0;return!1},isEditable:function(b){var a=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[a]||CKEDITOR.dtd.$empty[a]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===b||!(!(b=CKEDITOR.dtd[a]||CKEDITOR.dtd.span)||!b["#"]))},isIdentical:function(b){var a=this.clone(0,1);b=b.clone(0,1);if(
a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),a.$.isEqualNode)return a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.isEqualNode(b.$);if(a=a.getOuterHtml(),b=b.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var c=this.getParent();c.type==CKEDITOR.NODE_ELEMENT&&((c=c.clone()).setHtml(a),a=c.getHtml(),c.setHtml(b),b=c.getHtml())}return a==b},isVisible:function(){var a,c,b=(
this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return b&&CKEDITOR.env.webkit&&!(a=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(c=a.$.frameElement)&&(b=new CKEDITOR.dom.element(c).isVisible()),!!b},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var b=this.getChildren(),a=0,c=b.count();a<c;a++){var d=b.getItem(a);if((d.type!=CKEDITOR.NODE_ELEMENT||!d.data("cke-bookmark"))&&(d.type==CKEDITOR.NODE_ELEMENT&&!d.isEmptyInlineRemoveable()||d.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(d.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(
CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var b=this.$.attributes,a=0;a<b.length;a++){var c=b[a];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var b=this.$.attributes,a=b.length,c={"data-cke-expando":1,_moz_dirty:1};return 0<a&&(2<a||!c[b[0].nodeName]||2==a&&!c[b[1].nodeName])},hasAttribute:function(){function b(b){var a=this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(b=this.getAttribute("type")
)||"radio"==b?"on"!=this.$.value:!!this.$.value}return!!a&&a.specified}return CKEDITOR.env.ie?CKEDITOR.env.version<8?function(a){return"name"==a?!!this.$.name:b.call(this,a)}:b:function(b){return!!this.$.attributes.getNamedItem(b)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(b,a){var d,c=this.$;if(c!=(b=b.$))if(a)for(;d=c.lastChild;)b.insertBefore(c.removeChild(d),b.firstChild);else for(;d=c.firstChild;)b.appendChild(c.removeChild(d))},mergeSiblings:function(){function b(b,a,d){if(a&&a.type==CKEDITOR.NODE_ELEMENT){for(var c=[];a.data("cke-bookmark")||a.isEmptyInlineRemoveable();)if(c.push(a),!(a=d?a.getNext():a.getPrevious()
)||a.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(a)){for(var e=d?b.getLast():b.getFirst();c.length;)c.shift().move(b,!d);a.moveChildren(b,!d),a.remove(),e&&e.type==CKEDITOR.NODE_ELEMENT&&e.mergeSiblings()}}}return function(a){(!1===a||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(b(this,this.getNext(),!0),b(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var b=function(b,a){return this.$.setAttribute(b,a),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a,c){
return"class"==a?this.$.className=c:"style"==a?this.$.style.cssText=c:"tabindex"==a?this.$.tabIndex=c:"checked"==a?this.$.checked=c:"contenteditable"==a?b.call(this,"contentEditable",c):b.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(a,c){if("src"==a&&c.match(/^http:\/\//))try{b.apply(this,arguments)}catch(d){}else b.apply(this,arguments);return this}:b}(),setAttributes:function(b){for(var a in b)this.setAttribute(a,b[a]);return this},setValue:function(b){return this.$.value=b,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b){
"class"==b?b="className":"tabindex"==b?b="tabIndex":"contenteditable"==b&&(b="contentEditable"),this.$.removeAttribute(b)}:function(b){this.$.removeAttribute(b)},removeAttributes:function(b){if(CKEDITOR.tools.isArray(b))for(var a=0;a<b.length;a++)this.removeAttribute(b[a]);else for(a in b)b.hasOwnProperty(a)&&this.removeAttribute(a)},removeStyle:function(b){if((a=this.$.style).removeProperty||"border"!=b&&"margin"!=b&&"padding"!=b)a.removeProperty?a.removeProperty(b):a.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(b)),this.$.style.cssText||this.removeAttribute("style");else{var d,c=["top","left","right","bottom"];"border"==b&&(d=["color","style","width"]
);for(var a=[],e=0;e<c.length;e++)if(d)for(var f=0;f<d.length;f++)a.push([b,c[e],d[f]].join("-"));else a.push([b,c[e]].join("-"));for(b=0;b<a.length;b++)this.removeStyle(a[b])}},setStyle:function(b,a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(b)]=a,this},setStyles:function(b){for(var a in b)this.setStyle(a,b[a]);return this},setOpacity:function(b){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(b=Math.round(100*b),this.setStyle("filter",100<=b?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")")):this.setStyle("opacity",b)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){
this.setAttribute("unselectable","on");for(var a=this.getElementsByTag("*"),c=0,d=a.count();c<d;c++)a.getItem(c).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var b=this;"html"!=b.getName();){if("static"!=b.getComputedStyle("position"))return b;b=b.getParent()}return null},getDocumentPosition:function(b){var a=0,c=0,d=this.getDocument(),e=d.getBody(),f=CKEDITOR.env.quirks;if(document.documentElement.getBoundingClientRect){var k=this.$.getBoundingClientRect(),l=d.$.documentElement,o=l.clientTop||e.$.clientTop||0,n=l.clientLeft||e.$.clientLeft||0,m=!0;CKEDITOR.env.ie&&(m=d.getDocumentElement().contains(this),d=d.getBody().contains(
this),m=f&&d||!f&&m),m&&(c=CKEDITOR.env.webkit?(a=e.$.scrollLeft||l.scrollLeft,e.$.scrollTop||l.scrollTop):(a=(c=f?e.$:l).scrollLeft,c.scrollTop),a=k.left+a-n,c=k.top+c-o)}else for(o=this,n=null;o&&"body"!=o.getName()&&"html"!=o.getName();){for(a+=o.$.offsetLeft-o.$.scrollLeft,c+=o.$.offsetTop-o.$.scrollTop,o.equals(this)||(a+=o.$.clientLeft||0,c+=o.$.clientTop||0);n&&!n.equals(o);)a-=n.$.scrollLeft,c-=n.$.scrollTop,n=n.getParent();o=(k=(n=o).$.offsetParent)?new CKEDITOR.dom.element(k):null}return b&&(k=this.getWindow(),o=b.getWindow(),!k.equals(o)&&k.$.frameElement&&(a+=(b=new CKEDITOR.dom.element(k.$.frameElement).getDocumentPosition(b)).x,c+=b.y)),
document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||f||(a+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0),{x:a,y:c}},scrollIntoView:function(b){var a=this.getParent();if(a)do{if((a.$.clientWidth&&a.$.clientWidth<a.$.scrollWidth||a.$.clientHeight&&a.$.clientHeight<a.$.scrollHeight)&&!a.is("body")&&this.scrollIntoParent(a,b,1),a.is("html")){var c=a.getWindow();try{var d=c.$.frameElement;d&&(a=new CKEDITOR.dom.element(d))}catch(e){}}}while(a=a.getParent())},scrollIntoParent:function(b,a,c){var d,e,f,k;function l(a,d){/body|html/.test(b.getName())?b.getWindow().$.scrollBy(a,d):(b.$.scrollLeft=b.$.scrollLeft+a,b.$.scrollTop=b.$.scrollTop+d)}
function o(a,b){var d={x:0,y:0};if(!a.is(m?"body":"html")){var c=a.$.getBoundingClientRect();d.x=c.left,d.y=c.top}return(c=a.getWindow()).equals(b)||(c=o(CKEDITOR.dom.element.get(c.$.frameElement),b),d.x=d.x+c.x,d.y=d.y+c.y),d}function n(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!b&&(b=this.getWindow());var m="BackCompat"==(f=b.getDocument()).$.compatMode;b instanceof CKEDITOR.dom.window&&(b=m?f.getBody():f.getDocumentElement()),e=o(this,f=b.getWindow());var p=o(b,f),q=this.$.offsetHeight;d=this.$.offsetWidth;var t=b.$.clientHeight,s=b.$.clientWidth;f=e.x-n(this,"left")-p.x||0,k=e.y-n(this,"top")-p.y||0,d=e.x+d+n(this,"right")-(p.x+s)||0
,e=e.y+q+n(this,"bottom")-(p.y+t)||0,(k<0||0<e)&&l(0,!0===a?k:!1===a?e:k<0?k:e),c&&(f<0||0<d)&&l(f<0?f:d,0)},setState:function(a,c,e){switch(c=c||"cke",a){case CKEDITOR.TRISTATE_ON:this.addClass(c+"_on"),this.removeClass(c+"_off"),this.removeClass(c+"_disabled"),e&&this.setAttribute("aria-pressed",!0),e&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(c+"_disabled"),this.removeClass(c+"_off"),this.removeClass(c+"_on"),e&&this.setAttribute("aria-disabled",!0),e&&this.removeAttribute("aria-pressed");break;default:this.addClass(c+"_off"),this.removeClass(c+"_on"),this.removeClass(c+"_disabled"),e&&this.removeAttribute(
"aria-pressed"),e&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(c){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,c){for(var e=this.$.attributes,d=(c=c||{},0);d<e.length;d++){var k,h=e[d],f=h.nodeName.toLowerCase();f in c||("checked"==f&&(k=this.getAttribute(f))?a.setAttribute(f,k):CKEDITOR.env.ie&&!this.hasAttribute(f)||(null===(k=this.getAttribute(f))&&(k=h.nodeValue),a.setAttribute(f,k)))}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var c=this.getDocument()
;a=new CKEDITOR.dom.element(a,c);this.copyAttributes(a),this.moveChildren(a),this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$),a.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=a.$,delete this.getName}},getChild:function(){function a(b,c){var d=b.childNodes;if(0<=c&&c<d.length)return d[c]}return function(c){var e=this.$;if(c.slice)for(;0<c.length&&e;)e=a(e,c.shift());else e=a(e,c);return e?new CKEDITOR.dom.node(e):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},
getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,c){return a="data-"+a,void 0===c?this.getAttribute(a):(!1===c?this.removeAttribute(a):this.setAttribute(a,c),null)},getEditor:function(){var c,e,a=CKEDITOR.instances;for(c in a)if((e=a[c]).element.equals(this)&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return e;return null},find:function(b){var c=a(this);b=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(f(this,b)));return c(),b},findOne:function(b){var c=a(this)
;b=this.$.querySelector(f(this,b));return c(),b?new CKEDITOR.dom.element(b):null},forEach:function(a,c,e){if(!(e||c&&this.type!=c))var d=a(this);if(!1!==d){e=this.getChildren();for(var h=0;h<e.count();h++)(d=e.getItem(h)).type==CKEDITOR.NODE_ELEMENT?d.forEach(a,c):(!c||d.type==c)&&a(d)}}});var e={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,e,i){"number"==typeof e&&(!i||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(e-=c.call(this,a)),this.setStyle(a,e+"px"))},
CKEDITOR.dom.element.prototype.getSize=function(a,e){var i=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;return e&&(i-=c.call(this,a)),i}}(),CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document,this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){(a=a.$).parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,
insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,c.collapsed)return this.end(),null;c.optimize()}var d,k=c.startContainer;d=c.endContainer;var h,e=c.startOffset,g=c.endOffset,i=this.guard,f=this.type,j=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var w=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),r=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(g):d.getNext();this._.guardLTR=function(a,b){return!(b&&w.equals(a)||r&&a.equals(r
)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}if(a&&!this._.guardRTL){var x=k.type==CKEDITOR.NODE_ELEMENT?k:k.getParent(),y=k.type==CKEDITOR.NODE_ELEMENT?e?k.getChild(e-1):null:k.getPrevious();this._.guardRTL=function(a,b){return!(b&&x.equals(a)||y&&a.equals(y)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}var B=a?this._.guardRTL:this._.guardLTR;for(h=i?function(a,b){return!1!==B(a,b)&&i(a,b)}:B,this.current?d=this.current[j](!1,f,h):(a?d.type==CKEDITOR.NODE_ELEMENT&&(d=0<g?d.getChild(g-1):!1===h(d,!0)?null:d.getPreviousSourceNode(!0,f,h)):(d=k).type!=CKEDITOR.NODE_ELEMENT||(d=d.getChild(e))||(d=!1===h(k,!0)?null:k.getNextSourceNode(!0,f,h)
),d&&!1===h(d)&&(d=null));d&&!this._.end;){if(this.current=d,this.evaluator&&!1===this.evaluator(d)){if(b&&this.evaluator)return!1}else if(!b)return d;d=d[j](!1,f,h)}return this.end(),this.current=null}function f(b){for(var d,c=null;d=a.call(this,b);)c=d;return c}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return f.call(this)},lastBackward:function(){return f.call(this,1)},
reset:function(){delete this.current,this._={}}}});var e={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},b={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in b||!e[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a))},CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}},
CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(a,b){function d(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(c){var k,e;return k=c&&c.type!=CKEDITOR.NODE_ELEMENT&&(e=c.getParent())&&d(e),k=a?k:k||d(c),!!(b^k)}},CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var d;return b&&b.type==CKEDITOR.NODE_TEXT&&(d=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&""==b.getText()),!!(a^d)}},CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.env.webkit?1:0;return function(c){return c=b(c)?1:(
c.type==CKEDITOR.NODE_TEXT&&(c=c.getParent()),c.$.offsetWidth<=d),!!(a^c)}},CKEDITOR.dom.walker.nodeType=function(a,b){return function(d){return!!(b^d.type==a)}},CKEDITOR.dom.walker.bogus=function(a){function b(a){return!i(a)&&!d(a)}return function(d){var c=CKEDITOR.env.needsBrFiller?d.is&&d.is("br"):d.getText&&g.test(d.getText());return c&&(c=d.getParent(),d=d.getNext(b),c=c.isBlockBoundary()&&(!d||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary())),!!(a^c)}},CKEDITOR.dom.walker.temp=function(a){return function(b){return b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),b=b&&b.hasAttribute("data-cke-temp"),!!(a^b)}};var g=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,
i=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),h=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(a){return function(b){return b=i(b)||d(b)||h(b),!!(a^b)}};var j=CKEDITOR.dom.walker.ignored(),k=function(a){var d,b={};for(d in a)CKEDITOR.dtd[d]["#"]&&(b[d]=1);return b}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(a){return function(b){return!!(a^function(a){if(j(a))return!1;if(a.type==CKEDITOR.NODE_TEXT)return!0;if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is(CKEDITOR.dtd.$inline)||a.is("hr")||"false"==a.getAttribute("contenteditable"))return!0;var b;if((b=!CKEDITOR.env.needsBrFiller)&&(b=a.is(k)))a:{b=0;for(
var d=a.getChildCount();b<d;++b)if(!j(a.getChild(b))){b=!1;break a}b=!0}if(b)return!0}return!1}(b))}},CKEDITOR.dom.element.prototype.getBogus=function(){for(var a=this;a=a.getPreviousSourceNode(),d(a)||i(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty););return!(!a||!(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&g.test(a.getText())))&&a}}(),CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var f=a instanceof CKEDITOR.dom.document;this.document=f?a:a.getDocument(),this.root=f?a.getBody():a},function(){function a(){var a=!1,
b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(!0),c=CKEDITOR.dom.walker.bogus();return function(e){return!(!d(e)&&!b(e))||(c(e)&&!a?a=!0:!(e.type==CKEDITOR.NODE_TEXT&&(e.hasAscendant("pre")||CKEDITOR.tools.trim(e.getText()).length)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(g)))}}function c(a){return function(){var b;return this[a?"getPreviousNode":"getNextNode"](function(a){return!b&&j(a)&&(b=a),h(a)&&!(i(a)&&a.equals(b))})}}var e=function(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset},b=function(a,b,d,c){a.optimizeBookmark();var f,j,e=a.startContainer,g=a.endContainer,
h=a.startOffset,i=a.endOffset;g.type==CKEDITOR.NODE_TEXT?g=g.split(i):0<g.getChildCount()&&(i>=g.getChildCount()?(g=g.append(a.document.createText("")),j=!0):g=g.getChild(i)),e.type==CKEDITOR.NODE_TEXT?(e.split(h),e.equals(g)&&(g=e.getNext())):h?h>=e.getChildCount()?(e=e.append(a.document.createText("")),f=!0):e=e.getChild(h).getPrevious():(e=e.append(a.document.createText(""),1),f=!0);var v,z,w;h=e.getParents(),i=g.getParents();for(v=0;v<h.length&&(z=h[v],w=i[v],z.equals(w));v++);for(var x,y,B,r=d,A=v;A<h.length;A++){for(x=h[A],r&&!x.equals(e)&&(y=r.append(x.clone())),x=x.getNext();x&&(!x.equals(i[A])&&!x.equals(g));)B=x.getNext(),2==b?r.append(x.clone(!0)
):(x.remove(),1==b&&r.append(x)),x=B;r&&(r=y)}for(r=d,d=v;d<i.length;d++){if(x=i[d],0<b&&!x.equals(g)&&(y=r.append(x.clone())),!h[d]||x.$.parentNode!=h[d].$.parentNode)for(x=x.getPrevious();x&&(!x.equals(h[d])&&!x.equals(e));)B=x.getPrevious(),2==b?r.$.insertBefore(x.$.cloneNode(!0),r.$.firstChild):(x.remove(),1==b&&r.$.insertBefore(x.$,r.$.firstChild)),x=B;r&&(r=y)}2==b?((z=a.startContainer).type==CKEDITOR.NODE_TEXT&&(z.$.data=z.$.data+z.$.nextSibling.data,z.$.parentNode.removeChild(z.$.nextSibling)),(a=a.endContainer).type==CKEDITOR.NODE_TEXT&&a.$.nextSibling&&(a.$.data=a.$.data+a.$.nextSibling.data,a.$.parentNode.removeChild(a.$.nextSibling))):(z&&w&&(
e.$.parentNode!=z.$.parentNode||g.$.parentNode!=w.$.parentNode)&&(b=w.getIndex(),f&&w.$.parentNode==e.$.parentNode&&b--,c&&z.type==CKEDITOR.NODE_ELEMENT?((c=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document)).insertAfter(z),z.mergeSiblings(!1),a.moveToBookmark({startNode:c})):a.setStart(w.getParent(),b)),a.collapse(!0)),f&&e.remove(),j&&g.$.parentNode&&g.remove()},g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},i=CKEDITOR.dom.walker.bogus(),d=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,
h=CKEDITOR.dom.walker.editable(),j=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);return a._setStartContainer(this.startContainer),a.startOffset=this.startOffset,a._setEndContainer(this.endContainer),a.endOffset=this.endOffset,a.collapsed=this.collapsed,a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(){var a=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||b(this,2,a),a},
deleteContents:function(a){this.collapsed||b(this,0,null,a)},extractContents:function(a){var d=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||b(this,1,d,a),d},createBookmark:function(a){var b,d,c,e,g=this.collapsed;return(b=this.document.createElement("span")).data("cke-bookmark",1),b.setStyle("display","none"),b.setHtml("&nbsp;"),a&&(c="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",c+(g?"C":"S"))),g||((d=b.clone()).setHtml("&nbsp;"),a&&d.setAttribute("id",c+"E"),(e=this.clone()).collapse(),e.insertNode(d)),(e=this.clone()).collapse(!0),e.insertNode(b),d?(this.setStartAfter(b),this.setEndBefore(d)):this.moveToPosition(b
,CKEDITOR.POSITION_AFTER_END),{startNode:a?c+(g?"C":"S"):b,endNode:a?c+"E":d,serializable:a,collapsed:g}},createBookmark2:function(){function a(d){var g,c=d.container,e=d.offset,k=e;if((g=(g=c).type!=CKEDITOR.NODE_ELEMENT||0===k||k==g.getChildCount()?0:g.getChild(k-1).type==CKEDITOR.NODE_TEXT&&g.getChild(k).type==CKEDITOR.NODE_TEXT)&&(e=(c=c.getChild(e-1)).getLength()),c.type==CKEDITOR.NODE_ELEMENT&&1<e&&(e=c.getChild(e-1).getIndex(!0)+1),c.type==CKEDITOR.NODE_TEXT){for(g=c,k=0;(g=g.getPrevious())&&g.type==CKEDITOR.NODE_TEXT;)k+=g.getLength();g=k,c.getText()?e+=g:(k=c.getPrevious(b),g?(e=g,c=k?k.getNext():c.getParent().getFirst()):(c=c.getParent(),
e=k?k.getIndex(!0)+1:0))}d.container=c,d.offset=e}var b=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(b){var d=this.collapsed,c={container:this.startContainer,offset:this.startOffset},e={container:this.endContainer,offset:this.endOffset};return b&&(a(c),d||a(e)),{start:c.container.getAddress(b),end:d?null:e.container.getAddress(b),startOffset:c.offset,endOffset:e.offset,normalized:b,collapsed:d,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),d=a.startOffset,c=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset;this.setStart(b,d),c?this.setEnd(c,a):this.collapse(!0)
}else b=(d=a.serializable)?this.document.getById(a.startNode):a.startNode,a=d?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,a=this.startContainer,b=this.endContainer,d=this.startOffset,c=this.endOffset;if(a.type==CKEDITOR.NODE_ELEMENT)if(d<(e=a.getChildCount()))a=a.getChild(d);else if(e<1)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=(a=new CKEDITOR.dom.node(a)).getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(c<(e=b.getChildCount()))b=b.getChild(c).getPreviousSourceNode(!0);else if(e<1
)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b)}return a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b),{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var d=this.startContainer,c=this.endContainer;d=d.equals(c)?a&&d.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?d.getChild(this.startOffset):d:d.getCommonAncestor(c);return b&&!d.is?d.getParent():d},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a)),a=this.endContainer,b=this.endOffset,a.type!=CKEDITOR.NODE_ELEMENT&&(
b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var d=this.startContainer,c=this.startOffset,e=this.collapsed;if((!a||e)&&d&&d.type==CKEDITOR.NODE_TEXT){if(c)if(c>=d.getLength())c=d.getIndex()+1,d=d.getParent();else{var g=d.split(c);c=d.getIndex()+1,d=d.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(g,this.endOffset-this.startOffset):d.equals(
this.endContainer)&&(this.endOffset=this.endOffset+1)}else c=d.getIndex(),d=d.getParent();if(this.setStart(d,c),e)return void this.collapse(!0)}d=this.endContainer,c=this.endOffset,b||e||!d||d.type!=CKEDITOR.NODE_TEXT||(c=c?(c>=d.getLength()||d.split(c),d.getIndex()+1):d.getIndex(),d=d.getParent(),this.setEnd(d,c))},enlarge:function(a,b){function d(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var c=RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var e=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var i,f,j,v,z,r,x,g=this.getCommonAncestor(),h=this.root,w=!1;r=this.startContainer
;var y=this.startOffset;for(r.type==CKEDITOR.NODE_TEXT?(y&&(w=!!(r=!CKEDITOR.tools.trim(r.substring(0,y)).length&&r)),r&&!(v=r.getPrevious())&&(j=r.getParent())):(y&&(v=r.getChild(y-1)||r.getLast()),v||(j=r)),j=d(j);j||v;){if(j&&!v){if(!z&&j.equals(g)&&(z=!0),e?j.isBlockBoundary():!h.contains(j))break;w&&"inline"==j.getComputedStyle("display")||(w=!1,z?i=j:this.setStartBefore(j)),v=j.getPrevious()}for(;v;)if(r=!1,v.type==CKEDITOR.NODE_COMMENT)v=v.getPrevious();else{if(v.type==CKEDITOR.NODE_TEXT)x=v.getText(),c.test(x)&&(v=null),r=/[\s\ufeff]$/.test(x);else if((v.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&v.is("br"))&&!v.data("cke-bookmark"))if(
w&&CKEDITOR.dtd.$removeEmpty[v.getName()]){if(x=v.getText(),c.test(x))v=null;else{y=v.$.getElementsByTagName("*");for(var A,B=0;A=y[B++];)if(!CKEDITOR.dtd.$removeEmpty[A.nodeName.toLowerCase()]){v=null;break}}v&&(r=!!x.length)}else v=null;if(r&&(w?z?i=j:j&&this.setStartBefore(j):w=!0),v){if(r=v.getPrevious(),!j&&!r){j=v,v=null;break}v=r}else j=null}j&&(j=d(j.getParent()))}r=this.endContainer,y=this.endOffset,j=v=null,z=w=!1;var G=function(a,b){var d,e;for((d=new CKEDITOR.dom.range(h)).setStart(a,b),d.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(d=new CKEDITOR.dom.walker(d)).guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};e=d.next(
);){if(e.type!=CKEDITOR.NODE_TEXT)return!1;if(x=e!=a?e.getText():e.substring(b),c.test(x))return!1}return!0};for(r.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(r.substring(y)).length?w=!0:(w=!r.getLength(),y==r.getLength()?(v=r.getNext())||(j=r.getParent()):G(r,y)&&(j=r.getParent())):(v=r.getChild(y))||(j=r);j||v;){if(j&&!v){if(!z&&j.equals(g)&&(z=!0),e?j.isBlockBoundary():!h.contains(j))break;w&&"inline"==j.getComputedStyle("display")||(w=!1,z?f=j:j&&this.setEndAfter(j)),v=j.getNext()}for(;v;){if(r=!1,v.type==CKEDITOR.NODE_TEXT)x=v.getText(),G(v,0)||(v=null),r=/^[\s\ufeff]/.test(x);else if(v.type==CKEDITOR.NODE_ELEMENT){if((0<v.$.offsetWidth||b&&v.is("br")
)&&!v.data("cke-bookmark"))if(w&&CKEDITOR.dtd.$removeEmpty[v.getName()]){if(x=v.getText(),c.test(x))v=null;else for(y=v.$.getElementsByTagName("*"),B=0;A=y[B++];)if(!CKEDITOR.dtd.$removeEmpty[A.nodeName.toLowerCase()]){v=null;break}v&&(r=!!x.length)}else v=null}else r=1;if(r&&w&&(z?f=j:this.setEndAfter(j)),v){if(r=v.getNext(),!j&&!r){j=v,v=null;break}v=r}else j=null}j&&(j=d(j.getParent()))}i&&f&&(g=i.contains(f)?f:i,this.setStartBefore(g),this.setEndAfter(g));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:j=new CKEDITOR.dom.range(this.root),h=this.root,j.setStartAt(h,CKEDITOR.POSITION_AFTER_START),j.setEnd(
this.startContainer,this.startOffset),j=new CKEDITOR.dom.walker(j);var C,J,D=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),F=null,E=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(F){if(F.equals(a))return void(F=null)}else F=a;else if(F)return;var b=D(a);return b||(C=a),b};e=function(a){var b=E(a);return!b&&a.is&&a.is("br")&&(J=a),b};if(j.guard=E,j=j.lastBackward(),C=C||h,this.setStartAt(C,!C.is("br")&&(!j&&this.checkStartOfBlock()||j&&C.contains(j))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){j=this.clone(),
j=new CKEDITOR.dom.walker(j);var I=CKEDITOR.dom.walker.whitespaces(),L=CKEDITOR.dom.walker.bookmark();if(j.evaluator=function(a){return!I(a)&&!L(a)},(j=j.previous())&&j.type==CKEDITOR.NODE_ELEMENT&&j.is("br"))break}(j=this.clone()).collapse(),j.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(j=new CKEDITOR.dom.walker(j)).guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?e:E,C=F=J=null,j=j.lastForward(),C=C||h,this.setEndAt(C,!j&&this.checkEndOfBlock()||j&&C.contains(j)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),J&&this.setEndAfter(J)}},shrink:function(a,b,d){if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var c=this.clone(),e=this.startContainer,
g=this.endContainer,h=this.startOffset,i=this.endOffset,f=1,j=1;e&&e.type==CKEDITOR.NODE_TEXT&&(h?h>=e.getLength()?c.setStartAfter(e):(c.setStartBefore(e),f=0):c.setStartBefore(e)),g&&g.type==CKEDITOR.NODE_TEXT&&(i?i>=g.getLength()?c.setEndAfter(g):(c.setEndAfter(g),j=0):c.setEndBefore(g));c=new CKEDITOR.dom.walker(c);var z,v=CKEDITOR.dom.walker.bookmark();return c.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},c.guard=function(b,c){return!!v(b)||!(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||c&&b.equals(z)||!1===d&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(
)||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))&&(!c&&b.type==CKEDITOR.NODE_ELEMENT&&(z=b),!0)},f&&(e=c[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(e,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),j&&(c.reset(),(c=c[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(c,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!f&&!j)}},insertNode:function(a){this.optimizeBookmark(),this.trim(!1,!0);var b=this.startContainer,d=b.getChild(this.startOffset);d?a.insertBefore(d):b.append(a),a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++,
this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset),this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(a,b){a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]&&(b=a.getIndex(),a=a.getParent()),this._setStartContainer(a),this.startOffset=b,this.endContainer||(this._setEndContainer(a),this.endOffset=b),e(this)},setEnd:function(a,b){a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]&&(
b=a.getIndex()+1,a=a.getParent()),this._setEndContainer(a),this.endOffset=b,this.startContainer||(this._setStartContainer(a),this.startOffset=b),e(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setStart(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setStart(a,a.getLength()):this.setStart(a,a.getChildCount());break
;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(a)}e(this)},setEndAt:function(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setEnd(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setEnd(a,a.getLength()):this.setEnd(a,a.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(a)}e(this)},fixBlock:function(a,b){var d=this.createBookmark(),c=this.document.createElement(b);return this.collapse(a),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(c),
c.trim(),c.appendBogus(),this.insertNode(c),this.moveToBookmark(d),c},splitBlock:function(a){var b=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),c=b.block,e=d.block,g=null;return b.blockLimit.equals(d.blockLimit)?("br"!=a&&(c||(c=this.fixBlock(!0,a),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),e||(e=this.fixBlock(!1,a))),a=c&&this.checkStartOfBlock(),b=e&&this.checkEndOfBlock(),this.deleteContents(),c&&c.equals(e)&&(b?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),e=null):a?(
g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c=null):(e=this.splitElement(c),c.is("ul","ol")||c.appendBogus())),{previousBlock:c,nextBlock:e,wasStartOfBlock:a,wasEndOfBlock:b,elementPath:g}):null},splitElement:function(a){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var b=this.extractContents(),d=a.clone(!1);return b.appendTo(d),d.insertAfter(a),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),d},removeEmptyBlocksAtEnd:function(){function a(c){return function(a){return!(b(a)||d(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||c.is("table"
)&&a.is("caption"))}}var b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var g,d=this.createBookmark(),c=this[b?"endPath":"startPath"](),e=c.block||c.blockLimit;e&&!e.equals(c.root)&&!e.getFirst(a(e));)g=e.getParent(),this[b?"setEndAt":"setStartAt"](e,CKEDITOR.POSITION_AFTER_END),e.remove(1),e=g;this.moveToBookmark(d)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,c=this.clone();return c.collapse(d),
c[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(c=new CKEDITOR.dom.walker(c)).evaluator=function(a){var b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(1);return function(c){return!(!d(c)&&!b(c))||!a&&i(c)||c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.$removeEmpty)}}(d),c[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var b=this.startContainer,c=this.startOffset;return CKEDITOR.env.ie&&c&&b.type==CKEDITOR.NODE_TEXT&&(b=CKEDITOR.tools.ltrim(b.substring(0,c)),d.test(b)&&this.trim(0,1)),this.trim(),b=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(c=this.clone()
).collapse(!0),c.setStartAt(b.block||b.blockLimit,CKEDITOR.POSITION_AFTER_START),(b=new CKEDITOR.dom.walker(c)).evaluator=a(),b.checkBackward()},checkEndOfBlock:function(){var b=this.endContainer,c=this.endOffset;return CKEDITOR.env.ie&&b.type==CKEDITOR.NODE_TEXT&&(b=CKEDITOR.tools.rtrim(b.substring(c)),d.test(b)&&this.trim(1,0)),this.trim(),b=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(c=this.clone()).collapse(!1),c.setEndAt(b.block||b.blockLimit,CKEDITOR.POSITION_BEFORE_END),(b=new CKEDITOR.dom.walker(c)).evaluator=a(),b.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();return d.collapse(1),d.setStartAt(c||this.root,
CKEDITOR.POSITION_AFTER_START),(c=new CKEDITOR.dom.walker(d)).evaluator=a,c.guard=b,c.previous()},getNextNode:function(a,b,c){var d=this.clone();return d.collapse(),d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END),(c=new CKEDITOR.dom.walker(d)).evaluator=a,c.guard=b,c.next()},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),
moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&d.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock()
)this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),!0;var e=a,g=c,h=void 0;e.type==CKEDITOR.NODE_ELEMENT&&e.isEditable(!1)&&(h=e[b?"getLast":"getFirst"](j)),!g&&!h&&(h=e[b?"getPrevious":"getNext"](j)),a=h}return!!c},moveToClosestEditablePosition:function(a,b){var e,c=new CKEDITOR.dom.range(this.root),d=0,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return c.moveToPosition(a,g[b?0:1]),a.is(CKEDITOR.dtd.$block)?(e=c[b?"getNextEditableNode":"getPreviousEditableNode"]())&&(d=1,e.type==CKEDITOR.NODE_ELEMENT&&e.is(
CKEDITOR.dtd.$block)&&"false"==e.getAttribute("contenteditable")?(c.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(e,CKEDITOR.POSITION_AFTER_END)):c.moveToPosition(e,g[b?1:0])):d=1,d&&this.moveToRange(c),!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){if((a=this.clone()).optimize(),a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0)
;a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();return a.reset(),d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:c(),getPreviousEditableNode:c(1),scrollIntoView:function(){var b,c,d,a=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),e=this.clone();e.optimize(),(d=e.startContainer.type==CKEDITOR.NODE_TEXT)?(c=e.startContainer.getText(
),b=e.startContainer.split(e.startOffset),a.insertAfter(e.startContainer)):e.insertNode(a),a.scrollIntoView(),d&&(e.startContainer.setText(c),b.remove()),a.remove()},_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function a(a){arguments.length<1||(this.range=a,
this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function c(a,b,d,e){a:{null==e&&(e=function(a){var b=[];return a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0),b}(d));for(var g;g=e.shift();)if(g.getDtd().p){e={element:g,remaining:e};break a}e=null}return e?(g=CKEDITOR.filter.instances[e.element.data("cke-filter")])&&!g.check(b)?c(a,b,d,e.remaining):((b=new CKEDITOR.dom.range(e.element)).selectNodeContents(e.element),(b=b.createIterator()).enlargeBr=a.enlargeBr,b.enforceRealBlocks=a.enforceRealBlocks,b.activeFilter=b.filter=g,a._.nestedEditable={
element:e.element,container:d,remaining:e.remaining,iterator:b},1):0}function e(a,b,c){return!!b&&((a=a.clone()).collapse(!c),a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END))}var b=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),i=CKEDITOR.dom.walker.whitespaces(!0),d=function(a){return g(a)&&i(a)},h={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var i,f,o,n,m;a=a||"p";if(this._.nestedEditable){if(i=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,i;if(this.activeFilter=this.filter,c(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining)
)return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var p=this.range.clone();f=p.startPath();var q=p.endPath(),t=!p.collapsed&&e(p,f.block),s=!p.collapsed&&e(p,q.block,1);p.shrink(CKEDITOR.SHRINK_ELEMENT,!0),t&&p.setStartAt(f.block,CKEDITOR.POSITION_BEFORE_END),s&&p.setEndAt(q.block,CKEDITOR.POSITION_AFTER_START),f=p.endContainer.hasAscendant("pre",!0)||p.startContainer.hasAscendant("pre",!0),p.enlarge(
this.forceBrBreak&&!f||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),p.collapsed||(f=new CKEDITOR.dom.walker(p.clone()),q=CKEDITOR.dom.walker.bookmark(!0,!0),f.evaluator=q,this._.nextNode=f.next(),(f=new CKEDITOR.dom.walker(p.clone())).evaluator=q,f=f.previous(),this._.lastNode=f.getNextSourceNode(!0,null,p.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((q=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),q.checkEndOfBlock()&&(q=new CKEDITOR.dom.elementPath(q.endContainer,
q.root),this._.lastNode=(q.block||q.blockLimit).getNextSourceNode(!0))),this._.lastNode&&p.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=p.document.createText(""),this._.lastNode.insertAfter(f)),p=null),this._.started=1,f=p}for(q=this._.nextNode,p=this._.lastNode,this._.nextNode=null;q;){t=0,s=q.hasAscendant("pre");var u=q.type!=CKEDITOR.NODE_ELEMENT,v=0;if(u)q.type==CKEDITOR.NODE_TEXT&&b.test(q.getText())&&(u=0);else{var z=q.getName();if(CKEDITOR.dtd.$block[z]&&"false"==q.getAttribute("contenteditable")){c(this,a,i=q);break}if(q.isBlockBoundary(this.forceBrBreak&&!s&&{br:1})){if("br"==z)u=1;else if(!f&&!q.getChildCount()&&"hr"!=z){o=(
i=q).equals(p);break}f&&(f.setEndAt(q,CKEDITOR.POSITION_BEFORE_START),"br"!=z&&(this._.nextNode=q)),t=1}else{if(q.getFirst()){f||(f=this.range.clone()).setStartAt(q,CKEDITOR.POSITION_BEFORE_START),q=q.getFirst();continue}u=1}}if(u&&!f&&(f=this.range.clone()).setStartAt(q,CKEDITOR.POSITION_BEFORE_START),o=(!t||u)&&q.equals(p),f&&!t)for(;!q.getNext(d)&&!o;){if((z=q.getParent()).isBlockBoundary(this.forceBrBreak&&!s&&{br:1})){t=1,u=0,o||z.equals(p),f.setEndAt(z,CKEDITOR.POSITION_BEFORE_END);break}u=1,o=(q=z).equals(p),v=1}if(u&&f.setEndAt(q,CKEDITOR.POSITION_AFTER_END),(o=!(q=this._getNextSourceNode(q,v,p)))||t&&f)break}if(!i){if(!f
)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;q=(i=new CKEDITOR.dom.elementPath(f.startContainer,f.root)).blockLimit,t={div:1,th:1,td:1},!(i=i.block)&&q&&!this.enforceRealBlocks&&t[q.getName()]&&f.checkStartOfBlock()&&f.checkEndOfBlock()&&!q.equals(f.root)?i=q:!i||this.enforceRealBlocks&&i.is(h)?(i=this.range.document.createElement(a),f.extractContents().appendTo(i),i.trim(),f.insertNode(i),n=m=!0):"li"!=i.getName()?f.checkStartOfBlock()&&f.checkEndOfBlock()||(i=i.clone(!1),f.extractContents().appendTo(i),i.trim(),n=!(m=f.splitBlock()).wasStartOfBlock,m=!m.wasEndOfBlock,f.insertNode(i)):o||(this._.nextNode=i.equals(p
)?null:this._getNextSourceNode(f.getBoundaryNodes().endNode,1,p))}return n&&(n=i.getPrevious())&&n.type==CKEDITOR.NODE_ELEMENT&&("br"==n.getName()?n.remove():n.getLast()&&"br"==n.getLast().$.nodeName.toLowerCase()&&n.getLast().remove()),m&&(n=i.getLast())&&n.type==CKEDITOR.NODE_ELEMENT&&"br"==n.getName()&&(!CKEDITOR.env.needsBrFiller||n.getPrevious(g)||n.getNext(g))&&n.remove(),this._.nextNode||(this._.nextNode=o||i.equals(p)||!p?null:this._getNextSourceNode(i,1,p)),i},_getNextSourceNode:function(a,b,c){function d(a){return!(a.equals(c)||a.equals(e))}var e=this.range.root;for(a=a.getNextSourceNode(b,null,d);!g(a);)a=a.getNextSourceNode(b,null,d);return a}},
CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}}(),CKEDITOR.command=function(a,f){var c;this.uiItems=[],this.exec=function(c){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&a.focus(),!1===this.fire("exec")||!1!==f.exec.call(this,a,c))},this.refresh=function(a,b){return!(this.readOnly||!a.readOnly)||(this.context&&!b.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[a.mode]&&this.disable(),!1===this.fire("refresh",{editor:a,path:b})||f.refresh&&!1!==f.refresh.apply(this,arguments)):(this.disable(),!0))},
this.checkAllowed=function(e){return e||"boolean"!=typeof c?c=a.activeFilter.checkFeature(this):c},CKEDITOR.tools.extend(this,f,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!f.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){return!(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())&&(this.previousState=this.state,
this.state=a,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",
baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(a,b,c,d,e){var g,h;a=[];for(g in b){h="boolean"==typeof(h=b[g])?{}:"function"==typeof h?{match:h}:G(h),"$"!=g.charAt(0)&&(h.elements=g),c&&(h.featureName=c.toLowerCase());var f=h;f.elements=i(f.elements,/\s+/)||null,f.propertiesOnly=f.propertiesOnly||!0===f.elements;var j=/\s*,\s*/,q=void 0;for(q in F){f[q]=i(f[q],j)||null;var m=f,k=E[q],z=i(f[E[q]],j),s=f[q],v=[],D=!0,p=void 0;for(p in z?D=!1:z={},s)"!"==p.charAt(0)&&(p=p.slice(1),v.push(p),D=!(z[p]=!0));for(;p=v.pop();)s[p]=s["!"+p],delete s["!"+p];m[k]=!D&&z||null}f.match=f.match||null,d.push(
h),a.push(h)}var w;for(b=e.elements,e=e.generic,c=0,d=a.length;c<d;++c){for(j in h=!0===(g=G(a[c])).classes||!0===g.styles||!0===g.attributes,f=g,q=k=j=void 0,F)f[j]=t(f[j]);for(q in m=!0,E){for(s in z=[],s=void 0,k=f[j=E[q]])-1<s.indexOf("*")?z.push(RegExp("^"+s.replace(/\*/g,".*")+"$")):z.push(s);(k=z).length&&(f[j]=k,m=!1)}if(f.nothingRequired=m,f.noProperties=!(f.attributes||f.classes||f.styles),!0===g.elements||null===g.elements)e[h?"unshift":"push"](g);else for(w in f=g.elements,delete g.elements,f)b[w]?b[w][h?"unshift":"push"](g):b[w]=[g]}}function f(a,b,e,g){if((!a.match||a.match(b))&&(g||d(a,b))&&(a.propertiesOnly||(e.valid=!0),e.allAttributes||(
e.allAttributes=c(a.attributes,b.attributes,e.validAttributes)),e.allStyles||(e.allStyles=c(a.styles,b.styles,e.validStyles)),!e.allClasses)){if(a=a.classes,b=b.classes,g=e.validClasses,a)if(!0===a)a=!0;else{for(var i,f=0,h=b.length;f<h;++f)g[i=b[f]]||(g[i]=a(i));a=!1}else a=!1;e.allClasses=a}}function c(a,b,c){if(!a)return!1;if(!0===a)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function e(a,c,d){if(!a.match||a.match(c)){if(a.noProperties)return!1;if(d.hadInvalidAttribute=b(a.attributes,c.attributes)||d.hadInvalidAttribute,d.hadInvalidStyle=b(a.styles,c.styles)||d.hadInvalidStyle,a=a.classes,c=c.classes,a){for(var e=!1,g=!0===a,f=c.length;f--;)(g||a(
c[f]))&&(c.splice(f,1),e=!0);a=e}else a=!1;d.hadInvalidClass=a||d.hadInvalidClass}}function b(a,b){if(!a)return!1;var e,c=!1,d=!0===a;for(e in b)(d||a(e))&&(delete b[e],c=!0);return c}function g(a,b,c){return!(a.disabled||a.customConfig&&!c||!b)&&(a._.cachedChecks={},!0)}function i(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return"*"==(a=C(a))||CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return!!a.length&&CKEDITOR.tools.convertArrayToObject(a);var e,c={},d=0;for(e in a)c[e]=a[e],d++;return!!d&&c}function d(a,b){if(a.nothingRequired)return!0;var c,d,e,g;if(e=a.requiredClasses)for(g=b.classes,
c=0;c<e.length;++c)if("string"==typeof(d=e[c])){if(-1==CKEDITOR.tools.indexOf(g,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(g,d))return!1;return h(b.styles,a.requiredStyles)&&h(b.attributes,a.requiredAttributes)}function h(a,b){if(!b)return!0;for(var d,c=0;c<b.length;++c)if("string"==typeof(d=b[c])){if(!(d in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,d))return!1;return!0}function j(a){if(!a)return{};a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]=J;return b}function k(a){var b,c,d,e,g={},f=1;for(a=C(a);b=a.match(I);)(c=b[2])?(d=l(c,"styles"),e=l(c,"attrs"),c=l(c,"classes")):d=e=c=null,
g["$"+f++]={elements:b[1],classes:c,styles:d,attributes:e},a=a.slice(b[0].length);return g}function l(a,b){var c=a.match(L[b]);return c?C(c[1]):null}function o(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes.class;a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||"",1)),a.classes||(a.classes=c?c.split(/\s+/):[])}function n(a,b,c,d){var h,g=0;if(d.toHtml&&(b.name=b.name.replace(H,"$1")),d.doCallbacks&&a.elementCallbacks){a:for(var k,i=a.elementCallbacks,j=0,m=i.length;j<m;++j)if(k=i[j](b)){h=k;break a}if(h)return h}if(d.doTransform&&(h=a._.transformations[b.name])){for(o(b),i=0;i<h.length;++i)z(a,b,h[i]);p(b)}if(d.doFilter){a:{var s,t
;if(i=b.name,a=(j=a._).allowedRules.elements[i],h=j.allowedRules.generic,i=j.disallowedRules.elements[i],j=j.disallowedRules.generic,m=d.skipRequired,k={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},a||h){if(o(b),i)for(s=0,t=i.length;s<t;++s)if(!1===e(i[s],b,k)){a=null;break a}if(j)for(s=0,t=j.length;s<t;++s)e(j[s],b,k);if(a)for(s=0,t=a.length;s<t;++s)f(a[s],b,k,m);if(h)for(s=0,t=h.length;s<t;++s)f(h[s],b,k,m);a=k}else a=null}if(!a)return c.push(b),1;if(!a.valid)return c.push(b),1;t=a.validAttributes;var v=a.validStyles;h=a.validClasses
;i=b.attributes;var l,F,D=b.styles,w=(j=b.classes,m=b.classBackup,b.styleBackup),r=[],u=/^data-cke-/;if(s=!(k=[]),delete i.style,delete i.class,delete b.classBackup,delete b.styleBackup,!a.allAttributes)for(l in i)t[l]||u.test(l)&&(l==(F=l.replace(/^data-cke-saved-/,""))||t[F])||(delete i[l],s=!0);if(!a.allStyles||a.hadInvalidStyle){for(l in D)a.allStyles||v[l]?r.push(l+":"+D[l]):s=!0;r.length&&(i.style=r.sort().join("; "))}else w&&(i.style=w);if(!a.allClasses||a.hadInvalidClass){for(l=0;l<j.length;++l)(a.allClasses||h[j[l]])&&k.push(j[l]);k.length&&(i.class=k.sort().join(" ")),m&&k.length<m.split(/\s+/).length&&(s=!0)}else m&&(i.class=m);if(s&&(g=1),
!d.skipFinalValidation&&!q(b))return c.push(b),1}return d.toHtml&&(b.name=b.name.replace(Q,"cke:$1")),g}function p(a){var c,b=a.attributes;delete b.style,delete b.class,(c=CKEDITOR.tools.writeCssText(a.styles,!0))&&(b.style=c),a.classes.length&&(b.class=a.classes.sort().join(" "))}function q(a){switch(a.name){case"a":if(!a.children.length&&!a.attributes.name)return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function t(a){if(!a)return!1;if(!0===a)return!0;var b=function(a){var c,b=[];for(c in a)-1<c.indexOf("*")&&b.push(c.replace(/\*/g,".*"));return b.length?RegExp("^(?:"+b.join("|")+")$"):null}(a);return function(c){return c in a||b&&c.match(b)
}}function s(){return new CKEDITOR.htmlParser.element("br")}function u(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||B.$block[a.name])}function v(a,b,c){var d=a.name;if(B.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(s()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(B.$block[d]||"tr"==d)if("br"==b)a.previous&&!u(a.previous)&&(b=s()).insertBefore(a),a.next&&!u(a.next)&&(b=s()).insertAfter(a),a.replaceWithChildren();else{var e;d=a.children;b:{e=B[b];for(var h,g=0,f=d.length;g<f;++g)if((h=d[g]).type==CKEDITOR.NODE_ELEMENT&&!e[h.name]){e=!1;break b}e=!0}if(e)a.name=b,a.attributes={},c.push({check:"parent-down",el:a}
);else{var i,j;for(g=(e=a.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==e.name,f=d.length;0<f;)h=d[--f],g&&(h.type==CKEDITOR.NODE_TEXT||h.type==CKEDITOR.NODE_ELEMENT&&B.$inline[h.name])?(i||((i=new CKEDITOR.htmlParser.element(b)).insertAfter(a),c.push({check:"parent-down",el:i})),i.add(h,0)):(i=null,j=B[e.name]||B.span,h.insertAfter(a),e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&h.type==CKEDITOR.NODE_ELEMENT&&!j[h.name]&&c.push({check:"el-up",el:h}));a.remove()}}else"style"==d?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function z(a,b,c){var d,e;for(d=0;d<c.length;++d)if((!(e=c[d]).check||a.check(e.check,!1))&&(
!e.left||e.left(b))){e.right(b,O);break}}function w(a,b){var g,h,f,i,c=b.getDefinition(),d=c.attributes,e=c.styles;if(a.name!=c.element)return!1;for(g in d)if("class"==g){for(c=d[g].split(/\s+/),f=a.classes.join("|");i=c.pop();)if(-1==f.indexOf(i))return!1}else if(a.attributes[g]!=d[g])return!1;for(h in e)if(a.styles[h]!=e[h])return!1;return!0}function r(a,b){var c,d;return"string"==typeof a?c=a:d=a instanceof CKEDITOR.style?a:(c=a[0],a[1]),[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function x(a){return function(b){return w(b,a)}}function y(a){return function(b,c){c[a](b)}}var B=CKEDITOR.dtd,G=CKEDITOR.tools.copy,C=CKEDITOR.tools.trim,
J="cke-test",D=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(a){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,a instanceof CKEDITOR.editor){a=this.editor=a,this.customConfig=!0;var b=a.config.allowedContent;!0===b?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(
D[a.enterMode]+" "+D[a.shiftEnterMode],"default",1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(b,c,d){if(!g(this,b,d))return!1;var e,h;if("string"==typeof b)b=k(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);e=b.getDefinition(),b={},d=e.attributes,b[e.element]=e={styles:e.styles,requiredStyles:e.styles&&CKEDITOR.tools.objectKeys(e.styles)},d&&(d=G(d),e.classes=d.class?d.class.split(/\s+/):null,e.requiredClasses=e.classes,delete d.class,e.attributes=d,
e.requiredAttributes=d&&CKEDITOR.tools.objectKeys(d))}else if(CKEDITOR.tools.isArray(b)){for(e=0;e<b.length;++e)h=this.allow(b[e],c,d);return h}return a(this,b,c,this.allowedContent,this._.allowedRules),!0},applyTo:function(a,b,c,d){if(this.disabled)return!1;var f,e=this,g=[],h=this.editor&&this.editor.config.protectedSource,i=!1,j={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(1&(f=n(e,a,g,j)))i=!0;else if(2&f)return!1}else if(
a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var m,q,k,d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));if(c=[],h)for(q=0;q<h.length;++q)if((k=d.match(h[q]))&&k[0].length==d.length){c=!0;break a}1==(d=CKEDITOR.htmlParser.fragment.fromHtml(d)).children.length&&(m=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&n(e,m,c,j),c=!c.length}c||g.push(a)}},null,!0),g.length&&(i=!0);var m,k;for(a=[],d=D[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];c=g.pop();)c.type==CKEDITOR.NODE_ELEMENT?v(c,d,a):c.remove();for(;m=a.pop();)if((c=m.el).parent)switch(k=B[c.parent.name]||B.span,m.check){case"it":
B.$removeEmpty[c.name]&&!c.children.length?v(c,d,a):q(c)||v(c,d,a);break;case"el-up":c.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!k[c.name]&&v(c,d,a);break;case"parent-down":c.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!k[c.name]&&v(c.parent,d,a)}return i},checkFeature:function(a){return!(!this.disabled&&a)||(a.toFeature&&(a=a.toFeature(this.editor)),!a.requiredContent||this.check(a.requiredContent))},disable:function(){this.disabled=!0},disallow:function(b){return!!g(this,b,!0)&&("string"==typeof b&&(b=k(b)),a(this,b,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(a){if(!this.disabled&&a){var b,c,e,d=[];for(
b=0;b<a.length&&!e;++b)("string"==typeof(c=a[b])||c instanceof CKEDITOR.style)&&this.check(c)&&(e=c);if(e){for(b=0;b<a.length;++b)d.push(r(a[b],e));this.addTransformations(d)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(a)},addFeature:function(a){return!(!this.disabled&&a)||(a.toFeature&&(a=a.toFeature(this.editor)),this.allow(a.allowedContent,a.name),this.addTransformations(a.contentTransformations),this.addContentForms(a.contentForms),!a.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(a.requiredContent))},addTransformations:function(a){var b,c;if(
!this.disabled&&a){var e,d=this._.transformations;for(e=0;e<a.length;++e){b=a[e];var g=void 0,h=void 0,f=void 0,i=void 0,j=void 0,m=void 0;for(c=[],h=0;h<b.length;++h)m="string"==typeof(f=b[h])?(i=(f=f.split(/\s*:\s*/))[0],j=null,f[1]):(i=f.check,j=f.left,f.right),g||(g=(g=f).element?g.element:i?i.match(/^([a-z0-9]+)/i)[0]:g.left.getDefinition().element),j instanceof CKEDITOR.style&&(j=x(j)),c.push({check:i==g?null:i,left:j,right:"string"==typeof m?y(m):m});d[b=g]||(d[b]=[]),d[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var e,g;if(
"string"==typeof a){if((g=a+"<"+(!1===b?"0":"1")+(c?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[g];e=(d=k(a).$1).styles;var h=d.classes;d.name=d.elements,d.classes=h=h?h.split(/\s*,\s*/):[],d.styles=j(e),d.attributes=j(d.attributes),d.children=[],h.length&&(d.attributes.class=h.join(" ")),e&&(d.attributes.style=CKEDITOR.tools.writeCssText(d.styles)),e=d}else e=(d=a.getDefinition()).styles,h=d.attributes||{},e?(e=G(e),h.style=CKEDITOR.tools.writeCssText(e,!0)):e={},e={name:d.element,attributes:h,classes:h.class?h.class.split(/\s+/):[],styles:e,children:[]};h=CKEDITOR.tools.clone(e);var i,f=[];if(!1!==b&&(i=this._.transformations[e.name])){
for(d=0;d<i.length;++d)z(this,e,i[d]);p(e)}return n(this,h,f,{doFilter:!0,doTransform:!1!==b,skipRequired:!c,skipFinalValidation:!c}),b=!(0<f.length)&&!!CKEDITOR.tools.objectCompare(e.attributes,h.attributes,!0),"string"==typeof a&&(this._.cachedChecks[g]=b),b},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var g,e=a.slice();if(this.check(D[c]))return c;for(d||(e=e.reverse());g=e.pop();)if(this.check(g))return b[g];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,
delete this.disallowedContent}};var F={styles:1,attributes:1,classes:1},E={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},I=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,L={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},H=/^cke:(object|embed|param)$/,Q=/^(object|embed|param)$/,O=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width"),this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width"),this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){if(!((c=c||b
)in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){if(!((c=c||b)in a.attributes)){var d=a.styles[b],e=d&&d.match(/^(\d+)(?:\.\d*)?px$/);e?a.attributes[c]=e[1]:d==J&&(a.attributes[c]=J)}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;"left"!=b&&"right"!=b||(a.styles.float=b)}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles.float;"left"!=b&&"right"!=b||(a.attributes.align=b)}delete a.styles.float},matchesStyle:w,transform:function(a,b){if("string"==typeof b
)a.name=b;else{var g,h,f,i,c=b.getDefinition(),d=c.styles,e=c.attributes;for(g in a.name=c.element,e)if("class"==g)for(c=a.classes.join("|"),f=e[g].split(/\s+/);i=f.pop();)-1==c.indexOf(i)&&a.classes.push(i);else a.attributes[g]=e[g];for(h in d)a.styles[h]=d[h]}}}}(),CKEDITOR.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:a},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer),a&&(this.currentActive=a),this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(
a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(a){function f(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var c=CKEDITOR.focusManager._.blurDelay;a||!c?f.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,f.call(this)},c,this)}},add:function(a,f){if(!(c=a.getCustomData("focusmanager"))||c!=this){c&&c.remove(a);var c="focus",e="blur";f&&(CKEDITOR.env.ie?(c="focusin",
e="focusout"):CKEDITOR.event.useCapture=1);var b={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(c,b.focus,this),a.on(e,b.blur,this),f&&(CKEDITOR.event.useCapture=0),a.setCustomData("focusmanager",this),a.setCustomData("focusmanager_handlers",b)}},remove:function(a){a.removeCustomData("focusmanager");var f=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",f.blur),a.removeListener("focus",f.focus)}},CKEDITOR.keystrokeHandler=function(a){return a.keystrokeHandler?a.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:a},this)},function(){var a,f=function(c){var b=(
c=c.data).getKeystroke(),g=this.keystrokes[b],f=this._.editor;return(a=!1===f.fire("key",{keyCode:b,domEvent:c}))||(g&&(a=!1!==f.execCommand(g,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[b])),a&&c.preventDefault(!0),!a},c=function(c){a&&(a=!1,c.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",f,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&a.on("keypress",c,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,
ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,f,c){a&&CKEDITOR.lang.languages[a]||(a=this.detect(f,a));var e=this;f=function(){e[a].dir=e.rtl[a]?"rtl":"ltr",c(a,e[a])},this[a]?f():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),f,this)},detect:function(a,f){var c=this.languages,b=(e=(f=f||navigator.userLanguage||navigator.language||a).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],e=e[2];return c[b+"-"+e]?b=b+"-"+e:c[b]||(b=null),CKEDITOR.lang.detect=b?function(){return b}:function(
a){return a},b||a}},CKEDITOR.scriptLoader={load:function(a,f,c){c||(c=CKEDITOR),f&&("string"==typeof a?f.call(c,!0):f.call(c,[],[]))},queue:function(){function a(){var a;(a=f[0])&&this.load(a.scriptUrl,a.callback,CKEDITOR,0)}var f=[];return function(c,e){var b=this;f.push({scriptUrl:c,callback:function(){e&&e.apply(this,arguments),f.shift(),a.call(b)}}),1==f.length&&a.call(this)}}()},CKEDITOR.resourceManager=function(a,f){this.basePath=a,this.fileName=f,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(a,f){if(this.registered[a]
)throw'[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.';var c=this.registered[a]=f||{};return c.name=a,c.path=this.getPath(a),CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",c),this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var f=this.externals[a];return CKEDITOR.getUrl(f&&f.dir||this.basePath+a+"/")},getFilePath:function(a){var f=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(f?f.file:this.fileName+".js"))},addExternal:function(a,f,c){a=a.split(",");for(var e=0;e<a.length;e++){var b=a[e];c||(f=f.replace(/[^\/]+$/,function(a){return c=a,""})),this.externals[b]={
dir:f,file:c||this.fileName+".js"}}},load:function(a,f,c){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var e=this.loaded,b=this.registered,g=[],i={},d={},h=0;h<a.length;h++){var j=a[h];if(j)if(e[j]||b[j])d[j]=this.get(j);else{var k=this.getFilePath(j);g.push(k),k in i||(i[k]=[]),i[k].push(j)}}CKEDITOR.scriptLoader.load(g,function(a,b){if(b.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+i[b[0]].join(",")+'" was not found at "'+b[0]+'".';for(var g=0;g<a.length;g++)for(var h=i[a[g]],j=0;j<h.length;j++){var q=h[j];d[q]=this.get(q),e[q]=1}f.call(c,d)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),
CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var f={};return function(c,e,b){var g={},i=function(c){a.call(this,c,function(a){CKEDITOR.tools.extend(g,a);var d,c=[];for(d in a){var l=a[d],o=l&&l.requires;if(!f[d]){if(l.icons)for(var n=l.icons.split(","),m=n.length;m--;)CKEDITOR.skin.addIcon(n[m],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+n[m]+".png");f[d]=1}if(o)for(o.split&&(o=o.split(",")),l=0;l<o.length;l++)g[o[l]]||c.push(o[l])}if(c.length)i.call(this,c);else{for(d in g)(l=g[d]).onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete g[d],l.onLoad._called=1);e&&e.call(b||window,g)}},this)};i.call(this,c)}}),
CKEDITOR.plugins.setLang=function(a,f,c){var e;a=(e=this.get(a)).langEntries||(e.langEntries={});(e=e.lang||(e.lang=[])).split&&(e=e.split(",")),-1==CKEDITOR.tools.indexOf(e,f)&&e.push(f),a[f]=c},CKEDITOR.ui=function(a){return a.ui?a.ui:(this.items={},this.instances={},this.editor=a,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(a,f,c){c.name=a.toLowerCase();var e=this.items[a]={type:f,command:c.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(e,c)},get:function(a){return this.instances[a]},create:function(a){var f=this.items[a],c=f&&this._.handlers[f.type],e=f&&f.command&&this.editor.getCommand(f.command)
;c=c&&c.create.apply(this,f.args);return this.instances[a]=c,e&&e.uiItems.push(c),c&&!c.type&&(c.type=f.type),c},addHandler:function(a,f){this._.handlers[a]=f},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(a,d,e){if(CKEDITOR.event.call(this),a=a&&CKEDITOR.tools.clone(a),void 0!==d){if(!(d instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!e)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e==CKEDITOR.ELEMENT_MODE_INLINE
)throw Error("Inline element mode is not supported on IE quirks.");if(!(e==CKEDITOR.ELEMENT_MODE_INLINE?d.is(CKEDITOR.dtd.$editable)||d.is("textarea"):e!=CKEDITOR.ELEMENT_MODE_REPLACE||!d.is(CKEDITOR.dtd.$nonBodyContent)))throw Error('The specified element mode is not supported on element: "'+d.getName()+'".');this.element=d,this.elementMode=e,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(d.getId()||d.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var a="editor"+ ++o}while(CKEDITOR.instances[a]);return a}(),this.id=CKEDITOR.tools.getNextId(),
this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",c),this.on("selectionChange",function(a){b(this,a.data.path)}),this.on("activeFilterChange",function(){b(this,this.elementPath(),!0)}),this.on("mode",c),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){i(this,a)},0,this)}function c(){var b,a=this.commands;for(b in a)e(this,a[b])}function e(a,b){
b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function b(a,b,c){if(b){var d,e,g=a.commands;for(e in g)d=g[e],(c||d.contextSensitive)&&d.refresh(a,b)}}function i(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0),delete a.config.on}c=a.config,a.readOnly=!(!c.readOnly&&!(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&a.element.hasAttribute("disabled"))),
a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p),a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0,a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode,a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode,c.skin&&(CKEDITOR.skinName=c.skin),a.fireOnce("configLoaded"),a.dataProcessor=new CKEDITOR.htmlDataProcessor(a),a.filter=a.activeFilter=new CKEDITOR.filter(a),function(a){CKEDITOR.skin.loadPart("editor",function(){!function(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){
var d=a.config.title;a.langCode=b,a.lang=CKEDITOR.tools.prototypedCopy(c),a.title="string"==typeof d||!1===d?d:[a.lang.editor,a.name].join(", "),a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir),a.fire("langLoaded"),function(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1),function(a){var b=a.config,c=b.plugins,d=b.extraPlugins,e=b.removePlugins;if(d)var g=RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=(c=c.replace(g,""))+","+d;if(e)var h=RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)",
"g"),c=c.replace(h,"");CKEDITOR.env.air&&(c+=",adobeair"),CKEDITOR.plugins.load(c.split(","),function(c){var d=[],e=[],g=[];for(var f in a.plugins=c){var s,i=c[f],j=i.lang,q=null,k=i.requires;if(CKEDITOR.tools.isArray(k)&&(k=k.join(",")),k&&(s=k.match(h)))for(;k=s.pop();)CKEDITOR.tools.setTimeout(function(a,b){throw Error('Plugin "'+a.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+b+'" plugin.')},0,null,[k,f]);j&&!a.lang[f]&&(j.split&&(j=j.split(",")),q=0<=CKEDITOR.tools.indexOf(j,a.langCode)?a.langCode:(q=a.langCode.replace(/-.*/,""))!=a.langCode&&0<=CKEDITOR.tools.indexOf(j,q)?q:0<=CKEDITOR.tools.indexOf(j,"en"
)?"en":j[0],i.langEntries&&i.langEntries[q]?(a.lang[f]=i.langEntries[q],q=null):g.push(CKEDITOR.getUrl(i.path+"lang/"+q+".js"))),e.push(q),d.push(i)}CKEDITOR.scriptLoader.load(g,function(){for(var c=["beforeInit","init","afterInit"],g=0;g<c.length;g++)for(var h=0;h<d.length;h++){var f=d[h];0===g&&e[h]&&f.lang&&f.langEntries&&(a.lang[f.name]=f.langEntries[e[h]]),f[c[g]]&&f[c[g]](a)}for(a.fireOnce("pluginsLoaded"),b.keystrokes&&a.setKeystroke(a.config.keystrokes),h=0;h<a.config.blockedKeystrokes.length;h++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[h]]=1;a.status="loaded",a.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,a)})})}(a)}
)}(a)})}(a)})}(a)}),b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig),function g(a){if(!(b=a.config.customConfig))return!1;var b=CKEDITOR.getUrl(b),c=n[b]||(n[b]={});return c.fn?(c.fn.call(a,a.config),(CKEDITOR.getUrl(a.config.customConfig)==b||!g(a))&&a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},g(a)}),!0}(a)||a.fireOnce("customConfigLoaded")}function l(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();return this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b)),a.is("textarea")?a.setValue(b
):a.setHtml(b),!0}return!1}a.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=a;var o=0,n={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);return this.mode&&e(this,c),this.commands[a]=c},_attachToForm:function(){function a(d){b.updateElement(),b._.required&&!c.getValue()&&!1===b.fire("required")&&d.data.preventDefault()}var b=this,c=b.element,d=new CKEDITOR.dom.element(c.$.form);c.is("textarea")&&d&&(d.on("submit",a),d.$.submit&&d.$.submit.call&&d.$.submit.apply&&(d.$.submit=CKEDITOR.tools.override(d.$.submit,function(b){return function(){a(),b.apply?b.apply(this):b()}})
),b.on("destroy",function(){d.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy"),!a&&l.call(this),this.editable(null),this.filter.destroy(),delete this.filter,delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){if(!(a=this.getSelection()))return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,
commandData:b,command:c};return!(!c||c.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",d)||(d.returnValue=c.exec(d.commandData),c.async||!1===this.fire("afterCommandExec",d)))&&d.returnValue},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;return"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():""),b={dataValue:b},!a&&this.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if("string"!=typeof a){var b=this.element
;b&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a=b.is("textarea")?b.getValue():b.getHtml())}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,e=b;b&&"object"==typeof b&&(c=b.internal,e=b.callback,d=!b.noSnapshot),!c&&d&&this.fire("saveSnapshot"),!e&&c||this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot"),e&&e.call(a.editor)}),a={dataValue:a},!c&&this.fire("setData",a),this._.data=a.dataValue,!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a,this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly")
)},insertHtml:function(a,b){this.fire("insertHtml",{dataValue:a,mode:b})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return l.call(this)},setKeystroke:function(){for(var c,d,a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],e=b.length;e--;)c=b[e],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),
d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter),this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode,b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode,this.activeEnterMode==a&&this.activeShiftEnterMode==b||(this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange"))}})}(),
CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\>)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,f={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},
onCDATA:function(){},onComment:function(){},parse:function(c){for(var e,b,i,g=0;e=this._.htmlPartsRegex.exec(c);)if(g<(b=e.index)&&(g=c.substring(g,b),i?i.push(g):this.onText(g)),g=this._.htmlPartsRegex.lastIndex,!(b=e[1])||(b=b.toLowerCase(),i&&CKEDITOR.dtd.$cdata[b]&&(this.onCDATA(i.join("")),i=null),i))if(i)i.push(e[0]);else if(b=e[3]){if(b=b.toLowerCase(),!/="/.test(b)){var h,d={},j=e[4];if(e=!!e[5],j)for(;h=a.exec(j);){var k=h[1].toLowerCase();h=h[2]||h[3]||h[4]||"",d[k]=!h&&f[k]?k:CKEDITOR.tools.htmlDecodeAttr(h)}this.onTagOpen(b,d,e),!i&&CKEDITOR.dtd.$cdata[b]&&(i=[])}}else(b=e[2])&&this.onComment(b);else this.onTagClose(b);c.length>g&&this.onText(
c.substring(g,c.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,f){f?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,f){"string"==typeof f&&(f=CKEDITOR.tools.htmlEncodeAttr(f)),this._.output.push(" ",a,'="',f,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){
var f=this._.output.join("");return a&&this.reset(),f}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,f=CKEDITOR.tools.indexOf(a,this),c=this.previous,e=this.next;c&&(c.next=e),e&&(e.previous=c),a.splice(f,1),this.parent=null},replaceWith:function(a){var f=this.parent.children,c=CKEDITOR.tools.indexOf(f,this),e=a.previous=this.previous,b=a.next=this.next;e&&(e.next=a),b&&(b.previous=a),(f[c]=a).parent=this.parent,this.parent=null},insertAfter:function(a){var f=a.parent.children,c=CKEDITOR.tools.indexOf(f,a),e=a.next;f.splice(c+1,0,this),this.next=a.next,(this.previous=a).next=this,
e&&(e.previous=this),this.parent=a.parent},insertBefore:function(a){var f=a.parent.children,c=CKEDITOR.tools.indexOf(f,a);f.splice(c,0,this),this.next=a,(this.previous=a.previous)&&(a.previous.next=this),(a.previous=this).parent=a.parent},getAscendant:function(a){for(var f="function"==typeof a?a:"string"==typeof a?function(c){return c.name==a}:function(c){return c.name in a},c=this.parent;c&&c.type==CKEDITOR.NODE_ELEMENT;){if(f(c))return c;c=c.parent}return null},wrapWith:function(a){return this.replaceWith(a),a.add(this),a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}},
CKEDITOR.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,f){var c=this.value;return(c=a.onComment(f,c,this))?"string"!=typeof c?(this.replaceWith(c),!1):(this.value=c,!0):(this.remove(),!1)},writeHtml:function(a,f){f&&this.filter(f),a.comment(this.value)}}),CKEDITOR.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,f){if(!(this.value=a.onText(f,this.value,this))
)return this.remove(),!1},writeHtml:function(a,f){f&&this.filter(f),a.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(a){this.value=a},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(a){return!a.attributes["data-cke-survive"]&&("a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name])}var f=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,
CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c={ol:1,ul:1},e=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),b={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(g,i,d){function h(a){var b;if(0<q.length)for(var c=0;c<q.length;c++){var d=q[c],e=d.name,g=CKEDITOR.dtd[e],h=s.name&&CKEDITOR.dtd[s.name];h&&!h[e]||a&&g&&!g[a]&&CKEDITOR.dtd[a]?e==s.name&&(l(s,s.parent,1),c--):(b||(j(),b=1),(d=d.clone()).parent=s,s=d,q.splice(c,1),c--)}}function j(){for(;t.length;)l(t.shift(),s)}function k(a){if(
a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var d,b=a.children.length,c=a.children[b-1];c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?c.value=d:a.children.length=b-1)}}function l(b,c,e){c=c||s||p;var g=s;void 0===b.previous&&(o(c,b)&&(s=c,m.onTagOpen(d,{}),b.returnPoint=c=s),k(b),(!a(b)||b.children.length)&&c.add(b),"pre"==b.name&&(v=!1),"textarea"==b.name&&(u=!1)),b.returnPoint?(s=b.returnPoint,delete b.returnPoint):s=e?c:g}function o(a,b){var c,e;if((a==p||"body"==a.name)&&d&&(!a.name||CKEDITOR.dtd[a.name][d]))return(c=b.attributes&&(e=b.attributes["data-cke-real-element-type"])?e:b.name)&&c in CKEDITOR.dtd.$inline&&!(
c in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}function n(a,b){return(a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent)&&(a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b)}var m=new CKEDITOR.htmlParser,p=i instanceof CKEDITOR.htmlParser.element?i:"string"==typeof i?new CKEDITOR.htmlParser.element(i):new CKEDITOR.htmlParser.fragment,q=[],t=[],s=p,u="textarea"==p.name,v="pre"==p.name;for(m.onTagOpen=function(b,d,g,i){if((d=new CKEDITOR.htmlParser.element(b,d)).isUnknown&&g&&(d.isEmpty=!0),d.isOptionalClose=i,a(d))q.push(d);else{if("pre"==b)v=!0;else{if("br"==b&&v)return void s.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==b&&(u=!0)}
if("br"==b)t.push(d);else{for(;i=(g=s.name)?CKEDITOR.dtd[g]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):e,!(d.isUnknown||s.isUnknown||i[b]);)if(s.isOptionalClose)m.onTagClose(g);else if(b in c&&g in c)(g=(g=s.children)[g.length-1])&&"li"==g.name||l(g=new CKEDITOR.htmlParser.element("li"),s),!d.returnPoint&&(d.returnPoint=s),s=g;else if(b in CKEDITOR.dtd.$listItem&&!n(b,g))m.onTagOpen("li"==b?"ul":"dl",{},0,1);else if(g in f&&!n(b,g))!d.returnPoint&&(d.returnPoint=s),s=s.parent;else{if(g in CKEDITOR.dtd.$inline&&q.unshift(s),!s.parent){d.isOrphan=1;break}l(s,s.parent,1)}h(b),j(),d.parent=s,d.isEmpty?l(d):s=d}}},m.onTagClose=function(a){for(
var b=q.length-1;0<=b;b--)if(a==q[b].name)return void q.splice(b,1);for(var c=[],e=[],g=s;g!=p&&g.name!=a;)g._.isBlockLike||e.unshift(g),c.push(g),g=g.returnPoint||g.parent;if(g!=p){for(b=0;b<c.length;b++){var h=c[b];l(h,h.parent)}(s=g)._.isBlockLike&&j(),l(g,g.parent),g==s&&(s=s.parent),q=q.concat(e)}"body"==a&&(d=!1)},m.onText=function(a){if(s._.hasInlineStarted&&!t.length||v||u||0!==(a=CKEDITOR.tools.ltrim(a)).length){var c=s.name,g=c?CKEDITOR.dtd[c]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):e;!u&&!g["#"]&&c in f?(m.onTagOpen(b[c]||""),m.onText(a)):(j(),h(),!v&&!u&&(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),a=new CKEDITOR.htmlParser.text(a),
o(s,a)&&this.onTagOpen(d,{},0,1),s.add(a))}},m.onCDATA=function(a){s.add(new CKEDITOR.htmlParser.cdata(a))},m.onComment=function(a){j(),h(),s.add(new CKEDITOR.htmlParser.comment(a))},m.parse(g),j();s!=p;)l(s,s.parent,1);return k(p),p},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=0<b?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length))return this.children.pop(),void this.add(a);c.next=a}a.previous=c,(a.parent=this).children.splice(b,0,a),this._.hasInlineStarted||(
this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b),a.onRoot(b,this),this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id)for(c=this.getFilterContext(c),b&&!this.parent&&a.onRoot(c,this),this.childrenFilteredBy=a.id,b=0;b<this.children.length;b++)!1===this.children[b].filter(a,c)&&b--},writeHtml:function(a,b){b&&this.filter(b),this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var e=this.getFilterContext();for(c&&!this.parent&&b&&b.onRoot(e,this),b&&this.filterChildren(b,!1,e),b=0,e=(c=this.children
).length;b<e;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var e=a(this);if(!1!==e){c=this.children;for(var f=0;f<c.length;f++)(e=c[f]).type==CKEDITOR.NODE_ELEMENT?e.forEach(a,b):(!b||e.type==b)&&a(e)}},getFilterContext:function(a){return a||{}}}}(),function(){function a(){this.rules=[]}function f(c,e,b,g){var f,d;for(f in e)(d=c[f])||(d=c[f]=new a),d.add(e[f],b,g)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(c){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new a,this.attributeNameRules=new a,this.elementsRules={},this.attributesRules={},this.textRules=new a,this.commentRules=new a,
this.rootRules=new a,c&&this.addRules(c,10)},proto:{addRules:function(a,e){var b;"number"==typeof e?b=e:e&&"priority"in e&&(b=e.priority),"number"!=typeof b&&(b=10),"object"!=typeof e&&(e={}),a.elementNames&&this.elementNameRules.addMany(a.elementNames,b,e),a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,b,e),a.elements&&f(this.elementsRules,a.elements,b,e),a.attributes&&f(this.attributesRules,a.attributes,b,e),a.text&&this.textRules.add(a.text,b,e),a.comment&&this.commentRules.add(a.comment,b,e),a.root&&this.rootRules.add(a.root,b,e)},applyTo:function(a){a.filter(this)},onElementName:function(a,e){return this.elementNameRules.execOnName(a
,e)},onAttributeName:function(a,e){return this.attributeNameRules.execOnName(a,e)},onText:function(a,e,b){return this.textRules.exec(a,e,b)},onComment:function(a,e,b){return this.commentRules.exec(a,e,b)},onRoot:function(a,e){return this.rootRules.exec(a,e)},onElement:function(a,e){for(var g,b=[this.elementsRules["^"],this.elementsRules[e.name],this.elementsRules.$],f=0;f<3;f++)if(g=b[f]){if(!1===(g=g.exec(a,e,this)))return null;if(g&&g!=e)return this.onNode(a,g);if(e.parent&&!e.name)break}return e},onNode:function(a,e){var b=e.type;return b==CKEDITOR.NODE_ELEMENT?this.onElement(a,e):b==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,e.value)
):b==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,e.value)):null},onAttribute:function(a,e,b,g){return(b=this.attributesRules[b])?b.exec(a,g,e,this):g}}}),(CKEDITOR.htmlParser.filterRulesGroup=a).prototype={add:function(a,e,b){this.rules.splice(this.findIndex(e),0,{value:a,priority:e,options:b})},addMany:function(a,e,b){for(var g=[this.findIndex(e),0],f=0,d=a.length;f<d;f++)g.push({value:a[f],priority:e,options:b});this.rules.splice.apply(this.rules,g)},findIndex:function(a){for(var e=this.rules,b=e.length-1;0<=b&&a<e[b].priority;)b--;return b+1},exec:function(a,e){var h,j,k,l,
b=e instanceof CKEDITOR.htmlParser.node||e instanceof CKEDITOR.htmlParser.fragment,g=Array.prototype.slice.call(arguments,1),f=this.rules,d=f.length;for(l=0;l<d;l++)if(b&&(h=e.type,j=e.name),k=f[l],!(a.nonEditable&&!k.options.applyToAll||a.nestedEditable&&k.options.excludeNestedEditable)){if(!1===(k=k.value.apply(null,g))||b&&k&&(k.name!=j||k.type!=h))return k;null!=k&&(g[0]=e=k)}return e},execOnName:function(a,e){for(var d,b=0,g=this.rules,f=g.length;e&&b<f;b++)d=g[b],!(a.nonEditable&&!d.options.applyToAll||a.nestedEditable&&d.options.excludeNestedEditable)&&(e=e.replace(d.value[0],d.value[1]));return e}}}(),function(){function a(a,d){function f(a){
return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function h(a,b){return function(d){if(d.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var k,q,h=[],i=c(d);if(i)for(j(i,1)&&h.push(i);i;)g(i)&&(k=e(i))&&j(k)&&((q=e(k))&&!g(q)?h.push(k):(f(t).insertAfter(k),k.remove())),i=i.previous;for(i=0;i<h.length;i++)h[i].remove();(h=!a||!1!==("function"==typeof b?b(d):b))&&(h=!(!t&&!CKEDITOR.env.needsBrFiller&&d.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(!(!t&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||d.name in CKEDITOR.dtd.tr||d.name in CKEDITOR.dtd.$listItem))&&(!(h=c(d)
)||"form"==d.name&&"input"==h.name))),h&&d.add(f(a))}}}function j(a,b){if((!t||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;if(a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(q))){if(c.index&&(new CKEDITOR.htmlParser.text(a.value.substring(0,c.index)).insertBefore(a),a.value=c[0]),!CKEDITOR.env.needsBrFiller&&t&&(!b||a.parent.name in m))return!0;if(!t&&((c=a.previous)&&"br"==c.name||!c||g(c)))return!0}return!1}var D,k={elements:{}},t="html"==d,m=CKEDITOR.tools.extend({},v);for(D in m)"#"in s[D]||delete m[D];for(D in m)k.elements[D]=h(t,a.config.fillEmptyBlocks);return k.root=h(t,!1),
k.elements.br=function(a){return function(c){if(c.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=c.attributes;if("data-cke-bogus"in d||"data-cke-eol"in d)delete d["data-cke-bogus"];else{for(d=c.next;d&&b(d);)d=d.next;var h=e(c);!d&&g(c.parent)?i(c.parent,f(a)):g(d)&&h&&!g(h)&&f(a).insertBefore(d)}}}}(t),k}function f(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b&&(a==CKEDITOR.ENTER_DIV?"div":"p")}function c(a){for(a=a.children[a.children.length-1];a&&b(a);)a=a.previous;return a}function e(a){for(a=a.previous;a&&b(a);)a=a.previous;return a}function b(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value
)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function g(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in v||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function i(a,b){var c=a.children[a.children.length-1];a.children.push(b),b.parent=a,c&&((c.next=b).previous=c)}function d(a){"false"!=(a=a.attributes).contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1),a.contenteditable="false"}function h(a){switch((a=a.attributes)["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable}}function k(a,b){return a.replace(b,function(a,b,c){return 0===a.indexOf("<textarea")&&(a=b+n(c).replace(
/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function n(a){return a.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)})}function m(a,b){var c=b._.dataStore;return a.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}CKEDITOR.htmlDataProcessor=function(b){var c,d,e=this;this.editor=b,this.dataFilter=c=new CKEDITOR.htmlParser.filter,this.htmlFilter=d=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,c.addRules(z),
c.addRules(w,{applyToAll:!0}),c.addRules(a(b,"data"),{applyToAll:!0}),d.addRules(r),d.addRules(x,{applyToAll:!0}),d.addRules(a(b,"html"),{applyToAll:!0}),b.on("toHtml",function(a){var d,e,c=(c=(c=(c=(c=k(c=function(a){return a.replace(y,function(a,b,c){return"<"+b+c.replace(B,function(a,b){return A.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+">"})}(c=k(c=function(a,b){for(var c=[],d=b.config.protectedSource,e=b._.dataStore||(b._.dataStore={id:1}),g=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,h=(d=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d),a=a.replace(
/<\!--[\s\S]*?--\>/g,function(a){return"\x3c!--{cke_tempcomment}"+(c.push(a)-1)+"--\x3e"}),0);h<d.length;h++)a=a.replace(d[h],function(a){return a=a.replace(g,function(a,b,d){return c[d]}),/cke_temp(comment)?/.test(a)?a:"\x3c!--{cke_temp}"+(c.push(a)-1)+"--\x3e"});return(a=(a=a.replace(g,function(a,b,d){return"\x3c!--"+t+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"--\x3e"})).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=>]+))+\s*>/g,function(a){return a.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(a,b){return e[e.id]=decodeURIComponent(b),"{cke_protected_"+e.id+++"}"})})).replace(
/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,e){return"<"+c+d+">"+m(n(e),b)+"</"+c+">"})}(c=(a=a.data).dataValue,b),C)),G)).replace(D,"$1cke:$2")).replace(E,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");d=a.context||b.editable().getName(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==d&&(d="div",c="<pre>"+c+"</pre>",e=1),(d=b.document.createElement(d)).setHtml("a"+c),c=(c=d.getHtml().substr(1)).replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),e&&(c=c.replace(/^<pre>|<\/pre>$/gi,"")),c=n(c=function(a){return a.replace(J,function(a,b
){return decodeURIComponent(b)})}(c=c.replace(F,"$1$2"))),d=!1!==a.fixForBody&&f(a.enterMode,b.config.autoParagraph),c=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,d),d&&!(e=c).children.length&&CKEDITOR.dtd[e.name][d]&&(d=new CKEDITOR.htmlParser.element(d),e.add(d)),a.dataValue=c},null,null,5),b.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered")},null,null,6),b.on("toHtml",function(a){a.data.dataValue.filterChildren(e.dataFilter,!0)},null,null,10),b.on("toHtml",function(a){var b=(a=a.data).dataValue,c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c),b=c.getHtml(!0),
a.dataValue=function(a){return a.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(a){return"\x3c!--"+t+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\x3e"})}(b)},null,null,15),b.on("toDataFormat",function(a){var c=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,"")),a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.data.context,f(a.data.enterMode,b.config.autoParagraph))},null,null,5),b.on("toDataFormat",function(a){a.data.dataValue.filterChildren(e.htmlFilter,!0)},null,null,10),b.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,!1,!0)},null,null,11),b.on("toDataFormat",function(a
){var c=a.data.dataValue,d=e.writer;d.reset(),c.writeChildrenHtml(d),c=m(c=n(c=d.getHtml(!0)),b),a.data.dataValue=c},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var g,h,f,e=this.editor;return b&&"object"==typeof b?(g=b.context,c=b.fixForBody,d=b.dontFilter,h=b.filter,f=b.enterMode):g=b,!g&&null!==g&&(g=e.editable().getName()),e.fire("toHtml",{dataValue:a,context:g,fixForBody:c,dontFilter:d,filter:h||e.filter,enterMode:f||e.enterMode}).dataValue},toDataFormat:function(a,b){var c,d,e;return b&&(c=b.context,d=b.filter,e=b.enterMode),!c&&null!==c&&(c=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:a,
filter:d||this.editor.filter,context:c,enterMode:e||this.editor.enterMode}).dataValue}};var q=/(?:&nbsp;|\xa0)$/,t="{cke_protected}",s=CKEDITOR.dtd,u=["caption","colgroup","col","thead","tfoot","tbody"],v=CKEDITOR.tools.extend({},s.$blockLimit,s.$block),z={elements:{input:d,textarea:d}},w={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},r={elements:{embed:function(a){if((b=a.parent)&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c),b&&(a.attributes.height=b)}},a:function(a){if(!a.children.length&&!a.attributes.name&&!a.attributes["data-cke-saved-name"])return!1}}},x={elementNames:[[/^cke:/,""],[
/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c=["name","href","src"],e=0;e<c.length;e++)"data-cke-saved-"+c[e]in b&&delete b[c[e]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;return a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(u,a.name),d=CKEDITOR.tools.indexOf(u,b.name)),-1<c&&-1<d&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1),d<c?1:-1})},param:function(a){return a.children=[],a.isEmpty=!0,a},span:function(a){
"Apple-style-span"==a.attributes.class&&delete a.name},html:function(a){delete a.attributes.contenteditable,delete a.attributes.class},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&i(a,b=new CKEDITOR.htmlParser.text),b.value=a.attributes["data-cke-title"]||""},input:h,textarea:h},attributes:{class:function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(x.attributes.style=function(a){
return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var y=/<(a|area|img|input|source)\b([^>]*)>/gi,B=/([\w-]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,A=/^(href|src|name)$/i,G=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,C=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,J=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,D=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,F=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,E=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(a,f){this.name=a,this.attributes=f||{},this.children=[];var c=a||"",
e=c.match(/^cke:(.*)/);e&&(c=e[1]),c=!!(CKEDITOR.dtd.$nonBodyContent[c]||CKEDITOR.dtd.$block[c]||CKEDITOR.dtd.$listItem[c]||CKEDITOR.dtd.$tableContent[c]||CKEDITOR.dtd.$nonEditable[c]||"br"==c),this.isEmpty=!!CKEDITOR.dtd.$empty[a],this.isUnknown=!CKEDITOR.dtd[a],this._={isBlockLike:c,hasInlineStarted:this.isEmpty||!c}},CKEDITOR.htmlParser.cssStyle=function(a){var f={};return((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,e,b){"font-family"==e&&(b=b.replace(/["']/g,"")),f[e.toLowerCase()]=b}),{rules:f,populate:function(a){var e=this.toString();e&&(
a instanceof CKEDITOR.dom.element?a.setAttribute("style",e):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=e:a.style=e)},toString:function(){var e,a=[];for(e in f)f[e]&&a.push(e,":",f[e],";");return a.join("")}}},function(){var f=function(a,b){return(a=a[0])<(b=b[0])?-1:b<a?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var f,d,h,j,c=this;if((b=c.getFilterContext(b)).off)return!0;for(c.parent||a.onRoot(b,c);;){if(
f=c.name,!(d=a.onElementName(b,f)))return this.remove(),!1;if(c.name=d,!(c=a.onElement(b,c)))return this.remove(),!1;if(c!==this)return this.replaceWith(c),!1;if(c.name==f)break;if(c.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(c),!1;if(!c.name)return this.replaceWithChildren(),!1}for(h in f=c.attributes){for(d=f[j=h];;){if(!(j=a.onAttributeName(b,h))){delete f[h];break}if(j==h)break;delete f[h],h=j}j&&(!1===(d=a.onAttribute(b,c,j,d))?delete f[j]:f[j]=d)}return c.isEmpty||this.filterChildren(a,!1,b),!0},filterChildren:c.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var h,j,c=this.name,i=[],d=this.attributes;for(h in a.openTag(c,d),d)i.push(
[h,d[h]]);for(a.sortAttributes&&i.sort(f),h=0,j=i.length;h<j;h++)d=i[h],a.attribute(d[0],d[1]);a.openTagClose(c,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(c)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);this.remove()},forEach:c.forEach,getFirst:function(c){if(!c)return this.children.length?this.children[0]:null;"function"!=typeof c&&(c=function(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}(c));for(var b=0,g=this.children.length;b<g;++b)if(c(this.children[b]))return this.children[b]
;return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(a),a.getHtml()},setHtml:function(a){for(var b=0,c=(a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children).length;b<c;++b)a[b].parent=this},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(a),a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),c=this.clone(),f=0;f<b.length;++f)b[f].parent=c;return(c.children=b)[0]&&(b[0].previous=null),0<a&&(this.children[a-1].next=null),this.parent.add(c,this.getIndex()+1),c},addClass:function(a){if(!this.hasClass(a)){
var b=this.attributes.class||"";this.attributes.class=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes.class;b&&((b=CKEDITOR.tools.trim(b.replace(RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes.class=b:delete this.attributes.class)},hasClass:function(a){var b=this.attributes.class;return!!b&&RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(b)},getFilterContext:function(a){var b=[];if(a||(a={off:!1,nonEditable:!1,nestedEditable:!1}),!a.off&&"off"==this.attributes["data-cke-processor"]&&b.push("off",!0),a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&b.push(
"nestedEditable",!0):b.push("nonEditable",!0),b.length){a=CKEDITOR.tools.copy(a);for(var c=0;c<b.length;c+=2)a[b[c]]=b[c+1]}return a}},!0)}(),function(){var a={},f=/{([^}]+)}/g,c=/([\\'])/g,e=/\n/g,b=/\r/g;CKEDITOR.template=function(g){if(a[g])this.output=a[g];else{var i=g.replace(c,"\\$1").replace(e,"\\n").replace(b,"\\r").replace(f,function(a,b){return"',data['"+b+"']==undefined?'{"+b+"}':data['"+b+"'],'"});this.output=a[g]=Function("data","buffer","return buffer?buffer.push('"+i+"'):['"+i+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(a){(
CKEDITOR.instances[a.name]=a).on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))}),a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,a)},CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]},function(){var a={};CKEDITOR.addTemplate=function(f,c){var e=a[f];return e||(e={name:f,source:c},CKEDITOR.fire("template",e),a[f]=new CKEDITOR.template(e.source))},CKEDITOR.getTemplate=function(f){return a[f]}}(),function(){var a=[];CKEDITOR.addCss=function(f){a.push(f)},CKEDITOR.getCss=function(){
return a.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(a,f){if(!CKEDITOR.env.isCompatible)return null;if((a=CKEDITOR.dom.element.get(a)).getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var c=new CKEDITOR.editor(f,a,CKEDITOR.ELEMENT_MODE_INLINE),e=a.is("textarea")?a:null;return e?(c.setData(e.getValue(),null,!0),(a=CKEDITOR.dom.element.createFromHtml(
'<div contenteditable="'+!!c.readOnly+'" class="cke_textarea_inline">'+e.getValue()+"</div>",CKEDITOR.document)).insertAfter(e),e.hide(),e.$.form&&c._attachToForm()):c.setData(a.getHtml(),null,!0),c.on("loaded",function(){c.fire("uiReady"),c.editable(a),c.container=a,c.setData(c.getData(1)),c.resetDirty(),c.fire("contentDom"),c.mode="wysiwyg",c.fire("mode"),c.status="ready",c.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,c)},null,null,1e4),c.on("destroy",function(){e&&(c.container.clearCustomData(),c.container.remove(),e.show()),c.element.clearCustomData(),delete c.element}),c},CKEDITOR.inlineAll=function(){var a,f,c;for(
c in CKEDITOR.dtd.$editable)for(var e=CKEDITOR.document.getElementsByTag(c),b=0,g=e.count();b<g;b++)"true"==(a=e.getItem(b)).getAttribute("contenteditable")&&!(f={element:a,config:{}})!==CKEDITOR.fire("inline",f)&&CKEDITOR.inline(a,f.config)},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}),CKEDITOR.replaceClass="ckeditor",function(){function a(a,b,g,i){if(!CKEDITOR.env.isCompatible)return null;if((a=CKEDITOR.dom.element.get(a)).getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var d=new CKEDITOR.editor(b,a,i);return i==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle(
"visibility","hidden"),d._.required=a.hasAttribute("required"),a.removeAttribute("required")),g&&d.setData(g,null,!0),d.on("loaded",function(){!function(a){var b=a.name,c=a.element,f=a.elementMode,d=a.fire("uiSpace",{space:"top",html:""}).html,h=a.fire("uiSpace",{space:"bottom",html:""}).html,j=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':""
)+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),b=CKEDITOR.dom.element.createFromHtml(j.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:d?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+d+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:h?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+h+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}))
;f==CKEDITOR.ELEMENT_MODE_REPLACE?(c.hide(),b.insertAfter(c)):c.append(b);a.container=b,d&&a.ui.space("top").unselectable(),h&&a.ui.space("bottom").unselectable(),c=a.config.width,f=a.config.height,c&&b.setStyle("width",CKEDITOR.tools.cssLength(c)),f&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(f)),b.disableContextMenu(),CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()}),a.fireOnce("uiReady")}(d),i==CKEDITOR.ELEMENT_MODE_REPLACE&&d.config.autoUpdateElement&&a.$.form&&d._attachToForm(),d.setMode(d.config.startupMode,function(){d.resetDirty(),d.status="ready",d.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,d)})}),
d.on("destroy",f),d}function f(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove()),b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(c,b){return a(c,b,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(c,b,g){return a(c,b,g,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var c=null,f=a[b];if(f.name||f.id){if("string"==typeof arguments[0]){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(f.className)
)continue}else if("function"==typeof arguments[0]&&!(c={})===arguments[0](f,c))continue;this.replace(f,c)}}},CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes={}))[a]=b},CKEDITOR.editor.prototype.setMode=function(a,b){var c=this,f=this._.modes;if(a!=c.mode&&f&&f[a]){if(c.fire("beforeSetMode",a),c.mode){var h,d=c.checkDirty(),j=(f=c._.previousModeData,0);c.fire("beforeModeUnload"),c.editable(0),c._.previousMode=c.mode,c._.previousModeData=h=c.getData(1),"source"==c.mode&&f==h&&(c.fire("lockSnapshot",{forceUpdate:!0}),j=1),c.ui.space("contents").setHtml(""),c.mode=""}else c._.previousModeData=c.getData(1);this._.modes[a](function(){
c.mode=a,void 0!==d&&!d&&c.resetDirty(),j?c.fire("unlockSnapshot"):"wysiwyg"==a&&c.fire("saveSnapshot"),setTimeout(function(){c.fire("mode"),b&&b.call(c)},0)})}},CKEDITOR.editor.prototype.resize=function(a,b,c,f){var d=this.container,h=this.ui.space("contents"),j=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(f=f?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):d).setSize("width",a,!0),j&&(j.style.width="1%"),h.setStyle("height",Math.max(b-(c?0:(f.$.offsetHeight||0)-(h.$.clientHeight||0)),0)+"px"),j&&(j.style.width="100%"),this.fire("resize")},
CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(a){var j,b=a.editor,c=a.data.path,d=c.blockLimit,g=a.data.selection,h=g.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(g=function(a,b){if(a.isFake)return 0;var c=b.block||b.blockLimit,d=c&&c.getLast(e);if(c&&c.isBlockBoundary()&&(!d||d.type!=CKEDITOR.NODE_ELEMENT||!d.isBlockBoundary())&&!c.is("pre")&&!c.getBogus())return c}(g,c))&&(g.appendBogus(),j=CKEDITOR.env.ie)
,i(b,c.block,d)&&h.collapsed&&!h.getCommonAncestor().isReadOnly()&&((c=h.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(d=new CKEDITOR.dom.walker(c)).guard=function(a){return!e(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},(!d.checkForward()||c.checkStartOfBlock()&&c.checkEndOfBlock())&&(b=h.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(e))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),j=1,a.cancel())),j&&h.select()}function c(a){var b=a.data.getTarget();b.is("input")&&("submit"==(b=b.getAttribute("type"))||"reset"==b
)&&a.data.preventDefault()}function e(a){return o(a)&&n(a)}function g(a){function b(a){return function(b,d){if(d&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(g)&&(c=b),!d&&e(b)&&(!a||!k(b)))return!1}}var c,d=a.getRanges()[0],g=(a=a.root,{table:1,ul:1,ol:1,dl:1});if(d.startPath().contains(g)){var f=d.clone();if(f.collapse(1),f.setStartAt(a,CKEDITOR.POSITION_AFTER_START),(a=new CKEDITOR.dom.walker(f)).guard=b(),a.checkBackward(),c)return(f=d.clone()).collapse(),f.setEndAt(c,CKEDITOR.POSITION_AFTER_END),(a=new CKEDITOR.dom.walker(f)).guard=b(!0),c=!1,a.checkForward(),c}return null}function i(a,b,c){
return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable")}function d(a){a.editor.focus(),a.editor.fire("saveSnapshot")}function h(a){var b=a.editor;b.getSelection().scrollIntoView(),setTimeout(function(){b.fire("saveSnapshot")},0)}function j(a,b,c){var d=a.getCommonAncestor(b);for(b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b),this.editor=a,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var a;if(
CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a)))a.focus();else{try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(b){if(!CKEDITOR.env.ie)throw b}CKEDITOR.env.safari&&!this.isInline()&&((a=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(a,c){var d=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",c=function(a,b){return function(c){var d=CKEDITOR.dom.element.get(
c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget);(!d||!b.equals(d)&&!b.contains(d))&&a.call(this,c)}}(c,this),d[0]=a,d[1]=c),CKEDITOR.dom.element.prototype.on.apply(this,d)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1);b=a.on.apply(a,b);return this._.listeners.push(b),b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var b,c,a=this._.attrChanges;for(c in a)a.hasOwnProperty(c)&&(null!==(b=a[c])?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData(
"classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertHtml:function(a,b){d(this),m(this,b||"html",a)},insertText:function(a){d(this);var b=(c=(b=this.editor).getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:b.activeEnterMode)==CKEDITOR.ENTER_BR,e=CKEDITOR.tools,c=(a=(a=e.htmlEncode(a.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),c==CKEDITOR.ENTER_P?"p":"div");if(!b){var g=/\n{2}/g;if(
g.test(a)){var f="<"+c+">",h="</"+c+">";a=f+a.replace(g,function(){return h+f})+h}}a=a.replace(/\n/g,"<br>"),b||(a=a.replace(RegExp("<br>(?=</"+c+">)"),function(a){return e.repeat(a,2)})),a=(a=a.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,function(a,b){return b+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),m(this,"text",a)},insertElement:function(a,b){b?this.insertElementIntoRange(a,b):this.insertElementIntoSelection(a)},insertElementIntoRange:function(a,b){var f,h,c=this.editor,d=c.config.enterMode,e=a.getName(),g=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return!1;if(b.deleteContents(1),b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,
table:1,tbody:1,thead:1,tfoot:1})&&p(b),g)for(;(f=b.getCommonAncestor(0,1))&&(h=CKEDITOR.dtd[f.getName()])&&(!h||!h[e]);)f.getName()in CKEDITOR.dtd.span?b.splitElement(f):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(f),b.collapse(!0),f.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());return b.insertNode(a),!0},insertElementIntoSelection:function(a){d(this);var b,c=(b=this.editor).activeEnterMode,g=(b=b.getSelection()).getRanges()[0],f=a.getName();f=CKEDITOR.dtd.$block[f];this.insertElementIntoRange(a,g)&&(g.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),f&&((f=a.getNext(function(a){return e(a)&&!k(a)})
)&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block)?f.getDtd()["#"]?g.moveToElementEditStart(f):g.moveToElementEditEnd(a):f||c==CKEDITOR.ENTER_BR||(f=g.fixBlock(!0,c==CKEDITOR.ENTER_DIV?"div":"p"),g.moveToElementEditStart(f)))),b.selectRanges([g]),h(this)},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a)),this.setHtml(a),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();return a||(b=this.editor.dataProcessor.toDataFormat(b)),b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable")
,this.status="detached";var a=this.editor;this._.detach(),delete a.document,delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var e,b=c.getDocument().$,d=b.getSelection();if(d.anchorNode&&d.anchorNode==c.$)e=!0;else if(CKEDITOR.env.webkit){var g=c.getDocument().getActive();g&&g.equals(c)&&!d.anchorNode&&(e=!0)}e&&((e=new CKEDITOR.dom.range(c)).moveToElementEditStart(c),(b=b.createRange()).setStart(e.startContainer.$,e.startOffset),b.collapse(!0),d.removeAllRanges(),d.addRange(b))}var c=this;CKEDITOR.env.ie&&(CKEDITOR.env.version<9||CKEDITOR.env.quirks)?this.hasFocus&&(
this.focus(),function(){var a=c.getDocument().$,d=a.selection,e=c.getDocument().getActive();"None"==d.type&&e.equals(c)&&(d=new CKEDITOR.dom.range(c),a=a.body.createTextRange(),d.moveToElementEditStart(c),(d=d.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent()),a.moveToElementText(d.$),a.collapse(!0),a.select())}()):this.hasFocus?(this.focus(),a()):this.once("focus",function(){a()},null,null,-999)},setup:function(){var a=this.editor;if(this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(l,function(a,b){return b})),a.setData(b,null,1)},this),this.attachListener(
a,"getSnapshot",function(a){a.data=this.getData(1)},this),this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1))},this),this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this),this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this),this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode)},this),this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this),this.attachListener(a,"insertText",function(a){this.insertText(a.data)},this),this.setReadOnly(a.readOnly),this.attachClass(
"cke_editable"),this.attachClass(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||a.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+a.config.contentsLangDirection),a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly,a.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),a.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this)),this.isInline(
)&&this.changeAttr("tabindex",a.tabIndex),!this.is("textarea")){a.document=this.getDocument(),a.window=this.getWindow();var b=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var d=a.config.contentsLangDirection;this.getDirection(1)!=d&&this.changeAttr("dir",d);var f=CKEDITOR.getCss();f&&((d=b.getHead()).getCustomData("stylesheet")||(f=b.appendStyleText(f),f=new CKEDITOR.dom.element(f.ownerNode||f.owningElement),d.setCustomData("stylesheet",f),f.data("cke-temp",1))),d=b.getCustomData("stylesheet_ref")||0,b.setCustomData("stylesheet_ref",d+1),this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling),
this.attachListener(this,"click",function(a){a=a.data;var b=new CKEDITOR.dom.elementPath(a.getTarget(),this).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var h={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var d;if((c=b.data.domEvent.getKey())in h){var e,j,k,m,f=(b=a.getSelection()).getRanges()[0],i=f.startPath(),c=8==c;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(e=b.getSelectedElement())||(e=g(b))?(a.fire("saveSnapshot"),f.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),f.select(),a.fire("saveSnapshot"),d=1):f.collapsed&&((j=i.block)&&(m=j[c?"getPrevious":"getNext"](o)
)&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("table")&&f[c?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),f[c?"checkEndOfBlock":"checkStartOfBlock"]()&&j.remove(),f["moveToElementEdit"+(c?"End":"Start")](m),f.select(),a.fire("saveSnapshot"),d=1):i.blockLimit&&i.blockLimit.is("td")&&(k=i.blockLimit.getAscendant("table"))&&f.checkBoundaryOfElement(k,c?CKEDITOR.START:CKEDITOR.END)&&(m=k[c?"getPrevious":"getNext"](o))?(a.fire("saveSnapshot"),f["moveToElementEdit"+(c?"End":"Start")](m),f.checkStartOfBlock()&&f.checkEndOfBlock()?m.remove():f.select(),a.fire("saveSnapshot"),d=1):(k=i.contains(["td","th","caption"]))&&f.checkBoundaryOfElement(k,
c?CKEDITOR.START:CKEDITOR.END)&&(d=1))}return!d}),a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in h&&!this.getFirst(e)&&(this.appendBogus(),(b=a.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())}),this.attachListener(this,"dblclick",function(b){if(a.readOnly)return!1;b={element:b.data.getTarget()},a.fire("doubleclick",b)}),CKEDITOR.env.ie&&this.attachListener(this,"click",c),CKEDITOR.env.ie||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&!c.isReadOnly()&&(a.getSelection(
).selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&!(b=b.data.getTarget()).getOuterHtml().replace(l,"")){var c=a.createRange();c.moveToElementEditStart(b),c.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(a,"key",function(b){if((b=b.data.domEvent.getKey())in h){var c=8==b,
d=a.getSelection().getRanges()[0];b=d.startPath();if(d.collapsed){var e;a:{var g=b.block;if(g)if(d[c?"checkStartOfBlock":"checkEndOfBlock"]())if(d.moveToClosestEditablePosition(g,!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var f=d.startContainer.getChild(d.startOffset-(c?1:0));if(f&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("hr")){a.fire("saveSnapshot"),f.remove(),e=!0;break a}}var i;if((d=d.startPath().block)&&(!d||!d.contains(g)))a.fire("saveSnapshot"),(i=(c?d:g).getBogus())&&i.remove(),i=(e=a.getSelection()).createBookmarks(),(c?g:d).moveChildren(c?d:g,!1),b.lastElement.mergeSiblings(),j(g,d,!c),e.selectBookmarks(i),e=!0
}else e=!1;else e=!1;else e=!1}if(!e)return}else if(c=d,e=b.block,i=c.endPath().block,!(b=!(!e||!i||e.equals(i))&&(a.fire("saveSnapshot"),(g=e.getBogus())&&g.remove(),c.deleteContents(),i.getParent()&&(i.moveChildren(e,!1),b.lastElement.mergeSiblings(),j(e,i,!0)),(c=a.getSelection().getRanges()[0]).collapse(1),c.select(),!0)))return;return a.getSelection().scrollIntoView(),a.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){var a;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){var b=(
a=this.getDocument()).getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;return b&&a?0:(arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null)),b)};var k=CKEDITOR.dom.walker.bogus(),l=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi
,o=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0);CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",function(a){(a=a.data).type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))}),c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){
var a=b.editable();if(a&&a.isInline()){var c=b.title;if(a.changeAttr("role","textbox"),a.changeAttr("aria-label",c),c&&a.changeAttr("title",c),(d=b.fire("ariaEditorHelpLabel",{}).label)&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var e=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('<span id="'+e+'" class="cke_voice_label">'+d+"</span>");c.append(d),a.changeAttr("aria-describedby",e)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var m=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT}function c(b,d){var h,
e=[],g=b.getChildren(),f=g.count(),i=0,k=j[d],m=!b.is(j.$inline)||b.is("br");for(m&&e.push(" ");i<f;i++)a(h=g.getItem(i))&&!h.is(k)?e=e.concat(c(h,d)):e.push(h);return m&&e.push(" "),e}function d(b){return b&&a(b)&&(b.is(j.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function g(b,c,d,e){var h,i,f=b.clone();f.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),(h=new CKEDITOR.dom.walker(f).next())&&a(h)&&k[h.getName()]&&(i=h.getPrevious())&&a(i)&&!i.getParent().equals(b.startContainer)&&d.contains(i)&&e.contains(h)&&h.isIdentical(i)&&(h.moveChildren(i),h.remove(),g(b,c,d,e))}var j=CKEDITOR.dtd,k={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,
blockquote:1},m={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},l=CKEDITOR.tools.extend({},j.$inline);return delete l.br,function(k,n,p){var r=(o=k.editor).getSelection().getRanges()[0],D=!1;if("unfiltered_html"==n&&(n="html",D=!0),!r.checkReadOnly()){var E,I,L,H,U,o=(n={type:n,dontFilter:D,editable:k,editor:o,range:r,blockLimit:F=new CKEDITOR.dom.elementPath(r.startContainer,r.root).blockLimit||r.root,mergeCandidates:[],zombies:[]}).range;D=n.mergeCandidates;if("text"==n.type&&o.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(E=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",o.document),o.insertNode(E),o.setStartAfter(E)),I=new CKEDITOR.dom.elementPath(
o.startContainer),n.endPath=L=new CKEDITOR.dom.elementPath(o.endContainer),!o.collapsed){var F=L.block||L.blockLimit,Q=o.getCommonAncestor();F&&!F.equals(Q)&&!F.contains(Q)&&o.checkEndOfBlock()&&n.zombies.push(F),o.deleteContents()}for(;(H=a(o.startContainer)&&o.startContainer.getChild(o.startOffset-1))&&a(H)&&H.isBlockBoundary()&&I.contains(H);)o.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END);for(g(o,n.blockLimit,I,L),E&&(o.setEndBefore(E),o.collapse(),E.remove()),(F=(E=o.startPath()).contains(d,!1,1))&&(o.splitElement(F),n.inlineStylesRoot=F,n.inlineStylesPeak=E.lastElement),(F=(E=o.createBookmark()).startNode.getPrevious(e))&&a(F)&&d(F)&&D.push(F),(
F=E.startNode.getNext(e))&&a(F)&&d(F)&&D.push(F),F=E.startNode;(F=F.getParent())&&d(F);)D.push(F);if(o.moveToBookmark(E),E=p){if(E=n.range,"text"==n.type&&n.inlineStylesRoot){for(o=(H=n.inlineStylesPeak).getDocument().createText("{cke-peak}"),D=n.inlineStylesRoot.getParent();!H.equals(D);)o=o.appendTo(H.clone()),H=H.getParent();p=o.getOuterHtml().split("{cke-peak}").join(p)}if(H=n.blockLimit.getName(),/^\s+|\s+$/.test(p)&&"span"in CKEDITOR.dtd[H])p=(O='<span data-cke-marker="1">&nbsp;</span>')+p+O;if(p=n.editor.dataProcessor.toHtml(p,{context:null,fixForBody:!1,dontFilter:n.dontFilter,filter:n.editor.activeFilter,enterMode:n.editor.activeEnterMode}),(
H=E.document.createElement("body")).setHtml(p),O&&(H.getFirst().remove(),H.getLast().remove()),(O=E.startPath().block)&&(1!=O.getChildCount()||!O.getBogus()))a:{var M;if(1==H.getChildCount()&&a(M=H.getFirst())&&M.is(m)){for(E=0,D=(O=M.getElementsByTag("*")).count();E<D;E++)if(!(o=O.getItem(E)).is(l))break a;M.moveChildren(M.getParent(1)),M.remove()}}n.dataWrapper=H,E=p}if(E){var K,R,O=(M=n.range).document;p=n.blockLimit;H=[];var N,T,P,V,W;D=o=E=0;for(I=M.startContainer,L=(F=n.endPath.elements[0]).getPosition(I),Q=!(!F.getCommonAncestor(I)||L==CKEDITOR.POSITION_IDENTICAL||L&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(b,c){function d(b,
c){if(c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var e=c.endContainer.getChild(c.endOffset),g=c.endContainer.getChild(c.endOffset-1);e&&d(e,b[b.length-1]),g&&d(g,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}(I=function b(c,d){var e,g,f,h,i=[],k=d.range.startContainer;e=d.range.startPath();k=j[k.getName()];for(var m=0,v=c.getChildren(),s=v.count(),l=-1,n=-1,z=0,p=e.contains(j.$list);m<s;++m)a(e=v.getItem(m))?(f=e.getName(),p&&f in CKEDITOR.dtd.$list?i=i.concat(b(e,d)):(h=!!k[f],"br"!=f||!e.data("cke-eol")||m&&m!=s-1||(z=(g=m?i[m-1].node:v.getItem(m+1))&&(!a(g)||!g.is("br")),g=g&&a(g)&&j.$block[g.getName()]),
-1==l&&!h&&(l=m),h||(n=m),i.push({isElement:1,isLineBreak:z,isBlock:e.isBlockBoundary(),hasBlockSibling:g,node:e,name:f,allowed:h}),g=z=0)):i.push({isElement:0,node:e,allowed:1});return-1<l&&(i[l].firstNotAllowed=1),-1<n&&(i[n].lastNotAllowed=1),i}(n.dataWrapper,n),M);E<I.length;E++){if(K=(L=I[E]).isLineBreak){K=M,P=p;var S=void 0,Y=void 0;K=L.hasBlockSibling?1:(S=K.startContainer.getAscendant(j.$block,1))&&S.is({div:1,p:1})?(Y=S.getPosition(P))==CKEDITOR.POSITION_IDENTICAL||Y==CKEDITOR.POSITION_CONTAINS?0:(P=K.splitElement(S),K.moveToPosition(P,CKEDITOR.POSITION_AFTER_START),1):0}if(K)D=0<E;else{if(K=M.startPath(),!L.isBlock&&i(n.editor,K.block,K.blockLimit
)&&(T=n.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==n.editor.config.autoParagraph&&(n.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"))&&((T=O.createElement(T)).appendBogus(),M.insertNode(T),CKEDITOR.env.needsBrFiller&&(R=T.getBogus())&&R.remove(),M.moveToPosition(T,CKEDITOR.POSITION_BEFORE_END)),(K=M.startPath().block)&&!K.equals(N)&&((R=K.getBogus())&&(R.remove(),H.push(K)),N=K),L.firstNotAllowed&&(o=1),o&&L.isElement){for(K=M.startContainer,P=null;K&&!j[K.getName()][L.name];){if(K.equals(p)){K=null;break}K=(P=K).getParent()}if(K)P&&(V=M.splitElement(P),n.zombies.push(V),n.zombies.push(P));else{P=p.getName(),W=!E,K=E==I.length-1;S=[],Y=(P=c(L.node
,P)).length;for(var Z=0,ba=void 0,X=0,aa=-1;Z<Y;Z++)X=" "==(ba=P[Z])?(X||W&&!Z||(S.push(new CKEDITOR.dom.text(" ")),aa=S.length),1):(S.push(ba),0);K&&aa==S.length&&S.pop(),W=S}}if(W){for(;K=W.pop();)M.insertNode(K);W=0}else M.insertNode(L.node);L.lastNotAllowed&&E<I.length-1&&((V=Q?F:V)&&M.setEndAt(V,CKEDITOR.POSITION_AFTER_START),o=0),M.collapse()}}n.dontMoveCaret=D,n.bogusNeededBlocks=H}for(R=n.range,V=n.bogusNeededBlocks,W=R.createBookmark();N=n.zombies.pop();)N.getParent()&&((T=R.clone()).moveToElementEditStart(N),T.removeEmptyBlocksAtEnd());if(V)for(;N=V.pop();)CKEDITOR.env.needsBrFiller?N.appendBogus():N.append(R.document.createText(""));for(
;N=n.mergeCandidates.pop();)N.mergeSiblings();if(R.moveToBookmark(W),!n.dontMoveCaret){for(N=a(R.startContainer)&&R.startContainer.getChild(R.startOffset-1);N&&a(N)&&!N.is(j.$empty);){if(N.isBlockBoundary())R.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END);else{if(d(N)&&N.getHtml().match(/(\s|&nbsp;)$/g)){U=null;break}(U=R.clone()).moveToPosition(N,CKEDITOR.POSITION_BEFORE_END)}N=N.getLast(e)}U&&R.moveToRange(U)}r.select(),h(k)}}}(),p=function(){function a(b){return(b=new CKEDITOR.dom.walker(b)).guard=function(a,b){return!b&&(a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$tableContent):void 0)},b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT},b
}function b(a,c,d){return c=a.getDocument().createElement(c),a.append(c,d),c}function c(a){for(var d,b=a.count();0<b--;)d=a.getItem(b),CKEDITOR.tools.trim(d.getHtml())||(d.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&d.getChildCount()&&d.getFirst().remove())}return function(d){var e=d.startContainer,g=e.getAscendant("table",1),f=!1;c(g.getElementsByTag("td")),c(g.getElementsByTag("th")),(g=d.clone()).setStart(e,0),(g=a(g).lastBackward())||((g=d.clone()).setEndAt(e,CKEDITOR.POSITION_BEFORE_END),g=a(g).lastForward(),f=!0),g||(g=e),g.is("table")?(d.setStartAt(g,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),g.remove()):(g.is({tbody:1,thead:1,tfoot:1}
)&&(g=b(g,"tr",f)),g.is("tr")&&(g=b(g,g.getParent().is("thead")?"th":"td",f)),(e=g.getBogus())&&e.remove(),d.moveToPosition(g,f?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}()}(),function(){function a(){var b,a=this._.fakeSelection;a&&((b=this.getSelection(1))&&b.isHidden()||(a.reset(),a=0)),(a||(a=b||this.getSelection(1))&&a.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",a),(b=this.elementPath()).compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:a,path:b})))}function f(){m=!0,n||(c.call(this),
n=CKEDITOR.tools.setTimeout(c,200,this))}function c(){n=null,m&&(CKEDITOR.tools.setTimeout(a,0,this),m=!1)}function e(a){return!(!p(a)&&(a.type!=CKEDITOR.NODE_ELEMENT||a.is(CKEDITOR.dtd.$empty)))}function b(a){function b(c,d){return!(!c||c.type==CKEDITOR.NODE_TEXT)&&a.clone()["moveToElementEdit"+(d?"End":"Start")](c)}if(!(a.root instanceof CKEDITOR.editable))return!1;var c=a.startContainer,d=a.getPreviousNode(e,null,c),g=a.getNextNode(e,null,c);return!(!b(d)&&!b(g,1)&&(d||g||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()&&c.getBogus()))}function g(a){return a.getCustomData("cke-fillingChar")}function i(a,b){var c=a&&a.removeCustomData("cke-fillingChar")
;if(c){if(!1!==b){var e,g=a.getDocument().getSelection().getNative(),f=g&&"None"!=g.type&&g.getRangeAt(0);1<c.getLength()&&f&&f.intersectsNode(c.$)&&(e=h(g),f=g.focusNode==c.$&&0<g.focusOffset,g.anchorNode==c.$&&0<g.anchorOffset&&e[0].offset--,f&&e[1].offset--)}c.setText(d(c.getText())),e&&j(a.getDocument().$,e)}}function d(a){return a.replace(/\u200B( )?/g,function(a){return a[1]?"":""})}function h(a){return[{node:a.anchorNode,offset:a.anchorOffset},{node:a.focusNode,offset:a.focusOffset}]}function j(a,b){var c=a.getSelection(),d=a.createRange();d.setStart(b[0].node,b[0].offset),d.collapse(!0),c.removeAllRanges(),c.addRange(d),c.extend(b[1].node,
b[1].offset)}var n,m,p=CKEDITOR.dom.walker.invisible(1),q=function(){function a(b){return function(a){var c=a.editor.createRange();return c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]),!1}}function b(a){return function(b){var e,c=b.editor,d=c.createRange();return(e=d.moveToClosestEditablePosition(b.selected,a))||(e=d.moveToClosestEditablePosition(b.selected,!a)),e&&c.getSelection().selectRanges([d]),c.fire("saveSnapshot"),b.selected.remove(),e||(d.moveToElementEditablePosition(c.editable()),c.getSelection().selectRanges([d])),c.fire("saveSnapshot"),!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}()
;CKEDITOR.on("instanceCreated",function(b){function c(){var a=d.getSelection();a&&a.removeAllRanges()}var d=b.editor;d.on("contentDom",function(){function b(){(s=new CKEDITOR.dom.selection(d.getSelection())).lock()}function c(){g.removeListener("mouseup",c),k.removeListener("mouseup",c);var a=CKEDITOR.document.$.selection,b=a.createRange();"None"!=a.type&&b.parentElement().ownerDocument==e.$&&b.select()}var D,s,n,q,e=d.document,g=CKEDITOR.document,h=d.editable(),j=e.getBody(),k=e.getDocumentElement(),m=h.isInline();(CKEDITOR.env.gecko&&h.attachListener(h,"focus",function(a){a.removeListener(),0!==D&&(a=d.getSelection().getNative()
)&&a.isCollapsed&&a.anchorNode==h.$&&((a=d.createRange()).moveToElementEditStart(h),a.select())},null,null,-2),h.attachListener(h,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){D&&CKEDITOR.env.webkit&&(D=d._.previousActive&&d._.previousActive.equals(e.getActive())),d.unlockSelection(D),D=0},null,null,-1),h.attachListener(h,"mousedown",function(){D=0}),(CKEDITOR.env.ie||m)&&(t?h.attachListener(h,"beforedeactivate",b,null,null,-1):h.attachListener(d,"selectionCheck",b,null,null,-1),h.attachListener(h,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){d.lockSelection(s),D=1},null,null,-1),h.attachListener(h,"mousedown",function(){D=0})),
CKEDITOR.env.ie&&!m)&&(h.attachListener(h,"mousedown",function(a){2==a.data.$.button&&((a=d.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(n=d.window.getScrollPosition()))}),h.attachListener(h,"mouseup",function(a){2==a.data.$.button&&n&&(d.document.$.documentElement.scrollLeft=n.x,d.document.$.documentElement.scrollTop=n.y),n=null}),"BackCompat"!=e.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&k.on("mousedown",function(a){function b(a){if(a=a.data.$,d){var c=j.$.createTextRange();try{c.moveToPoint(a.clientX,a.clientY)}catch(e){}d.setEndPoint(f.compareEndPoints("StartToStart",c)<0?"EndToEnd":"StartToStart",c),d.select()}}
function c(){k.removeListener("mousemove",b),g.removeListener("mouseup",c),k.removeListener("mouseup",c),d.select()}if((a=a.data).getTarget().is("html")&&a.$.y<k.$.clientHeight&&a.$.x<k.$.clientWidth){var d=j.$.createTextRange();try{d.moveToPoint(a.$.clientX,a.$.clientY)}catch(e){}var f=d.duplicate();k.on("mousemove",b),g.on("mouseup",c),k.on("mouseup",c)}}),7<CKEDITOR.env.version&&CKEDITOR.env.version<11&&k.on("mousedown",function(a){a.data.getTarget().is("html")&&(g.on("mouseup",c),k.on("mouseup",c))})));(h.attachListener(h,"selectionchange",a,d),h.attachListener(h,"keyup",f,d),h.attachListener(h,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){
d.forceNextSelectionCheck(),d.selectionChange(1)}),m&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko))?(h.attachListener(h,"mousedown",function(){q=1}),h.attachListener(e.getDocumentElement(),"mouseup",function(){q&&f.call(d),q=0})):h.attachListener(CKEDITOR.env.ie?h:e.getDocumentElement(),"mouseup",f,d);CKEDITOR.env.webkit&&h.attachListener(e,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:i(h)}},null,null,-1),h.attachListener(h,"keydown",function(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),g=e[0]
;1==e.length&&g.collapsed&&(d=g[d<38?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())}}}(d),null,null,-1)}),d.on("setData",function(){d.unlockSelection(),CKEDITOR.env.webkit&&c()}),d.on("contentDomUnload",function(){d.unlockSelection()}),CKEDITOR.env.ie9Compat&&d.on("beforeDestroy",c,null,null,9),d.on("dataReady",function(){delete d._.fakeSelection,delete d._.hiddenSelectionContainer,d.selectionChange(1)}),d.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=d.editable().getLast(a)
;b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=d.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100),d.on("key",function(a){if("wysiwyg"==d.mode){var b=d.getSelection();if(b.isFake){var c=q[a.data.keyCode];if(c)return c({editor:d,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})}),CKEDITOR.on("instanceReady",function(a){function b(){var a=e.editable();if(a&&(a=g(a))){var c=e.document.$.getSelection();"None"==c.type||c.anchorNode!=a.$&&c.focusNode!=a.$||(k=h(c)),f=a.getText(),a.setText(d(f))}}function c(){var a=e.editable();a&&(a=g(a))&&(a.setText(f),k&&(j(
e.document.$,k),k=null))}var f,k,e=a.editor;CKEDITOR.env.webkit&&(e.on("selectionChange",function(){var a=e.editable(),b=g(a);b&&(b.getCustomData("ready")?i(a):b.setCustomData("ready",1))},null,null,-1),e.on("beforeSetMode",function(){i(e.editable())},null,null,-1),e.on("beforeUndoImage",b),e.on("afterUndoImage",c),e.on("beforeGetData",b,null,null,0),e.on("getData",c))}),CKEDITOR.editor.prototype.selectionChange=function(b){(b?a:f).call(this)},CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a
):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(a){return(a=a||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!a.isLocked&&a.lock(),this._.savedSelection=a,!0)},CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return!!b&&(b.unlock(a),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){
var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return a.selectRanges([this]),a},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var t="function"!=typeof window.getSelection,s=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var d,e,c=a instanceof CKEDITOR.dom.element;if(this.rev=b?b.rev:s++,this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument(),this.root=c?a:this.document.getBody(),this.isLocked=0,this._={cache:{}},b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,
this.isLocked=b.isLocked,this;if(a=this.getNative())if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange()}catch(g){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement())}return(!d||d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var u={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,
select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=t?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:t?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT),"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT),c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT;if((
c=this.getNative())&&c.rangeCount){if(1==c.rangeCount){var c,d=(c=c.getRangeAt(0)).startContainer;d==c.endContainer&&1==d.nodeType&&c.endOffset-c.startOffset==1&&u[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return a.type=b},getRanges:function(){var a=t?function(){function a(b){return new CKEDITOR.dom.node(b).getIndex()}var b=function(b,c){(b=b.duplicate()).collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var g,f,m,s,e=d.children,h=b.duplicate(),i=0,j=e.length-1,k=-1;i<=j;)if(g=e[k=Math.floor((i+j)/2)],h.moveToElementText(g),0<(
m=h.compareEndPoints("StartToStart",b)))j=k-1;else{if(!(m<0))return{container:d,offset:a(g)};i=k+1}if(-1==k||k==e.length-1&&m<0){if(h.moveToElementText(d),h.setEndPoint("StartToStart",b),h=h.text.replace(/(\r\n|\r)/g,"\n").length,e=d.childNodes,!h)return(g=e[e.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:e.length}:{container:g,offset:g.nodeValue.length};for(d=e.length;0<h&&0<d;)(f=e[--d]).nodeType==CKEDITOR.NODE_TEXT&&(h-=(s=f).nodeValue.length);return{container:s,offset:-h}}if(h.collapse(0<m),h.setEndPoint(0<m?"StartToStart":"EndToStart",b),!(h=h.text.replace(/(\r\n|\r)/g,"\n").length))return{container:d,offset:a(g)+(0<m?0:1)};for(;0<h;)try{(
f=g[0<m?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(h-=f.nodeValue.length,s=f),g=f}catch(l){return{container:d,offset:a(g)}}return{container:s,offset:0<m?-h:s.nodeValue.length+h}};return function(){var c=(a=this.getNative())&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d!=CKEDITOR.SELECTION_ELEMENT
)return[];d=[];for(var e=0;e<c.length;e++){for(var g=c.item(e),f=g.parentNode,h=0,a=new CKEDITOR.dom.range(this.root);h<f.childNodes.length&&f.childNodes[h]!=g;h++);a.setStart(new CKEDITOR.dom.node(f),h),a.setEnd(new CKEDITOR.dom.node(f),h+1),d.push(a)}return d}}():function(){var b,a=[],c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);(b=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset),b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset),a.push(b)}return a};return function(b){var c=this._.cache,d=c.ranges;return d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(
this))),b?function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.getCommonAncestor().isReadOnly()&&a.splice(b,1),!c.collapsed){if(c.startContainer.isReadOnly())for(var e,d=c.startContainer;d&&!((e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly());)e&&"false"==d.getAttribute("contentEditable")&&c.setStartAfter(d),d=d.getParent();d=c.startContainer,e=c.endContainer;var g=c.startOffset,f=c.endOffset,h=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(g>=d.getLength()?h.setStartAfter(d):h.setStartBefore(d)),e&&e.type==CKEDITOR.NODE_TEXT&&(f?h.setEndAfter(e):h.setEndBefore(e)),(d=new CKEDITOR.dom.walker(h)).evaluator=function(d){if(
d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();return c.setEndBefore(d),c.collapsed&&a.splice(b--,1),d.getPosition(h.endContainer)&CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e)),!0}return!1},d.next()}}return a}(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var b,a=this._.cache;if(void 0!==a.startElement)return a.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)(b=c.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize(
);b=c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);if((b=c.startContainer).type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(c.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)c=(b=c).getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var c,d,a=b.getRanges(
)[0].clone(),e=2;e&&(!(c=a.getEnclosedNode())||c.type!=CKEDITOR.NODE_ELEMENT||!u[c.getName()]||!(d=c));e--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d&&d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative();b=t?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges()
,d=this.isFake;this.isLocked=0,this.reset(),a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={},this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection&&this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot"),b.remove(),a.fire("unlockSnapshot"),!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}this.rev=s++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a),b.setEndAfter(a),this.selectRanges([b])},
selectRanges:function(a){var c=(c=this.root.editor)&&c._.hiddenSelectionContainer;if(this.reset(),c){c=this.root;for(var d,e=0;e<a.length;++e)(d=a[e]).endContainer.equals(c)&&(d.endOffset=Math.min(d.endOffset,c.getChildCount()))}if(a.length)if(this.isLocked){var g=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(a),this.lock(),g&&!g.equals(this.root)&&g.focus()}else{var f,h,j;if(1==a.length&&!(j=a[0]).collapsed&&(f=j.getEnclosedNode())&&f.type==CKEDITOR.NODE_ELEMENT&&((j=j.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(h=j.getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&(f=h),"false"==f.getAttribute("contenteditable"))||(f=void 0),f)this.fake(f
);else{if(t){j=CKEDITOR.dom.walker.whitespaces(!0),h=/\ufeff|\u00a0/,c={table:1,tbody:1,tr:1},1<a.length&&(f=a[a.length-1],a[0].setEnd(f.endContainer,f.endOffset));var k,m,s;a=(f=a[0]).collapsed;if((d=f.getEnclosedNode())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in u&&(!d.is("a")||!d.getText()))try{return(s=d.$.createControlRange()).addElement(d.$),void s.select()}catch(D){}(f.startContainer.type==CKEDITOR.NODE_ELEMENT&&f.startContainer.getName()in c||f.endContainer.type==CKEDITOR.NODE_ELEMENT&&f.endContainer.getName()in c)&&(f.shrink(CKEDITOR.NODE_ELEMENT,!0),a=f.collapsed),c=(s=f.createBookmark()).startNode,a||(g=s.endNode),(
s=f.document.$.body.createTextRange()).moveToElementText(c.$),s.moveStart("character",1),g?((h=f.document.$.body.createTextRange()).moveToElementText(g.$),s.setEndPoint("EndToEnd",h),s.moveEnd("character",-1)):(k=c.getNext(j),m=c.hasAscendant("pre"),k=!(k&&k.getText&&k.getText().match(h))&&(m||!c.hasPrevious()||c.getPrevious().is&&c.getPrevious().is("br")),(m=f.document.createElement("span")).setHtml("&#65279;"),m.insertBefore(c),k&&f.document.createText("\ufeff").insertBefore(c)),f.setStartBefore(c),c.remove(),a?(k?(s.moveStart("character",-1),s.select(),f.document.$.selection.clear()):s.select(),f.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START),m.remove()
):(f.setEndBefore(g),g.remove(),s.select())}else{if(!(g=this.getNative()))return;for(this.removeAllRanges(),s=0;s<a.length;s++)if(s<a.length-1&&(k=a[s],m=a[s+1],(h=k.clone()).setStart(k.endContainer,k.endOffset),h.setEnd(m.startContainer,m.startOffset),!h.collapsed&&(h.shrink(CKEDITOR.NODE_ELEMENT,!0),f=h.getCommonAncestor(),h=h.getEnclosedNode(),f.isReadOnly()||h&&h.isReadOnly())))m.setStart(k.startContainer,k.startOffset),a.splice(s--,1);else{f=a[s],m=this.document.$.createRange(),f.collapsed&&CKEDITOR.env.webkit&&b(f)&&(i(k=this.root,!1),h=k.getDocument().createText(""),k.setCustomData("cke-fillingChar",h),f.insertNode(h),(k=h.getNext())&&!h.getPrevious(
)&&k.type==CKEDITOR.NODE_ELEMENT&&"br"==k.getName()?(i(this.root),f.moveToPosition(k,CKEDITOR.POSITION_BEFORE_START)):f.moveToPosition(h,CKEDITOR.POSITION_AFTER_END)),m.setStart(f.startContainer.$,f.startOffset);try{m.setEnd(f.endContainer.$,f.endOffset)}catch(l){if(!(0<=l.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw l;f.collapse(1),m.setEnd(f.endContainer.$,f.endOffset)}g.addRange(m)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(a){var b=this.root.editor;this.reset(),function(a){var b=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(
CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',a.document);a.fire("lockSnapshot"),a.editable().append(b);var c=a.getSelection(1),d=a.createRange(),e=c.root.on("selectionchange",function(a){a.cancel()},null,null,0);d.setStartAt(b,CKEDITOR.POSITION_AFTER_START),d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END),c.selectRanges([d]),e.removeListener(),a.fire("unlockSnapshot"),a._.hiddenSelectionContainer=b}(b);var c=this._.cache,d=new CKEDITOR.dom.range(this.root);d.setStartBefore(a),d.setEndAfter(a),c.ranges=new CKEDITOR.dom.rangeList(d),c.selectedElement=c.startElement=a,c.type=CKEDITOR.SELECTION_ELEMENT,
c.selectedText=c.nativeSel=null,this.isFake=1,this.rev=s++,(b._.fakeSelection=this).root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();return a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent()),!(!a||!a.data("cke-hidden-sel"))},createBookmarks:function(a){return a=this.getRanges().createBookmarks(a),this.isFake&&(a.isFake=1),a},createBookmarks2:function(a){return a=this.getRanges().createBookmarks2(a),this.isFake&&(a.isFake=1),a},selectBookmarks:function(a){for(var b=[],c=0;c<a.length;c++){var d=new CKEDITOR.dom.range(this.root);d.moveToBookmark(a[c]),b.push(d)}return a.isFake?this.fake(b[0].getEnclosedNode()):this.selectRanges(b),
this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[t?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable")
;"false"==e?c=a:"true"==e&&(d=1)}return c}function f(b){var c=b.document;if(b.collapsed)c=q(this,c),b.insertNode(c),b.moveToPosition(c,CKEDITOR.POSITION_BEFORE_END);else{var h,d=this.element,g=this._.definition,j=(i=g.ignoreReadonly)||g.includeReadonly;null==j&&(j=b.root.getCustomData("cke_includeReadonly"));var k=CKEDITOR.dtd[d];k||(h=!0,k=CKEDITOR.dtd.span),b.enlarge(CKEDITOR.ENLARGE_INLINE,1),b.trim();var p,m=b.createBookmark(),s=m.startNode,l=m.endNode,t=s;if(!i){var i=a(s,o=b.getCommonAncestor()),o=a(l,o);i&&(t=i.getNextSourceNode(!0)),o&&(l=o)}for(t.getPosition(l)==CKEDITOR.POSITION_FOLLOWING&&(t=0);t;){if(i=!1,t.equals(l))i=!(t=null);else{o=(
u=t.type==CKEDITOR.NODE_ELEMENT?t.getName():null)&&"false"==t.getAttribute("contentEditable");var v=u&&t.getAttribute("data-nostyle");if(u&&t.data("cke-bookmark")){t=t.getNextSourceNode(!0);continue}if(o&&j&&CKEDITOR.dtd.$block[u])for(var w=void 0,x=0,z=(y=(r=e(z=t)).length)&&new CKEDITOR.dom.range(z.getDocument());x<y;++x){w=r[x];var A=CKEDITOR.filter.instances[w.data("cke-filter")];A&&!A.check(this)||(z.selectNodeContents(w),f.call(this,z))}if(r=u?!k[u]||v?0:o&&!j?0:(t.getPosition(l)|G)==G&&(!g.childRule||g.childRule(t)):1){if(!(r=t.getParent())||!(r.getDtd()||CKEDITOR.dtd.span)[d]&&!h||g.parentRule&&!g.parentRule(r))i=!0;else if(
p||u&&CKEDITOR.dtd.$removeEmpty[u]&&(t.getPosition(l)|G)!=G||(p=b.clone()).setStartBefore(t),(u=t.type)==CKEDITOR.NODE_TEXT||o||u==CKEDITOR.NODE_ELEMENT&&!t.getChildCount()){for(var aa,u=t;(i=!u.getNext(B))&&k[(aa=u.getParent()).getName()]&&(aa.getPosition(s)|C)==C&&(!g.childRule||g.childRule(aa));)u=aa;p.setEndAfter(u)}}else i=!0;t=t.getNextSourceNode(v||o)}if(i&&p&&!p.collapsed){o=(i=q(this,c)).hasAttributes(),v=p.getCommonAncestor(),u={};for(var U,$,ca,r={},y=(w={},{});i&&v;){if(v.getName()==d){for(U in g.attributes)!y[U]&&(ca=v.getAttribute($))&&(i.getAttribute(U)==ca?r[U]=1:y[U]=1);for($ in g.styles)!w[$]&&(ca=v.getStyle($))&&(i.getStyle($
)==ca?u[$]=1:w[$]=1)}v=v.getParent()}for(U in r)i.removeAttribute(U);for($ in u)i.removeStyle($);o&&!i.hasAttributes()&&(i=null),i?(p.extractContents().appendTo(i),p.insertNode(i),n.call(this,i),i.mergeSiblings(),CKEDITOR.env.ie||i.$.normalize()):(i=new CKEDITOR.dom.element("span"),p.extractContents().appendTo(i),p.insertNode(i),n.call(this,i),i.remove(!0)),p=null}}b.moveToBookmark(m),b.shrink(CKEDITOR.SHRINK_TEXT),b.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(j.getParent()),e=null,g=null,f=0;f<a.elements.length;f++){var h=a.elements[f];if(
h==a.block||h==a.blockLimit)break;k.checkElementRemovable(h,!0)&&(e=h)}for(f=0;f<c.elements.length&&((h=c.elements[f])!=c.block&&h!=c.blockLimit);f++)k.checkElementRemovable(h,!0)&&(g=h);g&&j.breakParent(g),e&&d.breakParent(e)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=a.createBookmark(),d=c.startNode;if(a.collapsed){for(var g,h,e=new CKEDITOR.dom.elementPath(d.getParent(),a.root),f=0;f<e.elements.length&&(h=e.elements[f])&&(h!=e.block&&h!=e.blockLimit);f++){var i;this.checkElementRemovable(h)&&(a.collapsed&&(a.checkBoundaryOfElement(h,CKEDITOR.END)||(i=a.checkBoundaryOfElement(h,CKEDITOR.START)))?(g=h).match=i?"start":"end":(h.mergeSiblings(),h.is(
this.element)?o.call(this,h):m(h,u(this)[h.getName()])))}if(g){for(h=d,f=0;!(i=e.elements[f]).equals(g);f++)i.match||((i=i.clone()).append(h),h=i);h["start"==g.match?"insertBefore":"insertAfter"](g)}}else{var j=c.endNode,k=this;for(b(),e=d;!e.equals(j);)g=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)&&(e.getName()==this.element?o.call(this,e):m(e,u(this)[e.getName()]),g.type==CKEDITOR.NODE_ELEMENT&&g.contains(d)&&(b(),g=d.getNext())),e=g}a.moveToBookmark(c),a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function e(a){var b=[];return a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},
CKEDITOR.NODE_ELEMENT,!0),b}function b(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&t(a,this)}function g(a){var b=a.getCommonAncestor(!0,!0);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var c=(b=this._.definition).attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&a.removeStyle(e)}}function i(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,
e=a.document;d=c.getNextParagraph();)d.isReadOnly()||c.activeFilter&&!c.activeFilter.check(this)||h(d,q(this,e,d));a.moveToBookmark(b)}function d(a){var d,e,b=a.createBookmark(1),c=a.createIterator();for(c.enforceRealBlocks=!0,c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;d=c.getNextParagraph();)this.checkElementRemovable(d)&&(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),h(d,e)):o.call(this,d));a.moveToBookmark(b)}function h(a,b){(c=!b)&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var c,h,d=b&&b.is("pre"),e=a.is("pre"),g=!d&&e;if(d&&!e
){if(e=b,(g=a.getBogus())&&g.remove(),g=(g=(g=(g=k(g=a.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var f=a.getDocument().createElement("div");f.append(e),e.$.outerHTML="<pre>"+g+"</pre>",e.copyAttributes(f.getFirst()),e=f.getFirst().remove()}else e.setHtml(g);b=e}else g?b=function(a,b){var c;1<a.length&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=k(e,/^[ \t]*\n/,""),e=k(e,/\n$/,""),e=k(e,/^[ \t]+|[ \t]+$/g,function(a,b){
return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"<br>"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "});if(c){var g=b.clone();g.setHtml(e),c.append(g)}else b.setHtml(e)}return c||b}(c?[a.getHtml()]:function(a){var b=[];return k(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"</pre>"+c+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)}),b}(a),b):a.moveChildren(b);(b.replace(a),d)?(h=(c=b).getPrevious(A)
)&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("pre")&&(d=k(h.getHtml(),/\n$/,"")+"\n\n"+k(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="<pre>"+d+"</pre>":c.setHtml(d),h.remove()):c&&p(b)}function k(a,b,c){var d="",e="";a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""});return d+a.replace(b,c)+e}function o(a,b){var f,d=(c=this._.definition).attributes,c=c.styles,e=u(this)[a.getName()],g=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c);for(f in d)("class"==f||this._.definition.fullMatch)&&a.getAttribute(f)!=v(f,d[f])||b&&"data-"==f.slice(0,5)||(g=a.hasAttribute(f),
a.removeAttribute(f));for(var h in c)this._.definition.fullMatch&&a.getStyle(h)!=v(h,c[h],!0)||(g=g||!!a.getStyle(h),a.removeStyle(h));m(a,e,w[a.getName()]),g&&(this._.definition.alwaysRemoveElement?p(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?p(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function n(a){for(var d,b=u(this),c=a.getElementsByTag(this.element),e=c.count();0<=--e;)(d=c.getItem(e)).isReadOnly()||o.call(this,d,!0);for(var g in b)if(g!=this.element)for(e=(c=a.getElementsByTag(g)).count()-1;0<=e;e--)(d=c.getItem(e)).isReadOnly()||m(d,b[g])}function m(a,b,c){if(b=b&&b.attributes
)for(var d=0;d<b.length;d++){var g,e=b[d][0];if(g=a.getAttribute(e)){var f=b[d][1];(null===f||f.test&&f.test(g)||"string"==typeof f&&g==f)&&a.removeAttribute(e)}}c||p(a)}function p(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(A),d=a.getNext(A);c&&(c.type==CKEDITOR.NODE_TEXT||!c.isBlockBoundary({br:1}))&&a.append("br",1),d&&(d.type==CKEDITOR.NODE_TEXT||!d.isBlockBoundary({br:1}))&&a.append("br"),a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function q(a,b,c){var d;return"*"==(
d=a.element)&&(d="span"),d=new CKEDITOR.dom.element(d,b),c&&c.copyAttributes(d),d=t(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function t(a,b){var d=(c=b._.definition).attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);return c&&a.setAttribute("style",c),a}function s(a,b){for(var c in a)a[c]=a[c].replace(y,function(a,c){return b[c]})}function u(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var g,f;if("string"==typeof(
e=c[d])?g=e.toLowerCase():(g=e.element?e.element.toLowerCase():a.element,f=e.attributes),e=b[g]||(b[g]={}),f){var h,e=e.attributes=e.attributes||[];for(h in f)e.push([h.toLowerCase(),f[h]])}}}return b}function v(a,b,c){var d=new CKEDITOR.dom.element("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function z(a,b,c){for(var g,d=a.document,e=a.getRanges(),f=(b=b?this.removeFromRange:this.applyToRange,e.createIterator());g=f.getNextRange();)b.call(this,g,c);a.selectRanges(e),d.removeCustomData("doc_processing_style")}var w={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,
aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},r={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},x=/\s*(?:;\s*|$)/,y=/#\((.+?)\)/g,B=CKEDITOR.dom.walker.bookmark(0,1),A=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style),b&&(s((a=CKEDITOR.tools.clone(a)).attributes,b),s(a.styles,b)),
c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*",this.type=a.type||(w[c]?CKEDITOR.STYLE_BLOCK:r[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:a}},CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return z.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),z.call(this,a.getSelection(),0,a),this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return z.call(this,a.getSelection(),1);if(
this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),z.call(this,a.getSelection(),1,a),this._.enterMode=b}},applyToRange:function(a){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?f:this.type==CKEDITOR.STYLE_BLOCK?i:this.type==CKEDITOR.STYLE_OBJECT?b:null,this.applyToRange(a)},removeFromRange:function(a){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?d:this.type==CKEDITOR.STYLE_OBJECT?g:null,this.removeFromRange(a)},applyToObject:function(a){t(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:
return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var e,c=a.elements,d=0;d<c.length;d++)if(e=c[d],this.type!=CKEDITOR.STYLE_INLINE||e!=a.block&&e!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var g=e.getName();if(!("string"==typeof this.element?g==this.element:g in this.element))continue}if(this.checkElementRemovable(e,!0,b))return!0}}return!1},checkApplicable:function(a,b,c){if(b&&b instanceof CKEDITOR.filter&&(c=b),c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd(
)[this.element]}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{d={};var e=0,g=c.attributes;if(g)for(var f in g)e++,d[f]=g[f];(f=CKEDITOR.style.getStyleText(c))&&(d.style||e++,d.style=f),d._length=e,c=c._AC=d}if(!c._length)return!0;for(var h in c)if("_length"!=h){if(e=a.getAttribute(h)||"","style"==h)a:{for(f in"string"==typeof(d=c[h])&&(d=CKEDITOR.tools.parseCssText(d)),"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0)),f=void 0,d)if(!(f in e
)||e[f]!=d[f]&&"inherit"!=d[f]&&"inherit"!=e[f]){d=!1;break a}d=!0}else d=c[h]==e;if(d){if(!b)return!0}else if(b)return!1}if(b)return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=u(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var e=b[c][1];if(null===e)return!0;if("string"==typeof e){if(d==e)return!0}else if(e.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");c=["<",d];var e=b.attributes;if(e)for(var g in e)c.push(" ",g,'="',e[g],'"');return(e=CKEDITOR.style.getStyleText(b)
)&&c.push(' style="',e,'"'),c.push(">",a||b.name,"</",d,">"),c.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(a){if(b=a._ST)return b;var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";for(var e in c.length&&(c=c.replace(x,";")),b){var g=b[e],f=(e+":"+g).replace(x,";");"inherit"==g?d+=f:c+=f}return c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0)),a._ST=c+d},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a},this.setup&&this.setup(a)};return b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{
assignedTo:CKEDITOR.STYLE_OBJECT},a,!0),this.customHandlers[a.type]=b};var G=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,C=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(a,f){this.requiredContent=this.allowedContent=this.style=a,CKEDITOR.tools.extend(this,f,!0)},CKEDITOR.styleCommand.prototype.exec=function(a){a.focus(),this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(
CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(a,f,c){CKEDITOR.stylesSet.addExternal(a,f,""),CKEDITOR.stylesSet.load(a,c)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,f){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var b=0;b<c.length;b++){var g=c[b],f=g.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;g.fn.call(this,f)}})),c.push({style:a,fn:f})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(
this._.stylesDefinitions);else{var f=this;if(!1===(c=f.config.stylesCombo_stylesSet||f.config.stylesSet))a(null);else if(c instanceof Array)f._.stylesDefinitions=c,a(c);else{c||(c="default");var c,e=(c=c.split(":"))[0];CKEDITOR.stylesSet.addExternal(e,c[1]?c.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(e,function(b){f._.stylesDefinitions=b[e],a(f._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(a,f){"string"==typeof a&&(a=(f?f.$:document).createComment(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{
type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var c,a={},f={};for(c in CKEDITOR.dtd.$blockLimit)c in CKEDITOR.dtd.$list||(a[c]=1);for(c in CKEDITOR.dtd.$block)c in CKEDITOR.dtd.$blockLimit||c in CKEDITOR.dtd.$empty||(f[c]=1);CKEDITOR.dom.elementPath=function(c,b){var j,g=null,i=null,d=[],h=c;b=b||c.getDocument().getBody();do{if(h.type==CKEDITOR.NODE_ELEMENT){if(d.push(h),!this.lastElement&&((this.lastElement=h).is(CKEDITOR.dtd.$object)||"false"==h.getAttribute("contenteditable")))continue;if(h.equals(b))break;if(!i&&(j=h.getName(),"true"==h.getAttribute("contenteditable")?i=h:!g&&f[j]&&(g=h),a[j])
){var k;if(k=!g){if(j="div"==j){a:{k=0;for(var l=(j=h.getChildren()).count();k<l;k++){var o=j.getItem(k);if(o.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[o.getName()]){j=!0;break a}}j=!1}j=!j}k=j}k?g=h:i=h}}}while(h=h.getParent());i||(i=b),this.block=g,this.blockLimit=i,this.root=b,this.elements=d}}(),CKEDITOR.dom.elementPath.prototype={compare:function(a){var f=this.elements;if(!(a=a&&a.elements)||f.length!=a.length)return!1;for(var c=0;c<f.length;c++)if(!f[c].equals(a[c]))return!1;return!0},contains:function(a,f,c){var e;"string"==typeof a&&(e=function(b){return b.getName()==a}),a instanceof CKEDITOR.dom.element?e=function(b){return b.equals(a)
}:CKEDITOR.tools.isArray(a)?e=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?e=a:"object"==typeof a&&(e=function(b){return b.getName()in a});var b=this.elements,g=b.length;for(f&&g--,c&&(b=Array.prototype.slice.call(b,0)).reverse(),f=0;f<g;f++)if(e(b[f]))return b[f];return null},isContextFor:function(a){return!(a in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[a]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(a,f){"string"==typeof a&&(a=(f?f.$:document).createTextNode(a
)),this.$=a},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var f=this.$.parentNode,c=f.childNodes.length,e=this.getLength(),b=this.getDocument(),g=new CKEDITOR.dom.text(this.$.splitText(a),b);return f.childNodes.length==c&&(e<=a?(g=b.createText("")).insertAfter(this):((a=b.createText("")).insertAfter(g),a.remove())),g},substring:function(a,f){return"number"!=typeof f?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,f)}}),
function(){function a(a,e,b){var g=a.serializable,f=e[b?"endContainer":"startContainer"],d=b?"endOffset":"startOffset",h=g?e.document.getById(a.startNode):a.startNode;a=g?e.document.getById(a.endNode):a.endNode;return f.equals(h.getPrevious())?(e.startOffset=e.startOffset-f.getLength()-a.getPrevious().getLength(),f=a.getNext()):f.equals(a.getPrevious())&&(e.startOffset=e.startOffset-f.getLength(),f=a.getNext()),f.equals(h.getParent())&&e[d]++,f.equals(a.getParent())&&e[d]++,e[b?"endContainer":"startContainer"]=f,e}CKEDITOR.dom.rangeList=function(a){return a instanceof CKEDITOR.dom.rangeList?a:(a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[],
CKEDITOR.tools.extend(a,f))};var f={createIterator:function(){var g,a=this,e=CKEDITOR.dom.walker.bookmark(),b=[];return{getNextRange:function(f){var d=a[g=void 0===g?0:g+1];if(d&&1<a.length){if(!g)for(var h=a.length-1;0<=h;h--)b.unshift(a[h].createBookmark(!0));if(f)for(var j=0;a[g+j+1];){f=0,h=(k=d.document).getById(b[j].endNode);for(var k=k.getById(b[j+1].startNode);;){if(h=h.getNextSourceNode(!1),k.equals(h))f=1;else if(e(h)||h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary())continue;break}if(!f)break;j++}for(d.moveToBookmark(b.shift());j--;)(h=a[++g]).moveToBookmark(b.shift()),d.setEnd(h.endContainer,h.endOffset)}return d}}},createBookmarks:function(c){
for(var b,e=[],g=0;g<this.length;g++){e.push(b=this[g].createBookmark(c,!0));for(var f=g+1;f<this.length;f++)this[f]=a(b,this[f]),this[f]=a(b,this[f],!0)}return e},createBookmarks2:function(a){for(var e=[],b=0;b<this.length;b++)e.push(this[b].createBookmark2(a));return e},moveToBookmarks:function(a){for(var e=0;e<this.length;e++)this[e].moveToBookmark(a[e])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function f(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c){c=c.split(",").sort(function(a,b){return b<a?-1:1});for(var g,e=0;e<c.length;e++)if(g=c[e],d.ie&&(g.replace(
/^ie/,"")==d.version||d.quirks&&"iequirks"==g)&&(g="ie"),d[g]){b=b+"_"+c[e];break}}return CKEDITOR.getUrl(a()+b+".css")}function c(a,b){g[a]||(CKEDITOR.document.appendStyleSheet(f(a)),g[a]=1),b&&b()}function e(a){var b=a.getById(i);return b||((b=a.getHead().append("style")).setAttribute("id",i),b.setAttribute("type","text/css")),b}function b(a,b,c){var d,e,g;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var f=0;f<a.length;f++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){for(g=b[e][1],d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);a[f].$.sheet.addRule(b[e][0],g)}else{for(g=b,d=0;d<c.length;d++
)g=g.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?a[f].$.styleSheet.cssText=a[f].$.styleSheet.cssText+g:a[f].$.innerHTML=a[f].$.innerHTML+g}}var g={};CKEDITOR.skin={path:a,loadPart:function(b,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){c(b,d)}):c(b,d)},getPath:function(a){return CKEDITOR.getUrl(f(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase(),this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var g;return a&&(a=a.toLowerCase(),b&&(g=this.icons[a+"-rtl"]),g||(g=this.icons[a])),a=c||g&&g.path||"",
d=d||g&&g.offset,e=e||g&&g.bgsize||"16px",a&&"background-image:url("+CKEDITOR.getUrl(a)+");background-position:0 "+d+"px;background-size:"+e+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var c=e(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var e=CKEDITOR.skin.chameleon,g="",f="";"function"==typeof e&&(g=e(this,"editor"),f=e(this,"panel")),b([c],g,a=[[h,a]]),b(d,f,a)}).call(this,a)}});var i="cke_ui_color",d=[],h=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var c=a.editor;a=function(a){if(!(a=(a.data[0]||a.data
).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){a=e(a),d.push(a);var g=c.getUiColor();g&&b([a],CKEDITOR.skin.chameleon(c,"panel"),[[h,g]])}};c.on("panelShow",a),c.on("menuShow",a),c.config.uiColor&&c.setUiColor(c.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var f=a.getComputedStyle("border-top-color"),c=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(
!f||f!=c)}catch(e){CKEDITOR.env.hc=!1}a.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,f=0;f<a.length;f++)CKEDITOR.editor.prototype.constructor.apply(a[f][0],a[f][1]),CKEDITOR.add(a[f][0])}(),CKEDITOR.skin.name="tao",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=function(){var a=function(a,b){for(var c=a.match(/[^#]./g),f=0;f<3;f++){var j,d=c,h=f;j=parseInt(c[f],16),j=("0"+(
b<0?0|j*(1+b):0|j+(255-j)*b).toString(16)).slice(-2),d[h]=j}return"#"+c.join("")},f=function(){var a=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(b,c){return a.output({from:b,to:c})}}(),c={
editor:new CKEDITOR.template(
"{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "
),panel:new CKEDITOR.template(
".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")}
;return function(e,b){var g=e.uiColor;g={id:"."+e.id,defaultBorder:a(g,-.1),defaultGradient:f(a(g,.9),g),lightGradient:f(a(g,1),a(g,.7)),mediumGradient:f(a(g,.8),a(g,.5)),ckeButtonOn:f(a(g,.6),a(g,.7)),ckeResizer:a(g,-.4),ckeToolbarSeparator:a(g,.5),ckeColorauto:a(g,.8),dialogBody:a(g,.7),dialogTabSelected:f("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:a(g,-.6),elementsPathBg:g,menubuttonIcon:a(g,.5),menubuttonIconHover:a(g,.3)};return c[b].output(g).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("basicstyles",{init:function(a){var f=0,c=function(b,c,g,j){if(j){j=new CKEDITOR.style(j);var k=e[g];k.unshift(j),
a.attachStyleStateChange(j,function(b){!a.readOnly&&a.getCommand(g).setState(b)}),a.addCommand(g,new CKEDITOR.styleCommand(j,{contentForms:k})),a.ui.addButton&&a.ui.addButton(b,{label:c,command:g,toolbar:"basicstyles,"+(f+=10)})}},e={bold:["strong","b",["span",function(a){return"bold"==(a=a.styles["font-weight"])||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},b=a.config,g=a.lang.basicstyles;c("Bold",
g.bold,"bold",b.coreStyles_bold),c("Italic",g.italic,"italic",b.coreStyles_italic),c("Underline",g.underline,"underline",b.coreStyles_underline),c("Strike",g.strike,"strike",b.coreStyles_strike),c("Subscript",g.subscript,"subscript",b.coreStyles_subscript),c("Superscript",g.superscript,"superscript",b.coreStyles_superscript),a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",
overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){function a(a,b,c,d){if(!a.isReadOnly()&&!a.equals(c.editable())){CKEDITOR.dom.element.setMarker(d,a,"bidi_processed",1);d=a;for(var e=c.editable();(d=d.getParent())&&!d.equals(e);)if(d.getCustomData("bidi_processed"))return a.removeStyle("direction"),void a.removeAttribute("dir");((d="useComputedState"in c.config?c.config.useComputedState:1)?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=b&&(a.removeStyle("direction"),d?(a.removeAttribute("dir"),b!=a.getComputedStyle("direction"
)&&a.setAttribute("dir",b)):a.setAttribute("dir",b),c.forceNextSelectionCheck())}}function f(a,b,c){var d=a.getCommonAncestor(!1,!0);if((a=a.clone()).enlarge(c==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),a.checkBoundaryOfElement(d,CKEDITOR.START)&&a.checkBoundaryOfElement(d,CKEDITOR.END)){for(var e;d&&d.type==CKEDITOR.NODE_ELEMENT&&(e=d.getParent())&&1==e.getChildCount()&&!(d.getName()in b);)d=e;return d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in b&&d}}function c(c){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},
requiredContent:"p[dir]",refresh:function(a,b){var d,c;if(!(c=void 0===(c=a.config.useComputedState)||c)){d=b.lastElement;for(var e=a.editable();d&&!(d.getName()in i||d.equals(e));){var g=d.getParent();if(!g)break;d=g}}(d=d||b.block||b.blockLimit).equals(a.editable())&&(e=a.getSelection().getRanges()[0].getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&(d=e),d&&(c=c?d.getComputedStyle("direction"):d.getStyle("direction")||d.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==c?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==c?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)),(c=(b.block||b.blockLimit||a.editable()
).getDirection(1))!=(a._.selDir||a.lang.dir)&&(a._.selDir=c,a.fire("contentDirChanged",c))},exec:function(d){var e=d.getSelection(),h=d.config.enterMode;if((i=e.getRanges())&&i.length){for(var t,j={},q=e.createBookmarks(),i=i.createIterator(),s=0;t=i.getNextRange(1);){var u=t.getEnclosedNode();u&&(!u||u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in g)||(u=f(t,b,h)),u&&a(u,c,d,j);var v=new CKEDITOR.dom.walker(t),z=q[s].startNode,w=q[s++].endNode;for(v.evaluator=function(a){var d,c=h==CKEDITOR.ENTER_P?"p":"div";return(d=!!a&&a.type==CKEDITOR.NODE_ELEMENT)&&(d=a.getName()in b)&&((c=a.is(c))&&(c=!!(c=a.getParent())&&c.type==CKEDITOR.NODE_ELEMENT&&a.getParent().is(
"blockquote")),d=!c&&a.getPosition(z)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(w)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING),!!d};u=v.next();)a(u,c,d,j);for((t=t.createIterator()).enlargeBr=h!=CKEDITOR.ENTER_BR;u=t.getNextParagraph(h==CKEDITOR.ENTER_P?"p":"div");)a(u,c,d,j)}CKEDITOR.dom.element.clearAllMarkers(j),d.forceNextSelectionCheck(),e.selectBookmarks(q),d.focus()}}}}function e(a){var b=a==d.setAttribute,c=a==d.removeAttribute,e=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(d,g){if(!this.isReadOnly()){var f;if(f=d==(b||c?"dir":"direction")||"style"==d&&(c||e.test(g))){a:{for(var h=(f=this
).getDocument().getBody().getParent();f;){if(f.equals(h)){f=!1;break a}f=f.getParent()}f=!0}f=!f}if(f&&(f=this.getDirection(1),h=a.apply(this,arguments),f!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),h}return a.apply(this,arguments)}}var b={table:1,ul:1,ol:1,blockquote:1,div:1},g={},i={};CKEDITOR.tools.extend(g,b,{tr:1,p:1,div:1,li:1}),CKEDITOR.tools.extend(i,g,{td:1}),CKEDITOR.plugins.add("bidi",{init:function(a){function b(c,d,e,g,f){a.addCommand(e,new CKEDITOR.command(a,g)),a.ui.addButton&&a.ui.addButton(c,{label:d,command:e,toolbar:"bidi,"+f})}if(!a.blockless){var d=a.lang.bidi;b("BidiLtr",d.ltr,"bidiltr",c("ltr"),10),b(
"BidiRtl",d.rtl,"bidirtl",c("rtl"),20),a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)})})}),a.on("contentDirChanged",function(b){b=(a.lang.dir!=b.data?"add":"remove")+"Class";var c=a.ui.space(a.config.toolbarLocation);c&&c[b]("cke_mixed_dir_content")})}}});for(var d=CKEDITOR.dom.element.prototype,h=["setStyle","removeStyle","setAttribute","removeAttribute"],j=0;j<h.length;j++)d[h[j]]=CKEDITOR.tools.override(d[h[j]],e)}(),function(){var a={exec:function(a){var c=a.getCommand("blockquote").state,e=a.getSelection(),b=e&&e.getRanges()[0];if(b){var g=e.createBookmarks();if(
CKEDITOR.env.ie){var h,i=g[0].startNode,d=g[0].endNode;if(i&&"blockquote"==i.getParent().getName())for(h=i;h=h.getNext();)if(h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary()){i.move(h,!0);break}if(d&&"blockquote"==d.getParent().getName())for(h=d;h=h.getPrevious();)if(h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary()){d.move(h);break}}if((j=b.createIterator()).enlargeBr=a.config.enterMode!=CKEDITOR.ENTER_BR,c==CKEDITOR.TRISTATE_OFF){for(i=[];c=j.getNextParagraph();)i.push(c);for(i.length<1&&(c=a.document.createElement(a.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),d=g.shift(),b.insertNode(c),c.append(new CKEDITOR.dom.text("\ufeff",a.document)),
b.moveToBookmark(d),b.selectNodeContents(c),b.collapse(!0),d=b.createBookmark(),i.push(c),g.unshift(d)),h=i[0].getParent(),b=[],d=0;d<i.length;d++)c=i[d],h=h.getCommonAncestor(c.getParent());for(c={table:1,tbody:1,tr:1,ol:1,ul:1};c[h.getName()];)h=h.getParent();for(d=null;0<i.length;){for(c=i.shift();!c.getParent().equals(h);)c=c.getParent();c.equals(d)||b.push(c),d=c}for(;0<b.length;)if("blockquote"==(c=b.shift()).getName()){for(d=new CKEDITOR.dom.documentFragment(a.document);c.getFirst();)d.append(c.getFirst().remove()),i.push(d.getLast());d.replace(c)}else i.push(c);for((b=a.document.createElement("blockquote")).insertBefore(i[0]);0<i.length;)c=i.shift(),
b.append(c)}else if(c==CKEDITOR.TRISTATE_ON){for(d=[],h={};c=j.getNextParagraph();){for(i=b=null;c.getParent();){if("blockquote"==c.getParent().getName()){b=c.getParent(),i=c;break}c=c.getParent()}b&&i&&!i.getCustomData("blockquote_moveout")&&(d.push(i),CKEDITOR.dom.element.setMarker(h,i,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(h),c=[],i=[],h={};0<d.length;)b=(j=d.shift()).getParent(),j.getPrevious()?j.getNext()?(j.breakParent(j.getParent()),i.push(j.getNext())):j.remove().insertAfter(b):j.remove().insertBefore(b),b.getCustomData("blockquote_processed")||(i.push(b),CKEDITOR.dom.element.setMarker(h,b,"blockquote_processed",!0)),
c.push(j);for(CKEDITOR.dom.element.clearAllMarkers(h),d=i.length-1;0<=d;d--){a:{for(var j=0,k=(h=b=i[d]).getChildCount(),l=void 0;j<k&&(l=h.getChild(j));j++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){h=!1;break a}h=!0}h&&b.remove()}if(a.config.enterMode==CKEDITOR.ENTER_BR)for(b=!0;c.length;)if("div"==(j=c.shift()).getName()){for(d=new CKEDITOR.dom.documentFragment(a.document),b&&j.getPrevious()&&(j.getPrevious().type!=CKEDITOR.NODE_ELEMENT||!j.getPrevious().isBlockBoundary())&&d.append(a.document.createElement("br")),b=j.getNext()&&!(j.getNext().type==CKEDITOR.NODE_ELEMENT&&j.getNext().isBlockBoundary());j.getFirst();)j.getFirst().remove(
).appendTo(d);b&&d.append(a.document.createElement("br")),d.replace(j),b=!1}}e.selectBookmarks(g),a.focus()}},refresh:function(a,c){this.setState(a.elementPath(c.block||c.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(f){f.blockless||(f.addCommand("blockquote",a),f.ui.addButton&&f.ui.addButton("Blockquote",{label:f.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(a){this._||(this._={}),
this._.default=this._.initValue=a.default||"",this._.required=a.required||!1;for(var b=[this._],c=1;c<arguments.length;c++)b.push(arguments[c]);return b.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,b),this._},f={build:function(a,b,c){return new CKEDITOR.ui.dialog.textInput(a,b,c)}},c={build:function(a,b,c){return new CKEDITOR.ui.dialog[b.type](a,b,c)}},e={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},
b=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),g=/^on([A-Z]\w+)/,i=function(a){for(var b in a)(g.test(b)||"title"==b||"type"==b)&&delete a[b];return a};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,c,e,g){if(!(arguments.length<4)){var f=a.call(this,c);f.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var i={
role:c.role||"presentation"};c.includeLabel&&(i["aria-labelledby"]=f.labelId),CKEDITOR.ui.dialog.uiElement.call(this,b,c,e,"div",null,i,function(){var a=[],e=c.required?" cke_required":"";return"horizontal"!=c.labelLayout?a.push('<label class="cke_dialog_ui_labeled_label'+e+'" ',' id="'+f.labelId+'"',f.inputId?' for="'+f.inputId+'"':"",(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",c.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',c.controlStyle?' style="'+c.controlStyle+'"':"",' role="presentation">',g.call(this,b,c),"</div>"):(e={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",
html:'<label class="cke_dialog_ui_labeled_label'+e+'" id="'+f.labelId+'" for="'+f.inputId+'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(c.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+">"+g.call(this,b,c)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,e,a)),a.join("")})}},textInput:function(b,c,e){if(!(arguments.length<3)){a.call(this,c);var g=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",f={class:"cke_dialog_ui_input_"+c.type,id:g,type:c.type};c.validate&&(this.validate=c.validate),c.maxLength&&(
f.maxlength=c.maxLength),c.size&&(f.size=c.size),c.inputStyle&&(f.style=c.inputStyle);var i=this,n=!1;b.on("load",function(){i.getInputElement().on("keydown",function(a){13==a.data.getKeystroke()&&(n=!0)}),i.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&n&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),n=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,e,function(){var a=['<div class="cke_dialog_ui_input_',c.type,'" role="presentation"'];for(var b in c.width&&a.push('style="width:'+c.width+'" '),a.push("><input "),f["aria-labelledby"]=this._.labelId,this._.required&&(
f["aria-required"]=this._.required),f)a.push(b+'="'+f[b]+'" ');return a.push(" /></div>"),a.join("")})}},textarea:function(b,c,e){if(!(arguments.length<3)){a.call(this,c);var g=this,f=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",i={};c.validate&&(this.validate=c.validate),i.rows=c.rows||5,i.cols=c.cols||20,i.class="cke_dialog_ui_input_textarea "+(c.class||""),void 0!==c.inputStyle&&(i.style=c.inputStyle),c.dir&&(i.dir=c.dir),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,e,function(){i["aria-labelledby"]=this._.labelId,this._.required&&(i["aria-required"]=this._.required);var b,a=[
'<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',f,'" '];for(b in i)a.push(b+'="'+CKEDITOR.tools.htmlEncode(i[b])+'" ');return a.push(">",CKEDITOR.tools.htmlEncode(g._.default),"</textarea></div>"),a.join("")})}},checkbox:function(b,c,e){if(!(arguments.length<3)){var g=a.call(this,c,{default:!!c.default});c.validate&&(this.validate=c.validate),CKEDITOR.ui.dialog.uiElement.call(this,b,c,e,"span",null,null,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),e=[],f=CKEDITOR.tools.getNextId()+"_label",j={class:"cke_dialog_ui_checkbox_input",type:"checkbox",
"aria-labelledby":f};return i(a),c.default&&(j.checked="checked"),void 0!==a.inputStyle&&(a.style=a.inputStyle),g.checkbox=new CKEDITOR.ui.dialog.uiElement(b,a,e,"input",null,j),e.push(' <label id="',f,'" for="',j.id,'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(c.label),"</label>"),e.join("")})}},radio:function(b,c,e){if(!(arguments.length<3)){a.call(this,c),this._.default||(this._.default=this._.initValue=c.items[0][1]),c.validate&&(this.validate=c.valdiate);var g=[],f=this;c.role="radiogroup",c.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,b,c,e,function(){for(var a=[],e=[],j=(
c.id?c.id:CKEDITOR.tools.getNextId())+"_radio",p=0;p<c.items.length;p++){var q=c.items[p],t=void 0!==q[2]?q[2]:q[0],s=void 0!==q[1]?q[1]:q[0],v=(u=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",u=CKEDITOR.tools.extend({},c,{id:u,title:null,type:null},!0),z=(t=CKEDITOR.tools.extend({},u,{title:t},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:j,value:s,"aria-labelledby":v}),w=[];f._.default==s&&(z.checked="checked"),i(u),i(t),void 0!==u.inputStyle&&(u.style=u.inputStyle),u.keyboardFocusable=!0,g.push(new CKEDITOR.ui.dialog.uiElement(b,u,w,"input",null,z)),w.push(" "),new CKEDITOR.ui.dialog.uiElement(b,t,w,"label",null,{id:v,for:z.id},q[0]),
a.push(w.join(""))}return new CKEDITOR.ui.dialog.hbox(b,g,a,e),e.join("")}),this._.children=g}},button:function(b,c,e){if(arguments.length){"function"==typeof c&&(c=c(b.getParentEditor())),a.call(this,c,{disabled:c.disabled||!1}),CKEDITOR.event.implementOn(this);var g=this;b.on("load",function(){var a=this.getElement();a.on("click",function(a){g.click(),a.data.preventDefault()}),a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(g.click(),a.data.preventDefault())}),a.unselectable()},this);var f=CKEDITOR.tools.extend({},c);delete f.style;var i=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,f,e,"a",null,{style:c.style,
href:"javascript:void(0)",title:c.label,hidefocus:"true",class:c.class,role:"button","aria-labelledby":i},'<span id="'+i+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(c.label)+"</span>")}},select:function(b,c,e){if(!(arguments.length<3)){var g=a.call(this,c);c.validate&&(this.validate=c.validate),g.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,b,c,e,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),e=[],f=[],j={id:g.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('<div class="cke_dialog_ui_input_',c.type,
'" role="presentation"'),c.width&&e.push('style="width:'+c.width+'" '),e.push(">"),void 0!==c.size&&(j.size=c.size),void 0!==c.multiple&&(j.multiple=c.multiple),i(a);for(var q,p=0;p<c.items.length&&(q=c.items[p]);p++)f.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==q[1]?q[1]:q[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(q[0]));return void 0!==a.inputStyle&&(a.style=a.inputStyle),g.select=new CKEDITOR.ui.dialog.uiElement(b,a,e,"select",null,j,f.join("")),e.push("</div>"),e.join("")})}},file:function(b,c,e){if(!(arguments.length<3)){void 0===c.default&&(c.default="");var g=CKEDITOR.tools.extend(a.call(this,c),{definition:c,buttons:[
]});c.validate&&(this.validate=c.validate),b.on("load",function(){CKEDITOR.document.getById(g.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,e,function(){g.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var a=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',g.frameId,'" title="',c.label,'" src="javascript:void('];return a.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),a.push(')"></iframe>'),a.join("")})}},fileButton:function(b,c,e){var g=this;if(!(
arguments.length<3)){a.call(this,c),c.validate&&(this.validate=c.validate);var f=CKEDITOR.tools.extend({},c),i=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button",f.onClick=function(a){var e=c.for;i&&!1===i.call(this,a)||(b.getContentElement(e[0],e[1]).submit(),this.disable())},b.on("load",function(){b.getContentElement(c.for[0],c.for[1])._.buttons.push(g)}),CKEDITOR.ui.dialog.button.call(this,b,f,e)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(e,g,f){if(!(arguments.length<3)){var i=[],m=g.html;"<"!=m.charAt(0)&&(m="<span>"+m+"</span>");var p=g.focus;if(p){
var q=this.focus;this.focus=function(){("function"==typeof p?p:q).call(this),this.fire("focus")},g.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,e,g,i,"span",null,null,""),i=i.join("").match(a),m=m.match(b)||["","",""],c.test(m[1])&&(m[1]=m[1].slice(0,-1),m[2]="/"+m[2]),f.push([m[1]," ",i[1]||"",m[2]].join(""))}}}(),fieldset:function(a,b,c,e,g){var f=g.label;this._={children:b},CKEDITOR.ui.dialog.uiElement.call(this,a,g,e,"fieldset",null,null,function(){var a=[];f&&a.push("<legend"+(g.labelStyle?' style="'+g.labelStyle+'"':"")+">"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b])
;return a.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(a){var b=CKEDITOR.document.getById(this._.labelId);return b.getChildCount()<1?new CKEDITOR.dom.text(a,CKEDITOR.document).appendTo(b):b.getChild(0).$.nodeValue=a,this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return!a||a.getChildCount()<1?"":a.getChild(0).getText()},eventProcessors:b},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){
return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",function(){b.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),
CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){return!a&&(a=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},e,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput
,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var e=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),g=this.getInputElement().$;return e.$.text=a,e.$.value=null==b?a:b,null==c?CKEDITOR.env.ie?g.add(e.$):g.add(e.$,null):g.add(e.$,c),this},remove:function(a){return this.getInputElement().$.remove(a),this},clear:function(){for(var a=this.getInputElement().$;0<a.length;)a.remove(0);return this},keyboardFocusable:!0},e,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(
new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,c){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?b.onChange.apply(this,arguments):(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){"checked"==(b=b.data.$).propertyName&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",c),null)}},keyboardFocusable:!0},e,
!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(a,b){for(var e,c=this._.children,g=0;g<c.length&&(e=c[g]);g++)e.getElement().$.checked=e.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var b,a=this._.children;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked)return void a[b].getElement().focus();a[0].getElement().focus()},eventProcessors:{onChange:function(a,c){return CKEDITOR.env.ie?(a.on("load",function(){for(var a=this._.children,
b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){"checked"==(a=a.data.$).propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",c),null):b.onChange.apply(this,arguments)}}},e,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,e,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<a.$.forms.length?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){
return this.getInputElement().getParent().$.action},registerEvents:function(a){var c,g,b=/^on([A-Z]\w+)/,e=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(g in a)(c=g.match(b))&&(this.eventProcessors[g]?this.eventProcessors[g].call(this,this._.dialog,a[g]):e(this,this._.dialog,c[1].toLowerCase(),a[g]));return this},reset:function(){function a(){c.$.open();var d="";e.size&&(d=e.size-(CKEDITOR.env.ie?7:0));var t=b.frameId+"_input";for(c.$.write(['<html dir="'+m+'" lang="'+p+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">',
'<form enctype="multipart/form-data" method="POST" dir="'+m+'" lang="'+p+'" action="',CKEDITOR.tools.htmlEncode(e.action),'"><label id="',b.labelId,'" for="',t,'" style="display:none">',CKEDITOR.tools.htmlEncode(e.label),'</label><input style="width:100%" id="',t,'" aria-labelledby="',b.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(e.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<d?d:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+f+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+i+")}","<\/script>"].join(""))
,c.$.close(),d=0;d<g.length;d++)g[d].enable()}var b=this._,c=CKEDITOR.document.getById(b.frameId).getFrameDocument(),e=b.definition,g=b.buttons,f=this.formLoadedNumber,i=this.formUnloadNumber,m=b.dialog._.editor.lang.dir,p=b.dialog._.editor.langCode;f||(f=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),i=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(f),CKEDITOR.tools.removeFunction(i)})),CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement(
).$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",f),CKEDITOR.dialog.addUIElement("password",f),CKEDITOR.dialog.addUIElement("textarea",c),CKEDITOR.dialog.addUIElement(
"checkbox",c),CKEDITOR.dialog.addUIElement("radio",c),CKEDITOR.dialog.addUIElement("button",c),CKEDITOR.dialog.addUIElement("select",c),CKEDITOR.dialog.addUIElement("file",c),CKEDITOR.dialog.addUIElement("fileButton",c),CKEDITOR.dialog.addUIElement("html",c),CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,b,c){for(var g,e=b.children,f=[],i=[],m=0;m<e.length&&(g=e[m]);m++){var p=[];f.push(p),i.push(CKEDITOR.dialog._.uiElementBuilders[g.type].build(a,g,p))}return new CKEDITOR.ui.dialog[b.type](a,i,f,c,b)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){
function a(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;b-a<c;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function f(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;c<b+a;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function c(a,b){for(var c=a.$.getElementsByTagName("input"),d=0,e=c.length;d<e;d++){var g=new CKEDITOR.dom.element(c[d]);"text"==g.getAttribute("type").toLowerCase()&&(b?(g.setAttribute("value",g.getCustomData(
"fake_value")||""),g.removeCustomData("fake_value")):(g.setCustomData("fake_value",g.getAttribute("value")),g.setAttribute("value","")))}}function g(a){var b=(a=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",p).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""}))).getChild([0,0,0,0,0]),c=b.getChild(0),d=b.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e="javascript:void(function(){"+encodeURIComponent(
"document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(b.getParent())}return c.unselectable(),d.unselectable(),{element:a,parts:{dialog:a.getChild(0),title:c,close:d,tabs:b.getChild(2),contents:b.getChild([3,0,0,0]),footer:b.getChild([3,0,1,0])}}}function i(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){
a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function h(a,b){this._={dialog:a},CKEDITOR.tools.extend(this,b)}function j(a){function b(c){var i=a.getSize(),j=CKEDITOR.document.getWindow().getViewPaneSize(),k=c.data.$.screenX,s=c.data.$.screenY,m=k-d.x,t=s-d.y;d={x:k,y:s},e.x=e.x+m,e.y=e.y+t,a.move(e.x+h[3]<f?-h[3]:e.x-h[1]>j.width-i.width-f?j.width-i.width+("rtl"==g.lang.dir?0:h[1]):e.x,e.y+h[0]<f?-h[0]:e.y-h[2]>j.height-i.height-f?j.height-i.height+h[2]:e.y,1),c.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mousemove",b),
CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.env.ie6Compat){var a=r.getChild(0).getFrameDocument();a.removeListener("mousemove",b),a.removeListener("mouseup",c)}}var d=null,e=null,g=a.getParentEditor(),f=g.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];void 0===f&&(f=20),a.parts.title.on("mousedown",function(g){if(d={x:g.data.$.screenX,y:g.data.$.screenY},CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),e=a.getPosition(),CKEDITOR.env.ie6Compat){var f=r.getChild(0).getFrameDocument();f.on("mousemove",b),f.on("mouseup",c)}g.data.preventDefault()},a)}function k(a){var b,c;function d(e){var m="rtl"==h.lang.dir,
t=s.width,q=s.height,p=t+(e.data.$.screenX-b)*(m?-1:1)*(a._.moved?1:2),n=q+(e.data.$.screenY-c)*(a._.moved?1:2),u=a._.element.getFirst(),l=(u=m&&u.getComputedStyle("right"),a.getPosition());l.y+n>k.height&&(n=k.height-l.y),(m?u:l.x)+p>k.width&&(p=k.width-(m?u:l.x)),f!=CKEDITOR.DIALOG_RESIZE_WIDTH&&f!=CKEDITOR.DIALOG_RESIZE_BOTH||(t=Math.max(g.minWidth||0,p-i)),f!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&f!=CKEDITOR.DIALOG_RESIZE_BOTH||(q=Math.max(g.minHeight||0,n-j)),a.resize(t,q),a._.moved||a.layout(),e.data.preventDefault()}function e(){if(CKEDITOR.document.removeListener("mouseup",e),CKEDITOR.document.removeListener("mousemove",d),m&&(m.remove(),m=null),
CKEDITOR.env.ie6Compat){var a=r.getChild(0).getFrameDocument();a.removeListener("mouseup",e),a.removeListener("mousemove",d)}}var g=a.definition,f=g.resizable;if(f!=CKEDITOR.DIALOG_RESIZE_NONE){var i,j,k,s,m,h=a.getParentEditor(),t=CKEDITOR.tools.addFunction(function(g){s=a.getSize();var f=a.parts.contents;f.$.getElementsByTagName("iframe").length&&(m=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),f.append(m)),j=s.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),i=s.width-a.parts.contents.getSize("width",1),
b=g.screenX,c=g.screenY,k=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",d),CKEDITOR.document.on("mouseup",e),CKEDITOR.env.ie6Compat&&((f=r.getChild(0).getFrameDocument()).on("mousemove",d),f.on("mouseup",e)),g.preventDefault&&g.preventDefault()});a.on("load",function(){var b="";f==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":f==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical"),b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+h.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(h.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+t+', event )">'+(
"ltr"==h.lang.dir?"":"")+"</div>"),a.parts.footer.append(b,1)}),h.on("destroy",function(){CKEDITOR.tools.removeFunction(t)})}}function l(a){a.data.preventDefault(1)}function o(a){var b=CKEDITOR.document.getWindow(),d=(c=a.config).dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,g=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,e,g),f=w[c];f?f.show():(g=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",g,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(
d="<html><body style=\\'background-color:"+d+";\\'></body></html>",g.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),g.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),g.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),g.push("</div>"),(f=CKEDITOR.dom.element.createFromHtml(g.join(""))).setOpacity(void 0!==e?e:.5),f.on("keydown",l),f.on("keypress",l),f.on("keyup",l),f.appendTo(CKEDITOR.document.getBody()),w[c]=f),
a.focusManager.add(f),r=f;var h=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;if(f.setStyles({left:a.x+"px",top:a.y+"px"}),c)for(;a=c.getPosition(),c.move(a.x,a.y),c=c._.parentDialog;);};if(z=a=function(){var a=b.getViewPaneSize();f.setStyles({width:a.width+"px",height:a.height+"px"})},b.on("resize",a),a(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&f.focus(),CKEDITOR.env.ie6Compat){var i=function(){h(),arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){i.prevScrollHandler=window.onscroll||function(){},window.onscroll=i},0),h()}}function n(a){r&&(a.focusManager.remove(r),a=CKEDITOR.document.getWindow(),
r.hide(),a.removeListener("resize",z),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),z=null)}var m=CKEDITOR.tools.cssLength,
p='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>'
;CKEDITOR.dialog=function(c,d){function i(a){var b=w._.focusList;a=a||0;if(!(b.length<1)){var c=w._.currentFocusIndex;try{b[c].getInputElement().$.blur()}catch(d){}for(var e=c=(c+a+b.length)%b.length;a&&!b[e].isFocusable()&&(e=(e+a+b.length)%b.length)!=c;);b[e].focus(),"text"==b[e].type&&b[e].select()}}function s(b){if(w==CKEDITOR.dialog._.currentTop){var d=b.data.getKeystroke(),e="rtl"==c.lang.dir;if(o=z=0,9==d||d==CKEDITOR.SHIFT+9)d=d==CKEDITOR.SHIFT+9,w._.tabBarMode?(d=d?a.call(w):f.call(w),w.selectPage(d),w._.tabs[d][0].focus()):i(d?-1:1),o=1;else if(d==CKEDITOR.ALT+121&&!w._.tabBarMode&&1<w.getPageCount())w._.tabBarMode=!0,
w._.tabs[w._.currentTabId][0].focus(),o=1;else if(37!=d&&39!=d||!w._.tabBarMode)if(13!=d&&32!=d||!w._.tabBarMode)if(13==d)(d=b.data.getTarget()).is("a","button","select","textarea")||d.is("input")&&"button"==d.$.type||((d=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(d.click,0,d),o=1),z=1;else{if(27!=d)return;(d=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(d.click,0,d):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),z=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1),o=1;else d=d==(e?39:37)?a.call(w):f.call(w),w.selectPage(d),w._.tabs[d][0].focus(),o=1;m(b)}}function m(a){o?a.data.preventDefault(
1):z&&a.data.stopPropagation()}var o,z,t=CKEDITOR.dialog._.dialogDefinitions[d],p=CKEDITOR.tools.clone(q),n=c.config.dialog_buttonsOrder||"OS",u=c.lang.dir,l={};if(("OS"==n&&CKEDITOR.env.mac||"rtl"==n&&"ltr"==u||"ltr"==n&&"rtl"==u)&&p.buttons.reverse(),t=CKEDITOR.tools.extend(t(c),p),t=CKEDITOR.tools.clone(t),t=new v(this,t),p=g(c),this._={editor:c,element:p.element,name:d,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=p.parts,CKEDITOR.tools.setTimeout(
function(){c.fire("ariaWidget",this.parts.contents)},0,this),(p={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==u?"right":"left"]=0,this.parts.dialog.setStyles(p),CKEDITOR.event.call(this),this.definition=t=CKEDITOR.fire("dialogDefinition",{name:d,definition:t},c).definition,!("removeDialogTabs"in c._)&&c.config.removeDialogTabs){for(p=c.config.removeDialogTabs.split(";"),u=0;u<p.length;u++)if(2==(n=p[u].split(":")).length){var r=n[0];l[r]||(l[r]=[]),l[r].push(n[1])}c._.removeDialogTabs=l}if(c._.removeDialogTabs&&(l=c._.removeDialogTabs[d]))for(u=0;u<l.length;u++)t.removeContents(l[u]);t.onLoad&&this.on("load",t.onLoad)
,t.onShow&&this.on("show",t.onShow),t.onHide&&this.on("hide",t.onHide),t.onOk&&this.on("ok",function(a){c.fire("saveSnapshot"),setTimeout(function(){c.fire("saveSnapshot")},0),!1===t.onOk.call(this,a)&&(a.data.hide=!1)}),t.onCancel&&this.on("cancel",function(a){!1===t.onCancel.call(this,a)&&(a.data.hide=!1)});var w=this,y=function(a){var d,b=w._.contents;for(d in b)for(var e in b[d])if(a.call(this,b[d][e]))return};this.on("ok",function(a){y(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;return d&&(a.data.hide=!1,a.stop()),function(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute(
"aria-invalid",!0)),a||(this.select?this.select():this.focus()),b&&alert(b),this.fire("validated",{valid:a,msg:b})}.call(b,!d,"string"==typeof c?c:void 0),d}})},this,null,0),this.on("cancel",function(a){y(function(b){if(b.isChanged())return c.config.dialog_noConfirmCancel||confirm(c.lang.common.confirmCancel)||(a.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),a.data.preventDefault()},this),this.changeFocus=i;var x=this._.element;for(c.focusManager.add(x,1),this.on("show",function(){x.on("keydown",s,this),CKEDITOR.env.gecko&&x.on("keypress",m,this)}),this.on("hide",function(){
x.removeListener("keydown",s),CKEDITOR.env.gecko&&x.removeListener("keypress",m),y(function(a){(function(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}).apply(a)})}),this.on("iframeAdded",function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",s,this,null,0)}),this.on("show",function(){if(function(){var a=w._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;c<b;c++)a[c].focusIndex=c}(),c.config.dialog_startupFocusTab&&1<w._.pageCount)w._.tabBarMode=!0,w._.tabs[w._.currentTabId][0].focus();else if(!this._.hasFocus)if(
this._.currentFocusIndex=-1,t.onFocus){var a=t.onFocus.call(this);a&&a.focus()}else i(1)},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove(),b.appendTo(a)},this),j(this),k(this),new CKEDITOR.dom.text(t.title,CKEDITOR.document).appendTo(this.parts.title),u=0;u<t.contents.length;u++)(l=t.contents[u])&&this.addPage(l);for(this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1)),a.data.preventDefault())},this),u=[],
l=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:t.buttons},u).getChild(),this.parts.footer.setHtml(u.join("")),u=0;u<l.length;u++)this._.buttons[l[u].id]=l[u]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(
this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})},getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,g="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%"),g&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},g||(a+=(g=CKEDITOR.document.getWindow().getScrollPosition()).x,b+=g.y),e&&(g=this.getSize(),
a=CKEDITOR.document.getWindow().getViewPaneSize().width-g.width-a),(b={top:(0<b?b:0)+"px"})[e?"right":"left"]=(0<a?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;for(var c in a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),
null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex+10),null===CKEDITOR.dialog._.currentTop?((CKEDITOR.dialog._.currentTop=this)._.parentDialog=null,o(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),a.on("keydown",y),a.on("keyup",B),this._.hasFocus=!1,b.contents)if(b.contents[c]){a=b.contents[c];var e=this._.tabs[a.id],
g=a.requiredContent,f=0;if(e){for(var h in this._.contents[a.id]){var i=this._.contents[a.id][h];"hbox"!=i.type&&"vbox"!=i.type&&i.getInputElement()&&(i.requiredContent&&!this._.editor.activeFilter.check(i.requiredContent)?i.disable():(i.enable(),f++))}!f||g&&!this._.editor.activeFilter.check(g)?e[0].addClass("cke_dialog_tab_disabled"):e[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),function(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();c.on("resize",b),a.on("hide",function(){c.removeListener("resize",b)})}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),
CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<e?e:0)>c.height||b.width+(0<d?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(
var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var a=this._.element;for(a.setStyle("display","none"),
this.parts.dialog.setStyle("visibility","hidden"),G(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else n(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex-10;else{CKEDITOR.dialog._.currentZIndex=null,a.removeListener("keydown",y),a.removeListener("keyup",B);var c=this._.editor;c.focus(),setTimeout(function(){c.focusManager.unlock(),CKEDITOR.env.iOS&&c.window.focus()},0)}
delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()})}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},g=d.getChild(),f=0;d=g.shift();)!d.notAllowed&&"hbox"!=d.type&&"vbox"!=d.type&&f++,"function"==typeof(e[d.id]=d).getChild&&g.push.apply(g,d.getChild());f||(a.hidden=!0),(
b=CKEDITOR.dom.element.createFromHtml(b.join(""))).setAttribute("role","tabpanel"),d=CKEDITOR.env,e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber(),c=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style="display:none"':"",' id="',e,'"',d.gecko&&!d.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join("")),b.setAttribute("aria-labelledby",e),this._.tabs[a.id]=[c,b],this._.tabIdList.push(a.id),!a.hidden&&this._.pageCount++,this._.lastTab=c,this.updateStyle(),b.setAttribute("name",a.id),b.appendTo(this.parts.contents),c.unselectable(),
this.parts.tabs.append(c),a.accessKey&&(A(this,this,"CTRL+"+a.accessKey,J,C),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var d=this._.tabs[b][0],e=this._.tabs[b][1];b!=a&&(d.removeClass("cke_dialog_tab_selected"),e.hide()),e.setAttribute("aria-hidden",b!=a)}var g=this._.tabs[a];g[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(c(g[1]),g[1].show(),setTimeout(function(){c(g[1],1)},0)):g[1].show(),this._.currentTabId=a
,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(b){var c=this._.tabs[b]&&this._.tabs[b][0];c&&1!=this._.pageCount&&c.isVisible()&&(b==this._.currentTabId&&this.selectPage(a.call(this)),c.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&(a.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},
getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if(void 0===b)b=this._.focusList.length,this._.focusList.push(new i(this,a,
b));else{this._.focusList.splice(b,0,new i(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){return!((a=a.config.removeDialogTabs)&&a.match(RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,class:"cke_dialog_ui_button_ok",
onClick:function(a){!1!==(a=a.data.dialog).fire("ok",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(a){!1!==(a=a.data.dialog).fire("cancel",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}})
,CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var q={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},t=function(a,b,c){for(var e,d=0;e=a[d];d++){if(e.id==b)return e;if(c&&e[c]&&(e=t(e[c],b,c)))return e}return null},s=function(a,b,c,d,e){if(c){for(var f,g=0;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(d&&f[d]&&(f=s(f[d],b,c,d,!0)))return f}if(e)return null}return a.push(b),b},u=function(a,b,c){for(var e,d=0;e=a[d];d++){if(
e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=u(e[c],b,c)))return e}return null},v=function(a,b){this.dialog=a;for(var e,c=b.contents,d=0;e=c[d];d++)c[d]=e&&new h(a,e);CKEDITOR.tools.extend(this,b)};v.prototype={getContents:function(a){return t(this.contents,a)},getButton:function(a){return t(this.buttons,a)},addContents:function(a,b){return s(this.contents,a,b)},addButton:function(a,b){return s(this.buttons,a,b)},removeContents:function(a){u(this.contents,a)},removeButton:function(a){u(this.buttons,a)}},h.prototype={get:function(a){return t(this.elements,a,"children")},add:function(a,b){return s(this.elements,a,b,"children")},remove:function(a){u(
this.elements,a,"children")}};var z,r,w={},x={},y=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=x[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&((b=b[b.length-1]).keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},B=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=x[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1]).keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},A=function(a,b,c,d,e){(x[c]||(
x[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},G=function(a){for(var b in x){for(var c=x[b],d=c.length-1;0<=d;d--)(c[d].dialog==a||c[d].uiElement==a)&&c.splice(d,1);0===c.length&&delete x[b]}},C=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},J=function(){};CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,g,f){if(!(arguments.length<4)){var h=(d.call?d(b):d)||"div",i=["<",h," "],j=(e&&e.call?e(b):e)||{},k=(g&&g.call?g(b):g)||{},s=(f&&f.call?f.call(this,a,b):f)||"",m=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(
b.requiredContent)&&(j.display="none",this.notAllowed=!0),k.id=m;var t={};b.type&&(t["cke_dialog_ui_"+b.type]=1),b.className&&(t[b.className]=1),b.disabled&&(t.cke_disabled=1);var q=k.class&&k.class.split?k.class.split(" "):[];for(m=0;m<q.length;m++)q[m]&&(t[q[m]]=1);for(m in q=[],t)q.push(m);for(m in k.class=q.join(" "),b.title&&(k.title=b.title),t=(b.style||"").split(";"),b.align&&(q=b.align,j["margin-left"]="left"==q?0:"auto",j["margin-right"]="right"==q?0:"auto"),j)t.push(m+":"+j[m]);for(b.hidden&&t.push("display:none"),m=t.length-1;0<=m;m--)""===t[m]&&t.splice(m,1);for(m in 0<t.length&&(k.style=(k.style?k.style+"; ":"")+t.join("; ")),k)i.push(
m+'="'+CKEDITOR.tools.htmlEncode(k[m])+'" ');i.push(">",s,"</",h,">"),c.push(i.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}})),"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(b),
this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&A(this,a,"CTRL+"+b.accessKey);var p=this;a.on("load",function(){var b=p.getInputElement();if(b){var c=p.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1,a._.hasFocus=!0,p.fire("focus"),c&&this.addClass(c)}),b.on("blur",function(){p.fire("blur"),c&&this.removeClass(c)})}}),CKEDITOR.tools.extend(this,b),this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=p.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(arguments.length<4)){this._||(
this._={});var i,g=this._.children=b,f=e&&e.widths||null,h=e&&e.height||null,j={role:"presentation"};e&&e.align&&(j.align=e.align),CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},j,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(i=0;i<c.length;i++){var b="cke_dialog_ui_hbox_child",d=[];0===i&&(b="cke_dialog_ui_hbox_first"),i==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),f?f[i]&&d.push("width:"+m(f[i])):d.push("width:"+Math.floor(100/c.length)+"%"),h&&d.push("height:"+m(h)),e&&void 0!==e.padding&&d.push("padding:"+m(e.padding)),
CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[i].align&&d.push("text-align:"+g[i].align),0<d.length&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[i],"</td>")}return a.push("</tr></tbody>"),a.join("")})}},vbox:function(a,b,c,d,e){if(!(arguments.length<3)){this._||(this._={});var g=this._.children=b,f=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+m(f||"100%"),";"),CKEDITOR.env.webkit&&b.push("float:none;"),b.push('"'),b.push('align="',
CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var i=[];b.push('<tr><td role="presentation" '),f&&i.push("width:"+m(f||"100%")),h?i.push("height:"+m(h[d])):e&&e.expand&&i.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!==e.padding&&i.push("padding:"+m(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[d].align&&i.push("text-align:"+g[d].align),0<i.length&&b.push('style="',i.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")})}}},CKEDITOR.ui.dialog.uiElement.prototype={
getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););return a&&(a=a.getAttribute("name"),this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a)),this},focus:function(){return this.selectParentTab().getInputElement(
).focus(),this},registerEvents:function(a){var c,e,b=/^on([A-Z]\w+)/,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(e in a)(c=e.match(b))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){
var a=this.getElement();this.getInputElement().removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){return arguments.length<1?this._.children.concat():(a.splice||(a=[a]),a.length<2?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),
CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var a={build:function(a,b,c){for(var e,d=b.children,g=[],f=[],h=0;h<d.length&&(e=d[h]);h++){var i=[];g.push(i),f.push(CKEDITOR.dialog._.uiElementBuilders[e.type].build(a,e,i))}return new CKEDITOR.ui.dialog[b.type](a,f,g,c,b)}};CKEDITOR.dialog.addUIElement("hbox",a),CKEDITOR.dialog.addUIElement("vbox",a)}(),CKEDITOR.dialogCommand=function(a,b){this.dialogName=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,
d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,g=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var c,g,b=this&&this.getValue?this.getValue():a[0],d=CKEDITOR.VALIDATE_AND,e=[];for(g=0;g<a.length&&"function"==typeof a[g];g++)e.push(a[g]);g<a.length&&"string"==typeof a[g]&&(c=a[g],g++),g<a.length&&"number"==typeof a[g]&&(d=a[g]);var f=d==CKEDITOR.VALIDATE_AND;for(g=0;g<e.length;g++)f=d==CKEDITOR.VALIDATE_AND?f&&e[g](b):f||e[g](b);return!!f||c}},regex:function(a,b){return function(c){
return c=this&&this.getValue?this.getValue():c,!!a.test(c)||b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return g.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},CKEDITOR.on(
"instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in w)w[c].remove();w={}}var d;a=a.editor._.storedDialogs;for(d in a)a[d].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];if(null===CKEDITOR.dialog._.currentTop&&o(this),"function"==typeof d)c=(c=this._.storedDialogs||(this._.storedDialogs={}))[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw n(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.')
;"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed"),this.openDialog(a,b)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),c}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(a){a.on("doubleclick",function(f){f.data.dialog&&a.openDialog(f.data.dialog)},null,null,999)}}),function(){function a(a){function b(){var d,c=a.editable();c.on(x,function(a){(!CKEDITOR.env.ie||!z)&&s(a)}),CKEDITOR.env.ie&&c.on("paste",function(b){w||(g(),b.data.preventDefault(),s(b),o("paste")||a.openDialog("paste"))}),
CKEDITOR.env.ie&&(c.on("contextmenu",f,null,null,0),c.on("beforepaste",function(a){a.data&&!a.data.$.ctrlKey&&!a.data.$.shiftKey&&f()},null,null,0)),c.on("beforecut",function(){!z&&m()}),c.attachListener(CKEDITOR.env.ie?c:a.document.getDocumentElement(),"mouseup",function(){d=setTimeout(function(){u()},0)}),a.on("destroy",function(){clearTimeout(d)}),c.on("keyup",u)}function c(b){return{type:b,canUndo:"cut"==b,startDisabled:!0,exec:function(){var b;"cut"==this.type&&m();var c=this.type;if(CKEDITOR.env.ie)b=o(c);else try{b=a.document.$.execCommand(c,!1,null)}catch(d){b=!1}return b||alert(a.lang.clipboard[this.type+"Error"]),b}}}function g(){w=1,setTimeout(
function(){w=0},100)}function f(){z=1,setTimeout(function(){z=0},10)}function o(b){var c=a.document,d=c.getBody(),e=!1,g=function(){e=!0};return d.on(b,g),(7<CKEDITOR.env.version?c.$:c.$.selection.createRange()).execCommand(b),d.removeListener(b,g),e}function n(b,c,d){return b={type:b},!(d&&!1===a.fire("beforePaste",b)||!c)&&(b.dataValue=c,a.fire("paste",b))}function m(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var c,d,e,b=a.getSelection();b.getType()==CKEDITOR.SELECTION_ELEMENT&&(c=b.getSelectedElement())&&(d=b.getRanges()[0],(e=a.document.createText("")).insertBefore(c),d.setStartBefore(e),d.setEndAfter(c),b.selectRanges([d]),setTimeout(function(){
c.getParent()&&(e.remove(),b.selectElement(c))},0))}}function q(){if(CKEDITOR.env.ie){a.focus(),g();var b=a.focusManager;if(b.lock(),a.editable().fire(x)&&!o("paste"))return b.unlock(),!1;b.unlock()}else try{if(a.editable().fire(x)&&!a.document.$.execCommand("Paste",!1,null))throw 0}catch(c){return!1}return!0}function t(b){if("wysiwyg"==a.mode)switch(b.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:b=a.editable(),g(),!CKEDITOR.env.ie&&b.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:a.fire("saveSnapshot"),setTimeout(function(){a.fire("saveSnapshot")},50)}}function s(b){var c={type:"auto"},d=a.fire("beforePaste",c)
;!function(b,c){var f,d=a.document,e=a.editable(),g=function(a){a.cancel()};if(!d.getById("cke_pastebin")){var h=a.getSelection(),j=h.createBookmarks();CKEDITOR.env.ie&&h.root.fire("selectionchange");var k=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie?"div":"body",d);k.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var m=0;d=d.getWindow(),CKEDITOR.env.webkit?(e.append(k),k.addClass("cke_editable"),e.is("body")||(m=(m="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent)).getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(k),k.setStyles({position:"absolute",
top:d.getScrollPosition().y-m+10+"px",width:"1px",height:Math.max(1,d.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&k.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(m=k.getParent().isReadOnly())?(k.setOpacity(0),k.setAttribute("contenteditable",!0)):k.setStyle("ltr"==a.config.contentsLangDirection?"left":"right","-1000px"),a.on("selectionChange",g,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(f=e.once("blur",g,null,null,-100)),m&&k.focus(),(m=new CKEDITOR.dom.range(k)).selectNodeContents(k);var s=m.select();CKEDITOR.env.ie&&(f=e.once("blur",function(){a.lockSelection(s)}))
;var t=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){var b;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=t),f&&f.removeListener(),CKEDITOR.env.ie&&e.focus(),h.selectBookmarks(j),k.remove(),CKEDITOR.env.webkit&&(b=k.getFirst())&&b.is&&b.hasClass("Apple-style-span")&&(k=b),a.removeListener("selectionChange",g),c(k.getHtml())},0)}}(0,function(a){a=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),d&&n(c.type,a,0)})}function u(){if("wysiwyg"==a.mode){var b=v("paste");a.getCommand("cut").setState(v("cut")),a.getCommand("copy").setState(v("copy")),a.getCommand("paste").setState(b),a.fire("pasteState",b)}}
function v(b){if(r&&b in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==b)return CKEDITOR.TRISTATE_OFF;var c=(b=a.getSelection()).getRanges();return b.getType()==CKEDITOR.SELECTION_NONE||1==c.length&&c[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var z=0,w=0,r=0,x=CKEDITOR.env.ie?"beforepaste":"paste";a.on("key",t),a.on("contentDom",b),a.on("selectionChange",function(a){r=a.data.selection.getRanges()[0].checkReadOnly(),u()}),a.contextMenu&&a.contextMenu.addListener(function(a,b){return r=b.getRanges()[0].checkReadOnly(),{cut:v("cut"),copy:v("copy"),paste:v("paste")}}),function(){function b(c,d,e,g,f){var h=a.lang.clipboard[d]
;a.addCommand(d,e),a.ui.addButton&&a.ui.addButton(c,{label:h,command:d,toolbar:"clipboard,"+g}),a.addMenuItems&&a.addMenuItem(d,{label:h,command:d,group:"clipboard",order:f})}b("Cut","cut",c("cut"),10,1),b("Copy","copy",c("copy"),20,4),b("Paste","paste",{canUndo:!1,async:!0,exec:function(a,b){var c=function(b,c){b&&n(b.type,b.dataValue,!!c),a.fire("afterCommandExec",{name:"paste",command:d,returnValue:!!b})},d=this;"string"==typeof b?c({type:"auto",dataValue:b},1):a.getClipboardData(c)}},30,8)}(),a.getClipboardData=function(b,c){function d(a){a.removeListener(),a.cancel(),c(a.data)}function e(a){a.removeListener(),a.cancel(),j=!0,c({type:h,dataValue:a.data})
}var f=!1,h="auto",j=!1;c||(c=b,b=null),a.on("paste",d,null,null,0),a.on("beforePaste",function(a){a.removeListener(),f=!0,h=a.data.type},null,null,1e3),!1===q()&&(a.removeListener("paste",d),f&&a.fire("pasteDialog",function(){this.customTitle=b&&b.title})?(a.on("pasteDialogCommit",e),a.on("dialogHide",function(a){a.removeListener(),a.data.removeListener("pasteDialogCommit",e),setTimeout(function(){j||c(null)},10)})):c(null))}}function c(a,b){function c(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(a%2==1?"<br>":"")}return(b=(b=b.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,function(a){
return a.toLowerCase()})).match(/^[^<]$/)?b:(CKEDITOR.env.webkit&&-1<b.indexOf("<div>")&&((b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(b="<p>"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("</div><div>").length+1)})+"</p>"),b=(b=b.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"<br>")),-1<b.indexOf("<br><br>")&&(b="<p>"+b.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"</p>")),g(a,b))}function b(a,b,c){
b=new CKEDITOR.htmlParser.fragment.fromHtml(b);var e=new CKEDITOR.htmlParser.basicWriter;b.writeHtml(e,c);b=(b=e.getHtml()).replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,"");var f=0;return g(a,b=b.replace(/<\/?p>/g,function(a){if("<p>"==a){if(1<++f)return"</p><p>"}else if(0<--f)return"</p><p>";return a}).replace(/<p><\/p>/g,""))}function g(a,b){return a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("<br>",a.length/7*2)}
).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"<$1div>")),b}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(g){var d;a(g),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),g.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;if(-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<b.indexOf('<br class="Apple-interchange-newline">')&&(a.data.startsWithEOL=1,
a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),b.match(/^<[^<]+cke_(editable|contents)/i)){var d,e,g=new CKEDITOR.dom.element("div");for(g.setHtml(b);1==g.getChildCount()&&(d=g.getFirst())&&d.type==CKEDITOR.NODE_ELEMENT&&(d.hasClass("cke_editable")||d.hasClass("cke_contents"));)g=e=d;e&&(b=e.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,d){return d.toLowerCase()in c?(a.data.preSniffing="html","<"+d):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,d){return d in c?(a.data.endsWithEOL=1,
"</"+d+">"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1")),a.data.dataValue=b},null,null,3),g.on("paste",function(a){var l,j=(a=a.data).type,k=a.dataValue,o=g.config.clipboard_defaultContentType||"html";"htmlifiedtext"==(l="html"==j||"html"==a.preSniffing?"html":function(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(k))?k=c(
g.config,k):"text"==j&&"html"==l&&(k=b(g.config,k,d||(d=function(){var a=new CKEDITOR.htmlParser.filter,b={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},c=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),e={p:1,br:1,"cke:br":1},g=CKEDITOR.dtd,f=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),o=function(a){delete a.name,a.add(new CKEDITOR.htmlParser.text(" "))},n=function(a){for(var c,b=a;(b=b.next)&&b.name&&b.name.match(/^h\d$/);)for((c=new CKEDITOR.htmlParser.element("cke:br")).isEmpty=!0,a.add(c);c=b.children.shift();)a.add(c)}
;return a.addRules({elements:{h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,img:function(a){var b=" ";return(a=CKEDITOR.tools.trim(a.attributes.alt||""))&&!a.match(/(^http|\.(jpe?g|gif|png))/i)&&(b=" ["+a+"] "),new CKEDITOR.htmlParser.text(b)},td:o,th:o,$:function(a){var q,i=a.name;if(f[i])return!1;if(a.attributes={},"br"==i)return a;if(b[i])a.name="p";else if(c[i])delete a.name;else if(g[i]){if((q=new CKEDITOR.htmlParser.element("cke:br")).isEmpty=!0,CKEDITOR.dtd.$empty[i])return q;a.add(q,0),(q=q.clone()).isEmpty=!0,a.add(q),delete a.name}return e[a.name]||delete a.name,a}}},{applyToAll:!0}),a}()))),a.startsWithEOL&&(k='<br data-cke-eol="1">'+k),a.endsWithEOL&&(
k+='<br data-cke-eol="1">'),"auto"==j&&(j="html"==l||"html"==o?"html":"text"),a.type=j,a.dataValue=k,delete a.preSniffing,delete a.startsWithEOL,delete a.endsWithEOL},null,null,6),g.on("paste",function(a){a=a.data,g.insertHtml(a.dataValue,a.type),setTimeout(function(){g.fire("afterPaste")},0)},null,null,1e3),g.on("pasteDialog",function(a){setTimeout(function(){g.openDialog("paste",a.data)},0)})}})}(),function(){var a='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\""
)+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');a=(a=a+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'
)+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>';var f=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),c=CKEDITOR.addTemplate("button",a);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},
CKEDITOR.ui.button.prototype={render:function(a,b){function g(){var b=a.mode;b&&(b=this.modes[b]?void 0!==p[b]?p[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh())}var k,i=CKEDITOR.env,d=this._.id=CKEDITOR.tools.getNextId(),h="",j=this.command;this._.editor=a;var l={id:d,button:this,editor:a,focus:function(){CKEDITOR.document.getById(d).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},o=CKEDITOR.tools.addFunction(function(a){if(l.onkey)return a=new CKEDITOR.dom.event(a),!1!==l.onkey(l,a.getKeystroke())}),
n=CKEDITOR.tools.addFunction(function(a){var b;return l.onfocus&&(b=!1!==l.onfocus(l,new CKEDITOR.dom.event(a))),b}),m=0;if(l.clickFn=k=CKEDITOR.tools.addFunction(function(){m&&(a.unlockSelection(1),m=0),l.execute(),i.iOS&&a.focus()}),this.modes){var p={};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(p[a.mode]=this._.state)},this),a.on("activeFilterChange",g,this),a.on("mode",g,this),!this.readOnly&&a.on("readOnly",g,this)}else j&&(j=a.getCommand(j))&&(j.on("state",function(){this.setState(j.state)},this),h+=j.state==CKEDITOR.TRISTATE_ON?"on":j.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&a.on(
"contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst();(b=b.data)!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl"),d.setAttribute("style",CKEDITOR.skin.getIconStyle(t,"rtl"==b,this.icon,this.iconOffset))},this),j||(h+="off");var q=this.name||this.command,t=q;return this.icon&&!/\./.test(this.icon)&&(t=this.icon,this.icon=null),h={id:d,name:q,iconName:t,label:this.label,cls:this.className||"",state:h,ariaDisabled:"disabled"==h?"true":"false",title:this.title,titleJs:i.gecko&&!i.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:o,focusFn:n,clickFn:k,
style:CKEDITOR.skin.getIconStyle(t,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?f.output():""},c.output(h,b),this.onRender&&this.onRender(),l},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return!!b&&(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute(
"aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(b=a.getCommand(this.command)||b),this._.feature=b}},CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}}(),CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function a(a){var c=this._;c.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(a),c.on?c.panel.hide():c.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(f
){var c=f.panel||{};delete f.panel,this.base(f),this.document=c.parent&&c.parent.getDocument()||CKEDITOR.document,c.block={attributes:c.attributes},this.hasArrow=c.toolbarRelated=!0,this.click=a,this._={panelDefinition:c}},statics:{handler:{create:function(a){return new CKEDITOR.ui.panelButton(a)}}},proto:{createPanel:function(a){var c=this._;if(!c.panel){var e=this._.panelDefinition,b=this._.panelDefinition.block,g=e.parent||CKEDITOR.document.getBody(),i=this._.panel=new CKEDITOR.ui.floatPanel(a,g,e),d=(e=i.addBlock(c.id,b),this);i.onShow=function(){d.className&&this.element.addClass(d.className+"_panel"),d.setState(CKEDITOR.TRISTATE_ON),c.on=1,
d.editorFocus&&a.focus(),d.onOpen&&d.onOpen()},i.onHide=function(b){d.className&&this.element.getFirst().removeClass(d.className+"_panel"),d.setState(d.modes&&d.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),c.on=0,!b&&d.onClose&&d.onClose()},i.onEscape=function(){i.hide(1),d.document.getById(c.id).focus()},this.onBlock&&this.onBlock(i,e),e.onHide=function(){c.on=0,d.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,
CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var a=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),f=CKEDITOR.addTemplate("panel-frame",
'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),c=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(e,b){this.getHolderElement=function(){if(!(a=this._.holder)){if(this.isFramed){var b=(a=this.document.getById(this.id+"_frame")).getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),b=CKEDITOR.tools.addFunction(
CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),a.write(c.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+b+");"},g))),a.getWindow().$.CKEDITOR=CKEDITOR,a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault()},this),(a=a.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id)
;this._.holder=a}return a};var g={editorId:e.id,id:this.id,langCode:e.langCode,dir:e.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":e.config.baseFloatZIndex+1};if(this.isFramed){var i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";g.frame=f.output({id:this.id+"_frame",src:i})}return i=a.output(g),b&&b.push(i),i},addBlock:function(a,b){return b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b),this._.currentBlock||this.showBlock(a),b},
getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,c=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return b&&b.hide(),this._.currentBlock=a,CKEDITOR.fire("ariaWidget",c),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),b&&CKEDITOR.tools.extend(this,b),
this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||!0!==this.onHide.call(this))&&this.element.setStyle("display","none")},onKeyDown:function(a,b){switch(c=this.keys[a]){case"next":for(
var d,f=this._.focusIndex,c=this.element.getElementsByTag("a");d=c.getItem(++f);)if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){this._.focusIndex=f,d.focus();break}return!d&&!b&&(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":for(f=this._.focusIndex,c=this.element.getElementsByTag("a");0<f&&(d=c.getItem(--f));){if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){this._.focusIndex=f,d.focus();break}d=null}return!d&&!b&&(this._.focusIndex=c.count(),this.onKeyDown(a,1));case"click":case"mouseup":return(d=0<=(f=this._.focusIndex)&&this.element.getElementsByTag("a").getItem(f))&&(d.$[c]?d.$[c]():d.$["on"+c]()),!1}return!0}}})}(),CKEDITOR.plugins.add(
"floatpanel",{requires:"panel"}),function(){function a(a,e,b,g,i){i=CKEDITOR.tools.genKey(e.getUniqueId(),b.getUniqueId(),a.lang.dir,a.uiColor||"",g.css||"",i||"");var d=f[i];return d||((d=f[i]=new CKEDITOR.ui.panel(e,g)).element=b.append(CKEDITOR.dom.element.createFromHtml(d.render(a),e)),d.element.setStyles({display:"none",position:"absolute"})),d}var f={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(c,e,b,g){function f(){k.hide()}b.forceIFrame=1,b.toolbarRelated&&c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e=CKEDITOR.document.getById("cke_"+c.name));var d=e.getDocument(),h=(g=a(c,d,e,b,g||0)).element,j=h.getFirst(),k=this
;h.disableContextMenu(),this.element=h,this._={editor:c,panel:g,parentElement:e,definition:b,document:d,iframe:j,children:[],dir:c.lang.dir},c.on("mode",f),c.on("resize",f),CKEDITOR.env.iOS||d.getWindow().on("resize",f)},proto:{addBlock:function(a,e){return this._.panel.addBlock(a,e)},addListBlock:function(a,e){return this._.panel.addListBlock(a,e)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,e,b,g,f,d){var h=this._.panel,j=h.showBlock(a);this.allowBlur(!1),a=this._.editor.editable(),this._.returnFocus=a.hasFocus?a:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var k=this.element,l=(
a=this._.iframe,a=CKEDITOR.env.ie?a:new CKEDITOR.dom.window(a.$.contentWindow),k.getDocument()),o=this._.parentElement.getPositionedAncestor(),n=e.getDocumentPosition(l),m=(l=o?o.getDocumentPosition(l):{x:0,y:0},"rtl"==this._.dir),p=n.x+(g||0)-l.x,q=n.y+(f||0)-l.y;!m||1!=b&&4!=b?m||2!=b&&3!=b||(p+=e.$.offsetWidth-1):p+=e.$.offsetWidth,3!=b&&4!=b||(q+=e.$.offsetHeight-1),this._.panel._.offsetParentId=e.getId(),k.setStyles({top:q+"px",left:0,display:""}),k.setOpacity(0),k.getFirst().removeStyle("width"),this._.editor.focusManager.add(a),this._.blurSet||(CKEDITOR.event.useCapture=!0,a.on("blur",function(a){function b(){delete this._.returnFocus,this.hide()}
this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(b,0,this)):b.call(this))},this),a.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(a.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),a.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),h.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&!1===this.onEscape(a))return!1},this),CKEDITOR.tools.setTimeout(function(){
var a=CKEDITOR.tools.bind(function(){if(k.removeStyle("width"),j.autoSize){var a=j.element.getDocument();a=(CKEDITOR.env.webkit?j.element:a.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<a&&(a+=(k.$.offsetWidth||0)-(k.$.clientWidth||0)+3),k.setStyle("width",a+10+"px"),a=j.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<a&&(a+=(k.$.offsetHeight||0)-(k.$.clientHeight||0)+3),k.setStyle("height",a+"px"),h._.currentBlock.element.setStyle("display","none").removeStyle("display")}else k.removeStyle("height");m&&(p-=k.$.offsetWidth),k.setStyle("left",p+"px");var i,b=h.element.getWindow(),c=(a=k.$.getBoundingClientRect(),
b=b.getViewPaneSize(),a.width||a.right-a.left),e=a.height||a.bottom-a.top,g=m?a.right:b.width-a.left,f=m?b.width-a.right:a.left;m?g<c&&(p=c<f?p+c:b.width>c?p-a.left:p-a.right+b.width):g<c&&(p=c<f?p-c:b.width>c?p-a.right+b.width:p-a.left),c=a.top,b.height-a.top<e&&(q=e<c?q-e:b.height>e?q-a.bottom+b.height:q-a.top),CKEDITOR.env.ie&&("html"==(b=a=new CKEDITOR.dom.element(k.$.offsetParent)).getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(p=CKEDITOR.env.ie8Compat?p-2*k.getDocument().getDocumentElement().$.scrollLeft:p-(a.$.scrollWidth-a.$.clientWidth))),(i=(a=k.getFirst()).getCustomData("activePanel"))&&i.onHide&&i.onHide.call(
this,1),a.setCustomData("activePanel",this),k.setStyles({top:q+"px",left:p+"px"}),k.setOpacity(1),d&&d()},this);h.isLoaded?a():h.onLoad=a,CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),j.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument(
).getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(a=a&&this._.returnFocus)&&(CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus()),delete this._.lastFocused,this._.editor.fire("panelHide",this))},allowBlur:function(a){var e=this._.panel;return void 0!==a&&(e.allowBlur=a),e.allowBlur},
showAsChild:function(a,e,b,g,f,d){this._.activeChild==a&&a._.panel._.offsetParentId==b.getId()||(this.hideChild(),a.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(e,b,g,f,d),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(a){var e=this._.activeChild;e&&(delete e.onHide,delete this._.activeChild,e.hide(),a&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var e,a=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in f){
var b=f[e];a?b.destroy():b.element.hide()}a&&(f={})})}(),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(a){function f(e,d,f,j){var k=new CKEDITOR.style(b["colorButton_"+d+"Style"]),l=CKEDITOR.tools.getNextId()+"_colorBox";a.ui.add(e,CKEDITOR.UI_PANELBUTTON,{label:f,title:f,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+j,allowedContent:k,requiredContent:k,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":g.panelTitle}},onBlock:function(b,e){e.autoSize=!0,e.element.addClass("cke_colorblock"),e.element.setHtml(c(b,d,l)),e.element.getDocument().getBody().setStyle("overflow","hidden"),
CKEDITOR.ui.fire("ready",this);var g=e.keys,f="rtl"==a.lang.dir;g[f?37:39]="next",g[40]="next",g[9]="next",g[f?39:37]="prev",g[38]="prev",g[CKEDITOR.SHIFT+9]="prev",g[32]="click"},refresh:function(){a.activeFilter.check(k)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var c,b=(b=a.getSelection())&&b.getStartElement();if(b=a.elementPath(b)){for(b=b.block||b.blockLimit||a.document.getBody();c=b&&b.getComputedStyle("back"==d?"background-color":"color")||"transparent","back"==d&&"transparent"==c&&b&&(b=b.getParent()););return c&&"transparent"!=c||(c="#ffffff"),this._.panel._.iframe.getFrameDocument().getById(l).setStyle("background-color",c),c}}}
)}function c(c,d,f){var j=[],k=b.colorButton_colors.split(","),l=a.plugins.colordialog&&!1!==b.colorButton_enableMore,o=k.length+(l?2:1),n=CKEDITOR.tools.addFunction(function(d,g){function f(a){this.removeListener("ok",f),this.removeListener("cancel",f),"ok"==a.name&&h(this.getContentElement("picker","selectedColor").getValue(),g)}var h=arguments.callee;if("?"==d)a.openDialog("colordialog",function(){this.on("ok",f),this.on("cancel",f)});else{if(a.focus(),c.hide(),a.fire("saveSnapshot"),a.removeStyle(new CKEDITOR.style(b["colorButton_"+g+"Style"],{color:"inherit"})),d){var j=b["colorButton_"+g+"Style"];j.childRule="back"==g?function(a){return e(a)}:function(
a){return!(a.is("a")||a.getElementsByTag("a").count())||e(a)},a.applyStyle(new CKEDITOR.style(j,{color:d}))}a.fire("saveSnapshot")}});for(j.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',g.auto,'" onclick="CKEDITOR.tools.callFunction(',n,",null,'",d,"');return false;\" href=\"javascript:void('",g.auto,'\')" role="option" aria-posinset="1" aria-setsize="',o,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',f,'"></span></td><td colspan=7 align=center>',g.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">'),f=0;f<k.length;f++){
f%8==0&&j.push("</tr><tr>");var m=k[f].split("/"),p=m[0],q=m[1]||p;m[1]||(p="#"+p.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3")),m=a.lang.colorbutton.colors[q]||q,j.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',m,'" onclick="CKEDITOR.tools.callFunction(',n,",'",p,"','",d,"'); return false;\" href=\"javascript:void('",m,'\')" role="option" aria-posinset="',f+2,'" aria-setsize="',o,'"><span class="cke_colorbox" style="background-color:#',q,'"></span></a></td>')}return l&&j.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',g.more,'" onclick="CKEDITOR.tools.callFunction(',n,",'?','",d,
"');return false;\" href=\"javascript:void('",g.more,"')\"",' role="option" aria-posinset="',o,'" aria-setsize="',o,'">',g.more,"</a></td>"),j.push("</tr></table>"),j.join("")}function e(a){return"false"==a.getAttribute("contentEditable")||a.getAttribute("data-nostyle")}var b=a.config,g=a.lang.colorbutton;CKEDITOR.env.hc||(f("TextColor","fore",g.textColorTitle,10),f("BGColor","back",g.bgColorTitle,20))}}),
CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.plugins.colordialog={requires:"dialog",init:function(a){var f=new CKEDITOR.dialogCommand("colordialog");f.editorFocus=!1,
a.addCommand("colordialog",f),CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js"),a.getColorFromDialog=function(c,e){var b=function(a){this.removeListener("ok",b),this.removeListener("cancel",b),a="ok"==a.name?this.getValueOf("picker","selectedColor"):null,c.call(e,a)},g=function(a){a.on("ok",b),a.on("cancel",b)};a.execCommand("colordialog"),a._.storedDialogs&&a._.storedDialogs.colordialog?g(a._.storedDialogs.colordialog):CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var b=a.data.definition;a.removeListener(),b.onLoad=CKEDITOR.tools.override(b.onLoad,function(a){return function(){g(this),"function"==typeof(
b.onLoad=a)&&a.call(this)}})}})}}},CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(a){for(var f=a.config.menu_groups.split(","),c=a._.menuGroups={},e=a._.menuItems={},b=0;b<f.length;b++)c[f[b]]=b+1;a.addMenuGroup=function(a,b){c[a]=b||100},a.addMenuItem=function(a,b){c[b.group]&&(e[a]=new CKEDITOR.menuItem(this,a,b))},a.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},a.getMenuItem=function(a){return e[a]},a.removeMenuItem=function(a){delete e[a]}}}),function(){
var f='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(f+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(f+=' onblur="this.style.cssText = this.style.cssText;"');f=f+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick"
)+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var c=CKEDITOR.addTemplate("menuItem",f+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),e=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,c){c=this._.definition=c||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=c.level||1;var e=CKEDITOR.tools.extend(
{},c.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),d=e.block.attributes=e.attributes||{};!d.role&&(d.role="menu"),this._.panelDefinition=e},_:{onShow:function(){var a=this.editor.getSelection(),c=a&&a.getStartElement(),e=this.editor.elementPath(),d=this._.listeners;this.removeAll();for(var f=0;f<d.length;f++){var j=d[f](c,a,e);if(j)for(var k in j){var l=this.editor.getMenuItem(k);!l||l.command&&!this.editor.getCommand(l.command).state||(l.state=j[k],this.add(l))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var c=this.parent
;return c?c._.panel.hideChild(1):27==a&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var c=this._.subMenu,e=this.items[a];if(e=e.getItems&&e.getItems()){for(var d in c?c.removeAll():((c=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,c._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),e){var f=this.editor.getMenuItem(d);f&&(f.state=e[d],c.add(f))}var j=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+""+a);setTimeout(function(){c.show(j,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(
a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,c,e,d){if(this.parent||(this._.onShow(),this.items.length)){c=c||("rtl"==this.editor.lang.dir?2:1);var f=this.items,j=this.editor,k=this._.panel,l=this._.element;if(!k)(k=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this),k.onShow=function(){k._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")},k.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),(l=k.addBlock(this.id,
this._.panelDefinition.block)).autoSize=!0,(o=l.keys)[40]="next",o[9]="next",o[38]="prev",o[CKEDITOR.SHIFT+9]="prev",o["rtl"==j.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",o[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(o[13]="mouseup"),(o=(l=this._.element=l.element).getDocument()).getBody().setStyle("overflow","hidden"),o.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,j.config.menu_subMenuDelay||400,this,[a])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(
function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];b.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):b.getItems?this._.showSubMenu(a):this._.onClick(b)},this);!function(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}(f);for(var o=['<div class="cke_menu'+((o=j.elementPath())&&o.direction()!=j.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],n=f.length,m=n&&f[0].group,p=0;p<n;p++){var q=f[p];m!=q.group&&(o.push('<div class="cke_menuseparator" role="separator"></div>'),m=q.group),q.render(this,p,o)}o.push(
"</div>"),l.setHtml(o.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(k,this.id,b,c,e,d):k.showBlock(this.id,b,c,e,d),j.fire("menuShow",[k])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,c,e){CKEDITOR.tools.extend(this,e,{order:0,className:"cke_menubutton__"+c}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=c},proto:{render:function(a,g,f){var d=a.id+""+g,h=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,j="",
k=h==CKEDITOR.TRISTATE_ON?"on":h==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(j=' aria-checked="'+(h==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var l=this.getItems,o="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",n=this.name;this.icon&&!/\./.test(this.icon)&&(n=this.icon),a={id:d,name:this.name,iconName:n,label:this.label,cls:this.className||"",state:k,hasPopup:l?"true":"false",disabled:h==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:g,
iconStyle:CKEDITOR.skin.getIconStyle(n,"rtl"==this.editor.lang.dir,n==this.icon?null:this.icon,this.iconOffset),arrowHtml:l?e.output({label:o}):"",role:this.role?this.role:"menuitem",ariaChecked:j},c.output(a,f)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{
"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,f){if(a.on("contextmenu",function(a){a=a.data;var e=CKEDITOR.env.webkit?c:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!f||!e){if(a.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit){e=this.editor;(i=new CKEDITOR.dom.elementPath(a.getTarget(),e.editable()).contains(function(a){return a.hasAttribute("contenteditable")},!0))&&"false"==i.getAttribute("contenteditable")&&e.getSelection().fake(i)}var i=a.getTarget().getDocument(),d=a.getTarget().getDocument().getDocumentElement(),h=(e=!i.equals(CKEDITOR.document),i=i.getWindow().getScrollPosition(),
e?a.$.clientX:a.$.pageX||i.x+a.$.clientX),j=e?a.$.clientY:a.$.pageY||i.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(d,null,h,j)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var c,e=function(){c=0};a.on("keydown",function(a){c=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey}),a.on("keyup",e),a.on("contextmenu",e)}},open:function(a,f,c,e){this.editor.focus(),a=a||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(a,f,c,e)}}})},beforeInit:function(a){var f=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){f.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)}),
a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}}),a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(a){return!(20<a.length)&&(!(a=a.replace(/[\n|\t]*/g,"").toLowerCase())||"<br>"==a||"<p>&nbsp;<br></p>"==a||"<p><br></p>"==a||"<p>&nbsp;</p>"==a||"&nbsp;"==a||" "==a||"&nbsp;<br>"==a||" <br>"==a)}function f(c){var e=c.editor,d=e.editable?e.editable():"wysiwyg"==e.mode?e.document&&e.document.getBody():e.textarea,f=c.listenerData;if(d){if("wysiwyg"==e.mode){if(CKEDITOR.dialog._.currentTop||!d)return;a(d.getHtml())&&(d.setHtml(f),d.addClass(
"placeholder"))}"source"==e.mode&&(b?"mode"==c.name&&d.setAttribute("placeholder",f):a(d.getValue())&&(d.setValue(f),d.addClass("placeholder")))}}function c(a){var b=(a=a.editor).editable?a.editable():"wysiwyg"==a.mode?a.document&&a.document.getBody():a.textarea;if(b){if("wysiwyg"==a.mode){if(!b.hasClass("placeholder"))return;if(b.removeClass("placeholder"),CKEDITOR.dtd[b.getName()].p){b.setHtml("<p><br/></p>");var c=new CKEDITOR.dom.range(a.document);c.moveToElementEditablePosition(b.getFirst(),!0),a.getSelection().selectRanges([c])}else b.setHtml(" ")}"source"==a.mode&&b.hasClass("placeholder")&&(b.removeClass("placeholder"),b.setValue(""))}}
var b="placeholder"in document.createElement("textarea");CKEDITOR.plugins.add("confighelper",{getPlaceholderCss:function(){return".placeholder{ color: #999; }"},onLoad:function(){CKEDITOR.addCss&&CKEDITOR.addCss(this.getPlaceholderCss())},init:function(g){g.on("mode",function(a){a.editor.focusManager.hasFocus=!1});var i=g.element.getAttribute("placeholder")||g.config.placeholder;if(i){g.addCss&&g.addCss(this.getPlaceholderCss());var d=CKEDITOR.document.getHead().append("style");d.setAttribute("type","text/css"),
CKEDITOR.env.ie&&CKEDITOR.env.version<11?d.$.styleSheet.cssText="textarea.placeholder { color: #999; font-style: italic; }":d.$.innerHTML="textarea.placeholder { color: #999; font-style: italic; }",g.on("getData",function(a){var b=g.editable?g.editable():"wysiwyg"==g.mode?g.document&&g.document.getBody():g.textarea;b&&b.hasClass("placeholder")&&(a.data.dataValue="")}),g.on("setData",function(c){if(!(CKEDITOR.dialog._.currentTop||"source"==g.mode&&b)){var d=g.editable?g.editable():"wysiwyg"==g.mode?g.document&&g.document.getBody():g.textarea;d&&(a(c.data.dataValue)?f(c):d.hasClass("placeholder")&&d.removeClass("placeholder"))}}),g.on("blur",f,null,i),g.on(
"mode",f,null,i),g.on("focus",c),g.on("beforeModeUnload",c)}(i=g.config.contentsLanguage||function e(a){return a?a.getAttribute("lang")||e(a.getParent()):null}(g.element))&&!g.config.scayt_sLang&&(g.config.scayt_sLang={en:"en_US","en-us":"en_US","en-gb":"en_GB","pt-br":"pt_BR",da:"da_DK","da-dk":"da_DK","nl-nl":"nl_NL","en-ca":"en_CA","fi-fi":"fi_FI",fr:"fr_FR","fr-fr":"fr_FR","fr-ca":"fr_CA",de:"de_DE","de-de":"de_DE","el-gr":"el_GR",it:"it_IT","it-it":"it_IT","nb-no":"nb_NO",pt:"pt_PT","pt-pt":"pt_PT",es:"es_ES","es-es":"es_ES","sv-se":"sv_SE"}[i.toLowerCase()]);var h=function(a){if("object"==typeof a)return a;a=a.split(";");var c,b={};for(
c=0;c<a.length;c++){if(3==(d=a[c].split(":")).length){var e=d[0],f=d[1],d=d[2];b[e]||(b[e]={}),b[e][f]||(b[e][f]=[]),b[e][f].push(d)}}return b};CKEDITOR.on("dialogDefinition",function(a){if(g==a.editor){var c,d,e,f,i,b=a.data.name;a=a.data.definition;if("removeDialogFields"in g._||!g.config.removeDialogFields||(g._.removeDialogFields=h(g.config.removeDialogFields)),g._.removeDialogFields&&(c=g._.removeDialogFields[b]))for(e in c)for(f=c[e],i=a.getContents(e),d=0;d<f.length;d++)i.remove(f[d]);if("hideDialogFields"in g._||!g.config.hideDialogFields||(g._.hideDialogFields=h(g.config.hideDialogFields)),g._.hideDialogFields&&(c=g._.hideDialogFields[b]))for(e in c
)for(f=c[e],i=a.getContents(e),d=0;d<f.length;d++)i.get(f[d]).hidden=!0;if(g.config.dialogFieldsDefaultValues&&(c=g.config.dialogFieldsDefaultValues[b]))for(e in c)for(var q in f=c[e],i=a.getContents(e),f)(b=i.get(q))&&(b.default=f[q])}})}})}(),function(){function a(a){var b=this.att;void 0!==(a=a&&a.hasAttribute(b)&&a.getAttribute(b)||"")&&this.setValue(a)}function f(){for(var a,b=0;b<arguments.length;b++)if(arguments[b]instanceof CKEDITOR.dom.element){a=arguments[b];break}if(a){b=this.att;var c=this.getValue();c?a.setAttribute(b,c):a.removeAttribute(b,c)}}var c={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",
allowedContent:function(a){a||(a=c);var b=[];a.id&&b.push("id"),a.dir&&b.push("dir");var f="";return b.length&&(f=f+"["+b.join(",")+"]"),a.classes&&(f+="(*)"),a.styles&&(f+="{*}"),f},createAdvancedTab:function(e,b,g){b||(b=c);var i=e.lang.common,d={id:"advanced",label:i.advancedTab,title:i.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},h=[];return(b.id||b.dir)&&(b.id&&h.push({id:"advId",att:"id",type:"text",requiredContent:g?g+"[id]":null,label:i.id,setup:a,commit:f}),b.dir&&h.push({id:"advLangDir",att:"dir",type:"select",requiredContent:g?g+"[dir]":null,label:i.langDir,default:"",style:"width:100%",items:[[i.notSet,""],[i.langDirLTR,"ltr"],[
i.langDirRTL,"rtl"]],setup:a,commit:f}),d.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(h)})),(b.styles||b.classes)&&(h=[],b.styles&&h.push({id:"advStyles",att:"style",type:"text",requiredContent:g?g+"{cke-xyz}":null,label:i.styles,default:"",validate:CKEDITOR.dialog.validate.inlineStyle(i.invalidInlineStyle),onChange:function(){},getStyle:function(a,b){var c=this.getValue().match(RegExp("(?:^|;)\\s*"+a+"\\s*:\\s*([^;]*)","i"));return c?c[1]:b},updateStyle:function(a,b){var c=this.getValue(),d=e.document.createElement("span");d.setAttribute("style",c),d.setStyle(a,b),c=CKEDITOR.tools.normalizeCssText(d.getAttribute("style")),
this.setValue(c,1)},setup:a,commit:f}),b.classes&&h.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:g?g+"(cke-xyz)":null,label:i.cssClasses,default:"",setup:a,commit:f}]}),d.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(h)})),d}})}(),function(){function a(a,c){var e={},b=[],g={nbsp:"",shy:"",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,d){var f=c?"&"+d+";":g[d];return e[f]=c?g[d]:"&"+d+";",b.push(f),""});if(!c&&a){a=a.split(",");var d,i=document.createElement("div");for(i.innerHTML="&"+a.join(";&")+";",
d=i.innerHTML,i=null,i=0;i<d.length;i++){var h=d.charAt(i);e[h]="&"+a[i]+";",b.push(h)}}return e.regex=b.join(c?"|":""),e}CKEDITOR.plugins.add("entities",{afterInit:function(f){function c(a){return h[a]}function e(a){return"force"!=b.entities_processNumerical&&i[a]?i[a]:"&#"+a.charCodeAt(0)+";"}var b=f.config;if(f=(f=f.dataProcessor)&&f.htmlFilter){var g=[];!1!==b.basicEntities&&g.push("nbsp,gt,lt,amp"),b.entities&&(g.length&&g.push(
"quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"
),b.entities_latin&&g.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),b.entities_greek&&g.push(
"Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),b.entities_additional&&g.push(b.entities_additional));var i=a(g.join(",")),d=i.regex?"["+i.regex+"]":"a^";delete i.regex,b.entities&&b.entities_processNumerical&&(d="[^ -~]|"+d);d=RegExp(d,"g");var h=a("nbsp,gt,lt,amp,shy",!0),j=RegExp(h.regex,"g");f.addRules({text:function(a){return a.replace(j,c).replace(d,e)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),
CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",function(){function f(b){var f=b.config,i=f.floatSpace||{on:{}},d=!1,h=b.fire("uiSpace",{space:"top",html:""}).html,j=function(){function h(a,b,c){l.setStyle(b,e(c)),l.setStyle("position",a)}function k(a){var b=t.getDocumentPosition();switch(a){case"top":h("absolute","top",b.y-o-x);break;case"pin":h("fixed","top",B);break;case"bottom":h("absolute","top",b.y+(u.height||u.bottom-u.top)+x)}i.on&&"function"==typeof i.on.changeMode&&i.on.changeMode.call(l.$,q,a),q=a}var q,t,s,u,n,o,w,
r=f.floatSpaceDockedOffsetX||0,x=f.floatSpaceDockedOffsetY||0,y=f.floatSpacePinnedOffsetX||0,B=f.floatSpacePinnedOffsetY||0;return function(f){if(!t)if(i.centerElement){var g;g="function"==typeof i.centerElement?i.centerElement.call(null):i.centerElement,(t=new CKEDITOR.dom.element(g)).on("mousedown",function(a){a.data.preventDefault()})}else if(!(t=b.editable()))return;d||(f&&"focus"===f.name&&l.show(),l.removeStyle("left"),l.removeStyle("right"),s=l.getClientRect(),u=t.getClientRect(),n=c.getViewPaneSize(),o=s.height,w=function(a){var e="left"==a?"pageXOffset":"pageYOffset"
;return e in c.$?c.$[e]:CKEDITOR.document.$.documentElement["left"==a?"scrollLeft":"scrollTop"]}("left"),q?(o+x<=u.top?k("top"):o+x>n.height-u.bottom?k("pin"):k("bottom"),f=n.width/2,f=0<u.left&&u.right<n.width&&u.width>s.width?"rtl"==b.config.contentsLangDirection?"right":"left":f-u.left>u.right-f?"left":"right",s.width>n.width?(f="left",g=0):(g="left"==f?0<u.left?u.left:0:u.right<n.width?n.width-u.right:0)+s.width>n.width&&(f="left"==f?"right":"left",g=0),l.setStyle(f,e(("pin"==q?y:r)+g+("pin"==q?0:"left"==f?w:-w)))):(k(q="pin"),j(f)))}}();if(h){var k=new CKEDITOR.template(
'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(b.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(b.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div><span class="cke_nose"><span></div>'),l=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(k.output({content:h,id:b.id,langDir:b.lang.dir,
langCode:b.langCode,name:b.name,style:"display:none;z-index:"+(f.baseFloatZIndex-1),topId:b.ui.spaceId("top"),voiceLabel:b.title}))),o=CKEDITOR.tools.eventsBuffer(500,j),n=CKEDITOR.tools.eventsBuffer(100,j);l.unselectable(),l.on("mousedown",function(a){(a=a.data).getTarget().hasAscendant("a",1)||a.preventDefault()}),b.on("focus",function(a){j(a),b.on("change",o.input),c.on("scroll",n.input),c.on("resize",n.input)}),b.on("blur",function(){l.hide(),b.removeListener("change",o.input),c.removeListener("scroll",n.input),c.removeListener("resize",n.input)}),b.on("destroy",function(){c.removeListener("scroll",n.input),c.removeListener("resize",n.input),
l.clearCustomData(),l.remove()}),b.focusManager.hasFocus&&l.show(),b.focusManager.add(l,1),i.on&&"function"==typeof i.on.ready&&i.on.ready.call(l.$,{show:function(){d=!1,l.show(),j()},hide:function(){l.hide(),d=!0}})}}var c=CKEDITOR.document.getWindow(),e=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){f(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),f=CKEDITOR.addTemplate("panel-list-item",
'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),c=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),e=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,c){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),c))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,c){var e=(c=c||{}).attributes||(
c.attributes={});(this.multiSelect=!!c.multiSelect)&&(e["aria-multiselectable"]=!0),!e.role&&(e.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",e.role),(e=this.keys)[40]="next",e[9]="next",e[38]="prev",e[CKEDITOR.SHIFT+9]="prev",e[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(e[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var b=a.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(b),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(
function(a){var c=this.toggle(a);this.onClick&&this.onClick(a,c)},this)),this._.click}},proto:{add:function(a,c,i){var d=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),a={id:this._.items[a]=d,val:CKEDITOR.tools.htmlEncodeAttr(a).replace(e,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(i||a),text:c||a},this._.pendingList.push(f.output(a))},startGroup:function(a){this._.close();var e=CKEDITOR.tools.getNextId();this._.groups[a]=e,this._.pendingHtml.push(c.output({id:e,label:a}))},commit:function(){this._.close(),
this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var c=this.isMarked(a);return c?this.unmark(a):this.mark(a),!c},hideGroup:function(a){var c=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),c&&"ul"==c.getName()&&c.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var d,a=this._.items,c=this._.groups,e=this.element.getDocument();for(d in a)e.getById(a[d]).setStyle("display","");for(var f in c)d=(a=e.getById(c[f])).getNext(),a.setStyle("display",
""),d&&"ul"==d.getName()&&d.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var c=this.element.getDocument().getById(a);c.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(c)},unmark:function(a){var c=this.element.getDocument(),e=(a=this._.items[a],c.getById(a));e.removeClass("cke_selected"),c.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(e)},unmarkAll:function(){var e,a=this._.items,c=this.element.getDocument();for(e in a){var d=a[e];c.getById(d).removeClass("cke_selected"),c.getById(d+"_option"
).removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var e,c=this.element.getElementsByTag("a"),d=-1;if(a){for(e=this.element.getDocument().getById(this._.items[a]).getFirst();a=c.getItem(++d);)if(a.equals(e)){this._.focusIndex=d;break}}else this.element.focus();e&&setTimeout(function(){e.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){
var a='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');a=a+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(
CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var f=CKEDITOR.addTemplate("combo",a);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1}),a=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),
this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document,a.className="cke_combopanel",a.block={multiSelect:a.multiSelect,attributes:a.attributes},a.toolbarRelated=!0,this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var e=[];return this.render(a,e),e.join("")},render:function(a,e){function b(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var b=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(b=CKEDITOR.TRISTATE_DISABLED),this.setState(b),this.setValue(""),b!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var g=CKEDITOR.env,i="cke_"+this.id,d=CKEDITOR.tools.addFunction(function(
b){o&&(a.unlockSelection(1),o=0),j.execute(b)},this),h=this,j={id:i,combo:this,focus:function(){CKEDITOR.document.getById(i).getChild(1).focus()},execute:function(b){var d=h._;if(d.state!=CKEDITOR.TRISTATE_DISABLED)if(h.createPanel(a),d.on)d.panel.hide();else{h.commit();var e=h.getValue();e?d.list.mark(e):d.list.unmarkAll(),d.panel.showBlock(h.id,new CKEDITOR.dom.element(b),4)}},clickFn:d};a.on("activeFilterChange",b,this),a.on("mode",b,this),a.on("selectionChange",b,this),!this.readOnly&&a.on("readOnly",b,this);var k=CKEDITOR.tools.addFunction(function(b,e){var f=(b=new CKEDITOR.dom.event(b)).getKeystroke();switch(40==f&&a.once("panelShow",function(a){
a.data._.panel._.currentBlock.onKeyDown(40)}),f){case 13:case 32:case 40:CKEDITOR.tools.callFunction(d,e);break;default:j.onkey(j,f)}b.preventDefault()}),l=CKEDITOR.tools.addFunction(function(){j.onfocus&&j.onfocus()}),o=0;return j.keyDownFn=k,g={id:i,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:g.gecko&&!g.hc?"":(this.title||"").replace("'",""),keydownFn:k,focusFn:l,clickFn:d},f.output(g,e),this.onRender&&this.onRender(),j},createPanel:function(a){if(!this._.panel){var e=this._.panelDefinition,b=this._.panelDefinition.block,f=e.parent||CKEDITOR.document.getBody(),i="cke_combopanel__"+this.name,
d=new CKEDITOR.ui.floatPanel(a,f,e),h=d.addListBlock(this.id,b),j=this;d.onShow=function(){this.element.addClass(i),j.setState(CKEDITOR.TRISTATE_ON),j._.on=1,j.editorFocus&&!a.focusManager.hasFocus&&a.focus(),j.onOpen&&j.onOpen(),a.once("panelShow",function(){h.focus(!h.multiSelect&&j.getValue())})},d.onHide=function(b){this.element.removeClass(i),j.setState(j.modes&&j.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),j._.on=0,!b&&j.onClose&&j.onClose()},d.onEscape=function(){d.hide(1)},h.onClick=function(a,b){j.onClick&&j.onClick.call(j,a,b),d.hide()},this._.panel=d,this._.list=h,d.getBlock(this.id).onHide=function(){j._.on=0,j.setState(
CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(a,e){this._.value=a;var b=this.document.getById("cke_"+this.id+"_text");b&&(a||e?b.removeClass("cke_combo_inlinelabel"):(e=this.label,b.addClass("cke_combo_inlinelabel")),b.setText(void 0!==e?e:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,e,b){this._.items[a]=b||a,this._.list.add(a,e,b)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){
this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(a){if(this._.state!=a){var e=this.document.getById("cke_"+this.id);e.setState(a,"cke_combo"),a==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this._.state=a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){
return new CKEDITOR.ui.richCombo(a)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(a,e){this.add(a,CKEDITOR.UI_RICHCOMBO,e)}}(),function(){function a(a,e,b,g,i,d,h,j){for(var k=a.config,l=new CKEDITOR.style(h),o=i.split(";"),n=(i=[],{}),m=0;m<o.length;m++){if(p=o[m]){var p=p.split("/"),q={},t=o[m]=p[0];q[b]=i[m]=p[1]||t,n[t]=new CKEDITOR.style(h,q),n[t]._.definition.name=t}else o.splice(m--,1)}a.ui.addRichCombo(e,{label:g.label,title:g.panelTitle,toolbar:"styles,"+j,allowedContent:l,requiredContent:l,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(k.contentsCss),multiSelect:!1,attributes:{"aria-label":g.panelTitle}},init:function(){this.startGroup(
g.panelTitle);for(var a=0;a<o.length;a++){var b=o[a];this.add(b,n[b].buildPreview(),b)}},onClick:function(b){a.focus(),a.fire("saveSnapshot");var d=this.getValue(),e=n[b];if(d&&b!=d){var g=n[d],h=a.getSelection().getRanges()[0];if(h.collapsed){var i=a.elementPath(),j=i.contains(function(a){return g.checkElementRemovable(a)});if(j){var k=h.checkBoundaryOfElement(j,CKEDITOR.START),m=h.checkBoundaryOfElement(j,CKEDITOR.END);if(k&&m){for(k=h.createBookmark();i=j.getFirst();)i.insertBefore(j);j.remove(),h.moveToBookmark(k)}else k?h.moveToPosition(j,CKEDITOR.POSITION_BEFORE_START):m?h.moveToPosition(j,CKEDITOR.POSITION_AFTER_END):(h.splitElement(j),
h.moveToPosition(j,CKEDITOR.POSITION_AFTER_END),function f(a,e,b){var g=e.pop();if(g){if(b)return f(a,e,g.equals(b)?null:b);b=g.clone(),a.insertNode(b),a.moveToPosition(b,CKEDITOR.POSITION_AFTER_START),f(a,e)}}(h,i.elements.slice(),j));a.getSelection().selectRanges([h])}}else a.removeStyle(g)}a[d==b?"removeStyle":"applyStyle"](e),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){for(var g,e=this.getValue(),f=(b=b.data.path.elements,0);f<b.length;f++)for(var h in g=b[f],n)if(n[h].checkElementMatch(g,!0,a))return void(h!=e&&this.setValue(h));this.setValue("",d)},this)},refresh:function(){a.activeFilter.check(l)||this.setState(
CKEDITOR.TRISTATE_DISABLED)}})}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(c){var e=c.config;a(c,"Font","family",c.lang.font,e.font_names,e.font_defaultLabel,e.font_style,30),a(c,"FontSize","size",c.lang.font.fontSize,e.fontSize_sizes,e.fontSize_defaultLabel,e.fontSize_style,40)}})}(),
CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},
CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var f=a.config,c=a.lang.format,e=f.format_tags.split(";"),b={},g=0,i=[],d=0;d<e.length;d++){var h=e[d],j=new CKEDITOR.style(f["format_"+h]);a.filter.customConfig&&!a.filter.check(j)||(g++,b[h]=j,b[h]._.enterMode=a.config.enterMode,i.push(j))}
0!==g&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:i,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){for(var a in this.startGroup(c.panelTitle),b){var d=c["tag_"+a];this.add(a,b[a].buildPreview(d),d)}},onClick:function(c){a.focus(),a.fire("saveSnapshot");c=b[c];var d=a.elementPath();a[c.checkActive(d,a)?"removeStyle":"applyStyle"](c),setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(c){var d=this.getValue();c=c.data.path;for(var e in this.refresh(),b)if(
b[e].checkActive(c,a))return void(e!=d&&this.setValue(e,a.lang.format["tag_"+e]));this.setValue("")},this)},onOpen:function(){for(var c in this.showAll(),b)a.activeFilter.check(b[c])||this.hideItem(c)},refresh:function(){var c=a.elementPath();if(c){if(c.isContextFor("p"))for(var d in b)if(a.activeFilter.check(b[d]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},
CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var a={canUndo:!1,exec:function(a){var c=a.document.createElement("hr");a.insertElement(c)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(f){f.blockless||(f.addCommand("horizontalrule",a),f.ui.addButton&&f.ui.addButton("HorizontalRule",{label:f.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(a){
var f=new CKEDITOR.htmlWriter;f.forceSimpleAmpersand=a.config.forceSimpleAmpersand,f.indentationChars=a.config.dataIndentationChars||"\t",a.dataProcessor.writer=f}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var f,a=CKEDITOR.dtd;for(f in CKEDITOR.tools.extend({},a.$nonBodyContent,a.$block,a.$listItem,a.$tableContent))this.setRules(f,{indent:!a[f]["#"],breakBeforeOpen:1,breakBeforeClose:!a[f]["#"],breakAfterClose:1,
needsSpace:f in a.$block&&!(f in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(a){var f=this._.rules[a];this._.afterCloser&&f&&f.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():f&&f.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",a),this._.afterCloser=0},openTagClose:function(a,f){var c=this._.rules[a];f?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(
this._.output.push(">"),c&&c.indent&&(this._.indentation=this._.indentation+this.indentationChars)),c&&c.breakAfterOpen&&this.lineBreak(),"pre"==a&&(this._.inPre=1)},attribute:function(a,f){"string"==typeof f&&(this.forceSimpleAmpersand&&(f=f.replace(/&amp;/g,"&")),f=CKEDITOR.tools.htmlEncodeAttr(f)),this._.output.push(" ",a,'="',f,'"')},closeTag:function(a){var f=this._.rules[a];f&&f.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():f&&f.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",a,">"),"pre"==a&&(this._.inPre=0),f&&f.breakAfterClose&&(this.lineBreak(),
this._.needsSpace=f.needsSpace),this._.afterCloser=1},text:function(a){this._.indent&&(this.indentation(),!this._.inPre&&(a=CKEDITOR.tools.ltrim(a))),this._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("\x3c!--",a,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(a,f){var c=this._.rules[a]
;c?CKEDITOR.tools.extend(c,f,!0):this._.rules[a]=f}}}),function(){function a(a,b){var g,i;b.on("refresh",function(a){var e,b=[f];for(e in a.data.states)b.push(a.data.states[e]);this.setState(CKEDITOR.tools.search(b,c)?c:f)},b,null,100),b.on("exec",function(b){g=a.getSelection(),i=g.createBookmarks(1),b.data||(b.data={}),b.data.done=!1},b,null,0),b.on("exec",function(){a.forceNextSelectionCheck(),g.selectBookmarks(i)},b,null,100)}var f=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(c){var b=CKEDITOR.plugins.indent.genericDefinition;a(c,c.addCommand("indent",new b(!0))),a(c,c.addCommand("outdent",new b)),
c.ui.addButton&&(c.ui.addButton("Indent",{label:c.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),c.ui.addButton("Outdent",{label:c.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),c.on("dirChanged",function(a){var b=c.createRange(),d=a.data.node;b.setStartBefore(d),b.setEndAfter(d);for(var j,f=new CKEDITOR.dom.walker(b);j=f.next();)if(j.type==CKEDITOR.NODE_ELEMENT)if(!j.equals(d)&&j.getDirection())b.setStartAfter(j),f=new CKEDITOR.dom.walker(b);else{var k=c.config.indentClasses;if(k)for(var l="ltr"==a.data.dir?["_rtl",""]:["","_rtl"],o=0;o<k.length;o++)j.hasClass(k[o]+l[0])&&(j.removeClass(k[o]+l[0]),
j.addClass(k[o]+l[1]));k=j.getStyle("margin-right"),l=j.getStyle("margin-left"),k?j.setStyle("margin-left",k):j.removeStyle("margin-left"),l?j.setStyle("margin-right",l):j.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,b,c){this.name=b,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!c,this.relatedGlobal=c?"indent":"outdent",this.indentKey=c?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)!function(a,b){var e,c=a.getCommand(
b.relatedGlobal);for(e in b.jobs)c.on("exec",function(c){c.data.done||(a.fire("lockSnapshot"),b.execJob(a,e)&&(c.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,e),c.on("refresh",function(c){c.data.states||(c.data.states={}),c.data.states[b.name+"@"+e]=b.refreshJob(a,e,c.data.path)},this,null,e);a.addFeature(b)}(this,b[a])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var c=this.jobs[b];if(c.state!=f)return c.exec.call(this,a)},refreshJob:function(a,b,c){return(b=this.jobs[b]
).state=a.activeFilter.checkFeature(this)?b.refresh.call(this,a,c):f,b.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function a(a){function b(f){for(var h=n.startContainer,m=n.endContainer;h&&!h.getParent().equals(f);)h=h.getParent();for(;m&&!m.getParent().equals(f);)m=m.getParent();if(!h||!m)return!1;for(var p=h,o=(h=[],!1);!o;)p.equals(m)&&(o=!0),h.push(p),p=p.getNext();if(h.length<1)return!1;for(p=f.getParents(!0),m=0;m<p.length;m++)if(p[m].getName&&i[p[m].getName()]){f=p[m];break}p=e.isIndent?1:-1,m=h[0],h=h[h.length-1];var z=(o=CKEDITOR.plugins.list.listToArray(f,g))[h.getCustomData("listarray_index")].indent;for(
m=m.getCustomData("listarray_index");m<=h.getCustomData("listarray_index");m++)if(o[m].indent=o[m].indent+p,0<p){var w=o[m].parent;o[m].parent=new CKEDITOR.dom.element(w.getName(),w.getDocument())}for(m=h.getCustomData("listarray_index")+1;m<o.length&&o[m].indent>z;m++)o[m].indent=o[m].indent+p;var r;if((h=CKEDITOR.plugins.list.arrayToList(o,g,null,a.config.enterMode,f.getDirection()),!e.isIndent)&&((r=f.getParent())&&r.is("li"))){var y,x=[];for(m=(p=h.listNode.getChildren()).count()-1;0<=m;m--)(y=p.getItem(m))&&y.is&&y.is("li")&&x.push(y)}if(h&&h.listNode.replace(f),x&&x.length)for(m=0;m<x.length;m++){for(y=f=x[m];(y=y.getNext())&&y.is&&y.getName()in i;
)CKEDITOR.env.needsNbspFiller&&!f.getFirst(c)&&f.append(n.document.createText("")),f.append(y);f.insertAfter(r)}return h&&a.fire("contentDomInvalidated"),!0}for(var n,e=this,g=this.database,i=this.context,o=((o=a.getSelection())&&o.getRanges()).createIterator();n=o.getNextRange();){for(var m=n.getCommonAncestor();m&&(m.type!=CKEDITOR.NODE_ELEMENT||!i[m.getName()]);)m=m.getParent();if(m||(m=n.startPath().contains(i))&&n.setEndAt(m,CKEDITOR.POSITION_BEFORE_END),!m){var p=n.getEnclosedNode();p&&p.type==CKEDITOR.NODE_ELEMENT&&p.getName()in i&&(n.setStartAt(p,CKEDITOR.POSITION_AFTER_START),n.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),m=p)}if(
m&&n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in i&&((p=new CKEDITOR.dom.walker(n)).evaluator=f,n.startContainer=p.next()),m&&n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in i&&((p=new CKEDITOR.dom.walker(n)).evaluator=f,n.endContainer=p.previous()),m)return b(m)}return 0}function f(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function c(a){return e(a)&&b(a)}var e=CKEDITOR.dom.walker.whitespaces(!0),b=CKEDITOR.dom.walker.bookmark(!1,!0),g=CKEDITOR.TRISTATE_DISABLED,i=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(b){function c(b){e.specificDefinition.apply(
this,arguments),this.requiredContent=["ul","ol"],b.on("key",function(a){if("wysiwyg"==b.mode&&a.data.keyCode==this.indentKey){var c=this.getContext(b.elementPath());!c||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,b.elementPath(),c)||(b.execCommand(this.relatedGlobal),a.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(a,b){var c=this.getContext(b),d=CKEDITOR.plugins.indentList.firstItemInPath(this.context,b,c);return c&&this.isIndent&&!d?i:g}:function(a,b){return!this.getContext(b)||this.isIndent?g:i},exec:CKEDITOR.tools.bind(a,this)}}var e=CKEDITOR.plugins.indent;e.registerCommands(b,{
indentlist:new c(b,"indentlist",!0),outdentlist:new c(b,"outdentlist")}),CKEDITOR.tools.extend(c.prototype,e.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(a,b,c){var e=b.contains(f);return c||(c=b.contains(a)),c&&e&&e.equals(c.getFirst(f))}}(),function(){function a(a,b,c){if(!a.getCustomData("indent_processed")){var e=this.editor,g=this.isIndent;if(b){if(c=0,(e=a.$.className.match(this.classNameRegex))&&(e=e[1],c=CKEDITOR.tools.indexOf(b,e)+1),(c+=g?1:-1)<0)return;c=Math.min(c,b.length),c=Math.max(c,0),a.$.className=CKEDITOR.tools.ltrim(a.$.className.replace(
this.classNameRegex,"")),0<c&&a.addClass(b[c-1])}else{b=f(a,c),c=parseInt(a.getStyle(b),10);var l=e.config.indentOffset||40;if(isNaN(c)&&(c=0),(c+=(g?1:-1)*l)<0)return;c=Math.max(c,0),c=Math.ceil(c/l)*l,a.setStyle(b,c?c+(e.config.indentUnit||"px"):""),""===a.getAttribute("style")&&a.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,a,"indent_processed",1)}}function f(a,b){return"ltr"==(b||a.getComputedStyle("direction"))?"margin-left":"margin-right"}var c=CKEDITOR.dtd.$listItem,e=CKEDITOR.dtd.$list,b=CKEDITOR.TRISTATE_DISABLED,g=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(i){function d(){
h.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:j?null:"margin-left,margin-right",classes:j||null}},this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(j?"("+j.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(a,d){if((e=d.block||d.blockLimit).is(c)||(e=e.getAscendant(c)||e),e.is(c)&&(e=e.getParent()),!this.enterBr&&!this.getContext(d))return b;if(j){var h;h=j;var e=e.$.className.match(this.classNameRegex),i=this.isIndent;return(h=e?!i||e[1]!=h.slice(-1):i)?g:b}return this.isIndent?g:e?CKEDITOR[(parseInt(e.getStyle(f(e)),10)||0
)<=0?"TRISTATE_DISABLED":"TRISTATE_OFF"]:b},exec:function(b){var d,c=(c=b.getSelection())&&c.getRanges()[0];if(d=b.elementPath().contains(e))a.call(this,d,j);else for(c=c.createIterator(),b=b.config.enterMode,c.enforceRealBlocks=!0,c.enlargeBr=b!=CKEDITOR.ENTER_BR;d=c.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)d.isReadOnly()||a.call(this,d,j);return!0}}}}var h=CKEDITOR.plugins.indent,j=i.config.indentClasses;h.registerCommands(i,{indentblock:new d(i,"indentblock",!0),outdentblock:new d(i,"outdentblock")}),CKEDITOR.tools.extend(d.prototype,h.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},
classNameRegex:j?RegExp("(?:^|\\s+)("+j.join("|")+")(?=$|\\s)"):null})}})}(),function(){function a(a,b){var c;if(b=void 0===b||b)c=a.getComputedStyle("text-align");else{for(;(!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align"))&&(c=a.getParent());)a=c;c=a.getStyle("text-align")||a.getAttribute("align")||""}return c&&(c=c.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!c&&b&&(c="rtl"==a.getComputedStyle("direction")?"right":"left"),c}function f(a,b,c){this.editor=a,this.name=b,this.value=c,this.context="p";b=a.config.justifyClasses;var f=a.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(b){switch(c){case"left":this.cssClassName=b[0]
;break;case"center":this.cssClassName=b[1];break;case"right":this.cssClassName=b[2];break;case"justify":this.cssClassName=b[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+b.join("|")+")(?=$|\\s)"),this.requiredContent=f+"("+this.cssClassName+")"}else this.requiredContent=f+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function c(a){var b=a.editor,c=b.createRange();c.setStartBefore(a.data.node),c.setEndAfter(a.data.node);for(var d,f=new CKEDITOR.dom.walker(c
);d=f.next();)if(d.type==CKEDITOR.NODE_ELEMENT)if(!d.equals(a.data.node)&&d.getDirection())c.setStartAfter(d),f=new CKEDITOR.dom.walker(c);else{var h=b.config.justifyClasses;h&&(d.hasClass(h[0])?(d.removeClass(h[0]),d.addClass(h[2])):d.hasClass(h[2])&&(d.removeClass(h[2]),d.addClass(h[0]))),"left"==(h=d.getStyle("text-align"))?d.setStyle("text-align","right"):"right"==h&&d.setStyle("text-align","left")}}f.prototype={exec:function(c){var b=c.getSelection(),f=c.config.enterMode;if(b){for(var j,k,i=b.createBookmarks(),d=b.getRanges(),h=this.cssClassName,l=void 0===(l=c.config.useComputedState)||l,o=d.length-1;0<=o;o--)for((j=d[o].createIterator()
).enlargeBr=f!=CKEDITOR.ENTER_BR;k=j.getNextParagraph(f==CKEDITOR.ENTER_P?"p":"div");)if(!k.isReadOnly()){k.removeAttribute("align"),k.removeStyle("text-align");var n=h&&(k.$.className=CKEDITOR.tools.ltrim(k.$.className.replace(this.cssClassRegex,""))),m=this.state==CKEDITOR.TRISTATE_OFF&&(!l||a(k,!0)!=this.value);h?m?k.addClass(h):n||k.removeAttribute("class"):m&&k.setStyle("text-align",this.value)}c.focus(),c.forceNextSelectionCheck(),b.selectBookmarks(i)}},refresh:function(c,b){var f=b.block||b.blockLimit;this.setState("body"!=f.getName()&&a(f,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},
CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var b=new f(a,"justifyleft","left"),g=new f(a,"justifycenter","center"),i=new f(a,"justifyright","right"),d=new f(a,"justifyblock","justify");a.addCommand("justifyleft",b),a.addCommand("justifycenter",g),a.addCommand("justifyright",i),a.addCommand("justifyblock",d),a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),
a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"})),a.on("dirChanged",c)}}})}(),function(){function a(a,b){var c=e.exec(a),f=e.exec(b);if(c){if(!c[2]&&"px"==f[2])return f[1];if("px"==c[2]&&!f[2])return f[1]+"px"}return b}var f=CKEDITOR.htmlParser.cssStyle,c=CKEDITOR.tools.cssLength,e=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,b={elements:{$:function(b){var c=b.attributes;if((c=(c=(c=c&&c["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(c)))&&c.children[0])&&b.attributes["data-cke-resizable"]){var d=new f(b).rules,e=(b=c.attributes,d.width);d=d.height;e&&(b.width=a(b.width,e)),
d&&(b.height=a(b.height,d))}return c}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(b,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(a,b,d,e){var j=(j=this.lang.fakeobjects)[d]||j.unknown;b={class:b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:j,title:j,align:a.getAttribute("align")||""};return CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData),d&&(b["data-cke-real-element-type"]=d),e&&(b["data-cke-resizable"]=e,
d=new f,e=a.getAttribute("width"),a=a.getAttribute("height"),e&&(d.rules.width=c(e)),a&&(d.rules.height=c(a)),d.populate(b)),this.document.createElement("img",{attributes:b})},CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,d,e){var k,j=(j=this.lang.fakeobjects)[d]||j.unknown;return k=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(k),k=k.getHtml(),b={class:b,"data-cke-realelement":encodeURIComponent(k),"data-cke-real-node-type":a.type,alt:j,title:j,align:a.attributes.align||""},CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData),d&&(b["data-cke-real-element-type"]=d),e&&(b["data-cke-resizable"]=e,e=a.attributes,a=new f,d=e.width,
e=e.height,void 0!==d&&(a.rules.width=c(d)),void 0!==e&&(a.rules.height=c(e)),a.populate(b)),new CKEDITOR.htmlParser.element("img",b)},CKEDITOR.editor.prototype.restoreRealElement=function(b){if(b.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var c=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(b.data("cke-realelement")),this.document);if(b.data("cke-resizable")){var d=b.getStyle("width");b=b.getStyle("height");d&&c.setAttribute("width",a(c.getAttribute("width"),d)),b&&c.setAttribute("height",a(c.getAttribute("height"),b))}return c}}(),function(){function a(a){return a.replace(/'/g,"\\$&")}CKEDITOR.plugins.add("link",{
requires:"dialog,fakeobjects",onLoad:function(){function a(b){return c.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",c=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(a){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(a,"link",
"advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(a,"link","target")&&(b=b.replace("]",",target,onclick]")),a.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"})),a.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),a.addCommand("unlink",new CKEDITOR.unlinkCommand),a.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),a.setKeystroke(CKEDITOR.CTRL+76,"link"),a.ui.addButton&&(a.ui.addButton("Link",{label:a.lang.link.toolbar,command:"link",toolbar:"links,10"}),
a.ui.addButton("Unlink",{label:a.lang.link.unlink,command:"unlink",toolbar:"links,20"}),a.ui.addButton("Anchor",{label:a.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),a.on("doubleclick",function(b){var c=CKEDITOR.plugins.link.getSelectedLink(a)||b.data.element;c.isReadOnly()||(c.is("a")?(b.data.dialog=!c.getAttribute("name")||c.getAttribute("href")&&c.getChildCount()?"link":"anchor",b.data.link=c):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,c)&&(b.data.dialog="anchor"))},null,null,0),a.on("doubleclick",function(b){
b.data.dialog in{link:1,anchor:1}&&b.data.link&&a.getSelection().selectElement(b.data.link)},null,null,20),a.addMenuItems&&a.addMenuItems({anchor:{label:a.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:a.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.link.unlink,command:"unlink",group:"link",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){if(!b||b.isReadOnly())return null;if(!(b=CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b))&&!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;var c={}
;return b.getAttribute("href")&&b.getChildCount()&&(c={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),b&&b.hasAttribute("name")&&(c.anchor=c.removeAnchor=CKEDITOR.TRISTATE_OFF),c}),this.compiledProtectionFunction=function(a){var b;return(a=a.config.emailProtection||"")&&"encode"!=a&&(b={},a.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,d){b.name=c,b.params=[],d.replace(/[^,\s]+/g,function(a){b.params.push(a)})})),b}(a)},afterInit:function(a){a.dataProcessor.dataFilter.addRules({elements:{a:function(b){return b.attributes.name?b.children.length?null:a.createFakeParserElement(b,"cke_anchor","anchor"):null}}})
;var b=a._.elementsPath&&a._.elementsPath.filters;b&&b.push(function(b,c){if("a"==c&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b)||b.getAttribute("name")&&(!b.getAttribute("href")||!b.getChildCount())))return"anchor"})}});var b=/^javascript:/,g=/^mailto:([^?]+)(?:\?(.+))?$/,i=/subject=([^;?:@&=$,\/]*)/,d=/body=([^;?:@&=$,\/]*)/,h=/^#(.*)$/,j=/^((?:http|https|ftp|news):\/\/)?(.*)$/,k=/^(_(?:self|top|parent|blank))$/,l=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,o=/^javascript:([^(]+)\(([^)]+)\)$/,n=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,
m=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,p={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(a){var b=a.getSelection(),c=b.getSelectedElement();return c&&c.is("a")?c:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),a.elementPath(b.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(a){for(var f,b=(c=(b=a.editable()).isInline()&&!a.plugins.divarea?a.document:b).getElementsByTag("a"),c=c.getElementsByTag("img"),d=[],
e=0;f=b.getItem(e++);)(f.data("cke-saved-name")||f.hasAttribute("name"))&&d.push({name:f.data("cke-saved-name")||f.getAttribute("name"),id:f.getAttribute("id")});for(e=0;f=c.getItem(e++);)(f=this.tryRestoreFakeAnchor(a,f))&&d.push({name:f.getAttribute("name"),id:f.getAttribute("id")});return d},fakeAnchor:!0,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var c=a.restoreRealElement(b);if(c.data("cke-saved-name"))return c}},parseLinkAttributes:function(a,c){var z,e=c&&(c.data("cke-saved-href")||c.getAttribute("href"))||"",f=a.plugins.link.compiledProtectionFunction,v=a.config.emailProtection
,w={};if(e.match(b)&&("encode"==v?e=e.replace(l,function(a,b,c){return"mailto:"+String.fromCharCode.apply(String,b.split(","))+(c&&c.replace(/\\'/g,"'"))}):v&&e.replace(o,function(a,b,c){if(b==f.name){w.type="email";a=w.email={},b=/(^')|('$)/g;for(var g,d=(c=c.match(/[^,\s]+/g)).length,h=0;h<d;h++)g=decodeURIComponent(g=c[h].replace(b,"").replace(/\\'/g,"'")),a[f.params[h].toLowerCase()]=g;a.address=[a.name,a.domain].join("@")}})),!w.type)if(v=e.match(h))w.type="anchor",w.anchor={},w.anchor.name=w.anchor.id=v[1];else if(v=e.match(g)){z=e.match(i),e=e.match(d),w.type="email";var r=w.email={};r.address=v[1],z&&(r.subject=decodeURIComponent(z[1])),e&&(
r.body=decodeURIComponent(e[1]))}else e&&(z=e.match(j))&&(w.type="url",w.url={},w.url.protocol=z[1],w.url.url=z[2]);if(c){if(e=c.getAttribute("target"))w.target={type:e.match(k)?e:"frame",name:e};else if(e=(e=c.data("cke-pa-onclick")||c.getAttribute("onclick"))&&e.match(n))for(w.target={type:"popup",name:e[1]};v=m.exec(e[2]);)"yes"!=v[2]&&"1"!=v[2]||v[1]in{height:1,width:1,top:1,left:1}?isFinite(v[2])&&(w.target[v[1]]=v[2]):w.target[v[1]]=!0;var x;e={};for(x in p)(v=c.getAttribute(x))&&(e[p[x]]=v);(x=c.data("cke-saved-name")||e.advName)&&(e.advName=x),CKEDITOR.tools.isEmpty(e)||(w.advanced=e)}return w},getLinkAttributes:function(b,d){
var e=b.config.emailProtection||"",g={};switch(d.type){case"url":e=d.url&&void 0!==d.url.protocol?d.url.protocol:"http://";var h=d.url&&CKEDITOR.tools.trim(d.url.url)||"";g["data-cke-saved-href"]=0===h.indexOf("/")?h:e+h;break;case"anchor":e=d.anchor&&d.anchor.id,g["data-cke-saved-href"]="#"+(d.anchor&&d.anchor.name||e||"");break;case"email":h=(i=d.email).address;switch(e){case"":case"encode":var j=encodeURIComponent(i.subject||""),k=encodeURIComponent(i.body||""),i=[];j&&i.push("subject="+j),k&&i.push("body="+k),i=i.length?"?"+i.join("&"):"","encode"==e?(e=["javascript:void(location.href='mailto:'+",function(a){for(var b,c=a.length,d=[],e=0;e<c;e++
)b=a.charCodeAt(e),d.push(b);return"String.fromCharCode("+d.join(",")+")"}(h)],i&&e.push("+'",a(i),"'"),e.push(")")):e=["mailto:",h,i];break;default:e=h.split("@",2),i.name=e[0],i.domain=e[1],e=["javascript:",function(b,c){var f,g,d=b.plugins.link,e=d.compiledProtectionFunction.params;g=[d.compiledProtectionFunction.name,"("];for(var h=0;h<e.length;h++)f=c[d=e[h].toLowerCase()],0<h&&g.push(","),g.push("'",f?a(encodeURIComponent(c[d])):"","'");return g.push(")"),g.join("")}(b,i)]}g["data-cke-saved-href"]=e.join("")}if(d.target)if("popup"==d.target.type){e=["window.open(this.href, '",d.target.name||"","', '"];var m=["resizable","status","location","toolbar",
"menubar","fullscreen","scrollbars","dependent"];for(h=m.length,j=function(a){d.target[a]&&m.push(a+"="+d.target[a])},i=0;i<h;i++)m[i]=m[i]+(d.target[m[i]]?"=yes":"=no");j("width"),j("left"),j("height"),j("top"),e.push(m.join(","),"'); return false;"),g["data-cke-pa-onclick"]=e.join("")}else"notSet"!=d.target.type&&d.target.name&&(g.target=d.target.name);if(d.advanced){for(var n in p)(e=d.advanced[p[n]])&&(g[n]=e);g.name&&(g["data-cke-saved-name"]=g.name)}for(var l in g["data-cke-saved-href"]&&(g.href=g["data-cke-saved-href"]),n=CKEDITOR.tools.extend({target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},p),g)delete n[l];return{set:g,
removed:CKEDITOR.tools.objectKeys(n)}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(a){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});a.removeStyle(b)},refresh:function(a,b){var c=b.lastElement&&b.lastElement.getAscendant("a",!0);c&&"a"==c.getName()&&c.getAttribute("href")&&c.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(a){var d,b=a.getSelection(),c=b.createBookmarks()
;b&&(d=b.getSelectedElement())&&(d.getChildCount()?d.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,d))?d.remove(1):(d=CKEDITOR.plugins.link.getSelectedLink(a))&&(d.hasAttribute("href")?(d.removeAttributes({name:1,"data-cke-saved-name":1}),d.removeClass("cke_anchor")):d.remove(1)),b.selectBookmarks(c)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function a(a,b,c){function d(c){!(j=i[c?"getFirst":"getLast"]())||j.is&&j.isBlockBoundary()||!(k=b.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||k.is&&k.isBlockBoundary({br:1})||a.document.createElement("br"
)[c?"insertBefore":"insertAfter"](j)}for(var e=CKEDITOR.plugins.list.listToArray(b.root,c),f=[],g=0;g<b.contents.length;g++){var h=b.contents[g];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(f.push(h),CKEDITOR.dom.element.setMarker(c,h,"list_item_processed",!0))}for(h=null,g=0;g<f.length;g++)e[h=f[g].getCustomData("listarray_index")].indent=-1;for(g=h+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){for(f=e[g-1].indent+1-e[g].indent,h=e[g].indent;e[g]&&e[g].indent>=h;)e[g].indent=e[g].indent+f,g++;g--}var j,k,i=CKEDITOR.plugins.list.arrayToList(e,c,null,a.config.enterMode,b.root.getAttribute("dir")).listNode;d(!0),d(),i.replace(
b.root),a.fire("contentDomInvalidated")}function f(a,b){this.name=a,this.context=this.type=b,this.allowedContent=b+" li",this.requiredContent=b}function c(a,b,c,d){for(var e,f;e=a[d?"getLast":"getFirst"](n);)(f=e.getDirection(1))!==b.getDirection(1)&&e.setAttribute("dir",f),e.remove(),c?e[d?"insertBefore":"insertAfter"](c):b.append(e,d)}function e(a){function b(d){var e=a[d?"getPrevious":"getNext"](k);e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(a.getName())&&(c(a,e,null,!d),a.remove(),a=e)}b(),b(1)}function b(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in CKEDITOR.dtd.$block||a.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}
function g(a,b,d){a.fire("saveSnapshot"),d.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var f=d.extractContents();b.trim(!1,!0);var g=b.createBookmark(),j=(h=new CKEDITOR.dom.elementPath(b.startContainer)).block,h=h.lastElement.getAscendant("li",1)||j,o=(n=new CKEDITOR.dom.elementPath(d.startContainer)).contains(CKEDITOR.dtd.$listItem),n=n.contains(CKEDITOR.dtd.$list);for(j?(j=j.getBogus())&&j.remove():n&&(j=n.getPrevious(k))&&l(j)&&j.remove(),(j=f.getLast())&&j.type==CKEDITOR.NODE_ELEMENT&&j.is("br")&&j.remove(),(j=b.startContainer.getChild(b.startOffset))?f.insertBefore(j):b.startContainer.append(f),o&&(f=i(o))&&(h.contains(o)?(c(f,o.getParent(),o),
f.remove()):h.append(f));d.checkStartOfBlock()&&d.checkEndOfBlock()&&(f=(n=d.startPath()).block);)f.is("li")&&(h=f.getParent(),f.equals(h.getLast(k))&&f.equals(h.getFirst(k))&&(f=h)),d.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f.remove();d=d.clone(),f=a.editable(),d.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),(d=new CKEDITOR.dom.walker(d)).evaluator=function(a){return k(a)&&!l(a)},(d=d.next())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in CKEDITOR.dtd.$list&&e(d),b.moveToBookmark(g),b.select(),a.fire("saveSnapshot")}function i(a){return(a=a.getLast(k))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in d?a:null}var d={ol:1,ul:1},
h=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.bookmark(),k=function(a){return!(h(a)||j(a))},l=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(a,b,c,e,f){if(!d[a.getName()])return[];e||(e=0),c||(c=[]);for(var g=0,h=a.getChildCount();g<h;g++){var i=a.getChild(g);if(i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(i,b,c,e+1),"li"==i.$.nodeName.toLowerCase()){var j={parent:a,indent:e,element:i,contents:[]};f?j.grandparent=f:(j.grandparent=a.getParent(),j.grandparent&&"li"==j.grandparent.$.nodeName.toLowerCase()&&(j.grandparent=j.grandparent.getParent())),
b&&CKEDITOR.dom.element.setMarker(b,i,"listarray_index",c.length),c.push(j);for(var l,k=0,n=i.getChildCount();k<n;k++)(l=i.getChild(k)).type==CKEDITOR.NODE_ELEMENT&&d[l.getName()]?CKEDITOR.plugins.list.listToArray(l,b,c,e+1,j.grandparent):j.contents.push(l)}}return c},arrayToList:function(a,b,c,e,f){if(c||(c=0),!a||a.length<c+1)return null;for(var g,B,A,h=a[c].parent.getDocument(),i=new CKEDITOR.dom.documentFragment(h),n=null,l=c,o=Math.max(a[c].indent,0),y=null,G=e==CKEDITOR.ENTER_P?"p":"div";;){var C=a[l];if(g=C.grandparent,B=C.element.getDirection(1),C.indent==o){for(n&&a[l].parent.getName()==n.getName()||(n=a[l].parent.clone(!1,1),f&&n.setAttribute("dir"
,f),i.append(n)),y=n.append(C.element.clone(0,1)),B!=n.getDirection(1)&&y.setAttribute("dir",B),g=0;g<C.contents.length;g++)y.append(C.contents[g].clone(1,1));l++}else if(C.indent==Math.max(o,0)+1)C=a[l-1].element.getDirection(1),l=CKEDITOR.plugins.list.arrayToList(a,null,l,e,C!=B?B:null),!y.getChildCount()&&CKEDITOR.env.needsNbspFiller&&h.$.documentMode<=7&&y.append(h.createText("")),y.append(l.listNode),l=l.nextIndex;else{if(-1!=C.indent||c||!g)return null;d[g.getName()]?(y=C.element.clone(!1,!0),B!=g.getDirection(1)&&y.setAttribute("dir",B)):y=new CKEDITOR.dom.documentFragment(h);n=g.getDirection(1)!=B;var I,H,J=C.element,D=J.getAttribute("class"),
F=J.getAttribute("style"),E=y.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(e!=CKEDITOR.ENTER_BR||n||F||D),L=C.contents.length;for(g=0;g<L;g++)if(I=C.contents[g],j(I)&&1<L)E?H=I.clone(1,1):y.append(I.clone(1,1));else if(I.type==CKEDITOR.NODE_ELEMENT&&I.isBlockBoundary()){n&&!I.getDirection()&&I.setAttribute("dir",B),A=I;var Q=J.getAttribute("style");Q&&A.setAttribute("style",Q.replace(/([^;])$/,"$1;")+(A.getAttribute("style")||"")),D&&I.addClass(D),A=null,H&&(y.append(H),H=null),y.append(I.clone(1,1))}else E?(A||(A=h.createElement(G),y.append(A),n&&A.setAttribute("dir",B)),F&&A.setAttribute("style",F),D&&A.setAttribute("class",D),H&&(A.append(H),H=null),A.append(
I.clone(1,1))):y.append(I.clone(1,1));H&&((A||y).append(H),H=null),y.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&l!=a.length-1&&(CKEDITOR.env.needsBrFiller&&(B=y.getLast())&&B.type==CKEDITOR.NODE_ELEMENT&&B.is("br")&&B.remove(),(!(B=y.getLast(k))||B.type!=CKEDITOR.NODE_ELEMENT||!B.is(CKEDITOR.dtd.$block))&&y.append(h.createElement("br"))),("div"==(B=y.$.nodeName.toLowerCase())||"p"==B)&&y.appendBogus(),i.append(y),n=null,l++}if(A=null,a.length<=l||Math.max(a[l].indent,0)<o)break}if(b)for(a=i.getFirst();a;){if(a.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(b,a),a.getName()in CKEDITOR.dtd.$listItem&&(h=f=e=void 0,e=(c=a).getDirection()))){for(
f=c.getParent();f&&!(h=f.getDirection());)f=f.getParent();e==h&&c.removeAttribute("dir")}a=a.getNextSourceNode()}return{listNode:i,nextIndex:l}}};var o=/^h[1-6]$/,n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);f.prototype={exec:function(b){this.refresh(b,b.elementPath());var c=b.config,f=b.getSelection(),g=f&&f.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((h=b.editable()).getFirst(k)){var i=1==g.length&&g[0];(c=i&&i.getEnclosedNode())&&c.is&&this.type==c.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else c.enterMode==CKEDITOR.ENTER_BR?h.appendBogus():g[0].fixBlock(1,c.enterMode==CKEDITOR.ENTER_P?"p":"div"),f.selectRanges(g)
;c=f.createBookmarks(!0);for(var h=[],j={},n=(g=g.createIterator(),0);(i=g.getNextRange())&&++n;){var r=(l=i.getBoundaryNodes()).startNode,x=l.endNode;for(r.type==CKEDITOR.NODE_ELEMENT&&"td"==r.getName()&&i.setStartAt(l.startNode,CKEDITOR.POSITION_AFTER_START),x.type==CKEDITOR.NODE_ELEMENT&&"td"==x.getName()&&i.setEndAt(l.endNode,CKEDITOR.POSITION_BEFORE_END),(i=i.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;l=i.getNextParagraph();)if(!l.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(j,l,"list_block",1);r=(y=b.elementPath(l)).elements,x=0;for(var B,y=y.blockLimit,A=r.length-1;0<=A&&(B=r[A]);A--)if(d[B.getName()]&&y.contains(B
)){y.removeCustomData("list_group_object_"+n),(r=B.getCustomData("list_group_object"))?r.contents.push(l):(r={root:B,contents:[l]},h.push(r),CKEDITOR.dom.element.setMarker(j,B,"list_group_object",r)),x=1;break}x||((x=y).getCustomData("list_group_object_"+n)?x.getCustomData("list_group_object_"+n).contents.push(l):(r={root:x,contents:[l]},CKEDITOR.dom.element.setMarker(j,x,"list_group_object_"+n,r),h.push(r)))}}for(B=[];0<h.length;)if(r=h.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(d[r.root.getName()]){for(g=b,n=r,r=j,i=B,x=CKEDITOR.plugins.list.listToArray(n.root,r),y=[],l=0;l<n.contents.length;l++)(A=(A=n.contents[l]).getAscendant("li",!0)
)&&!A.getCustomData("list_item_processed")&&(y.push(A),CKEDITOR.dom.element.setMarker(r,A,"list_item_processed",!0));A=n.root.getDocument();for(var G=void 0,C=void 0,l=0;l<y.length;l++){var J=y[l].getCustomData("listarray_index");(G=x[J].parent).is(this.type)||(C=A.createElement(this.type),G.copyAttributes(C,{start:1,type:1}),C.removeStyle("list-style-type"),x[J].parent=C)}for(r=CKEDITOR.plugins.list.arrayToList(x,r,null,g.config.enterMode),x=void 0,y=r.listNode.getChildCount(),l=0;l<y&&(x=r.listNode.getChild(l));l++)x.getName()==this.type&&i.push(x);r.listNode.replace(n.root),g.fire("contentDomInvalidated")}else{for(x=b,i=B,y=(l=r).contents,
g=l.root.getDocument(),n=[],1==y.length&&y[0].equals(l.root)&&(r=g.createElement("div"),y[0].moveChildren&&y[0].moveChildren(r),y[0].append(r),y[0]=r),l=l.contents[0].getParent(),A=0;A<y.length;A++)l=l.getCommonAncestor(y[A].getParent());for(G=x.config.useComputedState,x=r=void 0,G=void 0===G||G,A=0;A<y.length;A++)for(C=y[A];J=C.getParent();){if(J.equals(l)){n.push(C),!x&&C.getDirection()&&(x=1),C=C.getDirection(G),null!==r&&(r=r&&r!=C?null:C);break}C=J}if(!(n.length<1)){for(y=n[n.length-1].getNext(),A=g.createElement(this.type),i.push(A),G=i=void 0;n.length;)i=n.shift(),G=g.createElement("li"),i.is("pre")||o.test(i.getName())||"false"==i.getAttribute(
"contenteditable")?i.appendTo(G):(i.copyAttributes(G),r&&i.getDirection()&&(G.removeStyle("direction"),G.removeAttribute("dir")),i.moveChildren(G),i.remove()),G.appendTo(A);r&&x&&A.setAttribute("dir",r),y?A.insertBefore(y):A.appendTo(l)}}else this.state==CKEDITOR.TRISTATE_ON&&d[r.root.getName()]&&a.call(this,b,r,j);for(A=0;A<B.length;A++)e(B[A]);CKEDITOR.dom.element.clearAllMarkers(j),f.selectBookmarks(c),b.focus()},refresh:function(a,b){var c=b.contains(d,1),e=b.blockLimit||b.root;c&&e.contains(c)?this.setState(c.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{
requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new f("numberedlist","ol")),a.addCommand("bulletedlist",new f("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",function(c){var f,e=c.data.domEvent.getKey();if("wysiwyg"==a.mode&&e in{8:1,46:1}){var h=a.getSelection().getRanges()[0],j=h&&h.startPath();if(h&&h.collapsed){var r,n=8==e,o=a.editable(),w=new CKEDITOR.dom.walker(h.clone());if(
w.evaluator=function(a){return k(a)&&!l(a)},w.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))},e=h.clone(),n)(r=j.contains(d))&&h.checkBoundaryOfElement(r,CKEDITOR.START)&&(r=r.getParent())&&r.is("li")&&(r=i(r))?(r=(f=r).getPrevious(k),e.moveToPosition(r&&l(r)?r:f,CKEDITOR.POSITION_BEFORE_START)):(w.range.setStartAt(o,CKEDITOR.POSITION_AFTER_START),w.range.setEnd(h.startContainer,h.startOffset),(r=w.previous())&&r.type==CKEDITOR.NODE_ELEMENT&&(r.getName()in d||r.is("li"))&&(r.is("li")||(w.range.selectNodeContents(r),w.reset(),w.evaluator=b,r=w.previous()),f=r,e.moveToElementEditEnd(f))),f?(g(a,e,h),c.cancel()):(e=j.contains(d)
)&&h.checkBoundaryOfElement(e,CKEDITOR.START)&&(f=e.getFirst(k),h.checkBoundaryOfElement(f,CKEDITOR.START)&&(r=e.getPrevious(k),i(f)?r&&(h.moveToElementEditEnd(r),h.select()):a.execCommand("outdent"),c.cancel()));else(f=j.contains("li"))?(w.range.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),f=(j=f.getLast(k))&&b(j)?j:f,o=0,(r=w.next())&&r.type==CKEDITOR.NODE_ELEMENT&&r.getName()in d&&r.equals(j)?(o=1,r=w.next()):h.checkBoundaryOfElement(f,CKEDITOR.END)&&(o=1),o&&r&&((h=h.clone()).moveToElementEditStart(r),g(a,e,h),c.cancel())):(w.range.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),(r=w.next())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(d)&&(r=r.getFirst(k),
j.block&&h.checkStartOfBlock()&&h.checkEndOfBlock()?(j.block.remove(),h.moveToElementEditStart(r),h.select()):i(r)?(h.moveToElementEditStart(r),h.select()):((h=h.clone()).moveToElementEditStart(r),g(a,e,h)),c.cancel()));setTimeout(function(){a.selectionChange(1)})}}}))}})}(),CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(a){var f;a.blockless||(f=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"}),f=a.addCommand("numberedListStyle",f),a.addFeature(f),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),f=new CKEDITOR.dialogCommand("bulletedListStyle",{
requiredContent:"ul",allowedContent:"ul{list-style-type}"}),f=a.addCommand("bulletedListStyle",f),a.addFeature(f),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),a.addMenuGroup("list",108),a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var e=a.getName();if("ol"==e)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==e)return{bulletedlist:CKEDITOR.TRISTATE_OFF};a=a.getParent()}return null}))}},
CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle),function(){function a(a,b,c){return k(b)&&k(c)&&c.equals(b.getNext(function(a){return!(Y(a)||Z(a)||l(a))}))}function f(a){this.upper=a[0],this.lower=a[1],this.set.apply(this,a.slice(2))}function c(a){var b=a.element;if(b&&k(b)&&(b=b.getAscendant(a.triggers,!0))&&a.editable.contains(b)){var c=g(b);if("true"==c.getAttribute("contenteditable"))return b;if(c.is(a.triggers))return c}return null}function e(a,b,c){return u(a,b),u(a,c),a=b.size.bottom,c=c.size.top,a&&c?0|(a+c)/2:a||c}function b(a,b,c){return b[c?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!Y(b)||k(b)&&!l(b
)&&!j(a,b)})}function g(a,b){if(a.data("cke-editable"))return null;for(b||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function i(a){var b=a.doc,c=y('<span contenteditable="false" style="'+P+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',b),e=CKEDITOR.getUrl(this.path+"images/"+(B.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");for(r(c,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(a.editable,!0),this},lineChildren:[r(y('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',b),{
base:P+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+e+") center no-repeat "+a.boxColor+";cursor:pointer;"+(B.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(B.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),r(y(W,b),{base:V+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px",
"border-width:0 0 8px 8px;top:0px"]}),r(y(W,b),{base:V+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){u(a,this);var b=a.holdDistance,c=this.size;return!!(c&&a.mouse.y>c.top-b&&a.mouse.y<c.bottom+b&&a.mouse.x>c.left-b&&a.mouse.x<c.right+b)},place:function(){var b=a.view,c=a.editable,d=a.trigger,e=d.upper,f=d.lower,g=e||f,h=g.getParent(),i={};for(var j in this.trigger=d,e&&u(a,e,!0),f&&u(a,f,!0),u(a,h,!0),a.inInlineMode&&v(a,!0),h.equals(c)?(
i.left=b.scroll.x,i.right=-b.scroll.x,i.width=""):(i.left=g.size.left-g.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),i.width=g.size.outerWidth+g.size.margin.left+g.size.margin.right+b.scroll.x,i.right=""),e&&f?i.top=e.size.margin.bottom===f.size.margin.top?0|e.size.bottom+e.size.margin.bottom/2:e.size.margin.bottom<f.size.margin.top?e.size.bottom+e.size.margin.bottom:e.size.bottom+e.size.margin.bottom-f.size.margin.top:e?f||(i.top=e.size.bottom+e.size.margin.bottom):i.top=f.size.top-f.size.margin.top,d.is(L)||i.top>b.scroll.y-15&&i.top<b.scroll.y+5?(i.top=a.inInlineMode?0:b.scroll.y,this.look(L)):d.is(H
)||i.top>b.pane.bottom-5&&i.top<b.pane.bottom+15?(i.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(H)):(a.inInlineMode&&(i.top=i.top-(b.editable.top+b.editable.border.top)),this.look(Q)),a.inInlineMode&&(i.top--,i.top=i.top+b.editable.scroll.top,i.left=i.left+b.editable.scroll.left),i)i[j]=CKEDITOR.tools.cssLength(i[j]);this.setStyles(i)},look:function(a){if(this.oldLook!=a){for(var c,b=this.lineChildren.length;b--;)(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);this.oldLook=a}},wrap:new x("span",a.doc)}),b=c.lineChildren.length;b--;)c.lineChildren[b].appendTo(c);c.look(Q)
,c.appendTo(c.wrap),c.unselectable(),c.lineChildren[0].on("mouseup",function(b){c.detach(),d(a,function(b){var c=a.line.trigger;b[c.is(J)?"insertBefore":"insertAfter"](c.is(J)?c.lower:c.upper)},!0),a.editor.focus(),!B.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),b.data.preventDefault(!0)}),c.on("mousedown",function(a){a.data.preventDefault(!0)}),a.line=c}function d(a,b,c){var f,d=new CKEDITOR.dom.range(a.doc),e=a.editor;B.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(O):(f=(f=g(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,(f=new x(C[f],a.doc)).is("br")||a.doc.createText(O).appendTo(f)),c&&e.fire("saveSnapshot"),b(f),
d.moveToPosition(f,CKEDITOR.POSITION_AFTER_START),e.getSelection().selectRanges([d]),a.hotNode=f,c&&e.fire("saveSnapshot")}function h(a,e){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function f(b){var c=B.ie&&B.version<9?" ":O,g=a.hotNode&&a.hotNode.getText()==c&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!e;d(a,function(c){g&&a.hotNode&&a.hotNode.remove(),c[e?"insertAfter":"insertBefore"](b),c.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!e}),a.lastCmdDirection=!!e}),!B.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),a.line.detach()}return function(d){var h,i;d=(d=d.getSelection().getStartElement()
).getAscendant(N,1);m(a,d)||!d||d.equals(a.editable)||d.contains(a.editable)||((h=g(d))&&"false"==h.getAttribute("contenteditable")&&(d=h),a.element=d,k(h=b(a,d,!e))&&h.is(a.triggers)&&h.is(R)&&(!b(a,h,!e)||(i=b(a,h,!e))&&k(i)&&i.is(a.triggers))?f(h):k(i=c(a))&&(b(a,i,!e)?(d=b(a,i,!e))&&k(d)&&d.is(a.triggers)&&f(i):f(i)))}}()}}function j(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var c=a.line;return c.wrap.equals(b)||c.wrap.contains(b)}function k(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function l(a){return!!k(a)&&((b=o(a))||(b=!!k(a)&&!(!(b={left:1,right:1,center:1})[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])),b);var b}
function o(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function n(a,b){return k(b)?b.is(a.triggers):null}function m(a,b){if(!b)return!1;for(var c=b.getParents(1),d=c.length;d--;)for(var e=a.tabuList.length;e--;)if(c[d].hasAttribute(a.tabuList[e]))return!0;return!1}function q(a){var b=a.editable,c=a.mouse,d=a.view,e=a.triggerOffset;v(a);var g=c.y>(a.inInlineMode?d.editable.top+d.editable.height/2:Math.min(d.editable.height,d.pane.height)/2);return(b=b[g?"getLast":"getFirst"](function(a){return!(Y(a)||Z(a))}))?(j(a,b)&&(b=a.line.wrap[g?"getPrevious":"getNext"](function(a){return!(Y(a)||Z(a))})),k(b)&&!l(b)&&n(a,b)?(u(a,b),
!g&&0<=b.size.top&&0<c.y&&c.y<b.size.top+e?(a=a.inInlineMode||0===d.scroll.y?L:Q,new f([null,b,J,E,a])):g&&b.size.bottom<=d.pane.height&&c.y>b.size.bottom-e&&c.y<d.pane.height?(a=a.inInlineMode||b.size.bottom>d.pane.height-e&&b.size.bottom<d.pane.height?H:Q,new f([b,null,D,E,a])):null):null):null}function t(a){var d=a.mouse,e=a.view,g=a.triggerOffset,h=c(a);if(!h)return null;u(a,h);g=Math.min(g,0|h.size.outerHeight/2);var j,m,i=[];if(d.y>h.size.top-1&&d.y<h.size.top+g)m=!1;else{if(!(d.y>h.size.bottom-g&&d.y<h.size.bottom+1))return null;m=!0}if(l(h)||function(a,b,c){return!!(b=b[c?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(K)}))&&(u(a,b),
c?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y)}(a,h,m)||h.getParent().is(M))return null;var t=b(a,h,!m);if(t){if(t&&t.type==CKEDITOR.NODE_TEXT)return null;if(k(t)){if(l(t)||!n(a,t)||t.getParent().is(M))return null;i=[t,h][m?"reverse":"concat"]().concat([F,E])}}else h.equals(a.editable[m?"getLast":"getFirst"](a.isRelevant))?(v(a),m&&d.y>h.size.bottom-g&&d.y<e.pane.height&&h.size.bottom>e.pane.height-g&&h.size.bottom<e.pane.height?j=H:0<d.y&&d.y<h.size.top+g&&(j=L)):j=Q,i=[null,h][m?"reverse":"concat"]().concat([m?D:J,E,j,h.equals(a.editable[m?"getLast":"getFirst"](a.isRelevant))?m?H:L:Q]);return 0 in i?new f(i):null}function s(a,b,c,d){for(var e=function(){
var c=B.ie?b.$.currentStyle:a.win.$.getComputedStyle(b.$,"");return B.ie?function(a){return c[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){return c.getPropertyValue(a)}}(),f=b.getDocumentPosition(),g={},h={},i={},j={},k=X.length;k--;)g[X[k]]=parseInt(e("border-"+X[k]+"-width"),10)||0,i[X[k]]=parseInt(e("padding-"+X[k]),10)||0,h[X[k]]=parseInt(e("margin-"+X[k]),10)||0;return(!c||d)&&z(a,d),j.top=f.y-(c?0:a.view.scroll.y),j.left=f.x-(c?0:a.view.scroll.x),j.outerWidth=b.$.offsetWidth,j.outerHeight=b.$.offsetHeight,j.height=j.outerHeight-(i.top+i.bottom+g.top+g.bottom),j.width=j.outerWidth-(i.left+i.right+g.left+g.right),j.bottom=j.top+j.outerHeight,
j.right=j.left+j.outerWidth,a.inInlineMode&&(j.scroll={top:b.$.scrollTop,left:b.$.scrollLeft}),r({border:g,padding:i,margin:h,ignoreScroll:c},j,!0)}function u(a,b,c){if(!k(b))return b.size=null;if(b.size){if(b.size.ignoreScroll==c&&b.size.date>new Date-T)return null}else b.size={};return r(b.size,s(a,b,c),{date:+new Date},!0)}function v(a,b){a.view.editable=s(a,a.editable,b,!0)}function z(a,b){a.view||(a.view={});var c=a.view;if(b||!(c&&c.date>new Date-T)){c=(d=a.win).getScrollPosition();var d=d.getViewPaneSize();r(a.view,{scroll:{x:c.x,y:c.y,width:a.doc.$.documentElement.scrollWidth-d.width,height:a.doc.$.documentElement.scrollHeight-d.height},pane:{
width:d.width,height:d.height,bottom:d.height+c.y},date:+new Date},!0)}}function w(a,b,c,d){for(var e=d,g=d,h=0,i=!1,j=!1,k=a.view.pane.height,m=a.mouse;m.y+h<k&&0<m.y-h&&(i||(i=b(e,d)),j||(j=b(g,d)),!i&&0<m.y-h&&(e=c(a,{x:m.x,y:m.y-h})),!j&&m.y+h<k&&(g=c(a,{x:m.x,y:m.y+h})),!i||!j);)h+=2;return new f([e,g,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var p,u,w,e=a.config,g=e.magicline_triggerOffset||30,n={editor:a,enterMode:e.enterMode,triggerOffset:g,holdDistance:0|g*(e.magicline_holdDistance||.5),boxColor:e.magicline_color||"#ff0000",rtl:"rtl"==e.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(e.magicline_tabuList||[]),
triggers:e.magicline_everywhere?N:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};n.isRelevant=function(a){return k(a)&&!j(n,a)&&!l(a)},a.on("contentDom",function(){var g=a.editable(),k=a.document,l=a.window;r(n,{editable:g,inInlineMode:g.isInline(),doc:k,win:l,hotNode:null},!0),n.boundary=n.inInlineMode?n.editable:n.doc.getDocumentElement(),g.is(G.$inline)||(n.inInlineMode&&!o(g)&&g.setStyles({position:"relative",top:null,left:null}),i.call(this,n),z(n),g.attachListener(a,"beforeUndoImage",function(){n.line.detach()}),g.attachListener(a,"beforeGetData",function(){n.line.wrap.getParent()&&(n.line.detach(),a.once("getData",function(){n.line.attach()}
,null,null,1e3))},null,null,0),g.attachListener(n.inInlineMode?k:k.getWindow().getFrame(),"mouseout",function(b){if("wysiwyg"==a.mode)if(n.inInlineMode){var c=b.data.$.clientX;b=b.data.$.clientY;z(n),v(n,!0);var d=n.view.editable,e=n.view.scroll;c>d.left-e.x&&c<d.right-e.x&&b>d.top-e.y&&b<d.bottom-e.y||(clearTimeout(w),w=null,n.line.detach())}else clearTimeout(w),w=null,n.line.detach()}),g.attachListener(g,"keyup",function(){n.hiddenMode=0}),g.attachListener(g,"keydown",function(b){if("wysiwyg"==a.mode)switch(b.data.getKeystroke()){case 2228240:case 16:n.hiddenMode=1,n.line.detach()}}),g.attachListener(n.inInlineMode?g:k,"mousemove",function(b){if(u=!0,
"wysiwyg"==a.mode&&!a.readOnly&&!w){var c={x:b.data.$.clientX,y:b.data.$.clientY};w=setTimeout(function(){n.mouse=c,w=n.trigger=null,z(n),u&&!n.hiddenMode&&a.focusManager.hasFocus&&!n.line.mouseNear()&&(n.element=S(n,!0))&&((n.trigger=q(n)||t(n)||ba(n))&&!m(n,n.trigger.upper||n.trigger.lower)?n.line.attach().place():(n.trigger=null,n.line.detach()),u=!1)},30)}}),g.attachListener(l,"scroll",function(){"wysiwyg"==a.mode&&(n.line.detach(),B.webkit&&(n.hiddenMode=1,clearTimeout(p),p=setTimeout(function(){n.mouseDown||(n.hiddenMode=0)},50)))}),g.attachListener(A?k:l,"mousedown",function(){"wysiwyg"==a.mode&&(n.line.detach(),n.hiddenMode=1,n.mouseDown=1)}),
g.attachListener(A?k:l,"mouseup",function(){n.hiddenMode=0,n.mouseDown=0}),a.addCommand("accessPreviousSpace",h(n)),a.addCommand("accessNextSpace",h(n,!0)),a.setKeystroke([[e.magicline_keystrokePrevious,"accessPreviousSpace"],[e.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var b,c,d,e;for(e in{p:1,br:1,div:1})for(d=(b=a.document.getElementsByTag(e)).count();d--;)if((c=b.getItem(d)).data("cke-magicline-hot"))return n.hotNode=c,void(n.lastCmdDirection="true"===c.data("cke-magicline-dir"))}),this.backdoor={accessFocusSpace:d,boxTrigger:f,isLine:j,getAscendantTrigger:c,getNonEmptyNeighbour:b,getSize:s,that:n,triggerEdge:t,
triggerEditable:q,triggerExpand:ba})},this)}});var r=CKEDITOR.tools.extend,x=CKEDITOR.dom.element,y=x.createFromHtml,B=CKEDITOR.env,A=CKEDITOR.env.ie&&CKEDITOR.env.version<9,G=CKEDITOR.dtd,C={},J=128,D=64,F=32,E=16,L=4,H=2,Q=1,O="",M=G.$listItem,K=G.$tableContent,R=r({},G.$nonEditable,G.$empty),N=G.$block,T=100,P="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",V=P+"border-color:transparent;display:block;border-style:solid;",W="<span>"+O+"</span>";C[CKEDITOR.ENTER_BR]="br",C[CKEDITOR.ENTER_P]="p",C[CKEDITOR.ENTER_DIV]="div",f.prototype={set:function(a,b,c){
return this.properties=a+b+(c||Q),this},is:function(a){return(this.properties&a)==a}};var S=function(){function a(b,c){var d=b.$.elementFromPoint(c.x,c.y);return d&&d.nodeType?new CKEDITOR.dom.element(d):null}return function(b,c,d){if(!b.mouse)return null;var e=b.doc,f=b.line.wrap,g=a(e,d=d||b.mouse);return c&&j(b,g)&&(f.hide(),g=a(e,d),f.show()),!g||g.type!=CKEDITOR.NODE_ELEMENT||!g.$||B.ie&&B.version<9&&!b.boundary.equals(g)&&!b.boundary.contains(g)?null:g}}(),Y=CKEDITOR.dom.walker.whitespaces(),Z=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),ba=function(){function b(d){var g,h,i;if(!k(f=d.element)||f.contains(d.editable)||f.isReadOnly())return null
;if(a(0,g=(i=w(d,function(a,b){return!b.equals(a)},function(a,b){return S(a,!0,b)},f)).upper,h=i.lower))return i.set(F,8);if(g&&f.contains(g))for(;!g.getParent().equals(f);)g=g.getParent();else g=f.getFirst(function(a){return c(d,a)});if(h&&f.contains(h))for(;!h.getParent().equals(f);)h=h.getParent();else h=f.getLast(function(a){return c(d,a)});if(!g||!h)return null;if(u(d,g),u(d,h),!(d.mouse.y>g.size.top&&d.mouse.y<h.size.bottom))return null;for(var j,m,n,l,f=Number.MAX_VALUE;h&&!h.equals(g)&&(m=g.getNext(d.isRelevant));)(j=Math.abs(e(d,g,m)-d.mouse.y))<f&&(f=j,n=g,l=m),u(d,g=m);return n&&l&&d.mouse.y>n.size.top&&d.mouse.y<l.size.bottom?(i.upper=n,i.lower=l
,i.set(F,8)):null}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||Z(b)||l(b)||j(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var e,d=b(c);if(e=d){e=d.upper;var f=d.lower;e=!(!e||!f||l(f)||l(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f))&&!!(n(c,e)&&n(c,f)&&a(0,e,f))}return e?d:null}}(),X=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function f(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(c){var e=0,b=this.path
;c.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var b=this;e=1,a.once("beforePaste",f),a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",{type:"html",dataValue:c.dataValue}),a.fire("afterCommandExec",{name:"pastefromword",command:b,returnValue:!!c})})}}),c.ui.addButton&&c.ui.addButton("PasteFromWord",{label:c.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),c.on("pasteState",function(a){c.getCommand("pastefromword").setState(a.data)}),c.on("paste",function(f){var i=f.data,d=i.dataValue;if(d&&(e||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(d))){var h=function(a,e,b
){var f=CKEDITOR.cleanWord;return f?b():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||e+"filter/default.js"),CKEDITOR.scriptLoader.load(a,b,null,!0)),!f}(c,b,function(){h?c.fire("paste",i):(!c.config.pasteFromWordPromptCleanup||e||confirm(c.lang.pastefromword.confirmCleanup))&&(i.dataValue=CKEDITOR.cleanWord(d,c)),e=0});h&&f.cancel()}},null,null,3)}})}(),function(){var a={canUndo:!1,async:!0,exec:function(f){f.getClipboardData({title:f.lang.pastetext.title},function(c){c&&f.fire("paste",{type:"text",dataValue:c.dataValue}),f.fire("afterCommandExec",{name:"pastetext",command:a,returnValue:!!c})})}};CKEDITOR.plugins.add("pastetext",{
requires:"clipboard",init:function(f){f.addCommand("pastetext",a),f.ui.addButton&&f.ui.addButton("PasteText",{label:f.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),f.config.forcePasteAsPlainText&&f.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")}),f.on("pasteState",function(a){f.getCommand("pastetext").setState(a.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),
CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var d,f=a._.removeFormatRegex||(a._.removeFormatRegex=RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),c=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),e=CKEDITOR.plugins.removeformat.filter,b=a.getSelection().getRanges(),g=b.createIterator(),i=function(a){return a.type==CKEDITOR.NODE_ELEMENT};d=g.getNextRange();){d.collapsed||d.enlarge(CKEDITOR.ENLARGE_ELEMENT);var h=d.createBookmark(),j=h.startNode,k=h.endNode,l=function(b){for(var h,c=a.elementPath(b),d=c.elements,g=1;(h=d[g])&&(!h.equals(c.block)&&!h.equals(c.blockLimit
));g++)f.test(h.getName())&&e(a,h)&&b.breakParent(h)};if(l(j),k)for(l(k),j=j.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);j&&!j.equals(k);)if(j.isReadOnly()){if(j.getPosition(k)&CKEDITOR.POSITION_CONTAINS)break;j=j.getNext(i)}else l=j.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==j.getName()&&j.data("cke-realelement")||!e(a,j)||(f.test(j.getName())?j.remove(1):(j.removeAttributes(c),a.fire("removeFormatCleanup",j))),j=l;d.moveToBookmark(h)}a.forceNextSelectionCheck(),a.getSelection().selectRanges(b)}}},filter:function(a,f){for(var c=a._.removeFormatFilters||[],e=0;e<c.length;e++)if(!1===c[e](f))return!1;return!0}},
CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(a)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(a){var f,c,e,b;function g(g){var h=f,i=c,k=h+(g.data.$.screenX-e)*("rtl"==j?-1:1);g=i+(g.data.$.screenY-b);l&&(h=Math.max(d.resize_minWidth,Math.min(k,d.resize_maxWidth))),o&&(i=Math.max(d.resize_minHeight,Math.min(g,d.resize_maxHeight))),
a.resize(l?h:null,i)}function i(){CKEDITOR.document.removeListener("mousemove",g),CKEDITOR.document.removeListener("mouseup",i),a.document&&(a.document.removeListener("mousemove",g),a.document.removeListener("mouseup",i))}var d=a.config,h=a.ui.spaceId("resizer"),j=a.element?a.element.getDirection(1):"ltr";if(!d.resize_dir&&(d.resize_dir="vertical"),void 0===d.resize_maxWidth&&(d.resize_maxWidth=3e3),void 0===d.resize_maxHeight&&(d.resize_maxHeight=3e3),void 0===d.resize_minWidth&&(d.resize_minWidth=750),void 0===d.resize_minHeight&&(d.resize_minHeight=250),!1!==d.resize_enabled){var k=null,l=("both"==d.resize_dir||"horizontal"==d.resize_dir
)&&d.resize_minWidth!=d.resize_maxWidth,o=("both"==d.resize_dir||"vertical"==d.resize_dir)&&d.resize_minHeight!=d.resize_maxHeight,n=CKEDITOR.tools.addFunction(function(h){k||(k=a.getResizable()),f=k.$.offsetWidth||0,c=k.$.offsetHeight||0,e=h.screenX,b=h.screenY,d.resize_minWidth>f&&(d.resize_minWidth=f),d.resize_minHeight>c&&(d.resize_minHeight=c),CKEDITOR.document.on("mousemove",g),CKEDITOR.document.on("mouseup",i),a.document&&(a.document.on("mousemove",g),a.document.on("mouseup",i)),h.preventDefault&&h.preventDefault()});a.on("destroy",function(){CKEDITOR.tools.removeFunction(n)}),a.on("uiSpace",function(b){if("bottom"==b.data.space){var c="";l&&!o&&(
c=" cke_resizer_horizontal"),!l&&o&&(c=" cke_resizer_vertical");var d='<span id="'+h+'" class="cke_resizer'+c+" cke_resizer_"+j+'" title="'+CKEDITOR.tools.htmlEncode(a.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event)">'+("ltr"==j?"":"")+"</span>";b.data.html="ltr"==j&&"ltr"==c?b.data.html+d:d+b.data.html}},a,null,100),a.on("maximize",function(b){a.ui.space("resizer")[b.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("selectall",{init:function(a){a.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(a){var c=a.editable();if(c.is("textarea"))a=c.$,CKEDITOR.env.ie?a.createTextRange(
).execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(c.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var e=a.createRange();e.selectNodeContents(c),e.select()}a.forceNextSelectionCheck(),a.selectionChange()}},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SelectAll",{label:a.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}}),function(){function a(a,e,b){var i,g=CKEDITOR.document.getById(b);g&&(b=a.fire("uiSpace",{space:e,html:""}).html)&&(a.on("uiSpace",function(a){a.data.space==e&&a.cancel()},null,null,1),i=g.append(CKEDITOR.dom.element.createFromHtml(f.output({id:a.id,name:a.name,
langDir:a.lang.dir,langCode:a.langCode,space:e,spaceId:a.ui.spaceId(e),content:b}))),g.getCustomData("cke_hasshared")?i.hide():g.setCustomData("cke_hasshared",1),i.unselectable(),i.on("mousedown",function(a){(a=a.data).getTarget().hasAscendant("a",1)||a.preventDefault()}),a.focusManager.add(i,1),a.on("focus",function(){for(var b,a=0,c=g.getChildren();b=c.getItem(a);a++)b.type==CKEDITOR.NODE_ELEMENT&&!b.equals(i)&&b.hasClass("cke_shared")&&b.hide();i.show()}),a.on("destroy",function(){i.remove()}))}var f=CKEDITOR.addTemplate("sharedcontainer",
'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_shared cke_detached cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="presentation"><div class="cke_inner"><div id="{spaceId}" class="cke_{space}" role="presentation">{content}</div></div></div>');CKEDITOR.plugins.add("sharedspace",{init:function(c){c.on("loaded",function(){var e=c.config.sharedSpaces;if(e)for(var b in e)a(c,b,e[b])},null,null,9)}})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(f){function c(){var a=b&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle(
"height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),a&&this.focus()}if(f.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var e=CKEDITOR.plugins.sourcearea;f.addMode("source",function(b){var e=f.ui.space("contents").getDocument().createElement("textarea");e.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",f.config.sourceAreaTabSize||4))),e.setAttribute("dir","ltr"),e.addClass("cke_source cke_reset cke_enable_context_menu"),f.ui.space("contents").append(e),(e=f.editable(
new a(f,e))).setData(f.getData(1)),CKEDITOR.env.ie&&(e.attachListener(f,"resize",c,e),e.attachListener(CKEDITOR.document.getWindow(),"resize",c,e),CKEDITOR.tools.setTimeout(c,0,e)),f.fire("ariaWidget",this),b()}),f.addCommand("source",e.commands.source),f.ui.addButton&&f.ui.addButton("Source",{label:f.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),f.on("mode",function(){f.getCommand("source").setState("source"==f.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var b=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a),this.status="ready",
this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){a.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot"),a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,
ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var f=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),a.addCommand("specialchar",{exec:function(){var c=a.langCode;c=f.availableLangs[c]?c:f.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(f.path+"dialogs/lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,
f.langEntries[c]),a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),
CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(
" "),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var f=a.config,c=a.lang.stylescombo,e={},b=[],g=[];a.on("stylesSet",function(c){if(c=c.data.styles){for(var d,h,j,k=0,l=c.length;k<l;k++)d=c[k],a.blockless&&d.element in CKEDITOR.dtd.$block||(h=d.name,d=new CKEDITOR.style(d),a.filter.customConfig&&!a.filter.check(d)||(d._name=h,d._.enterMode=f.enterMode,d._.type=j=d.assignedTo||d.type,d._.weight=k+1e3*(j==CKEDITOR.STYLE_OBJECT?1:j==CKEDITOR.STYLE_BLOCK?2:3),e[h]=d,b.push(d),g.push(d)));b.sort(function(a,b){return a._.weight-b._.weight})}}),a.ui.addRichCombo("Styles",{label:c.label,title:c.panelTitle,toolbar:"styles,10",
allowedContent:g,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),multiSelect:!0,attributes:{"aria-label":c.panelTitle}},init:function(){var a,d,e,f,g,l;for(g=0,l=b.length;g<l;g++)d=(a=b[g])._name,(f=a._.type)!=e&&(this.startGroup(c["panelTitle"+f]),e=f),this.add(d,a.type==CKEDITOR.STYLE_OBJECT?d:a.buildPreview(),d);this.commit()},onClick:function(b){a.focus(),a.fire("saveSnapshot"),b=e[b];var c=a.elementPath();a[b.checkActive(c,a)?"removeStyle":"applyStyle"](b),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){for(var k,c=this.getValue(),f=0,g=(b=b.data.path.elements).length;f<g;f++)for(var l in k=b[f],e)if(
e[l].checkElementRemovable(k,!0,a))return void(l!=c&&this.setValue(l));this.setValue("")},this)},onOpen:function(){var b=a.getSelection().getSelectedElement(),d=(b=a.elementPath(b),[0,0,0,0]);for(var f in this.showAll(),this.unmarkAll(),e){var g=e[f],k=g._.type;g.checkApplicable(b,a,a.activeFilter)?d[k]++:this.hideItem(f),g.checkActive(b,a)&&this.mark(f)}d[CKEDITOR.STYLE_BLOCK]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_BLOCK]),d[CKEDITOR.STYLE_INLINE]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_INLINE]),d[CKEDITOR.STYLE_OBJECT]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var b=a.elementPath();if(b){for(var c in e)if(
e[c].checkApplicable(b,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){e={},b=[]}})}}),function(){function a(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(c){if(c.editable().hasFocus){var d,e=c.getSelection();if(d=new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root).contains({td:1,th:1},1)){e=c.createRange();if((f=CKEDITOR.tools.tryThese(function(){var c=d.getParent().$.cells[d.$.cellIndex+(a?-1:1)];return c.parentNode.parentNode,c},function(){var c;return(c=(c=d.getParent()).getAscendant("table").$.rows[c.$.rowIndex+(a?-1:1)]).cells[a?c.cells.length-1:0]}))||a){if(!f)return!0
;f=new CKEDITOR.dom.element(f),e.moveToElementEditStart(f),(!e.checkStartOfBlock()||!e.checkEndOfBlock())&&e.selectNodeContents(f)}else{for(var j=d.getAscendant("table").$,f=d.getParent().$.cells,k=(j=new CKEDITOR.dom.element(j.insertRow(-1),c.document),0),l=f.length;k<l;k++)j.append(new CKEDITOR.dom.element(f[k],c.document).clone(!1,!1)).appendBogus();e.moveToElementEditStart(j)}return e.select(!0),!0}}return!1}}}var f={editorFocus:!1,modes:{wysiwyg:1,source:1}},c={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},e={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(b){for(
var g=!1!==b.config.enableTabKeyTools,i=b.config.tabSpaces||0,d="";i--;)d+="";d&&b.on("key",function(a){9==a.data.keyCode&&(b.insertText(d),a.cancel())}),g&&b.on("key",function(a){(9==a.data.keyCode&&b.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&b.execCommand("selectPreviousCell"))&&a.cancel()}),b.addCommand("blur",CKEDITOR.tools.extend(c,f)),b.addCommand("blurBack",CKEDITOR.tools.extend(e,f)),b.addCommand("selectNextCell",a()),b.addCommand("selectPreviousCell",a(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(a,f){var e,b,g,i,d,h,c=void 0===f?this.getTabIndex():f;if(c<=0)for(d=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT
);d;){if(d.isVisible()&&0===d.getTabIndex()){g=d;break}d=d.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(d=this.getDocument().getBody().getFirst();d=d.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!e)if(!b&&d.equals(this)){if(b=!0,a){if(!(d=d.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;e=1}}else b&&!this.contains(d)&&(e=1);if(d.isVisible()&&!((h=d.getTabIndex())<0)){if(e&&h==c){g=d;break}c<h&&(!g||!i||h<i)?(g=d,i=h):g||0!==h||(g=d,i=h)}}g&&g.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(a,f){for(var e,b,g,d,c=void 0===f?this.getTabIndex():f,i=0,h=this.getDocument().getBody().getLast();h=h.getPreviousSourceNode(!1,
CKEDITOR.NODE_ELEMENT);){if(!e)if(!b&&h.equals(this)){if(b=!0,a){if(!(h=h.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;e=1}}else b&&!this.contains(h)&&(e=1);if(h.isVisible()&&!((d=h.getTabIndex())<0))if(c<=0){if(e&&0===d){g=h;break}i<d&&(g=h,i=d)}else{if(e&&d==c){g=h;break}d<c&&(!g||i<d)&&(g=h,i=d)}}g&&g.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function f(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,c){this.setState(c.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{
context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",f())),a.addCommand("tableDelete",f({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var c=b.getParent(),f=a.editable();1==c.getChildCount()&&!c.is("td","th")&&!c.equals(f)&&(b=c),(a=a.createRange()).moveToPosition(b,
CKEDITOR.POSITION_BEFORE_START),b.remove(),a.select()}}})),a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}}),a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")}),a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,
table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function a(a){function b(a){0<c.length||a.type!=CKEDITOR.NODE_ELEMENT||!o.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(d,a,"selected_cell",!0),c.push(a))}a=a.getRanges();for(var c=[],d={},e=0;e<a.length;e++){var f,g;if((f=a[e]).collapsed)(f=(f=f.getCommonAncestor()).getAscendant("td",!0)||f.getAscendant("th",!0))&&c.push(f);else for((f=new CKEDITOR.dom.walker(f)).guard=b;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(d,g,
"selected_cell",!0),c.push(g))}return CKEDITOR.dom.element.clearAllMarkers(d),c}function f(b,c){var f=(e=(d=a(b))[0]).getAscendant("table"),e=e.getDocument(),h=(g=d[0].getParent()).$.rowIndex,i=(d=d[d.length-1]).getParent().$.rowIndex+d.$.rowSpan-1,d=new CKEDITOR.dom.element(f.$.rows[i]),g=(h=c?h:i,c?g:d);for(f=(d=CKEDITOR.tools.buildTableMap(f))[h],h=c?d[h-1]:d[h+1],d=d[0].length,e=e.createElement("tr"),i=0;f[i]&&i<d;i++){var j;1<f[i].rowSpan&&h&&f[i]==h[i]?(j=f[i]).rowSpan=j.rowSpan+1:((j=new CKEDITOR.dom.element(f[i]).clone()).removeAttribute("rowSpan"),j.appendBogus(),e.append(j),j=j.$),i+=j.colSpan-1}c?e.insertBefore(g):e.insertAfter(g)}function c(b){
if(b instanceof CKEDITOR.dom.selection){for(var e=(d=a(b))[0].getAscendant("table"),f=CKEDITOR.tools.buildTableMap(e),g=(b=d[0].getParent().$.rowIndex,(d=d[d.length-1]).getParent().$.rowIndex+d.$.rowSpan-1),d=[],h=b;h<=g;h++){for(var i=f[h],j=new CKEDITOR.dom.element(e.$.rows[h]),k=0;k<i.length;k++){var l=new CKEDITOR.dom.element(i[k]),o=l.getParent().$.rowIndex;1==l.$.rowSpan?l.remove():(l.$.rowSpan=l.$.rowSpan-1,o==h&&((o=f[h+1])[k-1]?l.insertAfter(new CKEDITOR.dom.element(o[k-1])):new CKEDITOR.dom.element(e.$.rows[h+1]).append(l,1))),k+=l.$.colSpan-1}d.push(j)}for(f=e.$.rows,e=new CKEDITOR.dom.element(f[g+1]||(0<b?f[b-1]:null)||e.$.parentNode),
h=d.length;0<=h;h--)c(d[h]);return e}return b instanceof CKEDITOR.dom.element&&(1==(e=b.getAscendant("table")).$.rows.length?e.remove():b.remove()),null}function e(a,b){for(var c=b?1/0:0,d=0;d<a.length;d++){for(var e,f=b,g=(e=a[d]).getParent().$.cells,h=0,i=0;i<g.length;i++){var j=g[i];h=h+(f?1:j.colSpan);if(j==e.$)break}e=h-1,(b?e<c:c<e)&&(c=e)}return c}function b(b,c){for(var f=(d=a(b))[0].getAscendant("table"),g=e(d,1),d=e(d),h=(g=c?g:d,CKEDITOR.tools.buildTableMap(f)),i=(f=[],d=[],h.length),j=0;j<i;j++)f.push(h[j][g]),d.push(c?h[j][g-1]:h[j][g+1]);for(j=0;j<i;j++)f[j]&&(1<f[j].colSpan&&d[j]==f[j]?(g=f[j]).colSpan=g.colSpan+1:((g=new CKEDITOR.dom.element(
f[j]).clone()).removeAttribute("colSpan"),g.appendBogus(),g[c?"insertBefore":"insertAfter"].call(g,new CKEDITOR.dom.element(f[j])),g=g.$),j+=g.rowSpan-1)}function g(a,b){var c=a.getStartElement();if(c=c.getAscendant("td",1)||c.getAscendant("th",1)){var d=c.clone();d.appendBogus(),b?d.insertBefore(c):d.insertAfter(c)}}function i(b){if(b instanceof CKEDITOR.dom.selection){var e,c=(b=a(b))[0]&&b[0].getAscendant("table");a:{var f=0;e=b.length-1;for(var h,j,g={};h=b[f++];)CKEDITOR.dom.element.setMarker(g,h,"delete_cell",!0);for(f=0;h=b[f++];)if((j=h.getPrevious())&&!j.getCustomData("delete_cell")||(j=h.getNext())&&!j.getCustomData("delete_cell")){
CKEDITOR.dom.element.clearAllMarkers(g),e=j;break a}CKEDITOR.dom.element.clearAllMarkers(g),e=(j=(j=b[0].getParent()).getPrevious())?j.getLast():(j=(j=b[e].getParent()).getNext())?j.getChild(0):null}for(j=b.length-1;0<=j;j--)i(b[j]);e?d(e,!0):c&&c.remove()}else b instanceof CKEDITOR.dom.element&&(1==(c=b.getParent()).getChildCount()?c.remove():b.remove())}function d(a,b){var c=a.getDocument(),d=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(d.focus(),c.focus()),(c=new CKEDITOR.dom.range(c))["moveToElementEdit"+(b?"End":"Start")](a)||(c.selectNodeContents(a),c.collapse(!b)),c.select(!0)}function h(a,b,c){if(a=a[b],void 0===c)return a;for(
b=0;a&&b<a.length;b++){if(c.is&&a[b]==c.$)return b;if(b==c)return new CKEDITOR.dom.element(a[b])}return c.is?-1:null}function j(b,c,d){var f,g,e=a(b);if((c?1!=e.length:e.length<2)||(f=b.getCommonAncestor())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("table"))return!1;f=(b=e[0]).getAscendant("table");var i=CKEDITOR.tools.buildTableMap(f),j=i.length,k=i[0].length,l=b.getParent().$.rowIndex,o=h(i,l,b);if(c){var x;try{var y=parseInt(b.getAttribute("rowspan"),10)||1;g=parseInt(b.getAttribute("colspan"),10)||1,x=i["up"==c?l-y:"down"==c?l+y:l]["left"==c?o-g:"right"==c?o+g:o]}catch(B){return!1}if(!x||b.$==x)return!1;e["up"==c||"left"==c?"unshift":"push"](
new CKEDITOR.dom.element(x))}c=b.getDocument();var A=l,G=(y=x=0,!d&&new CKEDITOR.dom.documentFragment(c)),C=0;for(c=0;c<e.length;c++){var J=(g=e[c]).getParent(),D=g.getFirst(),F=g.$.colSpan,E=g.$.rowSpan,I=h(i,J=J.$.rowIndex,g);C=C+F*E,y=Math.max(y,I-o+F);x=Math.max(x,J-l+E),d||((E=(F=g).getBogus())&&E.remove(),F.trim(),g.getChildren().count()&&(J==A||!D||D.isBlockBoundary&&D.isBlockBoundary({br:1})||(A=G.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!A.is||!A.is("br"))&&G.append("br"),g.moveChildren(G)),c?g.remove():g.setHtml("")),A=J}if(d)return x*y==C;for(G.moveChildren(b),b.appendBogus(),k<=y?b.removeAttribute("rowSpan"):b.$.rowSpan=x,
j<=x?b.removeAttribute("colSpan"):b.$.colSpan=y,c=(e=(d=new CKEDITOR.dom.nodeList(f.$.rows)).count())-1;0<=c;c--)(f=d.getItem(c)).$.cells.length||(f.remove(),e++);return b}function k(b,c){if(1<(d=a(b)).length)return!1;if(c)return!0;var d,l,f=(e=(d=d[0]).getParent()).getAscendant("table"),j=h(g=CKEDITOR.tools.buildTableMap(f),i=e.$.rowIndex,d);if(1<(k=d.$.rowSpan)){l=Math.ceil(k/2);for(var o,k=Math.floor(k/2),e=i+l,g=(f=new CKEDITOR.dom.element(f.$.rows[e]),h(g,e)),i=(e=d.clone(),0);i<g.length;i++){if((o=g[i]).parentNode==f.$&&j<i){e.insertBefore(new CKEDITOR.dom.element(o));break}o=null}o||f.append(e)}else for(k=l=1,(f=e.clone()).insertAfter(e),f.append(
e=d.clone()),o=h(g,i),j=0;j<o.length;j++)o[j].rowSpan++;return e.appendBogus(),d.$.rowSpan=l,e.$.rowSpan=k,1==l&&d.removeAttribute("rowSpan"),1==k&&e.removeAttribute("rowSpan"),e}function l(b,c){if(1<(d=a(b)).length)return!1;if(c)return!0;var d,e=(d=d[0]).getParent(),f=e.getAscendant("table"),g=h(f=CKEDITOR.tools.buildTableMap(f),e.$.rowIndex,d);if(1<(i=d.$.colSpan))e=Math.ceil(i/2),i=Math.floor(i/2);else{for(var i=e=1,j=[],k=0;k<f.length;k++){var l=f[k];j.push(l[g]),1<l[g].rowSpan&&(k+=l[g].rowSpan-1)}for(f=0;f<j.length;f++)j[f].colSpan++}return(f=d.clone()).insertAfter(d),f.appendBogus(),d.$.colSpan=e,f.$.colSpan=i,1==e&&d.removeAttribute("colSpan"),
1==i&&f.removeAttribute("colSpan"),f}var o=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(e){function h(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function o(a,b){var c=e.addCommand(a,b);e.addFeature(c)}var q=e.lang.table;o("cellProperties",new CKEDITOR.dialogCommand("cellProperties",h({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",
this.path+"dialogs/tableCell.js"),o("rowDelete",h({requiredContent:"table",exec:function(a){d(c(a=a.getSelection()))}})),o("rowInsertBefore",h({requiredContent:"table",exec:function(a){f(a=a.getSelection(),!0)}})),o("rowInsertAfter",h({requiredContent:"table",exec:function(a){f(a=a.getSelection())}})),o("columnDelete",h({requiredContent:"table",exec:function(b){for(var g,h,c=(b=a(b=b.getSelection()))[0],e=b[b.length-1],f=(b=c.getAscendant("table"),CKEDITOR.tools.buildTableMap(b)),i=[],j=0,k=f.length;j<k;j++)for(var l=0,m=f[j].length;l<m;l++)f[j][l]==c.$&&(g=l),f[j][l]==e.$&&(h=l);for(j=g;j<=h;j++)for(l=0;l<f.length;l++)e=f[l],c=new CKEDITOR.dom.element(
b.$.rows[l]),(e=new CKEDITOR.dom.element(e[j])).$&&(1==e.$.colSpan?e.remove():e.$.colSpan=e.$.colSpan-1,l+=e.$.rowSpan-1,c.$.cells.length||i.push(c));h=b.$.rows[0]&&b.$.rows[0].cells,g=new CKEDITOR.dom.element(h[g]||(g?h[g-1]:b.$.parentNode)),i.length==k&&b.remove(),g&&d(g,!0)}})),o("columnInsertBefore",h({requiredContent:"table",exec:function(a){b(a=a.getSelection(),!0)}})),o("columnInsertAfter",h({requiredContent:"table",exec:function(a){b(a=a.getSelection())}})),o("cellDelete",h({requiredContent:"table",exec:function(a){i(a=a.getSelection())}})),o("cellMerge",h({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){d(
j(a.getSelection()),!0)}})),o("cellMergeRight",h({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){d(j(a.getSelection(),"right"),!0)}})),o("cellMergeDown",h({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){d(j(a.getSelection(),"down"),!0)}})),o("cellVerticalSplit",h({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){d(k(a.getSelection()))}})),o("cellHorizontalSplit",h({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){d(l(a.getSelection()))}})),o("cellInsertBefore",h({requiredContent:"table",exec:function(a){g(a=a.getSelection(),!0)}})),o(
"cellInsertAfter",h({requiredContent:"table",exec:function(a){g(a=a.getSelection())}})),e.addMenuItems&&e.addMenuItems({tablecell:{label:q.cell.menu,group:"tablecell",order:1,getItems:function(){var b=e.getSelection(),c=a(b);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:j(b,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:j(b,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:j(b,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:k(b,!0
)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:l(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<c.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:q.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:q.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:q.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:q.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:q.cell.mergeRight,group:"tablecell",
command:"cellMergeRight",order:17},tablecell_merge_down:{label:q.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:q.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:q.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:q.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:q.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}
},tablerow_insertBefore:{label:q.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:q.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:q.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:q.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:q.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{
label:q.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:q.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),e.contextMenu&&e.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:a},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(a){a=a.$.rows;for(var f=-1,c=[],e=0;e<a.length;e++){!c[++f]&&(c[f]=[]);for(var b=-1,g=0;g<a[e].cells.length;g++){var i=a[e].cells[g];for(
b++;c[f][b];)b++;for(var d=isNaN(i.colSpan)?1:i.colSpan,h=(i=isNaN(i.rowSpan)?1:i.rowSpan,0);h<i;h++){c[f+h]||(c[f+h]=[]);for(var j=0;j<d;j++)c[f+h][b+j]=a[e].cells[g]}b+=d-1}}return c},CKEDITOR.plugins.add("taoqtiimage",{init:function(a){a.addCommand("insertQtiImage",{exec:function(a){var c=a.config.taoQtiItem;"function"==typeof c.insert&&(a.insertHtml('<span data-new="true" data-qti-class="img" class="widget-box">&nbsp;</span>'),c.insert.call(a))}}),a.ui.addButton("TaoQtiImage",{label:"Insert Image",command:"insertQtiImage",icon:this.path+"images/taoqtiimage.png"})}}),CKEDITOR.plugins.add("taoqtimaths",{init:function(a){a.addCommand("insertQtiMaths",{
exec:function(a){var c=a.config.taoQtiItem;"function"==typeof c.insert&&(a.insertHtml('<span data-new="true" data-qti-class="math" class="widget-box">&nbsp;</span>'),c.insert.call(a))}}),a.ui.addButton("TaoQtiMaths",{label:"Insert Math Expression",command:"insertQtiMaths",icon:this.path+"images/taoqtimaths.png"})}}),CKEDITOR.plugins.add("taoqtimedia",{init:function(a){a.addCommand("insertQtiMedia",{exec:function(a){var c=a.config.taoQtiItem;"function"==typeof c.insert&&(a.insertHtml('<span data-new="true" data-qti-class="object" class="widget-box">&nbsp;</span>'),c.insert.call(a))}}),a.ui.addButton("TaoQtiMedia",{label:"Insert Media",
command:"insertQtiMedia",icon:this.path+"images/taoqtimedia.png"})}}),CKEDITOR.plugins.add("taoqtitable",{requires:"dialog",icons:this.path+"images/taoqtitable.png",hidpi:!1,init:function(a){var f=!0;if("table"===a.element.getAttribute("data-qti-class"))f=!1;else if(a.blockless)return;var c=a.lang.table;a.addCommand("taoqtitable",new CKEDITOR.dialogCommand("taoqtitable",{context:"table",allowedContent:"table[summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table"})),a.addCommand("taoqtitableProperties",new CKEDITOR.dialogCommand("taoqtitableProperties")),
f&&a.ui.addButton&&a.ui.addButton("TaoQtiTable",{label:c.toolbar,command:"taoqtitable",toolbar:"insert,30",icon:this.path+"images/taoqtitable.png"}),CKEDITOR.dialog.add("taoqtitable",this.path+"dialogs/taoqtitable.js"),CKEDITOR.dialog.add("taoqtitableProperties",this.path+"dialogs/taoqtitable.js")}}),CKEDITOR.plugins.add("taounderline",{init:function(a){var f=new CKEDITOR.style({element:"span",attributes:{class:"txt-underline"}}),c=["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]];c.unshift(f),a.attachStyleStateChange(f,function(c){!a.readOnly&&a.getCommand("spanUnderline").setState(c)}),a.addCommand("spanUnderline",
new CKEDITOR.styleCommand(f,{contentForms:c})),a.ui.addButton("TaoUnderline",{label:"Underline",command:"spanUnderline",icon:this.path+"images/taounderline.png"})}}),CKEDITOR.plugins.add("taotooltip",{init:function(a){function f(a){var b;return b=(a=a.getSelection().getNative()).getRangeAt(0),(b=a.isCollapsed&&!e(b.startContainer))||((a=!a.isCollapsed&&a.getRangeAt(0))?(h=!1,function c(a){var b,e,a=a.childNodes;for(e=0;e<a.length;e++)if(b=a[e],!h&&b.nodeType===window.Node.ELEMENT_NODE){var f=b.nodeName&&b.nodeName.toLowerCase();-1===d.indexOf(f)?h=!0:c(b)}}(a.cloneContents()),(b=""!==a.toString().trim())&&(b=(
a.startContainer.nodeType===window.Node.TEXT_NODE?a.startContainer.parentNode:a.startContainer).isSameNode(a.endContainer.nodeType===window.Node.TEXT_NODE?a.endContainer.parentNode:a.endContainer)&&!h&&!e(a.startContainer))):b=!1),b}function e(a){return new CKEDITOR.dom.element(a).getAscendant(function(a){return a.$&&a.$.dataset&&"_tooltip"===a.$.dataset.qtiClass})}function g(a){var b=a.getCommand(i);b&&(f(a)?b.setState(CKEDITOR.TRISTATE_OFF):b.setState(CKEDITOR.TRISTATE_DISABLED))}var h,i="insertTaoTooltip",d=["b","strong","i","em","s","sub","sup","u"];a.addCommand(i,{exec:function(a){var g,c=a.config.taoQtiItem,d=a.getSelection(),e=d.getNative();f(a
)&&"function"==typeof c.insert&&((g=new CKEDITOR.dom.element("span",a.document)).setAttributes({"data-new":!0,"data-qti-class":"_tooltip",class:"widget-box"}),e.isCollapsed?g.appendHtml("&nbsp;"):g.append(function(a){return a=a.getRanges()[0].extractContents().$,new CKEDITOR.dom.element(a)}(d)),a.insertElement(g),c.insert.call(a,g.$))}}),a.on("instanceReady",function(){var b=a.editable();b.attachListener(b,"mouseup",function(){g(a)}),b.attachListener(b,"keyup",function(){g(a)})}),a.ui.addButton("TaoTooltip",{label:"Tooltip",command:i,icon:this.path+"images/taotooltip.png"})}}),CKEDITOR.plugins.add("taohighlight",{init:function(a){var f=new CKEDITOR.style({
element:"span",attributes:{class:"txt-highlight"}}),c=["span"];c.unshift(f),a.attachStyleStateChange(f,function(c){!a.readOnly&&a.getCommand("spanHighlight").setState(c)}),a.addCommand("spanHighlight",new CKEDITOR.styleCommand(f,{contentForms:c})),a.ui.addButton("TaoHighlight",{label:"Highlight",command:"spanHighlight",icon:this.path+"images/taohighlight.png"})}}),CKEDITOR.plugins.add("taoqtiinclude",{init:function(a){a.addCommand("insertQtiInclude",{exec:function(a){var c=a.config.taoQtiItem;"function"==typeof c.insert&&(a.insertHtml('<span data-new="true" data-qti-class="include" class="widget-box">&nbsp;</span>'),c.insert.call(a))}}),a.ui.addButton(
"TaoQtiInclude",{label:"Insert Shared Stimulus",command:"insertQtiInclude",icon:this.path+"images/taoqtiimage.png"})}}),CKEDITOR.plugins.add("taoqtiprintedvariable",{init:function(a){a.addCommand("insertQtiPrintedVariable",{exec:function(a){var c=a.config.taoQtiItem;"function"==typeof c.insert&&(a.insertHtml('<span data-new="true" data-qti-class="printedVariable" class="widget-box">&nbsp;</span>'),c.insert.call(a))}}),a.ui.addButton("TaoQtiPrintedVariable",{label:"Insert Printed Variable",command:"insertQtiPrintedVariable",icon:this.path+"images/taoqtiprintedvariable.png"})}}),function(){function a(a){function d(c,d){if(d.length){c.items?c.items.push(
a.ui.create("-")):c.items=[];for(var e;e=d.shift();)e="string"==typeof e?e:e.name,j&&-1!=CKEDITOR.tools.indexOf(j,e)||(e=a.ui.create(e))&&a.addFeature(e)&&c.items.push(e)}}var j=(j=a.config.removeButtons)&&j.split(","),k=a.config.toolbar;return"string"==typeof k&&(k=a.config["toolbar_"+k]),a.toolbar=k?function(a){var c,e,f,b=[];for(c=0;c<a.length;++c)f={},"/"==(e=a[c])?b.push(e):CKEDITOR.tools.isArray(e)?(d(f,CKEDITOR.tools.clone(e)),b.push(f)):e.items&&(d(f,CKEDITOR.tools.clone(e.items)),f.name=e.name,b.push(f));return b}(k):function(){for(var g=function(){var d,f,g,c={};for(d in a.ui.items)f=a.ui.items[d],g=(g=f.toolbar||"others").split(","),f=g[0],
g=parseInt(g[1]||-1,10),c[f]||(c[f]=[]),c[f].push({name:d,order:g});for(f in c)c[f]=c[f].sort(function(a,b){return a.order==b.order?0:b.order<0?-1:a.order<0?1:a.order<b.order?-1:1});return c}(),h=CKEDITOR.tools.clone(a.config.toolbarGroups)||f(a),j=0;j<h.length;j++){var k=h[j];if("/"!=k){"string"==typeof k&&(k=h[j]={name:k});var p,q=k.groups;if(q)for(var t=0;t<q.length;t++)(p=g[p=q[t]])&&d(k,p);(p=g[k.name])&&d(k,p)}}return h}()}function f(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{
name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var c=function(){this.toolbars=[],this.focusCommandExecuted=!1};c.prototype.focus=function(){for(var c,a=0;c=this.toolbars[a++];)for(var d,e=0;d=c.items[e++];)if(d.focus)return void d.focus()};var e={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}}
;CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(b){var f,i=function(a,c){var e,o=(k="rtl"==b.lang.dir)?37:39,k=k?39:37,l=void 0===(l=b.config.toolbarGroupCycling)||l;switch(c){case 9:case CKEDITOR.SHIFT+9:for(;!e||!e.items.length;)if((e=9==c?(e?e.next:a.toolbar.next)||b.toolbox.toolbars[0]:(e?e.previous:a.toolbar.previous)||b.toolbox.toolbars[b.toolbox.toolbars.length-1]).items.length)for(a=e.items[f?e.items.length-1:0];a&&!a.focus;)(a=f?a.previous:a.next)||(e=0);return a&&a.focus(),!1;case o:for(e=a;!(e=e.next)&&l&&(e=a.toolbar.items[0]),e&&!e.focus;);return e?e.focus():i(a,9),!1;case 40:return a.button&&a.button.hasArrow?(b.once(
"panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)}),a.execute()):i(a,40==c?o:k),!1;case k:case 38:for(e=a;!(e=e.previous)&&l&&(e=a.toolbar.items[a.toolbar.items.length-1]),e&&!e.focus;);return e?e.focus():(f=1,i(a,CKEDITOR.SHIFT+9),f=0),!1;case 27:return b.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};b.on("uiSpace",function(d){if(d.data.space==b.config.toolbarLocation){d.removeListener(),b.toolbox=new c;var g,l,f=['<span id="',e=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',b.lang.toolbar.toolbars,"</span>",'<span id="'+b.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',e,
'" onmousedown="return false;">'],e=!1!==b.config.toolbarStartupExpanded;b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&f.push('<span class="cke_toolbox_main"'+(e?">":' style="display:none">'));for(var o=b.toolbox.toolbars,n=a(b),m=0;m<n.length;m++){var p,t,u,q=0,s=n[m];if(s)if(g&&(f.push("</span>"),l=g=0),"/"===s)f.push('<span class="cke_toolbar_break"></span>');else{u=s.items||s;for(var v=0;v<u.length;v++){var w,z=u[v];if(z)if(z.type==CKEDITOR.UI_SEPARATOR)l=g&&z;else{if(w=!1!==z.canGroup,!q){p=CKEDITOR.tools.getNextId(),q={id:p,items:[]},t=s.name&&(b.lang.toolbar.toolbarGroups[s.name]||s.name),f.push('<span id="',p,
'" class="cke_toolbar"',t?' aria-labelledby="'+p+'_label"':"",' role="toolbar">'),t&&f.push('<span id="',p,'_label" class="cke_voice_label">',t,"</span>"),f.push('<span class="cke_toolbar_start"></span>');var r=o.push(q)-1;0<r&&(q.previous=o[r-1],q.previous.next=q)}w?g||(f.push('<span class="cke_toolgroup" role="presentation">'),g=1):g&&(f.push("</span>"),g=0),p=function(a){a=a.render(b,f),0<(r=q.items.push(a)-1)&&(a.previous=q.items[r-1],a.previous.next=a),a.toolbar=q,a.onkey=i,a.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}},l&&(p(l),l=0),p(z)}}g&&(f.push("</span>"),l=g=0),q&&f.push('<span class="cke_toolbar_end"></span></span>')}}if(
b.config.toolbarCanCollapse&&f.push("</span>"),b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var x=CKEDITOR.tools.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){CKEDITOR.tools.removeFunction(x)}),b.addCommand("toolbarCollapse",{readOnly:1,exec:function(a){var b=a.ui.space("toolbar_collapser"),c=b.getPrevious(),d=a.ui.space("contents"),e=c.getParent(),f=parseInt(d.$.style.height,10),g=e.$.offsetHeight,h=b.hasClass("cke_toolbox_collapser_min");h?(c.show(),b.removeClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarCollapse)):(c.hide(),b.addClass(
"cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarExpand)),b.getFirst().setText(h?"":""),d.setStyle("height",f-(e.$.offsetHeight-g)+"px"),a.fire("resize")},modes:{wysiwyg:1,source:1}}),b.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),f.push('<a title="'+(e?b.lang.toolbar.toolbarCollapse:b.lang.toolbar.toolbarExpand)+'" id="'+b.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),e||f.push(" cke_toolbox_collapser_min"),f.push('" onclick="CKEDITOR.tools.callFunction('+x+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}f.push("</span>"),
d.data.html=d.data.html+f.join("")}}),b.on("destroy",function(){if(this.toolbox){var a,c,e,f,b=0;for(a=this.toolbox.toolbars;b<a.length;b++)for(e=a[b].items,c=0;c<e.length;c++)(f=e[c]).clickFn&&CKEDITOR.tools.removeFunction(f.clickFn),f.keyDownFn&&CKEDITOR.tools.removeFunction(f.keyDownFn)}}),b.on("uiReady",function(){var a=b.ui.space("toolbox");a&&b.focusManager.add(a,1)}),b.addCommand("toolbarFocus",e),b.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),b.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),b.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}
}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,c,e){var d=f(this.editor),h=0===c,j={name:a};if(e){if(e=CKEDITOR.tools.search(d,function(a){return a.name==e}))return!e.groups&&(e.groups=[]),c&&0<=(c=CKEDITOR.tools.indexOf(e.groups,c))?void e.groups.splice(c+1,0,a):void(h?e.groups.splice(0,0,a):e.groups.push(a));c=null}c&&(c=CKEDITOR.tools.indexOf(d,function(a){return a.name==c})),h?d.splice(0,0,a):"number"==typeof c?d.splice(c+1,0,j):d.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){var a=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],f={8:1,46:1};CKEDITOR.plugins.add("undo",{
init:function(b){function e(a){i.enabled&&!1!==a.data.command.canUndo&&i.save()}function f(){i.enabled=!b.readOnly&&"wysiwyg"==b.mode,i.onChange()}var i=b.undoManager=new c(b),l=i.editingHandler=new g(i),o=b.addCommand("undo",{exec:function(){i.undo()&&(b.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),n=b.addCommand("redo",{exec:function(){i.redo()&&(b.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});b.setKeystroke([[a[0],"undo"],[a[1],"redo"],[a[2],"redo"]]),i.onChange=function(){o.setState(i.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),n.setState(i.redoable(
)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},b.on("beforeCommandExec",e),b.on("afterCommandExec",e),b.on("saveSnapshot",function(a){i.save(a.data&&a.data.contentOnly)}),b.on("contentDom",l.attachListeners,l),b.on("instanceReady",function(){b.fire("saveSnapshot")}),b.on("beforeModeUnload",function(){"wysiwyg"==b.mode&&i.save(!0)}),b.on("mode",f),b.on("readOnly",f),b.ui.addButton&&(b.ui.addButton("Undo",{label:b.lang.undo.undo,command:"undo",toolbar:"undo,10"}),b.ui.addButton("Redo",{label:b.lang.undo.redo,command:"redo",toolbar:"undo,20"})),b.resetUndo=function(){i.reset(),b.fire("saveSnapshot")},b.on("updateSnapshot",function(){
i.currentImage&&i.update()}),b.on("lockSnapshot",function(a){a=a.data,i.lock(a&&a.dontUpdate,a&&a.forceUpdate)}),b.on("unlockSnapshot",i.unlock,i)}}),CKEDITOR.plugins.undo={};var c=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=a.config.undoStackSize||20,this.strokesLimit=25,this.editor=a,this.reset()};c.prototype={type:function(a,b){var e=c.getKeyGroup(a),f=this.strokesRecorded[e]+1;b=b||f>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),b?(f=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[e]=f,
this.previousKeyGroup=e},keyGroupChanged:function(a){return c.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(a,b,c){var f=this.editor;if(this.locked||"ready"!=f.status||"wysiwyg"!=f.mode)return!1;var g=f.editable();if(!g||"ready"!=g.status)return!1;if(g=this.snapshots,b||(b=new e(f)),!1===b.contents
)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==c&&f.fire("change");return g.splice(this.index+1,g.length-this.index-1),g.length==this.limit&&g.shift(),this.index=g.push(b)-1,this.currentImage=b,!1!==c&&this.refreshState(),!0},restoreImage:function(a){var c,b=this.editor;a.bookmarks&&(b.focus(),c=b.getSelection()),this.locked={level:999},this.editor.loadSnapshot(a.contents),a.bookmarks?c.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&((c=this.editor.document.getBody().$.createTextRange()).collapse(!0),c.select()),this.locked=null,this.index=a.index,
this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),b.fire("change")},getNextImage:function(a){var e,b=this.snapshots,c=this.currentImage;if(c)if(a){for(e=this.index-1;0<=e;e--)if(a=b[e],!c.equalsContent(a))return a.index=e,a}else for(e=this.index+1;e<b.length;e++)if(a=b[e],!c.equalsContent(a))return a.index=e,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){
var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||(a=new e(this.editor));for(var b=this.index,c=this.snapshots;0<b&&this.currentImage.equalsContent(c[b-1]);)b-=1;c.splice(b,this.index-b+1,a),this.index=b,this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return!(!c.equalsContent(a)||c.equalsSelection(a))&&(this.currentImage=b[b.length-1]=a,!0)},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var c=null;if(b)c=!0;else{var f=new e(this.editor,!0)
;this.currentImage&&this.currentImage.equalsContent(f)&&(c=f)}this.locked={update:c,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;if(!(this.locked=null)===a)this.update();else if(a){var b=new e(this.editor,!0);a.equalsContent(b)||this.update()}}}},c.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},c.keyGroups={PRINTABLE:0,FUNCTIONAL:1},c.isNavigationKey=function(a){return!!c.navigationKeyCodes[a]},c.getKeyGroup=function(a){var b=c.keyGroups;return f[a]?b.FUNCTIONAL:b.PRINTABLE},c.getOppositeKeyGroup=function(a){var b=c.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL},
c.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&c.getKeyGroup(a)==c.keyGroups.FUNCTIONAL};var e=CKEDITOR.plugins.undo.Image=function(a,b){(this.editor=a).fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=c,b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0)),a.fire("afterUndoImage")},b=/\b(?:href|src|name)="[^"]*?"/gi;e.prototype={equalsContent:function(a){var c=this.contents;a=a.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(c=c.replace(b,""),a=a.replace(b,"")),c==a},equalsSelection:function(a){var b=this.bookmarks
;a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var e=b[c],f=a[c];if(e.startOffset!=f.startOffset||e.endOffset!=f.endOffset||!CKEDITOR.tools.arrayCompare(e.start,f.start)||!CKEDITOR.tools.arrayCompare(e.end,f.end))return!1}}return!0}};var g=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a,this.ignoreInputEvent=!1,this.keyEventsStack=new i,this.lastKeydownImage=null};g.prototype={onKeydown:function(b){var f=b.data.getKey();229!==f&&(-1<CKEDITOR.tools.indexOf(a,b.data.getKeystroke())?b.data.preventDefault():(this.keyEventsStack.cleanUp(b),b=this.undoManager,this.keyEventsStack.getLast(f
)||this.keyEventsStack.push(f),this.lastKeydownImage=new e(b.editor),(c.isNavigationKey(f)||this.undoManager.keyGroupChanged(f))&&(b.strokesRecorded[0]||b.strokesRecorded[1])&&(b.save(!1,this.lastKeydownImage,!1),b.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0)),this.keyEventsStack.increment(a.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var b=this.undoManager,f=(a=a.data.getKey(),this.keyEventsStack.getTotalInputs())
;this.keyEventsStack.remove(a),c.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new e(b.editor,!0))||(0<f?b.type(a):c.isNavigationKey(a)&&this.onNavigationKey(!0))},onNavigationKey:function(a){var b=this.undoManager;(a||!b.save(!0,null,!1))&&b.updateSelection(new e(b.editor)),b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,b=a.editable(),e=this;b.attachListener(b,"keydown",function(a){e.onKeydown(a),c.ieFunctionalKeysBug(a.data.getKey())&&e.onInput()},null,null,999),b.attachListener(b,CKEDITOR.env.ie?"keypress":"input",e.onInput,e,null,
999),b.attachListener(b,"keyup",e.onKeyup,e,null,999),b.attachListener(b,"paste",e.ignoreInputEventListener,e,null,999),b.attachListener(b,"drop",e.ignoreInputEventListener,e,null,999),b.attachListener(b.isInline()?b:a.document.getDocumentElement(),"click",function(){e.onNavigationKey()},null,null,999),b.attachListener(this.undoManager.editor,"blur",function(){e.keyEventsStack.remove(9)},null,null,999)}};var i=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};i.prototype={push:function(a){return this.stack[this.stack.push({keyCode:a,inputs:0})-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(
var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){return-1!=(a=this.getLastIndex(a))?this.stack[a]:null},increment:function(a){this.getLast(a).inputs++},remove:function(a){-1!=(a=this.getLastIndex(a))&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){!(a=a.data.$).ctrlKey&&!a.metaKey&&this.remove(17),a.shiftKey||this.remove(16),a.altKey||this.remove(18)}}}(),function(){function a(a){
var c=this.editor,e=a.document,d=e.body,h=e.getElementById("cke_actscrpt");h&&h.parentNode.removeChild(h),(h=e.getElementById("cke_shimscrpt"))&&h.parentNode.removeChild(h),(h=e.getElementById("cke_basetagscrpt"))&&h.parentNode.removeChild(h),d.contentEditable=!0,CKEDITOR.env.ie&&(d.hideFocus=!0,d.disabled=!0,d.removeAttribute("disabled")),delete this._.isLoadingData,this.$=d,e=new CKEDITOR.dom.document(e),this.setup(),this.fixInitialSelection(),CKEDITOR.env.ie&&(e.getDocumentElement().addClass(e.$.compatMode),c.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(e,"selectionchange",function(){var a=e.getBody(),b=c.getSelection(),d=b&&b.getRanges()[0]
;d&&a.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&d.startContainer.equals(a)&&setTimeout(function(){(d=c.getSelection().getRanges()[0]).startContainer.equals("body")||(a.getFirst().remove(1),d.moveToElementEditEnd(a),d.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&e.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){c.editable().focus()})}),function(a){function e(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var d=a.document.$;d.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing),d.execCommand("enableInlineTableEditing",!1,
!a.config.disableNativeTableHandles)}catch(f){}else CKEDITOR.env.ie&&CKEDITOR.env.version<11&&a.config.disableObjectResizing&&function(){var d;a.editable().attachListener(a,"selectionChange",function(){var c=a.getSelection().getSelectedElement();c&&(d&&(d.detachEvent("onresizestart",e),d=null),c.$.attachEvent("onresizestart",e),d=c.$)})}()}(c);try{c.document.$.execCommand("2D-position",!1,!0)}catch(j){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==c.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var b=a.data.getKeystroke();if(33==b||34==b)if(CKEDITOR.env.ie)setTimeout(function(){c.getSelection().scrollIntoView()},0);else if(
c.window.$.innerHeight>this.$.offsetHeight){var d=c.createRange();d[33==b?"moveToElementEditStart":"moveToElementEditEnd"](this),d.select(),a.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(e,"blur",function(){try{e.$.selection.empty()}catch(a){}}),CKEDITOR.env.iOS&&this.attachListener(e,"touchend",function(){a.focus()}),(d=c.document.getElementsByTag("title").getItem(0)).data("cke-title",d.getText()),CKEDITOR.env.ie&&(c.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),c.fire("contentDom"),this._.isPendingFocus&&(c.focus(),this._.isPendingFocus=!1),setTimeout(function(){
c.fire("dataReady")},0),CKEDITOR.env.ie&&setTimeout(function(){if(c.document){var a=c.document.$.body;a.runtimeStyle.marginBottom="0px",a.runtimeStyle.marginBottom=""}},1e3)},0,this)}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(c){function f(d){d&&d.removeListener(),a.editable(new e(a,h.$.contentWindow.document.body)),a.setData(a.getData(1),c)}var d="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",h=(
d=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(d)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+d+'" frameBorder="0"></iframe>'));h.setStyles({width:"100%",height:"100%"}),h.addClass("cke_wysiwyg_frame cke_reset");var j=a.ui.space("contents");j.append(h),(d=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&h.on("load",f);var k=a.title,l=a.fire("ariaEditorHelpLabel",{}).label;if(k&&(CKEDITOR.env.ie&&l&&(k=k+", "+l),h.setAttribute("title",k)),l){k=CKEDITOR.tools.getNextId();var o=CKEDITOR.dom.element.createFromHtml('<span id="'+k+'" class="cke_voice_label">'+l+"</span>");j.append(o,1),
h.setAttribute("aria-describedby",k)}a.on("beforeModeUnload",function(a){a.removeListener(),o&&o.remove()}),h.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"}),!d&&f(),CKEDITOR.env.webkit&&(d=function(){j.setStyle("width","100%"),h.hide(),h.setSize("width",j.getSize("width")),j.removeStyle("width"),h.show()},h.setCustomData("onResize",d),CKEDITOR.document.getWindow().on("resize",d)),a.fire("ariaWidget",h)})}}),CKEDITOR.editor.prototype.addContentsCss=function(a){var c=this.config,e=c.contentsCss;CKEDITOR.tools.isArray(e)||(c.contentsCss=e?[e]:[]),c.contentsCss.push(a)};var e=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments)
,this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(b){CKEDITOR.tools.setTimeout(a,0,this,b)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,e){var f=this.editor;if(e)this.setHtml(a),this.fixInitialSelection(),f.fire("dataReady");else{this._.isLoadingData=!0,f._.dataStore={id:1};var d=f.config,h=d.fullPage,j=d.docType,k=CKEDITOR.tools.buildStyleHtml(function(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var e,c=[];for(e in CKEDITOR.dtd.$removeEmpty)c.push(
"html.CSS1Compat "+e+"[contenteditable=false]");a.push(c.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');h||(k+=CKEDITOR.tools.buildStyleHtml(f.config.contentsCss));var l=d.baseHref?'<base href="'+d.baseHref+'" data-cke-temp="1" />':"";h&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return f.docType=j=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){
return f.xmlDeclaration=a,""})),a=f.dataProcessor.toHtml(a),a=h?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(a=a.replace(/<head[^>]*?>/,"$&"+l)),a=a.replace(/<\/head\s*>/,k+"$&"),j+a):d.docType+'<html dir="'+d.contentsLangDirection+'" lang="'+(d.contentsLanguage||f.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+k+"</head><body"+(d.bodyId?' id="'+d.bodyId+'"':"")+(d.bodyClass?' class="'+d.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(
a=a.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(a=a.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),d='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(d+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),
l&&CKEDITOR.env.ie&&CKEDITOR.env.version<10&&(d+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,d),this.clearCustomData(),this.clearListeners(),f.fire("contentDomUnload");var o=this.getDocument();try{o.write(a)}catch(n){setTimeout(function(){o.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();var c=(a=this.editor).config,d=(e=c.fullPage)&&a.docType,f=e&&a.xmlDeclaration,j=this.getDocument(),e=e?j.getDocumentElement().getOuterHtml():j.getBody().getHtml();return CKEDITOR.env.gecko&&c.enterMode!=CKEDITOR.ENTER_BR&&(e=e.replace(
/<br>(?=\s*(:?$|<\/body>))/,"")),e=a.dataProcessor.toDataFormat(e),f&&(e=f+"\n"+e),d&&(e=d+"\n"+e),e},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:e.baseProto.focus.call(this)},detach:function(){var c=(a=this.editor).document,a=a.window.getFrame();e.baseProto.detach.call(this),this.clearCustomData(),c.getDocumentElement().clearCustomData(),a.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(c=a.removeCustomData("onResize"))&&c.removeListener(),a.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,
CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),
CKEDITOR.config.plugins="basicstyles,bidi,blockquote,dialogui,dialog,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,menu,contextmenu,confighelper,dialogadvtab,entities,floatingspace,listblock,richcombo,font,format,horizontalrule,htmlwriter,indent,indentlist,indentblock,justify,fakeobjects,link,list,liststyle,magicline,pastefromword,pastetext,removeformat,resize,selectall,sharedspace,sourcearea,specialchar,stylescombo,tab,table,tabletools,taoqtiimage,taoqtimaths,taoqtimedia,taoqtitable,taounderline,taotooltip,taohighlight,taoqtiinclude,taoqtiprintedvariable,toolbar,undo,wysiwygarea",CKEDITOR.config.skin="tao",function(){var a=function(a
,c){for(var e=CKEDITOR.getUrl("plugins/"+c),b=(a=a.split(","),0);b<a.length;b++)CKEDITOR.skin.icons[a[b]]={path:e,offset:-a[++b],bgsize:a[++b]}};CKEDITOR.env.hidpi?a(
"about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,creatediv,456,,docprops-rtl,480,,docprops,504,,find-rtl,528,,find,552,,replace,576,,flash,600,,button,624,,checkbox,648,,form,672,,hiddenfield,696,,imagebutton,720,,radio,744,,select-rtl,768,,select,792,,textarea-rtl,816,,textarea,840,,textfield-rtl,864,,textfield,888,,horizontalrule,912,,iframe,936,,image,960,,indent-rtl,984,,indent,1008,,outdent-rtl,1032,,outdent,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,mathjax,1392,,maximize,1416,,newpage-rtl,1440,,newpage,1464,,pagebreak-rtl,1488,,pagebreak,1512,,pastefromword-rtl,1536,,pastefromword,1560,,pastetext-rtl,1584,,pastetext,1608,,placeholder,1632,,preview-rtl,1656,,preview,1680,,print,1704,,removeformat,1728,,save,1752,,selectall,1776,,showblocks-rtl,1800,,showblocks,1824,,smiley,1848,,source-rtl,1872,,source,1896,,sourcedialog-rtl,1920,,sourcedialog,1944,,specialchar,1968,,table,1992,,templates-rtl,2016,,templates,2040,,uicolor,2064,,redo-rtl,2088,,redo,2112,,undo-rtl,2136,,undo,2160,,simplebox,4368,auto"
,"icons_hidpi.png"):a(
"about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,creatediv,456,auto,docprops-rtl,480,auto,docprops,504,auto,find-rtl,528,auto,find,552,auto,replace,576,auto,flash,600,auto,button,624,auto,checkbox,648,auto,form,672,auto,hiddenfield,696,auto,imagebutton,720,auto,radio,744,auto,select-rtl,768,auto,select,792,auto,textarea-rtl,816,auto,textarea,840,auto,textfield-rtl,864,auto,textfield,888,auto,horizontalrule,912,auto,iframe,936,auto,image,960,auto,indent-rtl,984,auto,indent,1008,auto,outdent-rtl,1032,auto,outdent,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,mathjax,1392,auto,maximize,1416,auto,newpage-rtl,1440,auto,newpage,1464,auto,pagebreak-rtl,1488,auto,pagebreak,1512,auto,pastefromword-rtl,1536,auto,pastefromword,1560,auto,pastetext-rtl,1584,auto,pastetext,1608,auto,placeholder,1632,auto,preview-rtl,1656,auto,preview,1680,auto,print,1704,auto,removeformat,1728,auto,save,1752,auto,selectall,1776,auto,showblocks-rtl,1800,auto,showblocks,1824,auto,smiley,1848,auto,source-rtl,1872,auto,source,1896,auto,sourcedialog-rtl,1920,auto,sourcedialog,1944,auto,specialchar,1968,auto,table,1992,auto,templates-rtl,2016,auto,templates,2040,auto,uicolor,2064,auto,redo-rtl,2088,auto,redo,2112,auto,undo-rtl,2136,auto,undo,2160,auto,simplebox,2184,auto"
,"icons.png")}())}(),CKEDITOR.lang.en={undo:{redo:"Redo",undo:"Undo"},toolbar:{toolbarCollapse:"Collapse Toolbar",toolbarExpand:"Expand Toolbar",toolbarGroups:{document:"Document",clipboard:"Clipboard/Undo",editing:"Editing",forms:"Forms",basicstyles:"Basic Styles",paragraph:"Paragraph",links:"Links",insert:"Insert",styles:"Styles",colors:"Colors",tools:"Tools"},toolbars:"Editor toolbars"},table:{border:"Border size",caption:"Caption",cell:{menu:"Cell",insertBefore:"Insert Cell Before",insertAfter:"Insert Cell After",deleteCell:"Delete Cells",merge:"Merge Cells",mergeRight:"Merge Right",mergeDown:"Merge Down",splitHorizontal:"Split Cell Horizontally",
splitVertical:"Split Cell Vertically",title:"Cell Properties",cellType:"Cell Type",rowSpan:"Rows Span",colSpan:"Columns Span",wordWrap:"Word Wrap",hAlign:"Horizontal Alignment",vAlign:"Vertical Alignment",alignBaseline:"Baseline",bgColor:"Background Color",borderColor:"Border Color",data:"Data",header:"Header",yes:"Yes",no:"No",invalidWidth:"Cell width must be a number.",invalidHeight:"Cell height must be a number.",invalidRowSpan:"Rows span must be a whole number.",invalidColSpan:"Columns span must be a whole number.",chooseColor:"Choose"},cellPad:"Cell padding",cellSpace:"Cell spacing",column:{menu:"Column",insertBefore:"Insert Column Before",
insertAfter:"Insert Column After",deleteColumn:"Delete Columns"},columns:"Columns",deleteTable:"Delete Table",headers:"Headers",headersBoth:"Both",headersColumn:"First column",headersNone:"None",headersRow:"First Row",invalidBorder:"Border size must be a number.",invalidCellPadding:"Cell padding must be a positive number.",invalidCellSpacing:"Cell spacing must be a positive number.",invalidCols:"Number of columns must be a number greater than 0.",invalidHeight:"Table height must be a number.",invalidRows:"Number of rows must be a number greater than 0.",invalidWidth:"Table width must be a number.",menu:"Table Properties",row:{menu:"Row",
insertBefore:"Insert Row Before",insertAfter:"Insert Row After",deleteRow:"Delete Rows"},rows:"Rows",summary:"Summary",title:"Table Properties",toolbar:"Table",widthPc:"percent",widthPx:"pixels",widthUnit:"width unit"},stylescombo:{label:"Styles",panelTitle:"Formatting Styles",panelTitle1:"Block Styles",panelTitle2:"Inline Styles",panelTitle3:"Object Styles"},specialchar:{options:"Special Character Options",title:"Select Special Character",toolbar:"Insert Special Character"},sourcearea:{toolbar:"Source"},selectall:{toolbar:"Select All"},removeformat:{toolbar:"Remove Format"},pastetext:{button:"Paste as plain text",title:"Paste as Plain Text"},pastefromword:{
confirmCleanup:"The text you want to paste seems to be copied from Word. Do you want to clean it before pasting?",error:"It was not possible to clean up the pasted data due to an internal error",title:"Paste from Word",toolbar:"Paste from Word"},magicline:{title:"Insert paragraph here"},liststyle:{armenian:"Armenian numbering",bulletedTitle:"Bulleted List Properties",circle:"Circle",decimal:"Decimal (1, 2, 3, etc.)",decimalLeadingZero:"Decimal leading zero (01, 02, 03, etc.)",disc:"Disc",georgian:"Georgian numbering (an, ban, gan, etc.)",lowerAlpha:"Lower Alpha (a, b, c, d, e, etc.)",lowerGreek:"Lower Greek (alpha, beta, gamma, etc.)",
lowerRoman:"Lower Roman (i, ii, iii, iv, v, etc.)",none:"None",notset:"<not set>",numberedTitle:"Numbered List Properties",square:"Square",start:"Start",type:"Type",upperAlpha:"Upper Alpha (A, B, C, D, E, etc.)",upperRoman:"Upper Roman (I, II, III, IV, V, etc.)",validateStartNumber:"List start number must be a whole number."},list:{bulletedlist:"Insert/Remove Bulleted List",numberedlist:"Insert/Remove Numbered List"},link:{acccessKey:"Access Key",advanced:"Advanced",advisoryContentType:"Advisory Content Type",advisoryTitle:"Advisory Title",anchor:{toolbar:"Anchor",menu:"Edit Anchor",title:"Anchor Properties",name:"Anchor Name",
errorName:"Please type the anchor name",remove:"Remove Anchor"},anchorId:"By Element Id",anchorName:"By Anchor Name",charset:"Linked Resource Charset",cssClasses:"Stylesheet Classes",emailAddress:"E-Mail Address",emailBody:"Message Body",emailSubject:"Message Subject",id:"Id",info:"Link Info",langCode:"Language Code",langDir:"Language Direction",langDirLTR:"Left to Right (LTR)",langDirRTL:"Right to Left (RTL)",menu:"Edit Link",name:"Name",noAnchors:"(No anchors available in the document)",noEmail:"Please type the e-mail address",noUrl:"Please type the link URL",other:"<other>",popupDependent:"Dependent (Netscape)",popupFeatures:"Popup Window Features",
popupFullScreen:"Full Screen (IE)",popupLeft:"Left Position",popupLocationBar:"Location Bar",popupMenuBar:"Menu Bar",popupResizable:"Resizable",popupScrollBars:"Scroll Bars",popupStatusBar:"Status Bar",popupToolbar:"Toolbar",popupTop:"Top Position",rel:"Relationship",selectAnchor:"Select an Anchor",styles:"Style",tabIndex:"Tab Index",target:"Target",targetFrame:"<frame>",targetFrameName:"Target Frame Name",targetPopup:"<popup window>",targetPopupName:"Popup Window Name",title:"Link",toAnchor:"Link to anchor in the text",toEmail:"E-mail",toUrl:"URL",toolbar:"Link",type:"Link Type",unlink:"Unlink",upload:"Upload"},justify:{block:"Justify",center:"Center",
left:"Align Left",right:"Align Right"},indent:{indent:"Increase Indent",outdent:"Decrease Indent"},horizontalrule:{toolbar:"Insert Horizontal Line"},format:{label:"Format",panelTitle:"Paragraph Format",tag_address:"Address",tag_div:"Normal (DIV)",tag_h1:"Heading 1",tag_h2:"Heading 2",tag_h3:"Heading 3",tag_h4:"Heading 4",tag_h5:"Heading 5",tag_h6:"Heading 6",tag_p:"Normal",tag_pre:"Formatted"},font:{fontSize:{label:"Size",voiceLabel:"Font Size",panelTitle:"Font Size"},label:"Font",panelTitle:"Font Name",voiceLabel:"Font"},fakeobjects:{anchor:"Anchor",flash:"Flash Animation",hiddenfield:"Hidden Field",iframe:"IFrame",unknown:"Unknown Object"},contextmenu:{
options:"Context Menu Options"},colordialog:{clear:"Clear",highlight:"Highlight",options:"Color Options",selected:"Selected Color",title:"Select color"},colorbutton:{auto:"Automatic",bgColorTitle:"Background Color",colors:{"000":"Black",8e5:"Maroon","8B4513":"Saddle Brown","2F4F4F":"Dark Slate Gray","008080":"Teal","000080":"Navy","4B0082":"Indigo",696969:"Dark Gray",B22222:"Fire Brick",A52A2A:"Brown",DAA520:"Golden Rod","006400":"Dark Green","40E0D0":"Turquoise","0000CD":"Medium Blue",800080:"Purple",808080:"Gray",F00:"Red",FF8C00:"Dark Orange",FFD700:"Gold","008000":"Green","0FF":"Cyan","00F":"Blue",EE82EE:"Violet",A9A9A9:"Dim Gray",FFA07A:"Light Salmon",
FFA500:"Orange",FFFF00:"Yellow","00FF00":"Lime",AFEEEE:"Pale Turquoise",ADD8E6:"Light Blue",DDA0DD:"Plum",D3D3D3:"Light Grey",FFF0F5:"Lavender Blush",FAEBD7:"Antique White",FFFFE0:"Light Yellow",F0FFF0:"Honeydew",F0FFFF:"Azure",F0F8FF:"Alice Blue",E6E6FA:"Lavender",FFF:"White"},more:"More Colors...",panelTitle:"Colors",textColorTitle:"Text Color"},clipboard:{copy:"Copy",copyError:"Your browser security settings don't permit the editor to automatically execute copying operations. Please use the keyboard for that (Ctrl/Cmd+C).",cut:"Cut",
cutError:"Your browser security settings don't permit the editor to automatically execute cutting operations. Please use the keyboard for that (Ctrl/Cmd+X).",paste:"Paste",pasteArea:"Paste Area",pasteMsg:"Please paste inside the following box using the keyboard (<strong>Ctrl/Cmd+V</strong>) and hit OK",securityMsg:"Because of your browser security settings, the editor is not able to access your clipboard data directly. You are required to paste it again in this window.",title:"Paste"},button:{selectedLabel:"%1 (Selected)"},blockquote:{toolbar:"Block Quote"},bidi:{ltr:"Text direction from left to right",rtl:"Text direction from right to left"},basicstyles:{
bold:"Bold",italic:"Italic",strike:"Strikethrough",subscript:"Subscript",superscript:"Superscript",underline:"Underline"},editor:"Rich Text Editor",editorPanel:"Rich Text Editor panel",common:{editorHelp:"Press ALT 0 for help",browseServer:"Browse Server",url:"URL",protocol:"Protocol",upload:"Upload",uploadSubmit:"Send it to the Server",image:"Image",flash:"Flash",form:"Form",checkbox:"Checkbox",radio:"Radio Button",textField:"Text Field",textarea:"Textarea",hiddenField:"Hidden Field",button:"Button",select:"Selection Field",imageButton:"Image Button",notSet:"<not set>",id:"Id",name:"Name",langDir:"Language Direction",langDirLtr:"Left to Right (LTR)",
langDirRtl:"Right to Left (RTL)",langCode:"Language Code",longDescr:"Long Description URL",cssClass:"Stylesheet Classes",advisoryTitle:"Advisory Title",cssStyle:"Style",ok:"OK",cancel:"Cancel",close:"Close",preview:"Preview",resize:"Resize",generalTab:"General",advancedTab:"Advanced",validateNumberFailed:"This value is not a number.",confirmNewPage:"Any unsaved changes to this content will be lost. Are you sure you want to load new page?",confirmCancel:"You have changed some options. Are you sure you want to close the dialog window?",options:"Options",target:"Target",targetNew:"New Window (_blank)",targetTop:"Topmost Window (_top)",
targetSelf:"Same Window (_self)",targetParent:"Parent Window (_parent)",langDirLTR:"Left to Right (LTR)",langDirRTL:"Right to Left (RTL)",styles:"Style",cssClasses:"Stylesheet Classes",width:"Width",height:"Height",align:"Alignment",alignLeft:"Left",alignRight:"Right",alignCenter:"Center",alignJustify:"Justify",alignTop:"Top",alignMiddle:"Middle",alignBottom:"Bottom",alignNone:"None",invalidValue:"Invalid value.",invalidHeight:"Height must be a number.",invalidWidth:"Width must be a number.",invalidCssLength:'Value specified for the "%1" field must be a positive number with or without a valid CSS measurement unit (px, %, in, cm, mm, em, ex, pt, or pc).',
invalidHtmlLength:'Value specified for the "%1" field must be a positive number with or without a valid HTML measurement unit (px or %).',invalidInlineStyle:'Value specified for the inline style must consist of one or more tuples with the format of "name : value", separated by semi-colons.',cssLengthTooltip:"Enter a number for a value in pixels or a number with a valid CSS unit (px, %, in, cm, mm, em, ex, pt, or pc).",unavailable:'%1<span class="cke_accessibility">, unavailable</span>'}},CKEDITOR.editorConfig=function(config){},CKEDITOR.stylesSet.add("default",[{name:"Italic Title",element:"h2",styles:{"font-style":"italic"}},{name:"Subtitle",element:"h3",
styles:{color:"#aaa","font-style":"italic"}},{name:"Special Container",element:"div",styles:{padding:"5px 10px",background:"#eee",border:"1px solid #ccc"}},{name:"Marker",element:"span",attributes:{class:"marker"}},{name:"Big",element:"big"},{name:"Small",element:"small"},{name:"Typewriter",element:"tt"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Language: RTL",element:"span",attributes:{dir:"rtl"}},{
name:"Language: LTR",element:"span",attributes:{dir:"ltr"}},{name:"Styled image (left)",element:"img",attributes:{class:"left"}},{name:"Styled image (right)",element:"img",attributes:{class:"right"}},{name:"Compact table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",border:"1",bordercolor:"#ccc"},styles:{"border-collapse":"collapse"}},{name:"Borderless Table",element:"table",styles:{"border-style":"hidden","background-color":"#E6E6FA"}},{name:"Square Bulleted List",element:"ul",styles:{"list-style-type":"square"}}]),function(a){CKEDITOR.config.jqueryOverrideVal=void 0===CKEDITOR.config.jqueryOverrideVal||CKEDITOR.config.jqueryOverrideVal,
void 0!==a&&(a.extend(a.fn,{ckeditorGet:function(){var a=this.eq(0).data("ckeditorInstance");if(!a)throw"CKEditor is not initialized yet, use ckeditor() with a callback.";return a},ckeditor:function(g,d){if(!CKEDITOR.env.isCompatible)throw Error("The environment is incompatible.");if(!a.isFunction(g)){var k=d;d=g,g=k}var i=[];d=d||{};this.each(function(){var b=a(this),c=b.data("ckeditorInstance"),f=b.data("_ckeditorInstanceLock"),h=this,j=new a.Deferred;i.push(j.promise()),c&&!f?(g&&g.apply(c,[this]),j.resolve()):f?c.once("instanceReady",function(){setTimeout(function(){c.element?(c.element.$==h&&g&&g.apply(c,[h]),j.resolve()):setTimeout(arguments.callee,100
)},0)},null,null,9999):((d.autoUpdateElement||void 0===d.autoUpdateElement&&CKEDITOR.config.autoUpdateElement)&&(d.autoUpdateElementJquery=!0),d.autoUpdateElement=!1,b.data("_ckeditorInstanceLock",!0),c=a(this).is("textarea")?CKEDITOR.replace(h,d):CKEDITOR.inline(h,d),b.data("ckeditorInstance",c),c.on("instanceReady",function(d){var e=d.editor;setTimeout(function(){if(e.element){if(d.removeListener(),e.on("dataReady",function(){b.trigger("dataReady.ckeditor",[e])}),e.on("setData",function(a){b.trigger("setData.ckeditor",[e,a.data])}),e.on("getData",function(a){b.trigger("getData.ckeditor",[e,a.data])},999),e.on("destroy",function(){b.trigger(
"destroy.ckeditor",[e])}),e.on("save",function(){return a(h.form).submit(),!1},null,null,20),e.config.autoUpdateElementJquery&&b.is("textarea")&&a(h.form).length){var c=function(){b.ckeditor(function(){e.updateElement()})};a(h.form).submit(c),a(h.form).bind("form-pre-serialize",c),b.bind("destroy.ckeditor",function(){a(h.form).unbind("submit",c),a(h.form).unbind("form-pre-serialize",c)})}e.on("destroy",function(){b.removeData("ckeditorInstance")}),b.removeData("_ckeditorInstanceLock"),b.trigger("instanceReady.ckeditor",[e]),g&&g.apply(e,[h]),j.resolve()}else setTimeout(arguments.callee,100)},0)},null,null,9999))});var f=new a.Deferred
;return this.promise=f.promise(),a.when.apply(this,i).then(function(){f.resolve()}),this.editor=this.eq(0).data("ckeditorInstance"),this}}),CKEDITOR.config.jqueryOverrideVal&&(a.fn.val=CKEDITOR.tools.override(a.fn.val,function(g){return function(d){if(arguments.length){var k=this,i=[],f=this.each(function(){var b=a(this),c=b.data("ckeditorInstance");if(b.is("textarea")&&c){var f=new a.Deferred;return c.setData(d,function(){f.resolve()}),i.push(f.promise()),!0}return g.call(b,d)});if(i.length){var b=new a.Deferred;return a.when.apply(this,i).done(function(){b.resolveWith(k)}),b.promise()}return f}var c=(f=a(this).eq(0)).data("ckeditorInstance");return f.is(
"textarea")&&c?c.getData():g.call(f)}})))}(window.jQuery),CKEDITOR.plugins.add("autogrow",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&a.on("instanceReady",function(){a.editable().isInline()?a.ui.space("contents").setStyle("height","auto"):function(a){function k(){d=a.document,l=d[CKEDITOR.env.ie?"getBody":"getDocumentElement"](),c=CKEDITOR.env.quirks?d.getBody():d.getDocumentElement(),e=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",d)}function f(){i&&c.setStyle("overflow-y","hidden");var b,
g=a.window.getViewPaneSize().height;l.append(e),b=e.getDocumentPosition(d).y+e.$.offsetHeight,e.remove(),b+=h,b=Math.max(b,o),(b=Math.min(b,m))!=g&&j!=b&&(b=a.fire("autoGrow",{currentHeight:g,newHeight:b}).newHeight,a.resize(a.container.getStyle("width"),b,!0),j=b),i||(b<m&&c.$.scrollHeight>c.$.clientHeight?c.setStyle("overflow-y","hidden"):c.removeStyle("overflow-y"))}var j,d,l,c,e,n,h=a.config.autoGrow_bottomSpace||0,o=void 0!==a.config.autoGrow_minHeight?a.config.autoGrow_minHeight:200,m=a.config.autoGrow_maxHeight||1/0,i=!a.config.autoGrow_maxHeight;for(n in a.addCommand("autogrow",{exec:f,modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1}),{
contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1})a.on(n,function(g){"wysiwyg"==g.editor.mode&&setTimeout(function(){var b=a.getCommand("maximize");!a.window||b&&b.state==CKEDITOR.TRISTATE_ON?j=null:(f(),i||f())},100)});a.on("afterCommandExec",function(a){"maximize"==a.data.name&&"wysiwyg"==a.editor.mode&&(a.data.command.state==CKEDITOR.TRISTATE_ON?c.removeStyle("overflow-y"):f())}),a.on("contentDom",k),k(),a.config.autoGrow_onStartup&&a.execCommand("autogrow")}(a)})}}),CKEDITOR.dialog.add("paste",function(c){function h(a){var b=new CKEDITOR.dom.document(a.document),f=b.getBody(),d=b.getById("cke_actscrpt");d&&d.remove(),f.setAttribute(
"contenteditable",!0),CKEDITOR.env.ie&&CKEDITOR.env.version<8&&b.getWindow().on("blur",function(){b.$.selection.empty()}),b.on("keydown",function(a){var b;switch((a=a.data).getKeystroke()){case 27:this.hide(),b=1;break;case 9:case CKEDITOR.SHIFT+9:this.changeFocus(1),b=1}b&&a.preventDefault()},this),c.fire("ariaWidget",new CKEDITOR.dom.element(a.frameElement)),b.getWindow().getFrame().removeCustomData("pendingFocus")&&f.focus()}var e=c.lang.clipboard;return c.on("pasteDialogCommit",function(a){a.data&&c.fire("paste",{type:"auto",dataValue:a.data})},null,null,1e3),{title:e.title,minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?370:350,
minHeight:CKEDITOR.env.quirks?250:245,onShow:function(){this.parts.dialog.$.offsetHeight,this.setupContent(),this.parts.title.setHtml(this.customTitle||e.title),this.customTitle=null},onLoad:function(){(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&"rtl"==c.lang.dir&&this.parts.contents.setStyle("overflow","hidden")},onOk:function(){this.commitContent()},contents:[{id:"general",label:c.lang.common.generalTab,elements:[{type:"html",id:"securityMsg",html:'<div style="white-space:normal;width:340px">'+e.securityMsg+"</div>"},{type:"html",id:"pasteMsg",html:'<div style="white-space:normal;width:340px">'+e.pasteMsg+"</div>"},{type:"html",id:"editing_area",
style:"width:100%;height:100%",html:"",focus:function(){var a=this.getInputElement(),b=a.getFrameDocument().getBody();!b||b.isReadOnly()?a.setCustomData("pendingFocus",1):b.focus()},setup:function(){var a=this.getDialog(),b='<html dir="'+c.config.contentsLangDirection+'" lang="'+(c.config.contentsLanguage||c.langCode)+'"><head><style>body{margin:3px;height:95%}</style></head><body><script id="cke_actscrpt" type="text/javascript">window.parent.CKEDITOR.tools.callFunction('+CKEDITOR.tools.addFunction(h,a)+",this);<\/script></body></html>",f=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void((function(){"+encodeURIComponent(
"document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+'})())"':"",d=CKEDITOR.dom.element.createFromHtml('<iframe class="cke_pasteframe" frameborder="0"  allowTransparency="true" src="'+f+'" role="region" aria-label="'+e.pasteArea+'" aria-describedby="'+a.getContentElement("general","pasteMsg").domId+'" aria-multiple="true"></iframe>');if(d.on("load",function(a){a.removeListener(),(a=d.getFrameDocument()).write(b),c.focusManager.add(a.getBody()),CKEDITOR.env.air&&h.call(this,a.getWindow().$)},a),d.setCustomData("dialog",a),(a=this.getElement()).setHtml(""),a.append(d),CKEDITOR.env.ie){var g=CKEDITOR.dom.element.createFromHtml(
'<span tabindex="-1" style="position:absolute" role="presentation"></span>');g.on("focus",function(){setTimeout(function(){d.$.contentWindow.focus()})}),a.append(g),this.focus=function(){g.focus(),this.fire("focus")}}this.getInputElement=function(){return d},CKEDITOR.env.ie&&(a.setStyle("display","block"),a.setStyle("height",d.$.offsetHeight+2+"px"))},commit:function(){var d,a=this.getDialog().getParentEditor(),b=this.getInputElement().getFrameDocument().getBody(),c=b.getBogus();c&&c.remove(),d=b.getHtml(),setTimeout(function(){a.fire("pasteDialogCommit",d)},0)}}]}]}}),CKEDITOR.dialog.add("colordialog",function(t){function n(){f.getById(o).removeStyle(
"background-color"),p.getContentElement("picker","selectedColor").setValue(""),j&&j.removeAttribute("aria-selected"),j=null}function u(a){var b;"td"==(a=a.data.getTarget()).getName()&&(b=a.getChild(0).getHtml())&&((j=a).setAttribute("aria-selected",!0),p.getContentElement("picker","selectedColor").setValue(b))}function v(a){!a.name&&(a=new CKEDITOR.event(a));var e,b=!/mouse/.test(a.name),c=a.data.getTarget();"td"==c.getName()&&(e=c.getChild(0).getHtml())&&(q(a),b?g=c:w=c,b&&(c.setStyle("border-color",function(a){a=a.replace(/^#/,"");for(var b=0,c=[];b<=2;b++)c[b]=parseInt(a.substr(2*b,2),16);return"#"+(165<=.2126*c[0]+.7152*c[1]+.0722*c[2]?"000":"fff")}(e)),
c.setStyle("border-style","dotted")),f.getById(k).setStyle("background-color",e),f.getById(l).setHtml(e))}function q(a){if(a=!/mouse/.test(a.name)&&g){var b=a.getChild(0).getHtml();a.setStyle("border-color",b),a.setStyle("border-style","solid")}!g&&!w&&(f.getById(k).removeStyle("background-color"),f.getById(l).setHtml("&nbsp;"))}function z(a){var b=a.data,c=b.getTarget(),e=b.getKeystroke(),d="rtl"==t.lang.dir;switch(e){case 38:(a=c.getParent().getPrevious())&&(a=a.getChild([c.getIndex()])).focus(),b.preventDefault();break;case 40:(a=c.getParent().getNext())&&(a=a.getChild([c.getIndex()]))&&1==a.type&&a.focus(),b.preventDefault();break;case 32:case 13:u(a),
b.preventDefault();break;case d?37:39:(a=c.getNext())?1==a.type&&(a.focus(),b.preventDefault(!0)):(a=c.getParent().getNext())&&(a=a.getChild([0]))&&1==a.type&&(a.focus(),b.preventDefault(!0));break;case d?39:37:(a=c.getPrevious())?(a.focus(),b.preventDefault(!0)):(a=c.getParent().getPrevious())&&((a=a.getLast()).focus(),b.preventDefault(!0))}}var p,j,g,w,i,r=CKEDITOR.dom.element,f=CKEDITOR.document,h=t.lang.colordialog,x={type:"html",html:"&nbsp;"},m=function(a){return CKEDITOR.tools.getNextId()+"_"+a},k=m("hicolor"),l=m("hicolortext"),o=m("selhicolor");return function(){function a(a,d){for(var s=a;s<a+3;s++){var e=new r(i.$.insertRow(-1));e.setAttribute(
"role","row");for(var f=d;f<d+3;f++)for(var g=0;g<6;g++)b(e.$,"#"+c[f]+c[g]+c[s])}}function b(a,c){var b=new r(a.insertCell(-1));b.setAttribute("class","ColorCell"),b.setAttribute("tabIndex",-1),b.setAttribute("role","gridcell"),b.on("keydown",z),b.on("click",u),b.on("focus",v),b.on("blur",q),b.setStyle("background-color",c),b.setStyle("border","1px solid "+c),b.setStyle("width","14px"),b.setStyle("height","14px");var d=m("color_table_cell");b.setAttribute("aria-labelledby",d),b.append(CKEDITOR.dom.element.createFromHtml('<span id="'+d+'" class="cke_voice_label">'+c+"</span>",CKEDITOR.document))}(i=CKEDITOR.dom.element.createFromHtml(
'<table tabIndex="-1" aria-label="'+h.options+'" role="grid" style="border-collapse:separate;" cellspacing="0"><caption class="cke_voice_label">'+h.options+'</caption><tbody role="presentation"></tbody></table>')).on("mouseover",v),i.on("mouseout",q);var c="00 33 66 99 cc ff".split(" ");a(0,0),a(3,0),a(0,3),a(3,3);var e=new r(i.$.insertRow(-1));e.setAttribute("role","row");for(var d=0;d<6;d++)b(e.$,"#"+c[d]+c[d]+c[d]);for(d=0;d<12;d++)b(e.$,"#000000")}(),{title:h.title,minWidth:360,minHeight:220,onLoad:function(){p=this},onHide:function(){n();var a=g.getChild(0).getHtml();g.setStyle("border-color",a),g.setStyle("border-style","solid"),f.getById(k
).removeStyle("background-color"),f.getById(l).setHtml("&nbsp;"),g=null},contents:[{id:"picker",label:h.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:"<div></div>",onLoad:function(){CKEDITOR.document.getById(this.domId).append(i)},focus:function(){(g||this.getElement().getElementsByTag("td").getItem(0)).focus()}},x,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",
html:"<span>"+h.highlight+'</span><div id="'+k+'" style="border: 1px solid; height: 74px; width: 74px;"></div><div id="'+l+'">&nbsp;</div><span>'+h.selected+'</span><div id="'+o+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},{type:"text",label:h.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 76px;margin-top:4px",onChange:function(){try{f.getById(o).setStyle("background-color",this.getValue())}catch(a){n()}}},x,{type:"button",id:"clear",label:h.clear,onClick:n}]}]}]}]}}),CKEDITOR.dialog.add("anchor",function(c){function d(a,b){return a.createFakeElement(a.document.createElement("a",{attributes:b}),"cke_anchor","anchor")
}return{title:c.lang.link.anchor.title,minWidth:300,minHeight:60,onOk:function(){var b,a={id:a=CKEDITOR.tools.trim(this.getValueOf("info","txtName")),name:a,"data-cke-saved-name":a};this._.selectedElement?this._.selectedElement.data("cke-realelement")?((a=d(c,a)).replace(this._.selectedElement),CKEDITOR.env.ie&&c.getSelection().selectElement(a)):this._.selectedElement.setAttributes(a):(b=(b=c.getSelection())&&b.getRanges()[0]).collapsed?(a=d(c,a),b.insertNode(a)):(CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(a.class="cke_anchor"),(a=new CKEDITOR.style({element:"a",attributes:a})).type=CKEDITOR.STYLE_INLINE,c.applyStyle(a))},onHide:function(){
delete this._.selectedElement},onShow:function(){var a=c.getSelection(),b=a.getSelectedElement(),d=b&&b.data("cke-realelement"),e=d?CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,b):CKEDITOR.plugins.link.getSelectedLink(c);e&&(this._.selectedElement=e,this.setValueOf("info","txtName",e.data("cke-saved-name")||""),!d&&a.selectElement(e),b&&(this._.selectedElement=b)),this.getContentElement("info","txtName").focus()},contents:[{id:"info",label:c.lang.link.anchor.title,accessKey:"I",elements:[{type:"text",id:"txtName",label:c.lang.link.anchor.name,required:!0,validate:function(){return!!this.getValue()||(alert(c.lang.link.anchor.errorName),!1)}}]}]}}),
CKEDITOR.dialog.add("link",function(g){var d,l=CKEDITOR.plugins.link,m=function(){var b=(a=this.getDialog()).getContentElement("target","popupFeatures"),a=a.getContentElement("target","linkTargetName"),k=this.getValue();if(b&&a)switch(b=b.getElement(),b.hide(),a.setValue(""),k){case"frame":a.setLabel(g.lang.link.targetFrameName),a.getElement().show();break;case"popup":b.show(),a.setLabel(g.lang.link.targetPopupName),a.getElement().show();break;default:a.setValue(k),a.getElement().hide()}},f=function(a){a.target&&this.setValue(a.target[this.id]||"")},h=function(a){a.advanced&&this.setValue(a.advanced[this.id]||"")},i=function(a){a.target||(a.target={}),
a.target[this.id]=this.getValue()||""},j=function(a){a.advanced||(a.advanced={}),a.advanced[this.id]=this.getValue()||""},c=g.lang.common,b=g.lang.link;return{title:b.title,minWidth:350,minHeight:230,contents:[{id:"info",label:b.info,title:b.info,elements:[{id:"linkType",type:"select",label:b.type,default:"url",items:[[b.toUrl,"url"],[b.toAnchor,"anchor"],[b.toEmail,"email"]],onChange:function(){var a=this.getDialog(),b=["urlOptions","anchorOptions","emailOptions"],k=this.getValue(),e=(e=a.definition.getContents("upload"))&&e.hidden;for("url"==k?(g.config.linkShowTargetTab&&a.showPage("target"),e||a.showPage("upload")):(a.hidePage("target"),e||a.hidePage(
"upload")),e=0;e<b.length;e++){var c=a.getContentElement("info",b[e]);c&&(c=c.getElement().getParent().getParent(),b[e]==k+"Options"?c.show():c.hide())}a.layout()},setup:function(a){this.setValue(a.type||"url")},commit:function(a){a.type=this.getValue()}},{type:"vbox",id:"urlOptions",children:[{type:"hbox",widths:["25%","75%"],children:[{id:"protocol",type:"select",label:c.protocol,default:"http://",items:[["http://","http://"],["https://","https://"],["ftp://","ftp://"],["news://","news://"],[b.other,""]],setup:function(a){a.url&&this.setValue(a.url.protocol||"")},commit:function(a){a.url||(a.url={}),a.url.protocol=this.getValue()}},{type:"text",
id:"url",label:c.url,required:!0,onLoad:function(){this.allowOnChange=!0},onKeyUp:function(){this.allowOnChange=!1;var a=this.getDialog().getContentElement("info","protocol"),b=this.getValue(),c=/^(http|https|ftp|news):\/\/(?=.)/i.exec(b);c?(this.setValue(b.substr(c[0].length)),a.setValue(c[0].toLowerCase())):/^((javascript:)|[#\/\.\?])/i.test(b)&&a.setValue(""),this.allowOnChange=!0},onChange:function(){this.allowOnChange&&this.onKeyUp()},validate:function(){var a=this.getDialog();return!(!a.getContentElement("info","linkType")||"url"==a.getValueOf("info","linkType"))||(!g.config.linkJavaScriptLinksAllowed&&/javascript\:/.test(this.getValue())?(alert(
c.invalidValue),!1):!!this.getDialog().fakeObj||CKEDITOR.dialog.validate.notEmpty(b.noUrl).apply(this))},setup:function(a){this.allowOnChange=!1,a.url&&this.setValue(a.url.url),this.allowOnChange=!0},commit:function(a){this.onChange(),a.url||(a.url={}),a.url.url=this.getValue(),this.allowOnChange=!1}}],setup:function(){this.getDialog().getContentElement("info","linkType")||this.getElement().show()}},{type:"button",id:"browse",hidden:"true",filebrowser:"info:url",label:c.browseServer}]},{type:"vbox",id:"anchorOptions",width:260,align:"center",padding:0,children:[{type:"fieldset",id:"selectAnchorText",label:b.selectAnchor,setup:function(){d=l.getEditorAnchors(
g),this.getElement()[d&&d.length?"show":"hide"]()},children:[{type:"hbox",id:"selectAnchor",children:[{type:"select",id:"anchorName",default:"",label:b.anchorName,style:"width: 100%;",items:[[""]],setup:function(a){if(this.clear(),this.add(""),d)for(var b=0;b<d.length;b++)d[b].name&&this.add(d[b].name);a.anchor&&this.setValue(a.anchor.name),(a=this.getDialog().getContentElement("info","linkType"))&&"email"==a.getValue()&&this.focus()},commit:function(a){a.anchor||(a.anchor={}),a.anchor.name=this.getValue()}},{type:"select",id:"anchorId",default:"",label:b.anchorId,style:"width: 100%;",items:[[""]],setup:function(a){if(this.clear(),this.add(""),d)for(
var b=0;b<d.length;b++)d[b].id&&this.add(d[b].id);a.anchor&&this.setValue(a.anchor.id)},commit:function(a){a.anchor||(a.anchor={}),a.anchor.id=this.getValue()}}],setup:function(){this.getElement()[d&&d.length?"show":"hide"]()}}]},{type:"html",id:"noAnchors",style:"text-align: center;",html:'<div role="note" tabIndex="-1">'+CKEDITOR.tools.htmlEncode(b.noAnchors)+"</div>",focus:!0,setup:function(){this.getElement()[d&&d.length?"hide":"show"]()}}],setup:function(){this.getDialog().getContentElement("info","linkType")||this.getElement().hide()}},{type:"vbox",id:"emailOptions",padding:1,children:[{type:"text",id:"emailAddress",label:b.emailAddress,required:!0,
validate:function(){var a=this.getDialog();return!a.getContentElement("info","linkType")||"email"!=a.getValueOf("info","linkType")||CKEDITOR.dialog.validate.notEmpty(b.noEmail).apply(this)},setup:function(a){a.email&&this.setValue(a.email.address),(a=this.getDialog().getContentElement("info","linkType"))&&"email"==a.getValue()&&this.select()},commit:function(a){a.email||(a.email={}),a.email.address=this.getValue()}},{type:"text",id:"emailSubject",label:b.emailSubject,setup:function(a){a.email&&this.setValue(a.email.subject)},commit:function(a){a.email||(a.email={}),a.email.subject=this.getValue()}},{type:"textarea",id:"emailBody",label:b.emailBody,rows:3,
default:"",setup:function(a){a.email&&this.setValue(a.email.body)},commit:function(a){a.email||(a.email={}),a.email.body=this.getValue()}}],setup:function(){this.getDialog().getContentElement("info","linkType")||this.getElement().hide()}}]},{id:"target",requiredContent:"a[target]",label:b.target,title:b.target,elements:[{type:"hbox",widths:["50%","50%"],children:[{type:"select",id:"linkTargetType",label:c.target,default:"notSet",style:"width : 100%;",items:[[c.notSet,"notSet"],[b.targetFrame,"frame"],[b.targetPopup,"popup"],[c.targetNew,"_blank"],[c.targetTop,"_top"],[c.targetSelf,"_self"],[c.targetParent,"_parent"]],onChange:m,setup:function(a){
a.target&&this.setValue(a.target.type||"notSet"),m.call(this)},commit:function(a){a.target||(a.target={}),a.target.type=this.getValue()}},{type:"text",id:"linkTargetName",label:b.targetFrameName,default:"",setup:function(a){a.target&&this.setValue(a.target.name)},commit:function(a){a.target||(a.target={}),a.target.name=this.getValue().replace(/\W/gi,"")}}]},{type:"vbox",width:"100%",align:"center",padding:2,id:"popupFeatures",children:[{type:"fieldset",label:b.popupFeatures,children:[{type:"hbox",children:[{type:"checkbox",id:"resizable",label:b.popupResizable,setup:f,commit:i},{type:"checkbox",id:"status",label:b.popupStatusBar,setup:f,commit:i}]},{
type:"hbox",children:[{type:"checkbox",id:"location",label:b.popupLocationBar,setup:f,commit:i},{type:"checkbox",id:"toolbar",label:b.popupToolbar,setup:f,commit:i}]},{type:"hbox",children:[{type:"checkbox",id:"menubar",label:b.popupMenuBar,setup:f,commit:i},{type:"checkbox",id:"fullscreen",label:b.popupFullScreen,setup:f,commit:i}]},{type:"hbox",children:[{type:"checkbox",id:"scrollbars",label:b.popupScrollBars,setup:f,commit:i},{type:"checkbox",id:"dependent",label:b.popupDependent,setup:f,commit:i}]},{type:"hbox",children:[{type:"text",widths:["50%","50%"],labelLayout:"horizontal",label:c.width,id:"width",setup:f,commit:i},{type:"text",
labelLayout:"horizontal",widths:["50%","50%"],label:b.popupLeft,id:"left",setup:f,commit:i}]},{type:"hbox",children:[{type:"text",labelLayout:"horizontal",widths:["50%","50%"],label:c.height,id:"height",setup:f,commit:i},{type:"text",labelLayout:"horizontal",label:b.popupTop,widths:["50%","50%"],id:"top",setup:f,commit:i}]}]}]}]},{id:"upload",label:b.upload,title:b.upload,hidden:!0,filebrowser:"uploadButton",elements:[{type:"file",id:"upload",label:c.upload,style:"height:40px",size:29},{type:"fileButton",id:"uploadButton",label:c.uploadSubmit,filebrowser:"info:url",for:["upload","upload"]}]},{id:"advanced",label:b.advanced,title:b.advanced,elements:[{
type:"vbox",padding:1,children:[{type:"hbox",widths:["45%","35%","20%"],children:[{type:"text",id:"advId",requiredContent:"a[id]",label:b.id,setup:h,commit:j},{type:"select",id:"advLangDir",requiredContent:"a[dir]",label:b.langDir,default:"",style:"width:110px",items:[[c.notSet,""],[b.langDirLTR,"ltr"],[b.langDirRTL,"rtl"]],setup:h,commit:j},{type:"text",id:"advAccessKey",requiredContent:"a[accesskey]",width:"80px",label:b.acccessKey,maxLength:1,setup:h,commit:j}]},{type:"hbox",widths:["45%","35%","20%"],children:[{type:"text",label:b.name,id:"advName",requiredContent:"a[name]",setup:h,commit:j},{type:"text",label:b.langCode,id:"advLangCode",
requiredContent:"a[lang]",width:"110px",default:"",setup:h,commit:j},{type:"text",label:b.tabIndex,id:"advTabIndex",requiredContent:"a[tabindex]",width:"80px",maxLength:5,setup:h,commit:j}]}]},{type:"vbox",padding:1,children:[{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:b.advisoryTitle,requiredContent:"a[title]",default:"",id:"advTitle",setup:h,commit:j},{type:"text",label:b.advisoryContentType,requiredContent:"a[type]",default:"",id:"advContentType",setup:h,commit:j}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:b.cssClasses,requiredContent:"a(cke-xyz)",default:"",id:"advCSSClasses",setup:h,commit:j},{type:"text",
label:b.charset,requiredContent:"a[charset]",default:"",id:"advCharset",setup:h,commit:j}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:b.rel,requiredContent:"a[rel]",default:"",id:"advRel",setup:h,commit:j},{type:"text",label:b.styles,requiredContent:"a{cke-xyz}",default:"",id:"advStyles",validate:CKEDITOR.dialog.validate.inlineStyle(g.lang.common.invalidInlineStyle),setup:h,commit:j}]}]}]}],onShow:function(){var a=this.getParentEditor(),b=a.getSelection(),c=null;(c=l.getSelectedLink(a))&&c.hasAttribute("href")?b.getSelectedElement()||b.selectElement(c):c=null,a=l.parseLinkAttributes(a,c),this._.selectedElement=c,this.setupContent(a)},
onOk:function(){var a={};this.commitContent(a);var b=g.getSelection(),c=l.getLinkAttributes(g,a);if(this._.selectedElement){var e=this._.selectedElement,d=e.data("cke-saved-href"),f=e.getHtml();e.setAttributes(c.set),e.removeAttributes(c.removed),(d==f||"email"==a.type&&-1!=f.indexOf("@"))&&(e.setHtml("email"==a.type?a.email.address:c.set["data-cke-saved-href"]),b.selectElement(e)),delete this._.selectedElement}else(b=b.getRanges()[0]).collapsed&&(a=new CKEDITOR.dom.text("email"==a.type?a.email.address:c.set["data-cke-saved-href"],g.document),b.insertNode(a),b.selectNodeContents(a)),(c=new CKEDITOR.style({element:"a",attributes:c.set})
).type=CKEDITOR.STYLE_INLINE,c.applyToRange(b,g),b.select()},onLoad:function(){g.config.linkShowAdvancedTab||this.hidePage("advanced"),g.config.linkShowTargetTab||this.hidePage("target")},onFocus:function(){var a=this.getContentElement("info","linkType");a&&"url"==a.getValue()&&(a=this.getContentElement("info","url")).select()}}}),CKEDITOR.plugins.add("placeholder",{requires:"widget,dialog",lang:"af,ar,bg,ca,cs,cy,da,de,el,en,en-gb,eo,es,et,eu,fa,fi,fr,fr-ca,gl,he,hr,hu,id,it,ja,km,ko,ku,lv,nb,nl,no,pl,pt,pt-br,ru,si,sk,sl,sq,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"placeholder",hidpi:!0,onLoad:function(){CKEDITOR.addCss(
".cke_placeholder{background-color:#ff0}")},init:function(a){var b=a.lang.placeholder;CKEDITOR.dialog.add("placeholder",this.path+"dialogs/placeholder.js"),a.widgets.add("placeholder",{dialog:"placeholder",pathName:b.pathName,template:'<span class="cke_placeholder">[[]]</span>',downcast:function(){return new CKEDITOR.htmlParser.text("[["+this.data.name+"]]")},init:function(){this.setData("name",this.element.getText().slice(2,-2))},data:function(){this.element.setText("[["+this.data.name+"]]")}}),a.ui.addButton&&a.ui.addButton("CreatePlaceholder",{label:b.toolbar,command:"placeholder",toolbar:"insert,5",icon:"placeholder"})},afterInit:function(a){
var b=/\[\[([^\[\]])+\]\]/g;a.dataProcessor.dataFilter.addRules({text:function(f,d){var e=d.parent&&CKEDITOR.dtd[d.parent.name];if(!e||e.span)return f.replace(b,function(b){var c=null;return(c=new CKEDITOR.htmlParser.element("span",{class:"cke_placeholder"})).add(new CKEDITOR.htmlParser.text(b)),(c=a.widgets.wrapElement(c,"placeholder")).getOuterHtml()})}})}}),CKEDITOR.dialog.add("placeholder",function(a){var b=a.lang.placeholder;a=a.lang.common.generalTab;return{title:b.title,minWidth:300,minHeight:80,contents:[{id:"info",label:a,title:a,elements:[{id:"name",type:"text",style:"width: 100%;",label:b.name,default:"",required:!0,
validate:CKEDITOR.dialog.validate.regex(/^[^\[\]<>]+$/,b.invalidName),setup:function(a){this.setValue(a.data.name)},commit:function(a){a.setData("name",this.getValue())}}]}]}}),CKEDITOR.plugins.setLang("placeholder","en",{title:"Placeholder Properties",toolbar:"Placeholder",name:"Placeholder Name",invalidName:"The placeholder can not be empty and can not contain any of following characters: [, ], <, >",pathName:"placeholder"}),CKEDITOR.plugins.add("sourcedialog",{
lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"sourcedialog,sourcedialog-rtl",hidpi:!0,init:function(a){a.addCommand("sourcedialog",new CKEDITOR.dialogCommand("sourcedialog")),CKEDITOR.dialog.add("sourcedialog",this.path+"dialogs/sourcedialog.js"),a.ui.addButton&&a.ui.addButton("Sourcedialog",{label:a.lang.sourcedialog.toolbar,command:"sourcedialog",toolbar:"mode,10"})}}),CKEDITOR.dialog.add("sourcedialog",function(a){var d,b=CKEDITOR.document.getWindow().getViewPaneSize(),
e=Math.min(b.width-70,800);b=b.height/1.5;return{title:a.lang.sourcedialog.title,minWidth:100,minHeight:100,onShow:function(){this.setValueOf("main","data",d=a.getData())},onOk:function(){function b(f,c){a.focus(),a.setData(c,function(){f.hide();var b=a.createRange();b.moveToElementEditStart(a.editable()),b.select()})}return function(){var a=this.getValueOf("main","data").replace(/\r/g,""),c=this;return a===d||(setTimeout(function(){b(c,a)}),!1)}}(),contents:[{id:"main",label:a.lang.sourcedialog.title,elements:[{type:"textarea",id:"data",dir:"ltr",inputStyle:"cursor:auto;width:"+e+"px;height:"+b+"px;tab-size:4;text-align:left;",class:"cke_source"}]}]}}),
CKEDITOR.plugins.setLang("sourcedialog","en",{toolbar:"Source",title:"Source"}),CKEDITOR.dialog.add("cellProperties",function(g){function d(a){return function(b){for(var c=a(b[0]),d=1;d<b.length;d++)if(a(b[d])!==c){c=null;break}void 0!==c&&(this.setValue(c),CKEDITOR.env.gecko&&"select"==this.type&&!c&&(this.getInputElement().$.selectedIndex=-1))}}function j(a){if(a=l.exec(a.getStyle("width")||a.getAttribute("width")))return a[2]}var h=g.lang.table,c=h.cell,e=g.lang.common,i=CKEDITOR.dialog.validate,l=/^(\d+(?:\.\d+)?)(px|%)$/,f={type:"html",html:"&nbsp;"},m="rtl"==g.lang.dir,k=g.plugins.colordialog;return{title:c.title,
minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?450:410,minHeight:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?230:220,contents:[{id:"info",label:c.title,accessKey:"I",elements:[{type:"hbox",widths:["40%","5%","40%"],children:[{type:"vbox",padding:0,children:[{type:"hbox",widths:["70%","30%"],children:[{type:"text",id:"width",width:"100px",label:e.width,validate:i.number(c.invalidWidth),onLoad:function(){var a=this.getDialog().getContentElement("info","widthType").getElement(),b=this.getInputElement(),c=b.getAttribute("aria-labelledby");b.setAttribute("aria-labelledby",[c,a.$.id].join(" "))},setup:d(function(a){var b=parseInt(a.getAttribute(
"width"),10);a=parseInt(a.getStyle("width"),10);return isNaN(a)?isNaN(b)?"":b:a}),commit:function(a){var b=parseInt(this.getValue(),10),c=this.getDialog().getValueOf("info","widthType")||j(a);isNaN(b)?a.removeStyle("width"):a.setStyle("width",b+c),a.removeAttribute("width")},default:""},{type:"select",id:"widthType",label:g.lang.table.widthUnit,labelStyle:"visibility:hidden",default:"px",items:[[h.widthPx,"px"],[h.widthPc,"%"]],setup:d(j)}]},{type:"hbox",widths:["70%","30%"],children:[{type:"text",id:"height",label:e.height,width:"100px",default:"",validate:i.number(c.invalidHeight),onLoad:function(){var a=this.getDialog().getContentElement("info",
"htmlHeightType").getElement(),b=this.getInputElement(),c=b.getAttribute("aria-labelledby");b.setAttribute("aria-labelledby",[c,a.$.id].join(" "))},setup:d(function(a){var b=parseInt(a.getAttribute("height"),10);a=parseInt(a.getStyle("height"),10);return isNaN(a)?isNaN(b)?"":b:a}),commit:function(a){var b=parseInt(this.getValue(),10);isNaN(b)?a.removeStyle("height"):a.setStyle("height",CKEDITOR.tools.cssLength(b)),a.removeAttribute("height")}},{id:"htmlHeightType",type:"html",html:"<br />"+h.widthPx}]},f,{type:"select",id:"wordWrap",label:c.wordWrap,default:"yes",items:[[c.yes,"yes"],[c.no,"no"]],setup:d(function(a){var b=a.getAttribute("noWrap");if(
"nowrap"==a.getStyle("white-space")||b)return"no"}),commit:function(a){"no"==this.getValue()?a.setStyle("white-space","nowrap"):a.removeStyle("white-space"),a.removeAttribute("noWrap")}},f,{type:"select",id:"hAlign",label:c.hAlign,default:"",items:[[e.notSet,""],[e.alignLeft,"left"],[e.alignCenter,"center"],[e.alignRight,"right"],[e.alignJustify,"justify"]],setup:d(function(a){var b=a.getAttribute("align");return a.getStyle("text-align")||b||""}),commit:function(a){var b=this.getValue();b?a.setStyle("text-align",b):a.removeStyle("text-align"),a.removeAttribute("align")}},{type:"select",id:"vAlign",label:c.vAlign,default:"",items:[[e.notSet,""],[e.alignTop,
"top"],[e.alignMiddle,"middle"],[e.alignBottom,"bottom"],[c.alignBaseline,"baseline"]],setup:d(function(a){var b=a.getAttribute("vAlign");switch(a=a.getStyle("vertical-align")){case"top":case"middle":case"bottom":case"baseline":break;default:a=""}return a||b||""}),commit:function(a){var b=this.getValue();b?a.setStyle("vertical-align",b):a.removeStyle("vertical-align"),a.removeAttribute("vAlign")}}]},f,{type:"vbox",padding:0,children:[{type:"select",id:"cellType",label:c.cellType,default:"td",items:[[c.data,"td"],[c.header,"th"]],setup:d(function(a){return a.getName()}),commit:function(a){a.renameNode(this.getValue())}},f,{type:"text",id:"rowSpan",
label:c.rowSpan,default:"",validate:i.integer(c.invalidRowSpan),setup:d(function(a){if((a=parseInt(a.getAttribute("rowSpan"),10))&&1!=a)return a}),commit:function(a){var b=parseInt(this.getValue(),10);b&&1!=b?a.setAttribute("rowSpan",this.getValue()):a.removeAttribute("rowSpan")}},{type:"text",id:"colSpan",label:c.colSpan,default:"",validate:i.integer(c.invalidColSpan),setup:d(function(a){if((a=parseInt(a.getAttribute("colSpan"),10))&&1!=a)return a}),commit:function(a){var b=parseInt(this.getValue(),10);b&&1!=b?a.setAttribute("colSpan",this.getValue()):a.removeAttribute("colSpan")}},f,{type:"hbox",padding:0,widths:["60%","40%"],children:[{type:"text",
id:"bgColor",label:c.bgColor,default:"",setup:d(function(a){var b=a.getAttribute("bgColor");return a.getStyle("background-color")||b}),commit:function(a){this.getValue()?a.setStyle("background-color",this.getValue()):a.removeStyle("background-color"),a.removeAttribute("bgColor")}},k?{type:"button",id:"bgColorChoose",class:"colorChooser",label:c.chooseColor,onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){g.getColorFromDialog(function(a){a&&this.getDialog().getContentElement("info","bgColor").setValue(a),this.focus()},this)}}:f]},f,{type:"hbox",padding:0,widths:["60%","40%"],children:[{type:"text",
id:"borderColor",label:c.borderColor,default:"",setup:d(function(a){var b=a.getAttribute("borderColor");return a.getStyle("border-color")||b}),commit:function(a){this.getValue()?a.setStyle("border-color",this.getValue()):a.removeStyle("border-color"),a.removeAttribute("borderColor")}},k?{type:"button",id:"borderColorChoose",class:"colorChooser",label:c.chooseColor,style:(m?"margin-right":"margin-left")+": 10px",onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){g.getColorFromDialog(function(a){a&&this.getDialog().getContentElement("info","borderColor").setValue(a),this.focus()},this)}}:f]}]}]}]}],
onShow:function(){this.cells=CKEDITOR.plugins.tabletools.getSelectedCells(this._.editor.getSelection()),this.setupContent(this.cells)},onOk:function(){for(var a=this._.editor.getSelection(),b=a.createBookmarks(),c=this.cells,d=0;d<c.length;d++)this.commitContent(c[d]);this._.editor.forceNextSelectionCheck(),a.selectBookmarks(b),this._.editor.selectionChange()},onLoad:function(){var a={};this.foreach(function(b){b.setup&&b.commit&&(b.setup=CKEDITOR.tools.override(b.setup,function(c){return function(){c.apply(this,arguments),a[b.id]=b.getValue()}}),b.commit=CKEDITOR.tools.override(b.commit,function(c){return function(){a[b.id]!==b.getValue()&&c.apply(this,
arguments)}}))})}}}),CKEDITOR.dialog.add("specialchar",function(i){var e,j,l=i.lang.specialchar,k=function(c){var b;"a"==(c=c.data?c.data.getTarget():new CKEDITOR.dom.element(c)).getName()&&(b=c.getChild(0).getHtml())&&(c.removeClass("cke_light_background"),e.hide(),(c=i.document.createElement("span")).setHtml(b),i.insertText(c.getText()))},m=CKEDITOR.tools.addFunction(k),g=function(c,b){var a;if("span"==(b=b||c.data.getTarget()).getName()&&(b=b.getParent()),"a"==b.getName()&&(a=b.getChild(0).getHtml())){j&&d(null,j);var f=e.getContentElement("info","htmlPreview").getElement();e.getContentElement("info","charPreview").getElement().setHtml(a),f.setHtml(
CKEDITOR.tools.htmlEncode(a)),b.getParent().addClass("cke_light_background"),j=b}},d=function(c,b){"span"==(b=b||c.data.getTarget()).getName()&&(b=b.getParent()),"a"==b.getName()&&(e.getContentElement("info","charPreview").getElement().setHtml("&nbsp;"),e.getContentElement("info","htmlPreview").getElement().setHtml("&nbsp;"),b.getParent().removeClass("cke_light_background"),j=void 0)},n=CKEDITOR.tools.addFunction(function(c){var a,b=(c=new CKEDITOR.dom.event(c)).getTarget();a=c.getKeystroke();var f="rtl"==i.lang.dir;switch(a){case 38:(a=b.getParent().getParent().getPrevious())&&((a=a.getChild([b.getParent().getIndex(),0])).focus(),d(null,b),g(null,a)),
c.preventDefault();break;case 40:(a=b.getParent().getParent().getNext())&&(a=a.getChild([b.getParent().getIndex(),0]))&&1==a.type&&(a.focus(),d(null,b),g(null,a)),c.preventDefault();break;case 32:k({data:c}),c.preventDefault();break;case f?37:39:(a=b.getParent().getNext())?1==(a=a.getChild(0)).type?(a.focus(),d(null,b),g(null,a),c.preventDefault(!0)):d(null,b):(a=b.getParent().getParent().getNext())&&((a=a.getChild([0,0]))&&1==a.type?(a.focus(),d(null,b),g(null,a),c.preventDefault(!0)):d(null,b));break;case f?39:37:(a=b.getParent().getPrevious())?((a=a.getChild(0)).focus(),d(null,b),g(null,a),c.preventDefault(!0)):(a=b.getParent().getParent().getPrevious()
)?((a=a.getLast().getChild(0)).focus(),d(null,b),g(null,a),c.preventDefault(!0)):d(null,b)}});return{title:l.title,minWidth:430,minHeight:280,buttons:[CKEDITOR.dialog.cancelButton],charColumns:17,onLoad:function(){for(var h,e,c=this.definition.charColumns,b=i.config.specialChars,a=CKEDITOR.tools.getNextId()+"_specialchar_table_label",f=['<table role="listbox" aria-labelledby="'+a+'" style="width: 320px; height: 100%; border-collapse: separate;" align="center" cellspacing="2" cellpadding="2" border="0">'],d=0,g=b.length;d<g;){f.push('<tr role="presentation">');for(var j=0;j<c;j++,d++){if(h=b[d]){h instanceof Array?(e=h[1],h=h[0]):(e=h.replace("&","").replace(
";","").replace("#",""),e=l[e]||h);var k="cke_specialchar_label_"+d+"_"+CKEDITOR.tools.getNextNumber();f.push('<td class="cke_dark_background" style="cursor: default" role="presentation"><a href="javascript: void(0);" role="option" aria-posinset="'+(d+1)+'"',' aria-setsize="'+g+'"',' aria-labelledby="'+k+'"',' class="cke_specialchar" title="',CKEDITOR.tools.htmlEncode(e),'" onkeydown="CKEDITOR.tools.callFunction( '+n+', event, this )" onclick="CKEDITOR.tools.callFunction('+m+', this); return false;" tabindex="-1"><span style="margin: 0 auto;cursor: inherit">'+h+'</span><span class="cke_voice_label" id="'+k+'">'+e+"</span></a>")}else f.push(
'<td class="cke_dark_background">&nbsp;');f.push("</td>")}f.push("</tr>")}f.push("</tbody></table>",'<span id="'+a+'" class="cke_voice_label">'+l.options+"</span>"),this.getContentElement("info","charContainer").getElement().setHtml(f.join(""))},contents:[{id:"info",label:i.lang.common.generalTab,title:i.lang.common.generalTab,padding:0,align:"top",elements:[{type:"hbox",align:"top",widths:["320px","90px"],children:[{type:"html",id:"charContainer",html:"",onMouseover:g,onMouseout:d,focus:function(){var c=this.getElement().getElementsByTag("a").getItem(0);setTimeout(function(){c.focus(),g(null,c)},0)},onShow:function(){var c=this.getElement().getChild([0,0,0,
0,0]);setTimeout(function(){c.focus(),g(null,c)},0)},onLoad:function(c){e=c.sender}},{type:"hbox",align:"top",widths:["100%"],children:[{type:"vbox",align:"top",children:[{type:"html",html:"<div></div>"},{type:"html",id:"charPreview",className:"cke_dark_background",style:"border:1px solid #eeeeee;font-size:28px;height:40px;width:70px;padding-top:9px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;</div>"},{type:"html",id:"htmlPreview",className:"cke_dark_background",
style:"border:1px solid #eeeeee;font-size:14px;height:20px;width:70px;padding-top:2px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;</div>"}]}]}]}]}]}}),CKEDITOR.plugins.setLang("specialchar","en",{euro:"Euro sign",lsquo:"Left single quotation mark",rsquo:"Right single quotation mark",ldquo:"Left double quotation mark",rdquo:"Right double quotation mark",ndash:"En dash",mdash:"Em dash",iexcl:"Inverted exclamation mark",cent:"Cent sign",pound:"Pound sign",curren:"Currency sign",yen:"Yen sign",brvbar:"Broken bar",sect:"Section sign",uml:"Diaeresis",copy:"Copyright sign",ordf:"Feminine ordinal indicator",
laquo:"Left-pointing double angle quotation mark",not:"Not sign",reg:"Registered sign",macr:"Macron",deg:"Degree sign",sup2:"Superscript two",sup3:"Superscript three",acute:"Acute accent",micro:"Micro sign",para:"Pilcrow sign",middot:"Middle dot",cedil:"Cedilla",sup1:"Superscript one",ordm:"Masculine ordinal indicator",raquo:"Right-pointing double angle quotation mark",frac14:"Vulgar fraction one quarter",frac12:"Vulgar fraction one half",frac34:"Vulgar fraction three quarters",iquest:"Inverted question mark",Agrave:"Latin capital letter A with grave accent",Aacute:"Latin capital letter A with acute accent",Acirc:"Latin capital letter A with circumflex",
Atilde:"Latin capital letter A with tilde",Auml:"Latin capital letter A with diaeresis",Aring:"Latin capital letter A with ring above",AElig:"Latin Capital letter ",Ccedil:"Latin capital letter C with cedilla",Egrave:"Latin capital letter E with grave accent",Eacute:"Latin capital letter E with acute accent",Ecirc:"Latin capital letter E with circumflex",Euml:"Latin capital letter E with diaeresis",Igrave:"Latin capital letter I with grave accent",Iacute:"Latin capital letter I with acute accent",Icirc:"Latin capital letter I with circumflex",Iuml:"Latin capital letter I with diaeresis",ETH:"Latin capital letter Eth",
Ntilde:"Latin capital letter N with tilde",Ograve:"Latin capital letter O with grave accent",Oacute:"Latin capital letter O with acute accent",Ocirc:"Latin capital letter O with circumflex",Otilde:"Latin capital letter O with tilde",Ouml:"Latin capital letter O with diaeresis",times:"Multiplication sign",Oslash:"Latin capital letter O with stroke",Ugrave:"Latin capital letter U with grave accent",Uacute:"Latin capital letter U with acute accent",Ucirc:"Latin capital letter U with circumflex",Uuml:"Latin capital letter U with diaeresis",Yacute:"Latin capital letter Y with acute accent",THORN:"Latin capital letter Thorn",szlig:"Latin small letter sharp s",
agrave:"Latin small letter a with grave accent",aacute:"Latin small letter a with acute accent",acirc:"Latin small letter a with circumflex",atilde:"Latin small letter a with tilde",auml:"Latin small letter a with diaeresis",aring:"Latin small letter a with ring above",aelig:"Latin small letter ",ccedil:"Latin small letter c with cedilla",egrave:"Latin small letter e with grave accent",eacute:"Latin small letter e with acute accent",ecirc:"Latin small letter e with circumflex",euml:"Latin small letter e with diaeresis",igrave:"Latin small letter i with grave accent",iacute:"Latin small letter i with acute accent",
icirc:"Latin small letter i with circumflex",iuml:"Latin small letter i with diaeresis",eth:"Latin small letter eth",ntilde:"Latin small letter n with tilde",ograve:"Latin small letter o with grave accent",oacute:"Latin small letter o with acute accent",ocirc:"Latin small letter o with circumflex",otilde:"Latin small letter o with tilde",ouml:"Latin small letter o with diaeresis",divide:"Division sign",oslash:"Latin small letter o with stroke",ugrave:"Latin small letter u with grave accent",uacute:"Latin small letter u with acute accent",ucirc:"Latin small letter u with circumflex",uuml:"Latin small letter u with diaeresis",
yacute:"Latin small letter y with acute accent",thorn:"Latin small letter thorn",yuml:"Latin small letter y with diaeresis",OElig:"Latin capital ligature OE",oelig:"Latin small ligature oe",372:"Latin capital letter W with circumflex",374:"Latin capital letter Y with circumflex",373:"Latin small letter w with circumflex",375:"Latin small letter y with circumflex",sbquo:"Single low-9 quotation mark",8219:"Single high-reversed-9 quotation mark",bdquo:"Double low-9 quotation mark",hellip:"Horizontal ellipsis",trade:"Trade mark sign",9658:"Black right-pointing pointer",bull:"Bullet",rarr:"Rightwards arrow",rArr:"Rightwards double arrow",
hArr:"Left right double arrow",diams:"Black diamond suit",asymp:"Almost equal to"}),function(){function l(a){return function(){var e=this.getValue();return(e=!!(CKEDITOR.dialog.validate.integer()(e)&&0<e))||(alert(a),this.select()),e}}function m(a,e){var j=function(b){return new CKEDITOR.dom.element(b,a.document)};return{title:a.lang.table.title,minWidth:310,minHeight:CKEDITOR.env.ie?310:280,onShow:function(){var b,i=this.getContentElement("info","txtRows"),d=this.getContentElement("info","txtCols");"taoqtitableProperties"===e&&(b=a.element.findOne("table"),this._.selectedElement=b),b?(this.setupContent(b),i&&i.disable(),d&&d.disable()):(i&&i.enable(),
d&&d.enable())},onOk:function(){var b=a.getSelection(),i=this._.selectedElement&&b.createBookmarks(),d=this._.selectedElement||j("table"),c={};if(this.commitContent(c,d),c.info){var e=c.info;if(!this._.selectedElement){var g=d.append(j("tbody")),f=parseInt(e.txtRows,10)||0,k=parseInt(e.txtCols,10)||0;for(c=0;c<f;c++)for(var h=g.append(j("tr")),l=0;l<k;l++)h.append(j("td")).appendBogus()}if(e=e.selHeaders,!d.$.tHead&&("row"==e||"both"==e)){for(h=new CKEDITOR.dom.element(d.$.createTHead()),g=(g=d.getElementsByTag("tbody").getItem(0)).getElementsByTag("tr").getItem(0),c=0;c<g.getChildCount();c++)(f=g.getChild(c)).type==CKEDITOR.NODE_ELEMENT&&!f.data(
"cke-bookmark")&&(f.renameNode("th"),f.setAttribute("scope","col"));h.append(g.remove())}if(null!==d.$.tHead&&"row"!=e&&"both"!=e){for(h=new CKEDITOR.dom.element(d.$.tHead),k=(g=d.getElementsByTag("tbody").getItem(0)).getFirst();0<h.getChildCount();){for(g=h.getFirst(),c=0;c<g.getChildCount();c++)(f=g.getChild(c)).type==CKEDITOR.NODE_ELEMENT&&(f.renameNode("td"),f.removeAttribute("scope"));g.insertBefore(k)}h.remove()}if(!this.hasColumnHeaders&&("col"==e||"both"==e))for(h=0;h<d.$.rows.length;h++)(f=new CKEDITOR.dom.element(d.$.rows[h].cells[0])).renameNode("th"),f.setAttribute("scope","row");if(this.hasColumnHeaders&&"col"!=e&&"both"!=e)for(
c=0;c<d.$.rows.length;c++)"tbody"==(h=new CKEDITOR.dom.element(d.$.rows[c])).getParent().getName()&&((f=new CKEDITOR.dom.element(h.$.cells[0])).renameNode("td"),f.removeAttribute("scope"))}if(this._.selectedElement)try{b.selectBookmarks(i)}catch(m){}else(b=j("div")).setAttributes({"data-new":!0,"data-qti-class":"table",class:"widget-box"}),b.append(d),"function"==typeof(d=a.config.taoQtiItem).insert&&(a.insertElement(b),d.insert.call(a,b.$))},contents:[{id:"info",label:"TAO QTI TABLE",elements:[{type:"vbox",widths:[null,null],styles:["vertical-align:top"],children:[{type:"text",id:"txtRows",default:3,label:a.lang.table.rows,required:!0,
controlStyle:"width:5em",validate:l(a.lang.table.invalidRows),setup:function(b){this.setValue(b.$.rows.length)},commit:k},{type:"text",id:"txtCols",default:2,label:a.lang.table.columns,required:!0,controlStyle:"width:5em",validate:l(a.lang.table.invalidCols),setup:function(b){this.setValue(function(a){for(var i,e=0,j=0,b=0,d=a.$.rows.length;b<d;b++){for(var c=e=0,g=(i=a.$.rows[b]).cells.length;c<g;c++)e+=i.cells[c].colSpan;j<e&&(j=e)}return j}(b))},commit:k},{type:"html",html:"&nbsp;"},{type:"select",id:"selHeaders",requiredContent:"th",default:"",label:a.lang.table.headers,items:[[a.lang.table.headersNone,""],[a.lang.table.headersRow,"row"],[
a.lang.table.headersColumn,"col"],[a.lang.table.headersBoth,"both"]],setup:function(b){var a=this.getDialog();a.hasColumnHeaders=!0;for(var d=0;d<b.$.rows.length;d++){var c=b.$.rows[d].cells[0];if(c&&"th"!=c.nodeName.toLowerCase()){a.hasColumnHeaders=!1;break}}null!==b.$.tHead?this.setValue(a.hasColumnHeaders?"both":"row"):this.setValue(a.hasColumnHeaders?"col":"")},commit:k},{type:"text",id:"txtCaption",requiredContent:"caption",label:a.lang.table.caption,setup:function(b){if(this.enable(),0<(b=b.getElementsByTag("caption")).count()){var a=(b=b.getItem(0)).getFirst(CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT));a&&!a.equals(b.getBogus())?(
this.disable(),this.setValue(b.getText())):(b=CKEDITOR.tools.trim(b.getText()),this.setValue(b))}},commit:function(b,e){if(this.isEnabled()){var d=this.getValue(),c=e.getElementsByTag("caption");if(d)0<c.count()?(c=c.getItem(0)).setHtml(""):(c=new CKEDITOR.dom.element("caption",a.document),e.getChildCount()?c.insertBefore(e.getFirst()):c.appendTo(e)),c.append(new CKEDITOR.dom.text(d,a.document));else if(0<c.count())for(d=c.count()-1;0<=d;d--)c.getItem(d).remove()}}}]}]}]}}var k=function(a){var e=this.id;a.info||(a.info={}),a.info[e]=this.getValue()};CKEDITOR.dialog.add("taoqtitable",function(a){return m(a,"taoqtitable")}),CKEDITOR.dialog.add(
"taoqtitableProperties",function(a){return m(a,"taoqtitableProperties")})}(),define("ckeditor",function(global){return function(){return global.CKEDITOR}}(this)),define("ui/ckeditor/dtdHandler",["lodash"],function(_){"use strict";return function(){var dtd,X,Y,P,F,FO,M,E,T,DFO,dtdMode="html",dtds={},html5Only=["article","aside","bdi","command","datalist","details","dialog","figcaption","figure","footer","header","keygen","main","mark","meter","nav","output","progress","rp","rt","ruby","section","summary","time","wbr","hgroup"],getParentsOf=function(child){var element,parents=[];for(element in child=_normalizeElement(child),dtds[dtdMode]
)dtds[dtdMode].hasOwnProperty(element)&&0!==element.indexOf("$")&&child in dtds[dtdMode][element]&&parents.push(element);return parents},getChildrenOf=function(parent){return(parent=_normalizeElement(parent))in dtds[dtdMode]?_.keys(dtds[dtdMode][parent]):[]};function _normalizeElement(element){if(_.isObject(element)&&!_.isArray(element)){if("nodeName"in element)return element.nodeName.toLowerCase();if(0 in element&&"nodeName"in element[0])return element[0].nodeName.toLowerCase()}else if(_.isString(element))return element.toLowerCase();throw new Error("Unknown element "+element)}return dtds.html=(X=_.extend,Y=function(source,removed){var i,name,
substracted=_.cloneDeep(source);for(i=1;i<arguments.length;i++)for(name in removed=arguments[i])delete substracted[name];return substracted},F={},FO={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},M={command:1,link:1,meta:1,noscript:1,script:1,style:1},E={},DFO={center:1,dir:1,noframes:1},X(P={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,
noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},T={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),X(F,FO,P,DFO),X(dtd={a:Y(P,{a:1,button:1}),abbr:P,address:F,area:E,article:X({style:1},F),aside:X({style:1},F),audio:X({source:1,track:1},F),b:P,base:E,bdi:P,bdo:P,blockquote:F,body:F,br:E,button:Y(P,{a:1,button:1}),canvas:P,caption:F,cite:P,code:P,col:E,colgroup:{col:1},command:E,datalist:X({option:1},P),dd:F,del:P,details:X({summary:1},F),dfn:P,div:X({style:1},F),dl:{dt:1,dd:1},dt:F,em:P,embed:E,fieldset:X({
legend:1},F),figcaption:F,figure:X({figcaption:1},F),footer:F,form:F,h1:P,h2:P,h3:P,h4:P,h5:P,h6:P,head:X({title:1,base:1},M),header:F,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:E,html:X({head:1,body:1},F,M),i:P,iframe:T,img:E,input:E,ins:P,kbd:P,keygen:E,label:P,legend:P,li:F,link:E,map:F,mark:P,menu:X({li:1},F),meta:E,meter:Y(P,{meter:1}),nav:F,noscript:X({link:1,meta:1,style:1},P),object:X({param:1},P),ol:{li:1},optgroup:{option:1},option:T,output:P,p:P,param:E,pre:P,progress:Y(P,{progress:1}),q:P,rp:P,rt:P,ruby:X({rp:1,rt:1},P),s:P,samp:P,script:T,section:X({style:1},F),select:{optgroup:1,option:1},small:P,source:E,span:P,strong:P,style:T,sub:P,summary:P,
sup:P,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:F,textarea:T,tfoot:{tr:1},th:F,thead:{tr:1},time:Y(P,{time:1}),title:T,tr:{th:1,td:1},track:E,u:P,ul:{li:1},var:P,video:X({source:1,track:1},F),wbr:E,acronym:P,applet:X({param:1},F),basefont:E,big:P,center:F,dialog:E,dir:{li:1},font:P,isindex:E,noframes:F,strike:P,tt:P},{$block:X({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},FO,DFO),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},
$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1,table:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:P,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:X({body:1,head:1,html:1},dtd.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,
table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),dtd),
dtds.qti=function(){for(var element,listCnt,child,actCnt,action,tmp,intersection,actions=["remove","add"],actLnt=actions.length,overrides={pre:{add:[],remove:["img","object","big","small","sub","sup"]},table:{remove:["col"]}},qtiDtd=_.cloneDeep(dtds.html),h5Len=html5Only.length;h5Len--;)delete qtiDtd[html5Only[h5Len]];for(element in qtiDtd)qtiDtd.hasOwnProperty(element)&&(intersection=_.intersection(_.keys(qtiDtd[element]),html5Only)).length&&(overrides[element]||(overrides[element]={remove:[]}),overrides[element].remove=overrides[element].remove.concat(intersection));for(element in overrides)if(overrides.hasOwnProperty(element)&&qtiDtd.hasOwnProperty(
element))for(actCnt=0;actCnt<actLnt;actCnt++)if((action=actions[actCnt])in overrides[element])if(listCnt=overrides[element][action].length,"remove"!==action||"all"!==overrides[element][action])for(;listCnt--;)child=overrides[element][action][listCnt],tmp=_.cloneDeep(qtiDtd[element]),"remove"===action?(delete tmp[child],qtiDtd[element]=tmp):"add"===action&&void 0!==qtiDtd[child]&&(tmp[child]=1,qtiDtd[element]=tmp[child]);else qtiDtd[element]={};return qtiDtd}(),{getDtd:function(){return dtds[dtdMode]},getChildrenOf:getChildrenOf,getParentsOf:getParentsOf,isChildOf:function(child,of){return _.contains(getChildrenOf(of),_normalizeElement(child))},
isParentOf:function(parent,of){return _.contains(getParentsOf(of),_normalizeElement(parent))},getMode:function(){return dtdMode},setMode:function(mode){if("xhtml"===mode.toLowerCase()&&(mode="html"),!_.contains(["html","qti"],mode))throw new Error("Unknown mode "+mode);return dtdMode=mode,this}}}()}),define("ui/ckeditor/ckConfigurator",["jquery","lodash","ckeditor","ui/ckeditor/dtdHandler"],function($,_,ckeditor,dtdHandler){"use strict";var toolbarPresets,ckConfig,_switchDtd,originalConfig=_.cloneDeep(window.CKEDITOR.config);return ckConfig={disableAutoInline:!0,entities:!(toolbarPresets={inline:[{name:"basicstyles",items:["Bold","Italic","Subscript",
"Superscript"]},{name:"insert",items:["SpecialChar","TaoQtiTable","TaoTooltip"]},{name:"links",items:["Link"]}],flow:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar","TaoQtiTable","TaoTooltip"]},{name:"links",items:["Link"]}],block:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["Image","SpecialChar","TaoQtiTable","TaoTooltip"]},{name:"links",items:["Link"]},{name:"styles",items:["Format"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Blockquote","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]}],extendedText:[{
name:"basicstyles",items:["Bold","Italic","Underline","Subscript","Superscript"]},{name:"insert",items:["SpecialChar"]},{name:"paragraph",items:["NumberedList","BulletedList"]},{name:"clipboard",items:["Cut","Copy","Paste"]},{name:"history",items:["Undo","Redo"]},{name:"fontstyles",items:["TextColor","Font","FontSize"]}]}),entities_processNumerical:!0,autoParagraph:!1,extraPlugins:"confighelper",floatSpaceDockedOffsetY:0,forcePasteAsPlainText:!0,skin:"tao",language:"en",removePlugins:"",linkShowAdvancedTab:!1,justifyClasses:["txt-lft","txt-ctr","txt-rgt","txt-jty"],linkShowTargetTab:!1,coreStyles_underline:{element:"span",attributes:{class:"txt-underline"}},
coreStyles_highlight:{element:"span",attributes:{class:"txt-highlight"}},specialChars:["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";",["&lt;","Less than"],["&le;","Less than or equal to"],"&asymp;","=","&ne;",["&ge;","Greater than or equal to"],["&gt;","Greater than"],"?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;",
"&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;",
"&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"],disableNativeTableHandles:!0},(_switchDtd=function(dtdMode){dtdHandler.setMode(dtdMode),window.CKEDITOR.dtd=dtdHandler.getDtd()})("qti"),{getConfig:function(editor,toolbarType,options){var toolbar,toolbars,config,dtdMode,
positionedPlugins={};if("reset"===toolbarType)return originalConfig;for(toolbar in(options=options||{}).resourcemgr=options.resourcemgr||{},toolbars=_.clone(toolbarPresets,!0),"qti"!==(dtdMode=options.dtdMode||"html")&&0!==toolbarType.indexOf("qti")||(toolbarType=toolbarType.slice(3).toLowerCase(),ckConfig.allowedContent=!0,ckConfig.autoParagraph=!1,dtdMode="qti"),"qti"===dtdMode&&(options.qtiMedia&&(positionedPlugins.TaoQtiMedia={insertAfter:"SpecialChar"}),options.qtiImage&&(positionedPlugins.TaoQtiImage={insertAfter:"SpecialChar"}),options.qtiInclude&&(positionedPlugins.TaoQtiInclude={insertAfter:"SpecialChar"}),options.underline&&(
positionedPlugins.TaoUnderline={insertAfter:"Italic"}),options.highlight&&(options.underline?positionedPlugins.TaoHighlight={insertAfter:"TaoUnderline"}:positionedPlugins.TaoHighlight={insertAfter:"Italic"}),options.mathJax&&(positionedPlugins.TaoQtiMaths={insertAfter:"SpecialChar"})),options.toolbar&&(toolbars[toolbarType]=_.clone(options.toolbar)),toolbars)toolbars.hasOwnProperty(toolbar)&&(ckConfig["toolbar_"+toolbar]=toolbars[toolbar]);return void 0!==toolbars[toolbarType]&&(ckConfig.toolbar=toolbars[toolbarType]),void 0!==options.positionedPlugins&&(options.positionedPlugins={}),!1!==options.positionedPlugins&&(positionedPlugins=_.assign(
positionedPlugins,_.clone(options.positionedPlugins)),function(ckConfig,positionedPlugins){var itCnt,itLen,method,plugin,index,separator,idxItem,numToReplace,stringVal,i,tbCnt=ckConfig.toolbar.length,stringVals={};for(positionedPlugins=positionedPlugins||{},ckConfig.extraPlugins=function(positionedPluginArr,extraPlugins){for(var pluginIndex=positionedPluginArr.length,extraPluginArr=extraPlugins.split(",");pluginIndex--;)positionedPluginArr[pluginIndex]=positionedPluginArr[pluginIndex].toLowerCase();return(extraPluginArr=_.compact(_.union(extraPluginArr,positionedPluginArr))).join(",")}(_.keys(positionedPlugins),ckConfig.extraPlugins),i=0;i<tbCnt;i++
)_.isString(ckConfig.toolbar[i])&&(stringVals[i]=ckConfig.toolbar[i],ckConfig.toolbar[i]={items:[]});for(plugin in positionedPlugins){for(method=function(pluginProps){for(var propIndex=pluginProps.length;propIndex--;)if(0===pluginProps[propIndex].indexOf("insert")||"replace"===pluginProps[propIndex])return pluginProps[propIndex];throw new Error("Missing key insertBefore | insertAfter | replace in positionedPlugins")}(_.keys(positionedPlugins[plugin])),idxItem=positionedPlugins[plugin][method].toLowerCase(),separator=positionedPlugins[plugin].separator||!1,index=-1;tbCnt--;){for(itLen=ckConfig.toolbar[tbCnt].items.length,itCnt=0;itCnt<itLen;itCnt++)if(
ckConfig.toolbar[tbCnt].items[itCnt].toLowerCase()===idxItem){index=itCnt;break}if(-1<index){numToReplace="replace"===method?1:0,"insertAfter"===method&&index++,separator&&(ckConfig.toolbar[tbCnt].items.splice(index,numToReplace,"-"),index++),ckConfig.toolbar[tbCnt].items.splice(index,numToReplace,plugin);break}}tbCnt=ckConfig.toolbar.length}for(stringVal in stringVals)ckConfig.toolbar[stringVal]=stringVals[stringVal]}(ckConfig,positionedPlugins)),config=_.assign({},_.cloneDeep(originalConfig),ckConfig,_.omit(options,["qtiImage","qtiInclude","underline","highlight","mathJax","toolbar","positionedPlugins"])),editor.on("focus",function(){_switchDtd(dtdMode)}),
editor.on("instanceReady",function(e){$(e.editor.element.$).removeAttr("title")}),window.CKEDITOR.on("dialogDefinition",function(e){var linkTypes,wanted,linkIndex;if("link"===e.data.name){for(linkIndex=(linkTypes=e.data.definition.getContents("info").get("linkType").items).length;linkIndex--;)"anchor"===linkTypes[linkIndex][1]||(wanted=linkIndex);linkTypes.splice(wanted+1,1)}}),config}}}),define("tpl!ui/class/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",
functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="class-selector">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.classUri,{hash:{},inverse:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <a href="#" class="selected truncate empty">',stack1=(helper=helpers.placeholder)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.placeholder)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n    "},data),fn:this.program(1,function(depth0,data){var stack1,helper,buffer=""
;return buffer+='\n    <a href="#" class="selected truncate" data-uri="',stack1=(helper=helpers.classUri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.classUri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+"</a>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="options folded">\n        <ul>',((stack1=(helper=helpers.tree)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.tree)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</ul>\n    </div>\n</div>\n"})}),define("tpl!ui/class/tpl/listItem",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",
functionType="function",escapeExpression=this.escapeExpression;return buffer+='<li>\n    <a href="#" data-uri="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+'" title="',buffer+=escapeExpression(stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+'">',buffer+=escapeExpression(stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label
)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+"</a>\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.childList,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <ul>\n            ",((stack1=(helper=helpers.childList)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.childList)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</li>\n\n"})}),define("css!ui/class/css/selector",[],function(){}),define(
"ui/class/selector",["jquery","lodash","i18n","ui/component","tpl!ui/class/tpl/selector","tpl!ui/class/tpl/listItem","css!ui/class/css/selector.css"],function($,_,__,component,selectorTpl,listItemTpl){"use strict";var defaultConfig={classes:[],placeholder:__("Select a class")};return function($container,config){var $selected,$options,classList={},buildTree=function(classes){return _.reduce(classes,function nodeToListItem(acc,node){var item;return node.uri&&node.label&&(item=_.clone(node),classList[item.uri]=item,node.children&&node.children.length&&(item.childList=_.reduce(node.children,nodeToListItem,"")),acc+=listItemTpl(item)),acc},"")},
classSelector=component({setValue:function(uri){return this.config.classUri===uri||_.isUndefined(classList[uri])||(this.config.classUri=uri,this.is("rendered")&&$selected.length&&($selected.text(classList[uri].label).attr({title:classList[uri].label,"data-uri":uri}).data("uri",uri).removeClass("empty"),this.trigger("change",uri,classList[uri]))),this},getValue:function(){return this.config.classUri},getClassNode:function(){var node=null;return this.config.classUri&&classList[this.config.classUri]&&(node=classList[this.config.classUri]),node},empty:function(){return this.is("rendered")&&$selected.length&&this.config.classUri&&(this.config=_.omit(this.config,
"classUri"),$selected.text(this.config.placeholder).removeAttr("title").data("uri",null).removeAttr("data-uri").addClass("empty"),this.trigger("change")),this},hasNode:function(node){var uri;return!(!node||!classList)&&(uri=_.isString(node)?node:node.uri,_.has(classList,uri))},removeNode:function(node){var uri;return!!this.hasNode(node)&&((uri=_.isString(node)?node:node.uri)===this.config.classUri&&this.empty(),classList=_.omit(classList,uri),this.is("rendered")&&$('[data-uri="'+uri+'"]',this.getElement()).parent("li").remove(),!this.hasNode(node))},addNode:function(node,parentUri){var subTree,$parentNode;return this.is("rendered")&&node&&!this.hasNode(node
)&&(subTree=buildTree([node]),parentUri&&($parentNode=$('[data-uri="'+parentUri+'"]',$options)),$parentNode&&$parentNode.length||($parentNode=$("[data-uri]:first-child",$options)),$parentNode.parent("li").children("ul").length?$parentNode.parent("li").children("ul").append(subTree):$parentNode.parent("li").append("<ul>"+subTree+"</ul>")),this},updateNode:function(node){return node&&node.uri&&this.hasNode(node)&&classList[node.uri].label!==node.label&&(classList[node.uri].label=node.label,this.is("rendered")&&$('[data-uri="'+node.uri+'"]',this.getElement()).attr("title",node.label).text(node.label)),this},updateNodes:function(nodes){var self=this
;return _.forEach(nodes,function(node){node.children&&self.updateNodes(node.children),self.updateNode(node)}),this}},defaultConfig).setTemplate(selectorTpl).on("init",function(){this.config.tree=buildTree(this.config.classes),this.config.classUri&&classList[this.config.classUri]&&(this.config.label=classList[this.config.classUri].label),this.render($container)}).on("render",function(){var self=this,$component=this.getElement();$selected=$(".selected",$component),$options=$(".options",$component),$selected.on("click",function(e){e.preventDefault(),$options.toggleClass("folded")}),$options.on("click","a",function(e){e.preventDefault(),self.setValue($(this
).data("uri")),$options.toggleClass("folded")})}).on("destroy",function(){classList={}});return _.defer(function(){classSelector.init(config)}),classSelector}}),define("ui/component/containable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){"use strict";var ns=".makeContainable",defaultConfig={},containableComponent={containIn:function($container,options){var self=this;return self.off("move"+ns).on("move"+ns,function(){self.off("move"+ns),self._containComponent($container,options),self.containIn($container,options)}),self},_containComponent:function($container,optionsParam){var options=optionsParam||{},
position=this.getPosition(),size=this.getOuterSize(),containerSize_width=$container.innerWidth(),containerSize_height=$container.innerHeight(),newX=position.x,newY=position.y,paddingTop=options.paddingTop||options.padding||0,paddingRight=options.paddingRight||options.padding||0,paddingBottom=options.paddingBottom||options.padding||0,paddingLeft=options.paddingLeft||options.padding||0;position.x<paddingLeft?newX=0+paddingLeft:position.x+size.width>containerSize_width-paddingRight&&(newX=containerSize_width-size.width-paddingRight),position.y<paddingTop?newY=0+paddingTop:position.y+size.height>containerSize_height-paddingBottom&&(
newY=containerSize_height-size.height-paddingBottom),newX===position.x&&newY===position.y||(this.moveTo(newX,newY),this.trigger("contained",newX,newY))}};return function(component,config){return _.assign(component,containableComponent),makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(ns).on("init"+ns,function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("ui/component/draggable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){"use strict";return function(component,config){return makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(".makeDraggable").on(
"init.makeDraggable",function(){_.defaults(this.config,config||{})}).on("render.makeDraggable",function(){var self=this,$element=this.getElement(),element=$element[0],rootNode=document.querySelector("html");this.config.dragRestriction||(this.config.dragRestriction=this.getContainer()[0]),interact(element).draggable({autoScroll:!0,restrict:{restriction:this.config.dragRestriction,elementRect:{left:0,right:1,top:0,bottom:1}},onmove:function(event){var xOffset=Math.round(event.dx),yOffset=Math.round(event.dy);self.moveBy(xOffset,yOffset),self.trigger("dragmove",xOffset,yOffset)}}).on("dragstart",function(){self.setState("moving",!0),self.trigger("dragstart")}
).on("dragend",function(){self.setState("moving",!1),self.trigger("dragend")}),$element.off(".makeDraggable").on("click.makeDraggable",function(){_.delay(function(){self.is("sizing")||self.is("moving")||!rootNode||(rootNode.style.cursor="default")},25)})})}}),define("ui/component/resizable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){"use strict";var defaultConfig={minWidth:50,minHeight:50,edges:{left:!0,right:!0,bottom:!0,top:!0}},resizableComponent={_getCappedValue:function(value,min,max){var capped=value;return _.isUndefined(max)||_.isNull(max)||(capped=Math.min(capped,max)),_.isUndefined(min)||_.isNull(min)||(
capped=Math.max(capped,min)),capped},resizeTo:function(newWidth,newHeight,resizeFromLeft,resizeFromTop){var currentSize,newX,newY,position,shouldMove=!1;return this.is("rendered")&&!this.is("disabled")&&(this.trigger("beforeresize",newWidth,newHeight,resizeFromLeft,resizeFromTop),currentSize=this.getSize(),newWidth=this._getCappedValue(newWidth,this.config.minWidth,this.config.maxWidth),newHeight=this._getCappedValue(newHeight,this.config.minHeight,this.config.maxHeight),position=this.getPosition(),resizeFromLeft&&newWidth!==currentSize.width&&(newX=position.x+currentSize.width-newWidth,shouldMove=!0),resizeFromTop&&newHeight!==currentSize.height&&(
newY=position.y+currentSize.height-newHeight,shouldMove=!0),shouldMove&&this.moveTo(newX||position.x,newY||position.y),this.setSize(newWidth,newHeight),position=this.getPosition(),this.trigger("resize",newWidth,newHeight,resizeFromLeft,resizeFromTop,position.x,position.y)),this}};return function(component,config){return _.assign(component,resizableComponent),makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(".makeResizable").on("init.makeResizable",function(){_.defaults(this.config,config||{},defaultConfig)}).on("render.makeResizable",function(){var self=this,element=this.getElement()[0];this.config.resizeRestriction||(
this.config.resizeRestriction=this.getContainer()[0]),interact(element).resizable({autoScroll:!0,restrict:{restriction:this.config.resizeRestriction},edges:this.config.edges}).on("resizemove",function(event){self.resizeTo(event.rect.width,event.rect.height,event.edges.left,event.edges.top)}).on("resizestart",function(){self.setState("sizing",!0),self.trigger("resizestart")}).on("resizeend",function(){self.setState("sizing",!1),self.trigger("resizeend")})})}}),define("tpl!ui/component/tpl/window",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,
Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="window-component">\n    <div class="window-component-title-bar">\n        <div class="window-component-title">',buffer+=(0,this.escapeExpression)((helper=helpers.windowTitle)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.windowTitle)?helper.call(depth0,{hash:{},data:data}):helper)+'</div>\n        <div class="window-component-controls"> </div>\n    </div>\n    <div class="window-component-body"></div>\n</div>\n'})}),define("ui/component/windowed",["lodash","i18n","jquery","ui/component/placeable","tpl!ui/component/tpl/window"],function(_,__,$
,makePlaceable,windowTpl){"use strict";var eventNs=".windowed",cssNs=".window-component",defaultConfig={hasCloser:!0,hasBin:!1},controlsPresets={bin:{id:"bin",order:100,icon:"bin",description:__("Delete"),event:"delete"},closer:{id:"closer",order:200,icon:"result-nok",description:__("Close"),event:"close",onclick:function(){this.hide()}}},windowedComponentAPI={getControls:function(){return this.getElement().find(cssNs+"-controls")},getTitle:function(){return this.getElement().find(cssNs+"-title")},getBody:function(){return this.getElement().find(cssNs+"-body")},addControl:function(controlOptions){if(!_.isString(controlOptions.id)||_.isEmpty(controlOptions.id
))throw new Error("control must have an id");if(!_.isString(controlOptions.icon)||_.isEmpty(controlOptions.icon))throw new Error("control must have an icon");if(!(_.isFunction(controlOptions.onclick)||_.isString(controlOptions.event)&&""!==controlOptions.event.trim()))throw new Error("control must have valid onclick or event parameter");return _.isArray(this._windowControls)||(this._windowControls=[]),this._windowControls.push(controlOptions),this},addPresets:function(){return this.config.hasCloser&&this.addControl(controlsPresets.closer),this.config.hasBin&&this.addControl(controlsPresets.bin),this},_renderControls:function(){var self=this,
$controlsArea=this.getControls(),controlsCallbacks={},controlsEvents={};return _.isArray(this._windowControls)&&($controlsArea.empty(),this._windowControls.sort(function(a,b){return(a.order||0)-(b.order||0)}),this._windowControls.forEach(function(control){var $control=$("<button>",{class:"icon-"+control.icon,"data-control":control.id,title:control.description});$controlsArea.append($control),controlsCallbacks[control.id]=control.onclick,controlsEvents[control.id]=control.event}),$controlsArea.off("click"+eventNs).on("click"+eventNs,function(e){var controlId=$(e.target).data("control");e.stopPropagation(),_.isFunction(controlsCallbacks[controlId]
)&&controlsCallbacks[controlId].call(self),_.isString(controlsEvents[controlId])&&self.trigger(controlsEvents[controlId])})),this}};return function(component,config){return _.assign(component,windowedComponentAPI),makePlaceable.isPlaceable(component)||makePlaceable(component),component.setTemplate(windowTpl).off(eventNs).on("init"+eventNs,function(){_.defaults(this.config,config||{},defaultConfig),this.addPresets()}).on("render"+eventNs,function(){this._renderControls()}).on("destroy"+eventNs,function(){this.getControls().off(eventNs)})}}),define("ui/container",["jquery","lodash"],function($,_){"use strict";function getCssClass(selector){var parts
;return parts=[],_.forEach(selector.split(" "),function(elem){elem&&"."===elem.charAt(0)&&parts.push(elem.substr(1))}),parts.join(" ")}return function(containerSelector){var $container,containerCls;return{init:function(cssScope){if(!cssScope||!_.isString(cssScope))throw new TypeError("You must provide a CSS scope for the container manager!");return containerCls=getCssClass(cssScope),$container=$(containerSelector=cssScope),this},destroy:function(){return $container=null,this},hasScope:function(scope){return!(!$container||!$container.is(scope))},changeScope:function(scope){return $container&&($container.removeClass().addClass(containerCls),
scope&&$container.addClass(getCssClass(scope))),this},find:function(selector){return $container.find(selector)},write:function(content){return $container.html(content),this},getData:function(){return $container.data()},setData:function(data){return $container.removeData().data(data),this},removeData:function(){return $container.removeData(),this},hasValue:function(name){var data=this.getData();return void 0!==(data&&data[name])},getValue:function(name){var data=this.getData();return data&&data[name]},setValue:function(name,value){return $container.data(name,value),this},getElement:function(){return $container},getSelector:function(){return containerSelector}
}.init(containerSelector||".container")}}),define("tpl!ui/contextualPopup/popup",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){return'<button class="btn btn-info small done">done</button>'}function program4(depth0,data){var helper,options,buffer="";return buffer+='<a href="#" class="btn cancel" title="'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"cancel",options):helperMissing.call(depth0,"__","cancel",options)))+'">cancel</a>'}return buffer+='<div class="contextual-popup" style="top:'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.popup)||!1===stack1?stack1:stack1.top)?stack1.apply(depth0):stack1)+"px; left:"+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.popup)||!1===stack1?stack1:stack1.left)?stack1.apply(depth0):stack1)+'px">\n    <div class="arrow" style="left:'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.arrow)||!1===stack1?stack1:stack1.left)?stack1.apply(
depth0):stack1)+'px"></div>\n    <div class="arrow-cover" style="left:'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.arrow)||!1===stack1?stack1:stack1.leftCover)?stack1.apply(depth0):stack1)+'px"></div>\n    <div class="popup-content">',((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.content)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+='</div>\n    <div class="footer">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.controls,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,buffer=""
;return buffer+="\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.controls)||!1===stack1?stack1:stack1.done,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.controls)||!1===stack1?stack1:stack1.cancel,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>"})}),define("ui/contextualPopup",["jquery","lodash","tpl!ui/contextualPopup/popup"],
function($,_,popupTpl){"use strict";var _ns=".contextual-popup",_defaults={controls:!1,style:{},position:"bottom",callbacks:{}};function _hide($element){$element.hide(),$element.trigger("hide"+_ns)}function _done($element){_hide($element),$element.trigger("done"+_ns)}function _cancel($element){_hide($element),$element.trigger("cancel"+_ns)}var _styleDefaults={popupWidth:500,arrowWidth:6,marginTop:15,marginLeft:15};function _computePosition($anchor,$container){var $contextualPopup=$anchor.children(".contextual-popup"),options=$anchor.data("contextual-popup-options"),styleOpts=_.defaults(options.style||{},_styleDefaults),popupWidth=styleOpts.popupWidth,
popupHeight=$contextualPopup.outerHeight(),arrowWidth=styleOpts.arrowWidth,marginTop=styleOpts.marginTop,marginLeft=styleOpts.marginLeft,_anchor_left=($anchor.offset().top,$anchor.offset().left),_anchor_w=$anchor.innerWidth(),_anchor_h=$anchor.innerHeight(),_container_left=($container.offset().top,$container.offset().left),_container_w=$container.innerWidth(),_popup={top:_anchor_h+marginTop,left:-popupWidth/2+_anchor_w/2,w:popupWidth};switch(options.position){case"top":_popup.top=-marginTop-popupHeight,$contextualPopup.removeClass("bottom").addClass("top");break;case"bottom":_popup.top=_anchor_h+marginTop,$contextualPopup.removeClass("top").addClass("bottom"
)}var offset=_anchor_left-_container_left;return offset+marginLeft+_anchor_w/2<_popup.w/2?_popup.left=-offset+marginLeft:_container_w-(offset+_anchor_w/2+marginLeft)<_popup.w/2&&(_popup.left=-offset+_container_w-marginLeft-_popup.w),{popup:_popup,arrow:{left:-_popup.left+_anchor_w/2-arrowWidth,leftCover:-_popup.left+_anchor_w/2-arrowWidth-6}}}return function($anchor,$container,options){var destroyed=!1;options=_.defaults(options,_defaults),$anchor.data("contextual-popup-options",options);var positions=_computePosition($anchor,$container),$element=$(popupTpl({popup:positions.popup,arrow:positions.arrow,controls:options.controls}));function setContent(content
){(content instanceof $||_.isString(content))&&$element.find(".popup-content").empty().append(content)}function runCallback(name){var result=!0;return options.callbacks[name]&&_.isFunction(options.callbacks[name])&&(result=options.callbacks[name]()),result}$anchor.find(".contextual-popup").remove(),$element.addClass(options.position),$element.css("width",options.style.popupWidth),$anchor.append($element),$element.off(_ns).on("click"+_ns,".done",function(){runCallback("beforeDone")&&_done($element)}).on("click"+_ns,".cancel",function(){runCallback("beforeCancel")&&_cancel($element)}),options.content&&setContent(options.content);var popup={getPopup:function(){
return $element},setContent:setContent,reposition:function(){var pos=_computePosition($anchor,$container);$element.css({top:pos.popup.top,left:pos.popup.left}),$element.children(".arrow").css("left",pos.arrow.left),$element.children(".arrow-cover").css("left",pos.arrow.leftCover)},done:function(){_done($element)},cancel:function(){_cancel($element)},hide:function(){_hide($element)},show:function(){$element.show(),$element.trigger("show"+_ns)},destroy:function(){destroyed||(runCallback("beforeDestroy"),destroyed=!0,$element.remove(),$element.trigger("destroy"+_ns))},isVisible:function(){return $element.is(":visible")}};return popup.reposition(),popup}}),
define("tpl!ui/datalist/tpl/main",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program3(depth0,data){return" hidden"}function program6(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <button class="btn-info small ',((stack1=helpers.if.call(depth0,depth0&&depth0.massAction,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+='" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n                ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",stack1=(helper=helpers.label
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n            </button>\n            "}function program7(depth0,data){return" mass-action hidden"}function program9(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program11(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon icon-',
stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>'}function program13(depth0,data){return"\n                <col/>\n                "}return buffer+='<div class="datalist">\n    <h1 ',((stack1=helpers.unless.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){return'class="hidden"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</h1>\n    <h2>\n        <span class="empty-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textEmpty,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">',stack1=(helper=helpers.textEmpty)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.textEmpty)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span>\n        <span class="available-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textNumber,{hash:{},
inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span class="label">',stack1=(helper=helpers.textNumber)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.textNumber)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span>: <span class="count"></span></span>\n        <span class="loading',((stack1=helpers.unless.call(depth0,depth0&&depth0.textLoading,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span>',stack1=(helper=helpers.textLoading)?helper.call(depth0,{hash:{},
data:data}):typeof(helper=depth0&&depth0.textLoading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span>...</span>\n    </h2>\n    <div class="list">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.tools,{hash:{},inverse:self.noop,fn:self.program(5,function(depth0,data){var stack1,buffer="";return buffer+='\n        <aside class="action-bar clearfix">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.tools,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </aside>\n        "},data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+='\n\n        <table class="matrix">\n            <colgroup>\n                ',((stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                <col/>\n                ",((stack1=helpers.if.call(depth0,depth0&&depth0.actions,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </colgroup>\n            <thead>\n                <tr>\n                    ",((stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},
inverse:self.noop,fn:self.program(15,function(depth0,data){return'\n                    <th class="checkboxes"><input type="checkbox" name="checkall" value="1" /></th>\n                    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n                    <th class="label">',stack1=(helper=helpers.labelText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.labelText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</th>\n                    ",((stack1=helpers.if.call(depth0,depth0&&depth0.actions,{hash:{},inverse:self.noop,fn:self.program(17,function(depth0,data){var helper,
options,buffer="";return buffer+='\n                    <th class="actions">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Actions",options):helperMissing.call(depth0,"__","Actions",options)))+"</th>\n                    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                </tr>\n            </thead>\n            <tbody></tbody>\n        </table>\n    </div>\n</div>\n"})}),define("tpl!ui/datalist/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,
Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <td class="checkboxes"><input type="checkbox" name="cb[',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" value="1" /></td>\n    '}function program4(depth0,data,depth1,depth2){var stack1,buffer="";return buffer+='\n    <td class="actions">\n        ',((stack1=helpers.each.call(depth0,depth2&&depth2.actions
,{hash:{},inverse:self.noop,fn:self.programWithDepth(5,program5,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </td>\n    "}function program5(depth0,data,depth2){var stack1,buffer="";return buffer+="\n            ",((stack1=helpers.with.call(depth0,depth2&&depth2.line,{hash:{},inverse:self.noop,fn:self.programWithDepth(6,program6,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        "}function program6(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(7,program7,data,depth1),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            "}function program7(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                    ",((stack1=helpers.with.call(depth0,depth2,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                "}function program8(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <button class="btn-info small" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(
stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n        </button>\n                    "}function program9(depth0,data){var stack1,
helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program11(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>'}return((stack1=helpers.each.call(depth0,depth0&&depth0.list,{hash:{},inverse:self.noop,
fn:self.programWithDepth(1,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n<tr data-id="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    ',((stack1=helpers.if.call(depth0,depth1&&depth1.selectable,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <td class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</td>\n    ",((stack1=helpers.if.call(depth0,depth1&&depth1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(4,program4,data,depth0,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</tr>\n"},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n"})}),define("ui/datalist",["jquery","lodash","i18n","ui/component","tpl!ui/datalist/tpl/main","tpl!ui/datalist/tpl/list"],function($,_,__,component,mainTpl,listTpl){"use strict";var _defaults={keyName:"id",labelName:"label",labelText:__("Label"),title:!1,textNumber:__("Available"),textEmpty:__(
"There is nothing to list!"),textLoading:__("Loading"),selectable:!1},datalist={update:function(data){var count,self=this,controls=this.controls||{},config=this.config||{},$list=controls.$list,$numberValue=controls.$numberValue,renderData={selectable:config.selectable,actions:config.actions,list:[]},list=renderData.list;return this.setLoading(!0),$list&&($list.empty(),data&&data.length?(_.forEach(data,function(line){var id=line[config.keyName],label=line[config.labelName];_.isFunction(config.labelTransform)&&(label=config.labelTransform.call(self,label,line)),list.push({id:id,label:label,line:line})}),$list.append(listTpl(renderData)),$numberValue&&(
count=data.length,_.isFunction(config.countRenderer)&&(count=config.countRenderer.call(self,count)),$numberValue.text(count)),this.setState("empty",!1),this.setState("loaded",!0)):(this.setState("empty",!0),this.setState("loaded",!1)),controls.$checkboxes=this.controls.$list.find("td.checkboxes input"),controls.$massAction.toggleClass("hidden",!0),this.pendingSelection&&this.setSelection(this.pendingSelection)),self.trigger("update",data),this.setLoading(!1),this},getSelection:function(){var $checkboxes=this.controls&&this.controls.$checkboxes,selection=[];return $checkboxes?$checkboxes.filter(":checked").each(function(){var id=$(this).closest("tr").data(
"id");id&&selection.push(id)}):this.pendingSelection&&(selection=this.pendingSelection),selection},setSelection:function(selection){var controls=this.controls||{},$list=controls.$list;return this.pendingSelection=$list?(controls.$checkboxes.removeAttr("checked"),selection&&_.forEach(selection,function(id){$list.find('[data-id="'+id+'"] input[type="checkbox"]').attr("checked","checked")}),this._onSelection(),null):selection,this},_onSelection:function(){var controls=this.controls||{},$checkboxes=controls.$checkboxes,$checkAll=controls.$checkAll,$checked=$checkboxes.filter(":checked");$checked.length===$checkboxes.length?$checkAll.attr("checked","checked"
):$checkAll.removeAttr("checked"),controls.$massAction.toggleClass("hidden",!$checked.length),this.trigger("select",this.getSelection())},setLoading:function(flag){return flag&&this.setState("loaded",!1),this.setState("loading",flag)},setTitle:function(title){var $title=this.controls&&this.controls.$title;return this.config.title=title,$title&&(!1===title?$title.addClass("hidden"):$title.html(title).removeClass("hidden")),this},setTextNumber:function(text){var $numberLabel=this.controls&&this.controls.$numberLabel,$textAvailable=this.controls&&this.controls.$textAvailable;return this.config.textNumber=text,$numberLabel&&(!1!==text?$numberLabel.html(text
).removeClass("hidden"):$textAvailable&&$textAvailable.addClass("hidden")),this},setTextEmpty:function(text){var $textEmpty=this.controls&&this.controls.$textEmpty;return this.config.textEmpty=text,$textEmpty&&(!1===text?$textEmpty.addClass("hidden"):$textEmpty.html(text).removeClass("hidden")),this},setTextLoading:function(text){var $textLoading=this.controls&&this.controls.$textLoading;return this.config.textLoading=text,$textLoading&&(!1===text?$textLoading.addClass("hidden"):$textLoading.html(text).removeClass("hidden")),this}};return function(config,data){var initConfig=config||{},actions={},tools={};return initConfig.tools&&_.forEach(initConfig.tools,
function(tool){tools[tool.id]=tool}),initConfig.actions&&_.forEach(initConfig.actions,function(action){actions[action.id]=action}),component(datalist,_defaults).setTemplate(mainTpl).on("destroy",function(){this.controls=null,this.pendingSelection=null}).on("render",function(){var self=this;this.controls={$title:this.$component.find("h1"),$textEmpty:this.$component.find(".empty-list"),$textAvailable:this.$component.find(".available-list"),$textLoading:this.$component.find(".loading span"),$numberLabel:this.$component.find(".available-list .label"),$numberValue:this.$component.find(".available-list .count"),$actionBar:this.$component.find(".list .action-bar"),
$massAction:this.$component.find(".list .mass-action"),$checkAll:this.$component.find(".list th.checkboxes input"),$checkboxes:this.$component.find(".list td.checkboxes input"),$list:this.$component.find(".list tbody")},this.controls.$actionBar.on("click","button",function(e){var buttonId=$(this).closest("button").data("control"),button=tools[buttonId],selection=self.getSelection();e.preventDefault(),button&&button.action&&button.action.call(self,selection,buttonId),self.trigger("tool",selection,buttonId)}),this.controls.$list.on("click","button",function(e){var $this=$(this),lineId=$this.closest("tr").data("id"),buttonId=$this.closest("button").data(
"control"),button=actions[buttonId];e.preventDefault(),button&&button.action&&button.action.call(self,lineId,buttonId),self.trigger("action",lineId,buttonId)}),this.setState("selectable",this.config.selectable),this.controls.$list.on("click","td.label",function(){var $checkbox;self.config.selectable&&(($checkbox=$(this).closest("tr").find('input[type="checkbox"]')).attr("checked")?$checkbox.removeAttr("checked"):$checkbox.attr("checked","checked"),self._onSelection())}),this.controls.$list.on("click",'input[type="checkbox"]',function(){self._onSelection()}),this.controls.$checkAll.on("click",function(){var $checkboxes=self.controls.$checkboxes
;this.checked?$checkboxes.attr("checked","checked"):$checkboxes.removeAttr("checked"),self._onSelection()}),data?this.update(data):(this.setState("empty",!0),this.setState("loaded",!1))}).init(initConfig)}}),define("tpl!ui/datatable/tpl/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program4(depth0,data){var stack1,helper;return stack1=(helper=helpers.empty)?helper.call(
depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.empty)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program6(depth0,data){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.empty)===functionType?stack1.apply(depth0):stack1)}function program8(depth0,data){var stack1,helper;return stack1=(helper=helpers.available)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.available)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}
function program10(depth0,data){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.available)===functionType?stack1.apply(depth0):stack1)}function program12(depth0,data){var stack1,helper;return stack1=(helper=helpers.loading)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.loading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program14(depth0,data){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options
)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.loading)===functionType?stack1.apply(depth0):stack1)}function program17(depth0,data){var stack1,buffer="";return buffer+='\n            <button class="btn-info small tool-',((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(20,program20,data),fn:self.program(18,program18,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.massAction,{hash:{},inverse:self.noop,fn:self.program(22,program22,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},
inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n                <span class="icon-',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.program(28,program28,data),fn:self.program(26,program26,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"></span> ',((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.program(32,program32,data),fn:self.program(30,program30,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </button>\n        "}function program18(depth0,data){var stack1,helper;return stack1=(helper=helpers.id
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program20(depth0,data){var stack1;return escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)}function program22(depth0,data){return" invisible"}function program24(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}
function program26(depth0,data){var stack1,helper;return stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program28(depth0,data){var stack1;return(stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(20,program20,data),fn:self.program(18,program18,data),data:data}))||0===stack1?stack1:""}function program30(depth0,data){var stack1,helper;return stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,escapeExpression(stack1)}function program32(depth0,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.noop,fn:self.program(20,program20,data),data:data}))||0===stack1?stack1:""}function program34(depth0,data){return"\n                <col/>\n                "}function program41(depth0,data){return' class="actions"'}function program43(depth0,data){var stack1,helper,buffer="";return buffer+=' class="sortable" data-sort-by="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.sorttype,{hash:{},inverse:self.noop,fn:self.program(44,program44,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' tabindex="0"'}function program44(depth0,data){var stack1,helper,buffer="";return buffer+='data-sort-type="',stack1=(helper=helpers.sorttype)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.sorttype)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program46(depth0,data){var stack1,helper,buffer="";return buffer+='\n                        <aside data-column="',stack1=(
helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="filter column\n                            ',((stack1=helpers.if.call(depth0,depth0&&depth0.customFilter,{hash:{},inverse:self.program(49,program49,data),fn:self.program(47,program47,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                        </aside>\n                        "}function program47(depth0,data){var stack1,buffer="";return buffer+=' customInput" >\n                                ',((stack1=typeof(stack1=null==(
stack1=depth0&&depth0.customFilter)||!1===stack1?stack1:stack1.template)===functionType?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+="\n                            "}function program49(depth0,data){var stack1,helper,buffer="";return buffer+=' ">\n                                <input type="text" value="" name="filter[',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" placeholder="'+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.filterable
)||!1===stack1?stack1:stack1.placeholder)===functionType?stack1.apply(depth0):stack1)+'">\n                                <button class="icon-find" type="button"></button>\n                            '}function program54(depth0,data){var stack1,helper,buffer="";return buffer+='\n                        <td class="checkboxes"><input type="checkbox" name="cb[',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" value="1" /></td>\n                        '}function program56(depth0,data,depth1){var stack1,buffer=""
;return buffer+="\n                            ",((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:self.programWithDepth(73,program73,data,depth1),fn:self.programWithDepth(57,program57,data,depth0,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        "}function program57(depth0,data,depth1,depth2){var stack1,helper,buffer="";return buffer+='\n                            <td class="actions ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'">\n                                ',((stack1=helpers.each.call(depth0,depth1&&depth1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(58,program58,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                            </td>\n                            "}function program58(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                    ",((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(71,program71,data),fn:self.programWithDepth(59,program59,data,depth3),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                                "}
function program59(depth0,data,depth4){var stack1,buffer="";return buffer+="\n                                        ",((stack1=helpers.with.call(depth0,depth4,{hash:{},inverse:self.noop,fn:self.programWithDepth(60,program60,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                    "}function program60(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                            ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(61,program61,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                                        "}function program61(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.if.call(depth0,depth2&&depth2.disabled,{hash:{},inverse:self.programWithDepth(68,program68,data,depth2),fn:self.programWithDepth(62,program62,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                            "}function program62(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                    ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,
fn:self.program(63,program63,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                                "}function program63(depth0,data){var stack1,helper,buffer="";return buffer+='\n                                <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+=' disabled="disabled">',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                    "}function program64(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},
data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '}function program66(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)}function program68(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                    ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(69,program69,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                                                "}function program69(depth0,data){var stack1,helper,buffer="";return buffer+='\n                                <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,
fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                    "}function program71(depth0,data){var stack1,buffer="";return buffer+='\n                                <button class="btn-info small '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,
program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                    "}function program73(depth0,data,depth2){var stack1,helper,options,buffer="";return buffer+='\n                            <td class="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',options={hash:{},data:data},((stack1=(helper=helpers.property||depth0&&depth0.property)?helper.call(depth0,depth0&&depth0.id,depth2,options):helperMissing.call(depth0,"property",depth0&&depth0.id,depth2,options))||0===stack1)&&(buffer+=stack1),buffer+="</td>\n                            "}function program75(depth0,data,depth2){var stack1,buffer="";return buffer+='\n                        <td class="actions">\n                            ',((stack1=helpers.each.call(depth0,null==(stack1=depth2&&depth2.options
)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(76,program76,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                        </td>\n                        "}function program76(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                ",((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(86,program86,data),fn:self.programWithDepth(77,program77,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                            "}function program77(depth0,data,depth2){var stack1,buffer=""
;return buffer+="\n                                    ",((stack1=helpers.with.call(depth0,depth2,{hash:{},inverse:self.noop,fn:self.programWithDepth(78,program78,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                "}function program78(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                        ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(79,program79,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                    "}function program79(depth0,data,depth2){var stack1,
buffer="";return buffer+="\n                                            ",((stack1=helpers.if.call(depth0,depth2&&depth2.disabled,{hash:{},inverse:self.programWithDepth(83,program83,data,depth2),fn:self.programWithDepth(80,program80,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                        "}function program80(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(81,program81,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                                            "}function program81(depth0,data){var stack1,helper,buffer="";return buffer+='\n                            <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' disabled="disabled">',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,
fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                "}function program83(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(84,program84,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                            "}function program84(depth0,
data){var stack1,helper,buffer="";return buffer+='\n                            <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(
depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                "}function program86(depth0,data){var stack1,buffer="";return buffer+='\n                            <button class="btn-info small '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"><span class="icon-'+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"></span> '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key
)===functionType?stack1.apply(depth0):stack1)+"</button>\n                                "}return buffer+='<div class="datatable-wrapper">\n\n    ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.filter,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+='\n    <aside class="filter" data-column="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.filter)||!1===stack1?stack1:stack1.columns)===functionType?stack1.apply(depth0):stack1
)+'">\n        <input type="text" value="" name="filter" placeholder="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.filter)===functionType?stack1.apply(depth0):stack1)+'">\n        <button class="icon-find" type="button"></button>\n    </aside>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.with.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.status,{hash:{},inverse:self.noop,fn:self.program(3,function(depth0,data){var stack1,helper,buffer=""
;return buffer+='\n    <h2>\n        <span class="empty-list hidden">',((stack1=helpers.if.call(depth0,depth0&&depth0.empty,{hash:{},inverse:self.program(6,program6,data),fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='</span>\n        <span class="available-list hidden"><span class="text">',((stack1=helpers.if.call(depth0,depth0&&depth0.available,{hash:{},inverse:self.program(10,program10,data),fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='</span>: <span class="count">',stack1=(helper=helpers.count)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.count
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span></span>\n        <span class="loading">',((stack1=helpers.if.call(depth0,depth0&&depth0.loading,{hash:{},inverse:self.program(14,program14,data),fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="...</span>\n    </h2>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.tools,{hash:{},inverse:self.noop,fn:self.program(16,function(depth0,data){var stack1,buffer=""
;return buffer+='\n    <aside class="action-bar clearfix">\n        ',((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.tools,{hash:{},inverse:self.noop,fn:self.program(17,program17,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </aside>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n    <div class="datatable-pagination-top"></div>\n\n    <div class="datatable-container">\n        <table class="matrix datatable">\n            <colgroup>\n                ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.selectable,{
hash:{},inverse:self.noop,fn:self.program(34,program34,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.program(34,program34,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.program(36,function(depth0,data){return"\n                </col>\n                "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n            </colgroup>\n            <thead>\n                <tr>\n                    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(38,function(depth0,data){return'\n                    <th class="checkboxes"><input type="checkbox" name="checkall" value="1" /></th>\n                    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.program(40,function(depth0,data){
var stack1,helper,buffer="";return buffer+="\n                    <th",((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:self.noop,fn:self.program(41,program41,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n                        <div ",((stack1=helpers.if.call(depth0,depth0&&depth0.sortable,{hash:{},inverse:self.noop,fn:self.program(43,program43,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+"</div>\n                        ",((stack1=helpers.if.call(depth0,depth0&&depth0.filterable,{hash:{},inverse:self.noop,fn:self.program(46,program46,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    </th>\n                    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.program(51,function(depth0,data){var stack1,buffer="";return buffer+='\n                    <th class="actions">'+escapeExpression(typeof(stack1=null==(stack1=null==(
stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.actions)===functionType?stack1.apply(depth0):stack1)+"</th>\n                    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                </tr>\n            </thead>\n            <tbody>\n                ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.dataset)||!1===stack1?stack1:stack1.data,{hash:{},inverse:self.noop,fn:self.programWithDepth(53,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n                    <tr data-item-identifier="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},
data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n                        ',((stack1=helpers.if.call(depth0,null==(stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(54,program54,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",((stack1=helpers.each.call(depth0,null==(stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.programWithDepth(56,program56,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n\n                        ",((stack1=helpers.if.call(depth0,null==(stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(75,program75,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    </tr>\n                "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n            </tbody>\n        </table>\n    </div>\n    <div class="datatable-pagination-bottom"></div>\n</div>\n'})}),define("tpl!ui/datatable/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,
">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '},data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(
depth0,depth0&&depth0.label,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){var stack1,helper;return stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n"})}),define("ui/datatable/filterStrategy/multiple",["jquery","lodash","i18n"],function($,_,__){"use strict";return{init:function(){},getQueryData:function($table,$filterElement,options){var data={filtercolumns:{}};return _.forEach($(".filter",$table),function(filter){var name,
model,filterValue,$filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter);0!==$filterInput.length&&(model=_.find(options.model,function(o){return o.id===column}),name=$filterInput.attr("name").replace(/^filter\[(.+)\]$/,"$1"),$filterInput.val()&&(filterValue=$filterInput.val(),model&&"function"==typeof model.filterTransform&&(filterValue=model.filterTransform(filterValue)),data.filtercolumns[name]=filterValue))}),data},getFiltersData:function($table,$filterElement,options){var data={filtercolumns:{}};return _.forEach($(".filter",$table),function(filter){var name,filterValue
,$filter=$(filter),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter);0!==$filterInput.length&&(name=$filterInput.attr("name").replace(/^filter\[(.+)\]$/,"$1"),$filterInput.val()&&(filterValue=$filterInput.val(),data.filtercolumns[name]=filterValue))}),data},render:function($table,options){_.forEach($(".filter",$table),function(filter){var model,name,$filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter);0!==$filterInput.length&&(model=_.find(options.model,function(o){return o.id===column}),name=$filterInput.attr("name").replace(
/^filter\[(.+)\]$/,"$1"),options.filtercolumns&&options.filtercolumns[name]&&$filterInput.val(options.filtercolumns[name]),model&&model.customFilter&&"function"==typeof model.customFilter.callback&&model.customFilter.callback($filterInput))})}}}),define("ui/datatable/filterStrategy/single",["jquery","lodash"],function($,_){"use strict";return{init:function(){},getQueryData:function($table,$filter,options){var data={},column=$filter.data("column"),model=_.find(options.model,function(o){return o.id===column});if(0!==$filter.length)return data.filterquery=$filter.find(":input").filter(function(){return $(this).val()}).val(),
model&&"function"==typeof model.filterTransform&&(data.filterquery=model.filterTransform(data.filterquery)),data.filtercolumns=column?column.split(","):options.filtercolumns,data},getFiltersData:function($table,$filter,options){var data={},column=$filter.data("column");if(0!==$filter.length)return data.filterquery=$filter.find(":input").filter(function(){return $(this).val()}).val(),data.filtercolumns=column?column.split(","):options.filter.columns,data},render:function($table,options){var filterColumns=options.filtercolumns?options.filtercolumns:[];_.forEach($(".filter",$table),function(filter){var $filter=$(filter),column=$filter.data("column"),
filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter),model=_.find(options.model,function(o){return o.id===column});options.filterquery&&column===filterColumns.join()&&$filterInput.val(options.filterquery).addClass("focused"),model&&model.customFilter&&"function"==typeof model.customFilter.callback&&model.customFilter.callback($filterInput)})}}}),define("ui/datatable/filterStrategy/filterStrategy",["jquery","lodash","i18n","core/providerRegistry","ui/datatable/filterStrategy/multiple","ui/datatable/filterStrategy/single"],function($,_,__,providerRegistry,multipleStrategy,singleStrategy){"use strict";var filter;return(
filter=providerRegistry(function filterStrategy(datatableOptions){var strategy;return{init:function(){var strategyId=datatableOptions.filterStrategy||"single";return strategy=filterStrategy.getProvider(strategyId),this},getQueryData:function($table,$filter,options){return strategy.getQueryData($table,$filter,options)},getFiltersData:function($table,$filter,options){return strategy.getFiltersData($table,$filter,options)},render:function($table,options){return strategy.render($table,options)}}.init()})).registerProvider("single",singleStrategy),filter.registerProvider("multiple",multipleStrategy),filter}),define("tpl!ui/pagination/providers/tpl/pages",[
"handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="grid-row clearfix pagination">\n    <ul class="pages">\n        <li class="first-page"><span class="icon-fast-backward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"First page",options):helperMissing.call(depth0,"__","First page",options))
)+'"></span></li>\n        <li class="previous"><span class="icon-backward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+'"></span></li>\n        <li class="next"><span class="icon-forward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+'"></span></li>\n        <li class="last-page"><span class="icon-fast-forward" title="'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Last page",options):helperMissing.call(depth0,"__","Last page",options)))+'"></span></li>\n    </ul>\n</div>\n'})}),define("tpl!ui/pagination/providers/tpl/pages/page",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<li class="page"><span>',buffer+=(0,this.escapeExpression)((helper=helpers.page)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.page)?helper.call(depth0,{hash:{},data:data}
):helper)+"</span></li>\n"})}),define("ui/pagination/providers/pages",["jquery","lodash","i18n","tpl!ui/pagination/providers/tpl/pages","tpl!ui/pagination/providers/tpl/pages/page"],function($,_,__,tpl,pageTpl){"use strict";return{init:function(){var $paginationTpl,generatePage=function(page){return $(pageTpl({page:page}))},separator=function(){var $page=generatePage("...");return $page.addClass("separator"),$page},generatePart=function(from,to,activePage){var i,$page,pages=[];for(i=from;i<=to;i++)$page=generatePage(i),i===activePage&&$page.addClass("active"),pages.push($page);return pages},pagination={render:function($container){$paginationTpl=$(tpl()),
$container.append($paginationTpl)},forwardButton:function(){return $(".next",$paginationTpl)},backwardButton:function(){return $(".previous",$paginationTpl)},pageButtons:function(){return $(".page",$paginationTpl)},firstPageButton:function(){return $(".first-page",$paginationTpl)},lastPageButton:function(){return $(".last-page",$paginationTpl)},setPages:function(page,total){var list,$point,pages=function(page,total){var pages=[];return pages=total<=7?pages.concat(generatePart(1,total,page)):page<5?(pages=(pages=pages.concat(generatePart(1,5,page))).concat(separator())).concat(generatePart(total,total,page)):total-3<=page?(pages=(pages=pages.concat(
generatePart(1,1,page))).concat(separator())).concat(generatePart(total-3,total,page)):(pages=(pages=(pages=(pages=pages.concat(generatePart(1,1,page))).concat(separator())).concat(generatePart(page-1,page+1,page))).concat(separator())).concat(generatePart(total,total,page))}(page,total);$(".page",$paginationTpl).remove(),list=pages,$point=pagination.forwardButton(),_.each(list,function($page){$page.insertBefore($point)})},disableButton:function($btn){$btn.hasClass("disabled")||$btn.addClass("disabled")},enableButton:function($btn){$btn.hasClass("disabled")&&$btn.removeClass("disabled")},destroy:function(){$paginationTpl.remove()},disable:function(){
var self=this;this.disableButton(this.backwardButton()),this.disableButton(this.firstPageButton()),$(".page",$paginationTpl).each(function(){self.disableButton($(this))}),this.disableButton(this.lastPageButton()),this.disableButton(this.forwardButton())},enable:function(){var self=this;this.enableButton(this.backwardButton()),this.enableButton(this.firstPageButton()),$(".page",$paginationTpl).each(function(){self.enableButton($(this))}),this.enableButton(this.lastPageButton()),this.enableButton(this.forwardButton())}};return pagination}}}),define("tpl!ui/pagination/providers/tpl/simple",["handlebars"],function(hb){return hb.template(function(Handlebars,
depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="grid-row clearfix pagination">\n    <div class="col-6">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Page",options):helperMissing.call(depth0,"__","Page",options)))+' <strong class="page">',buffer+=escapeExpression((helper=helpers.activePage)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.activePage)?helper.call(depth0,
{hash:{},data:data}):helper)+"</strong> "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+' <span class="total">',buffer+=escapeExpression((helper=helpers.totalPages)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.totalPages)?helper.call(depth0,{hash:{},data:data}):helper)+'</span></div>\n    <div class="col-6 txt-rgt">\n        <button class="btn-info small"><span class="icon-backward"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",
options):helperMissing.call(depth0,"__","Previous",options)))+'</button>\n        <button class="btn-info small">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+'<span class="icon-forward r"></span></button>\n    </div>\n</div>\n'})}),define("ui/pagination/providers/simple",["jquery","lodash","i18n","tpl!ui/pagination/providers/tpl/simple"],function($,_,__,tpl){"use strict";return{init:function(){var $paginationTpl;return{render:function($container){$paginationTpl=$(tpl()),$container.append($paginationTpl)},forwardButton:function(){
return $(".icon-forward",$paginationTpl).parents("button")},backwardButton:function(){return $(".icon-backward",$paginationTpl).parents("button")},setPages:function(page,total){$(".page",$paginationTpl).text(page),$(".total",$paginationTpl).text(total)},disableButton:function($btn){$btn.attr("disabled","disabled")},enableButton:function($btn){$btn.attr("disabled")&&$btn.removeAttr("disabled")},pageButtons:function(){return!1},firstPageButton:function(){return!1},lastPageButton:function(){return!1},destroy:function(){$paginationTpl.remove()},disable:function(){this.disableButton(this.backwardButton()),this.disableButton(this.forwardButton())},enable:function(
){this.enableButton(this.backwardButton()),this.enableButton(this.forwardButton())}}}}}),define("ui/pagination/paginationStrategy",["core/providerRegistry","ui/pagination/providers/pages","ui/pagination/providers/simple"],function(providerRegistry,pagesProvider,simpleProvider){"use strict";var paginationProvider;return(paginationProvider=providerRegistry(function paginationStrategy(mode){return paginationStrategy.getProvider(mode||"simple")})).registerProvider("simple",simpleProvider),paginationProvider.registerProvider("pages",pagesProvider),paginationProvider}),define("ui/pagination",["jquery","lodash","i18n","ui/component",
"ui/pagination/paginationStrategy"],function($,_,__,component,paginationStrategy){"use strict";var _defaults={mode:"simple",activePage:1,totalPages:1};function calculateActivePage(page,pages){return(page=parseInt(page))<1&&(page=1),pages<page&&(page=pages),page}return function(config){var paginationComponent,provider,totalPages,activePage;return config=_.defaults(config||{},_defaults),(paginationComponent=component({setPage:function(page){!1===(page=calculateActivePage(page,this.getTotal()))?this.trigger("error",__("Undefined amount of the pages for pagination")):(activePage=page,provider.setPages(this.getActivePage(),this.getTotal()),this.trigger("change"))
},nextPage:function(){this.setPage(this.getActivePage()+1),this.trigger("next")},previousPage:function(){this.setPage(this.getActivePage()-1),this.trigger("prev")},getActivePage:function(){return activePage},getTotal:function(){return totalPages}})).on("change",function(){this.getActivePage()===this.getTotal()?(provider.disableButton(provider.forwardButton()),!1!==provider.lastPageButton()&&provider.disableButton(provider.lastPageButton())):(provider.enableButton(provider.forwardButton()),!1!==provider.lastPageButton()&&provider.enableButton(provider.lastPageButton())),1===this.getActivePage()?(provider.disableButton(provider.backwardButton()),
!1!==provider.firstPageButton()&&provider.disableButton(provider.firstPageButton())):(provider.enableButton(provider.backwardButton()),!1!==provider.firstPageButton()&&provider.enableButton(provider.firstPageButton()))}).on("render",function(){var self=this;_.isUndefined(config.totalPages)&&this.trigger("error",__("Undefined amount of the totalPages for pagination")),!1===(totalPages=function(totalPages){return!((totalPages=totalPages||1)<1)&&totalPages}(config.totalPages))&&this.trigger("error",__("Undefined amount of the pages for pagination")),activePage=calculateActivePage(config.activePage||1,totalPages),(provider=paginationStrategy(config.mode).init()
).render(this.getContainer()),this.setPage(this.getActivePage()),provider.forwardButton().off("click").on("click",function(){self.getActivePage()>=self.getTotal()||self.nextPage()}),provider.backwardButton().off("click").on("click",function(){1!==self.getActivePage()&&self.previousPage()}),!1!==provider.pageButtons()&&provider.pageButtons().off("click").on("click",function(){var page=parseInt($(this).text());page&&self.setPage(page)}),!1!==provider.firstPageButton()&&provider.firstPageButton().off("click").on("click",function(){self.setPage(1)}),!1!==provider.lastPageButton()&&provider.lastPageButton().off("click").on("click",function(){self.setPage(
self.getTotal())})}).on("disable",function(){provider.disable()}).on("enable",function(){provider.enable()}).on("destroy",function(){provider.destroy()}).init(config),paginationComponent}}),define("util/regexEscape",[],function(){"use strict";return function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}),define("util/wrapLongWords",["util/regexEscape"],function(regexEscape){"use strict";var getCutTerm=function(longWord,chunkExp){for(var cutTerms=longWord.match(chunkExp),i=cutTerms.length,oldFirst="",newFirst="",offenders=[".",":",";"];i--;)newFirst=cutTerms[i].charAt(0),-1<offenders.indexOf(newFirst)&&(cutTerms[i]=cutTerms[i].substr(1)),
-1<offenders.indexOf(oldFirst)&&(cutTerms[i]=cutTerms[i]+oldFirst),oldFirst=newFirst;return cutTerms.join(" ")};return function(str,threshold){str=str.toString().replace(/([\w])</g,"$1 <");for(var cut,chunkExp=new RegExp(".{1,"+threshold+"}","g"),longWords=str.match(new RegExp("[\\S]{"+threshold+",}","g"))||[],i=longWords.length;i--;)cut=getCutTerm(longWords[i],chunkExp),str=str.replace(new RegExp(regexEscape(longWords[i]),"g"),cut);return str}}),define("util/encode",[],function(){"use strict";var _reQuot=/"/g,_reApos=/'/g,encodeHTML=function(html){return document.createElement("a").appendChild(document.createTextNode(html)).parentNode.innerHTML};return{
html:encodeHTML,attribute:function(html){return encodeHTML(html).replace(_reQuot,"&quot;").replace(_reApos,"&apos;")},encodeBase64:function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode("0x"+p1)}))},decodeBase64:function(str){return decodeURIComponent(Array.prototype.map.call(atob(str),function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}}),define("tpl!ui/feedback/feedback",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{}
;var stack1,helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="',buffer+=escapeExpression(stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.id)?helper.call(depth0,{hash:{},data:data}):helper)+'" class="feedback feedback-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+" ",((stack1=helpers.if.call(depth0,depth0&&depth0.popup,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,
data){return"popup"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <span class="icon-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    <div>\n        ',((stack1=(helper=helpers.msg)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.msg)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <span title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(
depth0,"Close message",options):helperMissing.call(depth0,"__","Close message",options)))+'" class="icon-close" data-close=":parent .feedback"></span>\n</div>\n'})}),define("ui/feedback",["jquery","lodash","core/format","ui/component","util/wrapLongWords","util/encode","tpl!ui/feedback/feedback"],function($,_,format,component,wrapLongWords,encode,tpl){"use strict";var currents=[],levels=["info","success","warning","danger","error"],defaultOptions={timeout:{info:2e3,success:2e3,warning:4e3,danger:4e3,error:8e3},wrapLongWordsAfter:40,encodeHtml:!0,popup:!0};return function($container,config){if($container&&$container.length||($container=$("#feedback-box")),
!$container.length)throw new TypeError("The feedback needs to belong to an existing container");return component({message:function(level,msg,params,options){var displayedMessage=msg;return level&&_.contains(levels,level)||(level="info"),_.isPlainObject(params)&&(options=params,params=[]),this.config=_.defaults(options||{},this.config),this.config.level=level,this.config.encodeHtml&&(displayedMessage=encode.html(displayedMessage)),this.config.wrapLongWordsAfter&&(displayedMessage=wrapLongWords(displayedMessage,this.config.wrapLongWordsAfter)),_.isArray(params)&&params.length&&(displayedMessage=format.apply(format,[displayedMessage].concat(params))),
this.config.msg=displayedMessage,this},info:function(msg,params,options){return this.message("info",msg,params,options).open()},success:function(msg,params,options){return this.message("success",msg,params,options).open()},warning:function(msg,params,options){return this.message("warning",msg,params,options).open()},danger:function(msg,params,options){return this.message("danger",msg,params,options).open()},error:function(msg,params,options){return this.message("error",msg,params,options).open()},open:function(){return _(currents).reject(this).invoke("close"),this.display()},close:function(){this.is("rendered")&&this.destroy()},display:function(){
return this.is("rendered")?this.show():this.render($container),this}},defaultOptions).setTemplate(tpl).on("init",function(){this.config.id="feedback-"+(currents.length+1),currents.push(this),$container.trigger("create.feedback")}).on("render",function(){var self=this,$component=this.getElement(),$closer=$(".icon-close",$component),timeout=_.isPlainObject(this.config.timeout)?this.config.timeout[this.config.level]:this.config.timeout;$closer.off("click").on("click",function(e){e.preventDefault(),self.destroy()}),_.isNumber(timeout)&&0<timeout&&_.delay(function(){self.close()},timeout),$container.trigger("display.feedback")}).on("destroy",function(){
$container.trigger("close.feedback"),_.remove(currents,this)}).init(config)}}),define("tpl!ui/dialog/tpl/body",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function";return buffer+='<div class="preview-modal-feedback modal">\n    <div class="modal-body clearfix">\n        <p class="message">',buffer+=(0,this.escapeExpression)(stack1=(helper=helpers.message)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.message)===functionType?helper.call(depth0,{
hash:{},data:data}):helper)+"</p>\n\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.content,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <div class="content">',((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.content)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n        <div class="buttons rgt"></div>\n    </div>\n</div>\n'})}),define("tpl!ui/dialog/tpl/buttons",["handlebars"],
function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '}return((stack1=helpers.each.call(depth0,depth0&&depth0.buttons,{hash:{},
inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+" small ",stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" type="button">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        <span class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    </button>\n"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n"})}),define("ui/dialog",["jquery","lodash","i18n",
"tpl!ui/dialog/tpl/body","tpl!ui/dialog/tpl/buttons","ui/keyNavigation/navigator","ui/keyNavigation/navigableDomElement","util/shortcut/registry","ui/modal"],function($,_,__,bodyTpl,buttonsTpl,keyNavigator,navigableDomElement,shortcutRegistry){"use strict";var _definedButtons={ok:{id:"ok",type:"info",label:__("Ok"),close:!0},cancel:{id:"cancel",type:"regular",label:__("Cancel"),close:!0},yes:{id:"yes",type:"info",label:__("Yes"),close:!0},no:{id:"no",type:"regular",label:__("No"),close:!0}},_defaults={message:"",content:"",width:500,animate:!1,autoRender:!1,autoDestroy:!1,renderTo:"body",buttons:"cancel,ok"},dialog={init:function(options){var self=this,
events={},initOptions=_.omit(options||{},function(value,key){var omit=!1;return 2<key.length&&"on"===key.substr(0,2)&&(events[key.substr(2)]=value,omit=!0),omit});return _.defaults(this,initOptions,_defaults),this.$html=$(bodyTpl(this)),this.$buttons=this.$html.find(".buttons"),this.rendered=!1,this.destroyed=!1,this.$buttons.on("click.modal","button",this._onButtonClick.bind(this)),this.setButtons(this.buttons),_.forEach(events,function(callback,eventName){eventName.indexOf(".")<0&&(eventName+=".modal"),self.on(eventName.toLowerCase(),callback)}),this.autoRender&&this.render(),this},destroy:function(){return this.destroyed||(this._destroy(),this.rendered=!1
,this.destroyed=!0,this.trigger("destroy.modal"),this.$buttons.off(".modal"),this.$html.off(".modal").remove(),this.$html=null,this.$buttons=null),this},setButtons:function(buttons){var self=this;return this.destroyed||(buttons||(buttons=_defaults.buttons),_.isArray(buttons)||_.isString(buttons)&&(buttons=buttons.split(",")),this.buttons={},_.forEach(buttons,function(btn){_.isString(btn)&&(btn=btn.trim(),btn=_definedButtons[btn]||{id:btn,type:"info",label:btn}),btn.type||(btn.type="regular"),self.buttons[btn.id]=btn}),this.$buttons.html(buttonsTpl(this))),this},render:function(to){return this.destroyed||($(to||this.renderTo).append(this.$html),this._install(
),this.rendered=!0),this},show:function(){return this.destroyed||(this.rendered?this._open():this.render()),this},hide:function(){return!this.destroyed&&this.rendered&&(this._close(),this.autoDestroy&&this.destroy()),this},on:function(eventName){var dom=this.$html;return dom&&dom.on.apply(dom,arguments),this},off:function(eventName){var dom=this.$html;return dom&&dom.off.apply(dom,arguments),this},trigger:function(eventName,extraParameters){var dom=this.$html;return dom&&(void 0===extraParameters&&(extraParameters=[]),_.isArray(extraParameters)||(extraParameters=[extraParameters]),(extraParameters=Array.prototype.slice.call(extraParameters)).push(this),
dom.trigger(eventName,extraParameters)),this},getDom:function(){return this.$html},_onButtonClick:function(event){var id=$(event.target).closest("button").data("control"),btn=this.buttons[id];btn&&this._execute(btn)},_execute:function(btn){btn.action&&btn.action.apply(this,[btn,this]),this.trigger(btn.id+"btn.modal",[btn]),btn.close&&this.hide()},focus:function(){this.navigator.focus()},_install:function(){var $buttons,self=this;this.destroyed||($buttons=this.$buttons.find("button"),this.navigator=keyNavigator({elements:navigableDomElement.createFromDoms($buttons)}).on("right down",function(){this.next()}).on("left up",function(){this.previous()}).on("tab",
function(){this.getCursor().position===$buttons.length-1?this.first():this.next()}).on("shift+tab",function(){0===this.getCursor().position?this.last():this.previous()}).on("activate",function(cursor){cursor.navigable.getElement().click()}),this.globalShortcut=shortcutRegistry($("body")).add("tab shift+tab",function(){self.navigator.isFocused()||self.navigator.focus()})),this.$html.modal({width:this.width,animate:this.animate,disableClosing:this.disableClosing,disableEscape:this.disableEscape}).on("closed.modal",function(){self.autoDestroy&&self.destroy()})},_open:function(){this.$html.modal("open")},_close:function(){this.$html.modal("close")},
_destroy:function(){this.$html.modal("destroy"),this.navigator&&this.navigator.destroy(),this.globalShortcut&&this.globalShortcut.clear()}};return function(options){var instance=_.clone(dialog,!0);return instance.init(options),instance}}),define("ui/dialog/alert",["lodash","ui/dialog"],function(_,dialog){"use strict";return function(message,action){var dlg=dialog({message:message,buttons:"ok",autoRender:!0,autoDestroy:!0});return _.isFunction(action)&&dlg.on("closed.modal",action),dlg}}),define("layout/logout-event",["jquery","lodash","i18n","util/url","ui/dialog/alert"],function($,_,__,url,alert){"use strict";var defaults={message:__(
"You have been logged out. Please login again"),redirectUrl:url.route("logout","Main","tao")};return function(options){options=_.defaults(options||{},defaults),alert(options.message,function(){window.location=options.redirectUrl})}}),define("ui/datatable",["jquery","lodash","i18n","core/pluginifier","tpl!ui/datatable/tpl/layout","tpl!ui/datatable/tpl/button","ui/datatable/filterStrategy/filterStrategy","ui/pagination","ui/feedback","layout/logout-event","core/logger"],function($,_,__,Pluginifier,layout,btnTpl,filterStrategyFactory,paginationComponent,feedback,logoutEvent,loggerFactory){"use strict";var ns="datatable",dataNs="ui."+ns,defaults={start:0,
rows:25,page:1,sortby:"id",sortorder:"asc",sorttype:"string",paginationStrategyTop:"none",paginationStrategyBottom:"simple",labels:{filter:__("Filter"),empty:__("Nothing to list!"),available:__("Available"),loading:__("Loading"),actions:__("Actions")}},logger=loggerFactory("ui/datatable"),dataTable={init:function(options,data){return options=_.defaults(options,defaults),this.each(function(){var $elt=$(this),currentOptions=$elt.data(dataNs);currentOptions?(options&&$elt.data(dataNs,_.merge(currentOptions,options)),dataTable._refresh($elt,data)):($elt.data(dataNs,options),$elt.one("load."+ns,function(){$elt.trigger("create."+ns)}),data?dataTable._render($elt,
data):dataTable._query($elt))})},_refresh:function($elt,data){data?this._render($elt,data):this._query($elt)},_query:function($elt,$filter){var parameters,ajaxConfig,self=this,options=$elt.data(dataNs);$filter||($filter=$(".filter",$elt)),options=_.assign({},options,this._getFilterStrategy($elt).getQueryData($elt,$filter,options)),parameters=_.merge({},_.pick(options,["rows","page","sortby","sortorder","sorttype","filterquery","filtercolumns"]),options.params||{}),ajaxConfig={url:options.url,data:parameters,dataType:"json",type:options.querytype||"GET"},$elt.trigger("query."+ns,[ajaxConfig]),options.status&&$elt.find(".loading").removeClass("hidden"),$.ajax(
ajaxConfig).done(function(response){self._render($elt,response)}).fail(function(response){var errorDetails=JSON.parse(response.responseText),requestErr=new Error(errorDetails.message);logger.error(errorDetails),requestErr.code=response.status,$elt.trigger("error."+ns,[requestErr]),self._render($elt,{})})},_render:function($elt,dataset){var $rendering,$statusEmpty,$statusAvailable,$statusCount,$sortBy,$sortElement,$checkAll,$checkboxes,$rows,amount,transforms,self=this,options=$elt.data(dataNs),$massActionBtns=$(),join=function(input){return"object"!=typeof input?input:input.join(", ")};dataset=dataset||{},$elt.trigger("beforeload."+ns,[_.cloneDeep(dataset)])
,_.forEach(options.model,function(field){options.filter||(field.filterable=!1),field.filterable&&"object"!=typeof field.filterable&&(field.filterable={placeholder:__("Filter")}),field.transform&&(field.transform=_.isFunction(field.transform)?field.transform:join)}),options.sortby&&(options=this._sortOptions($elt,options.sortby,options.sortorder,options.sorttype)),_.some(options.model,"transform")&&(transforms=_.where(options.model,"transform"),_.forEach(dataset.data,function(row,index){_.forEach(transforms,function(field){row[field.id]=field.transform(row[field.id],row,field,index,dataset.data)})})),$rendering=$(layout({options:options,dataset:dataset})),
_.forEach(dataset.readonly,function(values,id){if(!0===values)$('[data-item-identifier="'+id+'"] button',$rendering).addClass("disabled");else if(values&&"object"==typeof values)for(var action in values)values.hasOwnProperty(action)&&!0===values[action]&&$('[data-item-identifier="'+id+'"] button.'+action,$rendering).addClass("disabled")});var attachActionListeners=function(actions){_.forEach(actions,function(action,name){var css;_.isFunction(action)||(name=action.id||name,action=action.action||function(){}),css="."+name,$rendering.off("click",css).on("click",css,function(e){var $btn=$(this);if(e.preventDefault(),!$btn.hasClass("disabled")){
var identifier=$btn.closest("[data-item-identifier]").data("item-identifier");action.apply($btn,[identifier,_.first(_.where(dataset.data,{id:identifier}))])}})})};if(options.actions&&attachActionListeners(options.actions),_.some(options.model,"type")){var types=_.where(options.model,"type");_.forEach(types,function(field){"actions"===field.type&&field.actions&&attachActionListeners(field.actions)})}function renderPagination($container,mode){paginationComponent({mode:mode,activePage:dataset.page,totalPages:dataset.total}).on("change",function(){self._setPage($elt,this.getActivePage())}).on("prev",function(){$elt.trigger("backward."+ns)}).on("next",function(){
$elt.trigger("forward."+ns)}).render($container)}_.forEach(options.tools,function(action,name){var css,massAction=!0;_.isFunction(action)||(name=action.id||name,massAction=action.massAction,action=action.action||function(){}),css=".tool-"+name,massAction&&($massActionBtns=$massActionBtns.add($rendering.find(css))),$rendering.off("click",css).on("click",css,function(e){var $btn=$(this);e.preventDefault(),$btn.hasClass("disabled")||action.apply($btn,[self._selection($elt)])})}),_.forEach(options.listeners,function(callback,event){var ev=[event,ns].join(".");$elt.off(ev).on(ev,callback)}),"none"!==options.paginationStrategyTop&&renderPagination($(
".datatable-pagination-top",$rendering),options.paginationStrategyTop),"none"!==options.paginationStrategyBottom&&renderPagination($(".datatable-pagination-bottom",$rendering),options.paginationStrategyBottom),$rows=$rendering.find("tbody tr"),$sortBy=$rendering.find("th [data-sort-by]"),$sortElement=$rendering.find('[data-sort-by="'+options.sortby+'"]'),$checkAll=$rendering.find("th.checkboxes input"),$checkboxes=$rendering.find("td.checkboxes input"),options.rowSelection&&($("table.datatable",$rendering).addClass("hoverable"),$rendering.on("click","tbody td",function(e){if($(e.target).hasClass("checkboxes")||$(e.target).hasClass("actions"))return!1
;var currentRow=$(this).parent();$rows.removeClass("selected"),currentRow.toggleClass("selected"),$elt.trigger("selected."+ns,_.where(dataset.data,{id:currentRow.data("item-identifier")}))})),$sortBy.on("click keyup",function(e){var column,type;"keyup"===e.type&&13!==e.keyCode||(e.preventDefault(),column=$(this).data("sort-by"),type=$(this).data("sort-type"),self._sort($elt,column,void 0,type))}),options.filter&&(self._getFilterStrategy($elt).render($rendering,options),_.forEach($(".filter",$rendering),function(filter){var $filter=$(filter),$filterBtn=$("button",$filter),$filterInput=$("select, input",$filter);$filterInput.is("select")?$filterInput.on(
"change",function(){self._filter($elt,$filter)}):($filterBtn.off("click").on("click",function(e){e.preventDefault(),self._filter($elt,$filter)}),$filterInput.off("keypress").on("keypress",function(e){13===e.which&&(e.preventDefault(),self._filter($elt,$filter))}))})),$checkAll.click(function(){this.checked?($checkAll.attr("checked","checked"),$checkboxes.attr("checked","checked")):($checkAll.removeAttr("checked"),$checkboxes.removeAttr("checked")),$massActionBtns.length&&$massActionBtns.toggleClass("invisible",!$checkboxes.filter(":checked").length),$elt.trigger("select."+ns)}),$checkboxes.click(function(){$checkboxes.filter(":checked"
).length===$checkboxes.length?$checkAll.attr("checked","checked"):$checkAll.removeAttr("checked"),$massActionBtns.length&&$massActionBtns.toggleClass("invisible",!$checkboxes.filter(":checked").length),$elt.trigger("select."+ns)}),$("th.sorted",$rendering).removeClass("sorted"),$sortElement.addClass("sorted").addClass("sorted_"+options.sortorder),options.status&&($statusEmpty=$rendering.find(".empty-list"),$statusCount=($statusAvailable=$rendering.find(".available-list")).find(".count"),$rendering.find(".loading").addClass("hidden"),(amount=dataset.amount||dataset.length)?($statusCount.text(amount),$statusAvailable.removeClass("hidden"),
$statusEmpty.addClass("hidden")):($statusEmpty.removeClass("hidden"),$statusAvailable.addClass("hidden"))),$elt.html($rendering),options.filter&&options.filterquery&&$rendering.find("[name=filter].focused").focus(),$elt.trigger("load."+ns,[dataset])},_setPage:function($elt,page){var options=$elt.data(dataNs);options.page!==page&&(options.page=page,$elt.data(dataNs,options),$elt.trigger("setpage."+ns),this._query($elt))},_filter:function($elt,$filter){var options=$elt.data(dataNs),filtersData=this._getFilterStrategy($elt).getFiltersData($elt,$filter,options);options.page=1,$elt.data(dataNs,_.assign(options,filtersData)),$elt.trigger("filter."+ns,[options]),
this._query($elt,$filter)},_getFilterStrategy:function($elt){var options=$elt.data(dataNs);return filterStrategyFactory(options)},_sort:function($elt,sortBy,asc,sortType){$elt.trigger("sort."+ns,[sortBy,asc,sortType]),this._sortOptions($elt,sortBy,asc,sortType),this._query($elt)},_sortOptions:function($elt,sortBy,asc,sortType){var options=$elt.data(dataNs);return void 0!==asc?("asc"!==asc&&"desc"!==asc&&(asc=asc?"asc":"desc"),options.sortorder=asc):"asc"===options.sortorder&&options.sortby===sortBy?options.sortorder="desc":options.sortorder="asc",options.sortby=sortBy,options.sorttype=sortType,$elt.data(dataNs,options),options},_selection:function($elt){
var $selected=$elt.find("[data-item-identifier]").has("td.checkboxes input:checked"),selection=[];return $selected.each(function(){selection.push($(this).data("item-identifier"))}),selection},_highlightRow:function($elt,rowId){this._addRowClass($elt,rowId,"highlight")},_addRowClass:function($elt,rowId,className){var $row=$elt.find('[data-item-identifier="'+rowId+'"]');$row.hasClass(className)||$row.addClass(className)},_removeRowClass:function($elt,rowId,className){var $row=$elt.find('[data-item-identifier="'+rowId+'"]');$row.hasClass(className)&&$row.removeClass(className)}};Pluginifier.register(ns,dataTable,{expose:["refresh","sort","filter","selection",
"render","highlightRow","addRowClass","removeRowClass"]})}),define("tpl!ui/dateRange/tpl/select",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="daterange">\n    <label>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"From",options):helperMissing.call(depth0,"__","From",options)))+'</label><input type="text" name="periodStart" value="',
buffer+=escapeExpression((helper=helpers.startDate)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.startDate)?helper.call(depth0,{hash:{},data:data}):helper)+'"/>\n    <label>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"to",options):helperMissing.call(depth0,"__","to",options)))+'</label><input type="text" name="periodEnd" value="',buffer+=escapeExpression((helper=helpers.endDate)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.endDate)?helper.call(depth0,{hash:{},data:data}):helper
)+'"/>\n    <button class="small btn-info" data-control="filter" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Apply date range",options):helperMissing.call(depth0,"__","Apply date range",options)))+'">\n        <span class="icon icon-filter"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Apply",options):helperMissing.call(depth0,"__","Apply",options)))+'\n    </button>\n    <button class="small" data-control="reset">\n        <span class="icon icon-reset"></span> '+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Reset",options):helperMissing.call(depth0,"__","Reset",options)))+"\n    </button>\n</div>\n"})}),define("jquery.timePicker",["jquery","jqueryui"],function(jQuery){var $=jQuery;if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.3"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",
timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,
altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,
secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_newInst:function($input,o){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}for(i in overrides={
beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)},onClose:function(dateText,dp_inst){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(
fns[i]=o[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"==tp_inst._defaults.controlType&&void 0===jQuery.ui.slider&&(tp_inst._defaults.controlType="select"),
tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(0<tzl&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,
tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,
tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",
tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),
void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(dp_inst){var currDT=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT),this._limitMinMaxDateTime(dp_inst,!1),this._injectTimePicker()},
_parseTime:function(timeString,withDate){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj)return!1;$.extend(this,parseRes.timeObj)}catch(err){return $.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat),!1}return!0}var timeObj=$.datepicker.parseTime(
this._defaults.timeFormat,timeString,this._defaults);return!!timeObj&&($.extend(this,timeObj),!0)},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",show=null,max={},gridSize={},size=null,i=0,l=0;if(0===$dp.find("div.ui-timepicker-div").length&&o.showTimepicker){var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(o.showTime?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time"'+(o.showTime?"":noDisplay)+"></dd>";for(i=0,l=this.units.length;i<l;i++){if(show=null!==o["show"+(uitem=(
litem=this.units[i]).substr(0,1).toUpperCase()+litem.substr(1))]?o["show"+uitem]:this.support[litem],max[litem]=parseInt(o[litem+"Max"]-(o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem],10),gridSize[litem]=0,html+='<dt class="ui_tpicker_'+litem+'_label"'+(show?"":noDisplay)+">"+o[litem+"Text"]+'</dt><dd class="ui_tpicker_'+litem+'"><div class="ui_tpicker_'+litem+'_slider"'+(show?"":noDisplay)+"></div>",show&&0<o[litem+"Grid"]){if(html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"==litem)for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(
this.support.ampm?"hht":"HH",{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+"</td>"}else for(var m=o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10))gridSize[litem]++,html+='<td data-for="'+litem+'">'+(m<10?"0":"")+m+"</td>";html+="</tr></table></div>"}html+="</dd>"}var showTz=null!==o.showTimezone?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label"'+(showTz?"":noDisplay)+">"+o.timezoneText+"</dt>",html+='<dd class="ui_tpicker_timezone" '+(showTz?"":noDisplay)+"></dd>";var $tp=$(html+="</dl></div>");for(!0===o.timeOnly&&($tp.prepend(
'<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>"),$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),i=0,l=tp_inst.units.length;i<l;i++)show=null!==o["show"+(uitem=(litem=tp_inst.units[i]).substr(0,1).toUpperCase()+litem.substr(1))]?o["show"+uitem]:this.support[litem],tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]),show&&0<o[litem+"Grid"]&&(size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]),$tp.find(".ui_tpicker_"+litem+" table").css(
{width:size+"%",marginLeft:o.isRTL?"0":size/(-2*gridSize[litem])+"%",marginRight:o.isRTL?size/(-2*gridSize[litem])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/gi),f=$t.data("for");"hour"==f&&(-1!==ap.indexOf("p")&&n<12?n+=12:-1!==ap.indexOf("a")&&12===n&&(n=0)),tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n),tp_inst._onTimeChange(),tp_inst._onSelectHandler()}).css({cursor:"pointer",width:100/gridSize[litem]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=$tp.find(".ui_tpicker_timezone").append("<select></select>").find(
"select"),$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val("object"==typeof val?val.value:val).text("object"==typeof val?val.label:val)})),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone)-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()==this.timezone?selectLocalTimezone(tp_inst):this.timezone_select.val(this.timezone);else void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(o.timezone):selectLocalTimezone(tp_inst);this.timezone_select.change(function(){tp_inst._onTimeChange(),tp_inst._onSelectHandler()})
;var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length?$buttonPanel.before($tp):$dp.append($tp),this.$timeObj=$tp.find(".ui_tpicker_time"),null!==this.inst){var timeDefined=this.timeDefined;this._onTimeChange(),this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl,setTimeout(function(){if(0===$tp.find(".ui-slider-access").length){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(!0);sliderAccessWidth&&$tp.find("table:visible").each(function(
){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=oldMarginLeft*newWidth/oldWidth+"%",css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft,$g.css(css)})}},10)}}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(dp_inst,"minDateTime")&&void 0!==$.datepicker._get(dp_inst,"minDateTime")&&dp_date){var minDateTime=$.datepicker._get(
dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=o.hourMin,this.minuteMinOriginal=o.minuteMin,this.secondMinOriginal=o.secondMin,this.millisecMinOriginal=o.millisecMin,this.microsecMinOriginal=o.microsecMin),dp_inst.settings.timeOnly||minDateTimeDate.getTime()==dp_date.getTime()?(this._defaults.hourMin=minDateTime.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,
this._defaults.minuteMin=minDateTime.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=minDateTime.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=minDateTime.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=minDateTime.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,
this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(
null!==$.datepicker._get(dp_inst,"maxDateTime")&&void 0!==$.datepicker._get(dp_inst,"maxDateTime")&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(this.hourMaxOriginal=o.hourMax,this.minuteMaxOriginal=o.minuteMax,this.secondMaxOriginal=o.secondMax,this.millisecMaxOriginal=o.millisecMax,this.microsecMaxOriginal=o.microsecMax),dp_inst.settings.timeOnly||maxDateTimeDate.getTime()==dp_date.getTime()?(
this._defaults.hourMax=maxDateTime.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=maxDateTime.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=maxDateTime.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=maxDateTime.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=maxDateTime.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),
this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,
this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(void 0!==adjustSliders&&!0===adjustSliders){var hourMax=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),minMax=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),secMax=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),millisecMax=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10)
;microsecMax=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10),this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{
min:this._defaults.secondMin,max:secMax}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:microsecMax}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){
var hour=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),minute=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),second=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),millisec=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),microsec=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),timezone=!!this.timezone_select&&this.timezone_select.val(),o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;"object"==typeof hour&&(hour=!1),"object"==typeof minute&&(
minute=!1),"object"==typeof second&&(second=!1),"object"==typeof millisec&&(millisec=!1),"object"==typeof microsec&&(microsec=!1),"object"==typeof timezone&&(timezone=!1),!1!==hour&&(hour=parseInt(hour,10)),!1!==minute&&(minute=parseInt(minute,10)),!1!==second&&(second=parseInt(second,10)),!1!==millisec&&(millisec=parseInt(millisec,10)),!1!==microsec&&(microsec=parseInt(microsec,10));var ampm=o[hour<12?"amNames":"pmNames"][0],hasChanged=hour!=this.hour||minute!=this.minute||second!=this.second||millisec!=this.millisec||microsec!=this.microsec||0<this.ampm.length&&hour<12!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames)
)||null!==this.timezone&&timezone!=this.timezone;hasChanged&&(!1!==hour&&(this.hour=hour),!1!==minute&&(this.minute=minute),!1!==second&&(this.second=second),!1!==millisec&&(this.millisec=millisec),!1!==microsec&&(this.microsec=microsec),!1!==timezone&&(this.timezone=timezone),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=ampm),this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&(pickerTimeFormat===o.timeFormat?this.$timeObj.text(this.formattedTime+pickerTimeSuffix):this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o
)+pickerTimeSuffix)),this.timeDefined=!0,hasChanged&&this._updateDateTime()},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect,inputEl=this.$input?this.$input[0]:null;onSelect&&inputEl&&onSelect.apply(inputEl,[this.formattedDateTime,this])},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dt=$.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=null!==dt&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,
null===dt?new Date:dt,formatCfg);var formattedDateTime=this.formattedDate;if(""===dp_inst.lastVal&&(dp_inst.currentYear=dp_inst.selectedYear,dp_inst.currentMonth=dp_inst.selectedMonth,dp_inst.currentDay=dp_inst.selectedDay),!0===this._defaults.timeOnly?formattedDateTime=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||timeAvailable)&&(formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=formattedDateTime,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),
this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(altFormattedDateTime=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===dt?new Date:dt,formatCfg):this.formattedDate)&&(altFormattedDateTime+=altSeparator),this._defaults.altTimeFormat?altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults
)+altTimeSuffix:altFormattedDateTime+=this.formattedTime+altTimeSuffix,this.$altInput.val(altFormattedDateTime)}else this.$input.val(formattedDateTime);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!=inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){
var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",null).slider({orientation:"horizontal",value:rtl?-1*val:val,min:rtl?-1*max:min,max:rtl?-1*min:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?-1*ui.value:ui.value),tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if("string"==typeof opts)return"min"==opts||"max"==opts?void 0!==val?obj.slider(opts,-1*val):Math.abs(obj.slider(opts)):obj.slider(opts);var min=opts.min,max=opts.max;return opts.min=opts.max=null,void 0!==min&&(opts.max=-1*min),void 0!==max&&(
opts.min=-1*max),obj.slider(opts)}return"string"==typeof opts&&void 0!==val?obj.slider(opts,val):obj.slider(opts)},value:function(tp_inst,obj,unit,val){return tp_inst._defaults.isRTL?void 0!==val?obj.slider("value",-1*val):Math.abs(obj.slider("value")):void 0!==val?obj.slider("value",val):obj.slider("value")}},select:{create:function(tp_inst,obj,unit,val,min,max,step){for(var sel='<select class="ui-timepicker-select" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat,i=min;i<=max;i+=step)sel+='<option value="'+i+'"'+(i==val?" selected":"")+">",
sel+="hour"==unit?$.datepicker.formatTime($.trim(format.replace(/[^ht ]/gi,"")),{hour:i},tp_inst._defaults):"millisec"==unit||"microsec"==unit||10<=i?i:"0"+i.toString(),sel+="</option>";return sel+="</select>",obj.children("select").remove(),$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange(),tp_inst._onSelectHandler()}),obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if("string"==typeof opts){if(void 0===val)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),o.step||$t.data("step"))},value:function(tp_inst,
obj,unit,val){var $t=obj.children("select");return void 0!==val?$t.val(val):$t.val()}}}}),$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);return"object"==typeof o&&(tmp_args[0]=$.extend(o,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){var tmp_args=arguments;return"string"==typeof(o=o||{})?"getDate"==o?$.fn.datepicker.apply($(this[0]),tmp_args):this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)}):this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}),$.datepicker.parseDateTime=function(
dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec),parseRex.date.setMicroseconds(t.microsec)}return parseRes.date},$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),strictParse=(timeFormat.replace(/\'.*?\'/g,"").indexOf("Z"),function(f,s,o){var treg,regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var amNames,
pmNames,markers,ml=match.length;switch(match.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===ml?"(\\d?\\d)":"(\\d{"+ml+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return amNames=o.amNames,pmNames=o.pmNames,markers=[],amNames&&$.merge(markers,amNames),pmNames&&$.merge(markers,pmNames),"("+(markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")})).join("|")+")?";default:return"("+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=function(timeFormat){
var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds)for(var i=0;i<finds.length;i++)-1==orders[finds[i].toString().charAt(0)]&&(orders[finds[i].toString().charAt(0)]=i+1);return orders}(f),ampm="",resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!(treg=s.match(new RegExp(regstr,"i")))&&(-1!==order.t&&(void 0===treg[order.t]||0===treg[order.t].length?(ampm="",resTime.ampm=""):(ampm=-1!==$.inArray(treg[order.t].toUpperCase(),o.amNames)?"AM":"PM",resTime.ampm=o["AM"==ampm?"amNames":"pmNames"][0])),-1!==order.h&&(
"AM"==ampm&&"12"==treg[order.h]?resTime.hour=0:"PM"==ampm&&"12"!=treg[order.h]?resTime.hour=parseInt(treg[order.h],10)+12:resTime.hour=Number(treg[order.h])),-1!==order.m&&(resTime.minute=Number(treg[order.m])),-1!==order.s&&(resTime.second=Number(treg[order.s])),-1!==order.l&&(resTime.millisec=Number(treg[order.l])),-1!==order.c&&(resTime.microsec=Number(treg[order.c])),-1!==order.z&&void 0!==treg[order.z]&&(resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z])),resTime)});return"function"==typeof o.parse?o.parse(timeFormat,timeString,o):"loose"===o.parse?function(f,s,o){try{var d=new Date("2012-01-01 "+s);if(isNaN(d.getTime())&&(d=new Date(
"2012-01-01T"+s),isNaN(d.getTime())&&(d=new Date("01/01/2012 "+s),isNaN(d.getTime()))))throw"Unable to parse time with native Date: "+s;return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:-1*d.getTimezoneOffset()}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return!1}(timeFormat,timeString,o):strictParse(timeFormat,timeString,o)},$.datepicker.formatTime=function(format,time,options){options=options||{},options=$.extend({},$.timepicker._defaults,options),time=$.extend({hour:0,minute:0,second:0,
millisec:0,timezone:0},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);return 11<hour&&(ampmName=options.pmNames[0]),tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|('.*?'|".*?"))/g,function(match){switch(match){case"HH":return("0"+hour).slice(-2);case"H":return hour;case"hh":return("0"+convert24to12(hour)).slice(-2);case"h":return convert24to12(hour);case"mm":return("0"+time.minute).slice(-2);case"m":return time.minute;case"ss":return("0"+time.second).slice(-2);case"s":return time.second;case"l":return("00"+time.millisec).slice(-3);case"c":return("00"+time.microsec).slice(-3);case"z":
return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!0);case"T":return ampmName.charAt(0).toUpperCase();case"TT":return ampmName.toUpperCase();case"t":return ampmName.charAt(0).toLowerCase();case"tt":return ampmName.toLowerCase();default:return match.replace(/\'/g,"")||"'"}}),tmptime=$.trim(tmptime)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");tp_inst?(tp_inst._limitMinMaxDateTime(inst,!0),
inst.inline=inst.stay_open=!0,this._base_selectDate(id,dateStr),inst.inline=inst.stay_open=!1,this._notifyChange(inst),this._updateDatepicker(inst)):this._base_selectDate(id,dateStr)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!=inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input||"boolean"==typeof inst.stay_open&&!1!==inst.stay_open)){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");tp_inst&&tp_inst._addTimePicker(inst)}},
$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&$.datepicker._get(inst,"constrainInput")){var ampm=tp_inst.support.ampm,tz=null!==tp_inst._defaults.showTimezone?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":""
).replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(""):"")+tp_inst._defaults.amNames.join("")+tp_inst._defaults.pmNames.join("")+dateChars,chr=String.fromCharCode(void 0===event.charCode?event.keyCode:event.charCode);return event.ctrlKey||chr<" "||!dateChars||-1<datetimeChars.indexOf(chr)}return $.datepicker._base_doKeyPress(event)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){
tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat;var date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=null!==tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix,tp_inst._defaults.timeOnly||tp_inst._defaults.altFieldTimeOnly||null===date||(
altFormattedDateTime=tp_inst._defaults.altFormat?$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime:tp_inst.formattedDate+altSeparator+altFormattedDateTime),$(altField).val(altFormattedDateTime)}}else $.datepicker._base_updateAlternate(inst)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!=inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}return $.datepicker._base_doKeyUp(event)},
$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,"timepicker");selectLocalTimezone(tp_inst);var now=new Date;this._setTime(inst,now),$(".ui-datepicker-today",$dp).click()},$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(tp_inst._defaults.showTimepicker=!1,tp_inst._updateDateTime(inst))}},$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){
var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(tp_inst._defaults.showTimepicker=!0,tp_inst._addTimePicker(inst),tp_inst._updateDateTime(inst))}},$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour,tp_inst.minute=date?date.getMinutes():defaults.minute,tp_inst.second=date?date.getSeconds():defaults.second,tp_inst.millisec=date?date.getMilliseconds():defaults.millisec,tp_inst.microsec=date?date.getMicroseconds():defaults.microsec,tp_inst._limitMinMaxDateTime(inst,!0),tp_inst._onTimeChange(),
tp_inst._updateDateTime(inst)}},$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(inst){var tp_date,tp_inst=this._get(inst,"timepicker");if(tp_inst)this._setDateFromField(inst),date&&("string"==typeof date?(tp_inst._parseTime(date,withDate),(tp_date=new Date).setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),tp_date.setMicroseconds(tp_inst.microsec)):tp_date=new Date(date.getTime()),"Invalid Date"==tp_date.toString()&&(tp_date=void 0),this._setTime(inst,tp_date))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(target,date){
var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker"),tp_date=date instanceof Date?new Date(date.getTime()):date;tp_inst&&null!=tp_inst.timezone&&(date=$.timepicker.timezoneAdjust(date,tp_inst.timezone),tp_date=$.timepicker.timezoneAdjust(tp_date,tp_inst.timezone)),this._updateDatepicker(inst),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(target,tp_date,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){
void 0===inst.lastVal&&this._setDateFromField(inst,noDefault);var date=this._getDate(inst);return date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)&&(date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),date.setMicroseconds(tp_inst.microsec),null!=tp_inst.timezone&&(date=$.timepicker.timezoneAdjust(date,tp_inst.timezone))),date}return this._base_getDateDatepicker(target,noDefault)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(!(0<=err.indexOf(":")))throw err;date=this._base_parseDate(format,
value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings),$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}return date},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,"timepicker");return tp_inst?(tp_inst._updateDateTime(inst),tp_inst.$input.val()):this._base_formatDate(inst)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(target,name,value){var name_clone,inst=this._getInst(target);if(!inst)return null;var tp_inst=this._get(inst,
"timepicker");if(tp_inst){var prop,min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={};if("string"==typeof name){if("minDate"===name||"minDateTime"===name)min=value;else if("maxDate"===name||"maxDateTime"===name)max=value;else if("onSelect"===name)onselect=value;else if(overrides.hasOwnProperty(name)){if(void 0===value)return overrides[name];fns[name]=value,name_clone={}}}else if("object"==typeof name)for(prop in name.minDate?min=name.minDate:name.minDateTime?min=name.minDateTime:name.maxDate?max=name.maxDate:name.maxDateTime&&(max=name.maxDateTime),overrides)overrides.hasOwnProperty(prop)&&name[prop]&&(fns[prop]=name[prop]);for(
prop in fns)fns.hasOwnProperty(prop)&&(overrides[prop]=fns[prop],name_clone||(name_clone=$.extend({},name)),delete name_clone[prop]);if(name_clone&&isEmptyObject(name_clone))return;min?(min=0===min?new Date:new Date(min),tp_inst._defaults.minDate=min,tp_inst._defaults.minDateTime=min):max?(max=0===max?new Date:new Date(max),tp_inst._defaults.maxDate=max,tp_inst._defaults.maxDateTime=max):onselect&&(tp_inst._defaults.onSelect=onselect)}return void 0===value?this._base_optionDatepicker.call($.datepicker,target,name):this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj)if(
obj.hasOwnProperty(obj))return!1;return!0},extendRemove=function(target,props){for(var name in $.extend(target,props),props)null!==props[name]&&void 0!==props[name]||(target[name]=props[name]);return target},detectSupport=function(timeFormat){var tf=timeFormat.replace(/\'.*?\'/g,"").toLowerCase(),isIn=function(f,t){return-1!==f.indexOf(t)};return{hour:isIn(tf,"h"),minute:isIn(tf,"m"),second:isIn(tf,"s"),millisec:isIn(tf,"l"),microsec:isIn(tf,"c"),timezone:isIn(tf,"z"),ampm:isIn("t")&&isIn(timeFormat,"h"),iso8601:isIn(timeFormat,"Z")}},convert24to12=function(hour){return 12<hour&&(hour-=12),0===hour&&(hour=12),String(hour)},splitDateTime=function(dateFormat,
dateTimeString,dateSettings,timeSettings){try{var separator=timeSettings&&timeSettings.separator?timeSettings.separator:$.timepicker._defaults.separator,timePartsLen=(timeSettings&&timeSettings.timeFormat?timeSettings.timeFormat:$.timepicker._defaults.timeFormat).split(separator).length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(1<allPartsLen)return[allParts.splice(0,allPartsLen-timePartsLen).join(separator),allParts.splice(0,timePartsLen).join(separator)]}catch(err){if($.timepicker.log(
"Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+err+"\ndateTimeString"+dateTimeString+"\ndateFormat = "+dateFormat+"\nseparator = "+timeSettings.separator+"\ntimeFormat = "+timeSettings.timeFormat),0<=err.indexOf(":")){var dateStringLength=dateTimeString.length-(err.length-err.indexOf(":")-2);dateTimeString.substring(dateStringLength);return[$.trim(dateTimeString.substring(0,dateStringLength)),$.trim(dateTimeString.substring(dateStringLength))]}throw err}return[dateTimeString,""]},parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,
splitRes=splitDateTime(dateFormat,dateTimeString,dateSettings,timeSettings);if(date=$.datepicker._base_parseDate(dateFormat,splitRes[0],dateSettings),""===splitRes[1])return{date:date};var timeString=splitRes[1],parsedTime=$.datepicker.parseTime(timeFormat,timeString,timeSettings);if(null===parsedTime)throw"Wrong time format";return{date:date,timeObj:parsedTime}},selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=void 0!==date?date:new Date;tp_inst.timezone_select.val(-1*now.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||840<tzMinutes
)return tzMinutes;var minutes=tzMinutes%60,iso=iso8601?":":"",tz=(0<=tzMinutes?"+":"-")+("0"+(101*((tzMinutes-minutes)/60)).toString()).slice(-2)+iso+("0"+(101*minutes).toString()).slice(-2);return"+00:00"==tz?"Z":tz},$.timepicker.timezoneOffsetNumber=function(tzString){return"Z"===(tzString=tzString.toString().replace(":","")).toUpperCase()?0:/^(\-|\+)\d{4}$/.test(tzString)?("-"==tzString.substr(0,1)?-1:1)*(60*parseInt(tzString.substr(1,2),10)+parseInt(tzString.substr(3,2),10)):tzString},$.timepicker.timezoneAdjust=function(date,toTimezone){var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz)){var diff=-1*date.getTimezoneOffset()-toTz
;date.setMinutes(date.getMinutes()+diff)}return date},$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)},$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange("datetimepicker",startTime,endTime,options)},$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange("datepicker",startTime,endTime,options)},$.timepicker.handleRange=function(method,startTime,endTime,options){function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(
null!==startdt){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval),maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval),0<options.minInterval&&enddt<minDate?endTime[method]("setDate",minDate):0<options.maxInterval&&maxDate<enddt?endTime[method]("setDate",maxDate):enddt<startdt&&other[method]("setDate",changeddt)}}function selected(changed,other,option){if(changed.val()){var date=changed[method].call(changed,"getDate");null!==date&&0<options.minInterval&&("minDate"==option&&date.setMilliseconds(date.getMilliseconds()+options.minInterval),
"maxDate"==option&&date.setMilliseconds(date.getMilliseconds()-options.minInterval)),date.getTime&&other[method].call(other,"option",option,date)}}return options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options),$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,"minDate")}},options,options.start)),$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates($(this),startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,"maxDate")}},options,options.end)),checkDates(startTime,endTime),selected(
startTime,endTime,"minDate"),selected(endTime,startTime,"maxDate"),$([startTime.get(0),endTime.get(0)])},$.timepicker.log=function(err){window.console&&console.log(err)},Date.prototype.getMicroseconds||(Date.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(m){return this.microseconds=m,this}),$.timepicker.version="1.3"}}),define("ui/dateRange",["jquery","lodash","ui/component","tpl!ui/dateRange/tpl/select","jquery.timePicker"],function($,_,component,formTpl){"use strict";var _defaults={pickerType:"datepicker",pickerConfig:{dateFormat:"yy-mm-dd"},startDate:"",endDate:"",renderTo:null,
startInput:null,endInput:null};return function(config){var $periodStart,$periodEnd,componentDateRange,$filterBtn,$resetBtn,initConfig=_.defaults(config||{},_defaults),periodStart=initConfig.startDate||"",periodEnd=initConfig.endDate||"",hasInputs=function(){var isDefined=!1;return initConfig.startInput&&initConfig.endInput&&(isDefined=!0),isDefined};return componentDateRange=component({getStart:function(){return periodStart},getEnd:function(){return periodEnd}}),hasInputs()?($periodStart=initConfig.startInput,$periodEnd=initConfig.endInput):componentDateRange.setTemplate(formTpl),componentDateRange.on("render",function(){var self=this,$form=this.getElement()
;hasInputs()||($periodStart=$form.find("input[name=periodStart]"),$periodEnd=$form.find("input[name=periodEnd]"),$filterBtn=$form.find('[data-control="filter"]'),$resetBtn=$form.find('[data-control="reset"]')),$.timepicker.triggeredHandleRange=function(method,startTime,endTime,options){function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(null!==startdt){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval),maxDate.setMilliseconds(maxDate.getMilliseconds(
)+options.maxInterval),0<options.minInterval&&enddt<minDate?endTime[method]("setDate",minDate):0<options.maxInterval&&maxDate<enddt?endTime[method]("setDate",maxDate):enddt<startdt&&other[method]("setDate",changeddt)}}function selected(changed,other,option,isStart){var date;changed.val()&&(date=changed[method].call(changed,"getDate"),isStart?periodStart=changed.val():periodEnd=changed.val(),null!==date&&0<options.minInterval&&("minDate"==option&&date.setMilliseconds(date.getMilliseconds()+options.minInterval),"maxDate"==option&&date.setMilliseconds(date.getMilliseconds()-options.minInterval)),date.getTime&&(other[method].call(other,"option",option,date),
isStart?periodEnd=other.val():periodStart=other.val()))}return options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options),$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime),self.trigger("close","start",periodStart)},onSelect:function(selectedDateTime){self.trigger("change","start",selectedDateTime),selected($(this),endTime,"minDate",!0)}},options,options.start)),$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates($(this),startTime),self.trigger("close","end",periodEnd)},onSelect:function(selectedDateTime){self.trigger("change","end",selectedDateTime),selected($(this),
startTime,"maxDate",!1)}},options,options.end)),checkDates(startTime,endTime),selected(startTime,endTime,"minDate",!0),selected(endTime,startTime,"maxDate",!1),$([startTime.get(0),endTime.get(0)])},$.timepicker.triggeredHandleRange(initConfig.pickerType,$periodStart,$periodEnd,{start:initConfig.pickerConfig,end:initConfig.pickerConfig}),$filterBtn&&$filterBtn.length&&$filterBtn.on("click",function(event){event.preventDefault(),periodStart=$periodStart.val(),periodEnd=$periodEnd.val(),self.trigger("submit")}),$resetBtn&&$resetBtn.length&&$resetBtn.on("click",function(event){event.preventDefault(),$periodStart.val(""),$periodEnd.val(""),$filterBtn.click()})}
).on("destroy",function(){hasInputs()&&($periodStart.datepicker("destroy"),$periodEnd.datepicker("destroy"))}).init(initConfig),componentDateRange}}),define("tpl!ui/deleter/undo",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="undobox feedback-info">\n    <span class="icon-info"></span>\n        ',buffer+=escapeExpression((helper=helpers.undoMessage)?helper.call(depth0,{hash:{},data:data}
):"function"==typeof(helper=depth0&&depth0.undoMessage)?helper.call(depth0,{hash:{},data:data}):helper)+'\n        <a class="undo" href="#">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Undo",options):helperMissing.call(depth0,"__","Undo",options)))+'</a>\n    <span title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Remove Message",options):helperMissing.call(depth0,"__","Remove Message",options)))+'" class="icon-close" data-close=":parent .undobox"></span>\n</div>\n'})}),define("ui/deleter",["jquery","lodash","i18n","core/pluginifier",
"core/dataattrhandler","tpl!ui/deleter/undo"],function($,_,__,Pluginifier,DataAttrHandler,undoTmpl){"use strict";var ns="deleter",dataNs="ui."+ns,defaults={bindEvent:"click",undo:!1,undoTimeout:5e3,undoMessage:__("Element deleted."),undoContainer:!1,confirm:!1,confirmMessage:__("Are you sure you want to delete it?"),disableClass:"disabled"},deleter={init:function(options){return options=_.defaults(options,defaults),this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),deleter._delete($elt)}),$elt.trigger("create."+ns))})},_delete:function($elt){
var $target,$parent,$evtTrigger,$placeholder,$undoBox,undoRemove,timeout,self=deleter,performDelete=!0,options=$elt.data(dataNs),realRemove=function(){performDelete&&$target&&($target.remove(),$evtTrigger.trigger("deleted."+ns))};options&&!$elt.hasClass(options.disableClass)&&($target=options.target,!0===options.confirm&&(performDelete=window.confirm(options.confirmMessage)),performDelete&&($parent=$target.parent(),$evtTrigger=0<$target.has($elt).length?$parent:$elt,$elt.trigger("delete."+ns,[$target]),$target.trigger("delete",[options.undo]),$placeholder=$('<span style="display:none;" />').insertAfter($target),$target.detach(),options.undo?($(document).off(
".unundo."+ns),($undoBox=self._createUndoBox(options)).find(".undo").click(function(e){e.preventDefault(),"number"==typeof timeout&&clearTimeout(timeout),performDelete=!1,$undoBox.remove(),$target.insertBefore($placeholder),$placeholder.remove(),$elt.trigger("undo."+ns,[$target]),$target.trigger("undo."+ns)}),undoRemove=function(){$undoBox&&$undoBox.length&&($undoBox.remove(),$placeholder.remove()),realRemove(),$(document).off(".unundo."+ns)},$(document).one("mousedown.unundo."+ns,function(e){return e.preventDefault(),e.stopImmediatePropagation(),0!==$undoBox.find(e.target).length&&$(e.target).hasClass("undo")||"number"!=typeof timeout||(clearTimeout(timeout
),undoRemove()),_.delay(function(){$(e.target).trigger("mousedown")},10),!1}),timeout=setTimeout(function(){undoRemove()},options.undoTimeout)):realRemove()))},_createUndoBox:function(options){var $undoContainer=options.undoContainer||$("#feedback-messages-main");return $undoContainer.length||($undoContainer=$('<div id="feedback-messages-main" class="tao-scope"></div>').appendTo("body")),$(undoTmpl(options)).appendTo($undoContainer)},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,
deleter,{expose:["delete"]}),function($container){new DataAttrHandler("delete",{container:$container,listenerEvent:"click",namespace:dataNs,bubbled:!0}).init(function($elt,$target){var options={target:$target,bindEvent:!1,undo:!0},confirm=$elt.data("delete-confirm"),undo=$elt.data("delete-undo");confirm&&(options.confirm=!0,options.undo=!1,0<confirm.length&&(options.confirmMessage=confirm)),null!=undo&&(!1===undo?options.undo=!1:(options.confirm=!1,options.undo=!0,0<undo.length&&(options.undoMessage=undo))),$elt.deleter(options)}).trigger(function($elt){$elt.deleter("delete")})}}),define("ui/resource/selectable",["jquery","lodash"],function($,_){"use strict"
;return function(component,config){var selection={},nodes={},isAComponent=_.all(["on","trigger","init","render","is","getElement"],function(method){return _.isFunction(component[method])});if(!_.isObject(component)||!isAComponent)throw new TypeError("Selectable expects a component");return _.assign(component,{getNodes:function(){return nodes},getNode:function(uri){return!(!uri||!_.isPlainObject(nodes[uri]))&&nodes[uri]},setNodes:function(newNodes){_.isArray(newNodes)?nodes=_.reduce(newNodes,function(acc,node){return node.uri&&(acc[node.uri]=node),acc},{}):_.isObject(newNodes)&&(nodes=newNodes)},addNode:function(uri,node){return!!_.isPlainObject(node)&&(
nodes[uri]=node,this.trigger("add",uri,node),!0)},removeNode:function(uri){return!!this.hasNode(uri)&&(selection[uri]&&this.unselect(uri),nodes=_.omit(nodes,uri),this.trigger("remove",uri),!0)},hasNode:function(uri){return void 0!==nodes[uri]},getSelection:function(){return selection},clearSelection:function(){return 0<_.size(selection)&&(selection={}),this.is("rendered")&&($(".selected",this.getElement()).removeClass("selected"),this.trigger("change",selection)),this},select:function(uris,only){var $component,currentConfig=_.defaults(component.getConfig()||{},config||{});return this.is("rendered")&&($component=this.getElement(),only&&(selection={},$(
".selected",this.getElement()).removeClass("selected")),_.isArray(uris)||(uris=[uris]),_(uris).reject(function(uri){return void 0!==selection[uri]||!nodes[uri]}).forEach(function(uri){var $node=$('[data-uri="'+uri+'"]',$component),selectNode=$node.length;selectNode&&currentConfig&&_.isFunction(currentConfig.preventSelection)&&currentConfig.preventSelection(uri,nodes[uri],$node)&&(selectNode=!1),selectNode&&($node.addClass("selected"),selection[uri]=nodes[uri])}),this.trigger("change",selection)),this},unselect:function(uris){var $component;return this.is("rendered")&&($component=this.getElement(),_.isArray(uris)||(uris=[uris]),_(uris).filter(function(uri){
return void 0!==selection[uri]||!nodes[uri]}).forEach(function(uri){var $node=$('[data-uri="'+uri+'"]',$component);$node.length&&($node.removeClass("selected"),selection=_.omit(selection,uri))}),this.trigger("change",selection)),this},selectAll:function(){return this.select(_.keys(nodes))}})}}),define("tpl!ui/resource/tpl/tree",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="";return buffer+='<div class="resource-tree ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},
inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <ul></ul>\n</div>\n\n'})}),define("tpl!ui/resource/tpl/treeNode",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,data){var stack1,helper,buffer="";return buffer+='data-access="',stack1=(
helper=helpers.accessMode)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.accessMode)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program4(depth0,data){var stack1,helper,buffer="";return buffer+="\n        ",((stack1=(helper=helpers.childList)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.childList)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="\n    "}return helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,
options,buffer="";return buffer+='\n<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="class ',stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-count="',stack1=(helper=helpers.count)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.count)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-folder"></span> ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'</a>\n    <span class="class-toggler" tabindex="0"></span>\n    <ul>\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.childList,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    </ul>\n    <div class="more hidden">\n        <a href="#" class="btn-info small"><span class="icon-download"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Load more",options):helperMissing.call(depth0,"__","Load more",options)))+"</a>\n    </div>\n</li>\n"},data),data:data},((stack1=helper?helper.call(depth0,
depth0&&depth0.type,"class",options):helperMissing.call(depth0,"equal",depth0&&depth0.type,"class",options))||0===stack1)&&(buffer+=stack1),buffer+="\n\n",helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.noop,fn:self.program(6,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="instance ',stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"  ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n</li>\n"},data),data:data},((stack1=helper?helper.call(depth0,depth0&&depth0.type,"instance",options):helperMissing.call(depth0,"equal",depth0&&depth0.type,"instance",options))||0===stack1)&&(buffer+=stack1),buffer+="\n\n\n"})}),define("ui/resource/tree",["jquery","lodash","i18n","ui/component","ui/resource/selectable","ui/hider","tpl!ui/resource/tpl/tree",
"tpl!ui/resource/tpl/treeNode"],function($,_,__,component,selectable,hider,treeTpl,treeNodeTpl){"use strict";var defaultConfig={multiple:!0},updateCount=function($classNode,update){var count=0;$classNode&&$classNode.length&&$classNode.hasClass("class")&&(count=$classNode.data("count"),(count+=update)<0&&(count=0),$classNode.attr("data-count",count).data("count",count))};return function($container,config){var resourceTree=selectable(component({query:function(params){return this.is("loading")||this.trigger("query",_.defaults(params||{},{classUri:this.classUri})),this},update:function(nodes,params){var $root,$component,self=this;function reduceNode(acc,node){
return self.hasNode(node.uri)||params&&0<params.offset&&"class"===node.type||"class"===node.type&&!node.state&&!self.config.selectClass?acc:("class"===node.type&&self.config.selectClass&&(node.classUri=node.uri,node.state||(node.state="empty"),self.addNode(node.uri,_.omit(node,["count","state","children"]))),"instance"===node.type&&(self.addNode(node.uri,_.omit(node,["count","state","children"])),node.icon=config.icon),node.children&&node.children.length&&(node.childList=reduceNodes(node.children)),acc+=treeNodeTpl(node))}function reduceNodes(nodeList){return _.sortBy(nodeList,function(a,b){return b.label-a.label}).reduce(reduceNode,"")}return this.is(
"rendered")&&($component=this.getElement(),params&&params.classUri&&($root=$('.class[data-uri="'+params.classUri+'"]',$component)),$root&&$root.length||($root=$component),nodes[0].uri===$root.data("uri")&&(nodes=nodes[0].children||[]),$root.children("ul").append(reduceNodes(nodes)),params&&_.isNumber(params.updateCount)&&updateCount($root,params.updateCount),function needMore($node){var $more=$node.children(".more"),totalCount=$node.data("count"),instancesCount=$node.children("ul").children(".instance").length;0<totalCount&&0<instancesCount&&instancesCount<totalCount?hider.show($more):hider.hide($more),$node.children("ul").find(".class").each(function(){
needMore($(this))})}($root),function indentChildren($list,level){var indent;$list.length&&(indent=15*level,level++,$list.children("li").each(function(){var $target=$(this);$target.children("a").css("padding-left",indent+"px"),indentChildren($target.children("ul"),level)}),$list.siblings(".more").css("padding-left",indent+"px"))}($component.children("ul"),1),$root.removeClass("closed"),this.trigger("update")),this}},defaultConfig));return resourceTree.setTemplate(treeTpl).on("init",function(){this.classUri=this.config.classUri,this.setState("multiple",!!this.config.multiple),this.render($container)}).on("render",function(){var self=this,
$component=this.getElement(),toggleClass=function($class){$class.hasClass("closed")?function($class){$class.hasClass("closed")&&($class.children("ul").children("li").length?$class.removeClass("closed"):self.query({classUri:$class.data("uri")}))}($class):function($class){$class.addClass("closed")}($class)};self.config.selectClass?$component.on("click",".class",function(e){var $class=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),$(e.target).hasClass("class-toggler")?$class.hasClass("empty")||toggleClass($class):$class.hasClass("selected")?self.unselect($class.data("uri")):"denied"!==$class.data("access")&&self.select($class.data("uri"),!self.is(
"multiple"))}):$component.on("click",".class:not(.empty)",function(e){var $class=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),toggleClass($class)}),$component.on("click",".instance:not([data-access=denied])",function(e){var $instance=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),$instance.hasClass("selected")?self.unselect($instance.data("uri")):self.select($instance.data("uri"),!self.is("multiple"))}),$component.on("click",".more",function(e){var $root=$(e.currentTarget).parent(".class");e.preventDefault(),e.stopPropagation(),self.query({classUri:$root.data("uri"),offset:$root.children("ul").children(".instance").length})}),
this.config.nodes?this.update(this.config.nodes):this.query()}).on("query",function(){this.setState("loading",!0)}).on("update",function(){this.setState("loading",!1)}).on("remove",function(uri){var $node,$parent;this.is("rendered")&&uri&&(($node=$('[data-uri="'+uri+'"]',this.getElement())).hasClass("instance")&&($parent=$node.parents(".class"),updateCount($parent,-1)),$node.remove())}),_.defer(function(){resourceTree.init(config)}),resourceTree}}),define("tpl!ui/resource/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),
data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="resource-list ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <ul></ul>\n    <div class="more hidden">\n        <a href="#" class="btn-info small"><span class="icon-download"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Load more",options):helperMissing.call(depth0,"__",
"Load more",options)))+"</a>\n    </div>\n</div>\n\n"})}),define("tpl!ui/resource/tpl/listNode",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,
depth0&&depth0.selected,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'class="selected"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' class="',stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='data-access="',stack1=(helper=helpers.accessMode)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.accessMode)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>',stack1=(
helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n</li>\n\n"})}),define("ui/resource/list",["jquery","lodash","i18n","ui/component","ui/resource/selectable","ui/hider","tpl!ui/resource/tpl/list","tpl!ui/resource/tpl/listNode"],function($,_,__,component,selectable,hider,listTpl,listNodeTpl){"use strict";var defaultConfig={multiple:!0};return function($container,config){var $list,$loadMore,resourceList=selectable(component({query:function(params){this.is("loading")||this.trigger("query",_.defaults(params||{},{
classUri:this.classUri}))},update:function(resources){var self=this;this.is("rendered")&&($list.append(_.reduce(resources.nodes,function(acc,node){return node.icon=self.config.icon,acc+=listNodeTpl(node)},"")),_.forEach(resources.nodes,function(node){self.addNode(node.uri,node)}),resources.total>_.size(self.getNodes())?hider.show($loadMore):hider.hide($loadMore),this.trigger("update"))}},defaultConfig));return resourceList.setTemplate(listTpl).on("init",function(){this.classUri=this.config.classUri,this.setState("multiple",!!this.config.multiple),this.render($container)}).on("render",function(){var self=this,$component=this.getElement()
;$list=$component.children("ul"),$loadMore=$(".more",$component),$component.on("click","li",function(e){var $instance=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),$instance.hasClass("selected")?self.unselect($instance.data("uri")):self.select($instance.data("uri"),!self.is("multiple"))}),$loadMore.on("click",function(e){e.preventDefault(),self.query({offset:_.size(self.getNodes())})}),this.config.nodes?this.update(this.config.nodes):this.query()}).on("query",function(){this.setState("loading",!0)}).on("update",function(){this.setState("loading",!1)}).on("remove",function(uri){this.is("rendered")&&$('[data-uri="'+uri+'"]',this.getElement()
).remove()}),_.defer(function(){resourceList.init(config)}),resourceList}}),define("tpl!ui/generis/validator/validator",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="ui-generis-validator"></div>'})}),define("css!ui/generis/validator/validator",[],function(){}),define("ui/generis/validator/validator",["jquery","lodash","i18n","ui/component","tpl!ui/generis/validator/validator","css!ui/generis/validator/validator"],function($,_,__,componentFactory,tpl){"use strict";return function(options){
var validator;return options=options||{},(validator=componentFactory({run:function(value){return this.errors=_(this.validations).reject(function(validation){return validation.predicate instanceof RegExp?validation.predicate.test(value):"function"==typeof validation.predicate?validation.predicate(value):void 0},this).sortBy("precedence").map(function(validation){return validation.message}).value(),this},clear:function(){return this.errors=[],this.is("rendered")&&this.getElement().empty(),this},display:function(){var $this=this.getElement();return this.is("rendered")&&($this.empty(),_.each(this.errors,function(error){$this.append($("<div>",{
class:"validation-error"}).text(error))})),this},addValidation:function(validation){return this.validations.push(validation),this},removeValidations:function(){return this.validations=[],this}}).setTemplate(tpl).init()).errors=[],validator.validations=options.validations||[],validator}}),define("tpl!ui/generis/widget/widget",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<label for="',stack1=(
helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.required,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <abbr title="'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"This field is required",options):helperMissing.call(depth0,"__","This field is required",options)))+'">*</abbr>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</label>"})}),define("css!ui/generis/widget/widget",[],function(){}),define("ui/generis/widget/widget",["jquery","lodash","i18n","handlebars","ui/component","ui/generis/validator/validator","tpl!ui/generis/widget/widget","css!ui/generis/widget/widget"],function($,_,__,Handlebars,componentFactory,generisValidatorFactory,ptl){"use strict";return Handlebars.registerPartial("ui-generis-widget-label",ptl),function(options,spec){
var widget;return options=options||{},(widget=componentFactory(_.assign({get:function(){var ret=this.config.value||"";return this.is("rendered")&&(ret=this.getElement().find('[name="'+this.config.uri+'"]').val()),ret},set:function(value){return this.config.value=value,this.is("rendered")&&this.getElement().find('[name="'+this.config.uri+'"]').val(value),this.config.value},setValidator:function(validator){return"function"==typeof(validator=validator||[]).is?this.validator=validator:this.validator=generisValidatorFactory({validations:validator}),this.is("rendered")?this.validator.render(this.getElement()):this.on("render.setValidator",function(){
this.validator.render(this.getElement()),this.off("render.setValidator")}),this},validate:function(){var input;return this.validator&&(this.validator.run(this.get()),this.validator.display(),this.is("rendered")&&(input=this.getElement().find(".right > :input, .right > .check-box-input"),this.validator.errors.length?input.addClass("error"):input.removeClass("error"))),this},serialize:function(){return{name:this.config.uri,value:this.get()}}},spec),{label:__("Label"),required:!1}).on("render",function(){var $input=this.getElement().find(".right :input"),self=this;$input.on("change blur",function(){self.trigger("change",self.serialize())})})).setValidator(
options.validator),widget}}),define("tpl!ui/generis/widget/checkBox/checkBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,data){return'\n                        checked="true"\n                        '}return buffer+='<div class="ui-generis-widget check-box">\n    <div class="left">\n        ',((
stack1=self.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <div class="check-box-input">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.range,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,function(depth0,data,depth1){var stack1,helper,options,buffer="";return buffer+='\n            <div class="option">\n                <label>\n                    <input\n                        type="checkbox"\n                        name="'+escapeExpression(typeof(stack1=depth0&&depth0.uri
)===functionType?stack1.apply(depth0):stack1)+'"\n                        value="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(depth0):stack1)+'"\n                        ',helper=helpers.includes||depth1&&depth1.includes,options={hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data},((stack1=helper?helper.call(depth0,depth1&&depth1.values,depth0&&depth0.uri,options):helperMissing.call(depth0,"includes",depth1&&depth1.values,depth0&&depth0.uri,options))||0===stack1)&&(buffer+=stack1),buffer+='>\n                    <span class="icon-checkbox"></span>\n                    '+escapeExpression(typeof(
stack1=depth0&&depth0.label)===functionType?stack1.apply(depth0):stack1)+"\n                </label>\n            </div>\n            "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </div>\n    </div>\n</div>\n"})}),define("ui/generis/widget/checkBox/checkBox",["jquery","lodash","i18n","ui/generis/widget/widget","tpl!ui/generis/widget/checkBox/checkBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(widget=widgetFactory({validator:validator},{get:function(){var ret=this.config.values||[];return this.is("rendered")&&(ret=[],this.getElement(
).find(".option input:checked").map(function(){ret.push($(this).val())})),ret},set:function(values){return Array.isArray(values)?this.config.values=values:this.config.values.push(values),this.is("rendered")&&_.each(this.config.values,function(value){this.getElement().find("input[name="+value+"]").prop("checked",!0)}),this.config.values}}).setTemplate(tpl).init({label:config.label,range:config.range||[],required:config.required||!1,uri:config.uri,values:config.values||[]})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:function(value){return 0<value.length},precedence:1}),widget}}),define(
"tpl!ui/generis/widget/comboBox/comboBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="ui-generis-widget combo-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),
buffer+='\n    </div>\n    <div class="right">\n        <select name="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <option value="">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Choose a value...",options):helperMissing.call(depth0,"__","Choose a value...",options)))+"</option>\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.range,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,
buffer="";return buffer+='\n            <option value="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(depth0):stack1)+'">'+escapeExpression(typeof(stack1=depth0&&depth0.label)===functionType?stack1.apply(depth0):stack1)+"</option>\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </select>\n    </div>\n</div>\n"})}),define("ui/generis/widget/comboBox/comboBox",["jquery","lodash","i18n","ui/generis/widget/widget","tpl!ui/generis/widget/comboBox/comboBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(
widget=widgetFactory({validator:validator},{}).setTemplate(tpl).init({label:config.label,range:config.range||[],required:config.required||!1,uri:config.uri,value:config.value||""})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:/\S+/,precedence:1}),widget}}),define("tpl!ui/generis/widget/hiddenBox/hiddenBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,buffer="",
escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-widget hidden-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper
)+'" type="password">\n    </div>\n</div>\n\n<div class="ui-generis-widget hidden-box confirmation">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0&&depth0.confirmation,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.confirmation)||!1===stack1?stack1:stack1.uri)?stack1.apply(depth0):stack1)+'" type="password">\n    </div>\n</div>'})}),define("ui/generis/widget/hiddenBox/hiddenBox",["jquery","lodash","i18n",
"ui/generis/widget/widget","tpl!ui/generis/widget/hiddenBox/hiddenBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(widget=widgetFactory({validator:validator},{get:function(){var $el,ret={value:this.config.value,confirmation:this.config.confirmation.value};return this.is("rendered")&&($el=this.getElement(),ret.value=$el.find('[name="'+this.config.uri+'"]').val(),ret.confirmation=$el.find('[name="'+this.config.confirmation.uri+'"]').val()),ret},set:function(value){var $el;return this.config.value=this.config.confirmation.value=value,this.is("rendered")&&((
$el=this.getElement()).find('[name="'+this.config.uri+'"]').val(value),$el.find('[name="'+this.config.confirmation.uri+'"]').val(value)),{value:this.config.value,confirmation:this.config.confirmation.value}},serialize:function(){return{name:this.config.uri,value:this.get().value}}}).setTemplate(tpl).init({confirmation:{label:__("%s Confirmation",config.label),uri:config.uri+"_confirmation",value:config.value||""},label:config.label,required:config.required||!1,uri:config.uri,value:config.value||""})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:function(value){return/\S+/.test(value.value)},precedence:1}),
widget.validator.addValidation({message:__("Fields must match"),predicate:function(value){return value.value===value.confirmation},precedence:2}),widget}}),define("tpl!ui/generis/widget/textBox/textBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-widget text-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"]
,"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper)+'" value="',buffer+=escapeExpression(stack1=(helper=helpers.value)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.value)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    </div>\n</div>'})}),define("ui/generis/widget/textBox/textBox",["jquery","lodash","i18n",
"ui/generis/widget/widget","tpl!ui/generis/widget/textBox/textBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(widget=widgetFactory({validator:validator},{}).setTemplate(tpl).init({label:config.label,required:config.required||!1,uri:config.uri,value:config.value||""})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:/\S+/,precedence:1}),widget}}),define("ui/generis/widget/loader",["lodash","ui/generis/widget/checkBox/checkBox","ui/generis/widget/comboBox/comboBox","ui/generis/widget/hiddenBox/hiddenBox",
"ui/generis/widget/textBox/textBox"],function(_,checkBoxFactory,comboBoxFactory,hiddenBoxFactory,textBoxFactory){"use strict";var _widgetFactories={"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#CheckBox":checkBoxFactory,"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#ComboBox":comboBoxFactory,"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#HiddenBox":hiddenBoxFactory,"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextBox":textBoxFactory};return function(uri){return uri&&_.contains(Object.keys(_widgetFactories),uri)?_widgetFactories[uri]:_widgetFactories["http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextBox"]}}),define(
"tpl!ui/generis/form/form",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-form">\n    <h2>',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</h2>\n    <form action="',stack1=(helper=helpers.formAction)?helper.call(depth0,{hash:{},
data:data}):typeof(helper=depth0&&depth0.formAction)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" method="',stack1=(helper=helpers.formMethod)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.formMethod)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        <fieldset></fieldset>\n        <div class="toolbar">\n            ',((stack1=helpers.if.call(depth0,depth0&&depth0.reset,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer=""
;return buffer+='\n            <button type="reset" class="btn-neutral small">\n                <span class="icon-reset"/> ',stack1=(helper=helpers.resetText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resetText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n            </button>\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n            <button type="submit" class="btn-info small">\n                <span class="icon-save"/> ',stack1=(helper=helpers.submitText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.submitText
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n            </button>\n        </div>\n    </form>\n</div>\n"})}),define("css!ui/generis/form/form",[],function(){}),define("ui/generis/form/form",["jquery","lodash","i18n","ui/component","ui/generis/widget/loader","ui/generis/widget/checkBox/checkBox","ui/generis/widget/comboBox/comboBox","ui/generis/widget/hiddenBox/hiddenBox","ui/generis/widget/textBox/textBox","tpl!ui/generis/form/form","css!ui/generis/form/form"],function($,_,__,componentFactory,widgetLoader,checkBoxFactory,comboBoxFactory,hiddenBoxFactory,textBoxFactory,tpl){"use strict";return function(
options,config){var form;return options=options||{},(config=config||{}).form=config.form||{},config.submit=config.submit||{},(form=componentFactory({addWidget:function(widgetOptions){var widget=widgetLoader(widgetOptions.widget)({},widgetOptions);return this.widgets.push(widget),this.is("rendered")?widget.render(this.getElement().find("form > fieldset")):this.on("render."+widget.config.uri,function(){widget.render(this.getElement().find("form > fieldset")),this.off("render."+this.config.uri)}),this},getWidget:function(uri){return _.find(this.widgets,function(widget){return widget.config.uri===uri})},removeWidget:function(uri){return _.remove(this.widgets,
function(widget){if(widget.config.uri===uri)return widget.destroy(),!0}),this},validate:function(){return this.errors=_(this.widgets).map(function(widget){return widget.validate(),{uri:widget.config.uri,errors:widget.validator.errors}}).reject(function(data){return!data.errors||0===data.errors.length}).value(),this},serializeArray:function(){return _.map(this.widgets,function(widget){return widget.serialize()})},getValues:function(){return _.reduce(this.serializeArray(),function(acc,field){return(_.isString(field.name)&&!_.isEmpty(field.name)&&_.isString(field.value)&&!_.isEmpty(field.value)||_.isArray(field.value)&&0<field.value.length)&&(
acc[field.name]=field.value),acc},{})},toggleLoading:function(isLoading){return void 0===isLoading&&(isLoading=!this.is("loading")),isLoading?(this.trigger("loading"),this.disable()):(this.trigger("loaded"),this.enable()),this.setState("loading",isLoading),this}},{formAction:"#",formMethod:"get",submitText:__("Save"),title:__("Generis Form"),reset:!0,resetText:__("Reset")}).setTemplate(tpl).init(config).on("render",function(){var $form=this.getElement().find("form"),self=this;$form.on("submit",function(e){return e.preventDefault(),self.trigger("submit",self.serializeArray()),!1}),$form.on("reset",function(){self.trigger("reset",self.serializeArray())})})
).data=options,form.errors=[],form.widgets=[],_.each(options.properties||[],function(property){property.range&&"string"==typeof property.range&&(property.range=options.values[property.range]),form.addWidget(property)}),form}}),define("tpl!ui/resource/tpl/filters",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="filters">\n</div>\n'})}),define("ui/resource/filters",["jquery","lodash","i18n","ui/component","ui/generis/form/form","tpl!ui/resource/tpl/filters"],function($,_,__,component,
generisFormFactory,filtersTpl){"use strict";var supportedWidgets=["http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextBox","http://www.tao.lu/datatypes/WidgetDefinitions.rdf#CheckBox","http://www.tao.lu/datatypes/WidgetDefinitions.rdf#ComboBox","http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextArea"],defaultConfig={title:__("Search by properties"),applyLabel:__("Apply")};return function($container,config){var filters=component({getValues:function(){return this.is("rendered")&&this.form?this.form.getValues():null},setValue:function(uri,value){var widget;return this.is("rendered")&&this.form&&(widget=this.form.getWidget(uri))&&widget.set(value),this},
reset:function(){return this.update(this.config.data)},update:function(data){var properties,self=this;return this.is("rendered")&&(this.getElement().empty(),properties=_.filter(data.properties,function(property){return _.contains(supportedWidgets,property.widget)}),this.form=generisFormFactory({properties:properties,values:data.ranges},{submitText:this.config.applyLabel,title:this.config.title}).on("submit reset",function(){self.trigger("change",this.getValues())}).render(this.getElement())),this},getTextualQuery:function(){var result,self=this;return this.is("rendered")&&(result=_.reduce(this.form.getValues(),function(acc,value,uri){var displayValue,
widget=self.form.getWidget(uri);return widget&&(_.isEmpty(acc)||(acc+=__(" AND ")),acc+=widget.config.label+__(" is "),displayValue=widget.config.range?_.map(_.isArray(value)?value:[value],function(val){var selectedValue=_.find(widget.config.range,{uri:val});return selectedValue&&selectedValue.label}):value,_.isString(displayValue)&&(acc+=displayValue),_.isArray(displayValue)&&(acc+=displayValue.join(", "))),acc},"")),result}},defaultConfig);return filters.setTemplate(filtersTpl).on("init",function(){this.render($container)}).on("render",function(){this.config.data&&this.update(this.config.data)}),_.defer(function(){filters.init(config)}),filters}}),define(
"tpl!ui/resource/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program4(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <a href="#" data-view-format="'+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.active,{hash:{},
inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=" ",((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='><span class="',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span></a>\n        '}function program5(depth0,data){return'class="active"'}function program7(depth0,data){var stack1,helper,buffer="";return buffer+='title="',stack1=(
helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program10(depth0,data){var helper,options,buffer="";return buffer+='\n            <a href="#" class="filters-opener" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Advanced search, add filters",options):helperMissing.call(depth0,"__","Advanced search, add filters",options)))+'"><span class="icon-add"></span></a>\n            '}function program12(depth0,data){return"hidden"}
function program14(depth0,data){return'\n        <div class="filters-container folded"></div>\n        '}return buffer+='<div class="resource-selector ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.showContext,{hash:{},inverse:self.noop,fn:self.program(3,function(depth0,data){var stack1,buffer="";return buffer+='\n    <nav class="context">\n        <div class="class-context"></div>\n        ',((stack1=helpers.each.call(depth0,depth0&&depth0.formats
,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </nav>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.showSelection,{hash:{},inverse:self.noop,fn:self.program(9,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <nav class="selection">\n        <div class="search">\n            <input type="text" placeholder="',stack1=(helper=helpers.searchPlaceholder)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.searchPlaceholder)===functionType?helper.call(depth0,{hash:{},
data:data}):helper,buffer+=escapeExpression(stack1)+'" />\n            ',((stack1=helpers.if.call(depth0,depth0&&depth0.filters,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n        <div class="selection-control">\n            <a href="#" class="selection-toggle ',((stack1=helpers.unless.call(depth0,depth0&&depth0.switchMode,{hash:{},inverse:self.noop,fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Toggle multiple/single selection",options):helperMissing.call(depth0,"__","Toggle multiple/single selection",options)))+'">\n                <span class="icon-multi-select"></span>\n            </a>\n            <label class="selection-indicator ',((stack1=helpers.unless.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n                <input type="checkbox">\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.filters,{hash:{},inverse:self.noop,
fn:self.program(14,program14,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </nav>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n    <main>\n        <span class="hidden no-results">',stack1=(helper=helpers.noResultsText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.noResultsText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    </main>\n\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(16,function(depth0,data){var stack1,helper,options,buffer=""
;return buffer+='\n    <footer>\n        <div class="get-selection">\n           <span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Selected",options):helperMissing.call(depth0,"__","Selected",options)))+" ",stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+' : </span><span class="selected-num">0</span>\n        </div>\n    </footer>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</div>\n"})}),define(
"css!ui/resource/css/selector",[],function(){}),define("ui/resource/selector",["jquery","lodash","i18n","core/promise","ui/component","ui/hider","ui/class/selector","ui/resource/tree","ui/resource/list","ui/resource/filters","tpl!ui/resource/tpl/selector","css!ui/resource/css/selector.css"],function($,_,__,Promise,component,hider,classesSelectorFactory,treeFactory,listFactory,filtersFactory,selectorTpl){"use strict";var labelUri="http://www.w3.org/2000/01/rdf-schema#label",nodeTypes={instance:"instance",class:"class"},selectionModes={single:"single",multiple:"multiple",both:"both"},defaultConfig={type:__("resources"),noResultsText:_("No resources found"),
searchPlaceholder:__("Search"),icon:"item",selectionMode:selectionModes.single,selectClass:!1,filters:!1,showContext:!0,showSelection:!0,formats:{list:{icon:"icon-ul",title:__("View resources as a list"),componentFactory:listFactory},tree:{icon:"icon-tree",title:__("View resources as a tree"),componentFactory:treeFactory,active:!0}},limit:30},resourceSelectorFactory=function($container,config){var $classContainer,$resultArea,$noResults,$searchField,$viewFormats,$selectNum,$selectCtrl,$selectCtrlLabel,$filterToggle,$filterContainer,$selectionToggle,resourceSelector=component({empty:function(){return this.is("rendered")&&this.selectionComponent&&(
this.selectionComponent.destroy(),this.selectionComponent=null),this.trigger("empty")},reset:function(){return this.is("rendered")&&(this.empty(),this.searchQuery={},this.config.filters&&(this.filtersComponent&&this.filtersComponent.reset(),$searchField.val("").attr("title",null).attr("placeholder",this.config.searchPlaceholder))),this.trigger("reset")},getSelection:function(){return this.selectionComponent?this.selectionComponent.getSelection():null},clearSelection:function(){return this.selectionComponent&&this.selectionComponent.clearSelection(),this},setSearchQuery:function(query){return this.searchQuery={},this.searchQuery[labelUri]="",_.isString(query
)&&!_.isEmpty(query)&&(this.searchQuery[labelUri]=query),_.isPlainObject(query)&&(this.searchQuery=query),this},getSearchQuery:function(){return 0===_.size(this.searchQuery)&&(this.searchQuery[labelUri]=""),this.searchQuery},query:function(params){var defaultParams,search;return this.is("rendered")&&!this.is("loading")&&(this.setState("loading",!0),params=params||{},search=this.getSearchQuery(),defaultParams={classUri:this.classUri,format:this.format,limit:this.config.limit,search:_.isObject(search)?JSON.stringify(search):""},this.trigger("query",_.defaults(params,defaultParams))),this},changeFormat:function(format){var $viewFormat;return this.is("rendered"
)&&this.format!==format&&(1!==($viewFormat=$viewFormats.filter('[data-view-format="'+format+'"]')).length||$viewFormat.hasClass("active")||($viewFormats.removeClass("active"),$viewFormat.addClass("active"),this.empty(),this.format=format,this.trigger("formatchange",format))),this},changeSelectionMode:function(newMode){return this.is("rendered")&&this.config.selectionMode!==newMode&&selectionModes[newMode]&&(this.config.multiple&&this.clearSelection(),this.config.multiple=newMode===selectionModes.multiple,this.selectionComponent.setState("multiple",this.config.multiple),this.setState("multiple",this.config.multiple),this.config.multiple?hider.show(
$selectCtrlLabel):hider.hide($selectCtrlLabel)),this},update:function(resources,params){var componentFactory,self=this;if(this.is("rendered")&&this.format){if(componentFactory=this.config.formats[this.format]&&this.config.formats[this.format].componentFactory,!_.isFunction(componentFactory))return this.trigger("error",new TypeError("Unable to load the component for the format "+this.format));hider.hide($noResults),params.updateClasses&&this.classSelector&&this.classSelector.updateNodes(function filterClasses(resources){return _(resources).filter({type:nodeTypes.class}).map(function(resource){var classNode=_.pick(resource,["uri","label"])
;return resource.children&&(classNode.children=filterClasses(resource.children)),classNode}).value()}(resources)),this.selectionComponent?this.selectionComponent.update(resources,params):this.selectionComponent=componentFactory($resultArea,_.defaults({classUri:this.classUri,nodes:resources},this.config)).on("query",function(queryParams){self.query(queryParams)}).on("update",function(){0===_.size(this.getNodes())&&0===$("li",$resultArea).length&&hider.show($noResults),self.trigger("update")}).on("change",function(selected){self.trigger("change",selected)}).on("error",function(err){self.trigger("error",err)}),this.setState("loading",!1)}return this},
updateFilters:function(filterConfig){return this.is("rendered")&&!1!==filterConfig&&this.filtersComponent&&this.filtersComponent.update(filterConfig),this},removeNode:function(node){var uri=_.isString(node)?node:node.uri;return this.hasNode(uri)&&(this.getNodeType(node)===nodeTypes.class&&this.classSelector&&this.classSelector.removeNode(node),this.selectionComponent.removeNode(uri)),this},addNode:function(node,parentUri){return this.is("rendered")&&node&&node.uri&&this.selectionComponent&&(this.selectionComponent.hasNode(node.uri)||(node.type||(node.type=nodeTypes.instance),this.selectionComponent.update([node],{classUri:parentUri||this.classUri,
format:this.format,limit:this.config.limit,updateCount:node.type===nodeTypes.instance&&1}),this.getNodeType(node)===nodeTypes.class&&this.classSelector&&this.classSelector.addNode(node,parentUri))),this},hasNode:function(node){var uri;return!!(node&&this.is("rendered")&&this.selectionComponent)&&(uri=_.isString(node)?node:node.uri,this.selectionComponent.hasNode(uri))},getNodeType:function(node){var uri,foundNode;return!!(node&&this.is("rendered")&&this.selectionComponent)&&(uri=_.isString(node)?node:node.uri,(foundNode=this.selectionComponent.getNode(uri))&&foundNode.type)},select:function(node){var uri=_.isString(node)?node:node.uri;return this.hasNode(uri
)&&(this.is("multiple")||this.selectionComponent.clearSelection(),this.selectionComponent.select(uri),$('[data-uri="'+uri+'"]',$resultArea)[0].scrollIntoView({behavior:"smooth"})),this},selectDefaultNode:function(node,fallback){var $resource;return this.is("rendered")&&(this.hasNode(node)?this.select(node):!1!==fallback&&(($resource=this.getElement().find("."+nodeTypes.instance)).length||($resource=this.getElement().find("."+nodeTypes.class)),$resource.length&&this.select($resource.first().data("uri")))),this},refresh:function(node){var queryParams={updateClasses:!0};return this.is("rendered")&&(this.on("update.refresh",function(){this.off("update.refresh"),
this.selectDefaultNode(node)}),node&&node.uri&&(queryParams.selectedUri=node.uri),this.reset().query(queryParams)),this}},defaultConfig).setTemplate(selectorTpl).on("init",function(){this.searchQuery={},this.classUri=this.config.classUri,this.format=this.config.format||_.findKey(this.config.formats,{active:!0}),this.config.switchMode=this.config.selectionMode===selectionModes.both,this.config.multiple=this.config.selectionMode===selectionModes.multiple,this.setState("multiple",this.config.multiple),this.render($container)}).on("render",function(){var self=this;return new Promise(function(resolve){var $component=self.getElement();$classContainer=$(
".class-context",$component),$resultArea=$("main",$component),$noResults=$(".no-results",$resultArea),$searchField=$(".search input",$component),$filterToggle=$(".filters-opener",$component),$filterContainer=$(".filters-container",$component),$viewFormats=$(".context > a",$component),$selectNum=$(".selected-num",$component),$selectCtrl=$(".selection-control input",$component),$selectCtrlLabel=$(".selection-control label",$component),$selectionToggle=$(".selection-toggle",$component),$searchField.on("keyup",_.debounce(function(e){var value=$(this).val().trim();(2<value.length||0===value.length||13===e.which)&&(self.config.filters&&$(this).attr("title",null
).attr("placeholder",self.config.searchPlaceholder),self.empty().changeFormat("list").setSearchQuery(value).query())},300)),$viewFormats.on("click",function(e){var format=$(this).data("view-format");e.preventDefault(),self.reset().changeFormat(format).query()}),self.config.selectionMode===selectionModes.both&&($selectionToggle.on("click",function(e){e.preventDefault(),self.changeSelectionMode(self.config.multiple?selectionModes.single:selectionModes.multiple)}),$resultArea.on("mousedown",function(e){e.ctrlKey&&!self.config.multiple&&self.changeSelectionMode(selectionModes.multiple)}),$resultArea.on("click",function(){self.changeSelectionMode(
selectionModes.single)})),$selectCtrl.on("change",function(){!1===$(this).prop("checked")?self.selectionComponent.clearSelection():self.selectionComponent.selectAll()}),!1!==self.config.filters&&(self.filtersComponent=filtersFactory($filterContainer,{classUri:self.classUri,data:self.config.filters}).on("change",function(values){var textualQuery=this.getTextualQuery();$searchField.val("").attr("title",textualQuery).attr("placeholder",textualQuery),self.empty().changeFormat("list").setSearchQuery(values).query(),$filterContainer.addClass("folded")}),$filterToggle.on("click",function(e){var searchVal;e.preventDefault(),$filterContainer.hasClass("folded")?(
searchVal=$searchField.val().trim(),_.isEmpty(searchVal)||self.filtersComponent.setValue(labelUri,searchVal),$filterContainer.removeClass("folded")):$filterContainer.addClass("folded")})),self.classSelector=classesSelectorFactory($classContainer,self.config),self.classSelector.on("render",resolve).on("change",function(uri){uri&&uri!==self.classUri&&(self.classUri=uri,$filterContainer.length&&$filterContainer.addClass("folded"),self.trigger("classchange",uri),self.reset().query())}),self.query()})}).on("change",function(selected){var nodesCount=_.size(this.selectionComponent.getNodes()),selectedCount=_.size(selected);$selectNum.text(selectedCount),
0===selectedCount?($selectCtrlLabel.attr("title",__("Select loaded %s",this.config.type)),$selectCtrl.prop("checked",!1).prop("indeterminate",!1)):selectedCount===nodesCount?($selectCtrlLabel.attr("title",__("Clear selection")),$selectCtrl.prop("checked",!0).prop("indeterminate",!1)):($selectCtrlLabel.attr("title",__("Select loaded %s",this.config.type)),$selectCtrl.prop("checked",!1).prop("indeterminate",!0))});return _.defer(function(){resourceSelector.init(config)}),resourceSelector};return resourceSelectorFactory.selectionModes=selectionModes,resourceSelectorFactory.nodeTypes=nodeTypes,resourceSelectorFactory}),define("tpl!ui/destination/tpl/selector",[
"handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="destination-selector">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n    <h2>",stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},
data:data}):helper,buffer+=escapeExpression(stack1)+"</h2>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    <div>\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.description,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <p>",stack1=(helper=helpers.description)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.description)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</p>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='\n        <div class="selector-container"></div>\n        <div class="actions">\n            <button class="btn-info small action" disabled><span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> ',stack1=(helper=helpers.actionName)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.actionName)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</button>\n        </div>\n    </div>\n</div>\n"})}),define(
"css!ui/destination/css/selector",[],function(){}),define("ui/destination/selector",["jquery","lodash","i18n","ui/component","ui/resource/selector","tpl!ui/destination/tpl/selector","css!ui/destination/css/selector.css"],function($,_,__,component,resourceSelectorFactory,selectorTpl){"use strict";var defaultConfig={title:__("Copy to"),description:__("Select a destination class"),actionName:__("Copy"),icon:"copy"};return function($container,config){var destinationSelector=component({update:function(results,params){this.resourceSelector&&this.resourceSelector.update(results,params)}},defaultConfig).setTemplate(selectorTpl).on("init",function(){this.render(
$container)}).on("render",function(){var self=this,$component=this.getElement(),$action=$(".action",$component);this.resourceSelector=resourceSelectorFactory($(".selector-container",$component),{selectionMode:"single",selectClass:!0,classUri:this.config.classUri,showContext:!1,showSelection:!1,preventSelection:this.config.preventSelection}),this.resourceSelector.spread(this,["query","error","update"]),this.resourceSelector.on("change",function(selected){selected&&0<_.size(selected)?$action.removeProp("disabled"):$action.prop("disabled",!0)}),$action.on("click",function(e){var uris,selection=self.resourceSelector.getSelection();e.preventDefault(),
_.isPlainObject(selection)&&(uris=_.pluck(selection,"uri")).length&&self.trigger("select",uris[0])})});return _.defer(function(){destinationSelector.init(config)}),destinationSelector}}),define("ui/dialog/confirm",["lodash","i18n","ui/dialog"],function(_,__,dialog){"use strict";return function(message,accept,refuse,options){var dialogOptions,dlg,accepted=!1,_options={buttons:{labels:{ok:__("Ok"),cancel:__("Cancel")}}};return dialogOptions={message:message,autoRender:!0,autoDestroy:!0,onOkBtn:function(){accepted=!0,_.isFunction(accept)&&accept.call(this)},buttons:{ok:{id:"ok",type:"info",label:(options=_.defaults(options||{},_options)).buttons.labels.ok||__(
"Ok"),close:!0},cancel:{id:"cancel",type:"regular",label:options.buttons.labels.cancel||__("Cancel"),close:!0}}},dlg=dialog(dialogOptions),_.isFunction(refuse)&&dlg.on("closed.modal",function(){accepted||refuse.call(this)}),dlg}}),define("ui/disabler",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";var ns="disabler",dataNs="ui."+ns,defaults={bindEvent:"click",disabledClass:"disabled"},Disabler={init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(
options.bindEvent,function(e){Disabler._toogle($elt),e.preventDefault()}),$elt.trigger("create."+ns))})},enable:function(){this.each(function(){Disabler._enable($(this))})},_enable:function($elt){var options=$elt.data(dataNs),$target=options.target;$target.removeClass(options.disabledClass).find(":input").prop("disabled",!1),$elt.trigger("enable."+ns,[$target]),$target.find(":input").andSelf().trigger("enable")},disable:function(){this.each(function(){Disabler._disable($(this))})},_disable:function($elt){var options=$elt.data(dataNs),$target=options.target;$target.addClass(options.disabledClass).find(":input").prop("disabled",!0),$elt.trigger("disable."+ns,[
$target]),$target.find(":input").andSelf().trigger("disable")},toggle:function(){this.each(function(){Disabler._toggle($(this))})},_toggle:function($elt){var options=$elt.data(dataNs);$elt.is(":radio,:checkbox")?$elt.prop("checked")?this._disable($elt):this._enable($elt):options.target.hasClass(options.disabledClass)?this._enable($elt):this._disable($elt)},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Disabler),function($container){new DataAttrHandler("disable",{container:$container,listenerEvent:"click",
namespace:dataNs}).init(function($elt,$target){$elt.disabler({target:$target,bindEvent:!1})}).trigger(function($elt){$elt.disabler("toggle")})}}),define("ui/documentViewer/viewerFactory",["lodash","core/promise","core/providerRegistry","core/delegator","ui/component"],function(_,Promise,providerRegistry,delegator,component){"use strict";var defaults={width:"auto",height:"auto",fitToWidth:!1,allowSearch:!1,caseSensitiveSearch:!1,highlightAllMatches:!1},mandatory=["load"];return providerRegistry(function viewerFactory(documentType,config){var viewer=viewerFactory.getProvider(documentType),documentViewer=component({getType:function(){return this.config.type},
getUrl:function(){return this.config.url}},defaults),delegate=delegator(documentViewer,viewer,{name:documentType+"Viewer",eventifier:!1,wrapper:function(response){return Promise.resolve(response)}});return _.isFunction(viewer.getTemplate)&&documentViewer.setTemplate(viewer.getTemplate()),documentViewer.on("init",function(){var self=this;delegate("init").then(function(){self.trigger("initialized")}).catch(function(err){self.trigger("error",err)})}).on("destroy",function(){var self=this;delegate("unload").then(function(){self.trigger("unloaded")}).catch(function(err){self.trigger("error",err)})}).on("render",function(){var self=this;delegate("load").then(
function(){self.trigger("loaded")}).catch(function(err){self.trigger("error",err)})}).on("setsize",function(width,height){var self=this;delegate("setSize",width,height).then(function(){self.trigger("resized",width,height)}).catch(function(err){self.trigger("error",err)})}).init(config)},function(provider){return _.each(mandatory,function(name){if(!_.isFunction(provider[name]))throw new TypeError("The viewer provider MUST implement the "+name+"() method!")}),!0})}),define("tpl!ui/documentViewer/documentViewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="document-viewer"></div>'})}),define("ui/documentViewer",["lodash","ui/component","ui/documentViewer/viewerFactory","tpl!ui/documentViewer/documentViewer"],function(_,component,viewerFactory,documentViewerTpl){"use strict";var defaults={width:"auto",height:"auto",fitToWidth:!1,allowSearch:!1,caseSensitiveSearch:!1,highlightAllMatches:!1};function documentViewerFactory(config){var documentType,documentUrl,viewer;return component({getType:function(){return documentType||null},getUrl:function(){return documentUrl||null},getViewer:function(){return viewer||null},load:function(url,type){
var self=this;if(_.isEmpty(url)||!_.isString(url))throw new TypeError("You must provide the URL of the document!");if(_.isEmpty(type)||!_.isString(type))throw new TypeError("You must provide a document type!");return viewer&&viewer.destroy(),documentUrl=url,viewer=viewerFactory(documentType=type,_.merge({type:documentType,url:documentUrl,replace:!0},_.pick(this.config,_.keys(defaults)))).on("loaded",function(){self.trigger("loaded",documentUrl,documentType)}).on("unloaded",function(){self.trigger("unloaded",documentUrl,documentType)}).on("resized",function(width,height){self.trigger("resized",width,height)}).on("error",function(err){self.trigger("error",err)
}),this.trigger("load",documentUrl,documentType),this.is("rendered")&&viewer.render(this.getElement()),this},unload:function(){return viewer&&viewer.destroy(),this.trigger("unload",documentUrl,documentType),documentUrl=documentType=viewer=null,this}},defaults).setTemplate(documentViewerTpl).on("init",function(){documentUrl=documentType=viewer=null}).on("destroy",function(){this.unload()}).on("render",function(){viewer&&viewer.render(this.getElement())}).on("setsize",function(width,height){viewer&&viewer.setSize(width,height)}).init(config)}return documentViewerFactory.registerProvider=function(type,provider){return viewerFactory.registerProvider(type,
provider),this},documentViewerFactory.clearProviders=function(){return viewerFactory.clearProviders(),this},documentViewerFactory}),define("tpl!ui/documentViewer/providers/pdfViewer/fallback/viewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},"<iframe ></iframe>"})}),define("ui/documentViewer/providers/pdfViewer/fallback/viewer",["jquery","core/promise","tpl!ui/documentViewer/providers/pdfViewer/fallback/viewer"],function($,Promise,viewerTpl){"use strict";return function($container){var template=viewerTpl()
,$viewer=null;return{load:function(url){return new Promise(function(resolve){($viewer=$container.html(template).find("iframe")).one("load.provider",resolve).attr("src",url)})},unload:function(){$container.empty(),$viewer=null},setSize:function(width,height){$viewer&&$viewer.width(width).height(height)}}}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/areaBroker",["lodash","core/areaBroker"],function(_,areaBroker){"use strict";return _.partial(areaBroker,["bar","actions","info","content"])}),define("tpl!ui/documentViewer/providers/pdfViewer/pdfjs/match",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<span class="highlight ',buffer+=escapeExpression((helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.cls)?helper.call(depth0,{hash:{},data:data}):helper)+'" data-match="',buffer+=escapeExpression((helper=helpers.index)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.index)?helper.call(depth0,{hash:{},data:data}):helper)+'">',buffer+=escapeExpression((helper=helpers.text)?helper.call(depth0,{hash:{},data:data}
):"function"==typeof(helper=depth0&&depth0.text)?helper.call(depth0,{hash:{},data:data}):helper)+"</span>\n"})}),define("ui/documentViewer/providers/pdfViewer/pdfjs/searchEngine",["lodash","tpl!ui/documentViewer/providers/pdfViewer/pdfjs/match"],function(_,matchTpl){"use strict";var charactersToNormalize={"":"'","":"'","":"'","":"'","":'"',"":'"',"":'"',"":'"',"":"1/4","":"1/2","":"3/4"},normalizationRegex=new RegExp("["+Object.keys(charactersToNormalize).join("")+"]","g");function normalizeSpecialChars(text){return text.replace(normalizationRegex,function(ch){return charactersToNormalize[ch]})}function highlight(text,index,cls){return matchTpl({
text:text,index:index,cls:cls}).trim()}function highlightInText(text,start,end,index,cls){return text.substring(0,start)+highlight(text.substring(start,end),index,cls)+text.substring(end)}function renderMatches(matches,pageContent,selectedMatch){var positions=function(matches,pageContent){var refinedMatches=[],textItems=pageContent.content.items,count=textItems.length,cursor=0,strPos=0;return _.forEach(matches,function(match,index){for(var matchStart=match[0],matchEnd=match[1],position={index:index};cursor<count&&matchStart>=strPos+textItems[cursor].str.length;)strPos+=textItems[cursor].str.length,cursor++;for(position.begin={node:cursor,
offset:matchStart-strPos};cursor<count&&matchEnd>strPos+textItems[cursor].str.length;)strPos+=textItems[cursor].str.length,cursor++;position.end={node:cursor,offset:matchEnd-strPos},refinedMatches.push(position)}),refinedMatches}(matches,pageContent),matchIndex=positions.length-1,nodes=pageContent.nodes,selected=matchIndex===selectedMatch;_.forEachRight(nodes,function(node,nodeIndex){for(var match,startInNode,endInNode,nodeInMatch,cls,nodeText=pageContent.content.items[nodeIndex].str;0<=matchIndex;){if(startInNode=(match=positions[matchIndex]).begin.node===nodeIndex,endInNode=match.end.node===nodeIndex,
nodeInMatch=nodeIndex>match.begin.node&&nodeIndex<match.end.node,cls=selected?" selected":"",startInNode&&endInNode)nodeText=highlightInText(nodeText,match.begin.offset,match.end.offset,match.index,cls),matchIndex--;else{if(!startInNode){if(endInNode){nodeText=highlightInText(nodeText,0,match.end.offset,match.index,"end"+cls);break}if(nodeInMatch){nodeText=highlight(nodeText,match.index,"middle"+cls);break}break}nodeText=highlightInText(nodeText,match.begin.offset,nodeText.length,match.index,"begin"+cls),matchIndex--}selected=matchIndex===selectedMatch}node.innerHTML=nodeText})}return function(config){var textManager=null,currentQuery=null,currentMatch=null,
matches=[],pages=[],count=0;if(textManager=(config=config||{}).textManager,!_.isPlainObject(textManager))throw new TypeError("You must provide a textManager to give access to the PDF text content! [config.textManager is missing]");return{getPages:function(){return pages},getMatches:function(){return matches},getMatchCount:function(){return count},clearMatches:function(){currentMatch=null,matches=[],pages=[],count=0},setTextManager:function(manager){textManager=manager},getTextManager:function(){return textManager},getQuery:function(){return currentQuery},getCurrentMatch:function(){return currentMatch},previousMatch:function(){var pageIndex,loop=!1
;return currentMatch&&(currentMatch.index?currentMatch.index--:(loop=!(pageIndex=_.indexOf(pages,currentMatch.page)),currentMatch.page=pages[(pageIndex+pages.length-1)%pages.length],currentMatch.index=matches[currentMatch.page-1].length-1),currentMatch.overall=(currentMatch.overall+count-2)%count+1),loop},nextMatch:function(){var pageIndex,loop=!1;return currentMatch&&(currentMatch.index+1<matches[currentMatch.page-1].length?currentMatch.index++:(loop=(pageIndex=_.indexOf(pages,currentMatch.page))===pages.length-1,currentMatch.page=pages[(pageIndex+1)%pages.length],currentMatch.index=0),currentMatch.overall=currentMatch.overall%count+1),loop},
search:function(query,pageNum){return matches=null,textManager.getContents().then(function(pageContents){var contentText=_.map(pageContents,"text"),firstPage=0,firstMatch=0;return matches=function(query,contentText,config){var normalizedQuery=normalizeSpecialChars(query);return config.caseSensitive||(normalizedQuery=normalizedQuery.toLowerCase()),_.times(contentText.length,function(pageIndex){var pageContent=normalizeSpecialChars(contentText[pageIndex]);return config.caseSensitive||(pageContent=pageContent.toLowerCase()),function(query,text){var index,queryLen=query.length,end=0,matches=[];if(queryLen)for(;end=(index=text.indexOf(query,end))+queryLen,
-1!==index&&matches.push([index,end]),-1!==index;);return matches}(normalizedQuery,pageContent)})}(query,contentText,config),currentQuery=query,currentMatch=null,pages=[],count=0,_.forEach(matches,function(pageMatches,pageIndex){var page=pageIndex+1;0<pageMatches.length&&(pages.push(page),!firstPage&&pageNum<=page&&(firstPage=page,firstMatch=count)),count+=pageMatches.length}),firstPage||(firstPage=pages[0]||0),firstPage&&(currentMatch={overall:firstMatch+1,page:firstPage,index:0}),firstPage})},updateMatches:function(pageNum){return textManager.getPageContent(pageNum).then(function(pageContent){var selectedMatch
;return currentMatch&&currentMatch.page===pageNum&&(selectedMatch=currentMatch.index),pageContent&&renderMatches(matches[pageNum-1],pageContent,selectedMatch),pageNum})},destroy:function(){config=pages=matches=currentMatch=currentQuery=textManager=null}}}}),define("tpl!ui/documentViewer/providers/pdfViewer/pdfjs/findBar",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;function program1(depth0,data){return"checked "
}return buffer+='<button class="small search" data-control="pdf-search" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Search",options):helperMissing.call(depth0,"__","Search",options)))+'"><span class="icon icon-find"></span></button>\n<div class="pdf-find-bar hidden">\n    <label for="pdf-search-query">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Search",options):helperMissing.call(depth0,"__","Search",options))
)+':</label>\n    <input type="text" id="pdf-search-query" data-control="pdf-search-query" placeholder="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Type your search",options):helperMissing.call(depth0,"__","Type your search",options)))+'"/>\n    <button class="small search" data-control="pdf-search-prev" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous match",options):helperMissing.call(depth0,"__","Previous match",options))
)+'"><span class="icon icon-left"></span></button>\n    <button class="small search" data-control="pdf-search-next" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next match",options):helperMissing.call(depth0,"__","Next match",options)))+'"><span class="icon icon-right"></span></button>\n    <input type="checkbox" id="highlight-all" data-control="highlight-all" value="1" ',((stack1=helpers.if.call(depth0,depth0&&depth0.highlightAll,{hash:{},inverse:this.noop,fn:this.program(1,program1,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='/><label for="highlight-all">'+escapeExpression((
options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Highlight all",options):helperMissing.call(depth0,"__","Highlight all",options)))+'</label>\n    <input type="checkbox" id="case-sensitive-search" data-control="case-sensitive-search" value="1" ',((stack1=helpers.if.call(depth0,depth0&&depth0.caseSensitive,{hash:{},inverse:this.noop,fn:this.program(1,program1,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='/><label for="case-sensitive-search">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Case sensitive",options):helperMissing.call(depth0,"__",
"Case sensitive",options)))+'</label>\n    <span class="pdf-search-info" data-control="pdf-search-info">\n        <span class="pdf-search-position hidden" data-control="pdf-search-position">\n            <span class="pdf-search-index" data-control="pdf-search-index"></span>/<span class="pdf-search-count" data-control="pdf-search-count"></span>\n        </span>\n        <span class="pdf-search-loop hidden" data-control="pdf-search-loop-begin">\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"End of document reached. Continuing from the beginning.",options):helperMissing.call(depth0,"__",
"End of document reached. Continuing from the beginning.",options)))+'\n        </span>\n        <span class="pdf-search-loop hidden" data-control="pdf-search-loop-end">\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Start of document reached. Continuing from the end.",options):helperMissing.call(depth0,"__","Start of document reached. Continuing from the end.",options)))+"\n        </span>\n    </span>\n</div>\n"})}),define("ui/documentViewer/providers/pdfViewer/pdfjs/findBar",["jquery","lodash","ui/autoscroll","ui/hider","ui/documentViewer/providers/pdfViewer/pdfjs/searchEngine",
"tpl!ui/documentViewer/providers/pdfViewer/pdfjs/findBar"],function($,_,autoscroll,hider,searchEngineFactory,findBarTpl){"use strict";function toggleState($element,enabled){enabled?$element.removeAttr("disabled"):$element.attr("disabled",!0)}return function(config){var controls,$container,throttledSearchStart=_.throttle(function(){var typedQuery=controls.$searchQuery.val();typedQuery!==query&&(query=typedQuery,navigating=!0,doSearch())},250),events=null,broker=null,searchEngine=null,query=null,pageNum=0,enabled=!0,loopBegin=!1,loopEnd=!1,navigating=!1;function doSearch(){loopEnd=loopBegin=!1,query?searchEngine&&(events.trigger("searching",query),
searchEngine.search(query,pageNum).then(function(page){events.trigger("searchdone",query,page),page?jumpTo(page):refresh()}).catch(function(err){events.trigger("error",err)})):(searchEngine&&searchEngine.clearMatches(),refresh()),updateControls()}function jumpTo(page){events.trigger("setpage",page)}function refresh(){events.trigger("refresh")}function matchUpdated(page){navigating&&(navigating=!1,broker&&searchEngine&&autoscroll(getSelectectMatchElement(),broker.getContentArea())),updateControls(),events.trigger("matchesupdated",page)}function jumpToMatch(){var match;searchEngine&&(match=searchEngine.getCurrentMatch())&&(navigating=!0,
pageNum!==match.page?jumpTo(match.page):function(){var match;broker&&searchEngine&&(getSelectectMatchElement().removeClass("selected"),(match=searchEngine.getCurrentMatch(),broker.getContentArea().find('[data-match="'+match.index+'"]')).addClass("selected"),matchUpdated(pageNum))}())}function moveBy(direction){loopEnd=loopBegin=!1,searchEngine&&(direction<0?loopEnd=searchEngine.previousMatch():loopBegin=searchEngine.nextMatch(),jumpToMatch()),updateControls(),focusOnInput()}function getSelectectMatchElement(){return broker.getContentArea().find(".highlight.selected")}function focusOnInput(){controls.$searchQuery.focus()}function readCaseSensitiveOption(){
config.caseSensitive=controls.$caseSensitive.is(":checked")}function applyHighlightAllOption(){broker&&broker.getContentArea().toggleClass("highlight-all",controls.$highlightAll.is(":checked"))}function updateControls(){var match,matchCount=0,matchIndex=0;searchEngine&&(matchCount=searchEngine.getMatchCount(),matchIndex=(match=searchEngine.getCurrentMatch())&&match.overall),enabled||hider.isHidden(controls.$searchBar)||hider.hide(controls.$searchBar),toggleState(controls.$searchButton,enabled),toggleState(controls.$searchQuery,enabled),toggleState(controls.$caseSensitive,enabled),toggleState(controls.$highlightAll,enabled),toggleState(controls.$prevMatch,
enabled&&1<matchCount),toggleState(controls.$nextMatch,enabled&&1<matchCount),controls.$matchIndex.text(matchIndex),controls.$matchCount.text(matchCount),hider.toggle(controls.$searchPosition,enabled&&0<matchCount),hider.toggle(controls.$searchLoopBegin,enabled&&loopBegin),hider.toggle(controls.$searchLoopEnd,enabled&&loopEnd)}if(config=config||{},!_.isPlainObject(config.events))throw new TypeError("You must provide an events hub! [config.events is missing]");if(!_.isPlainObject(config.areaBroker))throw new TypeError("You must provide an areaBroker to give access to the UI! [config.areaBroker is missing]");if(!_.isPlainObject(config.textManager)
)throw new TypeError("You must provide a textManager to give access to the PDF text content! [config.textManager is missing]");return searchEngine=searchEngineFactory(config),broker=config.areaBroker,events=config.events,broker.getActionsArea().prepend(findBarTpl(config)),$container=broker.getBarArea(),controls={$searchBar:$(".pdf-find-bar",$container),$searchButton:$('[data-control="pdf-search"]',$container),$searchQuery:$('[data-control="pdf-search-query"]',$container),$prevMatch:$('[data-control="pdf-search-prev"]',$container),$nextMatch:$('[data-control="pdf-search-next"]',$container),$caseSensitive:$('[data-control="case-sensitive-search"]',$container),
$highlightAll:$('[data-control="highlight-all"]',$container),$matchIndex:$('[data-control="pdf-search-index"]',$container),$matchCount:$('[data-control="pdf-search-count"]',$container),$searchPosition:$('[data-control="pdf-search-position"]',$container),$searchLoopBegin:$('[data-control="pdf-search-loop-begin"]',$container),$searchLoopEnd:$('[data-control="pdf-search-loop-end"]',$container)},readCaseSensitiveOption(),applyHighlightAllOption(),controls.$searchButton.on("click",function(){hider.toggle(controls.$searchBar),hider.isHidden(controls.$searchBar)||focusOnInput()}),controls.$prevMatch.on("click",function(){moveBy(-1)}),controls.$nextMatch.on("click",
function(){moveBy(1)}),controls.$caseSensitive.on("change",function(){navigating=!0,readCaseSensitiveOption(),doSearch(),focusOnInput()}),controls.$highlightAll.on("change",function(){applyHighlightAllOption(),focusOnInput()}),controls.$searchQuery.on("keypress",function(event){switch(event.keyCode){case 27:hider.hide(controls.$searchBar);break;default:throttledSearchStart()}}),events.on("enable.findbar",function(){enabled=!0,updateControls()}).on("disable.findbar",function(){enabled=!1,updateControls()}).on("pagechange.findbar",function(page){pageNum=page,updateControls()}).on("allrendered.findbar",function(page){(function(page){
var textManager=searchEngine&&searchEngine.getTextManager();textManager&&textManager.getDocument()&&(events.trigger("matchesupdating",page),searchEngine.updateMatches(page).then(matchUpdated))})(pageNum=page),updateControls()}).trigger("init.findbar"),{getSearchEngine:function(){return searchEngine},destroy:function(){searchEngine&&searchEngine.destroy(),controls.$searchButton&&controls.$searchButton.remove(),controls.$searchBar&&controls.$searchBar.remove(),controls={},broker=searchEngine=config=null,events.trigger("destroy.findbar"),events.off(".findbar"),events=null}}}}),define("tpl!ui/documentViewer/providers/pdfViewer/pdfjs/page",["handlebars"],
function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="pdf-page hidden" data-page="',buffer+=(0,this.escapeExpression)((helper=helpers.page)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.page)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    <canvas class="pdf-content"></canvas>\n    <div class="pdf-text"></div>\n</div>\n'})}),define("ui/documentViewer/providers/pdfViewer/pdfjs/pageView",["jquery","core/promise","ui/hider",
"tpl!ui/documentViewer/providers/pdfViewer/pdfjs/page"],function($,Promise,hider,pageTpl){"use strict";var DEFAULT_SCALE=1,MIN_SCALE=.25,MAX_SCALE=10;return function($container,config){var $pageView,$textLayer,$drawLayer,canvas,context,scale,pageNum,textManager=null,rendered=!1,view={get pageNum(){return pageNum},set pageNum(num){pageNum=parseInt(num,10),$pageView.attr("data-page",num)},isRendered:function(){return rendered},getContainer:function(){return $container},getElement:function(){return $pageView},getDrawLayerElement:function(){return $drawLayer},getTextLayerElement:function(){return $textLayer},getCanvas:function(){return canvas},
getRenderingContext:function(){return context},setTextManager:function(manager){textManager=manager},getTextManager:function(){return textManager},render:function(page,fitToWidth){var viewport,textViewport,renderContext,promises=[],renderScale=scale*(96/72);return rendered=!1,viewport=page.getViewport(renderScale),renderContext={canvasContext:view.getRenderingContext(),viewport:viewport},function(viewport,fitToWidth){var width,height,ratio=viewport.width/(viewport.height||1)||1,parentWidth=$container.width(),parentHeight=$container.height(),parentOffset=$container.offset();function setSize(w,h){$pageView.width(w).height(h).offset({
left:parentOffset.left+Math.max(0,(parentWidth-w)/2)}),$drawLayer.width(w).height(h),$textLayer.width(w).height(h)}fitToWidth?parentHeight<(height=(width=parentWidth)/ratio)&&(setSize(Math.max(1,parentWidth/2),height),parentWidth=$container.prop("scrollWidth"),height=(width=parentWidth)/ratio):1<=ratio?(height=Math.min(parentHeight,parentWidth/ratio),width=Math.min(parentWidth,height*ratio)):(width=Math.min(parentWidth,parentHeight*ratio),height=Math.min(parentHeight,width/ratio)),setSize(width,height),canvas.width=viewport.width,canvas.height=viewport.height}(viewport,fitToWidth),promises.push(page.render(renderContext).promise),textManager&&(
$textLayer.empty(),textViewport=viewport.clone({scale:renderScale*$textLayer.width()/viewport.width}),promises.push(textManager.renderPage(page.pageIndex+1,textViewport).then(function(renderedContent){$textLayer&&$textLayer.append(renderedContent)}))),Promise.all(promises).then(function(){rendered=!0})},show:function(){hider.show($pageView)},hide:function(){hider.hide($pageView)},destroy:function(){$pageView.remove(),config=textManager=context=canvas=$drawLayer=$textLayer=$pageView=$container=null}};return textManager=(config=config||{}).textManager,pageNum=config.pageNum,$pageView=$(pageTpl({page:pageNum})),$textLayer=$pageView.find(".pdf-text"),
$drawLayer=$pageView.find("canvas"),canvas=$drawLayer.get(0),context=canvas.getContext("2d"),scale=function(scale){return Math.min(Math.max(MIN_SCALE,parseInt(scale,10)||DEFAULT_SCALE),MAX_SCALE)}(function(context){return(window.devicePixelRatio||1)/(context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||1)}(context)*DEFAULT_SCALE),$container.append($pageView),view}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/pagesManager",["lodash","core/promise","ui/documentViewer/providers/pdfViewer/pdfjs/pageView"],function(_,Promise,
pageViewFactory){"use strict";return function($container,config){var pageCount,activeView=null,textManager=null,views=null,pagesManager={get pageCount(){return pageCount},getContainer:function(){return $container},setTextManager:function(manager){textManager=manager,_.forEach(views,function(view){view&&view.setTextManager(manager)})},getTextManager:function(){return textManager},getView:function(pageNum){var index,view;return pageNum=Math.min(Math.max(1,parseInt(pageNum,10)||1),pageCount),(view=views[index=pageNum-1])||(views[index]=view=pageViewFactory($container,{pageNum:pageNum,textManager:textManager})),view},getActiveView:function(){return activeView},
setActiveView:function(page){var oldActiveView=activeView;activeView=pagesManager.getView(page),oldActiveView&&oldActiveView!==activeView&&oldActiveView.hide(),activeView&&(activeView.pageNum=page,activeView.show())},renderPage:function(page,fitToWidth){return activeView?activeView.render(page,fitToWidth):Promise.resolve()},destroy:function(){_.forEach(views,function(view){view&&view.destroy()}),config=views=textManager=activeView=$container=null}};return textManager=(config=config||{}).textManager,pageCount=Math.max(1,parseInt(config.pageCount,10)||1),views=new Array(pageCount),pagesManager}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/textManager"
,["lodash","core/promise"],function(_,Promise){"use strict";return function(config){var pdfDoc=null,PDFJS=null,pageContents=null,textRenderTasks=null;function cancelRenderingTask(pageIndex){textRenderTasks&&textRenderTasks[pageIndex]&&(textRenderTasks[pageIndex].cancel(),textRenderTasks[pageIndex]=null)}function cancelAllRenderingTasks(){var pageIndex;if(textRenderTasks)for(pageIndex=textRenderTasks.length;pageIndex--;)cancelRenderingTask(pageIndex)}function getTextContent(){var numPages=pdfDoc.numPages,promises=[];return _.times(numPages,function(pageIndex){var pageNum;promises.push((pageNum=pageIndex+1,pdfDoc.getPage(pageNum).then(function(page){
return page.getTextContent({normalizeWhitespace:!0})})).then(function(textContent){var strings=_.map(textContent.items,"str");return{content:textContent,strings:strings,text:strings.join(""),nodes:[]}}))}),Promise.all(promises)}if(PDFJS=(config=config||{}).PDFJS,!_.isPlainObject(PDFJS))throw new TypeError("You must provide the entry point to the PDF.js library! [config.PDFJS is missing]");return{setDocument:function(doc){cancelAllRenderingTasks(),pdfDoc=doc,pageContents=null},getDocument:function(){return pdfDoc},getContents:function(){return pdfDoc?(numPages=pdfDoc.numPages,pageContents?Promise.resolve(pageContents):getTextContent().then(function(content){
return textRenderTasks=new Array(numPages),pageContents=content})):Promise.reject(new Error("You must assign a document to get the content from!"));var numPages},getText:function(){return this.getContents().then(function(content){return _.map(content,"text")})},getFullText:function(){return this.getContents().then(function(content){return _.map(content,"text").join(" ")})},getPageContent:function(pageNum){return this.getContents().then(function(content){return content[Math.min(Math.max(0,pageNum-1),content.length-1)]})},getPageText:function(pageNum){return this.getContents().then(function(content){return content[Math.min(Math.max(0,pageNum-1),
content.length-1)].text})},renderPage:function(pageNum,viewport,timeout){return this.getContents().then(function(content){var pageIndex=Math.min(Math.max(0,pageNum-1),content.length-1),pageContent=content[pageIndex],textLayerFrag=document.createDocumentFragment();return cancelRenderingTask(pageIndex),pageContent.nodes=[],textRenderTasks[pageIndex]=PDFJS.renderTextLayer({textContent:pageContent.content,textDivs:pageContent.nodes,container:textLayerFrag,viewport:viewport,timeout:timeout}),textRenderTasks[pageIndex].promise.then(function(){return textRenderTasks[pageIndex]=null,textLayerFrag},function(){textRenderTasks[pageIndex]=null})})},destroy:function(){
cancelAllRenderingTasks(),config=pageContents=PDFJS=pdfDoc=null}}}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/wrapper",["lodash","core/promise","ui/documentViewer/providers/pdfViewer/pdfjs/pagesManager","ui/documentViewer/providers/pdfViewer/pdfjs/textManager"],function(_,Promise,pagesManagerFactory,textManagerFactory){"use strict";var BASE64_MARKER=";base64,";function processUri(uri){var base64Index;return 0<=(base64Index=(uri=String(uri)).indexOf(BASE64_MARKER))?function(data){for(var raw=window.atob(data),rawLength=raw.length,array=new Uint8Array(new ArrayBuffer(rawLength));rawLength--;)array[rawLength]=raw.charCodeAt(rawLength);return array}(
uri.substring(base64Index+BASE64_MARKER.length)):uri}return function($container,config){var pdfDoc=null,pageNum=1,pageCount=1,pageNumPending=null,pageRendering=null,pagesManager=null,textManager=null,states={},PDFJS=null,events=null,wrapper={get wrapped(){return PDFJS},load:function(url){return pdfDoc=null,states={},events.trigger("loading",url),PDFJS.getDocument(processUri(url)).then(function(doc){states.destroyed||(pageNum=1,pageCount=(pdfDoc=doc).numPages,textManager.setDocument(pdfDoc),states.loaded=!0,events.trigger("loaded",url))})},renderPage:function(num){return pdfDoc?(pageRendering?pageNumPending=num:(events.trigger("rendering",num),
states.rendered=!1,states.rendering=!0,pageRendering=pdfDoc.getPage(num).then(function(page){if(pagesManager)return pagesManager.renderPage(page,config.fitToWidth).then(function(){var nextPage=pageNumPending;if(pageRendering=pageNumPending=null,!states.destroyed){if(states.rendered=!0,states.rendering=!1,events.trigger("rendered",num),null!==nextPage)return wrapper.renderPage(nextPage);events.trigger("allrendered",num)}})})),pageRendering):Promise.resolve(num)},getState:function(name){return!!states[name]},getDocument:function(){return pdfDoc},getPageCount:function(){return pageCount},getPage:function(){return pageNum},setPage:function(page){
return pageNum=Math.min(Math.max(1,page||0),pageCount),pagesManager.setActiveView(pageNum),events.trigger("pagechange",pageNum),wrapper.renderPage(pageNum)},getTextManager:function(){return textManager},getPagesManager:function(){return pagesManager},refresh:function(){return events.trigger("refreshing",pageNum),pagesManager.setActiveView(pageNum),wrapper.renderPage(pageNum)},destroy:function(){pagesManager&&pagesManager.destroy(),textManager&&textManager.destroy(),pdfDoc&&pdfDoc.destroy(),states={destroyed:!0},config=PDFJS=$container=pagesManager=pageRendering=pageNumPending=pdfDoc=null,events.trigger("destroy.wrapper"),events=null}};if(PDFJS=(
config=config||{}).PDFJS,events=config.events,!_.isPlainObject(PDFJS))throw new TypeError("You must provide the entry point to the PDF.js library! [config.PDFJS is missing]");if(!_.isPlainObject(events))throw new TypeError("You must provide an events hub! [config.events is missing]");return textManager=textManagerFactory({PDFJS:PDFJS}),pagesManager=pagesManagerFactory($container,{pageCount:1,textManager:textManager}),events.on("setpage.wrapper",function(page){wrapper.setPage(page)}).on("refresh.wrapper",function(){wrapper.refresh()}).trigger("init.wrapper"),wrapper}}),define("tpl!ui/documentViewer/providers/pdfViewer/pdfjs/viewer",["handlebars"],function(hb
){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="pdf-bar">\n    <div class="pdf-actions">\n        <button class="small navigation" data-control="pdf-page-prev" data-direction="-1" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous page",options):helperMissing.call(depth0,"__","Previous page",options))
)+'"><span class="icon icon-step-backward"></span><span class="text">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+'</span></button>\n        <button class="small navigation" data-control="pdf-page-next" data-direction="1" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next page",options):helperMissing.call(depth0,"__","Next page",options)))+'"><span class="icon icon-step-forward"></span><span class="text">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+"</span></button>\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.fitToWidth,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var helper,options,buffer="";return buffer+='\n        <input type="checkbox" id="fit-to-width" data-control="fit-to-width" value="1" checked /> <label for="fit-to-width">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Fit to width",options):helperMissing.call(depth0,"__","Fit to width",options)))+"</label>\n        "},data),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="pdf-info">\n        <label for="pdf-page-num">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Page",options):helperMissing.call(depth0,"__","Page",options)))+':</label>\n        <input class="info" id="pdf-page-num" data-control="pdf-page-num" value="1" />\n        <label>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options))
)+'</label>\n        <span class="info" data-control="pdf-page-count">1</span>\n    </div>\n</div>\n<div class="pdf-container"></div>\n'})}),define("ui/documentViewer/providers/pdfViewer/pdfjs/viewer",["jquery","lodash","core/eventifier","ui/documentViewer/providers/pdfViewer/pdfjs/areaBroker","ui/documentViewer/providers/pdfViewer/pdfjs/findBar","ui/documentViewer/providers/pdfViewer/pdfjs/wrapper","tpl!ui/documentViewer/providers/pdfViewer/pdfjs/viewer"],function($,_,eventifier,areaBroker,findBarFactory,wrapperFactory,viewerTpl){"use strict";function toggleState($element,enabled){enabled?$element.removeAttr("disabled"):$element.attr("disabled",!0)}
return function($container,config){var template=viewerTpl(config),events=eventifier(),controls={},broker=null,findBar=null,pdfConfig=null,pdf=null,PDFJS=null,enabled=!0;function updateControls(){var page=pdf.getPage(),pageCount=pdf.getPageCount();page!==parseInt(controls.$pageNum.val(),10)&&controls.$pageNum.val(page),toggleState(controls.$pagePrev,enabled&&1<page),toggleState(controls.$pageNext,enabled&&page<pageCount),toggleState(controls.$pageNum,enabled&&1<pageCount)}function disable(){events.trigger("disable")}function jumpPage(page){events.trigger("setpage",page)}function movePage(step){jumpPage(pdf.getPage()+step)}if(PDFJS=(config=config||{}).PDFJS,
pdfConfig=_.merge({events:events},_.pick(config,["PDFJS","fitToWidth"])),!_.isPlainObject(PDFJS))throw new TypeError("You must provide the entry point to the PDF.js library! [config.PDFJS is missing]");return{load:function(url){return $container.html(template),PDFJS.PDFJS.disableRange=!0,events.on("enable",function(){enabled=!0,updateControls()}).on("disable",function(){enabled=!1,updateControls()}).on("loaded",function(){controls.$pageCount.html(pdf.getPageCount()),events.trigger("enable")}).on("pagechange rendered",function(){updateControls()}),broker=areaBroker($container,{bar:$(".pdf-bar",$container),actions:$(".pdf-actions",$container),info:$(
".pdf-info",$container),content:$(".pdf-container",$container)}),controls={$navigation:$container.find(".navigation"),$pagePrev:$container.find('[data-control="pdf-page-prev"]'),$pageNext:$container.find('[data-control="pdf-page-next"]'),$pageNum:$container.find('[data-control="pdf-page-num"]'),$pageCount:$container.find('[data-control="pdf-page-count"]'),$fitToWidth:$container.find('[data-control="fit-to-width"]')},pdf=wrapperFactory(broker.getContentArea(),pdfConfig),config.allowSearch&&(findBar=findBarFactory({events:events,areaBroker:broker,textManager:pdf.getTextManager(),caseSensitive:config.caseSensitiveSearch,highlightAll:config.highlightAllMatches})
),this.setSize($container.width(),$container.height()),controls.$fitToWidth.on("change",function(){pdfConfig.fitToWidth=controls.$fitToWidth.is(":checked"),events.trigger("refresh")}),controls.$navigation.on("click",function(){movePage(parseInt($(this).data("direction"),10)||1)}),controls.$pageNum.on("change",function(){jumpPage(parseInt(controls.$pageNum.val(),10)||pdf.getPage())}).on("keydown",function(event){switch(event.keyCode){case 38:movePage(1),event.stopPropagation(),event.preventDefault();break;case 40:movePage(-1),event.stopPropagation(),event.preventDefault()}}),disable(),pdf.load(url)},unload:function(){disable(),findBar&&findBar.destroy(),
pdf&&pdf.destroy(),events.removeAllListeners(),$container.empty(),controls={},broker=findBar=pdf=pdfConfig=null},setSize:function(width,height){var contentHeight,$bar,$content;if(pdf)return $bar=broker.getBarArea(),$content=broker.getContentArea(),contentHeight=height-$bar.outerHeight(),$bar.width(width),$content.width(width).height(contentHeight),events.trigger("resized",width,height,contentHeight),pdf.refresh()}}}}),define("tpl!ui/documentViewer/providers/pdfViewer/viewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),
data=data||{},'<div class="pdf-viewer"></div>'})}),define("ui/documentViewer/providers/pdfViewer",["lodash","core/requireIfExists","ui/documentViewer/providers/pdfViewer/fallback/viewer","ui/documentViewer/providers/pdfViewer/pdfjs/viewer","tpl!ui/documentViewer/providers/pdfViewer/viewer"],function(_,requireIfExists,fallbackFactory,pdfjsFactory,viewerTpl){"use strict";return{getTemplate:function(){return viewerTpl},init:function(){this.pdf=null},load:function(){var self=this,$element=this.getElement();return requireIfExists("pdfjs-dist/build/pdf").then(function(pdfjs){var config=_.clone(self.config);return self.pdf=pdfjs?(config.PDFJS=pdfjs,pdfjsFactory(
$element,config)):fallbackFactory($element,config),self.pdf.load(self.getUrl())}).then(function(){self.setSize($element.width(),$element.height())})},unload:function(){this.pdf&&this.pdf.unload(),this.is("rendered")&&this.getElement().empty(),this.pdf=null},setSize:function(width,height){this.pdf&&this.pdf.setSize(width,height)}}}),define("ui/durationer",["jquery","lodash","i18n","core/pluginifier","handlebars","moment"],function($,_,__,Pluginifier,Handlebars,moment){"use strict";var ns="durationer",dataNs="ui."+ns,defaults={format:"HH:mm:ss",separator:":",wrapperClass:"duration-ctrl-wrapper",ctrlClass:"duration-ctrl",disableClass:"disabled",title:{hours:__(
"hours"),minutes:__("minutes"),seconds:__("seconds")}},fieldTmpl=Handlebars.compile("<input type='text' id='{{id}}-{{type}}' data-duration-type='{{type}}' class='{{ctrlClass}}' value='{{value}}' title='{{title}}' />"),Durationer={init:function(options){var self=Durationer;return options=_.defaults(options||{},defaults),this.each(function(){var $elt=$(this);if(!$elt.data(dataNs))if($elt.is('input[type="text"]')){options.id=$elt.attr("id")||$elt.attr("name")||"durationer-"+(new Date).getTime();var duration=moment($elt.val(),options.format);$elt.hide(),self._insertField($elt,options,duration.hours(),"hours"),self._insertField($elt,options,duration.minutes(),
"minutes"),self._insertField($elt,options,duration.seconds(),"seconds"),options.separator&&$elt.siblings("."+options.wrapperClass+":not(:last)").after('<span class="separator">:</span>'),options.$ctrls=$elt.siblings("."+options.wrapperClass).children("input"),options.$ctrls.on("change",function(){self._syncToField($elt)}),$elt.on("change",function(e){e.namespace!==ns&&self._syncFromField($elt)}),$elt.data(dataNs,options),$elt.trigger("create."+ns)}else $.error("The durationer plugin applies only on input element of type text")})},_insertField:function($elt,options,value,type){var data=_.defaults({type:type,value:value,title:options.title[type]},options);$(
fieldTmpl(data)).insertBefore($elt).val(value).incrementer({min:0,max:"hours"===type?23:59,incrementerWrapperClass:options.wrapperClass})},_syncFromField:function($elt){var options=$elt.data(dataNs),current=moment($elt.val(),options.format);options.$ctrls.each(function(){var $field=$(this);current[$field.data("duration-type")]&&$field.val(current[$field.data("duration-type")]())})},_syncToField:function($elt){var options=$elt.data(dataNs),current=moment($elt.val(),options.format);options.$ctrls.each(function(){var $field=$(this);!isNaN($field.val())&&current[$field.data("duration-type")]&&current[$field.data("duration-type")]($field.val())}),$elt.val(
current.format(options.format)),$elt.trigger("update."+ns).trigger("change")},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.siblings("."+options.wrapperClass).remove(),$elt.siblings(".separator").remove(),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Durationer),function($container){$container.find("[data-duration]").each(function(){var $elt=$(this),format=$elt.data("duration"),options=0<$.trim(format).length?{format:format}:{};$elt.durationer(options)})}}),define("ui/filesender",["jquery","lodash","layout/logout-event"],function($,_,logoutEvent){"use strict";var FileSender={
_opts:{frame:"__postFrame_",loaded:function(data){}},_init:function(options){var xhr,fd,self=FileSender,opts=_.defaults(options,self._opts),xhr2="undefined"!=typeof XMLHttpRequest&&(new XMLHttpRequest).upload&&"undefined"!=typeof FormData,fileParamName=options.fileParamName||"content",fileNameParamName=options.fileNameParamName||"contentName";if(!(this.attr("action")||opts.url&&0!==opts.url.trim().length))throw new Error("An url is required in the options or at least an action ");if(0===this.find("input[type='file']").length)throw new Error("This plugin is used to post files, your form should include an input element of type file.");if(!this||!this.is("form"
))throw new Error("This plugin can only be called on a FORM element");xhr2&&(xhr=new XMLHttpRequest,fd=new FormData(this[0]),options.file&&options.file instanceof File&&(fd.append(fileParamName,options.file),fd.append(fileNameParamName,encodeURIComponent(options.file.name))),xhr.open("POST",opts.url,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.onreadystatechange=function(){if(4===xhr.readyState)if(200===xhr.status){var result=$.parseJSON(xhr.responseText);result.error?"function"==typeof opts.failed&&opts.failed(result.error):"function"==typeof opts.loaded&&opts.loaded(result)}else 403===xhr.status&&logoutEvent(),
"function"==typeof opts.failed&&opts.failed()},xhr.send(fd))}};$.fn.sendfile=function(options){return FileSender._init.call(this,options)}}),define("tpl!ui/filter/template",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+="<div>\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer=""
;return buffer+='\n    <label class="form_desc">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</label>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="item-filter"></div>\n</div>'})}),define("ui/selecter",["jquery","select2"],function($){"use strict";return function($container){$("select.select2",$container).each(function(){var $elt=$(this),hasSearch=!(!1===$elt.data("has-search")),hasPlaceholder=!(!$elt.attr("placeholder")&&!$elt.data("placeholder")),
widthMethod=$elt.data("width")||"resolve",hasSelectedIndex=function(options){for(var i=options.length,selected=!1;i--;)if("string"==typeof options[i].getAttribute("selected")){selected=!0;break}return selected}(this.options),settings={width:widthMethod};hasPlaceholder&&this.options[0]&&this.options[0].text&&($elt.prepend("<option>"),hasSelectedIndex||(this.selectedIndex=this.options[0])),hasSearch||(settings.minimumResultsForSearch=-1),$elt.select2(settings)})}}),define("ui/filter",["jquery","lodash","i18n","core/eventifier","tpl!ui/filter/template","ui/selecter"],function($,_,__,eventifier,filterTpl){"use strict";var defaults={placeholder:__(
"Filter by value"),width:300,minimumResultsForSearch:10,minimumInputLength:3,enable:!0,quietMillis:2e3,label:!1};return function($container,options){var selected={uri:"",code:"",name:""};return options=_.defaults(options||{},defaults),eventifier({render:function(format){var self=this,$component=$(filterTpl(options)),$list=$(".item-filter",$component);return $list.select2({placeholder:options.placeholder,allowClear:!0,width:options.width,minimumResultsForSearch:options.minimumResultsForSearch,minimumInputLength:options.minimumInputLength,maximumInputLength:200,formatResult:_.isFunction(options.formatter)?options.formatter:function(data){return _.template(
format)(data)},ajax:{quietMillis:options.quietMillis,data:function(term,page){return{q:term,page:page}},transport:function(params){self.trigger("request",params)},results:function(data,page){var more=25*page<data.total;return{results:data.items,more:more}},cache:!0}}),$list.select2("enable",options.enable),$list.on("change.select2",function(){selected=$list.select2("data"),self.trigger("change",selected&&selected.uri?selected.uri:"")}),$container.append($component),this},enable:function(){$(".item-filter",$container).select2("enable",!0)},disable:function(){$(".item-filter",$container).select2("enable",!1)},getSelected:function(){return selected},
reset:function(){$(".item-filter",$container).select2("val","")},destroy:function(){var $list=$(".item-filter",$container);return $list.select2("destroy"),$list.remove(),this.trigger("destroy"),this}})}}),define("ui/form",["jquery"],function($){"use strict";return function($container){var selector=$container.selector||".tao-scope";!function(selector){$(document).on("click",selector+" .pseudo-label-box",function(e){e.preventDefault();var $box=$(this),$radios=$box.find("input:radio").not("[disabled]").not(".disabled"),$checkboxes=$box.find("input:checkbox").not("[disabled]").not(".disabled");$radios.length&&($radios.not(":checked").prop("checked",!0),
$radios.trigger("change")),$checkboxes.length&&($checkboxes.prop("checked",!$checkboxes.prop("checked")),$checkboxes.trigger("change"))})}(selector),function(selector){$(document).on("click",selector+" .disabled, "+selector+" :disabled",function(e){return e.preventDefault(),!1})}(selector)}}),define("ui/validator",["jquery","lodash","core/validator/Report","core/validator/Validator"],function($,_,Report,Validator){"use strict";function isCreated($elt){return"object"==typeof $elt.data("validator-config")}$.fn.validator=function(options,arg1,arg2){var ret,opts={},method="",args=[];return"object"==typeof options?opts=$.extend({},$.fn.validator.defaults,options
):void 0===options?opts=$.extend({},$.fn.validator.defaults):"string"==typeof options&&"function"==typeof methods[options]&&(method=options,args=Array.prototype.slice.call(arguments,1)),this.each(function(){var $this=$(this);isCreated($this)||create($this,opts),method&&(isCreated($this)?ret=methods[method].apply($(this),args):$.error("call of method of validator when it is not initialized"))}),void 0===ret?this:ret},$.fn.validator.defaults={allowEmpty:!1,validator:{lazy:!1}};var methods={destroy:function(){destroy($(this))},validate:function(arg1,arg2){var callback,options={};_.isFunction(arg1)?callback=arg1:_.isObject(arg1)&&(_.merge(options,arg1),
_.isFunction(arg2)&&(callback=arg2)),validate($(this),callback,options)},getValidator:function(){return $(this).data("validator-instance")}},tokenize=function(inputStr){var ret=[],tokens=inputStr.split(/;/);return _.each(tokens,function(token){token=$.trim(token);var key,options={},rightStr=token.replace(/\$(\w*)/,function($0,k){return key=k,""});if(key){var optionsStr=rightStr.replace(/^\((.*)\)$/,"$1");(optionsStr=optionsStr.replace(/(\w+)=((\"(\\.|[^\"])*\")|(\'(\\.|[^\'])*\')),?/g,function($0,optionName,optionValue){return optionValue=optionValue.replace(/^["'](.*)["']$/g,"$1"),options[optionName]=optionValue,""})).replace(/(\w*)=([^\s]*)(,)?/g,function(
$0,optionName,optionValue){","===optionValue.charAt(optionValue.length-1)&&(optionValue=optionValue.substring(0,optionValue.length-1)),options[optionName]=optionValue}),ret.push({name:key,options:options})}}),ret},create=function($elt,options){if(!isCreated($elt)){var rules=function($elt){var rulesStr=$elt.data("validate");return rulesStr?tokenize(rulesStr):{}}($elt);options.rules&&(rules=_.merge(rules,options.rules),delete options.rules),options=_.merge(options,function($elt){var optionsStr=$elt.data("validate-option"),optionsArray=optionsStr?tokenize(optionsStr):{},availableCoreValidatorOptions=_.keys(Validator.getDefaultOptions()),options=_.clone(
$.fn.validator.defaults);return _.each(optionsArray,function(optionArray){0<=_.indexOf(availableCoreValidatorOptions,optionArray.name)?options.validator[optionArray.name]=optionArray.options:options[optionArray.name]=optionArray.options}),options}($elt)||{}),$elt.data("validator-config",_.clone(options)),createValidator($elt,rules,options)}},destroy=function($elts){$elts.removeData("validator-instance validator-config"),$elts.off(".validator")},createValidator=function($elt,rules,options){$elt.data("validator-instance",new Validator(rules,options.validator||{})),options.event&&bindEvents($elt,options)},bindEvents=function($elt,options){var events=_.isArray(
options.event)?options.event:[options.event];0<events.length&&_.isFunction(options.validated)&&_.forEach(events,function(event){switch(_.isString(event)&&(event={type:event}),event.type){case"keyup":case"keydown":$elt.on(event.type,function(){var v=$elt.val();event.length?v&&v.length>event.length&&validate($elt,options.validated,{}):validate($elt,options.validated,{})});break;case"change":case"blur":$elt.on(event.type,function(){validate($elt,options.validated,{})});break;default:$.error("unknown event type to be bound to validation : "+event.type)}})},validate=function($elt,callback,options){var value=$elt.val(),execCallback=function(results){var valid
;$elt.trigger("validated",{elt:$elt[0],results:results}),_.isFunction(callback)&&(valid=0===_.where(results,{type:"failure"}).length,callback.call($elt[0],valid,results))};$elt.data("validator-config").allowEmpty&&""===value?execCallback([new Report("success",{validator:"allowEmpty"})]):$elt.data("validator-instance").validate(value,options||{},execCallback)}}),define("ui/formValidator/highlighters/message",["jquery","lodash","i18n"],function($,_,__){"use strict";var defaultOptions={errorClass:"error",errorMessageClass:"validate-error"};return function(options){return options=_.merge(defaultOptions,options),{highlight:function($field,message){
this.unhighlight($field),$field.addClass(options.errorClass),$field.after("<span class='"+options.errorMessageClass+"'>"+message+"</span>")},unhighlight:function($field){$field.removeClass(options.errorClass),$field.next("."+options.errorMessageClass).remove()},destroy:function($field){}}}}),define("ui/formValidator/highlighters/qtip",["jquery","lodash","i18n","ui/tooltip"],function($,_,__){"use strict";var defaultOptions={qtip:{show:{ready:!0},hide:{event:!1},theme:"error"}};return function(options){return options=_.merge(defaultOptions,options),{highlight:function($field,message){options=_.merge(options,{qtip:{content:{text:message}}}),$field.qtip(
options.qtip),$field.addClass(options.errorClass)},unhighlight:function($field){$field.removeClass(options.errorClass),$field.qtip("destroy",!0)},destroy:function($field){void 0!==$field.data("hasqtip")&&$field.qtip("destroy",!0)}}}}),define("ui/formValidator/highlighters/highlighter",["jquery","lodash","i18n","ui/formValidator/highlighters/message","ui/formValidator/highlighters/qtip"],function($,_,__,messageHighlighter,qtipHighlighter){"use strict";var defaultOptions={type:"message"};function highlighterFactory(options){var provider;return{init:function(){return options=$.extend(!0,defaultOptions,options),provider=function(options){if(
highlighterFactory.providers[options.type])return highlighterFactory.providers[options.type](options);throw new TypeError("Provider "+name+" is not registered.")}(options),this},highlight:function($field,message){provider.highlight($field,message)},unhighlight:function($field){provider.unhighlight($field)},destroy:function($field){provider.destroy($field)}}.init()}return highlighterFactory.providers={},highlighterFactory.register=function(name,provider){highlighterFactory.providers[name]=provider},highlighterFactory.register("message",messageHighlighter),highlighterFactory.register("qtip",qtipHighlighter),highlighterFactory}),define(
"ui/formValidator/formValidator",["jquery","lodash","i18n","ui/validator","ui/formValidator/highlighters/highlighter"],function($,_,__,jQueryValidator,highlighterFactory){"use strict";var defaultOptions={highlighter:{type:"message",errorClass:"error"},container:$(document),selector:"[data-validate]",validateOnInit:!1,events:["change","blur"]};return function(options){var highlighter,$toValidate,validator,state={valid:!0,errors:[]};function afterFieldValidate($field,valid,report){var firstErrorData;state.valid=state.valid&&valid,valid?highlightField($field,!0):(highlightField($field,!1,(firstErrorData=_.pluck(_.filter(report,{type:"failure"}),"data")[0]
).message),state.errors.push($.extend(!0,{field:$field},firstErrorData)))}function highlightField($field,success,message){_.isUndefined(highlighter)&&(highlighter=highlighterFactory(validator.options.highlighter)),highlighter=highlighter,success?highlighter.unhighlight($field):highlighter.highlight($field,message)}function getFieldsToValidate(){var $container;return _.isUndefined($toValidate)&&($container=validator.getContainer(),$toValidate=$container.find(validator.options.selector)),$toValidate}return(validator={init:function(){return this.options=_.defaults(options||{},defaultOptions),($toValidate=getFieldsToValidate()).validator({
event:this.options.events,validated:function(valid,report){afterFieldValidate($(this),valid,report)}}),options.validateOnInit&&this.validate(),this},validate:function(){return $toValidate=getFieldsToValidate(),state={valid:!0,errors:[]},$toValidate.validator("validate",function(valid,report){afterFieldValidate($(this),valid,report)}),state.valid},getState:function(){return state},destroy:function(){getFieldsToValidate().each(function(){highlighter&&highlighter.destroy($(this))})},getContainer:function(){return this.options.container&&this.options.container.length?this.options.container:$(document)}}).init()}}),define("ui/groupedComboBox",["jquery","lodash",
"i18n","ui/component","tpl!ui/bulkActionPopup/tpl/select","select2"],function($,_,__,component,selectTpl){"use strict";var selectedValues={};return function(options){return component().on("render",function($container){_.isArray(options.categoriesDefinitions)&&_.isArray(options.categories)&&options.categoriesDefinitions.forEach(function(k,i){var $comboBox=function(level,categoriesDefinitions,categories,selected){if(!categoriesDefinitions[level]||!categories[level])throw"missing category definition on level : "+level;selected=selected||[];var $comboBox,categoryDef=categoriesDefinitions[level];if(categoryDef.id)return($comboBox=$(selectTpl({
comboboxId:categoryDef.id,comboboxLabel:categoryDef.label||"",options:categories[level]}))).find("select").val(selected[level]||""),$comboBox.on("change",function(){var $selected=$comboBox.find(":selected");selectedValues[categoryDef.id]=$selected.val(),$comboBox.trigger("selected.cascading-combobox",[selectedValues])}),$comboBox.find("select").select2({allowClear:!0,dropdownAutoWidth:!0,placeholder:categoryDef.placeholder||__("select..."),minimumResultsForSearch:-1}),$comboBox}(i,options.categoriesDefinitions,options.categories,options.selected);$container.append($comboBox)})}).init(options)}}),define("ui/groupvalidator",["jquery","lodash","ui/validator"],
function($,_){$.fn.groupValidator=function(options){return options=_.defaults(options||{},$.fn.groupValidator.defaults),this.each(function(){var $container=options.$container=$(this),states=[],callback=function(valid,results){var $elt=$(this);states[$elt.attr("name")]=valid,options.callback.call(this,valid,results,options),$elt.trigger("validated.single",[valid]),$container.trigger("validated.group",[!1===_(states).values().contains(!1),this])},$toValidate=$("[data-validate]",$container).validator({event:options.events,validated:callback});options.validateOnInit&&$toValidate.validator("validate",{},callback)})},$.fn.groupValidator.defaults={
validateOnInit:!1,errorClass:"error",errorMessageClass:"validate-error",events:["change","blur"],callback:function(valid,results,options){var rule,$elt=$(this);$elt.siblings("."+options.errorMessageClass).remove(),!1===valid?(rule=_.where(results,{type:"failure"})[0],$elt.addClass(options.errorClass),rule&&rule.data.message&&$elt.after("<span class='"+options.errorMessageClass+"'>"+rule.data.message+"</span>")):$elt.removeClass(options.errorClass)}}}),define("ui/highlighter",["lodash","jquery"],function(_,$){"use strict";var containersBlackList=["textarea","math","script",".select2-container"];return function(options){var currentGroupId,textNodesIndex,
className=options.className,containerSelector=options.containerSelector,isWrapping=!1,hasWrapped=!1;function getContainer(){return $(containerSelector).get(0)}function isWrappingNode(node){return isElement(node)&&"span"===node.tagName.toLowerCase()&&node.className===className}function isWrappable(node){return isText(node)&&0===$(node).closest(containersBlackList.join(",")).length&&0<node.textContent.trim().length}function getWrapper(groupId){var wrapper=document.createElement("span");return wrapper.className=className,wrapper.setAttribute("data-hl-group",groupId+""),wrapper}function isElement(node){
return node&&"object"==typeof node&&node.nodeType===window.Node.ELEMENT_NODE}function isText(node){return node&&"object"==typeof node&&node.nodeType===window.Node.TEXT_NODE}function isHotNode(node){return isWrappingNode(node)||isWrappable(node)}return{highlightRanges:function(ranges){ranges.forEach(function(range){var rangeInfos;(function(range){return($.contains(getContainer(),range.commonAncestorContainer)||getContainer().isSameNode(range.commonAncestorContainer))&&!range.collapsed})(range)&&(currentGroupId=function(){for(var id=currentGroupId||1;0!==$(getContainer()).find("[data-hl-group="+id+"]").length;)id++;return id}(),isWrappable(
range.commonAncestorContainer)&&!isWrappingNode(range.commonAncestorContainer.parentNode)?range.surroundContents(getWrapper(currentGroupId)):(rangeInfos={startNode:isElement(range.startContainer)?range.startContainer.childNodes[range.startOffset]:range.startContainer,startNodeContainer:range.startContainer,startOffset:range.startOffset,endNode:isElement(range.endContainer)?range.endContainer.childNodes[range.endOffset-1]:range.endContainer,endNodeContainer:range.endContainer,endOffset:range.endOffset},hasWrapped=isWrapping=!1,function wrapTextNodesInRange(rootNode,rangeInfos){var currentNode,i,node,groupId,childNodes=rootNode.childNodes;for(
i=0;i<childNodes.length&&!hasWrapped;i++)if((currentNode=childNodes[i]).isSameNode(rangeInfos.startNode)&&(isText(rangeInfos.startNodeContainer)&&0!==rangeInfos.startOffset?(rangeInfos.startNode=currentNode.splitText(rangeInfos.startOffset),rangeInfos.startOffset=0):isWrapping=!0),currentNode.isSameNode(rangeInfos.endNode)&&isText(rangeInfos.endNodeContainer)&&(0!==rangeInfos.endOffset?currentNode.splitText(rangeInfos.endOffset):isWrapping=!1),isText(currentNode)?(node=currentNode,groupId=currentGroupId,isWrapping&&!isWrappingNode(node.parentNode)&&isWrappable(node)&&$(node).wrap($(getWrapper(groupId)))):isElement(currentNode)&&wrapTextNodesInRange(
currentNode,rangeInfos),currentNode.isSameNode(rangeInfos.endNode)){hasWrapped=!(isWrapping=!1);break}}(range.commonAncestorContainer,rangeInfos))),range.commonAncestorContainer.normalize(),currentGroupId=0,isWrapping=!1,function reindexGroups(rootNode){var i,currentNode,parent,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)isWrappable(currentNode=childNodes[i])?isWrappingNode(parent=currentNode.parentNode)?(!1===isWrapping&&currentGroupId++,isWrapping=!0,parent.setAttribute("data-hl-group",currentGroupId)):isWrapping=!1:isElement(currentNode)&&reindexGroups(currentNode)}(getContainer()),function mergeAdjacentWrappingNodes(rootNode){var i,
currentNode,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)if(isWrappingNode(currentNode=childNodes[i]))for(;isWrappingNode(currentNode.nextSibling);)currentNode.firstChild.textContent+=currentNode.nextSibling.firstChild.textContent,currentNode.parentNode.removeChild(currentNode.nextSibling);else isElement(currentNode)&&mergeAdjacentWrappingNodes(currentNode)}(getContainer())})},highlightFromIndex:function(highlightIndex){var rootNode=getContainer();rootNode&&(rootNode.normalize(),textNodesIndex=0,function restoreHighlight(rootNode,highlightIndex){var i,currentNode,parent,nodeInfos,nodesToSkip,range,initialChildCount,
childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)isWrappable(currentNode=childNodes[i])?(parent=currentNode.parentNode,initialChildCount=parent.childNodes.length,!0===(nodeInfos=highlightIndex[textNodesIndex]).highlighted&&(_.isArray(nodeInfos.inlineRanges)?(nodeInfos.inlineRanges.reverse(),nodeInfos.inlineRanges.forEach(function(inlineRange){(range=document.createRange()).setStart(currentNode,inlineRange.startOffset||0),range.setEnd(currentNode,inlineRange.endOffset||currentNode.textContent.length),range.surroundContents(getWrapper(inlineRange.groupId))})):((range=document.createRange()).selectNodeContents(currentNode),range.surroundContents(
getWrapper(nodeInfos.groupId))),nodesToSkip=parent.childNodes.length-initialChildCount,i+=nodesToSkip),textNodesIndex++):isElement(currentNode)&&restoreHighlight(currentNode,highlightIndex)}(rootNode,highlightIndex))},getHighlightIndex:function(){var highlightIndex=[],rootNode=getContainer();return rootNode&&(rootNode.normalize(),textNodesIndex=0,function buildHighlightIndex(rootNode,highlightIndex){var i,currentNode,nodeInfos,inlineRange,inlineOffset,nodesToSkip,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)if(isWrappable(currentNode=childNodes[i])&&!isWrappingNode(currentNode.nextSibling))highlightIndex[textNodesIndex]={highlighted:!1},
textNodesIndex++;else if(isWrappingNode(currentNode)&&!isWrappable(currentNode.nextSibling))highlightIndex[textNodesIndex]={highlighted:!0,groupId:currentNode.getAttribute("data-hl-group")},textNodesIndex++;else if(isHotNode(currentNode)&&isHotNode(currentNode.nextSibling)){for(nodeInfos={highlighted:!0,inlineRanges:[]},nodesToSkip=-1,inlineOffset=0;currentNode;)isWrappingNode(currentNode)&&(inlineRange={groupId:currentNode.getAttribute("data-hl-group")},isText(currentNode.previousSibling)&&(inlineRange.startOffset=inlineOffset),isText(currentNode.nextSibling)&&(inlineRange.endOffset=inlineOffset+currentNode.textContent.length),nodeInfos.inlineRanges.push(
inlineRange)),inlineOffset+=currentNode.textContent.length,currentNode=isHotNode(currentNode.nextSibling)?currentNode.nextSibling:null,nodesToSkip++;i+=nodesToSkip,highlightIndex[textNodesIndex]=nodeInfos,textNodesIndex++}else isElement(currentNode)&&buildHighlightIndex(currentNode,highlightIndex)}(rootNode,highlightIndex)),highlightIndex},clearHighlights:function(){$(getContainer()).find("."+className).each(function(){var $wrapped=$(this);$wrapped.replaceWith($wrapped.text())})}}}}),define("ui/incrementer",["jquery","lodash","core/pluginifier","lib/gamp/gamp"],function($,_,Pluginifier,gamp){"use strict";var ns="incrementer",dataNs="ui."+ns,defaults={
disableClass:"disabled",step:1,min:null,max:null,zero:!1,incrementerClass:"incrementer",incrementerCtrlClass:"incrementer-ctrl",incrementerWrapperClass:"incrementer-ctrl-wrapper",decimal:0},Incrementer={init:function(options){var self=Incrementer;return options=_.defaults(options||{},defaults),this.each(function(){var $ctrl,currentValue,$elt=$(this),wrapper=$("<span>",{class:options.incrementerWrapperClass});$elt.data(dataNs)||($elt.is('input[type="text"]')?(currentValue=parseFloat($elt.val()).toFixed(options.decimal),$elt.wrap(wrapper),$elt.data(dataNs,options).addClass(options.incrementerClass).after(
'<span class="ctrl '+options.incrementerCtrlClass+'"><a href="#" class="inc" title="+'+options.step+'" tabindex="-1"></a><a href="#" class="dec" title="-'+options.step+'" tabindex="-1"></a></span>').on("keydown",function(e){38===e.which?(self._inc($elt),this.select()):40===e.which&&(self._dec($elt),this.select())}).on("keyup",_.debounce(function(){var value=$elt.val(),negative="-"===value.charAt(0),options=$elt.data(dataNs);value=parseFloat(value.replace(/[^\d\.]/g,"")),isNaN(value)?$elt.val(""):(value=negative?-value:value,null===options.min||_.isNumber(options.min)&&value>=options.min||!0===options.zero&&0===value?$elt.val(value):($elt.val(options.min),
value=options.min),null===options.max||_.isNumber(options.max)&&value<=options.max?$elt.val(value):$elt.val(options.max)),$elt.trigger("change")},600)).on("focus",function(){this.select()}).on("disable.incrementer",function(){$elt.prop("disabled",!0).addClass("disabled"),$ctrl.find(".inc,.dec").prop("disabled",!0).addClass("disabled")}).on("enable.incrementer",function(){$elt.prop("disabled",!1).removeClass("disabled"),$ctrl.find(".inc,.dec").removeProp("disabled").removeClass("disabled")}),(_.isNaN(currentValue)||null!==options.min&&currentValue<options.min||null!==options.max&&currentValue>options.max)&&$elt.val(options.min||0),($ctrl=$elt.next(
"."+options.incrementerCtrlClass)).find(".inc").click(function(e){e.preventDefault(),$(this).prop("disabled")||self._inc($elt)}),$ctrl.find(".dec").click(function(e){e.preventDefault(),$(this).prop("disabled")||self._dec($elt)}),$elt.trigger("create."+ns)):$.error("The incrementer plugin applies only on input element of the type text"))})},_toFixedDown:function(number,precision){var m=Math.pow(10,precision||0);return Math.floor(number*m)/m},_decimalPlaces:function(number){var match=(""+number).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return match?Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0)):0},_inc:function($elt){var value,
options=$elt.data(dataNs),current=parseFloat($elt.val()||0);value=gamp.add(current,options.step),_.isNumber(options.min)&&value<options.min&&(value=options.min),(null===options.max||_.isNumber(options.max)&&value<=options.max)&&($elt.val(value),$elt.trigger("increment."+ns,[value]).trigger("change"))},_dec:function($elt){var value,options=$elt.data(dataNs),current=parseFloat($elt.val()||0);value=gamp.sub(current,options.step),!0===options.zero&&_.isNumber(options.min)&&value<options.min&&(value=0),(null===options.min||_.isNumber(options.min)&&value>=options.min||!0===options.zero&&0===value)&&($elt.val(value),$elt.trigger("decrement."+ns,[value]).trigger(
"change"))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.off("keyup keydown").siblings("."+options.incrementerCtrlClass).remove(),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Incrementer),function($container){$container.find("[data-increment]").each(function(){var min,max,$elt=$(this),decimal=Incrementer._decimalPlaces($elt.attr("data-increment")),step=parseFloat($elt.attr("data-increment")),zero=!!$elt.data("zero"),options={};options.zero=zero,_.isNaN(step)||(options.step=step),_.isNaN(decimal)||(options.decimal=decimal),$elt.attr("data-min")&&(min=parseFloat($elt.attr("data-min")),_.isNaN(min)||(
options.min=min)),$elt.attr("data-max")&&(max=parseFloat($elt.attr("data-max")),_.isNaN(max)||(options.max=max)),$elt.incrementer(options)})}}),define("ui/inplacer",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";var ns="inplacer",dataNs="ui."+ns,defaults={disableClass:"disabled",bindEvent:"click",inplaceClass:"inplace",mapping:{textarea:["p","div"]}};function getText($elt){var text="";return $elt.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&""!==$.trim(this.nodeValue)&&(text+=$.trim(this.nodeValue))}),text}var InPlacer={init:function(options){return options=$.extend(!0,{},
defaults,options),this.each(function(){var $elt=$(this);if(!$elt.data(dataNs)){var $target=options.target;/^#/.test($target.selector)||$.error("The target selector must referr to the of an element id or to the element to create."),0===$target.length?($elt.after("<input id='"+$target.selector.replace("#","")+"' type='hidden' />"),options.target=$($target.selector)):"INPUT"!==$target.prop("tagName")&&$.error("The target must be an input element."),$elt.data(dataNs,options),$elt.addClass(options.inplaceClass),InPlacer._sync($elt,$target),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){0===$elt.children(":text").length&&(e.preventDefault(),
InPlacer._edit($elt))}),$elt.trigger("create."+ns)}})},_toggle:function($elt){0<$elt.children(":text").length?this._leave($elt):this._edit($elt)},_edit:function($elt){var $editor,self=this,options=$elt.data(dataNs),$target=options.target,text=getText($elt),width=options.width||$elt.width()+"px";if(function($elt){$elt.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&(this.nodeValue="")})}($elt),_.contains(options.mapping.textarea,$elt.prop("tagName").toLowerCase())){var height=options.height||$elt.height()+"px";$editor=$elt.append("<textarea>"+text+"</textarea>").children(":input").width(width).height(height)}else $editor=$elt.prepend($("<input>",
{type:"text"})).children(":input").width(width).focus().val(text);$editor.off("click").change(function(e){e.stopPropagation()}).keyup(function(e){13===e.which&&self._leave($elt)}).blur(function(){self._leave($elt)}).focus(),self._sync($elt,$target),$elt.trigger("edit."+ns,[$target.val()])},_leave:function($elt){var $target=$elt.data(dataNs).target,$input=$elt.children(":input"),content=$input.val();$input.remove(),function($elt,text){var set=!1;$elt.contents().filter(function(){if(this.nodeType===Node.TEXT_NODE&&!1===set)return set=!0,void(this.nodeValue=text)}),!1===set&&$elt.prepend(text)}($elt,content),this._sync($elt,$target),$elt.trigger("leave."+ns,[
$target.val()]),$elt.trigger("change")},_sync:function($elt,$target){0<$elt.children(":text").length?$target.val($elt.children(":text").val()):$target.val(getText($elt))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.removeClass(options.inplaceClass),!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,InPlacer,{expose:["toggle","leave","edit"]}),function($container){new DataAttrHandler("in-place",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){var options={target:$target,bindEvent:!1}
;$elt.data("width")&&(options.width=$elt.data("width")),$elt.inplacer(options)}).trigger(function($elt){$elt.inplacer("toggle")})}}),define("ui/keyNavigation/navigableGroupElement",["jquery","lodash","core/eventifier"],function($,_,eventifier){"use strict";var _ns=".navigable-group-element",navigableGroupElementFactory=function(keyNavigator){var $group;if(!keyNavigator)throw new TypeError("the navigation group does not exist");if(!($group=keyNavigator.getGroup()).length||!$.contains(document,$group[0]))throw new TypeError("the group dom element does not exist");return eventifier({init:function(){return $group.on("focusin"+_ns,function(){$group.addClass(
"focusin")}).on("focusout"+_ns,function(){_.defer(function(){document.activeElement&&$.contains($group.get(0),document.activeElement)||$group.removeClass("focusin")})}),this},destroy:function(){return $group.removeClass("focusin").off(_ns),this},getElement:function(){return $group},isVisible:function(){var hasVisibleNavigable=!1;return!!$group.is(":visible")&&(_.forEach(keyNavigator.getNavigables(),function(nav){if(nav.isVisible())return!(hasVisibleNavigable=!0)}),hasVisibleNavigable)},isEnabled:function(){var hasEnabledNavigable=!1;return!$group.is(":disabled")&&(_.forEach(keyNavigator.getNavigables(),function(nav){if(nav.isEnabled())return!(
hasEnabledNavigable=!0)}),hasEnabledNavigable)},focus:function(){return keyNavigator.focus(this),this}})};return navigableGroupElementFactory.createFromNavigators=function(keyNavigators){var list=[];return _.each(keyNavigators,function(keyNavigator){list.push(navigableGroupElementFactory(keyNavigator))}),list},navigableGroupElementFactory}),define("tpl!ui/listbox/tpl/main",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;function program3(depth0,data){
return" hidden"}return buffer+='<div class="listbox">\n    <h1 ',((stack1=helpers.unless.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'class="hidden"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",buffer+=escapeExpression(stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'</h1>\n    <h2>\n        <span class="empty-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textEmpty,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+='">',buffer+=escapeExpression(stack1=(helper=helpers.textEmpty)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.textEmpty)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n        <span class="available-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textNumber,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span class="label">',buffer+=escapeExpression(stack1=(helper=helpers.textNumber)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.textNumber)?helper.call(depth0,{hash:{},data:data}
):helper)+'</span>: <span class="count"></span></span>\n        <span class="loading',((stack1=helpers.unless.call(depth0,depth0&&depth0.textLoading,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span>',buffer+=escapeExpression(stack1=(helper=helpers.textLoading)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.textLoading)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>...</span>\n    </h2>\n    <div class="list"></div>\n</div>\n'})}),define("tpl!ui/listbox/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper;return stack1=(helper=helpers.width)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.width)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program4(depth0,data,depth2){var stack1;return(stack1=helpers.if.call(depth0,depth2&&depth2.width,{hash:{},inverse:self.program(7,program7,data),fn:self.programWithDepth(5,program5,data,depth2),data:data})
)||0===stack1?stack1:""}function program5(depth0,data,depth3){var stack1;return escapeExpression(typeof(stack1=depth3&&depth3.width)===functionType?stack1.apply(depth0):stack1)}function program7(depth0,data){return"12"}function program9(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.cls)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)}function program11(depth0,data){var stack1,helper,buffer="";return buffer+='<div class="content clearfix">',((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},
data:data}):typeof(helper=depth0&&depth0.content)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>"}function program13(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="text-html">',((stack1=(helper=helpers.html)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.html)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</span>"}function program15(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="text-link"><span class="icon-play"></span>',stack1=(helper=helpers.text)?helper.call(depth0,{
hash:{},data:data}):typeof(helper=depth0&&depth0.text)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>"}return buffer+='<ul class="list-box flex-grid plain">\n    ',((stack1=helpers.each.call(depth0,depth0&&depth0.list,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n    <li class="entry flex-col-',((stack1=helpers.if.call(depth0,depth0&&depth0.width,{hash:{},inverse:self.programWithDepth(4,program4,data,depth1),fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,
depth0&&depth0.cls,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n        <a class="block box" href="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <h3 class="title">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h3>\n            ",((stack1=helpers.if.call(depth0,
depth0&&depth0.content,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n            <div class="bottom clearfix">\n                ',((stack1=helpers.if.call(depth0,depth0&&depth0.html,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",((stack1=helpers.if.call(depth0,depth0&&depth0.text,{hash:{},inverse:self.noop,fn:self.program(15,program15,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </div>\n        </a>\n    </li>\n    "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n</ul>\n"})}),define("ui/listbox",["jquery","lodash","i18n","ui/component","tpl!ui/listbox/tpl/main","tpl!ui/listbox/tpl/list"],function($,_,__,component,mainTpl,listTpl){"use strict";var _defaults={title:!1,textNumber:__("Available"),textEmpty:__("There is nothing to list!"),textLoading:__("Loading"),flex:12},listBox={update:function(list){var count,$list=this.controls&&this.controls.$list,$numberValue=this.controls&&this.controls.$numberValue;return this.setLoading(!0),$list&&($list.empty(),list&&list.length?($list.append(listTpl({list:list,width:this.config.flex})),$numberValue&&(count=list.length,_.isFunction(this.config.countRenderer)&&(
count=this.config.countRenderer(count)),$numberValue.text(count)),this.setState("empty",!1),this.setState("loaded",!0)):(this.setState("empty",!0),this.setState("loaded",!1))),this.setLoading(!1),this},setLoading:function(flag){return flag&&this.setState("loaded",!1),this.setState("loading",flag)},setTitle:function(title){var $title=this.controls&&this.controls.$title;return this.config.title=title,$title&&(!1===title?$title.addClass("hidden"):$title.html(title).removeClass("hidden")),this},setTextNumber:function(text){var $numberLabel=this.controls&&this.controls.$numberLabel,$textAvailable=this.controls&&this.controls.$textAvailable
;return this.config.textNumber=text,$numberLabel&&(!1!==text?$numberLabel.html(text).removeClass("hidden"):$textAvailable&&$textAvailable.addClass("hidden")),this},setTextEmpty:function(text){var $textEmpty=this.controls&&this.controls.$textEmpty;return this.config.textEmpty=text,$textEmpty&&(!1===text?$textEmpty.addClass("hidden"):$textEmpty.html(text).removeClass("hidden")),this},setTextLoading:function(text){var $textLoading=this.controls&&this.controls.$textLoading;return this.config.textLoading=text,$textLoading&&(!1===text?$textLoading.addClass("hidden"):$textLoading.html(text).removeClass("hidden")),this},setSize:function(){return console.warn(
"The setSize() method has been disabled in the listbox component as its size is handled by CSS flex box"),this}};return function(config){var initConfig=config||{};return initConfig.flex=initConfig.width,component(listBox,_defaults).setTemplate(mainTpl).on("destroy",function(){this.controls=null}).on("render",function(){this.controls={$title:this.$component.find("h1"),$textEmpty:this.$component.find(".empty-list"),$textAvailable:this.$component.find(".available-list"),$textLoading:this.$component.find(".loading span"),$numberLabel:this.$component.find(".available-list .label"),$numberValue:this.$component.find(".available-list .count"),
$list:this.$component.find(".list")},this.config.list?this.update(this.config.list):(this.setState("empty",!0),this.setState("loaded",!1))}).init(_.omit(initConfig,"width"))}}),define("util/strPad",[],function(){"use strict";return function(input,pad_length,pad_string,pad_type){var pad_to_go,half="",str_pad_repeater=function(s,len){for(var collect="";collect.length<len;)collect+=s;return collect=collect.substr(0,len)};return input=input.toString(),pad_string=void 0!==pad_string?pad_string:" ","STR_PAD_LEFT"!==pad_type&&"STR_PAD_RIGHT"!==pad_type&&"STR_PAD_BOTH"!==pad_type&&(pad_type="STR_PAD_RIGHT"),0<(pad_to_go=pad_length-(input+="").length)&&(
"STR_PAD_LEFT"===pad_type?input=str_pad_repeater(pad_string,pad_to_go)+input:"STR_PAD_RIGHT"===pad_type?input+=str_pad_repeater(pad_string,pad_to_go):"STR_PAD_BOTH"===pad_type&&(input=(input=(half=str_pad_repeater(pad_string,Math.ceil(pad_to_go/2)))+input+half).substr(0,pad_length))),input}}),define("ui/liststyler",["jquery","lodash","core/pluginifier","util/strPad","util/capitalize"],function($,_,Pluginifier,strPad,capitalize){"use strict";var ns="liststyler",currStyle="",defaults={selected:null},listStyles={none:"",disc:"",circle:"",square:"",decimal:"1","decimal-leading-zero":"01","lower-alpha":"a","upper-alpha":"A","lower-roman":"i","upper-roman":"I",
"lower-greek":"",armenian:"",georgian:""};function formatState(state){var symbol=listStyles[state.id];return $("<span/>",{text:state.text,"data-symbol":symbol})}var ListStyler={init:function(options){return this.each(function(){var selectBox,selectedStyle,$elt=$(this);options=$.extend(!0,{},defaults,options),selectBox=this,selectedStyle=options.selected,_.forOwn(listStyles,function(symbol,style){selectBox.options.add(new Option(capitalize(style.replace(/-/g," ")),style,!1,style===selectedStyle))}),currStyle=options.selected,$elt.on("change",function(){$elt.trigger("stylechange."+ns,{newStyle:this.value,oldStyle:currStyle}),currStyle=this.value}),
$elt.select2({formatResult:formatState,width:"element",minimumResultsForSearch:1/0}),$elt.trigger("create."+ns)})},destroy:function(){this.each(function(){$(this).trigger("destroy."+ns)})}};Pluginifier.register(ns,ListStyler)}),define("tpl!ui/loadingButton/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<button class="loading-button btn-',buffer+=escapeExpression((helper=helpers.type)?helper.call(depth0,{hash:{},data:data}
):"function"==typeof(helper=depth0&&depth0.type)?helper.call(depth0,{hash:{},data:data}):helper)+' small" type="button" title="',buffer+=escapeExpression((helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    <span class="spinner-icon icon-loop spinning"></span>\n    <span class="start-icon icon-',buffer+=escapeExpression((helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.icon)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    <span class="action-label">',buffer+=escapeExpression((
helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n    <span class="terminated-label">',buffer+=escapeExpression((helper=helpers.terminatedLabel)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.terminatedLabel)?helper.call(depth0,{hash:{},data:data}):helper)+"</span>\n</button>"})}),define("css!ui/loadingButton/css/button",[],function(){}),define("ui/loadingButton/loadingButton",["jquery","lodash","i18n","ui/component","tpl!ui/loadingButton/tpl/button","css!ui/loadingButton/css/button"],function($,_,__,
component,buttonTpl){"use strict";var _defaults={type:"info",icon:"property-advanced",title:"",label:"OK",terminatedLabel:"FINISHED"},buttonApi={start:function(){this.setState("started",!0),this.trigger("started")},terminate:function(){return this.is("started")&&(this.setState("started",!1),this.setState("terminated",!0),this.disable(),this.trigger("terminated")),this},reset:function(){return this.is("terminated")&&(this.setState("terminated",!1),this.enable(),this.trigger("reset")),this}};return function(config){var initConfig=_.defaults(config||{},_defaults);return component(buttonApi).setTemplate(buttonTpl).on("render",function(){var self=this
;this.getElement().on("click",function(){self.is("disabled")||self.is("started")||self.is("terminated")||self.start()})}).init(initConfig)}}),define("tpl!ui/lock/lock",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="feedback-',buffer+=escapeExpression((helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},
data:data}):helper)+'">\n<span class="icon-lock ',buffer+=escapeExpression((helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+"-color ",buffer+=escapeExpression((helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    ',buffer+=escapeExpression((helper=helpers.msg)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.msg)?helper.call(depth0,{hash:{},data:data}):helper
)+'\n    <div class="txt-rgt button-container">\n        <button class="btn btn-info small check-in"><span class="icon-unlock info"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Check-in",options):helperMissing.call(depth0,"__","Check-in",options)))+'</button>\n        <button class="btn btn-info small release"><span class="icon-result-nok info"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Release",options):helperMissing.call(depth0,"__","Release",options))
)+'</button>\n    </div>\n\n    <div class="message-container button-container" style="display: none;">\n            <label>\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Message",options):helperMissing.call(depth0,"__","Message",options)))+'\n            </label>\n            <input type="text" name="message" class="message">\n            <button class="btn-info small commit">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Commit",options):helperMissing.call(depth0,"__","Commit",options)))+"</button>\n    </div>\n</div>\n"
})}),define("layout/loading-bar",["jquery"],function($){"use strict";var $loadingBar=$(".loading-bar"),originalHeight=$loadingBar.height(),$win=$(window),$doc=$(document),$contentWrap=$(".content-wrap"),headerElements={$versionWarning:$contentWrap.find(".version-warning"),$header:$contentWrap.find("header:first()")},headerHeight=getHeaderHeight(headerElements);function getHeaderHeight(headerElements){var $element;for($element in headerHeight=0,headerElements)headerElements[$element].length&&headerElements[$element].is(":visible")&&(headerHeight+=headerElements[$element].outerHeight());return headerHeight}function updateHeight(){$loadingBar.hasClass("loading"
)&&((headerHeight=getHeaderHeight(headerElements))<=$win.scrollTop()?$loadingBar.addClass("fixed"):$loadingBar.removeClass("fixed"),$loadingBar.hasClass("loadingbar-covered")?$loadingBar.height($doc.height()):$loadingBar.height(""))}return $win.on("scroll.loadingbar",function(){updateHeight()}),{start:function(covered){void 0===covered&&(covered=!0),$loadingBar.hasClass("loading")&&$loadingBar.stop(),$loadingBar.addClass("loading"),$loadingBar.toggleClass("loadingbar-covered",covered),updateHeight()},stop:function(){$loadingBar.removeClass("loading fixed").height(originalHeight)}}}),define("helpers",["lodash","jquery","context","layout/loading-bar",
"jqueryui"],function(_,$,context,loadingBar){"use strict";return{init:function(){$.postJson=function(url,data,callback){$.post(url,data,callback,"json")}},getMainContainer:function(){var sectionIndex;return console.warn("deprecated, use section instead"),context.section||(sectionIndex=$(".section-container").tabs("options","selected"),$(".content-panel").eq(sectionIndex).find(".content-block")),$("#panel-"+context.section+" .content-block")},getMainContainerSelector:function($tabs){console.warn("deprecated, use section instead");var $container=this.getMainContainer();return!!($container&&0<$container.length)&&$container.selector},selectTabByName:function(
name){console.warn("deprecated, use section instead"),$("#"+name).click()},getTabIndexByName:function(name){console.warn("deprecated, use section instead");for(var elts=$("div#tabs ul.ui-tabs-nav li a"),i=0;i<elts.length;){var elt=elts[i];if(elt&&elt.id&&elt.id===name)return i;i++}return-1},openTab:function(title,url,open){console.warn("deprecated, use section instead"),open=open||!0;var idx=this.getTabIndexByUrl(url),$tabs=$("#tabs");-1==idx&&($tabs.tabs("add",url,title),idx=$tabs.tabs("length")-1),open&&$tabs.tabs("select",idx)},getTabIndexByUrl:function(url){console.warn("deprecated, use section instead");var elts=$("#tabs ul.ui-tabs-nav li a"),i=0,ret=-1
;return elts.each(function(){var href=$.data(this,"href.tabs");url!==href?i++:ret=i}),ret},closeTab:function(index){console.warn("deprecated, use section instead"),-1<index&&$("#tabs").tabs("remove",index)},updateTabUrl:function(tabObj,tabName,url){console.warn("deprecated, use section instead");var index=this.getTabIndexByName(tabName);tabObj.tabs("url",index,url),tabObj.tabs("enable",index)},loading:function(){console.warn("deprecated, this should be automated"),$(window).on("click",function(e){return e.stopPropagation(),e.preventDefault(),!1}),loadingBar.start()},loaded:function(){console.warn("deprecated, this should be automated"),$(window).off("click")
,loadingBar.stop()},_load:function(selector,url,data){url=url||"",data?data.nc=(new Date).getTime():data={nc:(new Date).getTime()},$(selector).hide().empty().show(),-1===url.indexOf("?")?$(selector).load(url,data):(url+="&"+$.param(data),$(selector).load(url))},_href:function(ref){return-1<ref.indexOf("?")?ref+"&nc="+(new Date).getTime():ref+"?nc="+(new Date).getTime()},_autoFx:function(){console.warn("deprecated"),setTimeout(function(){$(".auto-highlight").effect("highlight",{color:"#9FC9FF"},2500)},1e3),setTimeout(function(){$(".auto-hide").fadeOut("slow")},3e3),setTimeout(function(){$(".auto-slide").slideUp(1500)},11e3)},textCutter:function(selector,
maxLength){console.warn("deprecated, use css instead"),maxLength||(maxLength=100),$(selector).each(function(){$(this).text().length>maxLength&&!$(this).hasClass("text-cutted")&&($(this).prop("title",$(this).text()),$(this).css("cursor","pointer"),$(this).html($(this).text().substring(0,maxLength)+"[...<img src='"+context.taobase_www+"img/bullet_add.png' />]"),$(this).addClass("text-cutted"))})},createMessage:function(message){console.warn("deprecated, use feedback instead"),$("#info-box").length?$("#info-box").html(message).show():$("body").append("<div id='info-box' class='ui-widget-header ui-corner-all auto-slide' >"+message+"</div>"),this._autoFx()},
createErrorMessage:function(message){this.createMessage(message),$("#info-box").addClass("ui-state-error")},createInfoMessage:function(message){this.createMessage(message),$("#info-box").removeClass("ui-state-error")},isFlashPluginEnabled:function(){return void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&!1!==new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")},loadCss:function(url){console.warn("deprecated");var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url,document.getElementsByTagName("head")[0].appendChild(link)},_url:function(action,controller,
extension,params){var url;if("string"!=typeof action||"string"!=typeof controller||"string"!=typeof extension)throw new TypeError("All parts are required to build an URL");return url=context.root_url+extension+"/"+controller+"/"+action,_.isString(params)?url+="?"+params:_.isPlainObject(params)&&(url+="?"+$.param(params)),url}}}),define("ui/lock",["jquery","lodash","i18n","tpl!ui/lock/lock","helpers","ui/feedback"],function($,_,__,tpl,helpers,feedback){"use strict";var $lockBox,currents=[],categories={hasLock:"info",locked:"error"},states={created:"created",displayed:"displayed",closed:"closed"},defaultOptions={msg:__("This resource is locked"),
releaseUrl:helpers._url("release","Lock","tao"),commitUrl:helpers._url("commitResource","History","taoRevision")};var lockApi={level:null,category:null,message:function(category,msg,options){return category&&_.contains(_.keys(categories),category)||(category="hasLock"),this.setState(states.created),this.category=category,this.level=_.result(categories,this.category),this.options=_.defaults(options||{},defaultOptions),this.content=tpl({level:this.level,msg:msg}),this._trigger("create"),this},hasLock:function(msg,options){return this.message("hasLock",msg,options).open()},locked:function(msg,options){return this.message("locked",msg,options).open()},
open:function(){return this._trigger("open"),this.display(),this},close:function(){this.isInState(states.displayed)&&(this.setState(states.closed),$("#"+this.id).remove(),this._trigger("close"),_.remove(currents,{_state:states.closed}))},display:function(){var self=this;return self.content&&(self.setState(states.displayed),$(self.content).attr("id",self.id).appendTo(self._container),self._trigger("display"),void 0===this.options.uri?($(".release",self._container).hide(),$(".check-in",self._container).hide()):($(".release",self._container).on("click",function(){self.release()}),$(".check-in",self._container).on("click",function(){self.commit()}))),self},
release:function(){var self=this;return""!==self.options.releaseUrl?$.ajax({url:self.options.releaseUrl,type:"POST",data:{uri:self.options.uri},dataType:"json",success:function(response){response.success?self._trigger("released",response):self._trigger("failed",response)},error:function(){self._trigger("failed")}}):self._trigger("failed"),this},commit:function(){var self=this;return""!==self.options.commitUrl?($(".message-container",self._container).slideToggle(),$(".commit",self._container).off("click").on("click",function(){var message=$(".message",self._container).val();""!==message?$.ajax({url:self.options.commitUrl,type:"POST",data:{id:self.options.uri,
message:message},dataType:"json",success:function(response){response.success?self._trigger("committed",response):self._trigger("failed",response)},error:function(){self._trigger("failed")}}):self._trigger("failed",{message:__("Please give a message to your commit")})})):self._trigger("failed"),this},register:function(){var msg=this._container.data("msg")||defaultOptions.msg,id=this._container.data("id");return this.message("hasLock",msg,{uri:id,released:function(response){feedback().success(response.message),this.close()},committed:function(response){feedback().success(response.commitMessage),this.close()},failed:function(response){
void 0!==response&&void 0!==response.message?feedback().error(response.message):feedback().error("Unknown Error")}}).open()},_trigger:function(eventName,data){this._container.trigger(eventName+".lock",[this]),_.isFunction(this.options[eventName])&&this.options[eventName].call(this,data)}},lockState={_state:null,isInState:function(verify){return _.isString(verify)&&(verify=[verify]),_.contains(verify,this._state)},setState:function(state){if(!_.contains(states,state))throw new Error("Unkown state "+state);this._state=state}};return function($container){var _container;if($container||($lockBox=$("#lock-box")),!(_container=$container||$lockBox
)||!_container.length)throw new Error("The lock needs to belong to an existing container");_.forEach(currents,function(lockRef){null!==lockRef&&lockRef._container.get(0)===_container.get(0)&&lockRef.close()});var receiver,provider,lk=_.extend({id:"lock-"+(currents.length+1),_container:_container},lockState);return currents.push(lk),receiver=lk,_(provider=lockApi).functions().forEach(function(methodName){receiver[methodName]=function(){return provider[methodName].apply(receiver,arguments)}}),receiver}}),define("tpl!ui/mediaplayer/tpl/player",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,
">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,data){var stack1,buffer="";return buffer+="\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.sources,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        "}function program3(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <div class="media video youtube" data-video-src="',stack1=(helper=helpers.src)?helper.call(depth0
,{hash:{},data:data}):typeof(helper=depth0&&depth0.src)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-video-id="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-type="youtube"></div>\n            '}function program5(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n        <video class="media video" poster="',stack1=(helper=helpers.poster)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.poster
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" controls ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.cors,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.sources,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Your browser doesnt support the video player.",options):helperMissing.call(depth0,"__","Your browser doesnt support the video player.",options)))+"\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.link,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </video>\n        "}function program6(depth0,data){return"crossorigin"}function program8(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <source src="',stack1=(helper=helpers.src)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.src)===functionType?helper.call(depth0,{hash:{},
data:data}):helper,buffer+=escapeExpression(stack1)+'" type="',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            '}function program10(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n            <a href="',stack1=(helper=helpers.link)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.link)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Please download the video and view offline.",options):helperMissing.call(depth0,"__","Please download the video and view offline.",options)))+"</a>\n            "}function program13(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n            <a href="',stack1=(helper=helpers.link)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.link)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Please download the track and listen offline.",options):helperMissing.call(depth0,"__","Please download the track and listen offline.",options)))+"</a>\n            "}return buffer+='<div class="mediaplayer ',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    <div class="player">\n    ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.video,{hash:{},inverse:self.program(12,function(depth0,data){var stack1,helper,options,buffer=""
;return buffer+='\n        <audio class="media audio" controls ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.cors,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.sources,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Your browser doesnt support the audio player.",options):helperMissing.call(
depth0,"__","Your browser doesnt support the audio player.",options)))+"\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.link,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </audio>\n    "},data),fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+="\n        ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.youtube,{hash:{},inverse:self.program(5,program5,data),fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+='\n        <div class="overlay">\n            <a class="action play" data-control="play"><span class="icon icon-play" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Play",options):helperMissing.call(depth0,"__","Play",options)))+'"></span></a>\n            <a class="action play" data-control="pause"><span class="icon icon-pause" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Pause",options):helperMissing.call(depth0,"__","Pause",options))
)+'"></span></a>\n        </div>\n    </div>\n    <div class="controls">\n        <div class="bar">\n            <div class="control actions playback">\n                <a class="action play" data-control="play" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Play",options):helperMissing.call(depth0,"__","Play",options)))+'"><span class="icon icon-play"></span></a>\n                <a class="action play" data-control="pause" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Pause",options):helperMissing.call(depth0,"__","Pause",
options)))+'"><span class="icon icon-pause"></span></a>\n            </div>\n            <div class="control seek"><div class="slider"></div></div>\n            <div class="control infos timer">\n                <span class="info time" data-control="time-cur" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Current playback position",options):helperMissing.call(depth0,"__","Current playback position",options)))+'">00:00</span>\n                <span class="info time" data-control="time-end" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__
)?helper.call(depth0,"Total duration",options):helperMissing.call(depth0,"__","Total duration",options)))+'">00:00</span>\n            </div>\n            <div class="control actions sound">\n                <div class="volume"><div class="slider"></div></div>\n                <a class="action mute" data-control="mute" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Mute",options):helperMissing.call(depth0,"__","Mute",options)))+'"><span class="icon icon-sound"></span></a>\n                <a class="action mute" data-control="unmute" title="'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Restore sound",options):helperMissing.call(depth0,"__","Restore sound",options)))+'"><span class="icon icon-mute"></span></a>\n            </div>\n        </div>\n    </div>\n    <div class="error">\n        <div class="message">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"This media cannot be played!",options):helperMissing.call(depth0,"__","This media cannot be played!",options)))+"</div>\n    </div>\n</div>\n"})}),define("css!ui/mediaplayer/css/player",[],function(){}),define("ui/mediaplayer",["jquery","lodash","i18n","async","urlParser"
,"core/eventifier","core/mimetype","core/store","tpl!ui/mediaplayer/tpl/player","css!ui/mediaplayer/css/player","nouislider"],function($,_,__,async,UrlParser,eventifier,mimetype,store,playerTpl){"use strict";var _ns=".mediaplayer",_reYoutube=/([?&\/]v[=\/])([\w-]+)([&\/]?)/,_reAppleMobiles=/ip(hone|od)/i,_slice=[].slice,_defaults={type:"video/mp4",video:{width:480,height:270,minWidth:200,minHeight:200},audio:{width:400,height:30,minWidth:200,minHeight:36},options:{volume:Math.floor(80),startMuted:!1,maxPlays:0,replayTimeout:0,canPause:!0,canSeek:!0,loop:!1,autoStart:!1}},_mimeTypes={"video/webm":'video/webm; codecs="vp8, vorbis"',
"video/mp4":'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',"video/ogg":'video/ogg; codecs="theora, vorbis"',"audio/mpeg":"audio/mpeg;","audio/mp4":'audio/mp4; codecs="mp4a.40.5"',"audio/ogg":'audio/ogg; codecs="vorbis"',"audio/wav":'audio/wav; codecs="1"'},_extractYoutubeId=function(url){var res=_reYoutube.exec(url);return res&&res[2]||url},_ensureNumber=function(value){return value=parseFloat(value),isFinite(value)?value:0},_leadingZero=function(n,len){for(var value=n.toString();value.length<len;)value="0"+value;return value},_timerFormat=function(time){var seconds=Math.floor(time%60),minutes=Math.floor(time/60)%60,hours=Math.floor(time/3600),parts=[]
;return hours&&parts.push(hours),parts.push(_leadingZero(minutes,2)),parts.push(_leadingZero(seconds,2)),parts.join(":")},_checkSupport=function(media,mimeType){var support=!!media.canPlayType;return mimeType&&support&&(support=!!media.canPlayType(_mimeTypes[mimeType]||mimeType).replace(/no/,"")),support},_support={canPlay:function(type,mime){if(type)switch(type.toLowerCase()){case"audio":return this.canPlayAudio(mime);case"youtube":case"video":return this.canPlayVideo(mime);default:return!1}return this.canPlayAudio()&&this.canPlayVideo()},canPlayAudio:function(mime){return this._mediaAudio||(this._mediaAudio=document.createElement("audio")),_checkSupport(
this._mediaAudio,mime)},canPlayVideo:function(mime){return this._mediaVideo||(this._mediaVideo=document.createElement("video")),_checkSupport(this._mediaVideo,mime)},canControl:function(){return!_reAppleMobiles.test(navigator.userAgent)}},_youtubeManager={injected:!1,ready:!1,pending:[],add:function(elem,player,options){this.ready?this.create(elem,player,options):(this.pending.push([elem,player,options]),this.injected||this.injectApi())},remove:function(elem,player){var pending=this.pending;_.forEach(pending,function(args,idx){args&&elem===args[0]&&player===args[1]&&(pending[idx]=null)})},create:function(elem,player,options){var $elem;if(!this.ready
)return this.add(elem,player,options);options||(options={}),$elem=$(elem),new window.YT.Player($elem.get(0),{height:$elem.width(),width:$elem.height(),videoId:$elem.data("videoId"),playerVars:{autoplay:0,controls:options.controls?1:0,rel:0,showinfo:0,wmode:"transparent",modestbranding:1,disablekb:1,playsinline:1,enablejsapi:1,origin:location.hostname},events:{onReady:player.onReady.bind(player),onStateChange:player.onStateChange.bind(player)}})},apiReady:function(){var self=this,pending=this.pending;this.pending=[],this.ready=!0,_.forEach(pending,function(args){args&&self.create.apply(self,args)})},isApiReady:function(){
var apiReady=void 0!==window.YT&&void 0!==window.YT.Player;return apiReady&&!this.ready&&_youtubeManager.apiReady(),apiReady},injectApi:function(){var self=this;self.isApiReady()||require(["https://www.youtube.com/iframe_api"],function(){var check=function(){self.isApiReady()||setTimeout(check,100)};check()}),this.injected=!0}},_nativePlayer=function(mediaplayer){var $media,media,player,played;return mediaplayer&&(player={init:function(){var mediaElem,result=!1;return $media=mediaplayer.$media,media=null,played=!1,$media&&((mediaElem=$media.get(0))&&mediaElem.canPlayType&&(media=mediaElem,result=!0),mediaplayer.is("nogui")||$media.removeAttr("controls"),
$media.on("play"+_ns,function(){played=!0,mediaplayer._onPlay()}).on("pause"+_ns,function(){mediaplayer._onPause()}).on("ended"+_ns,function(){played=!1,mediaplayer._onEnd()}).on("timeupdate"+_ns,function(){mediaplayer._onTimeUpdate()}).on("loadstart",function(){media.networkState===HTMLMediaElement.NETWORK_NO_SOURCE&&mediaplayer._onError()}).on("error"+_ns,function(){media.networkState===HTMLMediaElement.NETWORK_NO_SOURCE?mediaplayer._onError():(mediaplayer._onRecoverError(),media.networkState===HTMLMediaElement.NETWORK_LOADING&&mediaplayer.is("playing")&&mediaplayer.render())}).on("loadedmetadata"+_ns,function(){mediaplayer.is("error"
)&&mediaplayer._onRecoverError(),mediaplayer._onReady()})),result},destroy:function(){$media&&$media.off(_ns).attr("controls",""),this.stop(),media=$media=null,played=!1},getPosition:function(){return media?media.currentTime:0},getDuration:function(){return media?media.duration:0},getVolume:function(){var value=0;return media&&(value=100*parseFloat(media.volume)+0),value},setVolume:function(value){media&&(media.volume=(parseFloat(value)-0)/100)},setSize:function(width,height){$media&&$media.width(width).height(height)},seek:function(value){media&&(media.currentTime=parseFloat(value),played||this.play())},play:function(){media&&media.play()},pause:function(){
media&&media.pause()},stop:function(){media&&played&&(media.currentTime=media.duration)},mute:function(state){media&&(media.muted=!!state)},isMuted:function(){return!!media&&!!media.muted},addMedia:function(url,type){return type=type||_defaults.type,!(media&&!_checkSupport(media,type))&&(!(!url||!$media)&&($media.append('<source src="'+url+'" type="'+(_mimeTypes[type]||type)+'" />'),!0))},setMedia:function(url,type){return!!$media&&($media.empty(),this.addMedia(url,type))}}),player},_players={audio:_nativePlayer,video:_nativePlayer,youtube:function(mediaplayer){var $media,media,player,interval,destroyed,initWidth,initHeight;function loopEvents(callback){
_.forEach(["onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange"],callback)}return mediaplayer&&(player={init:function(){return $media=mediaplayer.$media,media=null,destroyed=!1,$media&&_youtubeManager.add($media,this,{controls:mediaplayer.is("nogui")}),!!$media},onReady:function(event){var callbacks=this._callbacks;media=event.target,$media=$(media.getIframe()),this._callbacks=null,destroyed?this.destroy():(initWidth&&initHeight&&this.setSize(initWidth,initHeight),mediaplayer._onReady(),callbacks&&_.forEach(callbacks,function(cb){cb()}))},onStateChange:function(event){if(this.stopPolling(),!destroyed)switch(event.data){
case 0:mediaplayer._onEnd();break;case 1:mediaplayer._onPlay(),this.startPolling();break;case 2:mediaplayer._onPause()}},stopPolling:function(){interval&&(clearInterval(interval),interval=null)},startPolling:function(){interval=setInterval(function(){mediaplayer._onTimeUpdate()},mediaplayerFactory.youtubePolling)},destroy:function(){destroyed=!0,media?(loopEvents(function(ev){media.removeEventListener(ev)}),media.destroy()):_youtubeManager.remove($media,this),this.stopPolling(),media=$media=null},getPosition:function(){return media?media.getCurrentTime():0},getDuration:function(){return media?media.getDuration():0},getVolume:function(){var value=0
;return media&&(value=100*media.getVolume()/100+0),value},setVolume:function(value){media&&media.setVolume((parseFloat(value)-0)/100*100)},setSize:function(width,height){$media&&$media.width(width).height(height),media?media.setSize(width,height):(initWidth=width,initHeight=height)},seek:function(value){media&&media.seekTo(parseFloat(value),!0)},play:function(){media&&media.playVideo()},pause:function(){media&&media.pauseVideo()},stop:function(){media&&(media.stopVideo(),mediaplayer._onEnd())},mute:function(state){media&&media[state?"mute":"unMute"]()},isMuted:function(){return!!media&&media.isMuted()},addMedia:function(url){var id=_extractYoutubeId(url),
cb=id&&function(){media.cueVideoById(id)};return!!cb&&(media?cb():(this._callbacks=this._callbacks||[],this._callbacks.push(cb)),!0)},setMedia:function(url){var id=_extractYoutubeId(url),cb=id&&function(){media.loadVideoById(id)};return!!cb&&(media?cb():this._callbacks=[cb],!0)}}),player}},mediaplayer={init:function(config){var self=this;return this.config=_.omit(config||{},function(value){return null==value}),_.defaults(this.config,_defaults.options),this._setType(this.config.type||_defaults.type),this._reset(),this._updateVolumeFromStore(),this._initEvents(),this._initSources(function(){self.is("youtube")||_.each(self.config.sources,function(source){if(
source&&source.type&&0===source.type.indexOf("audio"))return self._setType(source.type),self._initType(),!1}),self.config.renderTo&&_.defer(function(){self.render()})}),this},destroy:function(){return this.trigger("destroy"),this.player&&this.player.destroy(),this.$component&&(this._unbindEvents(),this._destroySlider(this.$seekSlider),this._destroySlider(this.$volumeSlider),this.$component.remove()),this._reset(),this},render:function(to){var renderTo=to||this.config.renderTo||this.$container;return this.$component&&this.destroy(),this._initState(),this._buildDom(),this._updateDuration(0),this._updatePosition(0),this._bindEvents(),this._playingState(!1,!0),
this._initPlayer(),this._initSize(),this.resize(this.config.width,this.config.height),this.config.is.rendered=!0,renderTo&&(this.$container=$(renderTo).append(this.$component)),this.trigger("render",this.$component),this},seek:function(time,internal){return this._canPlay()&&(this._updatePosition(time,internal),this.execute("seek",this.position),this.is("ready")||(this.autoStartAt=this.position),this.loop=!!this.config.loop),this},play:function(time){return this._canPlay()&&(void 0!==time&&this.seek(time),this.execute("play"),this.is("ready")||(this.autoStart=!0),this.loop=!!this.config.loop,this.timerId&&cancelAnimationFrame(this.timerId)),this},
pause:function(time){return this._canPause()&&(void 0!==time&&this.seek(time),this.execute("pause"),this.is("ready")||(this.autoStart=!1)),this},resume:function(){return this._canResume()&&this.play(),this},stop:function(){return this.loop=!1,this.execute("stop"),this.is("ready")||(this.autoStart=!1),this},restart:function(){return this.play(0),this},rewind:function(){return this.seek(0),this},mute:function(state){return void 0===state&&(state=!0),this.execute("mute",state),this._setState("muted",state),this.is("ready")||(this.startMuted=state),this},unmute:function(){return this.mute(!1),this},setVolume:function(value,internal){return this._updateVolume(
value,internal),this.execute("setVolume",this.volume),this},getVolume:function(){return this.volume},getPosition:function(){return this.position},getDuration:function(){return this.duration},getTimesPlayed:function(){return this.timesPlayed},getType:function(){return this.type},getContainer:function(){var $container;return!this.$container&&this.$component&&($container=this.$component.parent()).length&&(this.$container=$container),this.$container},getElement:function(){return this.$component},getSources:function(){return this.config.sources.slice()},setSource:function(src,callback){return this._getSource(src,function(source){this.config.sources=[source],
this.is("rendered")&&this.player.setMedia(source.src,source.type),callback&&callback.call(this,source)}),this},addSource:function(src,callback){return this._getSource(src,function(source){this.config.sources.push(source),this.is("rendered")&&this.player.addMedia(source.src,source.type),callback&&callback.call(this,source)}),this},is:function(state){return!!this.config.is[state]},resize:function(width,height){var type=this.is("video")?"video":"audio",defaults=_defaults[type]||_defaults.video;return width=Math.max(defaults.minWidth,width),height=Math.max(defaults.minHeight,height),this.config.width=width,this.config.height=height,this.$component&&(
height-=this.$component.outerHeight()-this.$component.height(),width-=this.$component.outerWidth()-this.$component.width(),this.$component.width(width).height(height),this.is("nogui")||(height-=this.$controls.outerHeight())),this.execute("setSize",width,height),this},enable:function(){return this._fromState("disabled"),this},disable:function(){return this._toState("disabled"),this.trigger("disabled"),this},show:function(){return this._fromState("hidden"),this},hide:function(){return this._toState("hidden"),this},_setType:function(type){-1!==type.indexOf("youtube")?this.type="youtube":0===type.indexOf("audio")?this.type="audio":this.type="video"},
_initType:function(){var is=this.config.is;is.youtube="youtube"===this.type,is.video="video"===this.type||"youtube"===this.type,is.audio="audio"===this.type},_getSource:function(src,callback){var source,self=this;function done(){var type;"string"==typeof(type=source.type)&&0===type.indexOf("application")&&(source.type=function(source){var type="video/ogg",url=source&&source.src||source,ext=url&&url.substr(-4);return".ogg"!==ext&&".oga"!==ext||(type="audio/ogg"),type}(source)),self.is("youtube")&&(source.id=_extractYoutubeId(source.src)),callback.call(self,source)}source=_.isString(src)?{src:src}:_.clone(src),this.is("youtube")&&!source.type&&(
source.type=_defaults.type),source.type?done():mimetype.getResourceType(source.src,function(err,type){err&&(type=_defaults.type),source.type=type,done()})},_initSources:function(callback){var self=this,sources=function(config){var sources=config.sources||[],url=config.url;return _.isArray(sources)||(sources=[sources]),url&&(_.isArray(config.url)||(url=[url]),sources=sources.concat(url)),sources}(this.config);this.config.sources=[],async.each(sources,function(source,cb){self.addSource(source,function(src){cb(null,src)})},callback)},_initEvents:function(){var triggerEvent;eventifier(this),triggerEvent=this.trigger,this.trigger=function(eventName){
return this.$component&&this.$component.trigger(eventName+_ns,_slice.call(arguments,1)),triggerEvent.apply(this,arguments)}},_initSize:function(){var type=this.is("video")?"video":"audio",defaults=_defaults[type]||_defaults.video;this.config.width=_.parseInt(this.config.width)||defaults.width,this.config.height=_.parseInt(this.config.height)||defaults.height},_initPlayer:function(){var error,player=_players[this.type];error=!_support.canPlay(this.type)||(_.isFunction(player)&&(this.player=player(this)),!this.player||!this.player.init()),this._setState("error",error),this._setState("nogui",!_support.canControl()),this._setState("loading",!0)},
_initState:function(){var page,isCORS=!1;this.is("youtube")||(page=new UrlParser(window.location),isCORS=_.some(this.config.sources,function(source){return!page.sameDomain(source.src)})),this._setState("cors",isCORS),this._setState("ready",!1)},_reset:function(){this.config.is={},this._initType(),this.$component=null,this.$container=null,this.$player=null,this.$media=null,this.$controls=null,this.$seek=null,this.$seekSlider=null,this.$sound=null,this.$volume=null,this.$volumeControl=null,this.$volumeSlider=null,this.$position=null,this.$duration=null,this.player=null,this.duration=0,this.position=0,this.timesPlayed=0,this.volume=this.config.volume,
this.autoStart=this.config.autoStart,this.autoStartAt=this.config.autoStartAt,this.startMuted=this.config.startMuted},_buildDom:function(){this.$component=$(playerTpl(this.config)),this.$player=this.$component.find(".player"),this.$media=this.$component.find(".media"),this.$controls=this.$component.find(".controls"),this.$seek=this.$controls.find(".seek .slider"),this.$sound=this.$controls.find(".sound"),this.$volumeControl=this.$controls.find(".volume"),this.$volume=this.$controls.find(".volume .slider"),this.$position=this.$controls.find('[data-control="time-cur"]'),this.$duration=this.$controls.find('[data-control="time-end"]'),
this.$volumeSlider=this._renderSlider(this.$volume,this.volume,0,100,!0)},_renderSlider:function($elt,value,min,max,vertical){var orientation,direction;return direction=vertical?(orientation="vertical","rtl"):(orientation="horizontal","ltr"),$elt.noUiSlider({start:_ensureNumber(value)||0,step:1,connect:"lower",orientation:orientation,direction:direction,animate:!0,range:{min:_ensureNumber(min)||0,max:_ensureNumber(max)||0}})},_destroySlider:function($elt){$elt&&$elt.get(0).destroy()},_bindEvents:function(){var self=this,overing=!1;this.$component.on("contextmenu"+_ns,function(event){event.preventDefault()}),this.$controls.on("click"+_ns,".action",function(
event){var id=$(event.target).closest(".action").data("control");_.isFunction(self[id])&&self[id]()}),this.$player.on("click"+_ns,function(){self.is("playing")?self.pause():self.play()}),this.$seek.on("change"+_ns,function(event,value){self.seek(value,!0)}),$(document).on("updateVolume"+_ns,function(event,value){self.setVolume(value)}),this.$volume.on("change"+_ns,function(event,value){self.unmute(),$(document).trigger("updateVolume"+_ns,value),self.setVolume(value,!0)}),this.$sound.on("mouseover"+_ns,"a",function(){var position;overing||self.$volumeControl.hasClass("up")||self.$volumeControl.hasClass("down")||(overing=!0,(
position=self.$controls[0].getBoundingClientRect())&&position.top&&position.top<200?self.$volumeControl.addClass("down"):self.$volumeControl.addClass("up"),self.overingTimer=_.delay(function(){self.$volumeControl&&self.$volumeControl.removeClass("up down"),overing=!1},15e3),self.$volumeControl.one("mouseleave"+_ns,function(){self.$volumeControl.removeClass("up down"),overing=!1}))})},_unbindEvents:function(){this.$component.off(_ns),this.$player.off(_ns),this.$controls.off(_ns),this.$seek.off(_ns),this.$volume.off(_ns),this.overingTimer&&clearTimeout(this.overingTimer),$(document).off(_ns)},_updateVolumeSlider:function(value){
this.$volumeSlider&&this.$volumeSlider.val(value)},_updateVolume:function(value,internal){this.volume=Math.max(0,Math.min(100,parseFloat(value))),this._storeVolume(this.volume),internal||this._updateVolumeSlider(value)},_updatePositionSlider:function(value){this.$seekSlider&&this.$seekSlider.val(value)},_updatePositionLabel:function(value){this.$position&&this.$position.text(_timerFormat(value))},_updatePosition:function(value,internal){this.position=Math.max(0,Math.min(this.duration,parseFloat(value))),internal||this._updatePositionSlider(this.position),this._updatePositionLabel(this.position)},_updateDurationSlider:function(value){this.$seekSlider&&(
this._destroySlider(this.$seekSlider),this.$seekSlider=null),value&&isFinite(value)&&(this.$seekSlider=this._renderSlider(this.$seek,0,0,value),this.$seekSlider.attr("disabled",!this.config.canSeek))},_updateDurationLabel:function(value){this.$duration&&(value&&isFinite(value)?this.$duration.text(_timerFormat(value)).show():this.$duration.hide())},_updateDuration:function(value){this.duration=Math.abs(parseFloat(value)),this._updateDurationSlider(this.duration),this._updateDurationLabel(this.duration)},_onReady:function(){this._updateDuration(this.player.getDuration()),this._setState("ready",!0),this._setState("canplay",!0),this._setState("canpause",
this.config.canPause),this._setState("canseek",this.config.canSeek),this._setState("loading",!1),this.trigger("ready"),this.setVolume(this.volume),this.mute(!!this.startMuted),this.autoStartAt?this.seek(this.autoStartAt):this.autoStart&&this.play()},_storeVolume:function(volume){return store("mediaVolume").then(function(volumeStore){volumeStore.setItem("volume",volume)})},_updateVolumeFromStore:function(){var self=this;return store("mediaVolume").then(function(volumeStore){return volumeStore.getItem("volume")}).then(function(volume){_.isNumber(volume)&&(self.volume=Math.max(0,Math.min(100,parseFloat(volume))),self.setVolume(self.volume))})},
_onError:function(){this._setState("error",!0),this._setState("loading",!1),this.trigger("error")},_onRecoverError:function(){this._setState("error",!1),this.trigger("recovererror")},_onPlay:function(){this._playingState(!0),this.trigger("play")},_onPause:function(){this._playingState(!1),this.trigger("pause")},_onEnd:function(){this.timesPlayed++,this._playingState(!1,!0),this._updatePosition(0),this._playLimitReached()?(this._disableGUI(),this.trigger("limitreached")):this.loop?this.restart():0<parseInt(this.config.replayTimeout,10)&&(this.replayTimeoutStartMs=(new window.Date).getTime(),this._replayTimeout()),this.trigger("ended")},_onTimeUpdate:function(
){this._updatePosition(this.player.getPosition()),this.trigger("update")},_replayTimeout:function(){var nowMs=(new window.Date).getTime(),elapsedSeconds=Math.floor((nowMs-this.replayTimeoutStartMs)/1e3);this.timerId=requestAnimationFrame(this._replayTimeout.bind(this)),elapsedSeconds>=parseInt(this.config.replayTimeout,10)&&(this._disableGUI(),this.disable(),cancelAnimationFrame(this.timerId))},_disableGUI:function(){this._setState("ready",!1),this._setState("canplay",!1)},_playLimitReached:function(){return this.config.maxPlays&&this.timesPlayed>=this.config.maxPlays},_canPlay:function(){return this.is("ready")&&!this.is("disabled")&&!this.is("hidden"
)&&!this._playLimitReached()},_canPause:function(){return!!this.config.canPause},_canSeek:function(){return!!this.config.canSeek},_canResume:function(){return this.is("paused")&&this._canPlay()},_setState:function(name,value){return value=!!value,this.config.is[name]=value,this.$component&&this.$component.toggleClass(name,value),this},_fromState:function(stateName){return this._setState(stateName,!1),this.resume(),this},_toState:function(stateName){return this.pause(),this._setState(stateName,!0),this},_playingState:function(state,ended){return this._setState("playing",!!state),this._setState("paused",!state),this._setState("ended",!!ended),this},
execute:function(command){var ctx=this.player,method=ctx&&ctx[command];if(_.isFunction(method))return method.apply(ctx,_slice.call(arguments,1))}},mediaplayerFactory=function(config){return _.clone(mediaplayer).init(config)};return mediaplayerFactory.canPlay=function(type,mime){return _support.canPlay(type,mime)},mediaplayerFactory.canPlayAudio=function(mime){return _support.canPlayAudio(mime)},mediaplayerFactory.canPlayVideo=function(mime){return _support.canPlayVideo(mime)},mediaplayerFactory.canControl=function(){return _support.canControl()},mediaplayerFactory.youtubePolling=100,mediaplayerFactory}),define("tpl!ui/mediasizer/mediasizer",["handlebars"],
function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="media-sizer media-sizer-synced">\n\n    <div class="media-sizer-responsive-toggle">\n        <label>\n        <input type="checkbox" ',((stack1=helpers.if.call(depth0,depth0&&depth0.responsive,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'checked="checked"'},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+=' class="media-mode-switch"/>\n        <span class="icon-checkbox"></span>\n        '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Responsive mode",options):helperMissing.call(depth0,"__","Responsive mode",options)))+'\n        </label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="warning"></span>\n\n        <div class="tooltip-content">\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Media resize along with their container, e.g. 50% means half of the container size not half of the media size.",options):helperMissing.call(depth0,"__","Media resize along with their container, e.g. 50% means half of the container size not half of the media size.",options)))+'\n        </div>\n    </div>\n\n\n    <div class="media-sizer-percent">\n        <label for="media-sizer-percent-width">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Size",options):helperMissing.call(depth0,"__","Size",options))
)+'</label>\n        <span class="item-editor-unit-input-box">\n            <input type="text" name="width" id="media-sizer-percent-width" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n        </span>\n\n        <div class="media-sizer-reset media-sizer-reset-percent" data-unit="percent">\n            <span class="icon-reset"></span>\n        </div>\n\n        <div class="media-sizer-slider-box">\n            <div class="media-sizer-slider"></div>\n        </div>\n    </div>\n\n    <div class="media-sizer-pixel">\n        <label for="media-sizer-pixel-width">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Width",options):helperMissing.call(depth0,"__","Width",options)))+'</label>\n        <span class="item-editor-unit-input-box">\n            <input type="text" name="width" id="media-sizer-pixel-width" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n        </span>\n\n        <label for="media-sizer-pixel-height">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Height",options):helperMissing.call(depth0,"__","Height",options))
)+'</label>\n        <span class="item-editor-unit-input-box">\n            <input type="text" name="height" id="media-sizer-pixel-height" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n        </span>\n\n        <div class="media-sizer-sync">\n            <span class="icon-link"></span>\n        </div>\n\n        <div class="media-sizer-reset media-sizer-reset-pixel" data-unit="pixel">\n            <span class="icon-reset"></span>\n        </div>\n\n        <div class="media-sizer-slider-box">\n            <div class="media-sizer-slider"></div>\n            <div class="media-sizer-cover"></div>\n        </div>\n    </div>\n</div>'})}),
define("ui/mediasizer",["jquery","lodash","core/pluginifier","tpl!ui/mediasizer/mediasizer","nouislider","ui/tooltip"],function($,_,Pluginifier,tpl){"use strict";var MediaSizer,ns="mediasizer",dataNs="ui."+ns,defaults={disableClass:"disabled",applyToMedium:!0,denyCustomRatio:!0,responsive:!0,showResponsiveToggle:!0,showReset:!0,showSync:!0};function _round(value,precision){var factor=Math.pow(10,precision);return Math.round(value*factor)/factor}MediaSizer={_publicArgs:function($elt,options){var params=this._getValues($elt);return params.$target=options.target||$(),params.$resetBtn=options.$resetBtn,params},_getSizeProps:function($elt){var $medium,
naturalWidth,naturalHeight,containerWidth,displaySize,maxWidth,_maxWidth,$parentContainer,options=$elt.data(dataNs),minWidth=_.isNumber(options.minWidth)?options.minWidth:0;return containerWidth=options.hasTarget?(displaySize=($medium=options.target)[0].getBoundingClientRect(),options.width=displaySize.width,options.height=displaySize.height,naturalWidth=$medium[0].naturalWidth||options.width,naturalHeight=$medium[0].naturalHeight||options.height,$parentContainer=options.parentSelector?$medium.parents(options.parentSelector):$medium.parent().parent(),options.maxWidth?options.maxWidth:"none"!==(_maxWidth=$parentContainer.css("max-width"))?parseInt(_maxWidth
):$parentContainer.innerWidth()):(naturalWidth=options.width,naturalHeight=options.height,options.maxWidth||options.width),maxWidth=Math.max(containerWidth,naturalWidth),{px:{natural:{width:naturalWidth,height:naturalHeight},current:{width:options.width,height:options.height}},"%":{natural:{width:100,height:null},current:{width:100*options.width/containerWidth,height:null}},ratio:{natural:naturalWidth/naturalHeight,current:options.width/options.height},containerWidth:containerWidth,sliders:{"%":{min:100*minWidth/maxWidth,max:100,start:100*options.width/containerWidth},px:{min:minWidth,max:maxWidth,start:options.width}},currentUnit:"%"}},
_initSyncBtn:function($elt){var options=$elt.data(dataNs),$mediaSizer=$elt.find(".media-sizer"),self=this,$syncBtn=$elt.find(".media-sizer-sync");return options.showSync||($syncBtn.hide(),$mediaSizer.addClass("media-sizer-sync-off")),$syncBtn.on("click",function(){$mediaSizer.toggleClass("media-sizer-synced"),options.syncDimensions=$mediaSizer.hasClass("media-sizer-synced"),options.syncDimensions&&self._sync($elt,options.$fields.px.width,"blur")}),$syncBtn},_initResetBtn:function($elt){var options=$elt.data(dataNs),$resetBtn=$elt.find(".media-sizer-reset");return options.showReset||$elt.find(".media-sizer").addClass("media-sizer-reset-off"),$resetBtn.on(
"click",function(){options.$fields.px.width.val(options.originalSizeProps.px.current.width).trigger("sliderchange")}),$resetBtn},_initBlocks:function($elt){var options=$elt.data(dataNs),_blocks={},$responsiveToggleField=$elt.find(".media-mode-switch"),self=this,_checkMode=function(){$responsiveToggleField.is(":checked")?(_blocks.px.hide(),_blocks["%"].show(),options.sizeProps.currentUnit="%",options.$fields&&options.$fields["%"].width.val()>options.sizeProps.sliders["%"].max&&(options.$fields["%"].width.val(options.sizeProps.sliders["%"].max),self._sync($elt,options.$fields["%"].width,"blur"))):(_blocks["%"].hide(),_blocks.px.show(),
options.sizeProps.currentUnit="px")};return options.showResponsiveToggle||$elt.find(".media-sizer").addClass("media-sizer-responsivetoggle-off"),_(["px","%"]).forEach(function(unit){_blocks[unit]=$elt.find(".media-sizer-"+("px"===unit?"pixel":"percent")),_blocks[unit].prop("unit",unit),_blocks[unit].find("input").data("unit",unit).after($("<span>",{class:"unit-indicator",text:unit}))}),$responsiveToggleField.on("click",function(){_checkMode(),$elt.trigger("responsiveswitch."+ns,[$responsiveToggleField.is(":checked")]),$elt.trigger("sizechange."+ns,self._publicArgs($elt,options))}),_checkMode(),_blocks},_initSliders:function($elt){var options=$elt.data(dataNs
),_sliders={};return _(options.$blocks).forOwn(function($block,unit){_sliders[unit]=$block.find(".media-sizer-slider"),_sliders[unit].prop("unit",unit),_sliders[unit].noUiSlider({start:options.sizeProps.sliders[unit].start,range:{min:options.sizeProps.sliders[unit].min,max:options.sizeProps.sliders[unit].max}}).on("slide",function(){var $slider=$(this),_unit=$slider.prop("unit");options.$fields[_unit].width.val(_round($slider.val(),0)).trigger("sliderchange")})}),_sliders},_sync:function($elt,$field,eventType){var heightValue,ratio,otherBlockUnit,otherBlockWidthValue,otherBlockHeightValue,currentValues,options=$elt.data(dataNs),unit=$field.prop("unit"),
dimension=$field.prop("dimension"),value=parseFloat($field.val());if(eventType="sliderchange"===eventType?"sliderEvent":"fieldEvent",!isNaN(value)){if(0<options.sizeProps.px.current.width&&0<options.sizeProps.px.current.height&&(options.sizeProps.ratio.current=options.sizeProps.px.current.width/options.sizeProps.px.current.height),ratio=options.denyCustomRatio?options.sizeProps.ratio.natural:options.sizeProps.ratio.current,"height"===dimension&&"px"===unit){if(options.sizeProps.px.current.height=value,!options.syncDimensions)return options.sizeProps["%"].current.height=null,options.applyToMedium&&(currentValues=this._getValues($elt),options.target.attr(
"width",currentValues.width),options.target.attr("height",currentValues.height)),void $elt.trigger("sizechange."+ns,this._publicArgs($elt,options));options.sizeProps.px.current.width=value*ratio,options.sizeProps.ratio.current=options.sizeProps.px.current.width/options.sizeProps.px.current.height,options.$fields.px.width.val(_round(options.sizeProps.px.current.width,0)),value=parseFloat(options.$fields.px.width.val())}otherBlockWidthValue="px"===unit?(otherBlockUnit="%",100*value/options.sizeProps.containerWidth):(otherBlockUnit="px",value*options.sizeProps.containerWidth/100),options.sizeProps[unit].current.width=value,
options.sizeProps[otherBlockUnit].current.width=otherBlockWidthValue,options.syncDimensions&&(heightValue=value/ratio,otherBlockHeightValue=otherBlockWidthValue/ratio,options.sizeProps[unit].current.height=heightValue,options.$fields[unit].height.val(_round(heightValue,0)),options.sizeProps[otherBlockUnit].current.height=otherBlockHeightValue,options.$fields[otherBlockUnit].height.val(_round(otherBlockHeightValue,0))),"sliderEvent"!==eventType&&options.$sliders[unit].val(value),options.$sliders[otherBlockUnit].val(otherBlockWidthValue),options.$fields[otherBlockUnit].width.val(_round(otherBlockWidthValue,0)),options.sizeProps["%"].current.height=null,
options.applyToMedium&&(currentValues=this._getValues($elt),options.target.attr("width",currentValues.width),options.target.attr("height",currentValues.height||"auto")),$elt.trigger("sizechange."+ns,this._publicArgs($elt,options))}},_initFields:function($elt){var field,options=$elt.data(dataNs),dimensions=["width","height"],_fields={},self=this;return _(options.$blocks).forOwn(function($block,unit){_fields[unit]={},options.$blocks[unit].find("input").each(function(){_(dimensions).forEach(function(dim){field=options.$blocks[unit].find('[name="'+dim+'"]'),_fields[unit][dim]=field.length?field:$("<input>"),_fields[unit][dim].prop({unit:unit,dimension:dim}),
_fields[unit][dim].val(_round(options.sizeProps[unit].current[dim],0)),_fields[unit][dim].data({min:0,max:options.sizeProps.sliders[unit].max}),_fields[unit][dim].on("keydown",function(e){var chars,$field=$(this),c=e.keyCode,specChars=(chars=[8,37,39,46],-1===$field.val().indexOf(".")&&(chars.push(190),chars.push(110)),chars);return _.contains(specChars,c)||48<=c&&c<=57||96<=c&&c<=105}),_fields[unit][dim].on("keyup blur sliderchange",function(e){var $field=$(this),value=$field.val().replace(/,/g,".");$field.val(value),value>$field.data("max")?$field.val($field.data("max")):value<$field.data("min")&&$field.val($field.data("min")),self._sync($elt,$(this),
e.type)})})})}),_fields},_getValues:function($elt){var options=$elt.data(dataNs),attr={};return _.forOwn(options.sizeProps[options.sizeProps.currentUnit].current,function(value,dimension){value=_.isNull(value)?"":_round(value,0).toString(),"%"===options.sizeProps.currentUnit&&""!==value&&(value+=options.sizeProps.currentUnit),attr[dimension]=value}),attr},init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this);if(options.hasTarget=options.target&&options.target.length,options.width=options.width||options.naturalWidth,options.height=options.height||options.naturalHeight,
options.naturalWidth=options.naturalWidth||options.width,options.naturalHeight=options.naturalHeight||options.height,options.hasSize=options.width&&options.height&&_.isNumber(options.width)&&_.isNumber(options.height),!options.hasTarget&&!options.hasSize)throw new Error("MediaSizer::init() You must either set width and height or a target element");if(!options.hasTarget&&options.applyToMedium)throw new Error("MediaSizer::init() options.applyToMedium can only be true if a target element is provided");options.hasTarget&&options.hasSize&&(delete options.width,delete options.height,options.hasSize=!1),$elt.data(dataNs)||($elt.html(tpl({
responsive:void 0===options.responsive||!!options.responsive})),$elt.data(dataNs,options),options.sizeProps=MediaSizer._getSizeProps($elt),options.originalSizeProps=_.cloneDeep(options.sizeProps),options.syncDimensions=$elt.find(".media-sizer").hasClass("media-sizer-synced"),options.$blocks=MediaSizer._initBlocks($elt),options.$fields=MediaSizer._initFields($elt),options.$sliders=MediaSizer._initSliders($elt),options.$syncBtn=MediaSizer._initSyncBtn($elt),options.$resetBtn=MediaSizer._initResetBtn($elt),$elt.trigger("create."+ns,MediaSizer._publicArgs($elt,options)))})},destroy:function(){this.each(function(){$(this).trigger("destroy."+ns)})}},
Pluginifier.register(ns,MediaSizer)}),define("ui/movableComponent",["lodash","interact","ui/component","ui/component/draggable","ui/component/resizable","ui/component/stackable"],function(_,interact,componentFactory,makeDraggable,makeResizable,makeStackable){"use strict";var defaultConfig={initialX:0,initialY:0,width:250,height:100,minWidth:75,minHeight:25};return function(specs,defaults){var component;return defaults=_.defaults(defaults||{},defaultConfig),component=componentFactory(specs,defaults),makeDraggable(component),makeResizable(component),makeStackable(component),component.on("render",function(){this.setSize(this.config.width,this.config.height
).center()}),component}}),define("ui/pageStatus",["lodash","core/eventifier"],function(_,eventifier){"use strict";var hiddenProp,visibilityChangeEvent,defaults={track:["load","visibility","focus"]};return void 0!==document.hidden?(hiddenProp="hidden",visibilityChangeEvent="visibilitychange"):void 0!==document.mozHidden?(hiddenProp="mozHidden",visibilityChangeEvent="mozvisibilitychange"):void 0!==document.msHidden?(hiddenProp="msHidden",visibilityChangeEvent="msvisibilitychange"):void 0!==document.webkitHidden&&(hiddenProp="webkitHidden",visibilityChangeEvent="webkitvisibilitychange"),function(options){var win,pageStatus;return options=_.defaults(options||{},
defaults),win=options.window||window,pageStatus=eventifier({}),_.contains(options.track,"load")&&(win.addEventListener("load",function(){pageStatus.trigger("statuschange","load")}),win.addEventListener("unload",function(){pageStatus.trigger("statuschange","unload")})),_.contains(options.track,"visibility")&&win.addEventListener(visibilityChangeEvent,function(e){!0===win.document[hiddenProp]?pageStatus.trigger("statuschange","hide",e.timeStamp):pageStatus.trigger("statuschange","show",e.timeStamp)}),_.contains(options.track,"focus")&&(win.addEventListener("blur",_.debounce(function(e){e.target===win&&pageStatus.trigger("statuschange","blur",e.timeStamp)},200,
{leading:!0,trailing:!1})),win.addEventListener("focus",_.debounce(function(e){e.target===win&&pageStatus.trigger("statuschange","focus",e.timeStamp)},200,{leading:!0,trailing:!1}))),pageStatus.on("statuschange",function(status){var args=[status].concat([].slice.call(arguments,1));pageStatus.trigger.apply(pageStatus,args)}),pageStatus}}),define("iframeNotifier",["jquery","lodash"],function($,_){function hasAccess(windowElt){return!(!window.__knownParent__||!windowElt||windowElt===window)}return{parent:function(eventName,args){_.defer(function(){hasAccess(window.parent)&&window.parent.$&&(0,window.parent.$)(window.parent.document).trigger(eventName,args||[])}
)},top:function(eventName,args){_.defer(function(){hasAccess(window.top)&&window.top.$&&(0,window.top.$)(window.top.document).trigger(eventName,args||[])})}}}),define("ui/previewer",["jquery","lodash","i18n","core/mimetype","core/pluginifier","ui/mediaplayer","iframeNotifier","ui/documentViewer","ui/documentViewer/providers/pdfViewer"],function($,_,__,mimeType,Pluginifier,mediaplayer,iframeNotifier,documentViewer,pdfViewer){"use strict";var ns="previewer",dataNs="ui."+ns,defaults={containerClass:"previewer"},_defaultSize={video:{width:480,height:300},audio:{width:290,height:36},pdf:{width:340,height:500}},previewGenerator={placeHolder:_.template(
"<p class='nopreview' data-type='${type}'>${desc}</p>"),youtubeTemplate:_.template("<div data-src=${jsonurl} data-type='video/youtube'></div>"),videoTemplate:_.template("<div data-src=${jsonurl} data-type='${mime}'></div>"),audioTemplate:_.template("<div data-src=${jsonurl} data-type='${mime}'></div>"),imageTemplate:_.template("<img src=${jsonurl} alt='${name}' />"),pdfTemplate:_.template("<div class='pdfpreview'></div>"),flashTemplate:_.template("<object data=${jsonurl} type='application/x-shockwave-flash'><param name='movie' value=${jsonurl}></param></object>"),mathmlTemplate:_.template("<iframe src=${jsonurl}></iframe>"),xmlTemplate:_.template(
"<pre>${xml}</pre>"),htmlTemplate:_.template("<iframe src=${jsonurl}></iframe>"),generate:function(type,data){var tmpl=this[type+"Template"];if(data.jsonurl=JSON.stringify(data.url),_.isFunction(tmpl))return tmpl(data)}};documentViewer.registerProvider("pdf",pdfViewer);var previewer={init:function(options){var self=previewer;return options=_.defaults(options||{},defaults),this.each(function(){var $elt=$(this);$elt.data(dataNs)?$elt.previewer("update",options):($elt.hasClass(options.containerClass)||$elt.addClass(options.containerClass),$elt.data(dataNs,options),self._update($elt),$elt.trigger("create."+ns))})},update:function(data){return this.each(function(
){var $elt=$(this),options=$elt.data(dataNs);$elt.data(dataNs,_.merge(options,data)),previewer._update($elt)})},_setPlayer:function($elt,player){$elt.data("player",player)},_clearPlayer:function($elt){$elt&&$elt.data("player")&&($elt.data("player").destroy(),$elt.removeData("player"))},_update:function($elt){var player,$content,$controls,content,type,self=previewer,options=$elt.data(dataNs);self._clearPlayer($elt),options&&(type=options.type||mimeType.getFileType({mime:options.mime,name:options.url}),options.url&&(options.name||(options.name=options.url.substring(options.url.lastIndexOf("/")+1,options.url.lastIndexOf("."))),content=previewGenerator.generate(
type,options)),content||(content=previewGenerator.placeHolder({desc:__("No preview available"),type:options.type||options.mime||""})),($content=$(content)).on("load",function(){iframeNotifier.parent("imageloaded")}),options.width&&$content.attr("width",options.width),options.height&&$content.attr("height",options.height),$elt.empty().html($content),options.url&&("audio"===type||"video"===type?(player=mediaplayer({url:options.url,type:options.mime,renderTo:$content}).on("ready",function(){var defSize=_defaultSize[this.getType()]||_defaultSize.video,width=options.width||defSize.width,height=options.height||defSize.height;this.resize(width,height)}),
self._setPlayer($elt,player),$("body").off("keydown.mediaelement").on("keydown.mediaelement",function(event){27===event.keyCode&&self._clearPlayer($elt)}),($controls=$(".actions a:nth-child(1), .actions a:nth-child(3), .icon-close, .upload-switcher, .select-action, .files li>span","#mediaManager")).off("mousedown.mediaelement").on("mousedown.mediaelement",function(event){event.stopPropagation(),$(this).closest(".mediaplayer").length||($controls.off("mousedown.mediaelement"),self._clearPlayer($elt))})):"pdf"===type&&(documentViewer({renderTo:$content,replace:!0,width:options.width||_defaultSize.pdf.width,height:options.height||_defaultSize.pdf.height}).load(
options.url,"pdf"),_.defer(function(){iframeNotifier.parent("imageloaded")}))),$elt.trigger("update."+ns))},destroy:function(){this.each(function(){var $elt=$(this);previewer._clearPlayer($elt),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,previewer),function($container){$container.find("[data-preview]").each(function(){var $elt=$(this);$elt.previewer({url:$elt.data("preview"),type:$elt.data("preview-type"),mime:$elt.data("preview-mime"),width:$elt.width(),height:$elt.height()})})}}),define("ui/progressbar",["jquery","lodash","core/pluginifier"],function($,_,Pluginifier){"use strict";var ns="progressbar",dataNs="ui."+ns,defaults={
disableClass:"disabled",style:"info",value:0,showProgress:!1},progressBar={init:function(options){return options=_.defaults(options||{},defaults),this.each(function(){var $pgElt,percent,$elt=$(this);$elt.data(dataNs)||(options.value=parseInt(options.value,10),$elt.data(dataNs,options),percent=options.value+"%",$pgElt=$("<span></span>").width(percent).attr("title",percent),options.showProgress&&$pgElt.text(percent),$elt.addClass("progressbar").addClass(options.style).empty().append($pgElt),$elt.trigger("create."+ns))})},_update:function($elt,value){var $pgElt,percent,options=$elt.data(dataNs);0<=(value=parseInt(value,10))&&value<=100&&(percent=value+"%",(
$pgElt=$elt.children("span")).width(value+"%").attr("title",percent),options.showProgress&&$pgElt.text(percent),options.value=value,$elt.data(dataNs,options),$elt.trigger("update."+ns,value))},_value:function($elt,value){var options=$elt.data(dataNs);return void 0!==value?progressBar._update($elt,value):options.value},destroy:function(){return this.each(function(){var $elt=$(this);$elt.data(dataNs)&&($elt.removeClass("progressbar").empty().removeData(dataNs),$elt.trigger("destroy."+ns))})}};Pluginifier.register(ns,progressBar,{expose:["update","value"]})}),define("tpl!ui/report/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0
,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="component-report',((stack1=helpers.if.call(depth0,depth0&&depth0.noBorder,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return" no-border"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.detailsButtonVisible,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var helper,options,buffer=""
;return buffer+='\n    <label class="fold pseudo-label-box">\n        <span class="check-txt hide">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Hide detailed report",options):helperMissing.call(depth0,"__","Hide detailed report",options)))+'</span>\n        <span class="check-txt show">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Show detailed report",options):helperMissing.call(depth0,"__","Show detailed report",options)))+'</span>\n        <input type="checkbox"/>\n        <span class="icon-checkbox"></span>\n    </label>\n    '},data
),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="content">',stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.content)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</div>\n</div>"})}),define("tpl!ui/report/feedback",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="feedback-',
stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+" ",((stack1=helpers.if.call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:this.program(3,function(depth0,data){return"leaf"},data),fn:this.program(1,function(depth0,data){return"hierarchical"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <span class="icon-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){return" hierarchical-icon"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"></span>\n    <div class="message">',((stack1=(helper=helpers.message)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.message)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    ",((stack1=helpers.each.call(depth0,depth0&&depth0.children,{hash:{},inverse:this.noop,fn:this.program(7,function(depth0,data){var stack1,buffer=""
;return buffer+="\n        ",((stack1=typeof depth0===functionType?depth0.apply(depth0):depth0)||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="actions">\n        ',((stack1=helpers.each.call(depth0,depth0&&depth0.actions,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <button data-trigger="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'" class="action btn-info" title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(
stack1)+"</button>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>"})}),define("ui/report",["jquery","lodash","i18n","ui/form","ui/component","tpl!ui/report/layout","tpl!ui/report/feedback"],function($,_,__,form,component,layoutTpl,feedbackTpl){"use strict";var _defaults={showDetailsButton:!0,actions:[]},authorizedTypes=["success","info","warning","error"],report={isDetailed:function(){return this.is("detailed")},showDetails:function(){return this.is("rendered")&&(this.setState("detailed",!0),this.getElement().find(".fold input").prop("checked",!0),this.trigger("showDetails")),this},hideDetails:function(){
return this.is("rendered")&&(this.setState("detailed"),this.getElement().find(".fold input").prop("checked",!1),this.trigger("hideDetails")),this}};return function(config,data){var initConfig=_.defaults(config||{},_defaults);return data&&_.isArray(data.children)&&data.children.length&&(initConfig.detailsButtonVisible=initConfig.showDetailsButton),component(report).setTemplate(layoutTpl).on("render",function(){var self=this,$content=this.getElement().find(".content"),$checkbox=this.getElement().find(".fold input");$content.append(function _renderFeebacks(data,actions){var children=[];if(!data.type||-1===authorizedTypes.indexOf(data.type))throw new TypeError(
"Unkown report type: "+data.type);return _.isArray(data.children)&&data.children.length&&_.each(data.children,function(child){children.push(_renderFeebacks(child))}),data.hasChildren=0<children.length,data.children=children,data.actions=actions,feedbackTpl(data)}(_.cloneDeep(data),this.config.actions)),$content.on("click",".action",function(){var actionId=$(this).data("trigger");self.trigger("action-"+actionId),self.trigger("action",actionId)}),$checkbox.on("change",_.throttle(function(){self.isDetailed()?self.hideDetails():self.showDetails()},100))}).init(initConfig)}}),define("ui/resourcemgr/fileBrowser",["jquery","lodash"],function($,_){"use strict"
;var ns="resourcemgr";return function(options){var root=options.root||"/",path=options.path||"/",$container=options.$target,$fileBrowser=$(".file-browser .file-browser-wrapper",$container),$divContainer=$("."+root,$fileBrowser),$folderContainer=$(".folders",$divContainer),fileTree={};function getFolderContent(tree,path,cb){var content=getByPath(tree,path);content&&(content.children||content.empty)?cb(content):function(path){var parameters={};return parameters[options.pathParam]=path,$.getJSON(options.browseUrl,_.merge(parameters,options.params))}(path).done(function(data){tree.path?data.children?(_.find(content.children,"path")||(tree.empty=!0),
function setToPath(tree,path,data){var done=!1;tree&&(tree.path===path?tree.children=data:tree.children&&_.forEach(tree.children,function(child){if(done=setToPath(child,path,data))return!1}));return done}(tree,path,data.children)):tree.empty=!0:tree=_.merge(tree,data),cb(data)})}function getByPath(tree,path){var match;return tree&&(tree.path&&0===tree.path.indexOf(path)?match=tree:tree.children&&_.forEach(tree.children,function(child){if(match=getByPath(child,path))return!1})),match}function updateFolders(data,$parent,recurse){recurse&&data&&data.path&&(void 0===data.relPath&&(data.relPath=data.path),$(
'<li><a data-path="'+data.path+'" data-display="'+data.relPath+'" href="#">'+data.label+"</a></li>").appendTo($parent)),data&&data.children&&_.isArray(data.children)&&!data.empty&&_.forEach(data.children,function(child){updateFolders(child,$parent,!0)})}$folderContainer.append('<li class="root"><a class="root-folder" href="#"></a></li>'),getFolderContent(fileTree,path,function(content){var $rootNode=$(".root-folder",$folderContainer),$innerList=$("<ul></ul>").insertAfter($rootNode);content.children&&$rootNode.addClass("opened"),updateFolders(content,$innerList),$(".file-browser").find("li.active").removeClass("active"),$("li.root",$folderContainer).addClass(
"active"),$rootNode.attr("data-path",content.path).html(content.label),$container.trigger("folderselect."+ns,[content.label,content.children,content.path])}),$divContainer.off("click",".folders a").on("click",".folders a",function(e){e.preventDefault();var $selected=$(this),$folders=$(".folders li",$fileBrowser),fullPath=$selected.data("path");$selected.data("display");getFolderContent(getByPath(fileTree,fullPath),fullPath,function(content){if(content){var $innerList=$selected.siblings("ul");!$innerList.length&&content.children&&_.find(content.children,"path")&&!content.empty?(updateFolders(content,$innerList=$("<ul></ul>").insertAfter($selected)),
$selected.addClass("opened")):$innerList.length&&("none"===$innerList.css("display")?($innerList.show(),$selected.addClass("opened")):$selected.parent("li").hasClass("active")&&($innerList.hide(),$selected.removeClass("opened"))),$folders.removeClass("active"),$selected.parent("li").addClass("active"),$container.trigger("folderselect."+ns,[content.label,content.children,content.path])}})}),$container.on("filenew."+ns,function(e,file,path){var subTree=getByPath(fileTree,path);subTree&&(subTree.children||(subTree.children=[]),_.find(subTree.children,{name:file.name})||(subTree.children.push(file),$container.trigger("folderselect."+ns,[subTree.label,
subTree.children,path])))}),$container.on("filedelete."+ns,function(e,path){!function removeFromPath(tree,path){var done=!1;var removed=[];tree&&tree.children&&(removed=_.remove(tree.children,function(child){return child.path===path||child.name&&tree.path+child.name===path}),(done=0<removed.length)||_.forEach(tree.children,function(child){if(done=removeFromPath(child,path))return!1}));return done}(fileTree,path)})}}),define("util/bytes",[],function(){"use strict";return{hrSize:function(bytes){var unit=0;for(bytes=bytes||0;1024<=bytes;)bytes/=1024,unit++;return bytes.toFixed(2)+["B","kB","MB","GB","TB"][unit]}}}),define("ui/resourcemgr/filePreview",["jquery",
"lodash","util/bytes","context","ui/previewer"],function($,_,bytes,context){"use strict";var ns="resourcemgr";return function(options){var $container=options.$target,$filePreview=$(".file-preview",$container),$previewer=$(".previewer",$container),$propType=$(".prop-type",$filePreview),$propSize=$(".prop-size",$filePreview),$propUrl=$(".prop-url",$filePreview),$link=$("a",$propUrl),$selectButton=$(".select-action",$filePreview),currentSelection=[];$container.on("fileselect."+ns,function(e,file){file&&file.file?(!function(file){$previewer.previewer(file),$propType.text(file.type+" ("+file.mime+")"),$propSize.text(bytes.hrSize(file.size)),$link.attr("href",
file.download).attr("download",file.file),$link.hasClass("hidden")&&$link.removeClass("hidden");$selectButton.removeAttr("disabled")}(file),currentSelection=file):($previewer.previewer("update",{url:!1}),$propType.empty(),$propSize.empty(),$("a",$propUrl).addClass("hidden"),$selectButton.attr("disabled","disabled"))}),$selectButton.on("click",function(e){e.preventDefault();var data=_.pick(currentSelection,["file","type","mime","size","alt"]);context.mediaSources&&0===context.mediaSources.length&&-1<data.file.indexOf("local/")&&(data.file=data.file.substring(6)),$container.trigger("select."+ns,[[data]])})}}),define("tpl!ui/resourcemgr/tpl/fileSelect",[
"handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return((stack1=helpers.each.call(depth0,depth0&&depth0.files,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n<li data-type="',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+'" data-file="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-display="',stack1=(helper=helpers.display)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.display)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-mime="',stack1=(helper=helpers.mime)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.mime)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'" data-size="',stack1=(helper=helpers.size)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.size)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-url="',stack1=(helper=helpers.viewUrl)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.viewUrl)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-download="',stack1=(helper=helpers.downloadUrl)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.downloadUrl)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+'" data-alt="',stack1=(helper=helpers.alt)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.alt)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    <span class="desc truncate">',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'</span>\n    <div class="actions">\n        <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <a href="#" class="tlb-button-off select" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Select this file",options):helperMissing.call(depth0,"__","Select this file",options)))+'"><span class="icon-move-item"></span></a>\n                            <a href="',stack1=(
helper=helpers.downloadUrl)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.downloadUrl)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" download="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" target="_blank" class="tlb-button-off download" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Download this file",options):helperMissing.call(depth0,"__","Download this file",
options)))+'"><span class="icon-download"></span></a>\n                            <a href="#" class="tlb-button-off" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Remove this file",options):helperMissing.call(depth0,"__","Remove this file",options)))+'" data-delete=":parent li"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n</li>\n'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n"})}),define(
"tpl!ui/uploader/uploader",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="file-upload grid-row">\n    <span class="btn-info btn-browse small col-5"><span class="icon-folder-open"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Browse...",options):helperMissing.call(depth0,"__","Browse...",options))
)+'</span>\n    <span class="file-name col-7 truncate placeholder">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"No file selected",options):helperMissing.call(depth0,"__","No file selected",options)))+'</span>\n    <input type="file" name="',stack1=(helper=helpers.inputName)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.inputName)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n</div>\n\x3c!--<div class="grid-row" style="display:none;">--\x3e\n\x3c!--<ul class="file-list"></ul>--\x3e\n\x3c!--</div>--\x3e\n<div class="grid-row">\n    <div class="file-drop col-12" data-drop-msg="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Drop the files to upload",options):helperMissing.call(depth0,"__","Drop the files to upload",options)))+'">\n        <div class="dragholder">\n            ~ '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"or",options):helperMissing.call(
depth0,"__","or",options)))+" ~\n            <br/>\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.program(5,function(depth0,data){var helper,options,buffer="";return buffer+="\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Drag file here",options):helperMissing.call(depth0,"__","Drag file here",options)))+"\n            "},data),fn:this.program(3,function(depth0,data){var helper,options,buffer="";return buffer+="\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Drag files here",options):helperMissing.call(depth0,"__","Drag files here",options)))+"\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n    </div>\n</div>\n<div class="grid-row">\n    <div class="progressbar col-12"></div>\n    <br/>\n</div>\n<div class="grid-row">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.showResetButton,{hash:{},inverse:this.noop,fn:this.program(7,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <button type="button" class="btn-info btn-reset small"><span class="icon-eraser"></span>'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Reset",options):helperMissing.call(depth0,"__","Reset",options)))+"</button>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.showUploadButton,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-success btn-upload small"><span class="icon-upload"></span>',stack1=(helper=helpers.uploadBtnText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uploadBtnText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+"</button>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"})}),define("tpl!ui/uploader/fileEntry",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<li data-file-name="',buffer+=escapeExpression((helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    ',
buffer+=escapeExpression((helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'\n    <span class="size">',buffer+=escapeExpression((helper=helpers.size)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.size)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n    <span class="status"></span>\n    <a href="#" data-role="delete"><span class="icon-close"></span></a>\n</li>\n'})}),define("ui/uploader",["jquery","lodash","i18n","async","core/pluginifier","context","util/bytes","tpl!ui/uploader/uploader",
"tpl!ui/uploader/fileEntry","ui/filesender","ui/progressbar"],function($,_,__,async,Pluginifier,context,bytes,uploaderTpl,fileEntryTpl){"use strict";var ns="uploader",dataNs="ui."+ns,defaults={upload:!0,read:!1,multiple:!1,uploadQueueSize:3,inputName:"content",showResetButton:!0,showUploadButton:!0,browseBtnClass:"btn-browse",uploadBtnClass:"btn-upload",resetBtnClass:"btn-reset",fileNameClass:"file-name",dropZoneClass:"file-drop",progressBarClass:"progressbar",dragOverClass:"drag-hover",formAttributes:{class:"uploader uploaderContainer"},defaultErrMsg:__("Unable to upload file"),uploadBtnText:__("Upload"),fileSelect:function(files,done){return _.isFunction(
done)?done(files):files}},tests={filereader:"undefined"!=typeof FileReader,dnd:"draggable"in document.createElement("span")},uploader={init:function(options){var self=uploader;return options=_.defaults(options||{},defaults),this.each(function(){var $builtInForm,$elt=$(this);if(!$elt.data(dataNs)){$elt.html(uploaderTpl(options)),($builtInForm=options.$form&&options.$form.length?options.$form:$elt.find("form")).length||($builtInForm=$elt.closest("form")),$builtInForm.length||($elt.wrap($("<form>",options.formAttributes)),$builtInForm=$elt.parent()),options.$input=$("input[type=file]",$elt),options.$browseBtn=$("."+options.browseBtnClass,$elt),
options.$fileName=$("."+options.fileNameClass,$elt),options.$dropZone=$("."+options.dropZoneClass,$elt),options.$progressBar=$("."+options.progressBarClass,$elt),options.$form=$builtInForm,options.$uploadBtn=$("."+options.uploadBtnClass,$elt),options.$resetBtn=$("."+options.resetBtnClass,$elt),options.useDropZone=tests.dnd,options.dropZonePlaceholder=options.$dropZone.html(),options.fileNamePlaceholder=options.$fileName.text(),options.files=[],$elt.data(dataNs,options),self._reset($elt);var dragOutHandler=function(e){e.preventDefault(),e.stopPropagation(),options.$dropZone.removeClass(options.dragOverClass)};if(!tests.filereader)throw new Error(
"FileReader API not supported! Please use a compliant browser!");options.$input.on("change",function(e){var finalFiles=[];_.forEach(e.target.files,function(file){finalFiles.push(file)}),self._selectFiles($elt,finalFiles)}),options.$input.on("mousedown",function(e){return e.preventDefault(),$(this).blur(),!1}),options.useDropZone?($(document).off("drop."+ns).on("drop."+ns,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1}),$(document).off("dragover."+ns).on("dragover."+ns,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1}),options.$dropZone.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),
options.$dropZone.addClass(options.dragOverClass)}).on("dragend",dragOutHandler).on("dragleave",dragOutHandler).on("drop",function(e){var files=[];if(dragOutHandler(e),e.target.files?files=_.values(e.target.files):e.originalEvent.files?files=_.values(e.originalEvent.files):e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&(files=_.values(e.originalEvent.dataTransfer.files)),files&&files.length){var append=0<options.$dropZone.children("ul").length;options.multiple||(append=!(files=[files[0]])),self._selectFiles($elt,files,append)}return!1})):options.$dropZone.hide(),$elt.on("fileselect."+ns,function(){0===options.files.length&&self._reset($elt
),options.upload&&options.$uploadBtn.off("click").on("click",function(e){e.preventDefault(),self._upload($elt,options.files)}).removeProp("disabled"),options.read&&self._read($elt,options.files),options.$resetBtn.off("click").on("click",function(e){e.preventDefault(),self._reset($elt)}).removeProp("disabled")}),$elt.trigger("create."+ns)}})},_selectFiles:function($elt,files,append){var listContent,self=this,options=$elt.data(dataNs),updateFileName=function(){var length=options.files.length;options.$fileName.text(length+" "+__(1<length?"files selected":"file selected")).removeClass("placeholder")};files.length<=0&&!append&&self._reset($elt),
0<files.length&&options.fileSelect.call($elt,files,function(filteredFiles){options.files=append?options.files.concat(filteredFiles):filteredFiles,options.useDropZone?(updateFileName(),listContent=_.reduce(filteredFiles,function(acc,file){return acc+fileEntryTpl({name:file.name,size:bytes.hrSize(file.size)})},""),append?options.$dropZone.children("ul").append(listContent):options.$dropZone.html("<ul>"+listContent+"</ul>"),options.$dropZone.off("click."+ns).on("click."+ns,"[data-role=delete]",function(e){var $fileEntry=$(this).parent(),name=$fileEntry.data("file-name");e.preventDefault(),e.stopPropagation(),name&&(options.files=_.reject(options.files,{
name:name}),0===options.files.length?self._reset($elt):updateFileName(),$fileEntry.remove())})):(options.files=options.files.slice(0,1),options.$fileName.text(files[0].name).removeClass("placeholder")),$elt.trigger("fileselect."+ns)})},_files:function($elt){var files=[],options=$elt.data(dataNs);return options&&(files=options.files),files},_reset:function($elt){var options=$elt.data(dataNs);options.$fileName.text(options.fileNamePlaceholder).addClass("placeholder"),options.$dropZone.empty().html(options.dropZonePlaceholder),options.$uploadBtn.prop("disabled",!0),options.$resetBtn.prop("disabled",!0),options.$progressBar&&options.$progressBar.removeClass(
"success").progressbar("destroy").progressbar({value:0}),$elt.trigger("reset."+ns)},_upload:function($elt){var length,$fileEntries,entryHeight,q,errors=[],options=$elt.data(dataNs);options&&options.files.length&&(length=options.files.length,$fileEntries=$("ul",options.$dropZone),entryHeight=$("li:first",$fileEntries).outerHeight(),q=async.queue(function(file,done){var $fileEntry=$('li[data-file-name="'+file.name+'"]',$fileEntries),$status=$(".status",$fileEntry),index=$fileEntries.children().index($fileEntry);options.$dropZone.stop(!0,!0).animate({scrollTop:index*entryHeight},25),$status.removeClass("success").removeClass("error").addClass("sending"),
options.$form.sendfile({url:options.uploadUrl,file:file,loaded:function(result){$status.removeClass("sending").removeClass("error").addClass("success"),done(null,result)},failed:function(message){message=message||options.defaultErrMsg,$status.removeClass("sending").removeClass("success").addClass("error").attr("title",message),done(new Error(message))}})},options.uploadQueueSize||1),options.$uploadBtn.prop("disabled",!0),options.$resetBtn.prop("disabled",!0),options.$progressBar.progressbar("value",0),_.forEach(options.files,function(file,index){_.delay(function(){q.push(file,function(err,result){var complete=(index+1)/length*100;err?(errors.push(err),
$elt.trigger("fail."+ns,[file,err])):$elt.trigger("upload."+ns,[file,result]),options.$progressBar.progressbar("value",complete),100<=complete&&(errors.length===length?options.$progressBar.addClass("error"):0<errors.length?options.$progressBar.addClass("warning"):options.$progressBar.addClass("success"),$elt.trigger("end."+ns))})},50)}))},_read:function($elt){var options=$elt.data(dataNs);options&&options.files.length&&_.forEach(options.files,function(file){file.name,file.size,file.type;var reader=new FileReader;reader.onload=function(e){options.$progressBar.progressbar("value",100),$elt.trigger("readend."+ns,[file,e.target.result])},
reader.onloadstart=function(e){options.$progressBar.progressbar("value",0),$elt.trigger("readstart."+ns,[file])},options.$progressBar.length&&(reader.onprogress=function(e){var percentProgress=Math.ceil(Math.round(e.loaded)/Math.round(e.total)*100);options.$progressBar.progressbar("value",percentProgress)}),reader.readAsDataURL(file)})},destroy:function(){this.each(function(){var $elt=$(this);$(document).off("drop."+ns).off("dragover."+ns),$elt.empty(),$elt.trigger("destroy."+ns)})}};Pluginifier.register(ns,uploader,{expose:["reset","selectFiles","upload","read"]})}),define("ui/resourcemgr/fileSelector",["jquery","lodash","async","i18n","core/mimetype",
"tpl!ui/resourcemgr/tpl/fileSelect","ui/feedback","ui/uploader","context"],function($,_,async,__,mimeType,fileSelectTpl,feedback,uploader,context){"use strict";var ns="resourcemgr";return function(options){var root=options.root||"/",disableUpload=options.disableUpload||!1,$container=options.$target,$fileSelector=$(".file-selector",$container),$fileContainer=$(".files",$fileSelector),$placeholder=$(".empty",$fileSelector),$uploader=$(".file-upload-container",$fileSelector),parentSelector="#"+$container.attr("id")+" .file-selector",$pathTitle=$fileSelector.find("h1 > .title"),$browserTitle=$(".file-browser > h1",$container);disableUpload?$(".upload-switcher",
$fileSelector).remove():function(currentPath){var errors=[],$switcher=$(".upload-switcher a",$fileSelector);$uploader.on("upload.uploader",function(e,file,result){var path=$('[data-display="'+currentPath+'"]').data("path")||$('[data-display="/'+currentPath+'"]').data("path");void 0!==path&&""!==path||(path=currentPath),$container.trigger("filenew."+ns,[result,path])}),$uploader.on("fail.uploader",function(e,file,err){errors.push(__("Unable to upload file %s : %s",file.name,err.message))}),$uploader.on("end.uploader",function(){0===errors.length?_.delay(switchUpload,500):feedback().error("<ul><li>"+errors.join("</li><li>")+"</li></ul>",{encodeHtml:!1}),
errors=[]}),$uploader.uploader({upload:!0,multiple:!0,uploadUrl:options.uploadUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+currentPath,fileSelect:function(files,done){var givenLength=files.length,fileNames=[];if($fileContainer.find("li > .desc").each(function(){fileNames.push($(this).text().toLowerCase())}),options.params.filters){var i,filters=[];if(_.isString(options.params.filters))filters=options.params.filters.split(",");else for(i in options.params.filters)filters.push(options.params.filters[i].mime);(files=_.filter(files,function(file){var checkType=file.type.replace(/^["']+|['"]+$/g,"");return _.contains(filters,checkType)})
).length!==givenLength&&feedback().error("Unauthorized files have been removed")}async.filter(files,function(file,cb){var result=!0;if(options.fileExistsUrl){var pathParam=currentPath+"/"+file.name;pathParam.replace("//","/"),$.getJSON(options.fileExistsUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+pathParam,function(response){response&&!0===response.exists&&(result=window.confirm("Do you want to override "+file.name+"?")),cb(result)})}else _.contains(fileNames,file.name.toLowerCase())&&(result=window.confirm("Do you want to override "+file.name+"?")),cb(result)},done)}}),$container.on("folderselect."+ns,function(e,fullPath,data,uri){
currentPath=uri,$uploader.uploader("options",{uploadUrl:options.uploadUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+currentPath+"&relPath="+currentPath})}),$switcher.click(function(e){e.preventDefault(),switchUpload()});var switchUpload=function(){"none"===$fileContainer.css("display")?($uploader.hide(),$fileContainer.show(),$switcher.filter(".upload").css({display:"inline-block"}),$switcher.filter(".listing").hide(),$browserTitle.text(__("Browse folders:"))):($fileContainer.hide(),$placeholder.hide(),$uploader.show(),$switcher.filter(".upload").hide(),$switcher.filter(".listing").css({display:"inline-block"}),$browserTitle.text(__("Upload into:"
)),$uploader.uploader("reset"))}}(root);$container.on("folderselect."+ns,function(e,fullPath,data,activePath){var tokens,start,end,$element,text,$dummy,textSize;$pathTitle.text((text=fullPath,$dummy=($element=$pathTitle).clone().detach().css({position:"absolute",visibility:"hidden","text-overflow":"clip",width:"auto"}).text(text).insertAfter($element),textSize=$dummy.width(),$dummy.remove(),textSize>$element.width()?(tokens=fullPath.replace(/\/$/,"").split("/"),start=tokens.length-3,end=tokens.length-1,_.map(tokens,function(token,index){return start<index&&token?index<end?token[0]:token:void 0}).filter(Boolean).join("/")):fullPath)),_.isArray(data)&&(
function(path,files){$fileContainer.empty(),files.length?($placeholder.hide(),$fileContainer.append(fileSelectTpl({files:files}))):"none"!==$fileContainer.css("display")&&$placeholder.show()}(0,_.filter(data,function(item){return!!item.uri}).map(function(file){return file.type=mimeType.getFileType(file),void 0===file.identifier?file.display=(fullPath+"/"+file.name).replace("//","/"):file.display=file.identifier+file.name,file.viewUrl=options.downloadUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+encodeURIComponent(file.uri),file.downloadUrl=file.viewUrl+"&svgzsupport=true",file})),activePath&&$('li[data-file="'+activePath+'"]').trigger("click"))})
,$(parentSelector).off("click",".files li").on("click",".files li",function(e){var $selected=$(this),$files=$(".files > li",$fileSelector),data=_.clone($selected.data());$files.removeClass("active"),$selected.addClass("active"),$container.trigger("fileselect."+ns,[data])}),$(parentSelector).off("click",".files li a.select").on("click",".files li a.select",function(e){e.preventDefault();var data=_.pick($(this).parents("li").data(),["file","type","mime","size","alt"]);context.mediaSources&&0===context.mediaSources.length&&-1<data.file.indexOf("local/")&&(data.file=data.file.substring(6)),$container.trigger("select."+ns,[[data]])}),$fileContainer.on(
"delete.deleter",function(e,$target){var path,params={};"deleter"===e.namespace&&$target.length&&(path=$target.data("file"),params[options.pathParam]=path,$.getJSON(options.deleteUrl,_.merge(params,options.params),function(response){response.deleted&&$container.trigger("filedelete."+ns,[path])}))})}}),define("tpl!ui/resourcemgr/tpl/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing
;return buffer+='<div class="resourcemgr modal">\n\n    <h2>',buffer+=escapeExpression((helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'</h2>\n\n    <div class="file-wrapper">\n    \n        \x3c!-- left section: items selection --\x3e\n        <section class="file-browser">\n            <h1>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Browse resources",options):helperMissing.call(depth0,"__","Browse resources",options))
)+'</h1>\n            <div class="file-browser-wrapper"></div>\n        </section>\n \n        \x3c!-- test editor  --\x3e\n        <section class="file-selector">\n\n            <h1>\n                <div class="title lft"></div>\n                <div class="upload-switcher rgt">\n                    <a href="#" class="btn-info small upload"><span class="icon-add"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Add file(s)",options):helperMissing.call(depth0,"__","Add file(s)",options))
)+'</a>\n                    <a href="#" class="btn-info small listing"><span class="icon-undo"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Back to listing",options):helperMissing.call(depth0,"__","Back to listing",options)))+'</a>\n                </div>\n            </h1>\n\n            <div class="empty">\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"No files",options):helperMissing.call(depth0,"__","No files",options))
)+'\n            </div>\n\n            <ul class="files"></ul>\n\n            <div class="file-upload-container"></div>\n\n        </section>\n\n        <section class="file-preview">\n\n            <h1>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Preview",options):helperMissing.call(depth0,"__","Preview",options)))+'</h1>\n\n            <div class="previewer">\n                <p class="nopreview">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"No Preview available",options):helperMissing.call(depth0,"__","No Preview available",options))
)+'</p>\n            </div>\n       \n            <h2 class="toggler" data-toggle="~ .file-properties">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"File Properties",options):helperMissing.call(depth0,"__","File Properties",options)))+'</h2>\n\n            <div class="file-properties">\n\n                <div class="grid-row">\n                    <div class="col-2">\n                        '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Type",options):helperMissing.call(depth0,"__","Type",options))
)+'\n                    </div>\n                    <div class="col-10 prop-type"></div>\n                </div>\n\n                <div class="grid-row">\n                    <div class="col-2">\n                        '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Size",options):helperMissing.call(depth0,"__","Size",options))
)+'\n                    </div>\n                    <div class="col-10 prop-size"></div>\n                </div>\n            \n                <div class="grid-row prop-url">\n                    <div class="actions">\n                        <a href="#" download="" target="_blank" class="tlb-button-off download hidden" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Download this file",options):helperMissing.call(depth0,"__","Download this file",options))
)+'">\n                            <button class="btn-info small">\n                                <span class="icon-download"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Download this file",options):helperMissing.call(depth0,"__","Download this file",options)))+'\n                            </button>\n                        </a>\n                    </div>\n                </div>\n            </div>\n\n            <h2 class="toggler" data-toggle="~ .actions">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Actions",options
):helperMissing.call(depth0,"__","Actions",options)))+'</h2>\n\n            <div class="actions">\n                <button class="btn-success select-action small" disabled>\n                    <span class="icon-move-item"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Select",options):helperMissing.call(depth0,"__","Select",options)))+"\n                </button>\n            </div>\n\n        </section>\n\n    </div>\n</div>\n"})}),define("ui/resourcemgr",["jquery","lodash","core/pluginifier","core/dataattrhandler","ui/modal","ui/resourcemgr/fileBrowser","ui/resourcemgr/filePreview",
"ui/resourcemgr/fileSelector","tpl!ui/resourcemgr/tpl/layout"],function($,_,Pluginifier,DataAttrHandler,modal,fileBrowser,filePreview,fileSelector,layout){"use strict";var ns="resourcemgr",dataNs="ui."+ns,defaults={mediaSources:[{root:"local",path:"/"}],open:!0,appendContainer:".tao-scope:first",title:""},resourceMgr={init:function(options){var self=resourceMgr;return options=_.defaults(options,defaults),this.each(function(){var $target,$elt=$(this);if($elt.data(dataNs))(options=$elt.data(dataNs)).open&&self._open($elt);else{$elt.data(dataNs,options),_.functions(options).forEach(function(eventName){$elt.on(eventName+"."+ns,function(){
options[eventName].apply($elt,arguments)})}),($target=options.$target||self._createTarget($elt)).modal({startClosed:!0,minWidth:"responsive"}),$target.on("select."+ns,function(e,files){self._close($elt),$elt.trigger(e,[files])}),$target.on("closed.modal",function(){$elt.trigger("close."+ns)});var $fileBrowser=$(".file-browser .file-browser-wrapper",$target);options.mediaSourcesUrl?$.getJSON(options.mediaSourcesUrl).done(function(data){for(var mediaSources=data||defaults.mediaSources,i=0;i<mediaSources.length;i++)options.root=mediaSources[i].root,options.path=mediaSources[i].path,$fileBrowser.append(
'<div class="'+options.root+'"><ul class="folders"></ul></div>'),fileBrowser(options)}).fail(function(){for(var i=0;i<defaults.mediaSources.length;i++)options.root=defaults.mediaSources[i].root,options.path=defaults.mediaSources[i].path,$fileBrowser.append('<div class="'+options.root+'"><ul class="folders"></ul></div>'),fileBrowser(options)}):options.path&&options.root&&($fileBrowser.append('<div class="'+options.root+'"><ul class="folders"></ul></div>'),fileBrowser(options)),$fileBrowser.find("li.root:last").addClass("active"),fileSelector(options),filePreview(options),$elt.trigger("create."+ns,[$target[0]]),options.open&&self._open($elt)}})},
_createTarget:function($elt){var options=$elt.data(dataNs);return options&&(options.targetId="resourcemgr-"+$(document).find(".resourcemgr").length,options.$target=$(layout({title:options.title||""})),options.$target.attr("id",options.targetId).css("display","none").appendTo(options.appendContainer),$elt.data(dataNs,options)),options.$target},_open:function($elt){var options=$elt.data(dataNs);options&&options.$target&&(options.$target.modal("open"),$elt.trigger("open."+ns))},_close:function($elt){var options=$elt.data(dataNs);options&&options.$target&&options.$target.modal("close")},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(
dataNs);$elt.data(dataNs,null),void 0!==options.bindEvent&&!1!==options.bindEvent&&$elt.off(options.bindEvent),options.targetId&&$("#"+options.targetId).remove(),$(window).off("resize.resourcemgr"),$elt.trigger("destroy."+ns)})}};Pluginifier.register(ns,resourceMgr)}),define("ui/scroller",["lodash","jquery","core/promise","ui/autoscroll","util/shortcut"],function(_,$,Promise,autoscroll,shortcuts){"use strict";var ns=".scroller";return{scrollTo:function(element,container,scrollSpeed){return new Promise(function(resolve){var currentScrollTop,scrollTop,$element=$(element),$container=$(container||$element.parent());$element.length&&$container.length?(
currentScrollTop=$container.scrollTop(),(scrollTop=$element.offset().top-$container.offset().top+currentScrollTop)!==currentScrollTop?$container.animate({scrollTop:scrollTop},scrollSpeed).promise().done(resolve):resolve()):resolve()})},disableScrolling:function(){["MouseScrollUp","MouseScrollDown","ArrowUp","ArrowDown"].forEach(function(shortcutName){shortcuts.add(shortcutName+ns,function(e){e.preventDefault()},{prevent:!1})})},enableScrolling:function(){shortcuts.remove(ns)}}}),define("tpl!ui/switch/tpl/switch",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;function program3(depth0,data){return"active"}return buffer+='<div class="switch" title="',buffer+=escapeExpression(stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    <input type="checkbox" name="',buffer+=escapeExpression(stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'" ',((
stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.on)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"checked"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <label>\n        <span class="off ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.off)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.off)||!1===stack1?stack1:stack1.label)?stack1.apply(depth0):stack1
)+'</span>\n        <span class="on  ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.on)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.on)||!1===stack1?stack1:stack1.label)?stack1.apply(depth0):stack1)+"</span>\n    </label>\n</div>\n"})}),define("css!ui/switch/css/switch",[],function(){}),define("ui/switch/switch",["jquery","lodash","i18n","ui/component","lib/uuid","tpl!ui/switch/tpl/switch","css!ui/switch/css/switch.css"],function($,_,__,component,uuid,switchTpl){
"use strict";var states_on="on",states_off="off",defaultConfig={on:{label:__("On")},off:{label:__("Off"),active:!0},title:""};return function($container,config){var onElt,offElt,switchComponent=component({getName:function(){return this.config.name},isOn:function(){return this.is(states_on)},isOff:function(){return!this.is(states_on)},setOn:function(){return this.isOn()||this.setState(states_on,!0),this.is("rendered")&&(offElt.removeClass("active"),onElt.addClass("active"),this.trigger("change",states_on).trigger(states_on)),this},setOff:function(){return this.isOff()||this.setState(states_on,!1),this.is("rendered")&&(onElt.removeClass("active"),
offElt.addClass("active"),this.trigger("change",states_off).trigger(states_off)),this},toggle:function(){return this.isOn()?this.setOff():this.setOn()},getValue:function(){return this.is(states_on)?states_on:states_off}},defaultConfig).setTemplate(switchTpl).on("init",function(){this.config.name||(this.config.name="switch-"+uuid()),this.config.on=_.defaults(this.config.on,defaultConfig.on),this.config.off=_.defaults(this.config.off,defaultConfig.off),!0===this.config.on.active?(this.config.off.active=!1,this.setOn()):this.setOff(),this.render($container)}).on("render",function(){var self=this,$component=this.getElement();onElt=$("."+states_on,$component),
offElt=$("."+states_off,$component),$(":checkbox",$component).on("change",function(e){e.preventDefault(),self.toggle()})});return _.defer(function(){switchComponent.init(config)}),switchComponent}}),define("ui/tableModel",["lodash","jquery"],function(_,$){"use strict";return function($table){var cellsByRow;function update(){var rowsInOrder=[].concat($table.find("thead tr").toArray()).concat($table.find("tbody tr").toArray()).concat($table.find("tfoot tr").toArray());cellsByRow=[],rowsInOrder.forEach(function(row){var $rowCells=$(row).find("th,td");cellsByRow.push($rowCells)})}if(!$table||!$table.is("table"))throw new TypeError(
"$table should contain a reference to a table element");return update(),{getRowCount:function(){return cellsByRow.length},getRowCells:function(index){return index<0&&(index+=cellsByRow.length),cellsByRow[index]||$()},getColCount:function(){return cellsByRow[0].length},getColCells:function(index){var columnCells=[];return _.isFinite(index)&&cellsByRow.forEach(function($row){var cell=$row.get(index);cell&&columnCells.push(cell)}),columnCells.length?$(columnCells):$()},update:update}}}),define("tpl!ui/taskQueue/tpl/status",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="task-queue-status"></div>'})}),define("tpl!ui/taskQueue/tpl/statusMessage",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="message">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.name,{hash:{},inverse:this.program(3,function(depth0,data){var helper,options,buffer=""
;return buffer+="\n        "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Status",options):helperMissing.call(depth0,"__","Status",options)))+"\n    "},data),fn:this.program(1,function(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n        "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Status of",options):helperMissing.call(depth0,"__","Status of",options)))+' <span class="task-name">',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0
,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    : <span class="task-status">',stack1=(helper=helpers.status)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.status)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n</div>"})}),define("ui/taskQueue/status",["jquery","lodash","i18n","core/dataProvider/request","core/polling","core/taskQueue","ui/component","ui/report","tpl!ui/taskQueue/tpl/status","tpl!ui/taskQueue/tpl/statusMessage"],function($,_,__,request,polling,taskQueue,component,
report,statusTpl,messageTpl){"use strict";var _status={loading:__("Loading status"),created:__("Not started"),running:__("In progress"),finished:__("Completed")},_defaults={serviceUrl:"",taskId:"",taskStatus:_status.loading,showDetailsButton:!0,actions:[]},statusComponent={start:function(){return this.taskQueueApi&&this.taskQueueApi.pollStatus(this.config.taskId),this},stop:function(){return this.taskQueueApi&&this.taskQueueApi.pollStop(),this}};return function(config){var taskQueueStatus;if(config=_.defaults(config||{},_defaults),_.isEmpty(config.serviceUrl))throw new TypeError("The task queue status needs to be configured with a service url")
;var createReport=function(reportType,message,taskReport){var innerTaskReport,reportData={type:reportType,message:message};return _.isPlainObject(taskReport)&&taskReport.type&&_.isArray(taskReport.children)&&taskReport.children.length&&(innerTaskReport=taskReport.children[0],reportData.type=innerTaskReport.type,reportData.children=taskReport.children),report({replace:!0,noBorder:!0,showDetailsButton:config.showDetailsButton,actions:config.actions},reportData).on("action",function(actionId){taskQueueStatus.trigger("action-"+actionId),taskQueueStatus.trigger("action",actionId)}).on("showDetails",function(){taskQueueStatus.trigger("showDetails")}).on(
"hideDetails",function(){taskQueueStatus.trigger("hideDetails")}).render(taskQueueStatus.getElement()).showDetails()};return taskQueueStatus=component(statusComponent).setTemplate(statusTpl).on("destroy",function(){this.taskQueueApi&&this.taskQueueApi.pollStop()}).on("render",function(){var self=this;config.data&&"finished"===config.data.status?self.report=createReport(config.data.report.type||"info",messageTpl({name:config.data.label,status:_status.finished}),config.data.report||{}):(self.report=createReport("info",__("Loading task status ...")),this.taskQueueApi=taskQueue({url:{status:config.serviceUrl}}).on("running",function(taskData){
"running"!==self.status&&(self.report=createReport("info",messageTpl({name:taskData.label,status:_status.running})),self.status="running",self.trigger("statechange",self.status)),self.trigger("running",taskData)}).on("finished",function(taskData){"finished"!==self.status&&(self.report=createReport(taskData.report.type||"info",messageTpl({name:taskData.label,status:_status.finished}),taskData.report||{}),self.status="finished",self.trigger("finished",taskData),self.trigger("statechange",self.status))}).on("error",function(err){self.trigger("error",err)}))}).init(config)}}),define("tpl!ui/taskQueue/tpl/report",["handlebars"],function(hb){return hb.template(
function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="report-container"></div>'})}),define("ui/taskQueue/table",["jquery","lodash","i18n","moment","core/taskQueue","ui/component","ui/taskQueue/status","tpl!ui/taskQueue/tpl/report","ui/datatable","ui/modal","jquery.fileDownload"],function($,_,__,moment,taskQueueApi,component,taskQueueStatusFactory,reportTpl){"use strict";var _defaults={context:"",urls:{listing:"",remove:"",download:""},status:{loading:__("Loading status"),created:__("Not started"),running:__("In progress"),finished:__("Completed"),
finishedSuccess:__("Completed"),finishedError:__("Completed - Error")},statusFilter:["loading","created","running","finished","finishedSuccess","finishedError"]},isReport=function(report){return _.isPlainObject(report)&&report.type&&report.message};return function(config){var tasks,errorRows;if(config=_.defaults(config,_defaults),_.isEmpty(config.context))throw new TypeError("The task queue provider needs to be initalized with a context");return component({showReport:function(taskId){var status,data,$report=this.$component.find(".report-container"),$dataTable=this.$component.find(".datatable-wrapper");$report.length||($report=$(reportTpl()),
this.$component.append($report)),$dataTable.hide();var task=_.find(tasks,{id:taskId});return task&&"finished"===task.status&&task.report&&(data=task),status=taskQueueStatusFactory({replace:!0,taskId:taskId,serviceUrl:this.config.statusUrl,showDetailsButton:!1,actions:[{id:"back",icon:"backward",title:__("Back to listing"),label:__("Back")}],data:data}).on("action-back",function(){status.destroy(),$dataTable.show()}).render($report).start(),this},remove:function(taskId){var self=this;return this.taskQueueApi.remove(taskId).then(function(){self.$component.datatable("refresh"),self.trigger("removed",taskId)}).catch(function(err){self.trigger("error",err)}),this
},download:function(taskId){var self=this;return $.fileDownload(this.config.downloadUrl,{data:{taskId:taskId},failCallback:function(){self.trigger("error",__("File download failed"))}}),this}},config).on("init",function(){this.taskQueueApi=taskQueueApi({url:{status:this.config.serviceUrl,remove:this.config.removeUrl}})}).on("render",function(){var self=this,$component=this.getElement(),actions=[{id:"delete",icon:"bin",title:__("Remove"),disabled:function(){return this.status!==config.status.finished&&this.status!==config.status.finishedError&&this.status!==config.status.finishedSuccess},action:function(id){self.remove(id)}},{id:"report",icon:"templates",
title:__("View report"),disabled:function(){return this.status===config.status.created},action:function(id){self.showReport(id)}}];void 0!==this.config.downloadUrl&&""!==this.config.downloadUrl&&actions.push({id:"download",icon:"download",title:__("Download"),disabled:function(){return this.status!==config.status.finished&&this.status!==config.status.finishedSuccess},action:function(id){self.download(id)}}),$component.addClass("task-queue-table").on("beforeload.datatable",function(e,dataSet){dataSet&&dataSet.data&&(tasks=dataSet.data)}).on("query.datatable",function(){errorRows=[],self.trigger("loading")}).on("load.datatable",function(){_.isArray(errorRows
)&&errorRows.length&&_.forEach(errorRows,function(id){$component.datatable("addRowClass",id,"error")}),self.trigger("loaded")}).datatable({url:this.config.dataUrl,rows:this.config.rows,sortorder:"desc",filtercolumns:{type:this.config.context,status:this.config.statusFilter},status:{empty:__("No Task yet"),available:__("Task Listing"),loading:__("Loading")},tools:[{id:"refresh",icon:"reset",title:__("Refresh"),label:__("Refresh"),action:function(){self.$component.datatable("refresh"),self.trigger("refresh")}}],model:[{id:"label",label:__("Task Name")},{id:"creationDate",label:__("Created"),transform:function(value){return date=value,self.config,moment.unix(
date).fromNow();var date}},{id:"status",label:__("Status"),transform:function(value,row){return"finished"===row.status?function(report){if(isReport(report)&&_.isArray(report.children)&&isReport(report.children[0]))return"error"===report.children[0].type}(row.report)?(errorRows.push(row.id),config.status.finishedError):config.status.finishedSuccess:config.status[row.status]||""}},{id:"actions",label:__("Actions"),type:"actions",actions:actions}],selectable:!1})}).on("reload",function(){this.$component&&this.$component.datatable("refresh")})}}),define("ui/themeLoader",["jquery","lodash"],function($,_){"use strict";var prefix="custom-theme-",$container=$("head"
).length?$("head"):$("body"),triggerThemeChange=function(themeId){_.delay(function(){$(document).trigger("themechange.themeloader",[themeId])},200)},getLink=function(id){return $('link[data-id="'+id+'"][data-type^="'+prefix+'"]',$container)},isAttached=function(id){return 0<getLink(id).length},enable=function($nodes){$nodes.prop("disabled",!1).removeProp("disabled").removeAttr("disabled")},disable=function($nodes){return $nodes.prop("disabled",!0).attr("disabled",!0)};return function(config){var defaultTheme,activeTheme,themes,i,styles={};if(!_.isPlainObject(config))throw new TypeError("Theme loader configuration is required");if(!_.isString(config.base)
)throw new TypeError("Theme loader configuration is an object with a base property configuration");if(!_.isArray(config.available)||!config.available.length)throw new TypeError("No theme declared in the configuration");for(i in config.available)if(!_.isPlainObject(config.available[i])||_.isEmpty(config.available[i].id)||_.isEmpty(config.available[i].path))throw new TypeError("There is a theme that does not contain an id or a path");return defaultTheme=config.default||_.first(_.pluck(config.available,"id")),activeTheme=defaultTheme,themes=(themes=[{id:"base",path:config.base,name:"TAO"}]).concat(config.available),_.forEach(themes,function(theme){isAttached(
theme.id)?styles[theme.id]=getLink(theme.id):styles[theme.id]=function(theme){var type="base"===theme.id?prefix+"base":prefix+"theme";return $("<link>").attr({rel:"stylesheet",type:"text/css",href:theme.path,"data-type":type,"data-name":theme.name||theme.id,"data-id":theme.id})}(theme)}),{load:function(preload){return _.forEach(styles,function($link,id){isAttached(id)||(preload||id!==activeTheme||$link.on("load",function(){triggerThemeChange(id)}),disable($link),$container.append($link)),preload||("base"!==id&&id!==defaultTheme?disable($link):(enable($link),triggerThemeChange(activeTheme=id)))}),this},unload:function(){return disable($(
'link[data-type^="'+prefix+'"]',$container)),this},change:function(id){return _.contains(["base","default"],id)&&!isAttached(id)&&(id=defaultTheme),isAttached(id)&&(disable($('link[data-type="'+prefix+'theme"]',$container)),enable(getLink(id)),triggerThemeChange(activeTheme=id)),this},getActiveTheme:function(){return activeTheme}}}}),define("ui/themes",["lodash","module"],function(_,module){"use strict";return{get:function(what,ns){var config=module.config();if(ns?what+="_"+ns:config.activeNamespace&&config[what+"_"+config.activeNamespace]&&(what+="_"+config.activeNamespace),_.isPlainObject(config[what]))return config[what]},getAvailable:function(what,ns){
var available=[],themes=this.get(what,ns);return themes&&_.isArray(themes.available)&&(available=themes.available),available}}}),define("ui/toggler",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,DataAttrHandler){"use strict";var ns="toggler",dataNs="ui."+ns,defaults={disableClass:"disabled",bindEvent:"click",openedClass:"opened",closedClass:"closed"},Toggler={init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this),$target=options.target,openedClass=options.openedClass,closedClass=options.closedClass;$elt.data(dataNs)||(options.hideText&&(options.showText=$elt.text()),
$elt.data(dataNs,options),$elt.hasClass(closedClass)||$elt.hasClass(openedClass)||$elt.addClass("none"===$target.css("display")?closedClass:openedClass),$target.on("toggle."+ns,function(e,$toggler){e.stopPropagation(),$toggler.is($elt)||("none"===$target.css("display")?$elt.addClass(closedClass).removeClass(openedClass):$elt.removeClass(closedClass).addClass(openedClass))}),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),Toggler._toggle($(this))}),$elt.trigger("create."+ns))})},_toggle:function($elt){var action,options=$elt.data(dataNs),$target=options.target,triggerEvents=function(){$elt.trigger("toggle."+ns,[$target]
).trigger(action+"."+ns,[$target]),$target.trigger("toggle."+ns,[$elt])};$elt.is(":radio,:checkbox")?action=$elt.prop("checked")?"open":"close":(action=$elt.hasClass(options.closedClass)?"open":"close",$elt.toggleClass(options.closedClass).toggleClass(options.openedClass)),"open"===action?($target.fadeIn(200,triggerEvents),options.hideText&&$elt.text(options.hideText)):($target.fadeOut(300,triggerEvents),options.showText&&$elt.text(options.showText))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Toggler,{
expose:["toggle"]}),function($container){new DataAttrHandler("toggle",{container:$container,listenerEvent:"click",bubbled:!0,namespace:dataNs}).init(function($elt,$target){var opts={target:$target,bindEvent:!1};$elt.data("hide-text")&&(opts.hideText=$elt.data("hide-text")),$elt.toggler(opts)}).trigger(function($elt){$elt.toggler("toggle")})}}),define("ui/tooltipster",["ui/tooltip"],function(tooltip){"use strict";return tooltip}),define("tpl!ui/tristateCheckboxGroup/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{}
;var helper,buffer="";return buffer+='<ul class="tristate-checkbox-group plain" data-serial="',buffer+=(0,this.escapeExpression)((helper=helpers.serial)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.serial)?helper.call(depth0,{hash:{},data:data}):helper)+'"></ul>'})}),define("tpl!ui/tristateCheckboxGroup/li",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression
;return buffer+='<li>\n    <label>\n        <input type="checkbox" value="',buffer+=escapeExpression((helper=helpers.value)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.value)?helper.call(depth0,{hash:{},data:data}):helper)+'" name="tristate-checkbox-',buffer+=escapeExpression((helper=helpers.serial)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.serial)?helper.call(depth0,{hash:{},data:data}):helper)+'"/>\n        <span class="icon icon-checkbox"></span>\n        <span class="label">',buffer+=escapeExpression((helper=helpers.label)?helper.call(depth0,{hash:{},data:data}
):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper)+"</span>\n    </label>\n</li>"})}),define("ui/tristateCheckboxGroup",["jquery","lodash","i18n","ui/component","tpl!ui/tristateCheckboxGroup/list","tpl!ui/tristateCheckboxGroup/li","ui/tooltip"],function($,_,__,component,layoutTpl,elementTpl){"use strict";var tristateCheckboxGroup={getValues:function(){var values={checked:[],indeterminate:[]},$list=this.getElement();return $list.find("input:checked").each(function(){values.checked.push($(this).val())}),$list.find("input:indeterminate").each(function(){values.indeterminate.push($(this).val())}),values},
setValues:function(values){var $list=this.getElement();return $list.find("input").prop("checked",!1).removeAttr("checked").prop("indeterminate",!1),_.isArray(values.checked)&&_.each(values.checked,function(v){$list.find('input[value="'+v+'"]').prop("checked",!0).attr("checked","checked")}),_.isArray(values.indeterminate)&&_.each(values.indeterminate,function(v){$list.find('input[value="'+v+'"]:not(:checked)').prop("indeterminate",!0)}),this},setElements:function(elements){var $cbox,$list=this.getElement(),self=this;return _.each(elements,function(data){data&&(($cbox=$list.find('input[value="'+data.value+'"]')).length?(data.label&&$cbox.siblings(".label"
).text(data.label),$cbox.find("input").prop("checked",!1).removeAttr("checked").prop("indeterminate",!1)):(data.serial=self.config.serial,$cbox=$(elementTpl(data)).appendTo($list).find("input")),data.checked?$cbox.prop("checked",!0).attr("checked","checked"):data.indeterminate&&$cbox.prop("indeterminate",!0))}),this}};return function(config){return config=_.defaults(config||{},{serial:_.uniqueId("tscb"),list:[],maxSelection:0,maxMessage:__("Maximum selection reached")}),component(tristateCheckboxGroup).setTemplate(layoutTpl).on("render",function(){var self=this,$list=this.getElement();$list.on("change",function(e){var $input,$icon,
maxSelection=self.config.maxSelection;maxSelection&&$list.find("input:checked,input:indeterminate").length>maxSelection?($input=$(e.target)).is(":checked")&&(($icon=$input.siblings(".icon").addClass("cross").qtip({theme:"warning",content:{text:self.config.maxMessage}}).qtip("show")).parent("label").on("mouseleave",function(){$icon.qtip("destroy")}),_.delay(function(){$input.prop("checked",!1).removeAttr("checked"),$icon.removeClass("cross")},150)):self.trigger("change",self.getValues())}),this.setElements(this.config.list)}).init(config)}}),define("ui/waitForMedia",["jquery"],function($){var _ns=".wait";$.fn.waitForMedia=function(allLoadedCallback){
function allLoaded($container){$container.trigger("all-loaded"+_ns),"function"==typeof allLoadedCallback&&allLoadedCallback.call($container[0])}return this.each(function(){var $container=$(this),$img=$container.find("img"),count=$img.length,loaded=0,imageLoaded=function(){$(this).trigger("loaded"+_ns).off("load"+_ns).off("error"+_ns),++loaded===count&&allLoaded($container)};0!==count?$img.each(function(){this.complete?imageLoaded.call(this):$(this).on("load.wait error"+_ns,imageLoaded)}):allLoaded($container)})}}),define("ui/waitingDialog/waitingDialog",["jquery","lodash","i18n","ui/component","ui/dialog"],function($,_,__,component,dialog){"use strict"
;var defaultConfig={message:__("Waiting"),waitContent:__("Please wait while ..."),waitButtonText:__("Please wait"),proceedContent:__("Wait is over"),proceedButtonText:__("Proceed")};return function(config){var $button,$content,waitingDialog=component({beginWait:function(){return this.is("waiting")||(this.setState("waiting",!0),$button.prop("disabled",!0).text(this.config.waitButtonText),$content.text(this.config.waitContent),this.trigger("wait")),this},endWait:function(){return this.is("waiting")&&(this.setState("waiting",!1),$content.text(this.config.proceedContent),$button.text(this.config.proceedButtonText).removeProp("disabled"),this.trigger("unwait")),
this},destroy:function(){return this.dialog&&this.dialog.destroy(),this.trigger("destroy")}},defaultConfig).on("init",function(){this.dialog=dialog({message:this.config.message,content:this.config.waitContent||"",autoRender:!1,disableClosing:!0,disableEscape:!0,buttons:[{id:"waiting",type:"info",label:this.config.waitButtonText,close:!0}]}),$button=$('[data-control="waiting"]',this.dialog.getDom()),$content=$(".content",this.dialog.getDom()),this.beginWait(),this.render()}).on("render",function(){var self=this;this.dialog.on("closed.modal",function(){self.is("waiting")||self.trigger("proceed")}).render(this.config.container||"body")});return _.defer(
function(){waitingDialog.init(config||{})}),waitingDialog}}),define("util/adaptSize",["jquery","util/capitalize"],function($,capitalize){"use strict";var _resize;return _resize=function($elements,dimensions){$elements.each(function(){for(var dimension in dimensions)dimensions.hasOwnProperty(dimension)&&$(this)[dimension]("auto")}),$elements.each(function(){for(var dimension in dimensions)dimensions.hasOwnProperty(dimension)&&(dimensions[dimension]=Math.max(Math.floor(dimensions[dimension]||0),$(this)["outer"+capitalize(dimension)]()))}),$elements.css(dimensions)},{width:function($elements,minWidth){_resize($elements,{width:minWidth})},height:function(
$elements,minHeight){_resize($elements,{height:minHeight})},both:function($elements,minWidth,minHeight){_resize($elements,{height:minHeight,width:minWidth})}}}),define("util/dom",["jquery"],function($){return{contains:function(elt){return elt instanceof $&&(elt=elt[0]),$.contains(document,elt)}}}),define("util/image",[],function(){"use strict";return{getSize:function(src,timeout,cb){var timeoutId,img=document.createElement("img");"function"==typeof timeout&&(cb=timeout,timeout=2),img.onload=function(){timeoutId&&(clearTimeout(timeoutId),cb({width:img.naturalWidth||img.width,height:img.naturalHeight||img.height}))},img.onerror=function(){timeoutId&&(
clearTimeout(timeoutId),cb(null))},timeoutId=setTimeout(function(){cb(null)},1e3*timeout),img.src=src}}}),define("util/locale",["module","moment"],function(module,moment){"use strict";var configuration=module.config();return{getConfig:function(){return configuration},setConfig:function(config){configuration=config||{}},getDecimalSeparator:function(){return this.getConfig()&&this.getConfig().decimalSeparator?this.getConfig().decimalSeparator:"."},getThousandsSeparator:function(){return this.getConfig()&&this.getConfig().thousandsSeparator?this.getConfig().thousandsSeparator:""},getDateTimeFormat:function(){return this.getConfig()&&this.getConfig(
).dateTimeFormat?this.getConfig().dateTimeFormat:"DD/MM/YYYY HH:mm:ss"},parseFloat:function(number){if(!number)return parseFloat(number);var parts=number.split(this.getDecimalSeparator(),2),ones=parts[0];return this.getThousandsSeparator().length&&(ones=parts[0].replace(new RegExp("\\"+this.getThousandsSeparator(),"g"),"")),parseFloat(ones)+parseFloat("0."+parts[1])},parseInt:function(number,numericBase){return this.getThousandsSeparator().length&&(number=number.replace(new RegExp("\\"+this.getThousandsSeparator(),"g"),"")),parseInt(number,numericBase)},formatDateTime:function(timestamp){return moment(timestamp,"X").format(this.getDateTimeFormat())}}}),
define("util/strLimiter",[],function(){"use strict";return{limitByWordCount:function(str,maxWordCount){for(var textArr=str.match(/(([\S]+)|([\s]+))/g),newText=/\s+/.test(textArr[0])?textArr.shift():"";maxWordCount&&textArr.length;)newText+=textArr.shift(),textArr.length&&(newText+=textArr.shift()),maxWordCount--;return newText=newText.replace(/\s+$/,"")},limitByCharCount:function(str,maxCharCount){return str.substr(0,maxCharCount)}}}),define("util/typeCaster",["lodash"],function(_){"use strict";return{strToBool:function(value,defaultValue){return _.isBoolean(value)?value:_.isString(value)?"true"===value.toLowerCase():defaultValue||!1}}}),define("uri",[],
function(){return{encode:function(uri){var encoded=uri;return/^http/.test(uri)&&(encoded=encoded.replace(/:\/\//g,"_2_").replace(/#/g,"_3_").replace(/:/g,"_4_").replace(/\//g,"_1_").replace(/\./g,"_0_")),encoded},decode:function(uri){var encoded=uri;return/^http/.test(uri)&&(encoded=encoded.replace(/_0_/g,".").replace(/_1_/g,"/").replace(/_2_/g,"://").replace(/_3_/g,"#").replace(/_4_/g,":")),encoded}}}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c))}(
'/*-- Chart --*/\n.c3 svg {\n  font: 10px sans-serif;\n  -webkit-tap-highlight-color: transparent; }\n\n.c3 path, .c3 line {\n  fill: none;\n  stroke: #000; }\n\n.c3 text {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none; }\n\n.c3-legend-item-tile,\n.c3-xgrid-focus,\n.c3-ygrid,\n.c3-event-rect,\n.c3-bars path {\n  shape-rendering: crispEdges; }\n\n.c3-chart-arc path {\n  stroke: #fff; }\n\n.c3-chart-arc text {\n  fill: #fff;\n  font-size: 13px; }\n\n/*-- Axis --*/\n/*-- Grid --*/\n.c3-grid line {\n  stroke: #aaa; }\n\n.c3-grid text {\n  fill: #aaa; }\n\n.c3-xgrid, .c3-ygrid {\n  stroke-dasharray: 3 3; }\n\n/*-- Text on Chart --*/\n.c3-text.c3-empty {\n  fill: #808080;\n  font-size: 2em; }\n\n/*-- Line --*/\n.c3-line {\n  stroke-width: 1px; }\n\n/*-- Point --*/\n.c3-circle._expanded_ {\n  stroke-width: 1px;\n  stroke: white; }\n\n.c3-selected-circle {\n  fill: white;\n  stroke-width: 2px; }\n\n/*-- Bar --*/\n.c3-bar {\n  stroke-width: 0; }\n\n.c3-bar._expanded_ {\n  fill-opacity: 0.75; }\n\n/*-- Focus --*/\n.c3-target.c3-focused {\n  opacity: 1; }\n\n.c3-target.c3-focused path.c3-line, .c3-target.c3-focused path.c3-step {\n  stroke-width: 2px; }\n\n.c3-target.c3-defocused {\n  opacity: 0.3 !important; }\n\n/*-- Region --*/\n.c3-region {\n  fill: steelblue;\n  fill-opacity: .1; }\n\n/*-- Brush --*/\n.c3-brush .extent {\n  fill-opacity: .1; }\n\n/*-- Select - Drag --*/\n/*-- Legend --*/\n.c3-legend-item {\n  font-size: 12px; }\n\n.c3-legend-item-hidden {\n  opacity: 0.15; }\n\n.c3-legend-background {\n  opacity: 0.75;\n  fill: white;\n  stroke: lightgray;\n  stroke-width: 1; }\n\n/*-- Title --*/\n.c3-title {\n  font: 14px sans-serif; }\n\n/*-- Tooltip --*/\n.c3-tooltip-container {\n  z-index: 10; }\n\n.c3-tooltip {\n  border-collapse: collapse;\n  border-spacing: 0;\n  background-color: #fff;\n  empty-cells: show;\n  -webkit-box-shadow: 7px 7px 12px -9px #777777;\n  -moz-box-shadow: 7px 7px 12px -9px #777777;\n  box-shadow: 7px 7px 12px -9px #777777;\n  opacity: 0.9; }\n\n.c3-tooltip tr {\n  border: 1px solid #CCC; }\n\n.c3-tooltip th {\n  background-color: #aaa;\n  font-size: 14px;\n  padding: 2px 5px;\n  text-align: left;\n  color: #FFF; }\n\n.c3-tooltip td {\n  font-size: 13px;\n  padding: 3px 6px;\n  background-color: #fff;\n  border-left: 1px dotted #999; }\n\n.c3-tooltip td > span {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  margin-right: 6px; }\n\n.c3-tooltip td.value {\n  text-align: right; }\n\n/*-- Area --*/\n.c3-area {\n  stroke-width: 0;\n  opacity: 0.2; }\n\n/*-- Arc --*/\n.c3-chart-arcs-title {\n  dominant-baseline: middle;\n  font-size: 1.3em; }\n\n.c3-chart-arcs .c3-chart-arcs-background {\n  fill: #e0e0e0;\n  stroke: none; }\n\n.c3-chart-arcs .c3-chart-arcs-gauge-unit {\n  fill: #000;\n  font-size: 16px; }\n\n.c3-chart-arcs .c3-chart-arcs-gauge-max {\n  fill: #777; }\n\n.c3-chart-arcs .c3-chart-arcs-gauge-min {\n  fill: #777; }\n\n.c3-chart-arc .c3-gauge-value {\n  fill: #000;\n  /*  font-size: 28px !important;*/ }\n.absorbable{z-index:1;border-radius:0%;background:#e6e6e6;opacity:0}.absorbable.animate{transform:translateZ(0);transition-timing-function:cubic-bezier(0.2, 0.6, 1, 0.4);-webkit-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;-moz-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;-ms-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;-o-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1}@-o-keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}@-moz-keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}@-webkit-keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}@keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}\n\n/*# sourceMappingURL=absorb.css.map */.pulsable{z-index:1;display:block;border-radius:50%;position:absolute;background:#e6e6e6;width:1px;height:1px;top:0px;left:0px;box-shadow:0 0 0 rgba(230,230,230,0.6)}@-o-keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}@-moz-keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}@-webkit-keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}@keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}.pulsable.animate{-webkit-animation:pulsable-pulse 1s ease-out infinite;-moz-animation:pulsable-pulse 1s ease-out infinite;-ms-animation:pulsable-pulse 1s ease-out infinite;-o-animation:pulsable-pulse 1s ease-out infinite;animation:pulsable-pulse 1s ease-out infinite}\n\n/*# sourceMappingURL=pulse.css.map */.badge-component{position:relative}.badge-component .loader:not(.hidden){position:relative;top:-1px;width:25px;height:25px;border-radius:50%;-webkit-animation:badge-component-rotate 1.4s infinite linear;-moz-animation:badge-component-rotate 1.4s infinite linear;-ms-animation:badge-component-rotate 1.4s infinite linear;-o-animation:badge-component-rotate 1.4s infinite linear;animation:badge-component-rotate 1.4s infinite linear;background:-webkit-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:-moz-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:-ms-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:-o-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0)}@-o-keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.badge-component .loader:not(.hidden):before{width:50%;height:50%;background:#e6e6e6;border-radius:100% 0 0 0;position:absolute;top:0;left:0;content:\'\'}.badge-component .loader:not(.hidden):after{background:#333;width:75%;height:75%;border-radius:50%;content:\'\';margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}.badge-component .badge{background:#e6e6e6;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;font-size:12px;font-size:1.2rem;width:19px;height:19px;border-radius:50%;position:absolute;top:2px;left:3px;padding-top:1px;text-align:center;display:inline-block}.badge-component .badge.badge-info{color:#e7eff4;background:#3e7da7}.badge-component .badge.badge-success{color:#e7f4ed;background:#3ea76f}.badge-component .badge.badge-warning{color:#faf0ee;background:#d16c55}.badge-component .badge.badge-error{color:#f8e7ea;background:#ba122b}.badge-component .badge.icon-result-ok::before{top:3px;position:relative;color:blue}.badge-component .badge-border{background:#e6e6e6;width:21px;height:21px;border-radius:50%;position:absolute;top:1px;left:2px}\n\n/*# sourceMappingURL=badge.css.map */.class-selector{padding:5px;position:relative;opacity:0}.class-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.class-selector a.selected{display:inline-block;position:relative;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;padding:3px 20px 3px 10px;text-decoration:none;width:100%;background-color:#fff}.class-selector a.selected.empty{color:#a4a9b1}.class-selector a.selected:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e611";position:absolute;right:10px;top:7px}.class-selector .options{position:absolute;width:100%;background-color:#f3f1ef;border:solid 1px #ddd;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-moz-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-ms-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-o-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);left:0;margin-top:7px;overflow-y:auto;z-index:100;min-height:100px;max-height:450px;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.class-selector .options.folded{overflow:hidden;min-height:0;max-height:0;border-width:0;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.class-selector .options ul{list-style-type:none;padding:0;margin:0 0 0 15px}.class-selector .options ul li{padding-top:3px}.class-selector .options ul li a{text-decoration:none;color:#222}.class-selector .options ul li a:hover{color:#0e5d91;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.class-selector .options ul li:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e60c";color:#d8ae5b;top:2px;-webkit-text-shadow:1px 1px 0 #ad8b49;-moz-text-shadow:1px 1px 0 #ad8b49;text-shadow:1px 1px 0 #ad8b49;margin-right:4px}.class-selector .options>ul{margin:5px 0 0 7px}\n\n/*# sourceMappingURL=selector.css.map */.ui-generis-validator{color:#ba122b;text-align:right;width:99%}.ui-generis-validator input.error,.ui-generis-validator select.error,.ui-generis-validator textarea.error{border-color:#ba122b;color:#ba122b}\n\n/*# sourceMappingURL=validator.css.map */.ui-generis-widget{margin:10px 0px}.ui-generis-widget>.left{display:inline-block;margin-top:8px;width:34%;vertical-align:top}.ui-generis-widget>.right{display:inline-block;min-width:150px;width:65%}.ui-generis-widget>.right>input,.ui-generis-widget>.right>select,.ui-generis-widget>.right>textarea{background-color:white;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;color:#222;font-family:"Franklin Gothic","Franklin Gothic Medium","Source Sans Pro",sans-serif;padding:8px;width:100%}.ui-generis-widget>.right>input,.ui-generis-widget>.right>select{font:inherit;height:36px}.ui-generis-widget>.right>.check-box-input{color:#222;display:inline-block;font-family:"Franklin Gothic","Franklin Gothic Medium","Source Sans Pro",sans-serif;padding:4px;width:100%}.ui-generis-widget>.right>.check-box-input>.option{padding-top:4px}.ui-generis-widget>.right input.error,.ui-generis-widget>.right select.error,.ui-generis-widget>.right textarea.error,.ui-generis-widget>.right .check-box-input.error{border-color:#ba122b;color:#ba122b}.ui-generis-widget .validation-container{color:#ba122b;text-align:right;width:99%}\n\n/*# sourceMappingURL=widget.css.map */.ui-generis-form{border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;background-color:#f3f1ef;padding:20px;position:relative;margin:20px;width:500px}.ui-generis-form h2{margin-top:0}.ui-generis-form .toolbar{margin-top:30px;text-align:right}@-o-keyframes spinner{to{transform:rotate(360deg)}}@-moz-keyframes spinner{to{transform:rotate(360deg)}}@-webkit-keyframes spinner{to{transform:rotate(360deg)}}@keyframes spinner{to{transform:rotate(360deg)}}\n\n/*# sourceMappingURL=form.css.map */.resource-list{position:relative;height:100%;opacity:0}.resource-list.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-list.multiple ul li a:after{display:block;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-list ul{list-style-type:none;padding:0;margin:0}.resource-list ul li{position:relative;height:40px;padding:10px;border-bottom:solid 1px #ddd;-webkit-transition:background-color, 200ms, linear, 0s;-moz-transition:background-color, 200ms, linear, 0s;-ms-transition:background-color, 200ms, linear, 0s;-o-transition:background-color, 200ms, linear, 0s;transition:background-color, 200ms, linear, 0s}.resource-list ul li a{-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s;color:#222;display:inline-block;width:100%;padding-right:25px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.resource-list ul li a:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e69b";color:#0e5d91;position:absolute;right:17px;top:12px;display:none}.resource-list ul li a:hover{text-decoration:none}.resource-list ul li a>span{color:#0e5d91;margin-right:4px;font-size:16px;font-size:1.6rem;vertical-align:top}.resource-list ul li.selected,.resource-list ul li:hover{background-color:#3e7da7;cursor:pointer;-webkit-transition:background-color, 200ms, linear, 0s;-moz-transition:background-color, 200ms, linear, 0s;-ms-transition:background-color, 200ms, linear, 0s;-o-transition:background-color, 200ms, linear, 0s;transition:background-color, 200ms, linear, 0s}.resource-list ul li.selected a,.resource-list ul li:hover a{color:#fff;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-list ul li.selected a:after,.resource-list ul li:hover a:after{color:#fff}.resource-list ul li.selected a>span,.resource-list ul li:hover a>span{color:#fff}.resource-list ul li.selected a:after{content:"\\e69d"}.resource-list ul li[data-access=denied]>a [class^="icon-"],.resource-list ul li[data-access=denied]>a [class*=" icon-"],.resource-list ul li[data-access=partial]>a [class^="icon-"],.resource-list ul li[data-access=partial]>a [class*=" icon-"]{position:relative}.resource-list ul li[data-access=denied]>a [class^="icon-"]:after,.resource-list ul li[data-access=denied]>a [class*=" icon-"]:after,.resource-list ul li[data-access=partial]>a [class^="icon-"]:after,.resource-list ul li[data-access=partial]>a [class*=" icon-"]:after{content:"\\e629";color:#555;position:absolute;left:7px;top:6px}.resource-list ul li[data-access=denied]{color:#a4a9b1;background-color:#fff}.resource-list ul li[data-access=denied]:hover,.resource-list ul li[data-access=denied]:hover>a,.resource-list ul li[data-access=denied]>a,.resource-list ul li[data-access=denied] [class^="icon-"]:before,.resource-list ul li[data-access=denied] [class*=" icon-"]:before{cursor:auto;background-color:#fff;color:#a4a9b1 !important}.resource-tree{position:relative;height:100%;opacity:0}.resource-tree.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-tree.multiple ul li.instance:before{opacity:1;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-tree ul{list-style-type:none;padding:0;margin:0}.resource-tree ul li{position:relative}.resource-tree ul li>a{height:40px;padding:10px;display:block;width:100%;padding-right:25px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:solid 1px #ddd;color:#222}.resource-tree ul li.class .class-toggler{position:absolute;width:50px;right:0;top:0;height:40px}.resource-tree ul li.class .class-toggler:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e611";position:absolute;right:17px;top:12px;width:14px;font-size:15px;font-size:1.5rem;text-align:center}.resource-tree ul li.class .class-toggler:hover{cursor:pointer}.resource-tree ul li.class .class-toggler:hover:before{font-weight:bold}.resource-tree ul li.class.empty .class-toggler{display:none}.resource-tree ul li.class>a>span:before{content:"\\e60d";color:#d8ae5b;margin-right:4px}.resource-tree ul li.class>a:hover{background-color:#3e7da7;color:#fff;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-tree ul li.class>a:hover:before{color:#fff}.resource-tree ul li.class>a:hover ~ .class-toggler:before{color:#fff;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-tree ul li.class.selected>.class-toggler:before{color:#fff}.resource-tree ul li.class.selected>a{background-color:#3e7da7;color:#fff;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-tree ul li.class.selected>a:before{color:#fff}.resource-tree ul li.class.closed>.class-toggler:before{content:"\\e60f"}.resource-tree ul li.class.closed>a>span:before{content:"\\e60c"}.resource-tree ul li.class.closed>ul{display:none}.resource-tree ul li.class.empty:before{content:inherit}.resource-tree ul li.instance:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e69b";color:#0e5d91;position:absolute;right:17px;top:12px;width:14px;text-align:center;opacity:0}.resource-tree ul li.instance.selected:before{content:"\\e69d"}.resource-tree ul li.instance>a>span{color:#0e5d91;margin-right:4px;font-size:16px;font-size:1.6rem;vertical-align:top}.resource-tree ul li.instance.selected,.resource-tree ul li.instance:hover{cursor:pointer;background-color:#3e7da7;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-tree ul li.instance.selected:before,.resource-tree ul li.instance:hover:before{color:#fff}.resource-tree ul li.instance.selected>a,.resource-tree ul li.instance.selected>a>span,.resource-tree ul li.instance:hover>a,.resource-tree ul li.instance:hover>a>span{color:#fff}.resource-tree ul li[data-access=denied]>a [class^="icon-"],.resource-tree ul li[data-access=denied]>a [class*=" icon-"],.resource-tree ul li[data-access=partial]>a [class^="icon-"],.resource-tree ul li[data-access=partial]>a [class*=" icon-"]{position:relative}.resource-tree ul li[data-access=denied]>a [class^="icon-"]:after,.resource-tree ul li[data-access=denied]>a [class*=" icon-"]:after,.resource-tree ul li[data-access=partial]>a [class^="icon-"]:after,.resource-tree ul li[data-access=partial]>a [class*=" icon-"]:after{content:"\\e629";color:#555;position:absolute;left:7px;top:6px}.resource-tree ul li[data-access=denied]{color:#a4a9b1;background-color:#fff}.resource-tree ul li[data-access=denied]:hover,.resource-tree ul li[data-access=denied]:hover>a,.resource-tree ul li[data-access=denied]>a,.resource-tree ul li[data-access=denied] [class^="icon-"]:before,.resource-tree ul li[data-access=denied] [class*=" icon-"]:before{cursor:auto;background-color:#fff;color:#a4a9b1 !important}.resource-tree ul li a:hover{text-decoration:none}.filters{position:relative;height:100%;opacity:0}.filters.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.filters .ui-generis-form{margin:0;padding:10px;width:100%;background-color:#f3f1ef;border:none}.filters .ui-generis-form h2{margin:0}.filters .ui-generis-form .left{width:100%}.filters .ui-generis-form .toolbar{margin:0}.resource-selector{position:relative;height:100%;display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;opacity:0;background-color:#f3f1ef;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}.resource-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector nav{height:40px;-ms-flex:0 1 40px;-webkit-flex:0 1 40px;flex:0 1 40px;border-top:solid 1px #ddd}.resource-selector .context{display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;padding-right:16px}.resource-selector .context .class-context{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;overflow:hidden}.resource-selector .context .class-context .class-selector{position:static}.resource-selector .context .class-context .class-selector .options{max-height:calc(100% - 120px)}.resource-selector .context .class-context .class-selector .options.folded{max-height:0}.resource-selector .context>a{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none}.resource-selector .context>a:hover,.resource-selector .context>a.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection{display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;padding-right:16px}.resource-selector .selection .selection-control{-ms-flex:0 0 80px;-webkit-flex:0 0 80px;flex:0 0 80px}.resource-selector .selection .selection-control>label{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none;width:36px;padding:10px 0 0 8px;margin:0}.resource-selector .selection .selection-control>label:hover,.resource-selector .selection .selection-control>label.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection .selection-control>a{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none;width:38px}.resource-selector .selection .selection-control>a:hover,.resource-selector .selection .selection-control>a.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection .selection-control .selection-toggle .icon-multi-select:before{font-size:16px;font-size:1.6rem}.resource-selector .selection .selection-control .selection-toggle.hidden{display:inline-block !important;visibility:hidden}.resource-selector .selection .search{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;position:relative;padding:6px 6px 6px 5px}.resource-selector .selection .search:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e61f";position:absolute;left:12px;top:12px;opacity:.4}.resource-selector .selection .search input{-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;max-width:inherit;width:100%;padding:4px 25px}.resource-selector .selection .search>a.filters-opener{position:absolute;right:12px;top:10px;font-size:16px;font-size:1.6rem;text-decoration:none}.resource-selector .selection .filters-container{position:absolute;width:100%;background-color:#f3f1ef;border:solid 1px #ddd;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-moz-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-ms-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-o-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);left:0;top:80px;overflow-y:auto;z-index:100;max-height:calc(100% - 110px);-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.resource-selector .selection .filters-container.folded{overflow:hidden;max-height:0;border-width:0;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.resource-selector main{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;min-height:150px;border-top:solid 1px #ddd;background-color:#fff;height:100%;overflow-y:scroll}.resource-selector main .no-results{display:inline-block;width:100%;text-align:center;margin:10px auto;opacity:.75}.resource-selector main .more{height:45px;padding:10px}.resource-selector main.loading .more{opacity:0.65;cursor:inherit}.resource-selector footer{height:30px;-ms-flex:0 1 30px;-webkit-flex:0 1 30px;flex:0 1 30px;border-top:solid 1px #ddd;background-color:#f3f1ef;text-align:center;padding:5px}\n\n/*# sourceMappingURL=selector.css.map */.destination-selector{position:relative;width:400px;opacity:0}.destination-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.destination-selector>div{border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;background-color:#f3f1ef;padding:20px;height:500px;position:relative}.destination-selector>div>p{font-weight:bold}.destination-selector .selector-container{position:relative;height:calc(100% - 90px)}.destination-selector .actions{margin-top:30px;text-align:right}\n\n/*# sourceMappingURL=selector.css.map */.loading-button [class^="icon-"],.loading-button [class*=" icon-"]{padding:0}.loading-button .action-label,.loading-button .terminated-label{margin-left:9px}.loading-button .spinner-icon,.loading-button .terminated-label{display:none}.loading-button.started{cursor:default;opacity:0.5}.loading-button.started .spinner-icon{display:inline-block;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0);-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-ms-transform-origin:50% 50%;-o-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-animation:loading-button-rotate 1.4s infinite linear;-moz-animation:loading-button-rotate 1.4s infinite linear;-ms-animation:loading-button-rotate 1.4s infinite linear;-o-animation:loading-button-rotate 1.4s infinite linear;animation:loading-button-rotate 1.4s infinite linear}@-o-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.loading-button.started .start-icon{display:none}.loading-button.terminated .action-label{display:none}.loading-button.terminated .terminated-label{display:inline-block}\n\n/*# sourceMappingURL=button.css.map */.mediaplayer{position:relative;border:1px solid #333;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;background:#000}.mediaplayer .icon-sound:before{content:"\\e6af"}.mediaplayer .icon-mute:before{content:"\\e69e"}.mediaplayer .error{display:none}.mediaplayer .player{position:relative}.mediaplayer .player iframe{pointer-events:none}.mediaplayer .player .overlay{position:absolute;z-index:1;top:0;left:0;bottom:0;right:0;opacity:1;background:transparent none}.mediaplayer .player .action{position:absolute;z-index:2;top:50%;left:50%;width:64px;height:64px;margin-top:-32px;margin-left:-32px;text-align:center;text-decoration:none;display:none;font-size:64px;font-size:6.4rem;color:#fff}.mediaplayer .player .action .icon{-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;padding:6px 12px;background-color:#000;opacity:0.2}.mediaplayer .player .action .icon:hover{opacity:0.6}.mediaplayer .controls{visibility:hidden;position:relative;padding:5px;display:table;table-layout:fixed;width:100%;border-top:1px solid #333}.mediaplayer .controls .bar{display:table-row}.mediaplayer .controls .control{display:table-cell}.mediaplayer .controls .actions{position:relative;-webkit-transition:all, .1, ease-in-out, 0s;-moz-transition:all, .1, ease-in-out, 0s;-ms-transition:all, .1, ease-in-out, 0s;-o-transition:all, .1, ease-in-out, 0s;transition:all, .1, ease-in-out, 0s}.mediaplayer .controls .actions .action{text-align:center;line-height:2.2rem;width:2.2rem;height:2.2rem;text-decoration:none;color:#dcdcdc;-webkit-transition:all, .2, ease-in-out, 0s;-moz-transition:all, .2, ease-in-out, 0s;-ms-transition:all, .2, ease-in-out, 0s;-o-transition:all, .2, ease-in-out, 0s;transition:all, .2, ease-in-out, 0s}.mediaplayer .controls .actions .action:hover{opacity:1}.mediaplayer .controls .actions .action .icon{line-height:2.2rem}.mediaplayer .controls .actions .play{opacity:0.7;border-right:1px solid #333}.mediaplayer .controls .actions .mute{opacity:0.8;border-left:1px solid #333}.mediaplayer .controls .slider{cursor:pointer;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;-webkit-transition:all, .1, ease-in-out, 0s;-moz-transition:all, .1, ease-in-out, 0s;-ms-transition:all, .1, ease-in-out, 0s;-o-transition:all, .1, ease-in-out, 0s;transition:all, .1, ease-in-out, 0s;background:#fff}.mediaplayer .controls .slider .noUi-background{-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;background:#fff}.mediaplayer .controls .slider.noUi-connect,.mediaplayer .controls .slider .noUi-connect{-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;background:#333}.mediaplayer .controls .slider .noUi-handle{width:11px;height:11px;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;background:#858585}.mediaplayer .controls .slider .noUi-handle:hover{background:#5c5c5c}.mediaplayer .controls .slider .noUi-handle:after{display:none}.mediaplayer .controls .slider.noUi-horizontal{height:9px}.mediaplayer .controls .slider.noUi-horizontal .noUi-handle{top:-2px}.mediaplayer .controls .slider.noUi-vertical{width:9px}.mediaplayer .controls .slider.noUi-vertical .noUi-handle{left:-2px}.mediaplayer .controls .infos{cursor:default;margin:0 1rem;line-height:2.2rem;color:#999;font-size:10px;font-size:1rem;font-weight:bold}.mediaplayer .controls .infos [data-control="time-end"]:before{content:\' / \'}.mediaplayer .controls .timer{width:8rem;text-align:center}.mediaplayer .controls .seek{position:relative;height:1rem;margin-top:5px;padding-left:1rem}.mediaplayer .controls .playback{margin-right:1rem;width:2.2rem}.mediaplayer .controls .sound{width:2.2rem;height:2.2rem}.mediaplayer .controls .sound .volume{cursor:default;position:absolute;z-index:3;background-color:#000;padding:0 10px 0 10px;height:0;top:0;left:-1px;opacity:0;border:solid 1px #333;-webkit-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;-moz-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;-ms-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;-o-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms}.mediaplayer .controls .sound .volume.up,.mediaplayer .controls .sound .volume.down{height:120px;padding:10px 10px 5px 10px;opacity:1}.mediaplayer .controls .sound .volume.up .slider,.mediaplayer .controls .sound .volume.down .slider{opacity:1;transition:opacity 50ms linear 200ms;-webkit-transition:opacity 50ms linear 200ms;-moz-transition:opacity 50ms linear 200ms;-ms-transition:opacity 50ms linear 200ms;-o-transition:opacity 50ms linear 200ms;transition:opacity 50ms linear 200ms}.mediaplayer .controls .sound .volume.up{top:-125px;-webkit-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;-moz-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;-ms-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;-o-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear}.mediaplayer .controls .sound .volume.down{top:29px;-webkit-transition:height 300ms ease-out 50ms, opacity 50ms linear;-moz-transition:height 300ms ease-out 50ms, opacity 50ms linear;-ms-transition:height 300ms ease-out 50ms, opacity 50ms linear;-o-transition:height 300ms ease-out 50ms, opacity 50ms linear;transition:height 300ms ease-out 50ms, opacity 50ms linear}.mediaplayer .controls .sound .slider{opacity:0}.mediaplayer .controls .sound .slider .noUi-handle{cursor:pointer;width:9px;height:9px}.mediaplayer .controls .sound .slider.noUi-horizontal{width:50px;height:7px}.mediaplayer .controls .sound .slider.noUi-vertical{width:7px;height:100px}.mediaplayer .controls [data-control="play"]{display:none}.mediaplayer .controls [data-control="pause"]{display:none}.mediaplayer .controls [data-control="mute"]{display:inline-block}.mediaplayer .controls [data-control="unmute"]{display:none}.mediaplayer.video .sound .volume,.mediaplayer.youtube .sound .volume{width:2.2rem;bottom:2.2rem;right:0}.mediaplayer.audio .sound .volume{height:2.2rem;right:2.2rem;bottom:0}.mediaplayer.ready .controls{visibility:visible}.mediaplayer.ready.paused.canplay .overlay{cursor:pointer}.mediaplayer.ready.paused.canplay .player:hover [data-control="play"]{display:inline-block}.mediaplayer.ready.paused.canplay.youtube.ended .player:hover [data-control="play"]{display:none}.mediaplayer.ready.playing.canpause .overlay{cursor:pointer}.mediaplayer.ready.playing.canpause .player:hover [data-control="pause"]{display:inline-block}.mediaplayer.playing.canpause .controls [data-control="pause"]{display:inline-block}.mediaplayer.paused.canplay .controls [data-control="play"]{display:inline-block}.mediaplayer.paused.canplay .controls [data-control="pause"]{display:none}.mediaplayer.muted .controls [data-control="mute"]{display:none}.mediaplayer.muted .controls [data-control="unmute"]{display:inline-block}.mediaplayer.nogui .player iframe{pointer-events:inherit}.mediaplayer.nogui .overlay{display:none !important}.mediaplayer.nogui .controls{display:none !important}.mediaplayer.error .media,.mediaplayer.error .controls{display:none}.mediaplayer.error .error{display:table;text-align:center;width:100%;height:100%}.mediaplayer.error .error .message{color:#ba122b;display:table-cell;vertical-align:middle}.mediaplayer.loading::before{content:\'\';box-sizing:border-box;position:absolute;top:50%;left:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:1px solid #ccc;border-top-color:#07d;animation:spinner .6s linear infinite}@keyframes spinner{to{transform:rotate(360deg)}}\n\n/*# sourceMappingURL=player.css.map */.switch{display:inline-block;position:relative}.switch input{position:absolute;width:100%;height:100%;z-index:100;opacity:0;cursor:pointer}.switch label{border:solid 1px #a4a9b1;background-color:#f3f1ef;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;padding:1px}.switch label span{display:inline-block;position:relative;min-width:50px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;text-align:center}.switch input ~ label .on{color:#222;background-color:#f3f1ef;transition:background-color .4s ease-out}.switch input ~ label .off{color:white;background-color:#a4a9b1;transition:background-color .4s ease-out}.switch input:checked ~ label .on{color:white;background-color:#0e5d91;transition:background-color .4s ease-out}.switch input:checked ~ label .off{color:#222;background-color:#f3f1ef;transition:background-color .4s ease-out}.switch input:focus ~ label{border:solid 1px #0e5d91}\n\n/*# sourceMappingURL=switch.css.map */'
),define("loader/vendor.bundle",function(){});
//# sourceMappingURL=vendor.min.js.map