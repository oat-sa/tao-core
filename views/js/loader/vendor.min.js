var requirejs,require,define;!function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",
isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(match,singlePrefix){return singlePrefix||""}function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){var i;if(ary)for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}function eachReverse(ary,func){var i;if(ary)for(i=ary.length-1;-1<i&&(!ary[i]||!func(ary[i],i,ary));i-=1);}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(
obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(!deepStringMixin||"object"!=typeof value||!value||isArray(value)||isFunction(value)||value instanceof RegExp?target[prop]=value:(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)))}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value
;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttps://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,
errback=optional):deps=[]),config&&config.context&&(contextName=config.context),(context=getOwn(contexts,contextName))||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick=void 0!==setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName]
;return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser)return(node=req.createNode(config,moduleName,url)
).setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,config.onNodeCreated&&config.onNodeCreated(node,config,moduleName,url),currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{setTimeout(function(){}
,0),importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head||(head=script.parentNode),dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0
}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript())&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")]),context?(context.defQueue.push([name,deps,callback]),
context.defQueueMap[name]=!0):globalDefQueue.push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;function normalize(name,baseName,applyMap){var mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]
;if(name&&(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),function(ary){var i,part;for(i=0;i<ary.length;i++)if("."===(part=ary[i]))ary.splice(i,1),i-=1;else if(".."===part){if(0===i||1===i&&".."===ary[2]||".."===ary[i-1])continue;0<i&&(ary.splice(i-1,2),i-=2)}}(name),name=name.join("/")),applyMap&&map&&(baseParts||starMap)){outerLoop:for(i=(nameParts=name.split("/")).length;0<i;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(
j=baseParts.length;0<j;j-=1)if((mapValue=getOwn(map,baseParts.slice(0,j).join("/")))&&(mapValue=getOwn(mapValue,nameSegment))){foundMap=mapValue,foundI=i;break outerLoop}!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return getOwn(config.pkgs,name)||name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName
)return scriptNode.parentNode.removeChild(scriptNode),!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&1<pathConfig.length)return pathConfig.shift(),context.require.undef(id),context.makeRequire(null,{skipMap:!0})([id]),!0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return-1<index&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,
normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),prefix=(nameParts=splitPrefix(name))[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=isNormalized?name:pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):-1===name.indexOf("!")?normalize(name,parentName,applyMap):name:(prefix=(nameParts=splitPrefix(normalizedName=normalize(name,parentName,applyMap)))[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),{prefix:prefix,
name:normalizedName,parentMap:parentModuleMap,unnormalized:!!(suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1)),url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap)).error&&"error"===name?fn(mod.error):mod.on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){
var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(each(globalDefQueue,function(queueItem){var id=queueItem[0];"string"==typeof id&&(context.defQueueMap[id]=!0),defQueue.push(queueItem)}),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function checkLoaded(){var err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[]
,reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?stillLoading=usingPathFallback=!0:(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return(err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads)).contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){!function breakCycle(mod,
traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])
}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}context.defQueueMap={}}
return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine)return mod.exports?defined[mod.map.id]=mod.exports:mod.exports=defined[mod.map.id]={}},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}},(Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}
).prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;if(!this.shim
)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(
this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&void 0===exports&&((cjsModule=this.module)?exports=cjsModule.exports:this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;if(this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad)){var resLoadMaps=[];each(this.depMaps,
function(depMap){resLoadMaps.push(depMap.normalizedMap||depMap)}),req.onResourceLoad(context,this.map,resLoadMaps)}cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(context.defQueueMap,id)||this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,
localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),on(normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap,!0),"defined",bind(this,function(value){this.map.normalizedMap=normalizedMap,this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),void((normalizedMod=getOwn(registry,normalizedMap.id))&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):bundleId?(
this.map.url=context.nameToUrl(bundleId),void this.load()):((load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})})).error=bind(this,function(err){this.inited=!0,(this.error=err).requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)
}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){(enabledRegistry[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(
handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.undefed||(this.defineDep(i,depExports),this.check())})),this.errback?on(depMap,"error",bind(this,this.errback)):this.events.error&&on(depMap,"error",bind(this,function(err){this.emit("error",err)}))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name]
;cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},(context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,defQueueMap:{},Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){if(cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/"),"string"==typeof cfg.urlArgs){var urlArgs=cfg.urlArgs;cfg.urlArgs=function(id,url){return(-1===url.indexOf("?")?"?":"&")+urlArgs}}var shim=config.shim,objs={paths:!0,bundles:!0,
config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?(config[prop]||(config[prop]={}),mixin(config[prop],value,!0,!0)):config[prop]=value}),cfg.bundles&&eachProp(cfg.bundles,function(value,prop){each(value,function(v){v!==prop&&(bundlesMap[v]=prop)})}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&each(cfg.packages,function(pkgObj){var name;name=(pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj).name,pkgObj.location&&(config.paths[name]=pkgObj.location),
config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id,null,!0))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){return function(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),
"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(id=makeModuleMap(deps,relMap,!1,!0).id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),(requireMod=getModule(makeModuleMap(null,relMap))).skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}
return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0];return-1!==index&&(!("."===segment||".."===segment)||1<index)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(
localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);mod.undefed=!0,removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],eachReverse(defQueue,function(args,i){args[0]===id&&defQueue.splice(i,1)}),delete context.defQueueMap[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){getOwn(registry,depMap.id)&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(null===(
args=defQueue.shift())[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(context.defQueueMap={},mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain&&(moduleName=pkgMain),
bundleId=getOwn(bundlesMap,moduleName))return context.nameToUrl(bundleId,ext,skipExt);if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,i=(syms=moduleName.split("/")).length;0<i;i-=1)if(parentPath=getOwn(paths,syms.slice(0,i).join("/"))){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}url=syms.join("/"),url=("/"===(url+=ext||(/^data\:|^blob\:|\?/.test(url)||skipExt?"":".js")).charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs&&!/^blob\:/.test(url)?url+config.urlArgs(moduleName,url):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,
callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){var parents=[];return eachProp(registry,function(value,key){0!==key.indexOf("_@r")&&each(value.depMaps,function(depMap){if(depMap.id===data.id)return parents.push(key),!0})}),onError(makeError("scripterror",'Script error for "'+data.id+(parents.length?'", needed by: '+parents.join(", "):'"'),evt,[data.id]))}}}
).require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(script){if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("lib/require",function(){}),define("text",["module"],function(module){"use strict";var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
hasLocation="undefined"!=typeof location&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||void 0),buildMap={},masterConfig=module.config&&module.config()||{};return text={version:"2.0.10",strip:function(content){if(content){var matches=(content=content.replace(xmlRegExp,"")).match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(
/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,temp,strip=!1,index=name.indexOf("."),isRelative=0===name.indexOf("./")||0===name.indexOf("../");return-1!==index&&(!isRelative||1<index)?(modName=name.substring(0,index),ext=name.substring(index+1,name.length)):modName=name,-1!==(index=(temp=ext||modName
).indexOf("!"))&&(strip="strip"===temp.substring(index+1),temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return!match||(uProtocol=match[2],uPort=(uHostName=(uHostName=match[3]).split(":"))[1],uHostName=uHostName[0],!(uProtocol&&uProtocol!==protocol||uHostName&&uHostName.toLowerCase()!==hostname.toLowerCase()||(uPort||uHostName)&&uPort!==port))},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(
buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(!config.isBuild||config.inlineText){masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;0!==url.indexOf("empty:")?!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)}):onLoad(
)}else onLoad()},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,
fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},"node"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync(url,"utf8");0===file.indexOf("\ufeff")&&(file=file.substring(1)),callback(file)}catch(e){errback(e)}}):"xhr"===masterConfig.env||!masterConfig.env&&text.createXhr()?text.get=function(url,callback,errback,headers){var header,xhr=text.createXhr();if(xhr.open("GET",url,!0),headers)for(header in headers)headers.hasOwnProperty(header
)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;4===xhr.readyState&&(399<(status=xhr.status)&&status<600?((err=new Error(url+" HTTP status: "+status)).xhr=xhr,errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url))},xhr.send(null)}:"rhino"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?text.get=function(url,callback){var stringBuffer,line,file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),
input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),"utf-8")),content="";try{for(stringBuffer=new java.lang.StringBuffer,(line=input.readLine())&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1)),null!==line&&stringBuffer.append(line);null!==(line=input.readLine());)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)}:("xpconnect"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(Cc=Components.classes,Ci=Components.interfaces,
Components.utils.import("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{(inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream)).init(fileObj,1,0,!1),(convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream)).init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),
convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}}),text}),define("json",["text"],function(text){var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};function cacheBust(url){return url=url.replace(CACHE_BUST_FLAG,""),(url+=url.indexOf("?")<0?"?":"&")+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}return{load:function(name,req,onLoad,config){!config.isBuild||!1!==config.inlineJSON&&-1===name.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(
req.toUrl(name),function(data){config.isBuild?(buildMap[name]=data,onLoad(data)):onLoad(jsonParse(data))},onLoad.error,{accept:"application/json"}):onLoad(null)},normalize:function(name,normalize){return-1!==name.indexOf(CACHE_BUST_FLAG)&&(name=cacheBust(name)),normalize(name)},write:function(pluginName,moduleName,write){moduleName in buildMap&&write('define("'+pluginName+"!"+moduleName+'", function(){ return '+buildMap[moduleName]+";});\n")}}}),define("css",[],function(){if("undefined"==typeof window)return{load:function(n,r,load){load()}};var head=document.getElementsByTagName("head")[0],engine=window.navigator.userAgent.match(
/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,useImportLoad=!1,useOnload=!0;engine[1]||engine[7]?useImportLoad=parseInt(engine[1])<6||parseInt(engine[7])<=9:engine[2]||engine[8]?useOnload=!1:engine[4]&&(useImportLoad=parseInt(engine[4])<18);var curStyle,curSheet,cssAPI={};cssAPI.pluginBuilder="./css-builder";var ieCurCallback,createStyle=function(){curStyle=document.createElement("style"),head.appendChild(curStyle),curSheet=curStyle.styleSheet||curStyle.sheet},ieCnt=0,ieLoads=[],createIeLoad=function(url){32==++ieCnt&&(createStyle(),ieCnt=0),curSheet.addImport(url),
curStyle.onload=function(){processIeLoad()}},processIeLoad=function(){ieCurCallback();var nextLoad=ieLoads.shift();nextLoad?(ieCurCallback=nextLoad[1],createIeLoad(nextLoad[0])):ieCurCallback=null};return cssAPI.normalize=function(name,normalize){return".css"==name.substr(name.length-4,4)&&(name=name.substr(0,name.length-4)),normalize(name)},cssAPI.load=function(cssId,req,load,config){(useImportLoad?function(url,callback){if(curSheet&&curSheet.addImport||createStyle(),curSheet&&curSheet.addImport)ieCurCallback?ieLoads.push([url,callback]):(createIeLoad(url),ieCurCallback=callback);else{curStyle.textContent='@import "'+url+'";';var loadInterval=setInterval(
function(){try{curStyle.sheet.cssRules,clearInterval(loadInterval),callback()}catch(e){}},10)}}:function(url,callback){var link=document.createElement("link");if(link.type="text/css",link.rel="stylesheet",useOnload)link.onload=function(){link.onload=function(){},setTimeout(callback,7)};else var loadInterval=setInterval(function(){for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href==link.href)return clearInterval(loadInterval),callback()},10);link.href=url,head.appendChild(link)})(req.toUrl(cssId+".css"),load)},cssAPI}),define("handlebars",[],function(){var __module4__,__module3__,__module5__,__module2__,__module6__,__module1__,
__module7__,__module9__;return __module4__=function(){"use strict";function SafeString(string){this.string=string}return SafeString.prototype.toString=function(){return""+this.string},SafeString}(),__module3__=function(__dependency1__){"use strict";var __exports__={},SafeString=__module4__,escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]||"&amp;"}__exports__.extend=function(obj,value){for(var key in value)Object.prototype.hasOwnProperty.call(value,key)&&(obj[key]=value[key])};var isFunction,toString=Object.prototype.toString
;__exports__.toString=toString,(isFunction=function(value){return"function"==typeof value})(/x/)&&(isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)}),__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return!(!value||"object"!=typeof value)&&"[object Array]"===toString.call(value)};return __exports__.isArray=isArray,__exports__.escapeExpression=function(string){return string instanceof SafeString?string.toString():string||0===string?(string=""+string,possible.test(string)?string.replace(badChars,escapeChar):string):""},__exports__.isEmpty=function(value){
return!value&&0!==value||!(!isArray(value)||0!==value.length)},__exports__}(),__module5__=function(){"use strict";var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var line;node&&node.firstLine&&(message+=" - "+(line=node.firstLine)+":"+node.firstColumn);for(var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];line&&(this.lineNumber=line,this.column=node.firstColumn)}return Exception.prototype=new Error,Exception}(),__module2__=function(__dependency1__,__dependency2__){"use strict";var __exports__={},
Utils=__module3__,Exception=__module5__;__exports__.VERSION="1.3.0";__exports__.COMPILER_REVISION=4;__exports__.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString;function HandlebarsEnvironment(helpers,partials){var instance;this.helpers=helpers||{},this.partials=partials||{},(instance=this).registerHelper("helperMissing",function(arg){if(2!==arguments.length)throw new Exception("Missing helper: '"+arg+"'")}),instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn
;return isFunction(context)&&(context=context.call(this)),!0===context?fn(this):!1===context||null==context?inverse(this):isArray(context)?0<context.length?instance.helpers.each(context,options):inverse(this):fn(context)}),instance.registerHelper("each",function(context,options){var data,fn=options.fn,inverse=options.inverse,i=0,ret="";if(isFunction(context)&&(context=context.call(this)),options.data&&(data=createFrame(options.data)),context&&"object"==typeof context)if(isArray(context))for(var j=context.length;i<j;i++)data&&(data.index=i,data.first=0===i,data.last=i===context.length-1),ret+=fn(context[i],{data:data});else for(var key in context
)context.hasOwnProperty(key)&&(data&&(data.key=key,data.index=i,data.first=0===i),ret+=fn(context[key],{data:data}),i++);return 0===i&&(ret=inverse(this)),ret}),instance.registerHelper("if",function(conditional,options){return isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers.if.call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})}),instance.registerHelper("with",function(context,options){if(isFunction(context)&&(
context=context.call(this)),!Utils.isEmpty(context))return options.fn(context)}),instance.registerHelper("log",function(context,options){var level=options.data&&null!=options.data.level?parseInt(options.data.level,10):1;instance.log(level,context)})}(__exports__.HandlebarsEnvironment=HandlebarsEnvironment).prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if("[object Object]"===toString.call(name)){if(inverse||fn)throw new Exception("Arg not supported with multiple helpers");Utils.extend(this.helpers,name)}else inverse&&(fn.not=inverse),this.helpers[name]=fn},registerPartial:function(name,str){
"[object Object]"===toString.call(name)?Utils.extend(this.partials,name):this.partials[name]=str}};var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];"undefined"!=typeof console&&console[method]&&console[method].call(console,obj)}}};function log(level,obj){logger.log(level,obj)}__exports__.logger=logger,__exports__.log=log;var createFrame=function(object){var obj={};return Utils.extend(obj,object),obj};return __exports__.createFrame=createFrame,__exports__}(),__module6__=function(__dependency1__,__dependency2__,__dependency3__){
"use strict";var __exports__={},Utils=__module3__,Exception=__module5__,COMPILER_REVISION=__dependency3__.COMPILER_REVISION,REVISION_CHANGES=__dependency3__.REVISION_CHANGES;function program(i,fn,data){var prog=function(context,options){return fn(context,(options=options||{}).data||data)};return prog.program=i,prog.depth=0,prog}return __exports__.checkRevision=function(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1;if(compilerRevision!==COMPILER_REVISION){if(compilerRevision<COMPILER_REVISION){var runtimeVersions=REVISION_CHANGES[COMPILER_REVISION],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception(
"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}},__exports__.template=function(templateSpec,env){if(!env)throw new Exception("No environment passed to template");var container={escapeExpression:Utils.escapeExpression,invokePartial:function(partial,name,context,helpers,partials,data){
var result=env.VM.invokePartial.apply(this,arguments);if(null!=result)return result;if(env.compile){var options={helpers:helpers,partials:partials,data:data};return partials[name]=env.compile(partial,{data:void 0!==data},env),partials[name](context,options)}throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")},programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];return data?programWrapper=program(i,fn,data):programWrapper||(programWrapper=this.programs[i]=program(i,fn)),programWrapper},merge:function(param,common){var ret=param||common;return param&&common&&param!==common&&(ret={},
Utils.extend(ret,common),Utils.extend(ret,param)),ret},programWithDepth:env.VM.programWithDepth,noop:env.VM.noop,compilerInfo:null};return function(context,options){var helpers,partials,namespace=(options=options||{}).partial?options:env;options.partial||(helpers=options.helpers,partials=options.partials);var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);return options.partial||env.VM.checkRevision(container.compilerInfo),result}},__exports__.programWithDepth=function(i,fn,data){var args=Array.prototype.slice.call(arguments,3),prog=function(context,options){return options=options||{},fn.apply(this,[context,
options.data||data].concat(args))};return prog.program=i,prog.depth=args.length,prog},__exports__.program=program,__exports__.invokePartial=function(partial,name,context,helpers,partials,data){var options={partial:!0,helpers:helpers,partials:partials,data:data};if(void 0===partial)throw new Exception("The partial "+name+" could not be found");if(partial instanceof Function)return partial(context,options)},__exports__.noop=function(){return""},__exports__}(0,0,__module2__),__module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var base=__module2__,SafeString=__module4__,Exception=__module5__,
Utils=__module3__,runtime=__module6__,create=function(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=SafeString,hb.Exception=Exception,hb.Utils=Utils,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb},Handlebars=create();return Handlebars.create=create,Handlebars}(),__module7__=function(__dependency1__){"use strict";var Exception=__module5__;function LocationInfo(locInfo){locInfo=locInfo||{},this.firstLine=locInfo.first_line,this.firstColumn=locInfo.first_column,this.lastColumn=locInfo.last_column,this.lastLine=locInfo.last_line}var AST={ProgramNode:function(statements,inverseStrip,inverse,
locInfo){var inverseLocationInfo,firstInverseNode;3===arguments.length?(locInfo=inverse,inverse=null):2===arguments.length&&(locInfo=inverseStrip,inverseStrip=null),LocationInfo.call(this,locInfo),this.type="program",this.statements=statements,this.strip={},inverse?(firstInverseNode=inverse[0],this.inverse=firstInverseNode?(inverseLocationInfo={first_line:firstInverseNode.firstLine,last_line:firstInverseNode.lastLine,last_column:firstInverseNode.lastColumn,first_column:firstInverseNode.firstColumn},new AST.ProgramNode(inverse,inverseStrip,inverseLocationInfo)):new AST.ProgramNode(inverse,inverseStrip),this.strip.right=inverseStrip.left):inverseStrip&&(
this.strip.left=inverseStrip.right)},MustacheNode:function(rawParams,hash,open,strip,locInfo){if(LocationInfo.call(this,locInfo),this.type="mustache",this.strip=strip,null!=open&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped="{"!==escapeFlag&&"&"!==escapeFlag}else this.escaped=!!open;rawParams instanceof AST.SexprNode?this.sexpr=rawParams:this.sexpr=new AST.SexprNode(rawParams,hash),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo)
,this.type="sexpr",this.hash=hash;var id=this.id=rawParams[0],params=this.params=rawParams.slice(1),eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)},PartialNode:function(partialName,context,strip,locInfo){LocationInfo.call(this,locInfo),this.type="partial",this.partialName=partialName,this.context=context,this.strip=strip},BlockNode:function(mustache,program,inverse,close,locInfo){if(LocationInfo.call(this,locInfo),mustache.sexpr.id.original!==close.path.original)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,this);this.type="block",this.mustache=mustache,
this.program=program,this.inverse=inverse,this.strip={left:mustache.strip.left,right:close.strip.right},(program||inverse).strip.left=mustache.strip.right,(inverse||program).strip.right=close.strip.left,inverse&&!program&&(this.isInverse=!0)},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="content",this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo),this.type="hash",this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo),this.type="ID";for(var original="",dig=[],depth=0,i=0,l=parts.length;i<l;i++){var part=parts[i].part;if(original+=(parts[i].separator||"")+part,
".."===part||"."===part||"this"===part){if(0<dig.length)throw new Exception("Invalid path: "+original,this);".."===part?depth++:this.isScoped=!0}else dig.push(part)}this.original=original,this.parts=dig,this.string=dig.join("."),this.depth=depth,this.isSimple=1===parts.length&&!this.isScoped&&0===depth,this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo),this.type="PARTIAL_NAME",this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo),this.type="DATA",this.id=id},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="STRING",
this.original=this.string=this.stringModeValue=string},IntegerNode:function(integer,locInfo){LocationInfo.call(this,locInfo),this.type="INTEGER",this.original=this.integer=integer,this.stringModeValue=Number(integer)},BooleanNode:function(bool,locInfo){LocationInfo.call(this,locInfo),this.type="BOOLEAN",this.bool=bool,this.stringModeValue="true"===bool},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo),this.type="comment",this.comment=comment}};return AST}(),__module9__=function(){"use strict";return function(){var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,
openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",
25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return new yy.ProgramNode($$[$0-1],this._$);case 2:return new yy.ProgramNode([],this._$);case 3:
this.$=new yy.ProgramNode([],$$[$0-1],$$[$0],this._$);break;case 4:this.$=new yy.ProgramNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 5:this.$=new yy.ProgramNode($$[$0-1],$$[$0],[],this._$);break;case 6:this.$=new yy.ProgramNode($$[$0],this._$);break;case 7:case 8:this.$=new yy.ProgramNode([],this._$);break;case 9:this.$=[$$[$0]];break;case 10:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0],this._$);break;case 12:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0],this._$);break;case 13:case 14:this.$=$$[$0];break;case 15:this.$=new yy.ContentNode($$[$0],this._$);break
;case 16:this.$=new yy.CommentNode($$[$0],this._$);break;case 17:case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$={path:$$[$0-1],strip:stripFlags($$[$0-2],$$[$0])};break;case 20:case 21:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1],stripFlags($$[$0-3],$$[$0]),this._$);break;case 23:this.$=stripFlags($$[$0-1],$$[$0]);break;case 24:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 25:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 26:this.$=$$[$0];break
;case 27:this.$=new yy.StringNode($$[$0],this._$);break;case 28:this.$=new yy.IntegerNode($$[$0],this._$);break;case 29:this.$=new yy.BooleanNode($$[$0],this._$);break;case 30:this.$=$$[$0];break;case 31:$$[$0-1].isHelper=!0,this.$=$$[$0-1];break;case 32:this.$=new yy.HashNode($$[$0],this._$);break;case 33:this.$=[$$[$0-2],$$[$0]];break;case 34:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 35:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 36:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0],this._$));break;case 37:this.$=new yy.DataNode($$[$0],this._$);break;case 38:this.$=new yy.IdNode($$[$0],this._$)
;break;case 39:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 40:this.$=[{part:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 47:this.$=[$$[$0]];break;case 48:$$[$0-1].push($$[$0])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[
1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],
42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,
38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2
,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],
14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],
24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],
20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(str,hash){throw new Error(str)},parse:function(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this
).lexer.yylloc&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var symbol,preErrorSymbol,state,action,r,p,len,newState,expected,token,yyval={};;){if(state=stack[stack.length-1],void 0===(action=this.defaultActions[state]?this.defaultActions[state]:(null==symbol&&(token=void 0,"number"!=typeof(token=self.lexer.lex()||1)&&(token=self.symbols_[token]||token),symbol=token),table[state]&&table[state][symbol]))||!action.length||!action[0]){var errStr="";if(!recovering){for(p in expected=[],table[state]
)this.terminals_[p]&&2<p&&expected.push("'"+this.terminals_[p]+"'");errStr=this.lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&1<action.length)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(
action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,0<recovering&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[
lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack)))return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}};function stripFlags(open,close){return{left:"~"===open.charAt(2),right:"~"===close.charAt(0)||"~"===close.charAt(1)}}var lexer=function(){var lexer={EOF:1,parseError:function(str,hash
){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,
this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0
)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(20<past.length?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(20<next.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(
pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;var token,match,tempMatch,index,lines;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length&&(!(tempMatch=this._input.match(this.rules[rules[i]]))||match&&!(tempMatch[0].length>match[0].length)||(match=tempMatch,index=i,this.options.flex));i++);return match?((lines=match[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,
last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1
)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return void 0!==r?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(condition){this.begin(condition)},options:{},performAction:function(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,
yy_.yyleng-end)}switch($avoiding_name_collisions){case 0:if("\\\\"===yy_.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===yy_.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),yy_.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return strip(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return strip(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:case 18:return 40;case 19:return 44;case 20:break;case 21:
return this.popState(),24;case 22:return this.popState(),18;case 23:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),32;case 24:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 29:return 40;case 30:return yy_.yytext=strip(1,2),40;case 31:return"INVALID";case 32:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,
/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}}};return lexer}();function Parser(){this.yy={}}return parser.lexer=lexer,new((
Parser.prototype=parser).Parser=Parser)}()}(),function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var Handlebars=__module1__,AST=__module7__,Parser=__dependency3__.parser,parse=__dependency3__.parse,Compiler=__dependency4__.Compiler,compile=__dependency4__.compile,precompile=__dependency4__.precompile,JavaScriptCompiler=__dependency5__,_create=Handlebars.create,create=function(){var hb=_create();return hb.compile=function(input,options){return compile(input,options,hb)},hb.precompile=function(input,options){return precompile(input,options,hb)},hb.AST=AST,hb.Compiler=Compiler,
hb.JavaScriptCompiler=JavaScriptCompiler,hb.Parser=Parser,hb.parse=parse,hb};return(Handlebars=create()).create=create,Handlebars}(0,0,function(__dependency1__,__dependency2__){"use strict";var __exports__={},parser=__module9__,AST=__module7__;return __exports__.parser=parser,__exports__.parse=function(input){return input.constructor===AST.ProgramNode?input:(parser.yy=AST,parser.parse(input))},__exports__}(),function(__dependency1__){"use strict";var __exports__={},Exception=__module5__;function Compiler(){}return(__exports__.Compiler=Compiler).prototype={compiler:Compiler,disassemble:function(){for(var opcode,params,param,opcodes=this.opcodes,out=[],i=0,
l=opcodes.length;i<l;i++)if("DECLARE"===(opcode=opcodes[i]).opcode)out.push("DECLARE "+opcode.name+"="+opcode.value);else{params=[];for(var j=0;j<opcode.args.length;j++)"string"==typeof(param=opcode.args[j])&&(param='"'+param.replace("\n","\\n")+'"'),params.push(param);out.push(opcode.opcode+" "+params.join(" "))}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length)return!1;for(var j=0;j<opcode.args.length;j++)if(
opcode.args[j]!==otherOpcode.args[j])return!1}if(len=this.children.length,other.children.length!==len)return!1;for(i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function(program,options){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=options;var knownHelpers=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];return this.accept(program)},accept:function(node){var ret,strip=node.strip||{}
;return strip.left&&this.opcode("strip"),ret=this[node.type](node),strip.right&&this.opcode("strip"),ret},program:function(program){for(var statements=program.statements,i=0,l=statements.length;i<l;i++)this.accept(statements[i]);return this.isSimple=1===l,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(program){var depth,result=(new this.compiler).compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial;for(var i=0,l=(this.children[guid]=result).depths.list.length;i<l;i++)(depth=result.depths.list[i])<2||this.addDepth(depth-1);return guid},block:function(block){
var mustache=block.mustache,program=block.program,inverse=block.inverse;program&&(program=this.compileProgram(program)),inverse&&(inverse=this.compileProgram(inverse));var sexpr=mustache.sexpr,type=this.classifySexpr(sexpr);"helper"===type?this.helperSexpr(sexpr,program,inverse):"simple"===type?(this.simpleSexpr(sexpr),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(sexpr,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(hash){
var pair,val,pairs=hash.pairs;this.opcode("pushHash");for(var i=0,l=pairs.length;i<l;i++)val=(pair=pairs[i])[1],this.options.stringParams?(val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",val.stringModeValue,val.type),"sexpr"===val.type&&this.sexpr(val)):this.accept(val),this.opcode("assignToHash",pair[0]);this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=!0,partial.context?this.ID(partial.context):this.opcode("push","depth0"),this.opcode("invokePartial",partialName.name),this.opcode("append")},content:function(content){this.opcode("appendContent",
content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr),mustache.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=null!=program||null!=inverse;this.opcode("getContext",id.depth),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;"DATA"===id.type?this.DATA(id):id.parts.length?this.ID(id):(this.addDepth(id.depth),this.opcode("getContext",id.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},
helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),name=sexpr.id.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);this.opcode("invokeHelper",params.length,name,sexpr.isRoot)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);"simple"===type?this.simpleSexpr(sexpr):"helper"===type?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ID:function(id){this.addDepth(id.depth),this.opcode("getContext",id.depth),
id.parts[0]?this.opcode("lookupOnContext",id.parts[0]):this.opcode("pushContext");for(var i=1,l=id.parts.length;i<l;i++)this.opcode("lookup",id.parts[i])},DATA:function(data){if(this.options.data=!0,data.id.isScoped||data.id.depth)throw new Exception("Scoped data references are not supported: "+data.original,data);this.opcode("lookupData");for(var parts=data.id.parts,i=0,l=parts.length;i<l;i++)this.opcode("lookup",parts[i])},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name
){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){0!==depth&&(this.depths[depth]||(this.depths[depth]=!0,this.depths.list.push(depth)))},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper,isEligible=sexpr.eligibleHelper,options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];options.knownHelpers[name]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function(params){for(var param,i=params.length;i--;)param=params[i],
this.options.stringParams?(param.depth&&this.addDepth(param.depth),this.opcode("getContext",param.depth||0),this.opcode("pushStringParam",param.stringModeValue,param.type),"sexpr"===param.type&&this.sexpr(param)):this[param.type](param)},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.hash(sexpr.hash):this.opcode("emptyHash"),params}},__exports__.precompile=function(input,options,env){if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception(
"You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);"data"in(options=options||{})||(options.data=!0);var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)},__exports__.compile=function(input,options,env){if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);var compiled;function compileInput(){var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler
).compile(environment,options,void 0,!0);return env.template(templateSpec)}return"data"in(options=options||{})||(options.data=!0),function(context,options){return compiled||(compiled=compileInput()),compiled.call(this,context,options)}},__exports__}(),function(__dependency1__,__dependency2__){"use strict";var COMPILER_REVISION=__dependency1__.COMPILER_REVISION,REVISION_CHANGES=__dependency1__.REVISION_CHANGES,log=__dependency1__.log,Exception=__dependency2__;function Literal(value){this.value=value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function(parent,name){var wrap,ret;return 0===parent.indexOf("depth")&&(wrap=!0),
ret=/^[0-9]+$/.test(name)?parent+"["+name+"]":JavaScriptCompiler.isValidJavaScriptVariableName(name)?parent+"."+name:parent+"['"+name+"']",wrap?"("+parent+" && "+ret+")":ret},compilerInfo:function(){return"this.compilerInfo = ["+COMPILER_REVISION+",'"+REVISION_CHANGES[COMPILER_REVISION]+"'];\n"},appendToBuffer:function(string){return this.environment.isSimple?"return "+string+";":{appendToBuffer:!0,content:string,toString:function(){return"buffer += "+string+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment,this.options=options||{},log(
"debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!context,this.context=context||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(environment,options);var opcode,opcodes=environment.opcodes;this.i=0;for(var l=opcodes.length;this.i<l;this.i++)"DECLARE"===(opcode=opcodes[this.i]).opcode?this[opcode.name]=opcode.value:this[opcode.opcode].apply(this,opcode.args),opcode.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),
this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Exception("Compile completed with content left on stack");return this.createFunctionContext(asObject)},preamble:function(){var out=[];if(this.isChild)out.push("");else{var namespace=this.namespace,copies="helpers = this.merge(helpers, "+namespace+".helpers);";this.environment.usePartial&&(copies=copies+" partials = this.merge(partials, "+namespace+".partials);"),this.options.data&&(copies+=" data = data || {};"),out.push(copies)}this.environment.isSimple?out.push(""):out.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=out},createFunctionContext:function(
asObject){var locals=this.stackVars.concat(this.registers.list);if(0<locals.length&&(this.source[1]=this.source[1]+", "+locals.join(", ")),!this.isChild)for(var alias in this.context.aliases)this.context.aliases.hasOwnProperty(alias)&&(this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],i=0,l=this.environment.depths.list.length;i<l;i++
)params.push("depth"+this.environment.depths.list[i]);var source=this.mergeSource();if(this.isChild||(source=this.compilerInfo()+source),asObject)return params.push(source),Function.apply(this,params);var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";return log("debug",functionSource+"\n\n"),functionSource},mergeSource:function(){for(var buffer,source="",i=0,len=this.source.length;i<len;i++){var line=this.source[i];line.appendToBuffer?buffer=buffer?buffer+"\n    + "+line.content:line.content:(buffer&&(source+="buffer += "+buffer+";\n  ",buffer=void 0),source+=line+"\n  ")}return source},blockValue:function(){
this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params),this.replaceStack(function(current){return params.splice(1,0,current),"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current),this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){this.pendingContent&&(content=this.pendingContent+content),this.stripNext&&(
content=content.replace(/^\s+/,"")),this.pendingContent=content},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){this.lastContext!==depth&&(this.lastContext=depth
)},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(string,type){this.pushStackLiteral(
"depth"+this.lastContext),this.pushString(type),"sexpr"!==type&&("string"==typeof string?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+hash.contexts.join(",")+"}"),this.push("{"+hash.types.join(",")+"}")),this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(
string))},push:function(expr){return this.inlineStack.push(expr),expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){null!=guid?this.pushStackLiteral(this.programExpression(guid)):this.pushStackLiteral(null)},invokeHelper:function(paramSize,name,isRoot){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var helper=this.lastHelper=this.setupHelper(paramSize,name,!0),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),lookup="helper = "+helper.name+" || "+nonHelper;helper.paramsInit&&(lookup+=","+helper.paramsInit),this.push(
"("+lookup+",helper ? helper.call("+helper.callParams+") : helperMissing.call("+helper.helperMissingParams+"))"),isRoot||this.flushInline()},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName=this.lastHelper=this.nameLookup("helpers",name,"helper"),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),nextStack=this.nextStack();helper.paramsInit&&this.pushSource(
helper.paramsInit),this.pushSource("if (helper = "+helperName+") { "+nextStack+" = helper.call("+helper.callParams+"); }"),this.pushSource("else { helper = "+nonHelper+"; "+nextStack+" = typeof helper === functionType ? helper.call("+helper.callParams+") : helper; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];this.options.data&&params.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var context,type,value=this.popStack();this.options.stringParams&&(type=this.popStack(),
context=this.popStack());var hash=this.hash;context&&hash.contexts.push("'"+key+"': "+context),type&&hash.types.push("'"+key+"': "+type),hash.values.push("'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){for(var child,compiler,children=environment.children,i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler;var index=this.matchExistingProgram(child);null==index?(this.context.programs.push(""),index=this.context.programs.length,child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context),this.context.environments[index]=child):(
child.index=index,child.name="program"+index)}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return i}},programExpression:function(guid){if(this.context.aliases.self="this",null==guid)return"self.noop";for(var depth,child=this.environment.children[guid],depths=child.depths.list,programParams=[child.index,child.name,"data"],i=0,l=depths.length;i<l;i++)1===(depth=depths[i])?programParams.push("depth0"):programParams.push("depth"+(depth-1));return(0===depths.length?"self.program(":"self.programWithDepth("
)+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name),this.pushSource(name+" = "+val+";")},useRegister:function(name){this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),source&&this.source.push(source)},pushStack:function(item){this.flushInline();var stack=this.incrStack();return item&&this.pushSource(stack+" = "+item+";"),this.compileStack.push(stack),stack},
replaceStack:function(callback){var stack,createdStack,usedLiteral,prefix="",inline=this.isInline();if(inline){var top=this.popStack(!0);if(top instanceof Literal)stack=top.value,usedLiteral=!0;else{var name=(createdStack=!this.stackSlot)?this.incrStack():this.topStackName();prefix="("+this.push(name)+" = "+top+"),",stack=this.topStack()}}else stack=this.topStack();var item=callback.call(this,stack);return inline?(usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push("("+prefix+item+")")):(/^stack/.test(stack)||(stack=this.nextStack()),this.pushSource(stack+" = ("+prefix+item+");")),stack},nextStack:function(){return this.pushStack()},
incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];entry instanceof Literal?this.compileStack.push(entry):this.pushStack(entry)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal
)return item.value;if(!inline){if(!this.stackSlot)throw new Exception("Invalid stack pop");this.stackSlot--}return item},topStack:function(wrapped){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];return!wrapped&&item instanceof Literal?item.value:item},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[];return{params:params,paramsInit:this.setupParams(paramSize,params,missingParams),name:this.nameLookup("helpers",name,
"helper"),callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")}},setupOptions:function(paramSize,params){var param,inverse,program,options=[],contexts=[],types=[];options.push("hash:"+this.popStack()),this.options.stringParams&&(options.push("hashTypes:"+this.popStack()),options.push("hashContexts:"+this.popStack())),inverse=this.popStack(),((program=this.popStack())||inverse)&&(program||(this.context.aliases.self="this",program="self.noop"),inverse||(this.context.aliases.self="this",inverse="self.noop"),options.push("inverse:"+inverse),options.push("fn:"+program))
;for(var i=0;i<paramSize;i++)param=this.popStack(),params.push(param),this.options.stringParams&&(types.push(this.popStack()),contexts.push(this.popStack()));return this.options.stringParams&&(options.push("contexts:["+contexts.join(",")+"]"),options.push("types:["+types.join(",")+"]")),this.options.data&&options.push("data:data"),options},setupParams:function(paramSize,params,useRegister){var options="{"+this.setupOptions(paramSize,params).join(",")+"}";return useRegister?(this.useRegister("options"),params.push("options"),"options="+options):(params.push(options),"")}};for(
var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={},i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0;return JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!(
JavaScriptCompiler.RESERVED_WORDS[name]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name))},JavaScriptCompiler}(__module2__,__module5__))}),function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:b+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=!0;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:b+n;t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=!0}}function r(n){
return n.charCodeAt(0)}function u(n,t){for(var e=n.m,r=t.m,u=-1,o=e.length;++u<o;){var a=e[u],i=r[u];if(a!==i){if(i<a||void 0===a)return 1;if(a<i||void 0===i)return-1}}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for((u=l()).false=u.null=u.true=u.undefined=!1,(o=l()).k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function a(n){return"\\"+Y[n]}function i(){return v.pop()||[]}function l(){return y.pop()||{k:null,l:null,m:null,false:!1,n:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,o:null}}function f(n){
return"function"!=typeof n.toString&&"string"==typeof(n+"")}function c(n){n.length=0,v.length<w&&v.push(n)}function p(n){var t=n.l;t&&p(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,y.length<w&&y.push(n)}function s(n,t,e){t||(t=0),void 0===e&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(e<0?0:e);++r<e;)u[r]=n[t+r];return u}var h,v=[],y=[],m=0,d={},b=+new Date+"",_=75,w=40,j=" \t\v\f\ufeff\n\r\u2028\u2029",x=/\b__p\+='';/g,C=/\b(__p\+=)''\+/g,E=/(__e\(.*?\)|\b__t\))\+'';/g,O=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,D=RegExp("^["+j+"]*0+(?=.$)"),N=/($^)/,B=/\bthis\b/,
P=/['\n\r\t\u2028\u2029\\]/g,R="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),T="[object Arguments]",$="[object Array]",L="[object Boolean]",z="[object Date]",q="[object Error]",K="[object Function]",W="[object Number]",G="[object Object]",J="[object RegExp]",M="[object String]",V={};V[K]=!1,V[T]=V[$]=V[L]=V[z]=V[W]=V[G]=V[J]=V[M]=!0;var H={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},Q={a:"",b:null,c:"",d:"",
e:"",v:null,g:"",h:null,support:null,i:"",j:!1},X={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,nt=X[typeof exports]&&exports&&!exports.nodeType&&exports,tt=X[typeof module]&&module&&!module.nodeType&&module,et=tt&&tt.exports===nt&&nt,rt=X[typeof global]&&global;!rt||rt.global!==rt&&rt.window!==rt||(Z=rt);var ut=function g(e){function v(n){return n&&"object"==typeof n&&!qe(n)&&we.call(n,"__wrapped__")?n:new y(n)}function y(n,t){this.__chain__=!!t,this.__wrapped__=n}function Y(n,t,e,r,u){if(e){var o=e(n);if(void 0!==o
)return o}if(!xt(n))return n;var a=he.call(n);if(!V[a]||!Le.nodeClass&&f(n))return n;var l=Te[a];switch(a){case L:case z:return new l(+n);case W:case M:return new l(n);case J:return(o=l(n.source,S.exec(n))).lastIndex=n.lastIndex,o}if(a=qe(n),t){var p=!r;r||(r=i()),u||(u=i());for(var g=r.length;g--;)if(r[g]==n)return u[g];o=a?l(n.length):{}}else o=a?s(n):Ye({},n);return a&&(we.call(n,"index")&&(o.index=n.index),we.call(n,"input")&&(o.input=n.input)),t&&(r.push(n),u.push(o),(a?Xe:tr)(n,function(n,a){o[a]=Y(n,t,e,r,u)}),p&&(c(r),c(u))),o}function nt(n){return xt(n)?Se(n):{}}function tt(n,t,e){if("function"!=typeof n)return Ht;if(void 0===t||!("prototype"in n)
)return n;var r=n.__bindData__;if(void 0===r&&(Le.funcNames&&(r=!n.name),!(r=r||!Le.funcDecomp))){var u=be.call(n);Le.funcNames||(r=!A.test(u)),r||(r=B.test(u),ze(n,r))}if(!1===r||!0!==r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function rt(e,r){var u=-1,a=ht(),i=e?e.length:0,l=_<=i&&a===n,f=[];if(l){var c=o(r);c?(a=t,r=c):l=!1}for(;++u<i;)a(r,c=e[u])<0&&f.push(c);return l&&p(r),f}function ot(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){
var a=n[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(qe(a)||dt(a))){t||(a=ot(a,t,e));var i=-1,l=a.length,f=o.length;for(o.length+=l;++i<l;)o[f++]=a[i]}else e||o.push(a)}return o}function at(n,t,e,r,u,o){if(e&&void 0!==(a=e(n,t)))return!!a;if(n===t)return 0!==n||1/n==1/t;if(n==n&&!(n&&X[typeof n]||t&&X[typeof t]))return!1;if(null==n||null==t)return n===t;var l=he.call(n),p=he.call(t);if(l==T&&(l=G),p==T&&(p=G),l!=p)return!1;switch(l){case L:case z:return+n==+t;case W:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case J:case M:return n==ie(t)}if(!(p=l==$)){var s=we.call(n,"__wrapped__"),g=we.call(t,"__wrapped__");if(s||g)return at(s?n.__wrapped__:n,
g?t.__wrapped__:t,e,r,u,o);if(l!=G||!Le.nodeClass&&(f(n)||f(t)))return!1;if((l=!Le.argsObject&&dt(n)?oe:n.constructor)!=(s=!Le.argsObject&&dt(t)?oe:t.constructor)&&!(jt(l)&&l instanceof l&&jt(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}for(l=!u,u||(u=i()),o||(o=i()),s=u.length;s--;)if(u[s]==n)return o[s]==t;var h=0,a=!0;if(u.push(n),o.push(t),p){if(s=n.length,h=t.length,(a=h==s)||r)for(;h--;)if(p=s,g=t[h],r)for(;p--&&!(a=at(n[p],g,e,r,u,o)););else if(!(a=at(n[h],g,e,r,u,o)))break}else nr(t,function(t,i,l){return we.call(l,i)?(h++,a=we.call(n,i)&&at(n[i],t,e,r,u,o)):void 0}),a&&!r&&nr(n,function(n,t,e){return we.call(e,t
)?a=-1<--h:void 0});return u.pop(),o.pop(),l&&(c(u),c(o)),a}function it(n,t,e,r,u){(qe(t)?Dt:tr)(t,function(t,o){var a,i,l=t,f=n[o];if(t&&((i=qe(t))||er(t))){for(l=r.length;l--;)if(a=r[l]==t){f=u[l];break}var c;a||(e&&(c=void 0!==(l=e(f,t)))&&(f=l),c||(f=i?qe(f)?f:[]:er(f)?f:{}),r.push(t),u.push(f),c||it(f,t,e,r,u))}else e&&void 0===(l=e(f,t))&&(l=t),void 0!==l&&(f=l);n[o]=f})}function lt(n,t){return n+de(Fe()*(t-n+1))}function ft(e,r,u){var a=-1,l=ht(),f=e?e.length:0,s=[],g=!r&&_<=f&&l===n,h=u||g?i():s;for(g&&(h=o(h),l=t);++a<f;){var v=e[a],y=u?u(v,a,e):v;(r?!a||h[h.length-1]!==y:l(h,y)<0)&&((u||g)&&h.push(y),s.push(v))}return g?(c(h.k),p(h)):u&&c(h),s}
function ct(n){return function(t,e,r){var u={};if(e=v.createCallback(e,r,3),qe(t)){r=-1;for(var o=t.length;++r<o;){var a=t[r];n(u,a,e(a,r,t),t)}}else Xe(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function pt(n,t,e,r,u,o){var a=1&t,i=4&t,l=16&t,f=32&t;if(!(2&t||jt(n)))throw new le;l&&!e.length&&(t&=-17,l=e=!1),f&&!r.length&&(t&=-33,f=r=!1);var c=n&&n.__bindData__;return c&&!0!==c?((c=s(c))[2]&&(c[2]=s(c[2])),c[3]&&(c[3]=s(c[3])),!a||1&c[1]||(c[4]=u),!a&&1&c[1]&&(t|=8),!i||4&c[1]||(c[5]=o),l&&je.apply(c[2]||(c[2]=[]),e),f&&Ee.apply(c[3]||(c[3]=[]),r),c[1]|=t,pt.apply(null,c)):(1==t||17===t?function(n){function t(){if(r){var n=s(r);je.apply(n,arguments)}
if(this instanceof t){var o=nt(e.prototype);return xt(n=e.apply(o,n||arguments))?n:o}return e.apply(u,n||arguments)}var e=n[0],r=n[2],u=n[4];return ze(t,n),t}:function et(n){function t(){var n=l?a:this;if(u){var h=s(u);je.apply(h,arguments)}return(o||c)&&(h||(h=s(arguments)),o&&je.apply(h,o),c&&h.length<i)?(r|=16,et([e,p?r:-4&r,h,null,a,i])):(h||(h=arguments),f&&(e=n[g]),this instanceof t?(n=nt(e.prototype),xt(h=e.apply(n,h))?h:n):e.apply(n,h))}var e=n[0],r=n[1],u=n[2],o=n[3],a=n[4],i=n[5],l=1&r,f=2&r,c=4&r,p=8&r,g=e;return ze(t,n),t})([n,t,e,r,u,o])}function st(){Q.h=F,Q.b=Q.c=Q.g=Q.i="",Q.e="t",Q.j=!0;for(var n,t=0;n=arguments[t];t++)for(var e in n
)Q[e]=n[e];t=Q.a,Q.d=/^[^,]+/.exec(t)[0],n=ee,t="return function("+t+"){";var r="var n,t="+(e=Q).d+",E="+e.e+";if(!t)return E;"+e.i+";";e.b?(r+="var u=t.length;n=-1;if("+e.b+"){",Le.unindexedChars&&(r+="if(s(t)){t=t.split('')}"),r+="while(++n<u){"+e.g+";}}else{"):Le.nonEnumArgs&&(r+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+e.g+";}}else{"),Le.enumPrototypes&&(r+="var G=typeof t=='function';"),Le.enumErrorProps&&(r+="var F=t===k||t instanceof Error;");var u=[];if(Le.enumPrototypes&&u.push('!(G&&n=="prototype")'),Le.enumErrorProps&&u.push('!(F&&(n=="message"||n=="name"))'),e.j&&e.f
)r+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}";else if(r+="for(n in t){",e.j&&u.push("m.call(t, n)"),u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}",Le.nonEnumShadows){for(r+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;k<7;k++)r+="n='"+e.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",e.j||(r+="||(!x[n]&&t[n]!==A[n])"),r+="){"+e.g+"}";r+="}"}return(e.b||Le.nonEnumArgs)&&(r+="}"),n("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+(r+=e.c+";return E")+"}")(tt,q,ce,we,d,dt,qe,kt,Q.f,pe,X,$e,M,se,he)}
function gt(n){return Ve[n]}function ht(){var t=(t=v.indexOf)===zt?n:t;return t}function vt(n){return"function"==typeof n&&ve.test(n)}function yt(n){var t,e;return!(!n||he.call(n)!=G||jt(t=n.constructor)&&!(t instanceof t)||!Le.argsClass&&dt(n)||!Le.nodeClass&&f(n))&&(Le.ownLast?(nr(n,function(n,t,r){return e=we.call(r,t),!1}),!1!==e):(nr(n,function(n,t){e=t}),void 0===e||we.call(n,e)))}function mt(n){return He[n]}function dt(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==T||!1}function bt(n,t,e){var r=We(n),u=r.length;for(t=tt(t,e,3);u--&&!1!==t(n[e=r[u]],e,n););return n}function _t(n){var t=[];return nr(n,function(n,e){jt(n
)&&t.push(e)}),t.sort()}function wt(n){for(var t=-1,e=We(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function jt(n){return"function"==typeof n}function xt(n){return!(!n||!X[typeof n])}function Ct(n){return"number"==typeof n||n&&"object"==typeof n&&he.call(n)==W||!1}function kt(n){return"string"==typeof n||n&&"object"==typeof n&&he.call(n)==M||!1}function Et(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;)u[t]=n[e[t]];return u}function Ot(n,t,e){var r=-1,u=ht(),o=n?n.length:0,a=!1;return e=(e<0?Be(0,o+e):e)||0,qe(n)?a=-1<u(n,t,e):"number"==typeof o?a=-1<(kt(n)?n.indexOf(t,e):u(n,t,e)):Xe(n,function(n){return++r<e?void 0:!(a=n===t)}),a}
function St(n,t,e){var r=!0;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&(r=!!t(n[e],e,n)););}else Xe(n,function(n,e,u){return r=!!t(n,e,u)});return r}function At(n,t,e){var r=[];if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}}else Xe(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function It(n,t,e){var r;if(t=v.createCallback(t,e,3),!qe(n))return Xe(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r;e=-1;for(var u=n.length;++e<u;){var o=n[e];if(t(o,e,n))return o}}function Dt(n,t,e){if(t&&void 0===e&&qe(n)){e=-1;for(var r=n.length;++e<r&&!1!==t(n[e],e,n););}else Xe(n,t,e);return n
}function Nt(n,t,e){var r=n,u=n?n.length:0;if(t=t&&void 0===e?t:tt(t,e,3),qe(n))for(;u--&&!1!==t(n[u],u,n););else{if("number"!=typeof u){var o=We(n);u=o.length}else Le.unindexedChars&&kt(n)&&(r=n.split(""));Xe(n,function(n,e,a){return e=o?o[--u]:--u,t(r[e],e,a)})}return n}function Bt(n,t,e){var r=-1,u=n?n.length:0,o=Zt("number"==typeof u?u:0);if(t=v.createCallback(t,e,3),qe(n))for(;++r<u;)o[r]=t(n[r],r,n);else Xe(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function Pt(n,t,e){var u=-1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];o<i&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n
,function(n,e,r){e=t(n,e,r),u<e&&(u=e,o=n)});return o}function Rt(n,t,e,r){var u=arguments.length<3;if(t=v.createCallback(t,r,4),qe(n)){var o=-1,a=n.length;for(u&&(e=n[++o]);++o<a;)e=t(e,n[o],o,n)}else Xe(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)});return e}function Ft(n,t,e,r){var u=arguments.length<3;return t=v.createCallback(t,r,4),Nt(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)}),e}function Tt(n){var t=-1,e=n?n.length:0,r=Zt("number"==typeof e?e:0);return Dt(n,function(n){var e=lt(0,++t);r[t]=r[e],r[e]=n}),r}function $t(n,t,e){var r;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&!(r=t(n[e],e,n)););}else Xe(n,function(n,e,u){return!(r=t(n
,e,u))});return!!r}function Lt(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=v.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(null==(r=t)||e)return n?n[0]:h;return s(n,0,Pe(Be(0,r),u))}function zt(t,e,r){if("number"==typeof r){var u=t?t.length:0;r=r<0?Be(0,u+r):r||0}else if(r)return t[r=Kt(t,e)]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if("number"!=typeof t&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=v.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++}else r=null==t||e?1:Be(0,t);return s(n,r)}function Kt(n,t,e,r){var u=0,o=n?n.length:u;for(t=(e=e?v.createCallback(e,r,1):Ht)(t);u<o;)e(n[r=u+o>>>1])<t?u=r+1:o=r;return u}
function Wt(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(e=v.createCallback(e,r,3)),ft(n,t,e)}function Gt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?Pt(ar(n,"length")):0,r=Zt(e<0?0:e);++t<e;)r[t]=ar(n,t);return r}function Jt(n,t){var e=-1,r=n?n.length:0,u={};for(t||!r||qe(n[0])||(t=[]);++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?pt(n,17,s(arguments,2),null,t):pt(n,1,null,null,t)}function Vt(n,t,e){var r,u,o,a,i,l,f,c=0,p=!1,s=!0;if(!jt(n))throw new le;if(t=Be(0,t)||0,!0===e){var g=!0;s=!1}else xt(e)&&(g=e.leading,
p="maxWait"in e&&(Be(t,e.maxWait)||0),s="trailing"in e?e.trailing:s);var v=function(){var e=t-(ir()-a);0<e?l=Ce(v,e):(u&&me(u),e=f,u=l=f=h,e&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null)))},y=function(){l&&me(l),u=l=f=h,(s||p!==t)&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null))};return function(){if(r=arguments,a=ir(),i=this,f=s&&(l||!g),!1===p)var e=g&&!l;else{u||g||(c=a);var h=p-(a-c),m=h<=0;m?(u&&(u=me(u)),c=a,o=n.apply(i,r)):u||(u=Ce(y,h))}return m&&l?l=me(l):l||t===p||(l=Ce(v,t)),e&&(m=!0,o=n.apply(i,r)),!m||l||u||(r=i=null),o}}function Ht(n){return n}function Ut(n,t,e){var r=!0,u=t&&_t(t);t&&(e||u.length)||(null==e&&(e=t),o=y,t=n,n=v,u=_t(t)),!1===e?r=!1:xt(e
)&&"chain"in e&&(r=e.chain);var o=n,a=jt(o);Dt(u,function(e){var u=n[e]=t[e];a&&(o.prototype[e]=function(){var t=this.__chain__,e=this.__wrapped__,a=[e];if(je.apply(a,arguments),a=u.apply(n,a),r||t){if(e===a&&xt(a))return this;(a=new o(a)).__chain__=t}return a})})}function Qt(){}function Xt(n){return function(t){return t[n]}}function Yt(){return this.__wrapped__}var Zt=(e=e?ut.defaults(Z.Object(),e,ut.pick(Z,R)):Z).Array,ne=e.Boolean,te=e.Date,ee=e.Function,re=e.Math,ue=e.Number,oe=e.Object,ae=e.RegExp,ie=e.String,le=e.TypeError,fe=[],ce=e.Error.prototype,pe=oe.prototype,se=ie.prototype,ge=e._,he=pe.toString,ve=ae("^"+ie(he).replace(/[.*+?^${}()|[\]\\]/g,
"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ye=re.ceil,me=e.clearTimeout,de=re.floor,be=ee.prototype.toString,_e=vt(_e=oe.getPrototypeOf)&&_e,we=pe.hasOwnProperty,je=fe.push,xe=pe.propertyIsEnumerable,Ce=e.setTimeout,ke=fe.splice,Ee=fe.unshift,Oe=function(){try{var n={},t=vt(t=oe.defineProperty)&&t,e=t(n,n,n)&&t}catch(r){}return e}(),Se=vt(Se=oe.create)&&Se,Ae=vt(Ae=Zt.isArray)&&Ae,Ie=e.isFinite,De=e.isNaN,Ne=vt(Ne=oe.keys)&&Ne,Be=re.max,Pe=re.min,Re=e.parseInt,Fe=re.random,Te={};Te[$]=Zt,Te[L]=ne,Te[z]=te,Te[K]=ee,Te[G]=oe,Te[W]=ue,Te[J]=ae,Te[M]=ie;var $e={};$e[$]=$e[z]=$e[W]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$e[L]=$e[M]={
constructor:!0,toString:!0,valueOf:!0},$e[q]=$e[K]=$e[J]={constructor:!0,toString:!0},$e[G]={constructor:!0},function(){for(var n=F.length;n--;){var t,e=F[n];for(t in $e)we.call($e,t)&&!we.call($e[t],e)&&($e[t][e]=!1)}}(),y.prototype=v.prototype;var Le=v.support={};!function(){var n=function(){this.x=1},t={0:1,length:1},r=[];for(var u in n.prototype={valueOf:1,y:1},new n)r.push(u);for(u in arguments);Le.argsClass=he.call(arguments)==T,Le.argsObject=arguments.constructor==oe&&!(arguments instanceof Zt),Le.enumErrorProps=xe.call(ce,"message")||xe.call(ce,"name"),Le.enumPrototypes=xe.call(n,"prototype"),Le.funcDecomp=!vt(e.WinRTError)&&B.test(g),
Le.funcNames="string"==typeof ee.name,Le.nonEnumArgs=0!=u,Le.nonEnumShadows=!/valueOf/.test(r),Le.ownLast="x"!=r[0],Le.spliceObjects=(fe.splice.call(t,0,1),!t[0]),Le.unindexedChars="xx"!="x"[0]+oe("x")[0];try{Le.nodeClass=!(he.call(document)==G&&!({toString:0}+""))}catch(o){Le.nodeClass=!0}}(1),v.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:I,variable:"",imports:{_:v}},Se||(nt=function(){function n(){}return function(t){if(xt(t)){n.prototype=t;var r=new n;n.prototype=null}return r||e.Object()}}());var ze=Oe?function(n,t){U.value=t,Oe(n,"__bindData__",U)}:Qt;Le.argsClass||(dt=function(n){
return n&&"object"==typeof n&&"number"==typeof n.length&&we.call(n,"callee")&&!xe.call(n,"callee")||!1});var qe=Ae||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==$||!1},Ke=st({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),We=Ne?function(n){return xt(n)?Le.enumPrototypes&&"function"==typeof n||Le.nonEnumArgs&&n.length&&dt(n)?Ke(n):Ne(n):[]}:Ke,Ge={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:We,g:"if(e(t[n],n,g)===false)return E"},Je={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:We,
g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Me={i:"if(!B[typeof t])return E;"+Ge.i,b:!1},Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=wt(Ve),Ue=ae("("+We(He).join("|")+")","g"),Qe=ae("["+We(Ve).join("")+"]","g"),Xe=st(Ge),Ye=st(Je,{i:Je.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Ze=st(Je),nr=st(Ge,Me,{j:!1}),tr=st(Ge,Me);jt(/x/)&&(jt=function(n){return"function"==typeof n&&he.call(n)==K});var er=_e?function(n){if(!n||he.call(n)!=G||!Le.argsClass&&dt(n))return!1;var t=n.valueOf,e=vt(t)&&(e=_e(t))&&_e(e)
;return e?n==e||_e(n)==e:yt(n)}:yt,rr=ct(function(n,t,e){we.call(n,e)?n[e]++:n[e]=1}),ur=ct(function(n,t,e){(we.call(n,e)?n[e]:n[e]=[]).push(t)}),or=ct(function(n,t,e){n[e]=t}),ar=Bt,ir=vt(ir=te.now)&&ir||function(){return(new te).getTime()},lr=8==Re(j+"08")?Re:function(n,t){return Re(kt(n)?n.replace(D,""):n,t||0)};return v.after=function(n,t){if(!jt(t))throw new le;return function(){return--n<1?t.apply(this,arguments):void 0}},v.assign=Ye,v.at=function(n){var e=-1,r=ot(t=arguments,!0,!1,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Zt(t);for(Le.unindexedChars&&kt(n)&&(n=n.split(""));++e<t;)u[e]=n[r[e]];return u},v.bind=Mt,v.bindAll=function(n){for(
var t=1<arguments.length?ot(arguments,!0,!1,1):_t(n),e=-1,r=t.length;++e<r;){var u=t[e];n[u]=pt(n[u],1,null,null,n)}return n},v.bindKey=function(n,t){return 2<arguments.length?pt(t,19,s(arguments,2),null,n):pt(t,3,null,null,n)},v.chain=function(n){return(n=new y(n)).__chain__=!0,n},v.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},v.compose=function(){for(var n=arguments,t=n.length;t--;)if(!jt(n[t]))throw new le;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},v.constant=function(n){return function(){return n}},v.countBy=rr,v.create=function(n,t){var e=nt(n);return t?Ye(
e,t):e},v.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return tt(n,t,e);if("object"!=r)return Xt(n);var u=We(n),o=u[0],a=n[o];return 1!=u.length||a!=a||xt(a)?function(t){for(var e=u.length,r=!1;e--&&(r=at(t[u[e]],n[u[e]],null,!0)););return r}:function(n){return n=n[o],a===n&&(0!==a||1/a==1/n)}},v.curry=function(n,t){return pt(n,4,null,null,null,t="number"==typeof t?t:+t||n.length)},v.debounce=Vt,v.defaults=Ze,v.defer=function(n){if(!jt(n))throw new le;var t=s(arguments,1);return Ce(function(){n.apply(h,t)},1)},v.delay=function(n,t){if(!jt(n))throw new le;var e=s(arguments,2);return Ce(function(){n.apply(h,e)},t)},
v.difference=function(n){return rt(n,ot(arguments,!0,!0,1))},v.filter=At,v.flatten=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(n=Bt(n,e,r)),ot(n,t)},v.forEach=Dt,v.forEachRight=Nt,v.forIn=nr,v.forInRight=function(n,t,e){var r=[];nr(n,function(n,t){r.push(t,n)});var u=r.length;for(t=tt(t,e,3);u--&&!1!==t(r[u--],r[u],n););return n},v.forOwn=tr,v.forOwnRight=bt,v.functions=_t,v.groupBy=ur,v.indexBy=or,v.initial=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;return s(n,0,Pe(Be(0,u-r
),u))},v.intersection=function(){for(var e=[],r=-1,u=arguments.length,a=i(),l=ht(),f=l===n,s=i();++r<u;){var g=arguments[r];(qe(g)||dt(g))&&(e.push(g),a.push(f&&g.length>=_&&o(r?e[r]:s)))}var h=-1,v=(f=e[0])?f.length:0,y=[];n:for(;++h<v;){var m=a[0];if(g=f[h],(m?t(m,g):l(s,g))<0){for(r=u,(m||s).push(g);--r;)if(((m=a[r])?t(m,g):l(e[r],g))<0)continue n;y.push(g)}}for(;u--;)(m=a[u])&&p(m);return c(a),c(s),y},v.invert=wt,v.invoke=function(n,t){var e=s(arguments,2),r=-1,u="function"==typeof t,o=n?n.length:0,a=Zt("number"==typeof o?o:0);return Dt(n,function(n){a[++r]=(u?t:n[t]).apply(n,e)}),a},v.keys=We,v.map=Bt,v.mapValues=function(n,t,e){var r={}
;return t=v.createCallback(t,e,3),tr(n,function(n,e,u){r[e]=t(n,e,u)}),r},v.max=Pt,v.memoize=function(n,t){if(!jt(n))throw new le;var e=function(){var r=e.cache,u=t?t.apply(this,arguments):b+arguments[0];return we.call(r,u)?r[u]:r[u]=n.apply(this,arguments)};return e.cache={},e},v.merge=function(n){var t=arguments,e=2;if(!xt(n))return n;if("number"!=typeof t[2]&&(e=t.length),3<e&&"function"==typeof t[e-2])var r=tt(t[--e-1],t[e--],2);else 2<e&&"function"==typeof t[e-1]&&(r=t[--e]);t=s(arguments,1,e);for(var u=-1,o=i(),a=i();++u<e;)it(n,t[u],r,o,a);return c(o),c(a),n},v.min=function(n,t,e){var u=1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),
null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i<o&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){(e=t(n,e,r))<u&&(u=e,o=n)});return o},v.omit=function(n,t,e){var r={};if("function"!=typeof t){var u=[];nr(n,function(n,t){u.push(t)});for(var o=-1,a=(u=rt(u,ot(arguments,!0,!1,1))).length;++o<a;){var i=u[o];r[i]=n[i]}}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)||(r[e]=n)});return r},v.once=function(n){var t,e;if(!jt(n))throw new le;return function(){return t||(t=!0,e=n.apply(this,arguments),n=null),e}},v.pairs=function(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u}
,v.partial=function(n){return pt(n,16,s(arguments,1))},v.partialRight=function(n){return pt(n,32,null,s(arguments,1))},v.pick=function(n,t,e){var r={};if("function"!=typeof t)for(var u=-1,o=ot(arguments,!0,!1,1),a=xt(n)?o.length:0;++u<a;){var i=o[u];i in n&&(r[i]=n[i])}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},v.pluck=ar,v.property=Xt,v.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,a=t[e];++o<u;)n[o]===a&&(ke.call(n,o--,1),u--);return n},v.range=function(n,t,e){n=+n||0,null==t&&(t=n,n=0);var r=-1;t=Be(0,ye((t-n)/((e="number"==typeof e?e:+e||1)||1)));for(var u=Zt(t);++r<t;
)u[r]=n,n+=e;return u},v.reject=function(n,t,e){return t=v.createCallback(t,e,3),At(n,function(n,e,r){return!t(n,e,r)})},v.remove=function(n,t,e){var r=-1,u=n?n.length:0,o=[];for(t=v.createCallback(t,e,3);++r<u;)t(e=n[r],r,n)&&(o.push(e),ke.call(n,r--,1),u--);return o},v.rest=qt,v.shuffle=Tt,v.sortBy=function(n,t,e){var r=-1,o=qe(t),a=n?n.length:0,f=Zt("number"==typeof a?a:0);for(o||(t=v.createCallback(t,e,3)),Dt(n,function(n,e,u){var a=f[++r]=l();o?a.m=Bt(t,function(t){return n[t]}):(a.m=i())[0]=t(n,e,u),a.n=r,a.o=n}),a=f.length,f.sort(u);a--;)n=f[a],f[a]=n.o,o||c(n.m),p(n);return f},v.tap=function(n,t){return t(n),n},v.throttle=function(n,t,e){var r=!0,
u=!0;if(!jt(n))throw new le;return!1===e?r=!1:xt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),H.leading=r,H.maxWait=t,H.trailing=u,Vt(n,t,H)},v.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Zt(n);for(t=tt(t,e,1);++r<n;)u[r]=t(r);return u},v.toArray=function(n){return n&&"number"==typeof n.length?Le.unindexedChars&&kt(n)?n.split(""):s(n):Et(n)},v.transform=function(n,t,e,r){var u=qe(n);if(null==e)if(u)e=[];else{var o=n&&n.constructor;e=nt(o&&o.prototype)}return t&&(t=v.createCallback(t,r,4),(u?Xe:tr)(n,function(n,r,u){return t(e,n,r,u)})),e},v.union=function(){return ft(ot(arguments,!0,!0))},v.uniq=Wt,v.values=Et,v.where=At,
v.without=function(n){return rt(n,s(arguments,1))},v.wrap=function(n,t){return pt(t,16,[n])},v.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var e=arguments[n];if(qe(e)||dt(e))var r=r?ft(rt(r,e).concat(rt(e,r))):e}return r||[]},v.zip=Gt,v.zipObject=Jt,v.collect=Bt,v.drop=qt,v.each=Dt,v.eachRight=Nt,v.extend=Ye,v.methods=_t,v.object=Jt,v.select=At,v.tail=qt,v.unique=Wt,v.unzip=Gt,Ut(v),v.clone=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e=t,t=!1),Y(n,t,"function"==typeof e&&tt(e,r,1))},v.cloneDeep=function(n,t,e){return Y(n,!0,"function"==typeof t&&tt(t,e,1))},v.contains=Ot,v.escape=function(n){return null==n?"":ie(n).replace(Qe,gt)},
v.every=St,v.find=It,v.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=v.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},v.findKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),tr(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.findLast=function(n,t,e){var r;return t=v.createCallback(t,e,3),Nt(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r},v.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=v.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},v.findLastKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),bt(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.has=function(n,t){
return!!n&&we.call(n,t)},v.identity=Ht,v.indexOf=zt,v.isArguments=dt,v.isArray=qe,v.isBoolean=function(n){return!0===n||!1===n||n&&"object"==typeof n&&he.call(n)==L||!1},v.isDate=function(n){return n&&"object"==typeof n&&he.call(n)==z||!1},v.isElement=function(n){return n&&1===n.nodeType||!1},v.isEmpty=function(n){var t=!0;if(!n)return t;var e=he.call(n),r=n.length;return e==$||e==M||(Le.argsClass?e==T:dt(n))||e==G&&"number"==typeof r&&jt(n.splice)?!r:(tr(n,function(){return t=!1}),t)},v.isEqual=function(n,t,e,r){return at(n,t,"function"==typeof e&&tt(e,r,2))},v.isFinite=function(n){return Ie(n)&&!De(parseFloat(n))},v.isFunction=jt,v.isNaN=function(n){
return Ct(n)&&n!=+n},v.isNull=function(n){return null===n},v.isNumber=Ct,v.isObject=xt,v.isPlainObject=er,v.isRegExp=function(n){return n&&X[typeof n]&&he.call(n)==J||!1},v.isString=kt,v.isUndefined=function(n){return void 0===n},v.lastIndexOf=function(n,t,e){var r=n?n.length:0;for("number"==typeof e&&(r=(e<0?Be(0,r+e):Pe(e,r-1))+1);r--;)if(n[r]===t)return r;return-1},v.mixin=Ut,v.noConflict=function(){return e._=ge,this},v.noop=Qt,v.now=ir,v.parseInt=lr,v.random=function(n,t,e){var r=null==n,u=null==t;return null==e&&("boolean"==typeof n&&u?(e=n,n=1):u||"boolean"!=typeof t||(e=t,u=!0)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,e||n%1||t%1?(e=Fe(),Pe(n+e*(
t-n+parseFloat("1e-"+((e+"").length-1))),t)):lt(n,t)},v.reduce=Rt,v.reduceRight=Ft,v.result=function(n,t){if(n){var e=n[t];return jt(e)?n[t]():e}},v.runInContext=g,v.size=function(n){var t=n?n.length:0;return"number"==typeof t?t:We(n).length},v.some=$t,v.sortedIndex=Kt,v.template=function(n,t,e){var r=v.templateSettings;n=ie(n||""),e=Ze({},e,r);var u,o=Ze({},e.imports,r.imports),i=(r=We(o),o=Et(o),0),l=e.interpolate||N,f="__p+='";l=ae((e.escape||N).source+"|"+l.source+"|"+(l===I?O:N).source+"|"+(e.evaluate||N).source+"|$","g"),n.replace(l,function(t,e,r,o,l,c){return r||(r=o),f+=n.slice(i,c).replace(P,a),e&&(f+="'+__e("+e+")+'"),l&&(u=!0,
f+="';"+l+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),i=c+t.length,t}),f+="';",(l=e=e.variable)||(f="with("+(e="obj")+"){"+f+"}"),f=(u?f.replace(x,""):f).replace(C,"$1").replace(E,"$1;"),f="function("+e+"){"+(l?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var c=ee(r,"return "+f).apply(h,o)}catch(p){throw p.source=f,p}return t?c(t):(c.source=f,c)},v.unescape=function(n){return null==n?"":ie(n).replace(Ue,mt)},v.uniqueId=function(n){var t=++m;return ie(null==n?"":n)+t},v.all=St,v.any=$t,v.detect=It,v.findWhere=It,v.foldl=Rt,v.foldr=Ft,
v.include=Ot,v.inject=Rt,Ut(function(){var n={};return tr(v,function(t,e){v.prototype[e]||(n[e]=t)}),n}(),!1),v.first=Lt,v.last=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(null==(r=t)||e)return n?n[u-1]:h;return s(n,Be(0,u-r))},v.sample=function(n,t,e){return n&&"number"!=typeof n.length?n=Et(n):Le.unindexedChars&&kt(n)&&(n=n.split("")),null==t||e?n?n[lt(0,n.length-1)]:h:((n=Tt(n)).length=Pe(Be(0,t),n.length),n)},v.take=Lt,v.head=Lt,tr(v,function(n,t){var e="sample"!==t;v.prototype[t]||(v.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r)
;return u||null!=t&&(!r||e&&"function"==typeof t)?new y(o,u):o})}),v.VERSION="2.4.1",v.prototype.chain=function(){return this.__chain__=!0,this},v.prototype.toString=function(){return ie(this.__wrapped__)},v.prototype.value=Yt,v.prototype.valueOf=Yt,Xe(["join","pop","shift"],function(n){var t=fe[n];v.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);return n?new y(e,n):e}}),Xe(["push","reverse","sort","unshift"],function(n){var t=fe[n];v.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Xe(["concat","slice","splice"],function(n){var t=fe[n];v.prototype[n]=function(){return new y(t.apply(
this.__wrapped__,arguments),this.__chain__)}}),Le.spliceObjects||Xe(["pop","shift","splice"],function(n){var t=fe[n],e="splice"==n;v.prototype[n]=function(){var n=this.__chain__,r=this.__wrapped__,u=t.apply(r,arguments);return 0===r.length&&delete r[0],n||e?new y(u,n):u}}),v}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=ut,define("lodash",[],function(){return ut})):nt&&tt?et?(tt.exports=ut)._=ut:nt._=ut:Z._=ut}.call(this),define("core/format",["lodash"],function(_){"use strict";var pattern=/(%[sdj])/g;return function(message){var replacements=Array.prototype.slice.call(arguments,1);return _.reduce(message.match(pattern),function(
acc,match,index){var replacement="";if(void 0!==replacements[index]){switch(match){case"%d":replacement=Number(replacements[index]);break;case"%j":try{replacement=JSON.stringify(replacements[index]).replace(/"/g,"")}catch(e){}break;default:replacement=replacements[index]}message=message.replace(match,replacement)}return message},message)}}),define("i18n",["json!i18ntr/messages.json","core/format"],function(i18nTr,format){"use strict";var translations=i18nTr.translations;return function(message){var localized=translations[message]||message;return 1<arguments.length&&(localized=format.apply(null,[localized].concat([].slice.call(arguments,1)))),localized}}),
function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("lib/dompurify/purify",factory):global.DOMPurify=factory()}(this,function(){"use strict";var freeze$1=Object.freeze||function(x){return x},html=freeze$1(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3",
"h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg=freeze$1(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse",
"filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),svgFilters=freeze$1(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mathMl=freeze$1(["math","menclose",
"merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),text=freeze$1(["#text"]),freeze$2=Object.freeze||function(x){return x},html$1=freeze$2(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label",
"lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),svg$1=freeze$2(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip",
"clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix",
"kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color",
"stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl$1=freeze$2(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir",
"display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze$2(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hasOwnProperty=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,apply$1=(
"undefined"!=typeof Reflect&&Reflect).apply;function addToSet(set,array){setPrototypeOf&&setPrototypeOf(set,null);for(var l=array.length;l--;){var element=array[l];if("string"==typeof element){var lcElement=element.toLowerCase();lcElement!==element&&(Object.isFrozen(array)||(array[l]=lcElement),element=lcElement)}set[element]=!0}return set}function clone(object){var newObject={},property=void 0;for(property in object)apply$1(hasOwnProperty,object,[property])&&(newObject[property]=object[property]);return newObject}apply$1||(apply$1=function(fun,thisValue,args){return fun.apply(thisValue,args)});var seal=Object.seal||function(x){return x},MUSTACHE_EXPR=seal(
/\{\{[\s\S]*|[\s\S]*\}\}/gm),ERB_EXPR=seal(/<%[\s\S]*|[\s\S]*%>/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _toConsumableArray(arr){if(Array.isArray(arr)
){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var apply=("undefined"!=typeof Reflect&&Reflect).apply,arraySlice=Array.prototype.slice,freeze=Object.freeze,getGlobal=function(){return"undefined"==typeof window?null:window};apply||(apply=function(fun,thisValue,args){return fun.apply(thisValue,args)});var _createTrustedTypesPolicy=function(trustedTypes,document){if("object"!==(void 0===trustedTypes?"undefined":_typeof(trustedTypes))||"function"!=typeof trustedTypes.createPolicy)return null;var suffix=null;document.currentScript&&document.currentScript.hasAttribute("data-tt-policy-suffix")&&(
suffix=document.currentScript.getAttribute("data-tt-policy-suffix"));var policyName="dompurify"+(suffix?"#"+suffix:"");try{return trustedTypes.createPolicy(policyName,{createHTML:function(html$$1){return html$$1}})}catch(e){return console.warn("TrustedTypes policy "+policyName+" could not be created."),null}};return function createDOMPurify(){var window=0<arguments.length&&void 0!==arguments[0]?arguments[0]:getGlobal(),DOMPurify=function(root){return createDOMPurify(root)};if(DOMPurify.version="1.0.9",DOMPurify.removed=[],!window||!window.document||9!==window.document.nodeType)return DOMPurify.isSupported=!1,DOMPurify;var originalDocument=window.document,
useDOMParser=!1,removeTitle=!1,document=window.document,DocumentFragment=window.DocumentFragment,HTMLTemplateElement=window.HTMLTemplateElement,Node=window.Node,NodeFilter=window.NodeFilter,_window$NamedNodeMap=window.NamedNodeMap,NamedNodeMap=void 0===_window$NamedNodeMap?window.NamedNodeMap||window.MozNamedAttrMap:_window$NamedNodeMap,Text=window.Text,Comment=window.Comment,DOMParser=window.DOMParser,TrustedTypes=window.TrustedTypes;if("function"==typeof HTMLTemplateElement){var template=document.createElement("template");template.content&&template.content.ownerDocument&&(document=template.content.ownerDocument)}
var trustedTypesPolicy=_createTrustedTypesPolicy(TrustedTypes,originalDocument),emptyHTML=trustedTypesPolicy?trustedTypesPolicy.createHTML(""):"",_document=document,implementation=_document.implementation,createNodeIterator=_document.createNodeIterator,getElementsByTagName=_document.getElementsByTagName,createDocumentFragment=_document.createDocumentFragment,importNode=originalDocument.importNode,hooks={};DOMPurify.isSupported=implementation&&void 0!==implementation.createHTMLDocument&&9!==document.documentMode;var MUSTACHE_EXPR$$1=MUSTACHE_EXPR,ERB_EXPR$$1=ERB_EXPR,DATA_ATTR$$1=DATA_ATTR,ARIA_ATTR$$1=ARIA_ATTR,IS_SCRIPT_OR_DATA$$1=IS_SCRIPT_OR_DATA,
ATTR_WHITESPACE$$1=ATTR_WHITESPACE,IS_ALLOWED_URI$$1=IS_ALLOWED_URI,ALLOWED_TAGS=null,DEFAULT_ALLOWED_TAGS=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(svgFilters),_toConsumableArray(mathMl),_toConsumableArray(text))),ALLOWED_ATTR=null,DEFAULT_ALLOWED_ATTR=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(mathMl$1),_toConsumableArray(xml))),FORBID_TAGS=null,FORBID_ATTR=null,ALLOW_ARIA_ATTR=!0,ALLOW_DATA_ATTR=!0,ALLOW_UNKNOWN_PROTOCOLS=!1,SAFE_FOR_JQUERY=!1,SAFE_FOR_TEMPLATES=!1,WHOLE_DOCUMENT=!1,SET_CONFIG=!1,FORCE_BODY=!1,RETURN_DOM=!1,RETURN_DOM_FRAGMENT=!1,
RETURN_DOM_IMPORT=!1,SANITIZE_DOM=!0,KEEP_CONTENT=!0,IN_PLACE=!1,USE_PROFILES={},FORBID_CONTENTS=addToSet({},["audio","head","math","script","style","template","svg","video"]),DATA_URI_TAGS=addToSet({},["audio","video","img","source","image"]),URI_SAFE_ATTRIBUTES=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),CONFIG=null,formElement=document.createElement("form"),_parseConfig=function(cfg){CONFIG&&CONFIG===cfg||(cfg&&"object"===(void 0===cfg?"undefined":_typeof(cfg))||(cfg={}),ALLOWED_TAGS="ALLOWED_TAGS"in cfg?addToSet({},cfg.ALLOWED_TAGS):DEFAULT_ALLOWED_TAGS,
ALLOWED_ATTR="ALLOWED_ATTR"in cfg?addToSet({},cfg.ALLOWED_ATTR):DEFAULT_ALLOWED_ATTR,FORBID_TAGS="FORBID_TAGS"in cfg?addToSet({},cfg.FORBID_TAGS):{},FORBID_ATTR="FORBID_ATTR"in cfg?addToSet({},cfg.FORBID_ATTR):{},USE_PROFILES="USE_PROFILES"in cfg&&cfg.USE_PROFILES,ALLOW_ARIA_ATTR=!1!==cfg.ALLOW_ARIA_ATTR,ALLOW_DATA_ATTR=!1!==cfg.ALLOW_DATA_ATTR,ALLOW_UNKNOWN_PROTOCOLS=cfg.ALLOW_UNKNOWN_PROTOCOLS||!1,SAFE_FOR_JQUERY=cfg.SAFE_FOR_JQUERY||!1,SAFE_FOR_TEMPLATES=cfg.SAFE_FOR_TEMPLATES||!1,WHOLE_DOCUMENT=cfg.WHOLE_DOCUMENT||!1,RETURN_DOM=cfg.RETURN_DOM||!1,RETURN_DOM_FRAGMENT=cfg.RETURN_DOM_FRAGMENT||!1,RETURN_DOM_IMPORT=cfg.RETURN_DOM_IMPORT||!1,
FORCE_BODY=cfg.FORCE_BODY||!1,SANITIZE_DOM=!1!==cfg.SANITIZE_DOM,KEEP_CONTENT=!1!==cfg.KEEP_CONTENT,IN_PLACE=cfg.IN_PLACE||!1,IS_ALLOWED_URI$$1=cfg.ALLOWED_URI_REGEXP||IS_ALLOWED_URI$$1,SAFE_FOR_TEMPLATES&&(ALLOW_DATA_ATTR=!1),RETURN_DOM_FRAGMENT&&(RETURN_DOM=!0),USE_PROFILES&&(ALLOWED_TAGS=addToSet({},[].concat(_toConsumableArray(text))),ALLOWED_ATTR=[],!0===USE_PROFILES.html&&(addToSet(ALLOWED_TAGS,html),addToSet(ALLOWED_ATTR,html$1)),!0===USE_PROFILES.svg&&(addToSet(ALLOWED_TAGS,svg),addToSet(ALLOWED_ATTR,svg$1),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.svgFilters&&(addToSet(ALLOWED_TAGS,svgFilters),addToSet(ALLOWED_ATTR,svg$1),addToSet(ALLOWED_ATTR,
xml)),!0===USE_PROFILES.mathMl&&(addToSet(ALLOWED_TAGS,mathMl),addToSet(ALLOWED_ATTR,mathMl$1),addToSet(ALLOWED_ATTR,xml))),cfg.ADD_TAGS&&(ALLOWED_TAGS===DEFAULT_ALLOWED_TAGS&&(ALLOWED_TAGS=clone(ALLOWED_TAGS)),addToSet(ALLOWED_TAGS,cfg.ADD_TAGS)),cfg.ADD_ATTR&&(ALLOWED_ATTR===DEFAULT_ALLOWED_ATTR&&(ALLOWED_ATTR=clone(ALLOWED_ATTR)),addToSet(ALLOWED_ATTR,cfg.ADD_ATTR)),cfg.ADD_URI_SAFE_ATTR&&addToSet(URI_SAFE_ATTRIBUTES,cfg.ADD_URI_SAFE_ATTR),KEEP_CONTENT&&(ALLOWED_TAGS["#text"]=!0),WHOLE_DOCUMENT&&addToSet(ALLOWED_TAGS,["html","head","body"]),ALLOWED_TAGS.table&&addToSet(ALLOWED_TAGS,["tbody"]),freeze&&freeze(cfg),CONFIG=cfg)},_forceRemove=function(node){
DOMPurify.removed.push({element:node});try{node.parentNode.removeChild(node)}catch(err){node.outerHTML=emptyHTML}},_removeAttribute=function(name,node){try{DOMPurify.removed.push({attribute:node.getAttributeNode(name),from:node})}catch(err){DOMPurify.removed.push({attribute:null,from:node})}node.removeAttribute(name)},_initDocument=function(dirty){var doc=void 0,leadingWhitespace=void 0;if(FORCE_BODY)dirty="<remove></remove>"+dirty;else{var matches=dirty.match(/^[\s]+/);(leadingWhitespace=matches&&matches[0])&&(dirty=dirty.slice(leadingWhitespace.length))}if(useDOMParser)try{doc=(new DOMParser).parseFromString(dirty,"text/html")}catch(err){}if(
removeTitle&&addToSet(FORBID_TAGS,["title"]),!doc||!doc.documentElement){var body=(doc=implementation.createHTMLDocument("")).body;body.parentNode.removeChild(body.parentNode.firstElementChild),body.outerHTML=trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty}return leadingWhitespace&&doc.body.insertBefore(document.createTextNode(leadingWhitespace),doc.body.childNodes[0]||null),getElementsByTagName.call(doc,WHOLE_DOCUMENT?"html":"body")[0]};DOMPurify.isSupported&&(function(){try{_initDocument('<svg><p><style><img src="</style><img src=x onerror=1//">').querySelector("svg img")&&(useDOMParser=!0)}catch(err){}}(),function(){try{_initDocument(
"<x/><title>&lt;/title&gt;&lt;img&gt;").querySelector("title").innerHTML.match(/<\/title/)&&(removeTitle=!0)}catch(err){}}());var _createIterator=function(root){return createNodeIterator.call(root.ownerDocument||root,root,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,function(){return NodeFilter.FILTER_ACCEPT},!1)},_isNode=function(obj){return"object"===(void 0===Node?"undefined":_typeof(Node))?obj instanceof Node:obj&&"object"===(void 0===obj?"undefined":_typeof(obj))&&"number"==typeof obj.nodeType&&"string"==typeof obj.nodeName},_executeHook=function(entryPoint,currentNode,data){hooks[entryPoint]&&hooks[entryPoint].forEach(function(
hook){hook.call(DOMPurify,currentNode,data,CONFIG)})},_sanitizeElements=function(currentNode){var elm,content=void 0;if(_executeHook("beforeSanitizeElements",currentNode,null),!((elm=currentNode)instanceof Text||elm instanceof Comment||"string"==typeof elm.nodeName&&"string"==typeof elm.textContent&&"function"==typeof elm.removeChild&&elm.attributes instanceof NamedNodeMap&&"function"==typeof elm.removeAttribute&&"function"==typeof elm.setAttribute))return _forceRemove(currentNode),!0;var tagName=currentNode.nodeName.toLowerCase();if(_executeHook("uponSanitizeElement",currentNode,{tagName:tagName,allowedTags:ALLOWED_TAGS}),
ALLOWED_TAGS[tagName]&&!FORBID_TAGS[tagName])return!SAFE_FOR_JQUERY||currentNode.firstElementChild||currentNode.content&&currentNode.content.firstElementChild||!/</g.test(currentNode.textContent)||(DOMPurify.removed.push({element:currentNode.cloneNode()}),currentNode.innerHTML?currentNode.innerHTML=currentNode.innerHTML.replace(/</g,"&lt;"):currentNode.innerHTML=currentNode.textContent.replace(/</g,"&lt;")),SAFE_FOR_TEMPLATES&&3===currentNode.nodeType&&(content=(content=(content=currentNode.textContent).replace(MUSTACHE_EXPR$$1," ")).replace(ERB_EXPR$$1," "),currentNode.textContent!==content&&(DOMPurify.removed.push({element:currentNode.cloneNode()}),
currentNode.textContent=content)),_executeHook("afterSanitizeElements",currentNode,null),!1;if(KEEP_CONTENT&&!FORBID_CONTENTS[tagName]&&"function"==typeof currentNode.insertAdjacentHTML)try{var htmlToInsert=currentNode.innerHTML;currentNode.insertAdjacentHTML("AfterEnd",trustedTypesPolicy?trustedTypesPolicy.createHTML(htmlToInsert):htmlToInsert)}catch(err){}return _forceRemove(currentNode),!0},_isValidAttribute=function(lcTag,lcName,value){if(SANITIZE_DOM&&("id"===lcName||"name"===lcName)&&(value in document||value in formElement))return!1;if(SAFE_FOR_TEMPLATES&&(value=(value=value.replace(MUSTACHE_EXPR$$1," ")).replace(ERB_EXPR$$1," ")),
ALLOW_DATA_ATTR&&DATA_ATTR$$1.test(lcName));else if(ALLOW_ARIA_ATTR&&ARIA_ATTR$$1.test(lcName));else{if(!ALLOWED_ATTR[lcName]||FORBID_ATTR[lcName])return!1;if(URI_SAFE_ATTRIBUTES[lcName]);else if(IS_ALLOWED_URI$$1.test(value.replace(ATTR_WHITESPACE$$1,"")));else if("src"!==lcName&&"xlink:href"!==lcName||"script"===lcTag||0!==value.indexOf("data:")||!DATA_URI_TAGS[lcTag])if(ALLOW_UNKNOWN_PROTOCOLS&&!IS_SCRIPT_OR_DATA$$1.test(value.replace(ATTR_WHITESPACE$$1,"")));else if(value)return!1}return!0},_sanitizeAttributes=function(currentNode){var attr=void 0,value=void 0,lcName=void 0,idAttr=void 0,l=void 0;_executeHook("beforeSanitizeAttributes",currentNode,null)
;var attributes=currentNode.attributes;if(attributes){var hookEvent={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ALLOWED_ATTR};for(l=attributes.length;l--;){var _attr=attr=attributes[l],name=_attr.name,namespaceURI=_attr.namespaceURI;if(value=attr.value.trim(),lcName=name.toLowerCase(),hookEvent.attrName=lcName,hookEvent.attrValue=value,hookEvent.keepAttr=!0,_executeHook("uponSanitizeAttribute",currentNode,hookEvent),value=hookEvent.attrValue,"name"===lcName&&"IMG"===currentNode.nodeName&&attributes.id)idAttr=attributes.id,attributes=apply(arraySlice,attributes,[]),_removeAttribute("id",currentNode),_removeAttribute(name,currentNode),
attributes.indexOf(idAttr)>l&&currentNode.setAttribute("id",idAttr.value);else{if("INPUT"===currentNode.nodeName&&"type"===lcName&&"file"===value&&(ALLOWED_ATTR[lcName]||!FORBID_ATTR[lcName]))continue;"id"===name&&currentNode.setAttribute(name,""),_removeAttribute(name,currentNode)}if(hookEvent.keepAttr){var lcTag=currentNode.nodeName.toLowerCase();if(_isValidAttribute(lcTag,lcName,value))try{namespaceURI?currentNode.setAttributeNS(namespaceURI,name,value):currentNode.setAttribute(name,value),DOMPurify.removed.pop()}catch(err){}}}_executeHook("afterSanitizeAttributes",currentNode,null)}},_sanitizeShadowDOM=function _sanitizeShadowDOM(fragment){
var shadowNode=void 0,shadowIterator=_createIterator(fragment);for(_executeHook("beforeSanitizeShadowDOM",fragment,null);shadowNode=shadowIterator.nextNode();)_executeHook("uponSanitizeShadowNode",shadowNode,null),_sanitizeElements(shadowNode)||(shadowNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(shadowNode.content),_sanitizeAttributes(shadowNode));_executeHook("afterSanitizeShadowDOM",fragment,null)};return DOMPurify.sanitize=function(dirty,cfg){var body=void 0,importedNode=void 0,currentNode=void 0,oldNode=void 0,returnNode=void 0;if(dirty||(dirty="\x3c!--\x3e"),"string"!=typeof dirty&&!_isNode(dirty)){if("function"!=typeof dirty.toString
)throw new TypeError("toString is not a function");if("string"!=typeof(dirty=dirty.toString()))throw new TypeError("dirty is not a string, aborting")}if(!DOMPurify.isSupported){if("object"===_typeof(window.toStaticHTML)||"function"==typeof window.toStaticHTML){if("string"==typeof dirty)return window.toStaticHTML(dirty);if(_isNode(dirty))return window.toStaticHTML(dirty.outerHTML)}return dirty}if(SET_CONFIG||_parseConfig(cfg),DOMPurify.removed=[],IN_PLACE);else if(dirty instanceof Node)1===(importedNode=(body=_initDocument("\x3c!--\x3e")).ownerDocument.importNode(dirty,!0)).nodeType&&"BODY"===importedNode.nodeName?body=importedNode:body.appendChild(
importedNode);else{if(!RETURN_DOM&&!WHOLE_DOCUMENT&&-1===dirty.indexOf("<"))return trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty;if(!(body=_initDocument(dirty)))return RETURN_DOM?null:emptyHTML}body&&FORCE_BODY&&_forceRemove(body.firstChild);for(var nodeIterator=_createIterator(IN_PLACE?dirty:body);currentNode=nodeIterator.nextNode();)3===currentNode.nodeType&&currentNode===oldNode||_sanitizeElements(currentNode)||(currentNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(currentNode.content),_sanitizeAttributes(currentNode),oldNode=currentNode);if(oldNode=null,IN_PLACE)return dirty;if(RETURN_DOM){if(RETURN_DOM_FRAGMENT)for(
returnNode=createDocumentFragment.call(body.ownerDocument);body.firstChild;)returnNode.appendChild(body.firstChild);else returnNode=body;return RETURN_DOM_IMPORT&&(returnNode=importNode.call(originalDocument,returnNode,!0)),returnNode}var serializedHTML=WHOLE_DOCUMENT?body.outerHTML:body.innerHTML;return trustedTypesPolicy?trustedTypesPolicy.createHTML(serializedHTML):serializedHTML},DOMPurify.setConfig=function(cfg){_parseConfig(cfg),SET_CONFIG=!0},DOMPurify.clearConfig=function(){CONFIG=null,SET_CONFIG=!1},DOMPurify.isValidAttribute=function(tag,attr,value){CONFIG||_parseConfig({});var lcTag=tag.toLowerCase(),lcName=attr.toLowerCase()
;return _isValidAttribute(lcTag,lcName,value)},DOMPurify.addHook=function(entryPoint,hookFunction){"function"==typeof hookFunction&&(hooks[entryPoint]=hooks[entryPoint]||[],hooks[entryPoint].push(hookFunction))},DOMPurify.removeHook=function(entryPoint){hooks[entryPoint]&&hooks[entryPoint].pop()},DOMPurify.removeHooks=function(entryPoint){hooks[entryPoint]&&(hooks[entryPoint]=[])},DOMPurify.removeAllHooks=function(){hooks={}},DOMPurify}()}),define("tpl",["handlebars","i18n","lodash","lib/dompurify/purify"],function(hb,__,_,DOMPurify){"use strict";var buildMap={},extension=".tpl";return hb.registerHelper("__",function(key){return __(key)}),hb.registerHelper(
"dompurify",function(context){return DOMPurify.sanitize(context)}),hb.registerHelper("join",function(arr,keyValueGlue,fragmentGlue,wrapper){var fragments=[];return keyValueGlue="string"==typeof keyValueGlue?keyValueGlue:void 0,fragmentGlue="string"==typeof fragmentGlue?fragmentGlue:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){var fragment="";null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",void 0!==keyValueGlue&&(fragment+=key+keyValueGlue),fragment+=wrapper+value+wrapper,fragments.push(fragment)}),fragments.join(fragmentGlue)
}),hb.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;i<stopIndex;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),hb.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),hb.registerHelper("property",function(name,context){return context[name]||""}),hb.registerHelper("includes",function(haystack,needle,options){if(_.contains(haystack,needle))return options.fn(this)}),{load:function(name,req,onload,config){
extension=extension||config.extension,config.isBuild?(buildMap[name]=fs.readFileSync(req.toUrl(name+extension)).toString().trim(),onload()):req(["text!"+name+extension],function(raw){onload(function(){return hb.compile(raw).apply(hb,arguments).trim()})})},write:function(pluginName,moduleName,write){moduleName in buildMap&&write("define('tpl!"+moduleName+"', ['handlebars'], function(hb){ \nreturn hb.template("+hb.precompile(buildMap[moduleName]).toString()+");\n});\n")}}}),function(window,undefined){var readyList,rootjQuery,core_strundefined=typeof undefined,document=window.document,location=window.location,_jQuery=window.jQuery,_$=window.$,class2type={},
core_deletedIds=[],core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim="1.9.1".trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(event){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())},detach=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))};function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return!jQuery.isWindow(
obj)&&(!(1!==obj.nodeType||!length)||("array"===type||"function"!==type&&(0===length||"number"==typeof length&&0<length&&length-1 in obj)))}jQuery.fn=jQuery.prototype={jquery:"1.9.1",constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"!=typeof selector)return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this));if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1
)&&3<=selector.length?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2]
)return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this},selector:"",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(
){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(0<=j&&j<len?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),
"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(clone=copyIsArray?(copyIsArray=!1,src&&jQuery.isArray(src)?src:[]):src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,
holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(!0===wait?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);(jQuery.isReady=!0)!==wait&&0<--jQuery.readyWait||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready"))}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj
):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null
;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},parseJSON:function(data){return window.JSON&&window.JSON.parse?window.JSON.parse(data):null===data?data:"string"==typeof data&&(data=jQuery.trim(data))&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)},parseXML:function(data
){var xml;if(!data||"string"!=typeof data)return null;try{window.DOMParser?xml=(new DOMParser).parseFromString(data,"text/xml"):((xml=new ActiveXObject("Microsoft.XMLDOM")).async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){
return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:core_trim&&!core_trim.call("\ufeff")?function(text){return null==text?"":core_trim.call(text)}:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[]
;return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);for(len=arr.length,i=i?i<0?Math.max(0,len+i):i:0;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;j<l;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var ret=[],i=0,length=elems.length;for(inv=!!inv;i<length;i++)inv!==!!callback(elems[i],i
)&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,ret=[];if(isArraylike(elems))for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&(ret[ret.length]=value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&(ret[ret.length]=value);return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),(proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))}).guid=fn.guid=fn.guid||jQuery.guid++,proxy):undefined},
access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw);else if(value!==undefined&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(fn=raw?(fn.call(elems,value),null):(bulk=fn,function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}}),jQuery.ready.promise=function(obj){if(!readyList)if(
readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)},jQuery.each(
"Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||function(options){var object=optionsCache[options]={};return jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0}),object}(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,
firingLength=list.length,firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){
for(var index;-1<(index=jQuery.inArray(arg,list,index));)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)}),this},has:function(fn){return fn?-1<jQuery.inArray(fn,list):!(!list||!list.length)},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return args=[context,(args=args||[]).slice?args.slice():args],!list||fired&&!stack||(firing?stack.push(args):fire(args)),this},fire:function(){
return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){
var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){
return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=1<arguments.length?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(
contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(1<length)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(){var support,all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");if(
div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!a||!all.length)return{};opt=(select=document.createElement("select")).appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",support={getSetAttribute:"t"!==div.className,leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),
hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!input.value,optSelected:opt.selected,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===document.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}for(i in(
input=document.createElement("input")).setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","t"),input.setAttribute("name","t"),(fragment=document.createDocumentFragment()).appendChild(input),support.appendChecked=input.checked,support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})div.setAttribute(eventName="on"+i,"t"),
support[i+"Bubbles"]=eventName in window||!1===div.attributes[eventName].expando;return div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];body&&((container=document.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",body.appendChild(container).appendChild(div),
div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(tds=div.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",support.boxSizing=4===div.offsetWidth,support.doesNotIncludeMarginInBodyOffset=1!==body.offsetTop,window.getComputedStyle&&(
support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top,support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,(marginDiv=div.appendChild(document.createElement("div"))).style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),typeof div.style.zoom!==core_strundefined&&(div.innerHTML="",div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1",support.inlineBlockNeedsLayout=3===div.offsetWidth,div.style.display="block",
div.innerHTML="<div></div>",div.firstChild.style.width="5px",support.shrinkWrapBlocks=3!==div.offsetWidth,support.inlineBlockNeedsLayout&&(body.style.zoom=1)),body.removeChild(container),container=div=tds=marginDiv=null)}),all=select=fragment=opt=a=input=null,support}();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||!getByName||data!==undefined
)return id||(isNode?elem[internalKey]=id=core_deletedIds.pop()||jQuery.guid++:id=internalKey),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop)),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),getByName?null==(ret=thisCache[name])&&(ret=thisCache[jQuery.camelCase(name)]):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var i,l,thisCache,isNode=elem.nodeType,
cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){for((i=0,l=(name=jQuery.isArray(name)?name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?[name]:(name=jQuery.camelCase(name))in thisCache?[name]:name.split(" ")).length);i<l;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function dataAttr(elem,key,data){if(
data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}jQuery.extend({cache:{},expando:"jQuery"+("1.9.1"+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},
hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)},acceptData:function(elem){if(elem.nodeType&&1!==elem.nodeType&&9!==elem.nodeType)return!1;var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||!0!==noData&&elem.getAttribute("classid")===noData}}),jQuery.fn.extend({
data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key!==undefined)return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):jQuery.access(this,function(value){if(value===undefined)return elem?dataAttr(elem,key,jQuery.data(elem,key)):null;this.each(function(){jQuery.data(this,key,value)})},null,value,1<arguments.length,null,!0);if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(attrs=elem.attributes;i<attrs.length;i++)(name=attrs[i].name).indexOf("data-")||(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}return data},
removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),(hooks.cur=fn)&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,function(){jQuery.dequeue(elem,type)},
hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){
return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=undefined),type=type||"fx";i--;)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve))
;return resolve(),defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,rboolean=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,1<arguments.length)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){
return jQuery.access(this,jQuery.prop,name,value,1<arguments.length)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(
" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;0<=cur.indexOf(" "+clazz+" ");)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}return this},
toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;return jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.match(core_rnotwhite)||[];className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else type!==core_strundefined&&"boolean"!==type||(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||!1===value?"":jQuery._data(this,
"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(rclass," ").indexOf(className))return!0;return!1},val:function(value){var ret,hooks,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each(function(i){var val,self=jQuery(this);1===this.nodeType&&(null==(val=isFunction?value.call(this,i,self.val()):value)?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))})):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,
values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(((option=options[i]).selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=0<=jQuery.inArray(jQuery(this).val(),values)}),values.length||(elem.selectedIndex=-1),values}}},attr:function(elem,name,value){var hooks,notxml,ret,
nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===core_strundefined?jQuery.prop(elem,name,value):((notxml=1!==nType||!jQuery.isXMLDoc(elem))&&(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)),value===undefined?hooks&&notxml&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(typeof elem.getAttribute!==core_strundefined&&(ret=elem.getAttribute(name)),null==ret?undefined:ret):null!==value?hooks&&notxml&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,
value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,rboolean.test(name)?!getSetAttribute&&ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",
class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return(1!==nType||!jQuery.isXMLDoc(elem))&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){
var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),boolHook={get:function(elem,name){var prop=jQuery.prop(elem,name),attr="boolean"==typeof prop&&elem.getAttribute(name),detail="boolean"==typeof prop?getSetInput&&getSetAttribute?null!=attr:ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]:!!attr:elem.getAttributeNode(name);return detail&&!1!==detail.value?name.toLowerCase():undefined},set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name
):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},getSetInput&&getSetAttribute||(jQuery.attrHooks.value={get:function(elem,name){var ret=elem.getAttributeNode(name);return jQuery.nodeName(elem,"input")?elem.defaultValue:ret&&ret.specified?ret.value:undefined},set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}}),getSetAttribute||(nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&(
"id"===name||"name"===name||"coords"===name?""!==ret.value:ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:undefined}},jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){nodeHook.set(elem,""!==value&&value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}})})),
jQuery.support.hrefNormalized||(jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null==ret?undefined:ret}})}),jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){
var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}})),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=0<=jQuery.inArray(jQuery(elem).val(),value)}})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,
rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return!0}function returnFalse(){return!1}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||((eventHandle=elemData.handle=function(e){
return typeof jQuery===core_strundefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)}).elem=elem),t=(types=(types||"").match(core_rnotwhite)||[""]).length;t--;)type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(
".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0;elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,
elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(core_rnotwhite)||[""]).length;t--;)if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace
)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[
elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(0<=type.indexOf(".")&&(type=(namespaces=type.split(".")).shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=!0,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=undefined,
event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=1<i?bubbleType:special.bindType||type,(handle=(jQuery._data(cur,"events")||{}
)[event.type]&&jQuery._data(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&jQuery.acceptData(cur)&&handle.apply&&!1===handle.apply(cur,data)&&event.preventDefault();if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||!1===special._default.apply(elem.ownerDocument,data))&&("click"!==type||!jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){(tmp=elem[ontype])&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(
event);var i,ret,handleObj,matched,j,handlerQueue,args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if((args[0]=event).delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,(ret=((
jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))!==undefined&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(!0!==cur.disabled||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)matches[sel=(handleObj=handlers[i]
).selector+" "]===undefined&&(matches[sel]=handleObj.needsContext?0<=jQuery(sel,this).index(cur):jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(
fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)event[prop=copy[i]]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(
event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(doc=(eventDoc=event.target.ownerDocument||document).documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(
doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===document.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{
postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===core_strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},
jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||!1===src.returnValue||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(
e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,
arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},
teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1;jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(
elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){
var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0==attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0==--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=undefined),types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(
fn=data,data=selector,selector=undefined)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,(fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)}).guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,
handleObj.handler),this;if("object"!=typeof types)return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=undefined),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)});for(type in types)this.off(type,selector,types[type]);return this},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){
return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}}),function(window,undefined){var i,cachedruns,Expr,getText,isXML,compile,hasDuplicate,outermostContext,setDocument,document,docElem,documentIsXML,rbuggyQSA,rbuggyMatches,matches,contains,sortOrder,expando="sizzle"+-new Date,preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),arr=[],pop=arr.pop,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(
this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp(
"^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),needsContext:new RegExp(
"^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rsibling=/[\x20\t\r\n\f]*[+~]/,rnative=/^[^{]+\{\s*\[native code/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-65536;return high!=high?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{slice.call(
preferredDoc.documentElement.childNodes,0)[0].nodeType}catch(e){slice=function(i){for(var elem,results=[];elem=this[i++];)results.push(elem);return results}}function isNative(fn){return rnative.test(fn+"")}function createCache(){var cache,keys=[];return cache=function(key,value){return keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return!1}finally{div=null}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((
context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=(context=context||document).nodeType)&&9!==nodeType)return[];if(!documentIsXML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,slice.call(
context.getElementsByTagName(selector),0)),results;if((m=match[3])&&support.getByClassName&&context.getElementsByClassName)return push.apply(results,slice.call(context.getElementsByClassName(m),0)),results}if(support.qsa&&!rbuggyQSA.test(selector)){if(old=!0,nid=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context,
newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return function(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){if(2<(tokens=match[0]=match[0].slice(0)).length&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&!documentIsXML&&Expr.relative[tokens[1].type]){if(!(context=Expr.find.ID(token.matches[0].replace(runescape,funescape),context)[0]))return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(
selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,slice.call(seed,0)),results;break}}return compile(selector,match)(seed,context,documentIsXML,results,rsibling.test(selector)),results}(selector.replace(rtrim,"$1"),context,results,seed)}function siblingCheck(a,b){var cur=b&&a,diff=cur&&(~b.sourceIndex||1<<31)-(~a.sourceIndex||1<<31);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(
cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}for(i in isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(
elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement&&(docElem=(document=doc).documentElement,documentIsXML=isXML(doc),support.tagNameNoComments=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.attributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return"boolean"!==type&&"string"!==type}),support.getByClassName=assert(
function(div){return div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!div.getElementsByClassName||!div.getElementsByClassName("e").length)&&(div.lastChild.className="e",2===div.getElementsByClassName("e").length)}),support.getByName=assert(function(div){div.id=expando+0,div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>",docElem.insertBefore(div,docElem.firstChild);var pass=doc.getElementsByName&&doc.getElementsByName(expando).length===2+doc.getElementsByName(expando+0).length;return support.getIdNotName=!doc.getElementById(expando),docElem.removeChild(div),pass}),Expr.attrHandle=assert(function(div){
return div.innerHTML="<a href='#'></a>",div.firstChild&&void 0!==div.firstChild.getAttribute&&"#"===div.firstChild.getAttribute("href")})?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},support.getIdNotName?(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&!documentIsXML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&!documentIsXML){
var m=context.getElementById(id);return m?m.id===id||void 0!==m.getAttributeNode&&m.getAttributeNode("id").value===id?[m]:void 0:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.tagNameNoComments?function(tag,context){if(void 0!==context.getElementsByTagName)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"!==tag)return results;for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp},
Expr.find.NAME=support.getByName&&function(tag,context){if(void 0!==context.getElementsByName)return context.getElementsByName(name)},Expr.find.CLASS=support.getByClassName&&function(className,context){if(void 0!==context.getElementsByClassName&&!documentIsXML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[":focus"],(support.qsa=isNative(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),div.querySelectorAll(":checked"
).length||rbuggyQSA.push(":checked")}),assert(function(div){div.innerHTML="<input type='hidden' i=''/>",div.querySelectorAll("[i^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')"),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=isNative(matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),
rbuggyQSA=new RegExp(rbuggyQSA.join("|")),rbuggyMatches=new RegExp(rbuggyMatches.join("|")),contains=isNative(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=docElem.compareDocumentPosition?function(a,b){var compare;return a===b?(hasDuplicate=!0,0):(compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b)
)?1&compare||a.parentNode&&11===a.parentNode.nodeType?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b)return hasDuplicate=!0,0;if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},hasDuplicate=!1,[0,0].sort(sortOrder),support.detectDuplicates=hasDuplicate),document}
,Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&!documentIsXML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&!rbuggyQSA.test(expr))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},
Sizzle.attr=function(elem,name){var val;return(elem.ownerDocument||elem)!==document&&setDocument(elem),documentIsXML||(name=name.toLowerCase()),(val=Expr.attrHandle[name])?val(elem):documentIsXML||support.attributes?elem.getAttribute(name):((val=elem.getAttributeNode(name))||elem.getAttribute(name))&&!0===elem[name]?name:val&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;if(hasDuplicate=!support.detectDuplicates,results.sort(sortOrder),hasDuplicate){for(;elem=results[i];i++)elem===results[i-1]&&(j=duplicates.push(i))
;for(;j--;)results.splice(duplicates[j],1)}return results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[4]?match[2]=match[4]:unquoted&&rpseudo.test(
unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeName){return"*"===nodeName?function(){return!0}:(nodeName=nodeName.replace(runescape,funescape).toLowerCase(),function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName})},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(
elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&-1<result.indexOf(check):"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?-1<(" "+result+" ").indexOf(check):"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),
forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(
parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last
)===first||diff%first==0&&0<=diff/first}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf.call(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"))
;return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,
funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsXML?elem.getAttribute("xml:lang")||elem.getAttribute("lang"):elem.lang)return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){
return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if("@"<elem.nodeName||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase()
;return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(
var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,
cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,
xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if((cache=(outerCache=elem[expando]||(elem[expando]={}))[dir])&&cache[0]===dirkey){if(!0===(data=cache[1])||data===cachedruns)return!0===data}else if((cache=outerCache[dir]=[dirkey])[1]=matcher(elem,context,xml)||cachedruns,!0===cache[1])return!0}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(
filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),
matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(
temp=postFinder?indexOf.call(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf.call(checkContext,elem)},
implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1)).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(
tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function setFilters(){}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)(cached=matcherFromTokens(group[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,function(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=0<setMatchers.length,byElement=0<elementMatchers.length,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,
setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1;for(outermost&&(outermostContext=context!==document&&context,cachedruns=matcherCachedRuns);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++matcherCachedRuns)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,
bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}(elementMatchers,setMatchers))}return cached},Expr.pseudos.nth=Expr.pseudos.eq,Expr.filters=setFilters.prototype=Expr.pseudos,Expr.setFilters=new setFilters,
setDocument(),Sizzle.attr=jQuery.attr,jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){
return!!qualifier.call(elem,i,elem)===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier===keep});if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem){return 0<=jQuery.inArray(elem,qualifier)===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop())
;return safeFrag}jQuery.fn.extend({find:function(selector){var i,ret,self,len=this.length;if("string"!=typeof selector)return(self=this).pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(ret=[],i=0;i<len;i++)jQuery.find(selector,this[i],ret);return(ret=this.pushStack(1<len?jQuery.unique(ret):ret)).selector=(this.selector?this.selector+" ":"")+selector,ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1))},
filter:function(selector){return this.pushStack(winnow(this,selector,!0))},is:function(selector){return!!selector&&("string"==typeof selector?rneedsContext.test(selector)?0<=jQuery(selector,this.context).index(this[0]):0<jQuery.filter(selector,this).length:0<this.filter(selector).length)},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur.ownerDocument&&cur!==context&&11!==cur.nodeType;){if(pos?-1<pos.index(cur):jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}
return this.pushStack(1<ret.length?jQuery.unique(ret):ret)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.fn.andSelf=jQuery.fn.addBack,jQuery.each({
parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem
){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return runtil.test(name)||(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),ret=1<this.length&&!guaranteedUnique[name]?jQuery.unique(ret):ret,1<this.length&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret)}}),jQuery.extend({filter:function(expr
,elems,not){return not&&(expr=":not("+expr+")"),1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,
"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},fragmentDiv=createSafeFragment(document).appendChild(document.createElement("div"));function disableScript(elem){var attr=elem.getAttributeNode("type");return elem.type=(attr&&attr.specified)+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,
refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events)for(type in delete curData.handle,curData.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),
!jQuery.support.noCloneEvent&&dest[jQuery.expando]){for(e in(data=jQuery._data(dest)).events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&manipulation_rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)
):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==core_strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==core_strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found
}function fixDefaultChecked(elem){manipulation_rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0
).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){
jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.insertBefore(elem,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},
remove:function(selector,keepData){for(var elem,i=0;null!=(elem=this[i]);i++)(!selector||0<jQuery.filter(selector,[elem]).length)&&(keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem)));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){
return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):undefined;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){
value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)1===(elem=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){return jQuery.isFunction(value)||"string"==typeof value||(value=jQuery(value).not(this).detach()),this.domManip([value],!0,function(elem){var next=this.nextSibling,parent=this.parentNode;parent&&(jQuery(this).remove(),parent.insertBefore(elem,next))})},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){args=core_concat.apply([],args);var first,node,
hasScripts,scripts,doc,fragment,elem,tag,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(l<=1||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,table?self.html():undefined)),self.domManip(args,table,callback)});if(l&&(first=(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this)).firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(table=table&&jQuery.nodeName(first,"tr"),hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)
).length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(table&&jQuery.nodeName(this[i],"table")?(elem=this[i],tag="tbody",elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))):this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery.ajax({url:node.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):jQuery.globalEval((
node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),core_push.apply(ret,elems.get());return this.pushStack(ret)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(
jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,
destElements[i]);else cloneCopyEvent(elem,clone);return 0<(destElements=getAll(clone,"script")).length&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,
tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!jQuery.support.tbody)for(j=(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild)&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem))
;for(tmp&&safe.removeChild(tmp),jQuery.support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(
elem))&&(data=(id=elem[internalKey])&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==core_strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,core_deletedIds.push(id))}}});var iframe,getStyles,curCSS,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$",
"i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements
,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)(elem=elements[index]).style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):values[index]||(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)(elem=elements[index]).style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(
elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i]
,!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(((val=curCSS(elem,name,styles))<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),
valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||("none"!==(display=actualDisplay(nodeName,doc))&&display||((doc=((iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement))[0].contentWindow||iframe[0].contentDocument).document).write("<!doctype html><html><body>"),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],
"display");return elem.remove(),display}jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var len,styles,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,1<arguments.length)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){var bool="boolean"==typeof state;return this.each(function(){(bool?state:isHidden(this))?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({
cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined)return hooks&&"get"in hooks&&(
ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(!("string"===(type=typeof value)&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(
jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),(hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||jQuery.isNumeric(num)?num||0:val):val},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret}}),window.getComputedStyle?(getStyles=function(elem){
return window.getComputedStyle(elem,null)},curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret}):document.documentElement.currentStyle&&(getStyles=function(elem){
return elem.currentStyle},curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;return null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,(rsLeft=(rs=elem.runtimeStyle)&&rs.left)&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),""===ret?"auto":ret}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return 0===elem.offsetWidth&&rdisplayswap.test(
jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(0,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,
currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";((style.zoom=1)<=value||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}}),
!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){
jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:""
)+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val()
;return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add)
;return s.join("&").replace(r20,"+")},jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return 0<arguments.length?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.hover=function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)};var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rnoContent=/^(?:GET|HEAD)$/,
rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){(ajaxLocation=document.createElement("a")).href="",ajaxLocation=ajaxLocation.href}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(
structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),
inspect(dataTypeOrTransport),!1)}),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return 0<=off&&(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(
params)?(callback=params,params=undefined):params&&"object"==typeof params&&(type="POST"),0<self.length&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(
url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{
xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=undefined),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),
callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){
return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,
jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR)
,2===state)return jqXHR;for(i in(fireGlobals=s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(
s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();for(i in strAbort="abort",{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),
s.async&&0<s.timeout&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=0<status?4:0,responses&&(response=function(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(
type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);for(;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,
jqXHR,responses)),200<=status&&status<300||304===status?(s.ifModified&&((modified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status?(isSuccess=!0,statusText="nocontent"):304===status?(isSuccess=!0,statusText="notmodified"):(statusText=(isSuccess=function(s,response){var conv2,current,conv,tmp,converters={},i=0,dataTypes=s.dataTypes.slice(),prev=dataTypes[0];s.dataFilter&&(response=s.dataFilter(response,s.dataType));if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(;current=dataTypes[++i];
)if("*"!==current){if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.splice(i--,0,current));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}prev=current}return{state:"success",data:response}}(s,response)).state,success=isSuccess.data,isSuccess=!(error=isSuccess.error))):(
error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return jqXHR},getScript:function(
url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{
send:function(_,callback){(script=document.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(undefined,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop(
)||jQuery.expando+"_"+ajax_nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),
s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks
)xhrCallbacks[key](undefined,!0)};function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:createStandardXHR,xhrSupported=jQuery.ajaxSettings.xhr(),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,(xhrSupported=jQuery.support.ajax=!!xhrSupported)&&jQuery.ajaxTransport(function(s){var callback;if(!s.crossDomain||jQuery.support.cors)return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,
s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,responseHeaders,statusText,responses;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{responses={}
,status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async?4===xhr.readyState?setTimeout(callback):(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(
){callback&&callback(undefined,!0)}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[function(elem,props,opts){var prop,index,length,value,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})
}));1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==css_defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block"));opts.overflow&&(style.overflow="hidden",jQuery.support.shrinkWrapBlocks||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(index in props)if(value=props[index],rfxtypes.exec(value)){if(delete props[index],toggle=toggle||"toggle"===value,value===(
hidden?"hide":"show"))continue;handled.push(index)}if(length=handled.length){"hidden"in(dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{}))&&(hidden=dataShow.hidden),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;for(prop in jQuery._removeData(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])});for(index=0;index<length;index++)prop=handled[index],tween=anim.createTween(prop,hidden?dataShow[prop]:0),orig[prop]=dataShow[prop]||jQuery.style(elem,prop),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,
tween.start="width"===prop||"height"===prop?1:0))}}],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){if(end=+parts[2],"px"!==(unit=parts[3]||(jQuery.cssNumber[prop]?"":"px"))&&start)for(start=jQuery.css(tween.elem,prop,!0)||end||1;start/=scale=scale||".5",jQuery.style(tween.elem,prop,start+unit),scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations;);tween.unit=unit,tween.start=start,tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};function createFxNow(){return setTimeout(function(){fxNow=undefined}),
fxNow=jQuery.now()}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,
props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),
this}}),props=animation.props;for(!function(props,specialEasing){var value,name,index,easing,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,
animation.opts))return result;return function(animation,props){jQuery.each(props,function(prop,value){for(var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;index<length;index++)if(collection[index].call(animation,prop,value))return})}(animation,props),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function Tween(elem,options,prop,end,easing){
return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){for(var prop,index=0,length=(props=jQuery.isFunction(props)?(callback=props,["*"]):props.split(" ")).length;index<length;index++)prop=props[index],
tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),((jQuery.Tween=Tween).prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop]
;return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}}).init.prototype=Tween.prototype,(Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==result?result:0:tween.elem[tween.prop]},set:function(tween){
jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}}).scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend(
{fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);doAnimation.finish=function(){anim.stop(!0)},(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop
;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},
finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.cur&&hooks.cur.finish&&hooks.cur.finish.call(this),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx(
"toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"
),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(
jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}),jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;return doc?(docElem=doc.documentElement,jQuery.contains(docElem,elem)?(
typeof elem.getBoundingClientRect!==core_strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box):void 0},jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),props={},curPosition={};curLeft=("absolute"===position||"fixed"===position)&&-1<jQuery.inArray("auto",[curCSSTop,
curCSSLeft])?(curTop=(curPosition=curElem.position()).top,curPosition.left):(curTop=parseFloat(curCSSTop)||0,parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),
jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.documentElement;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||document.documentElement})}}),
jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){
var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery&&define(
"jquery",[],function(){return jQuery})}(window),define("jquery.cookie",["jquery"],function(jQuery){jQuery.cookie=function(name,value,options){if(void 0===value){var cookieValue=null;if(document.cookie&&""!=document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue}options=options||{},null===value&&(value="",options.expires=-1);var date,expires="";options.expires&&("number"==typeof options.expires||options.expires.toUTCString)&&("number"==typeof options.expires?(
date=new Date).setTime(date.getTime()+24*options.expires*60*60*1e3):date=options.expires,expires="; expires="+date.toUTCString());var path=options.path?"; path="+options.path:"",domain=options.domain?"; domain="+options.domain:"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")}}),define("jqueryui",["jquery"],function(jQuery){var t,e,i,s,n;!function(t,e){function i(e,i){var n,o,a,r=e.nodeName.toLowerCase();return"area"===r?(o=(n=e.parentNode).name,!(!e.href||!o||"map"!==n.nodeName.toLowerCase())&&(!!(a=t("img[usemap=#"+o+"]")[0])&&s(a))):(/input|select|textarea|button|object/.test(r
)?!e.disabled:"a"===r&&e.href||i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var s=this;setTimeout(function(){
t(s).focus(),i&&i.call(s)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(
this.length)for(var s,n,o=t(this[0]);o.length&&o[0]!==document;){if(("absolute"===(s=o.css("position"))||"relative"===s||"fixed"===s)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,
"tabindex"),n=isNaN(s);return(n||0<=s)&&i(e,!n)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));i.offsetHeight,t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===s?["Left","Right"]:["Top","Bottom"],
a=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(a,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,i)+"px")})}}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[]
;t.ui.ie=!!e.length,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},contains:t.contains,hasScroll:function(e,i){if(
"hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return 0<e[s]||(e[s]=1,n=0<e[s],e[s]=0,n)},isOverAxis:function(t,e,i){return e<t&&t<e+i},isOver:function(e,i,s,n,o,a){return t.ui.isOverAxis(e,s,o)&&t.ui.isOverAxis(i,n,a)}}))}(jQuery),t=jQuery,i=0,s=Array.prototype.slice,n=t.cleanData,t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l=i.split(".")[0];i=i.split(".")[1],o=l+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[l]=t[l]||{},a=t[l][i],r=t[l][i]=function(t,i){
return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(h=new s).options=t.widget.extend({},h.options),t.each(n,function(e,i){t.isFunction(i)&&(n[e]=function(){var t=function(){return s.prototype[e].apply(this,arguments)},n=function(t){return s.prototype[e].apply(this,t)};return function(){var e,s=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=i.apply(this,arguments),this._super=s,this._superApply=o,e}}())}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix:i},n,{constructor:r,namespace:l,widgetName:i,
widgetBaseClass:o,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;r<h;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(
null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h))!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e:t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(
s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetName,this),t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,
_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},i=(
n=i.split(".")).shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),s===e)return o[i]===e?null:o[i];o[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){
return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,
t.unbind(e).undelegate(e)},_delay:function(t,e){var s=this;return setTimeout(function(){return("string"==typeof t?s[t]:t).apply(s,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},(i=t.Event(i)).type=(
e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?!0===n||"number"==typeof n?i:n.effect||i:e;"number"==typeof(n=n||{})&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&(t.effects.effect[r]||!1!==t.uiBackCompat&&t.effects[r])?s[e](n):r!==e&&s[r]?s[r](n.duration,
n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),!1!==t.uiBackCompat&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]}),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),
i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return n&&!o&&this._mouseCapture(i)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){
s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?i.preventDefault():(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0)),!0}},_mouseMove:function(e){return!t.ui.ie||9<=document.documentMode||e.button?this._mouseStarted?(
this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),
Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(d.test(t[0])?e/100:1),parseInt(t[1],10)*(d.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var n,o=Math.max,a=Math.abs,r=Math.round,h=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+%?/,u=/^\w+/,d=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(n!==e)return n;var i,s,o=t(
"<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=o.children()[0];return t("body").append(o),i=a.offsetWidth,o.css("overflow","scroll"),i===(s=a.offsetWidth)&&(s=o[0].clientWidth),o.remove(),n=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:n?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0])
;return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var n,d,f,m,g,v=t(e.of),_=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(_),y=v[0],w=(e.collision||"flip").split(" "),k={};return m=9===y.nodeType?(d=v.width(),f=v.height(),{top:0,left:0}):t.isWindow(y)?(d=v.width(),f=v.height(),{top:v.scrollTop(),left:v.scrollLeft()}):y.preventDefault?(e.at="left top",d=f=0,{top:y.pageY,left:y.pageX}):(d=v.outerWidth(),f=v.outerHeight(),
v.offset()),g=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=h.test(s[0])?s.concat(["center"]):l.test(s[0])?["center"].concat(s):["center","center"]),s[0]=h.test(s[0])?s[0]:"center",s[1]=l.test(s[1])?s[1]:"center",t=c.exec(s[0]),i=c.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[u.exec(s[0])[0],u.exec(s[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?g.left+=d:"center"===e.at[0]&&(g.left+=d/2),"bottom"===e.at[1]?g.top+=f:"center"===e.at[1]&&(g.top+=f/2),n=i(k.at,d,f),g.left+=n[0],g.top+=n[1],this.each(function(){var h,l,c=t(this),u=c.outerWidth(),p=c.outerHeight(),y=s(this,"marginLeft"),x=s(this,
"marginTop"),C=u+y+s(this,"marginRight")+b.width,D=p+x+s(this,"marginBottom")+b.height,T=t.extend({},g),M=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?T.left-=u:"center"===e.my[0]&&(T.left-=u/2),"bottom"===e.my[1]?T.top-=p:"center"===e.my[1]&&(T.top-=p/2),T.left+=M[0],T.top+=M[1],t.support.offsetFractions||(T.left=r(T.left),T.top=r(T.top)),h={marginLeft:y,marginTop:x},t.each(["left","top"],function(i,s){t.ui.position[w[i]]&&t.ui.position[w[i]][s](T,{targetWidth:d,targetHeight:f,elemWidth:u,elemHeight:p,collisionPosition:h,collisionWidth:C,collisionHeight:D,offset:[n[0]+M[0],n[1]+M[1]],my:e.my,at:e.at,within:_,elem:c})}),t.fn.bgiframe&&c.bgiframe(
),e.using&&(l=function(t){var i=m.left-T.left,s=i+d-u,n=m.top-T.top,r=n+f-p,h={target:{element:v,left:m.left,top:m.top,width:d,height:f},element:{element:c,left:T.left,top:T.top,width:u,height:p},horizontal:s<0?"left":0<i?"right":"center",vertical:r<0?"top":0<n?"bottom":"middle"};d<u&&d>a(i+s)&&(h.horizontal="center"),f<p&&f>a(n+r)&&(h.vertical="middle"),h.important=o(a(i),a(s))>o(a(n),a(r))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(T,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n
;e.collisionWidth>a?0<h&&l<=0?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=0<l&&h<=0?n:l<h?n+a-e.collisionWidth:n:0<h?t.left+=h:0<l?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?0<h&&l<=0?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=0<l&&h<=0?n:l<h?n+a-e.collisionHeight:n:0<h?t.top+=h:0<l?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,r=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,
l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-r-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];c<0?((i=t.left+d+p+f+e.collisionWidth-r-o)<0||a(c)>i)&&(t.left+=d+p+f):0<u&&((0<(s=t.left-e.collisionPosition.marginLeft+d+p+f-h)||u>a(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,r=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-r-h,p="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,
f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];c<0?(s=t.top+p+f+m+e.collisionHeight-r-o,t.top+p+f+m>c&&(s<0||a(c)>s)&&(t.top+=p+f+m)):0<u&&(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m>u&&(0<i||u>a(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");for(o in e=document.createElement(a?"div":"body"),s={
visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"}),s)e.style[o]=s[o];e.appendChild(r),(i=a||document.documentElement).insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=10<n&&n<11,e.innerHTML="",i.removeChild(e)}(),!1!==t.uiBackCompat&&function(t){var i=t.fn.position;t.fn.position=function(s){if(!s||!s.offset)return i.call(this,s);var n=s.offset.split(" "),o=s.at.split(" ");return 1===n.length&&(n[1]=n[0]),/^\d/.test(n[0])&&(n[0]="+"+n[0]),/^\d/.test(n[1])&&(n[1]="+"+n[1]),1===o.length&&(
/left|center|right/.test(o[0])?o[1]="center":(o[1]=o[0],o[0]="center")),i.call(this,t.extend(s,{at:o[0]+n[0]+" "+o[1]+n[1],offset:e}))}}(jQuery)}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(
this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(e),!!this.handle&&(t(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({
width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{
left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),
this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",e,s))return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var s=this.element[0],n=!1;s&&(s=s.parentNode);)s==document&&(n=!0);if(
!n&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var o=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==o._trigger("stop",e)&&o._clear()})}else!1!==this._trigger("stop",e)&&this._clear();return!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){
return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=!this.options.handle||!t(this.options.handle,this.element).length;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(i=!0)}),i},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),s[0]==this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),
s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(
e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},
_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft(
)-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(
e.containment),s=i[0];if(!s)return;i.offset();var n="hidden"!=t(s).css("overflow");this.containment=[(parseInt(t(s).css("borderLeftWidth"),10)||0)+(parseInt(t(s).css("paddingLeft"),10)||0),(parseInt(t(s).css("borderTopWidth"),10)||0)+(parseInt(t(s).css("paddingTop"),10)||0),(n?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(t(s).css("borderLeftWidth"),10)||0)-(parseInt(t(s).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(t(s).css("borderTopWidth"),10)||0)-(parseInt(t(s).css("paddingBottom"),10)||0
)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft(
):o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName),o=e.pageX,a=e.pageY;if(this.originalPosition){var r;if(this.containment){if(this.relative_container){var h=this.relative_container.offset();r=[this.containment[0]+h.left,this.containment[1]+h.top,this.containment[2]+h.left,this.containment[3]+h.top]}else r=this.containment;e.pageX-this.offset.click.left<r[0]&&(o=r[0]+this.offset.click.left),e.pageY-this.offset.click.top<r[1]&&(
a=r[1]+this.offset.click.top),e.pageX-this.offset.click.left>r[2]&&(o=r[2]+this.offset.click.left),e.pageY-this.offset.click.top>r[3]&&(a=r[3]+this.offset.click.top)}if(i.grid){var l=i.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;a=r&&(l-this.offset.click.top<r[1]||l-this.offset.click.top>r[3])?l-this.offset.click.top<r[1]?l+i.grid[1]:l-i.grid[1]:l;var c=i.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;o=r&&(c-this.offset.click.left<r[0]||c-this.offset.click.left>r[2])?c-this.offset.click.left<r[0]?c+i.grid[0]:c-i.grid[0]:c}}return{
top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),
t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("draggable"),n=s.options,o=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var s=t(this).data("draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,
function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("draggable"),n=this;t.each(s.sortables,function(){var o=!1,a=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,
this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!=a&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},
e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,
this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),
n=t(this).data("draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("draggable"),s=i.options,n=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(
i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"==s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"==s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(
document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"==s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("draggable"),i=e.options
;e.snapElements=[],t(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){for(var s=t(this).data("draggable"),n=s.options,o=n.snapTolerance,a=i.offset.left,r=a+s.helperProportions.width,h=i.offset.top,l=h+s.helperProportions.height,c=s.snapElements.length-1;0<=c;c--){var u=s.snapElements[c].left,d=u+s.snapElements[c].width,p=s.snapElements[c].top,f=p+s.snapElements[c].height;if(
u-o<a&&a<d+o&&p-o<h&&h<f+o||u-o<a&&a<d+o&&p-o<l&&l<f+o||u-o<r&&r<d+o&&p-o<h&&h<f+o||u-o<r&&r<d+o&&p-o<l&&l<f+o){if("inner"!=n.snapMode){var m=o>=Math.abs(p-l),g=o>=Math.abs(f-h),_=o>=Math.abs(u-r),v=o>=Math.abs(d-a);m&&(i.position.top=s._convertPositionTo("relative",{top:p-s.helperProportions.height,left:0}).top-s.margins.top),g&&(i.position.top=s._convertPositionTo("relative",{top:f,left:0}).top-s.margins.top),_&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u-s.helperProportions.width}).left-s.margins.left),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:d}).left-s.margins.left)}var b=m||g||_||v;if("outer"!=n.snapMode){
m=o>=Math.abs(p-h),g=o>=Math.abs(f-l),_=o>=Math.abs(u-a),v=o>=Math.abs(d-r);m&&(i.position.top=s._convertPositionTo("relative",{top:p,left:0}).top-s.margins.top),g&&(i.position.top=s._convertPositionTo("relative",{top:f-s.helperProportions.height,left:0}).top-s.margins.top),_&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u}).left-s.margins.left),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:d-s.helperProportions.width}).left-s.margins.left)}!s.snapElements[c].snapping&&(m||g||_||v||b)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),
s.snapElements[c].snapping=m||g||_||v||b}else s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(){var e=t(this).data("draggable").options,i=t.makeArray(t(e.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(i.length){var s=parseInt(i[0].style.zIndex)||0;t(i).each(function(t){this.style.zIndex=s+t}),this[0].style.zIndex=s+i.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this
).data("draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){t.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,i=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},
t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=t.ui.ddmanager.droppables[this.options.scope],i=0;e.length>i;i++)e[i]==this&&e.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"==e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,
this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(
this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current;if(!s||(s.currentItem||s.element)[0]==this.element[0])return!1;var n=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope==s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?!(n=!0):void 0}),!n&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(
this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(e,i,s){if(!i.offset)return!1;var n=(e.positionAbs||e.position.absolute).left,o=n+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,r=a+e.helperProportions.height,h=i.offset.left,l=h+i.proportions.width,c=i.offset.top,u=c+i.proportions.height;switch(s){case"fit":return h<=n&&o<=l&&c<=a&&r<=u;case"intersect":
return n+e.helperProportions.width/2>h&&l>o-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&u>r-e.helperProportions.height/2;case"pointer":var d=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top;return t.ui.isOver(p,d,c,h,i.proportions.height,i.proportions.width);case"touch":return(c<=a&&a<=u||c<=r&&r<=u||a<c&&u<r)&&(h<=n&&n<=l||h<=o&&o<=l||n<h&&l<o);default:return!1}},t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var s=t.ui.ddmanager.droppables[e.options.scope]||[],n=i?i.type:null,o=(
e.currentItem||e.element).find(":data(droppable)").andSelf();t:for(var a=0;s.length>a;a++)if(!(s[a].options.disabled||e&&!s[a].accept.call(s[a].element[0],e.currentItem||e.element))){for(var r=0;o.length>r;r++)if(o[r]==s[a].element[0]){s[a].proportions.height=0;continue t}s[a].visible="none"!=s[a].element.css("display"),s[a].visible&&("mousedown"==n&&s[a]._activate.call(s[a],i),s[a].offset=s[a].element.offset(),s[a].proportions={width:s[a].element[0].offsetWidth,height:s[a].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(
!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s=t.ui.intersect(e,
this,this.options.tolerance),n=s||1!=this.isover?s&&0==this.isover?"isover":null:"isout";if(n){var o;if(this.options.greedy){var a=this.options.scope,r=this.element.parents(":data(droppable)").filter(function(){return t.data(this,"droppable").options.scope===a});r.length&&((o=t.data(r[0],"droppable")).greedyChild="isover"==n?1:0)}o&&"isover"==n&&(o.isover=0,o.isout=1,o._out.call(o,i)),this[n]=1,this["isout"==n?"isover":"isout"]=0,this["isover"==n?"_over":"_out"].call(this,i),o&&"isout"==n&&(o.isout=0,o.isover=1,o._over.call(o,i))}}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),
e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){t.widget("ui.resizable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,i=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css(
"marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",
ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var s=this.handles.split(",");this.handles={};for(var n=0;s.length>n;n++){var o=t.trim(s[n]),r=t('<div class="ui-resizable-handle '+("ui-resizable-"+o)+'"></div>');r.css({zIndex:i.zIndex}),"se"==o&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(r)}}this._renderAxis=function(e){for(var i in e=e||this.element,this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),
this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n,s=t(this.handles[i],this.element);n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth();var o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(o,n),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(
this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(t(this).removeClass("ui-resizable-autohide"),e._handles.show())}).mouseleave(function(){i.disabled||e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),
width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var i=!1;for(var s in this.handles)t(this.handles[s])[0]==e.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var s=this.options,n=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:n.top,left:n.left}),this._renderProxy();var a=e(
this.helper.css("left")),r=e(this.helper.css("top"));s.containment&&(a+=t(s.containment).scrollLeft()||0,r+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:r},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:a,top:r},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},
this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1;var h=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==h?this.axis+"-resize":h),o.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var e=this.helper,i=(this.options,this.originalMousePosition),s=this.axis,n=t.pageX-i.left||0,o=t.pageY-i.top||0,a=this._change[s];if(!a)return!1;var r=a.apply(this,[t,n,o]);return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(r=this._updateRatio(r,t)),r=this._respectSize(r,t),this._propagate("resize",t),e.css({
top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(r),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,s=this;if(this._helper){var n=this._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&t.ui.hasScroll(n[0],"left")?0:s.sizeDiff.height,r=o?0:s.sizeDiff.width,h={width:s.helper.width()-r,height:s.helper.height()-a},l=parseInt(s.element.css("left"),10)+(s.position.left-s.originalPosition.left)||null,c=parseInt(
s.element.css("top"),10)+(s.position.top-s.originalPosition.top)||null;i.animate||this.element.css(t.extend(h,{top:c,left:l})),s.helper.height(s.size.height),s.helper.width(s.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,o,a,r=this.options;a={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(
e=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,s=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),n>a.minHeight&&(a.minHeight=n),a.maxWidth>s&&(a.maxWidth=s),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(t){this.options,this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=(this.options,this.position),s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(
t.height=t.width/this.aspectRatio),"sw"==n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"==n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t,e){var s=(this.helper,this._vBoundaries),n=(this._aspectRatio||e.shiftKey,this.axis),o=i(t.width)&&s.maxWidth&&s.maxWidth<t.width,a=i(t.height)&&s.maxHeight&&s.maxHeight<t.height,r=i(t.width)&&s.minWidth&&s.minWidth>t.width,h=i(t.height)&&s.minHeight&&s.minHeight>t.height;r&&(t.width=s.minWidth),h&&(t.height=s.minHeight),o&&(t.width=s.maxWidth),a&&(t.height=s.maxHeight);var l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,
u=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);r&&u&&(t.left=l-s.minWidth),o&&u&&(t.left=l-s.maxWidth),h&&d&&(t.top=c-s.minHeight),a&&d&&(t.top=c-s.maxHeight);var p=!t.width&&!t.height;return p&&!t.left&&t.top?t.top=null:p&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;this._proportionallyResizeElements.length>i;i++){var s=this._proportionallyResizeElements[i];if(!this.borderDif){var n=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],o=[s.css("paddingTop"),s.css("paddingRight"),s.css(
"paddingBottom"),s.css("paddingLeft")];this.borderDif=t.map(n,function(t,e){return(parseInt(t,10)||0)+(parseInt(o[e],10)||0)})}s.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var s=t.ui.ie6?1:0,n=t.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-s+"px",top:this.elementOffset.top-s+"px",
zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=(this.options,this.originalSize);return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=(this.options,this.originalSize);return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,
i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var i=t(this).data("resizable").options,s=function(e
){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this
).data("resizable-alsoresize"),o={},a=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&0<=i&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={
width:i.size.width-r,height:i.size.height-a},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{
start:function(){var i=t(this).data("resizable"),s=i.options,n=i.element,o=s.containment,a=o instanceof t?o.get(0):/parent/.test(o)?n.parent().get(0):o;if(a)if(i.containerElement=t(a),/document/.test(o)||o==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var r=t(a),h=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){h[t]=e(r.css("padding"+i))}),i.containerOffset=r.offset(),i.containerPosition=r.position(),i.containerSize={height:r.innerHeight()-h[3],width:r.innerWidth()-h[1]}
;var l=i.containerOffset,c=i.containerSize.height,u=i.containerSize.width,d=t.ui.hasScroll(a,"left")?a.scrollWidth:u,p=t.ui.hasScroll(a)?a.scrollHeight:c;i.parentData={element:a,left:l.left,top:l.top,width:d,height:p}}},resize:function(e){var i=t(this).data("resizable"),s=i.options,n=(i.containerSize,i.containerOffset),o=(i.size,i.position),a=i._aspectRatio||e.shiftKey,r={top:0,left:0},h=i.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(r=n),o.left<(i._helper?n.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-n.left:i.position.left-r.left),a&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=s.helper?n.left:0),
o.top<(i._helper?n.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-n.top:i.position.top),a&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?n.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var l=Math.abs((i._helper,i.offset.left-r.left+i.sizeDiff.width)),c=Math.abs((i._helper?i.offset.top-r.top:i.offset.top-n.top)+i.sizeDiff.height),u=i.containerElement.get(0)==i.element.parent().get(0),d=/relative|absolute/.test(i.containerElement.css("position"));u&&d&&(l-=i.parentData.left),l+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-l,a&&(
i.size.height=i.size.width/i.aspectRatio)),c+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-c,a&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,s=(e.position,e.containerOffset),n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable",
"ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.options,e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e){var i=t(
this).data("resizable"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis;s._aspectRatio||e.shiftKey,s.grid="number"==typeof s.grid?[s.grid,s.grid]:s.grid;var h=Math.round((n.width-o.width)/(s.grid[0]||1))*(s.grid[0]||1),l=Math.round((n.height-o.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(r)?(i.size.width=o.width+h,i.size.height=o.height+l):/^(ne)$/.test(r)?(i.size.width=o.width+h,i.size.height=o.height+l,i.position.top=a.top-l):(/^(sw)$/.test(r)?(i.size.width=o.width+h,i.size.height=o.height+l):(i.size.width=o.width+h,i.size.height=o.height+l,i.position.top=a.top-l),i.position.left=a.left-h)}});var e=function(t){
return parseInt(t,10)||0},i=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var i,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(i=t(e.options.filter,e.element[0])).addClass("ui-selectee"),i.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),
unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this;if(this.opos=[e.pageX,e.pageY],!this.options.disabled){var s=this.options;this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),s.autoRefresh&&this.refresh(),
this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().andSelf().each(function(){var s=t.data(this,"selectable-item");if(s){var n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected");return s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,(s.selected=n)?i._trigger("selecting",e,{selecting:s.element}):i._trigger(
"unselecting",e,{unselecting:s.element}),!1}})}},_mouseDrag:function(e){var i=this;if(this.dragged=!0,!this.options.disabled){var s=this.options,n=this.opos[0],o=this.opos[1],a=e.pageX,r=e.pageY;if(a<n){var h=a;a=n,n=h}if(r<o){h=r;r=o,o=h}return this.helper.css({left:n,top:o,width:a-n,height:r-o}),this.selectees.each(function(){var h=t.data(this,"selectable-item");if(h&&h.element!=i.element[0]){var l=!1;"touch"==s.tolerance?l=!(h.left>a||n>h.right||h.top>r||o>h.bottom):"fit"==s.tolerance&&(l=h.left>n&&a>h.right&&h.top>o&&r>h.bottom),l?(h.selected&&(h.$element.removeClass("ui-selected"),h.selected=!1),h.unselecting&&(h.$element.removeClass("ui-unselecting"),
h.unselecting=!1),h.selecting||(h.$element.addClass("ui-selecting"),h.selecting=!0,i._trigger("selecting",e,{selecting:h.element}))):(h.selecting&&((e.metaKey||e.ctrlKey)&&h.startselected?(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.$element.addClass("ui-selected"),h.selected=!0):(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.startselected&&(h.$element.addClass("ui-unselecting"),h.unselecting=!0),i._trigger("unselecting",e,{unselecting:h.element}))),h.selected&&(e.metaKey||e.ctrlKey||h.startselected||(h.$element.removeClass("ui-selected"),h.selected=!1,h.$element.addClass("ui-unselecting"),h.unselecting=!0,i._trigger("unselecting",e,{
unselecting:h.element}))))}}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,this.options,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){t.widget("ui.sortable",
t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")))
,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var n=null;if(t(e.target).parents().each(function(){return t.data(this,
s.widgetName+"-item")==s?(n=t(this),!1):void 0}),t.data(e.target,s.widgetName+"-item")==s&&(n=t(e.target)),!n)return!1;if(this.options.handle&&!i){var o=!1;if(t(this.options.handle,n).find("*").andSelf().each(function(){this==e.target&&(o=!0)}),!o)return!1}return this.currentItem=n,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,i,s){var n=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,
left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(t(
"body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(var o=this.containers.length-1;0<=o;o--)this.containers[o]._trigger("activate",e,
this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,s=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(
this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?s=t(document
).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed))),!1!==s&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(
this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var n=this.items.length-1;0<=n;n--){var o=this.items[n],a=o.item[0],r=this._intersectsWithPointer(o);if(r&&o.instance===this.currentContainer&&a!=this.currentItem[0]&&this.placeholder[1==r?"next":"prev"]()[0]!=a&&!t.contains(this.placeholder[0],a)&&("semi-dynamic"!=this.options.type||!t.contains(this.element[0],a))){if(this.direction=1==r?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(e,o),this._trigger("change",e,this._uiHash());break}}
return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset();this.reverting=!0,t(this.helper).animate({left:n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){
s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(
e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u=r<s+l&&s+l<h&&o<e+c&&e+c<a
;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),s="y"===this.options.axis||t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=i&&s,o=this._getDragVerticalDirection(),
a=this._getDragHorizontalDirection();return!!n&&(this.floating?a&&"right"==a||"down"==o?2:1:o&&("down"==o?2:1))},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&s||"left"==o&&!s:n&&("down"==n&&i||"up"==n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){
var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],s=[],n=this._connectWith();if(n&&e)for(var o=n.length-1;0<=o;o--)for(var a=t(n[o]),r=a.length-1;0<=r;r--){var h=t.data(a[r],this.widgetName);h&&h!=this&&!h.options.disabled&&s.push([t.isFunction(h.options.items)?h.options.items.call(h.element):t(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}s.push([
t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(o=s.length-1;0<=o;o--)s[o][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]==t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,s=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,
{item:this.currentItem}):t(this.options.items,this.element),this]],n=this._connectWith();if(n&&this.ready)for(var o=n.length-1;0<=o;o--)for(var a=t(n[o]),r=a.length-1;0<=r;r--){var h=t.data(a[r],this.widgetName);h&&h!=this&&!h.options.disabled&&(s.push([t.isFunction(h.options.items)?h.options.items.call(h.element[0],e,{item:this.currentItem}):t(h.options.items,h.element),h]),this.containers.push(h))}for(o=s.length-1;0<=o;o--)for(var l=s[o][1],c=s[o][0],u=(r=0,c.length);r<u;r++){var d=t(c[r]);d.data(this.widgetName+"-item",l),i.push({item:d,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(
this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;0<=i;i--){var s=this.items[i];if(s.instance==this.currentContainer||!this.currentContainer||s.item[0]==this.currentItem[0]){var n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;e||(s.width=n.outerWidth(),s.height=n.outerHeight());var o=n.offset();s.left=o.left,s.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;0<=i;i--){o=this.containers[i].element.offset();this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,
this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){var i=(e=e||this).options;if(!i.placeholder||i.placeholder.constructor==String){var s=i.placeholder;i.placeholder={element:function(){var i=t(document.createElement(e.currentItem[0].nodeName)).addClass(s||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return s||(i.style.visibility="hidden"),i},update:function(t,n){(!s||i.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(
e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}}e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_contactContainers:function(e){for(var i=null,s=null,n=this.containers.length-1;0<=n;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(i&&t.contains(this.containers[n].element[0],i.element[0])
)continue;i=this.containers[n],s=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1;else{for(var o=1e4,a=null,r=this.containers[s].floating?"left":"top",h=this.containers[s].floating?"width":"height",l=this.positionAbs[r]+this.offset.click[r],c=this.items.length-1;0<=c;c--)if(t.contains(this.containers[s].element[0],this.items[c].item[0])&&this.items[c].item[0]!=this.currentItem[0]){var u=this.items[c].item.offset()[r],d=!1;Math.abs(
u-l)>Math.abs(u+this.items[c][h]-l)&&(d=!0,u+=this.items[c][h]),o>Math.abs(u-l)&&(o=Math.abs(u-l),a=this.items[c],this.direction=d?"up":"down")}if(!a&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[s],a?this._rearrange(e,a,null,!0):this._rearrange(e,null,this.containers[s].element,!0),this._trigger("change",e,this._uiHash()),this.containers[s]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(
i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(""==s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){
"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),
e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={
left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t(
"document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],s=t(e.containment).offset(),n="hidden"!=t(i).css("overflow");this.containment=[s.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,s.left+(n?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10
)||0)-this.helperProportions.width-this.margins.left,s.top+(n?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"==this.cssPosition?-this.scrollParent.scrollTop(
):o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=e.pageX,a=e.pageY;if(this.originalPosition&&(this.containment&&(
e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),i.grid)){var r=this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1];a=this.containment&&(r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3])?r-this.offset.click.top<this.containment[1]?r+i.grid[1]:r-i.grid[1]:r
;var h=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment&&(h-this.offset.click.left<this.containment[0]||h-this.offset.click.left>this.containment[2])?h-this.offset.click.left<this.containment[0]?h+i.grid[0]:h-i.grid[0]:h}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]
):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n==this.counter&&this.refreshPositions(!s)})},_clear:function(e,i){this.reverting=!1;var s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS)("auto"==this._storedCSS[n]||"static"==this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show()
;this.fromOutside&&!i&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(i||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))));for(
n=this.containers.length-1;0<=n;n--)i||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,
this._uiHash());for(n=0;s.length>n;n++)s[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(n=0;s.length>n;n++)s[n].call(this,e);this._trigger("stop",e,this._uiHash())}return!(this.fromOutside=!1)},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,
offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var i=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e),s=this.options
;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(s.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),s.collapsible||!1!==s.active&&null!=s.active||(s.active=0),s.active<0&&(s.active+=this.headers.length),this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass(
"ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(e){var s=t(this),n=s.attr("id"),o=s.next(),a=o.attr("id");n||(n=i+"-header-"+e,s.attr("id",n)),a||(a=i+"-panel-"+e,o.attr("id",a)),s.attr("aria-controls",a),o.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0
).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(s.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass(
"ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)))},
_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e,i,s=this.options.heightStyle,n=this.element.parent();"fill"===s?(
t.support.minHeight||(i=n.css("overflow"),n.css("overflow","hidden")),e=n.height(),this.element.siblings(":visible").each(function(){var i=t(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(e-=i.outerHeight(!0))}),i&&n.css("overflow",i),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({
target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={};e&&(t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._on(this.headers,i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n[0]===s[0],a=o&&i.collapsible,r=a?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:a?t():n,newPanel:r};e.preventDefault(),o&&!i.collapsible||!1===this._trigger("beforeActivate",e,l)||(i.active=!a&&this.headers.index(n),this.active=o?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),
i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false",
"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var o,a,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(a=d),a=a||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:r,
easing:a,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(s,{duration:r,easing:a,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-l),l=0)}})):e.animate(i,r,a,p):t.animate(s,r,a,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),!1!==t.uiBackCompat&&(function(t,e){t.extend(e.options,{navigation:!1,navigationFilter:function(){
return this.href.toLowerCase()===location.href.toLowerCase()}});var i=e._create;e._create=function(){if(this.options.navigation){var e=this,s=this.element.find(this.options.header),n=s.next(),o=s.add(n).find("a").filter(this.options.navigationFilter)[0];o&&s.add(n).each(function(i){return t.contains(this,o)?(e.options.active=Math.floor(i/2),!1):void 0})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=e._create,s=e._setOption;t.extend(e,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},
_setOption:function(t){("autoHeight"===t||"clearStyle"===t||"fillSpace"===t)&&(this.options.heightStyle=this._mergeHeightStyle()),s.apply(this,arguments)},_mergeHeightStyle:function(){var t=this.options;return t.fillSpace?"fill":t.clearStyle?"content":t.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=e._createIcons;e._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){
e.activate=e._activate;var i=e._findActive;e._findActive=function(t){return-1===t&&(t=!1),t&&"number"!=typeof t&&(-1===(t=this.headers.index(this.headers.filter(t)))&&(t=!1)),i.call(this,t)}}(0,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(t,e){t.extend(e.options,{change:null,changestart:null});var i=e._trigger;e._trigger=function(t,e,s){var n=i.apply(this,arguments);return!!n&&("beforeActivate"===t?n=i.call(this,"changestart",e,{oldHeader:s.oldHeader,oldContent:s.oldPanel,newHeader:s.newHeader,newContent:s.newPanel}):"activate"===t&&(n=i.call(this,"change",e,{oldHeader:s.oldHeader,
oldContent:s.oldPanel,newHeader:s.newHeader,newContent:s.newPanel})),n)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options,{animate:null,animated:"slide"});var i=e._create;e._create=function(){var t=this.options;null===t.animate&&(t.animate=!!t.animated&&("slide"===t.animated?300:"bounceslide"===t.animated?{duration:200,down:{easing:"easeOutBounce",duration:1e3}}:t.animated)),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",
collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,s;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))i=s=e=!0;else{i=s=e=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:
e=!0,this._keyEvent("next",n);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}}},keypress:function(s){if(e)return e=!1,void s.preventDefault();if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1
,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(
".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var s=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data(
"ui-autocomplete-item")||e.item.data("item.autocomplete"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),t.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),
this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this.document.find(e||"body")[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(
i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),
this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(s){i===e&&t.__response(s),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value(
)&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,e),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this
;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(
this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length
):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e,i,s,n,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{
primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}
).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!r.disabled&&!n&&(t(this).toggleClass("ui-state-active"),void a.buttonElement.attr("aria-pressed",a.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var e=a.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(
this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!r.disabled&&(t(this).addClass("ui-state-active"),e=this,void a.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){return!r.disabled&&void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return!r.disabled&&void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click(
)})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked")
)&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){
var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(
"input"!==this.type){var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push(
"ui-button-text-only"),e.addClass(o.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button(
).end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,
this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr",
"May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,
calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(e,"mouseout",
function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(e,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?t.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass(
"ui-datepicker-next-hover"))})}function extendRemove(t,e){for(var i in $.extend(t,e),e)(null==e[i]||e[i]==undefined)&&(t[i]=e[i]);return t}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(
attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?bindHover($(
'<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(t,e){var i=$(t);e.append=$([]),e.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),this._autoSize(e),$.data(t,PROP_NAME,e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i=this._get(e,"appendText"),s=this._get(e,
"isRTL");e.append&&e.append.remove(),i&&(e.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),t[s?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove();var n=this._get(e,"showOn");if(("focus"==n||"both"==n)&&t.focus(this._showDatepicker),"button"==n||"both"==n){var o=this._get(e,"buttonText"),a=this._get(e,"buttonImage");e.trigger=$(this._get(e,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:a,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==a?o:$("<img/>").attr({src:a,alt:o,title:o}))),t[s?"before":"after"](e.trigger),e.trigger.click(
function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==t[0]?$.datepicker._hideDatepicker():($.datepicker._datepickerShowing&&$.datepicker._lastInput!=t[0]&&$.datepicker._hideDatepicker(),$.datepicker._showDatepicker(t[0])),!1})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e=new Date(2009,11,20),i=this._get(t,"dateFormat");if(i.match(/[DM]/)){var s=function(t){for(var e=0,i=0,s=0;t.length>s;s++)t[s].length>e&&(e=t[s].length,i=s);return i};e.setMonth(s(this._get(t,i.match(/MM/)?"monthNames":"monthNamesShort"))),e.setDate(s(this._get(t,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}t.input.attr("size",
this._formatDate(t,e).length)}},_inlineDatepicker:function(t,e){var i=$(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),$.data(t,PROP_NAME,e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,s,n){var o=this._dialogInst;if(!o){this.uuid+=1;var a="dp"+this.uuid;this._dialogInput=$(
'<input type="text" id="'+a+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),(o=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],PROP_NAME,o)}if(extendRemove(o.settings,s||{}),e=e&&e.constructor==Date?this._formatDate(o,e):e,this._dialogInput.val(e),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,!this._pos){var r=document.documentElement.clientWidth,h=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[
r/2-100+l,h/2-150+c]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,o),this},_destroyDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();$.removeData(t,PROP_NAME),"input"==s?(i.append.remove(),i.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress
).unbind("keyup",this._doKeyUp)):("div"==s||"span"==s)&&e.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e})}},
_disableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDatepicker:function(t){if(!t)return!1;for(
var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var s=this._getInst(t);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?$.extend({},$.datepicker._defaults):s?"all"==e?$.extend({},s.settings):this._get(s,e):null;var n=e||{};if("string"==typeof e&&((n={})[e]=i),s){this._curInst==s&&this._hideDatepicker();var o=this._getDateDatepicker(t,!0),a=this._getMinMaxDate(s,"min"),r=this._getMinMaxDate(s,"max");extendRemove(s.settings,n),
null!==a&&n.dateFormat!==undefined&&n.minDate===undefined&&(s.settings.minDate=this._formatDate(s,a)),null!==r&&n.dateFormat!==undefined&&n.maxDate===undefined&&(s.settings.maxDate=this._formatDate(s,r)),this._attachments($(t),s),this._autoSize(s),this._setDate(s,o),this._updateAlternate(s),this._updateDatepicker(s)}},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t)
;return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e=$.datepicker._getInst(t.target),i=!0,s=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,$.datepicker._datepickerShowing)switch(t.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var n=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",e.dpDiv);n[0]&&$.datepicker._selectDay(t.target,e.selectedMonth,e.selectedYear,n[0]);var o=$.datepicker._get(e,"onSelect");if(o){var a=$.datepicker._formatDate(e);o.apply(e.input?e.input[0]:null,[a,e])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker(
);break;case 33:$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.datepicker._clearDate(t.target),i=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.datepicker._gotoToday(t.target),i=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?1:-1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,
"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,-7,"D"),i=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?-1:1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,7,"D"),i=t.ctrlKey||t.metaKey;break;default:i=!1}else 36==t.keyCode&&t.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},
_doKeyPress:function(t){var e=$.datepicker._getInst(t.target);if($.datepicker._get(e,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(e,"dateFormat")),s=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||s<" "||!i||-1<i.indexOf(s)}},_doKeyUp:function(t){var e=$.datepicker._getInst(t.target);if(e.input.val()!=e.lastVal)try{$.datepicker.parseDate($.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,$.datepicker._getFormatConfig(e))&&($.datepicker._setDateFromField(e),$.datepicker._updateAlternate(e),$.datepicker._updateDatepicker(e))}catch(s){$.datepicker.log(s)}return!0},
_showDatepicker:function(t){if("input"!=(t=t.target||t).nodeName.toLowerCase()&&(t=$("input",t.parentNode)[0]),!$.datepicker._isDisabledDatepicker(t)&&$.datepicker._lastInput!=t){var e=$.datepicker._getInst(t);$.datepicker._curInst&&$.datepicker._curInst!=e&&($.datepicker._curInst.dpDiv.stop(!0,!0),e&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(e,"beforeShow"),s=i?i.apply(t,[t,e]):{};if(!1!==s){extendRemove(e.settings,s),e.lastVal=null,$.datepicker._lastInput=t,$.datepicker._setDateFromField(e),$.datepicker._inDialog&&(t.value=""),$.datepicker._pos||(
$.datepicker._pos=$.datepicker._findPos(t),$.datepicker._pos[1]+=t.offsetHeight);var n=!1;$(t).parents().each(function(){return!(n|="fixed"==$(this).css("position"))});var o={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(e),o=$.datepicker._checkOffset(e,o,n),e.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":n?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),!e.inline){var a=$.datepicker._get(e,"showAnim"),r=$.datepicker._get(e,"duration"),h=function(){var t=e.dpDiv.find(
"iframe.ui-datepicker-cover");if(t.length){var i=$.datepicker._getBorders(e.dpDiv);t.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex($(t).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[a]||$.effects[a])?e.dpDiv.show(a,$.datepicker._get(e,"showOptions"),r,h):e.dpDiv[a||"show"](a?r:null,h),a&&r||h(),e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus(),$.datepicker._curInst=e}}}},_updateDatepicker:function(t){this.maxRows=4;var e=$.datepicker._getBorders(t.dpDiv);(instActive=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i=t.dpDiv.find(
"iframe.ui-datepicker-cover");i.length&&i.css({left:-e[0],top:-e[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()}),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var s=this._getNumberOfMonths(t),n=s[1];if(t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),t.dpDiv[(1!=s[0]||1!=s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.datepicker._curInst&&$.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled"
)&&t.input[0]!=document.activeElement&&t.input.focus(),t.yearshtml){var a=t.yearshtml;setTimeout(function(){a===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),a=t.yearshtml=null},0)}},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(t,e,i){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),
h=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return e.left-=this._get(t,"isRTL")?s-o:0,e.left-=i&&e.left==t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top==t.input.offset().top+a?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+s>r&&s<r?Math.abs(e.left+s-r):0),e.top-=Math.min(e.top,e.top+n>h&&n<h?Math.abs(n+a):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"==t.type||1!=t.nodeType||$.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];var s=$(t).offset();return[s.left,s.top]},_hideDatepicker:function(t){var e=this._curInst;if(e&&(!t||e==$.data(t,PROP_NAME)
)&&this._datepickerShowing){var i=this._get(e,"showAnim"),s=this._get(e,"duration"),n=function(){$.datepicker._tidyDialog(e)};$.effects&&($.effects.effect[i]||$.effects[i])?e.dpDiv.hide(i,$.datepicker._get(e,"showOptions"),s,n):e.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1;var o=this._get(e,"onClose");o&&o.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(t){t.dpDiv.removeClass(
this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if($.datepicker._curInst){var e=$(t.target),i=$.datepicker._getInst(e[0]);(e[0].id!=$.datepicker._mainDivId&&0==e.parents("#"+$.datepicker._mainDivId).length&&!e.hasClass($.datepicker.markerClassName)&&!e.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||e.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var s=$(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,e+("M"==i?this._get(n,
"showCurrentAtPos"):0),i),this._updateDatepicker(n))},_gotoToday:function(t){var e=$(t),i=this._getInst(e[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var s=new Date;i.selectedDay=s.getDate(),i.drawMonth=i.selectedMonth=s.getMonth(),i.drawYear=i.selectedYear=s.getFullYear()}this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(t,e,i){var s=$(t),n=this._getInst(s[0]);n["selected"+("M"==i?"Month":"Year")]=n["draw"+("M"==i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},
_selectDay:function(t,e,i,s){var n=$(t);if(!$(s).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(n[0])){var o=this._getInst(n[0]);o.selectedDay=o.currentDay=$("a",s).html(),o.selectedMonth=o.currentMonth=e,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(t){var e=$(t);this._getInst(e[0]),this._selectDate(e,"")},_selectDate:function(t,e){var i=$(t),s=this._getInst(i[0]);e=null!=e?e:this._formatDate(s),s.input&&s.input.val(e),this._updateAlternate(s);var n=this._get(s,"onSelect");n?n.apply(s.input?s.input[0]:null,[e,s]):s.input&&s.input.trigger("change"),
s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e=this._get(t,"altField");if(e){var i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t));$(e).each(function(){$(this).val(n)})}},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+4-(e.getDay()||7));var i=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((i-e)/864e5)/7)+1},parseDate:function(t,e,i){if(
null==t||null==e)throw"Invalid arguments";if(""==(e="object"==typeof e?""+e:e+""))return null;var s=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;s="string"!=typeof s?s:(new Date).getFullYear()%100+parseInt(s,10);for(var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=-1,l=-1,c=-1,u=-1,d=!1,p=function(e){var i=t.length>v+1&&t.charAt(v+1)==e;return i&&v++,i},f=function(t){var i=p(t),n=RegExp("^\\d{1,"+("@"==t?14:"!"==t?20:"y"==t&&i?4:"o"==t?3:2)+"}"),o=e.substring(_).match(n);if(
!o)throw"Missing number at position "+_;return _+=o[0].length,parseInt(o[0],10)},m=function(t,i,s){var n=$.map(p(t)?s:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)}),o=-1;if($.each(n,function(t,i){var s=i[1];return e.substr(_,s.length).toLowerCase()==s.toLowerCase()?(o=i[0],_+=s.length,!1):undefined}),-1!=o)return o+1;throw"Unknown name at position "+_},g=function(){if(e.charAt(_)!=t.charAt(v))throw"Unexpected literal at position "+_;_++},_=0,v=0;t.length>v;v++)if(d)"'"!=t.charAt(v)||p("'")?g():d=!1;else switch(t.charAt(v)){case"d":c=f("d");break;case"D":m("D",n,o);break;case"o":u=f("o");break;case"m":l=f("m");break
;case"M":l=m("M",a,r);break;case"y":h=f("y");break;case"@":h=(b=new Date(f("@"))).getFullYear(),l=b.getMonth()+1,c=b.getDate();break;case"!":var b;h=(b=new Date((f("!")-this._ticksTo1970)/1e4)).getFullYear(),l=b.getMonth()+1,c=b.getDate();break;case"'":p("'")?g():d=!0;break;default:g()}if(e.length>_){var y=e.substr(_);if(!/^\s+/.test(y))throw"Extra/unparsed characters found in date: "+y}if(-1==h?h=(new Date).getFullYear():h<100&&(h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h<=s?0:-100)),-1<u)for(l=1,c=u;;){var w=this._getDaysInMonth(h,l-1);if(c<=w)break;l++,c-=w}if((b=this._daylightSavingAdjust(new Date(h,l-1,c))).getFullYear()!=h||b.getMonth(
)+1!=l||b.getDate()!=c)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,r=function(e){var i=t.length>d+1&&t.charAt(d+1)==e
;return i&&d++,i},h=function(t,e,i){var s=""+e;if(r(t))for(;i>s.length;)s="0"+s;return s},l=function(t,e,i,s){return r(t)?s[e]:i[e]},c="",u=!1;if(e)for(var d=0;t.length>d;d++)if(u)"'"!=t.charAt(d)||r("'")?c+=t.charAt(d):u=!1;else switch(t.charAt(d)){case"d":c+=h("d",e.getDate(),2);break;case"D":c+=l("D",e.getDay(),s,n);break;case"o":c+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=h("m",e.getMonth()+1,2);break;case"M":c+=l("M",e.getMonth(),o,a);break;case"y":c+=r("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime()
;break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":r("'")?c+="'":u=!0;break;default:c+=t.charAt(d)}return c},_possibleChars:function(t){for(var e="",i=!1,s=function(e){var i=t.length>n+1&&t.charAt(n+1)==e;return i&&n++,i},n=0;t.length>n;n++)if(i)"'"!=t.charAt(n)||s("'")?e+=t.charAt(n):i=!1;else switch(t.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":s("'")?e+="'":i=!0;break;default:e+=t.charAt(n)}return e},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!=t.lastVal){var i,s,n=this._get(t,"dateFormat"),
o=t.lastVal=t.input?t.input.val():null;i=s=this._getDefaultDate(t);var a=this._getFormatConfig(t);try{i=this.parseDate(n,o,a)||s}catch(r){this.log(r),o=e?"":o}t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear(),t.currentDay=o?i.getDate():0,t.currentMonth=o?i.getMonth():0,t.currentYear=o?i.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(t,e,i){var o=null==e||""===e?i:"string"==typeof e?function(e){try{return $.datepicker.parseDate($.datepicker._get(t,"dateFormat"),e,
$.datepicker._getFormatConfig(t))}catch(i){}for(var s=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),o=s.getMonth(),a=s.getDate(),r=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=r.exec(e);h;){switch(h[2]||"d"){case"d":case"D":a+=parseInt(h[1],10);break;case"w":case"W":a+=7*parseInt(h[1],10);break;case"m":case"M":o+=parseInt(h[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(n,o));break;case"y":case"Y":n+=parseInt(h[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(n,o))}h=r.exec(e)}return new Date(n,o,a)}(e):"number"==typeof e?isNaN(e)?i:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(e):new Date(e.getTime())
;return(o=o&&"Invalid Date"==""+o?i:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n==t.selectedMonth&&o==t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},
_getDate:function(t){return!t.currentYear||t.input&&""==t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-e,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+e,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){
return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e=new Date;e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var i=this._get(t,"isRTL"),s=this._get(t,"showButtonPanel"),n=this._get(t,"hideIfNoPrevNext"),o=this._get(t,
"navigationAsDateFormat"),a=this._getNumberOfMonths(t),r=this._get(t,"showCurrentAtPos"),h=this._get(t,"stepMonths"),l=1!=a[0]||1!=a[1],c=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(t,"min"),d=this._getMinMaxDate(t,"max"),p=t.drawMonth-r,f=t.drawYear;if(p<0&&(p+=12,f--),d){var m=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-a[0]*a[1]+1,d.getDate()));for(m=u&&m<u?u:m;this._daylightSavingAdjust(new Date(f,p,1))>m;)--p<0&&(p=11,f--)}t.drawMonth=p,t.drawYear=f;var g=this._get(t,"prevText");g=o?this.formatDate(g,this._daylightSavingAdjust(new Date(f,p-h,1)
),this._getFormatConfig(t)):g;var _=this._canAdjustMonth(t,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":n?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",v=this._get(t,"nextText");v=o?this.formatDate(v,this._daylightSavingAdjust(new Date(f,p+h,1)),this._getFormatConfig(t)):v;var b=this._canAdjustMonth(t,1,f,p
)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+v+"</span></a>":n?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+v+"</span></a>",y=this._get(t,"currentText"),w=this._get(t,"gotoCurrent")&&t.currentDay?c:e;y=o?this.formatDate(y,w,this._getFormatConfig(t)):y;var k=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(t,"closeText"
)+"</button>",x=s?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?k:"")+(this._isInRange(t,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+y+"</button>":"")+(i?"":k)+"</div>":"",C=parseInt(this._get(t,"firstDay"),10);C=isNaN(C)?0:C;var D=this._get(t,"showWeek"),T=this._get(t,"dayNames");this._get(t,"dayNamesShort");var M=this._get(t,"dayNamesMin"),I=this._get(t,"monthNames"),S=this._get(t,"monthNamesShort"),P=this._get(t,"beforeShowDay"),N=this._get(t,"showOtherMonths"),A=this._get(t,"selectOtherMonths");this._get(t,"calculateWeek"
)||this.iso8601Week;for(var H=this._getDefaultDate(t),z="",O=0;a[0]>O;O++){var E="";this.maxRows=4;for(var W=0;a[1]>W;W++){var F=this._daylightSavingAdjust(new Date(f,p,t.selectedDay)),L=" ui-corner-all",R="";if(l){if(R+='<div class="ui-datepicker-group',1<a[1])switch(W){case 0:R+=" ui-datepicker-group-first",L=" ui-corner-"+(i?"right":"left");break;case a[1]-1:R+=" ui-datepicker-group-last",L=" ui-corner-"+(i?"left":"right");break;default:R+=" ui-datepicker-group-middle",L=""}R+='">'}R+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+L+'">'+(/all|left/.test(L)&&0==O?i?b:_:"")+(/all|right/.test(L)&&0==O?i?_:b:""
)+this._generateMonthYearHeader(t,p,f,u,d,0<O||0<W,I,S)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var Y=D?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",j=0;j<7;j++){var B=(j+C)%7;Y+="<th"+(5<=(j+C+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+T[B]+'">'+M[B]+"</span></th>"}R+=Y+"</tr></thead><tbody>";var q=this._getDaysInMonth(f,p);f==t.selectedYear&&p==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,q));var K=(this._getFirstDayOfMonth(f,p)-C+7)%7,U=Math.ceil((K+q)/7),V=l&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var X=this._daylightSavingAdjust(new Date(f,p,1-K)),G=0;G<V;G++){
R+="<tr>";var J=D?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(X)+"</td>":"";for(j=0;j<7;j++){var Q=P?P.apply(t.input?t.input[0]:null,[X]):[!0,""],Z=X.getMonth()!=p,te=Z&&!A||!Q[0]||u&&X<u||d&&d<X;J+='<td class="'+(5<=(j+C+6)%7?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(X.getTime()==F.getTime()&&p==t.selectedMonth&&t._keyEvent||H.getTime()==X.getTime()&&H.getTime()==F.getTime()?" "+this._dayOverClass:"")+(te?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!N?"":" "+Q[1]+(X.getTime()==c.getTime()?" "+this._currentClass:"")+(X.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(
Z&&!N||!Q[2]?"":' title="'+Q[2]+'"')+(te?"":' data-handler="selectDay" data-event="click" data-month="'+X.getMonth()+'" data-year="'+X.getFullYear()+'"')+">"+(Z&&!N?"&#xa0;":te?'<span class="ui-state-default">'+X.getDate()+"</span>":'<a class="ui-state-default'+(X.getTime()==e.getTime()?" ui-state-highlight":"")+(X.getTime()==c.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+X.getDate()+"</a>")+"</td>",X.setDate(X.getDate()+1),X=this._daylightSavingAdjust(X)}R+=J+"</tr>"}11<++p&&(p=0,f++),E+=R+="</tbody></table>"+(l?"</div>"+(0<a[0]&&W==a[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}z+=E}return z+=x+(
$.ui.ie6&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,z},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h=this._get(t,"changeMonth"),l=this._get(t,"changeYear"),c=this._get(t,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',d="";if(o||!h)d+='<span class="ui-datepicker-month">'+a[e]+"</span>";else{var p=s&&s.getFullYear()==i,f=n&&n.getFullYear()==i;d+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;m<12;m++)(!p||m>=s.getMonth())&&(!f||n.getMonth()>=m)&&(d+='<option value="'+m+'"'+(m==e?' selected="selected"':""
)+">"+r[m]+"</option>");d+="</select>"}if(c||(u+=d+(!o&&h&&l?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!l)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(t,"yearRange").split(":"),_=(new Date).getFullYear(),v=function(t){var e=t.match(/c[+-].*/)?i+parseInt(t.substring(1),10):t.match(/[+-].*/)?_+parseInt(t,10):parseInt(t,10);return isNaN(e)?_:e},b=v(g[0]),y=Math.max(b,v(g[1]||""));for(b=s?Math.max(b,s.getFullYear()):b,y=n?Math.min(y,n.getFullYear()):y,t.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=y;b++)t.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':""
)+">"+b+"</option>";t.yearshtml+="</select>",u+=t.yearshtml,t.yearshtml=null}return u+=this._get(t,"yearSuffix"),c&&(u+=(!o&&h&&l?"":"&#xa0;")+d),u+"</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"==i?e:0),n=t.drawMonth+("M"==i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"==i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&e<i?i:e;return s&&s<n?s:n},
_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(e<0?e:n[0]*n[1]),1));return e<0&&o.setDate(
this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max");return(!i||e.getTime()>=i.getTime())&&(!s||e.getTime()<=s.getTime())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,
t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),$.fn.datepicker=function(t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1)
;return"string"!=typeof t||"isDisabled"!=t&&"getDate"!=t&&"widget"!=t?"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this].concat(e)):$.datepicker._attachDatepicker(this,t)}):$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(t,e){
var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",s={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){
this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var s,n,o,a,r,h=this,l=this.options,c=l.title||"&#160;";s=(this.uiDialog=t("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(e){l.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE&&(h.close(e),e.preventDefault())}).mousedown(function(t){h.moveToTop(!1,t)}).appendTo("body"),
this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),n=(this.uiDialogTitlebar=t("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){s.focus()}).prependTo(s),o=t("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(t){t.preventDefault(),h.close(t)}).appendTo(n),(this.uiDialogTitlebarCloseText=t("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(o),a=t("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(n),r=(this.uiDialogButtonPane=t("<div>")
).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=t("<div>")).addClass("ui-dialog-buttonset").appendTo(r),s.attr({role:"dialog","aria-labelledby":a.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(o),this._focusable(o),l.draggable&&t.fn.draggable&&this._makeDraggable(),l.resizable&&t.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,t.fn.bgiframe&&s.bgiframe(),this._on(s,{keydown:function(i){if(l.modal&&i.keyCode===t.ui.keyCode.TAB){var n=t(":tabbable",s),o=n.filter(":first"),a=n.filter(":last");return i.target!==a[0]||i.shiftKey?i.target===o[0]&&i.shiftKey?(a.focus(1)
,!1):e:(o.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var t,e=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(e){var i,s,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e))return this._isOpen=!1,this.overlay&&this.overlay.destroy(
),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}):(this.uiDialog.hide(),this._trigger("close",e)),t.ui.dialog.overlay.resize(),this.options.modal&&(i=0,t(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(s=t(this).css("z-index"),isNaN(s)||(i=Math.max(i,s)))}),t.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var s,n=this.options;return n.modal&&!e||!n.stack&&!n.modal?this._trigger("focus",i):(n.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=n.zIndex),this.overlay&&(t.ui.dialog.maxZ+=1,t.ui.dialog.overlay.maxZ=t.ui.dialog.maxZ,this.overlay.$el.css("z-index",
t.ui.dialog.overlay.maxZ)),s={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},t.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",t.ui.dialog.maxZ),this.element.attr(s),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var e,i=this.options,s=this.uiDialog;return this._size(),this._position(i.position),s.show(i.show),this.overlay=i.modal?new t.ui.dialog.overlay(this):null,this.moveToTop(!0),(e=this.element.find(":tabbable")).length||((e=this.uiDialogButtonPane.find(":tabbable")).length||(e=s)),e.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(e){var i=this,s=!1
;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof e&&null!==e&&t.each(e,function(){return!(s=!0)}),s?(t.each(e,function(e,s){var n,o;s=t.isFunction(s)?{click:s,text:e}:s,s=t.extend({type:"button"},s),o=s.click,s.click=function(){o.apply(i.element[0],arguments)},n=t("<button></button>",s).appendTo(i.uiButtonSet),t.fn.button&&n.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({
cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){s.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",n,e(o)),t.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function s(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}i=i===e?this.options.resizable:i;var n=this,o=this.options,
a=this.uiDialog.css("position"),r="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:this._minHeight(),handles:r,start:function(e,i){t(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",e,s(i))},resize:function(t,e){n._trigger("resize",t,s(e))},stop:function(e,i){t(this).removeClass("ui-dialog-resizing"),o.height=t(this).height(),o.width=t(this).width(),n._trigger("resizeStop",e,s(i)),t.ui.dialog.overlay.resize()}}).css("position",a).find(".ui-resizable-se").addClass(
"ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,s=[],n=[0,0];e=e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(1===(s=e.split?e.split(" "):[e[0],e[1]]).length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),e={my:s[0]+(n[0]<0?n[0]:"+"+n[0])+" "+s[1]+(n[1]<0?n[1]:"+"+n[1]),at:s.join(" ")}),t.extend({},t.ui.dialog.prototype.options.position,e)):t.ui.dialog.prototype.options.position,(i=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(e),i||this.uiDialog.hide()},
_setOptions:function(e){var i=this,o={},a=!1;t.each(e,function(t,e){i._setOption(t,e),t in s&&(a=!0),t in n&&(o[t]=e)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,s){var n,o,a=this.uiDialog;switch(e){case"buttons":this._createButtons(s);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+s);break;case"dialogClass":a.removeClass(this.options.dialogClass).addClass(i+s);break;case"disabled":s?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":(n=a.is(":data(draggable)"))&&!s&&a.draggable("destroy"),!n&&s&&this._makeDraggable();break
;case"position":this._position(s);break;case"resizable":(o=a.is(":data(resizable)"))&&!s&&a.resizable("destroy"),o&&"string"==typeof s&&a.resizable("option","handles",s),o||!1===s||this._makeResizable(s);break;case"title":t(".ui-dialog-title",this.uiDialogTitlebar).html(""+(s||"&#160;"))}this._super(e,s)},_size:function(){var e,i,s,n=this.options,o=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),i=Math.max(0,n.minHeight-e),"auto"===n.height?t.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(
this.uiDialog.show(),s=this.element.css("height","auto").height(),o||this.uiDialog.hide(),this.element.height(Math.max(s,i))):this.element.height(Math.max(n.height-e,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),t.extend(t.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.ui.dialog.overlay.create(e)}}),t.extend(t.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),
create:function(i){0===this.instances.length&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(i){return!(t(i.target).zIndex()<t.ui.dialog.overlay.maxZ)&&e})},1),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var s=this.oldInstances.pop()||t("<div>").addClass("ui-widget-overlay");return t(document).bind("keydown.dialog-overlay",function(e){var n=t.ui.dialog.overlay.instances;0!==n.length&&n[n.length-1]===s&&i.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE&&(i.close(e),e.preventDefault())}),s.appendTo(document.body).css({
width:this.width(),height:this.height()}),t.fn.bgiframe&&s.bgiframe(),this.instances.push(s),s},destroy:function(e){var i=t.inArray(e,this.instances),s=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.height(0).width(0).remove(),t.each(this.instances,function(){s=Math.max(s,this.css("z-index"))}),this.maxZ=s},height:function(){var e;return t.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?t(window).height()+"px":e+"px":t(document).height()+"px"},
width:function(){var e;return t.ui.ie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))<Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)?t(window).width()+"px":e+"px":t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.ui.dialog.overlay.width(),height:t.ui.dialog.overlay.height()})}}),t.extend(t.ui.dialog.overlay.prototype,{destroy:function(){t.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(t){var e=!1;t.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{
submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},
"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(i){var s=t(i.target).closest(".ui-menu-item");!e&&s.not(".ui-state-disabled").length&&(e=!0,this.select(i),s.has(".ui-menu").length?this.expand(i):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){
var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(i){t(i.target).closest(".ui-menu").length||this.collapseAll(i),e=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr(
"aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,o,a,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break
;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===n?a=!0:o=n+o,r=RegExp("^"+i(o),"i"),
s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),(s=a&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s).length||(o=String.fromCharCode(e.keyCode),r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),1<s.length?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children(
"a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),(e=s.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation"
).children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr(
"aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),
r=e.height(),n<0?this.activeMenu.scrollTop(o+n):a<n+r&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr(
"aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t
){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(
s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-s-n<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,s,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(i=t(this)).offset(
).top-s+n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t){t.widget("ui.slider",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i,s,n=this.options,o=this.element.find(
".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),n.range&&(!0===n.range&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(
"min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:""))),s=n.values&&n.values.length||1,i=o.length;i<s;i++)r.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=o.add(t(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).mouseenter(function(){n.disabled||t(this).addClass("ui-state-hover")}).mouseleave(function(){t(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(
this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)}),this._on(this.handles,{keydown:function(i){var n,o,a,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),!1===this._start(i,r)))return}switch(a=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode
){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-a)}this._slide(i,r,o)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),
t(e.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,h,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(
s-c.values(e));i<n&&(n=i,o=t(this),a=e)}),!0===u.range&&this.values(1)===u.min&&(a+=1,o=t(this.handles[a])),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),h=o.offset(),l=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,
y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,s,n,o;return 1<(s=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,
t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,o;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&s<i||1===e&&i<s)&&(i=s),i!==this.values(e)&&((n=this.values())[e]=i,
o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),!1!==o&&this.values(e,i,!0))):i!==this.value()&&(!1!==(o=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},
value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,n,o;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(e))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=e,o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch(t.isArray(this.options.values)&&(
n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,
this._refreshValue(),s=0;s<n;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(
s+=0<i?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=(h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())*100,c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),!0===h.options.range&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},
{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?(s-n)/(o-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),
"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))}})}(jQuery),function(t,e){function i(){return++n}function s(t){return 1<t.hash.length&&t.href.replace(o,"")===location.href.replace(o,"").replace(/\s/g,"%20")}var n=0,o=/#.*$/;t.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var i=this,s=this.options,n=s.active,
o=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",s.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===n&&(o&&this.tabs.each(function(i,s){return t(s).attr("aria-controls")===o?(n=i,!1):e}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=!!this.tabs.length&&0)),!1!==n&&(
-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!s.collapsible&&0)),s.active=n,!s.collapsible&&!1===s.active&&this.anchors.length&&(s.active=0),t.isArray(s.disabled)&&(s.disabled=t.unique(s.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return i.tabs.index(t)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(this.options.active):t(),this._refresh(),this.active.length&&this.load(s.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),
n=this.tabs.index(s),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n!==this.options.active&&n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr(
"aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){for(var n=this.tabs.length-1;-1!==t.inArray((n<e&&(e=0),e<0&&(e=n),e),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){
return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?this._activate(i):"disabled"===t?this._setupDisabled(i):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i)),e},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(
".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide(
).attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}
).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var o,a,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(o=n.hash,a=e.element.find(e._sanitizeSelector(o))):(o="#"+(r=e._tabId(l)),(a=e.element.find(o)).length||(a=e._createPanel(r)).insertAfter(e.panels[i-1]||e.tablist),a.attr("aria-live","polite")),a.length&&(e.panels=e.panels.add(a)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":o.substring(1),"aria-labelledby":h}),a.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},
_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)!0===e||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(
this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s,n=this.element.parent();"fill"===e?(t.support.minHeight||(s=n.css("overflow"),n.css("overflow","hidden")),i=n.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),s&&n.css("overflow",s),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(
Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,o=t(e.currentTarget).closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||!1===this._trigger("beforeActivate",e,c)||(i.active=!r&&this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort()
,l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({
"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(
t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass(
"ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;!1!==s&&(s=i!==e&&(i=this._getIndex(i),t.isArray(s)?t.map(s,
function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(!0!==s){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),h={tab:o,panel:r};s(a[0])||(this.xhr=t.ajax(this._ajaxSettings(a,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),
n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==t.uiBackCompat&&(t.ui.tabs.prototype._ui=function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},t.widget("ui.tabs",t.ui.tabs,{url:function(t,e){this.anchors.eq(t
).attr("href",e)}}),t.widget("ui.tabs",t.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var i=this;this._on({tabsbeforeload:function(s,n){return t.data(n.tab[0],"cache.tabs")?s.preventDefault():n.jqXHR.success(function(){i.options.cache&&t.data(n.tab[0],"cache.tabs",!0)}),e}})},_ajaxSettings:function(e,i,s){var n=this.options.ajaxOptions;return t.extend({},n,{error:function(t,e){try{n.error(t,e,s.tab.closest("li").index(),s.tab[0])}catch(i){}}},this._superApply(arguments))},_setOption:function(t,e){"cache"===t&&!1===e&&this.anchors.removeData("cache.tabs"),this._super(t,e)},_destroy:function(){this.anchors.removeData(
"cache.tabs"),this._super()},url:function(t){this.anchors.eq(t).removeData("cache.tabs"),this._superApply(arguments)}}),t.widget("ui.tabs",t.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),t.widget("ui.tabs",t.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(t,e){if(t.target===this.element[0]&&this.options.spinner){var i=e.tab.find("span"),s=i.html();i.html(this.options.spinner),e.jqXHR.complete(function(){i.html(s)})}}})}}),t.widget("ui.tabs",t.ui.tabs,{options:{enable:null,disable:null},enable:function(e){var i,s=this.options;(e&&!0===s.disabled||t.isArray(s.disabled
)&&-1!==t.inArray(e,s.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e]))},disable:function(e){var i,s=this.options;(e&&!1===s.disabled||t.isArray(s.disabled)&&-1===t.inArray(e,s.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}}),t.widget("ui.tabs",t.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,s,n){n===e&&(n=this.anchors.length);var o,a,r=this.options,h=t(r.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,s)),l=i.indexOf("#"
)?this._tabId(h):i.replace("#","");return h.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),h.attr("aria-controls",l),o=n>=this.tabs.length,(a=this.element.find("#"+l)).length||(a=this._createPanel(l),o?0<n?a.insertAfter(this.panels.eq(-1)):a.appendTo(this.element):a.insertBefore(this.panels[n])),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),o?h.appendTo(this.tablist):h.insertBefore(this.tabs[n]),r.disabled=t.map(r.disabled,function(t){return n<=t?++t:t}),this.refresh(),1===this.tabs.length&&!1===r.active&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[n],this.panels[n])),this},
remove:function(e){e=this._getIndex(e);var i=this.options,s=this.tabs.eq(e).remove(),n=this._getPanelForTab(s).remove();return s.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(e+(this.anchors.length>e+1?1:-1)),i.disabled=t.map(t.grep(i.disabled,function(t){return t!==e}),function(t){return e<=t?--t:t}),this.refresh(),this._trigger("remove",null,this._ui(s.find("a")[0],n[0])),this}}),t.widget("ui.tabs",t.ui.tabs,{length:function(){return this.anchors.length}}),t.widget("ui.tabs",t.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(e){var s=e.is("li")?e.find("a[href]"):e;return s=s[0],t(s).closest("li").attr("aria-controls"
)||s.title&&s.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),t.widget("ui.tabs",t.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(e){return t(this.options.panelTemplate).attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),t.widget("ui.tabs",t.ui.tabs,{_create:function(){var t=this.options;null===t.active&&t.selected!==e&&(t.active=-1!==t.selected&&t.selected),this._super(),t.selected=t.active,!1===t.selected&&(t.selected=-1)},_setOption:function(t,e){if("selected"!==t)return this._super(t,e);var i=this.options;this._super("active",-1!==e&&e),
i.selected=i.active,!1===i.selected&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,!1===this.options.selected&&(this.options.selected=-1)}}),t.widget("ui.tabs",t.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(t,e,i){var s,n,o=this._superApply(arguments);return!!o&&("beforeActivate"===t?(s=i.newTab.length?i.newTab:i.oldTab,n=i.newPanel.length?i.newPanel:i.oldPanel,o=this._super("select",e,{tab:s.find(
".ui-tabs-anchor")[0],panel:n[0],index:s.closest("li").index()})):"activate"===t&&i.newTab.length&&(o=this._super("show",e,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),o)}}),t.widget("ui.tabs",t.ui.tabs,{select:function(t){if(-1===(t=this._getIndex(t))){if(!this.options.collapsible||-1===this.options.selected)return;t=this.options.selected}this.anchors.eq(t).trigger(this.options.event+this.eventNamespace)}}),function(){var e=0;t.widget("ui.tabs",t.ui.tabs,{options:{cookie:null},_create:function(){var t,e=this.options;null==e.active&&e.cookie&&(-1===(t=parseInt(this._cookie(),10))&&(t=!1),e.active=t),
this._super()},_cookie:function(i){var s=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++e)];return arguments.length&&(s.push(!1===i?-1:i),s.push(this.options.cookie)),t.cookie.apply(null,s)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),t.widget("ui.tabs",t.ui.tabs,{_trigger:function(e,i,s){var n=t.extend({},s);return"load"===e&&(n.panel=n.panel[0],
n.tab=n.tab.find(".ui-tabs-anchor")[0]),this._super(e,i,n)}}),t.widget("ui.tabs",t.ui.tabs,{options:{fx:null},_getFx:function(){var e,i,s=this.options.fx;return s&&(t.isArray(s)?(e=s[0],i=s[1]):e=i=s),s?{show:i,hide:e}:null},_toggle:function(t,i){function s(){o.running=!1,o._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&h.show?a.animate(h.show,h.show.duration,function(){s()}):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel,h=this._getFx();return h?(o.running=!0,r.length&&h.hide?r.animate(h.hide,h.hide.duration,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active")
,n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),e):this._super(t,i)}}))}(jQuery),jQuery.effects||function(t,e){var i=!1!==t.uiBackCompat,s="ui-effects-";t.effects={effect:{}},function(e,i){function s(t,e,i){var s=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:t<0?0:t>s.max?s.max:t)}function n(t){var s=c(),n=s._rgba=[];return t=t.toLowerCase(),m(l,function(e,o){var a,r=o.re.exec(t),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[u[l].cache]=a[u[l].cache],n=s._rgba=a._rgba,!1):i}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s
):a[t]}function o(t,e,i){return 6*(i=(i+1)%1)<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+6*(e-t)*(2/3-i):t}var a,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),h=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}
},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=c.support={},f=e("<p>")[0],m=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=-1<f.style.backgroundColor.indexOf("rgba"),m(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,r,h,l){if(o===i)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(r),r=i);var d=this,p=e.type(o),f=this._rgba=[];return r!==i&&(o=[o,r,h,l],p="array"),"string"===p?this.parse(n(o)||a._default):"array"===p?(m(u.rgba.props,function(t,e){f[e.idx]=s(o[e.idx],e)}),this):"object"===p?(m(u,
o instanceof c?function(t,e){o[e.cache]&&(d[e.cache]=o[e.cache].slice())}:function(e,i){var n=i.cache;m(i.props,function(t,e){if(!d[n]&&i.to){if("alpha"===t||null==o[t])return;d[n]=i.to(d._rgba)}d[n][e.idx]=s(o[t],e,!0)}),d[n]&&t.inArray(null,d[n].slice(0,3))<0&&(d[n][3]=1,i.from&&(d._rgba=i.from(d[n])))}),this):i},is:function(t){var e=c(t),s=!0,n=this;return m(u,function(t,o){var a,r=e[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],m(o.props,function(t,e){return null!=r[e.idx]?s=r[e.idx]===a[e.idx]:i})),s}),s},_space:function(){var t=[],e=this;return m(u,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=c(t),
n=i._space(),o=u[n],a=0===this.alpha()?c("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return i=i[o.cache],m(o.props,function(t,n){var o=n.idx,a=r[o],l=i[o],c=d[n.type]||{};null!==l&&(h[o]=null===a?l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),s((l-a)*e+a,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=c(t)._rgba;return c(e.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),
function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s
)/l+120:60*(s-n)/l+240,i=0===u||1===u?u:u<=.5?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],n=t[3],a=s<=.5?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*o(r,a,e+1/3)),Math.round(255*o(r,a,e)),Math.round(255*o(r,a,e-1/3)),n]},m(u,function(t,n){var o=n.props,a=n.cache,r=n.to,l=n.from;c.fn[t]=function(t){if(r&&!this[a]&&(this[a]=r(this._rgba)),t===i)return this[a].slice();var n,h=e.type(t),u="array"===h||"object"===h?t:arguments,d=this[a].slice();return m(o,function(t,e){var i=u["object"===h?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=s(i,e)}),
l?((n=c(l(d)))[a]=d,n):c(d)},m(o,function(i,s){c.fn[i]||(c.fn[i]=function(n){var o,a=e.type(n),r="alpha"===i?this._hsla?"hsla":"rgba":t,l=this[r](),c=l[s.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=e.type(n)),null==n&&s.empty?this:("string"===a&&((o=h.exec(n))&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[s.idx]=n,this[r](l)))})})}),m(r,function(t,i){e.cssHooks[i]={set:function(t,s){var o,a,r="";if("string"!==e.type(s)||(o=n(s))){if(s=c(o||s),!p.rgba&&1!==s._rgba[3]){for(a="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&a&&a.style;)try{r=e.css(a,"backgroundColor"),a=a.parentNode}catch(h){}s=s.blend(
r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{t.style[i]=s}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}),e.cssHooks.borderColor={expand:function(t){var e={};return m(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,
null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var e,i,s=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)"string"==typeof s[e=s[i]]&&(n[t.camelCase(e)]=s[e]);else for(e in s)"string"==typeof s[e]&&(n[e]=s[e]);return n}function s(e,i){var s,n,a={};for(s in i)n=i[s],e[s]!==n&&(o[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(a[s]=n));return a}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle",
"borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.effects.animateClass=function(e,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").andSelf():a;l=l.map(function(){return{el:t(this),start:i.call(this)}}),(o=function(){t.each(n,function(t,i){e[i]&&a[i+"Class"](e[i])})})(),l=l.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=jQuery.extend({},h,{queue:!1,
complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,s,n){return i?t.effects.animateClass.call(this,{add:e},i,s,n):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,s,n){return i?t.effects.animateClass.call(this,{remove:e},i,s,n):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,s,n,o,a){return"boolean"==typeof s||s===e?n?t.effects.animateClass.call(this,s?{add:i
}:{remove:i},n,o,a):this._toggleClass(i,s):t.effects.animateClass.call(this,{toggle:i},s,n,o)},switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function n(e,i,s,n){return t.isPlainObject(e)&&(e=(i=e).effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function o(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e]
)||"string"==typeof e&&!t.effects.effect[e]&&(!i||!t.effects[e])}t.extend(t.effects,{version:"1.9.2",save:function(t,e){for(var i=0;e.length>i;i++)null!==e[i]&&t.data(s+e[i],t[0].style[e[i]])},restore:function(t,i){var n,o;for(o=0;i.length>o;o++)null!==i[o]&&((n=t.data(s+i[o]))===e&&(n=""),t.css(i[o],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},
createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],
function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);0<o[0]&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function e(e){function i(){t.isFunction(o)&&o.call(n[0]),t.isFunction(e)&&e()}var n=t(this),o=s.complete,a=s.mode;(n.is(":hidden")?"hide"===a:"show"===a)?i():r.call(n[0],
s,i)}var s=n.apply(this,arguments),o=s.mode,a=s.queue,r=t.effects.effect[s.effect],h=!r&&i&&t.effects[s.effect];return t.fx.off||!r&&!h?o?this[o](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):r?!1===a?this.each(e):this.queue(a||"fx",e):h.call(this,{options:s,duration:s.duration,callback:s.complete,mode:s.mode})},_show:t.fn.show,show:function(t){if(o(t))return this._show.apply(this,arguments);var e=n.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(o(t))return this._hide.apply(this,arguments);var e=n.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},
__toggle:t.fn.toggle,toggle:function(e){if(o(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5
)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var o,a,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",m=i.test(u)
,g={},_="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),a=(o=t.effects.createWrapper(h).css({overflow:"hidden"}))[p](),r=parseFloat(o.css(f))||0,g[p]=_?a:0,m||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[f]=_?r:a+r),_&&(o.css(p,0),m||o.css(f,r+a)),o.animate(g,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,
e.mode||"effect"),l="hide"===h,c="show"===h,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||l?1:0),m=e.duration/f,g=e.easing,_="up"===u||"down"===u?"top":"left",v="up"===u||"left"===u,b=a.queue(),y=b.length;for((c||l)&&r.push("opacity"),t.effects.save(a,r),a.show(),t.effects.createWrapper(a),d||(d=a["top"===_?"outerHeight":"outerWidth"]()/3),c&&((o={opacity:1})[_]=0,a.css("opacity",0).css(_,v?2*-d:2*d).animate(o,m,g)),l&&(d/=Math.pow(2,p-1)),s=(o={})[_]=0;s<p;s++)(n={})[_]=(v?"-=":"+=")+d,a.animate(n,m,g).animate(o,m,g),d=l?2*d:d/2;l&&((n={opacity:0})[_]=(v?"-=":"+=")+d,a.animate(n,m,g)),a.queue(function(){l&&a.hide(),t.effects.restore(a,r),
t.effects.removeWrapper(a),i()}),1<y&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),a.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],l="show"===t.effects.setMode(a,e.mode||"hide"),u="vertical"===(e.direction||"vertical"),d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(a,r),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),o=(n="IMG"===a[0].tagName?s:a)[d](),l&&(n.css(d,0),n.css(p,o/2)),f[d]=l?o:0,f[p]=l?0:o/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||a.hide(),t.effects.restore(a,r),
t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(n,e.mode||"hide"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,o),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===c?-s:s),u[l]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),
t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&(p.css({visibility:"visible"}),t(b).remove(),m||p.hide(),i())}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),m="show"===t.effects.setMode(p,e.mode||"hide"),g=p.show().css("visibility","hidden").offset(),_=Math.ceil(p.outerWidth()/d),v=Math.ceil(p.outerHeight()/u),b=[];for(o=0;o<u;o++)for(h=g.top+o*v,c=o-(u-1)/2,a=0;a<d;a++)r=g.left+a*_,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*_,top:-o*v}).parent(
).addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:_,height:v,left:r+(m?l*_:0),top:h+(m?c*v:0),opacity:m?0:1}).animate({left:r+(m?0:l*_),top:h+(m?0:c*v),opacity:m?1:0},e.duration||500,e.easing,s)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var s,n,o=t(this),a=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),h="show"===r,l="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),
d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],m=e.duration/2,g={},_={};t.effects.save(o,a),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),h&&s.css(d?{height:0,width:c}:{height:c,width:0}),g[f[0]]=h?n[0]:c,_[f[1]]=h?n[1]:0,s.animate(g,m,e.easing).animate(_,m,e.easing,function(){l&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(s,e.mode||"show"),a={backgroundColor:s.css(
"backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,n),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),o=t.effects.setMode(n,e.mode||"show"),a="show"===o,r="hide"===o,h=a||"hide"===o,l=2*(e.times||5)+(h?1:0),c=e.duration/l,u=0,d=n.queue(),p=d.length;for((a||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;s<l;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(
),i()}),1<p&&d.splice.apply(d,[1,0].concat(d.splice(p,l+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),o="hide"===n,a=parseInt(e.percent,10)||150,r=a/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:o?a:100,from:o?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),o=t.effects.setMode(s,e.mode||"effect"),a=parseInt(e.percent,10)||(
0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c_y="horizontal"!==r?a/100:1,c_x="vertical"!==r?a/100:1;n.effect="size",n.queue=!1,n.complete=i,"effect"!==o&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c_y,width:l.width*c_x,outerHeight:l.outerHeight*c_y,outerWidth:l.outerWidth*c_x},n.fade&&("show"===o&&(n.from.opacity=0,n.to.opacity=1),"hide"===o&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n
,o,a=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(a,e.mode||"effect"),f=e.restore||"effect"!==p,m=e.scale||"both",g=e.origin||["middle","center"],_=a.css("position"),v=f?r:["position","top","bottom","left","right","overflow","opacity"],b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},
"toggle"===e.mode&&"show"===p?(a.from=e.to||b,a.to=e.from||s):(a.from=e.from||("show"===p?b:s),a.to=e.to||("hide"===p?b:s)),o={from:{y:a.from.height/s.height,x:a.from.width/s.width},to:{y:a.to.height/s.height,x:a.to.width/s.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(v=v.concat(u),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(v=v.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(v=v.concat(c).concat(l),a.from=t.effects.setTransition(a,c,o.from.y,a.from),
a.to=t.effects.setTransition(a,c,o.to.y,a.to)),t.effects.save(a,v),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(n=t.effects.getBaseline(g,s),a.from.top=(s.outerHeight-a.outerHeight())*n.y,a.from.left=(s.outerWidth-a.outerWidth())*n.x,a.to.top=(s.outerHeight-a.to.outerHeight)*n.y,a.to.left=(s.outerWidth-a.to.outerWidth)*n.x),a.css(a.from),("content"===m||"both"===m)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),a.find("*[width]").each(function(){var i=t(this),s_height=i.height(),s_width=i.width(),s_outerHeight=i.outerHeight(),s_outerWidth=i.outerWidth()
;f&&t.effects.save(i,l),i.from={height:s_height*o.from.y,width:s_width*o.from.x,outerHeight:s_outerHeight*o.from.y,outerWidth:s_outerWidth*o.from.x},i.to={height:s_height*o.to.y,width:s_width*o.to.x,outerHeight:s_height*o.to.y,outerWidth:s_width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,u,o.from.y,i.from),i.to=t.effects.setTransition(i,u,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){
0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),t.effects.restore(a,v),f||("static"===_?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,i){var s=parseInt(i,10),n=t?a.to.left:a.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",h=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,
f={},m={},g={},_=n.queue(),v=_.length;for(t.effects.save(n,o),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+h,m[d]=(p?"+=":"-=")+2*h,g[d]=(p?"-=":"+=")+2*h,n.animate(f,u,e.easing),s=1;s<l;s++)n.animate(m,u,e.easing).animate(g,u,e.easing);n.animate(m,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}),1<v&&_.splice.apply(_,[1,0].concat(_.splice(v,c+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(n,e.mode||"show"),r="show"===a,h=e.direction||"left",
l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,o),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),
width:n.innerWidth()},u=s.offset(),d=t('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery)}),define("select2",["jquery"],function(jQuery){var a;void 0===(a=jQuery).fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&!1!==b.call(c[0],d,c););return this}}),function(a,b){"use strict";function n(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function o(a){
return a.replace(/[^\u0000-\u007E]/g,function(a){return m[a]||a})}function p(a,b){for(var c=0,d=b.length;c<d;c+=1)if(r(a,b[c]))return c;return-1}function r(a,c){return a===c||a!==b&&c!==b&&(null!==a&&null!==c&&(a.constructor===String?a+""==c+"":c.constructor===String&&c+""==a+""))}function s(b,c){var d,e,f;if(null===b||b.length<1)return[];for(e=0,f=(d=b.split(c)).length;e<f;e+=1)d[e]=a.trim(d[e]);return d}function t(a){return a.outerWidth(!1)-a.width()}function u(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger(
"keyup-change"))})}function v(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function w(a,c,d){var e;return d=d||b,function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function z(b){var c=0,d=0;if("selectionStart"in(b=a(b)[0]))c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function C(
b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);(h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,g,f=[];(e=a.trim(b.attr("class")))&&a((e=""+e).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&f.push(this)}),(e=a.trim(c.attr("class")))&&a((e=""+e).split(/\s+/)).each2(function(){
0!==this.indexOf("select2-")&&((g=d(this))&&f.push(g))}),b.attr("class",f.join(" "))}function E(a,b,c,d){var e=o(a.toUpperCase()).indexOf(o(b.toUpperCase())),f=b.length;return e<0?void c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+f))),c.push("</span>"),void c.push(d(a.substring(e+f,a.length))))}function F(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){
var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};i.callback(d)}}),e=j.call(h,l)},f
)}}function H(b){var d,e,c=b,f=function(a){return""+a.text};a.isArray(c)&&(c={results:e=c}),!1===a.isFunction(c)&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return""===d?void b.callback(c()):(g=function(c,e){var h,i;if((c=c[0]).children){for(i in h={},c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),void b.callback(e))}}function I(c){
var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function K(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function N(){var b=this;a.each(arguments,function(a,c){b[c].remove(),
b[c]=null})}function O(b,c){var d=function(){};return((d.prototype=new b).constructor=d).prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var d,e,f,g,h,j,k,i={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!a.metaKey},isFunctionKey:function(a){return 112<=(a=a.which?a.which:a)&&a<=123}},m={"":"A","":"A",
"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E",
"":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K",
"":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O",
"":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U",
"":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a",
"":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e",
"":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k",
"":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o",
"":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u",
"":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};j=a(document),g=function(){var a=1;return function(){return a++}}(),e=O(d=O(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr(
"id")||"autogen"+g()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(K(c.containerCss,this.opts.element)),this.container.addClass(K(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A)
,this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),v(this.results),this.dropdown.on("mousemove-filtered",f,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",f,this.bind(function(a){
this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",f,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",f,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(a,b){var c=w(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){0<=p(a.target,b.get())&&c(a)})}(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){
a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();0<e&&f-e<=0?(d.scrollTop(0),A(a)):e<0&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),u(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){0<a(b.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",
function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||function(){var b=a("<div class='select2-measure-scrollbar'></div>");b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr(
"placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2"),d=this;this.close(),a.length&&a[0].detachEvent&&d._sync&&a.each(function(){this.detachEvent("onpropertychange",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),N.call(this,"container","liveRegion","dropdown","results",
"search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:r(a.attr("locked"),"locked")||r(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,h,i=this;if("select"===(d=c.element).get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),
"function"!=typeof(c=a.extend({},{populateResults:function(d,e,f){var h,j=this.opts.id,k=this.liveRegion;(h=function(d,e,l){var m,n,o,p,q,r,s,t,u,v,w=[];for(m=0,n=(d=c.sortResults(d,e,f)).length;m<n;m+=1)p=!(q=!0===(o=d[m]).disabled)&&j(o)!==b,r=o.children&&0<o.children.length,(s=a("<li></li>")).addClass("select2-results-dept-"+l),s.addClass("select2-result"),s.addClass(p?"select2-result-selectable":"select2-result-unselectable"),q&&s.addClass("select2-disabled"),r&&s.addClass("select2-result-with-children"),s.addClass(i.opts.formatResultCssClass(o)),s.attr("role","presentation"),(t=a(document.createElement("div"))).addClass("select2-result-label"),t.attr(
"id","select2-result-label-"+g()),t.attr("role","option"),(v=c.formatResult(o,t,f,i.opts.escapeMarkup))!==b&&(t.html(v),s.append(t)),r&&((u=a("<ul></ul>")).addClass("select2-result-sub"),h(o.children,u,l+1),s.append(u)),s.data("select2-data",o),w.push(s[0]);e.append(w),k.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c)).id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var f,g,h,c={results:[],more:!1},e=a.term
;h=function(b,c){var d;b.is("option")?a.matcher(e,b.text(),b)&&c.push(i.optionToData(b)):b.is("optgroup")&&(d=i.optionToData(b),b.children().each2(function(a,b){h(b,d.children)}),0<d.children.length&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&0<f.length&&((g=this.getPlaceholderOption())&&(f=f.not(g))),f.each2(function(a,b){h(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?((h=c.element.data("ajax-url"))&&0<h.length&&(c.ajax.url=h),c.query=G.call(c.element,c.ajax)):"data"in c?c.query=H(c.data):"tags"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),
text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(s(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return r(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition
)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var d,c=this.opts.element,e=this;c.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var a=c.prop("disabled");a===b&&(a=!1),this.enable(!a);var d=c.prop("readonly");d===b&&(d=!1),this.readonly(d),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass,this.opts.element)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(
this.opts.dropdownCssClass,this.opts.element))}),c.length&&c[0].attachEvent&&c.each(function(){this.attachEvent("onpropertychange",e._sync)}),(d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(c.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{
type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){
this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,u,v,w,x,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window),h=g.width(),i=g.height(),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,o=m+f<=l,p=c.top-f>=g.scrollTop(),q=b.outerWidth(!1),r=n+q<=j;b.hasClass("select2-drop-above")?(u=!0,!p&&o&&(u=!(v=!0))):(u=!1,!o&&p&&(u=v=!0)),v&&(b.hide(),
c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,r=(n=c.left)+(q=b.outerWidth(!1))<=j,b.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),e<(q=b.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:k.width))?e=q:q=e,f=b.outerHeight(!1),r=n+q<=j):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(m-=(t=this.body.offset()).top,n-=t.left),r||(n=c.left+this.container.outerWidth(!1)-q),w={left:n,width:e},u?(w.top=c.top-f,
w.bottom="auto",this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(w.top=m,w.bottom="auto",this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),w=a.extend(w,K(this.opts.dropdownCss,this.opts.element)),b.css(w)},shouldOpen:function(){var b;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),j.on(
"mousemove.select2Event",function(a){i.x=a.pageX,i.y=a.pageY}),!0)},opening:function(){var f,b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(f=a("#select2-drop-mask")).length&&((f=a(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body),f.on("mousedown touchstart",function(b){n(f);var d,c=a("#select2-drop");0<c.length&&((d=c.data(
"select2")).opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){a(this).on(d+" "+c+" "+e,function(){g.opened()&&g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window
).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),j.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(
){var c,d,e,f,g,h,i,j,b=this.results;if(!((d=this.highlight())<0)){if(0==d)return void b.scrollTop(0);c=this.findHighlightableChoices().find(".select2-result-label"),f=(j=((e=a(c[d])).offset()||{}).top||0)+e.outerHeight(!0),d===c.length-1&&(0<(i=b.find("li.select2-more-results")).length&&(f=i.offset().top+i.outerHeight(!0))),(g=b.offset().top+b.outerHeight(!0))<f&&b.scrollTop(b.scrollTop()+(f-g)),(h=j-b.offset().top)<0&&"none"!=e.css("display")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(
var c=this.findHighlightableChoices(),d=this.highlight();-1<d&&d<c.length;){var e=a(c[d+=b]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?p(c.filter(".select2-highlighted")[0],c.get()):(b>=c.length&&(b=c.length-1),b<0&&(b=0),this.removeHighlight(),(d=a(c[b])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",d.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(d.text()),void((e=d.data("select2-data")
)&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(0<c.length&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find(
"li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(b.offset().top-a.offset().top-a.height()<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(K(e.opts.formatLoadMore,e.opts.element,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass("select2-active"),h.positionDropdown(),e.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?h.liveRegion.text(e.text()):h.liveRegion.text(h.opts.formatMatches(e.find(".select2-result-selectable").length))}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,"select2-last-term");if((!0===c||!k||!r(j,k))&&(a.data(this.container,"select2-last-term",j),!0===c||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount
;var o=this.getMaximumSelectionSize();if(1<=o&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+K(f.formatSelectionTooBig,f.element,o)+"</li>");if(d.val().length<f.minimumInputLength)return J(f.formatInputTooShort,"formatInputTooShort")?n("<li class='select2-no-results'>"+K(f.formatInputTooShort,f.element,d.val(),f.minimumInputLength)+"</li>"):n(""),void(c&&this.showSearch&&this.showSearch(!0));if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return void(J(f.formatInputTooLong,"formatInputTooLong")?n("<li class='select2-no-results'>"+K(
f.formatInputTooLong,f.element,d.val(),f.maximumInputLength)+"</li>"):n(""));f.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+K(f.formatSearching,f.element)+"</li>"),d.addClass("select2-active"),this.removeHighlight(),(i=this.tokenize())!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(g.hasError!==b&&J(f.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+K(
f.formatAjaxError,f.element,g.jqXHR,g.textStatus,g.errorThrown)+"</li>");if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==d.val()&&((i=this.opts.createSearchChoice.call(h,d.val(),g.results))!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return r(h.id(this),h.id(i))}).length&&this.opts.createSearchChoicePosition(g.results,i)),0===g.results.length&&J(f.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+K(f.formatNoMatches,f.element,d.val())+"</li>");e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),
!0===g.more&&J(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+f.escapeMarkup(K(f.formatLoadMore,f.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:"select2-loaded",items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass(
"select2-search-choice-focus")},focusSearch:function(){var a;(a=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus(),(0<b.offsetWidth||0<b.offsetHeight)&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&((d=b.createTextRange()).collapse(!1),d.select()))},0)},selectHighlighted:function(a){if(this._touchMoved)this.clearTouchMoved();else{var b=this.highlight(),d=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()}},getPlaceholder:function(){var a
;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){var d=function(){var c,d,e,f,g;if("off"===this.opts.width)return null;if("element"===this.opts.width
)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return a.isFunction(this.opts.width)?this.opts.width():this.opts.width;if((c=this.opts.element.attr("style"))!==b)for(f=0,g=(d=c.split(";")).length;f<g;f+=1)if(null!==(e=d[f].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=e.length)return e[1];return"resolve"===this.opts.width?0<(c=this.opts.element.css("width")).indexOf("%")?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==d&&this.container.css("width",d)}}),{
createContainer:function(){return a(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>",
"       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(
this.search.focus(),(c=this.search.get(0)).createTextRange?((d=c.createTextRange()).collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),
this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")},initContainer:function(){var b,h,d=this.container,e=this.dropdown,f=g();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=d.find(".select2-choice"),
this.focusser=d.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+f),this.focusser.attr("aria-labelledby","select2-chosen-"+f),this.results.attr("id","select2-results-"+f),this.search.attr("aria-owns","select2-results-"+f),this.focusser.attr("id","s2id_autogen"+f),h=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(h.text()).attr("for",this.focusser.attr("id"));var i=this.opts.element.attr("title");this.opts.element.attr("title",i||h.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a(
"label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return void A(a);switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(a),void A(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)
})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.ESC){if(!1===this.opts.openOnEnter&&a.which===c.ENTER)return void A(a);if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void A(a)}return a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),void A(a)):void 0}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(0<=this.opts.minimumResultsForSearch){if(a.stopPropagation(),this.opened())return;this.open()}})),
b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),function(a){a.preventDefault(),a.stopImmediatePropagation()}(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(c){n(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(c)})),e.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){A(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass(
"select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){
var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==b&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),
c.setPlaceholder(),c.nextSearchTerm=c.opts.nextSearchTerm(a,c.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()!==b&&((a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val())},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null
;b.query({matcher:function(a,c,d){var g=r(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices(
).each2(function(a,b){return r(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0)),!0===b){var g=this.opts.minimumResultsForSearch;0<=g&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(
this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,c=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),(e=this.opts.formatSelectionCssClass(a,c))!==b&&c.addClass(e),this.selection.removeClass("select2-default"),
this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],1<arguments.length&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),
this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?((c=this.selection.data("select2-data"))==b&&(c=null),c):(1<arguments.length&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),f=O(d,{createContainer:function(){return a(document.createElement("div")).attr({class:"select2-container select2-container-multi"}
).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}
).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=s(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return r(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],h=0;h<f.length;h++){var i=f[h];if(r(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),
a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var d,b=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b);var e=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){e.search[0].focus(),e.selectChoice(a(this))}),
this.search.attr("id","s2id_autogen"+g()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var b=d.find(".select2-search-choice-focus"),e=b.prev(".select2-search-choice:not(.select2-locked)"),f=b.next(".select2-search-choice:not(.select2-locked)"),g=z(this.search)
;if(b.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var h=b;return a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?this.unselect(b.first())&&(this.search.width(10),h=e.length?e:f):a.which==c.DELETE?this.unselect(b.first())&&(this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),void(h&&h.length||this.open())}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==g.offset&&!g.length)return this.selectChoice(d.find(".select2-search-choice:not(.select2-locked)").last()),void A(a);if(this.selectChoice(null),
this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(a),void A(a)}if(a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),
this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",b,this.bind(function(b){this.isInterfaceEnabled()&&(0<a(b.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",b,this.bind(
function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),
this.select||""!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<c?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),
this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){p(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice"
).remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();null!=(a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts))&&a!=b&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&""!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(
this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a(
"<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal();(j=this.opts.formatSelection(c,g.find("div"),this.opts.escapeMarkup))!=b&&g.find("div").replaceWith("<div>"+j+"</div>"),(k=this.opts.formatSelectionCssClass(c,g.find("div")))!=b&&g.addClass(k),d&&g.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass(
"select2-search-choice-focus"),A(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(0===(b=b.closest(".select2-search-choice")).length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(d=b.data("select2-data")){var f=a.Event("select2-removing");if(f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented())return!1;for(;0<=(e=p(this.id(d),c)
);)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(d),choice:d}),this.triggerChange({removed:d}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){0<=p(g.id(b.data("select2-data")),d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass(
"select2-selected")}),-1==this.highlight()&&!1!==c&&g.highlight(0),!this.opts.createSearchChoice&&0<!e.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&J(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+K(g.opts.formatNoMatches,g.opts.element,g.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-t(this.search)},resizeSearch:function(){var a,b,c,e,f=t(this.search);a=C(this.search)+10,b=this.search.offset().left,(e=(c=this.selection.width())-(b-this.selection.offset().left)-f)<a&&(e=c-f),e<40&&(e=c-f),
e<=0&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?null===(a=this.select.val())?[]:a:s(a=this.opts.element.val(),this.opts.separator)},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){p(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){b=b.slice(0),a=a.slice(0);for(var c=0;c<b.length;c++)for(var d=0;d<a.length;d++)r(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if((
e=this.data()).length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},
onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data(
"select2-data")}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),void(c&&this.triggerChange(this.buildChangeDetails(f,this.data()))))}}),a.fn.select2=function(){var d,e,f,g,h,c=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],j=["opened","isFocused","container","dropdown"],k=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])(
d=0===c.length?{}:a.extend({},c[0])).element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?h=d.element.prop("multiple"):(h=d.multiple||!1,"tags"in d&&(d.multiple=h=!0)),(e=h?new window.Select2.class.multi:new window.Select2.class.single).init(d);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(p(c[0],i)<0)throw"Unknown method: "+c[0];if(g=b,(e=a(this).data("select2"))===b)return;if(f=c[0],g="container"===f?e.container:"dropdown"===f?e.dropdown:(l[f]&&(f=l[f]),e[f].apply(e,c.slice(1))),0<=p(c[0],j)||0<=p(c[0],k)&&1==c.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,
closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return E(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return 0<=o(""+b).toUpperCase().indexOf(o(""+a).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(a,c,d,e){var h,i,j,k,l,f=a,g=!1
;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;j<k&&(l=e.tokenSeparators[j],!(0<=(i=a.indexOf(l))));j++);if(i<0)break;if(h=a.substring(0,i),a=a.substring(i+l.length),0<h.length&&(h=e.createSearchChoice.call(this,h,c))!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h)){for(g=!1,j=0,k=c.length;j<k;j++)if(r(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:void 0},escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",
createSearchChoicePosition:"top",shouldFocusInput:function(a){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(a.opts.minimumResultsForSearch<0)}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b
;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:w,markMatch:E,escapeMarkup:F,stripDiacritics:o},class:{abstract:d,single:e,multi:f}}}}(jQuery)}),define("nouislider",["jquery"],function($){"use strict";var doc=$(document),namespace=".nui",$val=$.fn.val,
actions=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Classes=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","noUi-extended","noUi-stacking"],Formatting=["decimals","mark","thousand","prefix","postfix","encoder","decoder","negative","negativeBefore"],FormatDefaults=[2,".","",
"","",function(a){return a},function(a){return a},"-",""];function throwError(message){throw new RangeError("noUiSlider: "+message)}function throwEqualError(F,a,b){(F[a]||F[b])&&F[a]===F[b]&&throwError("(Link) '"+a+"' can't match '"+b+"'.'")}function limit(a){return Math.max(Math.min(a,100),0)}function subRangeRatio(pa,pb){return 100/(pb-pa)}function isNumeric(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function addClassFor(element,className,duration){element.addClass(className),setTimeout(function(){element.removeClass(className)},duration)}function fromPercentage(range,value){return 100*value/(range[1]-range[0])}function toStepping(options,value){
if(value>=options.xVal.slice(-1)[0])return 100;for(var va,vb,pa,pb,j=1;value>=options.xVal[j];)j++;return va=options.xVal[j-1],vb=options.xVal[j],pa=options.xPct[j-1],pb=options.xPct[j],pa+function(range,value){return fromPercentage(range,range[0]<0?value+Math.abs(range[0]):value-range[0])}([va,vb],value)/subRangeRatio(pa,pb)}function getStep(options,value){for(var a,b,j=1;value>=options.xPct[j];)j++;return options.snap?(a=options.xPct[j-1],((b=options.xPct[j])-a)/2<value-a?b:a):options.xSteps[j-1]?options.xPct[j-1]+function(value,to){return Math.round(value/to)*to}(value-options.xPct[j-1],options.xSteps[j-1]):value}function Format(options){
void 0===options&&(options={}),"object"!=typeof options&&throwError("(Format) 'format' option must be an object.");var settings={};$(Formatting).each(function(i,val){var a,b;void 0===options[val]?settings[val]=FormatDefaults[i]:(a=options[val],b=FormatDefaults[i],typeof a==typeof b?("decimals"===val&&(options[val]<0||7<options[val])&&throwError("(Format) 'format.decimals' option must be between 0 and 7."),settings[val]=options[val]):throwError("(Format) 'format."+val+"' must be a "+typeof FormatDefaults[i]+"."))}),throwEqualError(settings,"mark","thousand"),throwEqualError(settings,"prefix","negative"),throwEqualError(settings,"prefix","negativeBefore"),
this.settings=settings}function Link(entry,update){if(!(this instanceof Link))throw new Error("Link: Don't use Link as a function. Use the 'new' keyword.");if(!entry)throw new RangeError("Link: missing parameters.");this.formatting=entry.format||{},this.update=!update;var a,that=this,target=entry.target||function(){},method=entry.method,isTooltip="string"==typeof target&&0===target.indexOf("-tooltip-"),isHidden="string"==typeof target&&0!==target.indexOf("-"),isMethod="function"==typeof target,is$=(a=target)instanceof $||$.zepto&&$.zepto.isZ(a),isInput=is$&&target.is("input, select, textarea"),methodIsFunction=is$&&"function"==typeof method,
methodIsName=is$&&"string"==typeof method&&target[method];if(isTooltip)return this.method=method||"html",void(this.el=$(target.replace("-tooltip-","")||"<div/>")[0]);if(isHidden)return this.method="val",this.el=document.createElement("input"),this.el.name=target,void(this.el.type="hidden");if(isMethod)return this.target=!1,void(this.method=target);if(is$){if(method&&(methodIsFunction||methodIsName))return this.target=target,void(this.method=method);if(!method&&isInput)return this.method="val",this.target=target,void this.target.on("change",function(e){var a,b,c,output=(a=null,b=$(e.target).val(),[(c=that.N)?a:b,c?b:a]);that.obj.val(output,{link:that})});if(
!method&&!isInput)return this.method="html",void(this.target=target)}throw new RangeError("Link: Invalid Link.")}function testStep(parsed,entry){isNumeric(entry)||throwError("'step' is not numeric."),parsed.xSteps[0]=entry}function testRange(parsed,entry){("object"!=typeof entry||$.isArray(entry))&&throwError("'range' is not an object."),$.each(entry,function(index,value){var percentage;"number"==typeof value&&(value=[value]),$.isArray(value)||throwError("'range' contains invalid value."),isNumeric(percentage="min"===index?0:"max"===index?100:parseFloat(index))&&isNumeric(value[0])||throwError("'range' value isn't numeric."),parsed.xPct.push(percentage),
parsed.xVal.push(value[0]),percentage?parsed.xSteps.push(!isNaN(value[1])&&value[1]):isNaN(value[1])||(parsed.xSteps[0]=value[1])}),$.each(parsed.xSteps,function(i,n){if(!n)return!0;parsed.xSteps[i]=fromPercentage([parsed.xVal[i],parsed.xVal[i+1]],n)/subRangeRatio(parsed.xPct[i],parsed.xPct[i+1])})}function testStart(parsed,entry){"number"==typeof entry&&(entry=[entry]),(!$.isArray(entry)||!entry.length||2<entry.length)&&throwError("'start' option is incorrect."),parsed.handles=entry.length,parsed.start=entry}function testSnap(parsed,entry){"boolean"!=typeof(parsed.snap=entry)&&throwError("'snap' option must be a boolean.")}function testConnect(parsed,entry
){"lower"===entry&&1===parsed.handles?parsed.connect=1:"upper"===entry&&1===parsed.handles?parsed.connect=2:!0===entry&&2===parsed.handles?parsed.connect=3:!1===entry?parsed.connect=0:throwError("'connect' option was doesn't match handle count.")}function testOrientation(parsed,entry){switch(entry){case"horizontal":parsed.ort=0;break;case"vertical":parsed.ort=1;break;default:throwError("'orientation' option is invalid.")}}function testMargin(parsed,entry){2<parsed.xPct.length&&throwError("'margin' option is only supported on linear sliders."),parsed.margin=fromPercentage(parsed.xVal,entry),isNumeric(entry)||throwError("'margin' option must be numeric.")}
function testDirection(parsed,entry){switch(entry){case"ltr":parsed.dir=0;break;case"rtl":parsed.dir=1,parsed.connect=[0,2,1,3][parsed.connect];break;default:throwError("'direction' option was not recognized.")}}function testBehaviour(parsed,entry){"string"!=typeof entry&&throwError("'behaviour' must be a string containing options.");var tap=0<=entry.indexOf("tap"),extend=0<=entry.indexOf("extend"),drag=0<=entry.indexOf("drag"),fixed=0<=entry.indexOf("fixed"),snap=0<=entry.indexOf("snap");parsed.events={tap:tap||snap,extend:extend,drag:drag,fixed:fixed,snap:snap}}function testSerialization(parsed,entry,sliders){parsed.ser=[entry.lower,entry.upper],
parsed.formatting=new Format(entry.format),$.each(parsed.ser,function(i,a){$.isArray(a)||throwError("'serialization."+(i?"upper":"lower")+"' must be an array."),$.each(a,function(){this instanceof Link||throwError("'serialization."+(i?"upper":"lower")+"' can only contain Link instances."),this.N=i,this.obj=sliders,this.scope=this.scope||sliders,this.formatting=new Format($.extend({},entry.format,this.formatting))})}),parsed.dir&&1<parsed.handles&&parsed.ser.reverse()}function addHandle(options,index){var handle=$("<div><div/></div>").addClass(Classes[2]),additions=["-lower","-upper"];return options.dir&&additions.reverse(),handle.children().addClass(
Classes[3]+" "+Classes[3]+additions[index]),handle}function addElement(handle,link){return link.el&&(link=new Link({target:$(link.el).clone().appendTo(handle),method:link.method,format:link.formatting},!0)),link}function addElements(elements,handle,formatting){var index,list=[];for(list.push(new Link({format:formatting},!0)),index=0;index<elements.length;index++)list.push(addElement(handle,elements[index]));return list}function closure(target,options,originalOptions){var $Base,$Serialization,$Handles,$Target=$(target),$Locations=[-1,-1];function baseSize(){return $Base[["width","height"][options.ort]]()}function fireEvents(events){var index,values=[
$Target.val()];for(index=0;index<events.length;index++)$Target.trigger(events[index],values)}function setHandle(handle,to,delimit){var n=handle[0]!==$Handles[0][0]?1:0,lower=$Locations[0]+options.margin,upper=$Locations[1]-options.margin;return delimit&&1<$Handles.length&&(to=n?Math.max(to,lower):Math.min(to,upper)),to<100&&(to=getStep(options,to)),(to=limit(parseFloat(to.toFixed(7))))===$Locations[n]?1!==$Handles.length&&((to===lower||to===upper)&&0):(handle.css(options.style,to+"%"),handle.is(":first-child")&&handle.toggleClass(Classes[17],50<to),$Locations[n]=to,options.dir&&(to=100-to),$($Serialization[n]).each(function(){this.write(options,to,
handle.children(),$Target)}),!0)}function jump(handle,to,instant){instant||addClassFor($Target,Classes[14],300),setHandle(handle,to,!1),fireEvents(["slide","set","change"])}function attach(events,element,callback,data){return events=events.replace(/\s/g,namespace+" ")+namespace,element.on(events,function(e){var disabled=$Target.attr("disabled");if(disabled=!(null==disabled),$Target.hasClass(Classes[14])||disabled)return!1;(e=function(e){e.preventDefault();var x,y,touch=0===e.type.indexOf("touch"),mouse=0===e.type.indexOf("mouse"),pointer=0===e.type.indexOf("pointer"),event=e;return 0===e.type.indexOf("MSPointer")&&(pointer=!0),e.originalEvent&&(
e=e.originalEvent),touch&&(x=e.changedTouches[0].pageX,y=e.changedTouches[0].pageY),(mouse||pointer)&&(pointer||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),x=e.clientX+window.pageXOffset,y=e.clientY+window.pageYOffset),event.points=[x,y],event.cursor=mouse,event}(e)).calcPoint=e.points[options.ort],callback(e,data)})}function move(event,data){var positions,a,b,delimit,c,d,handles=data.handles||$Handles,state=!1,proposal=100*(event.calcPoint-data.start)/baseSize(),h=handles[0][0]!==$Handles[0][0]?1:0;a=proposal,b=data.positions,delimit=1<handles.length,c=a+b[0],
d=a+b[1],positions=delimit?(c<0&&(d+=Math.abs(c)),100<d&&(c-=d-100),[limit(c),limit(d)]):[c,d],state=setHandle(handles[0],positions[h],1===handles.length),1<handles.length&&(state=setHandle(handles[1],positions[h?0:1],!1)||state),state&&fireEvents(["slide"])}function end(event){$("."+Classes[15]).removeClass(Classes[15]),event.cursor&&$("body").css("cursor","").off(namespace),doc.off(namespace),$Target.removeClass(Classes[12]),fireEvents(["set","change"])}function start(event,data){1===data.handles.length&&data.handles[0].children().addClass(Classes[15]),event.stopPropagation(),attach(actions.move,doc,move,{start:event.calcPoint,handles:data.handles,
positions:[$Locations[0],$Locations[$Handles.length-1]]}),attach(actions.end,doc,end,null),event.cursor&&($("body").css("cursor",$(event.target).css("cursor")),1<$Handles.length&&$Target.addClass(Classes[12]),$("body").on("selectstart"+namespace,!1))}function tap(event){var to,location=event.calcPoint,total=0;event.stopPropagation(),$.each($Handles,function(){total+=this.offset()[options.style]}),total=location<total/2||1===$Handles.length?0:1,to=100*(location-=$Base.offset()[options.style])/baseSize(),jump($Handles[total],to,options.events.snap),options.events.snap&&start(event,{handles:[$Handles[total]]})}function edge(event){
var i=event.calcPoint<$Base.offset()[options.style],to=i?0:100;i=i?0:$Handles.length-1,jump($Handles[i],to,!1)}if(!$Target.is(":empty"))throw new Error("Slider was already initialized.");$Base=function(options,target){return target.addClass([Classes[0],Classes[8+options.dir],Classes[4+options.ort]].join(" ")),$("<div/>").appendTo(target).addClass(Classes[1])}(options,$Target),$Handles=function(options,base){var index,handles=[];for(index=0;index<options.handles;index++)handles.push(addHandle(options,index).appendTo(base));return handles}(options,$Base),$Serialization=function(options,handles){var index,links=[];for(index=0;index<options.handles;index++
)links[index]=addElements(options.ser[index],handles[index].children(),options.formatting);return links}(options,$Handles),function(connect,target,handles){switch(connect){case 1:target.addClass(Classes[7]),handles[0].addClass(Classes[6]);break;case 3:handles[1].addClass(Classes[6]);case 2:handles[0].addClass(Classes[7]);case 0:target.addClass(Classes[6])}}(options.connect,$Target,$Handles),function(behaviour){var i,drag;if(!behaviour.fixed)for(i=0;i<$Handles.length;i++)attach(actions.start,$Handles[i].children(),start,{handles:[$Handles[i]]});behaviour.tap&&attach(actions.start,$Base,tap,{handles:$Handles}),behaviour.extend&&($Target.addClass(Classes[16]),
behaviour.tap&&attach(actions.start,$Target,edge,{handles:$Handles})),behaviour.drag&&(drag=$Base.find("."+Classes[7]).addClass(Classes[10]),behaviour.fixed&&(drag=drag.add($Base.children().not(drag).children())),attach(actions.start,drag,start,{handles:$Handles}))}(options.events),target.vSet=function(values,callback,link,update,animate){var i,to;for(options.dir&&1<options.handles&&values.reverse(),animate&&addClassFor($Target,Classes[14],300),i=0;i<(1<$Handles.length?3:1);i++)!1!==(to=(to=link||$Serialization[i%2][0]).valueOf(values[i%2]))&&(to=toStepping(options,to),options.dir&&(to=100-to),!0!==setHandle($Handles[i%2],to,!0)&&$($Serialization[i%2]).each(
function(){this.write(options,$Locations[i%2],$Handles[i%2].children(),$Target,update)}));return!0===callback&&fireEvents(["set"]),this},target.vGet=function(){var i,retour=[];for(i=0;i<options.handles;i++)retour[i]=$Serialization[i][0].saved;return 1===retour.length?retour[0]:options.dir&&1<options.handles?retour.reverse():retour},target.destroy=function(){return $.each($Serialization,function(){$.each(this,function(){this.target&&this.target.off(namespace)})}),$(this).off(namespace).removeClass(Classes.join(" ")).empty(),originalOptions},$Target.val(options.start)}function initialize(originalOptions){if(this.length){var options=function(options,sliders){
var tests,parsed={xPct:[],xVal:[],xSteps:[!1],margin:0};return tests={step:{r:!1,t:testStep},range:{r:!0,t:testRange},start:{r:!0,t:testStart},snap:{r:!1,t:testSnap},connect:{r:!0,t:testConnect},orientation:{r:!1,t:testOrientation},margin:{r:!1,t:testMargin},direction:{r:!0,t:testDirection},behaviour:{r:!0,t:testBehaviour},serialization:{r:!0,t:testSerialization}},(options=$.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},options)).serialization=$.extend({lower:[],upper:[],format:{}},options.serialization),$.each(tests,function(name,test){if(void 0===options[name]){if(!test.r)return!0;throwError("'"+name+"' is required.")}test.t(
parsed,options[name],sliders)}),parsed.style=parsed.ort?"top":"left",parsed}(originalOptions,this);return this.each(function(){closure(this,options,originalOptions)})}}Format.prototype.v=function(a){return this.settings[a]},Format.prototype.to=function(number){function reverse(a){return a.split("").reverse().join("")}var negative="",preNegative="",base="",mark="";return(number=this.v("encoder")(number))<0&&(negative=this.v("negative"),preNegative=this.v("negativeBefore")),number=(number=Math.abs(number).toFixed(this.v("decimals")).toString()).split("."),0===parseFloat(number)&&(number[0]="0"),base=this.v("thousand")?reverse((base=reverse(number[0]).match(
/.{1,3}/g)).join(reverse(this.v("thousand")))):number[0],this.v("mark")&&1<number.length&&(mark=this.v("mark")+number[1]),preNegative+this.v("prefix")+negative+base+mark+this.v("postfix")},Format.prototype.from=function(input){function esc(s){return s.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var isNeg;return null!=input&&(isNeg=(input=input.toString()).replace(new RegExp("^"+esc(this.v("negativeBefore"))),""),isNeg=input!==isNeg?(input=isNeg,"-"):"",input=input.replace(new RegExp("^"+esc(this.v("prefix"))),""),this.v.negative&&(isNeg="",input=input.replace(new RegExp("^"+esc(this.v("negative"))),"-")),input=input.replace(new RegExp(esc(this.v("postfix")
)+"$"),"").replace(new RegExp(esc(this.v("thousand")),"g"),"").replace(this.v("mark"),"."),input=this.v("decoder")(parseFloat(isNeg+input)),!isNaN(input)&&input)},Link.prototype.write=function(options,value,handle,slider,update){this.update&&!1===update||(value=function(options,value){if(100<=value)return options.xVal.slice(-1)[0];for(var pa,j=1;value>=options.xPct[j];)j++;return function(range,value){return value*(range[1]-range[0])/100+range[0]}([options.xVal[j-1],options.xVal[j]],(value-(pa=options.xPct[j-1]))*subRangeRatio(pa,options.xPct[j]))}(options,value),value=this.format(value),this.saved=value,"function"==typeof this.method?this.method.call(
this.target[0]||slider[0],value,handle,slider):this.target[this.method](value,handle,slider))},Link.prototype.format=function(a){return this.formatting.to(a)},Link.prototype.valueOf=function(a){return this.formatting.from(a)},$.noUiSlider={Link:Link},$.fn.noUiSlider=function(options,re){return(re?function(options){return this.each(function(){var values=$(this).val(),originalOptions=this.destroy(),newOptions=$.extend({},originalOptions,options);$(this).noUiSlider(newOptions),originalOptions.start===newOptions.start&&$(this).val(values)})}:initialize).call(this,options)},$.fn.val=function(){var set,link,update,animate,args=Array.prototype.slice.call(arguments,
0);return args.length?("object"==typeof args[1]?(set=args[1].set,link=args[1].link,update=args[1].update,animate=args[1].animate):!0===args[1]&&(set=!0),this.each(function(){var a;$(this).hasClass(Classes[0])?this.vSet((a=args[0],$.isArray(a)?a:[a]),set,link,update,animate):$val.apply($(this),args)})):this.hasClass(Classes[0])?this[0].vGet():$val.apply(this)}}),function(){var root,previous_async,async={};function only_once(fn){var called=!1;return function(){if(called)throw new Error("Callback was already called.");called=!0,fn.apply(root,arguments)}}null!=(root=this)&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,
async};var _each=function(arr,iterator){if(arr.forEach)return arr.forEach(iterator);for(var i=0;i<arr.length;i+=1)iterator(arr[i],i,arr)},_map=function(arr,iterator){if(arr.map)return arr.map(iterator);var results=[];return _each(arr,function(x,i,a){results.push(iterator(x,i,a))}),results},_keys=function(obj){if(Object.keys)return Object.keys(obj);var keys=[];for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k);return keys};"undefined"!=typeof process&&process.nextTick?(async.nextTick=process.nextTick,"undefined"!=typeof setImmediate?async.setImmediate=function(fn){setImmediate(fn)}:async.setImmediate=async.nextTick):(
"function"==typeof setImmediate?async.nextTick=function(fn){setImmediate(fn)}:async.nextTick=function(fn){setTimeout(fn,0)},async.setImmediate=async.nextTick),async.each=function(arr,iterator,callback){if(callback=callback||function(){},!arr.length)return callback();var completed=0;_each(arr,function(x){iterator(x,only_once(function(err){err?(callback(err),callback=function(){}):(completed+=1)>=arr.length&&callback(null)}))})},async.forEach=async.each,async.eachSeries=function(arr,iterator,callback){if(callback=callback||function(){},!arr.length)return callback();var completed=0,iterate=function(){iterator(arr[completed],function(err){err?(callback(err),
callback=function(){}):(completed+=1)>=arr.length?callback(null):iterate()})};iterate()},async.forEachSeries=async.eachSeries,async.eachLimit=function(arr,limit,iterator,callback){_eachLimit(limit).apply(null,[arr,iterator,callback])},async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){if(callback=callback||function(){},!arr.length||limit<=0)return callback();var completed=0,started=0,running=0;!function replenish(){if(completed>=arr.length)return callback();for(;running<limit&&started<arr.length;)running+=1,iterator(arr[(started+=1)-1],function(err){err?(callback(err),callback=function(){}):(running-=1,(
completed+=1)>=arr.length?callback():replenish())})}()}},doParallel=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args))}},doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args))}},_asyncMap=function(eachfn,arr,iterator,callback){var results=[];eachfn(arr=_map(arr,function(x,i){return{index:i,value:x}}),function(x,callback){iterator(x.value,function(err,v){results[x.index]=v,callback(err)})},function(err){callback(err,results)})};async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),
async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback)};var _mapLimit=function(limit){return function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args))}}(limit,_asyncMap)};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})},async.inject=async.reduce,async.foldl=async.reduce,async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse();async.reduce(reversed,
memo,iterator,callback)},async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];eachfn(arr=_map(arr,function(x,i){return{index:i,value:x}}),function(x,callback){iterator(x.value,function(v){v&&results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.filter=doParallel(_filter),async.filterSeries=doSeries(_filter),async.select=async.filter,async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];eachfn(arr=_map(arr,function(x,i){return{index:i,value:x}}),function(x,callback){
iterator(x.value,function(v){v||results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.reject=doParallel(_reject),async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){result?(main_callback(x),main_callback=function(){}):callback()})},function(err){main_callback()})};async.detect=doParallel(_detect),async.detectSeries=doSeries(_detect),async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v&&(main_callback(!0),
main_callback=function(){}),callback()})},function(err){main_callback(!1)})},async.any=async.some,async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){v||(main_callback(!1),main_callback=function(){}),callback()})},function(err){main_callback(!0)})},async.all=async.every,async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err):callback(null,{value:x,criteria:criteria})})},function(err,results){if(err)return callback(err);callback(null,_map(results.sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:b<a?1:0
}),function(x){return x.value}))})},async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks);if(!keys.length)return callback(null);var results={},listeners=[],addListener=function(fn){listeners.unshift(fn)},taskComplete=function(){_each(listeners.slice(0),function(fn){fn()})};addListener(function(){_keys(results).length===keys.length&&(callback(null,results),callback=function(){})}),_each(keys,function(k){var task=tasks[k]instanceof Function?[tasks[k]]:tasks[k],taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1&&(args=args[0]),err){var safeResults={};_each(_keys(results),function(
rkey){safeResults[rkey]=results[rkey]}),safeResults[k]=args,callback(err,safeResults),callback=function(){}}else results[k]=args,async.setImmediate(taskComplete)},requires=task.slice(0,Math.abs(task.length-1))||[],ready=function(){return iterator=function(a,x){return a&&results.hasOwnProperty(x)},memo=!0,((arr=requires).reduce?arr.reduce(iterator,memo):(_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo))&&!results.hasOwnProperty(k);var arr,iterator,memo};if(ready())task[task.length-1](taskCallback,results);else{var listener=function(){ready()&&(!function(fn){for(var i=0;i<listeners.length;i+=1)if(listeners[i]===fn)return listeners.splice(i,1)}(
listener),task[task.length-1](taskCallback,results))};addListener(listener)}})},async.waterfall=function(tasks,callback){if(callback=callback||function(){},tasks.constructor!==Array){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length)return callback();var wrapIterator=function(iterator){return function(err){if(err)callback.apply(null,arguments),callback=function(){};else{var args=Array.prototype.slice.call(arguments,1),next=iterator.next();next?args.push(wrapIterator(next)):args.push(callback),async.setImmediate(function(){iterator.apply(null,args)})}}};wrapIterator(async.iterator(tasks))()}
;var _parallel=function(eachfn,tasks,callback){if(callback=callback||function(){},tasks.constructor===Array)eachfn.map(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)},async.parallelLimit=function(tasks,
limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)},async.series=function(tasks,callback){if(callback=callback||function(){},tasks.constructor===Array)async.mapSeries(tasks,function(fn,callback){fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback);else{var results={};async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})}},async.iterator=function(tasks){
var makeCallback=function(index){var fn=function(){return tasks.length&&tasks[index].apply(null,arguments),fn.next()};return fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null},fn};return makeCallback(0)},async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}};var _concat=function(eachfn,arr,fn,callback){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]),cb(err)})},function(err){callback(err,r)})};async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,
callback){test()?iterator(function(err){if(err)return callback(err);async.whilst(test,iterator,callback)}):callback()},async.doWhilst=function(iterator,test,callback){iterator(function(err){if(err)return callback(err);test()?async.doWhilst(iterator,test,callback):callback()})},async.until=function(test,iterator,callback){test()?callback():iterator(function(err){if(err)return callback(err);async.until(test,iterator,callback)})},async.doUntil=function(iterator,test,callback){iterator(function(err){if(err)return callback(err);test()?callback():async.doUntil(iterator,test,callback)})},async.queue=function(worker,concurrency){function _insert(q,data,pos,callback
){data.constructor!==Array&&(data=[data]),_each(data,function(task){var item={data:task,callback:"function"==typeof callback?callback:null};pos?q.tasks.unshift(item):q.tasks.push(item),q.saturated&&q.tasks.length===concurrency&&q.saturated(),async.setImmediate(q.process)})}void 0===concurrency&&(concurrency=1);var workers=0,q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,push:function(data,callback){_insert(q,data,!1,callback)},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){if(workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift();q.empty&&0===q.tasks.length&&q.empty(),workers+=1
;var cb=only_once(function(){workers-=1,task.callback&&task.callback.apply(task,arguments),q.drain&&q.tasks.length+workers===0&&q.drain(),q.process()});worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers}};return q},async.cargo=function(worker,payload){var working=!1,tasks=[],cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,push:function(data,callback){data.constructor!==Array&&(data=[data]),_each(data,function(task){tasks.push({data:task,callback:"function"==typeof callback?callback:null}),cargo.saturated&&tasks.length===payload&&cargo.saturated()}),async.setImmediate(cargo.process)},
process:function process(){if(!working)if(0!==tasks.length){var ts="number"==typeof payload?tasks.splice(0,payload):tasks.splice(0),ds=_map(ts,function(task){return task.data});cargo.empty&&cargo.empty(),working=!0,worker(ds,function(){working=!1;var args=arguments;_each(ts,function(data){data.callback&&data.callback.apply(null,args)}),process()})}else cargo.drain&&cargo.drain()},length:function(){return tasks.length},running:function(){return working}};return cargo};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1)
;"undefined"!=typeof console&&(err?console.error&&console.error(err):console[name]&&_each(args,function(x){console[name](x)}))}]))}};async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={};hasher=hasher||function(x){return x};var memoized=function(){var args=Array.prototype.slice.call(arguments),callback=args.pop(),key=hasher.apply(null,args);key in memo?callback.apply(null,memo[key]):key in queues?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++)q[i].apply(null,arguments)}])
))};return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}},async.times=function(count,iterator,callback){for(var counter=[],i=0;i<count;i++)counter.push(i);return async.map(counter,iterator,callback)},async.timesSeries=function(count,iterator,callback){for(var counter=[],i=0;i<count;i++)counter.push(i);return async.mapSeries(counter,iterator,callback)},async.compose=function(){var fns=Array.prototype.reverse.call(arguments);return function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();async.reduce(fns,args,function(newargs,fn,
cb){fn.apply(that,newargs.concat([function(){var err=arguments[0],nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}};var _applyEach=function(eachfn,fns){var go=function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)};if(2<arguments.length){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args)}return go};async.applyEach=doParallel(_applyEach),async.applyEachSeries=doSeries(_applyEach),async.forever=function(fn,callback){!function next(err){
if(err){if(callback)return callback(err);throw err}fn(next)}()},void 0!==define&&define.amd?define("async",[],function(){return async}):"undefined"!=typeof module&&module.exports?module.exports=async:root.async=async}(),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("moment",b):a.moment=b()}(this,function(){"use strict";function a(){return Rd.apply(null,arguments)}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c
)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Da(a,b,c,d,!0).utc()}function j(a){return null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),
a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),0<Td.length)for(c in Td)m(e=b[d=Td[c]])||(a[d]=e);return a}function o(b){n(this,b),
this._d=new Date(null!=b._d?b._d.getTime():NaN),!1===Ud&&(Ud=!0,a.updateOffset(this),Ud=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return a<0?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(){}function u(a){return a?a.toLowerCase().replace("_","-"):a}function w(a){var b=null;if(!Vd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Sd._abbr,require("./locale/"+a),x(b)}catch(c){}return Vd[a]}
function x(a,b){var c;return a&&((c=m(b)?z(a):y(a,b))&&(Sd=c)),Sd._abbr}function y(a,b){return null!==b?(b.abbr=a,Vd[a]=Vd[a]||new t,Vd[a].set(b),x(a),Vd[a]):(delete Vd[a],null)}function z(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Sd;if(!c(a)){if(b=w(a))return b;a=[a]}return function(a){for(var b,c,d,e,f=0;f<a.length;){for(b=(e=u(a[f]).split("-")).length,c=(c=u(a[f+1]))?c.split("-"):null;0<b;){if(d=w(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}(a)}function A(a,b){var c=a.toLowerCase();Wd[c]=Wd[c+"s"]=Wd[b]=a}function B(a){return"string"==typeof a?Wd[a]||Wd[a.toLowerCase()]:void 0
}function C(a){var b,c,d={};for(c in a)f(a,c)&&((b=B(c))&&(d[b]=a[c]));return d}function D(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function E(b,c){return function(d){return null!=d?(G(this,b,d),a.updateOffset(this,c),this):F(this,b)}}function F(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function G(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(D(this[a=B(a)]))return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length;return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString(
).substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&($d[a]=e),b&&($d[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&($d[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),Zd[b]=Zd[b]||function(a){var b,c,d=a.match(Xd);for(b=0,c=d.length;b<c;b++)$d[d[b]]?d[b]=$d[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;b<c;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}(b),Zd[b](a)):a.localeData().invalidDate()}
function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Yd.lastIndex=0;0<=d&&Yd.test(a);)a=a.replace(Yd,c),Yd.lastIndex=0,d-=1;return a}function O(a,b,c){qe[a]=D(b)?b:function(a,d){return a&&c?c:b}}function P(a,b){return f(qe,a)?qe[a](b._strict,b._locale):new RegExp(function(a){return R(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}(a))}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)re[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){
d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&f(re,a)&&re[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function Z(a,b){var c;return a.isValid()&&("string"==typeof b&&"number"!=typeof(b=a.localeData().monthsParse(b))||(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c))),a}function $(b){return null!=b?(Z(this,b),a.updateOffset(this,!0),this):F(this,"Month")}function ca(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(
a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=R(d[b]),e[b]=R(e[b]),f[b]=R(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")$","i")}function da(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[te]<0||11<c[te]?te:c[ue]<1||c[ue]>V(c[se],c[te])?ue:c[ve]<0||24<c[ve]||24===c[ve]&&(0!==c[we]||0!==c[xe]||0!==c[ye])?ve:c[we]<0||59<c[we]?we:c[xe]<0||59<c[xe]?xe:c[ye]<0||999<c[ye]?ye:-1,j(a)._overflowDayOfYear&&(b<se||ue<b)&&(b=ue),j(a)._overflowWeeks&&-1===b&&(b=ze),j(a)._overflowWeekday&&-1===b&&(
b=Ae),j(a).overflow=b),a}function ea(b){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function fa(a,b){var c=!0;return g(function(){return c&&(ea(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ha(a){var b,c,d,e,f,g,h=a._i,i=He.exec(h)||Ie.exec(h);if(i){for(j(a).iso=!0,b=0,c=Ke.length;b<c;b++)if(Ke[b][1].exec(i[1])){e=Ke[b][0],d=!1!==Ke[b][2];break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Le.length;b<c;b++)if(Le[b][1].exec(i[3])){f=(i[2]||" ")+Le[b][0];break}if(null==f)return void(
a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Je.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),wa(a)}else a._isValid=!1}function ka(a){var b=new Date(Date.UTC.apply(null,arguments));return a<100&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function la(a){return ma(a)?366:365}function ma(a){return a%4==0&&a%100!=0||a%400==0}function oa(a,b,c){var d=7+b-c;return-((7+ka(a,0,d).getUTCDay()-b)%7)+d-1}function pa(a,b,c,d,e){var f,g,j=1+7*(b-1)+(7+c-d)%7+oa(a,d,e);return g=j<=0?la(f=a-1)+j:j>la(a)?(f=a+1,j-la(a)):(f=a,j),{year:f,dayOfYear:g}}function qa(a,b,c){var d,e,f=oa(a.year(),b,c),g=Math.floor((
a.dayOfYear()-f-1)/7)+1;return g<1?d=g+ra(e=a.year()-1,b,c):g>ra(a.year(),b,c)?(d=g-ra(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ra(a,b,c){var d=oa(a,b,c),e=oa(a+1,b,c);return(la(a)-d+e)/7}function sa(a,b,c){return null!=a?a:null!=b?b:c}function ta(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ua(a){var b,c,d,e,f=[];if(!a._d){for(d=ta(a),a._w&&null==a._a[ue]&&null==a._a[te]&&function(a){var b,c,d,e,f,g,h,i;null!=(b=a._w).GG||null!=b.W||null!=b.E?(f=1,g=4,c=sa(b.GG,a._a[se],qa(Ea(),1,4).year),d=sa(b.W,1),((e=sa(b.E,1))<1||7<e)&&(
i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=sa(b.gg,a._a[se],qa(Ea(),f,g).year),d=sa(b.w,1),null!=b.d?((e=b.d)<0||6<e)&&(i=!0):null!=b.e?(e=b.e+f,(b.e<0||6<b.e)&&(i=!0)):e=f),d<1||d>ra(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=pa(c,d,e,f,g),a._a[se]=h.year,a._dayOfYear=h.dayOfYear)}(a),a._dayOfYear&&(e=sa(a._a[se],d[se]),a._dayOfYear>la(e)&&(j(a)._overflowDayOfYear=!0),c=ka(e,0,a._dayOfYear),a._a[te]=c.getUTCMonth(),a._a[ue]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ve]&&0===a._a[we]&&0===a._a[xe]&&0===a._a[ye]&&(a._nextDay=!0,a._a[ve]=0),
a._d=(a._useUTC?ka:function(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<100&&0<=a&&isFinite(h.getFullYear())&&h.setFullYear(a),h}).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ve]=24)}}function wa(b){if(b._f!==a.ISO_8601){b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=N(b._f,b._locale).match(Xd)||[],c=0;c<e.length;c++)f=e[c],(d=(h.match(P(f,b))||[])[0])&&(0<(g=h.substr(0,h.indexOf(d))).length&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),$d[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),U(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b
).charsLeftOver=i-k,0<h.length&&j(b).unusedInput.push(h),!0===j(b).bigHour&&b._a[ve]<=12&&0<b._a[ve]&&(j(b).bigHour=void 0),b._a[ve]=function(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):(null!=a.isPM&&((d=a.isPM(c))&&b<12&&(b+=12),d||12!==b||(b=0)),b)}(b._locale,b._a[ve],b._meridiem),ua(b),da(b)}else ha(b)}function Ba(a){var b=a._i,e=a._f;return a._locale=a._locale||z(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(da(b)):(c(e)?function(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,a._d=new Date(NaN);for(e=0;e<a._f.length;e++)f=0,b=n({},a),
null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],wa(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||f<d)&&(d=f,c=b));g(a,c||b)}(a):e?wa(a):d(b)?a._d=b:Ca(a),k(a)||(a._d=null),a))}function Ca(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(+f):"string"==typeof f?function(b){var c=Me.exec(b._i);null!==c?b._d=new Date(+c[1]):(ha(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ua(b)):"object"==typeof f?function(a){if(!a._d){var b=C(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],
function(a){return a&&parseInt(a,10)}),ua(a)}}(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Da(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,function(a){var b=new o(da(Ba(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}(f)}function Ea(a,b,c,d){return Da(a,b,c,d,!1)}function Fa(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ea();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Ia(a){var b=C(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,
i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=z(),this._bubble()}function Ja(a){return a instanceof Ia}function Ka(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function La(a,b){var c=(b||"").match(a)||[],e=((c[c.length-1]||[])+"").match(Re)||["-",0,0],f=60*e[1]+r(e[2]);return"+"===e[0]?f:-f}function Ma(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?+b:+Ea(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ea(b).local()}function Na(a){return 15*-Math.round(
a._d.getTimezoneOffset()/15)}function Ya(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Za(a,b){var c,d,e,g=a,h=null;return Ja(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Se.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[ue])*c,h:r(h[ve])*c,m:r(h[we])*c,s:r(h[xe])*c,ms:r(h[ye])*c}):(h=Te.exec(a))?(c="-"===h[1]?-1:1,g={y:$a(h[2],c),M:$a(h[3],c),d:$a(h[4],c),h:$a(h[5],c),m:$a(h[6],c),s:$a(h[7],c),w:$a(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=function(a,b){var c;return a.isValid()&&b.isValid()?(b=Ma(b,a),a.isBefore(b)?c=_a(a,b):((c=_a(b,a)
).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}(Ea(g.from),Ea(g.to)),(g={}).ms=e.milliseconds,g.M=e.months),d=new Ia(g),Ja(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function $a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function _a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function bb(a,b){return function(c,d){var f;return null===d||isNaN(+d)||(function(a,b){Ge[a]||(ea(b),Ge[a]=!0)}(b,
"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),cb(this,Za(c="string"==typeof c?+c:c,d),a),this}}function cb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;b.isValid()&&(e=null==e||e,f&&b._d.setTime(+b._d+f*d),g&&G(b,"Date",F(b,"Date")+g*d),h&&Z(b,F(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function ub(a){var b;return void 0===a?this._locale._abbr:(null!=(b=z(a))&&(this._locale=b),this)}function vb(){return this._locale}function Ib(a,b){J(0,[a,a.length],0,b)}function Nb(a,b,c,d,e){var f;return null==a?qa(this,d,e).year:((f=ra(a,d,e))<b&&(b=f),function(a,b,c,d,e){var f=pa(a,b,c,d,e),g=ka(f.year,0
,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}.call(this,a,b,c,d,e))}function cc(){return this.hours()%12||12}function dc(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function ec(a,b){return b._meridiemParse}function hc(a,b){b[ye]=r(1e3*("0."+a))}function qc(a){return a}function uc(a,b,c,d){var e=z(),f=h().set(d,b);return e[c](f,a)}function vc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return uc(a,b,c,e);var f,g=[];for(f=0;f<d;f++)g[f]=uc(a,f,c,e);return g}function Cc(a,b,c,d){var e=Za(b,c)
;return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Fc(a){return a<0?Math.floor(a):Math.ceil(a)}function Hc(a){return 4800*a/146097}function Ic(a){return 146097*a/4800}function Lc(a){return function(){return this.as(a)}}function Nc(a){return function(){return this._data[a]}}function Tc(){var a,b,d=If(this._milliseconds)/1e3,e=If(this._days),f=If(this._months);b=q((a=q(d/60))/60),d%=60,a%=60;var g=q(f/12),h=f%=12,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(m<0?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}function Vc(a,b,c){
return"m"===c?b?"":"":"h"===c?b?"":"":a+" "+function(a,b){var c=a.split("_");return b%10==1&&b%100!=11?c[0]:2<=b%10&&b%10<=4&&(b%100<10||20<=b%100)?c[1]:c[2]}({mm:b?"__":"__",hh:b?"__":"__",dd:"__",MM:"__",yy:"__"}[c],+a)}function Wc(a,b,c){return a+" "+function(a,b){return 2===b?function(a){var b={m:"v",b:"v",d:"z"};return void 0===b[a.charAt(0)]?a:b[a.charAt(0)]+a.substring(1)}(a):a}({mm:"munutenn",MM:"miz",dd:"devezh"}[c],a)}function _c(a,b,c){var d=a+" ";switch(c){case"m":
return b?"jedna minuta":"jedne minute";case"mm":return d+(1===a?"minuta":2===a||3===a||4===a?"minute":"minuta");case"h":return b?"jedan sat":"jednog sata";case"hh":return d+(1===a?"sat":2===a||3===a||4===a?"sata":"sati");case"dd":return d+(1===a?"dan":"dana");case"MM":return d+(1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci");case"yy":return d+(1===a?"godina":2===a||3===a||4===a?"godine":"godina")}}function ad(a){return 1<a&&a<5&&1!=~~(a/10)}function bd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pr sekund":"pr sekundami";case"m":return b?"minuta":d?"minutu":"minutou";case"mm":return b||d?e+(ad(a)?"minuty":"minut"):e+"minutami";case"h":
return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(ad(a)?"hodiny":"hodin"):e+"hodinami";case"d":return b||d?"den":"dnem";case"dd":return b||d?e+(ad(a)?"dny":"dn"):e+"dny";case"M":return b||d?"msc":"mscem";case"MM":return b||d?e+(ad(a)?"msce":"msc"):e+"msci";case"y":return b||d?"rok":"rokem";case"yy":return b||d?e+(ad(a)?"roky":"let"):e+"lety"}}function cd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}
function dd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}function ed(a,b,c,d){var e={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[a+" minuti",a+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[a+" tunni",a+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[a+" kuu",a+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[a+" aasta",a+" aastat"]}
;return b?e[c][2]?e[c][2]:e[c][1]:d?e[c][0]:e[c][1]}function fd(a,b,c,d){var e="";switch(c){case"s":return d?"muutaman sekunnin":"muutama sekunti";case"m":return d?"minuutin":"minuutti";case"mm":e=d?"minuutin":"minuuttia";break;case"h":return d?"tunnin":"tunti";case"hh":e=d?"tunnin":"tuntia";break;case"d":return d?"pivn":"piv";case"dd":e=d?"pivn":"piv";break;case"M":return d?"kuukauden":"kuukausi";case"MM":e=d?"kuukauden":"kuukautta";break;case"y":return d?"vuoden":"vuosi";case"yy":e=d?"vuoden":"vuotta"}return function(a,b){return a<10?b?fg[a]:eg[a]:a}(a,d)+" "+e}function hd(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute"
;case"mm":return d+(1===a?"minuta":2===a||3===a||4===a?"minute":"minuta");case"h":return b?"jedan sat":"jednog sata";case"hh":return d+(1===a?"sat":2===a||3===a||4===a?"sata":"sati");case"dd":return d+(1===a?"dan":"dana");case"MM":return d+(1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci");case"yy":return d+(1===a?"godina":2===a||3===a||4===a?"godine":"godina")}}function id(a,b,c,d){var e=a;switch(c){case"s":return d||b?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(d||b?" perc":" perce");case"mm":return e+(d||b?" perc":" perce");case"h":return"egy"+(d||b?" ra":" rja");case"hh":return e+(d||b?" ra":" rja");case"d":return"egy"+(
d||b?" nap":" napja");case"dd":return e+(d||b?" nap":" napja");case"M":return"egy"+(d||b?" hnap":" hnapja");case"MM":return e+(d||b?" hnap":" hnapja");case"y":return"egy"+(d||b?" v":" ve");case"yy":return e+(d||b?" v":" ve")}return""}function jd(a){return(a?"":"[mlt] ")+"["+pg[this.day()]+"] LT[-kor]"}function kd(a){return a%100==11||a%10!=1}function ld(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nokkrar sekndur":"nokkrum sekndum";case"m":return b?"mnta":"mntu";case"mm":return kd(a)?e+(b||d?"mntur":"mntum"):b?e+"mnta":e+"mntu";case"hh":return kd(a)?e+(b||d?"klukkustundir":"klukkustundum"):e+"klukkustund";case"d":
return b?"dagur":d?"dag":"degi";case"dd":return kd(a)?b?e+"dagar":e+(d?"daga":"dgum"):b?e+"dagur":e+(d?"dag":"degi");case"M":return b?"mnuur":d?"mnu":"mnui";case"MM":return kd(a)?b?e+"mnuir":e+(d?"mnui":"mnuum"):b?e+"mnuur":e+(d?"mnu":"mnui");case"y":return b||d?"r":"ri";case"yy":return kd(a)?e+(b||d?"r":"rum"):e+(b||d?"r":"ri")}}function md(a,b,c,d){var e={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return b?e[c][0]:e[c][1]}function pd(a){if(a=parseInt(a,10),isNaN(a))return!1;if(a<0)return!0;if(a<10)return 4<=a&&a<=7;if(a<100){
var b=a%10;return pd(0===b?a/10:b)}if(a<1e4){for(;10<=a;)a/=10;return pd(a)}return pd(a/=1e3)}function rd(a,b,c,d){return b?td(c)[0]:d?td(c)[1]:td(c)[2]}function sd(a){return a%10==0||10<a&&a<20}function td(a){return rg[a].split("_")}function ud(a,b,c,d){var e=a+" ";return 1===a?e+rd(0,b,c[0],d):b?e+(sd(a)?td(c)[1]:td(c)[0]):d?e+td(c)[1]:e+(sd(a)?td(c)[1]:td(c)[2])}function vd(a,b,c){return c?b%10==1&&11!==b?a[2]:a[3]:b%10==1&&11!==b?a[0]:a[1]}function wd(a,b,c){return a+" "+vd(sg[c],a,b)}function xd(a,b,c){return vd(sg[c],a,b)}function zd(a,b,c,d){var e="";if(b)switch(c){case"s":e=" ";break;case"m":e=" ";break;case"mm":e="%d ";break
;case"h":e=" ";break;case"hh":e="%d ";break;case"d":e=" ";break;case"dd":e="%d ";break;case"M":e=" ";break;case"MM":e="%d ";break;case"y":e=" ";break;case"yy":e="%d "}else switch(c){case"s":e=" ";break;case"m":e=" ";break;case"mm":e="%d ";break;case"h":e=" ";break;case"hh":e="%d ";break;case"d":e=" ";break;case"dd":e="%d ";break;case"M":e=" ";break;case"MM":e="%d ";break;case"y":e=" ";break;case"yy":e="%d "}return e.replace(/%d/i,a)}function Ad(a){return a%10<5&&1<a%10&&~~(a/10)%10!=1}function Bd(a,b,c){var d=a+" ";switch(c){case"m":
return b?"minuta":"minut";case"mm":return d+(Ad(a)?"minuty":"minut");case"h":return b?"godzina":"godzin";case"hh":return d+(Ad(a)?"godziny":"godzin");case"MM":return d+(Ad(a)?"miesice":"miesicy");case"yy":return d+(Ad(a)?"lata":"lat")}}function Cd(a,b,c){var e=" ";return(20<=a%100||100<=a&&a%100==0)&&(e=" de "),a+e+{mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[c]}function Ed(a,b,c){return"m"===c?b?"":"":a+" "+function(a,b){var c=a.split("_");return b%10==1&&b%100!=11?c[0]:2<=b%10&&b%10<=4&&(b%100<10||20<=b%100)?c[1]:c[2]}({mm:b?"__":"__",hh:"__",dd:"__",MM:"__",
yy:"__"}[c],+a)}function Fd(a){return 1<a&&a<5}function Gd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pr seknd":"pr sekundami";case"m":return b?"minta":d?"mintu":"mintou";case"mm":return b||d?e+(Fd(a)?"minty":"mint"):e+"mintami";case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(Fd(a)?"hodiny":"hodn"):e+"hodinami";case"d":return b||d?"de":"dom";case"dd":return b||d?e+(Fd(a)?"dni":"dn"):e+"dami";case"M":return b||d?"mesiac":"mesiacom";case"MM":return b||d?e+(Fd(a)?"mesiace":"mesiacov"):e+"mesiacmi";case"y":return b||d?"rok":"rokom";case"yy":return b||d?e+(Fd(a)?"roky":"rokov"):e+"rokmi"}}function Hd(a,b,c,d
){var e=a+" ";switch(c){case"s":return b||d?"nekaj sekund":"nekaj sekundami";case"m":return b?"ena minuta":"eno minuto";case"mm":return e+(1===a?b?"minuta":"minuto":2===a?b||d?"minuti":"minutama":a<5?b||d?"minute":"minutami":b||d?"minut":"minutami");case"h":return b?"ena ura":"eno uro";case"hh":return e+(1===a?b?"ura":"uro":2===a?b||d?"uri":"urama":a<5?b||d?"ure":"urami":b||d?"ur":"urami");case"d":return b||d?"en dan":"enim dnem";case"dd":return e+(1===a?b||d?"dan":"dnem":2===a?b||d?"dni":"dnevoma":b||d?"dni":"dnevi");case"M":return b||d?"en mesec":"enim mesecem";case"MM":return e+(
1===a?b||d?"mesec":"mesecem":2===a?b||d?"meseca":"mesecema":a<5?b||d?"mesece":"meseci":b||d?"mesecev":"meseci");case"y":return b||d?"eno leto":"enim letom";case"yy":return e+(1===a?b||d?"leto":"letom":2===a?b||d?"leti":"letoma":a<5?b||d?"leta":"leti":b||d?"let":"leti")}}function Kd(a,b,c,d){var e=function(a){var b=Math.floor(a%1e3/100),c=Math.floor(a%100/10),d=a%10,e="";return 0<b&&(e+=Lg[b]+"vatlh"),0<c&&(e+=(""!==e?" ":"")+Lg[c]+"maH"),0<d&&(e+=(""!==e?" ":"")+Lg[d]),""===e?"pagh":e}(a);switch(c){case"mm":return e+" tup";case"hh":return e+" rep";case"dd":return e+" jaj";case"MM":return e+" jar";case"yy":return e+" DIS"}}function Md(a,b,c,d){var e={s:[
"viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[a+" muts",a+" muts"],h:["'n ora","'iensa ora"],hh:[a+" oras",a+" oras"],d:["'n ziua","'iensa ziua"],dd:[a+" ziuas",a+" ziuas"],M:["'n mes","'iens mes"],MM:[a+" mesen",a+" mesen"],y:["'n ar","'iens ar"],yy:[a+" ars",a+" ars"]};return d?e[c][0]:b?e[c][0]:e[c][1]}function Od(a,b,c){return"m"===c?b?"":"":"h"===c?b?"":"":a+" "+function(a,b){var c=a.split("_");return b%10==1&&b%100!=11?c[0]:2<=b%10&&b%10<=4&&(b%100<10||20<=b%100)?c[1]:c[2]}({mm:b?"__":"__",hh:b?"__":"__",dd:"__",
MM:"__",yy:"__"}[c],+a)}function Qd(a){return function(){return a+""+(11===this.hours()?"":"")+"] LT"}}var Rd,Sd,Td=a.momentProperties=[],Ud=!1,Vd={},Wd={},Xd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Yd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zd={},$d={},_d=/\d/,ae=/\d\d/,be=/\d{3}/,ce=/\d{4}/,de=/[+-]?\d{6}/,ee=/\d\d?/,fe=/\d\d\d\d?/,ge=/\d\d\d\d\d\d?/,he=/\d{1,3}/,ie=/\d{1,4}/,je=/[+-]?\d{1,6}/,ke=/\d+/,le=/[+-]?\d+/,me=/Z|[+-]\d\d:?\d\d/gi,ne=/Z|[+-]\d\d(?::?\d\d)?/gi,
pe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qe={},re={},se=0,te=1,ue=2,ve=3,we=4,xe=5,ye=6,ze=7,Ae=8;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),A("month","M"),O("M",ee),O("MM",ee,ae),O("MMM",function(a,b){return b.monthsShortRegex(a)}),O("MMMM",function(a,b){return b.monthsRegex(a)}),S(["M","MM"],function(a,b){b[te]=r(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[te]=e:j(c).invalidMonth=a})
;var Be=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),De="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ee=pe,Fe=pe,Ge={},He=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ie=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Je=/Z|[+-]\d\d(?::?\d\d)?/,Ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],[
"GGGG-[W]WW",/\d{4}-W\d\d/,a.suppressDeprecationWarnings=!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Le=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Me=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=fa(
"moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),A("year","y"),O("Y",le),O("YY",ee,ae),O("YYYY",ie,ce),O("YYYYY",je,de),O("YYYYYY",je,de),S(["YYYYY","YYYYYY"],se),S("YYYY",function(b,c){c[se]=2===b.length?a.parseTwoDigitYear(b):r(b)}),S("YY",function(b,c){
c[se]=a.parseTwoDigitYear(b)}),S("Y",function(a,b){b[se]=parseInt(a,10)});var Ne=E("FullYear",!(a.parseTwoDigitYear=function(a){return r(a)+(68<r(a)?1900:2e3)}));a.ISO_8601=function(){};var Oe=fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:l()}),Pe=fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?this<a?this:a:l()});Ka("Z",":"),Ka("ZZ",""),O("Z",ne),O("ZZ",ne),S(["Z","ZZ"],function(a,b,c
){c._useUTC=!0,c._tzm=La(ne,a)});var Re=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Se=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Te=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Za.fn=Ia.prototype;var Ue=bb(1,"add"),Ve=bb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var We=fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2
],0,function(){return this.isoWeekYear()%100}),Ib("gggg","weekYear"),Ib("ggggg","weekYear"),Ib("GGGG","isoWeekYear"),Ib("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),O("G",le),O("g",le),O("GG",ee,ae),O("gg",ee,ae),O("GGGG",ie,ce),O("gggg",ie,ce),O("GGGGG",je,de),O("ggggg",je,de),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),T(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),J("Q",0,"Qo","quarter"),A("quarter","Q"),O("Q",_d),S("Q",function(a,b){b[te]=3*(r(a)-1)}),J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),O("w",ee),O("ww",ee,ae),O("W",ee),O("WW",ee,ae),T(
["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});J("D",["DD",2],"Do","date"),A("date","D"),O("D",ee),O("DD",ee,ae),O("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],ue),S("Do",function(a,b){b[ue]=r(a.match(ee)[0])});var Ye=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),O("d",ee),O("e",ee),O("E",ee),O("dd",pe),O("ddd",pe),O(
"dddd",pe),T(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_e="Su_Mo_Tu_We_Th_Fr_Sa".split("_");J("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),O("DDD",he),O("DDDD",be),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),J("H",["HH",2],0,"hour"),J("h",["hh",2],0,cc),J("hmm",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)}),J("hmmss",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)+I(
this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),dc("a",!0),dc("A",!1),A("hour","h"),O("a",ec),O("A",ec),O("H",ee),O("h",ee),O("HH",ee,ae),O("hh",ee,ae),O("hmm",fe),O("hmmss",ge),O("Hmm",fe),O("Hmmss",ge),S(["H","HH"],ve),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[ve]=r(a),j(c).bigHour=!0}),S("hmm",function(a,b,c){var d=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d)),j(c).bigHour=!0}),S("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[ve]=r(a.substr(0,d)),
b[we]=r(a.substr(d,2)),b[xe]=r(a.substr(e)),j(c).bigHour=!0}),S("Hmm",function(a,b,c){var d=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d))}),S("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d,2)),b[xe]=r(a.substr(e))});var bf=E("Hours",!0);J("m",["mm",2],0,"minute"),A("minute","m"),O("m",ee),O("mm",ee,ae),S(["m","mm"],we);var cf=E("Minutes",!1);J("s",["ss",2],0,"second"),A("second","s"),O("s",ee),O("ss",ee,ae),S(["s","ss"],xe);var ef,df=E("Seconds",!1);for(J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0
,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),O("S",he,_d),O("SS",he,ae),O("SSS",he,be),ef="SSSS";ef.length<=9;ef+="S")O(ef,ke);for(ef="S";ef.length<=9;ef+="S")S(ef,hc);var ff=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var gf=o.prototype;gf.add=Ue,gf.calendar=function(a,b){var c=a||Ea(),d=Ma(c,
this).startOf("day"),e=this.diff(d,"days",!0),f=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse",g=b&&(D(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ea(c)))},gf.clone=function(){return new o(this)},gf.diff=function(a,b,c){var d,e,f,g;return this.isValid()&&(d=Ma(a,this)).isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),"year"===(b=B(b))||"month"===b||"quarter"===b?(g=function(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return d=b-f<0?(c=a.clone().add(e-1,"months"),(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),(b-f)/(c-f)),-(e+d)}(this,
d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN},gf.endOf=function(a){return void 0===(a=B(a))||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},gf.format=function(b){var c=M(this,b||a.defaultFormat);return this.localeData().postformat(c)},gf.from=function(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},gf.fromNow=function(a){return this.from(Ea(),a)},gf.to=function(a,b){return this.isValid(
)&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},gf.toNow=function(a){return this.to(Ea(),a)},gf.get=H,gf.invalidAt=function(){return j(this).overflow},gf.isAfter=function(a,b){var c=p(a)?a:Ea(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=B(m(b)?"millisecond":b))?+c<+this:+c<+this.clone().startOf(b))},gf.isBefore=function(a,b){var c=p(a)?a:Ea(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=B(m(b)?"millisecond":b))?+this<+c:+this.clone().endOf(b)<+c)},gf.isBetween=function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)},gf.isSame=function(a,b){
var c,d=p(a)?a:Ea(a);return!(!this.isValid()||!d.isValid())&&("millisecond"===(b=B(b||"millisecond"))?+this==+d:(c=+d,+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b)))},gf.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)},gf.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)},gf.isValid=function(){return k(this)},gf.lang=We,gf.locale=ub,gf.localeData=vb,gf.max=Pe,gf.min=Oe,gf.parsingFlags=function(){return g({},j(this))},gf.set=H,gf.startOf=function(a){switch(a=B(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0)
;case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},gf.subtract=Ve,gf.toArray=function(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]},gf.toObject=function(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}},gf.toDate=function(){return this._offset?new Date(+this):this._d},gf.toISOString=function(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?D(
Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},gf.toJSON=function(){return this.isValid()?this.toISOString():"null"},gf.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},gf.unix=function(){return Math.floor(+this/1e3)},gf.valueOf=function(){return+this._d-6e4*(this._offset||0)},gf.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},gf.year=Ne,gf.isLeapYear=function(){return ma(this.year())},gf.weekYear=function(a){return Nb.call(this,a,this.week(),this.weekday(),
this.localeData()._week.dow,this.localeData()._week.doy)},gf.isoWeekYear=function(a){return Nb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)},gf.quarter=gf.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},gf.month=$,gf.daysInMonth=function(){return V(this.year(),this.month())},gf.week=gf.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},gf.isoWeek=gf.isoWeeks=function(a){var b=qa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},gf.weeksInYear=function(){var a=this.localeData()._week;return ra(this.year(),a.dow,a.doy)},gf.isoWeeksInYear=function(){
return ra(this.year(),1,4)},gf.date=Ye,gf.day=gf.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=function(a,b){return"string"!=typeof a?a:isNaN(a)?"number"==typeof(a=b.weekdaysParse(a))?a:null:parseInt(a,10)}(a,this.localeData()),this.add(a-b,"d")):b},gf.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},gf.isoWeekday=function(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN},gf.dayOfYear=function(a){var b=Math.round((this.clone(
).startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},gf.hour=gf.hours=bf,gf.minute=gf.minutes=cf,gf.second=gf.seconds=df,gf.millisecond=gf.milliseconds=ff,gf.utcOffset=function(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=La(ne,b):Math.abs(b)<16&&(b*=60),!this._isUTC&&c&&(d=Na(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?cb(this,Za(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Na(this):null!=b?this:NaN},gf.utc=function(a){
return this.utcOffset(0,a)},gf.local=function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Na(this),"m")),this},gf.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(La(me,this._i)),this},gf.hasAlignedHourOffset=function(a){return!!this.isValid()&&(a=a?Ea(a).utcOffset():0,(this.utcOffset()-a)%60==0)},gf.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},gf.isDSTShifted=function(){if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),(a=Ba(a))._a){var b=a._isUTC?h(a._a):Ea(a._a)
;this._isDSTShifted=this.isValid()&&0<s(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted},gf.isLocal=function(){return!!this.isValid()&&!this._isUTC},gf.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},gf.isUtc=Ya,gf.isUTC=Ya,gf.zoneAbbr=function(){return this._isUTC?"UTC":""},gf.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},gf.dates=fa("dates accessor is deprecated. Use date instead.",Ye),gf.months=fa("months accessor is deprecated. Use month instead",$),gf.years=fa("years accessor is deprecated. Use year instead",Ne),gf.zone=fa(
"moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});var hf=gf,pf=t.prototype;pf._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},pf.calendar=function(a,b,c){var d=this._calendar[a];return D(d)?d.call(b,c):d},pf._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},pf.longDateFormat=function(a){
var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])},pf._invalidDate="Invalid date",pf.invalidDate=function(){return this._invalidDate},pf._ordinal="%d",pf.ordinal=function(a){return this._ordinal.replace("%d",a)},pf._ordinalParse=/\d{1,2}/,pf.preparse=qc,pf.postformat=qc,pf._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},pf.relativeTime=function(a,b,c,d){
var e=this._relativeTime[c];return D(e)?e(a,b,c,d):e.replace(/%d/i,a)},pf.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return D(c)?c(b):c.replace(/%s/i,b)},pf.set=function(a){var b,c;for(c in a)D(b=a[c])?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},pf.months=function(a,b){return c(this._months)?this._months[a.month()]:this._months[Be.test(b)?"format":"standalone"][a.month()]},pf._months=Ce,pf.monthsShort=function(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Be.test(b)?"format":"standalone"][a.month()]},pf._monthsShort=De,
pf.monthsParse=function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a)
)return d}},pf._monthsRegex=Fe,pf.monthsRegex=function(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex},pf._monthsShortRegex=Ee,pf.monthsShortRegex=function(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex},pf.week=function(a){return qa(a,this._week.dow,this._week.doy).week},pf._week={dow:0,doy:6},pf.firstDayOfYear=function(){return this._week.doy},
pf.firstDayOfWeek=function(){return this._week.dow},pf.weekdays=function(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]},pf._weekdays=Ze,pf.weekdaysMin=function(a){return this._weekdaysMin[a.day()]},pf._weekdaysMin=_e,pf.weekdaysShort=function(a){return this._weekdaysShort[a.day()]},pf._weekdaysShort=$e,pf.weekdaysParse=function(a,b,c){var d,e,f;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(e=Ea([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(
this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a)
)return d}},pf.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)},pf._meridiemParse=/[ap]\.?m?\.?/i,pf.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;return a+(1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),a.lang=fa("moment.lang is deprecated. Use moment.locale instead.",x),a.langData=fa("moment.langData is deprecated. Use moment.localeData instead.",z);var qf=Math.abs,rf=Lc("ms"),sf=Lc("s"),tf=Lc("m"),uf=Lc("h"),vf=Lc("d"),wf=Lc("w"),xf=Lc("M"),yf=Lc("y"),zf=Nc("milliseconds"),Af=Nc("seconds"),Bf=Nc("minutes"),Cf=Nc("hours"),Df=Nc("days"),
Ef=Nc("months"),Ff=Nc("years"),Gf=Math.round,Hf={s:45,m:45,h:22,d:26,M:11},If=Math.abs,Jf=Ia.prototype;Jf.abs=function(){var a=this._data;return this._milliseconds=qf(this._milliseconds),this._days=qf(this._days),this._months=qf(this._months),a.milliseconds=qf(a.milliseconds),a.seconds=qf(a.seconds),a.minutes=qf(a.minutes),a.hours=qf(a.hours),a.months=qf(a.months),a.years=qf(a.years),this},Jf.add=function(a,b){return Cc(this,a,b,1)},Jf.subtract=function(a,b){return Cc(this,a,b,-1)},Jf.as=function(a){var b,c,d=this._milliseconds;if("month"===(a=B(a))||"year"===a)return b=this._days+d/864e5,c=this._months+Hc(b),"month"===a?c:c/12;switch(
b=this._days+Math.round(Ic(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}},Jf.asMilliseconds=rf,Jf.asSeconds=sf,Jf.asMinutes=tf,Jf.asHours=uf,Jf.asDays=vf,Jf.asWeeks=wf,Jf.asMonths=xf,Jf.asYears=yf,Jf.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)},Jf._bubble=function(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data
;return 0<=f&&0<=g&&0<=h||f<=0&&g<=0&&h<=0||(f+=864e5*Fc(Ic(h)+g),h=g=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,h+=e=q(Hc(g+=q(c/24))),g-=Fc(Ic(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this},Jf.get=function(a){return this[(a=B(a))+"s"]()},Jf.milliseconds=zf,Jf.seconds=Af,Jf.minutes=Bf,Jf.hours=Cf,Jf.days=Df,Jf.weeks=function(){return q(this.days()/7)},Jf.months=Ef,Jf.years=Ff,Jf.humanize=function(a){var b=this.localeData(),c=function(a,b,c){var d=Za(a).abs(),e=Gf(d.as("s")),f=Gf(d.as("m")),g=Gf(d.as("h")),h=Gf(d.as("d")),i=Gf(d.as("M")),j=Gf(d.as("y")),k=e<Hf.s&&["s",e]||f<=1&&["m"]||f<Hf.m&&[
"mm",f]||g<=1&&["h"]||g<Hf.h&&["hh",g]||h<=1&&["d"]||h<Hf.d&&["dd",h]||i<=1&&["M"]||i<Hf.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=0<+a,k[4]=c,function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}.apply(null,k)}(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)},Jf.toISOString=Tc,Jf.toString=Tc,Jf.toJSON=Tc,Jf.locale=ub,Jf.localeData=vb,Jf.toIsoString=fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tc),Jf.lang=We,J("X",0,0,"unix"),J("x",0,0,"valueOf"),O("x",le),O("X",/[+-]?\d+(\.\d{1,3})?/),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(r(a))
}),a.version="2.11.1",function(a){Rd=a}(Ea),a.fn=hf,a.min=function(){return Fa("isBefore",[].slice.call(arguments,0))},a.max=function(){return Fa("isAfter",[].slice.call(arguments,0))},a.now=function(){return Date.now?Date.now():+new Date},a.utc=h,a.unix=function(a){return Ea(1e3*a)},a.months=function(a,b){return vc(a,b,"months",12,"month")},a.isDate=d,a.locale=x,a.invalid=l,a.duration=Za,a.isMoment=p,a.weekdays=function(a,b){return vc(a,b,"weekdays",7,"day")},a.parseZone=function(){return Ea.apply(null,arguments).parseZone()},a.localeData=z,a.isDuration=Ja,a.monthsShort=function(a,b){return vc(a,b,"monthsShort",12,"month")},a.weekdaysMin=function(a,b){
return vc(a,b,"weekdaysMin",7,"day")},a.defineLocale=y,a.weekdaysShort=function(a,b){return vc(a,b,"weekdaysShort",7,"day")},a.normalizeUnits=B,a.relativeTimeThreshold=function(a,b){return void 0!==Hf[a]&&(void 0===b?Hf[a]:(Hf[a]=b,!0))},a.prototype=hf;var Kf=a,Lf=(Kf.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),
meridiemParse:/vm|nm/i,isPM:function(a){return/^nm$/i.test(a)},meridiem:function(a,b,c){return a<12?c?"vm":"VM":c?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(
1===a||8===a||20<=a?"ste":"de")},week:{dow:1,doy:4}}),Kf.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",
nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Mf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Nf=(Kf.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),
weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",
h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Mf[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Lf[a]}).replace(/,/g,"")},week:{dow:6,doy:12}}),Kf.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),
weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Of={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8",
"":"9","":"0"},Pf=function(a){return 0===a?0:1===a?1:2===a?2:3<=a%100&&a%100<=10?3:11<=a%100?4:5},Qf={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},Rf=function(a){return function(b,c,d,e){var f=Pf(b),g=Qf[a][Pf(b)]
;return 2===f&&(g=g[c?0:1]),g.replace(/%d/i,b)}},Sf=["  "," "," "," "," "," "," "," "," ","  ","  ","  "],Tf=(Kf.defineLocale("ar",{months:Sf,monthsShort:Sf,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},
meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:Rf("s"),m:Rf("m"),mm:Rf("m"),h:Rf("h"),hh:Rf("h"),d:Rf("d"),dd:Rf("d"),M:Rf("M"),MM:Rf("M"),y:Rf("y"),yy:Rf("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/[]/g,function(a){return Of[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Nf[a]}).replace(/,/g,"")},week:{dow:6,doy:12}}),{1:"-inci",5:"-inci",8:"-inci",70:"-inci",
80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"}),Uf=(Kf.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},
calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(a){return/^(gndz|axam)$/.test(a)},meridiem:function(a,b,c){return a<4?"gec":a<12?"shr":a<17?"gndz":"axam"},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(a){if(0===a)return a+"-nc";var b=a%10;return a+(
Tf[b]||Tf[a%100-b]||Tf[100<=a?100:null])},week:{dow:1,doy:7}}),Kf.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},
weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Vc,mm:Vc,h:Vc,hh:Vc,d:"",dd:Vc,M:"",MM:Vc,y:"",yy:Vc},
meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<12?"":a<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a%10!=2&&a%10!=3||a%100==12||a%100==13?a+"-":a+"-";case"D":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split(
"_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",
y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-":0===c?a+"-":10<c&&c<20?a+"-":1===b?a+"-":2===b?a+"-":7===b||8===b?a+"-":a+"-"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Vf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Wf=(Kf.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),
weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",
yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Vf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Uf[a]})},meridiemParse:/||||/,isPM:function(a){return/^(||)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Xf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Yf=(Kf.defineLocale("bo",{
months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",
LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Xf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Wf[a]})},meridiemParse:/||||/,isPM:function(a){
return/^(||)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",
LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:Wc,h:"un eur",hh:"%d eur",d:"un devezh",dd:Wc,M:"ur miz",MM:Wc,y:"ur bloaz",yy:function(a){switch(function Yc(a){return 9<a?Yc(a%10):a}(a)){case 1:case 3:case 4:case 5:case 9:return a+" bloaz";default:return a+" vloaz"}}},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(a){return a+(1===a?"a":"vet")},week:{dow:1,doy:4}}),Kf.defineLocale("bs",{
months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:
return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:_c,mm:_c,h:_c,hh:_c,d:"dan",dd:_c,M:"mjesec",MM:_c,y:"godinu",yy:_c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),
monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(
1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(a,b){var c=1===a?"r":2===a?"n":3===a?"r":4===a?"t":"";return("w"===b||"W"===b)&&(c="a"),a+c},week:{dow:1,doy:4}}),"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_")),Zf="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),$f=(
Kf.defineLocale("cs",{months:Yf,monthsShort:Zf,monthsParse:function(a,b){var c,d=[];for(c=0;c<12;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(Yf,Zf),shortMonthsParse:function(a){var b,c=[];for(b=0;b<12;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Zf),longMonthsParse:function(a){var b,c=[];for(b=0;b<12;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Yf),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},
calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:bd,m:bd,mm:bd,h:bd,hh:bd,d:bd,dd:bd,M:bd,MM:bd,y:bd,
yy:bd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{
sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(a){return a+(/$/i.exec(a)?"":/$/i.exec(a)?"":"")},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}}),Kf.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),
monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",
hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(a){var c="";return 20<a?c=40===a||50===a||60===a||80===a||100===a?"fed":"ain":0<a&&(c=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][a]),a+c},week:{dow:1,doy:4}}),Kf.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),
weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale(
"de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",
lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:cd,mm:"%d Minuten",h:cd,hh:"%d Stunden",d:cd,dd:cd,M:cd,MM:cd,y:cd,yy:cd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",
LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:dd,mm:"%d Minuten",h:dd,hh:"%d Stunden",d:dd,dd:dd,M:dd,MM:dd,y:dd,yy:dd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),["","","","","","","","","","","",""]),_f=["","","",""
,"","",""],ag=(Kf.defineLocale("dv",{months:$f,monthsShort:$f,weekdays:_f,weekdaysShort:_f,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",
hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(a){return a.replace(//g,",")},postformat:function(a){return a.replace(/,/g,"")},week:{dow:7,doy:12}}),Kf.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(a,b){return/D/.test(b.substring(0,b.indexOf("MMMM")))?this._monthsGenitiveEl[a.month(
)]:this._monthsNominativeEl[a.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(a,b,c){return 11<a?c?"":"":c?"":""},isPM:function(a){return""===(a+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",
lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(a,b){var c=this._calendarEl[a],d=b&&b.hours();return D(c)&&(c=c.apply(b)),c.replace("{}",d%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("en-au",{
months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{
future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY h:mm A",LLLL:"dddd, D MMMM, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(
1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),Kf.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",
lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},
ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",
LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")},week:{dow:1,doy:4}}),Kf.defineLocale("eo",{
months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(a){return"p"===a.charAt(0).toLowerCase()},meridiem:function(a,b,c){
return 11<a?c?"p.t.m.":"P.T.M.":c?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}}),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_")),bg="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),cg=(Kf.defineLocale("es",{
months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?bg[a.month()]:ag[a.month()]},weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours(
)?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),
monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:ed,m:ed,mm:ed,h:ed,hh:ed,d:ed,dd:"%d peva",M:ed,MM:ed,y:ed,yy:ed},
ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",
ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),dg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",
"":"0"},eg=(Kf.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(a){return/  /.test(a)},meridiem:function(a,b,c){
return a<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(a){return a.replace(/[-]/g,function(a){return dg[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return cg[a]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}}),
"nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" ")),fg=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",eg[7],eg[8],eg[9]],gg=(Kf.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",
LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:fd,m:fd,mm:fd,h:fd,hh:fd,d:fd,dd:fd,M:fd,MM:fd,y:fd,yy:fd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"
),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",
h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}}),Kf.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),
monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",
h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")},week:{dow:1,doy:4}}),Kf.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",
LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}}),"jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_")),hg="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),ig=(
Kf.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?hg[a.month()]:gg[a.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",
sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||20<=a?"ste":"de")},week:{dow:1,doy:4}}),["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"]),ng=(Kf.defineLocale("gd",{months:ig,monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,
weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",
MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(a){return a+(1===a?"d":a%10==2?"na":"mh")},week:{dow:1,doy:4}}),Kf.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",
LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(a){return"uns segundos"===a?"nuns segundos":"en "+a},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},
ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}}),Kf.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",
nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(a){return 2===a?"":a+" "},d:"",dd:function(a){return 2===a?"":a+" "},M:"",MM:function(a){return 2===a?"":a+" "},y:"",yy:function(a){return 2===a?"":a%10==0&&10!==a?a+" ":a+" "}}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),og={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},pg=(Kf.defineLocale("hi",{
months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",
past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return og[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return ng[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("hr",{months:{
format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{
sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:hd,mm:hd,h:hd,hh:hd,d:"dan",dd:hd,M:"mjesec",MM:hd,y:"godinu",yy:hd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),
"vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ")),qg=(Kf.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(a){return"u"===a.charAt(1
).toLowerCase()},meridiem:function(a,b,c){return a<12?!0===c?"de":"DE":!0===c?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return jd.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return jd.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:id,m:id,mm:id,h:id,hh:id,d:id,dd:id,M:id,MM:id,y:id,yy:id},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("hy-am",{months:{format:"___________".split("_"),
standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){
return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a){return a<4?"":a<12?"":a<17?"":""},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(a,b){switch(b){case"DDD":case"w":case"W":case"DDDo":return 1===a?a+"-":a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("id",{
months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"siang"===b?11<=a?a:a+12:"sore"===b||"malam"===b?a+12:void 0},
meridiem:function(a,b,c){return a<11?"pagi":a<15?"siang":a<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),Kf.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),
weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:ld,m:ld,mm:ld,h:"klukkustund",hh:ld,d:ld,dd:ld,M:ld,MM:ld,y:ld,yy:ld},ordinalParse:/\d{1,2}\./,
ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",
lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(a){return(/^[0-9].+$/.test(a)?"tra":"in")+" "+a},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),
weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"Ahms",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhm",LLLL:"YYYYMDAhm dddd"},meridiemParse:/|/i,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}}),Kf.defineLocale("jv",{
months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(a,b){return 12===a&&(a=0),"enjing"===b?a:"siyang"===b?11<=a?a:a+12:"sonten"===b||"ndalu"===b?a+12:void 0},
meridiem:function(a,b,c){return a<11?"enjing":a<15?"siyang":a<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),Kf.defineLocale("ka",{months:{standalone:"___________".split(
"_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{
sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(a){return/(|||)/.test(a)?a.replace(/$/,""):a+""},past:function(a){return/(||||)/.test(a)?a.replace(/(|)$/," ")://.test(a)?a.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(a){return 0===a?a:1===a?a+"-":a<20||a<=100&&a%20==0||a%100==0?"-"+a:a+"-"},
week:{dow:1,doy:7}}),{0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"}),rg=(Kf.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|)/,ordinal:function(a){return a+(qg[a]||qg[a%10]||qg[100<=a?100:null])},week:{dow:1,doy:7}}),Kf.defineLocale("km",{months:"___________".split("_"),
monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",
s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}}),Kf.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h m",LLLL:"YYYY MMMM D dddd A h m"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",
lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""}}),Kf.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),
weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(a){return pd(a.substr(0,a.indexOf(" ")))?"a "+a:"an "+a},past:function(a){return pd(a.substr(0,a.indexOf(" "))
)?"viru "+a:"virun "+a},s:"e puer Sekonnen",m:md,mm:"%d Minutten",h:md,hh:"%d Stonnen",d:md,dd:"%d Deeg",M:md,MM:"%d Mint",y:md,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinalParse:/()\d{1,2}/,ordinal:function(a){return""+a}}),{m:"minut_minuts_minut",
mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"}),sg=(Kf.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_")},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{
format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{
sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(a,b,c,d){return b?"kelios sekunds":d?"keli sekundi":"kelias sekundes"},m:rd,mm:ud,h:rd,hh:ud,d:rd,dd:ud,M:rd,MM:ud,y:rd,yy:ud},ordinalParse:/\d{1,2}-oji/,ordinal:function(a){return a+"-oji"},week:{dow:1,doy:4}}),{m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),
dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")}),tg=(Kf.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",
L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(a,b){return b?"daas sekundes":"dam sekundm"},m:xd,mm:wd,h:xd,hh:wd,d:xd,dd:wd,M:xd,MM:wd,y:xd,yy:wd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan",
"dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:2<=a&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=tg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+tg.correctGrammaticalCase(a,d)}}),ug=(Kf.defineLocale("me",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sri.","et.","pet.","sub."],
weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT",
"[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:tg.translate,mm:tg.translate,h:tg.translate,hh:tg.translate,d:"dan",dd:tg.translate,M:"mjesec",MM:tg.translate,y:"godinu",yy:tg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),
weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},
ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-":0===c?a+"-":10<c&&c<20?a+"-":1===b?a+"-":2===b?a+"-":7===b||8===b?a+"-":a+"-"},week:{dow:1,doy:7}}),Kf.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{
LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,isPM:function(a){return/^( ||)$/.test(a)},meridiem:function(a,b,c){
return a<4?"":a<12?"":a<17?" ":a<20?"":""}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),vg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},wg=(Kf.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{
LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:zd,m:zd,mm:zd,h:zd,hh:zd,d:zd,dd:zd,M:zd,MM:zd,y:zd,yy:zd},preparse:function(a){return a.replace(/[]/g,function(a){return vg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return ug[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),
""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?11<=a?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"pagi":a<15?"tengahari":a<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",
MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),Kf.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),
"pagi"===b?a:"tengahari"===b?11<=a?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return a<11?"pagi":a<15?"tengahari":a<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),xg={"":"1","":"2","":"3","":"4","":"5",
"":"6","":"7","":"8","":"9","":"0"},yg=(Kf.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",
lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return xg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return wg[a]})},week:{dow:1,doy:4}}),Kf.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),
weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",
y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),zg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Ag=(Kf.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{
LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(a){return a.replace(/[]/g,function(a){return zg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return yg[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<3?"":a<12?"":a<16?"":a<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",
lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}}),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_")),Bg="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Cg=(Kf.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Bg[a.month()]:Ag[a.month()]},
weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",
y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||20<=a?"ste":"de")},week:{dow:1,doy:4}}),Kf.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},
calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),"stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_")),Dg="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"
),Eg=(Kf.defineLocale("pl",{months:function(a,b){return""===b?"("+Dg[a.month()]+"|"+Cg[a.month()]+")":/D MMMM/.test(b)?Dg[a.month()]:Cg[a.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(
this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:Bd,mm:Bd,h:Bd,hh:Bd,d:"1 dzie",dd:"%d dni",M:"miesic",MM:Bd,y:"rok",yy:Bd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),
weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",
m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"}),Kf.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",
LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("ro",{
months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{
future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:Cd,h:"o or",hh:Cd,d:"o zi",dd:Cd,M:"o lun",MM:Cd,y:"un an",yy:Cd},week:{dow:1,doy:7}}),[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]),Fg=(Kf.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"___________".split("_"),standalone:"___________".split("_")},
weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:Eg,longMonthsParse:Eg,shortMonthsParse:Eg,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(a){if(a.week()===this.week()
)return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Ed,mm:Ed,h:"",hh:Ed,d:"",dd:Ed,M:"",MM:Ed,y:"",yy:Ed},
meridiemParse:/|||/i,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<12?"":a<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-";case"D":return a+"-";case"w":case"W":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),
weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",
dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",
LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},ordinalParse:/\d{1,2} /,ordinal:function(a){return a+" "},meridiem:function(a,b,c){return 11<a?c?"..":" ":c?"..":" "}}),"janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_")),Gg="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_")
,Hg=(Kf.defineLocale("sk",{months:Fg,monthsShort:Gg,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",
lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:Gd,m:Gd,mm:Gd,h:Gd,hh:Gd,d:Gd,dd:Gd,M:Gd,MM:Gd,y:Gd,yy:Gd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),
weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:
return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:Hd,m:Hd,mm:Hd,h:Hd,hh:Hd,d:Hd,dd:Hd,M:Hd,MM:Hd,y:Hd,yy:Hd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),
weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(a){return"M"===a.charAt(0)},meridiem:function(a,b,c){return a<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",
y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:2<=a&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=Hg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Hg.correctGrammaticalCase(a,d)}}),Ig=(Kf.defineLocale("sr-cyrl",{months:["","","","","","","","","","","",""],monthsShort:[".","."
,".",".","","","",".",".",".",".","."],weekdays:["","","","","","",""],weekdaysShort:[".",".",".",".",".",".","."],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",
lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:Hg.translate,mm:Hg.translate,h:Hg.translate,hh:Hg.translate,d:"",dd:Hg.translate,M:"",MM:Hg.translate,y:"",yy:Hg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"
],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:2<=a&&a<=4?b[1]:b[2]},translate:function(a,b,c){var d=Ig.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Ig.correctGrammaticalCase(a,d)}}),Jg=(Kf.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","et.","pet.","sub."],weekdaysMin:["ne","po","ut",
"sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]
},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:Ig.translate,mm:Ig.translate,h:Ig.translate,hh:Ig.translate,d:"dan",dd:Ig.translate,M:"mesec",MM:Ig.translate,y:"godinu",yy:Ig.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),
longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10;return a+(1==~~(a%100/10)?"e":1===b?"a":2===b?"a":"e")},week:{dow:1,doy:4}}),Kf.defineLocale("sw",{
months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"
},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Kg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Lg=(Kf.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),
weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",
dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(a){return a+""},preparse:function(a){return a.replace(/[]/g,function(a){return Kg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Jg[a]})},meridiemParse:/|||||/,meridiem:function(a,b,c){return a<2?" ":a<6?" ":a<10?" ":a<14?" ":a<18?" ":a<22?" ":" "},meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<2?a:a+12:""===b||""===b?a:""===b&&10<=a?a:a+12},week:{dow:0,doy:6}}),Kf.defineLocale("te",{
months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{
future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?a<4?a:a+12:""===b?a:""===b?10<=a?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return a<4?"":a<10?"":a<17?"":a<20?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("th",{
months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"H  m ",LTS:"H  m  s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H  m ",LLLL:"dddd D MMMM YYYY  H  m "},meridiemParse:/|/,isPM:function(a){
return""===a},meridiem:function(a,b,c){return a<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),Kf.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),
weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",
MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),"pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_")),Mg=(Kf.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),
weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(a){var b=a;return-1!==a.indexOf("jaj")?b.slice(0,-3)+"leS":-1!==a.indexOf("jar")?b.slice(0,-3)+"waQ":-1!==a.indexOf("DIS")?b.slice(0,-3)+"nem":b+" pIq"},past:function(a){var b=a;return-1!==a.indexOf("jaj")?b.slice(0,-3
)+"Hu":-1!==a.indexOf("jar")?b.slice(0,-3)+"wen":-1!==a.indexOf("DIS")?b.slice(0,-3)+"ben":b+" ret"},s:"puS lup",m:"wa tup",mm:Kd,h:"wa rep",hh:Kd,d:"wa jaj",dd:Kd,M:"wa jar",MM:Kd,y:"wa DIS",yy:Kd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"}),Ng=(Kf.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),
weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",
yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(a){if(0===a)return a+"'nc";var b=a%10;return a+(Mg[b]||Mg[a%100-b]||Mg[100<=a?100:null])},week:{dow:1,doy:7}}),Kf.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",
LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiem:function(a,b,c){return 11<a?c?"d'o":"D'O":c?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:Md,m:Md,mm:Md,h:Md,hh:Md,d:Md,dd:Md,M:Md,MM:Md,y:Md,yy:Md},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),
monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",
m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),Kf.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",
LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}}),Kf.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},
monthsShort:"___________".split("_"),weekdays:function(a,b){return{nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")}[/(\[[]\]) ?dddd/.test(b)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(b)?"genitive":"nominative"][a.day()]},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",
LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:Qd("[ "),nextDay:Qd("[ "),lastDay:Qd("[ "),nextWeek:Qd("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return Qd("[] dddd [").call(this);case 1:case 2:case 4:return Qd("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Od,mm:Od,h:"",hh:Od,d:"",dd:Od,M:"",MM:Od,y:"",yy:Od},meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return a<4?"":a<12?"":a<17?"":""},
ordinalParse:/\d{1,2}-(|)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a+"-";case"D":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",
LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}}),Kf.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split(
"_"),weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",
h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),Kf.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"
},meridiemParse:/|||||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b||""===b||""===b?a:""===b||""===b?a+12:11<=a?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return d<600?"":d<900?"":d<1130?"":d<1230?"":d<1800?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var a,b;return a=Kf().startOf("week"),b=604800<=this.unix()-a.unix()?"[]":"[]",0===this.minutes()?b+"dddAh":b+"dddAhmm"},lastWeek:function(){var a,b;return a=Kf(
).startOf("week"),b=this.unix()<a.unix()?"[]":"[]",0===this.minutes()?b+"dddAh":b+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"";case"M":return a+"";case"w":case"W":return a+"";default:return a}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}}),Kf.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),
weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/||||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b||""===b?a:""===b?11<=a?a:a+12:""===b||""===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return d<900?"":d<1130?"":d<1230?"":d<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},
ordinalParse:/\d{1,2}(||)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"";case"M":return a+"";case"w":case"W":return a+"";default:return a}},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"}}),Kf);return Ng.locale("en"),Ng});var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(prop){var _super=this.prototype;initializing=!0;var prototype=new this;for(var name in initializing=!1,prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name]
)?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);return this._super=tmp,ret}}(name,prop[name]):prop[name];return Class=function(){!initializing&&this.init&&this.init.apply(this,arguments)},Class.prototype=prototype,Class.constructor=Class,Class.extend=arguments.callee,Class},"undefined"!=typeof exports&&(exports.Class=Class),define("class",function(global){return function(){return global.Class}}(this)),function(glob){var current_event,stop,has="hasOwnProperty",separator=/[\.\/]/,fun=function(){},numsort=function(a,b){return a-b},events={n:{}},eve=function(name,scope){name=String(name);var l,
oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,indexed=[],queue={},out=[],ce=current_event;current_event=name;for(var i=stop=0,ii=listeners.length;i<ii;i++)"zIndex"in listeners[i]&&(indexed.push(listeners[i].zIndex),listeners[i].zIndex<0&&(queue[listeners[i].zIndex]=listeners[i]));for(indexed.sort(numsort);indexed[z]<0;)if(l=queue[indexed[z++]],out.push(l.apply(scope,args)),stop)return stop=oldstop,out;for(i=0;i<ii;i++)if("zIndex"in(l=listeners[i]))if(l.zIndex==indexed[z]){if(out.push(l.apply(scope,args)),stop)break;do{if((l=queue[indexed[++z]])&&out.push(l.apply(scope,args)),stop)break}while(l)
}else queue[l.zIndex]=l;else if(out.push(l.apply(scope,args)),stop)break;return stop=oldstop,current_event=ce,out.length?out:null};eve._events=events,eve.listeners=function(name){var item,items,k,i,ii,j,jj,nes,names=name.split(separator),e=events,es=[e],out=[];for(i=0,ii=names.length;i<ii;i++){for(nes=[],j=0,jj=es.length;j<jj;j++)for(items=[(e=es[j].n)[names[i]],e["*"]],k=2;k--;)(item=items[k])&&(nes.push(item),out=out.concat(item.f||[]));es=nes}return out},eve.on=function(name,f){if(name=String(name),"function"!=typeof f)return function(){};for(var names=name.split(separator),e=events,i=0,ii=names.length;i<ii;i++)e=(e=e.n).hasOwnProperty(names[i]
)&&e[names[i]]||(e[names[i]]={n:{}});for(e.f=e.f||[],i=0,ii=e.f.length;i<ii;i++)if(e.f[i]==f)return fun;return e.f.push(f),function(zIndex){+zIndex==+zIndex&&(f.zIndex=+zIndex)}},eve.f=function(event){var attrs=[].slice.call(arguments,1);return function(){eve.apply(null,[event,null].concat(attrs).concat([].slice.call(arguments,0)))}},eve.stop=function(){stop=1},eve.nt=function(subname){return subname?new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.|\\/|$)").test(current_event):current_event},eve.nts=function(){return current_event.split(separator)},eve.off=eve.unbind=function(name,f){if(name){var e,key,splice,i,ii,j,jj,names=name.split(separator),cur=[events];for(
i=0,ii=names.length;i<ii;i++)for(j=0;j<cur.length;j+=splice.length-2){if(splice=[j,1],e=cur[j].n,"*"!=names[i])e[names[i]]&&splice.push(e[names[i]]);else for(key in e)e[has](key)&&splice.push(e[key]);cur.splice.apply(cur,splice)}for(i=0,ii=cur.length;i<ii;i++)for(e=cur[i];e.n;){if(f){if(e.f){for(j=0,jj=e.f.length;j<jj;j++)if(e.f[j]==f){e.f.splice(j,1);break}!e.f.length&&delete e.f}for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;for(j=0,jj=funcs.length;j<jj;j++)if(funcs[j]==f){funcs.splice(j,1);break}!funcs.length&&delete e.n[key].f}}else for(key in delete e.f,e.n)e.n[has](key)&&e.n[key].f&&delete e.n[key].f;e=e.n}}else eve._events=events={
n:{}}},eve.once=function(name,f){var f2=function(){return eve.unbind(name,f2),f.apply(this,arguments)};return eve.on(name,f2)},eve.version="0.4.2",eve.toString=function(){return"You are running Eve 0.4.2"},"undefined"!=typeof module&&module.exports?module.exports=eve:void 0!==define?define("eve",[],function(){return eve}):glob.eve=eve}(window||this),function(glob,factory){"function"==typeof define&&define.amd?define("raphael",["eve"],function(eve){return factory(glob,eve)}):factory(glob,glob.eve||"function"==typeof require&&require("eve"))}(this,function(window,eve){function R(first){if(R.is(first,"function"))return loaded?first():eve.on("raphael.DOMload",
first);if(R.is(first,array))return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first);var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args))})}return R._engine.create[apply](R,arguments)}R.version="2.1.2",R.eve=eve;var loaded,paperproto,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael
},Paper=function(){this.ca=this.customAttributes={}},apply="apply",concat="concat",supportsTouch="ontouchstart"in g.win||g.win.DocumentTouch&&g.doc instanceof DocumentTouch,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",array="array",objectToString=Object.prototype.toString,colourRegExp=(R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,
/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),isnan={NaN:1,Infinity:1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,
font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour","stroke-opacity":nu,
"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,
pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,eldata=(R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),
sortByNumber=function(a,b){return toFloat(a)-toFloat(b)},pipe=function(x){return x},rectPath=R._rectPath=function(x,y,w,h,r){return r?[["M",x+r,y],["l",w-2*r,0],["a",r,r,0,0,1,r,r],["l",0,h-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-w,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-h],["a",r,r,0,0,1,r,-r],["z"]]:[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath=function(x,y,rx,ry){return null==ry&&(ry=rx),[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPath=R._getPath={path:function(el){return el.attr("path")},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.r)},ellipse:function(el){var a=el.attrs
;return ellipsePath(a.cx,a.cy,a.rx,a.ry)},rect:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height,a.r)},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height)},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)},set:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)}},mapPath=R.mapPath=function(path,matrix){if(!matrix)return path;var x,y,i,j,ii,jj,pathi;for(i=0,ii=(path=path2curve(path)).length;i<ii;i++)for(j=1,jj=(pathi=path[i]).length;j<jj;j+=2)x=matrix.x(pathi[j],pathi[j+1]),y=matrix.y(pathi[j],pathi[j+1]),pathi[j]=x,pathi[j+1]=y
;return path};if(R._g=g,"VML"==(R.type=g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML")){var b,d=g.doc.createElement("div");if(d.innerHTML='<v:shape adj="1"/>',(b=d.firstChild).style.behavior="url(#default#VML)",!b||"object"!=typeof b.adj)return R.type=E;d=null}function clone(obj){if("function"==typeof obj||Object(obj)!==obj)return obj;var res=new obj.constructor;for(var key in obj)obj[has](key)&&(res[key]=clone(obj[key]));return res}R.svg=!(R.vml="VML"==R.type),R._Paper=Paper,R.fn=paperproto=Paper.prototype=R.prototype,R._id=0,R._oid=0,R.is=function(o,type){return"finite"==(
type=lowerCase.call(type))?!isnan[has](+o):"array"==type?o instanceof Array:"null"==type&&null===o||type==typeof o&&null!==o||"object"==type&&o===Object(o)||"array"==type&&Array.isArray&&Array.isArray(o)||objectToString.call(o).slice(8,-1).toLowerCase()==type},R.angle=function(x1,y1,x2,y2,x3,y3){if(null!=x3)return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3);var x=x1-x2,y=y1-y2;return x||y?(180+180*math.atan2(-y,-x)/PI+360)%360:0},R.rad=function(deg){return deg%360*PI/180},R.deg=function(rad){return 180*rad/PI%360},R.snapTo=function(values,value,tolerance){if(tolerance=R.is(tolerance,"finite")?tolerance:10,R.is(values,array)){for(var i=values.length;i--;)if(
abs(values[i]-value)<=tolerance)return values[i]}else{var rem=value%(values=+values);if(rem<tolerance)return value-rem;if(values-tolerance<rem)return value-rem+values}return value};var uuidRegEx,uuidReplacer;R.createUUID=(uuidRegEx=/[xy]/g,uuidReplacer=function(c){var r=16*math.random()|0;return("x"==c?r:3&r|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase()});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin),g.win=newwin,g.doc=g.win.document,R._engine.initWin&&R._engine.initWin(g.win)};var toHex=function(color){if(R.vml){var bod,trim=/^\s+|\s+$/g;try{
var docum=new ActiveXObject("htmlfile");docum.write("<body>"),docum.close(),bod=docum.body}catch(e){bod=createPopup().document.body}var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");return"#"+("000000"+(value=(255&value)<<16|65280&value|(16711680&value)>>>16).toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=g.doc.createElement("i");i.title="Raphal Colour Picker",i.style.display="none",g.doc.body.appendChild(i),toHex=cacher(function(color){var computedStyle;return i.style.color=color,(computedStyle=g.doc.defaultView.getComputedStyle(i,E)
)?computedStyle.getPropertyValue("color"):color})}return toHex(color)},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")"},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")"},rgbtoString=function(){return this.hex},prepareRGB=function(r,g,b){if(null==g&&R.is(r,"object")&&"r"in r&&"g"in r&&"b"in r&&(b=r.b,g=r.g,r=r.r),null==g&&R.is(r,"string")){var clr=R.getRGB(r);r=clr.r,g=clr.g,b=clr.b}return(1<r||1<g||1<b)&&(r/=255,g/=255,b/=255),[r,g,b]},packageRGB=function(r,g,b,o){var rgb={r:r*=255,g:g*=255,b:b*=255,hex:R.rgb(r,g,b),toString:rgbtoString};return R.is(o,"finite")&&(rgb.opacity=o),rgb};function cacher(f,scope,postprocessor){
return function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join(""),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];return cache[has](args)?function(array,item){for(var i=0,ii=array.length;i<ii;i++)if(array[i]===item)return array.push(array.splice(i,1)[0])}(count,args):(1e3<=count.length&&delete cache[count.shift()],count.push(args),cache[args]=f[apply](scope,arg)),postprocessor?postprocessor(cache[args]):cache[args]}}R.color=function(clr){var rgb;return R.is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr?(rgb=R.hsb2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):R.is(clr,"object"
)&&"h"in clr&&"s"in clr&&"l"in clr?(rgb=R.hsl2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):(R.is(clr,"string")&&(clr=R.getRGB(clr)),R.is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr?(rgb=R.rgb2hsl(clr),clr.h=rgb.h,clr.s=rgb.s,clr.l=rgb.l,rgb=R.rgb2hsb(clr),clr.v=rgb.b):(clr={hex:"none"}).r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1),clr.toString=rgbtoString,clr},R.hsb2rgb=function(h,s,v,o){var R,G,B,X,C;return this.is(h,"object")&&"h"in h&&"s"in h&&"b"in h&&(v=h.b,s=h.s,o=(h=h.h).o),X=(C=v*s)*(1-abs((h=(h*=360)%360/60)%2-1)),R=G=B=v-C,packageRGB(R+=[C,X,0,0,X,C][h=~~h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],o)},R.hsl2rgb=function(h,s,l,o){
var R,G,B,X,C;return this.is(h,"object")&&"h"in h&&"s"in h&&"l"in h&&(l=h.l,s=h.s,h=h.h),(1<h||1<s||1<l)&&(h/=360,s/=100,l/=100),X=(C=2*s*(l<.5?l:1-l))*(1-abs((h=(h*=360)%360/60)%2-1)),R=G=B=l-C/2,packageRGB(R+=[C,X,0,0,X,C][h=~~h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],o)},R.rgb2hsb=function(r,g,b){var V,C;return r=(b=prepareRGB(r,g,b))[0],g=b[1],b=b[2],{h:((0==(C=(V=mmax(r,g,b))-mmin(r,g,b))?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4)+360)%6*60/360,s:0==C?0:C/V,b:V,toString:hsbtoString}},R.rgb2hsl=function(r,g,b){var L,M,m,C;return r=(b=prepareRGB(r,g,b))[0],g=b[1],b=b[2],L=((M=mmax(r,g,b))+(m=mmin(r,g,b)))/2,{h:((0==(C=M-m)?null:M==r?(g-b)/C:M==g?(b-r
)/C+2:(r-g)/C+4)+360)%6*60/360,s:0==C?0:L<.5?C/(2*L):C/(2-2*L),l:L,toString:hsltoString}},R._path2string=function(){return this.join(",").replace(p2s,"$1")};R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em",img.onload=function(){f.call(this),this.onload=null,g.doc.body.removeChild(this)},img.onerror=function(){g.doc.body.removeChild(this)},g.doc.body.appendChild(img),img.src=src};function clrToString(){return this.hex}function catmullRom2bezier(crp,z){for(var d=[],i=0,iLen=crp.length;i<iLen-2*!z;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{
x:+crp[i+4],y:+crp[i+5]}];z?i?iLen-4==i?p[3]={x:+crp[0],y:+crp[1]}:iLen-2==i&&(p[2]={x:+crp[0],y:+crp[1]},p[3]={x:+crp[2],y:+crp[3]}):p[0]={x:+crp[iLen-2],y:+crp[iLen-1]}:iLen-4==i?p[3]=p[2]:i||(p[0]={x:+crp[i],y:+crp[i+1]}),d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}R.getRGB=cacher(function(colour){if(!colour||(colour=Str(colour)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString};if("none"==colour)return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString};!hsrg[has](colour.toLowerCase().substring(0,2))&&"#"!=colour.charAt()&&(
colour=toHex(colour));var red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);return rgb?(rgb[2]&&(blue=toInt(rgb[2].substring(5),16),green=toInt(rgb[2].substring(3,5),16),red=toInt(rgb[2].substring(1,3),16)),rgb[3]&&(blue=toInt((t=rgb[3].charAt(3))+t,16),green=toInt((t=rgb[3].charAt(2))+t,16),red=toInt((t=rgb[3].charAt(1))+t,16)),rgb[4]&&(values=rgb[4][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),"rgba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),
values[3]&&"%"==values[3].slice(-1)&&(opacity/=100)),rgb[5]?(values=rgb[5][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||""==values[0].slice(-1))&&(red/=360),"hsba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsb2rgb(red,green,blue,opacity)):rgb[6]?(values=rgb[6][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(
green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||""==values[0].slice(-1))&&(red/=360),"hsla"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsl2rgb(red,green,blue,opacity)):((rgb={r:red,g:green,b:blue,toString:clrToString}).hex="#"+(16777216|blue|green<<8|red<<16).toString(16).slice(1),R.is(opacity,"finite")&&(rgb.opacity=opacity),rgb)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}},R),R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex}),R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex}),R.rgb=cacher(
function(r,g,b){return"#"+(16777216|b|g<<8|r<<16).toString(16).slice(1)}),(R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||.75},rgb=this.hsb2rgb(start.h,start.s,start.b);return start.h+=.075,1<start.h&&(start.h=0,start.s-=.2,start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b})),rgb.hex}).reset=function(){delete this.start},R.parsePathString=function(pathString){if(!pathString)return null;var pth=paths(pathString);if(pth.arr)return pathClone(pth.arr);var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];return R.is(pathString,array)&&R.is(pathString[0],array)&&(data=pathClone(pathString)),
data.length||Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();if(c.replace(pathValues,function(a,b){b&&params.push(+b)}),"m"==name&&2<params.length&&(data.push([b][concat](params.splice(0,2))),name="l",b="m"==b?"l":"L"),"r"==name)data.push([b][concat](params));else for(;params.length>=paramCounts[name]&&(data.push([b][concat](params.splice(0,paramCounts[name]))),paramCounts[name]););}),data.toString=R._path2string,pth.arr=pathClone(data),data},R.parseTransformString=cacher(function(TString){if(!TString)return null;var data=[];return R.is(TString,array)&&R.is(TString[0],array)&&(data=pathClone(TString)),data.length||Str(
TString).replace(tCommand,function(a,b,c){var params=[];lowerCase.call(b);c.replace(pathValues,function(a,b){b&&params.push(+b)}),data.push([b][concat](params))}),data.toString=R._path2string,data});var paths=function(ps){var p=paths.ps=paths.ps||{};return p[ps]?p[ps].sleep=100:p[ps]={sleep:100},setTimeout(function(){for(var key in p)p[has](key)&&key!=ps&&(p[key].sleep--,!p[key].sleep&&delete p[key])}),p[ps]};function base3(t,p1,p2,p3,p4){return t*(t*(-3*p1+9*p2-9*p3+3*p4)+6*p1-12*p2+6*p3)-3*p1+3*p2}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){null==z&&(z=1);for(var z2=(z=1<z?1:z<0?0:z)/2,Tvalues=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,
.9041,-.9816,.9816],Cvalues=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],sum=0,i=0;i<12;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb)}return z2*sum}function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(!(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4))){var denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(denominator){var px=((x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4))/denominator,py=((x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4))/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(!(
px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)))return{x:px,y:py}}}}function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2))return justCount?0:[];for(var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=mmax(~~(l1/5),1),n2=mmax(~~(l2/5),1),dots1=[],dots2=[],xy={},res=justCount?0:[],i=0;i<n1+1;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1})}for(i=0;i<n2+1;i++
)p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2)),dots2.push({x:p.x,y:p.y,t:i/n2});for(i=0;i<n1;i++)for(var j=0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<.001?"y":"x",cj=abs(dj1.x-dj.x)<.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4))continue;xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);0<=t1&&t1<=1.001&&0<=t2&&t2<=1.001&&(justCount?res++:res.push({x:is.x,y:is.y,t1:mmin(t1,1),t2:mmin(t2,1)}))}}return res}function interPathHelper(path1
,path2,justCount){path1=R._path2curve(path1),path2=R._path2curve(path2);for(var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[],i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if("M"==pi[0])x1=x1m=pi[1],y1=y1m=pi[2];else{y1="C"==pi[0]?(x1=(bez1=[x1,y1].concat(pi.slice(1)))[6],bez1[7]):(bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m],x1=x1m,y1m);for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if("M"==pj[0])x2=x2m=pj[1],y2=y2m=pj[2];else{y2="C"==pj[0]?(x2=(bez2=[x2,y2].concat(pj.slice(1)))[6],bez2[7]):(bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m],x2=x2m,y2m);var intr=interHelper(bez1,bez2,justCount);if(justCount)res+=intr;else{for(var k=0,kk=intr.length;k<kk;k++
)intr[k].segment1=i,intr[k].segment2=j,intr[k].bez1=bez1,intr[k].bez2=bez2;res=res.concat(intr)}}}}}return res}R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+3*t12*t*c1x+3*t1*t*t*c2x+t3*p2x,y=t13*p1y+3*t12*t*c1y+3*t1*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=90-180*math.atan2(mx-nx,my-ny)/PI;return(nx<mx||my<ny)&&(alpha+=180),{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay
},end:{x:cx,y:cy},alpha:alpha}},R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){R.is(p1x,"array")||(p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y]);var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y}},R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2},R.isBBoxIntersect=function(bbox1,bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,
bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y)},R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2)},R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1)},R.isPointInsidePath=function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1},R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"Raphal: you are calling to method "+methodname+" of removed object",methodname)}}
;var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox)return clone(pth.bbox);if(!path)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var p,x=0,y=0,X=[],Y=[],i=0,ii=(path=path2curve(path)).length;i<ii;i++)if("M"==(p=path[i])[0])x=p[1],y=p[2],X.push(x),Y.push(y);else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x),Y=Y[concat](dim.min.y,dim.max.y),x=p[5],y=p[6]}var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),width=xmax-xmin,height=ymax-ymin,bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:width,height:height,cx:xmin+width/2,cy:ymin+height/2};return pth.bbox=clone(bb)
,bb},pathClone=function(pathArray){var res=clone(pathArray);return res.toString=R._path2string,res},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);if(pth.rel)return pathClone(pth.rel);R.is(pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray));var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(mx=x=pathArray[0][1],my=y=pathArray[0][2],start++,res.push(["M",x,y]));for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0]))switch(r[0]=lowerCase.call(pa[0]),r[0]){case"a":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],
r[6]=+(pa[6]-x).toFixed(3),r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1],my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++)r[j]=+(pa[j]-(j%2?x:y)).toFixed(3)}else{r=res[i]=[],"m"==pa[0]&&(mx=pa[1]+x,my=pa[2]+y);for(var k=0,kk=pa.length;k<kk;k++)res[i][k]=pa[k]}var len=res[i].length;switch(res[i][0]){case"z":x=mx,y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2],y+=+res[i][len-1]}}return res.toString=R._path2string,pth.rel=pathClone(res),res},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs)return pathClone(pth.abs);if(R.is(
pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray)),!pathArray||!pathArray.length)return[["M",0,0]];var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(mx=x=+pathArray[0][1],my=y=+pathArray[0][2],start++,res[0]=["M",x,y]);for(var r,pa,crz=3==pathArray.length&&"M"==pathArray[0][0]&&"R"==pathArray[1][0].toUpperCase()&&"Z"==pathArray[2][0].toUpperCase(),i=start,ii=pathArray.length;i<ii;i++){if(res.push(r=[]),(pa=pathArray[i])[0]!=upperCase.call(pa[0]))switch(r[0]=upperCase.call(pa[0]),r[0]){case"A":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],r[6]=+(pa[6]+x),r[7]=+(pa[7]+y);break;case"V":
r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":for(var dots=[x,y][concat](pa.slice(1)),j=2,jj=dots.length;j<jj;j++)dots[j]=+dots[j]+x,dots[++j]=+dots[j]+y;res.pop(),res=res[concat](catmullRom2bezier(dots,crz));break;case"M":mx=+pa[1]+x,my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++)r[j]=+pa[j]+(j%2?x:y)}else if("R"==pa[0])dots=[x,y][concat](pa.slice(1)),res.pop(),res=res[concat](catmullRom2bezier(dots,crz)),r=["R"][concat](pa.slice(-2));else for(var k=0,kk=pa.length;k<kk;k++)r[k]=pa[k];switch(r[0]){case"Z":x=mx,y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2],my=r[r.length-1];default:x=r[r.length-2],y=r[r.length-1]}}
return res.toString=R._path2string,pth.abs=pathClone(res),res},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]},q2c=function(x1,y1,ax,ay,x2,y2){return[1/3*x1+2/3*ax,1/3*y1+2/3*ay,1/3*x2+2/3*ax,1/3*y2+2/3*ay,x2,y2]},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var xy,_120=120*PI/180,rad=PI/180*(+angle||0),res=[],rotate=cacher(function(x,y,rad){return{x:x*math.cos(rad)-y*math.sin(rad),y:x*math.sin(rad)+y*math.cos(rad)}});if(recursive)f1=recursive[0],f2=recursive[1],cx=recursive[2],cy=recursive[3];else{x1=(xy=rotate(x1,y1,-rad)).x,y1=xy.y,x2=(xy=rotate(x2,y2,-rad)).x,y2=xy.y;math.cos(PI/180*angle),math.sin(PI/180*angle);var x=(
x1-x2)/2,y=(y1-y2)/2,h=x*x/(rx*rx)+y*y/(ry*ry);1<h&&(rx*=h=math.sqrt(h),ry*=h);var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));(f1=x1<cx?PI-f1:f1)<0&&(f1=2*PI+f1),(f2=x2<cx?PI-f2:f2)<0&&(f2=2*PI+f2),sweep_flag&&f2<f1&&(f1-=2*PI),!sweep_flag&&f1<f2&&(f2-=2*PI)}var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f1<f2?1:-1),x2=cx+rx*math.cos(f2),y2=cy+ry*math.sin(f2),res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}
df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];if(m2[0]=2*m1[0]-m2[0],m2[1]=2*m1[1]-m2[1],recursive)return[m2,m3,m4][concat](res);for(var newres=[],i=0,ii=(res=[m2,m3,m4][concat](res).join()[split](",")).length;i<ii;i++)newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;return newres},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+3*pow(t1,2)*t*c1x+3*t1*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+3*pow(t1,2)*t*c1y+3*t1*t*t*c2y+pow(t,3)*p2y}},curveDim=cacher(
function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var dot,a=c2x-2*c1x+p1x-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x];return"1e12"<abs(t1)&&(t1=.5),"1e12"<abs(t2)&&(t2=.5),0<t1&&t1<1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),0<t2&&t2<1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),a=c2y-2*c1y+p1y-(p2y-2*c2y+c1y),c=p1y-c1y,t1=(-(b=2*(c1y-p1y)-2*(c2y-c1y))+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,"1e12"<abs(t1)&&(t1=.5),"1e12"<abs(t2)&&(t2=.5),0<t1&&t1<1&&(
dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),0<t2&&t2<1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),{min:{x:mmin[apply](0,x),y:mmin[apply](0,y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}}}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve)return pathClone(pth.curve);for(var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d,pcom){var nx,ny;if(!path)return["C",d.x,d.y,d.x,d.y,d.x,d.y]
;switch(!(path[0]in{T:1,Q:1})&&(d.qx=d.qy=null),path[0]){case"M":d.X=path[1],d.Y=path[2];break;case"A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case"S":ny="C"==pcom||"S"==pcom?(nx=2*d.x-d.bx,2*d.y-d.by):(nx=d.x,d.y),path=["C",nx,ny][concat](path.slice(1));break;case"T":d.qy="Q"==pcom||"T"==pcom?(d.qx=2*d.x-d.qx,2*d.y-d.qy):(d.qx=d.x,d.y),path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1],d.qy=path[2],path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break
;case"V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y))}return path},fixArc=function(pp,i){if(7<pp[i].length){pp[i].shift();for(var pi=pp[i];pi.length;)pp.splice(i++,0,["C"][concat](pi.splice(0,6)));pp.splice(i,1),ii=mmax(p.length,p2&&p2.length||0)}},fixM=function(path1,path2,a1,a2,i){path1&&path2&&"M"==path1[i][0]&&"M"!=path2[i][0]&&(path2.splice(i,0,["M",a2.x,a2.y]),a1.bx=0,a1.by=0,a1.x=path1[i][1],a1.y=path1[i][2],ii=mmax(p.length,p2&&p2.length||0))},i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]=processPath(p[i],attrs),fixArc(p,i),p2&&(p2[i]=processPath(p2[i],attrs2)),p2&&fixArc(p2,i),fixM(p,p2,
attrs,attrs2,i),fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2],attrs.y=seg[seglen-1],attrs.bx=toFloat(seg[seglen-4])||attrs.x,attrs.by=toFloat(seg[seglen-3])||attrs.y,attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x),attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y),attrs2.x=p2&&seg2[seg2len-2],attrs2.y=p2&&seg2[seg2len-1]}return p2||(pth.curve=pathClone(p)),p2?[p,p2]:p},null,pathClone),tear=(R._parseDots=cacher(function(gradient){for(var dots=[],i=0,ii=gradient.length;i<ii;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);if(dot.color=R.getRGB(par[1]),dot.color.error
)return null;dot.color=dot.color.hex,par[2]&&(dot.offset=par[2]+"%"),dots.push(dot)}for(i=1,ii=dots.length-1;i<ii;i++)if(!dots[i].offset){for(var start=toFloat(dots[i-1].offset||0),end=0,j=i+1;j<ii;j++)if(dots[j].offset){end=dots[j].offset;break}end||(end=100,j=ii);for(var d=((end=toFloat(end))-start)/(j-i+1);i<j;i++)start+=d,dots[i].offset=start+"%"}return dots}),R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev),el==paper.bottom&&(paper.bottom=el.next),el.next&&(el.next.prev=el.prev),el.prev&&(el.prev.next=el.next)}),toMatrix=(R._tofront=function(el,paper){paper.top!==el&&(tear(el,paper),el.next=null,el.prev=paper.top,paper.top.next=el,
paper.top=el)},R._toback=function(el,paper){paper.bottom!==el&&(tear(el,paper),el.next=paper.bottom,el.prev=null,paper.bottom.prev=el,paper.bottom=el)},R._insertafter=function(el,el2,paper){tear(el,paper),el2==paper.top&&(paper.top=el),el2.next&&(el2.next.prev=el),el.next=el2.next,(el.prev=el2).next=el},R._insertbefore=function(el,el2,paper){tear(el,paper),el2==paper.bottom&&(paper.bottom=el),el2.prev&&(el2.prev.next=el),el.prev=el2.prev,(el2.prev=el).next=el2},R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb}};return extractTransform(el,transform),el.matrix}),extractTransform=(
R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform))},R._extractTransform=function(el,tstr){if(null==tstr)return el._.transform;tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var dx,dy,tdata=R.parseTransformString(tstr),deg=0,sx=1,sy=1,_=el._,m=new Matrix;if(_.transform=tdata||[],tdata)for(var i=0,ii=tdata.length;i<ii;i++){var x1,y1,x2,y2,bb,t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0;"t"==command&&3==tlen?absolute?(x1=inver.x(0,0),y1=inver.y(0,0),x2=inver.x(t[1],t[2]),y2=inver.y(t[1],t[2]),m.translate(x2-x1,y2-y1)):m.translate(t[1],t[2]
):"r"==command?2==tlen?(bb=bb||el.getBBox(1),m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2),deg+=t[1]):4==tlen&&(absolute?(x2=inver.x(t[2],t[3]),y2=inver.y(t[2],t[3]),m.rotate(t[1],x2,y2)):m.rotate(t[1],t[2],t[3]),deg+=t[1]):"s"==command?2==tlen||3==tlen?(bb=bb||el.getBBox(1),m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2),sx*=t[1],sy*=t[tlen-1]):5==tlen&&(absolute?(x2=inver.x(t[3],t[4]),y2=inver.y(t[3],t[4]),m.scale(t[1],t[2],x2,y2)):m.scale(t[1],t[2],t[3],t[4]),sx*=t[1],sy*=t[2]):"m"==command&&7==tlen&&m.add(t[1],t[2],t[3],t[4],t[5],t[6]),_.dirtyT=1,el.matrix=m}el.matrix=m,_.sx=sx,_.sy=sy,_.deg=deg,_.dx=dx=m.e,_.dy=dy=m.f,
1==sx&&1==sy&&!deg&&_.bbox?(_.bbox.x+=+dx,_.bbox.y+=+dy):_.dirtyT=1}),getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":return 4==item.length?[l,0,item[2],item[3]]:[l,0];case"s":return 5==item.length?[l,1,1,item[3],item[4]]:3==item.length?[l,1,1]:[l,1]}},equaliseTransform=R._equaliseTransform=function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1),t1=R.parseTransformString(t1)||[],t2=R.parseTransformString(t2)||[];for(var j,jj,tt1,tt2,maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0;i<maxlength;i++){if(tt1=t1[i]||getEmpty(t2[i]),tt2=t2[i]||getEmpty(tt1),
tt1[0]!=tt2[0]||"r"==tt1[0].toLowerCase()&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3])||"s"==tt1[0].toLowerCase()&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))return;for(from[i]=[],to[i]=[],j=0,jj=mmax(tt1.length,tt2.length);j<jj;j++)j in tt1&&(from[i][j]=tt1[j]),j in tt2&&(to[i][j]=tt2[j])}return{from:from,to:to}};function Matrix(a,b,c,d,e,f){this.f=null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0)}R._getContainer=function(x,y,w,h){var container;if(null!=(container=null!=h||R.is(x,"object")?x:g.doc.getElementById(x)))return container.tagName?null==y?{container:container,
width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight}:{container:container,width:y,height:w}:{container:1,x:x,y:y,width:w,height:h}},R.pathToRelative=pathToRelative,R._engine={},R.path2curve=path2curve,R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f)},function(matrixproto){function norm(a){return a[0]*a[0]+a[1]*a[1]}function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag),a[1]&&(a[1]/=mag)}matrixproto.add=function(a,b,c,d,e,f){var x,y,z,res,out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof Matrix&&(
matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),x=0;x<3;x++)for(y=0;y<3;y++){for(z=res=0;z<3;z++)res+=m[x][z]*matrix[z][y];out[x][y]=res}this.a=out[0][0],this.b=out[1][0],this.c=out[0][1],this.d=out[1][1],this.e=out[0][2],this.f=out[1][2]},matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x)},matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},matrixproto.translate=function(x,y){this.add(1,0,0,1,x,y)},matrixproto.scale=function(x,y,cx,cy){null==y&&(y=x),(cx||cy)&&this.add(1,0,0,1,cx,cy),this.add(x,0,0,y,0,0),(cx||cy
)&&this.add(1,0,0,1,-cx,-cy)},matrixproto.rotate=function(a,x,y){a=R.rad(a),x=x||0,y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y),this.add(1,0,0,1,-x,-y)},matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e},matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f},matrixproto.get=function(i){return+this[Str.fromCharCode(97+i)].toFixed(4)},matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},matrixproto.toFilter=function(){
return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},matrixproto.split=function(){var out={};out.dx=this.e,out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0])),normalize(row[0]),out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1],row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear],out.scaley=math.sqrt(norm(row[1])),normalize(row[1]),out.shear/=out.scaley;var sin=-row[0][1],cos=row[1][1]
;return cos<0?(out.rotate=R.deg(math.acos(cos)),sin<0&&(out.rotate=360-out.rotate)):out.rotate=R.deg(math.asin(sin)),out.isSimple=!(+out.shear.toFixed(9)||out.scalex.toFixed(9)!=out.scaley.toFixed(9)&&out.rotate),out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate,out.noRotation=!+out.shear.toFixed(9)&&!out.rotate,out},matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();return s.isSimple?(s.scalex=+s.scalex.toFixed(4),s.scaley=+s.scaley.toFixed(4),s.rotate=+s.rotate.toFixed(4),(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+(1!=s.scalex||1!=s.scaley?"s"+[s.scalex,s.scaley,0,0]:E)+(s.rotate?"r"+[s.rotate
,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(version&&version[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&version&&version[1]<8?paperproto.safari=function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove()})}:paperproto.safari=function(){};for(var preventDefault=function(){this.returnValue=!1},preventTouch=function(){
return this.originalEvent.preventDefault()},stopPropagation=function(){this.cancelBubble=!0},stopTouch=function(){return this.originalEvent.stopPropagation()},getEventPosition=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;return{x:e.clientX+scrollX,y:e.clientY+scrollY}},addEvent=g.doc.addEventListener?function(obj,type,fn,element){var f=function(e){var pos=getEventPosition(e);return fn.call(element,e,pos.x,pos.y)};return obj.addEventListener(type,f,!1),supportsTouch&&touchMap[type]&&obj.addEventListener(touchMap[type],function(e){for(var pos=getEventPosition(e),
olde=e,i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++)if(e.targetTouches[i].target==obj){(e=e.targetTouches[i]).originalEvent=olde,e.preventDefault=preventTouch,e.stopPropagation=stopTouch;break}return fn.call(element,e,pos.x,pos.y)},!1),function(){return obj.removeEventListener(type,f,!1),supportsTouch&&touchMap[type]&&obj.removeEventListener(touchMap[type],f,!1),!0}}:g.doc.attachEvent?function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY
;return e.preventDefault=e.preventDefault||preventDefault,e.stopPropagation=e.stopPropagation||stopPropagation,fn.call(element,e,x,y)};return obj.attachEvent("on"+type,f),function(){return obj.detachEvent("on"+type,f),!0}}:void 0,drag=[],dragMove=function(e){for(var dragi,x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,j=drag.length;j--;){if(dragi=drag[j],supportsTouch&&e.touches){for(var touch,i=e.touches.length;i--;)if((touch=e.touches[i]).identifier==dragi.el._drag.id){x=touch.clientX,y=touch.clientY,(e.originalEvent?e.originalEvent:e).preventDefault()
;break}}else e.preventDefault();var o,node=dragi.el.node,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node),node.style.display="none",o=dragi.el.paper.getElementByPoint(x,y),node.style.display=display,g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node)),o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o),x+=scrollX,y+=scrollY,eve("raphael.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e)}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);for(var dragi,i=drag.length;i--;)(dragi=drag[i]).el._drag={},eve(
"raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e);drag=[]},elproto=R.el={},i=events.length;i--;)!function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){return R.is(fn,"function")&&(this.events=this.events||[],this.events.push({name:eventName,f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)})),this},R["un"+eventName]=elproto["un"+eventName]=function(fn){for(var events=this.events||[],l=events.length;l--;)events[l].name!=eventName||!R.is(fn,"undefined")&&events[l].f!=fn||(events[l].unbind(),events.splice(l,1),!events.length&&delete this.events);return this}}(events[i])
;elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(0==arguments.length)return data;if(1!=arguments.length)return data[key]=value,eve("raphael.data.set."+this.id,this,value,key),this;if(R.is(key,"object")){for(var i in key)key[has](i)&&this.data(i,key[i]);return this}return eve("raphael.data.get."+this.id,this,data[key],key),data[key]},elproto.removeData=function(key){return null==key?eldata[this.id]={}:eldata[this.id]&&delete eldata[this.id][key],this},elproto.getData=function(){return clone(eldata[this.id]||{})},elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,
scope_out||scope_in)},elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out)};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;if(this._drag.id=e.identifier,supportsTouch&&e.touches)for(var touch,i=e.touches.length;i--;)if(touch=e.touches[i],this._drag.id=touch.identifier,touch.identifier==this._drag.id){x=touch.clientX,y=touch.clientY;break}this._drag.x=x+scrollX,
this._drag.y=y+scrollY,!drag.length&&R.mousemove(dragMove).mouseup(dragUp),drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope}),onstart&&eve.on("raphael.drag.start."+this.id,onstart),onmove&&eve.on("raphael.drag.move."+this.id,onmove),onend&&eve.on("raphael.drag.end."+this.id,onend),eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e)}return this._drag={},draggable.push({el:this,start:start}),this.mousedown(start),this},elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id)},elproto.undrag=function(){for(
var i=draggable.length;i--;)draggable[i].el==this&&(this.unmousedown(draggable[i].start),draggable.splice(i,1),eve.unbind("raphael.drag.*."+this.id));!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp),drag=[]},paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);return this.__set__&&this.__set__.push(out),out},paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);return this.__set__&&this.__set__.push(out),out},paperproto.ellipse=function(x,y,rx,ry){var out=R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);return this.__set__&&this.__set__.push(out),out},paperproto.path=function(pathString
){pathString&&!R.is(pathString,"string")&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);return this.__set__&&this.__set__.push(out),out},paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);return this.__set__&&this.__set__.push(out),out},paperproto.text=function(x,y,text){var out=R._engine.text(this,x||0,y||0,Str(text));return this.__set__&&this.__set__.push(out),out},paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray)
;return this.__set__&&this.__set__.push(out),out.paper=this,out.type="set",out},paperproto.setStart=function(set){this.__set__=set||this.set()},paperproto.setFinish=function(set){var out=this.__set__;return delete this.__set__,out},paperproto.setSize=function(width,height){return R._engine.setSize.call(this,width,height)},paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit)},paperproto.top=paperproto.bottom=null,paperproto.raphael=R;function x_y_w_h(){return this.x+S+this.y+S+this.width+"  "+this.height}paperproto.getElementByPoint=function(x,y){var elem,box,doc,body,docElem,clientTop,clientLeft,svg=this.canvas,
target=g.doc.elementFromPoint(x,y);if(g.win.opera&&"svg"==target.tagName){var so=(box=(elem=svg).getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,{y:box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,x:box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft}),sr=svg.createSVGRect();sr.x=x-so.x,sr.y=y-so.y,sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);hits.length&&(target=hits[hits.length-1])}if(!target)return null;for(
;target.parentNode&&target!=svg.parentNode&&!target.raphael;)target=target.parentNode;return target==this.canvas.parentNode&&(target=svg),target=target&&target.raphael?this.getById(target.raphaelid):null},paperproto.getElementsByBBox=function(bbox){var set=this.set();return this.forEach(function(el){R.isBBoxIntersect(el.getBBox(),bbox)&&set.push(el)}),set},paperproto.getById=function(id){for(var bot=this.bottom;bot;){if(bot.id==id)return bot;bot=bot.next}return null},paperproto.forEach=function(callback,thisArg){for(var bot=this.bottom;bot;){if(!1===callback.call(thisArg,bot))return this;bot=bot.next}return this},paperproto.getElementsByPoint=function(x,y){
var set=this.set();return this.forEach(function(el){el.isPointInside(x,y)&&set.push(el)}),set},elproto.isPointInside=function(x,y){var rp=this.realPath=getPath[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(rp=R.transformPath(rp,this.attr("transform"))),R.isPointInsidePath(rp,x,y)},elproto.getBBox=function(isWithoutTransform){if(this.removed)return{};var _=this._;return isWithoutTransform?(!_.dirty&&_.bboxwt||(this.realPath=getPath[this.type](this),_.bboxwt=pathDimensions(this.realPath),_.bboxwt.toString=x_y_w_h,_.dirty=0),_.bboxwt):((_.dirty||_.dirtyT||!_.bbox)&&(!_.dirty&&this.realPath||(_.bboxwt=0,
this.realPath=getPath[this.type](this)),_.bbox=pathDimensions(mapPath(this.realPath,this.matrix)),_.bbox.toString=x_y_w_h,_.dirty=_.dirtyT=0),_.bbox)},elproto.clone=function(){if(this.removed)return null;var out=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(out),out},elproto.glow=function(glow){if("text"==this.type)return null;var s={width:((glow=glow||{}).width||10)+(+this.attr("stroke-width")||1),fill:glow.fill||!1,opacity:glow.opacity||.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);path=this.matrix?mapPath(path
,this.matrix):path;for(var i=1;i<c+1;i++)out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}));return out.insertBefore(this).translate(s.offsetx,s.offsety)};var getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){return null==length?bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y):R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,function(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(!(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll)){var l,step=.5,t2=1-step;for(l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);.01<abs(l-ll);)l=bezlen(
x1,y1,x2,y2,x3,y3,x4,y4,t2+=(l<ll?1:-1)*(step/=2));return t2}}(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){for(var x,y,p,l,point,sp="",subpaths={},len=0,i=0,ii=(path=path2curve(path)).length;i<ii;i++){if("M"==(p=path[i])[0])x=+p[1],y=+p[2];else{if(length<len+(l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]))){if(subpath&&!subpaths.start){if(sp+=["C"+(point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len)).start.x,point.start.y,point.m.x,point.m.y,point.x,point.y],onlystart)return sp;subpaths.start=sp,sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y
,point.end.x,point.end.y,p[5],p[6]].join(),len+=l,x=+p[5],y=+p[6];continue}if(!istotal&&!subpath)return{x:(point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len)).x,y:point.y,alpha:point.alpha}}len+=l,x=+p[5],y=+p[6]}sp+=p.shift()+p}return subpaths.end=sp,(point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1)).alpha&&(point={x:point.x,y:point.y,alpha:point.alpha}),point}},getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength,R.getPointAtLength=getPointAtLength,R.getSubpath=function(path,from,to){if(
this.getTotalLength(path)-to<1e-6)return getSubpathsAtLength(path,from).end;var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a},elproto.getTotalLength=function(){var path=this.getPath();if(path)return this.node.getTotalLength?this.node.getTotalLength():getTotalLength(path)},elproto.getPointAtLength=function(length){var path=this.getPath();if(path)return getPointAtLength(path,length)},elproto.getPath=function(){var path,getPath=R._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return getPath&&(path=getPath(this)),path},elproto.getSubpath=function(from,to){var path=this.getPath();if(path)return R.getSubpath(path,from,
to)};var ef=R.easing_formulas={linear:function(n){return n},"<":function(n){return pow(n,1.7)},">":function(n){return pow(n,.48)},"<>":function(n){var q=.48-n/1.04,Q=math.sqrt(.1734+q*q),x=Q-q,y=-Q-q,t=pow(abs(x),1/3)*(x<0?-1:1)+pow(abs(y),1/3)*(y<0?-1:1)+.5;return 3*(1-t)*t*t+t*t*t},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s)},backOut:function(n){var s=1.70158;return(n-=1)*n*((s+1)*n+s)+1},elastic:function(n){return n==!!n?n:pow(2,-10*n)*math.sin(2*PI*(n-.075)/.3)+1},bounce:function(n){var s=7.5625,p=2.75;return n<1/p?s*n*n:n<2/p?s*(n-=1.5/p)*n+.75:n<2.5/p?s*(n-=2.25/p)*n+.9375:s*(n-=2.625/p)*n+.984375}};ef.easeIn=ef["ease-in"]=ef["<"],
ef.easeOut=ef["ease-out"]=ef[">"],ef.easeInOut=ef["ease-in-out"]=ef["<>"],ef["back-in"]=ef.backIn,ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16)},animation=function(){for(var Now=+new Date,l=0;l<animationElements.length;l++){var e=animationElements[l];if(!e.el.removed&&!e.paused){var now,key,time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,that=(e.t,e.el),set={},init={};if(e.initstatus?(time=(
e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*ms,e.status=e.initstatus,delete e.initstatus,e.stop&&animationElements.splice(l--,1)):e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top,!(time<0))if(time<ms){var pos=easing(time/ms);for(var attr in from)if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case"colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+")";break;case"path":now=[];for(var i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(var j=1,
jj=from[attr][i].length;j<jj;j++)now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j];now[i]=now[i].join(S)}now=now.join(S);break;case"transform":if(diff[attr].real)for(now=[],i=0,ii=from[attr].length;i<ii;i++)for(now[i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;j<jj;j++)now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j];else{var get=function(i){return+from[attr][i]+pos*ms*diff[attr][i]};now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]]}break;case"csv":if("clip-rect"==attr)for(now=[],i=4;i--;)now[i]=+from[attr][i]+pos*ms*diff[attr][i];break;default:var from2=[][concat](from[attr]);for(now=[],i=that.paper.customAttributes[attr].length;i--;
)now[i]=+from2[i]+pos*ms*diff[attr][i]}set[attr]=now}that.attr(set),function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim)})}(that.id,that,e.anim)}else{if(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+el.id,el,a),eve("raphael.anim.finish."+el.id,el,a),R.is(f,"function")&&f.call(el)})}(e.callback,that,e.anim),that.attr(to),animationElements.splice(l--,1),1<e.repeat&&!e.next){for(key in to)to[has](key)&&(init[key]=e.totalOrigin[key]);e.el.attr(init),runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}
R.svg&&that&&that.paper&&that.paper.safari(),animationElements.length&&requestAnimFrame(animation)},upto255=function(color){return 255<color?255:color<0?0:color};function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}return function(x,epsilon){var t=function(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){if(x2=sampleCurveX(t2)-x,abs(x2)<epsilon)return t2;if(abs(d2=(3*ax*t2+2*bx)*t2+cx)<1e-6)break;t2-=x2/d2}if(t1=1,(t2=x)<(t0=0))return t0;if(t1<t2)return t1;for(;t0<t1;){if(x2=sampleCurveX(t2),abs(x2-x)<epsilon)return t2
;x2<x?t0=t2:t1=t2,t2=(t1-t0)/2+t0}return t2}(x,epsilon);return((ay*t+by)*t+cy)*t}(t,1/(200*duration))}function Animation(anim,ms){var percents=[],newAnim={};if(this.ms=ms,this.times=1,anim){for(var attr in anim)anim[has](attr)&&(newAnim[toFloat(attr)]=anim[attr],percents.push(toFloat(attr)));percents.sort(sortByNumber)}this.anim=newAnim,this.top=percents[percents.length-1],this.percents=percents}function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);var params,isInAnim,isInAnimSet,next,prev,timestamp,ms=anim.ms,from={},to={},diff={};if(status)for(i=0,ii=animationElements.length;i<ii;i++){var e=animationElements[i];if(
e.el.id==element.id&&e.anim==anim){e.percent!=percent?(animationElements.splice(i,1),isInAnimSet=1):isInAnim=e,element.attr(e.totalOrigin);break}}else status=+to;for(var i=0,ii=anim.percents.length;i<ii;i++){if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i],prev=anim.percents[i-1]||0,ms=ms/anim.top*(percent-prev),next=anim.percents[i+1],params=anim.anim[percent];break}status&&element.attr(anim.anim[anim.percents[i]])}if(params){if(isInAnim)isInAnim.initstatus=status,isInAnim.start=new Date-isInAnim.ms*status;else{for(var attr in params)if(params[has](attr)&&(availableAnimAttrs[has](attr
)||element.paper.customAttributes[has](attr)))switch(from[attr]=element.attr(attr),null==from[attr]&&(from[attr]=availableAttrs[attr]),to[attr]=params[attr],availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case"colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case"path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];for(from[attr]=pathes[0],diff[attr]=[],i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;j<jj;j++)diff[attr][i][j]=(
toPath[i][j]-from[attr][i][j])/ms}break;case"transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq)for(from[attr]=eq.from,to[attr]=eq.to,diff[attr]=[],diff[attr].real=!0,i=0,ii=from[attr].length;i<ii;i++)for(diff[attr][i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;j<jj;j++)diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms;else{var m=element.matrix||new Matrix,to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1)}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f],extractTransform(to2,to[attr]),to[attr]=to2._.transform,diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(
to2.matrix.e-m.e)/ms,(to2.matrix.f-m.f)/ms]}break;case"csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if("clip-rect"==attr)for(from[attr]=from2,diff[attr]=[],i=from2.length;i--;)diff[attr][i]=(values[i]-from[attr][i])/ms;to[attr]=values;break;default:for(values=[][concat](params[attr]),from2=[][concat](from[attr]),diff[attr]=[],i=element.paper.customAttributes[attr].length;i--;)diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms}var easing=params.easing,easyeasy=R.easing_formulas[easing];if(!easyeasy)if((easyeasy=Str(easing).match(bezierrg))&&5==easyeasy.length){var curve=easyeasy;easyeasy=function(t){
return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms)}}else easyeasy=pipe;if(e={anim:anim,percent:percent,timestamp:timestamp=params.start||anim.start||+new Date,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:!1,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,origin:element.attr(),totalOrigin:totalOrigin},animationElements.push(e),status&&!isInAnim&&!isInAnimSet&&(e.stop=!0,e.start=new Date-ms*status,1==animationElements.length))return animation();isInAnimSet&&(e.start=new Date-e.ms*status),1==animationElements.length&&requestAnimFrame(
animation)}eve("raphael.anim.start."+element.id,element,anim)}}function stopAnimation(paper){for(var i=0;i<animationElements.length;i++)animationElements[i].el.paper==paper&&animationElements.splice(i--,1)}elproto.animateWith=function(el,anim,params,ms,easing,callback){if(this.removed)return callback&&callback.call(this),this;var a=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(a,this,a.percents[0],null,this.attr());for(var i=0,ii=animationElements.length;i<ii;i++)if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;break}return this},
elproto.onAnimation=function(f){return f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id),this},Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);return a.times=this.times,a.del=+delay||0,a},Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);return a.del=this.del,a.times=math.floor(mmax(times,0))||1,a},R.animation=function(params,ms,easing,callback){if(params instanceof Animation)return params;!R.is(easing,"function")&&easing||(callback=callback||easing||null,easing=null),params=Object(params),ms=+ms||0;var json,attr,p={};for(attr in params)params[has](attr
)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr&&(json=!0,p[attr]=params[attr]);return json?(easing&&(p.easing=easing),callback&&(p.callback=callback),new Animation({100:p},ms)):new Animation(params,ms)},elproto.animate=function(params,ms,easing,callback){if(this.removed)return callback&&callback.call(this),this;var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);return runAnimation(anim,this,anim.percents[0],null,this.attr()),this},elproto.setTime=function(anim,value){return anim&&null!=value&&this.status(anim,mmin(value,anim.ms)/anim.ms),this},elproto.status=function(anim,value){var len,e,out=[],i=0;if(null!=value
)return runAnimation(anim,this,-1,mmin(value,1)),this;for(len=animationElements.length;i<len;i++)if((e=animationElements[i]).el.id==this.id&&(!anim||e.anim==anim)){if(anim)return e.status;out.push({anim:e.anim,status:e.status})}return anim?0:out},elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||!1!==eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)&&(animationElements[i].paused=!0);return this},elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)
){var e=animationElements[i];!1!==eve("raphael.anim.resume."+this.id,this,e.anim)&&(delete e.paused,this.status(e.anim,e.status))}return this},elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||!1!==eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)&&animationElements.splice(i--,1);return this},eve.on("raphael.remove",stopAnimation),eve.on("raphael.clear",stopAnimation),elproto.toString=function(){return"Raphals object"};var tokenRegex,objNotationRegex,doc,f,Set=function(items){if(this.items=[],this.length=0,this.type="set",items)for(var i=0,
ii=items.length;i<ii;i++)!items[i]||items[i].constructor!=elproto.constructor&&items[i].constructor!=Set||(this[this.items.length]=this.items[this.items.length]=items[i],this.length++)},setproto=Set.prototype;for(var method in setproto.push=function(){for(var item,len,i=0,ii=arguments.length;i<ii;i++)!(item=arguments[i])||item.constructor!=elproto.constructor&&item.constructor!=Set||(this[len=this.items.length]=this.items[len]=item,this.length++);return this},setproto.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++)if(!1===callback.call(
thisArg,this.items[i],i))return this;return this},elproto)elproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg)})}}(method));return setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object"))for(var j=0,jj=name.length;j<jj;j++)this.items[j].attr(name[j]);else for(var i=0,ii=this.items.length;i<ii;i++)this.items[i].attr(name,value);return this},setproto.clear=function(){for(;this.length;)this.pop()},setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index,count=mmax(0,mmin(this.length-index,
count));var i,tail=[],todel=[],args=[];for(i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;i<count;i++)todel.push(this[index+i]);for(;i<this.length-index;i++)tail.push(this[index+i]);var arglen=args.length;for(i=0;i<arglen+tail.length;i++)this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen];for(i=this.items.length=this.length-=count-arglen;this[i];)delete this[i++];return new Set(todel)},setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++)if(this[i]==el)return this.splice(i,1),!0},setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var item,collector,
len=this.items.length,i=len,set=this;if(!len)return this;callback&&(collector=function(){!--len&&callback.call(set)}),easing=R.is(easing,"string")?easing:collector;var anim=R.animation(params,ms,easing,collector);for(item=this.items[--i].animate(anim);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim),this.items[i]&&!this.items[i].removed||len--;return this},setproto.insertAfter=function(el){for(var i=this.items.length;i--;)this.items[i].insertAfter(el);return this},setproto.getBBox=function(){for(var x=[],y=[],x2=[],y2=[],i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x),
y.push(box.y),x2.push(box.x+box.width),y2.push(box.y+box.height)}return{x:x=mmin[apply](0,x),y:y=mmin[apply](0,y),x2:x2=mmax[apply](0,x2),y2:y2=mmax[apply](0,y2),width:x2-x,height:y2-y}},setproto.clone=function(s){s=this.paper.set();for(var i=0,ii=this.items.length;i<ii;i++)s.push(this.items[i].clone());return s},setproto.toString=function(){return"Raphals set"},setproto.glow=function(glowConfig){var ret=this.paper.set();return this.forEach(function(shape,index){var g=shape.glow(glowConfig);null!=g&&g.forEach(function(shape2,index2){ret.push(shape2)})}),ret},setproto.isPointInside=function(x,y){var isPointInside=!1;return this.forEach(function(el){if(
el.isPointInside(x,y))return!(isPointInside=!0)}),isPointInside},R.registerFont=function(font){if(!font.face)return font;this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face)font.face[has](prop)&&(fontcopy.face[prop]=font.face[prop]);if(this.fonts[family]?this.fonts[family].push(fontcopy):this.fonts[family]=[fontcopy],!font.svg)for(var glyph in fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10),font.glyphs)if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];if(fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{
l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M"})+"z"},path.k)for(var k in path.k)path[has](k)&&(fontcopy.glyphs[glyph].k[k]=path.k[k])}return font},paperproto.getFont=function(family,weight,style,stretch){if(stretch=stretch||"normal",style=style||"normal",weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400,R.fonts){var thefont,font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts)if(R.fonts[has](fontName)&&name.test(fontName)){font=R.fonts[fontName];break}}if(font)for(var i=0,ii=font.length;i<ii&&((thefont=font[i]
).face["font-weight"]!=weight||thefont.face["font-style"]!=style&&thefont.face["font-style"]||thefont.face["font-stretch"]!=stretch);i++);return thefont}},paperproto.print=function(x,y,string,font,size,origin,letter_spacing,line_spacing){origin=origin||"middle",letter_spacing=mmax(mmin(letter_spacing||0,1),-1),line_spacing=mmax(mmin(line_spacing||1,3),1);var scale,letters=Str(string)[split](E),shift=0,notfirst=0,path=E;if(R.is(font,"string")&&(font=this.getFont(font)),font){scale=(size||16)/font.face["units-per-em"];for(var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+(
"baseline"==origin?lineHeight+ +font.face.descent:lineHeight/2),i=0,ii=letters.length;i<ii;i++){if("\n"==letters[i])notfirst=curr=shift=0,shifty+=lineHeight*line_spacing;else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+font.w*letter_spacing:0,notfirst=1}curr&&curr.d&&(path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale]))}}return this.path(path).attr({fill:"#000",stroke:"none"})},paperproto.add=function(json){if(R.is(json,"array"))for(var j,res=this.set(),i=0,ii=json.length;i<ii;i++
)j=json[i]||{},elements[has](j.type)&&res.push(this[j.type]().attr(j));return res},R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;return token&&R.is(token,"string")&&args.length-1&&(token=token.replace(formatrg,function(str,i){return null==args[++i]?E:args[i]})),token||E},R.fullfill=(tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(str,obj){return String(str).replace(tokenRegex,function(all,key){return function(all,key,obj){var res=obj;return key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName,res&&(
name in res&&(res=res[name]),"function"==typeof res&&isFunc&&(res=res()))}),res=(null==res||res==obj?all:res)+""}(all,key,obj)})}),R.ninja=function(){return oldRaphael.was?g.win.Raphael=oldRaphael.is:delete Raphael,R},R.st=setproto,null==(doc=document).readyState&&doc.addEventListener&&(doc.addEventListener("DOMContentLoaded",f=function(){doc.removeEventListener("DOMContentLoaded",f,!1),doc.readyState="complete"},!1),doc.readyState="loading"),function isLoaded(){/in/.test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload")}(),eve.on("raphael.DOMload",function(){loaded=!0}),function(){if(R.svg){var has="hasOwnProperty",Str=String,
toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,abs=math.abs,pow=math.pow,separator=/[, ]+/,eve=R.eve,E="",S=" ",xlink="http://www.w3.org/1999/xlink",markers={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},markerCounter={};R.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var $=function(el,attr){if(attr)for(var key in"string"==typeof el&&(el=$(el)),attr)attr[has](key)&&("xlink:"==key.substring(0,6)?el.setAttributeNS(xlink,key.substring(6),Str(attr[key])):el.setAttribute(key,
Str(attr[key])));else(el=R._g.doc.createElementNS("http://www.w3.org/2000/svg",el)).style&&(el.style.webkitTapHighlightColor="rgba(0,0,0,0)");return el},addGradientFill=function(element,gradient){var type="linear",id=element.id+gradient,fx=.5,fy=.5,o=element.node,SVG=element.paper,s=o.style,el=R._g.doc.getElementById(id);if(!el){if(gradient=(gradient=Str(gradient).replace(R._radial_gradient,function(all,_fx,_fy){if(type="radial",_fx&&_fy){fx=toFloat(_fx);var dir=2*(.5<(fy=toFloat(_fy)))-1;.25<pow(fx-.5,2)+pow(fy-.5,2)&&(fy=math.sqrt(.25-pow(fx-.5,2))*dir+.5)&&.5!=fy&&(fy=fy.toFixed(5)-1e-5*dir)}return E})).split(/\s*\-\s*/),"linear"==type){
var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null;var vector=[0,0,math.cos(R.rad(angle)),math.sin(R.rad(angle))],max=1/(mmax(abs(vector[2]),abs(vector[3]))||1);vector[2]*=max,vector[3]*=max,vector[2]<0&&(vector[0]=-vector[2],vector[2]=0),vector[3]<0&&(vector[1]=-vector[3],vector[3]=0)}var dots=R._parseDots(gradient);if(!dots)return null;if(id=id.replace(/[\(\)\s,\xb0#]/g,"_"),element.gradient&&id!=element.gradient.id&&(SVG.defs.removeChild(element.gradient),delete element.gradient),!element.gradient){el=$(type+"Gradient",{id:id}),element.gradient=el,$(el,"radial"==type?{fx:fx,fy:fy}:{x1:vector[0],y1:vector[1],x2:vector[2],
y2:vector[3],gradientTransform:element.matrix.invert()}),SVG.defs.appendChild(el);for(var i=0,ii=dots.length;i<ii;i++)el.appendChild($("stop",{offset:dots[i].offset?dots[i].offset:i?"100%":"0%","stop-color":dots[i].color||"#fff"}))}}return $(o,{fill:"url(#"+id+")",opacity:1,"fill-opacity":1}),s.fill=E,s.opacity=1,s.fillOpacity=1},updatePosition=function(o){var bbox=o.getBBox(1);$(o.pattern,{patternTransform:o.matrix.invert()+" translate("+bbox.x+","+bbox.y+")"})},addArrow=function(o,value,isEnd){if("path"==o.type){for(var from,to,dx,refX,attr,values=Str(value).toLowerCase().split("-"),p=o.paper,se=isEnd?"end":"start",node=o.node,attrs=o.attrs,
stroke=attrs["stroke-width"],i=values.length,type="classic",w=3,h=3,t=5;i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":h=5;break;case"narrow":h=2;break;case"long":w=5;break;case"short":w=2}if(attr="open"==type?(w+=2,h+=2,t+=2,dx=1,refX=isEnd?4:1,{fill:"none",stroke:attrs.stroke}):(refX=dx=w/2,{fill:attrs.stroke,stroke:"none"}),o._.arrows?isEnd?(o._.arrows.endPath&&markerCounter[o._.arrows.endPath]--,o._.arrows.endMarker&&markerCounter[o._.arrows.endMarker]--):(o._.arrows.startPath&&markerCounter[o._.arrows.startPath]--,
o._.arrows.startMarker&&markerCounter[o._.arrows.startMarker]--):o._.arrows={},"none"!=type){var pathId="raphael-marker-"+type,markerId="raphael-marker-"+se+type+w+h;R._g.doc.getElementById(pathId)?markerCounter[pathId]++:(p.defs.appendChild($($("path"),{"stroke-linecap":"round",d:markers[type],id:pathId})),markerCounter[pathId]=1);var use,marker=R._g.doc.getElementById(markerId);marker?(markerCounter[markerId]++,use=marker.getElementsByTagName("use")[0]):(marker=$($("marker"),{id:markerId,markerHeight:h,markerWidth:w,orient:"auto",refX:refX,refY:h/2}),use=$($("use"),{"xlink:href":"#"+pathId,transform:(isEnd?"rotate(180 "+w/2+" "+h/2+") ":E
)+"scale("+w/t+","+h/t+")","stroke-width":(1/((w/t+h/t)/2)).toFixed(4)}),marker.appendChild(use),p.defs.appendChild(marker),markerCounter[markerId]=1),$(use,attr);var delta=dx*("diamond"!=type&&"oval"!=type);to=isEnd?(from=o._.arrows.startdx*stroke||0,R.getTotalLength(attrs.path)-delta*stroke):(from=delta*stroke,R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),(attr={})["marker-"+se]="url(#"+markerId+")",(to||from)&&(attr.d=R.getSubpath(attrs.path,from,to)),$(node,attr),o._.arrows[se+"Path"]=pathId,o._.arrows[se+"Marker"]=markerId,o._.arrows[se+"dx"]=delta,o._.arrows[se+"Type"]=type,o._.arrows[se+"String"]=value}else to=isEnd?(
from=o._.arrows.startdx*stroke||0,R.getTotalLength(attrs.path)-from):(from=0,R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),o._.arrows[se+"Path"]&&$(node,{d:R.getSubpath(attrs.path,from,to)}),delete o._.arrows[se+"Path"],delete o._.arrows[se+"Marker"],delete o._.arrows[se+"dx"],delete o._.arrows[se+"Type"],delete o._.arrows[se+"String"];for(attr in markerCounter)if(markerCounter[has](attr)&&!markerCounter[attr]){var item=R._g.doc.getElementById(attr);item&&item.parentNode.removeChild(item)}}},dasharray={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8
,3,1,3,1,3]},addDashes=function(o,value,params){if(value=dasharray[Str(value).toLowerCase()]){for(var width=o.attrs["stroke-width"]||"1",butt={round:width,square:width,butt:0}[o.attrs["stroke-linecap"]||params["stroke-linecap"]]||0,dashes=[],i=value.length;i--;)dashes[i]=value[i]*width+(i%2?1:-1)*butt;$(o.node,{"stroke-dasharray":dashes.join(",")})}},setFillAndStroke=function(o,params){var node=o.node,attrs=o.attrs,vis=node.style.visibility;for(var att in node.style.visibility="hidden",params)if(params[has](att)){if(!R._availableAttrs[has](att))continue;var value=params[att];switch(attrs[att]=value,att){case"blur":o.blur(value);break;case"title":
var title=node.getElementsByTagName("title");if(title.length&&(title=title[0]))title.firstChild.nodeValue=value;else{title=$("title");var val=R._g.doc.createTextNode(value);title.appendChild(val),node.appendChild(title)}break;case"href":case"target":var pn=node.parentNode;if("a"!=pn.tagName.toLowerCase()){var hl=$("a");pn.insertBefore(hl,node),hl.appendChild(node),pn=hl}"target"==att?pn.setAttributeNS(xlink,"show","blank"==value?"new":value):pn.setAttributeNS(xlink,att,value);break;case"cursor":node.style.cursor=value;break;case"transform":o.transform(value);break;case"arrow-start":addArrow(o,value);break;case"arrow-end":addArrow(o,value,1);break
;case"clip-rect":var rect=Str(value).split(separator);if(4==rect.length){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var el=$("clipPath"),rc=$("rect");el.id=R.createUUID(),$(rc,{x:rect[0],y:rect[1],width:rect[2],height:rect[3]}),el.appendChild(rc),o.paper.defs.appendChild(el),$(node,{"clip-path":"url(#"+el.id+")"}),o.clip=rc}if(!value){var path=node.getAttribute("clip-path");if(path){var clip=R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g,E));clip&&clip.parentNode.removeChild(clip),$(node,{"clip-path":E}),delete o.clip}}break;case"path":"path"==o.type&&($(node,{d:value?attrs.path=R._pathToAbsolute(value):"M0,0"}),o._.dirty=1,
o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1)));break;case"width":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fx)break;att="x",value=attrs.x;case"x":attrs.fx&&(value=-attrs.x-(attrs.width||0));case"rx":if("rx"==att&&"rect"==o.type)break;case"cx":node.setAttribute(att,value),o.pattern&&updatePosition(o),o._.dirty=1;break;case"height":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fy)break;att="y",value=attrs.y;case"y":attrs.fy&&(value=-attrs.y-(attrs.height||0));case"ry":if("ry"==att&&"rect"==o.type)break;case"cy":node.setAttribute(att,value),
o.pattern&&updatePosition(o),o._.dirty=1;break;case"r":"rect"==o.type?$(node,{rx:value,ry:value}):node.setAttribute(att,value),o._.dirty=1;break;case"src":"image"==o.type&&node.setAttributeNS(xlink,"href",value);break;case"stroke-width":1==o._.sx&&1==o._.sy||(value/=mmax(abs(o._.sx),abs(o._.sy))||1),o.paper._vbSize&&(value*=o.paper._vbSize),node.setAttribute(att,value),attrs["stroke-dasharray"]&&addDashes(o,attrs["stroke-dasharray"],params),o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));break;case"stroke-dasharray":addDashes(o,value,params);break;case"fill":
var isURL=Str(value).match(R._ISURL);if(isURL){el=$("pattern");var ig=$("image");el.id=R.createUUID(),$(el,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),$(ig,{x:0,y:0,"xlink:href":isURL[1]}),el.appendChild(ig),function(el){R._preload(isURL[1],function(){var w=this.offsetWidth,h=this.offsetHeight;$(el,{width:w,height:h}),$(ig,{width:w,height:h}),o.paper.safari()})}(el),o.paper.defs.appendChild(el),$(node,{fill:"url(#"+el.id+")"}),o.pattern=el,o.pattern&&updatePosition(o);break}var clr=R.getRGB(value);if(clr.error){if(("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value)){if(
"opacity"in attrs||"fill-opacity"in attrs){var gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){var stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":("opacity"in attrs?attrs.opacity:1)*("fill-opacity"in attrs?attrs["fill-opacity"]:1)})}}attrs.gradient=value,attrs.fill="none";break}}else delete params.gradient,delete attrs.gradient,!R.is(attrs.opacity,"undefined")&&R.is(params.opacity,"undefined")&&$(node,{opacity:attrs.opacity}),!R.is(attrs["fill-opacity"],"undefined")&&R.is(params["fill-opacity"],"undefined")&&$(node,{"fill-opacity":attrs["fill-opacity"]});clr[has](
"opacity")&&$(node,{"fill-opacity":1<clr.opacity?clr.opacity/100:clr.opacity});case"stroke":clr=R.getRGB(value),node.setAttribute(att,clr.hex),"stroke"==att&&clr[has]("opacity")&&$(node,{"stroke-opacity":1<clr.opacity?clr.opacity/100:clr.opacity}),"stroke"==att&&o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));break;case"gradient":("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value);break;case"opacity":attrs.gradient&&!attrs[has]("stroke-opacity")&&$(node,{"stroke-opacity":1<value?value/100:value});case"fill-opacity":if(attrs.gradient
){(gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E)))&&(stops=gradient.getElementsByTagName("stop"),$(stops[stops.length-1],{"stop-opacity":value}));break}default:"font-size"==att&&(value=toInt(value,10)+"px");var cssrule=att.replace(/(\-.)/g,function(w){return w.substring(1).toUpperCase()});node.style[cssrule]=value,o._.dirty=1,node.setAttribute(att,value)}}tuneText(o,params),node.style.visibility=vis},tuneText=function(el,params){if("text"==el.type&&(params[has]("text")||params[has]("font")||params[has]("font-size")||params[has]("x")||params[has]("y"))){var a=el.attrs,node=el.node,
computedStyle=node.firstChild?R._g.doc.defaultView.getComputedStyle(node.firstChild,E):void 0,fontSize=computedStyle?toInt(computedStyle.getPropertyValue("font-size"),10):10;if(params[has]("text")){for(a.text=params.text;node.firstChild;)node.removeChild(node.firstChild);for(var tspan,texts=Str(params.text).split("\n"),tspans=[],i=0,ii=texts.length;i<ii;i++)tspan=$("tspan"),i&&$(tspan,{dy:1.2*fontSize,x:a.x}),tspan.appendChild(R._g.doc.createTextNode(texts[i])),node.appendChild(tspan),tspans[i]=tspan}else for(i=0,ii=(tspans=node.getElementsByTagName("tspan")).length;i<ii;i++)i?$(tspans[i],{dy:1.2*fontSize,x:a.x}):$(tspans[0],{dy:0});$(node,{x:a.x,y:a.y}),
el._.dirty=1;var bb=el._getBBox(),dif=a.y-(bb.y+bb.height/2);dif&&R.is(dif,"finite")&&$(tspans[0],{dy:dif})}},Element=function(node,svg){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.matrix=R.matrix(),this.realPath=null,this.paper=svg,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!svg.bottom&&(svg.bottom=this),this.prev=svg.top,svg.top&&(svg.top.next=this),(svg.top=this).next=null},elproto=R.el;(Element.prototype=elproto).constructor=Element,R._engine.path=function(pathString,SVG){var el=$("path");SVG.canvas&&SVG.canvas.appendChild(el);var p=new Element(el,SVG);return p.type="path",
setFillAndStroke(p,{fill:"none",stroke:"#000",path:pathString}),p},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if((deg=Str(deg).split(separator)).length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this.transform(this._.transform.concat([["r",deg,cx,cy]])),this},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if((sx=Str(sx).split(separator)).length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3])),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy
)var bbox=this.getBBox(1);return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this},elproto.translate=function(dx,dy){return this.removed||((dx=Str(dx).split(separator)).length-1&&(dy=toFloat(dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this.transform(this._.transform.concat([["t",dx,dy]]))),this},elproto.transform=function(tstr){var _=this._;if(null==tstr)return _.transform;if(R._extractTransform(this,tstr),this.clip&&$(this.clip,{transform:this.matrix.invert()}),this.pattern&&updatePosition(this),this.node&&$(this.node,{transform:this.matrix}),1!=_.sx||1!=_.sy){
var sw=this.attrs[has]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":sw})}return this},elproto.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},elproto.remove=function(){if(!this.removed&&this.node.parentNode){var paper=this.paper;for(var i in paper.__set__&&paper.__set__.exclude(this),eve.unbind("raphael.*.*."+this.id),this.gradient&&paper.defs.removeChild(this.gradient),R._tear(this,paper),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(
this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;this.removed=!0}},elproto._getBBox=function(){if("none"==this.node.style.display){this.show();var hide=!0}var bbox={};try{bbox=this.node.getBBox()}catch(e){}finally{bbox=bbox||{}}return hide&&this.hide(),bbox},elproto.attr=function(name,value){if(this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if(
"fill"==name&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==name)return this._.transform;for(var names=name.split(separator),out={},i=0,ii=names.length;i<ii;i++)(name=names[i])in this.attrs?out[name]=this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?out[name]=this.paper.customAttributes[name].def:out[name]=R._availableAttrs[name];return ii-1?out:out[names[0]]}if(null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;i<ii;i++)out[name[i]]=this.attr(name[i]);return out}if(null!=value){var params={};params[name]=value}else null!=name&&R.is(name,"object")&&(params=name);for(var key in params
)eve("raphael.attr."+key+"."+this.id,this,params[key]);for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));for(var subkey in this.attrs[key]=params[key],par)par[has](subkey)&&(params[subkey]=par[subkey])}return setFillAndStroke(this,params),this},elproto.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var svg=this.paper
;return svg.top!=this&&R._tofront(this,svg),this},elproto.toBack=function(){if(this.removed)return this;var parent=this.node.parentNode;"a"==parent.tagName.toLowerCase()?parent.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):parent.firstChild!=this.node&&parent.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper);this.paper;return this},elproto.insertAfter=function(element){if(this.removed)return this;var node=element.node||element[element.length-1].node;return node.nextSibling?node.parentNode.insertBefore(this.node,node.nextSibling):node.parentNode.appendChild(this.node),R._insertafter(
this,element,this.paper),this},elproto.insertBefore=function(element){if(this.removed)return this;var node=element.node||element[0].node;return node.parentNode.insertBefore(this.node,node),R._insertbefore(this,element,this.paper),this},elproto.blur=function(size){var t=this;if(0!=+size){var fltr=$("filter"),blur=$("feGaussianBlur");t.attrs.blur=size,fltr.id=R.createUUID(),$(blur,{stdDeviation:+size||1.5}),fltr.appendChild(blur),t.paper.defs.appendChild(fltr),t._blur=fltr,$(t.node,{filter:"url(#"+fltr.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},
R._engine.circle=function(svg,x,y,r){var el=$("circle");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,r:r,fill:"none",stroke:"#000"},res.type="circle",$(el,res.attrs),res},R._engine.rect=function(svg,x,y,w,h,r){var el=$("rect");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},res.type="rect",$(el,res.attrs),res},R._engine.ellipse=function(svg,x,y,rx,ry){var el=$("ellipse");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,rx:rx,ry:ry,fill:"none",
stroke:"#000"},res.type="ellipse",$(el,res.attrs),res},R._engine.image=function(svg,src,x,y,w,h){var el=$("image");$(el,{x:x,y:y,width:w,height:h,preserveAspectRatio:"none"}),el.setAttributeNS(xlink,"href",src),svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,src:src},res.type="image",res},R._engine.text=function(svg,x,y,text){var el=$("text");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,"text-anchor":"middle",text:text,font:R._availableAttrs.font,stroke:"none",fill:"#000"},res.type="text",setFillAndStroke(res,res.attrs),res},
R._engine.setSize=function(width,height){return this.width=width||this.width,this.height=height||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con&&con.container,x=con.x,y=con.y,width=con.width,height=con.height;if(!container)throw new Error("SVG container not found.");var isFloating,cnvs=$("svg"),css="overflow:hidden;";return x=x||0,y=y||0,$(cnvs,{height:height=height||342,version:1.1,width:width=width||512,xmlns:"http://www.w3.org/2000/svg"}),1==container?(
cnvs.style.cssText=css+"position:absolute;left:"+x+"px;top:"+y+"px",R._g.doc.body.appendChild(cnvs),isFloating=1):(cnvs.style.cssText=css+"position:relative",container.firstChild?container.insertBefore(cnvs,container.firstChild):container.appendChild(cnvs)),(container=new R._Paper).width=width,container.height=height,container.canvas=cnvs,container.clear(),container._left=container._top=0,isFloating&&(container.renderfix=function(){}),container.renderfix(),container},R._engine.setViewBox=function(x,y,w,h,fit){eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var vb,sw,size=mmax(w/this.width,h/this.height),top=this.top,
aspectRatio=fit?"xMidYMid meet":"xMinYMin";for(vb=null==x?(this._vbSize&&(size=1),delete this._vbSize,"0 0 "+this.width+S+this.height):(this._vbSize=size,x+S+y+S+w+S+h),$(this.canvas,{viewBox:vb,preserveAspectRatio:aspectRatio});size&&top;)sw="stroke-width"in top.attrs?top.attrs["stroke-width"]:1,top.attr({"stroke-width":sw}),top._.dirty=1,top._.dirtyT=1,top=top.prev;return this._viewBox=[x,y,w,h,!!fit],this},R.prototype.renderfix=function(){var pos,cnvs=this.canvas,s=cnvs.style;try{pos=cnvs.getScreenCTM()||cnvs.createSVGMatrix()}catch(e){pos=cnvs.createSVGMatrix()}var left=-pos.e%1,top=-pos.f%1;(left||top)&&(left&&(this._left=(this._left+left)%1,
s.left=this._left+"px"),top&&(this._top=(this._top+top)%1,s.top=this._top+"px"))},R.prototype.clear=function(){R.eve("raphael.clear",this);for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null,(this.desc=$("desc")).appendChild(R._g.doc.createTextNode("Created with Raphal "+R.version)),c.appendChild(this.desc),c.appendChild(this.defs=$("defs"))},R.prototype.remove=function(){for(var i in eve("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null};var setproto=R.st;for(var method in elproto)elproto[has](method
)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method))}}(),function(){if(R.vml){var has="hasOwnProperty",Str=String,toFloat=parseFloat,math=Math,round=math.round,mmax=math.max,mmin=math.min,abs=math.abs,separator=/[, ]+/,eve=R.eve,S=" ",E="",map={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bites=/([clmz]),?([^clmz]*)/gi,blurregexp=/ progid:\S+Blur\([^\)]+\)/g,val=/-?[^,\s-]+/g,cssDot="position:absolute;left:0;top:0;width:1px;height:1px",zoom=21600,pathTypes={path:1,rect:1,image:1},ovalTypes={circle:1,ellipse:1},compensation=function(
deg,dx,dy){var m=R.matrix();return m.rotate(-deg,.5,.5),{dx:m.x(dx,dy),dy:m.y(dx,dy)}},setCoords=function(p,sx,sy,dx,dy,deg){var _=p._,m=p.matrix,fillpos=_.fillpos,o=p.node,s=o.style,y=1,flip="",kx=zoom/sx,ky=zoom/sy;if(s.visibility="hidden",sx&&sy){if(o.coordsize=abs(kx)+S+abs(ky),s.rotation=deg*(sx*sy<0?-1:1),deg){var c=compensation(deg,dx,dy);dx=c.dx,dy=c.dy}if(sx<0&&(flip+="x"),sy<0&&(flip+=" y")&&(y=-1),s.flip=flip,o.coordorigin=dx*-kx+S+dy*-ky,fillpos||_.fillsize){var fill=o.getElementsByTagName("fill");fill=fill&&fill[0],o.removeChild(fill),fillpos&&(c=compensation(deg,m.x(fillpos[0],fillpos[1]),m.y(fillpos[0],fillpos[1])),
fill.position=c.dx*y+S+c.dy*y),_.fillsize&&(fill.size=_.fillsize[0]*abs(sx)+S+_.fillsize[1]*abs(sy)),o.appendChild(fill)}s.visibility="visible"}};R.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var createNode,addArrow=function(o,value,isEnd){for(var values=Str(value).toLowerCase().split("-"),se=isEnd?"end":"start",i=values.length,type="classic",w="medium",h="medium";i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":case"narrow":h=values[i];break;case"long":case"short":w=values[i]}
var stroke=o.node.getElementsByTagName("stroke")[0];stroke[se+"arrow"]=type,stroke[se+"arrowlength"]=w,stroke[se+"arrowwidth"]=h},setFillAndStroke=function(o,params){o.attrs=o.attrs||{};var node=o.node,a=o.attrs,s=node.style,newpath=pathTypes[o.type]&&(params.x!=a.x||params.y!=a.y||params.width!=a.width||params.height!=a.height||params.cx!=a.cx||params.cy!=a.cy||params.rx!=a.rx||params.ry!=a.ry||params.r!=a.r),isOval=ovalTypes[o.type]&&(a.cx!=params.cx||a.cy!=params.cy||a.r!=params.r||a.rx!=params.rx||a.ry!=params.ry),res=o;for(var par in params)params[has](par)&&(a[par]=params[par]);if(newpath&&(a.path=R._getPath[o.type](o),o._.dirty=1),params.href&&(
node.href=params.href),params.title&&(node.title=params.title),params.target&&(node.target=params.target),params.cursor&&(s.cursor=params.cursor),"blur"in params&&o.blur(params.blur),(params.path&&"path"==o.type||newpath)&&(node.path=function(path){var total=/[ahqstv]/gi,command=R._pathToAbsolute;if(Str(path).match(total)&&(command=R._path2curve),total=/[clmz]/g,command==R._pathToAbsolute&&!Str(path).match(total)){var res=Str(path).replace(bites,function(all,command,args){var vals=[],isMove="m"==command.toLowerCase(),res=map[command];return args.replace(val,function(value){isMove&&2==vals.length&&(res+=vals+map["m"==command?"l":"L"],vals=[]),vals.push(round(
value*zoom))}),res+vals});return res}var p,r,pa=command(path);res=[];for(var i=0,ii=pa.length;i<ii;i++){p=pa[i],"z"==(r=pa[i][0].toLowerCase())&&(r="x");for(var j=1,jj=p.length;j<jj;j++)r+=round(p[j]*zoom)+(j!=jj-1?",":E);res.push(r)}return res.join(S)}(~Str(a.path).toLowerCase().indexOf("r")?R._pathToAbsolute(a.path):a.path),"image"==o.type&&(o._.fillpos=[a.x,a.y],o._.fillsize=[a.width,a.height],setCoords(o,1,1,0,0,0))),"transform"in params&&o.transform(params.transform),isOval){var cx=+a.cx,cy=+a.cy,rx=+a.rx||+a.r||0,ry=+a.ry||+a.r||0;node.path=R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",round((cx-rx)*zoom),round((cy-ry)*zoom),round((cx+rx)*zoom),round((
cy+ry)*zoom),round(cx*zoom)),o._.dirty=1}if("clip-rect"in params){var rect=Str(params["clip-rect"]).split(separator);if(4==rect.length){rect[2]=+rect[2]+ +rect[0],rect[3]=+rect[3]+ +rect[1];var div=node.clipRect||R._g.doc.createElement("div"),dstyle=div.style;dstyle.clip=R.format("rect({1}px {2}px {3}px {0}px)",rect),node.clipRect||(dstyle.position="absolute",dstyle.top=0,dstyle.left=0,dstyle.width=o.paper.width+"px",dstyle.height=o.paper.height+"px",node.parentNode.insertBefore(div,node),div.appendChild(node),node.clipRect=div)}params["clip-rect"]||node.clipRect&&(node.clipRect.style.clip="auto")}if(o.textpath){var textpathStyle=o.textpath.style
;params.font&&(textpathStyle.font=params.font),params["font-family"]&&(textpathStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,E)+'"'),params["font-size"]&&(textpathStyle.fontSize=params["font-size"]),params["font-weight"]&&(textpathStyle.fontWeight=params["font-weight"]),params["font-style"]&&(textpathStyle.fontStyle=params["font-style"])}if("arrow-start"in params&&addArrow(res,params["arrow-start"]),"arrow-end"in params&&addArrow(res,params["arrow-end"],1),
null!=params.opacity||null!=params["stroke-width"]||null!=params.fill||null!=params.src||null!=params.stroke||null!=params["stroke-width"]||null!=params["stroke-opacity"]||null!=params["fill-opacity"]||null!=params["stroke-dasharray"]||null!=params["stroke-miterlimit"]||null!=params["stroke-linejoin"]||null!=params["stroke-linecap"]){var fill=node.getElementsByTagName("fill");if(!(fill=fill&&fill[0])&&(fill=createNode("fill")),"image"==o.type&&params.src&&(fill.src=params.src),params.fill&&(fill.on=!0),null!=fill.on&&"none"!=params.fill&&null!==params.fill||(fill.on=!1),fill.on&&params.fill){var isURL=Str(params.fill).match(R._ISURL);if(isURL){
fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=isURL[1],fill.type="tile";var bbox=o.getBBox(1);fill.position=bbox.x+S+bbox.y,o._.fillpos=[bbox.x,bbox.y],R._preload(isURL[1],function(){o._.fillsize=[this.offsetWidth,this.offsetHeight]})}else fill.color=R.getRGB(params.fill).hex,fill.src=E,fill.type="solid",R.getRGB(params.fill).error&&(res.type in{circle:1,ellipse:1}||"r"!=Str(params.fill).charAt())&&addGradientFill(res,params.fill,fill)&&(a.fill="none",a.gradient=params.fill,fill.rotate=!1)}if("fill-opacity"in params||"opacity"in params){var opacity=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+R.getRGB(params.fill).o+1||2)-1)
;opacity=mmin(mmax(opacity,0),1),fill.opacity=opacity,fill.src&&(fill.color="none")}node.appendChild(fill);var stroke=node.getElementsByTagName("stroke")&&node.getElementsByTagName("stroke")[0],newstroke=!1;!stroke&&(newstroke=stroke=createNode("stroke")),(params.stroke&&"none"!=params.stroke||params["stroke-width"]||null!=params["stroke-opacity"]||params["stroke-dasharray"]||params["stroke-miterlimit"]||params["stroke-linejoin"]||params["stroke-linecap"])&&(stroke.on=!0),("none"==params.stroke||null===params.stroke||null==stroke.on||0==params.stroke||0==params["stroke-width"])&&(stroke.on=!1);var strokeColor=R.getRGB(params.stroke)
;stroke.on&&params.stroke&&(stroke.color=strokeColor.hex),opacity=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+strokeColor.o+1||2)-1);var width=.75*(toFloat(params["stroke-width"])||1);if(opacity=mmin(mmax(opacity,0),1),null==params["stroke-width"]&&(width=a["stroke-width"]),params["stroke-width"]&&(stroke.weight=width),width&&width<1&&(opacity*=width)&&(stroke.weight=1),stroke.opacity=opacity,params["stroke-linejoin"]&&(stroke.joinstyle=params["stroke-linejoin"]||"miter"),stroke.miterlimit=params["stroke-miterlimit"]||8,params["stroke-linecap"]&&(
stroke.endcap="butt"==params["stroke-linecap"]?"flat":"square"==params["stroke-linecap"]?"square":"round"),"stroke-dasharray"in params){var dasharray={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};stroke.dashstyle=dasharray[has](params["stroke-dasharray"])?dasharray[params["stroke-dasharray"]]:E}newstroke&&node.appendChild(stroke)}if("text"==res.type){res.paper.canvas.style.display=E;var span=res.paper.span,fontSize=a.font&&a.font.match(/\d+(?:\.\d*)?(?=px)/);s=span.style,a.font&&(s.font=a.font),a["font-family"]&&(
s.fontFamily=a["font-family"]),a["font-weight"]&&(s.fontWeight=a["font-weight"]),a["font-style"]&&(s.fontStyle=a["font-style"]),fontSize=toFloat(a["font-size"]||fontSize&&fontSize[0])||10,s.fontSize=100*fontSize+"px",res.textpath.string&&(span.innerHTML=Str(res.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var brect=span.getBoundingClientRect();res.W=a.w=(brect.right-brect.left)/100,res.H=a.h=(brect.bottom-brect.top)/100,res.X=a.x,res.Y=a.y+res.H/2,("x"in params||"y"in params)&&(res.path.v=R.format("m{0},{1}l{2},{1}",round(a.x*zoom),round(a.y*zoom),round(a.x*zoom)+1));for(var dirtyattrs=["x","y","text","font",
"font-family","font-weight","font-style","font-size"],d=0,dd=dirtyattrs.length;d<dd;d++)if(dirtyattrs[d]in params){res._.dirty=1;break}switch(a["text-anchor"]){case"start":res.textpath.style["v-text-align"]="left",res.bbx=res.W/2;break;case"end":res.textpath.style["v-text-align"]="right",res.bbx=-res.W/2;break;default:res.textpath.style["v-text-align"]="center",res.bbx=0}res.textpath.style["v-text-kern"]=!0}},addGradientFill=function(o,gradient,fill){o.attrs=o.attrs||{};o.attrs;var pow=Math.pow,type="linear",fxfy=".5 .5";if(o.attrs.gradient=gradient,gradient=(gradient=Str(gradient).replace(R._radial_gradient,function(all,fx,fy){return type="radial",fx&&fy&&(
fx=toFloat(fx),fy=toFloat(fy),.25<pow(fx-.5,2)+pow(fy-.5,2)&&(fy=math.sqrt(.25-pow(fx-.5,2))*(2*(.5<fy)-1)+.5),fxfy=fx+S+fy),E})).split(/\s*\-\s*/),"linear"==type){var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null}var dots=R._parseDots(gradient);if(!dots)return null;if(o=o.shape||o.node,dots.length){o.removeChild(fill),fill.on=!0,fill.method="none",fill.color=dots[0].color,fill.color2=dots[dots.length-1].color;for(var clrs=[],i=0,ii=dots.length;i<ii;i++)dots[i].offset&&clrs.push(dots[i].offset+S+dots[i].color);fill.colors=clrs.length?clrs.join():"0% "+fill.color,fill.angle="radial"==type?(fill.type="gradientTitle",fill.focus="100%"
,fill.focussize="0 0",fill.focusposition=fxfy,0):(fill.type="gradient",(270-angle)%360),o.appendChild(fill)}return 1},Element=function(node,vml){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=vml,this.matrix=R.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!vml.bottom&&(vml.bottom=this),this.prev=vml.top,vml.top&&(vml.top.next=this),(vml.top=this).next=null},elproto=R.el;(Element.prototype=elproto).constructor=Element,elproto.transform=function(tstr){if(null==tstr)return this._.transform;var oldt,vbs=this.paper._viewBoxShift,vbt=vbs?"s"+[vbs.scale,vbs.scale
]+"-1-1t"+[vbs.dx,vbs.dy]:E;vbs&&(oldt=tstr=Str(tstr).replace(/\.{3}|\u2026/g,this._.transform||E)),R._extractTransform(this,vbt+tstr);var split,matrix=this.matrix.clone(),skew=this.skew,o=this.node,isGrad=~Str(this.attrs.fill).indexOf("-"),isPatt=!Str(this.attrs.fill).indexOf("url(");if(matrix.translate(1,1),isPatt||isGrad||"image"==this.type)if(skew.matrix="1 0 0 1",skew.offset="0 0",split=matrix.split(),isGrad&&split.noRotation||!split.isSimple){o.style.filter=matrix.toFilter();var bb=this.getBBox(),bbt=this.getBBox(1),dx=bb.x-bbt.x,dy=bb.y-bbt.y;o.coordorigin=dx*-zoom+S+dy*-zoom,setCoords(this,1,1,dx,dy,0)}else o.style.filter=E,setCoords(this,
split.scalex,split.scaley,split.dx,split.dy,split.rotate);else o.style.filter=E,skew.matrix=Str(matrix),skew.offset=matrix.offset();return oldt&&(this._.transform=oldt),this},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if(null!=deg){if((deg=Str(deg).split(separator)).length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",deg,cx,cy]])),this}},elproto.translate=function(dx,dy){return this.removed||((dx=Str(dx).split(separator)).length-1&&(dy=toFloat(
dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this._.bbox&&(this._.bbox.x+=dx,this._.bbox.y+=dy),this.transform(this._.transform.concat([["t",dx,dy]]))),this},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if((sx=Str(sx).split(separator)).length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3]),isNaN(cx)&&(cx=null),isNaN(cy)&&(cy=null)),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy)var bbox=this.getBBox(1);return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this._.dirtyT=1,this},elproto.hide=function(){return!this.removed&&(
this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&(this.node.style.display=E),this},elproto._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},elproto.remove=function(){if(!this.removed&&this.node.parentNode){for(var i in this.paper.__set__&&this.paper.__set__.exclude(this),R.eve.unbind("raphael.*.*."+this.id),R._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;this.removed=!0}},elproto.attr=function(name,value){if(
this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if("fill"==name&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var names=name.split(separator),out={},i=0,ii=names.length;i<ii;i++)(name=names[i])in this.attrs?out[name]=this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?out[name]=this.paper.customAttributes[name].def:out[name]=R._availableAttrs[name];return ii-1?out:out[names[0]]}if(
this.attrs&&null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;i<ii;i++)out[name[i]]=this.attr(name[i]);return out}var params;for(var key in null!=value&&((params={})[name]=value),null==value&&R.is(name,"object")&&(params=name),params)eve("raphael.attr."+key+"."+this.id,this,params[key]);if(params){for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));for(var subkey in this.attrs[key]=params[key],par)par[has](subkey)&&(params[subkey]=par[subkey])}
params.text&&"text"==this.type&&(this.textpath.string=params.text),setFillAndStroke(this,params)}return this},elproto.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&R._tofront(this,this.paper),this},elproto.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper)),this},elproto.insertAfter=function(element){return this.removed||(element.constructor==R.st.constructor&&(element=element[element.length-1]),
element.node.nextSibling?element.node.parentNode.insertBefore(this.node,element.node.nextSibling):element.node.parentNode.appendChild(this.node),R._insertafter(this,element,this.paper)),this},elproto.insertBefore=function(element){return this.removed||(element.constructor==R.st.constructor&&(element=element[0]),element.node.parentNode.insertBefore(this.node,element.node),R._insertbefore(this,element,this.paper)),this},elproto.blur=function(size){var s=this.node.runtimeStyle,f=s.filter;return f=f.replace(blurregexp,E),0!=+size?(this.attrs.blur=size,s.filter=f+S+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+size||1.5)+")",s.margin=R.format(
"-{0}px 0 0 -{0}px",round(+size||1.5))):(s.filter=f,s.margin=0,delete this.attrs.blur),this},R._engine.path=function(pathString,vml){var el=createNode("shape");el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin=vml.coordorigin;var p=new Element(el,vml),attr={fill:"none",stroke:"#000"};pathString&&(attr.path=pathString),p.type="path",p.path=[],p.Path=E,setFillAndStroke(p,attr),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.rect=function(vml,x,y,w,h,r){var path=R._rectPath(x,y,w,h,r),res=vml.path(path),a=res.attrs;return res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,
res.H=a.height=h,a.r=r,a.path=path,res.type="rect",res},R._engine.ellipse=function(vml,x,y,rx,ry){var res=vml.path();res.attrs;return res.X=x-rx,res.Y=y-ry,res.W=2*rx,res.H=2*ry,res.type="ellipse",setFillAndStroke(res,{cx:x,cy:y,rx:rx,ry:ry}),res},R._engine.circle=function(vml,x,y,r){var res=vml.path();res.attrs;return res.X=x-r,res.Y=y-r,res.W=res.H=2*r,res.type="circle",setFillAndStroke(res,{cx:x,cy:y,r:r}),res},R._engine.image=function(vml,src,x,y,w,h){var path=R._rectPath(x,y,w,h),res=vml.path(path).attr({stroke:"none"}),a=res.attrs,node=res.node,fill=node.getElementsByTagName("fill")[0];return a.src=src,res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,
res.H=a.height=h,a.path=path,res.type="image",fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=src,fill.type="tile",res._.fillpos=[x,y],res._.fillsize=[w,h],node.appendChild(fill),setCoords(res,1,1,0,0,0),res},R._engine.text=function(vml,x,y,text){var el=createNode("shape"),path=createNode("path"),o=createNode("textpath");x=x||0,y=y||0,text=text||"",path.v=R.format("m{0},{1}l{2},{1}",round(x*zoom),round(y*zoom),round(x*zoom)+1),path.textpathok=!0,o.string=Str(text),o.on=!0,el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin="0 0";var p=new Element(el,vml),attr={fill:"#000",stroke:"none",font:R._availableAttrs.font,text:text}
;p.shape=el,p.path=path,p.textpath=o,p.type="text",p.attrs.text=Str(text),p.attrs.x=x,p.attrs.y=y,p.attrs.w=1,p.attrs.h=1,setFillAndStroke(p,attr),el.appendChild(o),el.appendChild(path),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.setSize=function(width,height){var cs=this.canvas.style;return(this.width=width)==+width&&(width+="px"),(this.height=height)==+height&&(height+="px"),cs.width=width,cs.height=height,cs.clip="rect(0 "+width+" "+height+" 0)",this._viewBox&&R._engine.setViewBox.apply(this,this._viewBox),this},R._engine.setViewBox=function(x,y,w,h,fit){R.eve(
"raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var H,W,width=this.width,height=this.height,size=1/mmax(w/width,h/height);return fit&&(w*(H=height/h)<width&&(x-=(width-w*H)/2/H),h*(W=width/w)<height&&(y-=(height-h*W)/2/W)),this._viewBox=[x,y,w,h,!!fit],this._viewBoxShift={dx:-x,dy:-y,scale:size},this.forEach(function(el){el.transform("...")}),this},R._engine.initWin=function(win){var doc=win.document;doc.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!doc.namespaces.rvml&&doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),createNode=function(tagName){return doc.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){
createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},R._engine.initWin(R._g.win),R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con.container,height=con.height,width=con.width,x=con.x,y=con.y;if(!container)throw new Error("VML container not found.");var res=new R._Paper,c=res.canvas=R._g.doc.createElement("div"),cs=c.style;return x=x||0,y=y||0,width=width||512,height=height||342,(res.width=width)==+width&&(width+="px"),(res.height=height)==+height&&(height+="px"),res.coordsize=216e5+S+216e5,res.coordorigin="0 0",res.span=R._g.doc.createElement("span"),
res.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(res.span),cs.cssText=R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",width,height),1==container?(R._g.doc.body.appendChild(c),cs.left=x+"px",cs.top=y+"px",cs.position="absolute"):container.firstChild?container.insertBefore(c,container.firstChild):container.appendChild(c),res.renderfix=function(){},res},R.prototype.clear=function(){R.eve("raphael.clear",this),this.canvas.innerHTML=E,this.span=R._g.doc.createElement("span"),
this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},R.prototype.remove=function(){for(var i in R.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;return!0};var setproto=R.st;for(var method in elproto)elproto[has](method)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method))}}(),oldRaphael.was?g.win.Raphael=R:Raphael=R,
"object"==typeof exports&&(module.exports=R),R}),define("scale.raphael",["jquery","raphael"],function($,Raphael){return function(container,width,height){var nestedWrapper,wrapper=container.style?container:document.getElementById(container);wrapper.style.position||(wrapper.style.position="relative"),wrapper.style.width=width+"px",wrapper.style.height=height+"px",nestedWrapper="VML"===Raphael.type?(wrapper.innerHTML="<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml'></rvml:group>",$(".rvml",$(wrapper))[0]):(wrapper.innerHTML="<div class='svggroup'></div>",$(".svggroup",$(wrapper))[0])
;var vmlDiv,paper=new Raphael(nestedWrapper,width,height);return"SVG"===Raphael.type?paper.canvas.setAttribute("viewBox","0 0 "+width+" "+height):vmlDiv=wrapper.getElementsByTagName("div")[0],paper.changeSize=function(w,h,center,clipping){clipping=!clipping;var ratioW=w/width,ratioH=h/height,scale=ratioW<ratioH?ratioW:ratioH,newHeight=parseInt(height*scale),newWidth=parseInt(width*scale);if("VML"===Raphael.type){var newSize,txt=document.getElementsByTagName("textpath");for(var i in txt){var curr=txt[i];if(curr.style){if(!curr._fontSize){var mod=curr.style.font.split("px");curr._fontSize=parseInt(mod[0]),curr._font=mod[1]}
curr.style.font=curr._fontSize*scale+"px"+curr._font}}newSize=newWidth<newHeight?1e3*newWidth/width:1e3*newHeight/height,newSize=parseInt(newSize),nestedWrapper.style.width=newSize+"px",nestedWrapper.style.height=newSize+"px",clipping&&(nestedWrapper.style.left=parseInt((w-newWidth)/2)+"px",nestedWrapper.style.top=parseInt((h-newHeight)/2)+"px"),vmlDiv.style.overflow="visible"}clipping&&(newWidth=w,newHeight=h),wrapper.style.width=newWidth+"px",wrapper.style.height=newHeight+"px",paper.setSize(newWidth,newHeight),center&&(wrapper.style.position="absolute",wrapper.style.left=parseInt((w-newWidth)/2)+"px",wrapper.style.top=parseInt((h-newHeight)/2)+"px")},
paper.scaleAll=function(amount){paper.changeSize(width*amount,height*amount)},paper.changeSize(width,height),paper.w=width,paper.h=height,paper}}),function(realWindow){"use strict";if(realWindow){var pEventTypes,ie8MatchesSelector,el,window=(el=realWindow.document.createTextNode("")).ownerDocument!==realWindow.document&&"function"==typeof realWindow.wrap&&realWindow.wrap(el)===el?realWindow.wrap(realWindow):realWindow,document=window.document,DocumentFragment=window.DocumentFragment||blank,SVGElement=window.SVGElement||blank,SVGSVGElement=window.SVGSVGElement||blank,SVGElementInstance=window.SVGElementInstance||blank,
HTMLElement=window.HTMLElement||window.Element,PointerEvent=window.PointerEvent||window.MSPointerEvent,hypot=Math.hypot||function(x,y){return Math.sqrt(x*x+y*y)},tmpXY={},documents=[],interactables=[],interactions=[],dynamicDrop=!1,delegatedEvents={},defaultOptions={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:document,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,
maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},autoScroll={interaction:null,i:null,x:0,y:0,scroll:function(){var vx,vy,sx,sy,
options=autoScroll.interaction.target.options[autoScroll.interaction.prepared.name].autoScroll,container=options.container||getWindow(autoScroll.interaction.element),now=(new Date).getTime(),dtx=(now-autoScroll.prevTimeX)/1e3,dty=(now-autoScroll.prevTimeY)/1e3;options.velocity?(vx=options.velocity.x,vy=options.velocity.y):vx=vy=options.speed,sy=vy*dty,(1<=(sx=vx*dtx)||1<=sy)&&(isWindow(container)?container.scrollBy(autoScroll.x*sx,autoScroll.y*sy):container&&(container.scrollLeft+=autoScroll.x*sx,container.scrollTop+=autoScroll.y*sy),1<=sx&&(autoScroll.prevTimeX=now),1<=sy&&(autoScroll.prevTimeY=now)),autoScroll.isScrolling&&(cancelFrame(autoScroll.i),
autoScroll.i=reqFrame(autoScroll.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(interaction){autoScroll.isScrolling=!0,cancelFrame(autoScroll.i),autoScroll.interaction=interaction,autoScroll.prevTimeX=(new Date).getTime(),autoScroll.prevTimeY=(new Date).getTime(),autoScroll.i=reqFrame(autoScroll.scroll)},stop:function(){autoScroll.isScrolling=!1,cancelFrame(autoScroll.i)}},supportsTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsPointerEvent=PointerEvent&&!/Chrome/.test(navigator.userAgent),margin=supportsTouch||supportsPointerEvent?20:10,pointerMoveTolerance=1,prevTouchTime=0,
maxInteractions=1/0,actionCursors=document.all&&!window.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},actionIsEnabled={
drag:!0,resize:!0,gesture:!0},wheelEvent="onmousewheel"in document?"mousewheel":"wheel",eventTypes=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],globalEvents={},isOperaMobile="Opera"==navigator.appName&&supportsTouch&&navigator.userAgent.match("Presto"),isIOS7=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),
prefixedMatchesSelector="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",reqFrame=realWindow.requestAnimationFrame,cancelFrame=realWindow.cancelAnimationFrame,events=function(){var useAttachEvent="attachEvent"in window&&!("addEventListener"in window),addEvent=useAttachEvent?"attachEvent":"addEventListener",removeEvent=useAttachEvent?"detachEvent":"removeEventListener",on=useAttachEvent?"on":"",elements=[],targets=[],attachedListeners=[];function preventDef(){
this.returnValue=!1}function stopProp(){this.cancelBubble=!0}function stopImmProp(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}return{add:function(element,type,listener,useCapture){var elementIndex=indexOf(elements,element),target=targets[elementIndex];if(target||(target={events:{},typeCount:0},elementIndex=elements.push(element)-1,targets.push(target),attachedListeners.push(useAttachEvent?{supplied:[],wrapped:[],useCount:[]}:null)),target.events[type]||(target.events[type]=[],target.typeCount++),!contains(target.events[type],listener)){var ret;if(useAttachEvent){var listeners=attachedListeners[elementIndex],listenerIndex=indexOf(
listeners.supplied,listener),wrapped=listeners.wrapped[listenerIndex]||function(event){event.immediatePropagationStopped||(event.target=event.srcElement,event.currentTarget=element,event.preventDefault=event.preventDefault||preventDef,event.stopPropagation=event.stopPropagation||stopProp,event.stopImmediatePropagation=event.stopImmediatePropagation||stopImmProp,/mouse|click/.test(event.type)&&(event.pageX=event.clientX+getWindow(element).document.documentElement.scrollLeft,event.pageY=event.clientY+getWindow(element).document.documentElement.scrollTop),listener(event))};ret=element[addEvent](on+type,wrapped,Boolean(useCapture)),-1===listenerIndex?(
listeners.supplied.push(listener),listeners.wrapped.push(wrapped),listeners.useCount.push(1)):listeners.useCount[listenerIndex]++}else ret=element[addEvent](type,listener,useCapture||!1);return target.events[type].push(listener),ret}},remove:function remove(element,type,listener,useCapture){var i,listeners,listenerIndex,elementIndex=indexOf(elements,element),target=targets[elementIndex],wrapped=listener;if(target&&target.events)if(useAttachEvent&&(listenerIndex=indexOf((listeners=attachedListeners[elementIndex]).supplied,listener),wrapped=listeners.wrapped[listenerIndex]),"all"!==type){if(target.events[type]){var len=target.events[type].length;if(
"all"===listener){for(i=0;i<len;i++)remove(element,type,target.events[type][i],Boolean(useCapture));return}for(i=0;i<len;i++)if(target.events[type][i]===listener){element[removeEvent](on+type,wrapped,useCapture||!1),target.events[type].splice(i,1),useAttachEvent&&listeners&&(listeners.useCount[listenerIndex]--,0===listeners.useCount[listenerIndex]&&(listeners.supplied.splice(listenerIndex,1),listeners.wrapped.splice(listenerIndex,1),listeners.useCount.splice(listenerIndex,1)));break}target.events[type]&&0===target.events[type].length&&(target.events[type]=null,target.typeCount--)}target.typeCount||(targets.splice(elementIndex,1),elements.splice(elementIndex,
1),attachedListeners.splice(elementIndex,1))}else for(type in target.events)target.events.hasOwnProperty(type)&&remove(element,type,"all")},useAttachEvent:useAttachEvent,_elements:elements,_targets:targets,_attachedListeners:attachedListeners}}(),prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};Interaction.prototype={getPageXY:function(pointer,xy){return getPageXY(pointer,xy)},getClientXY:function(pointer,xy){return getClientXY(pointer,xy)},setEventXY:function(target,ptr){return targetObj=target,getPageXY(pointer=1<(pointers=ptr).length?pointerAverage(pointers):pointers[0],tmpXY),targetObj.page.x=tmpXY.x,targetObj.page.y=tmpXY.y,
getClientXY(pointer,tmpXY),targetObj.client.x=tmpXY.x,targetObj.client.y=tmpXY.y,void(targetObj.timeStamp=(new Date).getTime());var targetObj,pointers,pointer},pointerOver:function(pointer,event,eventTarget){if(!this.prepared.name&&this.mouse){var curMatches=[],curMatchElements=[],prevTargetElement=this.element;this.addPointer(pointer),!this.target||!testIgnore(this.target,this.element,eventTarget)&&testAllow(this.target,this.element,eventTarget)||(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var elementInteractable=interactables.get(eventTarget),elementAction=elementInteractable&&!testIgnore(elementInteractable,eventTarget,
eventTarget)&&testAllow(elementInteractable,eventTarget,eventTarget)&&validateAction(elementInteractable.getAction(pointer,event,this,eventTarget),elementInteractable);elementAction&&!withinInteractionLimit(elementInteractable,eventTarget,elementAction)&&(elementAction=null),elementAction?(this.target=elementInteractable,this.element=eventTarget,this.matches=[],this.matchElements=[]):(interactables.forEachSelector(function(interactable,selector){interactable&&inContext(interactable,eventTarget)&&!testIgnore(interactable,eventTarget,eventTarget)&&testAllow(interactable,eventTarget,eventTarget)&&matchesSelector(eventTarget,selector)&&(curMatches.push(
interactable),curMatchElements.push(eventTarget))}),this.validateSelector(pointer,event,curMatches,curMatchElements)?(this.matches=curMatches,this.matchElements=curMatchElements,this.pointerHover(pointer,event,this.matches,this.matchElements),events.add(eventTarget,supportsPointerEvent?pEventTypes.move:"mousemove",listeners.pointerHover)):this.target&&(nodeContains(prevTargetElement,eventTarget)?(this.pointerHover(pointer,event,this.matches,this.matchElements),events.add(this.element,supportsPointerEvent?pEventTypes.move:"mousemove",listeners.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(
pointer,event,eventTarget,curEventTarget,matches,matchElements){var action,target=this.target;!this.prepared.name&&this.mouse?(this.setEventXY(this.curCoords,[pointer]),matches?action=this.validateSelector(pointer,event,matches,matchElements):target&&(action=validateAction(target.getAction(this.pointers[0],event,this,this.element),this.target)),target&&target.options.styleCursor&&(target._doc.documentElement.style.cursor=action?getActionCursor(action):"")):this.prepared.name&&this.checkAndPreventDefault(event,target,this.element)},pointerOut:function(pointer,event,eventTarget){this.prepared.name||(interactables.get(eventTarget)||events.remove(eventTarget,
supportsPointerEvent?pEventTypes.move:"mousemove",listeners.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(pointer,event,eventTarget,curEventTarget){var action,that=this,eventCopy=events.useAttachEvent?extend({},event):event,element=eventTarget,pointerIndex=this.addPointer(pointer);if(this.holdTimers[pointerIndex]=setTimeout(function(){that.pointerHold(events.useAttachEvent?eventCopy:pointer,eventCopy,eventTarget,curEventTarget)},defaultOptions._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;isElement(element
);){if(element===this.element&&validateAction(this.target.getAction(pointer,event,this,this.element),this.target).name===this.prepared.name)return cancelFrame(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(pointer,event,eventTarget,"down");element=parentElement(element)}if(this.interacting())this.collectEventTargets(pointer,event,eventTarget,"down");else{for(this.setEventXY(this.curCoords,[pointer]),this.downEvent=event;isElement(element)&&!action;)this.matches=[],this.matchElements=[],interactables.forEachSelector(pushMatches),action=this.validateSelector(pointer,event,this.matches,this.matchElements),element=parentElement(
element);if(action)return this.prepared.name=action.name,this.prepared.axis=action.axis,this.prepared.edges=action.edges,this.collectEventTargets(pointer,event,eventTarget,"down"),this.pointerDown(pointer,event,eventTarget,curEventTarget,action);this.downTimes[pointerIndex]=(new Date).getTime(),this.downTargets[pointerIndex]=eventTarget,pointerExtend(this.downPointer,pointer),copyCoords(this.prevCoords,this.curCoords),this.pointerWasMoved=!1,this.collectEventTargets(pointer,event,eventTarget,"down")}function pushMatches(interactable,selector,context){var elements=ie8MatchesSelector?context.querySelectorAll(selector):void 0;inContext(interactable,element
)&&!testIgnore(interactable,element,eventTarget)&&testAllow(interactable,element,eventTarget)&&matchesSelector(element,selector,elements)&&(that.matches.push(interactable),that.matchElements.push(element))}},pointerDown:function(pointer,event,eventTarget,curEventTarget,forceAction){if(forceAction||this.inertiaStatus.active||!this.pointerWasMoved||!this.prepared.name){this.pointerIsDown=!0,this.downEvent=event;var action,pointerIndex=this.addPointer(pointer);if(1<this.pointerIds.length&&this.target._element===this.element){var newAction=validateAction(forceAction||this.target.getAction(pointer,event,this,this.element),this.target);withinInteractionLimit(
this.target,this.element,newAction)&&(action=newAction),this.prepared.name=null}else if(!this.prepared.name){var interactable=interactables.get(curEventTarget);interactable&&!testIgnore(interactable,curEventTarget,eventTarget)&&testAllow(interactable,curEventTarget,eventTarget)&&(action=validateAction(forceAction||interactable.getAction(pointer,event,this,curEventTarget),interactable))&&withinInteractionLimit(interactable,curEventTarget,action)&&(this.target=interactable,this.element=curEventTarget)}var target=this.target,options=target&&target.options;if(!target||!forceAction&&this.prepared.name
)this.inertiaStatus.active&&curEventTarget===this.element&&validateAction(target.getAction(pointer,event,this,this.element),target).name===this.prepared.name&&(cancelFrame(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(event,target,this.element));else{if(action=action||validateAction(forceAction||target.getAction(pointer,event,this,curEventTarget),target,this.element),this.setEventXY(this.startCoords,this.pointers),!action)return;options.styleCursor&&(target._doc.documentElement.style.cursor=getActionCursor(action)),this.resizeAxes="resize"===action.name?action.axis:null,"gesture"===action&&this.pointerIds.length<2&&(
action=null),this.prepared.name=action.name,this.prepared.axis=action.axis,this.prepared.edges=action.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[pointerIndex]=(new Date).getTime(),this.downTargets[pointerIndex]=eventTarget,pointerExtend(this.downPointer,pointer),copyCoords(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(event,target,this.element)}}else this.checkAndPreventDefault(event,this.target,this.element)},setModifications:function(coords,preEnd){var target=this.target,shouldMove=!0,shouldSnap=checkSnap(target,
this.prepared.name)&&(!target.options[this.prepared.name].snap.endOnly||preEnd),shouldRestrict=checkRestrict(target,this.prepared.name)&&(!target.options[this.prepared.name].restrict.endOnly||preEnd);return shouldSnap?this.setSnapping(coords):this.snapStatus.locked=!1,shouldRestrict?this.setRestriction(coords):this.restrictStatus.restricted=!1,shouldSnap&&this.snapStatus.locked&&!this.snapStatus.changed?shouldMove=shouldRestrict&&this.restrictStatus.restricted&&this.restrictStatus.changed:shouldRestrict&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(shouldMove=!1),shouldMove},setStartOffsets:function(action,interactable,element){var width,
height,rect=interactable.getRect(element),origin=getOriginXY(interactable,element),snap=interactable.options[this.prepared.name].snap,restrict=interactable.options[this.prepared.name].restrict;rect?(this.startOffset.left=this.startCoords.page.x-rect.left,this.startOffset.top=this.startCoords.page.y-rect.top,this.startOffset.right=rect.right-this.startCoords.page.x,this.startOffset.bottom=rect.bottom-this.startCoords.page.y,width="width"in rect?rect.width:rect.right-rect.left,height="height"in rect?rect.height:rect.bottom-rect.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0)
;var snapOffset=snap&&"startCoords"===snap.offset?{x:this.startCoords.page.x-origin.x,y:this.startCoords.page.y-origin.y}:snap&&snap.offset||{x:0,y:0};if(rect&&snap&&snap.relativePoints&&snap.relativePoints.length)for(var i=0;i<snap.relativePoints.length;i++)this.snapOffsets.push({x:this.startOffset.left-width*snap.relativePoints[i].x+snapOffset.x,y:this.startOffset.top-height*snap.relativePoints[i].y+snapOffset.y});else this.snapOffsets.push(snapOffset);rect&&restrict.elementRect?(this.restrictOffset.left=this.startOffset.left-width*restrict.elementRect.left,this.restrictOffset.top=this.startOffset.top-height*restrict.elementRect.top,
this.restrictOffset.right=this.startOffset.right-width*(1-restrict.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-height*(1-restrict.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(action,interactable,element){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===action.name?2:1)||(-1===indexOf(interactions,this)&&interactions.push(this),this.prepared.name||this.setEventXY(this.startCoords,this.pointers),this.prepared.name=action.name,this.prepared.axis=action.axis,this.prepared.edges=action.edges,this.target=interactable
,this.element=element,this.setStartOffsets(action.name,interactable,element),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(pointer,event,eventTarget,curEventTarget,preEnd){if(this.inertiaStatus.active){var pageUp=this.inertiaStatus.upCoords.page,clientUp=this.inertiaStatus.upCoords.client,inertiaPosition={pageX:pageUp.x+this.inertiaStatus.sx,pageY:pageUp.y+this.inertiaStatus.sy,clientX:clientUp.x+this.inertiaStatus.sx,clientY:clientUp.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[inertiaPosition])}else this.recordPointer(pointer),this.setEventXY(this.curCoords,
this.pointers);var dx,dy,duplicateMove=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));if(this.pointerIsDown&&!this.pointerWasMoved&&(dx=this.curCoords.client.x-this.startCoords.client.x,dy=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=hypot(dx,dy)>pointerMoveTolerance),duplicateMove||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[pointerIndex]),
this.collectEventTargets(pointer,event,eventTarget,"move")),this.pointerIsDown)if(duplicateMove&&this.pointerWasMoved&&!preEnd)this.checkAndPreventDefault(event,this.target,this.element);else if(setEventDeltas(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||pointer instanceof InteractEvent&&/inertiastart/.test(pointer.type))){if(!this.interacting()&&(setEventDeltas(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){var absX=Math.abs(dx),absY=Math.abs(dy),targetAxis=this.target.options.drag.axis,axis=absY<absX?"x":absX<absY?"y":"xy";if(
"xy"!==axis&&"xy"!==targetAxis&&targetAxis!==axis){this.prepared.name=null;for(var element=eventTarget;isElement(element);){var elementInteractable=interactables.get(element);if(elementInteractable&&elementInteractable!==this.target&&!elementInteractable.options.drag.manualStart&&"drag"===elementInteractable.getAction(this.downPointer,this.downEvent,this,element).name&&checkAxis(axis,elementInteractable)){this.prepared.name="drag",this.target=elementInteractable,this.element=element;break}element=parentElement(element)}if(!this.prepared.name){var thisInteraction=this,getDraggable=function(interactable,selector,context){
var elements=ie8MatchesSelector?context.querySelectorAll(selector):void 0;if(interactable!==thisInteraction.target)return inContext(interactable,eventTarget)&&!interactable.options.drag.manualStart&&!testIgnore(interactable,element,eventTarget)&&testAllow(interactable,element,eventTarget)&&matchesSelector(element,selector,elements)&&"drag"===interactable.getAction(thisInteraction.downPointer,thisInteraction.downEvent,thisInteraction,element).name&&checkAxis(axis,interactable)&&withinInteractionLimit(interactable,element,"drag")?interactable:void 0};for(element=eventTarget;isElement(element);){var selectorInteractable=interactables.forEachSelector(
getDraggable);if(selectorInteractable){this.prepared.name="drag",this.target=selectorInteractable,this.element=element;break}element=parentElement(element)}}}}var starting=!!this.prepared.name&&!this.interacting();if(starting&&(this.target.options[this.prepared.name].manualStart||!withinInteractionLimit(this.target,this.element,this.prepared)))return void this.stop(event);if(this.prepared.name&&this.target)starting&&this.start(this.prepared,this.target,this.element),(this.setModifications(this.curCoords.page,preEnd)||starting)&&(this.prevEvent=this[this.prepared.name+"Move"](event)),this.checkAndPreventDefault(event,this.target,this.element)}copyCoords(
this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&this.autoScrollMove(pointer)}},dragStart:function(event){var dragEvent=new InteractEvent(this,event,"drag","start",this.element);this.dragging=!0,this.target.fire(dragEvent),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var dropEvents=this.getDropEvents(event,dragEvent);return dropEvents.activate&&this.fireActiveDrops(dropEvents.activate),dragEvent},dragMove:function(event){var target=this.target,dragEvent=new InteractEvent(this,event,"drag","move",this.element),draggableElement=this.element,
drop=this.getDrop(dragEvent,event,draggableElement);this.dropTarget=drop.dropzone,this.dropElement=drop.element;var dropEvents=this.getDropEvents(event,dragEvent);return target.fire(dragEvent),dropEvents.leave&&this.prevDropTarget.fire(dropEvents.leave),dropEvents.enter&&this.dropTarget.fire(dropEvents.enter),dropEvents.move&&this.dropTarget.fire(dropEvents.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,dragEvent},resizeStart:function(event){var resizeEvent=new InteractEvent(this,event,"resize","start",this.element);if(this.prepared.edges){var startRect=this.target.getRect(this.element);if(
this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var linkedEdges=extend({},this.prepared.edges);linkedEdges.top=linkedEdges.top||linkedEdges.left&&!linkedEdges.bottom,linkedEdges.left=linkedEdges.left||linkedEdges.top&&!linkedEdges.right,linkedEdges.bottom=linkedEdges.bottom||linkedEdges.right&&!linkedEdges.top,linkedEdges.right=linkedEdges.right||linkedEdges.bottom&&!linkedEdges.left,this.prepared._linkedEdges=linkedEdges}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=startRect.width/startRect.height),this.resizeRects={start:startRect,current:extend({},
startRect),restricted:extend({},startRect),previous:extend({},startRect),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},resizeEvent.rect=this.resizeRects.restricted,resizeEvent.deltaRect=this.resizeRects.delta}return this.target.fire(resizeEvent),this.resizing=!0,resizeEvent},resizeMove:function(event){var resizeEvent=new InteractEvent(this,event,"resize","move",this.element),edges=this.prepared.edges,invert=this.target.options.resize.invert,invertible="reposition"===invert||"negate"===invert;if(edges){var swap,dx=resizeEvent.dx,dy=resizeEvent.dy,start=this.resizeRects.start,current=this.resizeRects.current,restricted=this.resizeRects.restricted,
delta=this.resizeRects.delta,previous=extend(this.resizeRects.previous,restricted),originalEdges=edges;if(this.target.options.resize.preserveAspectRatio){var resizeStartAspectRatio=this.resizeStartAspectRatio;edges=this.prepared._linkedEdges,originalEdges.left&&originalEdges.bottom||originalEdges.right&&originalEdges.top?dy=-dx/resizeStartAspectRatio:originalEdges.left||originalEdges.right?dy=dx/resizeStartAspectRatio:(originalEdges.top||originalEdges.bottom)&&(dx=dy*resizeStartAspectRatio)}else this.target.options.resize.square&&(edges=this.prepared._linkedEdges,
originalEdges.left&&originalEdges.bottom||originalEdges.right&&originalEdges.top?dy=-dx:originalEdges.left||originalEdges.right?dy=dx:(originalEdges.top||originalEdges.bottom)&&(dx=dy));if(edges.top&&(current.top+=dy),edges.bottom&&(current.bottom+=dy),edges.left&&(current.left+=dx),edges.right&&(current.right+=dx),invertible){if(extend(restricted,current),"reposition"===invert)restricted.top>restricted.bottom&&(swap=restricted.top,restricted.top=restricted.bottom,restricted.bottom=swap),restricted.left>restricted.right&&(swap=restricted.left,restricted.left=restricted.right,restricted.right=swap)}else restricted.top=Math.min(current.top,start.bottom),
restricted.bottom=Math.max(current.bottom,start.top),restricted.left=Math.min(current.left,start.right),restricted.right=Math.max(current.right,start.left);for(var edge in restricted.width=restricted.right-restricted.left,restricted.height=restricted.bottom-restricted.top,restricted)delta[edge]=restricted[edge]-previous[edge];resizeEvent.edges=this.prepared.edges,resizeEvent.rect=restricted,resizeEvent.deltaRect=delta}return this.target.fire(resizeEvent),resizeEvent},gestureStart:function(event){var gestureEvent=new InteractEvent(this,event,"gesture","start",this.element);return gestureEvent.ds=0,
this.gesture.startDistance=this.gesture.prevDistance=gestureEvent.distance,this.gesture.startAngle=this.gesture.prevAngle=gestureEvent.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(gestureEvent),gestureEvent},gestureMove:function(event){return this.pointerIds.length?((gestureEvent=new InteractEvent(this,event,"gesture","move",this.element)).ds=gestureEvent.scale-this.gesture.scale,this.target.fire(gestureEvent),this.gesture.prevAngle=gestureEvent.angle,this.gesture.prevDistance=gestureEvent.distance,gestureEvent.scale===1/0||null===gestureEvent.scale||void 0===gestureEvent.scale||isNaN(gestureEvent.scale)||(
this.gesture.scale=gestureEvent.scale),gestureEvent):this.prevEvent;var gestureEvent},pointerHold:function(pointer,event,eventTarget){this.collectEventTargets(pointer,event,eventTarget,"hold")},pointerUp:function(pointer,event,eventTarget,curEventTarget){var pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));clearTimeout(this.holdTimers[pointerIndex]),this.collectEventTargets(pointer,event,eventTarget,"up"),this.collectEventTargets(pointer,event,eventTarget,"tap"),this.pointerEnd(pointer,event,eventTarget,curEventTarget),this.removePointer(pointer)},pointerCancel:function(pointer,event,eventTarget,curEventTarget){
var pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));clearTimeout(this.holdTimers[pointerIndex]),this.collectEventTargets(pointer,event,eventTarget,"cancel"),this.pointerEnd(pointer,event,eventTarget,curEventTarget),this.removePointer(pointer)},ie8Dblclick:function(pointer,event,eventTarget){this.prevTap&&event.clientX===this.prevTap.clientX&&event.clientY===this.prevTap.clientY&&eventTarget===this.prevTap.target&&(this.downTargets[0]=eventTarget,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(pointer,event,eventTarget,"tap"))},pointerEnd:function(pointer,event,eventTarget,curEventTarget){var endEvent,
target=this.target,options=target&&target.options,inertiaOptions=options&&this.prepared.name&&options[this.prepared.name].inertia,inertiaStatus=this.inertiaStatus;if(this.interacting()){if(inertiaStatus.active&&!inertiaStatus.ending)return;var pointerSpeed,inertiaPossible,inertia,now=(new Date).getTime(),smoothEnd=!1,endSnap=checkSnap(target,this.prepared.name)&&options[this.prepared.name].snap.endOnly,endRestrict=checkRestrict(target,this.prepared.name)&&options[this.prepared.name].restrict.endOnly,dx=0,dy=0;if(pointerSpeed=this.dragging?"x"===options.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===options.drag.axis?Math.abs(
this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,inertia=(inertiaPossible=inertiaOptions&&inertiaOptions.enabled&&"gesture"!==this.prepared.name&&event!==inertiaStatus.startEvent)&&now-this.curCoords.timeStamp<50&&pointerSpeed>inertiaOptions.minSpeed&&pointerSpeed>inertiaOptions.endSpeed,inertiaPossible&&!inertia&&(endSnap||endRestrict)){var snapRestrict={};snapRestrict.snap=snapRestrict.restrict=snapRestrict,endSnap&&(this.setSnapping(this.curCoords.page,snapRestrict),snapRestrict.locked&&(dx+=snapRestrict.dx,dy+=snapRestrict.dy)),endRestrict&&(this.setRestriction(this.curCoords.page,snapRestrict),
snapRestrict.restricted&&(dx+=snapRestrict.dx,dy+=snapRestrict.dy)),(dx||dy)&&(smoothEnd=!0)}if(inertia||smoothEnd){if(copyCoords(inertiaStatus.upCoords,this.curCoords),this.pointers[0]=inertiaStatus.startEvent=new InteractEvent(this,event,this.prepared.name,"inertiastart",this.element),inertiaStatus.t0=now,target.fire(inertiaStatus.startEvent),inertia){inertiaStatus.vx0=this.pointerDelta.client.vx,inertiaStatus.vy0=this.pointerDelta.client.vy,inertiaStatus.v0=pointerSpeed,this.calcInertia(inertiaStatus);var statusObject,page=extend({},this.curCoords.page),origin=getOriginXY(target,this.element);if(page.x=page.x+inertiaStatus.xe-origin.x,
page.y=page.y+inertiaStatus.ye-origin.y,(statusObject={useStatusXY:!0,x:page.x,y:page.y,dx:0,dy:0,snap:null}).snap=statusObject,dx=dy=0,endSnap){var snap=this.setSnapping(this.curCoords.page,statusObject);snap.locked&&(dx+=snap.dx,dy+=snap.dy)}if(endRestrict){var restrict=this.setRestriction(this.curCoords.page,statusObject);restrict.restricted&&(dx+=restrict.dx,dy+=restrict.dy)}inertiaStatus.modifiedXe+=dx,inertiaStatus.modifiedYe+=dy,inertiaStatus.i=reqFrame(this.boundInertiaFrame)}else inertiaStatus.smoothEnd=!0,inertiaStatus.xe=dx,inertiaStatus.ye=dy,inertiaStatus.sx=inertiaStatus.sy=0,inertiaStatus.i=reqFrame(this.boundSmoothEndFrame);return void(
inertiaStatus.active=!0)}(endSnap||endRestrict)&&this.pointerMove(pointer,event,eventTarget,curEventTarget,!0)}if(this.dragging){endEvent=new InteractEvent(this,event,"drag","end",this.element);var draggableElement=this.element,drop=this.getDrop(endEvent,event,draggableElement);this.dropTarget=drop.dropzone,this.dropElement=drop.element;var dropEvents=this.getDropEvents(event,endEvent);dropEvents.leave&&this.prevDropTarget.fire(dropEvents.leave),dropEvents.enter&&this.dropTarget.fire(dropEvents.enter),dropEvents.drop&&this.dropTarget.fire(dropEvents.drop),dropEvents.deactivate&&this.fireActiveDrops(dropEvents.deactivate),target.fire(endEvent)
}else this.resizing?(endEvent=new InteractEvent(this,event,"resize","end",this.element),target.fire(endEvent)):this.gesturing&&(endEvent=new InteractEvent(this,event,"gesture","end",this.element),target.fire(endEvent));this.stop(event)},collectDrops:function(element){var i,drops=[],elements=[];for(element=element||this.element,i=0;i<interactables.length;i++)if(interactables[i].options.drop.enabled){var current=interactables[i],accept=current.options.drop.accept;if(!(isElement(accept)&&accept!==element||isString(accept)&&!matchesSelector(element,accept)))for(var dropElements=current.selector?current._context.querySelectorAll(current.selector):[
current._element],j=0,len=dropElements.length;j<len;j++){var currentElement=dropElements[j];currentElement!==element&&(drops.push(current),elements.push(currentElement))}}return{dropzones:drops,elements:elements}},fireActiveDrops:function(event){var i,current,currentElement,prevElement;for(i=0;i<this.activeDrops.dropzones.length;i++)current=this.activeDrops.dropzones[i],(currentElement=this.activeDrops.elements[i])!==prevElement&&(event.target=currentElement,current.fire(event)),prevElement=currentElement},setActiveDrops:function(dragElement){var possibleDrops=this.collectDrops(dragElement,!0);this.activeDrops.dropzones=possibleDrops.dropzones,
this.activeDrops.elements=possibleDrops.elements,this.activeDrops.rects=[];for(var i=0;i<this.activeDrops.dropzones.length;i++)this.activeDrops.rects[i]=this.activeDrops.dropzones[i].getRect(this.activeDrops.elements[i])},getDrop:function(dragEvent,event,dragElement){var validDrops=[];dynamicDrop&&this.setActiveDrops(dragElement);for(var j=0;j<this.activeDrops.dropzones.length;j++){var current=this.activeDrops.dropzones[j],currentElement=this.activeDrops.elements[j],rect=this.activeDrops.rects[j];validDrops.push(current.dropCheck(dragEvent,event,this.target,dragElement,currentElement,rect)?currentElement:null)}var dropIndex=function(elements){var dropzone,
parent,child,i,n,deepestZone=elements[0],index=deepestZone?0:-1,deepestZoneParents=[],dropzoneParents=[];for(i=1;i<elements.length;i++)if((dropzone=elements[i])&&dropzone!==deepestZone)if(deepestZone){if(dropzone.parentNode!==dropzone.ownerDocument)if(deepestZone.parentNode!==dropzone.ownerDocument){if(!deepestZoneParents.length)for(parent=deepestZone;parent.parentNode&&parent.parentNode!==parent.ownerDocument;)deepestZoneParents.unshift(parent),parent=parent.parentNode;if(deepestZone instanceof HTMLElement&&dropzone instanceof SVGElement&&!(dropzone instanceof SVGSVGElement)){if(dropzone===deepestZone.parentNode)continue;parent=dropzone.ownerSVGElement
}else parent=dropzone;for(dropzoneParents=[];parent.parentNode!==parent.ownerDocument;)dropzoneParents.unshift(parent),parent=parent.parentNode;for(n=0;dropzoneParents[n]&&dropzoneParents[n]===deepestZoneParents[n];)n++;var parents=[dropzoneParents[n-1],dropzoneParents[n],deepestZoneParents[n]];for(child=parents[0].lastChild;child;){if(child===parents[1]){deepestZone=dropzone,index=i,deepestZoneParents=[];break}if(child===parents[2])break;child=child.previousSibling}}else deepestZone=dropzone,index=i}else deepestZone=dropzone,index=i;return index}(validDrops);return{dropzone:this.activeDrops.dropzones[dropIndex]||null,
element:this.activeDrops.elements[dropIndex]||null}},getDropEvents:function(pointerEvent,dragEvent){var dropEvents={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(dropEvents.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dragleave"},dragEvent.dragLeave=this.prevDropElement,dragEvent.prevDropzone=this.prevDropTarget),this.dropTarget&&(dropEvents.enter={target:this.dropElement,dropzone:this.dropTarget,
relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dragenter"},dragEvent.dragEnter=this.dropElement,dragEvent.dropzone=this.dropTarget)),"dragend"===dragEvent.type&&this.dropTarget&&(dropEvents.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"drop"},dragEvent.dropzone=this.dropTarget),"dragstart"===dragEvent.type&&(dropEvents.activate={target:null,dropzone:null,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,
dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dropactivate"}),"dragend"===dragEvent.type&&(dropEvents.deactivate={target:null,dropzone:null,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,timeStamp:dragEvent.timeStamp,type:"dropdeactivate"}),"dragmove"===dragEvent.type&&this.dropTarget&&(dropEvents.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:dragEvent.target,draggable:dragEvent.interactable,dragEvent:dragEvent,interaction:this,dragmove:dragEvent,timeStamp:dragEvent.timeStamp,type:"dropmove"},dragEvent.dropzone=this.dropTarget),dropEvents},
currentAction:function(){return(this.dragging?"drag":this.resizing&&"resize")||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null,this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(event){if(this.interacting()){autoScroll.stop(),this.matches=[],this.matchElements=[];var target=this.target;target.options.styleCursor&&(target._doc.documentElement.style.cursor=""),event&&isFunction(event.preventDefault)&&this.checkAndPreventDefault(event,target,this.element),this.dragging&&(
this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets(),this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var i=0;i<this.pointers.length;i++)-1===indexOf(this.pointerIds,getPointerId(this.pointers[i]))&&this.pointers.splice(i,1)},inertiaFrame:function(){var startX,startY,cpX,cpY,endX,endY,position,inertiaStatus=this.inertiaStatus,lambda=this.target.options[this.prepared.name].inertia.resistance,t=(new Date).getTime()/1e3-inertiaStatus.t0;if(t<inertiaStatus.te){var progress=1-(
Math.exp(-lambda*t)-inertiaStatus.lambda_v0)/inertiaStatus.one_ve_v0;if(inertiaStatus.modifiedXe===inertiaStatus.xe&&inertiaStatus.modifiedYe===inertiaStatus.ye)inertiaStatus.sx=inertiaStatus.xe*progress,inertiaStatus.sy=inertiaStatus.ye*progress;else{var quadPoint=(startY=startX=0,cpX=inertiaStatus.xe,cpY=inertiaStatus.ye,endX=inertiaStatus.modifiedXe,endY=inertiaStatus.modifiedYe,{x:_getQBezierValue(position=progress,startX,cpX,endX),y:_getQBezierValue(position,startY,cpY,endY)});inertiaStatus.sx=quadPoint.x,inertiaStatus.sy=quadPoint.y}this.pointerMove(inertiaStatus.startEvent,inertiaStatus.startEvent),inertiaStatus.i=reqFrame(this.boundInertiaFrame)
}else inertiaStatus.ending=!0,inertiaStatus.sx=inertiaStatus.modifiedXe,inertiaStatus.sy=inertiaStatus.modifiedYe,this.pointerMove(inertiaStatus.startEvent,inertiaStatus.startEvent),this.pointerEnd(inertiaStatus.startEvent,inertiaStatus.startEvent),inertiaStatus.active=inertiaStatus.ending=!1},smoothEndFrame:function(){var inertiaStatus=this.inertiaStatus,t=(new Date).getTime()-inertiaStatus.t0,duration=this.target.options[this.prepared.name].inertia.smoothEndDuration;t<duration?(inertiaStatus.sx=easeOutQuad(t,0,inertiaStatus.xe,duration),inertiaStatus.sy=easeOutQuad(t,0,inertiaStatus.ye,duration),this.pointerMove(inertiaStatus.startEvent,
inertiaStatus.startEvent),inertiaStatus.i=reqFrame(this.boundSmoothEndFrame)):(inertiaStatus.ending=!0,inertiaStatus.sx=inertiaStatus.xe,inertiaStatus.sy=inertiaStatus.ye,this.pointerMove(inertiaStatus.startEvent,inertiaStatus.startEvent),this.pointerEnd(inertiaStatus.startEvent,inertiaStatus.startEvent),inertiaStatus.smoothEnd=inertiaStatus.active=inertiaStatus.ending=!1)},addPointer:function(pointer){var id=getPointerId(pointer),index=this.mouse?0:indexOf(this.pointerIds,id);return-1===index&&(index=this.pointerIds.length),this.pointerIds[index]=id,this.pointers[index]=pointer,index},removePointer:function(pointer){var id=getPointerId(pointer),
index=this.mouse?0:indexOf(this.pointerIds,id);-1!==index&&(this.pointers.splice(index,1),this.pointerIds.splice(index,1),this.downTargets.splice(index,1),this.downTimes.splice(index,1),this.holdTimers.splice(index,1))},recordPointer:function(pointer){var index=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));-1!==index&&(this.pointers[index]=pointer)},collectEventTargets:function(pointer,event,eventTarget,eventType){var pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer));if("tap"!==eventType||!this.pointerWasMoved&&this.downTargets[pointerIndex]&&this.downTargets[pointerIndex]===eventTarget){for(var targets=[],elements=[],
element=eventTarget;element;)interact.isSet(element)&&interact(element)._iEvents[eventType]&&(targets.push(interact(element)),elements.push(element)),interactables.forEachSelector(collectSelectors),element=parentElement(element);(targets.length||"tap"===eventType)&&this.firePointers(pointer,event,eventTarget,targets,elements,eventType)}function collectSelectors(interactable,selector,context){var els=ie8MatchesSelector?context.querySelectorAll(selector):void 0;interactable._iEvents[eventType]&&isElement(element)&&inContext(interactable,element)&&!testIgnore(interactable,element,eventTarget)&&testAllow(interactable,element,eventTarget)&&matchesSelector(element
,selector,els)&&(targets.push(interactable),elements.push(element))}},firePointers:function(pointer,event,eventTarget,targets,elements,eventType){var i,interval,createNewDoubleTap,pointerIndex=this.mouse?0:indexOf(this.pointerIds,getPointerId(pointer)),pointerEvent={};for("doubletap"===eventType?pointerEvent=pointer:(pointerExtend(pointerEvent,event),event!==pointer&&pointerExtend(pointerEvent,pointer),pointerEvent.preventDefault=preventOriginalDefault,pointerEvent.stopPropagation=InteractEvent.prototype.stopPropagation,pointerEvent.stopImmediatePropagation=InteractEvent.prototype.stopImmediatePropagation,pointerEvent.interaction=this,
pointerEvent.timeStamp=(new Date).getTime(),pointerEvent.originalEvent=event,pointerEvent.originalPointer=pointer,pointerEvent.type=eventType,pointerEvent.pointerId=getPointerId(pointer),pointerEvent.pointerType=this.mouse?"mouse":supportsPointerEvent?isString(pointer.pointerType)?pointer.pointerType:[,,"touch","pen","mouse"][pointer.pointerType]:"touch"),"tap"===eventType&&(pointerEvent.dt=pointerEvent.timeStamp-this.downTimes[pointerIndex],interval=pointerEvent.timeStamp-this.tapTime,createNewDoubleTap=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===pointerEvent.target&&interval<500),pointerEvent.double=createNewDoubleTap,
this.tapTime=pointerEvent.timeStamp),i=0;i<targets.length&&(pointerEvent.currentTarget=elements[i],pointerEvent.interactable=targets[i],targets[i].fire(pointerEvent),!(pointerEvent.immediatePropagationStopped||pointerEvent.propagationStopped&&elements[i+1]!==pointerEvent.currentTarget));i++);if(createNewDoubleTap){var doubleTap={};extend(doubleTap,pointerEvent),doubleTap.dt=interval,doubleTap.type="doubletap",this.collectEventTargets(doubleTap,event,eventTarget,"doubletap"),this.prevTap=doubleTap}else"tap"===eventType&&(this.prevTap=pointerEvent)},validateSelector:function(pointer,event,matches,matchElements){for(var i=0,len=matches.length;i<len;i++){
var match=matches[i],matchElement=matchElements[i],action=validateAction(match.getAction(pointer,event,this,matchElement),match);if(action&&withinInteractionLimit(match,matchElement,action))return this.target=match,this.element=matchElement,action}},setSnapping:function(pageCoords,status){var target,page,i,snap=this.target.options[this.prepared.name].snap,targets=[];if((status=status||this.snapStatus).useStatusXY)page={x:status.x,y:status.y};else{var origin=getOriginXY(this.target,this.element);(page=extend({},pageCoords)).x-=origin.x,page.y-=origin.y}status.realX=page.x,status.realY=page.y,page.x=page.x-this.inertiaStatus.resumeDx,
page.y=page.y-this.inertiaStatus.resumeDy;for(var len=snap.targets?snap.targets.length:0,relIndex=0;relIndex<this.snapOffsets.length;relIndex++){var relative={x:page.x-this.snapOffsets[relIndex].x,y:page.y-this.snapOffsets[relIndex].y};for(i=0;i<len;i++)(target=isFunction(snap.targets[i])?snap.targets[i](relative.x,relative.y,this):snap.targets[i])&&targets.push({x:isNumber(target.x)?target.x+this.snapOffsets[relIndex].x:relative.x,y:isNumber(target.y)?target.y+this.snapOffsets[relIndex].y:relative.y,range:isNumber(target.range)?target.range:snap.range})}var snapChanged,closest={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(i=0,
len=targets.length;i<len;i++){var range=(target=targets[i]).range,dx=target.x-page.x,dy=target.y-page.y,distance=hypot(dx,dy),inRange=distance<=range;range===1/0&&closest.inRange&&closest.range!==1/0&&(inRange=!1),closest.target&&!(inRange?closest.inRange&&range!==1/0?distance/range<closest.distance/closest.range:range===1/0&&closest.range!==1/0||distance<closest.distance:!closest.inRange&&distance<closest.distance)||(range===1/0&&(inRange=!0),closest.target=target,closest.distance=distance,closest.range=range,closest.inRange=inRange,closest.dx=dx,closest.dy=dy,status.range=range)}return closest.target?(
snapChanged=status.snappedX!==closest.target.x||status.snappedY!==closest.target.y,status.snappedX=closest.target.x,status.snappedY=closest.target.y):(snapChanged=!0,status.snappedX=NaN,status.snappedY=NaN),status.dx=closest.dx,status.dy=closest.dy,status.changed=snapChanged||closest.inRange&&!status.locked,status.locked=closest.inRange,status},setRestriction:function(pageCoords,status){var page,rect,restrictedX,restrictedY,target=this.target,restrict=target&&target.options[this.prepared.name].restrict,restriction=restrict&&restrict.restriction;return restriction?(page=page=(status=status||this.restrictStatus).useStatusXY?{x:status.x,y:status.y}:extend({},
pageCoords),status.snap&&status.snap.locked&&(page.x+=status.snap.dx||0,page.y+=status.snap.dy||0),page.x-=this.inertiaStatus.resumeDx,page.y-=this.inertiaStatus.resumeDy,status.dx=0,status.dy=0,status.restricted=!1,isString(restriction)&&!(restriction="parent"===restriction?parentElement(this.element):"self"===restriction?target.getRect(this.element):closest(this.element,restriction))||(isFunction(restriction)&&(restriction=restriction(page.x,page.y,this.element)),isElement(restriction)&&(restriction=getElementRect(restriction)),restrictedY=(rect=restriction)?"x"in restriction&&"y"in restriction?(restrictedX=Math.max(Math.min(
rect.x+rect.width-this.restrictOffset.right,page.x),rect.x+this.restrictOffset.left),Math.max(Math.min(rect.y+rect.height-this.restrictOffset.bottom,page.y),rect.y+this.restrictOffset.top)):(restrictedX=Math.max(Math.min(rect.right-this.restrictOffset.right,page.x),rect.left+this.restrictOffset.left),Math.max(Math.min(rect.bottom-this.restrictOffset.bottom,page.y),rect.top+this.restrictOffset.top)):(restrictedX=page.x,page.y),status.dx=restrictedX-page.x,status.dy=restrictedY-page.y,status.changed=status.restrictedX!==restrictedX||status.restrictedY!==restrictedY,status.restricted=!(!status.dx&&!status.dy),status.restrictedX=restrictedX,
status.restrictedY=restrictedY),status):status},checkAndPreventDefault:function(event,interactable,element){if(interactable=interactable||this.target){var options=interactable.options,prevent=options.preventDefault;if("auto"!==prevent||!element||/^(input|select|textarea)$/i.test(event.target.nodeName))"always"!==prevent||event.preventDefault();else{if(/down|start/i.test(event.type)&&"drag"===this.prepared.name&&"xy"!==options.drag.axis)return;if(options[this.prepared.name]&&options[this.prepared.name].manualStart&&!this.interacting())return;event.preventDefault()}}},calcInertia:function(status){
var inertiaOptions=this.target.options[this.prepared.name].inertia,lambda=inertiaOptions.resistance,inertiaDur=-Math.log(inertiaOptions.endSpeed/status.v0)/lambda;status.x0=this.prevEvent.pageX,status.y0=this.prevEvent.pageY,status.t0=status.startEvent.timeStamp/1e3,status.sx=status.sy=0,status.modifiedXe=status.xe=(status.vx0-inertiaDur)/lambda,status.modifiedYe=status.ye=(status.vy0-inertiaDur)/lambda,status.te=inertiaDur,status.lambda_v0=lambda/status.v0,status.one_ve_v0=1-inertiaOptions.endSpeed/status.v0},autoScrollMove:function(pointer){if(this.interacting()&&function(interactable,action){var options=interactable.options;return/^resize/.test(action)&&(
action="resize"),options[action].autoScroll&&options[action].autoScroll.enabled}(this.target,this.prepared.name))if(this.inertiaStatus.active)autoScroll.x=autoScroll.y=0;else{var top,right,bottom,left,options=this.target.options[this.prepared.name].autoScroll,container=options.container||getWindow(this.element);if(isWindow(container))left=pointer.clientX<autoScroll.margin,top=pointer.clientY<autoScroll.margin,right=pointer.clientX>container.innerWidth-autoScroll.margin,bottom=pointer.clientY>container.innerHeight-autoScroll.margin;else{var rect=getElementClientRect(container);left=pointer.clientX<rect.left+autoScroll.margin,
top=pointer.clientY<rect.top+autoScroll.margin,right=pointer.clientX>rect.right-autoScroll.margin,bottom=pointer.clientY>rect.bottom-autoScroll.margin}autoScroll.x=right?1:left?-1:0,autoScroll.y=bottom?1:top?-1:0,autoScroll.isScrolling||(autoScroll.margin=options.margin,autoScroll.speed=options.speed,autoScroll.start(this))}},_updateEventTargets:function(target,currentTarget){this._eventTarget=target,this._curEventTarget=currentTarget}},InteractEvent.prototype={preventDefault:blank,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var listeners={},
interactionListeners=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer","autoScrollMove"],i=0,len=interactionListeners.length;i<len;i++){var name=interactionListeners[i];listeners[name]=doOnInteractions(name)}interactables.indexOfElement=function(element,context){context=context||document;for(var i=0;i<this.length;i++){var interactable=this[i];if(
interactable.selector===element&&interactable._context===context||!interactable.selector&&interactable._element===element)return i}return-1},interactables.get=function(element,options){return this[this.indexOfElement(element,options&&options.context)]},interactables.forEachSelector=function(callback){for(var i=0;i<this.length;i++){var interactable=this[i];if(interactable.selector){var ret=callback(interactable,interactable.selector,interactable._context,i,this);if(void 0!==ret)return ret}}},(Interactable.prototype={setOnEvents:function(action,phases){return"drop"===action?(isFunction(phases.ondrop)&&(this.ondrop=phases.ondrop),isFunction(
phases.ondropactivate)&&(this.ondropactivate=phases.ondropactivate),isFunction(phases.ondropdeactivate)&&(this.ondropdeactivate=phases.ondropdeactivate),isFunction(phases.ondragenter)&&(this.ondragenter=phases.ondragenter),isFunction(phases.ondragleave)&&(this.ondragleave=phases.ondragleave),isFunction(phases.ondropmove)&&(this.ondropmove=phases.ondropmove)):(action="on"+action,isFunction(phases.onstart)&&(this[action+"start"]=phases.onstart),isFunction(phases.onmove)&&(this[action+"move"]=phases.onmove),isFunction(phases.onend)&&(this[action+"end"]=phases.onend),isFunction(phases.oninertiastart)&&(this[action+"inertiastart"]=phases.oninertiastart)),this},
draggable:function(options){return isObject(options)?(this.options.drag.enabled=!1!==options.enabled,this.setPerAction("drag",options),this.setOnEvents("drag",options),/^x$|^y$|^xy$/.test(options.axis)?this.options.drag.axis=options.axis:null===options.axis&&delete this.options.drag.axis,this):isBool(options)?(this.options.drag.enabled=options,this):this.options.drag},setPerAction:function(action,options){for(var option in options)option in defaultOptions[action]&&(isObject(options[option])?(this.options[action][option]=extend(this.options[action][option]||{},options[option]),isObject(defaultOptions.perAction[option]
)&&"enabled"in defaultOptions.perAction[option]&&(this.options[action][option].enabled=!1!==options[option].enabled)):isBool(options[option])&&isObject(defaultOptions.perAction[option])?this.options[action][option].enabled=options[option]:void 0!==options[option]&&(this.options[action][option]=options[option]))},dropzone:function(options){return isObject(options)?(this.options.drop.enabled=!1!==options.enabled,this.setOnEvents("drop",options),/^(pointer|center)$/.test(options.overlap)?this.options.drop.overlap=options.overlap:isNumber(options.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,options.overlap),0)),"accept"in options&&(
this.options.drop.accept=options.accept),"checker"in options&&(this.options.drop.checker=options.checker),this):isBool(options)?(this.options.drop.enabled=options,this):this.options.drop},dropCheck:function(dragEvent,event,draggable,draggableElement,dropElement,rect){var dropped=!1;if(!(rect=rect||this.getRect(dropElement)))return!!this.options.drop.checker&&this.options.drop.checker(dragEvent,event,dropped,this,dropElement,draggable,draggableElement);var dropOverlap=this.options.drop.overlap;if("pointer"===dropOverlap){var horizontal,vertical,page=getPageXY(dragEvent),origin=getOriginXY(draggable,draggableElement);page.x+=origin.x,page.y+=origin.y,
horizontal=page.x>rect.left&&page.x<rect.right,vertical=page.y>rect.top&&page.y<rect.bottom,dropped=horizontal&&vertical}var dragRect=draggable.getRect(draggableElement);if("center"===dropOverlap){var cx=dragRect.left+dragRect.width/2,cy=dragRect.top+dragRect.height/2;dropped=cx>=rect.left&&cx<=rect.right&&cy>=rect.top&&cy<=rect.bottom}isNumber(dropOverlap)&&(dropped=dropOverlap<=Math.max(0,Math.min(rect.right,dragRect.right)-Math.max(rect.left,dragRect.left))*Math.max(0,Math.min(rect.bottom,dragRect.bottom)-Math.max(rect.top,dragRect.top))/(dragRect.width*dragRect.height));return this.options.drop.checker&&(dropped=this.options.drop.checker(dragEvent,event,
dropped,this,dropElement,draggable,draggableElement)),dropped},dropChecker:function(checker){return isFunction(checker)?(this.options.drop.checker=checker,this):null===checker?(delete this.options.getRect,this):this.options.drop.checker},accept:function(newValue){return isElement(newValue)?(this.options.drop.accept=newValue,this):trySelector(newValue)?(this.options.drop.accept=newValue,this):null===newValue?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(options){return isObject(options)?(this.options.resize.enabled=!1!==options.enabled,this.setPerAction("resize",options),this.setOnEvents("resize",options),
/^x$|^y$|^xy$/.test(options.axis)?this.options.resize.axis=options.axis:null===options.axis&&(this.options.resize.axis=defaultOptions.resize.axis),isBool(options.preserveAspectRatio)?this.options.resize.preserveAspectRatio=options.preserveAspectRatio:isBool(options.square)&&(this.options.resize.square=options.square),this):isBool(options)?(this.options.resize.enabled=options,this):this.options.resize},squareResize:function(newValue){return isBool(newValue)?(this.options.resize.square=newValue,this):null===newValue?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(options){return isObject(options)?(
this.options.gesture.enabled=!1!==options.enabled,this.setPerAction("gesture",options),this.setOnEvents("gesture",options),this):isBool(options)?(this.options.gesture.enabled=options,this):this.options.gesture},autoScroll:function(options){return isObject(options)?options=extend({actions:["drag","resize"]},options):isBool(options)&&(options={actions:["drag","resize"],enabled:options}),this.setOptions("autoScroll",options)},snap:function(options){var ret=this.setOptions("snap",options);return ret===this?this:ret.drag},setOptions:function(option,options){var i,actions=options&&isArray(options.actions)?options.actions:["drag"];if(isObject(options)||isBool(
options)){for(i=0;i<actions.length;i++){var action=/resize/.test(actions[i])?"resize":actions[i];if(isObject(this.options[action])){var thisOption=this.options[action][option];isObject(options)?(extend(thisOption,options),thisOption.enabled=!1!==options.enabled,"snap"===option&&("grid"===thisOption.mode?thisOption.targets=[interact.createSnapGrid(extend({offset:thisOption.gridOffset||{x:0,y:0}},thisOption.grid||{}))]:"anchor"===thisOption.mode?thisOption.targets=thisOption.anchors:"path"===thisOption.mode&&(thisOption.targets=thisOption.paths),"elementOrigin"in options&&(thisOption.relativePoints=[options.elementOrigin]))):isBool(options)&&(
thisOption.enabled=options)}}return this}var ret={},allActions=["drag","resize","gesture"];for(i=0;i<allActions.length;i++)option in defaultOptions[allActions[i]]&&(ret[allActions[i]]=this.options[allActions[i]][option]);return ret},inertia:function(options){var ret=this.setOptions("inertia",options);return ret===this?this:ret.drag},getAction:function(pointer,event,interaction,element){var action=this.defaultActionChecker(pointer,interaction,element);return this.options.actionChecker?this.options.actionChecker(pointer,event,action,this,element,interaction):action},defaultActionChecker:defaultActionChecker,actionChecker:function(checker){return isFunction(
checker)?(this.options.actionChecker=checker,this):null===checker?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(element){return element=element||this._element,this.selector&&!isElement(element)&&(element=this._context.querySelector(this.selector)),getElementRect(element)},rectChecker:function(checker){return isFunction(checker)?(this.getRect=checker,this):null===checker?(delete this.options.getRect,this):this.getRect},styleCursor:function(newValue){return isBool(newValue)?(this.options.styleCursor=newValue,this):null===newValue?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(
newValue){return/^(always|never|auto)$/.test(newValue)?(this.options.preventDefault=newValue,this):isBool(newValue)?(this.options.preventDefault=newValue?"always":"never",this):this.options.preventDefault},origin:function(newValue){return trySelector(newValue)?(this.options.origin=newValue,this):isObject(newValue)?(this.options.origin=newValue,this):this.options.origin},deltaSource:function(newValue){return"page"===newValue||"client"===newValue?(this.options.deltaSource=newValue,this):this.options.deltaSource},restrict:function(options){if(!isObject(options))return this.setOptions("restrict",options);for(var ret,actions=["drag","resize","gesture"],
i=0;i<actions.length;i++){var action=actions[i];if(action in options){var perAction=extend({actions:[action],restriction:options[action]},options);ret=this.setOptions("restrict",perAction)}}return ret},context:function(){return this._context},_context:document,ignoreFrom:function(newValue){return trySelector(newValue)?(this.options.ignoreFrom=newValue,this):isElement(newValue)?(this.options.ignoreFrom=newValue,this):this.options.ignoreFrom},allowFrom:function(newValue){return trySelector(newValue)?(this.options.allowFrom=newValue,this):isElement(newValue)?(this.options.allowFrom=newValue,this):this.options.allowFrom},element:function(){return this._element},
fire:function(iEvent){if(!iEvent||!iEvent.type||!contains(eventTypes,iEvent.type))return this;var listeners,i,len,onEvent="on"+iEvent.type;if(iEvent.type in this._iEvents)for(i=0,len=(listeners=this._iEvents[iEvent.type]).length;i<len&&!iEvent.immediatePropagationStopped;i++)listeners[i].name,listeners[i](iEvent);if(isFunction(this[onEvent])&&(this[onEvent].name,this[onEvent](iEvent)),iEvent.type in globalEvents&&(listeners=globalEvents[iEvent.type]))for(i=0,len=listeners.length;i<len&&!iEvent.immediatePropagationStopped;i++)listeners[i].name,listeners[i](iEvent);return this},on:function(eventType,listener,useCapture){var i;if(isString(eventType
)&&-1!==eventType.search(" ")&&(eventType=eventType.trim().split(/ +/)),isArray(eventType)){for(i=0;i<eventType.length;i++)this.on(eventType[i],listener,useCapture);return this}if(isObject(eventType)){for(var prop in eventType)this.on(prop,eventType[prop],listener);return this}if("wheel"===eventType&&(eventType=wheelEvent),useCapture=!!useCapture,contains(eventTypes,eventType))eventType in this._iEvents?this._iEvents[eventType].push(listener):this._iEvents[eventType]=[listener];else if(this.selector){if(!delegatedEvents[eventType])for(delegatedEvents[eventType]={selectors:[],contexts:[],listeners:[]},i=0;i<documents.length;i++)events.add(documents[i],
eventType,delegateListener),events.add(documents[i],eventType,delegateUseCapture,!0);var index,delegated=delegatedEvents[eventType];for(index=delegated.selectors.length-1;0<=index&&(delegated.selectors[index]!==this.selector||delegated.contexts[index]!==this._context);index--);-1===index&&(index=delegated.selectors.length,delegated.selectors.push(this.selector),delegated.contexts.push(this._context),delegated.listeners.push([])),delegated.listeners[index].push([listener,useCapture])}else events.add(this._element,eventType,listener,useCapture);return this},off:function(eventType,listener,useCapture){var i;if(isString(eventType)&&-1!==eventType.search(" ")&&(
eventType=eventType.trim().split(/ +/)),isArray(eventType)){for(i=0;i<eventType.length;i++)this.off(eventType[i],listener,useCapture);return this}if(isObject(eventType)){for(var prop in eventType)this.off(prop,eventType[prop],listener);return this}var eventList,index=-1;if(useCapture=!!useCapture,"wheel"===eventType&&(eventType=wheelEvent),contains(eventTypes,eventType))(eventList=this._iEvents[eventType])&&-1!==(index=indexOf(eventList,listener))&&this._iEvents[eventType].splice(index,1);else if(this.selector){var delegated=delegatedEvents[eventType],matchFound=!1;if(!delegated)return this;for(index=delegated.selectors.length-1;0<=index;index--)if(
delegated.selectors[index]===this.selector&&delegated.contexts[index]===this._context){var listeners=delegated.listeners[index];for(i=listeners.length-1;0<=i;i--){var fn=listeners[i][0],useCap=listeners[i][1];if(fn===listener&&useCap===useCapture){listeners.splice(i,1),listeners.length||(delegated.selectors.splice(index,1),delegated.contexts.splice(index,1),delegated.listeners.splice(index,1),events.remove(this._context,eventType,delegateListener),events.remove(this._context,eventType,delegateUseCapture,!0),delegated.selectors.length||(delegatedEvents[eventType]=null)),matchFound=!0;break}}if(matchFound)break}}else events.remove(this._element,eventType,
listener,useCapture);return this},set:function(options){isObject(options)||(options={}),this.options=extend({},defaultOptions.base);var i,actions=["drag","drop","resize","gesture"],methods=["draggable","dropzone","resizable","gesturable"],perActions=extend(extend({},defaultOptions.perAction),options[action]||{});for(i=0;i<actions.length;i++){var action=actions[i];this.options[action]=extend({},defaultOptions[action]),this.setPerAction(action,perActions),this[methods[i]](options[action])}var settings=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker","styleCursor"];for(i=0,
len=settings.length;i<len;i++){var setting=settings[i];this.options[setting]=defaultOptions.base[setting],setting in options&&this[setting](options[setting])}return this},unset:function(){if(events.remove(this._element,"all"),isString(this.selector))for(var type in delegatedEvents)for(var delegated=delegatedEvents[type],i=0;i<delegated.selectors.length;i++){delegated.selectors[i]===this.selector&&delegated.contexts[i]===this._context&&(delegated.selectors.splice(i,1),delegated.contexts.splice(i,1),delegated.listeners.splice(i,1),delegated.selectors.length||(delegatedEvents[type]=null)),events.remove(this._context,type,delegateListener),events.remove(
this._context,type,delegateUseCapture,!0);break}else events.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),interactables.splice(indexOf(interactables,this),1),interact}}).snap=warnOnce(Interactable.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),Interactable.prototype.restrict=warnOnce(Interactable.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),Interactable.prototype.inertia=warnOnce(Interactable.prototype.inertia,
"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),Interactable.prototype.autoScroll=warnOnce(Interactable.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),Interactable.prototype.squareResize=warnOnce(Interactable.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square"),Interactable.prototype.accept=warnOnce(Interactable.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead"),
Interactable.prototype.dropChecker=warnOnce(Interactable.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead"),Interactable.prototype.context=warnOnce(Interactable.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead"),interact.isSet=function(element,options){return-1!==interactables.indexOfElement(element,options&&options.context)},interact.on=function(type,listener,useCapture){if(isString(type)&&-1!==type.search(" ")&&(type=type.trim().split(/ +/)),isArray(type)){for(var i=0;i<type.length;i++)interact.on(type[i],listener,
useCapture);return interact}if(isObject(type)){for(var prop in type)interact.on(prop,type[prop],listener);return interact}return contains(eventTypes,type)?globalEvents[type]?globalEvents[type].push(listener):globalEvents[type]=[listener]:events.add(document,type,listener,useCapture),interact},interact.off=function(type,listener,useCapture){if(isString(type)&&-1!==type.search(" ")&&(type=type.trim().split(/ +/)),isArray(type)){for(var i=0;i<type.length;i++)interact.off(type[i],listener,useCapture);return interact}if(isObject(type)){for(var prop in type)interact.off(prop,type[prop],listener);return interact}var index;contains(eventTypes,type
)?type in globalEvents&&-1!==(index=indexOf(globalEvents[type],listener))&&globalEvents[type].splice(index,1):events.remove(document,type,listener,useCapture);return interact},interact.enableDragging=warnOnce(function(newValue){return null!=newValue?(actionIsEnabled.drag=newValue,interact):actionIsEnabled.drag},"interact.enableDragging is deprecated and will soon be removed."),interact.enableResizing=warnOnce(function(newValue){return null!=newValue?(actionIsEnabled.resize=newValue,interact):actionIsEnabled.resize},"interact.enableResizing is deprecated and will soon be removed."),interact.enableGesturing=warnOnce(function(newValue){return null!=newValue?(
actionIsEnabled.gesture=newValue,interact):actionIsEnabled.gesture},"interact.enableGesturing is deprecated and will soon be removed."),interact.eventTypes=eventTypes,interact.debug=function(){var interaction=interactions[0]||new Interaction;return{interactions:interactions,target:interaction.target,dragging:interaction.dragging,resizing:interaction.resizing,gesturing:interaction.gesturing,prepared:interaction.prepared,matches:interaction.matches,matchElements:interaction.matchElements,prevCoords:interaction.prevCoords,startCoords:interaction.startCoords,pointerIds:interaction.pointerIds,pointers:interaction.pointers,addPointer:listeners.addPointer,
removePointer:listeners.removePointer,recordPointer:listeners.recordPointer,snap:interaction.snapStatus,restrict:interaction.restrictStatus,inertia:interaction.inertiaStatus,downTime:interaction.downTimes[0],downEvent:interaction.downEvent,downPointer:interaction.downPointer,prevEvent:interaction.prevEvent,Interactable:Interactable,interactables:interactables,pointerIsDown:interaction.pointerIsDown,defaultOptions:defaultOptions,defaultActionChecker:defaultActionChecker,actionCursors:actionCursors,dragMove:listeners.dragMove,resizeMove:listeners.resizeMove,gestureMove:listeners.gestureMove,pointerUp:listeners.pointerUp,pointerDown:listeners.pointerDown,
pointerMove:listeners.pointerMove,pointerHover:listeners.pointerHover,eventTypes:eventTypes,events:events,globalEvents:globalEvents,delegatedEvents:delegatedEvents,prefixedPropREs:prefixedPropREs}},interact.getPointerAverage=pointerAverage,interact.getTouchBBox=touchBBox,interact.getTouchDistance=touchDistance,interact.getTouchAngle=touchAngle,interact.getElementRect=getElementRect,interact.getElementClientRect=getElementClientRect,interact.matchesSelector=matchesSelector,interact.closest=closest,interact.margin=warnOnce(function(newvalue){return isNumber(newvalue)?(margin=newvalue,interact):margin},
"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead."),interact.supportsTouch=function(){return supportsTouch},interact.supportsPointerEvent=function(){return supportsPointerEvent},interact.stop=function(event){for(var i=interactions.length-1;0<=i;i--)interactions[i].stop(event);return interact},interact.dynamicDrop=function(newValue){return isBool(newValue)?(dynamicDrop=newValue,interact):dynamicDrop},interact.pointerMoveTolerance=function(newValue){return isNumber(newValue)?(pointerMoveTolerance=newValue,this):pointerMoveTolerance},interact.maxInteractions=function(newValue){return isNumber(newValue)?(
maxInteractions=newValue,this):maxInteractions},interact.createSnapGrid=function(grid){return function(x,y){var offsetX=0,offsetY=0;isObject(grid.offset)&&(offsetX=grid.offset.x,offsetY=grid.offset.y);var gridx=Math.round((x-offsetX)/grid.x),gridy=Math.round((y-offsetY)/grid.y);return{x:gridx*grid.x+offsetX,y:gridy*grid.y+offsetY,range:grid.range}}},listenToDocument(document),prefixedMatchesSelector in Element.prototype&&isFunction(Element.prototype[prefixedMatchesSelector])||(ie8MatchesSelector=function(element,selector,elems){for(var i=0,len=(elems=elems||element.parentNode.querySelectorAll(selector)).length;i<len;i++)if(elems[i]===element)return!0
;return!1}),function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!realWindow.requestAnimationFrame;++x)reqFrame=realWindow[vendors[x]+"RequestAnimationFrame"],cancelFrame=realWindow[vendors[x]+"CancelAnimationFrame"]||realWindow[vendors[x]+"CancelRequestAnimationFrame"];reqFrame||(reqFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),cancelFrame||(cancelFrame=function(id){clearTimeout(id)})}(),"undefined"!=typeof exports?(
"undefined"!=typeof module&&module.exports&&(exports=module.exports=interact),exports.interact=interact):"function"==typeof define&&define.amd?define("interact",[],function(){return interact}):realWindow.interact=interact}function blank(){}function isElement(o){if(!o||"object"!=typeof o)return!1;var _window=getWindow(o)||window;return/object|function/.test(typeof _window.Element)?o instanceof _window.Element:1===o.nodeType&&"string"==typeof o.nodeName}function isWindow(thing){return thing===window||!(!thing||!thing.Window)&&thing instanceof thing.Window}function isDocFrag(thing){return!!thing&&thing instanceof DocumentFragment}function isArray(thing){
return isObject(thing)&&void 0!==typeof thing.length&&isFunction(thing.splice)}function isObject(thing){return!!thing&&"object"==typeof thing}function isFunction(thing){return"function"==typeof thing}function isNumber(thing){return"number"==typeof thing}function isBool(thing){return"boolean"==typeof thing}function isString(thing){return"string"==typeof thing}function trySelector(value){return!!isString(value)&&(document.querySelector(value),!0)}function extend(dest,source){for(var prop in source)dest[prop]=source[prop];return dest}function pointerExtend(dest,source){for(var prop in source){var deprecated=!1;for(var vendor in prefixedPropREs)if(
0===prop.indexOf(vendor)&&prefixedPropREs[vendor].test(prop)){deprecated=!0;break}deprecated||(dest[prop]=source[prop])}return dest}function copyCoords(dest,src){dest.page=dest.page||{},dest.page.x=src.page.x,dest.page.y=src.page.y,dest.client=dest.client||{},dest.client.x=src.client.x,dest.client.y=src.client.y,dest.timeStamp=src.timeStamp}function setEventDeltas(targetObj,prev,cur){targetObj.page.x=cur.page.x-prev.page.x,targetObj.page.y=cur.page.y-prev.page.y,targetObj.client.x=cur.client.x-prev.client.x,targetObj.client.y=cur.client.y-prev.client.y,targetObj.timeStamp=(new Date).getTime()-prev.timeStamp;var dt=Math.max(targetObj.timeStamp/1e3,.001)
;targetObj.page.speed=hypot(targetObj.page.x,targetObj.page.y)/dt,targetObj.page.vx=targetObj.page.x/dt,targetObj.page.vy=targetObj.page.y/dt,targetObj.client.speed=hypot(targetObj.client.x,targetObj.page.y)/dt,targetObj.client.vx=targetObj.client.x/dt,targetObj.client.vy=targetObj.client.y/dt}function isNativePointer(pointer){return pointer instanceof window.Event||supportsTouch&&window.Touch&&pointer instanceof window.Touch}function getXY(type,pointer,xy){return type=type||"page",(xy=xy||{}).x=pointer[type+"X"],xy.y=pointer[type+"Y"],xy}function getPageXY(pointer,page){return page=page||{},isOperaMobile&&isNativePointer(pointer)?(getXY("screen",pointer,
page),page.x+=window.scrollX,page.y+=window.scrollY):getXY("page",pointer,page),page}function getClientXY(pointer,client){return client=client||{},isOperaMobile&&isNativePointer(pointer)?getXY("screen",pointer,client):getXY("client",pointer,client),client}function getPointerId(pointer){return isNumber(pointer.pointerId)?pointer.pointerId:pointer.identifier}function getActualElement(element){return element instanceof SVGElementInstance?element.correspondingUseElement:element}function getWindow(node){if(isWindow(node))return node;var rootNode=node.ownerDocument||node;return rootNode.defaultView||rootNode.parentWindow||window}function getElementClientRect(
element){var clientRect=element instanceof SVGElement?element.getBoundingClientRect():element.getClientRects()[0];return clientRect&&{left:clientRect.left,right:clientRect.right,top:clientRect.top,bottom:clientRect.bottom,width:clientRect.width||clientRect.right-clientRect.left,height:clientRect.height||clientRect.bottom-clientRect.top}}function getElementRect(element){var win,clientRect=getElementClientRect(element);if(!isIOS7&&clientRect){var scroll={x:(win=(win=getWindow(element))||window).scrollX||win.document.documentElement.scrollLeft,y:win.scrollY||win.document.documentElement.scrollTop};clientRect.left+=scroll.x,clientRect.right+=scroll.x,
clientRect.top+=scroll.y,clientRect.bottom+=scroll.y}return clientRect}function getTouchPair(event){var touches=[];return isArray(event)?(touches[0]=event[0],touches[1]=event[1]):"touchend"===event.type?1===event.touches.length?(touches[0]=event.touches[0],touches[1]=event.changedTouches[0]):0===event.touches.length&&(touches[0]=event.changedTouches[0],touches[1]=event.changedTouches[1]):(touches[0]=event.touches[0],touches[1]=event.touches[1]),touches}function pointerAverage(pointers){for(var prop,average={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<pointers.length;i++)for(prop in average)average[prop]+=pointers[i][prop];for(
prop in average)average[prop]/=pointers.length;return average}function touchBBox(event){if(event.length||event.touches&&1<event.touches.length){var touches=getTouchPair(event),minX=Math.min(touches[0].pageX,touches[1].pageX),minY=Math.min(touches[0].pageY,touches[1].pageY);return{x:minX,y:minY,left:minX,top:minY,width:Math.max(touches[0].pageX,touches[1].pageX)-minX,height:Math.max(touches[0].pageY,touches[1].pageY)-minY}}}function touchDistance(event,deltaSource){var sourceX=(deltaSource=deltaSource||defaultOptions.deltaSource)+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event),dx=touches[0][sourceX]-touches[1][sourceX],
dy=touches[0][sourceY]-touches[1][sourceY];return hypot(dx,dy)}function touchAngle(event,prevAngle,deltaSource){var sourceX=(deltaSource=deltaSource||defaultOptions.deltaSource)+"X",sourceY=deltaSource+"Y",touches=getTouchPair(event),dx=touches[0][sourceX]-touches[1][sourceX],dy=touches[0][sourceY]-touches[1][sourceY],angle=180*Math.atan(dy/dx)/Math.PI;if(isNumber(prevAngle)){var drClamped=(angle-prevAngle)%360;315<drClamped?angle-=360+angle/360|0:135<drClamped?angle-=180+angle/360|0:drClamped<-315?angle+=360+angle/360|0:drClamped<-135&&(angle+=180+angle/360|0)}return angle}function getOriginXY(interactable,element){
var origin=interactable?interactable.options.origin:defaultOptions.origin;return"parent"===origin?origin=parentElement(element):"self"===origin?origin=interactable.getRect(element):trySelector(origin)&&(origin=closest(element,origin)||{x:0,y:0}),isFunction(origin)&&(origin=origin(interactable&&element)),isElement(origin)&&(origin=getElementRect(origin)),origin.x="x"in origin?origin.x:origin.left,origin.y="y"in origin?origin.y:origin.top,origin}function _getQBezierValue(t,p1,p2,p3){var iT=1-t;return iT*iT*p1+2*iT*t*p2+t*t*p3}function easeOutQuad(t,b,c,d){return-c*(t/=d)*(t-2)+b}function nodeContains(parent,child){for(;child;){if(child===parent)return!0
;child=child.parentNode}return!1}function closest(child,selector){for(var parent=parentElement(child);isElement(parent);){if(matchesSelector(parent,selector))return parent;parent=parentElement(parent)}return null}function parentElement(node){var parent=node.parentNode;if(isDocFrag(parent)){for(;(parent=parent.host)&&isDocFrag(parent););return parent}return parent}function inContext(interactable,element){return interactable._context===element.ownerDocument||nodeContains(interactable._context,element)}function testIgnore(interactable,interactableElement,element){var ignoreFrom=interactable.options.ignoreFrom;return!(!ignoreFrom||!isElement(element))&&(
isString(ignoreFrom)?matchesUpTo(element,ignoreFrom,interactableElement):!!isElement(ignoreFrom)&&nodeContains(ignoreFrom,element))}function testAllow(interactable,interactableElement,element){var allowFrom=interactable.options.allowFrom;return!allowFrom||!!isElement(element)&&(isString(allowFrom)?matchesUpTo(element,allowFrom,interactableElement):!!isElement(allowFrom)&&nodeContains(allowFrom,element))}function checkAxis(axis,interactable){if(!interactable)return!1;var thisAxis=interactable.options.drag.axis;return"xy"===axis||"xy"===thisAxis||thisAxis===axis}function checkSnap(interactable,action){var options=interactable.options;return/^resize/.test(
action)&&(action="resize"),options[action].snap&&options[action].snap.enabled}function checkRestrict(interactable,action){var options=interactable.options;return/^resize/.test(action)&&(action="resize"),options[action].restrict&&options[action].restrict.enabled}function withinInteractionLimit(interactable,element,action){for(var options=interactable.options,maxActions=options[action.name].max,maxPerElement=options[action.name].maxPerElement,activeInteractions=0,targetCount=0,targetElementCount=0,i=0,len=interactions.length;i<len;i++){var interaction=interactions[i],otherAction=interaction.prepared.name;if(interaction.interacting()){if(
maxInteractions<=++activeInteractions)return!1;if(interaction.target===interactable){if(maxActions<=(targetCount+=otherAction===action.name|0))return!1;if(interaction.element===element&&(targetElementCount++,otherAction!==action.name||maxPerElement<=targetElementCount))return!1}}}return 0<maxInteractions}function Interaction(){if(this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,
duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},isFunction(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var that=this;this.boundInertiaFrame=function(){return that.inertiaFrame()},this.boundSmoothEndFrame=function(){return that.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{
x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,
restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,interactions.push(this)}function getInteractionFromPointer(pointer,eventType,eventTarget){var interaction,i=0,len=interactions.length,mouseEvent=/mouse/i.test(pointer.pointerType||eventType)||4===pointer.pointerType,id=getPointerId(pointer);if(/down|start/i.test(eventType))for(i=0;i<len;i++){var element=eventTarget;if((interaction=interactions[i]
).inertiaStatus.active&&interaction.target.options[interaction.prepared.name].inertia.allowResume&&interaction.mouse===mouseEvent)for(;element;){if(element===interaction.element)return interaction;element=parentElement(element)}}if(mouseEvent||!supportsTouch&&!supportsPointerEvent){for(i=0;i<len;i++)if(interactions[i].mouse&&!interactions[i].inertiaStatus.active)return interactions[i];for(i=0;i<len;i++)if(interactions[i].mouse&&(!/down/.test(eventType)||!interactions[i].inertiaStatus.active))return interaction;return(interaction=new Interaction).mouse=!0,interaction}for(i=0;i<len;i++)if(contains(interactions[i].pointerIds,id))return interactions[i];if(
/up|end|out/i.test(eventType))return null;for(i=0;i<len;i++)if((!(interaction=interactions[i]).prepared.name||interaction.target.options.gesture.enabled)&&!interaction.interacting()&&(mouseEvent||!interaction.mouse))return interaction;return new Interaction}function doOnInteractions(method){return function(event){var interaction,i,eventTarget=getActualElement(event.path?event.path[0]:event.target),curEventTarget=getActualElement(event.currentTarget);if(supportsTouch&&/touch/.test(event.type))for(prevTouchTime=(new Date).getTime(),i=0;i<event.changedTouches.length;i++){var pointer=event.changedTouches[i];(interaction=getInteractionFromPointer(pointer,
event.type,eventTarget))&&(interaction._updateEventTargets(eventTarget,curEventTarget),interaction[method](pointer,event,eventTarget,curEventTarget))}else{if(!supportsPointerEvent&&/mouse/.test(event.type)){for(i=0;i<interactions.length;i++)if(!interactions[i].mouse&&interactions[i].pointerIsDown)return;if((new Date).getTime()-prevTouchTime<500)return}if(!(interaction=getInteractionFromPointer(event,event.type,eventTarget)))return;interaction._updateEventTargets(eventTarget,curEventTarget),interaction[method](event,event,eventTarget,curEventTarget)}}}function InteractEvent(interaction,event,action,phase,element,related){var client,page,
target=interaction.target,snapStatus=interaction.snapStatus,restrictStatus=interaction.restrictStatus,pointers=interaction.pointers,deltaSource=(target&&target.options||defaultOptions).deltaSource,sourceX=deltaSource+"X",sourceY=deltaSource+"Y",options=target?target.options:defaultOptions,origin=getOriginXY(target,element),starting="start"===phase,ending="end"===phase,coords=starting?interaction.startCoords:interaction.curCoords;element=element||interaction.element,page=extend({},coords.page),client=extend({},coords.client),page.x-=origin.x,page.y-=origin.y,client.x-=origin.x,client.y-=origin.y
;var relativePoints=options[action].snap&&options[action].snap.relativePoints;!checkSnap(target,action)||starting&&relativePoints&&relativePoints.length||(this.snap={range:snapStatus.range,locked:snapStatus.locked,x:snapStatus.snappedX,y:snapStatus.snappedY,realX:snapStatus.realX,realY:snapStatus.realY,dx:snapStatus.dx,dy:snapStatus.dy},snapStatus.locked&&(page.x+=snapStatus.dx,page.y+=snapStatus.dy,client.x+=snapStatus.dx,client.y+=snapStatus.dy)),!checkRestrict(target,action)||starting&&options[action].restrict.elementRect||!restrictStatus.restricted||(page.x+=restrictStatus.dx,page.y+=restrictStatus.dy,client.x+=restrictStatus.dx,
client.y+=restrictStatus.dy,this.restrict={dx:restrictStatus.dx,dy:restrictStatus.dy}),this.pageX=page.x,this.pageY=page.y,this.clientX=client.x,this.clientY=client.y,this.x0=interaction.startCoords.page.x-origin.x,this.y0=interaction.startCoords.page.y-origin.y,this.clientX0=interaction.startCoords.client.x-origin.x,this.clientY0=interaction.startCoords.client.y-origin.y,this.ctrlKey=event.ctrlKey,this.altKey=event.altKey,this.shiftKey=event.shiftKey,this.metaKey=event.metaKey,this.button=event.button,this.buttons=event.buttons,this.target=element,this.t0=interaction.downTimes[0],this.type=action+(phase||""),this.interaction=interaction,
this.interactable=target;var inertiaStatus=interaction.inertiaStatus;if(inertiaStatus.active&&(this.detail="inertia"),related&&(this.relatedTarget=related),this.dy=ending?"client"===deltaSource?(this.dx=client.x-interaction.startCoords.client.x,client.y-interaction.startCoords.client.y):(this.dx=page.x-interaction.startCoords.page.x,page.y-interaction.startCoords.page.y):starting?this.dx=0:"inertiastart"===phase?(this.dx=interaction.prevEvent.dx,interaction.prevEvent.dy):"client"===deltaSource?(this.dx=client.x-interaction.prevEvent.clientX,client.y-interaction.prevEvent.clientY):(this.dx=page.x-interaction.prevEvent.pageX,page.y-interaction.prevEvent.pageY)
,interaction.prevEvent&&"inertia"===interaction.prevEvent.detail&&!inertiaStatus.active&&options[action].inertia&&options[action].inertia.zeroResumeDelta&&(inertiaStatus.resumeDx+=this.dx,inertiaStatus.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===action&&interaction.resizeAxes?options.resize.square?("y"===interaction.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=interaction.resizeAxes,"x"===interaction.resizeAxes?this.dy=0:"y"===interaction.resizeAxes&&(this.dx=0)):"gesture"===action&&(this.touches=[pointers[0],pointers[1]],this.da=starting?(this.distance=touchDistance(pointers,deltaSource),this.box=touchBBox(pointers),this.scale=1
,this.ds=0,this.angle=touchAngle(pointers,void 0,deltaSource),0):ending||event instanceof InteractEvent?(this.distance=interaction.prevEvent.distance,this.box=interaction.prevEvent.box,this.scale=interaction.prevEvent.scale,this.ds=this.scale-1,this.angle=interaction.prevEvent.angle,this.angle-interaction.gesture.startAngle):(this.distance=touchDistance(pointers,deltaSource),this.box=touchBBox(pointers),this.scale=this.distance/interaction.gesture.startDistance,this.angle=touchAngle(pointers,interaction.gesture.prevAngle,deltaSource),this.ds=this.scale-interaction.gesture.prevScale,this.angle-interaction.gesture.prevAngle)),starting
)this.timeStamp=interaction.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===phase)this.timeStamp=interaction.prevEvent.timeStamp,this.dt=interaction.prevEvent.dt,this.duration=interaction.prevEvent.duration,this.speed=interaction.prevEvent.speed,this.velocityX=interaction.prevEvent.velocityX,this.velocityY=interaction.prevEvent.velocityY;else if(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-interaction.prevEvent.timeStamp,this.duration=this.timeStamp-interaction.downTimes[0],event instanceof InteractEvent){var dx=this[sourceX]-interaction.prevEvent[sourceX],
dy=this[sourceY]-interaction.prevEvent[sourceY],dt=this.dt/1e3;this.speed=hypot(dx,dy)/dt,this.velocityX=dx/dt,this.velocityY=dy/dt}else this.speed=interaction.pointerDelta[deltaSource].speed,this.velocityX=interaction.pointerDelta[deltaSource].vx,this.velocityY=interaction.pointerDelta[deltaSource].vy;if((ending||"inertiastart"===phase)&&600<interaction.prevEvent.speed&&this.timeStamp-interaction.prevEvent.timeStamp<150){var angle=180*Math.atan2(interaction.prevEvent.velocityY,interaction.prevEvent.velocityX)/Math.PI;angle<0&&(angle+=360);var left=112.5<=angle&&angle<247.5,up=202.5<=angle&&angle<337.5,right=!left&&(292.5<=angle||angle<67.5),
down=!up&&22.5<=angle&&angle<157.5;this.swipe={up:up,down:down,left:left,right:right,angle:angle,speed:interaction.prevEvent.speed,velocity:{x:interaction.prevEvent.velocityX,y:interaction.prevEvent.velocityY}}}}function preventOriginalDefault(){this.originalEvent.preventDefault()}function getActionCursor(action){var cursor="";if("drag"===action.name&&(cursor=actionCursors.drag),"resize"===action.name)if(action.axis)cursor=actionCursors[action.name+action.axis];else if(action.edges){for(var cursorKey="resize",edgeNames=["top","bottom","left","right"],i=0;i<4;i++)action.edges[edgeNames[i]]&&(cursorKey+=edgeNames[i]);cursor=actionCursors[cursorKey]}
return cursor}function checkResizeEdge(name,value,page,element,interactableElement,rect,margin){if(!value)return!1;if(!0===value){var width=isNumber(rect.width)?rect.width:rect.right-rect.left,height=isNumber(rect.height)?rect.height:rect.bottom-rect.top;if(width<0&&("left"===name?name="right":"right"===name&&(name="left")),height<0&&("top"===name?name="bottom":"bottom"===name&&(name="top")),"left"===name)return page.x<(0<=width?rect.left:rect.right)+margin;if("top"===name)return page.y<(0<=height?rect.top:rect.bottom)+margin;if("right"===name)return page.x>(0<=width?rect.right:rect.left)-margin;if("bottom"===name)return page.y>(
0<=height?rect.bottom:rect.top)-margin}return!!isElement(element)&&(isElement(value)?value===element:matchesUpTo(element,value,interactableElement))}function defaultActionChecker(pointer,interaction,element){var resizeEdges,rect=this.getRect(element),shouldResize=!1,action=null,resizeAxes=null,page=extend({},interaction.curCoords.page),options=this.options;if(!rect)return null;if(actionIsEnabled.resize&&options.resize.enabled){var resizeOptions=options.resize;if(resizeEdges={left:!1,right:!1,top:!1,bottom:!1},isObject(resizeOptions.edges)){for(var edge in resizeEdges)resizeEdges[edge]=checkResizeEdge(edge,resizeOptions.edges[edge],page,
interaction._eventTarget,element,rect,resizeOptions.margin||margin);resizeEdges.left=resizeEdges.left&&!resizeEdges.right,resizeEdges.top=resizeEdges.top&&!resizeEdges.bottom,shouldResize=resizeEdges.left||resizeEdges.right||resizeEdges.top||resizeEdges.bottom}else{var right="y"!==options.resize.axis&&page.x>rect.right-margin,bottom="x"!==options.resize.axis&&page.y>rect.bottom-margin;shouldResize=right||bottom,resizeAxes=(right?"x":"")+(bottom?"y":"")}}return action=shouldResize?"resize":actionIsEnabled.drag&&options.drag.enabled?"drag":null,actionIsEnabled.gesture&&2<=interaction.pointerIds.length&&!interaction.dragging&&!interaction.resizing&&(
action="gesture"),action?{name:action,axis:resizeAxes,edges:resizeEdges}:null}function validateAction(action,interactable){if(!isObject(action))return null;var actionName=action.name,options=interactable.options;return("resize"===actionName&&options.resize.enabled||"drag"===actionName&&options.drag.enabled||"gesture"===actionName&&options.gesture.enabled)&&actionIsEnabled[actionName]?("resize"!==actionName&&"resizeyx"!==actionName||(actionName="resizexy"),action):null}function delegateListener(event,useCapture){var fakeEvent={},delegated=delegatedEvents[event.type],eventTarget=getActualElement(event.path?event.path[0]:event.target),element=eventTarget;for(
var prop in useCapture=!!useCapture,event)fakeEvent[prop]=event[prop];for(fakeEvent.originalEvent=event,fakeEvent.preventDefault=preventOriginalDefault;isElement(element);){for(var i=0;i<delegated.selectors.length;i++){var selector=delegated.selectors[i],context=delegated.contexts[i];if(matchesSelector(element,selector)&&nodeContains(context,eventTarget)&&nodeContains(context,element)){var listeners=delegated.listeners[i];fakeEvent.currentTarget=element;for(var j=0;j<listeners.length;j++)listeners[j][1]===useCapture&&listeners[j][0](fakeEvent)}}element=parentElement(element)}}function delegateUseCapture(event){return delegateListener.call(this,event,!0)}
function interact(element,options){return interactables.get(element,options)||new Interactable(element,options)}function Interactable(element,options){var _window;if(this._element=element,this._iEvents=this._iEvents||{},trySelector(element)){this.selector=element;var context=options&&options.context;_window=context?getWindow(context):window,context&&(_window.Node?context instanceof _window.Node:isElement(context)||context===_window.document)&&(this._context=context)}else _window=getWindow(element),isElement(element)&&(supportsPointerEvent?(events.add(this._element,pEventTypes.down,listeners.pointerDown),events.add(this._element,pEventTypes.move,
listeners.pointerHover)):(events.add(this._element,"mousedown",listeners.pointerDown),events.add(this._element,"mousemove",listeners.pointerHover),events.add(this._element,"touchstart",listeners.pointerDown),events.add(this._element,"touchmove",listeners.pointerHover)));this._doc=_window.document,contains(documents,this._doc)||listenToDocument(this._doc),interactables.push(this),this.set(options)}function warnOnce(method,message){var warned=!1;return function(){return warned||(window.console.warn(message),warned=!0),method.apply(this,arguments)}}function endAllInteractions(event){for(var i=0;i<interactions.length;i++)interactions[i].pointerEnd(event,event)}
function listenToDocument(doc){if(!contains(documents,doc)){var win=doc.defaultView||doc.parentWindow;for(var eventType in delegatedEvents)events.add(doc,eventType,delegateListener),events.add(doc,eventType,delegateUseCapture,!0);supportsPointerEvent?(pEventTypes=PointerEvent===win.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},events.add(doc,pEventTypes.down,listeners.selectorDown),events.add(doc,pEventTypes.move,listeners.pointerMove),events.add(doc,
pEventTypes.over,listeners.pointerOver),events.add(doc,pEventTypes.out,listeners.pointerOut),events.add(doc,pEventTypes.up,listeners.pointerUp),events.add(doc,pEventTypes.cancel,listeners.pointerCancel),events.add(doc,pEventTypes.move,listeners.autoScrollMove)):(events.add(doc,"mousedown",listeners.selectorDown),events.add(doc,"mousemove",listeners.pointerMove),events.add(doc,"mouseup",listeners.pointerUp),events.add(doc,"mouseover",listeners.pointerOver),events.add(doc,"mouseout",listeners.pointerOut),events.add(doc,"touchstart",listeners.selectorDown),events.add(doc,"touchmove",listeners.pointerMove),events.add(doc,"touchend",listeners.pointerUp),
events.add(doc,"touchcancel",listeners.pointerCancel),events.add(doc,"mousemove",listeners.autoScrollMove),events.add(doc,"touchmove",listeners.autoScrollMove)),events.add(win,"blur",endAllInteractions);try{if(win.frameElement){var parentDoc=win.frameElement.ownerDocument,parentWindow=parentDoc.defaultView;events.add(parentDoc,"mouseup",listeners.pointerEnd),events.add(parentDoc,"touchend",listeners.pointerEnd),events.add(parentDoc,"touchcancel",listeners.pointerEnd),events.add(parentDoc,"pointerup",listeners.pointerEnd),events.add(parentDoc,"MSPointerUp",listeners.pointerEnd),events.add(parentWindow,"blur",endAllInteractions)}}catch(error){
interact.windowParentError=error}events.add(doc,"dragstart",function(event){for(var i=0;i<interactions.length;i++){var interaction=interactions[i];if(interaction.element&&(interaction.element===event.target||nodeContains(interaction.element,event.target)))return void interaction.checkAndPreventDefault(event,interaction.target,interaction.element)}}),events.useAttachEvent&&(events.add(doc,"selectstart",function(event){var interaction=interactions[0];interaction.currentAction()&&interaction.checkAndPreventDefault(event)}),events.add(doc,"dblclick",doOnInteractions("ie8Dblclick"))),documents.push(doc)}}function indexOf(array,target){for(var i=0,
len=array.length;i<len;i++)if(array[i]===target)return i;return-1}function contains(array,target){return-1!==indexOf(array,target)}function matchesSelector(element,selector,nodeList){return ie8MatchesSelector?ie8MatchesSelector(element,selector,nodeList):(window!==realWindow&&(selector=selector.replace(/\/deep\//g," ")),element[prefixedMatchesSelector](selector))}function matchesUpTo(element,selector,limit){for(;isElement(element);){if(matchesSelector(element,selector))return!0;if((element=parentElement(element))===limit)return matchesSelector(element,selector)}return!1}}("undefined"==typeof window?void 0:window),define("jquery.fileDownload",["jquery"],
function($){$.extend({fileDownload:function(fileUrl,options){var defaultFailCallback=function(responseHtml,url){alert("A file download error has occurred, please try again.")},settings=$.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},successCallback:function(url){},failCallback:defaultFailCallback,httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},
options),userAgent=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),isIos=!1,isAndroid=!1,isOtherMobileBrowser=!1;/ip(ad|hone|od)/.test(userAgent)?isIos=!0:-1!=userAgent.indexOf("android")?isAndroid=!0:isOtherMobileBrowser=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(userAgent
)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(
userAgent.substr(0,4));var httpMethodUpper=settings.httpMethod.toUpperCase();if(isAndroid&&"GET"!=httpMethodUpper)$().dialog?$("<div>").html(settings.androidPostUnsupportedMessageHtml).dialog(settings.dialogOptions):alert(settings.androidPostUnsupportedMessageHtml);else{var $preparingDialog=null;settings.preparingMessageHtml&&($preparingDialog=$("<div>").html(settings.preparingMessageHtml).dialog(settings.dialogOptions));var $iframe,downloadWindow,formDoc,$form,internalCallbacks={onSuccess:function(url){$preparingDialog&&$preparingDialog.dialog("close"),settings.successCallback(url)},onFail:function(responseHtml,url){
$preparingDialog&&$preparingDialog.dialog("close"),settings.failMessageHtml?($("<div>").html(settings.failMessageHtml).dialog(settings.dialogOptions),settings.failCallback!=defaultFailCallback&&settings.failCallback(responseHtml,url)):settings.failCallback(responseHtml,url)}};if(null!==settings.data&&"string"!=typeof settings.data&&(settings.data=$.param(settings.data)),"GET"===httpMethodUpper){if(null!==settings.data)-1!=fileUrl.indexOf("?")?"&"!==fileUrl.substring(fileUrl.length-1)&&(fileUrl+="&"):fileUrl+="?",fileUrl+=settings.data;isIos||isAndroid?((downloadWindow=window.open(fileUrl)).document.title=settings.popupWindowTitle,window.focus()
):isOtherMobileBrowser?window.location(fileUrl):$iframe=$("<iframe>").hide().attr("src",fileUrl).appendTo("body")}else{var formInnerHtml="";null!==settings.data&&$.each(settings.data.replace(/\+/g," ").split("&"),function(){var kvp=this.split("="),key=settings.encodeHTMLEntities?htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[0])):decodeURIComponent(kvp[0]);if(key){var value=kvp[1];value=settings.encodeHTMLEntities?htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[1])):decodeURIComponent(kvp[1]),formInnerHtml+='<input type="hidden" name="'+key+'" value="'+value+'" />'}}),isOtherMobileBrowser?($form=$("<form>").appendTo("body")).hide().attr("method",
settings.httpMethod).attr("action",fileUrl).html(formInnerHtml):(isIos?((downloadWindow=window.open("about:blank")).document.title=settings.popupWindowTitle,formDoc=downloadWindow.document,window.focus()):formDoc=getiframeDocument($iframe=$("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body")),formDoc.write("<html><head></head><body><form method='"+settings.httpMethod+"' action='"+fileUrl+"'>"+formInnerHtml+"</form>"+settings.popupWindowTitle+"</body></html>"),$form=$(formDoc).find("form")),$form.submit()}setTimeout(function checkFileDownloadComplete(){if(-1!=document.cookie.indexOf(settings.cookieName+"="+settings.cookieValue)){
internalCallbacks.onSuccess(fileUrl);var date=new Date(1e3);return document.cookie=settings.cookieName+"=; expires="+date.toUTCString()+"; path="+settings.cookiePath,void cleanUp(!1)}if(downloadWindow||$iframe)try{var formDoc;if((formDoc=downloadWindow?downloadWindow.document:getiframeDocument($iframe))&&null!=formDoc.body&&0<formDoc.body.innerHTML.length){var isFailure=!0;if($form&&0<$form.length){var $contents=$(formDoc.body).contents().first();0<$contents.length&&$contents[0]===$form[0]&&(isFailure=!1)}if(isFailure)return internalCallbacks.onFail(formDoc.body.innerHTML,fileUrl),void cleanUp(!0)}}catch(err){return internalCallbacks.onFail("",fileUrl),
void cleanUp(!0)}setTimeout(checkFileDownloadComplete,settings.checkInterval)},settings.checkInterval)}function getiframeDocument($iframe){var iframeDoc=$iframe[0].contentWindow||$iframe[0].contentDocument;return iframeDoc.document&&(iframeDoc=iframeDoc.document),iframeDoc}function cleanUp(isFailure){setTimeout(function(){downloadWindow&&(isAndroid&&downloadWindow.close(),isIos&&(isFailure?(downloadWindow.focus(),downloadWindow.close()):downloadWindow.focus()))},0)}function htmlSpecialCharsEntityEncode(str){return str.replace(/&/gm,"&amp;").replace(/\n/gm,"&#10;").replace(/\r/gm,"&#13;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"
).replace(/'/gm,"&apos;")}}})}),function(factory){"use strict";"function"==typeof define&&define.amd?define("jquery.autocomplete",["jquery"],factory):"object"==typeof exports&&"function"==typeof require?factory(require("jquery")):factory(jQuery)}(function($){"use strict";var utils={escapeRegExChars:function(value){return value.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(containerClass){var div=document.createElement("div");return div.className=containerClass,div.style.position="absolute",div.style.display="none",div}},keys_ESC=27,keys_TAB=9,keys_RETURN=13,keys_UP=38,keys_RIGHT=39,keys_DOWN=40;function Autocomplete(el,options){
var noop=function(){},defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:Autocomplete.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:noop,onSearchComplete:noop,onSearchError:noop,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(suggestion,originalQuery,queryLowerCase){return-1!==suggestion.value.toLowerCase().indexOf(queryLowerCase)},paramName:"query",
transformResult:function(response){return"string"==typeof response?$.parseJSON(response):response},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};this.element=el,this.el=$(el),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.intervalId=0,this.cachedResponse={},this.onChangeInterval=null,this.onChange=null,this.isLocal=!1,this.suggestionsContainer=null,this.noSuggestionsContainer=null,this.options=$.extend({},defaults,options),this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},this.hint=null,this.hintValue="",
this.selection=null,this.initialize(),this.setOptions(options)}Autocomplete.utils=utils,($.Autocomplete=Autocomplete).formatResult=function(suggestion,currentValue){var htmlSafeString=suggestion.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),pattern="("+utils.escapeRegExChars(currentValue)+")";return htmlSafeString.replace(new RegExp(pattern,"gi"),"<strong>$1</strong>")},Autocomplete.prototype={killerFn:null,initialize:function(){var container,that=this,suggestionSelector="."+that.classes.suggestion,selected=that.classes.selected,options=that.options;that.element.setAttribute("autocomplete","off"),
that.killerFn=function(e){0===$(e.target).closest("."+that.options.containerClass).length&&(that.killSuggestions(),that.disableKillerFn())},that.noSuggestionsContainer=$('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),that.suggestionsContainer=Autocomplete.utils.createNode(options.containerClass),(container=$(that.suggestionsContainer)).appendTo(options.appendTo),"auto"!==options.width&&container.width(options.width),container.on("mouseover.autocomplete",suggestionSelector,function(){that.activate($(this).data("index"))}),container.on("mouseout.autocomplete",function(){that.selectedIndex=-1,container.children(
"."+selected).removeClass(selected)}),container.on("click.autocomplete",suggestionSelector,function(){that.select($(this).data("index"))}),that.fixPositionCapture=function(){that.visible&&that.fixPosition()},$(window).on("resize.autocomplete",that.fixPositionCapture),that.el.on("keydown.autocomplete",function(e){that.onKeyPress(e)}),that.el.on("keyup.autocomplete",function(e){that.onKeyUp(e)}),that.el.on("blur.autocomplete",function(){that.onBlur()}),that.el.on("focus.autocomplete",function(){that.onFocus()}),that.el.on("change.autocomplete",function(e){that.onKeyUp(e)}),that.el.on("input.autocomplete",function(e){that.onKeyUp(e)})},onFocus:function(){
this.fixPosition(),this.options.minChars<=this.el.val().length&&this.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(suppliedOptions){var options=this.options;$.extend(options,suppliedOptions),this.isLocal=$.isArray(options.lookup),this.isLocal&&(options.lookup=this.verifySuggestionsFormat(options.lookup)),options.orientation=this.validateOrientation(options.orientation,"bottom"),$(this.suggestionsContainer).css({"max-height":options.maxHeight+"px",width:options.width+"px","z-index":options.zIndex})},clearCache:function(){
this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearInterval(this.onChangeInterval),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var $container=$(this.suggestionsContainer),containerParent=$container.parent().get(0);if(containerParent===document.body||this.options.forceFixPosition){var orientation=this.options.orientation,containerHeight=$container.outerHeight(),height=this.el.outerHeight(),offset=this.el.offset(),styles={top:offset.top,left:offset.left};if("auto"===orientation){var viewPortHeight=$(window).height(),
scrollTop=$(window).scrollTop(),topOverflow=-scrollTop+offset.top-containerHeight,bottomOverflow=scrollTop+viewPortHeight-(offset.top+height+containerHeight);orientation=Math.max(topOverflow,bottomOverflow)===topOverflow?"top":"bottom"}if(styles.top+="top"===orientation?-containerHeight:height,containerParent!==document.body){var parentOffsetDiff,opacity=$container.css("opacity");this.visible||$container.css("opacity",0).show(),parentOffsetDiff=$container.offsetParent().offset(),styles.top-=parentOffsetDiff.top,styles.left-=parentOffsetDiff.left,this.visible||$container.css("opacity",opacity).hide()}"auto"===this.options.width&&(
styles.width=this.el.outerWidth()-2+"px"),$container.css(styles)}},enableKillerFn:function(){$(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){$(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var that=this;that.stopKillSuggestions(),that.intervalId=window.setInterval(function(){that.hide(),that.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var range,valLength=this.el.val().length,selectionStart=this.element.selectionStart;return"number"==typeof selectionStart?selectionStart===valLength:!document.selection||((
range=document.selection.createRange()).moveStart("character",-valLength),valLength===range.text.length)},onKeyPress:function(e){if(this.disabled||this.visible||e.which!==keys_DOWN||!this.currentValue){if(!this.disabled&&this.visible){switch(e.which){case keys_ESC:this.el.val(this.currentValue),this.hide();break;case keys_RIGHT:if(this.hint&&this.options.onHint&&this.isCursorAtEnd()){this.selectHint();break}return;case keys_TAB:if(this.hint&&this.options.onHint)return void this.selectHint();if(-1===this.selectedIndex)return void this.hide();if(this.select(this.selectedIndex),!1===this.options.tabDisabled)return;break;case keys_RETURN:if(
-1===this.selectedIndex)return void this.hide();this.select(this.selectedIndex);break;case keys_UP:this.moveUp();break;case keys_DOWN:this.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else this.suggest()},onKeyUp:function(e){var that=this;if(!that.disabled){switch(e.which){case keys_UP:case keys_DOWN:return}clearInterval(that.onChangeInterval),that.currentValue!==that.el.val()&&(that.findBestHint(),0<that.options.deferRequestBy?that.onChangeInterval=setInterval(function(){that.onValueChange()},that.options.deferRequestBy):that.onValueChange())}},onValueChange:function(){var index,options=this.options,value=this.el.val(),
query=this.getQuery(value);this.selection&&this.currentValue!==query&&(this.selection=null,(options.onInvalidateSelection||$.noop).call(this.element)),clearInterval(this.onChangeInterval),this.currentValue=value,this.selectedIndex=-1,options.triggerSelectOnValidInput&&-1!==(index=this.findSuggestionIndex(query))?this.select(index):query.length<options.minChars?this.hide():this.getSuggestions(query)},findSuggestionIndex:function(query){var index=-1,queryLowerCase=query.toLowerCase();return $.each(this.suggestions,function(i,suggestion){if(suggestion.value.toLowerCase()===queryLowerCase)return index=i,!1}),index},getQuery:function(value){var parts,
delimiter=this.options.delimiter;return delimiter?(parts=value.split(delimiter),$.trim(parts[parts.length-1])):value},getSuggestionsLocal:function(query){var data,options=this.options,queryLowerCase=query.toLowerCase(),filter=options.lookupFilter,limit=parseInt(options.lookupLimit,10);return data={suggestions:$.grep(options.lookup,function(suggestion){return filter(suggestion,query,queryLowerCase)})},limit&&data.suggestions.length>limit&&(data.suggestions=data.suggestions.slice(0,limit)),data},getSuggestions:function(q){var response,params,cacheKey,ajaxSettings,that=this,options=that.options,serviceUrl=options.serviceUrl;options.params[options.paramName]=q,
params=options.ignoreParams?null:options.params,!1!==options.onSearchStart.call(that.element,options.params)&&($.isFunction(options.lookup)?options.lookup(q,function(data){that.suggestions=data.suggestions,that.suggest(),options.onSearchComplete.call(that.element,q,data.suggestions)}):(response=that.isLocal?that.getSuggestionsLocal(q):($.isFunction(serviceUrl)&&(serviceUrl=serviceUrl.call(that.element,q)),cacheKey=serviceUrl+"?"+$.param(params||{}),that.cachedResponse[cacheKey]))&&$.isArray(response.suggestions)?(that.suggestions=response.suggestions,that.suggest(),options.onSearchComplete.call(that.element,q,response.suggestions)):that.isBadQuery(q
)?options.onSearchComplete.call(that.element,q,[]):(that.abortAjax(),ajaxSettings={url:serviceUrl,data:params,type:options.type,dataType:options.dataType},$.extend(ajaxSettings,options.ajaxSettings),that.currentRequest=$.ajax(ajaxSettings).done(function(data){var result;that.currentRequest=null,result=options.transformResult(data),that.processResponse(result,q,cacheKey),options.onSearchComplete.call(that.element,q,result.suggestions)}).fail(function(jqXHR,textStatus,errorThrown){options.onSearchError.call(that.element,q,jqXHR,textStatus,errorThrown)})))},isBadQuery:function(q){if(!this.options.preventBadQueries)return!1;for(var badQueries=this.badQueries,
i=badQueries.length;i--;)if(0===q.indexOf(badQueries[i]))return!0;return!1},hide:function(){var container=$(this.suggestionsContainer);$.isFunction(this.options.onHide)&&this.visible&&this.options.onHide.call(this.element,container),this.visible=!1,this.selectedIndex=-1,clearInterval(this.onChangeInterval),$(this.suggestionsContainer).hide(),this.signalHint(null)},suggest:function(){if(0!==this.suggestions.length){var category,index,options=this.options,groupBy=options.groupBy,formatResult=options.formatResult,value=this.getQuery(this.currentValue),className=this.classes.suggestion,classSelected=this.classes.selected,container=$(this.suggestionsContainer),
noSuggestionsContainer=$(this.noSuggestionsContainer),beforeRender=options.beforeRender,html="";options.triggerSelectOnValidInput&&-1!==(index=this.findSuggestionIndex(value))?this.select(index):($.each(this.suggestions,function(i,suggestion){groupBy&&(html+=function(suggestion,index){var currentCategory=suggestion.data[groupBy];return category===currentCategory?"":'<div class="autocomplete-group"><strong>'+(category=currentCategory)+"</strong></div>"}(suggestion,0)),html+='<div class="'+className+'" data-index="'+i+'">'+formatResult(suggestion,value)+"</div>"}),this.adjustContainerWidth(),noSuggestionsContainer.detach(),container.html(html),$.isFunction(
beforeRender)&&beforeRender.call(this.element,container),this.fixPosition(),container.show(),options.autoSelectFirst&&(this.selectedIndex=0,container.scrollTop(0),container.children("."+className).first().addClass(classSelected)),this.visible=!0,this.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var container=$(this.suggestionsContainer),noSuggestionsContainer=$(this.noSuggestionsContainer);this.adjustContainerWidth(),noSuggestionsContainer.detach(),container.empty(),container.append(noSuggestionsContainer),this.fixPosition(),container.show(),this.visible=!0},adjustContainerWidth:function(
){var width,options=this.options,container=$(this.suggestionsContainer);"auto"===options.width&&(width=this.el.outerWidth()-2,container.width(0<width?width:300))},findBestHint:function(){var value=this.el.val().toLowerCase(),bestMatch=null;value&&($.each(this.suggestions,function(i,suggestion){var foundMatch=0===suggestion.value.toLowerCase().indexOf(value);return foundMatch&&(bestMatch=suggestion),!foundMatch}),this.signalHint(bestMatch))},signalHint:function(suggestion){var hintValue="";suggestion&&(hintValue=this.currentValue+suggestion.value.substr(this.currentValue.length)),this.hintValue!==hintValue&&(this.hintValue=hintValue,this.hint=suggestion,(
this.options.onHint||$.noop)(hintValue))},verifySuggestionsFormat:function(suggestions){return suggestions.length&&"string"==typeof suggestions[0]?$.map(suggestions,function(value){return{value:value,data:null}}):suggestions},validateOrientation:function(orientation,fallback){return orientation=$.trim(orientation||"").toLowerCase(),-1===$.inArray(orientation,["auto","bottom","top"])&&(orientation=fallback),orientation},processResponse:function(result,originalQuery,cacheKey){var options=this.options;result.suggestions=this.verifySuggestionsFormat(result.suggestions),options.noCache||(this.cachedResponse[cacheKey]=result,
options.preventBadQueries&&0===result.suggestions.length&&this.badQueries.push(originalQuery)),originalQuery===this.getQuery(this.currentValue)&&(this.suggestions=result.suggestions,this.suggest())},activate:function(index){var activeItem,selected=this.classes.selected,container=$(this.suggestionsContainer),children=container.find("."+this.classes.suggestion);return container.find("."+selected).removeClass(selected),this.selectedIndex=index,-1!==this.selectedIndex&&children.length>this.selectedIndex?(activeItem=children.get(this.selectedIndex),$(activeItem).addClass(selected),activeItem):null},selectHint:function(){var i=$.inArray(this.hint,this.suggestions)
;this.select(i)},select:function(i){this.hide(),this.onSelect(i)},moveUp:function(){if(-1!==this.selectedIndex)return 0===this.selectedIndex?($(this.suggestionsContainer).children().first().removeClass(this.classes.selected),this.selectedIndex=-1,this.el.val(this.currentValue),void this.findBestHint()):void this.adjustScroll(this.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(index){var activeItem=this.activate(index);if(activeItem){var offsetTop,upperBound,lowerBound,heightDelta=$(activeItem).outerHeight();offsetTop=activeItem.offsetTop,lowerBound=(
upperBound=$(this.suggestionsContainer).scrollTop())+this.options.maxHeight-heightDelta,offsetTop<upperBound?$(this.suggestionsContainer).scrollTop(offsetTop):lowerBound<offsetTop&&$(this.suggestionsContainer).scrollTop(offsetTop-this.options.maxHeight+heightDelta),this.options.preserveInput||this.el.val(this.getValue(this.suggestions[index].value)),this.signalHint(null)}},onSelect:function(index){var onSelectCallback=this.options.onSelect,suggestion=this.suggestions[index];this.currentValue=this.getValue(suggestion.value),this.currentValue===this.el.val()||this.options.preserveInput||this.el.val(this.currentValue),this.signalHint(null),this.suggestions=[],
this.selection=suggestion,$.isFunction(onSelectCallback)&&onSelectCallback.call(this.element,suggestion)},getValue:function(value){var currentValue,parts,delimiter=this.options.delimiter;return delimiter?1===(parts=(currentValue=this.currentValue).split(delimiter)).length?value:currentValue.substr(0,currentValue.length-parts[parts.length-1].length)+value:value},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),this.disableKillerFn(),$(window).off("resize.autocomplete",this.fixPositionCapture),$(this.suggestionsContainer).remove()}},$.fn.autocomplete=$.fn.devbridgeAutocomplete=function(options,args){
return 0===arguments.length?this.first().data("autocomplete"):this.each(function(){var inputElement=$(this),instance=inputElement.data("autocomplete");"string"==typeof options?instance&&"function"==typeof instance[options]&&instance[options](args):(instance&&instance.dispose&&instance.dispose(),instance=new Autocomplete(this,options),inputElement.data("autocomplete",instance))})}}),define("lib/farbtastic/farbtastic",["jquery"],function(jQuery){var $=jQuery;jQuery.fn.farbtastic=function(callback){return $.farbtastic(this,callback),this},jQuery.farbtastic=function(container,callback){if(container.length)return(container=$(container).get(0)).farbtastic||(
container.farbtastic=new jQuery._farbtastic(container,callback))},jQuery._farbtastic=function(container,callback){var fb=this,e=$("<div>",{class:"farbtastic"}),colorObj=$("<div>",{class:"color"}),wheelObj=$("<div>",{class:"wheel"}),overlayObj=$("<div>",{class:"overlay"}),hMarkerObj=$("<div>",{class:"h-marker marker"}),slMarkerObj=$("<div>",{class:"sl-marker marker"});container=$(container),$(e).append(colorObj),$(e).append(wheelObj),$(e).append(overlayObj),$(e).append(hMarkerObj),$(e).append(slMarkerObj),container.append(e),fb.wheel=wheelObj.get(0),fb.radius=70,fb.square=overlayObj.width(),fb.width=e.width(),fb.linkTo=function(callback){
return"object"==typeof fb.callback&&$(fb.callback).unbind("keyup",fb.updateValue),fb.color=null,"function"==typeof callback?fb.callback=callback:"object"!=typeof callback&&"string"!=typeof callback||(fb.callback=$(callback),fb.callback.bind("keyup",fb.updateValue),fb.callback.get(0).value&&fb.setColor(fb.callback.get(0).value)),this},fb.updateValue=function(event){this.value&&this.value!=fb.color&&fb.setColor(this.value)},fb.setColor=function(color){var unpack=fb.unpack(color);return fb.color!=color&&unpack&&(fb.color=color,fb.rgb=unpack,fb.hsl=fb.RGBToHSL(fb.rgb),fb.updateDisplay()),this},fb.setHSL=function(hsl){return fb.hsl=hsl,fb.rgb=fb.HSLToRGB(hsl),
fb.color=fb.pack(fb.rgb),fb.updateDisplay(),this},fb.widgetCoords=function(event){var x,y,el=event.target||event.srcElement,reference=fb.wheel;if(void 0!==event.offsetX){for(var pos={x:event.offsetX,y:event.offsetY},e=el;e;)e.mouseX=pos.x,e.mouseY=pos.y,pos.x+=e.offsetLeft,pos.y+=e.offsetTop,e=e.offsetParent;e=reference;for(var offset={x:0,y:0};e;){if(void 0!==e.mouseX){x=e.mouseX-offset.x,y=e.mouseY-offset.y;break}offset.x+=e.offsetLeft,offset.y+=e.offsetTop,e=e.offsetParent}for(e=el;e;)e.mouseX=void 0,e.mouseY=void 0,e=e.offsetParent}else{pos=fb.absolutePosition(reference);x=(event.pageX||0*(event.clientX+$("html").get(0).scrollLeft))-pos.x,y=(
event.pageY||0*(event.clientY+$("html").get(0).scrollTop))-pos.y}return{x:x-fb.width/2,y:y-fb.width/2}},fb.mousedown=function(event){document.dragging||($(document).bind("mousemove",fb.mousemove).bind("mouseup",fb.mouseup),document.dragging=!0);var pos=fb.widgetCoords(event);return fb.circleDrag=2*Math.max(Math.abs(pos.x),Math.abs(pos.y))>fb.square,fb.mousemove(event),!1},fb.mousemove=function(event){var pos=fb.widgetCoords(event);if(fb.circleDrag){var hue=Math.atan2(pos.x,-pos.y)/6.28;hue<0&&(hue+=1),fb.setHSL([hue,fb.hsl[1],fb.hsl[2]])}else{var sat=Math.max(0,Math.min(1,-pos.x/fb.square+.5)),lum=Math.max(0,Math.min(1,-pos.y/fb.square+.5));fb.setHSL([
fb.hsl[0],sat,lum])}return!1},fb.mouseup=function(){$(document).unbind("mousemove",fb.mousemove),$(document).unbind("mouseup",fb.mouseup),document.dragging=!1},fb.updateDisplay=function(){var angle=6.28*fb.hsl[0];$(".h-marker",e).css({left:Math.round(Math.sin(angle)*fb.radius+fb.width/2)+"px",top:Math.round(-Math.cos(angle)*fb.radius+fb.width/2)+"px"}),$(".sl-marker",e).css({left:Math.round(fb.square*(.5-fb.hsl[1])+fb.width/2)+"px",top:Math.round(fb.square*(.5-fb.hsl[2])+fb.width/2)+"px"}),$(".color",e).css("backgroundColor",fb.pack(fb.HSLToRGB([fb.hsl[0],1,.5]))),"object"==typeof fb.callback?($(fb.callback).css({backgroundColor:fb.color,
color:.5<fb.hsl[2]?"#000":"#fff"}),$(fb.callback).each(function(){this.value&&this.value!=fb.color&&(this.value=fb.color)})):"function"==typeof fb.callback&&fb.callback.call(fb,fb.color),container.trigger("colorchange.farbtastic",[fb.color])},fb.absolutePosition=function(el){var r={x:el.offsetLeft,y:el.offsetTop};if(el.offsetParent){var tmp=fb.absolutePosition(el.offsetParent);r.x+=tmp.x,r.y+=tmp.y}return r},fb.pack=function(rgb){var r=Math.round(255*rgb[0]),g=Math.round(255*rgb[1]),b=Math.round(255*rgb[2]);return"#"+(r<16?"0":"")+r.toString(16)+(g<16?"0":"")+g.toString(16)+(b<16?"0":"")+b.toString(16)},fb.unpack=function(color){return 7==color.length?[
parseInt("0x"+color.substring(1,3))/255,parseInt("0x"+color.substring(3,5))/255,parseInt("0x"+color.substring(5,7))/255]:4==color.length?[parseInt("0x"+color.substring(1,2))/15,parseInt("0x"+color.substring(2,3))/15,parseInt("0x"+color.substring(3,4))/15]:void 0},fb.HSLToRGB=function(hsl){var m1,m2,h=hsl[0],s=hsl[1],l=hsl[2];return m1=2*l-(m2=l<=.5?l*(s+1):l+s-l*s),[this.hueToRGB(m1,m2,h+.33333),this.hueToRGB(m1,m2,h),this.hueToRGB(m1,m2,h-.33333)]},fb.hueToRGB=function(m1,m2,h){return 6*(h=h<0?h+1:1<h?h-1:h)<1?m1+(m2-m1)*h*6:2*h<1?m2:3*h<2?m1+(m2-m1)*(.66666-h)*6:m1},fb.RGBToHSL=function(rgb){var min,max,delta,h,s,l,r=rgb[0],g=rgb[1],b=rgb[2]
;return min=Math.min(r,Math.min(g,b)),delta=(max=Math.max(r,Math.max(g,b)))-min,(s=0)<(l=(min+max)/2)&&l<1&&(s=delta/(l<.5?2*l:2-2*l)),(h=0)<delta&&(max==r&&max!=g&&(h+=(g-b)/delta),max==g&&max!=b&&(h+=2+(b-r)/delta),max==b&&max!=r&&(h+=4+(r-g)/delta),h/=6),[h,s,l]},$("*",e).mousedown(fb.mousedown),fb.setColor("#123456"),callback&&fb.linkTo(callback)}}),define("jquery.tree",["jquery"],function($){function tree_component(){return{cntr:++tree_component.cntr,settings:$.extend({},$.tree.defaults),init:function(elem,conf){var _this=this;if(this.container=$(elem),0==this.container.size)return!1;if((tree_component.inst[this.cntr]=this).container.attr("id"
)||this.container.attr("id","jstree_"+this.cntr),tree_component.inst[this.container.attr("id")]=tree_component.inst[this.cntr],tree_component.focused=this.cntr,this.settings=$.extend(!0,{},this.settings,conf),this.settings.languages&&this.settings.languages.length){this.current_lang=this.settings.languages[0];for(var st=!1,id="#"+this.container.attr("id"),ln=0;ln<this.settings.languages.length;ln++)!1!==(st=tree_component.add_css(id+" ."+this.settings.languages[ln]))&&(st.style.display=this.settings.languages[ln]==this.current_lang?"":"none")}else this.current_lang=!1;this.container.addClass("tree"),!1!==this.settings.ui.theme_name&&(
!1===this.settings.ui.theme_path&&$("script").each(function(){if(this.src.toString().match(/jquery\.tree.*?js$/))return _this.settings.ui.theme_path=this.src.toString().replace(/jquery\.tree.*?js$/,"")+"themes/"+_this.settings.ui.theme_name+"/style.css",!1}),""!=this.settings.ui.theme_path&&-1==$.inArray(this.settings.ui.theme_path,tree_component.themes)&&(tree_component.add_sheet({url:this.settings.ui.theme_path}),tree_component.themes.push(this.settings.ui.theme_path)),this.container.addClass("tree-"+this.settings.ui.theme_name));var type_icons="";for(var t in this.settings.types)this.settings.types.hasOwnProperty(t)&&this.settings.types[t].icon&&(
this.settings.types[t].icon.image||this.settings.types[t].icon.position)&&(type_icons+="default"==t?"#"+this.container.attr("id")+" li > a ins { ":"#"+this.container.attr("id")+" li[rel="+t+"] > a ins { ",this.settings.types[t].icon.image&&(type_icons+=" background-image:url("+this.settings.types[t].icon.image+"); "),this.settings.types[t].icon.position&&(type_icons+=" background-position:"+this.settings.types[t].icon.position+"; "),type_icons+="} ");""!=type_icons&&tree_component.add_sheet({str:type_icons}),this.settings.rules.multiple&&(this.selected_arr=[]),this.offset=!1,this.hovered=!1,(this.locked=!1)===tree_component.drag_drop.marker&&(
tree_component.drag_drop.marker=$("<div>").attr({id:"jstree-marker"}).hide().appendTo("body")),this.callback("oninit",[this]),this.refresh(),this.attach_events(),this.focus()},refresh:function(obj){if(this.locked)return this.error("LOCKED");var _this=this;if(obj&&!this.settings.data.async&&(obj=!1),this.is_partial_refresh=!!obj,this.opened=Array(),0!=this.settings.opened?($.each(this.settings.opened,function(i,item){0<this.replace(/^#/,"").length&&_this.opened.push("#"+this.replace(/^#/,""))}),this.settings.opened=!1):this.container.find("li.open").each(function(i){this.id&&_this.opened.push("#"+this.id)}),this.selected)this.settings.selected=Array(),obj?$(
obj).find("li:has(a.clicked)").each(function(){this.id&&_this.settings.selected.push("#"+this.id)}):this.selected_arr?$.each(this.selected_arr,function(){this.attr("id")&&_this.settings.selected.push("#"+this.attr("id"))}):this.selected.attr("id")&&this.settings.selected.push("#"+this.selected.attr("id"));else if(!1!==this.settings.selected){var tmp=Array();"object"==(typeof this.settings.selected).toLowerCase()?$.each(this.settings.selected,function(){0<this.replace(/^#/,"").length&&tmp.push("#"+this.replace(/^#/,""))}):0<this.settings.selected.replace(/^#/,"").length&&tmp.push("#"+this.settings.selected.replace(/^#/,"")),this.settings.selected=tmp}if(
obj&&this.settings.data.async)return this.opened=Array(),(obj=this.get_node(obj)).find("li.open").each(function(i){_this.opened.push("#"+this.id)}),obj.hasClass("open")&&obj.removeClass("open").addClass("closed"),obj.hasClass("leaf")&&obj.removeClass("leaf"),obj.children("ul:eq(0)").html(""),this.open_branch(obj,!0,function(){_this.reselect.apply(_this)});_this=this;var _datastore=new $.tree.datastores[this.settings.data.type];0==this.container.children("ul").size()&&this.container.html("<ul class='ltr' style='direction:ltr;'><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(this.settings.lang.loading||"Loading ...")+"</a></li></ul>"),
_datastore.load(this.callback("beforedata",[!1,this]),this,this.settings.data.opts,function(data){data=_this.callback("ondata",[data,_this]),_datastore.parse(data,_this,_this.settings.data.opts,function(str){str=_this.callback("onparse",[str,_this]),_this.container.empty().append($("<ul class='ltr'>").html(str)),_this.container.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),_this.container.find("li").not(".open").not(".closed").addClass("leaf"),_this.reselect()})})},reselect:function(is_callback){var _this=this;if(is_callback?this.cl_count--:this.cl_count=0,this.opened&&this.opened.length){for(var opn=!1,
j=0;this.opened&&j<this.opened.length;j++){if(this.settings.data.async){if((tmp=this.get_node(this.opened[j])).size()&&0<tmp.hasClass("closed")){opn=!0;var tmp=this.opened[j].toString().replace("/","\\/");delete this.opened[j],this.open_branch(tmp,!0,function(){_this.reselect.apply(_this,[!0])}),this.cl_count++}}else this.open_branch(this.opened[j],!0)}if(this.settings.data.async&&opn)return;if(0<this.cl_count)return;delete this.opened}0<this.cl_count||(this.container.css("direction","ltr").children("ul:eq(0)").addClass("ltr"),0==this.settings.ui.dots&&this.container.children("ul:eq(0)").addClass("no_dots"),this.scrtop&&(this.container.scrollTop(_this.scrtop
),delete this.scrtop),!1!==this.settings.selected&&($.each(this.settings.selected,function(i){_this.is_partial_refresh?_this.select_branch($(_this.settings.selected[i].toString().replace("/","\\/"),_this.container),!1!==_this.settings.rules.multiple):_this.select_branch($(_this.settings.selected[i].toString().replace("/","\\/"),_this.container),!1!==_this.settings.rules.multiple&&0<i)}),this.settings.selected=!1),this.callback("onload",[_this]))},get:function(obj,format,opts){return format||(format=this.settings.data.type),opts||(opts=this.settings.data.opts),(new $.tree.datastores[format]).get(obj,this,opts)},attach_events:function(){var _this=this
;this.container.on("mousedown.jstree",function(event){if(tree_component.drag_drop.isdown)return tree_component.drag_drop.move_type=!1,event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation(),!1}).on("mouseup.jstree",function(event){setTimeout(function(){_this.focus.apply(_this)},5)}).on("click.jstree",function(event){return!0}),this.container.on("click","li",function(event){return"LI"!=event.target.tagName||(_this.off_height(),event.pageY-$(event.target).offset().top>_this.li_height||(_this.toggle_branch.apply(_this,[event.target]),event.stopPropagation(),!1))}),this.container.on("click","a",function(event){return!(
!event.which||3!=event.which)||(_this.locked?(event.preventDefault(),event.target.blur(),_this.error("LOCKED")):(_this.select_branch.apply(_this,[event.target,event.ctrlKey||"on"==_this.settings.rules.multiple]),_this.inp&&_this.inp.blur(),event.preventDefault(),event.target.blur(),!1))}).on("dblclick","a",function(event){if(_this.locked)return event.preventDefault(),event.stopPropagation(),event.target.blur(),_this.error("LOCKED");_this.callback("ondblclk",[_this.get_node(event.target).get(0),_this]),event.preventDefault(),event.stopPropagation(),event.target.blur()}).on("contextmenu","a",function(event){return _this.locked?(event.target.blur(),_this.error(
"LOCKED")):_this.callback("onrgtclk",[_this.get_node(event.target).get(0),_this,event])}).on("mouseover","a",function(event){if(_this.locked)return event.preventDefault(),event.stopPropagation(),_this.error("LOCKED");!1===_this.hovered||"A"!=event.target.tagName&&"INS"!=event.target.tagName||(_this.hovered.children("a").removeClass("hover"),_this.hovered=!1),_this.callback("onhover",[_this.get_node(event.target).get(0),_this])}).on("mousedown","a",function(event){if("left"==_this.settings.rules.drag_button&&event.which&&1!=event.which)return!0;if("right"==_this.settings.rules.drag_button&&event.which&&3!=event.which)return!0;if(_this.focus.apply(_this),
_this.locked)return _this.error("LOCKED");var obj=_this.get_node(event.target);if(0!=_this.settings.rules.multiple&&1<_this.selected_arr.length&&obj.children("a:eq(0)").hasClass("clicked")){var counter=0;for(var i in _this.selected_arr)_this.selected_arr.hasOwnProperty(i)&&_this.check("draggable",_this.selected_arr[i])&&(_this.selected_arr[i].addClass("dragged"),tree_component.drag_drop.origin_tree=_this,counter++);if(0<counter){_this.check("draggable",obj)?tree_component.drag_drop.drag_node=obj:tree_component.drag_drop.drag_node=_this.container.find("li.dragged:eq(0)"),tree_component.drag_drop.isdown=!0,tree_component.drag_drop.drag_help=$(
"<div id='jstree-dragged' class='tree "+(""!=_this.settings.ui.theme_name?" tree-"+_this.settings.ui.theme_name:"")+"' />").append("<ul class='"+_this.container.children("ul:eq(0)").get(0).className+"' />");var tmp=tree_component.drag_drop.drag_node.clone();0<_this.settings.languages.length&&tmp.find("a").not("."+_this.current_lang).hide(),tree_component.drag_drop.drag_help.children("ul:eq(0)").append(tmp),tree_component.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last").children("a").html("<ins>&nbsp;</ins>Multiple selection").end().children("ul").remove(),tree_component.drag_drop.dragged=_this.container.find("li.dragged")}}else if(
_this.check("draggable",obj)){tree_component.drag_drop.drag_node=obj,tree_component.drag_drop.drag_help=$("<div id='jstree-dragged' class='tree "+(""!=_this.settings.ui.theme_name?" tree-"+_this.settings.ui.theme_name:"")+"' />").append("<ul class='"+_this.container.children("ul:eq(0)").get(0).className+"' />");tmp=obj.clone();0<_this.settings.languages.length&&tmp.find("a").not("."+_this.current_lang).hide(),tree_component.drag_drop.drag_help.children("ul:eq(0)").append(tmp),tree_component.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last"),tree_component.drag_drop.isdown=!0,tree_component.drag_drop.foreign=!1,
tree_component.drag_drop.origin_tree=_this,obj.addClass("dragged"),tree_component.drag_drop.dragged=_this.container.find("li.dragged")}return tree_component.drag_drop.init_x=event.pageX,tree_component.drag_drop.init_y=event.pageY,obj.blur(),event.preventDefault(),event.stopPropagation(),!1})},focus:function(){if(this.locked)return!1;tree_component.focused!=this.cntr&&(tree_component.focused=this.cntr,this.callback("onfocus",[this]))},off_height:function(){if(!1===this.offset){this.container.css({position:"relative"}),this.offset=this.container.offset();var tmp=0;(tmp=parseInt($.css(this.container.get(0),"paddingTop",!0),10))&&(this.offset.top+=tmp),(
tmp=parseInt($.css(this.container.get(0),"borderTopWidth",!0),10))&&(this.offset.top+=tmp),this.container.css({position:""})}if(!this.li_height){tmp=this.container.find("ul li.closed, ul li.leaf").eq(0);this.li_height=tmp.height(),tmp.children("ul:eq(0)").size()&&(this.li_height-=tmp.children("ul:eq(0)").height()),this.li_height||(this.li_height=18)}},scroll_check:function(x,y){var _this=this,cnt=_this.container,off=_this.container.offset(),st=cnt.scrollTop(),sl=cnt.scrollLeft(),h_cor=cnt.get(0).scrollWidth>cnt.width()?40:20;y-off.top<20&&cnt.scrollTop(Math.max(st-_this.settings.ui.scroll_spd,0)),cnt.height()-(y-off.top)<h_cor&&cnt.scrollTop(
st+_this.settings.ui.scroll_spd),x-off.left<20&&cnt.scrollLeft(Math.max(sl-_this.settings.ui.scroll_spd,0)),cnt.width()-(x-off.left)<40&&cnt.scrollLeft(sl+_this.settings.ui.scroll_spd),cnt.scrollLeft()==sl&&cnt.scrollTop()==st||(tree_component.drag_drop.move_type=!1,tree_component.drag_drop.ref_node=!1,tree_component.drag_drop.marker.hide()),tree_component.drag_drop.scroll_time=setTimeout(function(){_this.scroll_check(x,y)},50)},scroll_into_view:function(obj){if(!(obj=obj?this.get_node(obj):this.selected))return!1;var off_t=obj.offset().top,beg_t=this.container.offset().top,end_t=beg_t+this.container.height(),h_cor=this.container.get(0
).scrollWidth>this.container.width()?40:20;off_t+5<beg_t&&this.container.scrollTop(this.container.scrollTop()-(beg_t-off_t+5)),end_t<off_t+h_cor&&this.container.scrollTop(this.container.scrollTop()+(off_t+h_cor-end_t))},get_node:function(obj){return $(obj).closest("li")},get_type:function(obj){if(obj=obj?this.get_node(obj):this.selected)return obj.attr(this.settings.rules.type_attr)||"default"},set_type:function(str,obj){(obj=obj?this.get_node(obj):this.selected)&&str&&obj.attr(this.settings.rules.type_attr,str)},get_text:function(obj,lang){if(!(obj=this.get_node(obj))||0==obj.size())return"";obj=this.settings.languages&&this.settings.languages.length?(
lang=lang||this.current_lang,obj.children("a."+lang)):obj.children("a:visible");var val="";return obj.contents().each(function(){if(3==this.nodeType)return val=this.data,!1}),val},check:function(rule,obj){if(this.locked)return!1;var v=!1;if(-1===obj)void 0!==this.settings.rules[rule]&&(v=this.settings.rules[rule]);else{if(!(obj=obj?this.get_node(obj):this.selected))return;var t=this.get_type(obj);void 0!==this.settings.types[t]&&void 0!==this.settings.types[t][rule]?v=this.settings.types[t][rule]:void 0!==this.settings.types.default&&void 0!==this.settings.types.default[rule]&&(v=this.settings.types.default[rule])}return"function"==typeof v&&(v=v.call(null,
obj,this)),v=this.callback("check",[rule,obj,v,this])},check_move:function(nod,ref_node,how){if(this.locked)return!1;if($(ref_node).closest("li.dragged").size())return!1;var tree1=nod.parents(".tree:eq(0)").get(0),tree2=ref_node.parents(".tree:eq(0)").get(0);if(tree1&&tree1!=tree2&&("none"==(m=$.tree.reference(tree2.id).settings.rules.multitree)||$.isArray(m)&&-1==$.inArray(tree1.id,m)))return!1;var p="inside"!=how?this.parent(ref_node):this.get_node(ref_node);if(nod=this.get_node(nod),0==p)return!1;var r={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",p):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",p
):-1,valid_children:this.check("valid_children",p)},nod_type="string"==typeof nod?nod:this.get_type(nod);if(void 0!==r.valid_children&&("none"==r.valid_children||"object"==typeof r.valid_children&&-1==$.inArray(nod_type,$.makeArray(r.valid_children))))return!1;if(this.settings.rules.use_max_children&&void 0!==r.max_children&&-1!=r.max_children){if(0==r.max_children)return!1;var c_count=1;if(1==tree_component.drag_drop.moving&&0==tree_component.drag_drop.foreign&&(c_count=tree_component.drag_drop.dragged.size(),c_count-=p.find("> ul > li.dragged").size()),r.max_children<p.find("> ul > li").size()+c_count)return!1}if(this.settings.rules.use_max_depth){if(
void 0!==r.max_depth&&0===r.max_depth)return this.error("MOVE: MAX-DEPTH REACHED");for(var mx=0<r.max_depth&&r.max_depth,i=0,t=p;-1!==t;){var m;if(t=this.parent(t),i++,0<=(m=this.check("max_depth",t))&&(mx=!1===mx?m-i:Math.min(mx,m-i)),!1!==mx&&mx<=0)return this.error("MOVE: MAX-DEPTH REACHED")}if(!1!==mx&&mx<=0)return this.error("MOVE: MAX-DEPTH REACHED");if(!1!==mx){var incr=1;if("string"!=typeof nod)for(t=nod;0<t.size();){if(mx-incr<0)return this.error("MOVE: MAX-DEPTH REACHED");t=t.children("ul").children("li"),incr++}}}return 0!=this.callback("check_move",[nod,ref_node,how,this])},hover_branch:function(obj){if(this.locked)return this.error("LOCKED")
;return(obj=this.get_node(obj)).size()?this.check("clickable",obj)?(this.hovered&&this.hovered.children("A").removeClass("hover"),this.hovered=obj,this.hovered.children("a").addClass("hover"),void this.scroll_into_view(this.hovered)):this.error("SELECT: NODE NOT SELECTABLE"):this.error("HOVER: NOT A VALID NODE")},select_branch:function(obj,multiple){if(this.locked)return this.error("LOCKED");obj||!1===this.hovered||(obj=this.hovered);var _this=this;if(!(obj=_this.get_node(obj)).size())return this.error("SELECT: NOT A VALID NODE");if(obj.children("a").removeClass("hover"),!_this.check("clickable",obj))return this.error("SELECT: NODE NOT SELECTABLE");if(
!1===_this.callback("beforechange",[obj.get(0),_this]))return this.error("SELECT: STOPPED BY USER");if(0!=this.settings.rules.multiple&&multiple&&0<obj.children("a.clicked").size())return this.deselect_branch(obj);if(0!=this.settings.rules.multiple&&multiple&&this.selected_arr.push(obj),0!=this.settings.rules.multiple&&!multiple){for(var i in this.selected_arr)this.selected_arr.hasOwnProperty(i)&&(this.selected_arr[i].children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected_arr[i].get(0),_this]));this.selected_arr=[],this.selected_arr.push(obj),this.selected&&this.selected.children("A").hasClass("clicked")&&(this.selected.children("A"
).removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),_this]))}this.settings.rules.multiple||this.selected&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),_this])),this.selected=obj,!1!==this.hovered&&(this.hovered.children("A").removeClass("hover"),this.hovered=obj),this.selected.children("a").addClass("clicked").end().parents("li.closed").each(function(){_this.open_branch(this,!0)}),this.scroll_into_view(this.selected),this.callback("onselect",[this.selected.get(0),_this]),this.callback("onchange",[this.selected.get(0),_this])},deselect_branch:function(obj){if(this.locked
)return this.error("LOCKED");var _this=this;if(0==(obj=this.get_node(obj)).children("a.clicked").size())return this.error("DESELECT: NODE NOT SELECTED");obj.children("a").removeClass("clicked"),this.callback("ondeselect",[obj.get(0),_this]),0!=this.settings.rules.multiple&&1<this.selected_arr.length?(this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){_this.selected_arr.push($(this))}),obj.get(0)==this.selected.get(0)&&(this.selected=this.selected_arr[0])):(0!=this.settings.rules.multiple&&(this.selected_arr=[]),this.selected=!1),this.callback("onchange",[obj.get(0),_this])},toggle_branch:function(obj){
return this.locked?this.error("LOCKED"):(obj=this.get_node(obj)).hasClass("closed")?this.open_branch(obj):obj.hasClass("open")?this.close_branch(obj):void 0},open_branch:function(obj,disable_animation,callback){var _this=this;if(this.locked)return this.error("LOCKED");if(!(obj=this.get_node(obj)).size())return this.error("OPEN: NO SUCH NODE");if(obj.hasClass("leaf"))return this.error("OPEN: OPENING LEAF NODE");if(this.settings.data.async&&0==obj.find("li").size()){if(!1===this.callback("beforeopen",[obj.get(0),this]))return this.error("OPEN: STOPPED BY USER");obj.children("ul:eq(0)").remove().end().append(
"<ul><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(_this.settings.lang.loading||"Loading ...")+"</a></li></ul>"),obj.removeClass("closed").addClass("open");var _datastore=new $.tree.datastores[this.settings.data.type];return _datastore.load(this.callback("beforedata",[obj,this]),this,this.settings.data.opts,function(data){if(!(data=_this.callback("ondata",[data,_this]))||0==data.length)return obj.removeClass("closed").removeClass("open").addClass("leaf").children("ul").remove(),void(callback&&callback.call());_datastore.parse(data,_this,_this.settings.data.opts,function(str){str=_this.callback("onparse",[str,_this]),obj.children("ul:eq(0)"
).replaceWith($("<ul>").html(str)),obj.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),obj.find("li").not(".open").not(".closed").addClass("leaf"),_this.open_branch.apply(_this,[obj]),callback&&callback.call()})}),!0}return this.settings.data.async||!1!==this.callback("beforeopen",[obj.get(0),this])?(0<parseInt(this.settings.ui.animation)&&!disable_animation?(obj.children("ul:eq(0)").css("display","none"),obj.removeClass("closed").addClass("open"),obj.children("ul:eq(0)").slideDown(parseInt(this.settings.ui.animation),function(){$(this).css("display",""),callback&&callback.call()})):(obj.removeClass("closed"
).addClass("open"),callback&&callback.call()),this.callback("onopen",[obj.get(0),this]),!0):this.error("OPEN: STOPPED BY USER")},close_branch:function(obj,disable_animation){if(this.locked)return this.error("LOCKED");var _this=this;return(obj=this.get_node(obj)).size()?!1===_this.callback("beforeclose",[obj.get(0),_this])?this.error("CLOSE: STOPPED BY USER"):(0<parseInt(this.settings.ui.animation)&&!disable_animation&&1==obj.children("ul:eq(0)").size()?obj.children("ul:eq(0)").slideUp(parseInt(this.settings.ui.animation),function(){obj.hasClass("open")&&obj.removeClass("open").addClass("closed"),$(this).css("display","")}):obj.hasClass("open"
)&&obj.removeClass("open").addClass("closed"),this.selected&&!1!==this.settings.ui.selected_parent_close&&0<obj.children("ul:eq(0)").find("a.clicked").size()&&(obj.find("li:has(a.clicked)").each(function(){_this.deselect_branch(this)}),"select_parent"==this.settings.ui.selected_parent_close&&0==obj.children("a.clicked").size()&&this.select_branch(obj,0!=this.settings.rules.multiple&&0<this.selected_arr.length)),void this.callback("onclose",[obj.get(0),this])):this.error("CLOSE: NO SUCH NODE")},open_all:function(obj,callback){if(this.locked)return this.error("LOCKED");var _this=this,s=(obj=obj?this.get_node(obj):this.container).find("li.closed").size()
;callback?this.cl_count--:this.cl_count=0,0<s?(this.cl_count+=s,obj.find("li.closed").each(function(){var __this=this;_this.open_branch.apply(_this,[this,!0,function(){_this.open_all.apply(_this,[__this,!0])}])})):0==this.cl_count&&this.callback("onopen_all",[this])},close_all:function(obj){if(this.locked)return this.error("LOCKED");var _this=this;(obj=obj?this.get_node(obj):this.container).find("li.open").each(function(){_this.close_branch(this,!0)}),this.callback("onclose_all",[this])},set_lang:function(i){if(!$.isArray(this.settings.languages)||0==this.settings.languages.length)return!1;if(this.locked)return this.error("LOCKED");if($.inArray(i,
this.settings.languages)||void 0===this.settings.languages[i]||(i=this.settings.languages[i]),void 0===i)return!1;if(i==this.current_lang)return!0;var st=!1,id="#"+this.container.attr("id");return!1!==(st=tree_component.get_css(id+" ."+this.current_lang))&&(st.style.display="none"),!1!==(st=tree_component.get_css(id+" ."+i))&&(st.style.display=""),this.current_lang=i,!0},get_lang:function(){return!(!$.isArray(this.settings.languages)||0==this.settings.languages.length)&&this.current_lang},create:function(obj,ref_node,position){if(this.locked)return this.error("LOCKED");var root=!1;if(ref_node=-1==ref_node?(root=!0,this.container):ref_node?this.get_node(
ref_node):this.selected,!(root||ref_node&&ref_node.size()))return this.error("CREATE: NO NODE SELECTED");var pos=position,tmp=ref_node;if("before"==position&&(position=ref_node.parent().children().index(ref_node),ref_node=ref_node.parents("li:eq(0)")),"after"==position&&(position=ref_node.parent().children().index(ref_node)+1,ref_node=ref_node.parents("li:eq(0)")),root||0!=ref_node.size()||(root=!0,ref_node=this.container),!root){if(!this.check("creatable",ref_node))return this.error("CREATE: CANNOT CREATE IN NODE");ref_node.hasClass("closed")&&this.open_branch(ref_node,!0)}var torename=!1;if((obj=obj?$.extend(!0,{},obj):{}).attributes||(obj.attributes={}),
obj.attributes[this.settings.rules.type_attr]||(obj.attributes[this.settings.rules.type_attr]=this.get_type(tmp)||"default"),this.settings.languages.length){obj.data||(obj.data={},torename=!0);for(var i=0;i<this.settings.languages.length;i++)obj.data[this.settings.languages[i]]||(obj.data[this.settings.languages[i]]="string"!=(typeof this.settings.lang.new_node).toLowerCase()&&this.settings.lang.new_node[i]?this.settings.lang.new_node[i]:this.settings.lang.new_node)}else obj.data||(obj.data=this.settings.lang.new_node,torename=!0);obj=this.callback("ondata",[obj,this]);var obj_s=$.tree.datastores.json().parse(obj,this);obj_s=this.callback("onparse",[obj_s,
this]);var $li=$(obj_s);$li.children("ul").size()?$li.is(".open")||$li.addClass("closed"):$li.addClass("leaf"),$li.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),$li.find("li").not(".open").not(".closed").addClass("leaf");var r={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",root?-1:ref_node):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",root?-1:ref_node):-1,valid_children:this.check("valid_children",root?-1:ref_node)},nod_type=this.get_type($li);if(void 0!==r.valid_children&&("none"==r.valid_children||$.isArray(r.valid_children)&&-1==$.inArray(nod_type,
r.valid_children)))return this.error("CREATE: NODE NOT A VALID CHILD");if(this.settings.rules.use_max_children&&void 0!==r.max_children&&-1!=r.max_children&&r.max_children>=this.children(ref_node).size())return this.error("CREATE: MAX_CHILDREN REACHED");if(this.settings.rules.use_max_depth){if(void 0!==r.max_depth&&0===r.max_depth)return this.error("CREATE: MAX-DEPTH REACHED");for(var mx=0<r.max_depth&&r.max_depth,t=(i=0,ref_node);-1!==t&&!root;){t=this.parent(t),i++;var m=this.check("max_depth",t);if(0<=m&&(mx=!1===mx?m-i:Math.min(mx,m-i)),!1!==mx&&mx<=0)return this.error("CREATE: MAX-DEPTH REACHED")}if(!1!==mx&&mx<=0)return this.error(
"CREATE: MAX-DEPTH REACHED");if(!1!==mx){var incr=1;for(t=$li;0<t.size();){if(mx-incr<0)return this.error("CREATE: MAX-DEPTH REACHED");t=t.children("ul").children("li"),incr++}}}if("undefined"!=(typeof position).toLowerCase()&&"inside"!=position||(position="top"==this.settings.rules.createat?0:ref_node.children("ul:eq(0)").children("li").size()),0==ref_node.children("ul").size()||1==root&&0==ref_node.children("ul").children("li").size())if(root)a=this.moved($li,this.container.children("ul:eq(0)"),"inside",!0);else var a=this.moved($li,ref_node.children("a:eq(0)"),"inside",!0);else if("before"==pos&&ref_node.children("ul:eq(0)").children("li:nth-child("+(
position+1)+")").size())a=this.moved($li,ref_node.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").children("a:eq(0)"),"before",!0);else if("after"==pos&&ref_node.children("ul:eq(0)").children("li:nth-child("+position+")").size())a=this.moved($li,ref_node.children("ul:eq(0)").children("li:nth-child("+position+")").children("a:eq(0)"),"after",!0);else if(ref_node.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").size())a=this.moved($li,ref_node.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").children("a:eq(0)"),"before",!0);else a=this.moved($li,ref_node.children("ul:eq(0)").children("li:last").children("a:eq(0)"),
"after",!0);return!1===a?this.error("CREATE: ABORTED"):(torename&&(this.select_branch($li.children("a:eq(0)")),this.rename()),$li)},rename:function(obj,new_name){if(this.locked)return this.error("LOCKED");obj=obj?this.get_node(obj):this.selected;var _this=this;if(!obj||!obj.size())return this.error("RENAME: NO NODE SELECTED");if(!this.check("renameable",obj))return this.error("RENAME: NODE NOT RENAMABLE");if(!this.callback("beforerename",[obj.get(0),_this.current_lang,_this]))return this.error("RENAME: STOPPED BY USER");obj.parents("li.closed").each(function(){_this.open_branch(this)}),obj=this.current_lang?obj.find("a."+this.current_lang):obj.find("a:first"
);var rb={};rb[this.container.attr("id")]=this.get_rollback();var icn=obj.children("ins").clone();if("string"==(typeof new_name).toLowerCase())obj.text(new_name).prepend(icn),_this.callback("onrename",[_this.get_node(obj).get(0),_this,rb]);else{var last_value="";obj.contents().each(function(){if(3==this.nodeType)return last_value=this.data,!1}),_this.inp=$("<input type='text' autocomplete='off' />"),_this.inp.val(last_value.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")).on("mousedown",function(event){event.stopPropagation()}).on("mouseup",function(event){event.stopPropagation()}).on("click",function(event){event.stopPropagation()}).on(
"keyup",function(event){var key=event.keyCode||event.which;if(27==key)return this.value=last_value,void this.blur();13!=key||this.blur()}),_this.inp.blur(function(event){""==this.value&&(this.value=last_value),obj.text(this.value).prepend(icn),obj.get(0).style.display="",obj.prevAll("span").remove(),_this.inp=!1,_this.callback("onrename",[_this.get_node(obj).get(0),_this,rb])});var spn=$("<span />").addClass(obj.attr("class")).append(icn).append(_this.inp);obj.get(0).style.display="none",obj.parent().prepend(spn),_this.inp.get(0).focus(),_this.inp.get(0).select()}},remove:function(obj){if(this.locked)return this.error("LOCKED");var _this=this,rb={};if(
rb[this.container.attr("id")]=this.get_rollback(),!obj||this.selected&&this.get_node(obj).get(0)==this.selected.get(0)){if(!this.selected)return this.error("DELETE: NO NODE SELECTED");if(!this.check("deletable",this.selected))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[this.selected.get(0),_this]))return this.error("DELETE: STOPPED BY USER");$parent=this.selected.parent();obj=this.selected;if(0==this.settings.rules.multiple||1==this.selected_arr.length)var stop=!0,tmp="select_previous"==this.settings.ui.selected_delete&&this.prev(this.selected);if(obj=obj.remove(),$parent.children("li:last").addClass("last"),
0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),!stop&&0!=this.settings.rules.multiple){_this=this;this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){_this.selected_arr.push($(this))}),0<this.selected_arr.length&&(this.selected=this.selected_arr[0],this.remove())}stop&&tmp&&this.select_branch(tmp),this.callback("ondelete",[obj.get(0),this,rb])}else if((obj=this.get_node(obj)).size()){if(!this.check("deletable",obj))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[
obj.get(0),_this]))return this.error("DELETE: STOPPED BY USER");if($parent=obj.parent(),obj.find("a.clicked").size()){var reset_selected=!1;_this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){if(reset_selected||this!=_this.selected.get(0)||(reset_selected=!0),-1!=$(this).parents().index(obj))return!0;_this.selected_arr.push($(this))}),reset_selected&&(this.selected=this.selected_arr[0]||!1)}obj=obj.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),
this.callback("ondelete",[obj.get(0),this,rb])}},next:function(obj,strict){return!!(obj=this.get_node(obj)).size()&&(strict?0<obj.nextAll("li").size()&&obj.nextAll("li:eq(0)"):obj.hasClass("open")?obj.find("li:eq(0)"):0<obj.nextAll("li").size()?obj.nextAll("li:eq(0)"):obj.parents("li").next("li").eq(0))},prev:function(obj,strict){if(!(obj=this.get_node(obj)).size())return!1;if(strict)return 0<obj.prevAll("li").size()&&obj.prevAll("li:eq(0)");if(obj.prev("li").size()){for(obj=obj.prev("li").eq(0);obj.hasClass("open");)obj=obj.children("ul:eq(0)").children("li:last");return obj}return!!obj.parents("li:eq(0)").size()&&obj.parents("li:eq(0)")},parent:function(
obj){return!!(obj=this.get_node(obj)).size()&&(obj.parents("li:eq(0)").size()?obj.parents("li:eq(0)"):-1)},children:function(obj){return-1===obj?this.container.children("ul:eq(0)").children("li"):!!(obj=this.get_node(obj)).size()&&obj.children("ul:eq(0)").children("li")},toggle_dots:function(){this.settings.ui.dots?(this.settings.ui.dots=!1,this.container.children("ul:eq(0)").addClass("no_dots")):(this.settings.ui.dots=!0,this.container.children("ul:eq(0)").removeClass("no_dots"))},callback:function(cb,args){var p=!1,r=null;for(var i in this.settings.plugins)if("object"==typeof $.tree.plugins[i]&&((p=$.tree.plugins[i]
).callbacks&&"function"==typeof p.callbacks[cb]&&(r=p.callbacks[cb].apply(this,args)),null!=r)){if("ondata"!=cb&&"onparse"!=cb)return r;args[0]=r}if("function"==typeof(p=this.settings.callback[cb]))return p.apply(null,args)},get_rollback:function(){var rb={};return rb.html=this.container.html(),rb.selected=!!this.selected&&this.selected.attr("id"),rb},moved:function(what,where,how,is_new,is_copy,rb){what=$(what);var $parent=$(what).parents("ul:eq(0)"),$where=$(where);($where.is("ins")&&($where=$where.parent()),rb)||((rb={})[this.container.attr("id")]=this.get_rollback(),is_new||((tmp=1<what.size()?what.eq(0).parents(".tree:eq(0)"):what.parents(".tree:eq(0)")
).get(0)!=this.container.get(0)&&(tmp=tree_component.inst[tmp.attr("id")],rb[tmp.container.attr("id")]=tmp.get_rollback()),delete tmp));if("inside"==how&&this.settings.data.async){var _this=this;if(this.get_node($where).hasClass("closed"))return this.open_branch(this.get_node($where),!0,function(){_this.moved.apply(_this,[what,where,how,is_new,is_copy,rb])});if(1==this.get_node($where).find("> ul > li > a.loading").size())return void setTimeout(function(){_this.moved.apply(_this,[what,where,how,is_new,is_copy])},200)}if(1<what.size()){_this=this;var tmp=this.moved(what.eq(0),where,how,!1,is_copy,rb);return what.each(function(i){0!=i&&tmp&&(tmp=_this.moved(
this,tmp.children("a:eq(0)"),"after",!1,is_copy,rb))}),what}if(is_copy?(_what=what.clone(),_what.each(function(i){this.id=this.id+"_copy",$(this).find("li").each(function(){this.id=this.id+"_copy"}),$(this).removeClass("dragged").find("a.clicked").removeClass("clicked").end().find("li.dragged").removeClass("dragged")})):_what=what,is_new){if(!this.callback("beforecreate",[this.get_node(what).get(0),this.get_node(where).get(0),how,this]))return!1}else if(!this.callback("beforemove",[this.get_node(what).get(0),this.get_node(where).get(0),how,this]))return!1;if(!is_new&&(tmp=what.parents(".tree:eq(0)")).get(0)!=this.container.get(0)){if((
tmp=tree_component.inst[tmp.attr("id")]).settings.languages.length){var res=[];if(0==this.settings.languages.length)res.push("."+tmp.current_lang);else for(var i in this.settings.languages)if(this.settings.languages.hasOwnProperty(i))for(var j in tmp.settings.languages)tmp.settings.languages.hasOwnProperty(j)&&this.settings.languages[i]==tmp.settings.languages[j]&&res.push("."+this.settings.languages[i]);if(0==res.length)return this.error("MOVE: NO COMMON LANGUAGES");_what.find("a").not(res.join(",")).remove()}_what.find("a.clicked").removeClass("clicked")}switch(what=_what,how){case"before":$where.parents("ul:eq(0)").children("li.last").removeClass("last"),
$where.parent().before(what.removeClass("last")),$where.parents("ul:eq(0)").children("li:last").addClass("last");break;case"after":$where.parents("ul:eq(0)").children("li.last").removeClass("last"),$where.parent().after(what.removeClass("last")),$where.parents("ul:eq(0)").children("li:last").addClass("last");break;case"inside":var tmp_node;if($where.parent().children("ul:first").size())if("top"==this.settings.rules.createat)$where.parent().children("ul:first").prepend(what.removeClass("last")).children("li:last").addClass("last"),(tmp_node=$where.parent().children("ul:first").children("li:first")).size()&&(how="before",where=tmp_node);else(
tmp_node=$where.parent().children("ul:first").children(".last")).size()&&(how="after",where=tmp_node),$where.parent().children("ul:first").children(".last").removeClass("last").end().append(what.removeClass("last")).children("li:last").addClass("last");else what.addClass("last"),$where.parent().removeClass("leaf").append("<ul/>"),$where.parent().hasClass("open")||$where.parent().addClass("closed"),$where.parent().children("ul:first").prepend(what);$where.parent().hasClass("closed")&&this.open_branch($where)}if(0==$parent.find("li").size()){var $li=$parent.parent();$li.removeClass("open").removeClass("closed").addClass("leaf"),$li.is(".tree")||$li.children(
"ul").remove(),$li.parents("ul:eq(0)").children("li.last").removeClass("last").end().children("li:last").addClass("last")}else $parent.children("li.last").removeClass("last"),$parent.children("li:last").addClass("last");return is_copy?this.callback("oncopy",[this.get_node(what).get(0),this.get_node(where).get(0),how,this,rb]):is_new?this.callback("oncreate",[this.get_node(what).get(0),$where.is("ul")?-1:this.get_node(where).get(0),how,this,rb]):this.callback("onmove",[this.get_node(what).get(0),this.get_node(where).get(0),how,this,rb]),what},error:function(code){return this.callback("error",[code,this]),!1},lock:function(state){this.locked=state,
this.locked?this.container.children("ul:eq(0)").addClass("locked"):this.container.children("ul:eq(0)").removeClass("locked")},cut:function(obj){return this.locked?this.error("LOCKED"):(obj=obj?this.get_node(obj):this.container.find("a.clicked").filter(":first-child").parent())&&obj.size()?(tree_component.cut_copy.copy_nodes=!1,void(tree_component.cut_copy.cut_nodes=obj)):this.error("CUT: NO NODE SELECTED")},copy:function(obj){return this.locked?this.error("LOCKED"):(obj=obj?this.get_node(obj):this.container.find("a.clicked").filter(":first-child").parent())&&obj.size()?(tree_component.cut_copy.copy_nodes=obj,void(tree_component.cut_copy.cut_nodes=!1)
):this.error("COPY: NO NODE SELECTED")},paste:function(obj,position){if(this.locked)return this.error("LOCKED");var root=!1;if(obj=-1==obj?(root=!0,this.container):obj?this.get_node(obj):this.selected,!(root||obj&&obj.size()))return this.error("PASTE: NO NODE SELECTED");if(!tree_component.cut_copy.copy_nodes&&!tree_component.cut_copy.cut_nodes)return this.error("PASTE: NOTHING TO DO");var pos=position;if("before"==position?(position=obj.parent().children().index(obj),obj=obj.parents("li:eq(0)")):"after"==position?(position=obj.parent().children().index(obj)+1,obj=obj.parents("li:eq(0)")):"undefined"!=(typeof position).toLowerCase()&&"inside"!=position||(
position="top"==this.settings.rules.createat?0:obj.children("ul:eq(0)").children("li").size()),root||0!=obj.size()||(root=!0,obj=this.container),tree_component.cut_copy.copy_nodes&&tree_component.cut_copy.copy_nodes.size()){var ok=!0;if(!root&&!this.check_move(tree_component.cut_copy.copy_nodes,obj.children("a:eq(0)"),"inside"))return!1;if(0==obj.children("ul").size()||1==root&&0==obj.children("ul").children("li").size())if(root)this.moved(tree_component.cut_copy.copy_nodes,this.container.children("ul:eq(0)"),"inside",!1,!0);else this.moved(tree_component.cut_copy.copy_nodes,obj.children("a:eq(0)"),"inside",!1,!0);else if("before"==pos&&obj.children(
"ul:eq(0)").children("li:nth-child("+(position+1)+")").size())this.moved(tree_component.cut_copy.copy_nodes,obj.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").children("a:eq(0)"),"before",!1,!0);else if("after"==pos&&obj.children("ul:eq(0)").children("li:nth-child("+position+")").size())this.moved(tree_component.cut_copy.copy_nodes,obj.children("ul:eq(0)").children("li:nth-child("+position+")").children("a:eq(0)"),"after",!1,!0);else if(obj.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").size())this.moved(tree_component.cut_copy.copy_nodes,obj.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").children("a:eq(0)")
,"before",!1,!0);else this.moved(tree_component.cut_copy.copy_nodes,obj.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!1,!0);tree_component.cut_copy.copy_nodes=!1}if(tree_component.cut_copy.cut_nodes&&tree_component.cut_copy.cut_nodes.size()){ok=!0;if(obj.parents().addBack().each(function(){if(-1!=tree_component.cut_copy.cut_nodes.index(this))return ok=!1}),!ok)return this.error("Invalid paste");if(!root&&!this.check_move(tree_component.cut_copy.cut_nodes,obj.children("a:eq(0)"),"inside"))return!1;if(0==obj.children("ul").size()||1==root&&0==obj.children("ul").children("li").size())if(root)this.moved(tree_component.cut_copy.cut_nodes,
this.container.children("ul:eq(0)"),"inside");else this.moved(tree_component.cut_copy.cut_nodes,obj.children("a:eq(0)"),"inside");else if("before"==pos&&obj.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").size())this.moved(tree_component.cut_copy.cut_nodes,obj.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").children("a:eq(0)"),"before");else if("after"==pos&&obj.children("ul:eq(0)").children("li:nth-child("+position+")").size())this.moved(tree_component.cut_copy.cut_nodes,obj.children("ul:eq(0)").children("li:nth-child("+position+")").children("a:eq(0)"),"after");else if(obj.children("ul:eq(0)").children("li:nth-child("+(
position+1)+")").size())this.moved(tree_component.cut_copy.cut_nodes,obj.children("ul:eq(0)").children("li:nth-child("+(position+1)+")").children("a:eq(0)"),"before");else this.moved(tree_component.cut_copy.cut_nodes,obj.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after");tree_component.cut_copy.cut_nodes=!1}},search:function(str,func){var _this=this;if((!str||this.srch&&str!=this.srch)&&(this.srch="",this.srch_opn=!1,this.container.find("a.search").removeClass("search")),this.srch=str)if(func||(func="contains"),this.settings.data.async)if(this.srch_opn)if(this.srch_opn.length){if(this.srch_opn&&this.srch_opn.length){for(var opn=!1,
j=0;j<this.srch_opn.length;j++)if(0<this.get_node("#"+this.srch_opn[j]).size()){opn=!0;var tmp="#"+this.srch_opn[j];delete this.srch_opn[j],this.open_branch(tmp,!0,function(){_this.search.apply(_this,[str,func])})}opn||(this.srch_opn=[],_this.search.apply(_this,[str,func]))}}else{this.srch_opn=!1;var selector="a";this.settings.languages.length&&(selector+="."+this.current_lang),this.callback("onsearch",[this.container.find(selector+":"+func+"('"+str+"')"),this])}else{var dd=$.extend({search:str},this.callback("beforedata",[!1,this]));$.ajax({type:this.settings.data.opts.method,url:this.settings.data.opts.url,data:dd,dataType:"text",success:function(data){
_this.srch_opn=$.unique(data.split(",")),_this.search.apply(_this,[str,func])}})}else{selector="a";this.settings.languages.length&&(selector+="."+this.current_lang);var nn=this.container.find(selector+":"+func+"('"+str+"')");nn.parents("li.closed").each(function(){_this.open_branch(this,!0)}),this.callback("onsearch",[nn,this])}},add_sheet:tree_component.add_sheet,destroy:function(){if(this.callback("ondestroy",[this]),this.container.off(".jstree"),$("#"+this.container.attr("id")).off("*.jstree"),this.container.removeClass("tree ui-widget ui-widget-content tree-default tree-"+this.settings.ui.theme_name).children("ul").removeClass("no_dots ltr locked").find(
"li").removeClass("leaf").removeClass("open").removeClass("closed").removeClass("last").children("a").removeClass("clicked hover search"),this.cntr==tree_component.focused)for(var i in tree_component.inst)if(i!=this.cntr&&i!=this.container.attr("id")){tree_component.inst[i].focus();break}tree_component.inst[this.cntr]=!1,tree_component.inst[this.container.attr("id")]=!1,delete tree_component.inst[this.cntr],delete tree_component.inst[this.container.attr("id")],tree_component.cntr--}}}$.tree={datastores:{},plugins:{},defaults:{data:{async:!1,type:"html",opts:{method:"GET",url:!1}},selected:!1,opened:[],languages:[],ui:{dots:!0,animation:0,scroll_spd:4,
theme_path:!1,theme_name:"default",selected_parent_close:"select_parent",selected_delete:"select_previous"},types:{default:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:"all",icon:{image:!1,position:!1}}},rules:{multiple:!1,multitree:"none",type_attr:"rel",createat:"bottom",drag_copy:"ctrl",drag_button:"left",use_max_children:!0,use_max_depth:!0,max_children:-1,max_depth:-1,valid_children:"all"},lang:{new_node:"New folder",loading:"Loading ..."},callback:{beforechange:function(NODE,TREE_OBJ){return!0},beforeopen:function(NODE,TREE_OBJ){return!0},beforeclose:function(NODE,TREE_OBJ){return!0},
beforemove:function(NODE,REF_NODE,TYPE,TREE_OBJ){return!0},beforecreate:function(NODE,REF_NODE,TYPE,TREE_OBJ){return!0},beforerename:function(NODE,LANG,TREE_OBJ){return!0},beforedelete:function(NODE,TREE_OBJ){return!0},beforedata:function(NODE,TREE_OBJ){return{id:$(NODE).attr("id")||0}},ondata:function(DATA,TREE_OBJ){return DATA},onparse:function(STR,TREE_OBJ){return STR},onhover:function(NODE,TREE_OBJ){},onselect:function(NODE,TREE_OBJ){},ondeselect:function(NODE,TREE_OBJ){},onchange:function(NODE,TREE_OBJ){},onrename:function(NODE,TREE_OBJ,RB){},onmove:function(NODE,REF_NODE,TYPE,TREE_OBJ,RB){},oncopy:function(NODE,REF_NODE,TYPE,TREE_OBJ,RB){},
oncreate:function(NODE,REF_NODE,TYPE,TREE_OBJ,RB){},ondelete:function(NODE,TREE_OBJ,RB){},onopen:function(NODE,TREE_OBJ){},onopen_all:function(TREE_OBJ){},onclose_all:function(TREE_OBJ){},onclose:function(NODE,TREE_OBJ){},error:function(TEXT,TREE_OBJ){},ondblclk:function(NODE,TREE_OBJ){TREE_OBJ.toggle_branch.call(TREE_OBJ,NODE),TREE_OBJ.select_branch.call(TREE_OBJ,NODE)},onrgtclk:function(NODE,TREE_OBJ,EV){},onload:function(TREE_OBJ){},oninit:function(TREE_OBJ){},onfocus:function(TREE_OBJ){},ondestroy:function(TREE_OBJ){},onsearch:function(NODES,TREE_OBJ){NODES.addClass("search")},ondrop:function(NODE,REF_NODE,TYPE,TREE_OBJ){},check:function(RULE,NODE,VALUE,
TREE_OBJ){return VALUE},check_move:function(NODE,REF_NODE,TYPE,TREE_OBJ){return!0}},plugins:{}},create:function(){return new tree_component},focused:function(){return tree_component.inst[tree_component.focused]},reference:function(obj){var o=$(obj);return o.size()||(o=$("#"+obj)),o.size()?(o=o.is(".tree")?o.attr("id"):o.parents(".tree:eq(0)").attr("id"),tree_component.inst[o]||null):null},rollback:function(data){for(var i in data)if(data.hasOwnProperty(i)){var tmp=tree_component.inst[i],lock=!tmp.locked;lock&&tmp.lock(!0),tmp.inp=!1,tmp.container.html(data[i].html).find(".dragged").removeClass("dragged").end().find(".hover").removeClass("hover"),
data[i].selected&&(tmp.selected=$("#"+data[i].selected),tmp.selected_arr=[],tmp.container.find("a.clicked").each(function(){tmp.selected_arr.push(tmp.get_node(this))})),lock&&tmp.lock(!1),delete lock,delete tmp}},drop_mode:function(opts){opts=$.extend(opts,{show:!1,type:"default",str:"Foreign node"}),tree_component.drag_drop.foreign=!0,tree_component.drag_drop.isdown=!0,tree_component.drag_drop.moving=!0,tree_component.drag_drop.appended=!1,tree_component.drag_drop.f_type=opts.type,(tree_component.drag_drop.f_data=opts).show?(tree_component.drag_drop.drag_help=$(
"<div id='jstree-dragged' class='tree tree-default'><ul><li class='last dragged foreign'><a href='#'><ins>&nbsp;</ins>"+opts.str+"</a></li></ul></div>"),tree_component.drag_drop.drag_node=tree_component.drag_drop.drag_help.find("li:eq(0)")):(tree_component.drag_drop.drag_help=!1,tree_component.drag_drop.drag_node=!1),!1!==$.tree.drag_start&&$.tree.drag_start.call(null,!1)},drag_start:!1,drag:!1,drag_end:!1},$.fn.tree=function(opts){return this.each(function(){var conf=$.extend({},opts);tree_component.inst&&tree_component.inst[$(this).attr("id")]&&tree_component.inst[$(this).attr("id")].destroy(),!1!==conf&&(new tree_component).init(this,conf)})},
tree_component.cntr=0,tree_component.inst={},tree_component.themes=[],tree_component.drag_drop={isdown:!1,drag_node:!1,drag_help:!1,dragged:!1,init_x:!1,init_y:!1,moving:!1,origin_tree:!1,marker:!1,move_type:!1,ref_node:!1,appended:!1,foreign:!1,droppable:[],open_time:!1,scroll_time:!1},tree_component.mouseup=function(event){var tmp=tree_component.drag_drop;if(tmp.open_time&&clearTimeout(tmp.open_time),tmp.scroll_time&&clearTimeout(tmp.scroll_time),tmp.moving&&!1!==$.tree.drag_end&&$.tree.drag_end.call(null,event,tmp),!1===tmp.foreign&&tmp.drag_node&&tmp.drag_node.size()){if(tmp.drag_help.remove(),tmp.move_type)(
tree1=tree_component.inst[tmp.ref_node.parents(".tree:eq(0)").attr("id")])&&tree1.moved(tmp.dragged,tmp.ref_node,tmp.move_type,!1,"on"==tmp.origin_tree.settings.rules.drag_copy||"ctrl"==tmp.origin_tree.settings.rules.drag_copy&&event.ctrlKey);tmp.move_type=!1,tmp.ref_node=!1}if(!1!==tmp.foreign){var tree1;if(tmp.drag_help&&tmp.drag_help.remove(),tmp.move_type)(tree1=tree_component.inst[tmp.ref_node.parents(".tree:eq(0)").attr("id")])&&tree1.callback("ondrop",[tmp.f_data,tree1.get_node(tmp.ref_node).get(0),tmp.move_type,tree1]);tmp.foreign=!1,tmp.move_type=!1,tmp.ref_node=!1}if(tree_component.drag_drop.marker&&tree_component.drag_drop.marker.hide(),
tmp.dragged&&tmp.dragged.size()&&tmp.dragged.removeClass("dragged"),tmp.dragged=!1,tmp.drag_help=!1,tmp.drag_node=!1,tmp.f_type=!1,tmp.f_data=!1,tmp.init_x=!1,tmp.init_y=!1,tmp.moving=!1,tmp.appended=!1,tmp.origin_tree=!1,tmp.isdown)return tmp.isdown=!1,event.preventDefault(),event.stopPropagation(),!1},tree_component.mousemove=function(event){var tmp=tree_component.drag_drop,is_start=!1;if(tmp.isdown){if(!tmp.moving&&Math.abs(tmp.init_x-event.pageX)<5&&Math.abs(tmp.init_y-event.pageY)<5)return event.preventDefault(),event.stopPropagation(),!1;if(tmp.moving||(is_start=tree_component.drag_drop.moving=!0),tmp.open_time&&clearTimeout(tmp.open_time),
!1!==tmp.drag_help&&(tmp.appended||(!1!==tmp.foreign&&(tmp.origin_tree=$.tree.focused()),$("body").append(tmp.drag_help),tmp.w=tmp.drag_help.width(),tmp.appended=!0),tmp.drag_help.css({left:event.pageX+5,top:event.pageY+15})),is_start&&!1!==$.tree.drag_start&&$.tree.drag_start.call(null,event,tmp),!1!==$.tree.drag&&$.tree.drag.call(null,event,tmp),"DIV"==event.target.tagName&&"jstree-marker"==event.target.id)return!1;var et=$(event.target);et.is("ins")&&(et=et.parent());var cnt=et.is(".tree")?et:et.parents(".tree:eq(0)");if(0==cnt.size()||!tree_component.inst[cnt.attr("id")])return tmp.scroll_time&&clearTimeout(tmp.scroll_time),
!1!==tmp.drag_help&&tmp.drag_help.find("li:eq(0) ins").addClass("forbidden"),tmp.move_type=!1,tmp.ref_node=!1,tree_component.drag_drop.marker.hide(),!1;var tree2=tree_component.inst[cnt.attr("id")];tree2.off_height(),tmp.scroll_time&&clearTimeout(tmp.scroll_time),tmp.scroll_time=setTimeout(function(){tree2.scroll_check(event.pageX,event.pageY)},50);var mov=!1;cnt.scrollTop();if("A"==event.target.tagName||"INS"==event.target.tagName){if(et.is("#jstree-dragged"))return!1;tree2.get_node(event.target).hasClass("closed")&&(tmp.open_time=setTimeout(function(){tree2.open_branch(et)},500));var goTo={x:(et_off=et.offset()).left-1,y:event.pageY-et_off.top},arr=[]
;arr=goTo.y<tree2.li_height/3+1?["before","inside","after"]:goTo.y>2*tree2.li_height/3-1?["after","inside","before"]:goTo.y<tree2.li_height/2?["inside","before","after"]:["inside","after","before"];var ok=!1,nn=0==tmp.foreign?tmp.origin_tree.container.find("li.dragged"):tmp.f_type;if($.each(arr,function(i,val){if(tree2.check_move(nn,et,val))return mov=val,!(ok=!0)}),ok){switch(mov){case"before":goTo.y=et_off.top-2,tree_component.drag_drop.marker.attr("class","marker");break;case"after":goTo.y=et_off.top-2+tree2.li_height,tree_component.drag_drop.marker.attr("class","marker");break;case"inside":goTo.x-=2,goTo.y=et_off.top-2+tree2.li_height/2,
tree_component.drag_drop.marker.attr("class","marker_plus")}tmp.move_type=mov,tmp.ref_node=$(event.target),!1!==tmp.drag_help&&tmp.drag_help.find(".forbidden").removeClass("forbidden"),tree_component.drag_drop.marker.css({left:goTo.x,top:goTo.y}).show()}}if((et.is(".tree")||et.is("ul"))&&0==et.find("li:eq(0)").size()){var et_off=et.offset();tmp.move_type="inside",tmp.ref_node=cnt.children("ul:eq(0)"),!1!==tmp.drag_help&&tmp.drag_help.find(".forbidden").removeClass("forbidden"),tree_component.drag_drop.marker.attr("class","marker_plus"),tree_component.drag_drop.marker.css({left:et_off.left+10,top:et_off.top+15}).show()}else(
"A"!=event.target.tagName&&"INS"!=event.target.tagName||!ok)&&(!1!==tmp.drag_help&&tmp.drag_help.find("li:eq(0) ins").addClass("forbidden"),tmp.move_type=!1,tmp.ref_node=!1,tree_component.drag_drop.marker.hide());return event.preventDefault(),event.stopPropagation(),!1}return!0},$(function(){$(document).on("mousemove.jstree",tree_component.mousemove),$(document).on("mouseup.jstree",tree_component.mouseup)}),tree_component.cut_copy={copy_nodes:!1,cut_nodes:!1},tree_component.css=!1,tree_component.get_css=function(rule_name,delete_flag){rule_name=rule_name.toLowerCase();var css_rules=tree_component.css.cssRules||tree_component.css.rules,j=0;do{if(
css_rules.length&&j>css_rules.length+5)return!1;if(css_rules[j].selectorText&&css_rules[j].selectorText.toLowerCase()==rule_name)return 1==delete_flag?(tree_component.css.removeRule&&document.styleSheets[i].removeRule(j),tree_component.css.deleteRule&&document.styleSheets[i].deleteRule(j),!0):css_rules[j]}while(css_rules[++j]);return!1},tree_component.add_css=function(rule_name){return!tree_component.get_css(rule_name)&&(tree_component.css.insertRule?tree_component.css.insertRule(rule_name+" { }",0):tree_component.css.addRule(rule_name,null,0),tree_component.get_css(rule_name))},tree_component.remove_css=function(rule_name){return tree_component.get_css(
rule_name,!0)},tree_component.add_sheet=function(opts){if(opts.str){var tmp=document.createElement("style");return tmp.setAttribute("type","text/css"),tmp.styleSheet?(document.getElementsByTagName("head")[0].appendChild(tmp),tmp.styleSheet.cssText=opts.str):(tmp.appendChild(document.createTextNode(opts.str)),document.getElementsByTagName("head")[0].appendChild(tmp)),tmp.sheet||tmp.styleSheet}if(opts.url){if(!document.createStyleSheet){var newSS=document.createElement("link");return newSS.rel="stylesheet",newSS.type="text/css",newSS.media="all",newSS.href=opts.url,document.getElementsByTagName("head")[0].appendChild(newSS),newSS.styleSheet}try{
document.createStyleSheet(opts.url)}catch(e){}}},$.extend($.tree.datastores,{html:function(){return{get:function(obj,tree,opts){return obj&&$(obj).size()?$("<div>").append(tree.get_node(obj).clone()).html():tree.container.children("ul:eq(0)").html()},parse:function(data,tree,opts,callback){return callback&&callback.call(null,data),data},load:function(data,tree,opts,callback){opts.url?$.ajax({type:opts.method,url:opts.url,data:data,dataType:"html",success:function(d,textStatus){callback.call(null,d)},error:function(xhttp,textStatus,errorThrown){callback.call(null,!1),tree.error(errorThrown+" "+textStatus)}}):callback.call(null,
opts.static||tree.container.children("ul:eq(0)").html())}}},json:function(){return{get:function(obj,tree,opts){var _this=this;if(obj=obj&&0!=$(obj).size()?$(obj):tree.container.children("ul").children("li"),opts||(opts={}),opts.outer_attrib||(opts.outer_attrib=["id","rel","class"]),opts.inner_attrib||(opts.inner_attrib=[]),1<obj.size()){var arr=[];return obj.each(function(){arr.push(_this.get(this,tree,opts))}),arr}if(0==obj.size())return[];var json={attributes:{},data:{}};for(var i in obj.hasClass("open")&&(json.data.state="open"),obj.hasClass("closed")&&(json.data.state="closed"),opts.outer_attrib){if(opts.outer_attrib.hasOwnProperty(i))void 0!==(
val="class"==opts.outer_attrib[i]?obj.attr(opts.outer_attrib[i]).replace(/(^| )last( |$)/gi," ").replace(/(^| )(leaf|closed|open)( |$)/gi," "):obj.attr(opts.outer_attrib[i]))&&0<val.toString().replace(" ","").length&&(json.attributes[opts.outer_attrib[i]]=val),delete val}if(tree.settings.languages.length){for(var i in tree.settings.languages)if(tree.settings.languages.hasOwnProperty(i)){var a=obj.children("a."+tree.settings.languages[i]);if(opts.force||opts.inner_attrib.length||a.children("ins").get(0).style.backgroundImage.toString().length||a.children("ins").get(0).className.length){if(json.data[tree.settings.languages[i]]={},
json.data[tree.settings.languages[i]].title=tree.get_text(obj,tree.settings.languages[i]),a.children("ins").get(0).style.className.length&&(json.data[tree.settings.languages[i]].icon=a.children("ins").get(0).style.className),a.children("ins").get(0).style.backgroundImage.length&&(json.data[tree.settings.languages[i]].icon=a.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),opts.inner_attrib.length)for(var j in json.data[tree.settings.languages[i]].attributes={},opts.inner_attrib){if(opts.inner_attrib.hasOwnProperty(j))void 0!==(val=a.attr(opts.inner_attrib[j]))&&0<val.toString().replace(" ","").length&&(
json.data[tree.settings.languages[i]].attributes[opts.inner_attrib[j]]=val),delete val}}else json.data[tree.settings.languages[i]]=tree.get_text(obj,tree.settings.languages[i])}}else{a=obj.children("a");if(json.data.title=tree.get_text(obj),a.children("ins").size()&&a.children("ins").get(0).className.length&&(json.data.icon=a.children("ins").get(0).className),a.children("ins").size()&&a.children("ins").get(0).style.backgroundImage.length&&(json.data.icon=a.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),opts.inner_attrib.length)for(var j in json.data.attributes={},opts.inner_attrib){var val;if(
opts.inner_attrib.hasOwnProperty(j))void 0!==(val=a.attr(opts.inner_attrib[j]))&&0<val.toString().replace(" ","").length&&(json.data.attributes[opts.inner_attrib[j]]=val),delete val}}return 0<obj.children("ul").size()&&(json.children=[],obj.children("ul").children("li").each(function(){json.children.push(_this.get(this,tree,opts))})),json},parse:function(data,tree,opts,callback){if("[object Array]"===Object.prototype.toString.apply(data)){for(var str="",i=0;i<data.length;i++)"function"!=typeof data[i]&&(str+=this.parse(data[i],tree,opts));return callback&&callback.call(null,str),str}if(!data||!data.data)return callback&&callback.call(null,!1),"";str=""
;str+="<li ";var cls=!1;if(data.attributes)for(var i in data.attributes)data.attributes.hasOwnProperty(i)&&("class"==i?(str+=" class='"+data.attributes[i]+" ","closed"!=data.state&&"open"!=data.state||(str+=" "+data.state+" "),str+="' ",cls=!0):str+=" "+i+"='"+data.attributes[i]+"' ");if(cls||"closed"!=data.state&&"open"!=data.state||(str+=" class='"+data.state+"' "),str+=">",tree.settings.languages.length)for(i=0;i<tree.settings.languages.length;i++){if((attr={href:"",style:""}).class=tree.settings.languages[i],data.data[tree.settings.languages[i]]&&"undefined"!=(typeof data.data[tree.settings.languages[i]].attributes).toLowerCase())for(
var j in data.data[tree.settings.languages[i]].attributes)data.data[tree.settings.languages[i]].attributes.hasOwnProperty(j)&&("style"==j||"class"==j?attr[j]+=" "+data.data[tree.settings.languages[i]].attributes[j]:attr[j]=data.data[tree.settings.languages[i]].attributes[j]);for(var j in str+="<a",attr)attr.hasOwnProperty(j)&&(str+=" "+j+'="'+attr[j]+'" ');str+=">",data.data[tree.settings.languages[i]]&&data.data[tree.settings.languages[i]].icon?str+="<ins "+(-1==data.data[tree.settings.languages[i]].icon.indexOf("/"
)?" class='"+data.data[tree.settings.languages[i]].icon+"' ":" style='background-image:url(\""+data.data[tree.settings.languages[i]].icon+"\");' ")+">&nbsp;</ins>":str+="<ins>&nbsp;</ins>",str+=("undefined"!=(typeof data.data[tree.settings.languages[i]].title).toLowerCase()?data.data[tree.settings.languages[i]].title:data.data[tree.settings.languages[i]])+"</a>"}else{var attr={href:"",style:"",class:""};if("undefined"!=(typeof data.data.attributes).toLowerCase())for(var i in data.data.attributes)data.data.attributes.hasOwnProperty(i)&&("style"==i||"class"==i?attr[i]+=" "+data.data.attributes[i]:attr[i]=data.data.attributes[i]);for(var i in str+="<a",attr
)attr.hasOwnProperty(i)&&(str+=" "+i+'="'+attr[i]+'" ');str+=">",data.data.icon?str+="<ins "+(-1==data.data.icon.indexOf("/")?" class='"+data.data.icon+"' ":" style='background-image:url(\""+data.data.icon+"\");' ")+">&nbsp;</ins>":str+="<ins>&nbsp;</ins>",str+=("undefined"!=(typeof data.data.title).toLowerCase()?data.data.title:data.data)+"</a>"}if(data.children&&data.children.length){str+="<ul>";for(i=0;i<data.children.length;i++)str+=this.parse(data.children[i],tree,opts);str+="</ul>"}return str+="</li>",callback&&callback.call(null,str),str},load:function(data,tree,opts,callback){opts.static?callback.call(null,opts.static):$.ajax({type:opts.method,
url:opts.url,data:data,dataType:"json",success:function(d,textStatus){callback.call(null,d)},error:function(xhttp,textStatus,errorThrown){callback.call(null,!1),tree.error(errorThrown+" "+textStatus)}})}}}})}),define("lib/jsTree/plugins/jquery.tree.checkbox",["jquery","jquery.tree"],function($){$.extend($.tree.plugins,{checkbox:{defaults:{three_state:!0},get_checked:function(t){return t||(t=$.tree.focused()),t.container.find("a.checked").parent()},get_undeterminded:function(t){return t||(t=$.tree.focused()),t.container.find("a.undetermined").parent()},get_unchecked:function(t){return t||(t=$.tree.focused()),t.container.find("a:not(.checked, .undetermined)"
).parent()},check:function(n){if(!n)return!1;var t=$.tree.reference(n);return!1!==t.callback("beforecheck",[n,t])&&((n=t.get_node(n)).hasClass("node-class")&&n.hasClass("closed")?(t.open_branch(n),!1):(n.children("a").hasClass("checked")||($.extend(!0,{},$.tree.plugins.checkbox.defaults,t.settings.plugins.checkbox).three_state?(n.find("li").addBack().children("a").removeClass("unchecked undetermined").addClass("checked"),n.parents("li").each(function(){if(0<$(this).children("ul").find("a:not(.checked):eq(0)").size())return $(this).parents("li").addBack().children("a").removeClass("unchecked checked").addClass("undetermined"),!1;$(this).children("a"
).removeClass("unchecked undetermined").addClass("checked")})):n.hasClass("node-class")||n.children("a").removeClass("unchecked").addClass("checked")),!0))},uncheck:function(n){if(!n)return!1;var t=$.tree.reference(n);return!1!==t.callback("beforeuncheck",[n,t])&&((n=t.get_node(n)).children("a").hasClass("unchecked")||($.extend(!0,{},$.tree.plugins.checkbox.defaults,t.settings.plugins.checkbox).three_state?(n.find("li").addBack().children("a").removeClass("checked undetermined").addClass("unchecked"),n.parents("li").each(function(){if(0<$(this).find("a.checked, a.undetermined").size()-1)return $(this).parents("li").addBack().children("a").removeClass(
"unchecked checked").addClass("undetermined"),!1;$(this).children("a").removeClass("checked undetermined").addClass("unchecked")})):n.children("a").removeClass("checked").addClass("unchecked")),!0)},toggle:function(n){if(!n)return!1;(n=$.tree.reference(n).get_node(n)).children("a").hasClass("checked")?$.tree.plugins.checkbox.uncheck(n):$.tree.plugins.checkbox.check(n)},callbacks:{onchange:function(n,t){$.tree.plugins.checkbox.toggle(n)}}}})}),function(){var d3={version:"3.5.16"},d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)},d3_document=this.document;function d3_documentElement(node){return node&&(
node.ownerDocument||node.document||node).documentElement}function d3_window(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}if(d3_document)try{d3_array(d3_document.documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){for(var i=list.length,array=new Array(i);i--;)array[i]=list[i];return array}}if(Date.now||(Date.now=function(){return+new Date}),d3_document)try{d3_document.createElement("DIV").style.setProperty("opacity",0,"")}catch(error){var d3_element_prototype=this.Element.prototype,d3_element_setAttribute=d3_element_prototype.setAttribute,
d3_element_setAttributeNS=d3_element_prototype.setAttributeNS,d3_style_prototype=this.CSSStyleDeclaration.prototype,d3_style_setProperty=d3_style_prototype.setProperty;d3_element_prototype.setAttribute=function(name,value){d3_element_setAttribute.call(this,name,value+"")},d3_element_prototype.setAttributeNS=function(space,local,value){d3_element_setAttributeNS.call(this,space,local,value+"")},d3_style_prototype.setProperty=function(name,value,priority){d3_style_setProperty.call(this,name,value+"",priority)}}function d3_ascending(a,b){return a<b?-1:b<a?1:b<=a?0:NaN}function d3_number(x){return null===x?NaN:+x}function d3_numeric(x){return!isNaN(x)}
function d3_bisector(compare){return{left:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;0<compare(a[mid],x)?hi=mid:lo=mid+1}return lo}}}d3.ascending=d3_ascending,d3.descending=function(a,b){return b<a?-1:a<b?1:a<=b?0:NaN},d3.min=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b<=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&b<a&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,
array[i],i))&&b<=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&b<a&&(a=b)}return a},d3.max=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b<=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&a<b&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b<=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&a<b&&(a=b)}return a},d3.extent=function(array,f){var a,b,c,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b<=b){a=c=b;break}for(;++i<n;)null!=(b=array[i])&&(b<a&&(a=b),c<b&&(c=b))}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b<=b){
a=c=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&(b<a&&(a=b),c<b&&(c=b))}return[a,c]},d3.sum=function(array,f){var a,s=0,n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=+array[i])&&(s+=a);else for(;++i<n;)d3_numeric(a=+f.call(array,array[i],i))&&(s+=a);return s},d3.mean=function(array,f){var a,s=0,n=array.length,i=-1,j=n;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))?s+=a:--j;else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))?s+=a:--j;if(j)return s/j},d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v},
d3.median=function(array,f){var a,numbers=[],n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&numbers.push(a);else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&numbers.push(a);if(numbers.length)return d3.quantile(numbers.sort(d3_ascending),.5)},d3.variance=function(array,f){var a,d,n=array.length,m=0,s=0,i=-1,j=0;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&(s+=(d=a-m)*(a-(m+=d/++j)));else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&(s+=(d=a-m)*(a-(m+=d/++j)));if(1<j)return s/(j-1)},d3.deviation=function(){var v=d3.variance.apply(this,arguments)
;return v?Math.sqrt(v):v};var d3_bisect=d3_bisector(d3_ascending);function d3_transposeLength(d){return d.length}d3.bisectLeft=d3_bisect.left,d3.bisect=d3.bisectRight=d3_bisect.right,d3.bisector=function(f){return d3_bisector(1===f.length?function(d,x){return d3_ascending(f(d),x)}:f)},d3.shuffle=function(array,i0,i1){(m=arguments.length)<3&&(i1=array.length,m<2&&(i0=0));for(var t,i,m=i1-i0;m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},d3.permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},d3.pairs=function(array){for(var i=0,
n=array.length-1,p1=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=[p1,p1=array[++i]];return pairs},d3.transpose=function(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=d3.min(matrix,d3_transposeLength),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose},d3.zip=function(){return d3.transpose(arguments)},d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys},d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values},d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]})
;return entries},d3.merge=function(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);0<=--n;)for(m=(array=arrays[n]).length;0<=--m;)merged[--j]=array[m];return merged};var abs=Math.abs;function d3_class(ctor,properties){for(var key in properties)Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:!1})}function d3_Map(){this._=Object.create(null)}d3.range=function(start,stop,step){if(arguments.length<3&&(step=1,arguments.length<2&&(stop=start,start=0)),(stop-start)/step==1/0)throw new Error("infinite range");var j,range=[],k=function(x){var k=1;for(;x*k%1;)k*=10;return k}(abs(step
)),i=-1;if(start*=k,stop*=k,(step*=k)<0)for(;(j=start+step*++i)>stop;)range.push(j/k);else for(;(j=start+step*++i)<stop;)range.push(j/k);return range},d3.map=function(object,f){var map=new d3_Map;if(object instanceof d3_Map)object.forEach(function(key,value){map.set(key,value)});else if(Array.isArray(object)){var o,i=-1,n=object.length;if(1===arguments.length)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f.call(object,o=object[i],i),o)}else for(var key in object)map.set(key,object[key]);return map};var d3_map_proto="__proto__",d3_map_zero="\0";function d3_map_escape(key){return(key+="")===d3_map_proto||key[0]===d3_map_zero?d3_map_zero+key:key}
function d3_map_unescape(key){return(key+="")[0]===d3_map_zero?key.slice(1):key}function d3_map_has(key){return d3_map_escape(key)in this._}function d3_map_remove(key){return(key=d3_map_escape(key))in this._&&delete this._[key]}function d3_map_keys(){var keys=[];for(var key in this._)keys.push(d3_map_unescape(key));return keys}function d3_map_size(){var size=0;for(var key in this._)++size;return size}function d3_map_empty(){for(var key in this._)return!1;return!0}function d3_Set(){this._=Object.create(null)}function d3_identity(d){return d}function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments)
;return value===source?target:value}}function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.slice(1);for(var i=0,n=d3_vendorPrefixes.length;i<n;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}d3_class(d3_Map,{has:d3_map_has,get:function(key){return this._[d3_map_escape(key)]},set:function(key,value){return this._[d3_map_escape(key)]=value},remove:d3_map_remove,keys:d3_map_keys,values:function(){var values=[];for(var key in this._)values.push(this._[key]);return values},entries:function(){var entries=[];for(var key in this._)entries.push({key:d3_map_unescape(key),
value:this._[key]});return entries},size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key),this._[key])}}),d3.nest=function(){var sortValues,rollup,nest={},keys=[],sortKeys=[];function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;for(var keyValue,object,setter,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=new d3_Map;++i<n;)(values=valuesByKey.get(keyValue=key(object=array[i])))?values.push(object):valuesByKey.set(keyValue,[object]);return setter=mapType?(object=mapType(),function(keyValue,values){object.set(
keyValue,map(mapType,values,depth))}):(object={},function(keyValue,values){object[keyValue]=map(mapType,values,depth)}),valuesByKey.forEach(setter),object}return nest.map=function(array,mapType){return map(mapType,array,0)},nest.entries=function(array){return function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];return map.forEach(function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})}),sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}(map(d3.map,array,0),0)},nest.key=function(d){return keys.push(d),nest},nest.sortKeys=function(order){return sortKeys[keys.length-1]=order,nest}
,nest.sortValues=function(order){return sortValues=order,nest},nest.rollup=function(f){return rollup=f,nest},nest},d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;i<n;++i)set.add(array[i]);return set},d3_class(d3_Set,{has:d3_map_has,add:function(key){return this._[d3_map_escape(key+="")]=!0,key},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key))}}),d3.behavior={},d3.rebind=function(target,source){for(var method,i=1,n=arguments.length;++i<n;)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target}
;var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];function d3_noop(){}function d3_dispatch(){}function d3_dispatch_event(dispatch){var listeners=[],listenerByName=new d3_Map;function event(){for(var l,z=listeners,i=-1,n=z.length;++i<n;)(l=z[i].on)&&l.apply(this,arguments);return dispatch}return event.on=function(name,listener){var i,l=listenerByName.get(name);return arguments.length<2?l&&l.on:(l&&(l.on=null,listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1)),listenerByName.remove(name)),listener&&listeners.push(listenerByName.set(name,{on:listener})),dispatch)},event}function d3_eventPreventDefault(){
d3.event.preventDefault()}function d3_eventSource(){for(var s,e=d3.event;s=e.sourceEvent;)e=s;return e}function d3_eventDispatch(target){for(var dispatch=new d3_dispatch,i=0,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target,d3.event=e1,dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}},dispatch}d3.dispatch=function(){for(var dispatch=new d3_dispatch,i=-1,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch},d3_dispatch.prototype.on=function(type,listener){
var i=type.indexOf("."),name="";if(0<=i&&(name=type.slice(i+1),type=type.slice(0,i)),type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(2===arguments.length){if(null==listener)for(type in this)this.hasOwnProperty(type)&&this[type].on(name,null);return this}},d3.event=null,d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]};function d3_selection(groups){return d3_subclass(groups,
d3_selectionPrototype),groups}var d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatches=function(n,s){var d3_selectMatcher=n.matches||n[d3_vendorSymbol(n,"matchesSelector")];return(d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)})(n,s)};"function"==typeof Sizzle&&(d3_select=function(s,n){return Sizzle(s,n)[0]||null},d3_selectAll=Sizzle,d3_selectMatches=Sizzle.matchesSelector),d3.selection=function(){return d3.select(d3_document.documentElement)};var d3_selectionPrototype=d3.selection.prototype=[];function d3_selection_selector(selector){
return"function"==typeof selector?selector:function(){return d3_select(selector,this)}}function d3_selection_selectorAll(selector){return"function"==typeof selector?selector:function(){return d3_selectAll(selector,this)}}d3_selectionPrototype.select=function(selector){var subgroup,subnode,group,node,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(subnode=selector.call(node,node.__data__,i,j)),subnode&&"__data__"in node&&(subnode.__data__=node.__data__)):subgroup.push(null)}
return d3_selection(subgroups)},d3_selectionPrototype.selectAll=function(selector){var subgroup,node,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j))),subgroup.parentNode=node);return d3_selection(subgroups)};var d3_nsXhtml="http://www.w3.org/1999/xhtml",d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:d3_nsXhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function d3_selection_attr(name,value){
return name=d3.ns.qualify(name),null==value?name.local?function(){this.removeAttributeNS(name.space,name.local)}:function(){this.removeAttribute(name)}:"function"==typeof value?name.local?function(){var x=value.apply(this,arguments);null==x?this.removeAttributeNS(name.space,name.local):this.setAttributeNS(name.space,name.local,x)}:function(){var x=value.apply(this,arguments);null==x?this.removeAttribute(name):this.setAttribute(name,x)}:name.local?function(){this.setAttributeNS(name.space,name.local,value)}:function(){this.setAttribute(name,value)}}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}function d3_selection_classedRe(name){
return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return(name+"").trim().split(/^|\s+/)}function d3_selection_classed(name,value){var n=(name=d3_selection_classes(name).map(d3_selection_classedName)).length;return"function"==typeof value?function(){for(var i=-1,x=value.apply(this,arguments);++i<n;)name[i](this,x)}:function(){for(var i=-1;++i<n;)name[i](this,value)}}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";value?(re.lastIndex=0,re.test(c
)||node.setAttribute("class",d3_collapse(c+" "+name))):node.setAttribute("class",d3_collapse(c.replace(re," ")))}}function d3_selection_style(name,value,priority){return null==value?function(){this.style.removeProperty(name)}:"function"==typeof value?function(){var x=value.apply(this,arguments);null==x?this.style.removeProperty(name):this.style.setProperty(name,x,priority)}:function(){this.style.setProperty(name,value,priority)}}function d3_selection_property(name,value){return null==value?function(){delete this[name]}:"function"==typeof value?function(){var x=value.apply(this,arguments);null==x?delete this[name]:this[name]=x}:function(){this[name]=value}}
function d3_selection_creator(name){return"function"==typeof name?name:(name=d3.ns.qualify(name)).local?function(){return this.ownerDocument.createElementNS(name.space,name.local)}:function(){var document=this.ownerDocument,namespace=this.namespaceURI;return namespace===d3_nsXhtml&&document.documentElement.namespaceURI===d3_nsXhtml?document.createElement(name):document.createElementNS(namespace,name)}}function d3_selectionRemove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function d3_selection_dataNode(data){return{__data__:data}}function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}
function d3_selection_each(groups,callback){for(var j=0,m=groups.length;j<m;j++)for(var node,group=groups[j],i=0,n=group.length;i<n;i++)(node=group[i])&&callback(node,i,j);return groups}function d3_selection_enter(selection){return d3_subclass(selection,d3_selection_enterPrototype),selection}d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;return 0<=i&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}},d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node();return(
name=d3.ns.qualify(name)).local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))},d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){for(;++i<n;)if(!value.contains(name[i]))return!1}else for(value=node.getAttribute("class");++i<n;)if(!d3_selection_classedRe(name[i]).test(value))return!1;return!0}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}
return this.each(d3_selection_classed(name,value))},d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if("string"!=typeof name){for(priority in n<2&&(value=""),name)this.each(d3_selection_style(priority,name[priority],value));return this}if(n<2){var node=this.node();return d3_window(node).getComputedStyle(node,null).getPropertyValue(name)}priority=""}return this.each(d3_selection_style(name,value,priority))},d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if("string"==typeof name)return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}
return this.each(d3_selection_property(name,value))},d3_selectionPrototype.text=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}:null==value?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent},d3_selectionPrototype.html=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}:null==value?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML},d3_selectionPrototype.append=function(name){
return name=d3_selection_creator(name),this.select(function(){return this.appendChild(name.apply(this,arguments))})},d3_selectionPrototype.insert=function(name,before){return name=d3_selection_creator(name),before=d3_selection_selector(before),this.select(function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)})},d3_selectionPrototype.remove=function(){return this.each(d3_selectionRemove)},d3_selectionPrototype.data=function(value,key){var group,node,i=-1,n=this.length;if(!arguments.length){for(value=new Array(n=(group=this[0]).length);++i<n;)(node=group[i])&&(value[i]=node.__data__);return value}function bind(group
,groupData){var i,node,nodeData,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n);if(key){var keyValue,nodeByKeyValue=new d3_Map,keyValues=new Array(n);for(i=-1;++i<n;)(node=group[i])&&(nodeByKeyValue.has(keyValue=key.call(node,node.__data__,i))?exitNodes[i]=node:nodeByKeyValue.set(keyValue,node),keyValues[i]=keyValue);for(i=-1;++i<m;)(node=nodeByKeyValue.get(keyValue=key.call(groupData,nodeData=groupData[i],i)))?!0!==node&&((updateNodes[i]=node).__data__=nodeData):enterNodes[i]=d3_selection_dataNode(nodeData),nodeByKeyValue.set(keyValue,!0);for(i=-1;++i<n;
)i in keyValues&&!0!==nodeByKeyValue.get(keyValues[i])&&(exitNodes[i]=group[i])}else{for(i=-1;++i<n0;)node=group[i],nodeData=groupData[i],node?(node.__data__=nodeData,updateNodes[i]=node):enterNodes[i]=d3_selection_dataNode(nodeData);for(;i<m;++i)enterNodes[i]=d3_selection_dataNode(groupData[i]);for(;i<n;++i)exitNodes[i]=group[i]}enterNodes.update=updateNodes,enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode,enter.push(enterNodes),update.push(updateNodes),exit.push(exitNodes)}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if("function"==typeof value)for(;++i<n;)bind(group=this[i],value.call(
group,group.parentNode.__data__,i));else for(;++i<n;)bind(group=this[i],value);return update.enter=function(){return enter},update.exit=function(){return exit},update},d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")},d3_selectionPrototype.filter=function(filter){var subgroup,group,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;i<n;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}
return d3_selection(subgroups)},d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;)for(var node,group=this[j],i=group.length-1,next=group[i];0<=--i;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node);return this},d3_selectionPrototype.sort=function(comparator){comparator=function(comparator){arguments.length||(comparator=d3_ascending);return function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()},d3_selectionPrototype.each=function(callback){return d3_selection_each(this,
function(node,i,j){callback.call(node,node.__data__,i,j)})},d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);return callback.apply(args[0]=this,args),this},d3_selectionPrototype.empty=function(){return!this.node()},d3_selectionPrototype.node=function(){for(var j=0,m=this.length;j<m;j++)for(var group=this[j],i=0,n=group.length;i<n;i++){var node=group[i];if(node)return node}return null},d3_selectionPrototype.size=function(){var n=0;return d3_selection_each(this,function(){++n}),n};var d3_selection_enterPrototype=[];function d3_selection_on(type,listener,capture){var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener
;0<i&&(type=type.slice(0,i));var filter=d3_selection_onFilters.get(type);function onRemove(){var l=this[name];l&&(this.removeEventListener(type,l,l.$),delete this[name])}return filter&&(type=filter,wrap=d3_selection_onFilter),i?listener?function(){var l=wrap(listener,d3_array(arguments));onRemove.call(this),this.addEventListener(type,this[name]=l,l.$=capture),l._=listener}:onRemove:listener?d3_noop:function(){var match,re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$");for(var name in this)if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$),delete this[name]}}}d3.selection.enter=d3_selection_enter,(
d3.selection.enter.prototype=d3_selection_enterPrototype).append=d3_selectionPrototype.append,d3_selection_enterPrototype.empty=d3_selectionPrototype.empty,d3_selection_enterPrototype.node=d3_selectionPrototype.node,d3_selection_enterPrototype.call=d3_selectionPrototype.call,d3_selection_enterPrototype.size=d3_selectionPrototype.size,d3_selection_enterPrototype.select=function(selector){for(var subgroup,subnode,upgroup,group,node,subgroups=[],j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update,subgroups.push(subgroup=[]),subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(
upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j)),subnode.__data__=node.__data__):subgroup.push(null)}return d3_selection(subgroups)},d3_selection_enterPrototype.insert=function(name,before){var enter,i0,j0;return arguments.length<2&&(enter=this,before=function(d,i,j){var node,group=enter[j].update,n=group.length;for(j!=j0&&(j0=j,i0=0),i0<=i&&(i0=i+1);!(node=group[i0])&&++i0<n;);return node}),d3_selectionPrototype.insert.call(this,name,before)},d3.select=function(node){var group;return"string"==typeof node?(group=[d3_select(node,d3_document)]).parentNode=d3_document.documentElement:(group=[node]).parentNode=d3_documentElement(node),
d3_selection([group])},d3.selectAll=function(nodes){var group;return"string"==typeof nodes?(group=d3_array(d3_selectAll(nodes,d3_document))).parentNode=d3_document.documentElement:(group=d3_array(nodes)).parentNode=null,d3_selection([group])},d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(n<3){if("string"!=typeof type){for(capture in n<2&&(listener=!1),type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(n<2)return(n=this.node()["__on"+type])&&n._;capture=!1}return this.each(d3_selection_on(type,listener,capture))};var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"})
;function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e,argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var related=e.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||l.call(this,e)}}d3_document&&d3_selection_onFilters.forEach(function(k){"on"+k in d3_document&&d3_selection_onFilters.remove(k)});var d3_event_dragSelect,d3_event_dragId=0;function d3_event_dragSuppress(node){var name=".dragsuppress-"+ ++d3_event_dragId,
click="click"+name,w=d3.select(d3_window(node)).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(null==d3_event_dragSelect&&(d3_event_dragSelect=!("onselectstart"in node)&&d3_vendorSymbol(node.style,"userSelect")),d3_event_dragSelect){var style=d3_documentElement(node).style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){if(w.on(name,null),d3_event_dragSelect&&(style[d3_event_dragSelect]=select),suppressClick){var off=function(){w.on(click,null)};w.on(click,function(){d3_eventPreventDefault(),off()},!0),setTimeout(off,0)
}}}d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function d3_mousePoint(container,e){e.changedTouches&&(e=e.changedTouches[0]);var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(d3_mouse_bug44083<0){var window=d3_window(container);if(window.scrollX||window.scrollY){var ctm=(svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e),svg.remove()}}
return point.y=d3_mouse_bug44083?(point.x=e.pageX,e.pageY):(point.x=e.clientX,e.clientY),[(point=point.matrixTransform(container.getScreenCTM().inverse())).x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}function d3_behavior_dragTouchId(){return d3.event.changedTouches[0].identifier}d3.touch=function(container,touches,identifier){if(arguments.length<3&&(identifier=touches,touches=d3_eventSource().changedTouches),touches)for(var touch,i=0,n=touches.length;i<n;++i)if((touch=touches[i]).identifier===identifier)return d3_mousePoint(container,touch)},
d3.behavior.drag=function(){var event=d3_eventDispatch(drag,"drag","dragstart","dragend"),origin=null,mousedown=dragstart(d3_noop,d3.mouse,d3_window,"mousemove","mouseup"),touchstart=dragstart(d3_behavior_dragTouchId,d3.touch,d3_identity,"touchmove","touchend");function drag(){this.on("mousedown.drag",mousedown).on("touchstart.drag",touchstart)}function dragstart(id,position,subject,move,end){return function(){var dragOffset,target=d3.event.target.correspondingElement||d3.event.target,parent=this.parentNode,dispatch=event.of(this,arguments),dragged=0,dragId=id(),dragName=".drag"+(null==dragId?"":"-"+dragId),dragSubject=d3.select(subject(target)).on(
move+dragName,function(){var dx,dy,position1=position(parent,dragId);if(!position1)return;dx=position1[0]-position0[0],dy=position1[1]-position0[1],dragged|=dx|dy,dispatch({type:"drag",x:(position0=position1)[0]+dragOffset[0],y:position1[1]+dragOffset[1],dx:dx,dy:dy})}).on(end+dragName,function(){if(!position(parent,dragId))return;dragSubject.on(move+dragName,null).on(end+dragName,null),dragRestore(dragged),dispatch({type:"dragend"})}),dragRestore=d3_event_dragSuppress(target),position0=position(parent,dragId);dragOffset=origin?[(dragOffset=origin.apply(this,arguments)).x-position0[0],dragOffset.y-position0[1]]:[0,0],dispatch({type:"dragstart"})}}
return drag.origin=function(x){return arguments.length?(origin=x,drag):origin},d3.rebind(drag,event,"on")},d3.touches=function(container,touches){return arguments.length<2&&(touches=d3_eventSource().touches),touches?d3_array(touches).map(function(touch){var point=d3_mousePoint(container,touch);return point.identifier=touch.identifier,point}):[]};var =1e-6,2=*,=Math.PI,=2*,=-,half=/2,d3_radians=/180,d3_degrees=180/;function d3_sgn(x){return 0<x?1:x<0?-1:0}function d3_cross2d(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function d3_acos(x){return 1<x?0:x<-1?:Math.acos(x)}function d3_asin(x){
return 1<x?half:x<-1?-half:Math.asin(x)}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_haversin(x){return(x=Math.sin(x/2))*x}var =Math.SQRT2;d3.interpolateZoom=function(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<2)S=Math.log(w1/w0)/,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+4*d2)/(2*w0*2*d1),b1=(w1*w1-w0*w0-4*d2)/(2*w1*2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/,i=function(t){var x,s=t*S,coshr0=d3_cosh(r0),u=w0/(2*d1)*(coshr0*(x=*s+r0,((x=Math.exp(2*x))-1)/(x+1)
)-function(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/d3_cosh(*s+r0)]}}return i.duration=1e3*S,i},d3.behavior.zoom=function(){var translate0,center0,center,mousewheelTimer,touchtime,x0,x1,y0,y1,view={x:0,y:0,k:1},size=[960,500],scaleExtent=d3_behavior_zoomInfinity,duration=250,zooming=0,mousedown="mousedown.zoom",mousemove="mousemove.zoom",mouseup="mouseup.zoom",touchstart="touchstart.zoom",event=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend");function zoom(g){g.on(mousedown,mousedowned).on(d3_behavior_zoomWheel+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(touchstart,touchstarted)}function location(p){return[(
p[0]-view.x)/view.k,(p[1]-view.y)/view.k]}function scaleTo(s){view.k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],s))}function translateTo(p,l){l=function(l){return[l[0]*view.k+view.x,l[1]*view.k+view.y]}(l),view.x+=p[0]-l[0],view.y+=p[1]-l[1]}function zoomTo(that,p,l,k){that.__chart__={x:view.x,y:view.y,k:view.k},scaleTo(Math.pow(2,k)),translateTo(center0=p,l),that=d3.select(that),0<duration&&(that=that.transition().duration(duration)),that.call(zoom.event)}function rescale(){x1&&x1.domain(x0.range().map(function(x){return(x-view.x)/view.k}).map(x0.invert)),y1&&y1.domain(y0.range().map(function(y){return(y-view.y)/view.k}).map(y0.invert))}
function zoomstarted(dispatch){zooming++||dispatch({type:"zoomstart"})}function zoomed(dispatch){rescale(),dispatch({type:"zoom",scale:view.k,translate:[view.x,view.y]})}function zoomended(dispatch){--zooming||(dispatch({type:"zoomend"}),center0=null)}function mousedowned(){var that=this,dispatch=event.of(that,arguments),dragged=0,subject=d3.select(d3_window(that)).on(mousemove,function(){dragged=1,translateTo(d3.mouse(that),location0),zoomed(dispatch)}).on(mouseup,function(){subject.on(mousemove,null).on(mouseup,null),dragRestore(dragged),zoomended(dispatch)}),location0=location(d3.mouse(that)),dragRestore=d3_event_dragSuppress(that)
;d3_selection_interrupt.call(that),zoomstarted(dispatch)}function touchstarted(){var scale0,that=this,dispatch=event.of(that,arguments),locations0={},distance0=0,zoomName=".zoom-"+d3.event.changedTouches[0].identifier,touchmove="touchmove"+zoomName,touchend="touchend"+zoomName,targets=[],subject=d3.select(that),dragRestore=d3_event_dragSuppress(that);function relocate(){var touches=d3.touches(that);return scale0=view.k,touches.forEach(function(t){t.identifier in locations0&&(locations0[t.identifier]=location(t))}),touches}function started(){var target=d3.event.target;d3.select(target).on(touchmove,moved).on(touchend,ended),targets.push(target);for(
var changed=d3.event.changedTouches,i=0,n=changed.length;i<n;++i)locations0[changed[i].identifier]=null;var touches=relocate(),now=Date.now();if(1===touches.length){if(now-touchtime<500){var p=touches[0];zoomTo(that,p,locations0[p.identifier],Math.floor(Math.log(view.k)/Math.LN2)+1),d3_eventPreventDefault()}touchtime=now}else if(1<touches.length){p=touches[0];var q=touches[1],dx=p[0]-q[0],dy=p[1]-q[1];distance0=dx*dx+dy*dy}}function moved(){var p0,l0,p1,l1,touches=d3.touches(that);d3_selection_interrupt.call(that);for(var i=0,n=touches.length;i<n;++i,l1=null)if(p1=touches[i],l1=locations0[p1.identifier]){if(l0)break;p0=p1,l0=l1}if(l1){var distance1=(
distance1=p1[0]-p0[0])*distance1+(distance1=p1[1]-p0[1])*distance1,scale1=distance0&&Math.sqrt(distance1/distance0);p0=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l0=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2],scaleTo(scale1*scale0)}touchtime=null,translateTo(p0,l0),zoomed(dispatch)}function ended(){if(d3.event.touches.length){for(var changed=d3.event.changedTouches,i=0,n=changed.length;i<n;++i)delete locations0[changed[i].identifier];for(var identifier in locations0)return void relocate()}d3.selectAll(targets).on(zoomName,null),subject.on(mousedown,mousedowned).on(touchstart,touchstarted),dragRestore(),zoomended(dispatch)}started(),zoomstarted(dispatch),subject.on(mousedown,
null).on(touchstart,started)}function mousewheeled(){var dispatch=event.of(this,arguments);mousewheelTimer?clearTimeout(mousewheelTimer):(d3_selection_interrupt.call(this),translate0=location(center0=center||d3.mouse(this)),zoomstarted(dispatch)),mousewheelTimer=setTimeout(function(){mousewheelTimer=null,zoomended(dispatch)},50),d3_eventPreventDefault(),scaleTo(Math.pow(2,.002*d3_behavior_zoomDelta())*view.k),translateTo(center0,translate0),zoomed(dispatch)}function dblclicked(){var p=d3.mouse(this),k=Math.log(view.k)/Math.LN2;zoomTo(this,p,location(p),d3.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1)}return d3_behavior_zoomWheel||(
d3_behavior_zoomWheel="onwheel"in d3_document?(d3_behavior_zoomDelta=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d3_document?(d3_behavior_zoomDelta=function(){return d3.event.wheelDelta},"mousewheel"):(d3_behavior_zoomDelta=function(){return-d3.event.detail},"MozMousePixelScroll")),zoom.event=function(g){g.each(function(){var dispatch=event.of(this,arguments),view1=view;d3_transitionInheritId?d3.select(this).transition().each("start.zoom",function(){view=this.__chart__||{x:0,y:0,k:1},zoomstarted(dispatch)}).tween("zoom:zoom",function(){var dx=size[0],dy=size[1],cx=center0?center0[0]:dx/2,cy=center0?center0[1]:dy/2,
i=d3.interpolateZoom([(cx-view.x)/view.k,(cy-view.y)/view.k,dx/view.k],[(cx-view1.x)/view1.k,(cy-view1.y)/view1.k,dx/view1.k]);return function(t){var l=i(t),k=dx/l[2];this.__chart__=view={x:cx-l[0]*k,y:cy-l[1]*k,k:k},zoomed(dispatch)}}).each("interrupt.zoom",function(){zoomended(dispatch)}).each("end.zoom",function(){zoomended(dispatch)}):(this.__chart__=view,zoomstarted(dispatch),zoomed(dispatch),zoomended(dispatch))})},zoom.translate=function(_){return arguments.length?(view={x:+_[0],y:+_[1],k:view.k},rescale(),zoom):[view.x,view.y]},zoom.scale=function(_){return arguments.length?(view={x:view.x,y:view.y,k:null},scaleTo(+_),rescale(),zoom):view.k},
zoom.scaleExtent=function(_){return arguments.length?(scaleExtent=null==_?d3_behavior_zoomInfinity:[+_[0],+_[1]],zoom):scaleExtent},zoom.center=function(_){return arguments.length?(center=_&&[+_[0],+_[1]],zoom):center},zoom.size=function(_){return arguments.length?(size=_&&[+_[0],+_[1]],zoom):size},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.x=function(z){return arguments.length?(x0=(x1=z).copy(),view={x:0,y:0,k:1},zoom):x1},zoom.y=function(z){return arguments.length?(y0=(y1=z).copy(),view={x:0,y:0,k:1},zoom):y1},d3.rebind(zoom,event,"on")};var d3_behavior_zoomDelta,d3_behavior_zoomWheel,d3_behavior_zoomInfinity=[0,1/0
];function d3_color(){}function d3_hsl(h,s,l){return this instanceof d3_hsl?(this.h=+h,this.s=+s,void(this.l=+l)):arguments.length<2?h instanceof d3_hsl?new d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):new d3_hsl(h,s,l)}(d3.color=d3_color).prototype.toString=function(){return this.rgb()+""};var d3_hslPrototype=(d3.hsl=d3_hsl).prototype=new d3_color;function d3_hsl_rgb(h,s,l){var m1,m2;function vv(h){return Math.round(255*function(h){return 360<h?h-=360:h<0&&(h+=360),h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1}(h))}return h=isNaN(h)?0:(h%=360)<0?h+360:h,s=isNaN(s)?0:s<0?0:1<s?1:s,m1=2*(l=l<0?0:1<l?1:l)-(m2=l<=.5?l*(1+s):l+s-l*s),
new d3_rgb(vv(h+120),vv(h),vv(h-120))}function d3_hcl(h,c,l){return this instanceof d3_hcl?(this.h=+h,this.c=+c,void(this.l=+l)):arguments.length<2?h instanceof d3_hcl?new d3_hcl(h.h,h.c,h.l):d3_lab_hcl(h instanceof d3_lab?h.l:(h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):new d3_hcl(h,c,l)}d3_hslPrototype.brighter=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,this.l/k)},d3_hslPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,k*this.l)},d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)};var d3_hclPrototype=(d3.hcl=d3_hcl).prototype=new d3_color
;function d3_hcl_lab(h,c,l){return isNaN(h)&&(h=0),isNaN(c)&&(c=0),new d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}function d3_lab(l,a,b){return this instanceof d3_lab?(this.l=+l,this.a=+a,void(this.b=+b)):arguments.length<2?l instanceof d3_lab?new d3_lab(l.l,l.a,l.b):l instanceof d3_hcl?d3_hcl_lab(l.h,l.c,l.l):d3_rgb_lab((l=d3_rgb(l)).r,l.g,l.b):new d3_lab(l,a,b)}d3_hclPrototype.brighter=function(k){return new d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.darker=function(k){return new d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.rgb=function(){return d3_hcl_lab(
this.h,this.c,this.l).rgb()},d3.lab=d3_lab;var d3_lab_K=18,d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883,d3_labPrototype=d3_lab.prototype=new d3_color;function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;return new d3_rgb(d3_xyz_rgb(3.2404542*(x=d3_lab_xyz(x)*d3_lab_X)-1.5371385*(y=d3_lab_xyz(y)*d3_lab_Y)-.4985314*(z=d3_lab_xyz(z)*d3_lab_Z)),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return 0<l?new d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):new d3_hcl(NaN,NaN,l)}function d3_lab_xyz(x){return.206893034<x?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){
return.008856<x?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}function d3_rgb(r,g,b){return this instanceof d3_rgb?(this.r=~~r,this.g=~~g,void(this.b=~~b)):arguments.length<2?r instanceof d3_rgb?new d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):new d3_rgb(r,g,b)}function d3_rgbNumber(value){return new d3_rgb(value>>16,value>>8&255,255&value)}function d3_rgbString(value){return d3_rgbNumber(value)+""}d3_labPrototype.brighter=function(k){return new d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.darker=function(k){
return new d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)};var d3_rgbPrototype=(d3.rgb=d3_rgb).prototype=new d3_color;function d3_rgb_hex(v){return v<16?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){var m1,m2,color,r=0,g=0,b=0;if(m1=/([a-z]+)\((.*)\)/.exec(format=format.toLowerCase()))switch(m2=m1[2].split(","),m1[1]){case"hsl":return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100);case"rgb":return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}return(
color=d3_rgb_names.get(format))?rgb(color.r,color.g,color.b):(null==format||"#"!==format.charAt(0)||isNaN(color=parseInt(format.slice(1),16))||(4===format.length?(r=(3840&color)>>4,r|=r>>4,g=240&color,g|=g>>4,b=15&color,b|=b<<4):7===format.length&&(r=(16711680&color)>>16,g=(65280&color)>>8,b=255&color)),rgb(r,g,b))}function d3_rgb_hsl(r,g,b){var h,s,min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,l=(max+min)/2;return d?(s=l<.5?d/(max+min):d/(2-max-min),h=r==max?(g-b)/d+(g<b?6:0):g==max?(b-r)/d+2:(r-g)/d+4,h*=60):(h=NaN,s=0<l&&l<1?0:h),new d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){var x=d3_xyz_lab((.4124564*(r=d3_rgb_xyz(r))+.3575761*(
g=d3_rgb_xyz(g))+.1804375*(b=d3_rgb_xyz(b)))/d3_lab_X),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/d3_lab_Y);return d3_lab(116*y-16,500*(x-y),200*(y-d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/d3_lab_Z)))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*f):f}d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;return r||g||b?(r&&r<i&&(r=i),g&&g<i&&(g=i),b&&b<i&&(b=i),new d3_rgb(Math.min(255,r/k),Math.min(255,g/k),Math.min(255,b/k))):new d3_rgb(i,i,i)},
d3_rgbPrototype.darker=function(k){return new d3_rgb((k=Math.pow(.7,arguments.length?k:1))*this.r,k*this.g,k*this.b)},d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)},d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,
cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,
mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,
sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function d3_functor(v){return"function"==typeof v?v:function(){return v}}function d3_xhrType(response){return function(url,mimeType,callback){return 2===arguments.length&&"function"==typeof mimeType&&(callback=mimeType,mimeType=null),d3_xhr(url,mimeType,response,callback)}}
function d3_xhr(url,mimeType,response,callback){var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;function respond(){var result,status=request.status;if(!status&&function(request){var type=request.responseType;return type&&"text"!==type?request.response:request.responseText}(request)||200<=status&&status<300||304===status){try{result=response.call(xhr,request)}catch(e){return void dispatch.error.call(xhr,e)}dispatch.load.call(xhr,result)}else dispatch.error.call(xhr,request)}return!this.XDomainRequest||"withCredentials"in request||!/^(http(s)?:)?\/\//.test(url)||(
request=new XDomainRequest),"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){3<request.readyState&&respond()},request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}},xhr.header=function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers[name]:(null==value?delete headers[name]:headers[name]=value+"",xhr)},xhr.mimeType=function(value){return arguments.length?(mimeType=null==value?null:value+"",xhr):mimeType},xhr.responseType=function(value){return arguments.length?(responseType=value,xhr):responseType},
xhr.response=function(value){return response=value,xhr},["get","post"].forEach(function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}}),xhr.send=function(method,data,callback){if(2===arguments.length&&"function"==typeof data&&(callback=data,data=null),request.open(method,url,!0),null==mimeType||"accept"in headers||(headers.accept=mimeType+",*/*"),request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);return null!=mimeType&&request.overrideMimeType&&request.overrideMimeType(mimeType),null!=responseType&&(request.responseType=responseType),null!=callback&&xhr.on("error",
callback).on("load",function(request){callback(null,request)}),dispatch.beforesend.call(xhr,request),request.send(null==data?null:data),xhr},xhr.abort=function(){return request.abort(),xhr},d3.rebind(xhr,dispatch,"on"),null==callback?xhr:xhr.get(function(callback){return 1===callback.length?function(error,request){callback(null==error?request:null)}:callback}(callback))}d3_rgb_names.forEach(function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))}),d3.functor=d3_functor,d3.xhr=d3_xhrType(d3_identity),d3.dsv=function(delimiter,mimeType){var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);function dsv(url,row,callback){
arguments.length<3&&(callback=row,row=null);var xhr=d3_xhr(url,mimeType,null==row?response:typedResponse(row),callback);return xhr.row=function(_){return arguments.length?xhr.response(null==(row=_)?response:typedResponse(_)):row},xhr}function response(request){return dsv.parse(request.responseText)}function typedResponse(f){return function(request){return dsv.parse(request.responseText,f)}}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}return dsv.parse=function(text,f){var o;return dsv.parseRows(text,function(row,i){if(o)return o(row,i-1)
;var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})},dsv.parseRows=function(text,f){var t,eol,EOL={},EOF={},rows=[],N=text.length,I=0,n=0;function token(){if(N<=I)return EOF;if(eol)return eol=!1,EOL;var j=I;if(34===text.charCodeAt(j)){for(var i=j;i++<N;)if(34===text.charCodeAt(i)){if(34!==text.charCodeAt(i+1))break;++i}return I=i+2,13===(c=text.charCodeAt(i+1))?(eol=!0,10===text.charCodeAt(i+2)&&++I):10===c&&(eol=!0),text.slice(j+1,i).replace(/""/g,'"')}for(;I<N;){var c,k=1;if(10===(c=text.charCodeAt(I++)))eol=!0;else if(13===c)eol=!0,
10===text.charCodeAt(I)&&(++I,++k);else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}for(;(t=token())!==EOF;){for(var a=[];t!==EOL&&t!==EOF;)a.push(t),t=token();f&&null==(a=f(a,n++))||rows.push(a)}return rows},dsv.format=function(rows){if(Array.isArray(rows[0]))return dsv.formatRows(rows);var fieldSet=new d3_Set,fields=[];return rows.forEach(function(row){for(var field in row)fieldSet.has(field)||fields.push(fieldSet.add(field))}),[fields.map(formatValue).join(delimiter)].concat(rows.map(function(row){return fields.map(function(field){return formatValue(row[field])}).join(delimiter)})).join("\n")},dsv.formatRows=function(rows){
return rows.map(formatRow).join("\n")},dsv},d3.csv=d3.dsv(",","text/csv"),d3.tsv=d3.dsv("\t","text/tab-separated-values");var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_frame=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};function d3_timer(callback,delay,then){var n=arguments.length;n<2&&(delay=0),n<3&&(then=Date.now());var timer={c:callback,t:then+delay,n:null};return d3_timer_queueTail?d3_timer_queueTail.n=timer:d3_timer_queueHead=timer,d3_timer_queueTail=timer,d3_timer_interval||(d3_timer_timeout=clearTimeout(d3_timer_timeout),d3_timer_interval=1,d3_timer_frame(
d3_timer_step)),timer}function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;24<delay?(isFinite(delay)&&(clearTimeout(d3_timer_timeout),d3_timer_timeout=setTimeout(d3_timer_step,delay)),d3_timer_interval=0):(d3_timer_interval=1,d3_timer_frame(d3_timer_step))}function d3_timer_mark(){for(var now=Date.now(),timer=d3_timer_queueHead;timer;)now>=timer.t&&timer.c(now-timer.t)&&(timer.c=null),timer=timer.n;return now}function d3_timer_sweep(){for(var t0,t1=d3_timer_queueHead,time=1/0;t1;)t1=t1.c?(t1.t<time&&(time=t1.t),(t0=t1).n):t0?t0.n=t1.n:d3_timer_queueHead=t1.n;return d3_timer_queueTail=t0,time}function d3_format_precision(x,p){return p-(
x?Math.ceil(Math.log(x)/Math.LN10):1)}d3.timer=function(){d3_timer.apply(this,arguments)},d3.timer.flush=function(){d3_timer_mark(),d3_timer_sweep()},d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)};var d3_formatPrefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(d,i){var k=Math.pow(10,3*abs(8-i));return{scale:8<i?function(d){return d/k}:function(d){return d*k},symbol:d}});d3.formatPrefix=function(value,precision){var i=0;return(value=+value)&&(value<0&&(value*=-1),precision&&(value=d3.round(value,d3_format_precision(value,precision))),i=1+Math.floor(1e-12+Math.log(value)/Math.LN10),
i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))),d3_formatPrefixes[8+i/3]};var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}})
;function d3_format_typeDefault(x){return x+""}var d3_time=d3.time={},d3_date=Date;function d3_date_utc(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()
},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){
d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype;function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return date-d0<d1-date?d0:d1}function ceil(date){return step(date=local(new d3_date(date-1)),1),date}function offset(date,k){return step(date=new d3_date(+date),k),date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(1<dt)for(;time<t1;)number(time)%dt||times.push(new Date(+time)),step(time,1);else for(;time<t1;)times.push(new Date(+time)),step(time,1);return times}(local.floor=local
).round=round,local.ceil=ceil,local.offset=offset,local.range=range;var utc=local.utc=d3_time_interval_utc(local);return(utc.floor=utc).round=d3_time_interval_utc(round),utc.ceil=d3_time_interval_utc(ceil),utc.offset=d3_time_interval_utc(offset),utc.range=function(t0,t1,dt){try{var utc=new(d3_date=d3_date_utc);return utc._=t0,range(utc,t1,dt)}finally{d3_date=Date}},local}function d3_time_interval_utc(method){return function(date,k){try{var utc=new(d3_date=d3_date_utc);return utc._=date,method(utc,k)._}finally{d3_date=Date}}}d3_time.year=d3_time_interval(function(date){return(date=d3_time.day(date)).setMonth(0,1),date},function(date,offset){date.setFullYear(
date.getFullYear()+offset)},function(date){return date.getFullYear()}),d3_time.years=d3_time.year.range,d3_time.years.utc=d3_time.year.utc.range,d3_time.day=d3_time_interval(function(date){var day=new d3_date(2e3,0);return day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),day},function(date,offset){date.setDate(date.getDate()+offset)},function(date){return date.getDate()-1}),d3_time.days=d3_time.day.range,d3_time.days.utc=d3_time.day.utc.range,d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-6e4*(date.getTimezoneOffset()-year.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday",
"thursday","friday","saturday"].forEach(function(day,i){i=7-i;var interval=d3_time[day]=d3_time_interval(function(date){return(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7),date},function(date,offset){date.setDate(date.getDate()+7*Math.floor(offset))},function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)});d3_time[day+"s"]=interval.range,d3_time[day+"s"].utc=interval.utc.range,d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}}),d3_time.week=d3_time.sunday,d3_time.weeks=d3_time.sunday.range,
d3_time.weeks.utc=d3_time.sunday.utc.range,d3_time.weekOfYear=d3_time.sundayOfYear;var d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_numberRe=/^\s*\d+/,d3_time_percentRe=/^%/;function d3_time_formatPad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){for(var map=new d3_Map,i=-1,n=names.length;++i<n;)map.set(names[i].toLowerCase(),i);return map}function d3_time_parseWeekdayNumber(date,string,i){
d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){
d3_time_numberRe.lastIndex=0;var d,n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.y=(d=+n[0])+(68<d?1900:2e3),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.slice(i,i+5))?(date.Z=-string,i+5):-1}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0
;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0
;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=0<z?"-":"+",zh=abs(z)/60|0,zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function d3_time_formatMulti(formats){for(var n=formats.length,i=-1;++i<n;)formats[i][0]=this(formats[i][0]);return function(date){for(var i=0,f=formats[i];!f[1](date);)f=formats[++i];return f[0](date)}}d3.locale=function(locale){return{
numberFormat:function(locale){var locale_decimal=locale.decimal,locale_thousands=locale.thousands,locale_grouping=locale.grouping,locale_currency=locale.currency,formatGroup=locale_grouping&&locale_thousands?function(value,width){for(var i=value.length,t=[],j=0,g=locale_grouping[0],length=0;0<i&&0<g&&(width<length+g+1&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=locale_grouping[j=(j+1)%locale_grouping.length];return t.reverse().join(locale_thousands)}:d3_identity;return function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",
zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,prefix="",suffix="",integer=!1,exponent=!0;switch(precision&&(precision=+precision.substring(1)),(zfill||"0"===fill&&"="===align)&&(zfill=fill="0",align="="),type){case"n":comma=!0,type="g";break;case"%":scale=100,suffix="%",type="f";break;case"p":scale=100,suffix="%",type="r";break;case"b":case"o":case"x":case"X":"#"===symbol&&(prefix="0"+type.toLowerCase());case"c":exponent=!1;case"d":integer=!0,precision=0;break;case"s":scale=-1,type="r"}"$"===symbol&&(prefix=locale_currency[0],suffix=locale_currency[1]),"r"!=type||precision||(type="g"),null!=precision&&(
"g"==type?precision=Math.max(1,Math.min(21,precision)):"e"!=type&&"f"!=type||(precision=Math.max(0,Math.min(20,precision)))),type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){var fullSuffix=suffix;if(integer&&value%1)return"";var negative=value<0||0===value&&1/value<0?(value=-value,"-"):"-"===sign?"":sign;if(scale<0){var unit=d3.formatPrefix(value,precision);value=unit.scale(value),fullSuffix=unit.symbol+suffix}else value*=scale;var before,after,i=(value=type(value,precision)).lastIndexOf(".");if(i<0){var j=exponent?value.lastIndexOf("e"):-1;after=j<0?(before=value,""):(before=value.substring(0,j),
value.substring(j))}else before=value.substring(0,i),after=locale_decimal+value.substring(i+1);!zfill&&comma&&(before=formatGroup(before,1/0));var length=prefix.length+before.length+after.length+(zcomma?0:negative.length),padding=length<width?new Array(length=width-length+1).join(fill):"";return zcomma&&(before=formatGroup(padding+before,padding.length?width-after.length:1/0)),negative+=prefix,value=before+after,("<"===align?negative+value+padding:">"===align?padding+negative+value:"^"===align?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+fullSuffix}}}(locale),timeFormat:function(locale){
var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_days=locale.days,locale_shortDays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;function d3_time_format(template){var n=template.length;function format(date){for(var c,p,f,string=[],i=-1,j=0;++i<n;)37===template.charCodeAt(i)&&(string.push(template.slice(j,i)),null!=(p=d3_time_formatPads[c=template.charAt(++i)])&&(c=template.charAt(++i)),(f=d3_time_formats[c])&&(c=f(date,null==p?"e"===c?" ":"0":p)),string.push(c),j=i+1);return string.push(template.slice(j,i)),string.join("")}
return format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d3_time_parse(d,template,string,0)!=string.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var localZ=null!=d.Z&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);return"j"in d?date.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),date.setFullYear(d.y,0,1),date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(date.getDay()+5)%7:d.w+7*d.U-(date.getDay()+6)%7)):date.setFullYear(d.y,d.m,d.d),date.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),localZ?date._:date},format.toString=function(){return template},format}function d3_time_parse(date,template,string,
j){for(var c,p,t,i=0,n=template.length,m=string.length;i<n;){if(m<=j)return-1;if(37===(c=template.charCodeAt(i++))){if(t=template.charAt(i++),!(p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t])||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}d3_time_format.multi=(d3_time_format.utc=function(template){var local=d3_time_format(template);function format(date){try{var utc=new(d3_date=d3_date_utc);return utc._=date,local(utc)}finally{d3_date=Date}}return format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}},format.toString=local.toString,
format}).multi=d3_time_formatMulti;var d3_time_periodLookup=d3.map(),d3_time_dayRe=d3_time_formatRe(locale_days),d3_time_dayLookup=d3_time_formatLookup(locale_days),d3_time_dayAbbrevRe=d3_time_formatRe(locale_shortDays),d3_time_dayAbbrevLookup=d3_time_formatLookup(locale_shortDays),d3_time_monthRe=d3_time_formatRe(locale_months),d3_time_monthLookup=d3_time_formatLookup(locale_months),d3_time_monthAbbrevRe=d3_time_formatRe(locale_shortMonths),d3_time_monthAbbrevLookup=d3_time_formatLookup(locale_shortMonths);locale_periods.forEach(function(p,i){d3_time_periodLookup.set(p.toLowerCase(),i)});var d3_time_formats={a:function(d){return locale_shortDays[d.getDay()]
},A:function(d){return locale_days[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:d3_time_format(locale_dateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){
return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return locale_periods[+(12<=d.getHours())]},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(locale_date),X:d3_time_format(locale_time),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}},d3_time_parsers={a:function(date,string,i){d3_time_dayAbbrevRe.lastIndex=0
;var n=d3_time_dayAbbrevRe.exec(string.slice(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1},A:function(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.slice(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},b:function(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.slice(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1},B:function(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.slice(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),
i+n[0].length):-1},c:function(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)},d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:function(date,string,i){var n=d3_time_periodLookup.get(string.slice(i,i+=2).toLowerCase());return null==n?-1:(date.p=n,i)},S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:function(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)},X:function(date,string,i){
return d3_time_parse(date,d3_time_formats.X.toString(),string,i)},y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent};return d3_time_format}(locale)}};var d3_locale_enUS=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul"
,"Aug","Sep","Oct","Nov","Dec"]});function d3_adder(){}d3.format=d3_locale_enUS.numberFormat,d3.geo={},d3_adder.prototype={s:0,t:0,add:function(y){d3_adderSum(y,this.t,d3_adderTemp),d3_adderSum(d3_adderTemp.s,this.s,this),this.s?this.t+=d3_adderTemp.t:this.s=d3_adderTemp.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var d3_adderTemp=new d3_adder;function d3_adderSum(a,b,o){var x=o.s=a+b,bv=x-a,av=x-bv;o.t=a-av+(b-bv)}function d3_geo_streamGeometry(geometry,listener){geometry&&d3_geo_streamGeometryType.hasOwnProperty(geometry.type)&&d3_geo_streamGeometryType[geometry.type](geometry,listener)}d3.geo.stream=function(object,listener){
object&&d3_geo_streamObjectType.hasOwnProperty(object.type)?d3_geo_streamObjectType[object.type](object,listener):d3_geo_streamGeometry(object,listener)};var d3_geo_streamObjectType={Feature:function(feature,listener){d3_geo_streamGeometry(feature.geometry,listener)},FeatureCollection:function(object,listener){for(var features=object.features,i=-1,n=features.length;++i<n;)d3_geo_streamGeometry(features[i].geometry,listener)}},d3_geo_streamGeometryType={Sphere:function(object,listener){listener.sphere()},Point:function(object,listener){object=object.coordinates,listener.point(object[0],object[1],object[2])},MultiPoint:function(object,listener){for(
var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],listener.point(object[0],object[1],object[2])},LineString:function(object,listener){d3_geo_streamLine(object.coordinates,listener,0)},MultiLineString:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamLine(coordinates[i],listener,0)},Polygon:function(object,listener){d3_geo_streamPolygon(object.coordinates,listener)},MultiPolygon:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamPolygon(coordinates[i],listener)},GeometryCollection:function(object,
listener){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)d3_geo_streamGeometry(geometries[i],listener)}};function d3_geo_streamLine(coordinates,listener,closed){var coordinate,i=-1,n=coordinates.length-closed;for(listener.lineStart();++i<n;)coordinate=coordinates[i],listener.point(coordinate[0],coordinate[1],coordinate[2]);listener.lineEnd()}function d3_geo_streamPolygon(coordinates,listener){var i=-1,n=coordinates.length;for(listener.polygonStart();++i<n;)d3_geo_streamLine(coordinates[i],listener,1);listener.polygonEnd()}d3.geo.area=function(object){return d3_geo_areaSum=0,d3.geo.stream(object,d3_geo_area),d3_geo_areaSum}
;var d3_geo_areaSum,d3_geo_centroidW0,d3_geo_centroidW1,d3_geo_centroidX0,d3_geo_centroidY0,d3_geo_centroidZ0,d3_geo_centroidX1,d3_geo_centroidY1,d3_geo_centroidZ1,d3_geo_centroidX2,d3_geo_centroidY2,d3_geo_centroidZ2,d3_geo_areaRingSum=new d3_adder,d3_geo_area={sphere:function(){d3_geo_areaSum+=4*},point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_areaRingSum.reset(),d3_geo_area.lineStart=d3_geo_areaRingStart},polygonEnd:function(){var area=2*d3_geo_areaRingSum;d3_geo_areaSum+=area<0?4*+area:area,d3_geo_area.lineStart=d3_geo_area.lineEnd=d3_geo_area.point=d3_noop}};function d3_geo_areaRingStart(){var 00,00,0,cos0,sin0
;function nextPoint(,){=*d3_radians/2+/4;var d=(*=d3_radians)-0,sd=0<=d?1:-1,ad=sd*d,cos=Math.cos(),sin=Math.sin(),k=sin0*sin,u=cos0*cos+k*Math.cos(ad),v=k*sd*Math.sin(ad);d3_geo_areaRingSum.add(Math.atan2(v,u)),0=,cos0=cos,sin0=sin}d3_geo_area.point=function(,){d3_geo_area.point=nextPoint,0=(00=)*d3_radians,cos0=Math.cos(=(00=)*d3_radians/2+/4),sin0=Math.sin()},d3_geo_area.lineEnd=function(){nextPoint(00,00)}}function d3_geo_cartesian(spherical){var =spherical[0],=spherical[1],cos=Math.cos();return[cos*Math.cos(),cos*Math.sin(),Math.sin()]}function d3_geo_cartesianDot(a,b){
return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function d3_geo_cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function d3_geo_cartesianAdd(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function d3_geo_cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function d3_geo_cartesianNormalize(d){var l=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function d3_geo_spherical(cartesian){return[Math.atan2(cartesian[1],cartesian[0]),d3_asin(cartesian[2])]}function d3_geo_sphericalEqual(a,b){return abs(a[0]-b[0])<&&abs(a[1]-b[1])<}d3.geo.bounds=function(){var 0,0,1,1,_,__,__,p0,dSum,ranges,range,bound={
point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){bound.point=ringPoint,bound.lineStart=ringStart,bound.lineEnd=ringEnd,dSum=0,d3_geo_area.polygonStart()},polygonEnd:function(){d3_geo_area.polygonEnd(),bound.point=point,bound.lineStart=lineStart,bound.lineEnd=lineEnd,d3_geo_areaRingSum<0?(0=-(1=180),0=-(1=90)):<dSum?1=90:dSum<-&&(0=-90),range[0]=0,range[1]=1}};function point(,){ranges.push(range=[0=,1=]),<0&&(0=),1<&&(1=)}function linePoint(,){var p=d3_geo_cartesian([*d3_radians,*d3_radians]);if(p0){var normal=d3_geo_cartesianCross(p0,p),inflection=d3_geo_cartesianCross([normal[1],-normal[0],0],normal)
;d3_geo_cartesianNormalize(inflection),inflection=d3_geo_spherical(inflection);var d=-_,s=0<d?1:-1,i=inflection[0]*d3_degrees*s,antimeridian=180<abs(d);if(antimeridian^(s*_<i&&i<s*)){var i=inflection[1]*d3_degrees;1<i&&(1=i)}else if(antimeridian^(s*_<(i=(i+360)%360-180)&&i<s*)){(i=-inflection[1]*d3_degrees)<0&&(0=i)}else <0&&(0=),1<&&(1=);antimeridian?<_?angle(0,)>angle(0,1)&&(1=):angle(,1)>angle(0,1)&&(0=):0<=1?(<0&&(0=),1<&&(1=)):_<?angle(0,)>angle(0,1)&&(1=):angle(,1)>angle(0,1)&&(0=)}else point(,);p0=p,_=}function lineStart(){bound.point=linePoint}function lineEnd(){range[0]=0,
range[1]=1,bound.point=point,p0=null}function ringPoint(,){if(p0){var d=-_;dSum+=180<abs(d)?d+(0<d?360:-360):d}else __=,__=;d3_geo_area.point(,),linePoint(,)}function ringStart(){d3_geo_area.lineStart()}function ringEnd(){ringPoint(__,__),d3_geo_area.lineEnd(),abs(dSum)>&&(0=-(1=180)),range[0]=0,range[1]=1,p0=null}function angle(0,1){return(1-=0)<0?1+360:1}function compareRanges(a,b){return a[0]-b[0]}function withinRange(x,range){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}return function(feature){if(1=1=-(0=0=1/0),ranges=[],d3.geo.stream(feature,bound),n=ranges.length){ranges.sort(
compareRanges);for(var i=1,merged=[a=ranges[0]];i<n;++i)withinRange((b=ranges[i])[0],a)||withinRange(b[1],a)?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(var d,n,b,best=-1/0,a=(i=0,merged[n=merged.length-1]);i<=n;a=b,++i)b=merged[i],(d=angle(a[1],b[0]))>best&&(best=d,0=b[0],1=a[1])}return ranges=range=null,0===1/0||0===1/0?[[NaN,NaN],[NaN,NaN]]:[[0,0],[1,1]]}}(),d3.geo.centroid=function(object){
d3_geo_centroidW0=d3_geo_centroidW1=d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,d3_geo_centroid);var x=d3_geo_centroidX2,y=d3_geo_centroidY2,z=d3_geo_centroidZ2,m=x*x+y*y+z*z;return m<2&&(x=d3_geo_centroidX1,y=d3_geo_centroidY1,z=d3_geo_centroidZ1,d3_geo_centroidW1<&&(x=d3_geo_centroidX0,y=d3_geo_centroidY0,z=d3_geo_centroidZ0),(m=x*x+y*y+z*z)<2)?[NaN,NaN]:[Math.atan2(y,x)*d3_degrees,d3_asin(z/Math.sqrt(m))*d3_degrees]};var d3_geo_centroid={sphere:d3_noop,point:d3_geo_centroidPoint,lineStart:d3_geo_centroidLineStart,
lineEnd:d3_geo_centroidLineEnd,polygonStart:function(){d3_geo_centroid.lineStart=d3_geo_centroidRingStart},polygonEnd:function(){d3_geo_centroid.lineStart=d3_geo_centroidLineStart}};function d3_geo_centroidPoint(,){*=d3_radians;var cos=Math.cos(*=d3_radians);d3_geo_centroidPointXYZ(cos*Math.cos(),cos*Math.sin(),Math.sin())}function d3_geo_centroidPointXYZ(x,y,z){d3_geo_centroidX0+=(x-d3_geo_centroidX0)/++d3_geo_centroidW0,d3_geo_centroidY0+=(y-d3_geo_centroidY0)/d3_geo_centroidW0,d3_geo_centroidZ0+=(z-d3_geo_centroidZ0)/d3_geo_centroidW0}function d3_geo_centroidLineStart(){var x0,y0,z0;function nextPoint(,){*=d3_radians;var cos=Math.cos(
*=d3_radians),x=cos*Math.cos(),y=cos*Math.sin(),z=Math.sin(),w=Math.atan2(Math.sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}d3_geo_centroid.point=function(,){*=d3_radians;var cos=Math.cos(*=d3_radians);x0=cos*Math.cos(),y0=cos*Math.sin(),z0=Math.sin(),d3_geo_centroid.point=nextPoint,d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_centroidLineEnd(){d3_geo_centroid.point=d3_geo_centroidPoint}function d3_geo_centroidRingStart(){var 00,00,x0,y0,z0
;function nextPoint(,){*=d3_radians;var cos=Math.cos(*=d3_radians),x=cos*Math.cos(),y=cos*Math.sin(),z=Math.sin(),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=Math.sqrt(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-d3_acos(u)/m,w=Math.atan2(m,u);d3_geo_centroidX2+=v*cx,d3_geo_centroidY2+=v*cy,d3_geo_centroidZ2+=v*cz,d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}d3_geo_centroid.point=function(,){00=,00=,d3_geo_centroid.point=nextPoint,*=d3_radians;var cos=Math.cos(*=d3_radians);x0=cos*Math.cos(),y0=cos*Math.sin(),z0=Math.sin(),
d3_geo_centroidPointXYZ(x0,y0,z0)},d3_geo_centroid.lineEnd=function(){nextPoint(00,00),d3_geo_centroid.lineEnd=d3_geo_centroidLineEnd,d3_geo_centroid.point=d3_geo_centroidPoint}}function d3_geo_compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function d3_true(){return!0}function d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener){var subject=[],clip=[];if(segments.forEach(function(segment){if(!((n=segment.length-1)<=0)){var n,p0=segment[0],p1=segment[n];if(d3_geo_sphericalEqual(p0,p1)){listener.lineStart()
;for(var i=0;i<n;++i)listener.point((p0=segment[i])[0],p0[1]);listener.lineEnd()}else{var a=new d3_geo_clipPolygonIntersection(p0,segment,null,!0),b=new d3_geo_clipPolygonIntersection(p0,null,a,!1);a.o=b,subject.push(a),clip.push(b),b=new d3_geo_clipPolygonIntersection(p1,null,a=new d3_geo_clipPolygonIntersection(p1,segment,null,!1),!0),a.o=b,subject.push(a),clip.push(b)}}}),clip.sort(compare),d3_geo_clipPolygonLinkCircular(subject),d3_geo_clipPolygonLinkCircular(clip),subject.length){for(var i=0,entry=clipStartInside,n=clip.length;i<n;++i)clip[i].e=entry=!entry;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((
current=current.n)===start)return;points=current.z,listener.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)listener.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,listener);current=current.n}else{if(isSubject)for(i=(points=current.p.z).length-1;0<=i;--i)listener.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,listener);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);listener.lineEnd()}}}function d3_geo_clipPolygonLinkCircular(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b
;a.n=b=array[0],b.p=a}}function d3_geo_clipPolygonIntersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function d3_geo_clip(pointVisible,clipLine,interpolate,clipStart){return function(rotate,listener){var segments,line=clipLine(listener),rotatedClipStart=rotate.invert(clipStart[0],clipStart[1]),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=d3.merge(segments)
;var clipStartInside=function(point,polygon){var meridian=point[0],parallel=point[1],meridianNormal=[Math.sin(meridian),-Math.cos(meridian),0],polarAngle=0,winding=0;d3_geo_areaRingSum.reset();for(var i=0,n=polygon.length;i<n;++i){var ring=polygon[i],m=ring.length;if(m)for(var point0=ring[0],0=point0[0],0=point0[1]/2+/4,sin0=Math.sin(0),cos0=Math.cos(0),j=1;;){j===m&&(j=0);var =(point=ring[j])[0],=point[1]/2+/4,sin=Math.sin(),cos=Math.cos(),d=-0,sd=0<=d?1:-1,ad=sd*d,antimeridian=<ad,k=sin0*sin;if(d3_geo_areaRingSum.add(Math.atan2(k*sd*Math.sin(ad),cos0*cos+k*Math.cos(ad))),polarAngle+=antimeridian?d+sd*:d,
antimeridian^meridian<=0^meridian<=){var arc=d3_geo_cartesianCross(d3_geo_cartesian(point0),d3_geo_cartesian(point));d3_geo_cartesianNormalize(arc);var intersection=d3_geo_cartesianCross(meridianNormal,arc);d3_geo_cartesianNormalize(intersection);var arc=(antimeridian^0<=d?-1:1)*d3_asin(intersection[2]);(arc<parallel||parallel===arc&&(arc[0]||arc[1]))&&(winding+=antimeridian^0<=d?1:-1)}if(!j++)break;0=,sin0=sin,cos0=cos,point0=point}}return(polarAngle<-||polarAngle<&&d3_geo_areaRingSum<0)^1&winding}(rotatedClipStart,polygon);segments.length?(polygonStarted||(listener.polygonStart(),polygonStarted=!0),d3_geo_clipPolygon(segments,d3_geo_clipSort
,clipStartInside,interpolate,listener)):clipStartInside&&(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),polygonStarted&&(listener.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){listener.polygonStart(),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd(),listener.polygonEnd()}};function point(,){var point=rotate(,);pointVisible(=point[0],=point[1])&&listener.point(,)}function pointLine(,){var point=rotate(,);line.point(point[0],point[1])}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(
){clip.point=point,line.lineEnd()}var polygon,ring,buffer=d3_geo_clipBufferListener(),ringListener=clipLine(buffer),polygonStarted=!1;function pointRing(,){ring.push([,]);var point=rotate(,);ringListener.point(point[0],point[1])}function ringStart(){ringListener.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringListener.lineEnd();var segment,clean=ringListener.clean(),ringSegments=buffer.buffer(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){var point,i=-1;if(0<(n=(segment=ringSegments[0]).length-1)){for(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart();++i<n;
)listener.point((point=segment[i])[0],point[1]);listener.lineEnd()}}else 1<n&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))}return clip}}function d3_geo_clipSegmentLength1(segment){return 1<segment.length}function d3_geo_clipBufferListener(){var line,lines=[];return{lineStart:function(){lines.push(line=[])},point:function(,){line.push([,])},lineEnd:d3_noop,buffer:function(){var buffer=lines;return lines=[],line=null,buffer},rejoin:function(){1<lines.length&&lines.push(lines.pop().concat(lines.shift()))}}}function d3_geo_clipSort(a,b){return((a=a.x
)[0]<0?a[1]-half-:half-a[1])-((b=b.x)[0]<0?b[1]-half-:half-b[1])}var d3_geo_clipAntimeridian=d3_geo_clip(d3_true,function(listener){var clean,0=NaN,0=NaN,s0=NaN;return{lineStart:function(){listener.lineStart(),clean=1},point:function(1,1){var s1=0<1?:-,d=abs(1-0);abs(d-)<?(listener.point(0,0=0<(0+1)/2?half:-half),listener.point(s0,0),listener.lineEnd(),listener.lineStart(),listener.point(s1,0),listener.point(1,0),clean=0):s0!==s1&&<=d&&(abs(0-s0)<&&(0-=s0*),abs(1-s1)<&&(1-=s1*),0=function(0,0,1,1){var cos0,cos1,sin0_1=Math.sin(0-1);return abs(sin0_1)>?Math.atan((Math.sin(0)*(cos1=Math.cos(1)
)*Math.sin(1)-Math.sin(1)*(cos0=Math.cos(0))*Math.sin(0))/(cos0*cos1*sin0_1)):(0+1)/2}(0,0,1,1),listener.point(s0,0),listener.lineEnd(),listener.lineStart(),listener.point(s1,0),clean=0),listener.point(0=1,0=1),s0=s1},lineEnd:function(){listener.lineEnd(),0=0=NaN},clean:function(){return 2-clean}}},function(from,to,direction,listener){var ;if(null==from)=direction*half,listener.point(-,),listener.point(0,),listener.point(,),listener.point(,0),listener.point(,-),listener.point(0,-),listener.point(-,-),listener.point(-,0),listener.point(-,);else if(abs(from[0]-to[0])>){var s=from[0]<to[0]?:-;=direction*s/2,
listener.point(-s,),listener.point(0,),listener.point(s,)}else listener.point(to[0],to[1])},[-,-/2]);function d3_geom_clipLine(x0,y0,x1,y1){return function(line){var r,a=line.a,b=line.b,ax=a.x,ay=a.y,t0=0,t1=1,dx=b.x-ax,dy=b.y-ay;if(r=x0-ax,dx||!(0<r)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(0<dx){if(t1<r)return;t0<r&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(t1<r)return;t0<r&&(t0=r)}else if(0<dx){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(0<r)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(0<dy){if(t1<r)return;t0<r&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(t1<r)return;t0<r&&(t0=r)}else if(0<dy){if(r<t0)return;r<t1&&(t1=r)
}return 0<t0&&(line.a={x:ax+t0*dx,y:ay+t0*dy}),t1<1&&(line.b={x:ax+t1*dx,y:ay+t1*dy}),line}}}}}}var d3_geo_clipExtentMAX=1e9;function d3_geo_clipExtent(x0,y0,x1,y1){return function(listener){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,listener_=listener,bufferListener=d3_geo_clipBufferListener(),clipLine=d3_geom_clipLine(x0,y0,x1,y1),clip={point:point,lineStart:function(){clip.point=linePoint,polygon&&polygon.push(ring=[]);first=!0,v_=!1,x_=y_=NaN},lineEnd:function(){segments&&(linePoint(x__,y__),v__&&v_&&bufferListener.rejoin(),segments.push(bufferListener.buffer()));clip.point=point,v_&&listener.lineEnd()},polygonStart:function(){
listener=bufferListener,segments=[],polygon=[],clean=!0},polygonEnd:function(){listener=listener_,segments=d3.merge(segments);var clipStartInside=function(p){for(var wn=0,n=polygon.length,y=p[1],i=0;i<n;++i)for(var b,j=1,v=polygon[i],m=v.length,a=v[0];j<m;++j)b=v[j],a[1]<=y?b[1]>y&&0<d3_cross2d(a,b,p)&&++wn:b[1]<=y&&d3_cross2d(a,b,p)<0&&--wn,a=b;return 0!==wn}([x0,y1]),inside=clean&&clipStartInside,visible=segments.length;(inside||visible)&&(listener.polygonStart(),inside&&(listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),visible&&d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener),listener.polygonEnd()),
segments=polygon=ring=null}};function interpolate(from,to,direction,listener){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoints(from,to)<0^0<direction)for(;listener.point(0===a||3===a?x0:x1,1<a?y1:y0),(a=(a+direction+4)%4)!==a1;);else listener.point(to[0],to[1])}function pointVisible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function point(x,y){pointVisible(x,y)&&listener.point(x,y)}function linePoint(x,y){var v=pointVisible(x=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,x)),y=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,y)));if(polygon&&ring.push([x,y]),first)x__=x,y__=y,first=!1,(
v__=v)&&(listener.lineStart(),listener.point(x,y));else if(v&&v_)listener.point(x,y);else{var l={a:{x:x_,y:y_},b:{x:x,y:y}};clipLine(l)?(v_||(listener.lineStart(),listener.point(l.a.x,l.a.y)),listener.point(l.b.x,l.b.y),v||listener.lineEnd(),clean=!1):v&&(listener.lineStart(),listener.point(x,y),clean=!1)}x_=x,y_=y,v_=v}return clip};function corner(p,direction){return abs(p[0]-x0)<?0<direction?0:3:abs(p[0]-x1)<?0<direction?2:1:abs(p[1]-y0)<?0<direction?1:0:0<direction?3:2}function compare(a,b){return comparePoints(a.x,b.x)}function comparePoints(a,b){var ca=corner(a,1),cb=corner(b,1)
;return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}}function d3_geo_conic(projectAt){var 0=0,1=/3,m=d3_geo_projectionMutator(projectAt),p=m(0,1);return p.parallels=function(_){return arguments.length?m(0=_[0]*/180,1=_[1]*/180):[0/*180,1/*180]},p}function d3_geo_conicEqualArea(0,1){var sin0=Math.sin(0),n=(sin0+Math.sin(1))/2,C=1+sin0*(2*n-sin0),0=Math.sqrt(C)/n;function forward(,){var =Math.sqrt(C-2*n*Math.sin())/n;return[*Math.sin(*=n),0-*Math.cos()]}return forward.invert=function(x,y){var 0_y=0-y;return[Math.atan2(x,0_y)/n,d3_asin((C-(x*x+0_y*0_y)*n*n)/(2*n))]},forward}
d3.geo.clipExtent=function(){var x0,y0,x1,y1,stream,clip,clipExtent={stream:function(output){return stream&&(stream.valid=!1),(stream=clip(output)).valid=!0,stream},extent:function(_){return arguments.length?(clip=d3_geo_clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),stream&&(stream.valid=!1,stream=null),clipExtent):[[x0,y0],[x1,y1]]}};return clipExtent.extent([[0,0],[960,500]])},(d3.geo.conicEqualArea=function(){return d3_geo_conic(d3_geo_conicEqualArea)}).raw=d3_geo_conicEqualArea,d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},d3.geo.albersUsa=function(){var point,
lower48Point,alaskaPoint,hawaiiPoint,lower48=d3.geo.albers(),alaska=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point(x,y),point||(alaskaPoint(x,y),point)||hawaiiPoint(x,y),point}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(
.12<=y&&y<.234&&-.425<=x&&x<-.214?alaska:.166<=y&&y<.234&&-.214<=x&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream);return{point:function(x,y){lower48Stream.point(x,y),alaskaStream.point(x,y),hawaiiStream.point(x,y)},sphere:function(){lower48Stream.sphere(),alaskaStream.sphere(),hawaiiStream.sphere()},lineStart:function(){lower48Stream.lineStart(),alaskaStream.lineStart(),hawaiiStream.lineStart()},lineEnd:function(){lower48Stream.lineEnd(),alaskaStream.lineEnd(),hawaiiStream.lineEnd()},polygonStart:function(){
lower48Stream.polygonStart(),alaskaStream.polygonStart(),hawaiiStream.polygonStart()},polygonEnd:function(){lower48Stream.polygonEnd(),alaskaStream.polygonEnd(),hawaiiStream.polygonEnd()}}},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),albersUsa):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_
).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point,alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+,y+.12*k+],[x-.214*k-,y+.234*k-]]).stream(pointStream).point,hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+,y+.166*k+],[x-.115*k-,y+.234*k-]]).stream(pointStream).point,albersUsa},albersUsa.scale(1070)};var d3_geo_pathAreaSum,d3_geo_pathAreaPolygon,d3_geo_pathBoundsX0,d3_geo_pathBoundsY0,d3_geo_pathBoundsX1,d3_geo_pathBoundsY1,d3_geo_pathArea={point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_pathAreaPolygon=0,
d3_geo_pathArea.lineStart=d3_geo_pathAreaRingStart},polygonEnd:function(){d3_geo_pathArea.lineStart=d3_geo_pathArea.lineEnd=d3_geo_pathArea.point=d3_noop,d3_geo_pathAreaSum+=abs(d3_geo_pathAreaPolygon/2)}};function d3_geo_pathAreaRingStart(){var x00,y00,x0,y0;function nextPoint(x,y){d3_geo_pathAreaPolygon+=y0*x-x0*y,x0=x,y0=y}d3_geo_pathArea.point=function(x,y){d3_geo_pathArea.point=nextPoint,x00=x0=x,y00=y0=y},d3_geo_pathArea.lineEnd=function(){nextPoint(x00,y00)}}var d3_geo_pathBounds={point:function(x,y){x<d3_geo_pathBoundsX0&&(d3_geo_pathBoundsX0=x);d3_geo_pathBoundsX1<x&&(d3_geo_pathBoundsX1=x);y<d3_geo_pathBoundsY0&&(d3_geo_pathBoundsY0=y)
;d3_geo_pathBoundsY1<y&&(d3_geo_pathBoundsY1=y)},lineStart:d3_noop,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_pathBuffer(){var pointCircle=d3_geo_pathBufferCircle(4.5),buffer=[],stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointCircle=d3_geo_pathBufferCircle(_),stream},result:function(){if(buffer.length){var result=buffer.join("");return buffer=[],result}}};function point(x,y){buffer.push("M",x,",",y,pointCircle)}function pointLineStart(x,y
){buffer.push("M",x,",",y),stream.point=pointLine}function pointLine(x,y){buffer.push("L",x,",",y)}function lineEnd(){stream.point=point}function lineEndPolygon(){buffer.push("Z")}return stream}function d3_geo_pathBufferCircle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}var d3_geo_lengthSum,d3_geo_pathCentroid={point:d3_geo_pathCentroidPoint,lineStart:d3_geo_pathCentroidLineStart,lineEnd:d3_geo_pathCentroidLineEnd,polygonStart:function(){d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidRingStart},polygonEnd:function(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint,
d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidLineStart,d3_geo_pathCentroid.lineEnd=d3_geo_pathCentroidLineEnd}};function d3_geo_pathCentroidPoint(x,y){d3_geo_centroidX0+=x,d3_geo_centroidY0+=y,++d3_geo_centroidZ0}function d3_geo_pathCentroidLineStart(){var x0,y0;function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,d3_geo_pathCentroidPoint(x0=x,y0=y)}d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x0=x,y0=y)}}function d3_geo_pathCentroidLineEnd(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint}
function d3_geo_pathCentroidRingStart(){var x00,y00,x0,y0;function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,d3_geo_centroidX2+=(z=y0*x-x0*y)*(x0+x),d3_geo_centroidY2+=z*(y0+y),d3_geo_centroidZ2+=3*z,d3_geo_pathCentroidPoint(x0=x,y0=y)}d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x00=x0=x,y00=y0=y)},d3_geo_pathCentroid.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathContext(context){var pointRadius=4.5,stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,
polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointRadius=_,stream},result:d3_noop};function point(x,y){context.moveTo(x+pointRadius,y),context.arc(x,y,pointRadius,0,)}function pointLineStart(x,y){context.moveTo(x,y),stream.point=pointLine}function pointLine(x,y){context.lineTo(x,y)}function lineEnd(){stream.point=point}function lineEndPolygon(){context.closePath()}return stream}function d3_geo_resample(project){var 2=.5,cosMinDistance=Math.cos(30*d3_radians),maxDepth=16;function resample(stream){return(maxDepth?function(stream){var 00,x00,y00,a00,b00,
c00,0,x0,y0,a0,b0,c0,resample={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resample.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resample.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resample.point=linePoint,stream.lineStart()}function linePoint(,){var c=d3_geo_cartesian([,]),p=project(,);resampleLineTo(x0,y0,0,a0,b0,c0,x0=p[0],y0=p[1],0=,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resample.point=point,stream.lineEnd()}function ringStart(){lineStart(),resample.point=ringPoint,
resample.lineEnd=ringEnd}function ringPoint(,){linePoint(00=,),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resample.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,0,a0,b0,c0,x00,y00,00,a00,b00,c00,maxDepth,stream),(resample.lineEnd=lineEnd)()}return resample}:function(stream){return d3_geo_transformPoint(stream,function(x,y){x=project(x,y),stream.point(x[0],x[1])})})(stream)}function resampleLineTo(x0,y0,0,a0,b0,c0,x1,y1,1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(4*2<d2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=Math.sqrt(a*a+b*b+c*c),2=Math.asin(c/=m),2=abs(abs(c)-1)<||abs(0-1)<?(0+1)/2:Math.atan2(b,a),p=project(2,2),
x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(2<dz*dz/d2||.3<abs((dx*dx2+dy*dy2)/d2-.5)||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,0,a0,b0,c0,x2,y2,2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,2,a,b,c,x1,y1,1,a1,b1,c1,depth,stream))}}return resample.precision=function(_){return arguments.length?(maxDepth=0<(2=_*_)&&16,resample):Math.sqrt(2)},resample}function d3_geo_transform(stream){this.stream=stream}function d3_geo_transformPoint(stream,point){return{point:point,sphere:function(){stream.sphere()},lineStart:function(){stream.lineStart()},lineEnd:function(){stream.lineEnd()},polygonStart:function(){
stream.polygonStart()},polygonEnd:function(){stream.polygonEnd()}}}function d3_geo_projection(project){return d3_geo_projectionMutator(function(){return project})()}function d3_geo_projectionMutator(projectAt){var project,rotate,projectRotate,x,y,stream,projectResample=d3_geo_resample(function(x,y){return[(x=project(x,y))[0]*k+x,y-x[1]*k]}),k=150,x=480,y=250,=0,=0,=0,=0,=0,preclip=d3_geo_clipAntimeridian,postclip=d3_identity,clipAngle=null,clipExtent=null;function projection(point){return[(point=projectRotate(point[0]*d3_radians,point[1]*d3_radians))[0]*k+x,y-point[1]*k]}function invert(point){return(point=projectRotate.invert((point[0]-x)/k,(
y-point[1])/k))&&[point[0]*d3_degrees,point[1]*d3_degrees]}function reset(){projectRotate=d3_geo_compose(rotate=d3_geo_rotation(,,),project);var center=project(,);return x=x-center[0]*k,y=y+center[1]*k,invalidate()}function invalidate(){return stream&&(stream.valid=!1,stream=null),projection}return projection.stream=function(output){return stream&&(stream.valid=!1),(stream=d3_geo_projectionRadians(preclip(rotate,projectResample(postclip(output))))).valid=!0,stream},projection.clipAngle=function(_){return arguments.length?(preclip=null==_?(clipAngle=_,d3_geo_clipAntimeridian):function(radius){var cr=Math.cos(radius),smallRadius=0<cr,
notHemisphere=abs(cr)>;return d3_geo_clip(visible,function(listener){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(,){var point2,point1=[,],v=visible(,),c=smallRadius?v?0:code(,):v?code(+(<0?:-),):0;if(!point0&&(v00=v0=v)&&listener.lineStart(),v!==v0&&(point2=intersect(point0,point1),(d3_geo_sphericalEqual(point0,point2)||d3_geo_sphericalEqual(point1,point2))&&(point1[0]+=,point1[1]+=,v=visible(point1[0],point1[1]))),v!==v0)clean=0,v?(listener.lineStart(),point2=intersect(point1,point0),listener.point(point2[0],point2[1])):(point2=intersect(point0,point1),listener.point(point2[0],point2[1]),
listener.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(listener.lineStart(),listener.point(t[0][0],t[0][1]),listener.point(t[1][0],t[1][1]),listener.lineEnd()):(listener.point(t[1][0],t[1][1]),listener.lineEnd(),listener.lineStart(),listener.point(t[0][0],t[0][1])))}!v||point0&&d3_geo_sphericalEqual(point0,point1)||listener.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&listener.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}},d3_geo_circleInterpolate(radius,6*d3_radians),smallRadius?[0,-radius]:[-,radius-])
;function visible(,){return Math.cos()*Math.cos()>cr}function intersect(a,b,two){var n1=[1,0,0],n2=d3_geo_cartesianCross(d3_geo_cartesian(a),d3_geo_cartesian(b)),n2n2=d3_geo_cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=d3_geo_cartesianCross(n1,n2),A=d3_geo_cartesianScale(n1,c1);d3_geo_cartesianAdd(A,d3_geo_cartesianScale(n2,c2));var u=n1xn2,w=d3_geo_cartesianDot(A,u),uu=d3_geo_cartesianDot(u,u),t2=w*w-uu*(d3_geo_cartesianDot(A,A)-1);if(!(t2<0)){var t=Math.sqrt(t2),q=d3_geo_cartesianScale(u,(-w-t)/uu);if(d3_geo_cartesianAdd(q,A),q=d3_geo_spherical(q),!two
)return q;var z,0=a[0],1=b[0],0=a[1],1=b[1];1<0&&(z=0,0=1,1=z);var =1-0,polar=abs(-)<;if(!polar&&1<0&&(z=0,0=1,1=z),polar||<?polar?0<0+1^q[1]<(abs(q[0]-0)<?0:1):0<=q[1]&&q[1]<=1:<^(0<=q[0]&&q[0]<=1)){var q1=d3_geo_cartesianScale(u,(-w+t)/uu);return d3_geo_cartesianAdd(q1,A),[q,d3_geo_spherical(q1)]}}}function code(,){var r=smallRadius?radius:-radius,code=0;return <-r?code|=1:r<&&(code|=2),<-r?code|=4:r<&&(code|=8),code}}((clipAngle=+_)*d3_radians),invalidate()):clipAngle},projection.clipExtent=function(_){return arguments.length?(postclip=(clipExtent=_)?d3_geo_clipExtent(_[0][0],_[0][1],_[1][0],_[1][1]
):d3_identity,invalidate()):clipExtent},projection.scale=function(_){return arguments.length?(k=+_,reset()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],reset()):[x,y]},projection.center=function(_){return arguments.length?(=_[0]%360*d3_radians,=_[1]%360*d3_radians,reset()):[*d3_degrees,*d3_degrees]},projection.rotate=function(_){return arguments.length?(=_[0]%360*d3_radians,=_[1]%360*d3_radians,=2<_.length?_[2]%360*d3_radians:0,reset()):[*d3_degrees,*d3_degrees,*d3_degrees]},d3.rebind(projection,projectResample,"precision"),function(){return project=projectAt.apply(this,arguments),
projection.invert=project.invert&&invert,reset()}}function d3_geo_projectionRadians(stream){return d3_geo_transformPoint(stream,function(x,y){stream.point(x*d3_radians,y*d3_radians)})}function d3_geo_equirectangular(,){return[,]}function d3_geo_identityRotation(,){return[<?-:<-?+:,]}function d3_geo_rotation(,,){return ?||?d3_geo_compose(d3_geo_rotation(),d3_geo_rotation(,)):d3_geo_rotation():||?d3_geo_rotation(,):d3_geo_identityRotation}function d3_geo_forwardRotation(){return function(,){return[<(+=)?-:<-?+:,]}}function d3_geo_rotation(){var rotation=d3_geo_forwardRotation()
;return rotation.invert=d3_geo_forwardRotation(-),rotation}function d3_geo_rotation(,){var cos=Math.cos(),sin=Math.sin(),cos=Math.cos(),sin=Math.sin();function rotation(,){var cos=Math.cos(),x=Math.cos()*cos,y=Math.sin()*cos,z=Math.sin(),k=z*cos+x*sin;return[Math.atan2(y*cos-k*sin,x*cos-z*sin),d3_asin(k*cos+y*sin)]}return rotation.invert=function(,){var cos=Math.cos(),x=Math.cos()*cos,y=Math.sin()*cos,z=Math.sin(),k=z*cos-y*sin;return[Math.atan2(y*cos+z*sin,x*cos+k*sin),d3_asin(k*cos-x*sin)]},rotation}function d3_geo_circleInterpolate(radius,precision){var cr=Math.cos(radius),
sr=Math.sin(radius);return function(from,to,direction,listener){var step=direction*precision;null!=from?(from=d3_geo_circleAngle(cr,from),to=d3_geo_circleAngle(cr,to),(0<direction?from<to:to<from)&&(from+=direction*)):(from=radius+direction*,to=radius-.5*step);for(var point,t=from;0<direction?to<t:t<to;t-=step)listener.point((point=d3_geo_spherical([cr,-sr*Math.cos(t),-sr*Math.sin(t)]))[0],point[1])}}function d3_geo_circleAngle(cr,point){var a=d3_geo_cartesian(point);a[0]-=cr,d3_geo_cartesianNormalize(a);var angle=d3_acos(-a[1]);return((-a[2]<0?-angle:angle)+2*Math.PI-)%(2*Math.PI)}function d3_geo_graticuleX(y0,y1,dy){var y=d3.range(y0,y1-,dy).concat(y1)
;return function(x){return y.map(function(y){return[x,y]})}}function d3_geo_graticuleY(x0,x1,dx){var x=d3.range(x0,x1-,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function d3_source(d){return d.source}function d3_target(d){return d.target}d3.geo.path=function(){var projection,context,projectStream,contextStream,cacheStream,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),cacheStream&&cacheStream.valid||(cacheStream=projectStream(contextStream)),d3.geo.stream(object,cacheStream)),contextStream.result()}function reset(){
return cacheStream=null,path}return path.area=function(object){return d3_geo_pathAreaSum=0,d3.geo.stream(object,projectStream(d3_geo_pathArea)),d3_geo_pathAreaSum},path.centroid=function(object){return d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,projectStream(d3_geo_pathCentroid)),d3_geo_centroidZ2?[d3_geo_centroidX2/d3_geo_centroidZ2,d3_geo_centroidY2/d3_geo_centroidZ2]:d3_geo_centroidZ1?[d3_geo_centroidX1/d3_geo_centroidZ1,d3_geo_centroidY1/d3_geo_centroidZ1]:d3_geo_centroidZ0?[d3_geo_centroidX0/d3_geo_centroidZ0,
d3_geo_centroidY0/d3_geo_centroidZ0]:[NaN,NaN]},path.bounds=function(object){return d3_geo_pathBoundsX1=d3_geo_pathBoundsY1=-(d3_geo_pathBoundsX0=d3_geo_pathBoundsY0=1/0),d3.geo.stream(object,projectStream(d3_geo_pathBounds)),[[d3_geo_pathBoundsX0,d3_geo_pathBoundsY0],[d3_geo_pathBoundsX1,d3_geo_pathBoundsY1]]},path.projection=function(_){return arguments.length?(projectStream=(projection=_)?_.stream||(project=_,resample=d3_geo_resample(function(x,y){return project([x*d3_degrees,y*d3_degrees])}),function(stream){return d3_geo_projectionRadians(resample(stream))}):d3_identity,reset()):projection;var project,resample},path.context=function(_){
return arguments.length?(contextStream=null==(context=_)?new d3_geo_pathBuffer:new d3_geo_pathContext(_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),reset()):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(d3.geo.albersUsa()).context(null)},d3.geo.transform=function(methods){return{stream:function(stream){var transform=new d3_geo_transform(stream);for(var k in methods)transform[k]=methods[k];return transform}}},d3_geo_transform.prototype={point:function(x,y){this.stream.point(x,y)},sphere:function(){
this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},d3.geo.projection=d3_geo_projection,d3.geo.projectionMutator=d3_geo_projectionMutator,(d3.geo.equirectangular=function(){return d3_geo_projection(d3_geo_equirectangular)}).raw=d3_geo_equirectangular.invert=d3_geo_equirectangular,d3.geo.rotation=function(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*d3_radians,coordinates[1]*d3_radians))[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates}
return rotate=d3_geo_rotation(rotate[0]%360*d3_radians,rotate[1]*d3_radians,2<rotate.length?rotate[2]*d3_radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*d3_radians,coordinates[1]*d3_radians))[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates},forward},d3_geo_identityRotation.invert=d3_geo_equirectangular,d3.geo.circle=function(){var angle,interpolate,origin=[0,0],precision=6;function circle(){var center="function"==typeof origin?origin.apply(this,arguments):origin,rotate=d3_geo_rotation(-center[0]*d3_radians,-center[1]*d3_radians,0).invert,ring=[];return interpolate(null,null,1,{point:function(x,y){
ring.push(x=rotate(x,y)),x[0]*=d3_degrees,x[1]*=d3_degrees}}),{type:"Polygon",coordinates:[ring]}}return circle.origin=function(x){return arguments.length?(origin=x,circle):origin},circle.angle=function(x){return arguments.length?(interpolate=d3_geo_circleInterpolate((angle=+x)*d3_radians,precision*d3_radians),circle):angle},circle.precision=function(_){return arguments.length?(interpolate=d3_geo_circleInterpolate(angle*d3_radians,(precision=+_)*d3_radians),circle):precision},circle.angle(90)},d3.geo.distance=function(a,b){var t,=(b[0]-a[0])*d3_radians,0=a[1]*d3_radians,1=b[1]*d3_radians,sin=Math.sin(),cos=Math.cos(),sin0=Math.sin(0),
cos0=Math.cos(0),sin1=Math.sin(1),cos1=Math.cos(1);return Math.atan2(Math.sqrt((t=cos1*sin)*t+(t=cos0*sin1-sin0*cos1*cos)*t),sin0*sin1+cos0*cos1*cos)},d3.geo.graticule=function(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3.range(Math.ceil(X0/DX)*DX,X1,DX).map(X).concat(d3.range(Math.ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3.range(Math.ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>}).map(x)).concat(d3.range(Math.ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>}).map(y))}
return graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.majorExtent(_).minorExtent(_):graticule.minorExtent()},graticule.majorExtent=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X1<X0&&(_=X0,X0=X1,X1=_),Y1<Y0&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.minorExtent=function(_){return arguments.length?(
x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x1<x0&&(_=x0,x0=x1,x1=_),y1<y0&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.majorStep(_).minorStep(_):graticule.minorStep()},graticule.majorStep=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.minorStep=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=d3_geo_graticuleX(y0,y1,90),y=d3_geo_graticuleY(x0,x1,precision),X=d3_geo_graticuleX(Y0,Y1,90),Y=d3_geo_graticuleY(X0,X1,precision),graticule
):precision},graticule.majorExtent([[-180,-90+],[180,90-]]).minorExtent([[-180,-80-],[180,80+]])},d3.geo.greatArc=function(){var source_,target_,source=d3_source,target=d3_target;function greatArc(){return{type:"LineString",coordinates:[source_||source.apply(this,arguments),target_||target.apply(this,arguments)]}}return greatArc.distance=function(){return d3.geo.distance(source_||source.apply(this,arguments),target_||target.apply(this,arguments))},greatArc.source=function(_){return arguments.length?(source_="function"==typeof(source=_)?null:_,greatArc):source},greatArc.target=function(_){return arguments.length?(target_="function"==typeof(target=_
)?null:_,greatArc):target},greatArc.precision=function(){return arguments.length?greatArc:0},greatArc},d3.geo.interpolate=function(source,target){return x0=source[0]*d3_radians,y0=source[1]*d3_radians,x1=target[0]*d3_radians,y1=target[1]*d3_radians,cy0=Math.cos(y0),sy0=Math.sin(y0),cy1=Math.cos(y1),sy1=Math.sin(y1),kx0=cy0*Math.cos(x0),ky0=cy0*Math.sin(x0),kx1=cy1*Math.cos(x1),ky1=cy1*Math.sin(x1),d=2*Math.asin(Math.sqrt(d3_haversin(y1-y0)+cy0*cy1*d3_haversin(x1-x0))),k=1/Math.sin(d),(interpolate=d?function(t){var B=Math.sin(t*=d)*k,A=Math.sin(d-t)*k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[Math.atan2(y,x)*d3_degrees,Math.atan2(z,Math.sqrt(x*x+y*y)
)*d3_degrees]}:function(){return[x0*d3_degrees,y0*d3_degrees]}).distance=d,interpolate;var x0,y0,x1,y1,cy0,sy0,cy1,sy1,kx0,ky0,kx1,ky1,d,k,interpolate},d3.geo.length=function(object){return d3_geo_lengthSum=0,d3.geo.stream(object,d3_geo_length),d3_geo_lengthSum};var d3_geo_length={sphere:d3_noop,point:d3_noop,lineStart:function(){var 0,sin0,cos0;function nextPoint(,){var sin=Math.sin(*=d3_radians),cos=Math.cos(),t=abs((*=d3_radians)-0),cos=Math.cos(t);d3_geo_lengthSum+=Math.atan2(Math.sqrt((t=cos*Math.sin(t))*t+(t=cos0*sin-sin0*cos*cos)*t),sin0*sin+cos0*cos*cos),0=,sin0=sin,cos0=cos}d3_geo_length.point=function(,){
0=*d3_radians,sin0=Math.sin(*=d3_radians),cos0=Math.cos(),d3_geo_length.point=nextPoint},d3_geo_length.lineEnd=function(){d3_geo_length.point=d3_geo_length.lineEnd=d3_noop}},lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_azimuthal(scale,angle){function azimuthal(,){var cos=Math.cos(),cos=Math.cos(),k=scale(cos*cos);return[k*cos*Math.sin(),k*Math.sin()]}return azimuthal.invert=function(x,y){var =Math.sqrt(x*x+y*y),c=angle(),sinc=Math.sin(c),cosc=Math.cos(c);return[Math.atan2(x*sinc,*cosc),Math.asin(&&y*sinc/)]},azimuthal}var d3_geo_azimuthalEqualArea=d3_geo_azimuthal(function(coscos){return Math.sqrt(2/(
1+coscos))},function(){return 2*Math.asin(/2)});(d3.geo.azimuthalEqualArea=function(){return d3_geo_projection(d3_geo_azimuthalEqualArea)}).raw=d3_geo_azimuthalEqualArea;var d3_geo_azimuthalEquidistant=d3_geo_azimuthal(function(coscos){var c=Math.acos(coscos);return c&&c/Math.sin(c)},d3_identity);function d3_geo_conicConformal(0,1){var cos0=Math.cos(0),t=function(){return Math.tan(/4+/2)},n=0===1?Math.sin(0):Math.log(cos0/Math.cos(1))/Math.log(t(1)/t(0)),F=cos0*Math.pow(t(0),n)/n;if(!n)return d3_geo_mercator;function forward(,){0<F?<-half+&&(=-half+):half-<&&(=half-);var =F/Math.pow(t(),n);return[*Math.sin(n*),
F-*Math.cos(n*)]}return forward.invert=function(x,y){var 0_y=F-y,=d3_sgn(n)*Math.sqrt(x*x+0_y*0_y);return[Math.atan2(x,0_y)/n,2*Math.atan(Math.pow(F/,1/n))-half]},forward}function d3_geo_conicEquidistant(0,1){var cos0=Math.cos(0),n=0===1?Math.sin(0):(cos0-Math.cos(1))/(1-0),G=cos0/n+0;if(abs(n)<)return d3_geo_equirectangular;function forward(,){var =G-;return[*Math.sin(n*),G-*Math.cos(n*)]}return forward.invert=function(x,y){var 0_y=G-y;return[Math.atan2(x,0_y)/n,G-d3_sgn(n)*Math.sqrt(x*x+0_y*0_y)]},forward}(d3.geo.azimuthalEquidistant=function(){return d3_geo_projection(d3_geo_azimuthalEquidistant)}
).raw=d3_geo_azimuthalEquidistant,(d3.geo.conicConformal=function(){return d3_geo_conic(d3_geo_conicConformal)}).raw=d3_geo_conicConformal,(d3.geo.conicEquidistant=function(){return d3_geo_conic(d3_geo_conicEquidistant)}).raw=d3_geo_conicEquidistant;var d3_geo_gnomonic=d3_geo_azimuthal(function(coscos){return 1/coscos},Math.atan);function d3_geo_mercator(,){return[,Math.log(Math.tan(/4+/2))]}function d3_geo_mercatorProjection(project){var clipAuto,m=d3_geo_projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent;return m.scale=function(){var v=scale.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},
m.translate=function(){var v=translate.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.clipExtent=function(_){var v=clipExtent.apply(m,arguments);if(v===m){if(clipAuto=null==_){var k=*scale(),t=translate();clipExtent([[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]])}}else clipAuto&&(v=null);return v},m.clipExtent(null)}(d3.geo.gnomonic=function(){return d3_geo_projection(d3_geo_gnomonic)}).raw=d3_geo_gnomonic,d3_geo_mercator.invert=function(x,y){return[x,2*Math.atan(Math.exp(y))-half]},(d3.geo.mercator=function(){return d3_geo_mercatorProjection(d3_geo_mercator)}).raw=d3_geo_mercator;var d3_geo_orthographic=d3_geo_azimuthal(function(){return 1},
Math.asin);(d3.geo.orthographic=function(){return d3_geo_projection(d3_geo_orthographic)}).raw=d3_geo_orthographic;var d3_geo_stereographic=d3_geo_azimuthal(function(coscos){return 1/(1+coscos)},function(){return 2*Math.atan()});function d3_geo_transverseMercator(,){return[Math.log(Math.tan(/4+/2)),-]}function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}function d3_geom_hullUpper(points){for(var n=points.length,hull=[0,1],hs=2,i=2;i<n;i++){for(;1<hs&&d3_cross2d(points[hull[hs-2]],points[hull[hs-1]],points[i])<=0;)--hs;hull[hs++]=i}return hull.slice(0,hs)}function d3_geom_hullOrder(a,b){return a[0]-b[0]||a[1]-b[1]}(
d3.geo.stereographic=function(){return d3_geo_projection(d3_geo_stereographic)}).raw=d3_geo_stereographic,d3_geo_transverseMercator.invert=function(x,y){return[-y,2*Math.atan(Math.exp(x))-half]},(d3.geo.transverseMercator=function(){var projection=d3_geo_mercatorProjection(d3_geo_transverseMercator),center=projection.center,rotate=projection.rotate;return projection.center=function(_){return _?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},projection.rotate=function(_){return _?rotate([_[0],_[1],2<_.length?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90])}).raw=d3_geo_transverseMercator,d3.geom={},d3.geom.hull=function(vertices){
var x=d3_geom_pointX,y=d3_geom_pointY;if(arguments.length)return hull(vertices);function hull(data){if(data.length<3)return[];var i,fx=d3_functor(x),fy=d3_functor(y),n=data.length,points=[],flippedPoints=[];for(i=0;i<n;i++)points.push([+fx.call(this,data[i],i),+fy.call(this,data[i],i),i]);for(points.sort(d3_geom_hullOrder),i=0;i<n;i++)flippedPoints.push([points[i][0],-points[i][1]]);var upper=d3_geom_hullUpper(points),lower=d3_geom_hullUpper(flippedPoints),skipLeft=lower[0]===upper[0],skipRight=lower[lower.length-1]===upper[upper.length-1],polygon=[];for(i=upper.length-1;0<=i;--i)polygon.push(data[points[upper[i]][2]]);for(
i=+skipLeft;i<lower.length-skipRight;++i)polygon.push(data[points[lower[i]][2]]);return polygon}return hull.x=function(_){return arguments.length?(x=_,hull):x},hull.y=function(_){return arguments.length?(y=_,hull):y},hull},d3.geom.polygon=function(coordinates){return d3_subclass(coordinates,d3_geom_polygonPrototype),coordinates};var d3_geom_polygonPrototype=d3.geom.polygon.prototype=[];function d3_geom_polygonInside(p,a,b){return(b[0]-a[0])*(p[1]-a[1])<(b[1]-a[1])*(p[0]-a[0])}function d3_geom_polygonIntersect(c,d,a,b){var x1=c[0],x3=a[0],x21=d[0]-x1,x43=b[0]-x3,y1=c[1],y3=a[1],y21=d[1]-y1,y43=b[1]-y3,ua=(x43*(y1-y3)-y43*(x1-x3))/(y43*x21-x43*y21);return[
x1+ua*x21,y1+ua*y21]}function d3_geom_polygonClosed(coordinates){var a=coordinates[0],b=coordinates[coordinates.length-1];return!(a[0]-b[0]||a[1]-b[1])}d3_geom_polygonPrototype.area=function(){for(var a,i=-1,n=this.length,b=this[n-1],area=0;++i<n;)a=b,b=this[i],area+=a[1]*b[0]-a[0]*b[1];return.5*area},d3_geom_polygonPrototype.centroid=function(k){var a,c,i=-1,n=this.length,x=0,y=0,b=this[n-1];for(arguments.length||(k=-1/(6*this.area()));++i<n;)a=b,b=this[i],c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x*k,y*k]},d3_geom_polygonPrototype.clip=function(subject){for(var input,j,m,b,c,d,closed=d3_geom_polygonClosed(subject),i=-1,
n=this.length-d3_geom_polygonClosed(this),a=this[n-1];++i<n;){for(input=subject.slice(),subject.length=0,b=this[i],c=input[(m=input.length-closed)-1],j=-1;++j<m;)d3_geom_polygonInside(d=input[j],a,b)?(d3_geom_polygonInside(c,a,b)||subject.push(d3_geom_polygonIntersect(c,d,a,b)),subject.push(d)):d3_geom_polygonInside(c,a,b)&&subject.push(d3_geom_polygonIntersect(c,d,a,b)),c=d;closed&&subject.push(subject[0]),a=b}return subject};var d3_geom_voronoiEdges,d3_geom_voronoiCells,d3_geom_voronoiBeaches,d3_geom_voronoiFirstCircle,d3_geom_voronoiCircles,d3_geom_voronoiBeachPool=[],d3_geom_voronoiCirclePool=[];function d3_geom_voronoiBeach(){
d3_geom_voronoiRedBlackNode(this),this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(site){var beach=d3_geom_voronoiBeachPool.pop()||new d3_geom_voronoiBeach;return beach.site=site,beach}function d3_geom_voronoiDetachBeach(beach){d3_geom_voronoiDetachCircle(beach),d3_geom_voronoiBeaches.remove(beach),d3_geom_voronoiBeachPool.push(beach),d3_geom_voronoiRedBlackNode(beach)}function d3_geom_voronoiRemoveBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex={x:x,y:y},previous=beach.P,next=beach.N,disappearing=[beach];d3_geom_voronoiDetachBeach(beach);for(var lArc=previous;lArc.circle&&abs(x-lArc.circle.x)<&&abs(
y-lArc.circle.cy)<;)previous=lArc.P,disappearing.unshift(lArc),d3_geom_voronoiDetachBeach(lArc),lArc=previous;disappearing.unshift(lArc),d3_geom_voronoiDetachCircle(lArc);for(var rArc=next;rArc.circle&&abs(x-rArc.circle.x)<&&abs(y-rArc.circle.cy)<;)next=rArc.N,disappearing.push(rArc),d3_geom_voronoiDetachBeach(rArc),rArc=next;disappearing.push(rArc),d3_geom_voronoiDetachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],d3_geom_voronoiSetEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],(rArc=disappearing[nArcs-1]).edge=d3_geom_voronoiCreateEdge(lArc.site,
rArc.site,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiAddBeach(site){for(var lArc,rArc,dxl,dxr,x=site.x,directrix=site.y,node=d3_geom_voronoiBeaches._;node;)if(dxl=d3_geom_voronoiLeftBreakPoint(node,directrix)-x,<dxl)node=node.L;else{if(dxr=x-d3_geom_voronoiRightBreakPoint(node,directrix),!(<dxr)){-<dxl?(lArc=node.P,rArc=node):-<dxr?rArc=(lArc=node).N:lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}var newArc=d3_geom_voronoiCreateBeach(site);if(d3_geom_voronoiBeaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return d3_geom_voronoiDetachCircle(lArc),
rArc=d3_geom_voronoiCreateBeach(lArc.site),d3_geom_voronoiBeaches.insert(newArc,rArc),newArc.edge=rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site),d3_geom_voronoiAttachCircle(lArc),void d3_geom_voronoiAttachCircle(rArc);if(rArc){d3_geom_voronoiDetachCircle(lArc),d3_geom_voronoiDetachCircle(rArc);var lSite=lArc.site,ax=lSite.x,ay=lSite.y,bx=site.x-ax,by=site.y-ay,rSite=rArc.site,cx=rSite.x-ax,cy=rSite.y-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex={x:(cy*hb-by*hc)/d+ax,y:(bx*hc-cx*hb)/d+ay};d3_geom_voronoiSetEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=d3_geom_voronoiCreateEdge(lSite,site,null,vertex),
rArc.edge=d3_geom_voronoiCreateEdge(site,rSite,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}else newArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site)}}function d3_geom_voronoiLeftBreakPoint(arc,directrix){var site=arc.site,rfocx=site.x,rfocy=site.y,pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;var lfocx=(site=lArc.site).x,lfocy=site.y,plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function d3_geom_voronoiRightBreakPoint(arc,
directrix){var rArc=arc.N;if(rArc)return d3_geom_voronoiLeftBreakPoint(rArc,directrix);var site=arc.site;return site.y===directrix?site.x:1/0}function d3_geom_voronoiCell(site){this.site=site,this.edges=[]}function d3_geom_voronoiHalfEdgeOrder(a,b){return b.angle-a.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite.x,by=cSite.y,ax=lSite.x-bx,ay=lSite.y-by,cx=rSite.x-bx,d=2*(ax*(cy=rSite.y-by)-ay*cx);if(!(-2<=d)){
var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,cy=y+by,circle=d3_geom_voronoiCirclePool.pop()||new d3_geom_voronoiCircle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=cy+Math.sqrt(x*x+y*y),circle.cy=cy,arc.circle=circle;for(var before=null,node=d3_geom_voronoiCircles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}d3_geom_voronoiCircles.insert(before,circle),before||(d3_geom_voronoiFirstCircle=circle)}}}}function d3_geom_voronoiDetachCircle(arc){var circle=arc.circle;circle&&(circle.P||(
d3_geom_voronoiFirstCircle=circle.N),d3_geom_voronoiCircles.remove(circle),d3_geom_voronoiCirclePool.push(circle),d3_geom_voronoiRedBlackNode(circle),arc.circle=null)}function d3_geom_voronoiConnectEdge(edge,extent){var vb=edge.b;if(vb)return!0;var fm,fb,va=edge.a,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],lSite=edge.l,rSite=edge.r,lx=lSite.x,ly=lSite.y,rx=rSite.x,ry=rSite.y,fx=(lx+rx)/2,fy=(ly+ry)/2;if(ry===ly){if(fx<x0||x1<=fx)return;if(rx<lx){if(va){if(va.y>=y1)return}else va={x:fx,y:y0};vb={x:fx,y:y1}}else{if(va){if(va.y<y0)return}else va={x:fx,y:y1};vb={x:fx,y:y0}}}else if(fb=fy-(fm=(lx-rx)/(ry-ly))*fx,fm<-1||1<fm)if(rx<lx){if(va){
if(va.y>=y1)return}else va={x:(y0-fb)/fm,y:y0};vb={x:(y1-fb)/fm,y:y1}}else{if(va){if(va.y<y0)return}else va={x:(y1-fb)/fm,y:y1};vb={x:(y0-fb)/fm,y:y0}}else if(ly<ry){if(va){if(va.x>=x1)return}else va={x:x0,y:fm*x0+fb};vb={x:x1,y:fm*x1+fb}}else{if(va){if(va.x<x0)return}else va={x:x1,y:fm*x1+fb};vb={x:x0,y:fm*x0+fb}}return edge.a=va,edge.b=vb,!0}function d3_geom_voronoiEdge(lSite,rSite){this.l=lSite,this.r=rSite,this.a=this.b=null}function d3_geom_voronoiCreateEdge(lSite,rSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,rSite);return d3_geom_voronoiEdges.push(edge),va&&d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,va),vb&&d3_geom_voronoiSetEdgeEnd(edge,rSite,
lSite,vb),d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,lSite,rSite)),d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,rSite,lSite)),edge}function d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,vertex){edge.a||edge.b?edge.l===rSite?edge.b=vertex:edge.a=vertex:(edge.a=vertex,edge.l=lSite,edge.r=rSite)}function d3_geom_voronoiHalfEdge(edge,lSite,rSite){var va=edge.a,vb=edge.b;this.edge=edge,this.site=lSite,this.angle=rSite?Math.atan2(rSite.y-lSite.y,rSite.x-lSite.x):edge.l===lSite?Math.atan2(vb.x-va.x,va.y-vb.y):Math.atan2(va.x-vb.x,vb.y-va.y)}function d3_geom_voronoiRedBlackTree(){this._=null}
function d3_geom_voronoiRedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function d3_geom_voronoiRedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function d3_geom_voronoiRedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function d3_geom_voronoiRedBlackFirst(node){for(;node.L;)node=node.L;return node}function d3_geom_voronoi(sites,bbox){var x0,y0,circle,site=sites.sort(d3_geom_voronoiVertexOrder).pop();for(d3_geom_voronoiEdges=[
],d3_geom_voronoiCells=new Array(sites.length),d3_geom_voronoiBeaches=new d3_geom_voronoiRedBlackTree,d3_geom_voronoiCircles=new d3_geom_voronoiRedBlackTree;;)if(circle=d3_geom_voronoiFirstCircle,site&&(!circle||site.y<circle.y||site.y===circle.y&&site.x<circle.x))site.x===x0&&site.y===y0||(d3_geom_voronoiCells[site.i]=new d3_geom_voronoiCell(site),d3_geom_voronoiAddBeach(site),x0=site.x,y0=site.y),site=sites.pop();else{if(!circle)break;d3_geom_voronoiRemoveBeach(circle.arc)}bbox&&(function(extent){for(var e,edges=d3_geom_voronoiEdges,clip=d3_geom_clipLine(extent[0][0],extent[0][1],extent[1][0],extent[1][1]),i=edges.length;i--;)(!d3_geom_voronoiConnectEdge(
e=edges[i],extent)||!clip(e)||abs(e.a.x-e.b.x)<&&abs(e.a.y-e.b.y)<)&&(e.a=e.b=null,edges.splice(i,1))}(bbox),function(extent){for(var x2,y2,x3,y3,cell,iHalfEdge,halfEdges,nHalfEdges,start,end,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],cells=d3_geom_voronoiCells,iCell=cells.length;iCell--;)if((cell=cells[iCell])&&cell.prepare())for(nHalfEdges=(halfEdges=cell.edges).length,iHalfEdge=0;iHalfEdge<nHalfEdges;)x3=(end=halfEdges[iHalfEdge].end()).x,y3=end.y,x2=(start=halfEdges[++iHalfEdge%nHalfEdges].start()).x,y2=start.y,(abs(x3-x2)>||abs(y3-y2)>)&&(halfEdges.splice(iHalfEdge,0,new d3_geom_voronoiHalfEdge((lSite=cell.site,va=end,vb=abs(
x3-x0)<&&<y1-y3?{x:x0,y:abs(x2-x0)<?y2:y1}:abs(y3-y1)<&&<x1-x3?{x:abs(y2-y1)<?x2:x1,y:y1}:abs(x3-x1)<&&<y3-y0?{x:x1,y:abs(x2-x1)<?y2:y0}:abs(y3-y0)<&&<x3-x0?{x:abs(y2-y0)<?x2:x0,y:y0}:null,edge=void 0,edge=new d3_geom_voronoiEdge(lSite,null),edge.a=va,edge.b=vb,d3_geom_voronoiEdges.push(edge),edge),cell.site,null)),++nHalfEdges);var lSite,va,vb,edge}(bbox));var diagram={cells:d3_geom_voronoiCells,edges:d3_geom_voronoiEdges};return d3_geom_voronoiBeaches=d3_geom_voronoiCircles=d3_geom_voronoiEdges=d3_geom_voronoiCells=null,diagram}function d3_geom_voronoiVertexOrder(a,b){return b.y-a.y||b.x-a.x}d3_geom_voronoiCell.prototype.prepare=function(){for(
var edge,halfEdges=this.edges,iHalfEdge=halfEdges.length;iHalfEdge--;)(edge=halfEdges[iHalfEdge].edge).b&&edge.a||halfEdges.splice(iHalfEdge,1);return halfEdges.sort(d3_geom_voronoiHalfEdgeOrder),halfEdges.length},d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d3_geom_voronoiRedBlackTree.prototype={insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after
}else parent=this._?(after=d3_geom_voronoiRedBlackFirst(this._),node.P=null,(node.N=after).P=after.L=node,after):(node.P=node.N=null,this._=node,null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)parent===(grandpa=parent.U).L?(uncle=grandpa.R)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(d3_geom_voronoiRedBlackRotateLeft(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateRight(this,grandpa)):(uncle=grandpa.L)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(d3_geom_voronoiRedBlackRotateRight(this,parent),parent=(after=parent
).U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,grandpa)),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;if(next=left?right?d3_geom_voronoiRedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,((next.L=left).U=next)!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,(next.R=right).U=next):(next.U=parent,node=(parent=next).R)):(red=node.C,node=next),node&&(node.U=parent),!red)if(node&&node.C)node.C=!1;else{do{if(
node===this._)break;if(node===parent.L){if((sibling=parent.R).C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,d3_geom_voronoiRedBlackRotateLeft(this,parent),node=this._;break}}else if((sibling=parent.L).C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,
d3_geom_voronoiRedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,d3_geom_voronoiRedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,parent=(node=parent).U}while(!node.C);node&&(node.C=!1)}}},d3.geom.voronoi=function(points){var x=d3_geom_pointX,y=d3_geom_pointY,fx=x,fy=y,clipExtent=d3_geom_voronoiClipExtent;if(points)return voronoi(points);function voronoi(data){var polygons=new Array(data.length),x0=clipExtent[0][0],y0=clipExtent[0][1],x1=clipExtent[1][0],y1=clipExtent[1][1];return d3_geom_voronoi(sites(data),clipExtent).cells.forEach(function(cell,i){var edges=cell.edges,site=cell.site;(
polygons[i]=edges.length?edges.map(function(e){var s=e.start();return[s.x,s.y]}):site.x>=x0&&site.x<=x1&&site.y>=y0&&site.y<=y1?[[x0,y1],[x1,y1],[x1,y0],[x0,y0]]:[]).point=data[i]}),polygons}function sites(data){return data.map(function(d,i){return{x:Math.round(fx(d,i)/)*,y:Math.round(fy(d,i)/)*,i:i}})}return voronoi.links=function(data){return d3_geom_voronoi(sites(data)).edges.filter(function(edge){return edge.l&&edge.r}).map(function(edge){return{source:data[edge.l.i],target:data[edge.r.i]}})},voronoi.triangles=function(data){var triangles=[];return d3_geom_voronoi(sites(data)).cells.forEach(function(cell,i){for(var s0,a,b,c,site=cell.site,
edges=cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),j=-1,m=edges.length,e1=edges[m-1].edge,s1=e1.l===site?e1.r:e1.l;++j<m;)e1,s0=s1,s1=(e1=edges[j].edge).l===site?e1.r:e1.l,i<s0.i&&i<s1.i&&(b=s0,c=s1,((a=site).x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)<0)&&triangles.push([data[i],data[s0.i],data[s1.i]])}),triangles},voronoi.x=function(_){return arguments.length?(fx=d3_functor(x=_),voronoi):x},voronoi.y=function(_){return arguments.length?(fy=d3_functor(y=_),voronoi):y},voronoi.clipExtent=function(_){return arguments.length?(clipExtent=null==_?d3_geom_voronoiClipExtent:_,voronoi):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent},voronoi.size=function(_){
return arguments.length?voronoi.clipExtent(_&&[[0,0],_]):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent&&clipExtent[1]},voronoi};var d3_geom_voronoiClipExtent=[[-1e6,-1e6],[1e6,1e6]];function d3_geom_quadtreeCompatX(d){return d.x}function d3_geom_quadtreeCompatY(d){return d.y}function d3_interpolateRgb(a,b){a=d3.rgb(a),b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}function d3_interpolateObject(a,b){var k,i={},c={};for(k in a)k in b?i[k]=d3_interpolate(a[k],b[k]):c[k]=a[k];for(k in b)k in a||(c[k]=b[k])
;return function(t){for(k in i)c[k]=i[k](t);return c}}function d3_interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function d3_interpolateString(a,b){var am,bm,bs,bi=d3_interpolate_numberA.lastIndex=d3_interpolate_numberB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=d3_interpolate_numberA.exec(a))&&(bm=d3_interpolate_numberB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:d3_interpolateNumber(am,bm)})),bi=d3_interpolate_numberB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?(b=q[0].x,function(t){
return b(t)+""}):function(){return b}:(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}d3.geom.delaunay=function(vertices){return d3.geom.voronoi().triangles(vertices)},d3.geom.quadtree=function(points,x1,y1,x2,y2){var compat,x=d3_geom_pointX,y=d3_geom_pointY;if(compat=arguments.length)return x=d3_geom_quadtreeCompatX,y=d3_geom_quadtreeCompatY,3===compat&&(y2=y1,x2=x1,y1=x1=0),quadtree(points);function quadtree(data){var d,xs,ys,i,n,x1_,y1_,x2_,y2_,fx=d3_functor(x),fy=d3_functor(y);if(null!=x1)x1_=x1,y1_=y1,x2_=x2,y2_=y2;else if(x2_=y2_=-(x1_=y1_=1/0),xs=[],ys=[],n=data.length,compat)for(i=0;i<n;++i)(d=data[i]).x<x1_&&(
x1_=d.x),d.y<y1_&&(y1_=d.y),d.x>x2_&&(x2_=d.x),d.y>y2_&&(y2_=d.y),xs.push(d.x),ys.push(d.y);else for(i=0;i<n;++i){var x_=+fx(d=data[i],i),y_=+fy(d,i);x_<x1_&&(x1_=x_),y_<y1_&&(y1_=y_),x2_<x_&&(x2_=x_),y2_<y_&&(y2_=y_),xs.push(x_),ys.push(y_)}var dx=x2_-x1_,dy=y2_-y1_;function insert(n,d,x,y,x1,y1,x2,y2){if(!isNaN(x)&&!isNaN(y))if(n.leaf){var nx=n.x,ny=n.y;if(null!=nx)if(abs(nx-x)+abs(ny-y)<.01)insertChild(n,d,x,y,x1,y1,x2,y2);else{var nPoint=n.point;n.x=n.y=n.point=null,insertChild(n,nPoint,nx,ny,x1,y1,x2,y2),insertChild(n,d,x,y,x1,y1,x2,y2)}else n.x=x,n.y=y,n.point=d}else insertChild(n,d,x,y,x1,y1,x2,y2)}function insertChild(n,d,x,y,x1,y1,x2,y2){var xm=.5*(
x1+x2),ym=.5*(y1+y2),right=xm<=x,below=ym<=y,i=below<<1|right;n.leaf=!1,right?x1=xm:x2=xm,below?y1=ym:y2=ym,insert(n=n.nodes[i]||(n.nodes[i]={leaf:!0,nodes:[],point:null,x:null,y:null}),d,x,y,x1,y1,x2,y2)}dy<dx?y2_=y1_+dx:x2_=x1_+dy;var root={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(d){insert(root,d,+fx(d,++i),+fy(d,i),x1_,y1_,x2_,y2_)}};if(root.visit=function(f){!function d3_geom_quadtreeVisit(f,node,x1,y1,x2,y2){if(!f(node,x1,y1,x2,y2)){var sx=.5*(x1+x2),sy=.5*(y1+y2),children=node.nodes;children[0]&&d3_geom_quadtreeVisit(f,children[0],x1,y1,sx,sy),children[1]&&d3_geom_quadtreeVisit(f,children[1],sx,y1,x2,sy),
children[2]&&d3_geom_quadtreeVisit(f,children[2],x1,sy,sx,y2),children[3]&&d3_geom_quadtreeVisit(f,children[3],sx,sy,x2,y2)}}(f,root,x1_,y1_,x2_,y2_)},root.find=function(point){return function(root,x,y,x0,y0,x3,y3){var closestPoint,minDistance2=1/0;return function find(node,x1,y1,x2,y2){if(!(x3<x1||y3<y1||x2<x0||y2<y0)){if(point=node.point){var point,dx=x-node.x,dy=y-node.y,distance2=dx*dx+dy*dy;if(distance2<minDistance2){var distance=Math.sqrt(minDistance2=distance2);x0=x-distance,y0=y-distance,x3=x+distance,y3=y+distance,closestPoint=point}}for(var children=node.nodes,xm=.5*(x1+x2),ym=.5*(y1+y2),i=(ym<=y)<<1|xm<=x,j=i+4;i<j;++i)if(node=children[3&i]
)switch(3&i){case 0:find(node,x1,y1,xm,ym);break;case 1:find(node,xm,y1,x2,ym);break;case 2:find(node,x1,ym,xm,y2);break;case 3:find(node,xm,ym,x2,y2)}}}(root,x0,y0,x3,y3),closestPoint}(root,point[0],point[1],x1_,y1_,x2_,y2_)},i=-1,null==x1){for(;++i<n;)insert(root,data[i],xs[i],ys[i],x1_,y1_,x2_,y2_);--i}else data.forEach(root.add);return xs=ys=data=d=null,root}return quadtree.x=function(_){return arguments.length?(x=_,quadtree):x},quadtree.y=function(_){return arguments.length?(y=_,quadtree):y},quadtree.extent=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=+_[0][0],y1=+_[0][1],x2=+_[1][0],y2=+_[1][1]),quadtree):null==x1?null:[[x1,y1],[x2
,y2]]},quadtree.size=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=y1=0,x2=+_[0],y2=+_[1]),quadtree):null==x1?null:[x2-x1,y2-y1]},quadtree},d3.interpolateRgb=d3_interpolateRgb,d3.interpolateObject=d3_interpolateObject,d3.interpolateNumber=d3_interpolateNumber,d3.interpolateString=d3_interpolateString;var d3_interpolate_numberA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d3_interpolate_numberB=new RegExp(d3_interpolate_numberA.source,"g");function d3_interpolate(a,b){for(var f,i=d3.interpolators.length;0<=--i&&!(f=d3.interpolators[i](a,b)););return f}function d3_interpolateArray(a,b){var i,x=[],c=[],na=a.length,nb=b.length,n0=Math.min(
a.length,b.length);for(i=0;i<n0;++i)x.push(d3_interpolate(a[i],b[i]));for(;i<na;++i)c[i]=a[i];for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<n0;++i)c[i]=x[i](t);return c}}d3.interpolate=d3_interpolate,d3.interpolators=[function(a,b){var t=typeof b;return("string"===t?d3_rgb_names.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_color?d3_interpolateRgb:Array.isArray(b)?d3_interpolateArray:"object"===t&&isNaN(b)?d3_interpolateObject:d3_interpolateNumber)(a,b)}],d3.interpolateArray=d3_interpolateArray;var d3_ease_default=function(){return d3_identity},d3_ease=d3.map({linear:d3_ease_default,
poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:function(a,p){var s;arguments.length<2&&(p=.45);s=arguments.length?p/*Math.asin(1/a):(a=1,p/4);return function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*/p)}},back:function(s){s||(s=1.70158);return function(t){return t*t*((s+1)*t-s)}},bounce:function(){return d3_ease_bounce}}),d3_ease_mode=d3.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(
d3_ease_reverse(f))}});function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(t<.5?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(t<=0)return 0;if(1<=t)return 1;var t2=t*t,t3=t2*t;return 4*(t<.5?t3:3*(t-t2)+t3-.75)}function d3_ease_sin(t){return 1-Math.cos(t*half)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_bounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(
t-=2.625/2.75)*t+.984375}function d3_interpolateRound(a,b){return b-=a,function(t){return Math.round(a+b*t)}}function d3_transform(m){var a,b,k,r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(((a=r1)[0]+=(k=-kz)*(b=r0)[0],a[1]+=k*b[1],a))||0;r0[0]*r1[1]<r1[0]*r0[1]&&(r0[0]*=-1,r0[1]*=-1,kx*=-1,kz*=-1),this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees,this.translate=[m.e,m.f],this.scale=[kx,ky],this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));return k&&(
a[0]/=k,a[1]/=k),k}d3.ease=function(name){var f,i=name.indexOf("-"),t=0<=i?name.slice(0,i):name,m=0<=i?name.slice(i+1):"in";return t=d3_ease.get(t)||d3_ease_default,m=d3_ease_mode.get(m)||d3_identity,f=m(t.apply(null,d3_arraySlice.call(arguments,1))),function(t){return t<=0?0:1<=t?1:f(t)}},d3.interpolateHcl=function(a,b){a=d3.hcl(a),b=d3.hcl(b);var ah=a.h,ac=a.c,al=a.l,bh=b.h-ah,bc=b.c-ac,bl=b.l-al;isNaN(bc)&&(bc=0,ac=isNaN(ac)?b.c:ac);isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):180<bh?bh-=360:bh<-180&&(bh+=360);return function(t){return d3_hcl_lab(ah+bh*t,ac+bc*t,al+bl*t)+""}},d3.interpolateHsl=function(a,b){a=d3.hsl(a),b=d3.hsl(b);var ah=a.h,as=a.s,al=a.l,
bh=b.h-ah,bs=b.s-as,bl=b.l-al;isNaN(bs)&&(bs=0,as=isNaN(as)?b.s:as);isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):180<bh?bh-=360:bh<-180&&(bh+=360);return function(t){return d3_hsl_rgb(ah+bh*t,as+bs*t,al+bl*t)+""}},d3.interpolateLab=function(a,b){a=d3.lab(a),b=d3.lab(b);var al=a.l,aa=a.a,ab=a.b,bl=b.l-al,ba=b.a-aa,bb=b.b-ab;return function(t){return d3_lab_rgb(al+bl*t,aa+ba*t,ab+bb*t)+""}},d3.interpolateRound=d3_interpolateRound,d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(null!=string){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(
t?t.matrix:d3_transformIdentity)})(string)},d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};function d3_interpolateTransformPop(s){return s.length?s.pop()+",":""}function d3_interpolateTransform(a,b){var s=[],q=[];return a=d3.transform(a),b=d3.transform(b),function(ta,tb,s,q){if(ta[0]!==tb[0]||ta[1]!==tb[1]){var i=s.push("translate(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ta[0],tb[0])},{i:i-2,x:d3_interpolateNumber(ta[1],tb[1])})}else(tb[0]||tb[1])&&s.push("translate("+tb+")")}(a.translate,
b.translate,s,q),function(ra,rb,s,q){ra!==rb?(180<ra-rb?rb+=360:180<rb-ra&&(ra+=360),q.push({i:s.push(d3_interpolateTransformPop(s)+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})):rb&&s.push(d3_interpolateTransformPop(s)+"rotate("+rb+")")}(a.rotate,b.rotate,s,q),function(wa,wb,s,q){wa!==wb?q.push({i:s.push(d3_interpolateTransformPop(s)+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)}):wb&&s.push(d3_interpolateTransformPop(s)+"skewX("+wb+")")}(a.skew,b.skew,s,q),function(ka,kb,s,q){if(ka[0]!==kb[0]||ka[1]!==kb[1]){var i=s.push(d3_interpolateTransformPop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:i-2,
x:d3_interpolateNumber(ka[1],kb[1])})}else 1===kb[0]&&1===kb[1]||s.push(d3_interpolateTransformPop(s)+"scale("+kb+")")}(a.scale,b.scale,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_uninterpolateNumber(a,b){return b=(b-=a=+a)||1/b,function(x){return(x-a)/b}}function d3_uninterpolateClamp(a,b){return b=(b-=a=+a)||1/b,function(x){return Math.max(0,Math.min(1,(x-a)/b))}}function d3_layout_bundlePath(link){for(var start=link.source,end=link.target,lca=function(a,b){if(a===b)return a;var aNodes=d3_layout_bundleAncestors(a),bNodes=d3_layout_bundleAncestors(b),aNode=aNodes.pop(),bNode=bNodes.pop(),
sharedNode=null;for(;aNode===bNode;)sharedNode=aNode,aNode=aNodes.pop(),bNode=bNodes.pop();return sharedNode}(start,end),points=[start];start!==lca;)start=start.parent,points.push(start);for(var k=points.length;end!==lca;)points.splice(k,0,end),end=end.parent;return points}function d3_layout_bundleAncestors(node){for(var ancestors=[],parent=node.parent;null!=parent;)ancestors.push(node),parent=(node=parent).parent;return ancestors.push(node),ancestors}function d3_layout_forceDragstart(d){d.fixed|=2}function d3_layout_forceDragend(d){d.fixed&=-7}function d3_layout_forceMouseover(d){d.fixed|=4,d.px=d.x,d.py=d.y}function d3_layout_forceMouseout(d){d.fixed&=-5}
d3.interpolateTransform=d3_interpolateTransform,d3.layout={},d3.layout.bundle=function(){return function(links){for(var paths=[],i=-1,n=links.length;++i<n;)paths.push(d3_layout_bundlePath(links[i]));return paths}},d3.layout.chord=function(){var chords,groups,matrix,n,sortGroups,sortSubgroups,sortChords,chord={},padding=0;function relayout(){var k,x,x0,i,j,subgroups={},groupSums=[],groupIndex=d3.range(n),subgroupIndex=[];for(chords=[],groups=[],k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),subgroupIndex.push(d3.range(n)),k+=x}for(sortGroups&&groupIndex.sort(function(a,b){return sortGroups(groupSums[a],groupSums[b])}),
sortSubgroups&&subgroupIndex.forEach(function(d,i){d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])})}),k=(-padding*n)/k,x=0,i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[di+"-"+dj]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]},x+=padding}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[i+"-"+j],target=subgroups[j+"-"+i];(source.value||target.value)&&chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}sortChords&&resort()}
function resort(){chords.sort(function(a,b){return sortChords((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}return chord.matrix=function(x){return arguments.length?(n=(matrix=x)&&matrix.length,chords=groups=null,chord):matrix},chord.padding=function(x){return arguments.length?(padding=x,chords=groups=null,chord):padding},chord.sortGroups=function(x){return arguments.length?(sortGroups=x,chords=groups=null,chord):sortGroups},chord.sortSubgroups=function(x){return arguments.length?(sortSubgroups=x,chords=null,chord):sortSubgroups},chord.sortChords=function(x){return arguments.length?(sortChords=x,chords&&resort(),chord):sortChords},
chord.chords=function(){return chords||relayout(),chords},chord.groups=function(){return groups||relayout(),groups},chord},d3.layout.force=function(){var timer,drag,alpha,distances,strengths,charges,force={},event=d3.dispatch("start","tick","end"),size=[1,1],friction=.9,linkDistance=d3_layout_forceLinkDistance,linkStrength=d3_layout_forceLinkStrength,charge=-30,chargeDistance2=d3_layout_forceChargeDistance2,gravity=.1,theta2=.64,nodes=[],links=[];function repulse(node){return function(quad,x1,_,x2){if(quad.point!==node){var dx=quad.cx-node.x,dy=quad.cy-node.y,dw=x2-x1,dn=dx*dx+dy*dy;if(dw*dw/theta2<dn){if(dn<chargeDistance2){var k=quad.charge/dn
;node.px-=dx*k,node.py-=dy*k}return!0}if(quad.point&&dn&&dn<chargeDistance2){k=quad.pointCharge/dn;node.px-=dx*k,node.py-=dy*k}}return!quad.charge}}function dragmove(d){d.px=d3.event.x,d.py=d3.event.y,force.resume()}return force.tick=function(){if((alpha*=.99)<.005)return timer=null,event.end({type:"end",alpha:alpha=0}),!0;var q,i,o,s,t,l,k,x,y,n=nodes.length,m=links.length;for(i=0;i<m;++i)s=(o=links[i]).source,(l=(x=(t=o.target).x-s.x)*x+(y=t.y-s.y)*y)&&(x*=l=alpha*strengths[i]*((l=Math.sqrt(l))-distances[i])/l,y*=l,t.x-=x*(k=s.weight+t.weight?s.weight/(s.weight+t.weight):.5),t.y-=y*k,s.x+=x*(k=1-k),s.y+=y*k);if((k=alpha*gravity)&&(x=size[0]/2,y=size[1]/2,
i=-1,k))for(;++i<n;)(o=nodes[i]).x+=(x-o.x)*k,o.y+=(y-o.y)*k;if(charge)for(!function d3_layout_forceAccumulate(quad,alpha,charges){var cx=0,cy=0;quad.charge=0;if(!quad.leaf)for(var c,nodes=quad.nodes,n=nodes.length,i=-1;++i<n;)null!=(c=nodes[i])&&(d3_layout_forceAccumulate(c,alpha,charges),quad.charge+=c.charge,cx+=c.charge*c.cx,cy+=c.charge*c.cy);if(quad.point){quad.leaf||(quad.point.x+=Math.random()-.5,quad.point.y+=Math.random()-.5);var k=alpha*charges[quad.point.index];quad.charge+=quad.pointCharge=k,cx+=k*quad.point.x,cy+=k*quad.point.y}quad.cx=cx/quad.charge;quad.cy=cy/quad.charge}(q=d3.geom.quadtree(nodes),alpha,charges),i=-1;++i<n;)(o=nodes[i]
).fixed||q.visit(repulse(o));for(i=-1;++i<n;)(o=nodes[i]).fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*friction,o.y-=(o.py-(o.py=o.y))*friction);event.tick({type:"tick",alpha:alpha})},force.nodes=function(x){return arguments.length?(nodes=x,force):nodes},force.links=function(x){return arguments.length?(links=x,force):links},force.size=function(x){return arguments.length?(size=x,force):size},force.linkDistance=function(x){return arguments.length?(linkDistance="function"==typeof x?x:+x,force):linkDistance},force.distance=force.linkDistance,force.linkStrength=function(x){return arguments.length?(linkStrength="function"==typeof x?x:+x,force):linkStrength},
force.friction=function(x){return arguments.length?(friction=+x,force):friction},force.charge=function(x){return arguments.length?(charge="function"==typeof x?x:+x,force):charge},force.chargeDistance=function(x){return arguments.length?(chargeDistance2=x*x,force):Math.sqrt(chargeDistance2)},force.gravity=function(x){return arguments.length?(gravity=+x,force):gravity},force.theta=function(x){return arguments.length?(theta2=x*x,force):Math.sqrt(theta2)},force.alpha=function(x){return arguments.length?(x=+x,alpha?0<x?alpha=x:(timer.c=null,timer.t=NaN,timer=null,event.end({type:"end",alpha:alpha=0})):0<x&&(event.start({type:"start",alpha:alpha=x}),
timer=d3_timer(force.tick)),force):alpha},force.start=function(){var i,neighbors,o,n=nodes.length,m=links.length,w=size[0],h=size[1];for(i=0;i<n;++i)(o=nodes[i]).index=i,o.weight=0;for(i=0;i<m;++i)"number"==typeof(o=links[i]).source&&(o.source=nodes[o.source]),"number"==typeof o.target&&(o.target=nodes[o.target]),++o.source.weight,++o.target.weight;for(i=0;i<n;++i)o=nodes[i],isNaN(o.x)&&(o.x=position("x",w)),isNaN(o.y)&&(o.y=position("y",h)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(distances=[],"function"==typeof linkDistance)for(i=0;i<m;++i)distances[i]=+linkDistance.call(this,links[i],i);else for(i=0;i<m;++i)distances[i]=linkDistance;if(
strengths=[],"function"==typeof linkStrength)for(i=0;i<m;++i)strengths[i]=+linkStrength.call(this,links[i],i);else for(i=0;i<m;++i)strengths[i]=linkStrength;if(charges=[],"function"==typeof charge)for(i=0;i<n;++i)charges[i]=+charge.call(this,nodes[i],i);else for(i=0;i<n;++i)charges[i]=charge;function position(dimension,size){if(!neighbors){for(neighbors=new Array(n),j=0;j<n;++j)neighbors[j]=[];for(j=0;j<m;++j){var o=links[j];neighbors[o.source.index].push(o.target),neighbors[o.target.index].push(o.source)}}for(var x,candidates=neighbors[i],j=-1,l=candidates.length;++j<l;)if(!isNaN(x=candidates[j][dimension]))return x;return Math.random()*size}
return force.resume()},force.resume=function(){return force.alpha(.1)},force.stop=function(){return force.alpha(0)},force.drag=function(){if(drag||(drag=d3.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend)),!arguments.length)return drag;this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(drag)},d3.rebind(force,event,"on")};var d3_layout_forceLinkDistance=20,d3_layout_forceLinkStrength=1,d3_layout_forceChargeDistance2=1/0;function d3_layout_hierarchyRebind(object,hierarchy){return d3.rebind(object,hierarchy,
"sort","children","value"),(object.nodes=object).links=d3_layout_hierarchyLinks,object}function d3_layout_hierarchyVisitBefore(node,callback){for(var nodes=[node];null!=(node=nodes.pop());)if(callback(node),(children=node.children)&&(n=children.length))for(var n,children;0<=--n;)nodes.push(children[n])}function d3_layout_hierarchyVisitAfter(node,callback){for(var nodes=[node],nodes2=[];null!=(node=nodes.pop());)if(nodes2.push(node),(children=node.children)&&(n=children.length))for(var n,children,i=-1;++i<n;)nodes.push(children[i]);for(;null!=(node=nodes2.pop());)callback(node)}function d3_layout_hierarchyChildren(d){return d.children}
function d3_layout_hierarchyValue(d){return d.value}function d3_layout_hierarchySort(a,b){return b.value-a.value}function d3_layout_hierarchyLinks(nodes){return d3.merge(nodes.map(function(parent){return(parent.children||[]).map(function(child){return{source:parent,target:child}})}))}d3.layout.hierarchy=function(){var sort=d3_layout_hierarchySort,children=d3_layout_hierarchyChildren,value=d3_layout_hierarchyValue;function hierarchy(root){var node,stack=[root],nodes=[];for(root.depth=0;null!=(node=stack.pop());)if(nodes.push(node),(childs=children.call(hierarchy,node,node.depth))&&(n=childs.length)){for(var n,childs,child;0<=--n;)stack.push(child=childs[n]),
child.parent=node,child.depth=node.depth+1;value&&(node.value=0),node.children=childs}else value&&(node.value=+value.call(hierarchy,node,node.depth)||0),delete node.children;return d3_layout_hierarchyVisitAfter(root,function(node){var childs,parent;sort&&(childs=node.children)&&childs.sort(sort),value&&(parent=node.parent)&&(parent.value+=node.value)}),nodes}return hierarchy.sort=function(x){return arguments.length?(sort=x,hierarchy):sort},hierarchy.children=function(x){return arguments.length?(children=x,hierarchy):children},hierarchy.value=function(x){return arguments.length?(value=x,hierarchy):value},hierarchy.revalue=function(root){return value&&(
d3_layout_hierarchyVisitBefore(root,function(node){node.children&&(node.value=0)}),d3_layout_hierarchyVisitAfter(root,function(node){var parent;node.children||(node.value=+value.call(hierarchy,node,node.depth)||0),(parent=node.parent)&&(parent.value+=node.value)})),root},hierarchy},d3.layout.partition=function(){var hierarchy=d3.layout.hierarchy(),size=[1,1];function partition(d,i){var nodes=hierarchy.call(this,d,i);return function position(node,x,dx,dy){var children=node.children;if(node.x=x,node.y=node.depth*dy,node.dx=dx,node.dy=dy,children&&(n=children.length)){var n,c,d,i=-1;for(dx=node.value?dx/node.value:0;++i<n;)position(c=children[i],x,d=c.value*dx,
dy),x+=d}}(nodes[0],0,size[0],size[1]/function depth(node){var children=node.children,d=0;if(children&&(n=children.length))for(var n,i=-1;++i<n;)d=Math.max(d,depth(children[i]));return 1+d}(nodes[0])),nodes}return partition.size=function(x){return arguments.length?(size=x,partition):size},d3_layout_hierarchyRebind(partition,hierarchy)},d3.layout.pie=function(){var value=Number,sort=d3_layout_pieSortByValue,startAngle=0,endAngle=,padAngle=0;function pie(data){var v,n=data.length,values=data.map(function(d,i){return+value.call(pie,d,i)}),a=+("function"==typeof startAngle?startAngle.apply(this,arguments):startAngle),da=(
"function"==typeof endAngle?endAngle.apply(this,arguments):endAngle)-a,p=Math.min(Math.abs(da)/n,+("function"==typeof padAngle?padAngle.apply(this,arguments):padAngle)),pa=p*(da<0?-1:1),sum=d3.sum(values),k=sum?(da-n*pa)/sum:0,index=d3.range(n),arcs=[];return null!=sort&&index.sort(sort===d3_layout_pieSortByValue?function(i,j){return values[j]-values[i]}:function(i,j){return sort(data[i],data[j])}),index.forEach(function(i){arcs[i]={data:data[i],value:v=values[i],startAngle:a,endAngle:a+=v*k+pa,padAngle:p}}),arcs}return pie.value=function(_){return arguments.length?(value=_,pie):value},pie.sort=function(_){return arguments.length?(sort=_,pie):sort},
pie.startAngle=function(_){return arguments.length?(startAngle=_,pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle=_,pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle=_,pie):padAngle},pie};var d3_layout_pieSortByValue={};function d3_layout_stackX(d){return d.x}function d3_layout_stackY(d){return d.y}function d3_layout_stackOut(d,y0,y){d.y0=y0,d.y=y}d3.layout.stack=function(){var values=d3_identity,order=d3_layout_stackOrderDefault,offset=d3_layout_stackOffsetZero,out=d3_layout_stackOut,x=d3_layout_stackX,y=d3_layout_stackY;function stack(data,index){if(!(n=data.length))return data;var series=data.map(
function(d,i){return values.call(stack,d,i)}),points=series.map(function(d){return d.map(function(v,i){return[x.call(stack,v,i),y.call(stack,v,i)]})}),orders=order.call(stack,points,index);series=d3.permute(series,orders),points=d3.permute(points,orders);var n,i,j,o,offsets=offset.call(stack,points,index),m=series[0].length;for(j=0;j<m;++j)for(out.call(stack,series[0][j],o=offsets[j],points[0][j][1]),i=1;i<n;++i)out.call(stack,series[i][j],o+=points[i-1][j][1],points[i][j][1]);return data}return stack.values=function(x){return arguments.length?(values=x,stack):values},stack.order=function(x){return arguments.length?(
order="function"==typeof x?x:d3_layout_stackOrders.get(x)||d3_layout_stackOrderDefault,stack):order},stack.offset=function(x){return arguments.length?(offset="function"==typeof x?x:d3_layout_stackOffsets.get(x)||d3_layout_stackOffsetZero,stack):offset},stack.x=function(z){return arguments.length?(x=z,stack):x},stack.y=function(z){return arguments.length?(y=z,stack):y},stack.out=function(z){return arguments.length?(out=z,stack):out},stack};var d3_layout_stackOrders=d3.map({"inside-out":function(data){var i,j,n=data.length,max=data.map(d3_layout_stackMaxIndex),sums=data.map(d3_layout_stackReduceSum),index=d3.range(n).sort(function(a,b){return max[a]-max[b]}),
top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i)j=index[i],top<bottom?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},reverse:function(data){return d3.range(data.length).reverse()},default:d3_layout_stackOrderDefault}),d3_layout_stackOffsets=d3.map({silhouette:function(data){var i,j,o,n=data.length,m=data[0].length,sums=[],max=0,y0=[];for(j=0;j<m;++j){for(o=i=0;i<n;i++)o+=data[i][j][1];max<o&&(max=o),sums.push(o)}for(j=0;j<m;++j)y0[j]=(max-sums[j])/2;return y0},wiggle:function(data){var i,j,k,s1,s2,s3,dx,o,o0,n=data.length,x=data[0],m=x.length,y0=[];for(y0[0]=o=o0=0,j=1;j<m;++j){for(s1=i=0;i<n;++i
)s1+=data[i][j][1];for(s2=i=0,dx=x[j][0]-x[j-1][0];i<n;++i){for(k=0,s3=(data[i][j][1]-data[i][j-1][1])/(2*dx);k<i;++k)s3+=(data[k][j][1]-data[k][j-1][1])/dx;s2+=s3*data[i][j][1]}y0[j]=o-=s1?s2/s1*dx:0,o<o0&&(o0=o)}for(j=0;j<m;++j)y0[j]-=o0;return y0},expand:function(data){var i,j,o,n=data.length,m=data[0].length,k=1/n,y0=[];for(j=0;j<m;++j){for(o=i=0;i<n;i++)o+=data[i][j][1];if(o)for(i=0;i<n;i++)data[i][j][1]/=o;else for(i=0;i<n;i++)data[i][j][1]=k}for(j=0;j<m;++j)y0[j]=0;return y0},zero:d3_layout_stackOffsetZero});function d3_layout_stackOrderDefault(data){return d3.range(data.length)}function d3_layout_stackOffsetZero(data){for(var j=-1,m=data[0].length,
y0=[];++j<m;)y0[j]=0;return y0}function d3_layout_stackMaxIndex(array){for(var k,i=1,j=0,v=array[0][1],n=array.length;i<n;++i)(k=array[i][1])>v&&(j=i,v=k);return j}function d3_layout_stackReduceSum(d){return d.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(p,d){return p+d[1]}function d3_layout_histogramBinSturges(range,values){return d3_layout_histogramBinFixed(range,Math.ceil(Math.log(values.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(range,n){for(var x=-1,b=+range[0],m=(range[1]-b)/n,f=[];++x<=n;)f[x]=m*x+b;return f}function d3_layout_histogramRange(values){return[d3.min(values),d3.max(values)]}function d3_layout_packSort(a,b){
return a.value-b.value}function d3_layout_packInsert(a,b){var c=a._pack_next;(a._pack_next=b)._pack_prev=a,(b._pack_next=c)._pack_prev=b}function d3_layout_packSplice(a,b){(a._pack_next=b)._pack_prev=a}function d3_layout_packIntersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return dx*dx+dy*dy<.999*dr*dr}function d3_layout_packSiblings(node){if((nodes=node.children)&&(n=nodes.length)){var nodes,a,b,c,i,j,k,n,xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;if(nodes.forEach(d3_layout_packLink),(a=nodes[0]).x=-a.r,a.y=0,bound(a),1<n&&((b=nodes[1]).x=b.r,b.y=0,bound(b),2<n))for(d3_layout_packPlace(a,b,c=nodes[2]),bound(c),d3_layout_packInsert(a,c),d3_layout_packInsert(
a._pack_prev=c,b),b=a._pack_next,i=3;i<n;i++){d3_layout_packPlace(a,b,c=nodes[i]);var isect=0,s1=1,s2=1;for(j=b._pack_next;j!==b;j=j._pack_next,s1++)if(d3_layout_packIntersects(j,c)){isect=1;break}if(1==isect)for(k=a._pack_prev;k!==j._pack_prev&&!d3_layout_packIntersects(k,c);k=k._pack_prev,s2++);isect?(s1<s2||s1==s2&&b.r<a.r?d3_layout_packSplice(a,b=j):d3_layout_packSplice(a=k,b),i--):(d3_layout_packInsert(a,c),bound(b=c))}var cx=(xMin+xMax)/2,cy=(yMin+yMax)/2,cr=0;for(i=0;i<n;i++)(c=nodes[i]).x-=cx,c.y-=cy,cr=Math.max(cr,c.r+Math.sqrt(c.x*c.x+c.y*c.y));node.r=cr,nodes.forEach(d3_layout_packUnlink)}function bound(node){xMin=Math.min(node.x-node.r,xMin),
xMax=Math.max(node.x+node.r,xMax),yMin=Math.min(node.y-node.r,yMin),yMax=Math.max(node.y+node.r,yMax)}}function d3_layout_packLink(node){node._pack_next=node._pack_prev=node}function d3_layout_packUnlink(node){delete node._pack_next,delete node._pack_prev}function d3_layout_packPlace(a,b,c){var db=a.r+c.r,dx=b.x-a.x,dy=b.y-a.y;if(db&&(dx||dy)){var da=b.r+c.r,dc=dx*dx+dy*dy,x=.5+((db*=db)-(da*=da))/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=a.x+x*dx+y*dy,c.y=a.y+x*dy-y*dx}else c.x=a.x+db,c.y=a.y}function d3_layout_treeSeparation(a,b){return a.parent==b.parent?1:2}function d3_layout_treeLeft(v){var children=v.children
;return children.length?children[0]:v.t}function d3_layout_treeRight(v){var n,children=v.children;return(n=children.length)?children[n-1]:v.t}function d3_layout_treeMove(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function d3_layout_treeAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function d3_layout_treemapPadNull(node){return{x:node.x,y:node.y,dx:node.dx,dy:node.dy}}function d3_layout_treemapPad(node,padding){var x=node.x+padding[3],y=node.y+padding[0],dx=node.dx-padding[1]-padding[3],dy=node.dy-padding[0]-padding[2];return dx<0&&(x+=dx/2,dx=0),dy<0&&(y+=dy/2,dy=0),{x:x,
y:y,dx:dx,dy:dy}}function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var dx,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(dx=i0,i0=i1,i1=dx,dx=x0,x0=x1,x1=dx),domain[i0]=nice.floor(x0),domain[i1]=nice.ceil(x1),domain}function d3_scale_niceStep(step){
return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}d3.layout.histogram=function(){var frequency=!0,valuer=Number,ranger=d3_layout_histogramRange,binner=d3_layout_histogramBinSturges;function histogram(data,i){for(var bin,x,bins=[],values=data.map(valuer,this),range=ranger.call(this,values,i),thresholds=binner.call(this,range,values,i),n=(i=-1,values.length),m=thresholds.length-1,k=frequency?1:1/n;++i<m;)(bin=bins[i]=[]).dx=thresholds[i+1]-(bin.x=thresholds[i]),bin.y=0;if(0<m)for(i=-1;++i<n;)(x=values[i])>=range[0]&&x<=range[1]&&((bin=bins[d3.bisect(thresholds,x,1,m)-1]).y+=k,
bin.push(data[i]));return bins}return histogram.value=function(x){return arguments.length?(valuer=x,histogram):valuer},histogram.range=function(x){return arguments.length?(ranger=d3_functor(x),histogram):ranger},histogram.bins=function(x){return arguments.length?(binner="number"==typeof x?function(range){return d3_layout_histogramBinFixed(range,x)}:d3_functor(x),histogram):binner},histogram.frequency=function(x){return arguments.length?(frequency=!!x,histogram):frequency},histogram},d3.layout.pack=function(){var radius,hierarchy=d3.layout.hierarchy().sort(d3_layout_packSort),padding=0,size=[1,1];function pack(d,i){var nodes=hierarchy.call(this,d,i),
root=nodes[0],w=size[0],h=size[1],r=null==radius?Math.sqrt:"function"==typeof radius?radius:function(){return radius};if(root.x=root.y=0,d3_layout_hierarchyVisitAfter(root,function(d){d.r=+r(d.value)}),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),padding){var dr=padding*(radius?1:Math.max(2*root.r/w,2*root.r/h))/2;d3_layout_hierarchyVisitAfter(root,function(d){d.r+=dr}),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),d3_layout_hierarchyVisitAfter(root,function(d){d.r-=dr})}return function d3_layout_packTransform(node,x,y,k){var children=node.children;node.x=x+=k*node.x;node.y=y+=k*node.y;node.r*=k;if(children)for(var i=-1,
n=children.length;++i<n;)d3_layout_packTransform(children[i],x,y,k)}(root,w/2,h/2,radius?1:1/Math.max(2*root.r/w,2*root.r/h)),nodes}return pack.size=function(_){return arguments.length?(size=_,pack):size},pack.radius=function(_){return arguments.length?(radius=null==_||"function"==typeof _?_:+_,pack):radius},pack.padding=function(_){return arguments.length?(padding=+_,pack):padding},d3_layout_hierarchyRebind(pack,hierarchy)},d3.layout.tree=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=null;function tree(d,i){var nodes=hierarchy.call(this,d,i),root0=nodes[0],root1=function(root0){
var node1,root1={A:null,children:[root0]},queue=[root1];for(;null!=(node1=queue.pop());)for(var child,children=node1.children,i=0,n=children.length;i<n;++i)queue.push((children[i]=child={_:children[i],parent:node1,children:(child=children[i].children)&&child.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=child);return root1.children[0]}(root0);if(d3_layout_hierarchyVisitAfter(root1,firstWalk),root1.parent.m=-root1.z,d3_layout_hierarchyVisitBefore(root1,secondWalk),nodeSize)d3_layout_hierarchyVisitBefore(root0,sizeNode);else{var left=root0,right=root0,bottom=root0;d3_layout_hierarchyVisitBefore(root0,function(node){node.x<left.x&&(left=node),
node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)});var tx=separation(left,right)/2-left.x,kx=size[0]/(right.x+separation(right,left)/2+tx),ky=size[1]/(bottom.depth||1);d3_layout_hierarchyVisitBefore(root0,function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky})}return nodes}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children.length){!function(v){var w,shift=0,change=0,children=v.children,i=children.length;for(;0<=--i;)(w=children[i]).z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),
v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=function(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=d3_layout_treeRight(vim),vip=d3_layout_treeLeft(vip),vim&&vip;)vom=d3_layout_treeLeft(vom),(vop=d3_layout_treeRight(vop)).a=v,0<(shift=vim.z+sim-vip.z-sip+separation(vim._,vip._))&&(d3_layout_treeMove(d3_layout_treeAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!d3_layout_treeRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!d3_layout_treeLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}
return ancestor}(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function sizeNode(node){node.x*=size[0],node.y=node.depth*size[1]}return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=null==(size=x)?sizeNode:null,tree):nodeSize?null:size},tree.nodeSize=function(x){return arguments.length?(nodeSize=null==(size=x)?null:sizeNode,tree):nodeSize?size:null},d3_layout_hierarchyRebind(tree,hierarchy)},d3.layout.cluster=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1]
,nodeSize=!1;function cluster(d,i){var previousNode,nodes=hierarchy.call(this,d,i),root=nodes[0],x=0;d3_layout_hierarchyVisitAfter(root,function(node){var children=node.children;children&&children.length?(node.x=function(children){return children.reduce(function(x,child){return x+child.x},0)/children.length}(children),node.y=function(children){return 1+d3.max(children,function(child){return child.y})}(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)});var left=function d3_layout_clusterLeft(node){var children=node.children;return children&&children.length?d3_layout_clusterLeft(children[0]):node}(root),
right=function d3_layout_clusterRight(node){var n,children=node.children;return children&&(n=children.length)?d3_layout_clusterRight(children[n-1]):node}(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return d3_layout_hierarchyVisitAfter(root,nodeSize?function(node){node.x=(node.x-root.x)*size[0],node.y=(root.y-node.y)*size[1]}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0],node.y=(1-(root.y?node.y/root.y:1))*size[1]}),nodes}return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=null==(size=x),cluster):nodeSize?null:size},
cluster.nodeSize=function(x){return arguments.length?(nodeSize=null!=(size=x),cluster):nodeSize?size:null},d3_layout_hierarchyRebind(cluster,hierarchy)},d3.layout.treemap=function(){var stickies,hierarchy=d3.layout.hierarchy(),round=Math.round,size=[1,1],padding=null,pad=d3_layout_treemapPadNull,sticky=!1,mode="squarify",ratio=.5*(1+Math.sqrt(5));function scale(children,k){for(var child,area,i=-1,n=children.length;++i<n;)area=(child=children[i]).value*(k<0?0:k),child.area=isNaN(area)||area<=0?0:area}function squarify(node){var children=node.children;if(children&&children.length){var child,score,n,rect=pad(node),row=[],remaining=children.slice(),best=1/0,
u="slice"===mode?rect.dx:"dice"===mode?rect.dy:"slice-dice"===mode?1&node.depth?rect.dy:rect.dx:Math.min(rect.dx,rect.dy);for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;0<(n=remaining.length);)row.push(child=remaining[n-1]),row.area+=child.area,best="squarify"!==mode||(score=worst(row,u))<=best?(remaining.pop(),score):(row.area-=row.pop().area,position(row,u,rect,!1),u=Math.min(rect.dx,rect.dy),row.length=row.area=0,1/0);row.length&&(position(row,u,rect,!0),row.length=row.area=0),children.forEach(squarify)}}function stickify(node){var children=node.children;if(children&&children.length){var child,rect=pad(node),remaining=children.slice(),row=[]
;for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;child=remaining.pop();)row.push(child),row.area+=child.area,null!=child.z&&(position(row,child.z?rect.dx:rect.dy,rect,!remaining.length),row.length=row.area=0);children.forEach(stickify)}}function worst(row,u){for(var r,s=row.area,rmax=0,rmin=1/0,i=-1,n=row.length;++i<n;)(r=row[i].area)&&(r<rmin&&(rmin=r),rmax<r&&(rmax=r));return u*=u,(s*=s)?Math.max(u*rmax*ratio/s,s/(u*rmin*ratio)):1/0}function position(row,u,rect,flush){var o,i=-1,n=row.length,x=rect.x,y=rect.y,v=u?round(row.area/u):0;if(u==rect.dx){for((flush||v>rect.dy)&&(v=rect.dy);++i<n;)(o=row[i]).x=x,o.y=y,o.dy=v,x+=o.dx=Math.min(
rect.x+rect.dx-x,v?round(o.area/v):0);o.z=!0,o.dx+=rect.x+rect.dx-x,rect.y+=v,rect.dy-=v}else{for((flush||v>rect.dx)&&(v=rect.dx);++i<n;)(o=row[i]).x=x,o.y=y,o.dx=v,y+=o.dy=Math.min(rect.y+rect.dy-y,v?round(o.area/v):0);o.z=!1,o.dy+=rect.y+rect.dy-y,rect.x+=v,rect.dx-=v}}function treemap(d){var nodes=stickies||hierarchy(d),root=nodes[0];return root.x=root.y=0,root.value?(root.dx=size[0],root.dy=size[1]):root.dx=root.dy=0,stickies&&hierarchy.revalue(root),scale([root],root.dx*root.dy/root.value),(stickies?stickify:squarify)(root),sticky&&(stickies=nodes),nodes}return treemap.size=function(x){return arguments.length?(size=x,treemap):size},
treemap.padding=function(x){if(!arguments.length)return padding;function padConstant(node){return d3_layout_treemapPad(node,x)}var type;return pad=null==(padding=x)?d3_layout_treemapPadNull:"function"==(type=typeof x)?function(node){var p=x.call(treemap,node,node.depth);return null==p?d3_layout_treemapPadNull(node):d3_layout_treemapPad(node,"number"==typeof p?[p,p,p,p]:p)}:("number"===type&&(x=[x,x,x,x]),padConstant),treemap},treemap.round=function(x){return arguments.length?(round=x?Math.round:Number,treemap):round!=Number},treemap.sticky=function(x){return arguments.length?(sticky=x,stickies=null,treemap):sticky},treemap.ratio=function(x){
return arguments.length?(ratio=x,treemap):ratio},treemap.mode=function(x){return arguments.length?(mode=x+"",treemap):mode},d3_layout_hierarchyRebind(treemap,hierarchy)},d3.random={normal:function(,){var n=arguments.length;return n<2&&(=1),n<1&&(=0),function(){for(var x,y,r;!(r=(x=2*Math.random()-1)*x+(y=2*Math.random()-1)*y)||1<r;);return +*x*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var random=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(random())}},bates:function(m){var random=d3.random.irwinHall(m);return function(){return random()/m}},irwinHall:function(m){return function(){for(var s=0,j=0;j<m;j++)s+=Math.random(
);return s}}},d3.scale={};var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;for(domain[k]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++j<=k;)u.push(uninterpolate(domain[j-1],domain[j])),i.push(interpolate(range[j-1],range[j]));return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){return d3_scale_nice(domain,
d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2])),d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2])),domain}function d3_scale_linearTickRange(domain,m){null==m&&(m=10);var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;return err<=.15?step*=10:err<=.35?step*=5:err<=.75&&(step*=2),extent[0]=Math.ceil(extent[0]/step)*step,extent[1]=Math.floor(extent[1]/step)*step+.5*step,extent[2]=step,extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){
var range=d3_scale_linearTickRange(domain,m);if(format){var match=d3_format_re.exec(format);if(match.shift(),"s"===match[8]){var prefix=d3.formatPrefix(Math.max(abs(range[0]),abs(range[1])));return match[7]||(match[7]="."+d3_scale_linearPrecision(prefix.scale(range[2]))),match[8]="f",format=d3.format(match.join("")),function(d){return format(prefix.scale(d))+prefix.symbol}}match[7]||(match[7]="."+function(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(abs(range[0]),abs(range[1]))))+ +("e"!==type):p-2*("%"===type)}(match[8],range)),format=match.join("")
}else format=",."+d3_scale_linearPrecision(range[2])+"f";return d3.format(format)}d3.scale.linear=function(){return function d3_scale_linear(domain,range,interpolate,clamp){var output,input;function rescale(){var linear=2<Math.min(domain.length,range.length)?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;return output=linear(domain,range,uninterpolate,interpolate),input=linear(range,domain,uninterpolate,d3_interpolate),scale}function scale(x){return output(x)}scale.invert=function(y){return input(y)};scale.domain=function(x){return arguments.length?(domain=x.map(Number),rescale()):domain}
;scale.range=function(x){return arguments.length?(range=x,rescale()):range};scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)};scale.clamp=function(x){return arguments.length?(clamp=x,rescale()):clamp};scale.interpolate=function(x){return arguments.length?(interpolate=x,rescale()):interpolate};scale.ticks=function(m){return d3_scale_linearTicks(domain,m)};scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};scale.nice=function(m){return d3_scale_linearNice(domain,m),rescale()};scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)};return rescale()}([0,1],[0,1],
d3_interpolate,!1)};var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}d3.scale.log=function(){return function d3_scale_log(linear,base,positive,domain){function log(x){return(positive?Math.log(x<0?0:x):-Math.log(0<x?0:-x))/Math.log(base)}function pow(x){return positive?Math.pow(base,x):-Math.pow(base,-x)}function scale(x){return linear(log(x))}scale.invert=function(x){return pow(linear.invert(x))};scale.domain=function(x){return arguments.length?(positive=0<=x[0],linear.domain((domain=x.map(Number)).map(log)),scale):domain};scale.base=function(_){
return arguments.length?(base=+_,linear.domain(domain.map(log)),scale):base};scale.nice=function(){var niced=d3_scale_nice(domain.map(log),positive?Math:d3_scale_logNiceNegative);return linear.domain(niced),domain=niced.map(pow),scale};scale.ticks=function(){var extent=d3_scaleExtent(domain),ticks=[],u=extent[0],v=extent[1],i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base;if(isFinite(j-i)){if(positive){for(;i<j;i++)for(var k=1;k<n;k++)ticks.push(pow(i)*k);ticks.push(pow(i))}else for(ticks.push(pow(i));i++<j;)for(var k=n-1;0<k;k--)ticks.push(pow(i)*k);for(i=0;ticks[i]<u;i++);for(j=ticks.length;ticks[j-1]>v;j--);ticks=ticks.slice(i,j)}return ticks}
;scale.tickFormat=function(n,format){if(!arguments.length)return d3_scale_logFormat;arguments.length<2?format=d3_scale_logFormat:"function"!=typeof format&&(format=d3.format(format));var k=Math.max(1,base*n/scale.ticks().length);return function(d){var i=d/pow(Math.round(log(d)));return i*base<base-.5&&(i*=base),i<=k?format(d):""}};scale.copy=function(){return d3_scale_log(linear.copy(),base,positive,domain)};return d3_scale_linearRebind(scale,linear)}(d3.scale.linear().domain([0,1]),10,!0,[1,10])};var d3_scale_logFormat=d3.format(".0e"),d3_scale_logNiceNegative={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}}
;function d3_scale_powPow(e){return function(x){return x<0?-Math.pow(-x,e):Math.pow(x,e)}}d3.scale.pow=function(){return function d3_scale_pow(linear,exponent,domain){var powp=d3_scale_powPow(exponent),powb=d3_scale_powPow(1/exponent);function scale(x){return linear(powp(x))}scale.invert=function(x){return powb(linear.invert(x))};scale.domain=function(x){return arguments.length?(linear.domain((domain=x.map(Number)).map(powp)),scale):domain};scale.ticks=function(m){return d3_scale_linearTicks(domain,m)};scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};scale.nice=function(m){return scale.domain(d3_scale_linearNice(domain,m
))};scale.exponent=function(x){return arguments.length?(powp=d3_scale_powPow(exponent=x),powb=d3_scale_powPow(1/exponent),linear.domain(domain.map(powp)),scale):exponent};scale.copy=function(){return d3_scale_pow(linear.copy(),exponent,domain)};return d3_scale_linearRebind(scale,linear)}(d3.scale.linear(),1,[0,1])},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return function d3_scale_ordinal(domain,ranger){var index,range,rangeBand;function scale(x){return range[((index.get(x)||("range"===ranger.t?index.set(x,domain.push(x)):NaN))-1)%range.length]}function steps(start,step){return d3.range(domain.length).map(
function(i){return start+step*i})}scale.domain=function(x){if(!arguments.length)return domain;domain=[],index=new d3_Map;for(var xi,i=-1,n=x.length;++i<n;)index.has(xi=x[i])||index.set(xi,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)};scale.range=function(x){return arguments.length?(range=x,rangeBand=0,ranger={t:"range",a:arguments},scale):range};scale.rangePoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=(start+stop)/2,0):(stop-start)/(domain.length-1+padding);return range=steps(start+step*padding/2,step),rangeBand=0,ranger={t:"rangePoints",a:arguments},scale}
;scale.rangeRoundPoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=stop=Math.round((start+stop)/2),0):(stop-start)/(domain.length-1+padding)|0;return range=steps(start+Math.round(step*padding/2+(stop-start-(domain.length-1+padding)*step)/2),step),rangeBand=0,ranger={t:"rangeRoundPoints",a:arguments},scale};scale.rangeBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);return range=steps(start+step*outerPadding,step),
reverse&&range.reverse(),rangeBand=step*(1-padding),ranger={t:"rangeBands",a:arguments},scale};scale.rangeRoundBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding));return range=steps(start+Math.round((stop-start-(domain.length-padding)*step)/2),step),reverse&&range.reverse(),rangeBand=Math.round(step*(1-padding)),ranger={t:"rangeRoundBands",a:arguments},scale};scale.rangeBand=function(){return rangeBand};scale.rangeExtent=function(){return d3_scaleExtent(ranger.a[0])}
;scale.copy=function(){return d3_scale_ordinal(domain,ranger)};return scale.domain(domain)}([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(d3_category10)},d3.scale.category20=function(){return d3.scale.ordinal().range(d3_category20)},d3.scale.category20b=function(){return d3.scale.ordinal().range(d3_category20b)},d3.scale.category20c=function(){return d3.scale.ordinal().range(d3_category20c)};var d3_category10=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString),d3_category20=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,
9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString),d3_category20b=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString),d3_category20c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);function d3_zero(){return 0}d3.scale.quantile=function(){return function d3_scale_quantile(domain,range){var thresholds;function rescale(){
var k=0,q=range.length;for(thresholds=[];++k<q;)thresholds[k-1]=d3.quantile(domain,k/q);return scale}function scale(x){if(!isNaN(x=+x))return range[d3.bisect(thresholds,x)]}scale.domain=function(x){return arguments.length?(domain=x.map(d3_number).filter(d3_numeric).sort(d3_ascending),rescale()):domain};scale.range=function(x){return arguments.length?(range=x,rescale()):range};scale.quantiles=function(){return thresholds};scale.invertExtent=function(y){return(y=range.indexOf(y))<0?[NaN,NaN]:[0<y?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]};scale.copy=function(){return d3_scale_quantile(domain,range)};return rescale()}(
[],[])},d3.scale.quantize=function(){return function d3_scale_quantize(x0,x1,range){var kx,i;function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){return kx=range.length/(x1-x0),i=range.length-1,scale}scale.domain=function(x){return arguments.length?(x0=+x[0],x1=+x[x.length-1],rescale()):[x0,x1]};scale.range=function(x){return arguments.length?(range=x,rescale()):range};scale.invertExtent=function(y){return[y=(y=range.indexOf(y))<0?NaN:y/kx+x0,y+1/kx]};scale.copy=function(){return d3_scale_quantize(x0,x1,range)};return rescale()}(0,1,[0,1])},d3.scale.threshold=function(){return function d3_scale_threshold(domain,
range){function scale(x){if(x<=x)return range[d3.bisect(domain,x)]}scale.domain=function(_){return arguments.length?(domain=_,scale):domain};scale.range=function(_){return arguments.length?(range=_,scale):range};scale.invertExtent=function(y){return y=range.indexOf(y),[domain[y-1],domain[y]]};scale.copy=function(){return d3_scale_threshold(domain,range)};return scale}([.5],[0,1])},d3.scale.identity=function(){return function d3_scale_identity(domain){function identity(x){return+x}identity.invert=identity;identity.domain=identity.range=function(x){return arguments.length?(domain=x.map(identity),identity):domain};identity.ticks=function(m){
return d3_scale_linearTicks(domain,m)};identity.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};identity.copy=function(){return d3_scale_identity(domain)};return identity}([0,1])},d3.svg={},d3.svg.arc=function(){var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,cornerRadius=d3_zero,padRadius=d3_svg_arcAuto,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle,padAngle=d3_svg_arcPadAngle;function arc(){var r0=Math.max(0,+innerRadius.apply(this,arguments)),r1=Math.max(0,+outerRadius.apply(this,arguments)),a0=startAngle.apply(this,arguments)-half,a1=endAngle.apply(this,arguments)-half,da=Math.abs(
a1-a0),cw=a1<a0?0:1;if(r1<r0&&(rc=r1,r1=r0,r0=rc),<=da)return circleSegment(r1,cw)+(r0?circleSegment(r0,1-cw):"")+"Z";var rc,cr,rp,ap,x0,y0,x1,y1,x2,y2,x3,y3,p0=0,p1=0,path=[];if((ap=(+padAngle.apply(this,arguments)||0)/2)&&(rp=padRadius===d3_svg_arcAuto?Math.sqrt(r0*r0+r1*r1):+padRadius.apply(this,arguments),cw||(p1*=-1),r1&&(p1=d3_asin(rp/r1*Math.sin(ap))),r0&&(p0=d3_asin(rp/r0*Math.sin(ap)))),r1){x0=r1*Math.cos(a0+p1),y0=r1*Math.sin(a0+p1),x1=r1*Math.cos(a1-p1),y1=r1*Math.sin(a1-p1);var l1=Math.abs(a1-a0-2*p1)<=?0:1;if(p1&&d3_svg_arcSweep(x0,y0,x1,y1)===cw^l1){var h1=(a0+a1)/2;x0=r1*Math.cos(h1),y0=r1*Math.sin(h1),x1=y1=null}}else x0=y0=0;if(r0){
x2=r0*Math.cos(a1-p0),y2=r0*Math.sin(a1-p0),x3=r0*Math.cos(a0+p0),y3=r0*Math.sin(a0+p0);var l0=Math.abs(a0-a1+2*p0)<=?0:1;if(p0&&d3_svg_arcSweep(x2,y2,x3,y3)===1-cw^l0){var h0=(a0+a1)/2;x2=r0*Math.cos(h0),y2=r0*Math.sin(h0),x3=y3=null}}else x2=y2=0;if(<da&&.001<(rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)))){cr=r0<r1^cw?0:1;var rc1=rc,rc0=rc;if(da<){var oc=null==x3?[x2,y2]:null==x1?[x0,y0]:d3_geom_polygonIntersect([x0,y0],[x3,y3],[x1,y1],[x2,y2]),ax=x0-oc[0],ay=y0-oc[1],bx=x1-oc[0],by=y1-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=Math.min(
rc,(r0-lc)/(kc-1)),rc1=Math.min(rc,(r1-lc)/(kc+1))}if(null!=x1){var t30=d3_svg_arcCornerTangents(null==x3?[x2,y2]:[x3,y3],[x0,y0],r1,rc1,cw),t12=d3_svg_arcCornerTangents([x1,y1],[x2,y2],r1,rc1,cw);rc===rc1?path.push("M",t30[0],"A",rc1,",",rc1," 0 0,",cr," ",t30[1],"A",r1,",",r1," 0 ",1-cw^d3_svg_arcSweep(t30[1][0],t30[1][1],t12[1][0],t12[1][1]),",",cw," ",t12[1],"A",rc1,",",rc1," 0 0,",cr," ",t12[0]):path.push("M",t30[0],"A",rc1,",",rc1," 0 1,",cr," ",t12[0])}else path.push("M",x0,",",y0);if(null!=x3){var t03=d3_svg_arcCornerTangents([x0,y0],[x3,y3],r0,-rc0,cw),t21=d3_svg_arcCornerTangents([x2,y2],null==x1?[x0,y0]:[x1,y1],r0,-rc0,cw);rc===rc0?path.push("L",
t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t21[1],"A",r0,",",r0," 0 ",cw^d3_svg_arcSweep(t21[1][0],t21[1][1],t03[1][0],t03[1][1]),",",1-cw," ",t03[1],"A",rc0,",",rc0," 0 0,",cr," ",t03[0]):path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}else path.push("L",x2,",",y2)}else path.push("M",x0,",",y0),null!=x1&&path.push("A",r1,",",r1," 0 ",l1,",",cw," ",x1,",",y1),path.push("L",x2,",",y2),null!=x3&&path.push("A",r0,",",r0," 0 ",l0,",",1-cw," ",x3,",",y3);return path.push("Z"),path.join("")}function circleSegment(r1,cw){return"M0,"+r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+-r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+r1}return arc.innerRadius=function(v){
return arguments.length?(innerRadius=d3_functor(v),arc):innerRadius},arc.outerRadius=function(v){return arguments.length?(outerRadius=d3_functor(v),arc):outerRadius},arc.cornerRadius=function(v){return arguments.length?(cornerRadius=d3_functor(v),arc):cornerRadius},arc.padRadius=function(v){return arguments.length?(padRadius=v==d3_svg_arcAuto?d3_svg_arcAuto:d3_functor(v),arc):padRadius},arc.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),arc):startAngle},arc.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),arc):endAngle},arc.padAngle=function(v){return arguments.length?(padAngle=d3_functor(v),arc):padAngle},
arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-half;return[Math.cos(a)*r,Math.sin(a)*r]},arc};var d3_svg_arcAuto="auto";function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_svg_arcPadAngle(d){return d&&d.padAngle}function d3_svg_arcSweep(x0,y0,x1,y1){return 0<(x0-x1)*y0-(y0-y1)*x0?0:1}function d3_svg_arcCornerTangents(p0,p1,r1,rc,cw){var x01=p0[0]-p1[0],
y01=p0[1]-p1[1],lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x1=p0[0]+ox,y1=p0[1]+oy,x2=p1[0]+ox,y2=p1[1]+oy,x3=(x1+x2)/2,y3=(y1+y2)/2,dx=x2-x1,dy=y2-y1,d2=dx*dx+dy*dy,r=r1-rc,D=x1*y2-x2*y1,d=(dy<0?-1:1)*Math.sqrt(Math.max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x3,dy0=cy0-y3,dx1=cx1-x3,dy1=cy1-y3;return dx1*dx1+dy1*dy1<dx0*dx0+dy0*dy0&&(cx0=cx1,cy0=cy1),[[cx0-ox,cy0-oy],[cx0*r1/r,cy0*r1/r]]}function d3_svg_line(projection){var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;function line(data){var d,
segments=[],points=[],i=-1,n=data.length,fx=d3_functor(x),fy=d3_functor(y);function segment(){segments.push("M",interpolate(projection(points),tension))}for(;++i<n;)defined.call(this,d=data[i],i)?points.push([+fx.call(this,d,i),+fy.call(this,d,i)]):points.length&&(segment(),points=[]);return points.length&&segment(),segments.length?segments.join(""):null}return line.x=function(_){return arguments.length?(x=_,line):x},line.y=function(_){return arguments.length?(y=_,line):y},line.defined=function(_){return arguments.length?(defined=_,line):defined},line.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(
interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,line):interpolateKey},line.tension=function(_){return arguments.length?(tension=_,line):tension},line}d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:function(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];for(;++i<n;)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);1<n&&path.push("H",p[0]);return path.join("")},"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":function(points){if(points.length<4
)return d3_svg_lineLinear(points);var pi,path=[],i=-1,n=points.length,px=[0],py=[0];for(;++i<3;)pi=points[i],px.push(pi[0]),py.push(pi[1]);path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)),--i;for(;++i<n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")},"basis-closed":function(points){var path,pi,i=-1,n=points.length,m=n+4,px=[],py=[];for(;++i<4;)pi=points[i%n],px.push(pi[0]),py.push(pi[1]);path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)],--i;for(;++i<m;)pi=points[i%n],px.shift(),
px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")},bundle:function(points,tension){var n=points.length-1;if(n)for(var p,t,x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1;++i<=n;)p=points[i],t=i/n,p[0]=tension*p[0]+(1-tension)*(x0+t*dx),p[1]=tension*p[1]+(1-tension)*(y0+t*dy);return d3_svg_lineBasis(points)},cardinal:function(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))},"cardinal-open":function(points,tension){return points.length<4?d3_svg_lineLinear(points
):points[1]+d3_svg_lineHermite(points.slice(1,-1),d3_svg_lineCardinalTangents(points,tension))},"cardinal-closed":function(points,tension){return points.length<3?d3_svg_lineLinearClosed(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))},monotone:function(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,function(points){var d,a,b,s,tangents=[],m=function(points){var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);for(;++i<j;)m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1]
)))/2;return m[i]=d,m}(points),i=-1,j=points.length-1;for(;++i<j;)d=d3_svg_lineSlope(points[i],points[i+1]),abs(d)<?m[i]=m[i+1]=0:(a=m[i]/d,b=m[i+1]/d,9<(s=a*a+b*b)&&(s=3*d/Math.sqrt(s),m[i]=s*a,m[i+1]=s*b));i=-1;for(;++i<=j;)s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i])),tangents.push([s||0,m[i]*s||0]);return tangents}(points))}});function d3_svg_lineLinear(points){return 1<points.length?points.join("L"):points+"Z"}function d3_svg_lineLinearClosed(points){return points.join("L")+"Z"}function d3_svg_lineStepBefore(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("V",(p=points[i])[1],"H",p[0])
;return path.join("")}function d3_svg_lineStepAfter(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2)return d3_svg_lineLinear(points);var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad&&(path+="Q"+(p[0]-2*t0[0]/3)+","+(p[1]-2*t0[1]/3)+","+p[0]+","+p[1],p0=points[1],pi=2),1<tangents.length){t=tangents[1],p=points[pi],pi++,path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(
p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++)p=points[pi],t=tangents[i],path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}if(quad){var lp=points[pi];path+="Q"+(p[0]+2*t[0]/3)+","+(p[1]+2*t[1]/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){for(var p0,tangents=[],a=(1-tension)/2,p1=points[0],p2=points[1],i=1,n=points.length;++i<n;)p0=p1,p1=p2,p2=points[i],tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])]);return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],
py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];for(points.push(points[n-1]);++i<=n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return points.pop(),path.push("L",pi),path.join("")}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}d3_svg_lineInterpolators.forEach(function(key,value){value.key=key,value.closed=/-closed$/.test(key)});var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineBasisBezier(path,x,y){
path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineRadial(points){for(var point,r,a,i=-1,n=points.length;++i<n;)r=(point=points[i])[0],a=point[1]-half,point[0]=r*Math.cos(a),point[1]=r*Math.sin(a);return points}function d3_svg_area(projection){var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,
interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;function area(data){var d,x,y,segments=[],points0=[],points1=[],i=-1,n=data.length,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1);function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}for(;++i<n;)defined.call(this,d=data[i],i)?(points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]),points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])):points0.length&&(segment(),points0=[
],points1=[]);return points0.length&&segment(),segments.length?segments.join(""):null}return area.x=function(_){return arguments.length?(x0=x1=_,area):x1},area.x0=function(_){return arguments.length?(x0=_,area):x0},area.x1=function(_){return arguments.length?(x1=_,area):x1},area.y=function(_){return arguments.length?(y0=y1=_,area):y1},area.y0=function(_){return arguments.length?(y0=_,area):y0},area.y1=function(_){return arguments.length?(y1=_,area):y1},area.defined=function(_){return arguments.length?(defined=_,area):defined},area.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(
interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,interpolateReverse=interpolate.reverse||interpolate,L=interpolate.closed?"M":"L",area):interpolateKey},area.tension=function(_){return arguments.length?(tension=_,area):tension},area}function d3_svg_chordRadius(d){return d.radius}function d3_svg_diagonalProjection(d){return[d.x,d.y]}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);return line.radius=line.x,
delete line.x,line.angle=line.y,delete line.y,line},(d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter).reverse=d3_svg_lineStepBefore,d3.svg.area=function(){return d3_svg_area(d3_identity)},d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);return area.radius=area.x,delete area.x,area.innerRadius=area.x0,delete area.x0,area.outerRadius=area.x1,delete area.x1,area.angle=area.y,delete area.y,area.startAngle=area.y0,delete area.y0,area.endAngle=area.y1,delete area.y1,area},d3.svg.chord=function(){var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;function chord(d,i){
var a,b,s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(b=t,(a=s).a0==b.a0&&a.a1==b.a1?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)-half,a1=endAngle.call(self,subgroup,i)-half;return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(<a)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}return chord.radius=function(v){
return arguments.length?(radius=d3_functor(v),chord):radius},chord.source=function(v){return arguments.length?(source=d3_functor(v),chord):source},chord.target=function(v){return arguments.length?(target=d3_functor(v),chord):target},chord.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),chord):startAngle},chord.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),chord):endAngle},chord},d3.svg.diagonal=function(){var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3]
;return"M"+(p=p.map(projection))[0]+"C"+p[1]+" "+p[2]+" "+p[3]}return diagonal.source=function(x){return arguments.length?(source=d3_functor(x),diagonal):source},diagonal.target=function(x){return arguments.length?(target=d3_functor(x),diagonal):target},diagonal.projection=function(x){return arguments.length?(projection=x,diagonal):projection},diagonal},d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;return diagonal.projection=function(x){return arguments.length?projection_(function(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]-half
;return[r*Math.cos(a),r*Math.sin(a)]}}(projection=x)):projection},diagonal},d3.svg.symbol=function(){var type=d3_svg_symbolType,size=d3_svg_symbolSize;function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}return symbol.type=function(x){return arguments.length?(type=d3_functor(x),symbol):type},symbol.size=function(x){return arguments.length?(size=d3_functor(x),symbol):size},symbol};var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(
size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0 0,"+ry+" "+-rx+",0Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians)
;d3_selectionPrototype.transition=function(name){for(var subgroup,node,id=d3_transitionInheritId||++d3_transitionId,ns=d3_transitionNamespace(name),subgroups=[],transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250},j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&d3_transitionNode(node,i,ns,id,transition),subgroup.push(node)}return d3_transition(subgroups,ns,id)},d3_selectionPrototype.interrupt=function(name){return this.each(null==name?d3_selection_interrupt:d3_selection_interruptNS(d3_transitionNamespace(name)))}
;var d3_selection_interrupt=d3_selection_interruptNS(d3_transitionNamespace());function d3_selection_interruptNS(ns){return function(){var lock,activeId,active;(lock=this[ns])&&(active=lock[activeId=lock.active])&&(active.timer.c=null,active.timer.t=NaN,--lock.count?delete lock[activeId]:delete this[ns],lock.active+=.5,active.event&&active.event.interrupt.call(this,this.__data__,active.index))}}function d3_transition(groups,ns,id){return d3_subclass(groups,d3_transitionPrototype),groups.namespace=ns,groups.id=id,groups}var d3_transitionInheritId,d3_transitionInherit,d3_transitionPrototype=[],d3_transitionId=0;function d3_transition_tween(groups,name,value,
tween){var id=groups.id,ns=groups.namespace;return d3_selection_each(groups,"function"==typeof value?function(node,i,j){node[ns][id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node[ns][id].tween.set(name,value)}))}function d3_transition_text(b){return null==b&&(b=""),function(){this.textContent=b}}function d3_transitionNamespace(name){return null==name?"__transition__":"__transition_"+name+"__"}function d3_transitionNode(node,i,ns,id,inherit){var time,timer,duration,ease,tweens,lock=node[ns]||(node[ns]={active:0,count:0}),transition=lock[id];function start(elapsed){var activeId=lock.active,
active=lock[activeId];for(var cancelId in active&&(active.timer.c=null,active.timer.t=NaN,--lock.count,delete lock[activeId],active.event&&active.event.interrupt.call(node,node.__data__,active.index)),lock)if(+cancelId<id){var cancel=lock[cancelId];cancel.timer.c=null,cancel.timer.t=NaN,--lock.count,delete lock[cancelId]}timer.c=tick,d3_timer(function(){return timer.c&&tick(elapsed||1)&&(timer.c=null,timer.t=NaN),1},0,time),lock.active=id,transition.event&&transition.event.start.call(node,node.__data__,i),tweens=[],transition.tween.forEach(function(key,value){(value=value.call(node,node.__data__,i))&&tweens.push(value)}),ease=transition.ease,
duration=transition.duration}function tick(elapsed){for(var t=elapsed/duration,e=ease(t),n=tweens.length;0<n;)tweens[--n].call(node,e);if(1<=t)return transition.event&&transition.event.end.call(node,node.__data__,i),--lock.count?delete lock[id]:delete node[ns],1}transition||(time=inherit.time,timer=d3_timer(function(elapsed){var delay=transition.delay;if(timer.t=delay+time,delay<=elapsed)return start(elapsed-delay);timer.c=start},0,time),transition=lock[id]={tween:new d3_Map,time:time,timer:timer,delay:inherit.delay,duration:inherit.duration,ease:inherit.ease,index:i},inherit=null,++lock.count)}d3_transitionPrototype.call=d3_selectionPrototype.call,
d3_transitionPrototype.empty=d3_selectionPrototype.empty,d3_transitionPrototype.node=d3_selectionPrototype.node,d3_transitionPrototype.size=d3_selectionPrototype.size,d3.transition=function(selection,name){return selection&&selection.transition?d3_transitionInheritId?selection.transition(name):selection:d3.selection().transition(selection)},(d3.transition.prototype=d3_transitionPrototype).select=function(selector){var subgroup,subnode,node,id=this.id,ns=this.namespace,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(
subnode=selector.call(node,node.__data__,i,j))?("__data__"in node&&(subnode.__data__=node.__data__),d3_transitionNode(subnode,i,ns,id,node[ns][id]),subgroup.push(subnode)):subgroup.push(null)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.selectAll=function(selector){var subgroup,subnodes,node,subnode,transition,id=this.id,ns=this.namespace,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)if(node=group[i]){transition=node[ns][id],subnodes=selector.call(node,node.__data__,i,j),subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;)(
subnode=subnodes[k])&&d3_transitionNode(subnode,k,ns,id,transition),subgroup.push(subnode)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.filter=function(filter){var subgroup,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group,i=0,n=(group=this[j]).length;i<n;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_transition(subgroups,this.namespace,this.id)},d3_transitionPrototype.tween=function(name,tween){var id=this.id,ns=this.namespace;return arguments.length<2?this.node()[ns][id].tween.get(name
):d3_selection_each(this,null==tween?function(node){node[ns][id].tween.remove(name)}:function(node){node[ns][id].tween.set(name,tween)})},d3_transitionPrototype.attr=function(nameNS,value){if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate="transform"==nameNS?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}return d3_transition_tween(this,"attr."+nameNS,value,name.local?function(b){return null==b?attrNullNS:(b+="",function(){var i,a=this.getAttributeNS(name.space,name.local)
;return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}:function(b){return null==b?attrNull:(b+="",function(){var i,a=this.getAttribute(name);return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})})},d3_transitionPrototype.attrTween=function(nameNS,tween){var name=d3.ns.qualify(nameNS);return this.tween("attr."+nameNS,name.local?function(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}:function(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,
f(t))}})},d3_transitionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if("string"!=typeof name){for(priority in n<2&&(value=""),name)this.style(priority,name[priority],value);return this}priority=""}function styleNull(){this.style.removeProperty(name)}return d3_transition_tween(this,"style."+name,value,function(b){return null==b?styleNull:(b+="",function(){var i,a=d3_window(this).getComputedStyle(this,null).getPropertyValue(name);return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})})},d3_transitionPrototype.styleTween=function(name,tween,priority){return arguments.length<3&&(priority=""
),this.tween("style."+name,function(d,i){var f=tween.call(this,d,i,d3_window(this).getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}})},d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)},d3_transitionPrototype.remove=function(){var ns=this.namespace;return this.each("end.transition",function(){var p;this[ns].count<2&&(p=this.parentNode)&&p.removeChild(this)})},d3_transitionPrototype.ease=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].ease:("function"!=typeof value&&(value=d3.ease.apply(
d3,arguments)),d3_selection_each(this,function(node){node[ns][id].ease=value}))},d3_transitionPrototype.delay=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].delay:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node[ns][id].delay=value}))},d3_transitionPrototype.duration=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].duration:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(
value=Math.max(1,value),function(node){node[ns][id].duration=value}))},d3_transitionPrototype.each=function(type,listener){var id=this.id,ns=this.namespace;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;try{d3_transitionInheritId=id,d3_selection_each(this,function(node,i,j){d3_transitionInherit=node[ns][id],type.call(node,node.__data__,i,j)})}finally{d3_transitionInherit=inherit,d3_transitionInheritId=inheritId}}else d3_selection_each(this,function(node){var transition=node[ns][id];(transition.event||(transition.event=d3.dispatch("start","end","interrupt"))).on(type,listener)});return this},
d3_transitionPrototype.transition=function(){for(var subgroup,node,transition,id0=this.id,id1=++d3_transitionId,ns=this.namespace,subgroups=[],j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group,i=0,n=(group=this[j]).length;i<n;i++)(node=group[i])&&d3_transitionNode(node,i,ns,id1,{time:(transition=node[ns][id0]).time,ease:transition.ease,delay:transition.delay+transition.duration,duration:transition.duration}),subgroup.push(node)}return d3_transition(subgroups,ns,id1)},d3.svg.axis=function(){var tickFormat_,scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],
tickValues=null;function axis(g){g.each(function(){var tickTransform,g=d3.select(this),scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy(),ticks=null==tickValues?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=null==tickFormat_?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",),tickExit=d3.transition(tick.exit()).style("opacity",).remove(),tickUpdate=d3.transition(tick.order()).style("opacity",1),tickSpacing=Math.max(innerTickSize,0
)+tickPadding,range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));tickEnter.append("line"),tickEnter.append("text");var x1,x2,y1,y2,lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text"),sign="top"===orient||"left"===orient?-1:1;if("bottom"===orient||"top"===orient?(tickTransform=d3_svg_axisX,x1="x",y1="y",x2="x2",y2="y2",text.attr("dy",sign<0?"0em":".71em").style("text-anchor","middle"),pathUpdate.attr("d",
"M"+range[0]+","+sign*outerTickSize+"V0H"+range[1]+"V"+sign*outerTickSize)):(tickTransform=d3_svg_axisY,x1="y",y1="x",x2="y2",y2="x2",text.attr("dy",".32em").style("text-anchor",sign<0?"end":"start"),pathUpdate.attr("d","M"+sign*outerTickSize+","+range[0]+"H0V"+range[1]+"H"+sign*outerTickSize)),lineEnter.attr(y2,sign*innerTickSize),textEnter.attr(y1,sign*tickSpacing),lineUpdate.attr(x2,0).attr(y2,sign*innerTickSize),textUpdate.attr(x1,0).attr(y1,sign*tickSpacing),scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1,scale0);tickEnter.call(
tickTransform,scale0,scale1),tickUpdate.call(tickTransform,scale1,scale1)})}return axis.scale=function(x){return arguments.length?(scale=x,axis):scale},axis.orient=function(x){return arguments.length?(orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient,axis):orient},axis.ticks=function(){return arguments.length?(tickArguments_=d3_array(arguments),axis):tickArguments_},axis.tickValues=function(x){return arguments.length?(tickValues=x,axis):tickValues},axis.tickFormat=function(x){return arguments.length?(tickFormat_=x,axis):tickFormat_},axis.tickSize=function(x){var n=arguments.length;return n?(innerTickSize=+x,outerTickSize=+arguments[n-1],axis
):innerTickSize},axis.innerTickSize=function(x){return arguments.length?(innerTickSize=+x,axis):innerTickSize},axis.outerTickSize=function(x){return arguments.length?(outerTickSize=+x,axis):outerTickSize},axis.tickPadding=function(x){return arguments.length?(tickPadding=+x,axis):tickPadding},axis.tickSubdivide=function(){return arguments.length&&axis},axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};function d3_svg_axisX(selection,x0,x1){selection.attr("transform",function(d){var v0=x0(d);return"translate("+(isFinite(v0)?v0:x1(d))+",0)"})}function d3_svg_axisY(selection,y0,y1){selection.attr("transform",function(
d){var v0=y0(d);return"translate(0,"+(isFinite(v0)?v0:y1(d))+")"})}d3.svg.brush=function(){var xExtentDomain,yExtentDomain,event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xClamp=!0,yClamp=!0,resizes=d3_svg_brushResizes[0];function brush(g){g.each(function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart),background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),g.selectAll(
".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove(),resize.enter().append("g").attr("class",function(d){return"resize "+d}).style("cursor",function(d){return d3_svg_brushCursor[d]}).append("rect").attr("x",function(d){return/[ew]$/.test(d)?-3:null}).attr("y",function(d){return/^[ns]/.test(d)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),resize.style("display",brush.empty()?"none":null);var range,gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background);x&&(range=d3_scaleRange(x),backgroundUpdate.attr("x"
,range[0]).attr("width",range[1]-range[0]),redrawX(gUpdate)),y&&(range=d3_scaleRange(y),backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]),redrawY(gUpdate)),redraw(gUpdate)})}function redraw(g){g.selectAll(".resize").attr("transform",function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"})}function redrawX(g){g.select(".extent").attr("x",xExtent[0]),g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]),g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){var center,offset,target=this,
eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(target),origin=d3.mouse(target),w=d3.select(d3_window(target)).on("keydown.brush",function(){32==d3.event.keyCode&&(dragging||(center=null,origin[0]-=xExtent[1],origin[1]-=yExtent[1],dragging=2),d3_eventPreventDefault())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==dragging&&(origin[0]+=xExtent[1],origin[1]+=yExtent[1],dragging=0,d3_eventPreventDefault())});if(
d3.event.changedTouches?w.on("touchmove.brush",brushmove).on("touchend.brush",brushend):w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend),g.interrupt().selectAll("*").interrupt(),dragging)origin[0]=xExtent[0]-origin[0],origin[1]=yExtent[0]-origin[1];else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]],origin[0]=xExtent[ex],origin[1]=yExtent[ey]}else d3.event.altKey&&(center=origin.slice());function brushmove(){var point=d3.mouse(target),moved=!1;offset&&(point[0]+=offset[0],point[1]+=offset[1]),dragging||(d3.event.altKey?(center||(center=[(xExtent[0]+xExtent[1])/2,(
yExtent[0]+yExtent[1])/2]),origin[0]=xExtent[+(point[0]<center[0])],origin[1]=yExtent[+(point[1]<center[1])]):center=null),resizingX&&move1(point,x,0)&&(redrawX(g),moved=!0),resizingY&&move1(point,y,1)&&(redrawY(g),moved=!0),moved&&(redraw(g),event_({type:"brush",mode:dragging?"move":"resize"}))}function move1(point,scale,i){var min,max,range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0];if(dragging&&(r0-=position,r1-=size+position),min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i],dragging?max=(min+=position)+size:(center&&(position=Math.max(r0,Math.min(r1,2*center[i]-min)))
,position<min?(max=min,min=position):max=position),extent[0]!=min||extent[1]!=max)return i?yExtentDomain=null:xExtentDomain=null,extent[0]=min,extent[1]=max,!0}function brushend(){brushmove(),g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null),d3.select("body").style("cursor",null),w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),dragRestore(),event_({type:"brushend"})}g.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",eventTarget.style("cursor")),
event_({type:"brushstart"}),brushmove()}return brush.event=function(g){g.each(function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1,d3_transitionInheritId?d3.select(this).transition().each("start.brush",function(){xExtentDomain=extent0.i,yExtentDomain=extent0.j,xExtent=extent0.x,yExtent=extent0.y,event_({type:"brushstart"})}).tween("brush:brush",function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);return xExtentDomain=yExtentDomain=null,function(t){xExtent=extent1.x=xi(t),yExtent=extent1.y=yi(t),event_({
type:"brush",mode:"resize"})}}).each("end.brush",function(){xExtentDomain=extent1.i,yExtentDomain=extent1.j,event_({type:"brush",mode:"resize"}),event_({type:"brushend"})}):(event_({type:"brushstart"}),event_({type:"brush",mode:"resize"}),event_({type:"brushend"}))})},brush.x=function(z){return arguments.length?(resizes=d3_svg_brushResizes[!(x=z)<<1|!y],brush):x},brush.y=function(z){return arguments.length?(resizes=d3_svg_brushResizes[!x<<1|!(y=z)],brush):y},brush.clamp=function(z){return arguments.length?(x&&y?(xClamp=!!z[0],yClamp=!!z[1]):x?xClamp=!!z:y&&(yClamp=!!z),brush):x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null},brush.extent=function(z){var x0,x1,y0,
y1,t;return arguments.length?(x&&(x0=z[0],x1=z[1],y&&(x0=x0[0],x1=x1[0]),xExtentDomain=[x0,x1],x.invert&&(x0=x(x0),x1=x(x1)),x1<x0&&(t=x0,x0=x1,x1=t),x0==xExtent[0]&&x1==xExtent[1]||(xExtent=[x0,x1])),y&&(y0=z[0],y1=z[1],x&&(y0=y0[1],y1=y1[1]),yExtentDomain=[y0,y1],y.invert&&(y0=y(y0),y1=y(y1)),y1<y0&&(t=y0,y0=y1,y1=t),y0==yExtent[0]&&y1==yExtent[1]||(yExtent=[y0,y1])),brush):(x&&(xExtentDomain?(x0=xExtentDomain[0],x1=xExtentDomain[1]):(x0=xExtent[0],x1=xExtent[1],x.invert&&(x0=x.invert(x0),x1=x.invert(x1)),x1<x0&&(t=x0,x0=x1,x1=t))),y&&(yExtentDomain?(y0=yExtentDomain[0],y1=yExtentDomain[1]):(y0=yExtent[0],y1=yExtent[1],y.invert&&(y0=y.invert(y0),
y1=y.invert(y1)),y1<y0&&(t=y0,y0=y1,y1=t))),x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1])},brush.clear=function(){return brush.empty()||(xExtent=[0,0],yExtent=[0,0],xExtentDomain=yExtentDomain=null),brush},brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]},d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d3_time_format=d3_time.format=d3_locale_enUS.timeFormat,d3_time_formatUtc=d3_time_format.utc,
d3_time_formatIso=d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");function d3_time_formatIsoNative(date){return date.toISOString()}function d3_time_scale(linear,methods,format){function scale(x){return linear(x)}function tickMethod(extent,count){var target=(extent[1]-extent[0])/count,i=d3.bisect(d3_time_scaleSteps,target);return i==d3_time_scaleSteps.length?[methods.year,d3_scale_linearTickRange(extent.map(function(d){return d/31536e6}),count)[2]]:i?methods[target/d3_time_scaleSteps[i-1]<d3_time_scaleSteps[i]/target?i-1:i]:[d3_time_scaleMilliseconds,d3_scale_linearTickRange(extent,count)[2]]}return scale.invert=function(x){return d3_time_scaleDate(linear.invert(x
))},scale.domain=function(x){return arguments.length?(linear.domain(x),scale):linear.domain().map(d3_time_scaleDate)},scale.nice=function(interval,skip){var domain=scale.domain(),extent=d3_scaleExtent(domain),method=null==interval?tickMethod(extent,10):"number"==typeof interval&&tickMethod(extent,interval);function skipped(date){return!isNaN(date)&&!interval.range(date,d3_time_scaleDate(+date+1),skip).length}return method&&(interval=method[0],skip=method[1]),scale.domain(d3_scale_nice(domain,1<skip?{floor:function(date){for(;skipped(date=interval.floor(date));)date=d3_time_scaleDate(date-1);return date},ceil:function(date){for(;skipped(date=interval.ceil(
date));)date=d3_time_scaleDate(+date+1);return date}}:interval))},scale.ticks=function(interval,skip){var extent=d3_scaleExtent(scale.domain()),method=null==interval?tickMethod(extent,10):"number"==typeof interval?tickMethod(extent,interval):!interval.range&&[{range:interval},skip];return method&&(interval=method[0],skip=method[1]),interval.range(extent[0],d3_time_scaleDate(+extent[1]+1),skip<1?1:skip)},scale.tickFormat=function(){return format},scale.copy=function(){return d3_time_scale(linear.copy(),methods,format)},d3_scale_linearRebind(scale,linear)}function d3_time_scaleDate(t){return new Date(t)}d3_time_format.iso=Date.prototype.toISOString&&+new Date(
"2000-01-01T00:00:00.000Z")?d3_time_formatIsoNative:d3_time_formatIso,d3_time_formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date},d3_time_formatIsoNative.toString=d3_time_formatIso.toString,d3_time.second=d3_time_interval(function(date){return new d3_date(1e3*Math.floor(date/1e3))},function(date,offset){date.setTime(date.getTime()+1e3*Math.floor(offset))},function(date){return date.getSeconds()}),d3_time.seconds=d3_time.second.range,d3_time.seconds.utc=d3_time.second.utc.range,d3_time.minute=d3_time_interval(function(date){return new d3_date(6e4*Math.floor(date/6e4))},function(date,offset){date.setTime(date.getTime(
)+6e4*Math.floor(offset))},function(date){return date.getMinutes()}),d3_time.minutes=d3_time.minute.range,d3_time.minutes.utc=d3_time.minute.utc.range,d3_time.hour=d3_time_interval(function(date){var timezone=date.getTimezoneOffset()/60;return new d3_date(36e5*(Math.floor(date/36e5-timezone)+timezone))},function(date,offset){date.setTime(date.getTime()+36e5*Math.floor(offset))},function(date){return date.getHours()}),d3_time.hours=d3_time.hour.range,d3_time.hours.utc=d3_time.hour.utc.range,d3_time.month=d3_time_interval(function(date){return(date=d3_time.day(date)).setDate(1),date},function(date,offset){date.setMonth(date.getMonth()+offset)},function(date){
return date.getMonth()}),d3_time.months=d3_time.month.range,d3_time.months.utc=d3_time.month.utc.range;var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],d3_time_scaleLocalMethods=[[d3_time.second,1],[d3_time.second,5],[d3_time.second,15],[d3_time.second,30],[d3_time.minute,1],[d3_time.minute,5],[d3_time.minute,15],[d3_time.minute,30],[d3_time.hour,1],[d3_time.hour,3],[d3_time.hour,6],[d3_time.hour,12],[d3_time.day,1],[d3_time.day,2],[d3_time.week,1],[d3_time.month,1],[d3_time.month,3],[d3_time.year,1]],d3_time_scaleLocalFormat=d3_time_format.multi([[".%L",function(d){
return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%a %d",function(d){return d.getDay()&&1!=d.getDate()}],["%b %d",function(d){return 1!=d.getDate()}],["%B",function(d){return d.getMonth()}],["%Y",d3_true]]),d3_time_scaleMilliseconds={range:function(start,stop,step){return d3.range(Math.ceil(start/step)*step,+stop,step).map(d3_time_scaleDate)},floor:d3_identity,ceil:d3_identity};d3_time_scaleLocalMethods.year=d3_time.year,d3_time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)}
;var d3_time_scaleUtcMethods=d3_time_scaleLocalMethods.map(function(m){return[m[0].utc,m[1]]}),d3_time_scaleUtcFormat=d3_time_formatUtc.multi([[".%L",function(d){return d.getUTCMilliseconds()}],[":%S",function(d){return d.getUTCSeconds()}],["%I:%M",function(d){return d.getUTCMinutes()}],["%I %p",function(d){return d.getUTCHours()}],["%a %d",function(d){return d.getUTCDay()&&1!=d.getUTCDate()}],["%b %d",function(d){return 1!=d.getUTCDate()}],["%B",function(d){return d.getUTCMonth()}],["%Y",d3_true]]);function d3_json(request){return JSON.parse(request.responseText)}function d3_html(request){var range=d3_document.createRange();return range.selectNode(
d3_document.body),range.createContextualFragment(request.responseText)}d3_time_scaleUtcMethods.year=d3_time.year.utc,d3_time.scale.utc=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleUtcMethods,d3_time_scaleUtcFormat)},d3.text=d3_xhrType(function(request){return request.responseText}),d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)},d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)},d3.xml=d3_xhrType(function(request){return request.responseXML}),"function"==typeof define&&define.amd?(this.d3=d3,define("d3",d3)
):"object"==typeof module&&module.exports?module.exports=d3:this.d3=d3}(),define("css!lib/c3js/c3",[],function(){}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("c3",factory):global.c3=factory()}(this,function(){"use strict";var c3_axis_fn,c3_axis_internal_fn,CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",
chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",
line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",
axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},isValue=function(v){return v||0===v},isFunction=function(o){return"function"==typeof o},
isArray=function(o){return Array.isArray(o)},isString=function(o){return"string"==typeof o},isUndefined=function(v){return void 0===v},isDefined=function(v){return void 0!==v},ceil10=function(v){return 10*Math.ceil(v/10)},asHalfPixel=function(n){return Math.ceil(n)+.5},diffDomain=function(d){return d[1]-d[0]},isEmpty=function(o){return null==o||isString(o)&&0===o.length||"object"===(void 0===o?"undefined":_typeof(o))&&0===Object.keys(o).length},notEmpty=function(o){return!c3_chart_internal_fn.isEmpty(o)},getOption=function(options,key,defaultValue){return isDefined(options[key])?options[key]:defaultValue},hasValue=function(dict,value){var found=!1
;return Object.keys(dict).forEach(function(key){dict[key]===value&&(found=!0)}),found},sanitise=function(str){return"string"==typeof str?str.replace(/</g,"&lt;").replace(/>/g,"&gt;"):str},getPathBox=function(path){var box=path.getBoundingClientRect(),items=[path.pathSegList.getItem(0),path.pathSegList.getItem(1)];return{x:items[0].x,y:Math.min(items[0].y,items[1].y),width:box.width,height:box.height}};function AxisInternal(component,params){this.component=component,this.params=params||{},this.d3=component.d3,this.scale=this.d3.scale.linear(),this.range,this.orient="bottom",this.innerTickSize=6,this.outerTickSize=this.params.withOuterTick?6:0,
this.tickPadding=3,this.tickValues=null,this.tickFormat,this.tickArguments,this.tickOffset=0,this.tickCulling=!0,this.tickCentered,this.tickTextCharSize,this.tickTextRotate=this.params.tickTextRotate,this.tickLength,this.axis=this.generateAxis()}(c3_axis_internal_fn=AxisInternal.prototype).axisX=function(selection,x,tickOffset){selection.attr("transform",function(d){return"translate("+Math.ceil(x(d)+tickOffset)+", 0)"})},c3_axis_internal_fn.axisY=function(selection,y){selection.attr("transform",function(d){return"translate(0,"+Math.ceil(y(d))+")"})},c3_axis_internal_fn.scaleExtent=function(domain){var start=domain[0],stop=domain[domain.length-1]
;return start<stop?[start,stop]:[stop,start]},c3_axis_internal_fn.generateTicks=function(scale){var i,domain,ticks=[];if(scale.ticks)return scale.ticks.apply(scale,this.tickArguments);for(domain=scale.domain(),i=Math.ceil(domain[0]);i<domain[1];i++)ticks.push(i);return 0<ticks.length&&0<ticks[0]&&ticks.unshift(ticks[0]-(ticks[1]-ticks[0])),ticks},c3_axis_internal_fn.copyScale=function(){var domain,newScale=this.scale.copy();return this.params.isCategory&&(domain=this.scale.domain(),newScale.domain([domain[0],domain[1]-1])),newScale},c3_axis_internal_fn.textFormatted=function(v){var formatted=this.tickFormat?this.tickFormat(v):v
;return void 0!==formatted?formatted:""},c3_axis_internal_fn.updateRange=function(){return this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range()),this.range},c3_axis_internal_fn.updateTickTextCharSize=function(tick){var internal=this;if(internal.tickTextCharSize)return internal.tickTextCharSize;var size={h:11.5,w:5.5};return tick.select("text").text(function(d){return internal.textFormatted(d)}).each(function(d){var box=this.getBoundingClientRect(),text=internal.textFormatted(d),h=box.height,w=text?box.width/text.length:void 0;h&&w&&(size.h=h,size.w=w)}).text(""),internal.tickTextCharSize=size},
c3_axis_internal_fn.transitionise=function(selection){return this.params.withoutTransition?selection:this.d3.transition(selection)},c3_axis_internal_fn.isVertical=function(){return"left"===this.orient||"right"===this.orient},c3_axis_internal_fn.tspanData=function(d,i,ticks,scale){var splitted=this.params.tickMultiline?this.splitTickText(d,ticks,scale):[].concat(this.textFormatted(d));return this.params.tickMultiline&&0<this.params.tickMultilineMax&&(splitted=this.ellipsify(splitted,this.params.tickMultilineMax)),splitted.map(function(s){return{index:i,splitted:s,length:splitted.length}})},c3_axis_internal_fn.splitTickText=function(d,ticks,scale){var subtext,
spaceIndex,textWidth,internal=this,tickText=internal.textFormatted(d),maxWidth=internal.params.tickWidth;if("[object Array]"===Object.prototype.toString.call(tickText))return tickText;return(!maxWidth||maxWidth<=0)&&(maxWidth=internal.isVertical()?95:internal.params.isCategory?Math.ceil(scale(ticks[1])-scale(ticks[0]))-12:110),function split(splitted,text){spaceIndex=void 0;for(var i=1;i<text.length;i++)if(" "===text.charAt(i)&&(spaceIndex=i),subtext=text.substr(0,i+1),textWidth=internal.tickTextCharSize.w*subtext.length,maxWidth<textWidth)return split(splitted.concat(text.substr(0,spaceIndex||i)),text.slice(spaceIndex?spaceIndex+1:i))
;return splitted.concat(text)}([],tickText+"")},c3_axis_internal_fn.ellipsify=function(splitted,max){if(splitted.length<=max)return splitted;for(var ellipsified=splitted.slice(0,max),remaining=3,i=max-1;0<=i;i--){var available=ellipsified[i].length;if(ellipsified[i]=ellipsified[i].substr(0,available-remaining).padEnd(available,"."),(remaining-=available)<=0)break}return ellipsified},c3_axis_internal_fn.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},c3_axis_internal_fn.lineY2=function(d){var tickPosition=this.scale(d)+(this.tickCentered?0:this.tickOffset)
;return this.range[0]<tickPosition&&tickPosition<this.range[1]?this.innerTickSize:0},c3_axis_internal_fn.textY=function(){var rotate=this.tickTextRotate;return rotate?11.5-rotate/15*2.5*(0<rotate?1:-1):this.tickLength},c3_axis_internal_fn.textTransform=function(){var rotate=this.tickTextRotate;return rotate?"rotate("+rotate+")":""},c3_axis_internal_fn.textTextAnchor=function(){var rotate=this.tickTextRotate;return rotate?0<rotate?"start":"end":"middle"},c3_axis_internal_fn.tspanDx=function(){var rotate=this.tickTextRotate;return rotate?8*Math.sin(Math.PI*(rotate/180)):0},c3_axis_internal_fn.tspanDy=function(d,i){var dy=this.tickTextCharSize.h;return 0===i&&(
dy=this.isVertical()?-((d.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),dy},c3_axis_internal_fn.generateAxis=function(){var internal=this,d3=internal.d3,params=internal.params;function axis(g){g.each(function(){var tickTransform,tickX,tickY,g=axis.g=d3.select(this),scale0=this.__chart__||internal.scale,scale1=this.__chart__=internal.copyScale(),ticks=internal.tickValues?internal.tickValues:internal.generateTicks(scale1),tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),tickExit=tick.exit().remove(),tickUpdate=internal.transitionise(tick).style("opacity",1)
;params.isCategory?(internal.tickOffset=Math.ceil((scale1(1)-scale1(0))/2),tickX=internal.tickCentered?0:internal.tickOffset,tickY=internal.tickCentered?internal.tickOffset:0):internal.tickOffset=tickX=0,tickEnter.append("line"),tickEnter.append("text"),internal.updateRange(),internal.updateTickLength(),internal.updateTickTextCharSize(g.select(".tick"));var lineUpdate=tickUpdate.select("line"),textUpdate=tickUpdate.select("text"),tspanUpdate=tick.select("text").selectAll("tspan").data(function(d,i){return internal.tspanData(d,i,ticks,scale1)});tspanUpdate.enter().append("tspan"),tspanUpdate.exit().remove(),tspanUpdate.text(function(d){return d.splitted})
;var path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),internal.transitionise(path));switch(internal.orient){case"bottom":tickTransform=internal.axisX,lineUpdate.attr("x1",tickX).attr("x2",tickX).attr("y2",function(d,i){return internal.lineY2(d,i)}),textUpdate.attr("x",0).attr("y",function(d,i){return internal.textY(d,i)}).attr("transform",function(d,i){return internal.textTransform(d,i)}).style("text-anchor",function(d,i){return internal.textTextAnchor(d,i)}),tspanUpdate.attr("x",0).attr("dy",function(d,i){return internal.tspanDy(d,i)}).attr("dx",function(d,i){return internal.tspanDx(d,i)}),pathUpdate.attr(
"d","M"+internal.range[0]+","+internal.outerTickSize+"V0H"+internal.range[1]+"V"+internal.outerTickSize);break;case"top":tickTransform=internal.axisX,lineUpdate.attr("x1",tickX).attr("x2",tickX).attr("y2",function(d,i){return-1*internal.lineY2(d,i)}),textUpdate.attr("x",0).attr("y",function(d,i){return-1*internal.textY(d,i)-(params.isCategory?2:internal.tickLength-2)}).attr("transform",function(d,i){return internal.textTransform(d,i)}).style("text-anchor",function(d,i){return internal.textTextAnchor(d,i)}),tspanUpdate.attr("x",0).attr("dy",function(d,i){return internal.tspanDy(d,i)}).attr("dx",function(d,i){return internal.tspanDx(d,i)}),pathUpdate.attr("d",
"M"+internal.range[0]+","+-internal.outerTickSize+"V0H"+internal.range[1]+"V"+-internal.outerTickSize);break;case"left":tickTransform=internal.axisY,lineUpdate.attr("x2",-internal.innerTickSize).attr("y1",tickY).attr("y2",tickY),textUpdate.attr("x",-internal.tickLength).attr("y",internal.tickOffset).style("text-anchor","end"),tspanUpdate.attr("x",-internal.tickLength).attr("dy",function(d,i){return internal.tspanDy(d,i)}),pathUpdate.attr("d","M"+-internal.outerTickSize+","+internal.range[0]+"H0V"+internal.range[1]+"H"+-internal.outerTickSize);break;case"right":tickTransform=internal.axisY,lineUpdate.attr("x2",internal.innerTickSize).attr("y1",tickY).attr(
"y2",tickY),textUpdate.attr("x",internal.tickLength).attr("y",internal.tickOffset).style("text-anchor","start"),tspanUpdate.attr("x",internal.tickLength).attr("dy",function(d,i){return internal.tspanDy(d,i)}),pathUpdate.attr("d","M"+internal.outerTickSize+","+internal.range[0]+"H0V"+internal.range[1]+"H"+internal.outerTickSize)}if(scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1,internal.tickOffset);tickEnter.call(tickTransform,scale0,internal.tickOffset),tickUpdate.call(tickTransform,scale1,internal.tickOffset)})}return axis.scale=function(x){
return arguments.length?(internal.scale=x,axis):internal.scale},axis.orient=function(x){return arguments.length?(internal.orient=x in{top:1,right:1,bottom:1,left:1}?x+"":"bottom",axis):internal.orient},axis.tickFormat=function(format){return arguments.length?(internal.tickFormat=format,axis):internal.tickFormat},axis.tickCentered=function(isCentered){return arguments.length?(internal.tickCentered=isCentered,axis):internal.tickCentered},axis.tickOffset=function(){return internal.tickOffset},axis.tickInterval=function(){var interval;return(interval=params.isCategory?2*internal.tickOffset:(axis.g.select("path.domain").node().getTotalLength(
)-2*internal.outerTickSize)/axis.g.selectAll("line").size())===1/0?0:interval},axis.ticks=function(){return arguments.length?(internal.tickArguments=arguments,axis):internal.tickArguments},axis.tickCulling=function(culling){return arguments.length?(internal.tickCulling=culling,axis):internal.tickCulling},axis.tickValues=function(x){if("function"==typeof x)internal.tickValues=function(){return x(internal.scale.domain())};else{if(!arguments.length)return internal.tickValues;internal.tickValues=x}return axis},axis};var Axis=function(_Component){function Axis(owner){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(
"Cannot call a class as a function")}(this,Axis);var fn={fn:c3_axis_fn,internal:{fn:c3_axis_internal_fn}},_this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Axis.__proto__||Object.getPrototypeOf(Axis)).call(this,owner,"axis",fn));return _this.d3=owner.d3,_this.internal=AxisInternal,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(
superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Axis,Component),Axis}();(c3_axis_fn=Axis.prototype).init=function(){var $$=this.owner,config=$$.config,main=$$.main;$$.axes.x=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisX).attr("clip-path",config.axis_x_inner?"":$$.clipPathForXAxis).attr("transform",$$.getTranslate("x")).style("visibility",config.axis_x_show?"visible":"hidden"),$$.axes.x.append("text").attr("class",CLASS.axisXLabel).attr("transform",
config.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),$$.axes.y=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisY).attr("clip-path",config.axis_y_inner?"":$$.clipPathForYAxis).attr("transform",$$.getTranslate("y")).style("visibility",config.axis_y_show?"visible":"hidden"),$$.axes.y.append("text").attr("class",CLASS.axisYLabel).attr("transform",config.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),$$.axes.y2=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisY2).attr("transform",$$.getTranslate("y2")).style("visibility",config.axis_y2_show?"visible":"hidden"),
$$.axes.y2.append("text").attr("class",CLASS.axisY2Label).attr("transform",config.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},c3_axis_fn.getXAxis=function(scale,orient,tickFormat,tickValues,withOuterTick,withoutTransition,withoutRotateTickText){var $$=this.owner,config=$$.config,axisParams={isCategory:$$.isCategorized(),withOuterTick:withOuterTick,tickMultiline:config.axis_x_tick_multiline,tickMultilineMax:config.axis_x_tick_multiline?Number(config.axis_x_tick_multilineMax):0,tickWidth:config.axis_x_tick_width,tickTextRotate:withoutRotateTickText?0:config.axis_x_tick_rotate,withoutTransition:withoutTransition
},axis=new this.internal(this,axisParams).axis.scale(scale).orient(orient);return $$.isTimeSeries()&&tickValues&&"function"!=typeof tickValues&&(tickValues=tickValues.map(function(v){return $$.parseDate(v)})),axis.tickFormat(tickFormat).tickValues(tickValues),$$.isCategorized()&&(axis.tickCentered(config.axis_x_tick_centered),isEmpty(config.axis_x_tick_culling)&&(config.axis_x_tick_culling=!1)),axis},c3_axis_fn.updateXAxisTickValues=function(targets,axis){var tickValues,$$=this.owner,config=$$.config;return(config.axis_x_tick_fit||config.axis_x_tick_count)&&(tickValues=this.generateTickValues($$.mapTargetsToUniqueXs(targets),config.axis_x_tick_count,
$$.isTimeSeries())),axis?axis.tickValues(tickValues):($$.xAxis.tickValues(tickValues),$$.subXAxis.tickValues(tickValues)),tickValues},c3_axis_fn.getYAxis=function(scale,orient,tickFormat,tickValues,withOuterTick,withoutTransition,withoutRotateTickText){var $$=this.owner,config=$$.config,axisParams={withOuterTick:withOuterTick,withoutTransition:withoutTransition,tickTextRotate:withoutRotateTickText?0:config.axis_y_tick_rotate},axis=new this.internal(this,axisParams).axis.scale(scale).orient(orient).tickFormat(tickFormat);return $$.isTimeSeriesY()?axis.ticks($$.d3.time[config.axis_y_tick_time_value],config.axis_y_tick_time_interval):axis.tickValues(tickValues)
,axis},c3_axis_fn.getId=function(id){var config=this.owner.config;return id in config.data_axes?config.data_axes[id]:"y"},c3_axis_fn.getXAxisTickFormat=function(){var $$=this.owner,config=$$.config,format=$$.isTimeSeries()?$$.defaultAxisTimeFormat:$$.isCategorized()?$$.categoryName:function(v){return v<0?v.toFixed(0):v};return config.axis_x_tick_format&&(isFunction(config.axis_x_tick_format)?format=config.axis_x_tick_format:$$.isTimeSeries()&&(format=function(date){return date?$$.axisTimeFormat(config.axis_x_tick_format)(date):""})),isFunction(format)?function(v){return format.call($$,v)}:format},c3_axis_fn.getTickValues=function(tickValues,axis){
return tickValues||(axis?axis.tickValues():void 0)},c3_axis_fn.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},c3_axis_fn.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},c3_axis_fn.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},c3_axis_fn.getLabelOptionByAxisId=function(axisId){var option,config=this.owner.config;return"y"===axisId?option=config.axis_y_label:"y2"===axisId?option=config.axis_y2_label:"x"===axisId&&(option=config.axis_x_label),option},
c3_axis_fn.getLabelText=function(axisId){var option=this.getLabelOptionByAxisId(axisId);return isString(option)?option:option?option.text:null},c3_axis_fn.setLabelText=function(axisId,text){var config=this.owner.config,option=this.getLabelOptionByAxisId(axisId);isString(option)?"y"===axisId?config.axis_y_label=text:"y2"===axisId?config.axis_y2_label=text:"x"===axisId&&(config.axis_x_label=text):option&&(option.text=text)},c3_axis_fn.getLabelPosition=function(axisId,defaultPosition){var option=this.getLabelOptionByAxisId(axisId),position=option&&"object"===(void 0===option?"undefined":_typeof(option))&&option.position?option.position:defaultPosition;return{
isInner:0<=position.indexOf("inner"),isOuter:0<=position.indexOf("outer"),isLeft:0<=position.indexOf("left"),isCenter:0<=position.indexOf("center"),isRight:0<=position.indexOf("right"),isTop:0<=position.indexOf("top"),isMiddle:0<=position.indexOf("middle"),isBottom:0<=position.indexOf("bottom")}},c3_axis_fn.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},c3_axis_fn.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},c3_axis_fn.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",
this.owner.config.axis_rotated?"inner-right":"inner-top")},c3_axis_fn.getLabelPositionById=function(id){return"y2"===id?this.getY2AxisLabelPosition():"y"===id?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},c3_axis_fn.textForXAxisLabel=function(){return this.getLabelText("x")},c3_axis_fn.textForYAxisLabel=function(){return this.getLabelText("y")},c3_axis_fn.textForY2AxisLabel=function(){return this.getLabelText("y2")},c3_axis_fn.xForAxisLabel=function(forHorizontal,position){var $$=this.owner;return forHorizontal?position.isLeft?0:position.isCenter?$$.width/2:$$.width:position.isBottom?-$$.height:position.isMiddle?-$$.height/2:0},
c3_axis_fn.dxForAxisLabel=function(forHorizontal,position){return forHorizontal?position.isLeft?"0.5em":position.isRight?"-0.5em":"0":position.isTop?"-0.5em":position.isBottom?"0.5em":"0"},c3_axis_fn.textAnchorForAxisLabel=function(forHorizontal,position){return forHorizontal?position.isLeft?"start":position.isCenter?"middle":"end":position.isBottom?"start":position.isMiddle?"middle":"end"},c3_axis_fn.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},c3_axis_fn.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},
c3_axis_fn.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},c3_axis_fn.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},c3_axis_fn.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},c3_axis_fn.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},c3_axis_fn.dyForXAxisLabel=function(){var $$=this.owner,config=$$.config,position=this.getXAxisLabelPosition()
;return config.axis_rotated?position.isInner?"1.2em":-25-($$.config.axis_x_inner?0:this.getMaxTickWidth("x")):position.isInner?"-0.5em":config.axis_x_height?config.axis_x_height-10:"3em"},c3_axis_fn.dyForYAxisLabel=function(){var $$=this.owner,position=this.getYAxisLabelPosition();return $$.config.axis_rotated?position.isInner?"-0.5em":"3em":position.isInner?"1.2em":-10-($$.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},c3_axis_fn.dyForY2AxisLabel=function(){var $$=this.owner,position=this.getY2AxisLabelPosition();return $$.config.axis_rotated?position.isInner?"1.2em":"-2.2em":position.isInner?"-0.5em":15+(
$$.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},c3_axis_fn.textAnchorForXAxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel(!$$.config.axis_rotated,this.getXAxisLabelPosition())},c3_axis_fn.textAnchorForYAxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel($$.config.axis_rotated,this.getYAxisLabelPosition())},c3_axis_fn.textAnchorForY2AxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel($$.config.axis_rotated,this.getY2AxisLabelPosition())},c3_axis_fn.getMaxTickWidth=function(id,withoutRecompute){var targetsToShow,scale,axis,dummy,$$=this.owner,config=$$.config,maxWidth=0
;return withoutRecompute&&$$.currentMaxTickWidths[id]||($$.svg&&(targetsToShow=$$.filterTargetsToShow($$.data.targets),"y"===id?(scale=$$.y.copy().domain($$.getYDomain(targetsToShow,"y")),axis=this.getYAxis(scale,$$.yOrient,config.axis_y_tick_format,$$.yAxisTickValues,!1,!0,!0)):"y2"===id?(scale=$$.y2.copy().domain($$.getYDomain(targetsToShow,"y2")),axis=this.getYAxis(scale,$$.y2Orient,config.axis_y2_tick_format,$$.y2AxisTickValues,!1,!0,!0)):(scale=$$.x.copy().domain($$.getXDomain(targetsToShow)),axis=this.getXAxis(scale,$$.xOrient,$$.xAxisTickFormat,$$.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(targetsToShow,axis)),(dummy=$$.d3.select("body"
).append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(axis).each(function(){$$.d3.select(this).selectAll("text").each(function(){var box=this.getBoundingClientRect();maxWidth<box.width&&(maxWidth=box.width)}),dummy.remove()})),$$.currentMaxTickWidths[id]=maxWidth<=0?$$.currentMaxTickWidths[id]:maxWidth),$$.currentMaxTickWidths[id]},c3_axis_fn.updateLabels=function(withTransition){var $$=this.owner,axisXLabel=$$.main.select("."+CLASS.axisX+" ."+CLASS.axisXLabel),axisYLabel=$$.main.select("."+CLASS.axisY+" ."+CLASS.axisYLabel),axisY2Label=$$.main.select(
"."+CLASS.axisY2+" ."+CLASS.axisY2Label);(withTransition?axisXLabel.transition():axisXLabel).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(withTransition?axisYLabel.transition():axisYLabel).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(withTransition?axisY2Label.transition():axisY2Label).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)
).text(this.textForY2AxisLabel.bind(this))},c3_axis_fn.getPadding=function(padding,key,defaultValue,domainLength){var p="number"==typeof padding?padding:padding[key];return isValue(p)?"ratio"===padding.unit?padding[key]*domainLength:this.convertPixelsToAxisPadding(p,domainLength):defaultValue},c3_axis_fn.convertPixelsToAxisPadding=function(pixels,domainLength){var $$=this.owner;return domainLength*(pixels/($$.config.axis_rotated?$$.width:$$.height))},c3_axis_fn.generateTickValues=function(values,tickCount,forTimeSeries){var targetCount,start,end,count,interval,i,tickValue,tickValues=values;if(tickCount)if(1===(targetCount=isFunction(tickCount)?tickCount(
):tickCount))tickValues=[values[0]];else if(2===targetCount)tickValues=[values[0],values[values.length-1]];else if(2<targetCount){for(count=targetCount-2,start=values[0],interval=((end=values[values.length-1])-start)/(count+1),tickValues=[start],i=0;i<count;i++)tickValue=+start+interval*(i+1),tickValues.push(forTimeSeries?new Date(tickValue):tickValue);tickValues.push(end)}return forTimeSeries||(tickValues=tickValues.sort(function(a,b){return a-b})),tickValues},c3_axis_fn.generateTransitions=function(duration){var axes=this.owner.axes;return{axisX:duration?axes.x.transition().duration(duration):axes.x,axisY:duration?axes.y.transition().duration(duration
):axes.y,axisY2:duration?axes.y2.transition().duration(duration):axes.y2,axisSubX:duration?axes.subx.transition().duration(duration):axes.subx}},c3_axis_fn.redraw=function(transitions,isHidden){var $$=this.owner;$$.axes.x.style("opacity",isHidden?0:1),$$.axes.y.style("opacity",isHidden?0:1),$$.axes.y2.style("opacity",isHidden?0:1),$$.axes.subx.style("opacity",isHidden?0:1),transitions.axisX.call($$.xAxis),transitions.axisY.call($$.yAxis),transitions.axisY2.call($$.y2Axis),transitions.axisSubX.call($$.subXAxis)};var c3_chart_fn,c3_chart_internal_fn,c3={version:"0.4.23"};function Component(owner,componentKey,fn){this.owner=owner,
c3.chart.internal[componentKey]=fn}function Chart(config){var $$=this.internal=new ChartInternal(this);$$.loadConfig(config),$$.beforeInit(config),$$.init(),$$.afterInit(config),function bindThis(fn,target,argThis){Object.keys(fn).forEach(function(key){target[key]=fn[key].bind(argThis),0<Object.keys(fn[key]).length&&bindThis(fn[key],target[key],argThis)})}(c3_chart_fn,this,this)}function ChartInternal(api){var $$=this;$$.d3=window.d3?window.d3:void 0!==require?require("d3"):void 0,$$.api=api,$$.config=$$.getDefaultConfig(),$$.data={},$$.cache={},$$.axes={}}return c3.generate=function(config){return new Chart(config)},c3.chart={fn:Chart.prototype,internal:{
fn:ChartInternal.prototype}},c3_chart_fn=c3.chart.fn,(c3_chart_internal_fn=c3.chart.internal.fn).beforeInit=function(){},c3_chart_internal_fn.afterInit=function(){},c3_chart_internal_fn.init=function(){var $$=this,config=$$.config;if($$.initParams(),config.data_url)$$.convertUrlToData(config.data_url,config.data_mimeType,config.data_headers,config.data_keys,$$.initWithData);else if(config.data_json)$$.initWithData($$.convertJsonToData(config.data_json,config.data_keys));else if(config.data_rows)$$.initWithData($$.convertRowsToData(config.data_rows));else{if(!config.data_columns)throw Error("url or json or rows or columns is required.");$$.initWithData(
$$.convertColumnsToData(config.data_columns))}},c3_chart_internal_fn.initParams=function(){var $$=this,d3=$$.d3,config=$$.config;$$.clipId="c3-"+ +new Date+"-clip",$$.clipIdForXAxis=$$.clipId+"-xaxis",$$.clipIdForYAxis=$$.clipId+"-yaxis",$$.clipIdForGrid=$$.clipId+"-grid",$$.clipIdForSubchart=$$.clipId+"-subchart",$$.clipPath=$$.getClipPath($$.clipId),$$.clipPathForXAxis=$$.getClipPath($$.clipIdForXAxis),$$.clipPathForYAxis=$$.getClipPath($$.clipIdForYAxis),$$.clipPathForGrid=$$.getClipPath($$.clipIdForGrid),$$.clipPathForSubchart=$$.getClipPath($$.clipIdForSubchart),$$.dragStart=null,$$.dragging=!1,$$.flowing=!1,$$.cancelClick=!1,$$.mouseover=!1,
$$.transiting=!1,$$.color=$$.generateColor(),$$.levelColor=$$.generateLevelColor(),$$.dataTimeFormat=config.data_xLocaltime?d3.time.format:d3.time.format.utc,$$.axisTimeFormat=config.axis_x_localtime?d3.time.format:d3.time.format.utc,$$.defaultAxisTimeFormat=$$.axisTimeFormat.multi([[".%L",function(d){return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%-m/%-d",function(d){return d.getDay()&&1!==d.getDate()}],["%-m/%-d",function(d){return 1!==d.getDate()}],["%-m/%-d",function(d){return d.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),
$$.hiddenTargetIds=[],$$.hiddenLegendIds=[],$$.focusedTargetIds=[],$$.defocusedTargetIds=[],$$.xOrient=config.axis_rotated?config.axis_x_inner?"right":"left":config.axis_x_inner?"top":"bottom",$$.yOrient=config.axis_rotated?config.axis_y_inner?"top":"bottom":config.axis_y_inner?"right":"left",$$.y2Orient=config.axis_rotated?config.axis_y2_inner?"bottom":"top":config.axis_y2_inner?"left":"right",$$.subXOrient=config.axis_rotated?"left":"bottom",$$.isLegendRight="right"===config.legend_position,$$.isLegendInset="inset"===config.legend_position,$$.isLegendTop="top-left"===config.legend_inset_anchor||"top-right"===config.legend_inset_anchor,
$$.isLegendLeft="top-left"===config.legend_inset_anchor||"bottom-left"===config.legend_inset_anchor,$$.legendStep=0,$$.legendItemWidth=0,$$.legendItemHeight=0,$$.currentMaxTickWidths={x:0,y:0,y2:0},$$.rotated_padding_left=30,$$.rotated_padding_right=config.axis_rotated&&!config.axis_x_show?0:30,$$.rotated_padding_top=5,$$.withoutFadeIn={},$$.intervalForObserveInserted=void 0,$$.axes.subx=d3.selectAll([])},c3_chart_internal_fn.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},c3_chart_internal_fn.initWithData=function(data){
var defs,main,$$=this,d3=$$.d3,config=$$.config,binding=!0;$$.axis=new Axis($$),$$.initPie&&$$.initPie(),$$.initBrush&&$$.initBrush(),$$.initZoom&&$$.initZoom(),config.bindto?"function"==typeof config.bindto.node?$$.selectChart=config.bindto:$$.selectChart=d3.select(config.bindto):$$.selectChart=d3.selectAll([]),$$.selectChart.empty()&&($$.selectChart=d3.select(document.createElement("div")).style("opacity",0),$$.observeInserted($$.selectChart),binding=!1),$$.selectChart.html("").classed("c3",!0),$$.data.xs={},$$.data.targets=$$.convertDataToTargets(data),config.data_filter&&($$.data.targets=$$.data.targets.filter(config.data_filter)),
config.data_hide&&$$.addHiddenTargetIds(!0===config.data_hide?$$.mapToIds($$.data.targets):config.data_hide),config.legend_hide&&$$.addHiddenLegendIds(!0===config.legend_hide?$$.mapToIds($$.data.targets):config.legend_hide),$$.updateSizes(),$$.updateScales(),$$.x.domain(d3.extent($$.getXDomain($$.data.targets))),$$.y.domain($$.getYDomain($$.data.targets,"y")),$$.y2.domain($$.getYDomain($$.data.targets,"y2")),$$.subX.domain($$.x.domain()),$$.subY.domain($$.y.domain()),$$.subY2.domain($$.y2.domain()),$$.orgXDomain=$$.x.domain(),$$.brush&&$$.brush.scale($$.subX),config.zoom_enabled&&$$.zoom.scale($$.x),$$.svg=$$.selectChart.append("svg").style("overflow",
"hidden").on("mouseenter",function(){return config.onmouseover.call($$)}).on("mouseleave",function(){return config.onmouseout.call($$)}),$$.config.svg_classname&&$$.svg.attr("class",$$.config.svg_classname),defs=$$.svg.append("defs"),$$.clipChart=$$.appendClip(defs,$$.clipId),$$.clipXAxis=$$.appendClip(defs,$$.clipIdForXAxis),$$.clipYAxis=$$.appendClip(defs,$$.clipIdForYAxis),$$.clipGrid=$$.appendClip(defs,$$.clipIdForGrid),$$.clipSubchart=$$.appendClip(defs,$$.clipIdForSubchart),$$.updateSvgSize(),main=$$.main=$$.svg.append("g").attr("transform",$$.getTranslate("main")),$$.initSubchart&&$$.initSubchart(),$$.initTooltip&&$$.initTooltip(),
$$.initLegend&&$$.initLegend(),$$.initTitle&&$$.initTitle(),main.append("text").attr("class",CLASS.text+" "+CLASS.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),$$.initRegion(),$$.initGrid(),main.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.chart),config.grid_lines_front&&$$.initGridLines(),$$.initEventRect(),$$.initChartElements(),main.insert("rect",config.zoom_privileged?null:"g."+CLASS.regions).attr("class",CLASS.zoomRect).attr("width",$$.width).attr("height",$$.height).style("opacity",0).on("dblclick.zoom",null),config.axis_x_extent&&$$.brush.extent($$.getDefaultExtent()),$$.axis.init(),$$.updateTargets(
$$.data.targets),binding&&($$.updateDimension(),$$.config.oninit.call($$),$$.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),$$.bindResize(),$$.api.element=$$.selectChart.node()},c3_chart_internal_fn.smoothLines=function(el,type){var $$=this;"grid"===type&&el.each(function(){var g=$$.d3.select(this),x1=g.attr("x1"),x2=g.attr("x2"),y1=g.attr("y1"),y2=g.attr("y2");g.attr({x1:Math.ceil(x1),x2:Math.ceil(x2),y1:Math.ceil(y1),y2:Math.ceil(y2)})})},c3_chart_internal_fn.updateSizes=function(){var $$=this,config=$$.config,legendHeight=$$.legend?$$.getLegendHeight():0,
legendWidth=$$.legend?$$.getLegendWidth():0,legendHeightForBottom=$$.isLegendRight||$$.isLegendInset?0:legendHeight,hasArc=$$.hasArcType(),xAxisHeight=config.axis_rotated||hasArc?0:$$.getHorizontalAxisHeight("x"),subchartHeight=config.subchart_show&&!hasArc?config.subchart_size_height+xAxisHeight:0;$$.currentWidth=$$.getCurrentWidth(),$$.currentHeight=$$.getCurrentHeight(),$$.margin=config.axis_rotated?{top:$$.getHorizontalAxisHeight("y2")+$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:$$.getHorizontalAxisHeight("y")+legendHeightForBottom+$$.getCurrentPaddingBottom(),left:subchartHeight+(hasArc?0:$$.getCurrentPaddingLeft())}:{
top:4+$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:xAxisHeight+subchartHeight+legendHeightForBottom+$$.getCurrentPaddingBottom(),left:hasArc?0:$$.getCurrentPaddingLeft()},$$.margin2=config.axis_rotated?{top:$$.margin.top,right:NaN,bottom:20+legendHeightForBottom,left:$$.rotated_padding_left}:{top:$$.currentHeight-subchartHeight-legendHeightForBottom,right:NaN,bottom:xAxisHeight+legendHeightForBottom,left:$$.margin.left},$$.margin3={top:0,right:NaN,bottom:0,left:0},$$.updateSizeForLegend&&$$.updateSizeForLegend(legendHeight,legendWidth),$$.width=$$.currentWidth-$$.margin.left-$$.margin.right,
$$.height=$$.currentHeight-$$.margin.top-$$.margin.bottom,$$.width<0&&($$.width=0),$$.height<0&&($$.height=0),$$.width2=config.axis_rotated?$$.margin.left-$$.rotated_padding_left-$$.rotated_padding_right:$$.width,$$.height2=config.axis_rotated?$$.height:$$.currentHeight-$$.margin2.top-$$.margin2.bottom,$$.width2<0&&($$.width2=0),$$.height2<0&&($$.height2=0),$$.arcWidth=$$.width-($$.isLegendRight?legendWidth+10:0),$$.arcHeight=$$.height-($$.isLegendRight?0:10),$$.hasType("gauge")&&!config.gauge_fullCircle&&($$.arcHeight+=$$.height-$$.getGaugeLabelHeight()),$$.updateRadius&&$$.updateRadius(),$$.isLegendRight&&hasArc&&(
$$.margin3.left=$$.arcWidth/2+1.1*$$.radiusExpanded)},c3_chart_internal_fn.updateTargets=function(targets){var $$=this;$$.updateTargetsForText(targets),$$.updateTargetsForBar(targets),$$.updateTargetsForLine(targets),$$.hasArcType()&&$$.updateTargetsForArc&&$$.updateTargetsForArc(targets),$$.updateTargetsForSubchart&&$$.updateTargetsForSubchart(targets),$$.showTargets()},c3_chart_internal_fn.showTargets=function(){var $$=this;$$.svg.selectAll("."+CLASS.target).filter(function(d){return $$.isTargetToShow(d.id)}).transition().duration($$.config.transition_duration).style("opacity",1)},c3_chart_internal_fn.redraw=function(options,transitions){var withY,
withSubchart,withTransition,withTransitionForExit,withTransitionForAxis,withTransform,withUpdateXDomain,withUpdateOrgXDomain,withTrimXDomain,withLegend,withEventRect,withDimension,withUpdateXAxis,drawArea,drawBar,drawLine,xForText,yForText,duration,durationForExit,durationForAxis,waitForDraw,flow,tickValues,i,intervalForCulling,xDomainForZoom,cx,cy,$$=this,main=$$.main,d3=$$.d3,config=$$.config,areaIndices=$$.getShapeIndices($$.isAreaType),barIndices=$$.getShapeIndices($$.isBarType),lineIndices=$$.getShapeIndices($$.isLineType),hideAxis=$$.hasArcType(),targetsToShow=$$.filterTargetsToShow($$.data.targets),xv=$$.xv.bind($$);if(withY=getOption(
options=options||{},"withY",!0),withSubchart=getOption(options,"withSubchart",!0),withTransition=getOption(options,"withTransition",!0),withTransform=getOption(options,"withTransform",!1),withUpdateXDomain=getOption(options,"withUpdateXDomain",!1),withUpdateOrgXDomain=getOption(options,"withUpdateOrgXDomain",!1),withTrimXDomain=getOption(options,"withTrimXDomain",!0),withUpdateXAxis=getOption(options,"withUpdateXAxis",withUpdateXDomain),withLegend=getOption(options,"withLegend",!1),withEventRect=getOption(options,"withEventRect",!0),withDimension=getOption(options,"withDimension",!0),withTransitionForExit=getOption(options,"withTransitionForExit",
withTransition),withTransitionForAxis=getOption(options,"withTransitionForAxis",withTransition),duration=withTransition?config.transition_duration:0,durationForExit=withTransitionForExit?duration:0,durationForAxis=withTransitionForAxis?duration:0,transitions=transitions||$$.axis.generateTransitions(durationForAxis),withLegend&&config.legend_show?$$.updateLegend($$.mapToIds($$.data.targets),options,transitions):withDimension&&$$.updateDimension(!0),$$.isCategorized()&&0===targetsToShow.length&&$$.x.domain([0,$$.axes.x.selectAll(".tick").size()]),targetsToShow.length?($$.updateXDomain(targetsToShow,withUpdateXDomain,withUpdateOrgXDomain,withTrimXDomain),
config.axis_x_tick_values||(tickValues=$$.axis.updateXAxisTickValues(targetsToShow))):($$.xAxis.tickValues([]),$$.subXAxis.tickValues([])),config.zoom_rescale&&!options.flow&&(xDomainForZoom=$$.x.orgDomain()),$$.y.domain($$.getYDomain(targetsToShow,"y",xDomainForZoom)),$$.y2.domain($$.getYDomain(targetsToShow,"y2",xDomainForZoom)),!config.axis_y_tick_values&&config.axis_y_tick_count&&$$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(),config.axis_y_tick_count)),!config.axis_y2_tick_values&&config.axis_y2_tick_count&&$$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(),config.axis_y2_tick_count)),$$.axis.redraw(transitions,hideAxis),
$$.axis.updateLabels(withTransition),(withUpdateXDomain||withUpdateXAxis)&&targetsToShow.length)if(config.axis_x_tick_culling&&tickValues){for(i=1;i<tickValues.length;i++)if(tickValues.length/i<config.axis_x_tick_culling_max){intervalForCulling=i;break}$$.svg.selectAll("."+CLASS.axisX+" .tick text").each(function(e){var index=tickValues.indexOf(e);0<=index&&d3.select(this).style("display",index%intervalForCulling?"none":"block")})}else $$.svg.selectAll("."+CLASS.axisX+" .tick text").style("display","block");drawArea=$$.generateDrawArea?$$.generateDrawArea(areaIndices,!1):void 0,drawBar=$$.generateDrawBar?$$.generateDrawBar(barIndices):void 0,
drawLine=$$.generateDrawLine?$$.generateDrawLine(lineIndices,!1):void 0,xForText=$$.generateXYForText(areaIndices,barIndices,lineIndices,!0),yForText=$$.generateXYForText(areaIndices,barIndices,lineIndices,!1),withY&&($$.subY.domain($$.getYDomain(targetsToShow,"y")),$$.subY2.domain($$.getYDomain(targetsToShow,"y2"))),$$.updateXgridFocus(),main.select("text."+CLASS.text+"."+CLASS.empty).attr("x",$$.width/2).attr("y",$$.height/2).text(config.data_empty_label_text).transition().style("opacity",targetsToShow.length?0:1),$$.updateGrid(duration),$$.updateRegion(duration),$$.updateBar(durationForExit),$$.updateLine(durationForExit),$$.updateArea(durationForExit),
$$.updateCircle(),$$.hasDataLabel()&&$$.updateText(durationForExit),$$.redrawTitle&&$$.redrawTitle(),$$.redrawArc&&$$.redrawArc(duration,durationForExit,withTransform),$$.redrawSubchart&&$$.redrawSubchart(withSubchart,transitions,duration,durationForExit,areaIndices,barIndices,lineIndices),main.selectAll("."+CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll("circle").remove(),config.interaction_enabled&&!options.flow&&withEventRect&&($$.redrawEventRect(),$$.updateZoom&&$$.updateZoom()),$$.updateCircleY(),cx=($$.config.axis_rotated?$$.circleY:$$.circleX).bind($$),cy=($$.config.axis_rotated?$$.circleX:$$.circleY).bind($$),options.flow&&(
flow=$$.generateFlow({targets:targetsToShow,flow:options.flow,duration:options.flow.duration,drawBar:drawBar,drawLine:drawLine,drawArea:drawArea,cx:cx,cy:cy,xv:xv,xForText:xForText,yForText:yForText})),(duration||flow)&&$$.isTabVisible()?d3.transition().duration(duration).each(function(){var transitionsToWait=[];[$$.redrawBar(drawBar,!0),$$.redrawLine(drawLine,!0),$$.redrawArea(drawArea,!0),$$.redrawCircle(cx,cy,!0),$$.redrawText(xForText,yForText,options.flow,!0),$$.redrawRegion(!0),$$.redrawGrid(!0)].forEach(function(transitions){transitions.forEach(function(transition){transitionsToWait.push(transition)})}),waitForDraw=$$.generateWait(),
transitionsToWait.forEach(function(t){waitForDraw.add(t)})}).call(waitForDraw,function(){flow&&flow(),config.onrendered&&config.onrendered.call($$)}):($$.redrawBar(drawBar),$$.redrawLine(drawLine),$$.redrawArea(drawArea),$$.redrawCircle(cx,cy),$$.redrawText(xForText,yForText,options.flow),$$.redrawRegion(),$$.redrawGrid(),config.onrendered&&config.onrendered.call($$)),$$.mapToIds($$.data.targets).forEach(function(id){$$.withoutFadeIn[id]=!0})},c3_chart_internal_fn.updateAndRedraw=function(options){var transitions,$$=this,config=$$.config;(options=options||{}).withTransition=getOption(options,"withTransition",!0),options.withTransform=getOption(options,
"withTransform",!1),options.withLegend=getOption(options,"withLegend",!1),options.withUpdateXDomain=!0,options.withUpdateOrgXDomain=!0,options.withTransitionForExit=!1,options.withTransitionForTransform=getOption(options,"withTransitionForTransform",options.withTransition),$$.updateSizes(),options.withLegend&&config.legend_show||(transitions=$$.axis.generateTransitions(options.withTransitionForAxis?config.transition_duration:0),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(options.withTransitionForTransform,transitions)),$$.redraw(options,transitions)},c3_chart_internal_fn.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,
withEventRect:!1,withTransitionForAxis:!1})},c3_chart_internal_fn.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},c3_chart_internal_fn.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},c3_chart_internal_fn.isCustomX=function(){var config=this.config;return!this.isTimeSeries()&&(config.data_x||notEmpty(config.data_xs))},c3_chart_internal_fn.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},c3_chart_internal_fn.getTranslate=function(target){var x,y,$$=this,config=$$.config;return"main"===target?(x=asHalfPixel($$.margin.left),y=asHalfPixel($$.margin.top)):"context"===target?(x=asHalfPixel(
$$.margin2.left),y=asHalfPixel($$.margin2.top)):"legend"===target?(x=$$.margin3.left,y=$$.margin3.top):"x"===target?(x=0,y=config.axis_rotated?0:$$.height):"y"===target?(x=0,y=config.axis_rotated?$$.height:0):"y2"===target?(x=config.axis_rotated?0:$$.width,y=config.axis_rotated?1:0):"subx"===target?(x=0,y=config.axis_rotated?0:$$.height2):"arc"===target&&(x=$$.arcWidth/2,y=$$.arcHeight/2-($$.hasType("gauge")?6:0)),"translate("+x+","+y+")"},c3_chart_internal_fn.initialOpacity=function(d){return null!==d.value&&this.withoutFadeIn[d.id]?1:0},c3_chart_internal_fn.initialOpacityForCircle=function(d){
return null!==d.value&&this.withoutFadeIn[d.id]?this.opacityForCircle(d):0},c3_chart_internal_fn.opacityForCircle=function(d){var opacity=(isFunction(this.config.point_show)?this.config.point_show(d):this.config.point_show)?1:0;return isValue(d.value)?this.isScatterType(d)?.5:opacity:0},c3_chart_internal_fn.opacityForText=function(){return this.hasDataLabel()?1:0},c3_chart_internal_fn.xx=function(d){return d?this.x(d.x):null},c3_chart_internal_fn.xv=function(d){var $$=this,value=d.value;return $$.isTimeSeries()?value=$$.parseDate(d.value):$$.isCategorized()&&"string"==typeof d.value&&(value=$$.config.axis_x_categories.indexOf(d.value)),Math.ceil($$.x(value))
},c3_chart_internal_fn.yv=function(d){var yScale=d.axis&&"y2"===d.axis?this.y2:this.y;return Math.ceil(yScale(d.value))},c3_chart_internal_fn.subxx=function(d){return d?this.subX(d.x):null},c3_chart_internal_fn.transformMain=function(withTransition,transitions){var xAxis,yAxis,y2Axis,$$=this;transitions&&transitions.axisX?xAxis=transitions.axisX:(xAxis=$$.main.select("."+CLASS.axisX),withTransition&&(xAxis=xAxis.transition())),transitions&&transitions.axisY?yAxis=transitions.axisY:(yAxis=$$.main.select("."+CLASS.axisY),withTransition&&(yAxis=yAxis.transition())),transitions&&transitions.axisY2?y2Axis=transitions.axisY2:(y2Axis=$$.main.select("."+CLASS.axisY2
),withTransition&&(y2Axis=y2Axis.transition())),(withTransition?$$.main.transition():$$.main).attr("transform",$$.getTranslate("main")),xAxis.attr("transform",$$.getTranslate("x")),yAxis.attr("transform",$$.getTranslate("y")),y2Axis.attr("transform",$$.getTranslate("y2")),$$.main.select("."+CLASS.chartArcs).attr("transform",$$.getTranslate("arc"))},c3_chart_internal_fn.transformAll=function(withTransition,transitions){var $$=this;$$.transformMain(withTransition,transitions),$$.config.subchart_show&&$$.transformContext(withTransition,transitions),$$.legend&&$$.transformLegend(withTransition)},c3_chart_internal_fn.updateSvgSize=function(){var $$=this,
brush=$$.svg.select(".c3-brush .background");$$.svg.attr("width",$$.currentWidth).attr("height",$$.currentHeight),$$.svg.selectAll(["#"+$$.clipId,"#"+$$.clipIdForGrid]).select("rect").attr("width",$$.width).attr("height",$$.height),$$.svg.select("#"+$$.clipIdForXAxis).select("rect").attr("x",$$.getXAxisClipX.bind($$)).attr("y",$$.getXAxisClipY.bind($$)).attr("width",$$.getXAxisClipWidth.bind($$)).attr("height",$$.getXAxisClipHeight.bind($$)),$$.svg.select("#"+$$.clipIdForYAxis).select("rect").attr("x",$$.getYAxisClipX.bind($$)).attr("y",$$.getYAxisClipY.bind($$)).attr("width",$$.getYAxisClipWidth.bind($$)).attr("height",$$.getYAxisClipHeight.bind($$)),
$$.svg.select("#"+$$.clipIdForSubchart).select("rect").attr("width",$$.width).attr("height",brush.size()?brush.attr("height"):0),$$.svg.select("."+CLASS.zoomRect).attr("width",$$.width).attr("height",$$.height),$$.selectChart.style("max-height",$$.currentHeight+"px")},c3_chart_internal_fn.updateDimension=function(withoutAxis){var $$=this;withoutAxis||($$.config.axis_rotated?($$.axes.x.call($$.xAxis),$$.axes.subx.call($$.subXAxis)):($$.axes.y.call($$.yAxis),$$.axes.y2.call($$.y2Axis))),$$.updateSizes(),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(!1)},c3_chart_internal_fn.observeInserted=function(selection){var observer,$$=this
;"undefined"!=typeof MutationObserver?(observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){"childList"===mutation.type&&mutation.previousSibling&&(observer.disconnect(),$$.intervalForObserveInserted=window.setInterval(function(){selection.node().parentNode&&(window.clearInterval($$.intervalForObserveInserted),$$.updateDimension(),$$.brush&&$$.brush.update(),$$.config.oninit.call($$),$$.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),selection.transition().style("opacity",1))},10))})})).observe(selection.node(),{attributes:!0,childList:!0,
characterData:!0}):window.console.error("MutationObserver not defined.")},c3_chart_internal_fn.bindResize=function(){var $$=this,config=$$.config;if($$.resizeFunction=$$.generateResize(),$$.resizeFunction.add(function(){config.onresize.call($$)}),config.resize_auto&&$$.resizeFunction.add(function(){void 0!==$$.resizeTimeout&&window.clearTimeout($$.resizeTimeout),$$.resizeTimeout=window.setTimeout(function(){delete $$.resizeTimeout,$$.api.flush()},100)}),$$.resizeFunction.add(function(){config.onresized.call($$)}),$$.resizeIfElementDisplayed=function(){null!=$$.api&&$$.api.element.offsetParent&&$$.resizeFunction()},window.attachEvent)window.attachEvent(
"onresize",$$.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",$$.resizeIfElementDisplayed,!1);else{var wrapper=window.onresize;wrapper?wrapper.add&&wrapper.remove||(wrapper=$$.generateResize()).add(window.onresize):wrapper=$$.generateResize(),wrapper.add($$.resizeFunction),window.onresize=function(){$$.api.element.offsetParent&&wrapper()}}},c3_chart_internal_fn.generateResize=function(){var resizeFunctions=[];function callResizeFunctions(){resizeFunctions.forEach(function(f){f()})}return callResizeFunctions.add=function(f){resizeFunctions.push(f)},callResizeFunctions.remove=function(f){for(
var i=0;i<resizeFunctions.length;i++)if(resizeFunctions[i]===f){resizeFunctions.splice(i,1);break}},callResizeFunctions},c3_chart_internal_fn.endall=function(transition,callback){var n=0;transition.each(function(){++n}).each("end",function(){--n||callback.apply(this,arguments)})},c3_chart_internal_fn.generateWait=function(){var transitionsToWait=[],f=function(transition,callback){var timer=setInterval(function(){var done=0;transitionsToWait.forEach(function(t){if(t.empty())done+=1;else try{t.transition()}catch(e){done+=1}}),done===transitionsToWait.length&&(clearInterval(timer),callback&&callback())},10)};return f.add=function(transition){
transitionsToWait.push(transition)},f},c3_chart_internal_fn.parseDate=function(date){var parsedDate;return date instanceof Date?parsedDate=date:"string"==typeof date?parsedDate=this.dataTimeFormat(this.config.data_xFormat).parse(date):"object"===(void 0===date?"undefined":_typeof(date))?parsedDate=new Date(+date):"number"!=typeof date||isNaN(date)||(parsedDate=new Date(+date)),parsedDate&&!isNaN(+parsedDate)||window.console.error("Failed to parse x '"+date+"' to Date object"),parsedDate},c3_chart_internal_fn.isTabVisible=function(){var hidden
;return void 0!==document.hidden?hidden="hidden":void 0!==document.mozHidden?hidden="mozHidden":void 0!==document.msHidden?hidden="msHidden":void 0!==document.webkitHidden&&(hidden="webkitHidden"),!document[hidden]},c3_chart_internal_fn.isValue=isValue,c3_chart_internal_fn.isFunction=isFunction,c3_chart_internal_fn.isString=isString,c3_chart_internal_fn.isUndefined=isUndefined,c3_chart_internal_fn.isDefined=isDefined,c3_chart_internal_fn.ceil10=ceil10,c3_chart_internal_fn.asHalfPixel=asHalfPixel,c3_chart_internal_fn.diffDomain=diffDomain,c3_chart_internal_fn.isEmpty=isEmpty,c3_chart_internal_fn.notEmpty=notEmpty,c3_chart_internal_fn.notEmpty=notEmpty,
c3_chart_internal_fn.getOption=getOption,c3_chart_internal_fn.hasValue=hasValue,c3_chart_internal_fn.sanitise=sanitise,c3_chart_internal_fn.getPathBox=getPathBox,c3_chart_internal_fn.CLASS=CLASS,Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound}),
"SVGPathSeg"in window||(window.SVGPathSeg=function(type,typeAsLetter,owningPathSegList){this.pathSegType=type,this.pathSegTypeAsLetter=typeAsLetter,this._owningPathSegList=owningPathSegList},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,
window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(
owningPathSegList){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",owningPathSegList)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",owningPathSegList),this._x=x,this._y=y},
window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y
},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},
Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},
window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,
window.SVGPathSeg.PATHSEG_LINETO_REL,"l",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),
Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(owningPathSegList,x,y,x1,y1,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){
return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(
window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),
window.SVGPathSegCurvetoCubicRel=function(owningPathSegList,x,y,x1,y1,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},
window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},
enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(owningPathSegList,x,y,x1,y1){window.SVGPathSeg.call(this,
window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(
window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},
enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(owningPathSegList,x,y,x1,y1){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){
return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(
window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(owningPathSegList,x,y,r1,r2,angle,largeArcFlag,sweepFlag){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",owningPathSegList),this._x=x,this._y=y,this._r1=r1,this._r2=r2,this._angle=angle,this._largeArcFlag=largeArcFlag,this._sweepFlag=sweepFlag},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},
window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(y){
this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(r1){this._r1=r1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(r2){this._r2=r2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(angle){this._angle=angle,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag
},set:function(largeArcFlag){this._largeArcFlag=largeArcFlag,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(sweepFlag){this._sweepFlag=sweepFlag,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(owningPathSegList,x,y,r1,r2,angle,largeArcFlag,sweepFlag){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",owningPathSegList),this._x=x,this._y=y,this._r1=r1,this._r2=r2,this._angle=angle,this._largeArcFlag=largeArcFlag,this._sweepFlag=sweepFlag},window.SVGPathSegArcRel.prototype=Object.create(
window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},
enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(r1){this._r1=r1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(r2){this._r2=r2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(angle){this._angle=angle,this._segmentChanged()},
enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(largeArcFlag){this._largeArcFlag=largeArcFlag,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(sweepFlag){this._sweepFlag=sweepFlag,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(owningPathSegList,x){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",owningPathSegList),this._x=x},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(
window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(owningPathSegList,x){window.SVGPathSeg.call(this,
window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",owningPathSegList),this._x=x},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,
this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(owningPathSegList,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",owningPathSegList),this._y=y},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},
Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(owningPathSegList,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",owningPathSegList),this._y=y},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},
window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(owningPathSegList,x,y,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",owningPathSegList),this._x=x,this._y=y,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),
window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(
window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(owningPathSegList,x,y,x2,y2){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s"
,owningPathSegList),this._x=x,this._y=y,this._x2=x2,this._y2=y2},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x"
,{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),
window.SVGPathSegCurvetoQuadraticSmoothAbs=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",owningPathSegList),this._x=x,this._y=y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){
return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(owningPathSegList,x,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",owningPathSegList),this._x=x,this._y=y},
window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()
},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(x,y){return new window.SVGPathSegMovetoAbs(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(x,y){return new window.SVGPathSegMovetoRel(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(x,y){
return new window.SVGPathSegLinetoAbs(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(x,y){return new window.SVGPathSegLinetoRel(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(x,y,x1,y1,x2,y2){return new window.SVGPathSegCurvetoCubicAbs(void 0,x,y,x1,y1,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(x,y,x1,y1,x2,y2){return new window.SVGPathSegCurvetoCubicRel(void 0,x,y,x1,y1,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(x,y,x1,y1){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,x,y,x1,y1)},
window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(x,y,x1,y1){return new window.SVGPathSegCurvetoQuadraticRel(void 0,x,y,x1,y1)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(x,y,r1,r2,angle,largeArcFlag,sweepFlag){return new window.SVGPathSegArcAbs(void 0,x,y,r1,r2,angle,largeArcFlag,sweepFlag)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(x,y,r1,r2,angle,largeArcFlag,sweepFlag){return new window.SVGPathSegArcRel(void 0,x,y,r1,r2,angle,largeArcFlag,sweepFlag)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(x){return new window.SVGPathSegLinetoHorizontalAbs(void 0,x)
},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(x){return new window.SVGPathSegLinetoHorizontalRel(void 0,x)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(y){return new window.SVGPathSegLinetoVerticalAbs(void 0,y)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(y){return new window.SVGPathSegLinetoVerticalRel(void 0,y)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(x,y,x2,y2){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,x,y,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(x,y,x2,y2){
return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,x,y,x2,y2)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(x,y){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,x,y)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(x,y){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,x,y)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(distance){if(void 0===distance||!isFinite(distance))throw"Invalid arguments.";var measurementElement=document.createElementNS("http://www.w3.org/2000/svg","path")
;measurementElement.setAttribute("d",this.getAttribute("d"));var lastPathSegment=measurementElement.pathSegList.numberOfItems-1;if(lastPathSegment<=0)return 0;do{if(measurementElement.pathSegList.removeItem(lastPathSegment),distance>measurementElement.getTotalLength())break;lastPathSegment--}while(0<lastPathSegment);return lastPathSegment})),"SVGPathSegList"in window||(window.SVGPathSegList=function(pathElement){this._pathElement=pathElement,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(
this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){
return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(mutationRecords){if(this._pathElement){var hasPathMutations=!1;mutationRecords.forEach(function(record){
"d"==record.attributeName&&(hasPathMutations=!0)}),hasPathMutations&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(pathSeg){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(pathSeg){
pathSeg._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(newItem){return this._checkPathSynchronizedToList(),this._list=[newItem],(newItem._owningPathSegList=this)._writeListToPath(),newItem},window.SVGPathSegList.prototype._checkValidIndex=function(index){if(isNaN(index)||index<0||index>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(index){return this._checkPathSynchronizedToList(),this._checkValidIndex(index),this._list[index]},window.SVGPathSegList.prototype.insertItemBefore=function(newItem,index){return this._checkPathSynchronizedToList(),
index>this.numberOfItems&&(index=this.numberOfItems),newItem._owningPathSegList&&(newItem=newItem.clone()),this._list.splice(index,0,newItem),(newItem._owningPathSegList=this)._writeListToPath(),newItem},window.SVGPathSegList.prototype.replaceItem=function(newItem,index){return this._checkPathSynchronizedToList(),newItem._owningPathSegList&&(newItem=newItem.clone()),this._checkValidIndex(index),((this._list[index]=newItem)._owningPathSegList=this)._writeListToPath(),newItem},window.SVGPathSegList.prototype.removeItem=function(index){this._checkPathSynchronizedToList(),this._checkValidIndex(index);var item=this._list[index];return this._list.splice(index,1),
this._writeListToPath(),item},window.SVGPathSegList.prototype.appendItem=function(newItem){return this._checkPathSynchronizedToList(),newItem._owningPathSegList&&(newItem=newItem.clone()),this._list.push(newItem),(newItem._owningPathSegList=this)._writeListToPath(),newItem},window.SVGPathSegList._pathSegArrayAsString=function(pathSegArray){var string="",first=!0;return pathSegArray.forEach(function(pathSeg){first?(first=!1,string+=pathSeg._asPathString()):string+=" "+pathSeg._asPathString()}),string},window.SVGPathSegList.prototype._parsePath=function(string){if(!string||0==string.length)return[];var owningPathSegList=this,Builder=function(){
this.pathSegList=[]};Builder.prototype.appendSegment=function(pathSeg){this.pathSegList.push(pathSeg)};var Source=function(string){this._string=string,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};Source.prototype._isCurrentSpace=function(){var character=this._string[this._currentIndex];return character<=" "&&(" "==character||"\n"==character||"\t"==character||"\r"==character||"\f"==character)},Source.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},
Source.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},Source.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},Source.prototype.peekSegmentType=function(){var lookahead=this._string[this._currentIndex];return this._pathSegTypeFromChar(lookahead)},Source.prototype._pathSegTypeFromChar=function(lookahead){switch(lookahead){
case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":
return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},Source.prototype._nextCommandHelper=function(lookahead,previousCommand){return(
"+"==lookahead||"-"==lookahead||"."==lookahead||"0"<=lookahead&&lookahead<="9")&&previousCommand!=window.SVGPathSeg.PATHSEG_CLOSEPATH?previousCommand==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:previousCommand==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:previousCommand:window.SVGPathSeg.PATHSEG_UNKNOWN},Source.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var command=this.peekSegmentType();return command==window.SVGPathSeg.PATHSEG_MOVETO_ABS||command==window.SVGPathSeg.PATHSEG_MOVETO_REL},Source.prototype._parseNumber=function(){var exponent=0,integer=0,frac=1,
decimal=0,sign=1,expsign=1,startIndex=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,sign=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var startIntPartIndex=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";
)this._currentIndex++;if(this._currentIndex!=startIntPartIndex)for(var scanIntPartIndex=this._currentIndex-1,multiplier=1;startIntPartIndex<=scanIntPartIndex;)integer+=multiplier*(this._string.charAt(scanIntPartIndex--)-"0"),multiplier*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)frac*=10,decimal+=(this._string.charAt(
this._currentIndex)-"0")/frac,this._currentIndex+=1}if(this._currentIndex!=startIndex&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,expsign=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(
;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)exponent*=10,exponent+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var number=integer+decimal;if(number*=sign,exponent&&(number*=Math.pow(10,expsign*exponent)),startIndex!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),number}},Source.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var flag=!1,flagChar=this._string.charAt(this._currentIndex++);if("0"==flagChar)flag=!1;else{if("1"!=flagChar)return;flag=!0}return this._skipOptionalSpacesOrDelimiter(),flag}},
Source.prototype.parseSegment=function(){var lookahead=this._string[this._currentIndex],command=this._pathSegTypeFromChar(lookahead);if(command==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((command=this._nextCommandHelper(lookahead,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=command){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(
owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList,this._parseNumber())
;case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(owningPathSegList,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(owningPathSegList);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var points={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(owningPathSegList,points.x
,points.y,points.x1,points.y1,points.x2,points.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return points={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(owningPathSegList,points.x,points.y,points.x1,points.y1,points.x2,points.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return points={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList,points.x,points.y,points.x2,points.y2)
;case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return points={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList,points.x,points.y,points.x2,points.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return points={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList,points.x,points.y,points.x1,points.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return points={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),
y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList,points.x,points.y,points.x1,points.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return points={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),
x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(owningPathSegList,points.x,points.y,points.x1,points.y1,points.arcAngle,points.arcLarge,points.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return points={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(owningPathSegList,points.x,points.y,points.x1,points.y1,points.arcAngle,points.arcLarge,points.arcSweep);default:throw"Unknown path seg type."}};var builder=new Builder,source=new Source(string);if(
!source.initialCommandIsMoveTo())return[];for(;source.hasMoreData();){var pathSeg=source.parseSegment();if(!pathSeg)return[];builder.appendSegment(pathSeg)}return builder.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(targetLength,padString){return targetLength>>=0,padString=String(void 0!==padString?padString:" "),this.length>targetLength?String(this):((targetLength-=this.length)>padString.length&&(padString+=padString.repeat(targetLength/padString.length)),String(this)+padString.slice(0,targetLength))}),c3_chart_fn.axis=function(){},c3_chart_fn.axis.labels=function(labels){var $$=this.internal;arguments.length&&(Object.keys(labels
).forEach(function(axisId){$$.axis.setLabelText(axisId,labels[axisId])}),$$.axis.updateLabels())},c3_chart_fn.axis.max=function(max){var $$=this.internal,config=$$.config;if(!arguments.length)return{x:config.axis_x_max,y:config.axis_y_max,y2:config.axis_y2_max};"object"===(void 0===max?"undefined":_typeof(max))?(isValue(max.x)&&(config.axis_x_max=max.x),isValue(max.y)&&(config.axis_y_max=max.y),isValue(max.y2)&&(config.axis_y2_max=max.y2)):config.axis_y_max=config.axis_y2_max=max,$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},c3_chart_fn.axis.min=function(min){var $$=this.internal,config=$$.config;if(!arguments.length)return{x:config.axis_x_min,
y:config.axis_y_min,y2:config.axis_y2_min};"object"===(void 0===min?"undefined":_typeof(min))?(isValue(min.x)&&(config.axis_x_min=min.x),isValue(min.y)&&(config.axis_y_min=min.y),isValue(min.y2)&&(config.axis_y2_min=min.y2)):config.axis_y_min=config.axis_y2_min=min,$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},c3_chart_fn.axis.range=function(range){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};isDefined(range.max)&&this.axis.max(range.max),isDefined(range.min)&&this.axis.min(range.min)},c3_chart_fn.category=function(i,category){var $$=this.internal,config=$$.config;return 1<arguments.length&&(
config.axis_x_categories[i]=category,$$.redraw()),config.axis_x_categories[i]},c3_chart_fn.categories=function(categories){var $$=this.internal,config=$$.config;return arguments.length&&(config.axis_x_categories=categories,$$.redraw()),config.axis_x_categories},c3_chart_fn.resize=function(size){var config=this.internal.config;config.size_width=size?size.width:null,config.size_height=size?size.height:null,this.flush()},c3_chart_fn.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},c3_chart_fn.destroy=function(){var $$=this.internal;if(window.clearInterval($$.intervalForObserveInserted),
void 0!==$$.resizeTimeout&&window.clearTimeout($$.resizeTimeout),window.detachEvent)window.detachEvent("onresize",$$.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",$$.resizeIfElementDisplayed);else{var wrapper=window.onresize;wrapper&&wrapper.add&&wrapper.remove&&wrapper.remove($$.resizeFunction)}return $$.resizeFunction.remove(),$$.selectChart.classed("c3",!1).html(""),Object.keys($$).forEach(function(key){$$[key]=null}),null},c3_chart_fn.color=function(id){return this.internal.color(id)},c3_chart_fn.data=function(targetIds){var targets=this.internal.data.targets
;return void 0===targetIds?targets:targets.filter(function(t){return 0<=[].concat(targetIds).indexOf(t.id)})},c3_chart_fn.data.shown=function(targetIds){return this.internal.filterTargetsToShow(this.data(targetIds))},c3_chart_fn.data.values=function(targetId){var targets,values=null;return targetId&&(values=(targets=this.data(targetId))[0]?targets[0].values.map(function(d){return d.value}):null),values},c3_chart_fn.data.names=function(names){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",names)},c3_chart_fn.data.colors=function(colors){return this.internal.updateDataAttributes("colors",colors)},
c3_chart_fn.data.axes=function(axes){return this.internal.updateDataAttributes("axes",axes)},c3_chart_fn.flow=function(args){var targets,data,domain,baseTarget,baseValue,diff,to,$$=this.internal,notfoundIds=[],orgDataCount=$$.getMaxDataCount(),length=0,tail=0;if(args.json)data=$$.convertJsonToData(args.json,args.keys);else if(args.rows)data=$$.convertRowsToData(args.rows);else{if(!args.columns)return;data=$$.convertColumnsToData(args.columns)}targets=$$.convertDataToTargets(data,!0),$$.data.targets.forEach(function(t){var i,j,found=!1;for(i=0;i<targets.length;i++)if(t.id===targets[i].id){for(found=!0,t.values[t.values.length-1]&&(
tail=t.values[t.values.length-1].index+1),length=targets[i].values.length,j=0;j<length;j++)targets[i].values[j].index=tail+j,$$.isTimeSeries()||(targets[i].values[j].x=tail+j);t.values=t.values.concat(targets[i].values),targets.splice(i,1);break}found||notfoundIds.push(t.id)}),$$.data.targets.forEach(function(t){var i,j;for(i=0;i<notfoundIds.length;i++)if(t.id===notfoundIds[i])for(tail=t.values[t.values.length-1].index+1,j=0;j<length;j++)t.values.push({id:t.id,index:tail+j,x:$$.isTimeSeries()?$$.getOtherTargetX(tail+j):tail+j,value:null})}),$$.data.targets.length&&targets.forEach(function(t){var i,missing=[];for(
i=$$.data.targets[0].values[0].index;i<tail;i++)missing.push({id:t.id,index:i,x:$$.isTimeSeries()?$$.getOtherTargetX(i):i,value:null});t.values.forEach(function(v){v.index+=tail,$$.isTimeSeries()||(v.x+=tail)}),t.values=missing.concat(t.values)}),$$.data.targets=$$.data.targets.concat(targets),$$.getMaxDataCount(),baseValue=(baseTarget=$$.data.targets[0]).values[0],isDefined(args.to)?(length=0,to=$$.isTimeSeries()?$$.parseDate(args.to):args.to,baseTarget.values.forEach(function(v){v.x<to&&length++})):isDefined(args.length)&&(length=args.length),orgDataCount?1===orgDataCount&&$$.isTimeSeries()&&(diff=(
baseTarget.values[baseTarget.values.length-1].x-baseValue.x)/2,domain=[new Date(+baseValue.x-diff),new Date(+baseValue.x+diff)],$$.updateXDomain(null,!0,!0,!1,domain)):(diff=$$.isTimeSeries()?1<baseTarget.values.length?baseTarget.values[baseTarget.values.length-1].x-baseValue.x:baseValue.x-$$.getXDomain($$.data.targets)[0]:1,domain=[baseValue.x-diff,baseValue.x],$$.updateXDomain(null,!0,!0,!1,domain)),$$.updateTargets($$.data.targets),$$.redraw({flow:{index:baseValue.index,length:length,duration:isValue(args.duration)?args.duration:$$.config.transition_duration,done:args.done,orgDataCount:orgDataCount},withLegend:!0,withTransition:1<orgDataCount,
withTrimXDomain:!1,withUpdateXAxis:!0})},c3_chart_internal_fn.generateFlow=function(args){var $$=this,config=$$.config,d3=$$.d3;return function(){var translateX,scaleX,transform,domain,targets=args.targets,flow=args.flow,drawBar=args.drawBar,drawLine=args.drawLine,drawArea=args.drawArea,cx=args.cx,cy=args.cy,xv=args.xv,xForText=args.xForText,yForText=args.yForText,duration=args.duration,flowIndex=flow.index,flowLength=flow.length,flowStart=$$.getValueOnIndex($$.data.targets[0].values,flowIndex),flowEnd=$$.getValueOnIndex($$.data.targets[0].values,flowIndex+flowLength),orgDomain=$$.x.domain(),durationForFlow=flow.duration||duration,done=flow.done||function(
){},wait=$$.generateWait(),xgrid=$$.xgrid||d3.selectAll([]),xgridLines=$$.xgridLines||d3.selectAll([]),mainRegion=$$.mainRegion||d3.selectAll([]),mainText=$$.mainText||d3.selectAll([]),mainBar=$$.mainBar||d3.selectAll([]),mainLine=$$.mainLine||d3.selectAll([]),mainArea=$$.mainArea||d3.selectAll([]),mainCircle=$$.mainCircle||d3.selectAll([]);$$.flowing=!0,$$.data.targets.forEach(function(d){d.values.splice(0,flowLength)}),domain=$$.updateXDomain(targets,!0,!0),$$.updateXGrid&&$$.updateXGrid(!0),translateX=flow.orgDataCount?1===flow.orgDataCount||(flowStart&&flowStart.x)===(flowEnd&&flowEnd.x)?$$.x(orgDomain[0])-$$.x(domain[0]):$$.isTimeSeries()?$$.x(
orgDomain[0])-$$.x(domain[0]):$$.x(flowStart.x)-$$.x(flowEnd.x):1!==$$.data.targets[0].values.length?$$.x(orgDomain[0])-$$.x(domain[0]):$$.isTimeSeries()?(flowStart=$$.getValueOnIndex($$.data.targets[0].values,0),flowEnd=$$.getValueOnIndex($$.data.targets[0].values,$$.data.targets[0].values.length-1),$$.x(flowStart.x)-$$.x(flowEnd.x)):diffDomain(domain)/2,scaleX=diffDomain(orgDomain)/diffDomain(domain),transform="translate("+translateX+",0) scale("+scaleX+",1)",$$.hideXGridFocus(),d3.transition().ease("linear").duration(durationForFlow).each(function(){wait.add($$.axes.x.transition().call($$.xAxis)),wait.add(mainBar.transition().attr("transform",transform)),
wait.add(mainLine.transition().attr("transform",transform)),wait.add(mainArea.transition().attr("transform",transform)),wait.add(mainCircle.transition().attr("transform",transform)),wait.add(mainText.transition().attr("transform",transform)),wait.add(mainRegion.filter($$.isRegionOnX).transition().attr("transform",transform)),wait.add(xgrid.transition().attr("transform",transform)),wait.add(xgridLines.transition().attr("transform",transform))}).call(wait,function(){var i,shapes=[],texts=[],eventRects=[];if(flowLength){for(i=0;i<flowLength;i++)shapes.push("."+CLASS.shape+"-"+(flowIndex+i)),texts.push("."+CLASS.text+"-"+(flowIndex+i)),eventRects.push(
"."+CLASS.eventRect+"-"+(flowIndex+i));$$.svg.selectAll("."+CLASS.shapes).selectAll(shapes).remove(),$$.svg.selectAll("."+CLASS.texts).selectAll(texts).remove(),$$.svg.selectAll("."+CLASS.eventRects).selectAll(eventRects).remove(),$$.svg.select("."+CLASS.xgrid).remove()}xgrid.attr("transform",null).attr($$.xgridAttr),xgridLines.attr("transform",null),xgridLines.select("line").attr("x1",config.axis_rotated?0:xv).attr("x2",config.axis_rotated?$$.width:xv),xgridLines.select("text").attr("x",config.axis_rotated?$$.width:0).attr("y",xv),mainBar.attr("transform",null).attr("d",drawBar),mainLine.attr("transform",null).attr("d",drawLine),mainArea.attr("transform",
null).attr("d",drawArea),mainCircle.attr("transform",null).attr("cx",cx).attr("cy",cy),mainText.attr("transform",null).attr("x",xForText).attr("y",yForText).style("fill-opacity",$$.opacityForText.bind($$)),mainRegion.attr("transform",null),mainRegion.select("rect").filter($$.isRegionOnX).attr("x",$$.regionX.bind($$)).attr("width",$$.regionWidth.bind($$)),config.interaction_enabled&&$$.redrawEventRect(),done(),$$.flowing=!1})}},c3_chart_fn.focus=function(targetIds){var candidates,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),candidates=$$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$))),this.revert(),this.defocus(),
candidates.classed(CLASS.focused,!0).classed(CLASS.defocused,!1),$$.hasArcType()&&$$.expandArc(targetIds),$$.toggleFocusLegend(targetIds,!0),$$.focusedTargetIds=targetIds,$$.defocusedTargetIds=$$.defocusedTargetIds.filter(function(id){return targetIds.indexOf(id)<0})},c3_chart_fn.defocus=function(targetIds){var $$=this.internal;targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$))).classed(CLASS.focused,!1).classed(CLASS.defocused,!0),$$.hasArcType()&&$$.unexpandArc(targetIds),$$.toggleFocusLegend(targetIds,!1),$$.focusedTargetIds=$$.focusedTargetIds.filter(function(id){return targetIds.indexOf(id
)<0}),$$.defocusedTargetIds=targetIds},c3_chart_fn.revert=function(targetIds){var $$=this.internal;targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds)).classed(CLASS.focused,!1).classed(CLASS.defocused,!1),$$.hasArcType()&&$$.unexpandArc(targetIds),$$.config.legend_show&&($$.showLegend(targetIds.filter($$.isLegendToShow.bind($$))),$$.legend.selectAll($$.selectorLegends(targetIds)).filter(function(){return $$.d3.select(this).classed(CLASS.legendItemFocused)}).classed(CLASS.legendItemFocused,!1)),$$.focusedTargetIds=[],$$.defocusedTargetIds=[]},c3_chart_fn.xgrids=function(grids){var $$=this.internal,config=$$.config
;return grids&&(config.grid_x_lines=grids,$$.redrawWithoutRescale()),config.grid_x_lines},c3_chart_fn.xgrids.add=function(grids){var $$=this.internal;return this.xgrids($$.config.grid_x_lines.concat(grids||[]))},c3_chart_fn.xgrids.remove=function(params){this.internal.removeGridLines(params,!0)},c3_chart_fn.ygrids=function(grids){var $$=this.internal,config=$$.config;return grids&&(config.grid_y_lines=grids,$$.redrawWithoutRescale()),config.grid_y_lines},c3_chart_fn.ygrids.add=function(grids){var $$=this.internal;return this.ygrids($$.config.grid_y_lines.concat(grids||[]))},c3_chart_fn.ygrids.remove=function(params){this.internal.removeGridLines(params,!1)},
c3_chart_fn.groups=function(groups){var $$=this.internal,config=$$.config;return isUndefined(groups)||(config.data_groups=groups,$$.redraw()),config.data_groups},c3_chart_fn.legend=function(){},c3_chart_fn.legend.show=function(targetIds){var $$=this.internal;$$.showLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!0})},c3_chart_fn.legend.hide=function(targetIds){var $$=this.internal;$$.hideLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!0})},c3_chart_fn.load=function(args){var $$=this.internal,config=$$.config;args.xs&&$$.addXs(args.xs),"names"in args&&c3_chart_fn.data.names.bind(this)(args.names),
"classes"in args&&Object.keys(args.classes).forEach(function(id){config.data_classes[id]=args.classes[id]}),"categories"in args&&$$.isCategorized()&&(config.axis_x_categories=args.categories),"axes"in args&&Object.keys(args.axes).forEach(function(id){config.data_axes[id]=args.axes[id]}),"colors"in args&&Object.keys(args.colors).forEach(function(id){config.data_colors[id]=args.colors[id]}),"cacheIds"in args&&$$.hasCaches(args.cacheIds)?$$.load($$.getCaches(args.cacheIds),args.done):"unload"in args?$$.unload($$.mapToTargetIds("boolean"==typeof args.unload&&args.unload?null:args.unload),function(){$$.loadFromArgs(args)}):$$.loadFromArgs(args)},
c3_chart_fn.unload=function(args){var $$=this.internal;(args=args||{})instanceof Array?args={ids:args}:"string"==typeof args&&(args={ids:[args]}),$$.unload($$.mapToTargetIds(args.ids),function(){$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),args.done&&args.done()})},c3_chart_fn.regions=function(regions){var $$=this.internal,config=$$.config;return regions&&(config.regions=regions,$$.redrawWithoutRescale()),config.regions},c3_chart_fn.regions.add=function(regions){var $$=this.internal,config=$$.config;return regions&&(config.regions=config.regions.concat(regions),$$.redrawWithoutRescale()),config.regions},
c3_chart_fn.regions.remove=function(options){var duration,classes,regions,$$=this.internal,config=$$.config;return options=options||{},duration=$$.getOption(options,"duration",config.transition_duration),classes=$$.getOption(options,"classes",[CLASS.region]),regions=$$.main.select("."+CLASS.regions).selectAll(classes.map(function(c){return"."+c})),(duration?regions.transition().duration(duration):regions).style("opacity",0).remove(),config.regions=config.regions.filter(function(region){var found=!1;return!region.class||(region.class.split(" ").forEach(function(c){0<=classes.indexOf(c)&&(found=!0)}),!found)}),config.regions},c3_chart_fn.selected=function(
targetId){var $$=this.internal,d3=$$.d3;return d3.merge($$.main.selectAll("."+CLASS.shapes+$$.getTargetSelectorSuffix(targetId)).selectAll("."+CLASS.shape).filter(function(){return d3.select(this).classed(CLASS.SELECTED)}).map(function(d){return d.map(function(d){var data=d.__data__;return data.data?data.data:data})}))},c3_chart_fn.select=function(ids,indices,resetOther){var $$=this.internal,d3=$$.d3,config=$$.config;config.data_selection_enabled&&$$.main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).each(function(d,i){var shape=d3.select(this),id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),
isTargetId=config.data_selection_grouped||!ids||0<=ids.indexOf(id),isTargetIndex=!indices||0<=indices.indexOf(i),isSelected=shape.classed(CLASS.SELECTED);shape.classed(CLASS.line)||shape.classed(CLASS.area)||(isTargetId&&isTargetIndex?config.data_selection_isselectable(d)&&!isSelected&&toggle(!0,shape.classed(CLASS.SELECTED,!0),d,i):isDefined(resetOther)&&resetOther&&isSelected&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i))})},c3_chart_fn.unselect=function(ids,indices){var $$=this.internal,d3=$$.d3,config=$$.config;config.data_selection_enabled&&$$.main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).each(function(d,i){var shape=d3.select(this),
id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),isTargetId=config.data_selection_grouped||!ids||0<=ids.indexOf(id),isTargetIndex=!indices||0<=indices.indexOf(i),isSelected=shape.classed(CLASS.SELECTED);shape.classed(CLASS.line)||shape.classed(CLASS.area)||isTargetId&&isTargetIndex&&config.data_selection_isselectable(d)&&isSelected&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i)})},c3_chart_fn.show=function(targetIds,options){var targets,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),options=options||{},$$.removeHiddenTargetIds(targetIds),(targets=$$.svg.selectAll($$.selectorTargets(targetIds))).transition().style("opacity",1,
"important").call($$.endall,function(){targets.style("opacity",null).style("opacity",1)}),options.withLegend&&$$.showLegend(targetIds),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},c3_chart_fn.hide=function(targetIds,options){var targets,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),options=options||{},$$.addHiddenTargetIds(targetIds),(targets=$$.svg.selectAll($$.selectorTargets(targetIds))).transition().style("opacity",0,"important").call($$.endall,function(){targets.style("opacity",null).style("opacity",0)}),options.withLegend&&$$.hideLegend(targetIds),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,
withLegend:!0})},c3_chart_fn.toggle=function(targetIds,options){var that=this,$$=this.internal;$$.mapToTargetIds(targetIds).forEach(function(targetId){$$.isTargetToShow(targetId)?that.hide(targetId,options):that.show(targetId,options)})},c3_chart_fn.tooltip=function(){},c3_chart_fn.tooltip.show=function(args){var index,mouse,$$=this.internal;args.mouse&&(mouse=args.mouse),args.data?index=$$.isMultipleX()?(mouse=[$$.x(args.data.x),$$.getYScale(args.data.id)(args.data.value)],null):isValue(args.data.index)?args.data.index:$$.getIndexByX(args.data.x):void 0!==args.x?index=$$.getIndexByX(args.x):void 0!==args.index&&(index=args.index),$$.dispatchEvent(
"mouseover",index,mouse),$$.dispatchEvent("mousemove",index,mouse),$$.config.tooltip_onshow.call($$,args.data)},c3_chart_fn.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},c3_chart_fn.transform=function(type,targetIds){var $$=this.internal,options=0<=["pie","donut"].indexOf(type)?{withTransform:!0}:null;$$.transformTo(targetIds,type,options)},c3_chart_internal_fn.transformTo=function(targetIds,type,optionsForRedraw){var $$=this,withTransitionForAxis=!$$.hasArcType(),options=optionsForRedraw||{withTransitionForAxis:withTransitionForAxis};options.withTransitionForTransform=!1,$$.transiting=!1,
$$.setTargetType(targetIds,type),$$.updateTargets($$.data.targets),$$.updateAndRedraw(options)},c3_chart_fn.x=function(x){var $$=this.internal;return arguments.length&&($$.updateTargetX($$.data.targets,x),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),$$.data.xs},c3_chart_fn.xs=function(xs){var $$=this.internal;return arguments.length&&($$.updateTargetXs($$.data.targets,xs),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),$$.data.xs},c3_chart_fn.zoom=function(domain){var $$=this.internal;return domain&&($$.isTimeSeries()&&(domain=domain.map(function(x){return $$.parseDate(x)})),$$.brush.extent(domain),$$.redraw({withUpdateXDomain:!0,
withY:$$.config.zoom_rescale}),$$.config.zoom_onzoom.call(this,$$.x.orgDomain())),$$.brush.extent()},c3_chart_fn.zoom.enable=function(enabled){var $$=this.internal;$$.config.zoom_enabled=enabled,$$.updateAndRedraw()},c3_chart_fn.unzoom=function(){var $$=this.internal;$$.brush.clear().update(),$$.redraw({withUpdateXDomain:!0})},c3_chart_fn.zoom.max=function(max){var $$=this.internal,config=$$.config,d3=$$.d3;if(0!==max&&!max)return config.zoom_x_max;config.zoom_x_max=d3.max([$$.orgXDomain[1],max])},c3_chart_fn.zoom.min=function(min){var $$=this.internal,config=$$.config,d3=$$.d3;if(0!==min&&!min)return config.zoom_x_min;config.zoom_x_min=d3.min([
$$.orgXDomain[0],min])},c3_chart_fn.zoom.range=function(range){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};isDefined(range.max)&&this.domain.max(range.max),isDefined(range.min)&&this.domain.min(range.min)},c3_chart_internal_fn.initPie=function(){var d3=this.d3;this.pie=d3.layout.pie().value(function(d){return d.values.reduce(function(a,b){return a+b.value},0)}),this.pie.sort(this.getOrderFunction()||null)},c3_chart_internal_fn.updateRadius=function(){var $$=this,config=$$.config,w=config.gauge_width||config.donut_width,gaugeArcWidth=$$.filterTargetsToShow($$.data.targets).length*$$.config.gauge_arcs_minWidth
;$$.radiusExpanded=Math.min($$.arcWidth,$$.arcHeight)/2*($$.hasType("gauge")?.85:1),$$.radius=.95*$$.radiusExpanded,$$.innerRadiusRatio=w?($$.radius-w)/$$.radius:.6,$$.innerRadius=$$.hasType("donut")||$$.hasType("gauge")?$$.radius*$$.innerRadiusRatio:0,$$.gaugeArcWidth=w||(gaugeArcWidth<=$$.radius-$$.innerRadius?$$.radius-$$.innerRadius:gaugeArcWidth<=$$.radius?gaugeArcWidth:$$.radius)},c3_chart_internal_fn.updateArc=function(){var $$=this;$$.svgArc=$$.getSvgArc(),$$.svgArcExpanded=$$.getSvgArcExpanded(),$$.svgArcExpandedSub=$$.getSvgArcExpanded(.98)},c3_chart_internal_fn.updateAngle=function(d){var gMin,gMax,gTic,gValue,$$=this,config=$$.config,found=!1,
index=0;return config?($$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function(t){found||t.data.id!==d.data.id||(found=!0,(d=t).index=index),index++}),isNaN(d.startAngle)&&(d.startAngle=0),isNaN(d.endAngle)&&(d.endAngle=d.startAngle),$$.isGaugeType(d.data)&&(gMin=config.gauge_min,gMax=config.gauge_max,gTic=Math.PI*(config.gauge_fullCircle?2:1)/(gMax-gMin),gValue=d.value<gMin?0:d.value<gMax?d.value-gMin:gMax-gMin,d.startAngle=config.gauge_startingAngle,d.endAngle=d.startAngle+gTic*gValue),found?d:null):null},c3_chart_internal_fn.getSvgArc=function(){var $$=this,hasGaugeType=$$.hasType("gauge"),singleArcWidth=$$.gaugeArcWidth/$$.filterTargetsToShow(
$$.data.targets).length,arc=$$.d3.svg.arc().outerRadius(function(d){return hasGaugeType?$$.radius-singleArcWidth*d.index:$$.radius}).innerRadius(function(d){return hasGaugeType?$$.radius-singleArcWidth*(d.index+1):$$.innerRadius}),newArc=function(d,withoutUpdate){var updated;return withoutUpdate?arc(d):(updated=$$.updateAngle(d))?arc(updated):"M 0 0"};return newArc.centroid=arc.centroid,newArc},c3_chart_internal_fn.getSvgArcExpanded=function(rate){rate=rate||1;var $$=this,hasGaugeType=$$.hasType("gauge"),singleArcWidth=$$.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length,expandWidth=Math.min($$.radiusExpanded*rate-$$.radius,.8*singleArcWidth-100*(
1-rate)),arc=$$.d3.svg.arc().outerRadius(function(d){return hasGaugeType?$$.radius-singleArcWidth*d.index+expandWidth:$$.radiusExpanded*rate}).innerRadius(function(d){return hasGaugeType?$$.radius-singleArcWidth*(d.index+1):$$.innerRadius});return function(d){var updated=$$.updateAngle(d);return updated?arc(updated):"M 0 0"}},c3_chart_internal_fn.getArc=function(d,withoutUpdate,force){return force||this.isArcType(d.data)?this.svgArc(d,withoutUpdate):"M 0 0"},c3_chart_internal_fn.transformForArcLabel=function(d){var c,x,y,h,ratio,$$=this,config=$$.config,updated=$$.updateAngle(d),translate="",hasGauge=$$.hasType("gauge");if(updated&&!hasGauge
)c=this.svgArc.centroid(updated),x=isNaN(c[0])?0:c[0],y=isNaN(c[1])?0:c[1],h=Math.sqrt(x*x+y*y),translate="translate("+x*(ratio=$$.hasType("donut")&&config.donut_label_ratio?isFunction(config.donut_label_ratio)?config.donut_label_ratio(d,$$.radius,h):config.donut_label_ratio:$$.hasType("pie")&&config.pie_label_ratio?isFunction(config.pie_label_ratio)?config.pie_label_ratio(d,$$.radius,h):config.pie_label_ratio:$$.radius&&h?(.375<36/$$.radius?1.175-36/$$.radius:.8)*$$.radius/h:0)+","+y*ratio+")";else if(updated&&hasGauge&&1<$$.filterTargetsToShow($$.data.targets).length){var y1=Math.sin(updated.endAngle-Math.PI/2);translate="translate("+(x=Math.cos(
updated.endAngle-Math.PI/2)*($$.radiusExpanded+25))+","+(y=y1*($$.radiusExpanded+15-Math.abs(10*y1))+3)+")"}return translate},c3_chart_internal_fn.getArcRatio=function(d){var config=this.config,whole=Math.PI*(this.hasType("gauge")&&!config.gauge_fullCircle?1:2);return d?(d.endAngle-d.startAngle)/whole:null},c3_chart_internal_fn.convertToArcData=function(d){return this.addName({id:d.data.id,value:d.value,ratio:this.getArcRatio(d),index:d.index})},c3_chart_internal_fn.textForArcLabel=function(d){var updated,value,ratio,id,format,$$=this;return $$.shouldShowArcLabel()?(value=(updated=$$.updateAngle(d))?updated.value:null,ratio=$$.getArcRatio(updated),
id=d.data.id,$$.hasType("gauge")||$$.meetsArcLabelThreshold(ratio)?(format=$$.getArcLabelFormat())?format(value,ratio,id):$$.defaultArcValueFormat(value,ratio):""):""},c3_chart_internal_fn.textForGaugeMinMax=function(value,isMax){var format=this.getGaugeLabelExtents();return format?format(value,isMax):value},c3_chart_internal_fn.expandArc=function(targetIds){var interval,$$=this;$$.transiting?interval=window.setInterval(function(){$$.transiting||(window.clearInterval(interval),0<$$.legend.selectAll(".c3-legend-item-focused").size()&&$$.expandArc(targetIds))},10):(targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds,
"."+CLASS.chartArc)).each(function(d){$$.shouldExpand(d.data.id)&&$$.d3.select(this).selectAll("path").transition().duration($$.expandDuration(d.data.id)).attr("d",$$.svgArcExpanded).transition().duration(2*$$.expandDuration(d.data.id)).attr("d",$$.svgArcExpandedSub).each(function(d){$$.isDonutType(d.data)})}))},c3_chart_internal_fn.unexpandArc=function(targetIds){var $$=this;$$.transiting||(targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds,"."+CLASS.chartArc)).selectAll("path").transition().duration(function(d){return $$.expandDuration(d.data.id)}).attr("d",$$.svgArc),$$.svg.selectAll("."+CLASS.arc))},
c3_chart_internal_fn.expandDuration=function(id){var config=this.config;return this.isDonutType(id)?config.donut_expand_duration:this.isGaugeType(id)?config.gauge_expand_duration:this.isPieType(id)?config.pie_expand_duration:50},c3_chart_internal_fn.shouldExpand=function(id){var config=this.config;return this.isDonutType(id)&&config.donut_expand||this.isGaugeType(id)&&config.gauge_expand||this.isPieType(id)&&config.pie_expand},c3_chart_internal_fn.shouldShowArcLabel=function(){var config=this.config,shouldShow=!0;return this.hasType("donut")?shouldShow=config.donut_label_show:this.hasType("pie")&&(shouldShow=config.pie_label_show),shouldShow},
c3_chart_internal_fn.meetsArcLabelThreshold=function(ratio){var config=this.config;return(this.hasType("donut")?config.donut_label_threshold:config.pie_label_threshold)<=ratio},c3_chart_internal_fn.getArcLabelFormat=function(){var config=this.config,format=config.pie_label_format;return this.hasType("gauge")?format=config.gauge_label_format:this.hasType("donut")&&(format=config.donut_label_format),format},c3_chart_internal_fn.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},c3_chart_internal_fn.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},c3_chart_internal_fn.updateTargetsForArc=function(targets){
var mainPieEnter,$$=this,main=$$.main,classChartArc=$$.classChartArc.bind($$),classArcs=$$.classArcs.bind($$),classFocus=$$.classFocus.bind($$);(mainPieEnter=main.select("."+CLASS.chartArcs).selectAll("."+CLASS.chartArc).data($$.pie(targets)).attr("class",function(d){return classChartArc(d)+classFocus(d.data)}).enter().append("g").attr("class",classChartArc)).append("g").attr("class",classArcs),mainPieEnter.append("text").attr("dy",$$.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},c3_chart_internal_fn.initArc=function(){var $$=this;$$.arcs=$$.main.select("."+CLASS.chart).append("g").attr(
"class",CLASS.chartArcs).attr("transform",$$.getTranslate("arc")),$$.arcs.append("text").attr("class",CLASS.chartArcsTitle).style("text-anchor","middle").text($$.getArcTitle())},c3_chart_internal_fn.redrawArc=function(duration,durationForExit,withTransform){var mainArc,backgroundArc,mainArcLabelLine,$$=this,d3=$$.d3,config=$$.config,main=$$.main,hasGaugeType=$$.hasType("gauge");if((mainArc=main.selectAll("."+CLASS.arcs).selectAll("."+CLASS.arc).data($$.arcData.bind($$))).enter().append("path").attr("class",$$.classArc.bind($$)).style("fill",function(d){return $$.color(d.data)}).style("cursor",function(d){
return config.interaction_enabled&&config.data_selection_isselectable(d)?"pointer":null}).each(function(d){$$.isGaugeType(d.data)&&(d.startAngle=d.endAngle=config.gauge_startingAngle),this._current=d}),hasGaugeType&&((mainArcLabelLine=main.selectAll("."+CLASS.arcs).selectAll("."+CLASS.arcLabelLine).data($$.arcData.bind($$))).enter().append("rect").attr("class",function(d){return CLASS.arcLabelLine+" "+CLASS.target+" "+CLASS.target+"-"+d.data.id}),1===$$.filterTargetsToShow($$.data.targets).length?mainArcLabelLine.style("display","none"):mainArcLabelLine.style("fill",function(d){return 0<config.color_pattern.length?$$.levelColor(d.data.values[0].value
):$$.color(d.data)}).style("display",config.gauge_labelLine_show?"":"none").each(function(d){var lineLength=0,x=0,y=0,transform="";if($$.hiddenTargetIds.indexOf(d.data.id)<0){var updated=$$.updateAngle(d),innerLineLength=$$.gaugeArcWidth/$$.filterTargetsToShow($$.data.targets).length*(updated.index+1),lineAngle=updated.endAngle-Math.PI/2,arcInnerRadius=$$.radius-innerLineLength,linePositioningAngle=lineAngle-(0===arcInnerRadius?0:1/arcInnerRadius);lineLength=$$.radiusExpanded-$$.radius+innerLineLength,x=Math.cos(linePositioningAngle)*arcInnerRadius,y=Math.sin(linePositioningAngle)*arcInnerRadius,transform="rotate("+180*lineAngle/Math.PI+", "+x+", "+y+")"}
d3.select(this).attr({x:x,y:y,width:lineLength,height:2,transform:transform}).style("stroke-dasharray","0, "+(lineLength+2)+", 0")})),mainArc.attr("transform",function(d){return!$$.isGaugeType(d.data)&&withTransform?"scale(0)":""}).on("mouseover",config.interaction_enabled?function(d){var updated,arcData;$$.transiting||(updated=$$.updateAngle(d))&&(arcData=$$.convertToArcData(updated),$$.expandArc(updated.data.id),$$.api.focus(updated.data.id),$$.toggleFocusLegend(updated.data.id,!0),$$.config.data_onmouseover(arcData,this))}:null).on("mousemove",config.interaction_enabled?function(d){var selectedData,updated=$$.updateAngle(d);updated&&(selectedData=[
$$.convertToArcData(updated)],$$.showTooltip(selectedData,this))}:null).on("mouseout",config.interaction_enabled?function(d){var updated,arcData;$$.transiting||(updated=$$.updateAngle(d))&&(arcData=$$.convertToArcData(updated),$$.unexpandArc(updated.data.id),$$.api.revert(),$$.revertLegend(),$$.hideTooltip(),$$.config.data_onmouseout(arcData,this))}:null).on("click",config.interaction_enabled?function(d,i){var arcData,updated=$$.updateAngle(d);updated&&(arcData=$$.convertToArcData(updated),$$.toggleShape&&$$.toggleShape(this,arcData,i),$$.config.data_onclick.call($$.api,arcData,this))}:null).each(function(){$$.transiting=!0}).transition().duration(duration
).attrTween("d",function(d){var interpolate,updated=$$.updateAngle(d);return updated?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),interpolate=d3.interpolate(this._current,updated),this._current=interpolate(0),function(t){var interpolated=interpolate(t);return interpolated.data=d.data,$$.getArc(interpolated,!0)}):function(){return"M 0 0"}}).attr("transform",withTransform?"scale(1)":"").style("fill",function(d){return $$.levelColor?$$.levelColor(d.data.values[0].value):$$.color(d.data.id)}).call($$.endall,function(){$$.transiting=!1}),mainArc.exit().transition(
).duration(durationForExit).style("opacity",0).remove(),main.selectAll("."+CLASS.chartArc).select("text").style("opacity",0).attr("class",function(d){return $$.isGaugeType(d.data)?CLASS.gaugeValue:""}).text($$.textForArcLabel.bind($$)).attr("transform",$$.transformForArcLabel.bind($$)).style("font-size",function(d){return $$.isGaugeType(d.data)&&1===$$.filterTargetsToShow($$.data.targets).length?Math.round($$.radius/5)+"px":""}).transition().duration(duration).style("opacity",function(d){return $$.isTargetToShow(d.data.id)&&$$.isArcType(d.data)?1:0}),main.select("."+CLASS.chartArcsTitle).style("opacity",$$.hasType("donut")||hasGaugeType?1:0),hasGaugeType){
var index=0;(backgroundArc=$$.arcs.select("g."+CLASS.chartArcsBackground).selectAll("path."+CLASS.chartArcsBackground).data($$.data.targets)).enter().append("path"),backgroundArc.attr("class",function(d,i){return CLASS.chartArcsBackground+" "+CLASS.chartArcsBackground+"-"+i}).attr("d",function(d1){if(0<=$$.hiddenTargetIds.indexOf(d1.id))return"M 0 0";var d={data:[{value:config.gauge_max}],startAngle:config.gauge_startingAngle,endAngle:-1*config.gauge_startingAngle*(config.gauge_fullCircle?Math.PI:1),index:index++};return $$.getArc(d,!0,!0)}),backgroundArc.exit().remove(),$$.arcs.select("."+CLASS.chartArcsGaugeUnit).attr("dy",".75em").text(
config.gauge_label_show?config.gauge_units:""),$$.arcs.select("."+CLASS.chartArcsGaugeMin).attr("dx",-1*($$.innerRadius+($$.radius-$$.innerRadius)/(config.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(config.gauge_label_show?$$.textForGaugeMinMax(config.gauge_min,!1):""),$$.arcs.select("."+CLASS.chartArcsGaugeMax).attr("dx",$$.innerRadius+($$.radius-$$.innerRadius)/(config.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(config.gauge_label_show?$$.textForGaugeMinMax(config.gauge_max,!0):"")}},c3_chart_internal_fn.initGauge=function(){var arcs=this.arcs;this.hasType("gauge")&&(arcs.append("g").attr("class",CLASS.chartArcsBackground),arcs.append(
"text").attr("class",CLASS.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),arcs.append("text").attr("class",CLASS.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),arcs.append("text").attr("class",CLASS.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},c3_chart_internal_fn.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},c3_chart_internal_fn.hasCaches=function(ids){for(var i=0;i<ids.length;i++)if(!(ids[i]in this.cache))return!1;return!0},c3_chart_internal_fn.addCache=function(id,target){this.cache[id]=this.cloneTarget(target)},
c3_chart_internal_fn.getCaches=function(ids){var i,targets=[];for(i=0;i<ids.length;i++)ids[i]in this.cache&&targets.push(this.cloneTarget(this.cache[ids[i]]));return targets},c3_chart_internal_fn.categoryName=function(i){var config=this.config;return i<config.axis_x_categories.length?config.axis_x_categories[i]:i},c3_chart_internal_fn.generateClass=function(prefix,targetId){return" "+prefix+" "+prefix+this.getTargetSelectorSuffix(targetId)},c3_chart_internal_fn.classText=function(d){return this.generateClass(CLASS.text,d.index)},c3_chart_internal_fn.classTexts=function(d){return this.generateClass(CLASS.texts,d.id)},c3_chart_internal_fn.classShape=function(d
){return this.generateClass(CLASS.shape,d.index)},c3_chart_internal_fn.classShapes=function(d){return this.generateClass(CLASS.shapes,d.id)},c3_chart_internal_fn.classLine=function(d){return this.classShape(d)+this.generateClass(CLASS.line,d.id)},c3_chart_internal_fn.classLines=function(d){return this.classShapes(d)+this.generateClass(CLASS.lines,d.id)},c3_chart_internal_fn.classCircle=function(d){return this.classShape(d)+this.generateClass(CLASS.circle,d.index)},c3_chart_internal_fn.classCircles=function(d){return this.classShapes(d)+this.generateClass(CLASS.circles,d.id)},c3_chart_internal_fn.classBar=function(d){return this.classShape(d
)+this.generateClass(CLASS.bar,d.index)},c3_chart_internal_fn.classBars=function(d){return this.classShapes(d)+this.generateClass(CLASS.bars,d.id)},c3_chart_internal_fn.classArc=function(d){return this.classShape(d.data)+this.generateClass(CLASS.arc,d.data.id)},c3_chart_internal_fn.classArcs=function(d){return this.classShapes(d.data)+this.generateClass(CLASS.arcs,d.data.id)},c3_chart_internal_fn.classArea=function(d){return this.classShape(d)+this.generateClass(CLASS.area,d.id)},c3_chart_internal_fn.classAreas=function(d){return this.classShapes(d)+this.generateClass(CLASS.areas,d.id)},c3_chart_internal_fn.classRegion=function(d,i){
return this.generateClass(CLASS.region,i)+" "+("class"in d?d.class:"")},c3_chart_internal_fn.classEvent=function(d){return this.generateClass(CLASS.eventRect,d.index)},c3_chart_internal_fn.classTarget=function(id){var additionalClassSuffix=this.config.data_classes[id],additionalClass="";return additionalClassSuffix&&(additionalClass=" "+CLASS.target+"-"+additionalClassSuffix),this.generateClass(CLASS.target,id)+additionalClass},c3_chart_internal_fn.classFocus=function(d){return this.classFocused(d)+this.classDefocused(d)},c3_chart_internal_fn.classFocused=function(d){return" "+(0<=this.focusedTargetIds.indexOf(d.id)?CLASS.focused:"")},
c3_chart_internal_fn.classDefocused=function(d){return" "+(0<=this.defocusedTargetIds.indexOf(d.id)?CLASS.defocused:"")},c3_chart_internal_fn.classChartText=function(d){return CLASS.chartText+this.classTarget(d.id)},c3_chart_internal_fn.classChartLine=function(d){return CLASS.chartLine+this.classTarget(d.id)},c3_chart_internal_fn.classChartBar=function(d){return CLASS.chartBar+this.classTarget(d.id)},c3_chart_internal_fn.classChartArc=function(d){return CLASS.chartArc+this.classTarget(d.data.id)},c3_chart_internal_fn.getTargetSelectorSuffix=function(targetId){return targetId||0===targetId?("-"+targetId).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"
):""},c3_chart_internal_fn.selectorTarget=function(id,prefix){return(prefix||"")+"."+CLASS.target+this.getTargetSelectorSuffix(id)},c3_chart_internal_fn.selectorTargets=function(ids,prefix){var $$=this;return(ids=ids||[]).length?ids.map(function(id){return $$.selectorTarget(id,prefix)}):null},c3_chart_internal_fn.selectorLegend=function(id){return"."+CLASS.legendItem+this.getTargetSelectorSuffix(id)},c3_chart_internal_fn.selectorLegends=function(ids){var $$=this;return ids&&ids.length?ids.map(function(id){return $$.selectorLegend(id)}):null},c3_chart_internal_fn.getClipPath=function(id){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf(
"msie 9.")?"":document.URL.split("#")[0])+"#"+id+")"},c3_chart_internal_fn.appendClip=function(parent,id){return parent.append("clipPath").attr("id",id).append("rect")},c3_chart_internal_fn.getAxisClipX=function(forHorizontal){var left=Math.max(30,this.margin.left);return forHorizontal?-(1+left):-(left-1)},c3_chart_internal_fn.getAxisClipY=function(forHorizontal){return forHorizontal?-20:-this.margin.top},c3_chart_internal_fn.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},c3_chart_internal_fn.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},c3_chart_internal_fn.getYAxisClipX=function(){
return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},c3_chart_internal_fn.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},c3_chart_internal_fn.getAxisClipWidth=function(forHorizontal){var left=Math.max(30,this.margin.left),right=Math.max(30,this.margin.right);return forHorizontal?this.width+2+left+right:this.margin.left+20},c3_chart_internal_fn.getAxisClipHeight=function(forHorizontal){return(forHorizontal?this.margin.bottom:this.margin.top+this.height)+20},c3_chart_internal_fn.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},
c3_chart_internal_fn.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},c3_chart_internal_fn.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},c3_chart_internal_fn.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},c3_chart_internal_fn.generateColor=function(){var config=this.config,d3=this.d3,colors=config.data_colors,pattern=notEmpty(config.color_pattern)?config.color_pattern:d3.scale.category10().range(),callback=config.data_color,ids=[];return function(d){var color,id=d.id||d.data&&d.data.id||d
;return colors[id]instanceof Function?color=colors[id](d):colors[id]?color=colors[id]:(ids.indexOf(id)<0&&ids.push(id),color=pattern[ids.indexOf(id)%pattern.length],colors[id]=color),callback instanceof Function?callback(color,d):color}},c3_chart_internal_fn.generateLevelColor=function(){var config=this.config,colors=config.color_pattern,threshold=config.color_threshold,asValue="value"===threshold.unit,values=threshold.values&&threshold.values.length?threshold.values:[],max=threshold.max||100;return notEmpty(config.color_threshold)?function(value){var i,color=colors[colors.length-1];for(i=0;i<values.length;i++)if((asValue?value:100*value/max)<values[i]){
color=colors[i];break}return color}:null},c3_chart_internal_fn.getDefaultConfig=function(){var config={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},
transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(id){return id},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},
data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",
axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,
axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,
point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,
donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(d,defaultTitleFormat,defaultValueFormat,color){return this.getTooltipContent?this.getTooltipContent(d,defaultTitleFormat,defaultValueFormat,color):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},
title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(key){config[key]=this.additionalConfig[key]},this),config},c3_chart_internal_fn.additionalConfig={},c3_chart_internal_fn.loadConfig=function(config){var target,keys,read,this_config=this.config;Object.keys(this_config).forEach(function(key){target=config,keys=key.split("_"),read=function find(){var key=keys.shift();return key&&target&&"object"===(void 0===target?"undefined":_typeof(target))&&key in target?(target=target[key],find()):key?void 0:target}(),isDefined(read)&&(this_config[key]=read)})},
c3_chart_internal_fn.convertUrlToData=function(url,mimeType,headers,keys,done){var $$=this,type=mimeType||"csv",req=$$.d3.xhr(url);headers&&Object.keys(headers).forEach(function(header){req.header(header,headers[header])}),req.get(function(error,data){var d,dataResponse=data.response||data.responseText;if(!data)throw new Error(error.responseURL+" "+error.status+" ("+error.statusText+")");d="json"===type?$$.convertJsonToData(JSON.parse(dataResponse),keys):"tsv"===type?$$.convertTsvToData(dataResponse):$$.convertCsvToData(dataResponse),done.call($$,d)})},c3_chart_internal_fn.convertXsvToData=function(xsv,parser){var d,rows=parser.parseRows(xsv)
;return 1===rows.length?(d=[{}],rows[0].forEach(function(id){d[0][id]=null})):d=parser.parse(xsv),d},c3_chart_internal_fn.convertCsvToData=function(csv){return this.convertXsvToData(csv,this.d3.csv)},c3_chart_internal_fn.convertTsvToData=function(tsv){return this.convertXsvToData(tsv,this.d3.tsv)},c3_chart_internal_fn.convertJsonToData=function(json,keys){var targetKeys,$$=this,new_rows=[];return keys?(keys.x?(targetKeys=keys.value.concat(keys.x),$$.config.data_x=keys.x):targetKeys=keys.value,new_rows.push(targetKeys),json.forEach(function(o){var new_row=[];targetKeys.forEach(function(key){var v=$$.findValueInJson(o,key);isUndefined(v)&&(v=null),
new_row.push(v)}),new_rows.push(new_row)}),$$.convertRowsToData(new_rows)):(Object.keys(json).forEach(function(key){new_rows.push([key].concat(json[key]))}),$$.convertColumnsToData(new_rows))},c3_chart_internal_fn.findValueInJson=function(object,path){for(var pathArray=(path=(path=path.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<pathArray.length;++i){var k=pathArray[i];if(!(k in object))return;object=object[k]}return object},c3_chart_internal_fn.convertRowsToData=function(rows){for(var newRows=[],keys=rows[0],i=1;i<rows.length;i++){for(var newRow={},j=0;j<rows[i].length;j++){if(isUndefined(rows[i][j]))throw new Error(
"Source data is missing a component at ("+i+","+j+")!");newRow[keys[j]]=rows[i][j]}newRows.push(newRow)}return newRows},c3_chart_internal_fn.convertColumnsToData=function(columns){for(var newRows=[],i=0;i<columns.length;i++)for(var key=columns[i][0],j=1;j<columns[i].length;j++){if(isUndefined(newRows[j-1])&&(newRows[j-1]={}),isUndefined(columns[i][j]))throw new Error("Source data is missing a component at ("+i+","+j+")!");newRows[j-1][key]=columns[i][j]}return newRows},c3_chart_internal_fn.convertDataToTargets=function(data,appendXs){var targets,$$=this,config=$$.config,ids=$$.d3.keys(data[0]).filter($$.isNotX,$$),xs=$$.d3.keys(data[0]).filter($$.isX,$$)
;return ids.forEach(function(id){var xKey=$$.getXKey(id);$$.isCustomX()||$$.isTimeSeries()?0<=xs.indexOf(xKey)?$$.data.xs[id]=(appendXs&&$$.data.xs[id]?$$.data.xs[id]:[]).concat(data.map(function(d){return d[xKey]}).filter(isValue).map(function(rawX,i){return $$.generateTargetX(rawX,id,i)})):config.data_x?$$.data.xs[id]=$$.getOtherTargetXs():notEmpty(config.data_xs)&&($$.data.xs[id]=$$.getXValuesOfXKey(xKey,$$.data.targets)):$$.data.xs[id]=data.map(function(d,i){return i})}),ids.forEach(function(id){if(!$$.data.xs[id])throw new Error('x is not defined for id = "'+id+'".')}),(targets=ids.map(function(id,index){var convertedId=config.data_idConverter(id)
;return{id:convertedId,id_org:id,values:data.map(function(d,i){var x,rawX=d[$$.getXKey(id)],value=null===d[id]||isNaN(d[id])?null:+d[id];return $$.isCustomX()&&$$.isCategorized()&&!isUndefined(rawX)?(0===index&&0===i&&(config.axis_x_categories=[]),-1===(x=config.axis_x_categories.indexOf(rawX))&&(x=config.axis_x_categories.length,config.axis_x_categories.push(rawX))):x=$$.generateTargetX(rawX,id,i),(isUndefined(d[id])||$$.data.xs[id].length<=i)&&(x=void 0),{x:x,value:value,id:convertedId}}).filter(function(v){return isDefined(v.x)})}})).forEach(function(t){var i;config.data_xSort&&(t.values=t.values.sort(function(v1,v2){return(v1.x||0===v1.x?v1.x:1/0)-(
v2.x||0===v2.x?v2.x:1/0)})),i=0,t.values.forEach(function(v){v.index=i++}),$$.data.xs[t.id].sort(function(v1,v2){return v1-v2})}),$$.hasNegativeValue=$$.hasNegativeValueInTargets(targets),$$.hasPositiveValue=$$.hasPositiveValueInTargets(targets),config.data_type&&$$.setTargetType($$.mapToIds(targets).filter(function(id){return!(id in config.data_types)}),config.data_type),targets.forEach(function(d){$$.addCache(d.id_org,d)}),targets},c3_chart_internal_fn.isX=function(key){var config=this.config;return config.data_x&&key===config.data_x||notEmpty(config.data_xs)&&hasValue(config.data_xs,key)},c3_chart_internal_fn.isNotX=function(key){return!this.isX(key)},
c3_chart_internal_fn.getXKey=function(id){var config=this.config;return config.data_x?config.data_x:notEmpty(config.data_xs)?config.data_xs[id]:null},c3_chart_internal_fn.getXValuesOfXKey=function(key,targets){var xValues,$$=this;return(targets&&notEmpty(targets)?$$.mapToIds(targets):[]).forEach(function(id){$$.getXKey(id)===key&&(xValues=$$.data.xs[id])}),xValues},c3_chart_internal_fn.getIndexByX=function(x){var data=this.filterByX(this.data.targets,x);return data.length?data[0].index:null},c3_chart_internal_fn.getXValue=function(id,i){return id in this.data.xs&&this.data.xs[id]&&isValue(this.data.xs[id][i])?this.data.xs[id][i]:i},
c3_chart_internal_fn.getOtherTargetXs=function(){var idsForX=Object.keys(this.data.xs);return idsForX.length?this.data.xs[idsForX[0]]:null},c3_chart_internal_fn.getOtherTargetX=function(index){var xs=this.getOtherTargetXs();return xs&&index<xs.length?xs[index]:null},c3_chart_internal_fn.addXs=function(xs){var $$=this;Object.keys(xs).forEach(function(id){$$.config.data_xs[id]=xs[id]})},c3_chart_internal_fn.hasMultipleX=function(xs){return 1<this.d3.set(Object.keys(xs).map(function(id){return xs[id]})).size()},c3_chart_internal_fn.isMultipleX=function(){return notEmpty(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},
c3_chart_internal_fn.addName=function(data){var name;return data&&(name=this.config.data_names[data.id],data.name=void 0!==name?name:data.id),data},c3_chart_internal_fn.getValueOnIndex=function(values,index){var valueOnIndex=values.filter(function(v){return v.index===index});return valueOnIndex.length?valueOnIndex[0]:null},c3_chart_internal_fn.updateTargetX=function(targets,x){var $$=this;targets.forEach(function(t){t.values.forEach(function(v,i){v.x=$$.generateTargetX(x[i],t.id,i)}),$$.data.xs[t.id]=x})},c3_chart_internal_fn.updateTargetXs=function(targets,xs){var $$=this;targets.forEach(function(t){xs[t.id]&&$$.updateTargetX([t],xs[t.id])})},
c3_chart_internal_fn.generateTargetX=function(rawX,id,index){var $$=this;return $$.isTimeSeries()?rawX?$$.parseDate(rawX):$$.parseDate($$.getXValue(id,index)):$$.isCustomX()&&!$$.isCategorized()?isValue(rawX)?+rawX:$$.getXValue(id,index):index},c3_chart_internal_fn.cloneTarget=function(target){return{id:target.id,id_org:target.id_org,values:target.values.map(function(d){return{x:d.x,value:d.value,id:d.id}})}},c3_chart_internal_fn.updateXs=function(){var $$=this;$$.data.targets.length&&($$.xs=[],$$.data.targets[0].values.forEach(function(v){$$.xs[v.index]=v.x}))},c3_chart_internal_fn.getPrevX=function(i){var x=this.xs[i-1];return void 0!==x?x:null},
c3_chart_internal_fn.getNextX=function(i){var x=this.xs[i+1];return void 0!==x?x:null},c3_chart_internal_fn.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},c3_chart_internal_fn.getMaxDataCountTarget=function(targets){var maxTarget,length=targets.length,max=0;return 1<length?targets.forEach(function(t){t.values.length>max&&(max=(maxTarget=t).values.length)}):maxTarget=length?targets[0]:null,maxTarget},c3_chart_internal_fn.getEdgeX=function(targets){return targets.length?[this.d3.min(targets,function(t){return t.values[0].x}),this.d3.max(targets,function(t){return t.values[t.values.length-1].x})]:[0,0]},
c3_chart_internal_fn.mapToIds=function(targets){return targets.map(function(d){return d.id})},c3_chart_internal_fn.mapToTargetIds=function(ids){return ids?[].concat(ids):this.mapToIds(this.data.targets)},c3_chart_internal_fn.hasTarget=function(targets,id){var i,ids=this.mapToIds(targets);for(i=0;i<ids.length;i++)if(ids[i]===id)return!0;return!1},c3_chart_internal_fn.isTargetToShow=function(targetId){return this.hiddenTargetIds.indexOf(targetId)<0},c3_chart_internal_fn.isLegendToShow=function(targetId){return this.hiddenLegendIds.indexOf(targetId)<0},c3_chart_internal_fn.filterTargetsToShow=function(targets){var $$=this;return targets.filter(function(t){
return $$.isTargetToShow(t.id)})},c3_chart_internal_fn.mapTargetsToUniqueXs=function(targets){var xs=this.d3.set(this.d3.merge(targets.map(function(t){return t.values.map(function(v){return+v.x})}))).values();return(xs=this.isTimeSeries()?xs.map(function(x){return new Date(+x)}):xs.map(function(x){return+x})).sort(function(a,b){return a<b?-1:b<a?1:b<=a?0:NaN})},c3_chart_internal_fn.addHiddenTargetIds=function(targetIds){targetIds=targetIds instanceof Array?targetIds:new Array(targetIds);for(var i=0;i<targetIds.length;i++)this.hiddenTargetIds.indexOf(targetIds[i])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(targetIds[i]))},
c3_chart_internal_fn.removeHiddenTargetIds=function(targetIds){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(id){return targetIds.indexOf(id)<0})},c3_chart_internal_fn.addHiddenLegendIds=function(targetIds){targetIds=targetIds instanceof Array?targetIds:new Array(targetIds);for(var i=0;i<targetIds.length;i++)this.hiddenLegendIds.indexOf(targetIds[i])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(targetIds[i]))},c3_chart_internal_fn.removeHiddenLegendIds=function(targetIds){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(id){return targetIds.indexOf(id)<0})},c3_chart_internal_fn.getValuesAsIdKeyed=function(targets){var ys={}
;return targets.forEach(function(t){ys[t.id]=[],t.values.forEach(function(v){ys[t.id].push(v.value)})}),ys},c3_chart_internal_fn.checkValueInTargets=function(targets,checker){var i,j,values,ids=Object.keys(targets);for(i=0;i<ids.length;i++)for(values=targets[ids[i]].values,j=0;j<values.length;j++)if(checker(values[j].value))return!0;return!1},c3_chart_internal_fn.hasNegativeValueInTargets=function(targets){return this.checkValueInTargets(targets,function(v){return v<0})},c3_chart_internal_fn.hasPositiveValueInTargets=function(targets){return this.checkValueInTargets(targets,function(v){return 0<v})},c3_chart_internal_fn.isOrderDesc=function(){
var config=this.config;return"string"==typeof config.data_order&&"desc"===config.data_order.toLowerCase()},c3_chart_internal_fn.isOrderAsc=function(){var config=this.config;return"string"==typeof config.data_order&&"asc"===config.data_order.toLowerCase()},c3_chart_internal_fn.getOrderFunction=function(){var config=this.config,orderAsc=this.isOrderAsc(),orderDesc=this.isOrderDesc();if(orderAsc||orderDesc)return function(t1,t2){var reducer=function(p,c){return p+Math.abs(c.value)},t1Sum=t1.values.reduce(reducer,0),t2Sum=t2.values.reduce(reducer,0);return orderDesc?t2Sum-t1Sum:t1Sum-t2Sum};if(isFunction(config.data_order))return config.data_order;if(isArray(
config.data_order)){var order=config.data_order;return function(t1,t2){return order.indexOf(t1.id)-order.indexOf(t2.id)}}},c3_chart_internal_fn.orderTargets=function(targets){var fct=this.getOrderFunction();return fct&&(targets.sort(fct),(this.isOrderAsc()||this.isOrderDesc())&&targets.reverse()),targets},c3_chart_internal_fn.filterByX=function(targets,x){return this.d3.merge(targets.map(function(t){return t.values})).filter(function(v){return v.x-x==0})},c3_chart_internal_fn.filterRemoveNull=function(data){return data.filter(function(d){return isValue(d.value)})},c3_chart_internal_fn.filterByXDomain=function(targets,xDomain){return targets.map(function(t){
return{id:t.id,id_org:t.id_org,values:t.values.filter(function(v){return xDomain[0]<=v.x&&v.x<=xDomain[1]})}})},c3_chart_internal_fn.hasDataLabel=function(){var config=this.config;return!("boolean"!=typeof config.data_labels||!config.data_labels)||!("object"!==_typeof(config.data_labels)||!notEmpty(config.data_labels))},c3_chart_internal_fn.getDataLabelLength=function(min,max,key){var $$=this,lengths=[0,0];return $$.selectChart.select("svg").selectAll(".dummy").data([min,max]).enter().append("text").text(function(d){return $$.dataLabelFormat(d.id)(d)}).each(function(d,i){lengths[i]=1.3*this.getBoundingClientRect()[key]}).remove(),lengths},
c3_chart_internal_fn.isNoneArc=function(d){return this.hasTarget(this.data.targets,d.id)},c3_chart_internal_fn.isArc=function(d){return"data"in d&&this.hasTarget(this.data.targets,d.data.id)},c3_chart_internal_fn.findSameXOfValues=function(values,index){var i,targetX=values[index].x,sames=[];for(i=index-1;0<=i&&targetX===values[i].x;i--)sames.push(values[i]);for(i=index;i<values.length&&targetX===values[i].x;i++)sames.push(values[i]);return sames},c3_chart_internal_fn.findClosestFromTargets=function(targets,pos){var candidates,$$=this;return candidates=targets.map(function(target){return $$.findClosest(target.values,pos)}),$$.findClosest(candidates,pos)},
c3_chart_internal_fn.findClosest=function(values,pos){var closest,$$=this,minDist=$$.config.point_sensitivity;return values.filter(function(v){return v&&$$.isBarType(v.id)}).forEach(function(v){var shape=$$.main.select("."+CLASS.bars+$$.getTargetSelectorSuffix(v.id)+" ."+CLASS.bar+"-"+v.index).node();!closest&&$$.isWithinBar(shape)&&(closest=v)}),values.filter(function(v){return v&&!$$.isBarType(v.id)}).forEach(function(v){var d=$$.dist(v,pos);d<minDist&&(minDist=d,closest=v)}),closest},c3_chart_internal_fn.dist=function(data,pos){var config=this.config,xIndex=config.axis_rotated?1:0,yIndex=config.axis_rotated?0:1,y=this.circleY(data,data.index),x=this.x(
data.x);return Math.sqrt(Math.pow(x-pos[xIndex],2)+Math.pow(y-pos[yIndex],2))},c3_chart_internal_fn.convertValuesToStep=function(values){var i,converted=[].concat(values);if(!this.isCategorized())return values;for(i=values.length+1;0<i;i--)converted[i]=converted[i-1];return converted[0]={x:converted[0].x-1,value:converted[0].value,id:converted[0].id},converted[values.length+1]={x:converted[values.length].x+1,value:converted[values.length].value,id:converted[values.length].id},converted},c3_chart_internal_fn.updateDataAttributes=function(name,attrs){var current=this.config["data_"+name];return void 0===attrs||(Object.keys(attrs).forEach(function(id){
current[id]=attrs[id]}),this.redraw({withLegend:!0})),current},c3_chart_internal_fn.load=function(targets,args){var $$=this;targets&&(args.filter&&(targets=targets.filter(args.filter)),(args.type||args.types)&&targets.forEach(function(t){var type=args.types&&args.types[t.id]?args.types[t.id]:args.type;$$.setTargetType(t.id,type)}),$$.data.targets.forEach(function(d){for(var i=0;i<targets.length;i++)if(d.id===targets[i].id){d.values=targets[i].values,targets.splice(i,1);break}}),$$.data.targets=$$.data.targets.concat(targets)),$$.updateTargets($$.data.targets),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),args.done&&args.done()},
c3_chart_internal_fn.loadFromArgs=function(args){var $$=this;args.data?$$.load($$.convertDataToTargets(args.data),args):args.url?$$.convertUrlToData(args.url,args.mimeType,args.headers,args.keys,function(data){$$.load($$.convertDataToTargets(data),args)}):args.json?$$.load($$.convertDataToTargets($$.convertJsonToData(args.json,args.keys)),args):args.rows?$$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)),args):args.columns?$$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)),args):$$.load(null,args)},c3_chart_internal_fn.unload=function(targetIds,done){var $$=this;done||(done=function(){}),(targetIds=targetIds.filter(function(
id){return $$.hasTarget($$.data.targets,id)}))&&0!==targetIds.length?($$.svg.selectAll(targetIds.map(function(id){return $$.selectorTarget(id)})).transition().style("opacity",0).remove().call($$.endall,done),targetIds.forEach(function(id){$$.withoutFadeIn[id]=!1,$$.legend&&$$.legend.selectAll("."+CLASS.legendItem+$$.getTargetSelectorSuffix(id)).remove(),$$.data.targets=$$.data.targets.filter(function(t){return t.id!==id})})):done()},c3_chart_internal_fn.getYDomainMin=function(targets){var j,k,baseId,idsInGroup,id,hasNegativeValue,$$=this,config=$$.config,ids=$$.mapToIds(targets),ys=$$.getValuesAsIdKeyed(targets);if(0<config.data_groups.length)for(
hasNegativeValue=$$.hasNegativeValueInTargets(targets),j=0;j<config.data_groups.length;j++)if(0!==(idsInGroup=config.data_groups[j].filter(function(id){return 0<=ids.indexOf(id)})).length)for(baseId=idsInGroup[0],hasNegativeValue&&ys[baseId]&&ys[baseId].forEach(function(v,i){ys[baseId][i]=v<0?v:0}),k=1;k<idsInGroup.length;k++)id=idsInGroup[k],ys[id]&&ys[id].forEach(function(v,i){$$.axis.getId(id)!==$$.axis.getId(baseId)||!ys[baseId]||hasNegativeValue&&0<+v||(ys[baseId][i]+=+v)});return $$.d3.min(Object.keys(ys).map(function(key){return $$.d3.min(ys[key])}))},c3_chart_internal_fn.getYDomainMax=function(targets){var j,k,baseId,idsInGroup,id,hasPositiveValue,
$$=this,config=$$.config,ids=$$.mapToIds(targets),ys=$$.getValuesAsIdKeyed(targets);if(0<config.data_groups.length)for(hasPositiveValue=$$.hasPositiveValueInTargets(targets),j=0;j<config.data_groups.length;j++)if(0!==(idsInGroup=config.data_groups[j].filter(function(id){return 0<=ids.indexOf(id)})).length)for(baseId=idsInGroup[0],hasPositiveValue&&ys[baseId]&&ys[baseId].forEach(function(v,i){ys[baseId][i]=0<v?v:0}),k=1;k<idsInGroup.length;k++)id=idsInGroup[k],ys[id]&&ys[id].forEach(function(v,i){$$.axis.getId(id)!==$$.axis.getId(baseId)||!ys[baseId]||hasPositiveValue&&+v<0||(ys[baseId][i]+=+v)});return $$.d3.max(Object.keys(ys).map(function(key){
return $$.d3.max(ys[key])}))},c3_chart_internal_fn.getYDomain=function(targets,axisId,xDomain){var domain,domainLength,padding_top,padding_bottom,yDomainAbs,lengths,diff,ratio,isAllPositive,isAllNegative,$$=this,config=$$.config,targetsByAxisId=targets.filter(function(t){return $$.axis.getId(t.id)===axisId}),yTargets=xDomain?$$.filterByXDomain(targetsByAxisId,xDomain):targetsByAxisId,yMin="y2"===axisId?config.axis_y2_min:config.axis_y_min,yMax="y2"===axisId?config.axis_y2_max:config.axis_y_max,yDomainMin=$$.getYDomainMin(yTargets),yDomainMax=$$.getYDomainMax(yTargets),center="y2"===axisId?config.axis_y2_center:config.axis_y_center,isZeroBased=$$.hasType(
"bar",yTargets)&&config.bar_zerobased||$$.hasType("area",yTargets)&&config.area_zerobased,isInverted="y2"===axisId?config.axis_y2_inverted:config.axis_y_inverted,showHorizontalDataLabel=$$.hasDataLabel()&&config.axis_rotated,showVerticalDataLabel=$$.hasDataLabel()&&!config.axis_rotated;return yDomainMin=isValue(yMin)?yMin:isValue(yMax)?yDomainMin<yMax?yDomainMin:yMax-10:yDomainMin,yDomainMax=isValue(yMax)?yMax:isValue(yMin)?yMin<yDomainMax?yDomainMax:yMin+10:yDomainMax,0===yTargets.length?"y2"===axisId?$$.y2.domain():$$.y.domain():(isNaN(yDomainMin)&&(yDomainMin=0),isNaN(yDomainMax)&&(yDomainMax=yDomainMin),yDomainMin===yDomainMax&&(
yDomainMin<0?yDomainMax=0:yDomainMin=0),isAllPositive=0<=yDomainMin&&0<=yDomainMax,isAllNegative=yDomainMin<=0&&yDomainMax<=0,(isValue(yMin)&&isAllPositive||isValue(yMax)&&isAllNegative)&&(isZeroBased=!1),isZeroBased&&(isAllPositive&&(yDomainMin=0),isAllNegative&&(yDomainMax=0)),padding_top=padding_bottom=.1*(domainLength=Math.abs(yDomainMax-yDomainMin)),void 0!==center&&(yDomainMax=center+(yDomainAbs=Math.max(Math.abs(yDomainMin),Math.abs(yDomainMax))),yDomainMin=center-yDomainAbs),showHorizontalDataLabel?(lengths=$$.getDataLabelLength(yDomainMin,yDomainMax,"width"),diff=diffDomain($$.y.range()),padding_top+=domainLength*((ratio=[lengths[0]/diff,
lengths[1]/diff])[1]/(1-ratio[0]-ratio[1])),padding_bottom+=domainLength*(ratio[0]/(1-ratio[0]-ratio[1]))):showVerticalDataLabel&&(lengths=$$.getDataLabelLength(yDomainMin,yDomainMax,"height"),padding_top+=$$.axis.convertPixelsToAxisPadding(lengths[1],domainLength),padding_bottom+=$$.axis.convertPixelsToAxisPadding(lengths[0],domainLength)),"y"===axisId&&notEmpty(config.axis_y_padding)&&(padding_top=$$.axis.getPadding(config.axis_y_padding,"top",padding_top,domainLength),padding_bottom=$$.axis.getPadding(config.axis_y_padding,"bottom",padding_bottom,domainLength)),"y2"===axisId&&notEmpty(config.axis_y2_padding)&&(padding_top=$$.axis.getPadding(
config.axis_y2_padding,"top",padding_top,domainLength),padding_bottom=$$.axis.getPadding(config.axis_y2_padding,"bottom",padding_bottom,domainLength)),isZeroBased&&(isAllPositive&&(padding_bottom=yDomainMin),isAllNegative&&(padding_top=-yDomainMax)),domain=[yDomainMin-padding_bottom,yDomainMax+padding_top],isInverted?domain.reverse():domain)},c3_chart_internal_fn.getXDomainMin=function(targets){var $$=this,config=$$.config;return isDefined(config.axis_x_min)?$$.isTimeSeries()?this.parseDate(config.axis_x_min):config.axis_x_min:$$.d3.min(targets,function(t){return $$.d3.min(t.values,function(v){return v.x})})},c3_chart_internal_fn.getXDomainMax=function(
targets){var $$=this,config=$$.config;return isDefined(config.axis_x_max)?$$.isTimeSeries()?this.parseDate(config.axis_x_max):config.axis_x_max:$$.d3.max(targets,function(t){return $$.d3.max(t.values,function(v){return v.x})})},c3_chart_internal_fn.getXDomainPadding=function(domain){var maxDataCount,padding,paddingLeft,paddingRight,config=this.config,diff=domain[1]-domain[0];return padding=this.isCategorized()?0:this.hasType("bar")?1<(maxDataCount=this.getMaxDataCount())?diff/(maxDataCount-1)/2:.5:.01*diff,"object"===_typeof(config.axis_x_padding)&&notEmpty(config.axis_x_padding)?(paddingLeft=isValue(config.axis_x_padding.left
)?config.axis_x_padding.left:padding,paddingRight=isValue(config.axis_x_padding.right)?config.axis_x_padding.right:padding):paddingLeft=paddingRight="number"==typeof config.axis_x_padding?config.axis_x_padding:padding,{left:paddingLeft,right:paddingRight}},c3_chart_internal_fn.getXDomain=function(targets){var $$=this,xDomain=[$$.getXDomainMin(targets),$$.getXDomainMax(targets)],firstX=xDomain[0],lastX=xDomain[1],padding=$$.getXDomainPadding(xDomain),min=0,max=0;return firstX-lastX!=0||$$.isCategorized()||(lastX=$$.isTimeSeries()?(firstX=new Date(.5*firstX.getTime()),new Date(1.5*lastX.getTime())):(firstX=0===firstX?1:.5*firstX,0===lastX?-1:1.5*lastX)),(
firstX||0===firstX)&&(min=$$.isTimeSeries()?new Date(firstX.getTime()-padding.left):firstX-padding.left),(lastX||0===lastX)&&(max=$$.isTimeSeries()?new Date(lastX.getTime()+padding.right):lastX+padding.right),[min,max]},c3_chart_internal_fn.updateXDomain=function(targets,withUpdateXDomain,withUpdateOrgXDomain,withTrim,domain){var $$=this,config=$$.config;return withUpdateOrgXDomain&&($$.x.domain(domain||$$.d3.extent($$.getXDomain(targets))),$$.orgXDomain=$$.x.domain(),config.zoom_enabled&&$$.zoom.scale($$.x).updateScaleExtent(),$$.subX.domain($$.x.domain()),$$.brush&&$$.brush.scale($$.subX)),withUpdateXDomain&&($$.x.domain(domain||(!$$.brush||$$.brush.empty(
)?$$.orgXDomain:$$.brush.extent())),config.zoom_enabled&&$$.zoom.scale($$.x).updateScaleExtent()),withTrim&&$$.x.domain($$.trimXDomain($$.x.orgDomain())),$$.x.domain()},c3_chart_internal_fn.trimXDomain=function(domain){var zoomDomain=this.getZoomDomain(),min=zoomDomain[0],max=zoomDomain[1];return domain[0]<=min&&(domain[1]=+domain[1]+(min-domain[0]),domain[0]=min),max<=domain[1]&&(domain[0]=+domain[0]-(domain[1]-max),domain[1]=max),domain},c3_chart_internal_fn.drag=function(mouse){var sx,sy,mx,my,minX,maxX,minY,maxY,$$=this,config=$$.config,main=$$.main,d3=$$.d3;$$.hasArcType()||config.data_selection_enabled&&(
config.zoom_enabled&&!$$.zoom.altDomain||config.data_selection_multiple&&(sx=$$.dragStart[0],sy=$$.dragStart[1],mx=mouse[0],my=mouse[1],minX=Math.min(sx,mx),maxX=Math.max(sx,mx),minY=config.data_selection_grouped?$$.margin.top:Math.min(sy,my),maxY=config.data_selection_grouped?$$.height:Math.max(sy,my),main.select("."+CLASS.dragarea).attr("x",minX).attr("y",minY).attr("width",maxX-minX).attr("height",maxY-minY),main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).filter(function(d){return config.data_selection_isselectable(d)}).each(function(d,i){var _x,_y,_w,_h,toggle,box,shape=d3.select(this),isSelected=shape.classed(CLASS.SELECTED),
isIncluded=shape.classed(CLASS.INCLUDED),isWithin=!1;if(shape.classed(CLASS.circle))_x=1*shape.attr("cx"),_y=1*shape.attr("cy"),toggle=$$.togglePoint,isWithin=minX<_x&&_x<maxX&&minY<_y&&_y<maxY;else{if(!shape.classed(CLASS.bar))return;_x=(box=getPathBox(this)).x,_y=box.y,_w=box.width,_h=box.height,toggle=$$.togglePath,isWithin=!(maxX<_x||_x+_w<minX||maxY<_y||_y+_h<minY)}isWithin^isIncluded&&(shape.classed(CLASS.INCLUDED,!isIncluded),shape.classed(CLASS.SELECTED,!isSelected),toggle.call($$,!isSelected,shape,d,i))})))},c3_chart_internal_fn.dragstart=function(mouse){var $$=this,config=$$.config;$$.hasArcType()||config.data_selection_enabled&&($$.dragStart=mouse
,$$.main.select("."+CLASS.chart).append("rect").attr("class",CLASS.dragarea).style("opacity",.1),$$.dragging=!0)},c3_chart_internal_fn.dragend=function(){var $$=this,config=$$.config;$$.hasArcType()||config.data_selection_enabled&&($$.main.select("."+CLASS.dragarea).transition().duration(100).style("opacity",0).remove(),$$.main.selectAll("."+CLASS.shape).classed(CLASS.INCLUDED,!1),$$.dragging=!1)},c3_chart_internal_fn.getYFormat=function(forArc){var $$=this,formatForY=forArc&&!$$.hasType("gauge")?$$.defaultArcValueFormat:$$.yFormat,formatForY2=forArc&&!$$.hasType("gauge")?$$.defaultArcValueFormat:$$.y2Format;return function(v,ratio,id){return(
"y2"===$$.axis.getId(id)?formatForY2:formatForY).call($$,v,ratio)}},c3_chart_internal_fn.yFormat=function(v){var config=this.config;return(config.axis_y_tick_format?config.axis_y_tick_format:this.defaultValueFormat)(v)},c3_chart_internal_fn.y2Format=function(v){var config=this.config;return(config.axis_y2_tick_format?config.axis_y2_tick_format:this.defaultValueFormat)(v)},c3_chart_internal_fn.defaultValueFormat=function(v){return isValue(v)?+v:""},c3_chart_internal_fn.defaultArcValueFormat=function(v,ratio){return(100*ratio).toFixed(1)+"%"},c3_chart_internal_fn.dataLabelFormat=function(targetId){var data_labels=this.config.data_labels,defaultFormat=function(
v){return isValue(v)?+v:""};return"function"==typeof data_labels.format?data_labels.format:"object"===_typeof(data_labels.format)?data_labels.format[targetId]?!0===data_labels.format[targetId]?defaultFormat:data_labels.format[targetId]:function(){return""}:defaultFormat},c3_chart_internal_fn.initGrid=function(){var $$=this,config=$$.config,d3=$$.d3;$$.grid=$$.main.append("g").attr("clip-path",$$.clipPathForGrid).attr("class",CLASS.grid),config.grid_x_show&&$$.grid.append("g").attr("class",CLASS.xgrids),config.grid_y_show&&$$.grid.append("g").attr("class",CLASS.ygrids),config.grid_focus_show&&$$.grid.append("g").attr("class",CLASS.xgridFocus).append("line"
).attr("class",CLASS.xgridFocus),$$.xgrid=d3.selectAll([]),config.grid_lines_front||$$.initGridLines()},c3_chart_internal_fn.initGridLines=function(){var $$=this,d3=$$.d3;$$.gridLines=$$.main.append("g").attr("clip-path",$$.clipPathForGrid).attr("class",CLASS.grid+" "+CLASS.gridLines),$$.gridLines.append("g").attr("class",CLASS.xgridLines),$$.gridLines.append("g").attr("class",CLASS.ygridLines),$$.xgridLines=d3.selectAll([])},c3_chart_internal_fn.updateXGrid=function(withoutUpdate){var $$=this,config=$$.config,d3=$$.d3,xgridData=$$.generateGridData(config.grid_x_type,$$.x),tickOffset=$$.isCategorized()?$$.xAxis.tickOffset():0
;$$.xgridAttr=config.axis_rotated?{x1:0,x2:$$.width,y1:function(d){return $$.x(d)-tickOffset},y2:function(d){return $$.x(d)-tickOffset}}:{x1:function(d){return $$.x(d)+tickOffset},x2:function(d){return $$.x(d)+tickOffset},y1:0,y2:$$.height},$$.xgrid=$$.main.select("."+CLASS.xgrids).selectAll("."+CLASS.xgrid).data(xgridData),$$.xgrid.enter().append("line").attr("class",CLASS.xgrid),withoutUpdate||$$.xgrid.attr($$.xgridAttr).style("opacity",function(){return+d3.select(this).attr(config.axis_rotated?"y1":"x1")===(config.axis_rotated?$$.height:0)?0:1}),$$.xgrid.exit().remove()},c3_chart_internal_fn.updateYGrid=function(){var $$=this,config=$$.config,
gridValues=$$.yAxis.tickValues()||$$.y.ticks(config.grid_y_ticks);$$.ygrid=$$.main.select("."+CLASS.ygrids).selectAll("."+CLASS.ygrid).data(gridValues),$$.ygrid.enter().append("line").attr("class",CLASS.ygrid),$$.ygrid.attr("x1",config.axis_rotated?$$.y:0).attr("x2",config.axis_rotated?$$.y:$$.width).attr("y1",config.axis_rotated?0:$$.y).attr("y2",config.axis_rotated?$$.height:$$.y),$$.ygrid.exit().remove(),$$.smoothLines($$.ygrid,"grid")},c3_chart_internal_fn.gridTextAnchor=function(d){return d.position?d.position:"end"},c3_chart_internal_fn.gridTextDx=function(d){return"start"===d.position?4:"middle"===d.position?0:-4},
c3_chart_internal_fn.xGridTextX=function(d){return"start"===d.position?-this.height:"middle"===d.position?-this.height/2:0},c3_chart_internal_fn.yGridTextX=function(d){return"start"===d.position?0:"middle"===d.position?this.width/2:this.width},c3_chart_internal_fn.updateGrid=function(duration){var xgridLine,ygridLine,yv,$$=this,main=$$.main,config=$$.config;$$.grid.style("visibility",$$.hasArcType()?"hidden":"visible"),main.select("line."+CLASS.xgridFocus).style("visibility","hidden"),config.grid_x_show&&$$.updateXGrid(),$$.xgridLines=main.select("."+CLASS.xgridLines).selectAll("."+CLASS.xgridLine).data(config.grid_x_lines),(xgridLine=$$.xgridLines.enter(
).append("g").attr("class",function(d){return CLASS.xgridLine+(d.class?" "+d.class:"")})).append("line").style("opacity",0),xgridLine.append("text").attr("text-anchor",$$.gridTextAnchor).attr("transform",config.axis_rotated?"":"rotate(-90)").attr("dx",$$.gridTextDx).attr("dy",-5).style("opacity",0),$$.xgridLines.exit().transition().duration(duration).style("opacity",0).remove(),config.grid_y_show&&$$.updateYGrid(),$$.ygridLines=main.select("."+CLASS.ygridLines).selectAll("."+CLASS.ygridLine).data(config.grid_y_lines),(ygridLine=$$.ygridLines.enter().append("g").attr("class",function(d){return CLASS.ygridLine+(d.class?" "+d.class:"")})).append("line").style(
"opacity",0),ygridLine.append("text").attr("text-anchor",$$.gridTextAnchor).attr("transform",config.axis_rotated?"rotate(-90)":"").attr("dx",$$.gridTextDx).attr("dy",-5).style("opacity",0),yv=$$.yv.bind($$),$$.ygridLines.select("line").transition().duration(duration).attr("x1",config.axis_rotated?yv:0).attr("x2",config.axis_rotated?yv:$$.width).attr("y1",config.axis_rotated?0:yv).attr("y2",config.axis_rotated?$$.height:yv).style("opacity",1),$$.ygridLines.select("text").transition().duration(duration).attr("x",config.axis_rotated?$$.xGridTextX.bind($$):$$.yGridTextX.bind($$)).attr("y",yv).text(function(d){return d.text}).style("opacity",1),
$$.ygridLines.exit().transition().duration(duration).style("opacity",0).remove()},c3_chart_internal_fn.redrawGrid=function(withTransition){var $$=this,config=$$.config,xv=$$.xv.bind($$),lines=$$.xgridLines.select("line"),texts=$$.xgridLines.select("text");return[(withTransition?lines.transition():lines).attr("x1",config.axis_rotated?0:xv).attr("x2",config.axis_rotated?$$.width:xv).attr("y1",config.axis_rotated?xv:0).attr("y2",config.axis_rotated?xv:$$.height).style("opacity",1),(withTransition?texts.transition():texts).attr("x",config.axis_rotated?$$.yGridTextX.bind($$):$$.xGridTextX.bind($$)).attr("y",xv).text(function(d){return d.text}).style("opacity",1)]
},c3_chart_internal_fn.showXGridFocus=function(selectedData){var $$=this,config=$$.config,dataToShow=selectedData.filter(function(d){return d&&isValue(d.value)}),focusEl=$$.main.selectAll("line."+CLASS.xgridFocus),xx=$$.xx.bind($$);config.tooltip_show&&($$.hasType("scatter")||$$.hasArcType()||(focusEl.style("visibility","visible").data([dataToShow[0]]).attr(config.axis_rotated?"y1":"x1",xx).attr(config.axis_rotated?"y2":"x2",xx),$$.smoothLines(focusEl,"grid")))},c3_chart_internal_fn.hideXGridFocus=function(){this.main.select("line."+CLASS.xgridFocus).style("visibility","hidden")},c3_chart_internal_fn.updateXgridFocus=function(){var config=this.config
;this.main.select("line."+CLASS.xgridFocus).attr("x1",config.axis_rotated?0:-10).attr("x2",config.axis_rotated?this.width:-10).attr("y1",config.axis_rotated?-10:0).attr("y2",config.axis_rotated?-10:this.height)},c3_chart_internal_fn.generateGridData=function(type,scale){var xDomain,firstYear,lastYear,i,gridData=[],tickNum=this.main.select("."+CLASS.axisX).selectAll(".tick").size();if("year"===type)for(firstYear=(xDomain=this.getXDomain())[0].getFullYear(),lastYear=xDomain[1].getFullYear(),i=firstYear;i<=lastYear;i++)gridData.push(new Date(i+"-01-01 00:00:00"));else(gridData=scale.ticks(10)).length>tickNum&&(gridData=gridData.filter(function(d){return(""+d
).indexOf(".")<0}));return gridData},c3_chart_internal_fn.getGridFilterToRemove=function(params){return params?function(line){var found=!1;return[].concat(params).forEach(function(param){("value"in param&&line.value===param.value||"class"in param&&line.class===param.class)&&(found=!0)}),found}:function(){return!0}},c3_chart_internal_fn.removeGridLines=function(params,forX){var config=this.config,toRemove=this.getGridFilterToRemove(params),toShow=function(line){return!toRemove(line)},classLines=forX?CLASS.xgridLines:CLASS.ygridLines,classLine=forX?CLASS.xgridLine:CLASS.ygridLine;this.main.select("."+classLines).selectAll("."+classLine).filter(toRemove
).transition().duration(config.transition_duration).style("opacity",0).remove(),forX?config.grid_x_lines=config.grid_x_lines.filter(toShow):config.grid_y_lines=config.grid_y_lines.filter(toShow)},c3_chart_internal_fn.initEventRect=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.eventRects).style("fill-opacity",0)},c3_chart_internal_fn.redrawEventRect=function(){var eventRectUpdate,maxDataCountTarget,$$=this,config=$$.config,isMultipleX=$$.isMultipleX(),eventRects=$$.main.select("."+CLASS.eventRects).style("cursor",config.zoom_enabled?config.axis_rotated?"ns-resize":"ew-resize":null).classed(CLASS.eventRectsMultiple,isMultipleX
).classed(CLASS.eventRectsSingle,!isMultipleX);eventRects.selectAll("."+CLASS.eventRect).remove(),$$.eventRect=eventRects.selectAll("."+CLASS.eventRect),isMultipleX?(eventRectUpdate=$$.eventRect.data([0]),$$.generateEventRectsForMultipleXs(eventRectUpdate.enter()),$$.updateEventRect(eventRectUpdate)):(maxDataCountTarget=$$.getMaxDataCountTarget($$.data.targets),eventRects.datum(maxDataCountTarget?maxDataCountTarget.values:[]),$$.eventRect=eventRects.selectAll("."+CLASS.eventRect),eventRectUpdate=$$.eventRect.data(function(d){return d}),$$.generateEventRectsForSingleX(eventRectUpdate.enter()),$$.updateEventRect(eventRectUpdate),eventRectUpdate.exit().remove()
)},c3_chart_internal_fn.updateEventRect=function(eventRectUpdate){var x,y,w,h,rectW,rectX,$$=this,config=$$.config;eventRectUpdate=eventRectUpdate||$$.eventRect.data(function(d){return d}),h=$$.isMultipleX()?(y=x=0,w=$$.width,$$.height):(rectX=!$$.isCustomX()&&!$$.isTimeSeries()||$$.isCategorized()?(rectW=$$.getEventRectWidth(),function(d){return $$.x(d.x)-rectW/2}):($$.updateXs(),rectW=function(d){var prevX=$$.getPrevX(d.index),nextX=$$.getNextX(d.index);return null===prevX&&null===nextX?config.axis_rotated?$$.height:$$.width:(null===prevX&&(prevX=$$.x.domain()[0]),null===nextX&&(nextX=$$.x.domain()[1]),Math.max(0,($$.x(nextX)-$$.x(prevX))/2))},function(d){
var prevX=$$.getPrevX(d.index),nextX=$$.getNextX(d.index),thisX=$$.data.xs[d.id][d.index];return null===prevX&&null===nextX?0:(null===prevX&&(prevX=$$.x.domain()[0]),($$.x(thisX)+$$.x(prevX))/2)}),x=config.axis_rotated?0:rectX,y=config.axis_rotated?rectX:0,w=config.axis_rotated?$$.width:rectW,config.axis_rotated?rectW:$$.height),eventRectUpdate.attr("class",$$.classEvent.bind($$)).attr("x",x).attr("y",y).attr("width",w).attr("height",h)},c3_chart_internal_fn.generateEventRectsForSingleX=function(eventRectEnter){var $$=this,d3=$$.d3,config=$$.config;eventRectEnter.append("rect").attr("class",$$.classEvent.bind($$)).style("cursor",
config.data_selection_enabled&&config.data_selection_grouped?"pointer":null).on("mouseover",function(d){var index=d.index;$$.dragging||$$.flowing||$$.hasArcType()||(config.point_focus_expand_enabled&&$$.expandCircles(index,null,!0),$$.expandBars(index,null,!0),$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(d){config.data_onmouseover.call($$.api,d)}))}).on("mouseout",function(d){var index=d.index;$$.config&&($$.hasArcType()||($$.hideXGridFocus(),$$.hideTooltip(),$$.unexpandCircles(),$$.unexpandBars(),$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(d){config.data_onmouseout.call($$.api,d)})))}).on("mousemove",function(d){var selectedData
,index=d.index,eventRect=$$.svg.select("."+CLASS.eventRect+"-"+index);$$.dragging||$$.flowing||$$.hasArcType()||($$.isStepType(d)&&"step-after"===$$.config.line_step_type&&d3.mouse(this)[0]<$$.x($$.getXValue(d.id,index))&&(index-=1),selectedData=$$.filterTargetsToShow($$.data.targets).map(function(t){return $$.addName($$.getValueOnIndex(t.values,index))}),config.tooltip_grouped&&($$.showTooltip(selectedData,this),$$.showXGridFocus(selectedData)),(!config.tooltip_grouped||config.data_selection_enabled&&!config.data_selection_grouped)&&$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(){d3.select(this).classed(CLASS.EXPANDED,!0),
config.data_selection_enabled&&eventRect.style("cursor",config.data_selection_grouped?"pointer":null),config.tooltip_grouped||($$.hideXGridFocus(),$$.hideTooltip(),config.data_selection_grouped||($$.unexpandCircles(index),$$.unexpandBars(index)))}).filter(function(d){return $$.isWithinShape(this,d)}).each(function(d){config.data_selection_enabled&&(config.data_selection_grouped||config.data_selection_isselectable(d))&&eventRect.style("cursor","pointer"),config.tooltip_grouped||($$.showTooltip([d],this),$$.showXGridFocus([d]),config.point_focus_expand_enabled&&$$.expandCircles(index,d.id,!0),$$.expandBars(index,d.id,!0))}))}).on("click",function(d){
var index=d.index;!$$.hasArcType()&&$$.toggleShape&&($$.cancelClick?$$.cancelClick=!1:($$.isStepType(d)&&"step-after"===config.line_step_type&&d3.mouse(this)[0]<$$.x($$.getXValue(d.id,index))&&(index-=1),$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(d){(config.data_selection_grouped||$$.isWithinShape(this,d))&&($$.toggleShape(this,d,index),$$.config.data_onclick.call($$.api,d,this))})))}).call(config.data_selection_draggable&&$$.drag?d3.behavior.drag().origin(Object).on("drag",function(){$$.drag(d3.mouse(this))}).on("dragstart",function(){$$.dragstart(d3.mouse(this))}).on("dragend",function(){$$.dragend()}):function(){})},
c3_chart_internal_fn.generateEventRectsForMultipleXs=function(eventRectEnter){var $$=this,d3=$$.d3,config=$$.config;function mouseout(){$$.svg.select("."+CLASS.eventRect).style("cursor",null),$$.hideXGridFocus(),$$.hideTooltip(),$$.unexpandCircles(),$$.unexpandBars()}eventRectEnter.append("rect").attr("x",0).attr("y",0).attr("width",$$.width).attr("height",$$.height).attr("class",CLASS.eventRect).on("mouseout",function(){$$.config&&($$.hasArcType()||mouseout())}).on("mousemove",function(){var mouse,closest,selectedData,targetsToShow=$$.filterTargetsToShow($$.data.targets);$$.dragging||$$.hasArcType(targetsToShow)||(mouse=d3.mouse(this),
closest=$$.findClosestFromTargets(targetsToShow,mouse),!$$.mouseover||closest&&closest.id===$$.mouseover.id||(config.data_onmouseout.call($$.api,$$.mouseover),$$.mouseover=void 0),closest?(selectedData=($$.isScatterType(closest)||!config.tooltip_grouped?[closest]:$$.filterByX(targetsToShow,closest.x)).map(function(d){return $$.addName(d)}),$$.showTooltip(selectedData,this),config.point_focus_expand_enabled&&$$.expandCircles(closest.index,closest.id,!0),$$.expandBars(closest.index,closest.id,!0),$$.showXGridFocus(selectedData),($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&($$.svg.select("."+CLASS.eventRect).style("cursor",
"pointer"),$$.mouseover||(config.data_onmouseover.call($$.api,closest),$$.mouseover=closest))):mouseout())}).on("click",function(){var mouse,closest,targetsToShow=$$.filterTargetsToShow($$.data.targets);$$.hasArcType(targetsToShow)||(mouse=d3.mouse(this),(closest=$$.findClosestFromTargets(targetsToShow,mouse))&&($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&$$.main.selectAll("."+CLASS.shapes+$$.getTargetSelectorSuffix(closest.id)).selectAll("."+CLASS.shape+"-"+closest.index).each(function(){(config.data_selection_grouped||$$.isWithinShape(this,closest))&&($$.toggleShape(this,closest,closest.index),$$.config.data_onclick.call(
$$.api,closest,this))}))}).call(config.data_selection_draggable&&$$.drag?d3.behavior.drag().origin(Object).on("drag",function(){$$.drag(d3.mouse(this))}).on("dragstart",function(){$$.dragstart(d3.mouse(this))}).on("dragend",function(){$$.dragend()}):function(){})},c3_chart_internal_fn.dispatchEvent=function(type,index,mouse){var selector="."+CLASS.eventRect+(this.isMultipleX()?"":"-"+index),eventRect=this.main.select(selector).node(),box=eventRect.getBoundingClientRect(),x=box.left+(mouse?mouse[0]:0),y=box.top+(mouse?mouse[1]:0),event=document.createEvent("MouseEvents");event.initMouseEvent(type,!0,!0,window,0,x,y,x,y,!1,!1,!1,!1,0,null),
eventRect.dispatchEvent(event)},c3_chart_internal_fn.initLegend=function(){var $$=this;if($$.legendItemTextBox={},$$.legendHasRendered=!1,$$.legend=$$.svg.append("g").attr("transform",$$.getTranslate("legend")),!$$.config.legend_show)return $$.legend.style("visibility","hidden"),void($$.hiddenLegendIds=$$.mapToIds($$.data.targets));$$.updateLegendWithDefaults()},c3_chart_internal_fn.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},c3_chart_internal_fn.updateSizeForLegend=function(legendHeight,legendWidth){var $$=this,config=$$.config,
insetLegendPosition={top:$$.isLegendTop?$$.getCurrentPaddingTop()+config.legend_inset_y+5.5:$$.currentHeight-legendHeight-$$.getCurrentPaddingBottom()-config.legend_inset_y,left:$$.isLegendLeft?$$.getCurrentPaddingLeft()+config.legend_inset_x+.5:$$.currentWidth-legendWidth-$$.getCurrentPaddingRight()-config.legend_inset_x+.5};$$.margin3={top:$$.isLegendRight?0:$$.isLegendInset?insetLegendPosition.top:$$.currentHeight-legendHeight,right:NaN,bottom:0,left:$$.isLegendRight?$$.currentWidth-legendWidth:$$.isLegendInset?insetLegendPosition.left:0}},c3_chart_internal_fn.transformLegend=function(withTransition){(withTransition?this.legend.transition():this.legend
).attr("transform",this.getTranslate("legend"))},c3_chart_internal_fn.updateLegendStep=function(step){this.legendStep=step},c3_chart_internal_fn.updateLegendItemWidth=function(w){this.legendItemWidth=w},c3_chart_internal_fn.updateLegendItemHeight=function(h){this.legendItemHeight=h},c3_chart_internal_fn.getLegendWidth=function(){var $$=this;return $$.config.legend_show?$$.isLegendRight||$$.isLegendInset?$$.legendItemWidth*($$.legendStep+1):$$.currentWidth:0},c3_chart_internal_fn.getLegendHeight=function(){var $$=this,h=0;return $$.config.legend_show&&(h=$$.isLegendRight?$$.currentHeight:Math.max(20,$$.legendItemHeight)*($$.legendStep+1)),h},
c3_chart_internal_fn.opacityForLegend=function(legendItem){return legendItem.classed(CLASS.legendItemHidden)?null:1},c3_chart_internal_fn.opacityForUnfocusedLegend=function(legendItem){return legendItem.classed(CLASS.legendItemHidden)?null:.3},c3_chart_internal_fn.toggleFocusLegend=function(targetIds,focus){var $$=this;targetIds=$$.mapToTargetIds(targetIds),$$.legend.selectAll("."+CLASS.legendItem).filter(function(id){return 0<=targetIds.indexOf(id)}).classed(CLASS.legendItemFocused,focus).transition().duration(100).style("opacity",function(){return(focus?$$.opacityForLegend:$$.opacityForUnfocusedLegend).call($$,$$.d3.select(this))})},
c3_chart_internal_fn.revertLegend=function(){var $$=this,d3=$$.d3;$$.legend.selectAll("."+CLASS.legendItem).classed(CLASS.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return $$.opacityForLegend(d3.select(this))})},c3_chart_internal_fn.showLegend=function(targetIds){var $$=this,config=$$.config;config.legend_show||(config.legend_show=!0,$$.legend.style("visibility","visible"),$$.legendHasRendered||$$.updateLegendWithDefaults()),$$.removeHiddenLegendIds(targetIds),$$.legend.selectAll($$.selectorLegends(targetIds)).style("visibility","visible").transition().style("opacity",function(){return $$.opacityForLegend($$.d3.select(this))}
)},c3_chart_internal_fn.hideLegend=function(targetIds){var $$=this,config=$$.config;config.legend_show&&isEmpty(targetIds)&&(config.legend_show=!1,$$.legend.style("visibility","hidden")),$$.addHiddenLegendIds(targetIds),$$.legend.selectAll($$.selectorLegends(targetIds)).style("opacity",0).style("visibility","hidden")},c3_chart_internal_fn.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},c3_chart_internal_fn.updateLegend=function(targetIds,options,transitions){var xForLegend,xForLegendText,xForLegendRect,yForLegend,yForLegendText,yForLegendRect,x1ForLegendTile,x2ForLegendTile,yForLegendTile,l,withTransition,withTransitionForTransform,texts,
rects,tiles,background,$$=this,config=$$.config,paddingTop=4,paddingRight=10,maxWidth=0,maxHeight=0,posMin=10,tileWidth=config.legend_item_tile_width+5,totalLength=0,offsets={},widths={},heights={},margins=[0],steps={},step=0;function updatePositions(textElement,id,index){var margin,maxLength,reset=0===index,isLast=index===targetIds.length-1,box=function(textElement,id){return $$.legendItemTextBox[id]||($$.legendItemTextBox[id]=$$.getTextRect(textElement.textContent,CLASS.legendItem,textElement)),$$.legendItemTextBox[id]}(textElement,id),itemWidth=box.width+tileWidth+(!isLast||$$.isLegendRight||$$.isLegendInset?paddingRight:0)+config.legend_padding,
itemHeight=box.height+paddingTop,itemLength=$$.isLegendRight||$$.isLegendInset?itemHeight:itemWidth,areaLength=$$.isLegendRight||$$.isLegendInset?$$.getLegendHeight():$$.getLegendWidth();function updateValues(id,withoutStep){withoutStep||(margin=(areaLength-totalLength-itemLength)/2)<posMin&&(margin=(areaLength-itemLength)/2,totalLength=0,step++),steps[id]=step,margins[step]=$$.isLegendInset?10:margin,offsets[id]=totalLength,totalLength+=itemLength}reset&&(maxHeight=maxWidth=step=totalLength=0),!config.legend_show||$$.isLegendToShow(id)?(widths[id]=itemWidth,heights[id]=itemHeight,(!maxWidth||maxWidth<=itemWidth)&&(maxWidth=itemWidth),(
!maxHeight||maxHeight<=itemHeight)&&(maxHeight=itemHeight),maxLength=$$.isLegendRight||$$.isLegendInset?maxHeight:maxWidth,config.legend_equally?(Object.keys(widths).forEach(function(id){widths[id]=maxWidth}),Object.keys(heights).forEach(function(id){heights[id]=maxHeight}),(margin=(areaLength-maxLength*targetIds.length)/2)<posMin?(step=totalLength=0,targetIds.forEach(function(id){updateValues(id)})):updateValues(id,!0)):updateValues(id)):widths[id]=heights[id]=steps[id]=offsets[id]=0}targetIds=targetIds.filter(function(id){return!isDefined(config.data_names[id])||null!==config.data_names[id]}),withTransition=getOption(options=options||{},"withTransition",!0
),withTransitionForTransform=getOption(options,"withTransitionForTransform",!0),$$.isLegendInset&&(step=config.legend_inset_step?config.legend_inset_step:targetIds.length,$$.updateLegendStep(step)),yForLegend=$$.isLegendRight?(xForLegend=function(id){return maxWidth*steps[id]},function(id){return margins[steps[id]]+offsets[id]}):$$.isLegendInset?(xForLegend=function(id){return maxWidth*steps[id]+10},function(id){return margins[steps[id]]+offsets[id]}):(xForLegend=function(id){return margins[steps[id]]+offsets[id]},function(id){return maxHeight*steps[id]}),xForLegendText=function(id,i){return xForLegend(id,i)+4+config.legend_item_tile_width},
yForLegendText=function(id,i){return yForLegend(id,i)+9},xForLegendRect=function(id,i){return xForLegend(id,i)},yForLegendRect=function(id,i){return yForLegend(id,i)-5},x1ForLegendTile=function(id,i){return xForLegend(id,i)-2},x2ForLegendTile=function(id,i){return xForLegend(id,i)-2+config.legend_item_tile_width},yForLegendTile=function(id,i){return yForLegend(id,i)+4},(l=$$.legend.selectAll("."+CLASS.legendItem).data(targetIds).enter().append("g").attr("class",function(id){return $$.generateClass(CLASS.legendItem,id)}).style("visibility",function(id){return $$.isLegendToShow(id)?"visible":"hidden"}).style("cursor","pointer").on("click",function(id){
config.legend_item_onclick?config.legend_item_onclick.call($$,id):$$.d3.event.altKey?($$.api.hide(),$$.api.show(id)):($$.api.toggle(id),$$.isTargetToShow(id)?$$.api.focus(id):$$.api.revert())}).on("mouseover",function(id){config.legend_item_onmouseover?config.legend_item_onmouseover.call($$,id):($$.d3.select(this).classed(CLASS.legendItemFocused,!0),!$$.transiting&&$$.isTargetToShow(id)&&$$.api.focus(id))}).on("mouseout",function(id){config.legend_item_onmouseout?config.legend_item_onmouseout.call($$,id):($$.d3.select(this).classed(CLASS.legendItemFocused,!1),$$.api.revert())})).append("text").text(function(id){return isDefined(config.data_names[id]
)?config.data_names[id]:id}).each(function(id,i){updatePositions(this,id,i)}).style("pointer-events","none").attr("x",$$.isLegendRight||$$.isLegendInset?xForLegendText:-200).attr("y",$$.isLegendRight||$$.isLegendInset?-200:yForLegendText),l.append("rect").attr("class",CLASS.legendItemEvent).style("fill-opacity",0).attr("x",$$.isLegendRight||$$.isLegendInset?xForLegendRect:-200).attr("y",$$.isLegendRight||$$.isLegendInset?-200:yForLegendRect),l.append("line").attr("class",CLASS.legendItemTile).style("stroke",$$.color).style("pointer-events","none").attr("x1",$$.isLegendRight||$$.isLegendInset?x1ForLegendTile:-200).attr("y1",
$$.isLegendRight||$$.isLegendInset?-200:yForLegendTile).attr("x2",$$.isLegendRight||$$.isLegendInset?x2ForLegendTile:-200).attr("y2",$$.isLegendRight||$$.isLegendInset?-200:yForLegendTile).attr("stroke-width",config.legend_item_tile_height),background=$$.legend.select("."+CLASS.legendBackground+" rect"),$$.isLegendInset&&0<maxWidth&&0===background.size()&&(background=$$.legend.insert("g","."+CLASS.legendItem).attr("class",CLASS.legendBackground).append("rect")),texts=$$.legend.selectAll("text").data(targetIds).text(function(id){return isDefined(config.data_names[id])?config.data_names[id]:id}).each(function(id,i){updatePositions(this,id,i)}),(
withTransition?texts.transition():texts).attr("x",xForLegendText).attr("y",yForLegendText),rects=$$.legend.selectAll("rect."+CLASS.legendItemEvent).data(targetIds),(withTransition?rects.transition():rects).attr("width",function(id){return widths[id]}).attr("height",function(id){return heights[id]}).attr("x",xForLegendRect).attr("y",yForLegendRect),tiles=$$.legend.selectAll("line."+CLASS.legendItemTile).data(targetIds),(withTransition?tiles.transition():tiles).style("stroke",$$.levelColor?function(id){return $$.levelColor($$.cache[id].values[0].value)}:$$.color).attr("x1",x1ForLegendTile).attr("y1",yForLegendTile).attr("x2",x2ForLegendTile).attr("y2",
yForLegendTile),background&&(withTransition?background.transition():background).attr("height",$$.getLegendHeight()-12).attr("width",maxWidth*(step+1)+10),$$.legend.selectAll("."+CLASS.legendItem).classed(CLASS.legendItemHidden,function(id){return!$$.isTargetToShow(id)}),$$.updateLegendItemWidth(maxWidth),$$.updateLegendItemHeight(maxHeight),$$.updateLegendStep(step),$$.updateSizes(),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(withTransitionForTransform,transitions),$$.legendHasRendered=!0},c3_chart_internal_fn.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",CLASS.regions)},
c3_chart_internal_fn.updateRegion=function(duration){var $$=this,config=$$.config;$$.region.style("visibility",$$.hasArcType()?"hidden":"visible"),$$.mainRegion=$$.main.select("."+CLASS.regions).selectAll("."+CLASS.region).data(config.regions),$$.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),$$.mainRegion.attr("class",$$.classRegion.bind($$)),$$.mainRegion.exit().transition().duration(duration).style("opacity",0).remove()},c3_chart_internal_fn.redrawRegion=function(withTransition){var $$=this,regions=$$.mainRegion.selectAll("rect").each(function(){var parentData=$$.d3.select(this.parentNode).datum();$$.d3.select(this).datum(parentData
)}),x=$$.regionX.bind($$),y=$$.regionY.bind($$),w=$$.regionWidth.bind($$),h=$$.regionHeight.bind($$);return[(withTransition?regions.transition():regions).attr("x",x).attr("y",y).attr("width",w).attr("height",h).style("fill-opacity",function(d){return isValue(d.opacity)?d.opacity:.1})]},c3_chart_internal_fn.regionX=function(d){var $$=this,config=$$.config,yScale="y"===d.axis?$$.y:$$.y2;return"y"===d.axis||"y2"===d.axis?config.axis_rotated&&"start"in d?yScale(d.start):0:config.axis_rotated?0:"start"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.start):d.start):0},c3_chart_internal_fn.regionY=function(d){var $$=this,config=$$.config,yScale="y"===d.axis?$$.y:$$.y2
;return"y"===d.axis||"y2"===d.axis?config.axis_rotated?0:"end"in d?yScale(d.end):0:config.axis_rotated&&"start"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.start):d.start):0},c3_chart_internal_fn.regionWidth=function(d){var end,$$=this,config=$$.config,start=$$.regionX(d),yScale="y"===d.axis?$$.y:$$.y2;return(end="y"===d.axis||"y2"===d.axis?config.axis_rotated&&"end"in d?yScale(d.end):$$.width:config.axis_rotated?$$.width:"end"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.end):d.end):$$.width)<start?0:end-start},c3_chart_internal_fn.regionHeight=function(d){var end,$$=this,config=$$.config,start=this.regionY(d),yScale="y"===d.axis?$$.y:$$.y2;return(
end="y"===d.axis||"y2"===d.axis?config.axis_rotated?$$.height:"start"in d?yScale(d.start):$$.height:config.axis_rotated&&"end"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.end):d.end):$$.height)<start?0:end-start},c3_chart_internal_fn.isRegionOnX=function(d){return!d.axis||"x"===d.axis},c3_chart_internal_fn.getScale=function(min,max,forTimeseries){return(forTimeseries?this.d3.time.scale():this.d3.scale.linear()).range([min,max])},c3_chart_internal_fn.getX=function(min,max,domain,offset){var key,scale=this.getScale(min,max,this.isTimeSeries()),_scale=domain?scale.domain(domain):scale;for(key in scale=this.isCategorized()?(offset=offset||function(){return 0},
function(d,raw){var v=_scale(d)+offset(d);return raw?v:Math.ceil(v)}):function(d,raw){var v=_scale(d);return raw?v:Math.ceil(v)},_scale)scale[key]=_scale[key];return scale.orgDomain=function(){return _scale.domain()},this.isCategorized()&&(scale.domain=function(domain){return arguments.length?(_scale.domain(domain),scale):[(domain=this.orgDomain())[0],domain[1]+1]}),scale},c3_chart_internal_fn.getY=function(min,max,domain){var scale=this.getScale(min,max,this.isTimeSeriesY());return domain&&scale.domain(domain),scale},c3_chart_internal_fn.getYScale=function(id){return"y2"===this.axis.getId(id)?this.y2:this.y},c3_chart_internal_fn.getSubYScale=function(id){
return"y2"===this.axis.getId(id)?this.subY2:this.subY},c3_chart_internal_fn.updateScales=function(){var $$=this,config=$$.config,forInit=!$$.x;$$.xMin=config.axis_rotated?1:0,$$.xMax=config.axis_rotated?$$.height:$$.width,$$.yMin=config.axis_rotated?0:$$.height,$$.yMax=config.axis_rotated?$$.width:1,$$.subXMin=$$.xMin,$$.subXMax=$$.xMax,$$.subYMin=config.axis_rotated?0:$$.height2,$$.subYMax=config.axis_rotated?$$.width2:1,$$.x=$$.getX($$.xMin,$$.xMax,forInit?void 0:$$.x.orgDomain(),function(){return $$.xAxis.tickOffset()}),$$.y=$$.getY($$.yMin,$$.yMax,forInit?config.axis_y_default:$$.y.domain()),$$.y2=$$.getY($$.yMin,$$.yMax,
forInit?config.axis_y2_default:$$.y2.domain()),$$.subX=$$.getX($$.xMin,$$.xMax,$$.orgXDomain,function(d){return d%1?0:$$.subXAxis.tickOffset()}),$$.subY=$$.getY($$.subYMin,$$.subYMax,forInit?config.axis_y_default:$$.subY.domain()),$$.subY2=$$.getY($$.subYMin,$$.subYMax,forInit?config.axis_y2_default:$$.subY2.domain()),$$.xAxisTickFormat=$$.axis.getXAxisTickFormat(),$$.xAxisTickValues=$$.axis.getXAxisTickValues(),$$.yAxisTickValues=$$.axis.getYAxisTickValues(),$$.y2AxisTickValues=$$.axis.getY2AxisTickValues(),$$.xAxis=$$.axis.getXAxis($$.x,$$.xOrient,$$.xAxisTickFormat,$$.xAxisTickValues,config.axis_x_tick_outer),$$.subXAxis=$$.axis.getXAxis($$.subX,
$$.subXOrient,$$.xAxisTickFormat,$$.xAxisTickValues,config.axis_x_tick_outer),$$.yAxis=$$.axis.getYAxis($$.y,$$.yOrient,config.axis_y_tick_format,$$.yAxisTickValues,config.axis_y_tick_outer),$$.y2Axis=$$.axis.getYAxis($$.y2,$$.y2Orient,config.axis_y2_tick_format,$$.y2AxisTickValues,config.axis_y2_tick_outer),forInit||($$.brush&&$$.brush.scale($$.subX),config.zoom_enabled&&$$.zoom.scale($$.x)),$$.updateArc&&$$.updateArc()},c3_chart_internal_fn.selectPoint=function(target,d,i){var $$=this,config=$$.config,cx=(config.axis_rotated?$$.circleY:$$.circleX).bind($$),cy=(config.axis_rotated?$$.circleX:$$.circleY).bind($$),r=$$.pointSelectR.bind($$)
;config.data_onselected.call($$.api,d,target.node()),$$.main.select("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(d.id)).selectAll("."+CLASS.selectedCircle+"-"+i).data([d]).enter().append("circle").attr("class",function(){return $$.generateClass(CLASS.selectedCircle,i)}).attr("cx",cx).attr("cy",cy).attr("stroke",function(){return $$.color(d)}).attr("r",function(d){return 1.4*$$.pointSelectR(d)}).transition().duration(100).attr("r",r)},c3_chart_internal_fn.unselectPoint=function(target,d,i){this.config.data_onunselected.call(this.api,d,target.node()),this.main.select("."+CLASS.selectedCircles+this.getTargetSelectorSuffix(d.id)).selectAll(
"."+CLASS.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},c3_chart_internal_fn.togglePoint=function(selected,target,d,i){selected?this.selectPoint(target,d,i):this.unselectPoint(target,d,i)},c3_chart_internal_fn.selectPath=function(target,d){var $$=this;$$.config.data_onselected.call($$,d,target.node()),$$.config.interaction_brighten&&target.transition().duration(100).style("fill",function(){return $$.d3.rgb($$.color(d)).brighter(.75)})},c3_chart_internal_fn.unselectPath=function(target,d){var $$=this;$$.config.data_onunselected.call($$,d,target.node()),$$.config.interaction_brighten&&target.transition().duration(100).style("fill",
function(){return $$.color(d)})},c3_chart_internal_fn.togglePath=function(selected,target,d,i){selected?this.selectPath(target,d,i):this.unselectPath(target,d,i)},c3_chart_internal_fn.getToggle=function(that,d){var toggle;return"circle"===that.nodeName?toggle=this.isStepType(d)?function(){}:this.togglePoint:"path"===that.nodeName&&(toggle=this.togglePath),toggle},c3_chart_internal_fn.toggleShape=function(that,d,i){var $$=this,d3=$$.d3,config=$$.config,shape=d3.select(that),isSelected=shape.classed(CLASS.SELECTED),toggle=$$.getToggle(that,d).bind($$);config.data_selection_enabled&&config.data_selection_isselectable(d)&&(
config.data_selection_multiple||$$.main.selectAll("."+CLASS.shapes+(config.data_selection_grouped?$$.getTargetSelectorSuffix(d.id):"")).selectAll("."+CLASS.shape).each(function(d,i){var shape=d3.select(this);shape.classed(CLASS.SELECTED)&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i)}),shape.classed(CLASS.SELECTED,!isSelected),toggle(!isSelected,shape,d,i))},c3_chart_internal_fn.initBar=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartBars)},c3_chart_internal_fn.updateTargetsForBar=function(targets){var $$=this,config=$$.config,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),
classFocus=$$.classFocus.bind($$);$$.main.select("."+CLASS.chartBars).selectAll("."+CLASS.chartBar).data(targets).attr("class",function(d){return classChartBar(d)+classFocus(d)}).enter().append("g").attr("class",classChartBar).style("pointer-events","none").append("g").attr("class",classBars).style("cursor",function(d){return config.data_selection_isselectable(d)?"pointer":null})},c3_chart_internal_fn.updateBar=function(durationForExit){var $$=this,barData=$$.barData.bind($$),classBar=$$.classBar.bind($$),initialOpacity=$$.initialOpacity.bind($$),color=function(d){return $$.color(d.id)};$$.mainBar=$$.main.selectAll("."+CLASS.bars).selectAll("."+CLASS.bar
).data(barData),$$.mainBar.enter().append("path").attr("class",classBar).style("stroke",color).style("fill",color),$$.mainBar.style("opacity",initialOpacity),$$.mainBar.exit().transition().duration(durationForExit).remove()},c3_chart_internal_fn.redrawBar=function(drawBar,withTransition){return[(withTransition?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",drawBar).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},c3_chart_internal_fn.getBarW=function(axis,barTargetsNum){var config=this.config,w="number"==typeof config.bar_width?config.bar_width:barTargetsNum?axis.tickInterval(
)*config.bar_width_ratio/barTargetsNum:0;return config.bar_width_max&&w>config.bar_width_max?config.bar_width_max:w},c3_chart_internal_fn.getBars=function(i,id){return(id?this.main.selectAll("."+CLASS.bars+this.getTargetSelectorSuffix(id)):this.main).selectAll("."+CLASS.bar+(isValue(i)?"-"+i:""))},c3_chart_internal_fn.expandBars=function(i,id,reset){reset&&this.unexpandBars(),this.getBars(i,id).classed(CLASS.EXPANDED,!0)},c3_chart_internal_fn.unexpandBars=function(i){this.getBars(i).classed(CLASS.EXPANDED,!1)},c3_chart_internal_fn.generateDrawBar=function(barIndices,isSub){var config=this.config,getPoints=this.generateGetBarPoints(barIndices,isSub)
;return function(d,i){var points=getPoints(d,i),indexX=config.axis_rotated?1:0,indexY=config.axis_rotated?0:1;return"M "+points[0][indexX]+","+points[0][indexY]+" L"+points[1][indexX]+","+points[1][indexY]+" L"+points[2][indexX]+","+points[2][indexY]+" L"+points[3][indexX]+","+points[3][indexY]+" z"}},c3_chart_internal_fn.generateGetBarPoints=function(barIndices,isSub){var $$=this,axis=isSub?$$.subXAxis:$$.xAxis,barTargetsNum=barIndices.__max__+1,barW=$$.getBarW(axis,barTargetsNum),barX=$$.getShapeX(barW,barTargetsNum,barIndices,!!isSub),barY=$$.getShapeY(!!isSub),barOffset=$$.getShapeOffset($$.isBarType,barIndices,!!isSub),barSpaceOffset=barW*(
$$.config.bar_space/2),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=barOffset(d,i)||y0,posX=barX(d),posY=barY(d);return $$.config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX+barSpaceOffset,offset],[posX+barSpaceOffset,posY-(y0-offset)],[posX+barW-barSpaceOffset,posY-(y0-offset)],[posX+barW-barSpaceOffset,offset]]}},c3_chart_internal_fn.isWithinBar=function(that){var mouse=this.d3.mouse(that),box=that.getBoundingClientRect(),seg0=that.pathSegList.getItem(0),seg1=that.pathSegList.getItem(1),x=Math.min(seg0.x,seg1.x),y=Math.min(seg0.y,seg1.y),ex=x+box.width+2,sy=y+box.height+2,
ey=y-2;return x-2<mouse[0]&&mouse[0]<ex&&ey<mouse[1]&&mouse[1]<sy},c3_chart_internal_fn.getShapeIndices=function(typeFilter){var j,k,config=this.config,indices={},i=0;return this.filterTargetsToShow(this.data.targets.filter(typeFilter,this)).forEach(function(d){for(j=0;j<config.data_groups.length;j++)if(!(config.data_groups[j].indexOf(d.id)<0))for(k=0;k<config.data_groups[j].length;k++)if(config.data_groups[j][k]in indices){indices[d.id]=indices[config.data_groups[j][k]];break}isUndefined(indices[d.id])&&(indices[d.id]=i++)}),indices.__max__=i-1,indices},c3_chart_internal_fn.getShapeX=function(offset,targetsNum,indices,isSub){var scale=isSub?this.subX:this.x
;return function(d){var index=d.id in indices?indices[d.id]:0;return d.x||0===d.x?scale(d.x)-offset*(targetsNum/2-index):0}},c3_chart_internal_fn.getShapeY=function(isSub){var $$=this;return function(d){return(isSub?$$.getSubYScale(d.id):$$.getYScale(d.id))(d.value)}},c3_chart_internal_fn.getShapeOffset=function(typeFilter,indices,isSub){var $$=this,targets=$$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter,$$))),targetIds=targets.map(function(t){return t.id});return function(d,i){var scale=isSub?$$.getSubYScale(d.id):$$.getYScale(d.id),y0=scale(0),offset=y0;return targets.forEach(function(t){var values=$$.isStepType(d
)?$$.convertValuesToStep(t.values):t.values;t.id!==d.id&&indices[t.id]===indices[d.id]&&targetIds.indexOf(t.id)<targetIds.indexOf(d.id)&&(void 0!==values[i]&&+values[i].x==+d.x||(i=-1,values.forEach(function(v,j){v.x===d.x&&(i=j)})),i in values&&0<=values[i].value*d.value&&(offset+=scale(values[i].value)-y0))}),offset}},c3_chart_internal_fn.isWithinShape=function(that,d){var isWithin,$$=this,shape=$$.d3.select(that);return $$.isTargetToShow(d.id)?"circle"===that.nodeName?isWithin=$$.isStepType(d)?$$.isWithinStep(that,$$.getYScale(d.id)(d.value)):$$.isWithinCircle(that,1.5*$$.pointSelectR(d)):"path"===that.nodeName&&(isWithin=!shape.classed(CLASS.bar
)||$$.isWithinBar(that)):isWithin=!1,isWithin},c3_chart_internal_fn.getInterpolate=function(d){var $$=this,interpolation=$$.isInterpolationType($$.config.spline_interpolation_type)?$$.config.spline_interpolation_type:"cardinal";return $$.isSplineType(d)?interpolation:$$.isStepType(d)?$$.config.line_step_type:"linear"},c3_chart_internal_fn.initLine=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartLines)},c3_chart_internal_fn.updateTargetsForLine=function(targets){var mainLineEnter,$$=this,config=$$.config,classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classAreas=$$.classAreas.bind($$),
classCircles=$$.classCircles.bind($$),classFocus=$$.classFocus.bind($$);(mainLineEnter=$$.main.select("."+CLASS.chartLines).selectAll("."+CLASS.chartLine).data(targets).attr("class",function(d){return classChartLine(d)+classFocus(d)}).enter().append("g").attr("class",classChartLine).style("opacity",0).style("pointer-events","none")).append("g").attr("class",classLines),mainLineEnter.append("g").attr("class",classAreas),mainLineEnter.append("g").attr("class",function(d){return $$.generateClass(CLASS.selectedCircles,d.id)}),mainLineEnter.append("g").attr("class",classCircles).style("cursor",function(d){return config.data_selection_isselectable(d
)?"pointer":null}),targets.forEach(function(t){$$.main.selectAll("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(t.id)).selectAll("."+CLASS.selectedCircle).each(function(d){d.value=t.values[d.index].value})})},c3_chart_internal_fn.updateLine=function(durationForExit){var $$=this;$$.mainLine=$$.main.selectAll("."+CLASS.lines).selectAll("."+CLASS.line).data($$.lineData.bind($$)),$$.mainLine.enter().append("path").attr("class",$$.classLine.bind($$)).style("stroke",$$.color),$$.mainLine.style("opacity",$$.initialOpacity.bind($$)).style("shape-rendering",function(d){return $$.isStepType(d)?"crispEdges":""}).attr("transform",null),$$.mainLine.exit(
).transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawLine=function(drawLine,withTransition){return[(withTransition?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",drawLine).style("stroke",this.color).style("opacity",1)]},c3_chart_internal_fn.generateDrawLine=function(lineIndices,isSub){var $$=this,config=$$.config,line=$$.d3.svg.line(),getPoints=$$.generateGetLinePoints(lineIndices,isSub),yScaleGetter=isSub?$$.getSubYScale:$$.getYScale,xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d)},yValue=function(d,i){return 0<config.data_groups.length?getPoints(d,i)[0][1]:yScaleGetter.call(
$$,d.id)(d.value)};return line=config.axis_rotated?line.x(yValue).y(xValue):line.x(xValue).y(yValue),config.line_connectNull||(line=line.defined(function(d){return null!=d.value})),function(d){var values=config.line_connectNull?$$.filterRemoveNull(d.values):d.values,x=isSub?$$.x:$$.subX,y=yScaleGetter.call($$,d.id),x0=0,y0=0;return($$.isLineType(d)?config.data_regions[d.id]?$$.lineWithRegions(values,x,y,config.data_regions[d.id]):($$.isStepType(d)&&(values=$$.convertValuesToStep(values)),line.interpolate($$.getInterpolate(d))(values)):(values[0]&&(x0=x(values[0].x),y0=y(values[0].value)),config.axis_rotated?"M "+y0+" "+x0:"M "+x0+" "+y0))||"M 0 0"}},
c3_chart_internal_fn.generateGetLinePoints=function(lineIndices,isSub){var $$=this,config=$$.config,lineTargetsNum=lineIndices.__max__+1,x=$$.getShapeX(0,lineTargetsNum,lineIndices,!!isSub),y=$$.getShapeY(!!isSub),lineOffset=$$.getShapeOffset($$.isLineType,lineIndices,!!isSub),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=lineOffset(d,i)||y0,posX=x(d),posY=y(d);return config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)]]}},c3_chart_internal_fn.lineWithRegions=function(d,x,y,_regions){var i
,j,sWithRegion,xp,yp,dx,dy,diff,diffx2,xValue,yValue,$$=this,config=$$.config,s="M",xOffset=$$.isCategorized()?.5:0,regions=[];function isWithinRegions(x,regions){var i;for(i=0;i<regions.length;i++)if(regions[i].start<x&&x<=regions[i].end)return!0;return!1}if(isDefined(_regions))for(i=0;i<_regions.length;i++)regions[i]={},isUndefined(_regions[i].start)?regions[i].start=d[0].x:regions[i].start=$$.isTimeSeries()?$$.parseDate(_regions[i].start):_regions[i].start,isUndefined(_regions[i].end)?regions[i].end=d[d.length-1].x:regions[i].end=$$.isTimeSeries()?$$.parseDate(_regions[i].end):_regions[i].end;function generateM(points){
return"M"+points[0][0]+" "+points[0][1]+" "+points[1][0]+" "+points[1][1]}for(xValue=config.axis_rotated?function(d){return y(d.value)}:function(d){return x(d.x)},yValue=config.axis_rotated?function(d){return x(d.x)}:function(d){return y(d.value)},sWithRegion=$$.isTimeSeries()?function(d0,d1,j,diff){var x0=d0.x.getTime(),x_diff=d1.x-d0.x,xv0=new Date(x0+x_diff*j),xv1=new Date(x0+x_diff*(j+diff));return generateM(config.axis_rotated?[[y(yp(j)),x(xv0)],[y(yp(j+diff)),x(xv1)]]:[[x(xv0),y(yp(j))],[x(xv1),y(yp(j+diff))]])}:function(d0,d1,j,diff){return generateM(config.axis_rotated?[[y(yp(j),!0),x(xp(j))],[y(yp(j+diff),!0),x(xp(j+diff))]]:[[x(xp(j),!0),y(yp(j))],
[x(xp(j+diff),!0),y(yp(j+diff))]])},i=0;i<d.length;i++){if(isUndefined(regions)||!isWithinRegions(d[i].x,regions))s+=" "+xValue(d[i])+" "+yValue(d[i]);else for(xp=$$.getScale(d[i-1].x+xOffset,d[i].x+xOffset,$$.isTimeSeries()),yp=$$.getScale(d[i-1].value,d[i].value),dx=x(d[i].x)-x(d[i-1].x),dy=y(d[i].value)-y(d[i-1].value),diffx2=2*(diff=2/Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2))),j=diff;j<=1;j+=diffx2)s+=sWithRegion(d[i-1],d[i],j,diff);d[i].x}return s},c3_chart_internal_fn.updateArea=function(durationForExit){var $$=this,d3=$$.d3;$$.mainArea=$$.main.selectAll("."+CLASS.areas).selectAll("."+CLASS.area).data($$.lineData.bind($$)),$$.mainArea.enter().append(
"path").attr("class",$$.classArea.bind($$)).style("fill",$$.color).style("opacity",function(){return $$.orgAreaOpacity=+d3.select(this).style("opacity"),0}),$$.mainArea.style("opacity",$$.orgAreaOpacity),$$.mainArea.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawArea=function(drawArea,withTransition){return[(withTransition?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",drawArea).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},c3_chart_internal_fn.generateDrawArea=function(areaIndices,isSub){var $$=this,config=$$.config,area=$$.d3.svg.area(),
getPoints=$$.generateGetAreaPoints(areaIndices,isSub),yScaleGetter=isSub?$$.getSubYScale:$$.getYScale,xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d)},value0=function(d,i){return 0<config.data_groups.length?getPoints(d,i)[0][1]:yScaleGetter.call($$,d.id)($$.getAreaBaseValue(d.id))},value1=function(d,i){return 0<config.data_groups.length?getPoints(d,i)[1][1]:yScaleGetter.call($$,d.id)(d.value)};return area=config.axis_rotated?area.x0(value0).x1(value1).y(xValue):area.x(xValue).y0(config.area_above?0:value0).y1(value1),config.line_connectNull||(area=area.defined(function(d){return null!==d.value})),function(d){
var values=config.line_connectNull?$$.filterRemoveNull(d.values):d.values,x0=0,y0=0;return($$.isAreaType(d)?($$.isStepType(d)&&(values=$$.convertValuesToStep(values)),area.interpolate($$.getInterpolate(d))(values)):(values[0]&&(x0=$$.x(values[0].x),y0=$$.getYScale(d.id)(values[0].value)),config.axis_rotated?"M "+y0+" "+x0:"M "+x0+" "+y0))||"M 0 0"}},c3_chart_internal_fn.getAreaBaseValue=function(){return 0},c3_chart_internal_fn.generateGetAreaPoints=function(areaIndices,isSub){var $$=this,config=$$.config,areaTargetsNum=areaIndices.__max__+1,x=$$.getShapeX(0,areaTargetsNum,areaIndices,!!isSub),y=$$.getShapeY(!!isSub),areaOffset=$$.getShapeOffset(
$$.isAreaType,areaIndices,!!isSub),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=areaOffset(d,i)||y0,posX=x(d),posY=y(d);return config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX,offset],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,offset]]}},c3_chart_internal_fn.updateCircle=function(){var $$=this;$$.mainCircle=$$.main.selectAll("."+CLASS.circles).selectAll("."+CLASS.circle).data($$.lineOrScatterData.bind($$)),$$.mainCircle.enter().append("circle").attr("class",$$.classCircle.bind($$)).attr("r",$$.pointR.bind($$)).style("fill",$$.color),$$.mainCircle.style("opacity"
,$$.initialOpacityForCircle.bind($$)),$$.mainCircle.exit().remove()},c3_chart_internal_fn.redrawCircle=function(cx,cy,withTransition){var selectedCircles=this.main.selectAll("."+CLASS.selectedCircle);return[(withTransition?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",cx).attr("cy",cy),(withTransition?selectedCircles.transition(Math.random().toString()):selectedCircles).attr("cx",cx).attr("cy",cy)]},c3_chart_internal_fn.circleX=function(d){return d.x||0===d.x?this.x(d.x):null},c3_chart_internal_fn.updateCircleY=function(){var lineIndices,getPoints,
$$=this;0<$$.config.data_groups.length?(lineIndices=$$.getShapeIndices($$.isLineType),getPoints=$$.generateGetLinePoints(lineIndices),$$.circleY=function(d,i){return getPoints(d,i)[0][1]}):$$.circleY=function(d){return $$.getYScale(d.id)(d.value)}},c3_chart_internal_fn.getCircles=function(i,id){return(id?this.main.selectAll("."+CLASS.circles+this.getTargetSelectorSuffix(id)):this.main).selectAll("."+CLASS.circle+(isValue(i)?"-"+i:""))},c3_chart_internal_fn.expandCircles=function(i,id,reset){var r=this.pointExpandedR.bind(this);reset&&this.unexpandCircles(),this.getCircles(i,id).classed(CLASS.EXPANDED,!0).attr("r",r)},
c3_chart_internal_fn.unexpandCircles=function(i){var $$=this,r=$$.pointR.bind($$);$$.getCircles(i).filter(function(){return $$.d3.select(this).classed(CLASS.EXPANDED)}).classed(CLASS.EXPANDED,!1).attr("r",r)},c3_chart_internal_fn.pointR=function(d){var config=this.config;return this.isStepType(d)?0:isFunction(config.point_r)?config.point_r(d):config.point_r},c3_chart_internal_fn.pointExpandedR=function(d){var config=this.config;return config.point_focus_expand_enabled?isFunction(config.point_focus_expand_r)?config.point_focus_expand_r(d):config.point_focus_expand_r?config.point_focus_expand_r:1.75*this.pointR(d):this.pointR(d)},
c3_chart_internal_fn.pointSelectR=function(d){var config=this.config;return isFunction(config.point_select_r)?config.point_select_r(d):config.point_select_r?config.point_select_r:4*this.pointR(d)},c3_chart_internal_fn.isWithinCircle=function(that,r){var d3=this.d3,mouse=d3.mouse(that),d3_this=d3.select(that),cx=+d3_this.attr("cx"),cy=+d3_this.attr("cy");return Math.sqrt(Math.pow(cx-mouse[0],2)+Math.pow(cy-mouse[1],2))<r},c3_chart_internal_fn.isWithinStep=function(that,y){return Math.abs(y-this.d3.mouse(that)[1])<30},c3_chart_internal_fn.getCurrentWidth=function(){var config=this.config;return config.size_width?config.size_width:this.getParentWidth()},
c3_chart_internal_fn.getCurrentHeight=function(){var config=this.config,h=config.size_height?config.size_height:this.getParentHeight();return 0<h?h:320/(this.hasType("gauge")&&!config.gauge_fullCircle?2:1)},c3_chart_internal_fn.getCurrentPaddingTop=function(){var config=this.config,padding=isValue(config.padding_top)?config.padding_top:0;return this.title&&this.title.node()&&(padding+=this.getTitlePadding()),padding},c3_chart_internal_fn.getCurrentPaddingBottom=function(){var config=this.config;return isValue(config.padding_bottom)?config.padding_bottom:0},c3_chart_internal_fn.getCurrentPaddingLeft=function(withoutRecompute){var config=this.config
;return isValue(config.padding_left)?config.padding_left:config.axis_rotated?!config.axis_x_show||config.axis_x_inner?1:Math.max(ceil10(this.getAxisWidthByAxisId("x",withoutRecompute)),40):!config.axis_y_show||config.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:ceil10(this.getAxisWidthByAxisId("y",withoutRecompute))},c3_chart_internal_fn.getCurrentPaddingRight=function(){var $$=this,config=$$.config,legendWidthOnRight=$$.isLegendRight?$$.getLegendWidth()+20:0;return isValue(config.padding_right)?config.padding_right+1:config.axis_rotated?10+legendWidthOnRight:!config.axis_y2_show||config.axis_y2_inner?2+legendWidthOnRight+(
$$.axis.getY2AxisLabelPosition().isOuter?20:0):ceil10($$.getAxisWidthByAxisId("y2"))+legendWidthOnRight},c3_chart_internal_fn.getParentRectValue=function(key){for(var v,parent=this.selectChart.node();parent&&"BODY"!==parent.tagName;){try{v=parent.getBoundingClientRect()[key]}catch(e){"width"===key&&(v=parent.offsetWidth)}if(v)break;parent=parent.parentNode}return v},c3_chart_internal_fn.getParentWidth=function(){return this.getParentRectValue("width")},c3_chart_internal_fn.getParentHeight=function(){var h=this.selectChart.style("height");return 0<h.indexOf("px")?+h.replace("px",""):0},c3_chart_internal_fn.getSvgLeft=function(withoutRecompute){var $$=this,
config=$$.config,hasLeftAxisRect=config.axis_rotated||!config.axis_rotated&&!config.axis_y_inner,leftAxisClass=config.axis_rotated?CLASS.axisX:CLASS.axisY,leftAxis=$$.main.select("."+leftAxisClass).node(),svgRect=leftAxis&&hasLeftAxisRect?leftAxis.getBoundingClientRect():{right:0},chartRect=$$.selectChart.node().getBoundingClientRect(),hasArc=$$.hasArcType(),svgLeft=svgRect.right-chartRect.left-(hasArc?0:$$.getCurrentPaddingLeft(withoutRecompute));return 0<svgLeft?svgLeft:0},c3_chart_internal_fn.getAxisWidthByAxisId=function(id,withoutRecompute){var position=this.axis.getLabelPositionById(id);return this.axis.getMaxTickWidth(id,withoutRecompute)+(
position.isInner?20:40)},c3_chart_internal_fn.getHorizontalAxisHeight=function(axisId){var $$=this,config=$$.config,h=30;return"x"!==axisId||config.axis_x_show?"x"===axisId&&config.axis_x_height?config.axis_x_height:"y"!==axisId||config.axis_y_show?"y2"!==axisId||config.axis_y2_show?("x"===axisId&&!config.axis_rotated&&config.axis_x_tick_rotate&&(h=30+$$.axis.getMaxTickWidth(axisId)*Math.cos(Math.PI*(90-config.axis_x_tick_rotate)/180)),"y"===axisId&&config.axis_rotated&&config.axis_y_tick_rotate&&(h=30+$$.axis.getMaxTickWidth(axisId)*Math.cos(Math.PI*(90-config.axis_y_tick_rotate)/180)),h+($$.axis.getLabelPositionById(axisId).isInner?0:10)+(
"y2"===axisId?-10:0)):$$.rotated_padding_top:!config.legend_show||$$.isLegendRight||$$.isLegendInset?1:10:8},c3_chart_internal_fn.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},c3_chart_internal_fn.initBrush=function(){var $$=this,d3=$$.d3;$$.brush=d3.svg.brush().on("brush",function(){$$.redrawForBrush()}),$$.brush.update=function(){return $$.context&&$$.context.select("."+CLASS.brush).call(this),this},$$.brush.scale=function(scale){return $$.config.axis_rotated?this.y(scale):this.x(scale)}},c3_chart_internal_fn.initSubchart=function(){var $$=this,config=$$.config,context=$$.context=$$.svg.append("g").attr("transform",
$$.getTranslate("context")),visibility=config.subchart_show?"visible":"hidden";context.style("visibility",visibility),context.append("g").attr("clip-path",$$.clipPathForSubchart).attr("class",CLASS.chart),context.select("."+CLASS.chart).append("g").attr("class",CLASS.chartBars),context.select("."+CLASS.chart).append("g").attr("class",CLASS.chartLines),context.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.brush).call($$.brush),$$.axes.subx=context.append("g").attr("class",CLASS.axisX).attr("transform",$$.getTranslate("subx")).attr("clip-path",config.axis_rotated?"":$$.clipPathForXAxis).style("visibility",
config.subchart_axis_x_show?visibility:"hidden")},c3_chart_internal_fn.updateTargetsForSubchart=function(targets){var contextLineEnter,$$=this,context=$$.context,config=$$.config,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classAreas=$$.classAreas.bind($$);config.subchart_show&&(context.select("."+CLASS.chartBars).selectAll("."+CLASS.chartBar).data(targets).attr("class",classChartBar).enter().append("g").style("opacity",0).attr("class",classChartBar).append("g").attr("class",classBars),(contextLineEnter=context.select("."+CLASS.chartLines).selectAll(
"."+CLASS.chartLine).data(targets).attr("class",classChartLine).enter().append("g").style("opacity",0).attr("class",classChartLine)).append("g").attr("class",classLines),contextLineEnter.append("g").attr("class",classAreas),context.selectAll("."+CLASS.brush+" rect").attr(config.axis_rotated?"width":"height",config.axis_rotated?$$.width2:$$.height2))},c3_chart_internal_fn.updateBarForSubchart=function(durationForExit){var $$=this;$$.contextBar=$$.context.selectAll("."+CLASS.bars).selectAll("."+CLASS.bar).data($$.barData.bind($$)),$$.contextBar.enter().append("path").attr("class",$$.classBar.bind($$)).style("stroke","none").style("fill",$$.color),
$$.contextBar.style("opacity",$$.initialOpacity.bind($$)),$$.contextBar.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawBarForSubchart=function(drawBarOnSub,withTransition,duration){(withTransition?this.contextBar.transition(Math.random().toString()).duration(duration):this.contextBar).attr("d",drawBarOnSub).style("opacity",1)},c3_chart_internal_fn.updateLineForSubchart=function(durationForExit){var $$=this;$$.contextLine=$$.context.selectAll("."+CLASS.lines).selectAll("."+CLASS.line).data($$.lineData.bind($$)),$$.contextLine.enter().append("path").attr("class",$$.classLine.bind($$)).style("stroke",
$$.color),$$.contextLine.style("opacity",$$.initialOpacity.bind($$)),$$.contextLine.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawLineForSubchart=function(drawLineOnSub,withTransition,duration){(withTransition?this.contextLine.transition(Math.random().toString()).duration(duration):this.contextLine).attr("d",drawLineOnSub).style("opacity",1)},c3_chart_internal_fn.updateAreaForSubchart=function(durationForExit){var $$=this,d3=$$.d3;$$.contextArea=$$.context.selectAll("."+CLASS.areas).selectAll("."+CLASS.area).data($$.lineData.bind($$)),$$.contextArea.enter().append("path").attr("class",$$.classArea.bind(
$$)).style("fill",$$.color).style("opacity",function(){return $$.orgAreaOpacity=+d3.select(this).style("opacity"),0}),$$.contextArea.style("opacity",0),$$.contextArea.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawAreaForSubchart=function(drawAreaOnSub,withTransition,duration){(withTransition?this.contextArea.transition(Math.random().toString()).duration(duration):this.contextArea).attr("d",drawAreaOnSub).style("fill",this.color).style("opacity",this.orgAreaOpacity)},c3_chart_internal_fn.redrawSubchart=function(withSubchart,transitions,duration,durationForExit,areaIndices,barIndices,lineIndices){
var drawAreaOnSub,drawBarOnSub,drawLineOnSub,$$=this,d3=$$.d3,config=$$.config;$$.context.style("visibility",config.subchart_show?"visible":"hidden"),config.subchart_show&&(d3.event&&"zoom"===d3.event.type&&$$.brush.extent($$.x.orgDomain()).update(),withSubchart&&($$.brush.empty()||$$.brush.extent($$.x.orgDomain()).update(),drawAreaOnSub=$$.generateDrawArea(areaIndices,!0),drawBarOnSub=$$.generateDrawBar(barIndices,!0),drawLineOnSub=$$.generateDrawLine(lineIndices,!0),$$.updateBarForSubchart(duration),$$.updateLineForSubchart(duration),$$.updateAreaForSubchart(duration),$$.redrawBarForSubchart(drawBarOnSub,duration,duration),$$.redrawLineForSubchart(
drawLineOnSub,duration,duration),$$.redrawAreaForSubchart(drawAreaOnSub,duration,duration)))},c3_chart_internal_fn.redrawForBrush=function(){var $$=this,x=$$.x;$$.redraw({withTransition:!1,withY:$$.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),$$.config.subchart_onbrush.call($$.api,x.orgDomain())},c3_chart_internal_fn.transformContext=function(withTransition,transitions){var subXAxis;transitions&&transitions.axisSubX?subXAxis=transitions.axisSubX:(subXAxis=this.context.select("."+CLASS.axisX),withTransition&&(subXAxis=subXAxis.transition())),this.context.attr("transform",this.getTranslate("context")),subXAxis.attr("transform",
this.getTranslate("subx"))},c3_chart_internal_fn.getDefaultExtent=function(){var $$=this,config=$$.config,extent=isFunction(config.axis_x_extent)?config.axis_x_extent($$.getXDomain($$.data.targets)):config.axis_x_extent;return $$.isTimeSeries()&&(extent=[$$.parseDate(extent[0]),$$.parseDate(extent[1])]),extent},c3_chart_internal_fn.initText=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartTexts),this.mainText=this.d3.selectAll([])},c3_chart_internal_fn.updateTargetsForText=function(targets){var $$=this,classChartText=$$.classChartText.bind($$),classTexts=$$.classTexts.bind($$),classFocus=$$.classFocus.bind($$);$$.main.select(
"."+CLASS.chartTexts).selectAll("."+CLASS.chartText).data(targets).attr("class",function(d){return classChartText(d)+classFocus(d)}).enter().append("g").attr("class",classChartText).style("opacity",0).style("pointer-events","none").append("g").attr("class",classTexts)},c3_chart_internal_fn.updateText=function(durationForExit){var $$=this,config=$$.config,barOrLineData=$$.barOrLineData.bind($$),classText=$$.classText.bind($$);$$.mainText=$$.main.selectAll("."+CLASS.texts).selectAll("."+CLASS.text).data(barOrLineData),$$.mainText.enter().append("text").attr("class",classText).attr("text-anchor",function(d){
return config.axis_rotated?d.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(d){return $$.color(d)}).style("fill-opacity",0),$$.mainText.text(function(d,i,j){return $$.dataLabelFormat(d.id)(d.value,d.id,i,j)}),$$.mainText.exit().transition().duration(durationForExit).style("fill-opacity",0).remove()},c3_chart_internal_fn.redrawText=function(xForText,yForText,forFlow,withTransition){return[(withTransition?this.mainText.transition():this.mainText).attr("x",xForText).attr("y",yForText).style("fill",this.color).style("fill-opacity",forFlow?0:this.opacityForText.bind(this))]},c3_chart_internal_fn.getTextRect=function(text,cls,element
){var rect,dummy=this.d3.select("body").append("div").classed("c3",!0),svg=dummy.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),font=this.d3.select(element).style("font");return svg.selectAll(".dummy").data([text]).enter().append("text").classed(cls||"",!0).style("font",font).text(text).each(function(){rect=this.getBoundingClientRect()}),dummy.remove(),rect},c3_chart_internal_fn.generateXYForText=function(areaIndices,barIndices,lineIndices,forX){var $$=this,getAreaPoints=$$.generateGetAreaPoints(areaIndices,!1),getBarPoints=$$.generateGetBarPoints(barIndices,!1),getLinePoints=$$.generateGetLinePoints(
lineIndices,!1),getter=forX?$$.getXForText:$$.getYForText;return function(d,i){var getPoints=$$.isAreaType(d)?getAreaPoints:$$.isBarType(d)?getBarPoints:getLinePoints;return getter.call($$,getPoints(d,i),d,this)}},c3_chart_internal_fn.getXForText=function(points,d,textElement){var xPos,padding,$$=this,box=textElement.getBoundingClientRect();return xPos=$$.config.axis_rotated?(padding=$$.isBarType(d)?4:6,points[2][1]+padding*(d.value<0?-1:1)):$$.hasType("bar")?(points[2][0]+points[0][0])/2:points[0][0],null===d.value&&(xPos>$$.width?xPos=$$.width-box.width:xPos<0&&(xPos=4)),xPos},c3_chart_internal_fn.getYForText=function(points,d,textElement){var yPos,$$=this
,box=textElement.getBoundingClientRect();return $$.config.axis_rotated?yPos=(points[0][0]+points[2][0]+.6*box.height)/2:(yPos=points[2][1],d.value<0||0===d.value&&!$$.hasPositiveValue?(yPos+=box.height,$$.isBarType(d)&&$$.isSafari()?yPos-=3:!$$.isBarType(d)&&$$.isChrome()&&(yPos+=3)):yPos+=$$.isBarType(d)?-3:-6),null!==d.value||$$.config.axis_rotated||(yPos<box.height?yPos=box.height:yPos>this.height&&(yPos=this.height-4)),yPos},c3_chart_internal_fn.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},c3_chart_internal_fn.redrawTitle=function(){var $$=this;$$.title.attr("x",$$.xForTitle.bind($$)
).attr("y",$$.yForTitle.bind($$))},c3_chart_internal_fn.xForTitle=function(){var $$=this,config=$$.config,position=config.title_position||"left";return 0<=position.indexOf("right")?$$.currentWidth-$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).width-config.title_padding.right:0<=position.indexOf("center")?($$.currentWidth-$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).width)/2:config.title_padding.left},c3_chart_internal_fn.yForTitle=function(){var $$=this;return $$.config.title_padding.top+$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).height},
c3_chart_internal_fn.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},c3_chart_internal_fn.initTooltip=function(){var i,$$=this,config=$$.config;if($$.tooltip=$$.selectChart.style("position","relative").append("div").attr("class",CLASS.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),config.tooltip_init_show){if($$.isTimeSeries()&&isString(config.tooltip_init_x)){for(config.tooltip_init_x=$$.parseDate(config.tooltip_init_x),i=0;i<$$.data.targets[0].values.length&&$$.data.targets[0].values[i].x-config.tooltip_init_x!=0;i++);config.tooltip_init_x=i}$$.tooltip.html(
config.tooltip_contents.call($$,$$.data.targets.map(function(d){return $$.addName(d.values[config.tooltip_init_x])}),$$.axis.getXAxisTickFormat(),$$.getYFormat($$.hasArcType()),$$.color)),$$.tooltip.style("top",config.tooltip_init_position.top).style("left",config.tooltip_init_position.left).style("display","block")}},c3_chart_internal_fn.getTooltipSortFunction=function(){var $$=this,config=$$.config;if(0!==config.data_groups.length&&void 0===config.tooltip_order){var ids=$$.orderTargets($$.data.targets).map(function(i){return i.id});return($$.isOrderAsc()||$$.isOrderDesc())&&(ids=ids.reverse()),function(a,b){return ids.indexOf(a.id)-ids.indexOf(b.id)}}
var order=config.tooltip_order;void 0===order&&(order=config.data_order);var valueOf=function(obj){return obj?obj.value:null};if(isString(order)&&"asc"===order.toLowerCase())return function(a,b){return valueOf(a)-valueOf(b)};if(isString(order)&&"desc"===order.toLowerCase())return function(a,b){return valueOf(b)-valueOf(a)};if(isFunction(order)){var sortFunction=order;return void 0===config.tooltip_order&&(sortFunction=function(a,b){return order(a?{id:a.id,values:[a]}:null,b?{id:b.id,values:[b]}:null)}),sortFunction}return isArray(order)?function(a,b){return order.indexOf(a.id)-order.indexOf(b.id)}:void 0},c3_chart_internal_fn.getTooltipContent=function(d,
defaultTitleFormat,defaultValueFormat,color){var text,i,title,value,name,bgcolor,$$=this,config=$$.config,titleFormat=config.tooltip_format_title||defaultTitleFormat,nameFormat=config.tooltip_format_name||function(name){return name},valueFormat=config.tooltip_format_value||defaultValueFormat,tooltipSortFunction=this.getTooltipSortFunction();for(tooltipSortFunction&&d.sort(tooltipSortFunction),i=0;i<d.length;i++)if(d[i]&&(d[i].value||0===d[i].value)&&(text||(title=sanitise(titleFormat?titleFormat(d[i].x):d[i].x),text="<table class='"+$$.CLASS.tooltip+"'>"+(title||0===title?"<tr><th colspan='2'>"+title+"</th></tr>":"")),void 0!==(value=sanitise(valueFormat(
d[i].value,d[i].ratio,d[i].id,d[i].index,d))))){if(null===d[i].name)continue;name=sanitise(nameFormat(d[i].name,d[i].ratio,d[i].id,d[i].index)),bgcolor=$$.levelColor?$$.levelColor(d[i].value):color(d[i].id),text+="<tr class='"+$$.CLASS.tooltipName+"-"+$$.getTargetSelectorSuffix(d[i].id)+"'>",text+="<td class='name'><span style='background-color:"+bgcolor+"'></span>"+name+"</td>",text+="<td class='value'>"+value+"</td>",text+="</tr>"}return text+"</table>"},c3_chart_internal_fn.tooltipPosition=function(dataToShow,tWidth,tHeight,element){var svgLeft,tooltipLeft,tooltipRight,tooltipTop,chartRight,$$=this,config=$$.config,d3=$$.d3,forArc=$$.hasArcType(),
mouse=d3.mouse(element);return forArc?(tooltipLeft=($$.width-($$.isLegendRight?$$.getLegendWidth():0))/2+mouse[0],tooltipTop=($$.hasType("gauge")?$$.height:$$.height/2)+mouse[1]+20):(svgLeft=$$.getSvgLeft(!0),tooltipTop=config.axis_rotated?(tooltipRight=(tooltipLeft=svgLeft+mouse[0]+100)+tWidth,chartRight=$$.currentWidth-$$.getCurrentPaddingRight(),$$.x(dataToShow[0].x)+20):(tooltipRight=(tooltipLeft=svgLeft+$$.getCurrentPaddingLeft(!0)+$$.x(dataToShow[0].x)+20)+tWidth,chartRight=svgLeft+$$.currentWidth-$$.getCurrentPaddingRight(),mouse[1]+15),chartRight<tooltipRight&&(tooltipLeft-=tooltipRight-chartRight+20),tooltipTop+tHeight>$$.currentHeight&&(
tooltipTop-=tHeight+30)),tooltipTop<0&&(tooltipTop=0),{top:tooltipTop,left:tooltipLeft}},c3_chart_internal_fn.showTooltip=function(selectedData,element){var tWidth,tHeight,position,$$=this,config=$$.config,forArc=$$.hasArcType(),dataToShow=selectedData.filter(function(d){return d&&isValue(d.value)}),positionFunction=config.tooltip_position||c3_chart_internal_fn.tooltipPosition;0!==dataToShow.length&&config.tooltip_show&&($$.tooltip.html(config.tooltip_contents.call($$,selectedData,$$.axis.getXAxisTickFormat(),$$.getYFormat(forArc),$$.color)).style("display","block"),tWidth=$$.tooltip.property("offsetWidth"),tHeight=$$.tooltip.property("offsetHeight"),
position=positionFunction.call(this,dataToShow,tWidth,tHeight,element),$$.tooltip.style("top",position.top+"px").style("left",position.left+"px"))},c3_chart_internal_fn.hideTooltip=function(){this.tooltip.style("display","none")},c3_chart_internal_fn.setTargetType=function(targetIds,type){var $$=this,config=$$.config;$$.mapToTargetIds(targetIds).forEach(function(id){$$.withoutFadeIn[id]=type===config.data_types[id],config.data_types[id]=type}),targetIds||(config.data_type=type)},c3_chart_internal_fn.hasType=function(type,targets){var types=this.config.data_types,has=!1;return(targets=targets||this.data.targets)&&targets.length?targets.forEach(function(target
){var t=types[target.id];(t&&0<=t.indexOf(type)||!t&&"line"===type)&&(has=!0)}):Object.keys(types).length?Object.keys(types).forEach(function(id){types[id]===type&&(has=!0)}):has=this.config.data_type===type,has},c3_chart_internal_fn.hasArcType=function(targets){return this.hasType("pie",targets)||this.hasType("donut",targets)||this.hasType("gauge",targets)},c3_chart_internal_fn.isLineType=function(d){var config=this.config,id=isString(d)?d:d.id;return!config.data_types[id]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(config.data_types[id])},c3_chart_internal_fn.isStepType=function(d){var id=isString(d)?d:d.id;return 0<=["step",
"area-step"].indexOf(this.config.data_types[id])},c3_chart_internal_fn.isSplineType=function(d){var id=isString(d)?d:d.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[id])},c3_chart_internal_fn.isAreaType=function(d){var id=isString(d)?d:d.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[id])},c3_chart_internal_fn.isBarType=function(d){var id=isString(d)?d:d.id;return"bar"===this.config.data_types[id]},c3_chart_internal_fn.isScatterType=function(d){var id=isString(d)?d:d.id;return"scatter"===this.config.data_types[id]},c3_chart_internal_fn.isPieType=function(d){var id=isString(d)?d:d.id
;return"pie"===this.config.data_types[id]},c3_chart_internal_fn.isGaugeType=function(d){var id=isString(d)?d:d.id;return"gauge"===this.config.data_types[id]},c3_chart_internal_fn.isDonutType=function(d){var id=isString(d)?d:d.id;return"donut"===this.config.data_types[id]},c3_chart_internal_fn.isArcType=function(d){return this.isPieType(d)||this.isDonutType(d)||this.isGaugeType(d)},c3_chart_internal_fn.lineData=function(d){return this.isLineType(d)?[d]:[]},c3_chart_internal_fn.arcData=function(d){return this.isArcType(d.data)?[d]:[]},c3_chart_internal_fn.barData=function(d){return this.isBarType(d)?d.values:[]},c3_chart_internal_fn.lineOrScatterData=function(
d){return this.isLineType(d)||this.isScatterType(d)?d.values:[]},c3_chart_internal_fn.barOrLineData=function(d){return this.isBarType(d)||this.isLineType(d)?d.values:[]},c3_chart_internal_fn.isInterpolationType=function(type){return 0<=["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(type)},c3_chart_internal_fn.isSafari=function(){var ua=window.navigator.userAgent;return 0<=ua.indexOf("Safari")&&ua.indexOf("Chrome")<0},c3_chart_internal_fn.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},c3_chart_internal_fn.initZoom=function(){var startEvent,
$$=this,d3=$$.d3,config=$$.config;$$.zoom=d3.behavior.zoom().on("zoomstart",function(){startEvent=d3.event.sourceEvent,$$.zoom.altDomain=d3.event.sourceEvent.altKey?$$.x.orgDomain():null,config.zoom_onzoomstart.call($$.api,d3.event.sourceEvent)}).on("zoom",function(){$$.redrawForZoom.call($$)}).on("zoomend",function(){var event=d3.event.sourceEvent;event&&startEvent.clientX===event.clientX&&startEvent.clientY===event.clientY||($$.redrawEventRect(),$$.updateZoom(),config.zoom_onzoomend.call($$.api,$$.x.orgDomain()))}),$$.zoom.scale=function(scale){return config.axis_rotated?this.y(scale):this.x(scale)},$$.zoom.orgScaleExtent=function(){
var extent=config.zoom_extent?config.zoom_extent:[1,10];return[extent[0],Math.max($$.getMaxDataCount()/extent[1],extent[1])]},$$.zoom.updateScaleExtent=function(){var ratio=diffDomain($$.x.orgDomain())/diffDomain($$.getZoomDomain()),extent=this.orgScaleExtent();return this.scaleExtent([extent[0]*ratio,extent[1]*ratio]),this}},c3_chart_internal_fn.getZoomDomain=function(){var config=this.config,d3=this.d3;return[d3.min([this.orgXDomain[0],config.zoom_x_min]),d3.max([this.orgXDomain[1],config.zoom_x_max])]},c3_chart_internal_fn.updateZoom=function(){var z=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+CLASS.zoomRect).call(z).on(
"dblclick.zoom",null),this.main.selectAll("."+CLASS.eventRect).call(z).on("dblclick.zoom",null)},c3_chart_internal_fn.redrawForZoom=function(){var $$=this,d3=$$.d3,config=$$.config,zoom=$$.zoom,x=$$.x;if(config.zoom_enabled&&0!==$$.filterTargetsToShow($$.data.targets).length){if("mousemove"===d3.event.sourceEvent.type&&zoom.altDomain)return x.domain(zoom.altDomain),void zoom.scale(x).updateScaleExtent();$$.isCategorized()&&x.orgDomain()[0]===$$.orgXDomain[0]&&x.domain([$$.orgXDomain[0]-1e-10,x.orgDomain()[1]]),$$.redraw({withTransition:!1,withY:config.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===d3.event.sourceEvent.type&&(
$$.cancelClick=!0),config.zoom_onzoom.call($$.api,x.orgDomain())}},c3}),define("core/areaBroker",["jquery","lodash"],function($,_){"use strict";return function(requiredAreas,$container,mapping){var broker,areas,components={};if(("string"==typeof $container||$container instanceof HTMLElement)&&($container=$($container)),!$container||!$container.length)throw new TypeError("Please provide the areaBroker a container");return requiredAreas=requiredAreas||[],(broker={defineAreas:function(areasMapping){var keys;if(!_.isPlainObject(areasMapping))throw new TypeError("A mapping has the form of a plain object");if(keys=_.keys(areasMapping),!_.all(requiredAreas,
function(val){return _.contains(keys,val)}))throw new TypeError("You have to define a mapping for at least : "+requiredAreas.join(", "));areas=areasMapping},getContainer:function(){return $container},getArea:function(name){if(_.isEmpty(areas))throw new Error("Sorry areas have not been defined yet!");return areas[name]},setComponent:function(areaName,component){if(!areas[areaName])throw new TypeError("There is no areas defined or no area named "+areaName);if(!_.isObject(component))throw new TypeError("A component has to be an object");components[areaName]=component,this["get"+areaName[0].toUpperCase()+areaName.slice(1)]=this.getComponent.bind(this,areaName)},
getComponent:function(areaName){return components[areaName]}}).defineAreas(mapping),_.forEach(requiredAreas,function(area){var areaIdentifier=area[0].toUpperCase()+area.slice(1);broker["get"+areaIdentifier+"Area"]=_.bind(_.partial(broker.getArea,area),broker)}),broker}}),function(){"use strict";function lib$es6$promise$utils$$isFunction(x){return"function"==typeof x}var lib$es6$promise$asap$$vertxNext,lib$es6$promise$asap$$customSchedulerFn,lib$es6$promise$utils$$isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},lib$es6$promise$asap$$len=0,lib$es6$promise$asap$$asap=function(callback,arg){
lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback,lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg,2===(lib$es6$promise$asap$$len+=2)&&(lib$es6$promise$asap$$customSchedulerFn?lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush):lib$es6$promise$asap$$scheduleFlush())};var lib$es6$promise$asap$$browserWindow="undefined"!=typeof window?window:void 0,lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{},lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver,
lib$es6$promise$asap$$isNode="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),lib$es6$promise$asap$$isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}var lib$es6$promise$asap$$scheduleFlush,channel,iterations,observer,node,nextTick,version,lib$es6$promise$asap$$queue=new Array(1e3);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){(0,lib$es6$promise$asap$$queue[i])(lib$es6$promise$asap$$queue[i+1]),
lib$es6$promise$asap$$queue[i]=void 0,lib$es6$promise$asap$$queue[i+1]=void 0}lib$es6$promise$asap$$len=0}function lib$es6$promise$$internal$$noop(){}lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$isNode?(nextTick=process.nextTick,version=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(version)&&"0"===version[1]&&"10"===version[2]&&(nextTick=setImmediate),function(){nextTick(lib$es6$promise$asap$$flush)}):lib$es6$promise$asap$$BrowserMutationObserver?(iterations=0,observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush),node=document.createTextNode(""),observer.observe(node,{
characterData:!0}),function(){node.data=iterations=++iterations%2}):lib$es6$promise$asap$$isWorker?((channel=new MessageChannel).port1.onmessage=lib$es6$promise$asap$$flush,function(){channel.port2.postMessage(0)}):void 0===lib$es6$promise$asap$$browserWindow&&"function"==typeof require?function(){try{var vertx=require("vertx");return lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext,function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}():lib$es6$promise$asap$$useSetTimeout();var lib$es6$promise$$internal$$PENDING=void 0,lib$es6$promise$$internal$$FULFILLED=1,
lib$es6$promise$$internal$$REJECTED=2,lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor)!function(promise,thenable){thenable._state===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,thenable._result):thenable._state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,thenable._result):lib$es6$promise$$internal$$subscribe(thenable,void 0,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){
lib$es6$promise$$internal$$reject(promise,reason)})}(promise,maybeThenable);else{var then=function(promise){try{return promise.then}catch(error){return lib$es6$promise$$internal$$GET_THEN_ERROR.error=error,lib$es6$promise$$internal$$GET_THEN_ERROR}}(maybeThenable);then===lib$es6$promise$$internal$$GET_THEN_ERROR?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error):void 0===then?lib$es6$promise$$internal$$fulfill(promise,maybeThenable):lib$es6$promise$utils$$isFunction(then)?function(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=!1,error=function(then,value,fulfillmentHandler,
rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}(then,thenable,function(value){sealed||(sealed=!0,thenable!==value?lib$es6$promise$$internal$$resolve(promise,value):lib$es6$promise$$internal$$fulfill(promise,value))},function(reason){sealed||(sealed=!0,lib$es6$promise$$internal$$reject(promise,reason))},promise._label);!sealed&&error&&(sealed=!0,lib$es6$promise$$internal$$reject(promise,error))},promise)}(promise,maybeThenable,then):lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}function lib$es6$promise$$internal$$resolve(promise,value){var x;promise===value?lib$es6$promise$$internal$$reject(promise,
new TypeError("You cannot resolve a promise with itself")):"function"==typeof(x=value)||"object"==typeof x&&null!==x?lib$es6$promise$$internal$$handleMaybeThenable(promise,value):lib$es6$promise$$internal$$fulfill(promise,value)}function lib$es6$promise$$internal$$publishRejection(promise){promise._onerror&&promise._onerror(promise._result),lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._result=value,promise._state=lib$es6$promise$$internal$$FULFILLED,0!==promise._subscribers.length&&lib$es6$promise$asap$$asap(
lib$es6$promise$$internal$$publish,promise))}function lib$es6$promise$$internal$$reject(promise,reason){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._state=lib$es6$promise$$internal$$REJECTED,promise._result=reason,lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise))}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onerror=null,subscribers[length]=child,subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment,subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection,
0===length&&parent._state&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child,callback,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject
;function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var value,error,succeeded,failed,hasCallback=lib$es6$promise$utils$$isFunction(callback);if(hasCallback){if((value=function(callback,detail){try{return callback(detail)}catch(e){return lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e,lib$es6$promise$$internal$$TRY_CATCH_ERROR}}(callback,detail))===lib$es6$promise$$internal$$TRY_CATCH_ERROR?(failed=!0,error=value.error,value=null):succeeded=!0,promise===value)return void lib$es6$promise$$internal$$reject(promise,new TypeError("A promises callback cannot return that same promise."))}else value=detail,succeeded=!0
;promise._state!==lib$es6$promise$$internal$$PENDING||(hasCallback&&succeeded?lib$es6$promise$$internal$$resolve(promise,value):failed?lib$es6$promise$$internal$$reject(promise,error):settled===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,value):settled===lib$es6$promise$$internal$$REJECTED&&lib$es6$promise$$internal$$reject(promise,value))}function lib$es6$promise$enumerator$$Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(lib$es6$promise$$internal$$noop),this._validateInput(input)?(this._input=input,this.length=input.length,this._remaining=input.length,this._init(),
0===this.length?lib$es6$promise$$internal$$fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&lib$es6$promise$$internal$$fulfill(this.promise,this._result))):lib$es6$promise$$internal$$reject(this.promise,this._validationError())}lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)},lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)}
;var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){for(var length=this.length,promise=this.promise,input=this._input,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++)this._eachEntry(input[i],i)},lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var x,c=this._instanceConstructor;"object"==typeof(x=entry)&&null!==x?entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING?(entry._onerror=null,this._settledAt(entry._state,i,entry._result)):this._willSettleAt(c.resolve(entry),i):(this._remaining--,
this._result[i]=entry)},lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===lib$es6$promise$$internal$$PENDING&&(this._remaining--,state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,value):this._result[i]=value),0===this._remaining&&lib$es6$promise$$internal$$fulfill(promise,this._result)},lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,void 0,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){
enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};var lib$es6$promise$promise$race$$default=function(entries){var promise=new this(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries))return lib$es6$promise$$internal$$reject(promise,new TypeError("You must pass an array to race.")),promise;var length=entries.length;function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++)lib$es6$promise$$internal$$subscribe(this.resolve(entries[i]),
void 0,onFulfillment,onRejection);return promise};var lib$es6$promise$promise$resolve$$default=function(object){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$resolve(promise,object),promise};var lib$es6$promise$promise$reject$$default=function(reason){var promise=new this(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$reject(promise,reason),promise},lib$es6$promise$promise$$counter=0;var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){
this._id=lib$es6$promise$promise$$counter++,this._state=void 0,this._result=void 0,this._subscribers=[],lib$es6$promise$$internal$$noop!==resolver&&(lib$es6$promise$utils$$isFunction(resolver)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof lib$es6$promise$promise$$Promise||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(promise,resolver){try{resolver(function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){
lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}(this,resolver))}lib$es6$promise$promise$$Promise.all=function(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise},lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default,lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default,lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default,lib$es6$promise$promise$$Promise._setScheduler=function(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn},lib$es6$promise$promise$$Promise._setAsap=function(asapFn){
lib$es6$promise$asap$$asap=asapFn},lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap,lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var state=this._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection)return this;var child=new this.constructor(lib$es6$promise$$internal$$noop),result=this._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})
}else lib$es6$promise$$internal$$subscribe(this,child,onFulfillment,onRejection);return child},catch:function(onRejection){return this.then(null,onRejection)}};var lib$es6$promise$polyfill$$default=function(){var local;if("undefined"!=typeof global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;P&&"[object Promise]"===Object.prototype.toString.call(P.resolve())&&!P.cast||(local.Promise=lib$es6$promise$promise$$default)},lib$es6$promise$umd$$ES6Promise={
Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};"function"==typeof define&&define.amd?define("lib/polyfill/es6-promise",[],function(){return lib$es6$promise$umd$$ES6Promise}):"undefined"!=typeof module&&module.exports?module.exports=lib$es6$promise$umd$$ES6Promise:void 0!==this&&(this.ES6Promise=lib$es6$promise$umd$$ES6Promise),lib$es6$promise$polyfill$$default()}.call(this),define("core/promise",["lib/polyfill/es6-promise"],function(es6Promise){"use strict";return window.Promise||es6Promise.Promise}),define("lib/uuid",[],function(){var CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("")
;return function(len,radix){var i,r,chars=CHARS,uuid=[];if(radix=radix||chars.length,len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else for(uuid[8]=uuid[13]=uuid[18]=uuid[23]="-",uuid[14]="4",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?3&r|8:r]);return uuid.join("")}}),define("core/logger/api",["lodash","core/format","core/promise"],function(_,format,Promise){"use strict";var defaultLevel="info",levels={fatal:60,error:50,warn:40,info:30,debug:20,trace:10},logQueue=[],getLevel=function(level){return void 0===level||_.isString(level)&&!_.has(levels,level)?defaultLevel:_.isNumber(level)?_.findKey(levels,function(l){
return l===level})||defaultLevel:level},getLevelNum=function(level){return _.isString(level)&&_.has(levels,level)?levels[level]:_.isNumber(level)&&_.contains(levels,level)?level:levels[defaultLevel]},checkMinLevel=function(minLevel,level){return getLevelNum(level)>=getLevelNum(minLevel)},loggerFactory=function loggerFactory(name,minLevel,fields){var baseRecord,logger;if(!_.isString(name)||_.isEmpty(name))throw new TypeError("A logger needs a name");return _.isPlainObject(minLevel)&&"undefined"==typeof field&&(fields=minLevel,minLevel=defaultLevel),baseRecord=_.defaults(fields||{},{name:name,pid:1,hostname:navigator.userAgent}),logger={log:function(level,
recordFields,message){var record,err,rest=[],time=(new Date).toISOString();if(!1!==loggerFactory.providers&&checkMinLevel(minLevel||defaultLevel,level))return rest=_.isString(recordFields)||recordFields instanceof Error?(message=recordFields,recordFields={},[].slice.call(arguments,2)):[].slice.call(arguments,3),record={level:getLevel(level),v:0,time:time},checkMinLevel(levels.error,level)||message instanceof Error?(err=message instanceof Error?message:(message=_.isObject(message)?JSON.stringify(message):message,new Error(message)),record.msg=err.message,record.err=err):record.msg=format.apply(null,[message].concat(rest)),_.merge(record,baseRecord,
recordFields),logQueue.push(record),loggerFactory.flush(),this},level:function(value){return void 0!==value?(minLevel=getLevelNum(value),this):getLevel(minLevel)},child:function(childFields){return loggerFactory(name,minLevel,_.defaults(childFields,baseRecord))}},_.reduce(levels,function(target,level,levelName){return target[levelName]=_.partial(logger.log,level),target},logger)};return loggerFactory.levels=levels,loggerFactory.providers=!1,loggerFactory.load=function(providerConfigs){var self=this,modules=[];return this.providers=[],new Promise(function(resolve,reject){_.forEach(providerConfigs,function(providerConfig,providerName){modules.push(providerName
)}),require(modules,function(){var loadedProviders=[].slice.call(arguments);_.forEach(loadedProviders,function(provider,moduleKey){try{self.register(provider,providerConfigs[modules[moduleKey]])}catch(err){reject(err)}}),self.flush(),resolve()},reject)})},loggerFactory.register=function(provider,providerConfig){if(!_.isPlainObject(provider)||!_.isFunction(provider.log))throw new TypeError("A log provider is an object with a log method");provider.checkMinLevel=checkMinLevel,_.isFunction(provider.setConfig)&&provider.setConfig(providerConfig),this.providers=this.providers||[],this.providers.push(provider)},loggerFactory.flush=function(){_.isArray(
this.providers)&&0<this.providers.length&&(_.forEach(logQueue,function(message){_.forEach(loggerFactory.providers,function(provider){provider.log.call(provider,message)})}),logQueue=[])},loggerFactory.setDefaultLevel=function(level){return defaultLevel=getLevel(level)},loggerFactory}),define("core/logger",["lodash","module","core/logger/api"],function(_,module,loggerFactory){"use strict";var defaultConfig={level:loggerFactory.levels.warn,loggers:{"core/logger/console":{level:"warn"}}},config=_.defaults(module.config()||{},defaultConfig),logger=loggerFactory("core/logger");return loggerFactory.setDefaultLevel(config.level),loggerFactory.load(config.loggers),
window.onerror=function(msg,url,line,col,error){logger.error("Caught[via window.onerror]: '"+msg+"' from "+url+":"+line+":"+col)},window.setTaoLogLevel=function(level){return loggerFactory.setDefaultLevel(level)},loggerFactory}),define("core/eventifier",["lodash","async","core/promise","lib/uuid","core/logger"],function(_,async,Promise,uuid,loggerFactory){"use strict";var defaultNs="@",eventifierLogger=loggerFactory("core/eventifier");function getEventNames(eventNames){return!_.isString(eventNames)||_.isEmpty(eventNames)?[]:_(eventNames.split(/\s/g)).compact().uniq().value()}function getName(eventName){return-1<eventName.indexOf(".")?eventName.substr(0,
eventName.indexOf(".")):eventName}function getNamespace(eventName){return-1<eventName.indexOf(".")?eventName.substr(eventName.indexOf(".")+1):defaultNs}return function(target){var targetName,logger,stoppedEvents,eventHandlers={},getHandlers=function(eventName,type){var name=getName(eventName),ns=getNamespace(eventName);return type=type||"between",eventHandlers[ns]=eventHandlers[ns]||{},eventHandlers[ns][name]=eventHandlers[ns][name]||{before:[],between:[],after:[]},eventHandlers[ns][name][type]},eventApi={on:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName).push(handler)}
),this},off:function(eventNames){return _.forEach(getEventNames(eventNames),function(eventName){var offNamespaces,name=getName(eventName),ns=getNamespace(eventName);ns&&!name?"*"===ns?((offNamespaces={})[defaultNs]=eventHandlers[defaultNs],eventHandlers=offNamespaces):eventHandlers[ns]={}:_.forEach(eventHandlers,function(nsHandlers,namespace){!nsHandlers[name]||ns!==defaultNs&&ns!==namespace||(nsHandlers[name]={before:[],between:[],after:[]})})}),this},removeAllListeners:function(){return eventHandlers={},this},trigger:function(eventNames){var self=this,args=[].slice.call(arguments,1);function triggerBetween(allHandlers,event){shouldStop(event.name
)?logHandlerStop("before",event):triggerHandlers(allHandlers.between,event).then(function(){!function(handlers,event){shouldStop(event.name)?logHandlerStop("on",event):triggerHandlers(handlers,event).then(function(){shouldStop(event.name)&&logHandlerStop("after",event)}).catch(function(err){logHandlerStop("after",event,err)})}(allHandlers.after,event)}).catch(function(err){logHandlerStop("on",event,err)})}function triggerHandlers(handlers,event){var pHandlers;return pHandlers=handlers.map(function(handler){return shouldStop(event.name)?Promise.reject():handler.apply(self,args)}),Promise.all(pHandlers)}function logHandlerStop(stoppedIn,event,err){
err instanceof Error&&logger.error(err),logger.trace({err:err,event:event.name,stoppedIn:stoppedIn},event.name+" handlers stopped")}function shouldStop(name){return stoppedEvents[name]}return stoppedEvents={},_.forEach(getEventNames(eventNames),function(eventName){var ns=getNamespace(eventName),name=getName(eventName),mergedHandlers=_(eventHandlers).filter(function(nsHandlers,namespace){return nsHandlers[name]&&(ns===defaultNs||ns===namespace||"*"===namespace)}).reduce(function(acc,nsHandlers){return acc.before=acc.before.concat(nsHandlers[name].before),acc.between=acc.between.concat(nsHandlers[name].between),acc.after=acc.after.concat(nsHandlers[name].after
),acc},{before:[],between:[],after:[]});logger.trace({event:eventName,args:args},"trigger %s",eventName),mergedHandlers&&function(allHandlers,name,ns){var event={name:name,namespace:ns};allHandlers.before.length?function(handlers,event){var pHandlers,beforeArgs=args.slice();return beforeArgs.unshift(event),pHandlers=handlers.map(function(handler){var value=!shouldStop(event.name)&&handler.apply(self,beforeArgs);return!1===value?Promise.reject():value}),Promise.all(pHandlers)}(allHandlers.before,event).then(function(){triggerBetween(allHandlers,event)}).catch(function(err){logHandlerStop("before",event,err)}):triggerBetween(allHandlers,event)}(mergedHandlers,
name,ns)}),this},before:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"before").push(handler)}),this},after:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"after").push(handler)}),this},stopEvent:function(name){_.isString(name)&&!_.isEmpty(name.trim())&&(stoppedEvents[name.trim()]=!0)},spread:function(destination,eventNames){var self=this;return destination&&_.isFunction(destination.trigger)&&(_.isString(eventNames)&&(eventNames=getEventNames(eventNames)),_.forEach(eventNames,
function(eventName){self.on(eventName,function(){var args=[eventName].concat([].slice.call(arguments));destination.trigger.apply(destination,args)})})),this}};return targetName=(target=target||{}).name||target.id||target.serial||uuid(6),logger=eventifierLogger.child({target:targetName}),_(eventApi).functions().forEach(function(method){_.isFunction(target[method])&&eventifierLogger.warn("The target object has already a method named "+method,target),target[method]=function(){var args=[].slice.call(arguments);return eventApi[method].apply(target,args)}}),target}}),define("core/asyncProcess",["lodash","core/promise","core/eventifier"],function(_,Promise,
eventifier){"use strict";return function(){var running=!1,steps=[];return eventifier({isRunning:function(){return running},start:function(cb){var started=!1;return running||(steps=[],started=running=!0,_.isFunction(cb)&&cb(),this.trigger("start")),started},addStep:function(step){return steps.push(step),this.trigger("step",step),this},done:function(cb){var self=this,finish=Promise.all(steps);return finish.then(function(data){running=!1,_.isFunction(cb)&&cb(null,data),self.trigger("resolve",data)}).catch(function(error){running=!1,_.isFunction(cb)&&cb(error||!0),self.trigger("reject",error)}),finish}})}}),define("core/promiseQueue",["lodash","core/promise",
"core/eventifier","lib/uuid"],function(_,Promise,eventifier,uuid){"use strict";return function(){var queue={},getId=function getId(){var id="promise-"+uuid(6);return void 0===queue[id]?id:getId()};return{add:function(promise){return queue[getId()]=promise,this},getValues:function(){return _.values(queue)},clear:function(){return queue={},this},serie:function(promiseFn){var id=getId(),currentQueue=this.getValues(),emitter=eventifier();return queue[id]=new Promise(function(resolve){emitter.on("fulfilled",resolve)}),Promise.all(currentQueue).then(function(){if(_.isFunction(promiseFn))return promiseFn()}).then(function(data){return emitter.trigger("fulfilled"),
delete queue[id],data}).catch(function(err){throw queue={},err})}}}}),define("core/store/localstorage",["lodash","core/promise","core/promiseQueue","lib/uuid"],function(_,Promise,promiseQueue,uuid){"use strict";var storage=window.localStorage,writingQueue=promiseQueue(),setEntry=function(storeName,key,value){return new Promise(function(resolve,reject){try{storage.setItem("tao-store-"+storeName+"."+key,JSON.stringify(value)),resolve(!0)}catch(ex){reject(ex)}})},getEntry=function(storeName,key){return new Promise(function(resolve,reject){var value;try{null===(value=storage.getItem("tao-store-"+storeName+"."+key))?resolve():resolve(JSON.parse(value))}catch(ex){
reject(ex)}})},getKnownStores=function(){return getEntry("index","stores")},localStorageBackend=function(storeName){var name,registered=!1,openStore=function(){return registered?Promise.resolve():function(storeName){return getKnownStores().then(function(stores){return(stores=stores||{})[storeName]={name:storeName,lastOpen:Date.now()},setEntry("index","stores",stores)})}(storeName).then(function(){registered=!0})};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return name="tao-store-"+storeName+".",{getItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return getEntry(
storeName,key)})})},setItem:function(key,value){return writingQueue.serie(function(){return openStore().then(function(){return setEntry(storeName,key,value)})})},removeItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return storage.removeItem(name+key),!0})})},getItems:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).reduce(function(acc,key){var value,exposedKey=key.replace(name,"");try{null!==(value=storage.getItem(key))&&(
acc[exposedKey]=JSON.parse(value))}catch(ex){acc[exposedKey]=null}return acc},{})})})},clear:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).forEach(function(key){storage.removeItem(key)}),!0})})},removeStore:function(){return this.clear().then(function(){return function(storeName){return getKnownStores().then(function(stores){return delete(stores=stores||{})[storeName],setEntry("index","stores",stores)})}(storeName)})}}};return localStorageBackend.removeAll=function(
validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(stores){var removing=_(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store&&store.name?localStorageBackend(store.name).removeStore():Promise.resolve()}).value();return Promise.all(removing)})},localStorageBackend.getAll=function(validate){return getKnownStores().then(function(stores){return _(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store.name}).value()})},localStorageBackend.getStoreIdentifier=function(){
var idStore=localStorageBackend("id");return idStore.getItem("id").then(function(id){return _.isEmpty(id)?(id=uuid(),idStore.setItem("id",id).then(function(){return id})):id})},localStorageBackend}),function(name,definition,global){"use strict";"function"==typeof define?define("lib/store/idbstore",definition):"undefined"!=typeof module&&module.exports?module.exports=definition():global.IDBStore=definition()}(0,function(){"use strict";var defaultErrorHandler=function(error){throw error},defaultSuccessHandler=function(){},defaults={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},
onError:defaultErrorHandler,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},IDBStore=function(kwArgs,onStoreReady){for(var key in void 0===onStoreReady&&"function"==typeof kwArgs&&(onStoreReady=kwArgs),"[object Object]"!=Object.prototype.toString.call(kwArgs)&&(kwArgs={}),defaults)this[key]=void 0!==kwArgs[key]?kwArgs[key]:defaults[key];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,onStoreReady&&(this.onStoreReady=onStoreReady);var env="object"==typeof window?window:self,availableImplementations=this.implementationPreference.filter(function(implName){
return implName in env});this.implementation=availableImplementations[0],this.idb=env[this.implementation],this.keyRange=env.IDBKeyRange||env.webkitIDBKeyRange||env.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},proto={constructor:IDBStore,version:"1.7.0",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){
var openRequest=this.idb.open(this.dbName,this.dbVersion),preventSuccessCallback=!1;openRequest.onerror=function(error){var gotVersionErr=!1;"error"in error.target?gotVersionErr="VersionError"==error.target.error.name:"errorCode"in error.target&&(gotVersionErr=12==error.target.errorCode),gotVersionErr?this.onError(new Error("The version number provided is lower than the existing one.")):this.onError(error)}.bind(this),openRequest.onsuccess=function(event){if(!preventSuccessCallback)if(this.db)this.onStoreReady();else if(this.db=event.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){
var emptyTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=emptyTransaction.objectStore(this.storeName);var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(!indexName)return preventSuccessCallback=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(preventSuccessCallback=!0,this.onError(new Error(
'Cannot modify index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else preventSuccessCallback=!0,this.onError(new Error('Cannot create new index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),existingIndexes.length&&(preventSuccessCallback=!0,this.onError(new Error('Cannot delete index(es) "'+existingIndexes.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),preventSuccessCallback||this.onStoreReady()}else this.onError(new Error(
"Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),openRequest.onupgradeneeded=function(event){if(this.db=event.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=event.target.transaction.objectStore(this.storeName);else{var optionalParameters={autoIncrement:this.autoIncrement};null!==this.keyPath&&(optionalParameters.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,optionalParameters)}var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){
var indexName=indexData.name;if(indexName||(preventSuccessCallback=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(this.store.deleteIndex(indexName),this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})},this),existingIndexes.length&&existingIndexes.forEach(
function(_indexName){this.store.deleteIndex(_indexName)},this)}.bind(this)},deleteDatabase:function(onSuccess,onError){if(this.idb.deleteDatabase){this.db.close();var deleteRequest=this.idb.deleteDatabase(this.dbName);deleteRequest.onsuccess=onSuccess,deleteRequest.onerror=onError}else onError(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(key,value,onSuccess,onError){null!==this.keyPath&&(onError=onSuccess,onSuccess=value,value=key),onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var putRequest,hasSuccess=!1,result=null,putTransaction=this.db.transaction([this.storeName],
this.consts.READ_WRITE);return putTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},putTransaction.onabort=onError,putTransaction.onerror=onError,(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),putTransaction.objectStore(this.storeName).put(value)):putTransaction.objectStore(this.storeName).put(value,key)).onsuccess=function(event){hasSuccess=!0,result=event.target.result},putRequest.onerror=onError,putTransaction},get:function(key,onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,getTransaction=this.db.transaction([this.storeName],
this.consts.READ_ONLY);getTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getTransaction.onabort=onError,getTransaction.onerror=onError;var getRequest=getTransaction.objectStore(this.storeName).get(key);return getRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getRequest.onerror=onError,getTransaction},remove:function(key,onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,removeTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);removeTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(
result)},removeTransaction.onabort=onError,removeTransaction.onerror=onError;var deleteRequest=removeTransaction.objectStore(this.storeName).delete(key);return deleteRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},deleteRequest.onerror=onError,removeTransaction},batch:function(dataArray,onSuccess,onError){if(onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),"[object Array]"!=Object.prototype.toString.call(dataArray))onError(new Error("dataArray argument must be of type Array."));else if(0===dataArray.length)return onSuccess(!0);var count=dataArray.length,called=!1,hasSuccess=!1,
batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(hasSuccess)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(){0!==--count||called||(hasSuccess=called=!0)};return dataArray.forEach(function(operation){var type=operation.type,key=operation.key,value=operation.value,onItemError=function(err){batchTransaction.abort(),called||(called=!0,onError(err,type,key))};if("remove"==type){var deleteRequest=batchTransaction.objectStore(this.storeName).delete(key);deleteRequest.onsuccess=onItemSuccess,
deleteRequest.onerror=onItemError}else if("put"==type){var putRequest;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),batchTransaction.objectStore(this.storeName).put(value)):batchTransaction.objectStore(this.storeName).put(value,key)).onsuccess=onItemSuccess,putRequest.onerror=onItemError}},this),batchTransaction},putBatch:function(dataArray,onSuccess,onError){var batchData=dataArray.map(function(item){return{type:"put",value:item}});return this.batch(batchData,onSuccess,onError)},upsertBatch:function(dataArray,options,onSuccess,onError){"function"==typeof options&&(onError=onSuccess=options,options={}),onError||(
onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),options||(options={}),"[object Array]"!=Object.prototype.toString.call(dataArray)&&onError(new Error("dataArray argument must be of type Array."));var keyField=options.keyField||this.keyPath,count=dataArray.length,called=!1,hasSuccess=!1,index=0,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){hasSuccess?onSuccess(dataArray):onError(!1)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){dataArray[index++][keyField]=event.target.result,0!==--count||called||(
hasSuccess=called=!0)};return dataArray.forEach(function(record){var putRequest,key=record.key;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(record),batchTransaction.objectStore(this.storeName).put(record)):batchTransaction.objectStore(this.storeName).put(record,key)).onsuccess=onItemSuccess,putRequest.onerror=function(err){batchTransaction.abort(),called||(called=!0,onError(err))}},this),batchTransaction},removeBatch:function(keyArray,onSuccess,onError){var batchData=keyArray.map(function(key){return{type:"remove",key:key}});return this.batch(batchData,onSuccess,onError)},getBatch:function(keyArray,onSuccess,onError,arrayType){if(onError||(
onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),arrayType||(arrayType="sparse"),"[object Array]"!=Object.prototype.toString.call(keyArray))onError(new Error("keyArray argument must be of type Array."));else if(0===keyArray.length)return onSuccess([]);var data=[],count=keyArray.length,hasSuccess=!1,result=null,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){event.target.result||"dense"==arrayType?data.push(event.target.result
):"sparse"==arrayType&&data.length++,0===--count&&(hasSuccess=!0,result=data)};return keyArray.forEach(function(key){var getRequest=batchTransaction.objectStore(this.storeName).get(key);getRequest.onsuccess=onItemSuccess,getRequest.onerror=function(err){!0,onError(result=err),batchTransaction.abort()}},this),batchTransaction},getAll:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var getAllTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY),store=getAllTransaction.objectStore(this.storeName);return store.getAll?this._getAllNative(getAllTransaction,store,onSuccess,onError
):this._getAllCursor(getAllTransaction,store,onSuccess,onError),getAllTransaction},_getAllNative:function(getAllTransaction,store,onSuccess,onError){var hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var getAllRequest=store.getAll();getAllRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getAllRequest.onerror=onError},_getAllCursor:function(getAllTransaction,store,onSuccess,onError){var all=[],hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},
getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var cursorRequest=store.openCursor();cursorRequest.onsuccess=function(event){var cursor=event.target.result;cursor?(all.push(cursor.value),cursor.continue()):(hasSuccess=!0,result=all)},cursorRequest.onError=onError},clear:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,clearTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);clearTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},clearTransaction.onabort=onError,clearTransaction.onerror=onError
;var clearRequest=clearTransaction.objectStore(this.storeName).clear();return clearRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},clearRequest.onerror=onError,clearTransaction},_addIdPropertyIfNeeded:function(dataObj){void 0===dataObj[this.keyPath]&&(dataObj[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(indexName){return this.store.indexNames.contains(indexName)},normalizeIndexData:function(indexData){indexData.keyPath=indexData.keyPath||indexData.name,indexData.unique=!!indexData.unique,indexData.multiEntry=!!indexData.multiEntry},indexComplies:function(
actual,expected){return["keyPath","unique","multiEntry"].every(function(key){if("multiEntry"==key&&void 0===actual[key]&&!1===expected[key])return!0;if("keyPath"!=key||"[object Array]"!=Object.prototype.toString.call(expected[key]))return expected[key]==actual[key];var exp=expected.keyPath,act=actual.keyPath;if("string"==typeof act)return exp.toString()==act;if("function"!=typeof act.contains&&"function"!=typeof act.indexOf)return!1;if(act.length!==exp.length)return!1;for(var i=0,m=exp.length;i<m;i++)if(!(act.contains&&act.contains(exp[i])||act.indexOf(-1!==exp[i])))return!1;return!0})},iterate:function(onItem,options){var directionType="desc"==(
options=mixin({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:defaultErrorHandler,limit:1/0,offset:0,allowItemRejection:!1},options||{})).order.toLowerCase()?"PREV":"NEXT";options.filterDuplicates&&(directionType+="_NO_DUPLICATE");var hasSuccess=!1,cursorTransaction=this.db.transaction([this.storeName],this.consts[options.writeAccess?"READ_WRITE":"READ_ONLY"]),cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var recordCount=0;cursorTransaction.oncomplete=function(){hasSuccess?options.onEnd?options.onEnd():onItem(null
):options.onError(null)},cursorTransaction.onabort=options.onError,cursorTransaction.onerror=options.onError;var cursorRequest=cursorTarget.openCursor(options.keyRange,this.consts[directionType]);return cursorRequest.onerror=options.onError,cursorRequest.onsuccess=function(event){var cursor=event.target.result;if(cursor)if(options.offset)cursor.advance(options.offset),options.offset=0;else{var onItemReturn=onItem(cursor.value,cursor,cursorTransaction);options.allowItemRejection&&!1===onItemReturn||recordCount++,options.autoContinue&&(recordCount+options.offset<options.limit?cursor.continue():hasSuccess=!0)}else hasSuccess=!0},cursorTransaction},
query:function(onSuccess,options){var result=[],processedItems=0;return(options=options||{}).autoContinue=!0,options.writeAccess=!1,options.allowItemRejection=!!options.filter,options.onEnd=function(){onSuccess(result,processedItems)},this.iterate(function(item){processedItems++;var accept=!options.filter||options.filter(item);return!1!==accept&&result.push(item),accept},options)},count:function(onSuccess,options){var onError=(options=mixin({index:null,keyRange:null},options||{})).onError||defaultErrorHandler,hasSuccess=!1,result=null,cursorTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);cursorTransaction.oncomplete=function(){(
hasSuccess?onSuccess:onError)(result)},cursorTransaction.onabort=onError,cursorTransaction.onerror=onError;var cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var countRequest=cursorTarget.count(options.keyRange);return countRequest.onsuccess=function(evt){hasSuccess=!0,result=evt.target.result},countRequest.onError=onError,cursorTransaction},makeKeyRange:function(options){var keyRange,hasLower=void 0!==options.lower,hasUpper=void 0!==options.upper;switch(!0){case void 0!==options.only:keyRange=this.keyRange.only(options.only);break;case hasLower&&hasUpper:
keyRange=this.keyRange.bound(options.lower,options.upper,options.excludeLower,options.excludeUpper);break;case hasLower:keyRange=this.keyRange.lowerBound(options.lower,options.excludeLower);break;case hasUpper:keyRange=this.keyRange.upperBound(options.upper,options.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return keyRange}},empty={};function mixin(target,source){var name,s;for(name in source)(s=source[name])!==empty[name]&&s!==target[name]&&(target[name]=s);return target}return IDBStore.prototype=proto,IDBStore.version=proto.version,IDBStore},this),define(
"core/store/indexeddb",["lodash","core/promise","lib/store/idbstore","lib/uuid"],function(_,Promise,IDBStore,uuid){"use strict";var knownStores,isIndexedDB2="getAll"in IDBObjectStore.prototype,openStore=function(storeName){return new Promise(function(resolve,reject){var store=new IDBStore({dbVersion:1,storeName:storeName,storePrefix:"tao-store-",keyPath:"key",autoIncrement:!0,onStoreReady:function(){store.db.onversionchange=function(e){e&&e.newVersion||store.db.close()},resolve(store)},onError:reject})})},setEntry=function(store,key,value){return new Promise(function(resolve,reject){var entry={key:key,value:value};store.put(entry,function(returnKey){resolve(
returnKey===key)},reject)})},getEntry=function(store,key){return new Promise(function(resolve,reject){store.get(key,function(entry){if(!entry||void 0===entry.value)return resolve(entry);resolve(entry.value)},reject)})},removeEntry=function(store,key){return new Promise(function(resolve,reject){store.remove(key,function(result){resolve(!1!==result)},reject)})},getKnownStores=function(){return knownStores||(knownStores=openStore("index")),knownStores},deleteStore=function(store,storeName){return new Promise(function(resolve,reject){var success=function(){(function(storeName){return getKnownStores().then(function(store){return removeEntry(store,storeName)})})(
storeName).then(function(){resolve(!0)}).catch(reject)};isIndexedDB2?store.deleteDatabase(success,reject):store.clear(success,reject)})},indexDbBackend=function(storeName){var innerStore,writePromise,getStore=function(){return innerStore||(innerStore=openStore(storeName).then(function(store){return function(storeName){return getKnownStores().then(function(store){return setEntry(store,storeName,{name:storeName,lastOpen:Date.now()})})}(storeName).then(function(){return Promise.resolve(store)})})),innerStore},ensureSerie=function(getWritingPromise){return writePromise?new Promise(function(resolve,reject){var runWrite=function(){var p=getWritingPromise();(
writePromise=p).then(resolve).catch(reject)};writePromise.then(runWrite).catch(runWrite)}):writePromise=getWritingPromise()};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return{getItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return getEntry(store,key)})})},setItem:function(key,value){return ensureSerie(function(){return getStore().then(function(store){return setEntry(store,key,value)})})},removeItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return removeEntry(store,key)})})},getItems:function(){return ensureSerie(function(
){return getStore().then(function(store){return function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){if(!_.isArray(entries))return resolve({});resolve(_.reduce(entries,function(acc,entry){return entry.key&&entry.value&&(acc[entry.key]=entry.value),acc},{}))},reject)})}(store)})})},clear:function(){return ensureSerie(function(){return getStore().then(function(store){return new Promise(function(resolve,reject){store.clear(function(){resolve(!0)},reject)})})})},removeStore:function(){return ensureSerie(function(){return getStore().then(function(store){return deleteStore(store,storeName)})})}}}
;return indexDbBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var all=[];_.forEach(entries,function(entry){var storeName=entry&&entry.key;storeName&&all.push(openStore(storeName).then(function(storeToRemove){if(!validate||validate(storeName,entry.value))return deleteStore(storeToRemove,storeName)}))}),Promise.all(all).then(resolve).catch(reject)},reject)})})},indexDbBackend.getAll=function(validate){return _.isFunction(validate)||(validate=function(){return!0}),getKnownStores().then(function(store){
return new Promise(function(resolve,reject){store.getAll(function(entries){var storeNames=_(entries).filter(function(entry){return entry&&entry.key&&validate(entry.key,entry.value)}).map(function(entry){return entry.key}).value();return resolve(storeNames)},reject)})})},indexDbBackend.getStoreIdentifier=function(){return openStore("id").then(function(store){return getEntry(store,"id").then(function(id){return _.isEmpty(id)?(id=uuid(),setEntry(store,"id",id).then(function(){return id})):id})})},indexDbBackend}),define("core/store/memory",["lodash","core/promise","lib/uuid"],function(_,Promise,uuid){"use strict";var idStore,memoryStore={},
memoryStorageBackend=function(storeName){if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return memoryStore[storeName]=memoryStore[storeName]||{},{getItem:function(key){return _.isPlainObject(memoryStore[storeName])?Promise.resolve(memoryStore[storeName][key]):Promise.resolve()},setItem:function(key,value){return _.isPlainObject(memoryStore[storeName])||(memoryStore[storeName]={}),memoryStore[storeName][key]=value,Promise.resolve(!0)},removeItem:function(key){return memoryStore[storeName]=_.omit(memoryStore[storeName],key),Promise.resolve(void 0===memoryStore[storeName][key])},getItems:function(){
return Promise.resolve(memoryStore[storeName])},clear:function(){return memoryStore[storeName]={},Promise.resolve(!0)},removeStore:function(){return memoryStore=_.omit(memoryStore,storeName),Promise.resolve(void 0===memoryStore[storeName])}}};return memoryStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),memoryStore=_.omit(memoryStore,function(store,storeName){return!validate||validate(storeName)}),Promise.resolve(!0)},memoryStorageBackend.getAll=function(validate){var storeNames;return _.isFunction(validate)||(validate=null),storeNames=_(memoryStore).map(function(store,storeName){return storeName}).filter(function(
storeName){return!validate||validate(storeName)}).value(),Promise.resolve(storeNames)},memoryStorageBackend.getStoreIdentifier=function(){return _.isEmpty(idStore)&&(idStore=uuid()),Promise.resolve(idStore)},memoryStorageBackend}),define("core/store",["lodash","moment","module","core/logger","core/promise","core/store/localstorage","core/store/indexeddb","core/store/memory"],function(_,moment,module,loggerFactory,Promise,localStorageBackend,indexedDBBackend,memoryBackend){"use strict";var store,supportsIndexedDB=!1,dectectionDone=!1,quotaChecked=!1,backendApi=["removeAll","getAll","getStoreIdentifier"],storeApi=["getItem","setItem","removeItem","getItems",
"clear","removeStore"],logger=loggerFactory("core/store"),config=_.defaults(module.config()||{},{lowSpaceRatio:80,invalidation:{staled:"P2W",oldster:"P2M"}}),isIndexDBSupported=function(){return dectectionDone?Promise.resolve(supportsIndexedDB):new Promise(function(resolve){var test,indexedDB,done=function(result){return dectectionDone=!0,resolve(supportsIndexedDB=!!result)};try{if(!(indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB))return done(!1);(test=indexedDB.open("__feature_test",1)).onsuccess=function(){if(test.result)return test.result.close(),done(!0)},test.onerror=function(e){
return e.preventDefault(),done(!1),!1}}catch(err){done(!1)}})},loadBackend=function(preselectedBackend){return isIndexDBSupported().then(function(){var backend=preselectedBackend||(supportsIndexedDB?indexedDBBackend:localStorageBackend);return _.isFunction(backend)?function(backend){return _.all(backendApi,function(method){return _.isFunction(backend[method])})}(backend)?(backend!==memoryBackend&&(!quotaChecked&&"storage"in window.navigator&&window.navigator.storage.estimate&&window.navigator.storage.estimate().then(function(estimate){var usedRatio=0;_.isNumber(estimate.usage)&&_.isNumber(estimate.quota)&&0<estimate.quota&&((
usedRatio=estimate.usage/estimate.quota)>config.lowSpaceRatio?(logger.warn("The browser storage is getting low "+usedRatio.toFixed(2)+"% used",estimate),logger.warn("We will attempt to clean oldster databases in persistent backends"),store.cleanUpSpace(config.invalidation.oldster,[],localStorageBackend),store.cleanUpSpace(config.invalidation.oldster,[],indexedDBBackend)):logger.debug("Browser storage estimate : "+usedRatio.toFixed(2)+"% used",estimate))}).catch(function(err){logger.warn("Unable to retrieve quotas : "+err.message)}),quotaChecked=!0),backend):Promise.reject(new TypeError("This backend doesn't comply with the store backend API")
):Promise.reject(new TypeError("No backend, no storage!"))})};return(store=function(storeName,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){var storage,storeInstance=backend(storeName);return storage=storeInstance,_.all(storeApi,function(method){return _.isFunction(storage[method])})?storeInstance:Promise.reject(new TypeError("The store doesn't comply with the Storage interface"))})}).backends={localStorage:localStorageBackend,indexedDB:indexedDBBackend,memory:memoryBackend},store.removeAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.removeAll(validate)
})},store.cleanUpSpace=function(since,storeNamePattern,preselectedBackend){var tsThreshold;return tsThreshold=_.isNumber(since)&&0<since?since:(_.isString(since)||(since=config.invalidation.oldster),moment().subtract(moment.duration(since)).valueOf()),logger.info("Trying to remove stores lastly opened before "+tsThreshold+"("+since+")"),store.removeAll(function(storeName,storeEntry){return!(!storeName||!storeEntry)&&!(storeNamePattern instanceof RegExp&&!storeNamePattern.test(storeName))&&_.isNumber(storeEntry.lastOpen)&&_.isNumber(tsThreshold)&&storeEntry.lastOpen<=tsThreshold},preselectedBackend)},store.getAll=function(validate,preselectedBackend){
return loadBackend(preselectedBackend).then(function(backend){return backend.getAll(validate)})},store.getIdentifier=function(preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getStoreIdentifier()})},store}),define("core/cachedStore",["core/store"],function(store){"use strict";return function(storageName,storageKey){return storageKey=storageKey||"cachedData",store(storageName).then(function(storage){return storage.getItem(storageKey).then(function(data){return data=data||{},{getItem:function(name){return data[name]},setItem:function(name,value){return data[name]=value,storage.setItem(storageKey,data)},
removeItem:function(name){return data[name]=void 0,storage.setItem(storageKey,data)},clear:function(){return data={},storage.removeItem(storageKey)},removeStore:function(){return data={},storage.removeStore()}}})})}}),function(e){function f(a,c){function b(a){if(!this||this.constructor!==b)return new b(a);this._keys=[],this._values=[],this._itp=[],this.objectOnly=c,a&&function(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}.call(this,a)}return c||w(a,"size",{get:x}),(a.constructor=b).prototype=a,b}function d(a){return this.has(a)&&(this._keys.splice(b,1),this._values.splice(b,1),this._itp.forEach(function(a){
b<a[0]&&a[0]--})),-1<b}function m(a){return this.has(a)?this._values[b]:void 0}function n(a,c){if(this.objectOnly&&c!==Object(c))throw new TypeError("Invalid value used as weak collection key");if(c!=c||0===c)for(b=a.length;b--&&!y(a[b],c););else b=a.indexOf(c);return-1<b}function p(a){return n.call(this,this._values,a)}function q(a){return n.call(this,this._keys,a)}function r(a,c){return this.has(a)?this._values[b]=c:this._values[this._keys.push(a)-1]=c,this}function t(a){return this.has(a)||this._values.push(a),this}function h(){(this._keys||0).length=this._values.length=0}function l(){return k(this._itp,this._values)}function k(a,c,b){var g=[0],e=!1
;return a.push(g),{next:function(){var f,d=g[0];return!e&&d<c.length?(f=b?[c[d],b[d]]:c[d],g[0]++):(e=!0,a.splice(a.indexOf(g),1)),{done:e,value:f}}}}function x(){return this._values.length}function u(a,c){for(var b=this.entries();;){var d=b.next();if(d.done)break;a.call(c,d.value[1],d.value[0],this)}}var b,w=Object.defineProperty,y=function(a,b){return isNaN(a)?isNaN(b):a===b};"undefined"==typeof WeakMap&&(e.WeakMap=f({delete:d,clear:h,get:m,has:q,set:r},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=f({delete:d,has:q,get:m,set:r,keys:function(){return k(this._itp,this._keys)},values:l,entries:function(){
return k(this._itp,this._keys,this._values)},forEach:u,clear:h})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=f({has:p,add:t,delete:d,clear:h,keys:l,values:l,entries:function(){return k(this._itp,this._values,this._values)},forEach:u})),"undefined"==typeof WeakSet&&(e.WeakSet=f({delete:d,add:t,clear:h,has:p},!0))}("undefined"!=typeof exports&&"undefined"!=typeof global?global:window),define("lib/polyfill/es6-collections",function(){}),define("core/collections",["lib/polyfill/es6-collections"],function(){"use strict";return{Map:window.Map,Set:window.Set,WeakMap:window.WeakMap,WeakSet:window.WeakSet}}),define(
"core/providerRegistry",["lodash"],function(_){"use strict";return function(target,validator){var _providers={};return(target=target||{}).registerProvider=function(name,provider){var valid=!0;if(!_.isString(name)||name.length<=0)throw new TypeError("It is required to give a name to your provider.");if(!_.isPlainObject(provider)||!_.isFunction(provider.init))throw new TypeError("A provider is an object that contains at least an init function.");return(valid=validator&&_.isFunction(validator)?validator(provider):valid)&&(_providers[name]=provider),this},target.getProvider=function(providerName){var provider;if(!_providers||0===_.size(_providers)
)throw new Error("No provider registered");if(_.isString(providerName)&&0<providerName.length?provider=_providers[providerName]:1===_.size(_providers)&&(providerName=_.keys(_providers)[0],provider=_providers[providerName]),!provider)throw new Error("No candidate found for the provider");return provider},target.getAvailableProviders=function(){return _.keys(_providers)},target.clearProviders=function(){return _providers={},this},target}}),define("core/delegator",["lodash"],function(_){"use strict";var defaults={name:"provided",eventifier:!0},_slice=[].slice;return function(api,provider,config){var extendedConfig=_.defaults(config||{},defaults),eventifier=!!(
extendedConfig.eventifier&&api&&api.trigger),context=extendedConfig.forward?provider:api,defaultProvider=_.isFunction(extendedConfig.defaultProvider)?extendedConfig.defaultProvider:_.noop,wrapper=_.isFunction(extendedConfig.wrapper)?extendedConfig.wrapper:null,name=extendedConfig.name;return extendedConfig.required&&(defaultProvider=null),function(fnName){var response,args;if(!provider)throw new Error("There is no "+name+" provider!");if(!_.isFunction(provider[fnName])&&!defaultProvider)throw new Error("There is no method called "+fnName+" in the "+name+" provider!");return args=_slice.call(arguments,1),response=(provider[fnName]||defaultProvider).apply(
context,args),wrapper&&(response=wrapper(response)),eventifier&&api.trigger.apply(api,[fnName,response].concat(args)),response}}}),define("core/communicator",["lodash","core/promise","core/providerRegistry","core/delegator","core/eventifier"],function(_,Promise,providerRegistry,delegator,eventifier){"use strict";var defaults={timeout:3e4};return providerRegistry(function communicatorFactory(providerName,config){var communicator,delegate,extendedConfig=_(config||{}).defaults(defaults).value(),states={},provider=communicatorFactory.getProvider(providerName);return(communicator=eventifier({init:function(){var self=this;return this.getState("ready"
)?Promise.resolve():delegate("init").then(function(){self.setState("ready").trigger("ready")})},destroy:function(){var self=this;return(self.getState("open")?self.close():Promise.resolve()).then(function(){return delegate("destroy").then(function(){self.trigger("destroyed"),states={}})})},open:function(){var self=this;return this.getState("open")?Promise.resolve():delegate("open").then(function(){self.setState("open").trigger("opened")})},close:function(){var self=this;return delegate("close").then(function(){self.setState("open",!1).trigger("closed")})},send:function(channel,message){var self=this;return this.getState("open")?delegate("send",channel,message
).then(function(response){return self.trigger("sent",channel,message,response),Promise.resolve(response)}):Promise.reject()},channel:function(name,handler){if(!_.isString(name)||name.length<=0)throw new TypeError("A channel must have a name");if(!_.isFunction(handler))throw new TypeError("A handler must be attached to a channel");return this.on("channel-"+name,handler),this},getConfig:function(){return extendedConfig},setState:function(name,state){return _.isUndefined(state)&&(state=!0),states[name]=!!state,this},getState:function(name){return!!states[name]}})).on("message",function(channel,message){this.trigger("channel-"+channel,message)}),
delegate=delegator(communicator,provider,{name:"communicator"}),communicator})}),define("core/polling",["jquery","lodash","core/promise","core/eventifier"],function($,_,Promise,eventifier){"use strict";return function(config){var timer,promise,interval,max,iter,action,context,autoStart,state={},startTimer=function(){timer=setTimeout(iteration,interval),state.stopped=!1,state.pending=!0},stopTimer=function(){clearTimeout(timer),timer=null,state.stopped=!0,state.pending=!1},iteration=function(){max&&max<=iter?polling.stop():(iter=(iter||0)+1,state.processing=!0,state.pending=!1,polling.trigger("call"),action.call(context,polling),promise||state.stopped||(
state.processing=!1,startTimer()))},polling={async:function(){var resolver={};return(promise=new Promise(function(resolve,reject){resolver.resolve=resolve,resolver.reject=reject})).then(function(){promise=null,state.processing=!1,state.stopped||startTimer(),polling.trigger("resolved")}).catch(function(){promise=null,state.processing=!1,polling.stop(),polling.trigger("rejected")}),polling.trigger("async",resolver),resolver},next:function(){var _next;return state.stopped&&(iter=0),stopTimer(),max&&max<=iter||(state.stopped=!1,promise?(_next=this.next.bind(this),promise.then(_next).catch(_next)):(this.trigger("next"),iteration())),this},start:function(){
return timer||(iter=0,startTimer(),this.trigger("start")),this},stop:function(){return stopTimer(),this.trigger("stop"),this},setInterval:function(value){return interval=Math.abs(parseInt(value,10)||6e4),this.trigger("setinterval",interval),this},getInterval:function(){return interval},setAction:function(fn){return action=fn,this.trigger("setaction",action),this},getAction:function(){return action},setContext:function(ctx){return context=ctx||this,this.trigger("setcontext",ctx),this},getContext:function(){return context},setMax:function(value){return max=Math.abs(parseInt(value,10)||0),this},getMax:function(){return max},getIteration:function(){
return iter||0},is:function(stateName){return!!state[stateName]}};return eventifier(polling),interval=6e4,context=polling,action=null,autoStart=!(state.stopped=!0),iter=0,_.isFunction(config)&&(polling.setAction(config),config=null),_.isObject(config)&&(polling.setAction(config.action),polling.setInterval(config.interval||arguments[1]),polling.setContext(config.context),polling.setMax(config.max),autoStart=!!config.autoStart),autoStart&&polling.start(),polling}}),define("core/tokenHandler",[],function(){"use strict";return function(initialToken){var token=initialToken||null;return{getToken:function(){var currentToken=token;return token=null,currentToken},
setToken:function(newToken){return token=newToken,this}}}}),define("core/communicator/poll",["jquery","lodash","i18n","core/communicator","core/polling","core/promise","core/tokenHandler"],function($,_,__,communicator,pollingFactory,Promise,tokenHandlerFactory){"use strict";var defaults={timeout:3e4,interval:3e4,throttle:1e3};return{init:function(){var self=this,config=_.defaults(this.getConfig(),defaults),tokenHandler=tokenHandlerFactory(config.token);return config.service?(this.messagesQueue=[],this.request=function(){return new Promise(function(resolve){var headers={},token=tokenHandler.getToken(),promises=[],request=_.map(self.messagesQueue,function(msg
){return promises.push(msg.promise),{channel:msg.channel,message:msg.message}});self.messagesQueue=[],token&&(headers["X-Auth-Token"]=token),$.ajax({url:config.service,type:"POST",cache:!1,headers:headers,data:JSON.stringify(request),async:!0,dataType:"json",contentType:"application/json",timeout:config.timeout}).done(function(response){(response=response||{}).token&&tokenHandler.setToken(response.token),_.forEach(promises,function(promise,idx){promise.resolve(response.responses&&response.responses[idx])}),self.polling.is("stopped")||_.forEach(response.messages,function(msg){msg.channel?self.trigger("message",msg.channel,msg.message):self.trigger("message",
"malformed",msg)}),self.trigger("receive",response),resolve()}).fail(function(jqXHR,textStatus,errorThrown){var error={source:"network",purpose:"communicator",context:this,sent:0<jqXHR.readyState,code:jqXHR.status,type:textStatus||"error",message:errorThrown||__("An error occurred!")};token&&tokenHandler.setToken(token),_.forEach(promises,function(promise){promise.reject(error)}),self.trigger("error",error),resolve()})})},this.polling=pollingFactory({interval:config.interval,autoStart:!1,action:function(){var async=this.async();self.request().then(function(){async.resolve()})}}),this.throttledSend=_.throttle(function(){self.polling.next()},config.throttle),
Promise.resolve()):Promise.reject(new Error("You must provide a service URL"))},destroy:function(){var self=this;return(this.polling?new Promise(function(resolve){self.polling.off("stop.api").on("stop.api",resolve).stop()}):Promise.resolve()).then(function(){self.polling=self.throttledSend=self.messagesQueue=null})},open:function(){var self=this;return this.polling?new Promise(function(resolve){self.polling.off("next.api").on("next.api",resolve).start().next()}):Promise.reject(new Error("The communicator has not been properly initialized"))},close:function(){var self=this;return this.polling?new Promise(function(resolve){self.polling.off("stop.api").on(
"stop.api",resolve).stop()}):Promise.reject(new Error("The communicator has not been properly initialized"))},send:function(channel,message){var pending={channel:channel,message:message},promise=new Promise(function(resolve,reject){pending.promise={resolve:resolve,reject:reject}});return this.messagesQueue.push(pending),this.throttledSend(),promise}}}),define("core/communicator/request",["lodash","core/communicator/poll"],function(_,pollProvider){"use strict";return _.defaults({destroy:function(){return this.throttledSend=null,this.messagesQueue=null,Promise.resolve()},open:function(){return Promise.resolve()},close:function(){return Promise.resolve()},
send:function(channel,message){var pending={channel:channel,message:message},promise=new Promise(function(resolve,reject){pending.promise={resolve:resolve,reject:reject}});return this.messagesQueue.push(pending),this.request(),promise}},pollProvider)}),define("core/connectivity",["core/eventifier"],function(eventifier){"use strict";var status=navigator.onLine,connectivity=eventifier({setOnline:function(){return this.isOffline()&&(status=!0,this.trigger("online").trigger("change",status)),this},setOffline:function(){return this.isOnline()&&(status=!1,this.trigger("offline").trigger("change",status)),this},isOnline:function(){return status},isOffline:function(
){return!status}});return window.addEventListener("online",function(){connectivity.setOnline()}),window.addEventListener("offline",function(){connectivity.setOffline()}),connectivity}),define("core/customEvent",[],function(){"use strict";var createEvent,dispatchEvent;createEvent=window.CustomEvent?function(eventName,data){var event;try{event=new CustomEvent(eventName,{detail:data,bubbles:!0,cancelable:!0})}catch(e){(event=document.createEvent("CustomEvent")).initCustomEvent(eventName,!0,!0,data)}return event}:document.createEvent?function(eventName,data){var event=document.createEvent("Event");return event.initEvent(eventName,!0,!0),event.detail=data,event
}:document.createEventObject?function(eventName,data){var event=document.createEventObject();return event.detail=data,event}:function(){},dispatchEvent=document.dispatchEvent?function(element,eventName,event){return!!element&&(element.dispatchEvent(event),!0)}:document.fireEvent?function(element,eventName,event){return!!element&&(element.fireEvent("on"+eventName,event),!0)}:function(){return!1};return function(element,eventName,data){var event=createEvent(eventName,data);return dispatchEvent(element,eventName,event)}}),define("core/dataattrhandler",["jquery","lodash"],function($,_){"use strict";var defaults={container:!1,listenerEvent:"click",useTarget:!0,
bubbled:!1},letDefaultOn=[":radio",":checkbox"],shouldPreventDefault=function($elt){return!$elt.is(letDefaultOn.join(","))},DataAttrHandler=function(attrName,options){var self=this;this.options=_.defaults(options,defaults);var selector="[data-"+attrName+"]";if(!_.has(this.options,"namespace")||!_.isString(this.options.namespace))return $.error("The plugin data namespace option is required");this.options.container&&this.options.container.selector&&(selector=this.options.container.selector+" "+selector),this.options.inner&&(selector+=" "+this.options.inner),$(document).off(this.options.listenerEvent,selector).on(this.options.listenerEvent,selector,function(e){
var $target,$outer,$elt=$(e.target);(!0===self.options.bubbled||$elt.is(selector))&&(void 0===$elt.data(attrName)&&(self.options.inner||self.options.bubbled)&&($elt=($outer=$elt).parents("[data-"+attrName+"]")),$target=!0===self.options.useTarget?DataAttrHandler.getTarget(attrName,$elt):self.options.inner?$outer:void 0,$elt.data(self.options.namespace)||("function"==typeof self.createPlugin&&self.createPlugin($elt,$target),$elt.is(":radio")&&$elt.attr("name")&&$(':radio[name="'+$elt.attr("name")+'"]').not($elt).on(self.options.listenerEvent,function(e){"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt
)&&e.preventDefault()})),"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault())})};return DataAttrHandler.prototype.init=function(cb){return this.createPlugin=cb,this},DataAttrHandler.prototype.trigger=function(cb){return this.callPluginMethod=cb,this},DataAttrHandler.getTarget=function(attrName,$elt){var relativeRegex=/^(\+|>|~|:parent|<)/,$target=[],targetSelector=$elt.attr("data-"+attrName)||$elt.attr("href")||$elt.attr("attrName");if(!_.isEmpty(targetSelector)){var matches=relativeRegex.exec(targetSelector);if(null!==matches){var selector=targetSelector.replace(relativeRegex,"")
;$target=":parent"===matches[0]||"<"===matches[0]?$elt.parents(selector):"~"===matches[0]?$elt.siblings(selector):"+"===matches[0]?$elt.next(selector):$(selector,$elt)}else $target=$(targetSelector)}return $target},DataAttrHandler}),define("core/encoder/boolean",[],function(){return{encode:function(modelValue){return!0===modelValue?"true":"false"},decode:function(nodeValue){return"true"===nodeValue}}}),define("core/encoder/number",[],function(){return{encode:function(modelValue){return modelValue+""},decode:function(nodeValue){return parseInt(nodeValue,10)}}}),define("core/encoder/float",[],function(){"use strict";return{encode:function(modelValue){
return modelValue+""},decode:function(nodeValue){return parseFloat(nodeValue.replace(",","."))}}}),define("core/encoder/time",["moment"],function(moment){return{encode:function(modelValue){var seconds=parseInt(modelValue,10);isNaN(seconds)&&(seconds=0);var time=moment.duration(seconds,"seconds");return(10<=time.get("hours")?time.get("hours"):"0"+time.get("hours"))+":"+(10<=time.get("minutes")?time.get("minutes"):"0"+time.get("minutes"))+":"+(10<=time.get("seconds")?time.get("seconds"):"0"+time.get("seconds"))},decode:function(nodeValue){var time=moment(nodeValue,"HH:mm:ss");return time.seconds()+60*time.minutes()+3600*time.hours()}}}),define(
"core/encoder/array2str",["lodash"],function(_){return{encode:function(modelValue,glue){return glue=glue||",",modelValue.split(glue)},decode:function(nodeValue,glue){return glue=glue||",",_.isArray(nodeValue)?nodeValue.join(glue):nodeValue}}}),define("core/encoder/str2array",["lodash"],function(_){"use strict";return{encode:function(modelValue,glue){return glue=glue||",",_.isArray(modelValue)?modelValue.join(glue):modelValue},decode:function(nodeValue,glue){glue=glue||",";var input=_.isString(nodeValue)?nodeValue.trim():nodeValue;return _.isEmpty(input)?[]:input.split(glue)}}}),define("core/encoder/entity",[],function(){"use strict";var guiltyChars=["&","<",
">",'"'];return{encode:function(input){return(input+="").split("").map(function(character){return-1<guiltyChars.indexOf(character)?"&#"+character.charCodeAt()+";":character}).join("")},decode:function(input){return(input+="").replace(/&#(\d+);/g,function(matches,code){return String.fromCharCode(code)})}}}),define("core/encoder/encoders",["lodash","core/encoder/boolean","core/encoder/number","core/encoder/float","core/encoder/time","core/encoder/array2str","core/encoder/str2array","core/encoder/entity"],function(_,boolean,number,float,time,array2str,str2array,entity){"use strict";var extractArgs=function(name){var args=[],matches=[];return-1<name.indexOf("("
)&&(matches=/\((.+?)\)/.exec(name))&&1<=matches.length&&(args=matches[1].split(",")),args},extractName=function(name){return-1<name.indexOf("(")?name.substr(0,name.indexOf("(")):name};return{number:number,float:float,time:time,boolean:boolean,array2str:array2str,str2array:str2array,entity:entity,register:function(name,encode,decode){if(!_.isString(name))throw new Error("An encoder must have a valid name");if(!_.isFunction(encode))throw new Error("Encode must be a function");if(!_.isFunction(decode))throw new Error("Decode must be a function");this[name]={encode:encode,decode:decode}},encode:function(name,value){var encoder,args;return this[name=extractName(
name)]?(args=[value],(encoder=this[name]).encode.apply(encoder,args.concat(extractArgs(name)))):value},decode:function(name,value){var decoder,args;return this[name=extractName(name)]?(args=[value],(decoder=this[name]).decode.apply(decoder,args.concat(extractArgs(name)))):value}}}),define("core/filter/filters",["lodash"],function(_){return{register:function(name,filter){if(!_.isString(name))throw new Error("An filter must have a valid name");if(!_.isFunction(filter))throw new Error("Filter must be a function");this[name]=filter},filter:function(name,value){return this[name]&&_.isArray(value)?_.filter(value,this[name]):value}}}),define("core/databinder",[
"jquery","lodash","handlebars","core/encoder/encoders","core/filter/filters"],function($,_,Handlebars,Encoders,Filters){"use strict";var locate=function(obj,path){var result,nodes=path.split("."),size=nodes.length,i=1;if(1<=size&&void 0!==(result=obj[nodes[0]]))for(i=1;i<size&&void 0!==(result=result[nodes[i]]);i++);return result},update=function(obj,path,value){var i,nodes=path.split("."),size=nodes.length;for(i=0;i<size;i++){if(i===size-1)return void(obj[nodes[i]]=value);obj[nodes[i]]||(i+1<size&&/^\d$/.test(nodes[i+1])?obj[nodes[i]]=[]:obj[nodes[i]]={}),obj=obj[nodes[i]]}},remove=function(obj,path){var i,nodes=path.split("."),size=nodes.length;for(
i=0;i<size;i++){if(i===size-1)return void(_.isArray(obj)?obj.splice(parseInt(nodes[i],10),1):delete obj[nodes[i]]);obj=obj[nodes[i]]}},resyncIndexes=function(obj,path,$node){var values=locate(obj,path);_.isArray(values)&&_.forEach(values,function(value,position){values[position].index=position,$node&&$node.children("[data-bind-index]").eq(position).attr("data-bind-index",position+"").data("bind-index",position+"")})},toBind=function($node,$container){if($node[0].type&&$node[0].name){if("radio"===$node[0].type)return $("[name='"+$node[0].name+"']",$container);if("checkbox"===$node[0].type)return $("[name='"+$node[0].name+"']",$container)}return $node},
_bindOnce=function($node,$container,eventName,cb){var bounds;!function($node,$container,eventName){var bounds;0<$node.length&&(bounds=$._data($node[0],"events"))&&0<_(bounds[eventName]).where({namespace:"internalbinder"}).size()&&toBind($node,$container).off(eventName+".internalbinder")}($node,$container,eventName),0<$node.length&&(!(bounds=$._data($node[0],"events"))||_(bounds[eventName]).where({namespace:"internalbinder"}).size()<1)&&toBind($node,$container).on(eventName+".internalbinder",function(e){$(this).is(e.target)&&cb.apply(null,Array.prototype.splice.call(arguments,1))})},DataBinder=function($container,model,options){var self=this
;this.$container=$container,this.model=model||{},this.encoders=_.clone(Encoders),this.filters=_.clone(Filters),options&&(_.isPlainObject(options.encoders)&&_.forEach(options.encoders,function(encoder,name){self.encoders.register(name,encoder.encode,encoder.decode)}),_.isPlainObject(options.filters)&&_.forEach(options.filters,function(filter,name){self.filters.register(name,filter)}),this.templates=options.templates||{})};return DataBinder.prototype._bindNode=function($node,path,model,domFirst){$node.data("bound")||(!0!==domFirst&&void 0!==locate(model,path)||update(model,path,this._getNodeValue($node)),this._setNodeValue($node,locate(model,path)),
this._listenUpdates($node,path,model),this._listenRemoves($node,path,model),$node.data("bound",path))},DataBinder.prototype._bindArrayNode=function($node,path,model,domFirst){var template,values,self=this;$node.data("bound")||(values=locate(model,path),$node.data("bind-tmpl")?"function"!=typeof(template=self.templates[$node.data("bind-tmpl")])&&0<$($node.data("bind-tmpl")).length&&(template=Handlebars.compile($($node.data("bind-tmpl")).html())):template=Handlebars.compile($node.html()),values&&_.isArray(values)?$node.data("bind-filter")&&(values=this.filters.filter($node.data("bind-filter"),values)):update(model,path,[]),$node.empty(),_.forEach(values,
function(value,index){var $newNode;value.index=index,($newNode=$(template(value).trim())).appendTo($node).filter(":first").attr("data-bind-index",index),self.bind($newNode,self.model,path+"."+index+".",domFirst),self._listenRemoves($newNode,path+"."+index,self.model)}),self._listenUpdates($node,path,model),self._listenAdds($node,path,model),$node.data("bound",path))},DataBinder.prototype._bindRmNode=function($node,path,model,domFirst){$node.data("bound")||(this._listenUpdates($node,path,model),!0===domFirst&&$node.trigger("change"),$node.data("bound",path))},DataBinder.prototype._listenUpdates=function($node,path,model){var self=this;_bindOnce($node,
this.$container,"change",function(){$node.is("[data-bind-each]")?(!function order(obj,path,$node,retry){var values=locate(obj,path),changed=!1;_.isArray(values)&&($node.children("[data-bind-index]").each(function(position){var $item=$(this),index=parseInt($item.data("bind-index"),10);if(!values[index])return retry||_.delay(function(){order(obj,path,$node,!0)},100),!1;values[index].index=position,changed=changed||position!==index}),!0===changed&&values.sort(function(a,b){return a.index-b.index}))}(model,path,$node),resyncIndexes(model,path,$node),$node.data("bind-each",path),self._rebind($node),self.$container.trigger("order.binder",[self.model])):$node.is(
"[data-bind-rm]")?(!0===self._getNodeValue($node)&&remove(model,path),self.$container.trigger("delete.binder",[self.model])):(update(model,path,self._getNodeValue($node)),self._resyncIndexOnceRm($node,path),self.$container.trigger("update.binder",[self.model])),self.$container.trigger("change.binder",[self.model])})},DataBinder.prototype._listenRemoves=function($node,path,model){var self=this;_bindOnce($node,this.$container,"delete",function(undoable){function doRemoval(){remove(model,path),self.$container.trigger("delete.binder",[self.model]).trigger("change.binder",[self.model])}!0===undoable?(self._resyncIndexOnceRm($node,path),$node.parent().one(
"deleted.deleter",function(){doRemoval()}),$node.is("[data-bind-index]")&&$node.one("undo.deleter",function(){var $parentNode=$node.parent().closest("[data-bind-each]"),parentPath=path.replace(/\.[0-9]+$/,"");resyncIndexes(self.model,parentPath,$parentNode)})):(doRemoval(),self._resyncIndexOnceRm($node,path))})},DataBinder.prototype._listenAdds=function($node,path,model){var self=this;_bindOnce($node,this.$container,"add",function(content,data){var size=$node.children("[data-bind-index]").length;$node.children().not("[data-bind-index]").each(function(){var $newNode=$(this),realPath=path+"."+size;$newNode.attr("data-bind-index",size),data&&update(self.model,
realPath,data),self.bind($newNode,self.model,realPath+".",!0),self._listenRemoves($newNode,realPath,self.model)}),self.$container.trigger("add.binder",[self.model]).trigger("change.binder",[self.model]),$node.trigger("add.binder",[content,data])})},DataBinder.prototype._resyncIndexOnceRm=function($node,path){var removedIndex,$parentNode,parentPath;$node.is("[data-bind-index]")&&(removedIndex=parseInt($node.data("bind-index"),10),$parentNode=$node.parent().closest("[data-bind-each]"),parentPath=path.replace(/\.[0-9]+$/,""),resyncIndexes(this.model,parentPath),$parentNode.children("[data-bind-index]").length-1!==removedIndex&&$parentNode.children(
"[data-bind-index]").filter(":gt("+removedIndex+")").each(function(){var $item=$(this),newIndex=parseInt($item.data("bind-index"),10)-1;$item.attr("data-bind-index",newIndex).data("bind-index",newIndex+"")}),this._rebind($parentNode,parentPath.replace($parentNode.data("bind-each"),"")))},DataBinder.prototype._setNodeValue=function($node,value){void 0!==value&&($node.data("bind-encoder")&&(value=this.encoders.encode($node.data("bind-encoder"),value)),_.contains(["INPUT","SELECT","TEXTAREA"],$node[0].nodeName)?$node.is(":text, input[type='hidden'], textarea, select")?$node.val(value).trigger("change"):$node.is(":radio, :checkbox")&&toBind($node,this.$container
).each(function(){var $elt=$(this);$elt.prop("checked",$elt.val()===value)}):$node.hasClass("button-group")?$node.find("[data-bind-value]").each(function(){var $elt=$(this);$elt.data("bind-value")+""===value?$elt.addClass("active"):$elt.removeClass("active")}):!0===$node.data("bind-html")?$node.html(value):$node.text(value))},DataBinder.prototype._getNodeValue=function($node){var value;return _.contains(["INPUT","SELECT","TEXTAREA"],$node[0].nodeName)?$node.is(":text, input[type='hidden'], textarea, select")?value=$node.val():$node.is(":radio, :checkbox")?value=toBind($node,this.$container).filter(":checked").val():$node.hasClass("button-group")&&$node.find(
"[data-bind-value]").each(function(){var $elt=$(this);$elt.hasClass("active")&&(value=$elt.data("bind-value")+"")}):value=!0===$node.data("bind-html")?$node.html():$node.text(),$node.data("bind-encoder")&&(value=this.encoders.decode($node.data("bind-encoder"),value)),value},DataBinder.prototype.bind=function($elt,model,prefix,domFirst){var self=this,bindElements=function($boundElt,dataAttrName,binding){var selector="[data-"+dataAttrName+"]";$boundElt.find(selector).addBack().filter(selector).each(function(){var $node=$(this),path=prefix+$node.data(dataAttrName);self[binding]($node,path,model,domFirst)})};$elt=$elt||this.$container,model=model||this.model,
prefix=prefix||"",domFirst=domFirst||!1,bindElements($elt,"bind-each","_bindArrayNode"),bindElements($elt,"bind-rm","_bindRmNode"),bindElements($elt,"bind","_bindNode")},DataBinder.prototype._rebind=function($elt,prefix){var path,values,self=this;prefix=prefix||"",$elt.is("[data-bind-each]")?(path=prefix+$elt.data("bind-each"),values=locate(self.model,path),_.forEach(values,function(value,index){var $childNode=$elt.children('[data-bind-index="'+index+'"]');self._rebind($childNode,path+"."+index+"."),self._listenRemoves($childNode,path+"."+index,self.model)}),void 0!==values&&(self._listenUpdates($elt,path,self.model),self._listenAdds($elt,path,self.model))
):($elt.find("[data-bind]").each(function(){var $node=$(this),boundPath=prefix+$node.data("bind");self._listenUpdates($node,boundPath,self.model),self._listenRemoves($node,boundPath,self.model)}),$elt.find("[data-bind-each]").each(function(){self._rebind($(this),prefix)}))},DataBinder}),define("core/databindcontroller",["jquery","lodash","core/databinder"],function($,_,DataBinder){"use strict";return{takeControl:function($container,options){var control={},model={},binderOpts=_.pick(options,function(value,key){return"encoders"===key||"filters"===key||"templates"===key});return options.get&&(control.get=function(cb,errBack){return $.getJSON(options.get).done(
function(data){data&&(new DataBinder($container,model=data,binderOpts).bind(),"function"==typeof cb&&cb(model))}),this}),options.save&&(control.save=function(cb,errBack){var allowSave=!0;return"function"==typeof options.beforeSave&&(allowSave=!!options.beforeSave(model)),!0===allowSave&&$.post(options.save,{model:JSON.stringify(model)},function(data){data&&"function"==typeof cb&&cb(data)},"json").fail(function(){"function"==typeof errBack&&errBack()}),this}),control}}}),define("core/dataProvider/proxy",["lodash","core/delegator","core/eventifier","core/promise","core/providerRegistry","core/tokenHandler"],function(_,delegator,eventifier,Promise,
providerRegistry,tokenHandlerFactory){"use strict";var _defaults={};return providerRegistry(function crudProxyFactory(proxyName,middlewares){var initConfig,proxyAdapter=crudProxyFactory.getProvider(proxyName),tokenHandler=tokenHandlerFactory(),extraParams={},initialized=!1,proxy=eventifier({init:function(config){return delegate("init",initConfig=_.defaults({},config,_defaults)).then(function(){return initialized=!0,proxy})},destroy:function(){return delegate("destroy").then(function(){initialized=!1,initConfig=null,extraParams={}})},create:function(params){return delegate("create",getParams(params))},read:function(params){return delegate("read",getParams(
params))},write:function(params){return delegate("write",getParams(params))},remove:function(params){return delegate("remove",getParams(params))},action:function(name,params){return delegate("action",name,getParams(params))},addExtraParams:function(params){return _.isPlainObject(params)&&_.merge(extraParams,params),this},getTokenHandler:function(){return tokenHandler},getConfig:function(){return initConfig},getMiddlewares:function(){return middlewares},setMiddlewares:function(handler){return middlewares=handler,this}}),delegateProxy=delegator(proxy,proxyAdapter,{name:"proxy",wrapper:function(response){return Promise.resolve(response)}});function getParams(
params){var mergedParams=_.merge({},params,extraParams);return extraParams={},mergedParams}function delegate(fnName){var request={command:fnName,params:Array.prototype.slice.call(arguments,1)};return initialized||"init"===fnName?delegateProxy.apply(null,arguments).then(function(data){return middlewares?middlewares.apply(request,data):data}).catch(function(err){return proxy.trigger("error",err),Promise.reject(err)}):Promise.reject(new Error("Proxy is not properly initialized or has been destroyed!"))}return proxy})}),define("core/dataProvider/request",["jquery","lodash","i18n","core/promise"],function($,_,__,Promise){"use strict";var createError=function(
response,fallbackMessage,httpCode){var err;return(err=response&&response.errorCode?new Error(response.errorCode+" : "+(response.errorMsg||response.errorMessage||response.error)):new Error(fallbackMessage)).response=response,httpCode&&(err.code=httpCode),err};return function(url,data,method,headers,background){return new Promise(function(resolve,reject){if(_.isEmpty(url))return reject(new TypeError("At least give a URL..."));$.ajax({url:url,type:method||"GET",dataType:"json",headers:headers,data:data,global:!background}).done(function(response,status,xhr){return 204===xhr.status||response&&204===response.errorCode?resolve(
):response&&!0===response.success?resolve(response.data):reject(createError(response,__("The server has sent an empty response"),xhr.status))}).fail(function(xhr){var response;try{response=JSON.parse(xhr.responseText)}catch(parseErr){response=xhr.responseText}return reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status))})})}}),define("core/dataProvider/proxy/ajax",["lodash","core/dataProvider/request","core/promise"],function(_,request,Promise){"use strict";var _defaults={noCache:!0,noToken:!1,actions:{}};function rejectAction(type,action,params){return Promise.reject({success:!1,type:type,action:action,params:params})}return{name:"ajax",
init:function(config){this.processRequest=function(action,params,method){var token,descriptor=config.actions[action],headers={},tokenHandler=this.getTokenHandler();return _.isString(descriptor)&&(descriptor={url:descriptor}),descriptor&&descriptor.url?_.isFunction(descriptor.validate)&&!1===descriptor.validate(params)?rejectAction("invalid",action,params):(config.noCache&&(params=_.merge({_:(new Date).getTime()},params)),config.noToken||(token=tokenHandler.getToken())&&(headers["X-Auth-Token"]=token),request(descriptor.url,params,descriptor.method||method,headers).then(function(data){return data&&data.token&&tokenHandler.setToken(data.token),data}).catch(
function(err){var t=err.response&&(err.response.token||err.response.data&&err.response.data.token);return t?tokenHandler.setToken(t):config.noToken||tokenHandler.setToken(token),Promise.reject(err)})):rejectAction("notimplemented",action,params)},_.defaults(config,_defaults)},destroy:function(){this.processRequest=null},create:function(params){return this.processRequest("create",params,"POST")},read:function(params){return this.processRequest("read",params,"GET")},write:function(params){return this.processRequest("write",params,"POST")},remove:function(params){return this.processRequest("remove",params,"GET")},action:function(actionName,params){
return this.processRequest(actionName,params,"POST")}}}),function(global,factory){"function"==typeof define&&define.amd?define("lib/polyfill/webcrypto-shim",[],function(){return factory(global)}):"object"==typeof module&&module.exports?module.exports=factory(global):factory(global)}("undefined"!=typeof self?self:this,function(global){"use strict";if("function"!=typeof Promise)throw"Promise support required";var _crypto=global.crypto||global.msCrypto;if(_crypto){var _subtle=_crypto.subtle||_crypto.webkitSubtle;if(_subtle){var _Crypto=global.Crypto||_crypto.constructor||Object,_SubtleCrypto=global.SubtleCrypto||_subtle.constructor||Object,isEdge=(
global.CryptoKey||global.Key||Object,-1<global.navigator.userAgent.indexOf("Edge/")),isIE=!!global.msCrypto&&!isEdge,isWebkit=!_crypto.subtle&&!!_crypto.webkitSubtle;if(isIE||isWebkit){var oid2str={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},str2oid={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(m){var _fn=_subtle[m];_subtle[m]=function(a,b,c){var ka,kx,ku,jwk,op,args=[].slice.call(arguments);switch(m){case"generateKey":ka=alg(a),kx=b,ku=c;break;case"importKey":ka=alg(c),kx=args[3],ku=args[4],"jwk"===a&&((b=b2jwk(b)).alg||(b.alg=jwkAlg(ka)),b.key_ops||(b.key_ops="oct"!==b.kty?"d"in b?ku.filter(isPrvKeyUse
):ku.filter(isPubKeyUse):ku.slice()),args[1]=(jwk=b2jwk(b),isIE&&(jwk.extractable=jwk.ext,delete jwk.ext),s2b(unescape(encodeURIComponent(JSON.stringify(jwk)))).buffer));break;case"unwrapKey":ka=args[4],kx=args[5],ku=args[6],args[2]=c._key}if("generateKey"===m&&"HMAC"===ka.name&&ka.hash)return ka.length=ka.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[ka.hash.name],_subtle.importKey("raw",_crypto.getRandomValues(new Uint8Array(ka.length+7>>3)),ka,kx,ku);if(isWebkit&&"generateKey"===m&&"RSASSA-PKCS1-v1_5"===ka.name&&(!ka.modulusLength||2048<=ka.modulusLength))return(a=alg(a)).name="RSAES-PKCS1-v1_5",delete a.hash,_subtle.generateKey(a,!0,[
"encrypt","decrypt"]).then(function(k){return Promise.all([_subtle.exportKey("jwk",k.publicKey),_subtle.exportKey("jwk",k.privateKey)])}).then(function(keys){return keys[0].alg=keys[1].alg=jwkAlg(ka),keys[0].key_ops=ku.filter(isPubKeyUse),keys[1].key_ops=ku.filter(isPrvKeyUse),Promise.all([_subtle.importKey("jwk",keys[0],ka,!0,keys[0].key_ops),_subtle.importKey("jwk",keys[1],ka,kx,keys[1].key_ops)])}).then(function(keys){return{publicKey:keys[0],privateKey:keys[1]}});if((isWebkit||isIE&&"SHA-1"===(ka.hash||{}).name)&&"importKey"===m&&"jwk"===a&&"HMAC"===ka.name&&"oct"===b.kty)return _subtle.importKey("raw",s2b(a2s(b.k)),c,args[3],args[4]);if(
isWebkit&&"importKey"===m&&("spki"===a||"pkcs8"===a))return _subtle.importKey("jwk",function(k){var info=b2der(k),prv=!1;2<info.length&&(prv=!0,info.shift());var jwk={ext:!0};switch(info[0][0]){case"1.2.840.113549.1.1.1":var rsaComp=["n","e","d","p","q","dp","dq","qi"],rsaKey=b2der(info[1]);prv&&rsaKey.shift();for(var i=0;i<rsaKey.length;i++)rsaKey[i][0]||(rsaKey[i]=rsaKey[i].subarray(1)),jwk[rsaComp[i]]=s2a(b2s(rsaKey[i]));jwk.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return jwk}(b),c,args[3],args[4]);if(isIE&&"unwrapKey"===m)return _subtle.decrypt(args[3],c,b).then(function(k){return _subtle.importKey(a,k,args[4],args[5],args[6])}
);try{op=_fn.apply(_subtle,args)}catch(e){return Promise.reject(e)}return isIE&&(op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)},op.oncomplete=function(r){res(r.target.result)}})),op=op.then(function(k){return"HMAC"===ka.name&&(ka.length||(ka.length=8*k.algorithm.length)),0==ka.name.search("RSA")&&(ka.modulusLength||(ka.modulusLength=(k.publicKey||k).algorithm.modulusLength),ka.publicExponent||(ka.publicExponent=(k.publicKey||k).algorithm.publicExponent)),k=k.publicKey&&k.privateKey?{publicKey:new CryptoKey(k.publicKey,ka,kx,ku.filter(isPubKeyUse)),privateKey:new CryptoKey(k.privateKey,ka,kx,ku.filter(isPrvKeyUse))}:new CryptoKey(k
,ka,kx,ku)})}}),["exportKey","wrapKey"].forEach(function(m){var _fn=_subtle[m];_subtle[m]=function(a,b,c){var op,args=[].slice.call(arguments);switch(m){case"exportKey":args[1]=b._key;break;case"wrapKey":args[1]=b._key,args[2]=c._key}if((isWebkit||isIE&&"SHA-1"===(b.algorithm.hash||{}).name)&&"exportKey"===m&&"jwk"===a&&"HMAC"===b.algorithm.name&&(args[0]="raw"),!isWebkit||"exportKey"!==m||"spki"!==a&&"pkcs8"!==a||(args[0]="jwk"),isIE&&"wrapKey"===m)return _subtle.exportKey(a,b).then(function(k){return"jwk"===a&&(k=s2b(unescape(encodeURIComponent(JSON.stringify(b2jwk(k)))))),_subtle.encrypt(args[3],c,k)});try{op=_fn.apply(_subtle,args)}catch(e){
return Promise.reject(e)}return isIE&&(op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)},op.oncomplete=function(r){res(r.target.result)}})),"exportKey"===m&&"jwk"===a&&(op=op.then(function(k){return(isWebkit||isIE&&"SHA-1"===(b.algorithm.hash||{}).name)&&"HMAC"===b.algorithm.name?{kty:"oct",alg:jwkAlg(b.algorithm),key_ops:b.usages.slice(),ext:!0,k:s2a(b2s(k))}:((k=b2jwk(k)).alg||(k.alg=jwkAlg(b.algorithm)),k.key_ops||(k.key_ops="public"===b.type?b.usages.filter(isPubKeyUse):"private"===b.type?b.usages.filter(isPrvKeyUse):b.usages.slice()),k)})),!isWebkit||"exportKey"!==m||"spki"!==a&&"pkcs8"!==a||(op=op.then(function(k){
return k=function(k){var key,info=[["",null]],prv=!1;switch(k.kty){case"RSA":for(var rsaComp=["n","e","d","p","q","dp","dq","qi"],rsaKey=[],i=0;i<rsaComp.length&&rsaComp[i]in k;i++){var b=rsaKey[i]=s2b(a2s(k[rsaComp[i]]));128&b[0]&&(rsaKey[i]=new Uint8Array(b.length+1),rsaKey[i].set(b,1))}2<rsaKey.length&&(prv=!0,rsaKey.unshift(new Uint8Array([0]))),info[0][0]="1.2.840.113549.1.1.1",key=rsaKey;break;default:throw new TypeError("Unsupported key type")}return info.push(new Uint8Array(der2b(key)).buffer),prv?info.unshift(new Uint8Array([0])):info[1]={tag:3,value:info[1]},new Uint8Array(der2b(info)).buffer}(b2jwk(k))})),op}}),["encrypt","decrypt","sign","verify"
].forEach(function(m){var _fn=_subtle[m];_subtle[m]=function(a,b,c,d){if(isIE&&(!c.byteLength||d&&!d.byteLength))throw new Error("Empy input is not allowed");var op,args=[].slice.call(arguments),ka=alg(a);if(!isIE||"encrypt"!==m&&"decrypt"!==m||"RSA-OAEP"!==ka.name||(args[0].hash=b.hash),isIE&&"decrypt"===m&&"AES-GCM"===ka.name){var tl=a.tagLength>>3;args[2]=(c.buffer||c).slice(0,c.byteLength-tl),a.tag=(c.buffer||c).slice(c.byteLength-tl)}args[1]=b._key;try{op=_fn.apply(_subtle,args)}catch(e){return Promise.reject(e)}return isIE&&(op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)},op.oncomplete=function(r){r=r.target.result;if(
"encrypt"===m&&r instanceof AesGcmEncryptResult){var c=r.ciphertext,t=r.tag;(r=new Uint8Array(c.byteLength+t.byteLength)).set(new Uint8Array(c),0),r.set(new Uint8Array(t),c.byteLength),r=r.buffer}res(r)}})),op}}),isIE){var _digest=_subtle.digest;_subtle.digest=function(a,b){if(!b.byteLength)throw new Error("Empy input is not allowed");var op;try{op=_digest.call(_subtle,a,b)}catch(e){return Promise.reject(e)}return op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)},op.oncomplete=function(r){res(r.target.result)}})},global.crypto=Object.create(_crypto,{getRandomValues:{value:function(a){return _crypto.getRandomValues(a)}},subtle:{
value:_subtle}}),global.CryptoKey=CryptoKey}isWebkit&&(_crypto.subtle=_subtle,global.Crypto=_Crypto,global.SubtleCrypto=_SubtleCrypto,global.CryptoKey=CryptoKey)}}}function s2a(s){return btoa(s).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function a2s(s){return s=(s+="===").slice(0,-s.length%4),atob(s.replace(/-/g,"+").replace(/_/g,"/"))}function s2b(s){for(var b=new Uint8Array(s.length),i=0;i<s.length;i++)b[i]=s.charCodeAt(i);return b}function b2s(b){return b instanceof ArrayBuffer&&(b=new Uint8Array(b)),String.fromCharCode.apply(String,b)}function alg(a){var r={name:(a.name||a||"").toUpperCase().replace("V","v")};switch(r.name){case"SHA-1":
case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":a.length&&(r.length=a.length);break;case"HMAC":a.hash&&(r.hash=alg(a.hash)),a.length&&(r.length=a.length);break;case"RSAES-PKCS1-v1_5":a.publicExponent&&(r.publicExponent=new Uint8Array(a.publicExponent)),a.modulusLength&&(r.modulusLength=a.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":a.hash&&(r.hash=alg(a.hash)),a.publicExponent&&(r.publicExponent=new Uint8Array(a.publicExponent)),a.modulusLength&&(r.modulusLength=a.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return r}function jwkAlg(a){return{HMAC:{"SHA-1":"HS1",
"SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[a.name][(a.hash||{}).name||a.length||""]}function b2jwk(k){(k instanceof ArrayBuffer||k instanceof Uint8Array)&&(k=JSON.parse(decodeURIComponent(escape(b2s(k)))));var jwk={kty:k.kty,alg:k.alg,ext:k.ext||k.extractable};switch(jwk.kty){case"oct":jwk.k=k.k;case"RSA":["n","e"
,"d","p","q","dp","dq","qi","oth"].forEach(function(x){x in k&&(jwk[x]=k[x])});break;default:throw new TypeError("Unsupported key type")}return jwk}function b2der(buf,ctx){if(buf instanceof ArrayBuffer&&(buf=new Uint8Array(buf)),ctx||(ctx={pos:0,end:buf.length}),ctx.end-ctx.pos<2||ctx.end>buf.length)throw new RangeError("Malformed DER");var rv,tag=buf[ctx.pos++],len=buf[ctx.pos++];if(128<=len){if(len&=127,ctx.end-ctx.pos<len)throw new RangeError("Malformed DER");for(var xlen=0;len--;)xlen<<=8,xlen|=buf[ctx.pos++];len=xlen}if(ctx.end-ctx.pos<len)throw new RangeError("Malformed DER");switch(tag){case 2:rv=buf.subarray(ctx.pos,ctx.pos+=len);break;case 3:if(
buf[ctx.pos++])throw new Error("Unsupported bit string");len--;case 4:rv=new Uint8Array(buf.subarray(ctx.pos,ctx.pos+=len)).buffer;break;case 5:rv=null;break;case 6:var oid=btoa(b2s(buf.subarray(ctx.pos,ctx.pos+=len)));if(!(oid in oid2str))throw new Error("Unsupported OBJECT ID "+oid);rv=oid2str[oid];break;case 48:rv=[];for(var end=ctx.pos+len;ctx.pos<end;)rv.push(b2der(buf,ctx));break;default:throw new Error("Unsupported DER tag 0x"+tag.toString(16))}return rv}function der2b(val,buf){buf||(buf=[]);var tag=0,len=0,pos=buf.length+2;if(buf.push(0,0),val instanceof Uint8Array){tag=2,len=val.length;for(var i=0;i<len;i++)buf.push(val[i])}else if(
val instanceof ArrayBuffer){tag=4,len=val.byteLength,val=new Uint8Array(val);for(i=0;i<len;i++)buf.push(val[i])}else if(null===val)tag=5,len=0;else if("string"==typeof val&&val in str2oid){var oid=s2b(atob(str2oid[val]));tag=6,len=oid.length;for(i=0;i<len;i++)buf.push(oid[i])}else if(val instanceof Array){for(i=0;i<val.length;i++)der2b(val[i],buf);tag=48,len=buf.length-pos}else{if(!("object"==typeof val&&3===val.tag&&val.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+val);tag=3,len=(val=new Uint8Array(val.value)).byteLength,buf.push(0);for(i=0;i<len;i++)buf.push(val[i]);len++}if(128<=len){var xlen=len;len=4;for(buf.splice(pos,0,
xlen>>24&255,xlen>>16&255,xlen>>8&255,255&xlen);1<len&&!(xlen>>24);)xlen<<=8,len--;len<4&&buf.splice(pos,4-len),len|=128}return buf.splice(pos-2,2,tag,len),buf}function CryptoKey(key,alg,ext,use){Object.defineProperties(this,{_key:{value:key},type:{value:key.type,enumerable:!0},extractable:{value:void 0===ext?key.extractable:ext,enumerable:!0},algorithm:{value:void 0===alg?key.algorithm:alg,enumerable:!0},usages:{value:void 0===use?key.usages:use,enumerable:!0}})}function isPubKeyUse(u){return"verify"===u||"encrypt"===u||"wrapKey"===u}function isPrvKeyUse(u){return"sign"===u||"decrypt"===u||"unwrapKey"===u}}),define("core/digest",["lodash",
"lib/polyfill/webcrypto-shim"],function(_){"use strict";var subtle=window.crypto.subtle||window.crypto.webkitSubtle,supportedAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];return function(utf8String,selectedAlgorithm){var algorithm;if(_.isString(selectedAlgorithm)||(selectedAlgorithm="SHA-256"),algorithm=selectedAlgorithm.toUpperCase(),!_.contains(supportedAlgorithms,algorithm))throw new TypeError("Unsupported digest algorithm : "+algorithm);if(!_.isString(utf8String))throw new TypeError("Please encode a string, not a "+typeof utf8String);return subtle.digest(algorithm,new TextEncoder("utf-8").encode(utf8String)).then(function(buffer){return function(
buffer){return[].map.call(new Uint8Array(buffer),function(val){return("00"+val.toString(16)).slice(-2)}).join("")}(buffer)})}}),define("core/encoder/array",["lodash"],function(_){return{encode:function(modelValue,glue){return glue=glue||",",_.isArray(modelValue)?modelValue.join(glue):modelValue},decode:function(nodeValue,glue){return glue=glue||",",nodeValue.split(glue)}}}),define("core/errorHandler",["lodash"],function(_){"use strict";return{_contexts:{},getContext:function(name){if(_.isString(name)&&name.length)return this._contexts[name]=this._contexts[name]||{typedHandlers:{},globalHandler:null},this._contexts[name]},listen:function(name,type,handler){
var context=this.getContext(name);context&&(_.isFunction(type)&&!handler&&(handler=type),_.isFunction(handler)&&(_.isString(type)&&!_.isEmpty(type)?context.typedHandlers[type]=handler:context.globalHandler=handler))},throw:function(name,err){var context=this.getContext(name);if(context)return _.isString(err)&&(err=new Error(err)),_.isFunction(context.typedHandlers[err.name])&&context.typedHandlers[err.name](err),_.isFunction(context.globalHandler)&&context.globalHandler(err),!1},reset:function(name){this._contexts[name]&&(this._contexts=_.omit(this._contexts,name))}}}),define("core/history",["jquery"],function($){"use strict";var ns="history";return{
fixBrokenBrowsers:function(){var enabledSelector=["input","textarea","[contenteditable=true]"].join(","),preventBackSpace=function(e){return 8!==e.keyCode},preventBackSpacePropag=function(e){return 8!==e.keyCode||e.target.readonly||e.target.disbaled||e.stopPropagation(),!0};$(document).off("."+ns),$(document).off("."+ns,enabledSelector),$(document).on("keydown."+ns,preventBackSpace),$(document).on("keypress."+ns,preventBackSpace),$(document).on("keydown."+ns,enabledSelector,preventBackSpacePropag),$(document).on("keypress."+ns,enabledSelector,preventBackSpacePropag)}}}),define("context",["module"],function(module){return module.config()}),define("urlParser",
["lodash"],function(_){"use strict";var urlParts=["hash","host","hostname","pathname","port","protocol","search"];function UrlParser(url){var detachedAnchor;this.url=url,(detachedAnchor=document.createElement("a")).href=url,this.data=_.pick(detachedAnchor,urlParts),this.params=UrlParser.extractParams(this.data.search)}return UrlParser.extractParams=function(search){var params={};return search.replace(/^\?/,"").replace(/([^=&]+)=([^&]*)/g,function(m,key,value){params[decodeURIComponent(key)]=decodeURIComponent(value)}),params},UrlParser.prototype.get=function(what){return!!_.contains(urlParts,what)&&this.data[what]},UrlParser.prototype.getParams=function(){
return this.params},UrlParser.prototype.setParams=function(params){_.isObject(params)&&(this.params=params)},UrlParser.prototype.addParam=function(key,value){key&&(this.params[key]=value)},UrlParser.prototype.getPaths=function(){return this.data.pathname.replace(/^\/|\/$/g,"").split("/")},UrlParser.prototype.getUrl=function(exclude){var url="";return exclude=exclude||[],this.data&&(this.data.hostname&&!_.contains(exclude,"host")&&(url+=(this.data.protocol?this.data.protocol:"http:")+"//"+this.data.hostname.replace(/\/$/,""),this.data.port&&80!==this.data.port&&"80"!==this.data.port&&"0"!==this.data.port&&(url+=":"+this.data.port)),/\/$/.test(url
)||/^\//.test(this.data.pathname)||(url+="/"),url+=this.data.pathname,this.params&&!_.contains(exclude,"params")&&(url+="?",_.forEach(this.params,function(value,key){url+=encodeURIComponent(key)+"="+encodeURIComponent(value)+"&"}),url=url.substring(0,url.length-1)),this.data.hash&&!_.contains(exclude,"hash")&&(url+=this.data.hash)),url},UrlParser.prototype.getBaseUrl=function(){var baseUrl=this.getUrl(["params","hash"]),paths=this.getPaths(),lastPart=paths[paths.length-1];return 0<paths.length&&/\.[a-z]+$/.test(lastPart)&&(baseUrl=baseUrl.replace(lastPart,"").replace(/\/\/$/,"/")),baseUrl},
UrlParser.prototype.checkCORS=UrlParser.prototype.sameDomain=function(url){var parsedUrl;if(void 0===url&&(parsedUrl=new UrlParser(window.location)),"string"==typeof url&&(parsedUrl=new UrlParser(url)),url instanceof UrlParser&&(parsedUrl=url),!(parsedUrl instanceof UrlParser))throw new TypeError("Invalid url format");return"data:"===this.get("protocol")||"data:"===parsedUrl.get("protocol")||this.get("protocol")===parsedUrl.get("protocol")&&this.get("hostname")===parsedUrl.get("hostname")&&this.get("port")===parsedUrl.get("port")},UrlParser}),define("core/router",["lodash","context","urlParser","core/logger","core/promise"],function(_,context,UrlParser,
loggerFactory,Promise){"use strict";var logger=loggerFactory("router");return{dispatch:function(urls,cb){var self=this;return _.isArray(urls)||(urls=[urls]),Promise.all(urls.map(function(url){return self.dispatchUrl(url)})).then(function(){_.isFunction(cb)&&cb()}).catch(function(err){logger.error(err)})},parseMvcUrl:function(url){var parser,paths,route=null;return _.isString(url)&&!_.isEmpty(url)&&3<=(paths=(parser=new UrlParser(url)).getPaths()).length&&(route={action:paths[paths.length-1],module:paths[paths.length-2],extension:paths[paths.length-3],params:parser.getParams()}),route},loadRouteBundle:function(route){
return route&&route.extension&&context.bundle&&"tao"!==route.extension?new Promise(function(resolve){var routeBundle=route.extension+"/loader/"+route.extension+".min";window.require([routeBundle],resolve,function(err){logger.warn("Unable to load "+routeBundle+" : "+err.message),resolve()})}):Promise.resolve()},loadRoute:function(route){return route&&route.extension?new Promise(function(resolve,reject){var routeModule="tao"===route.extension?"controller/routes":route.extension+"/controller/routes";window.require([routeModule],resolve,reject)}):Promise.resolve()},dispatchUrl:function(url){var self=this,route=this.parseMvcUrl(url);return logger.debug(
"Dispatch URL "+url),this.loadRouteBundle(route).then(function(){return self.loadRoute(route)}).then(function(routes){var moduleRoutes,action,dependencies=[],styles=[],moduleConfig={},mapStyle=function(style){return"css!"+route.extension+"Css/"+style};return routes&&routes[route.module]&&((moduleRoutes=routes[route.module]).deps&&(dependencies=dependencies.concat(moduleRoutes.deps)),moduleRoutes.css&&(styles=_.isArray(moduleRoutes.css)?moduleRoutes.css:[moduleRoutes.css],dependencies=dependencies.concat(_.map(styles,mapStyle))),(moduleRoutes.actions&&moduleRoutes.actions[route.action]||moduleRoutes[route.action])&&(
action=moduleRoutes.actions[route.action]||moduleRoutes[route.action],(_.isString(action)||_.isArray(action))&&(dependencies=dependencies.concat(action)),action.deps&&(dependencies=dependencies.concat(action.deps)),action.css&&(styles=_.isArray(action.css)?action.css:[action.css],dependencies=dependencies.concat(_.map(styles,mapStyle)))),dependencies=_.map(dependencies,function(dep){return/^controller/.test(dep)&&"tao"!==route.extension?route.extension+"/"+dep:dep}),_.isEmpty(route.params)||(_.forEach(dependencies,function(dependency){moduleConfig[dependency]=_.merge(_.clone(window.requirejs.s.contexts._.config.config[dependency]||{}),route.params)}),
window.requirejs.config({config:moduleConfig}))),dependencies}).then(function(dependencies){if(dependencies&&dependencies.length)return logger.debug("Load controllers : "+dependencies.join(", ")),new Promise(function(resolve,reject){window.require(dependencies,function(){_.forEach(arguments,function(dependency){dependency&&_.isFunction(dependency.start)&&dependency.start()}),logger.debug(arguments.length+" controllers started"),resolve()},reject)})})}}}),define("core/statifier",["lodash"],function(_){"use strict";return function(target){var states={},statesApi={getState:function(name){return!!states[name]},setState:function(name,value){
return void 0===value&&(value=!0),states[name]=!!value,this},clearStates:function(){return states={},this},getStates:function(){return _.reduce(states,function(result,state,key){return state&&result.push(key),result},[])}};return target=target||{},_(statesApi).functions().forEach(function(method){target[method]=function(){var args=[].slice.call(arguments);return statesApi[method].apply(target,args)}}),target}}),define("core/historyRouter",["jquery","lodash","core/router","core/eventifier","core/statifier","core/promise"],function($,_,router,eventifier,statifier,Promise){"use strict";var historyRouter,location=(window.history.location||window.location)+""
;return function(){var pendingPromise;return historyRouter||(historyRouter=eventifier(statifier({redirect:function(url){return this.pushState(url)},forward:function(url){var state=_.isString(url)?{url:url}:url;return window.history.replaceState(state,"",window.location+""),this.dispatch(state,!1)},replace:function(url){return this.dispatch(url,!0)},dispatch:function(state,replace){var self=this;function doDispatch(){return _.isString(state)&&(state={url:state}),state&&state.url?(self.setState("dispatching").trigger("dispatching",state.url),!0===replace&&window.history.replaceState(state,"",state.url),router.dispatch(state.url).then(function(){
return self.trigger("dispatched",state.url).setState("dispatching",!1),state.url})):Promise.reject(new TypeError("The state should contain an URL!"))}return pendingPromise=pendingPromise?pendingPromise.then(doDispatch).catch(doDispatch):doDispatch()},pushState:function(state){return _.isString(state)&&(state={url:state}),window.history.pushState(state,"",state.url),this.dispatch(state)}})),window.history.replaceState({url:location},"",location),$(window).on("popstate",function(){historyRouter.dispatch(window.history.state)}),historyRouter.on("dispatch",function(state){state&&this.pushState(state)}),historyRouter)}}),define("core/logger/console",["lodash"],
function(_){"use strict";var config={level:"info"},mapping={trace:"debug",debug:"debug",info:"info",warn:"warn",error:"error",fatal:"error"};return{setConfig:function(newConfig){config=_.defaults(newConfig||{},config)},log:function(record){var level=record.level;this.checkMinLevel(config.level,level)&&(_.isFunction(window.console[mapping[level]])?record.err?window.console[mapping[level]].call(window.console,record.name,record.msg,record.err,record):window.console[mapping[level]].call(window.console,record.name,record.msg,record):window.console.log("["+level.toUpperCase()+"]",record.name,record.msg,record))}}}),define("util/url",["lodash","context"],function(
_,context){"use strict";var parsers={absolute:/^(?:[a-z]+:)?\/\//i,base64:/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/,query:/(?:^|&)([^&=]*)=?([^&]*)/g,url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/};return{parse:function(url){var matches,keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","queryString","hash"],i=keys.length,parsed=Object.create({toString:function(){return this.source}});if(parsed.base64=parsers.base64.test(url),parsed.base64)parsed.source=url;else{for(matches=parsers.url.exec(url
);i--;)parsed[keys[i]]=matches[i]||"";parsed.query={},parsed.queryString.replace(parsers.query,function($0,$1,$2){$1&&(parsed.query[$1]=$2)})}return parsed},isAbsolute:function(url){return"object"==typeof url&&url.hasOwnProperty("source")?url.source!==url.relative:"string"==typeof url?parsers.absolute.test(url):void 0},isRelative:function(url){var absolute=this.isAbsolute(url);if("boolean"==typeof absolute)return!absolute},isBase64:function(url){return"object"==typeof url&&url.hasOwnProperty("source")?url.base64:"string"==typeof url?parsers.base64.test(url):void 0},encodeAsXmlAttr:function(uri){return/[<>&']+/.test(uri)?encodeURIComponent(uri):uri},
build:function(path,params){var url,hasQueryString,queryString="";return path&&(_.isString(path)&&(url=path),_.isArray(path)&&(url="",_.forEach(path,function(chunk){/\/$/.test(url)&&/^\//.test(chunk)?url+=chunk.substr(1):""===url||/\/$/.test(url)||/^\//.test(chunk)?url+=chunk:url+="/"+chunk})),_.isPlainObject(params)&&(hasQueryString=-1<url.indexOf("?"),queryString=_.reduce(params,function(acc,value,key){return _.isEmpty(acc)&&!hasQueryString||(acc+="&"),"object"!=typeof value||_.isArray(value)?acc+=encodeURIComponent(key)+"="+encodeURIComponent(value):_.forOwn(value,function(parameterValue,parameterName){acc+=encodeURIComponent(key)+"["+encodeURIComponent(
parameterName)+"]="+encodeURIComponent(parameterValue)+"&"}),acc},queryString),_.isEmpty(queryString)||(hasQueryString||(url+="?"),url+=queryString))),url},route:function(action,controller,extension,params,rootUrl){var routeParts=[extension,controller,action];if(_.some(routeParts,function(value){return _.isEmpty(value)||!_.isString(value)}))throw new TypeError("All parts are required to build an URL");return rootUrl=rootUrl||context&&context.root_url,this.build([rootUrl].concat(routeParts),params)}}}),define("core/logger/http",["lodash","jquery","util/url"],function(_,$,url){"use strict";var config,debouncedFlush,defaultConfig={url:url.route("log","Log",
"tao"),level:"warning",delay:500},logQueue=[];function push(message){logQueue.push(message)}function flush(){var messages=logQueue;logQueue=[],function(messages){$.ajax({url:config.url,type:"POST",cache:!1,data:{messages:JSON.stringify(messages)},dataType:"json",global:!1,error:function(){_.forEach(flush,function(message){push(message)})}})}(messages)}return debouncedFlush=_.debounce(flush,defaultConfig.delay),{setConfig:function(newConfig){config=_.defaults(newConfig||{},defaultConfig),_.isArray(config.url)&&(config.url=url.route.apply(url,config.url)),debouncedFlush=_.debounce(flush,config.delay)},log:function(message){this.checkMinLevel(config.level,
message.level)&&(push(message),debouncedFlush())}}}),define("core/middleware",["lodash","core/eventifier","core/promise"],function(_,eventifier,Promise){"use strict";return function(){var middlewares={},middlewareHandler=eventifier({use:function(command){var queue=command&&_.isString(command)?command:"all",list=middlewares[queue]||[];return middlewares[queue]=list,_.forEach(arguments,function(cb){_.isFunction(cb)&&(list.push(cb),middlewareHandler.trigger("add",command,cb))}),this},apply:function(request,response,context){var queue,list,stack=(queue=request.command,list=middlewares[queue]||[],middlewares.all&&(list=list.concat(middlewares.all)),list),
pointer=0;return new Promise(function(resolve,reject){!function next(){var middleware=stack[pointer++];middleware?Promise.resolve(middleware.call(context,request,response)).then(function(res){!1!==res?next():resolve()}).catch(reject):resolve()}()}).then(function(){return!1===response.success?Promise.reject(response):(middlewareHandler.trigger("applied",request,response,context),response)}).catch(function(err){return middlewareHandler.trigger("failed",request,response,context),Promise.reject(err)})}});return middlewareHandler}}),define("json!core/mimetype/categories.json",function(){return{video:{category:"media",mimes:["application/ogg","video/*"],
extensions:["avi","mp4","ogg","mpeg","flv"]},audio:{category:"media",mimes:["audio/*"],extensions:["mp3","wav","aac"]},image:{category:"media",mimes:["image/*","application/x-gzip"],extensions:["png","jpg","jpeg","gif","svg","svgz","ico"]},flash:{category:"media",mimes:["application/x-shockwave-flash"],extensions:["flv","swf"]},geogebra:{category:"media",mimes:["application/vnd.geogebra.file","application/vnd.geogebra.tool"],extensions:["ggb","ggt"]},rdf:{category:"sources",mimes:["application/rdf+xml"],extensions:["rdf"]},xml:{category:"sources",mimes:["application/xml","application/xml-dtd","text/xml"],extensions:["xml","dtd","qti"]},html:{
category:"sources",mimes:["text/html","text/xhtml","application/xhtml+xml","application/qti+xml"],extensions:["html","htm","html5","xhtml"]},font:{category:"sources",mimes:["application/font-woff"],extensions:["woff","eot","ttf"]},js:{category:"sources",mimes:["application/javascript","application/json","text/javascript"],extensions:["js","json"]},css:{category:"sources",mimes:["text/css"],extensions:["css","sass","scss","less"]},shell:{category:"sources",mimes:["application/x-sh"],extensions:["sh"]},mathml:{category:"sources",mimes:["application/mathml+xml"],extensions:["mathml"]},pdf:{category:"document",mimes:["application/pdf"],extensions:["pdf"]},
office:{category:"document",mimes:["application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/vnd.ms-excel","application/msword"],extensions:["doc","odt","docx","xls","xlsx","ods","ppt","pptx","odp"]},text:{category:["document"],mimes:["text/*"],extensions:["txt","csv"]},archive:{category:"archive",mimes:[
"application/zip","application/gzip","application/rar","application/x-7z-compressed","application/x-bzip","application/x-bzip2"],extensions:["zip","gz","bz","bz2","rar","p7z","7z"]},generic:{category:"generic",mimes:["application/octet-stream","application/force-download","application/x-force-download"]}}}),define("json!core/mimetype/extensions.json",function(){return{txt:"text/plain",htm:"text/html",html:"text/html",xhtml:"application/xhtml+xml",php:"text/html",css:"text/css",js:"application/javascript",json:"application/json",xml:"text/xml",rdf:"text/xml",swf:"application/x-shockwave-flash",flv:"video/x-flv",csv:"text/csv",rtx:"text/richtext",
rtf:"text/rtf",png:"image/png",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",ico:"image/vnd.microsoft.icon",tiff:"image/tiff",tif:"image/tiff",svg:"image/svg+xml",svgz:"image/svg+xml",zip:"application/zip",rar:"application/x-rar-compressed",exe:"application/x-msdownload",msi:"application/x-msdownload",cab:"application/vnd.ms-cab-compressed",mp3:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",aac:"audio/aac",qt:"video/quicktime",mov:"video/quicktime",mp4:"video/mp4",webm:"video/webm",ogv:"video/ogg",pdf:"application/pdf",psd:"image/vnd.adobe.photoshop",ai:"application/postscript",eps:"application/postscript",
ps:"application/postscript",doc:"application/msword",rtf:"application/rtf",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet",woff:"application/x-font-woff",eot:"application/vnd.ms-fontobject",ttf:"application/x-font-ttf"}}),define("core/mimetype",["jquery","lodash","json!core/mimetype/categories.json","json!core/mimetype/extensions.json"],function($,_,categories,extensions){"use strict";var mimetypeHelper={getResourceType:function(url,callback){return $.ajax({type:"HEAD",async:!0,url:url,success:function(message,text,jqXHR){
var mime=jqXHR.getResponseHeader("Content-Type");callback&&callback(null,mime)},error:function(jqXHR){var error=jqXHR.status||404;callback&&callback(error)}}),this},getFileType:function(file){var type,ext,mime=file.mime;return mime&&((type=_.findKey(categories,{mimes:[mime]}))||(type=_.findKey(categories,{mimes:[mime.replace(/\/.*$/,"/*")]}))),type||(ext=getFileExtension(file.name))&&(type=_.findKey(categories,{extensions:[ext]})),type},match:function(type,validTypes){var checkType=type.replace(/^["']+|['"]+$/g,""),starType=checkType.replace(/\/.*$/,"/*");return _.contains(validTypes,checkType)||_.contains(validTypes,starType)},getCategory:function(type){if(
categories[type])return categories[type].category},getMimeType:function(file){var ext,type=file.type,category=mimetypeHelper.getFileType({name:file.name,mime:type});return type&&!type.match(/invalid/)&&"generic"!==category?type:(ext=getFileExtension(file.name))&&extensions[ext]?extensions[ext]:type}};function getFileExtension(fileName){var extMatch=fileName.match(/\.([0-9a-z]+)(?:[\?#]|$)/i);if(extMatch&&1<extMatch.length)return extMatch[1]}return mimetypeHelper}),define("core/moduleLoader",["lodash","core/promise"],function(_,Promise){"use strict";return function(requiredModules,validate,specs){var loaded={},modules={},excludes=[],bundles=[],loader={
addList:function(moduleList){return _.forEach(moduleList,this.add,this),this},add:function(def){if(_.isEmpty(def.module)||!_.isString(def.module))throw new TypeError("An AMD module must be defined");if(_.isEmpty(def.category)||!_.isString(def.category))throw new TypeError("Providers must belong to a category");return modules[def.category]=modules[def.category]||[],_.isNumber(def.position)?modules[def.category][def.position]=def.module:"prepend"===def.position||"before"===def.position?modules[def.category].unshift(def.module):modules[def.category].push(def.module),def.bundle&&!_.contains(bundles,def.bundle)&&bundles.push(def.bundle),this},append:function(def
){return this.add(_.merge({position:"append"},def))},prepend:function(def){return this.add(_.merge({position:"prepend"},def))},remove:function(module){return excludes.push(module),this},load:function(loadBundles){var self=this,dependencies=_(modules).values().flatten().uniq().difference(excludes).value(),loadModules=function(amdModules){return _.isArray(amdModules)&&amdModules.length?new Promise(function(resolve,reject){require(amdModules,function(){resolve([].slice.call(arguments))},reject)}):Promise.resolve()};return loadModules(loadBundles?bundles:[]).then(function(){return loadModules(dependencies)}).then(function(loadedModules){return _.forEach(
dependencies,function(dependency,index){var module=loadedModules[index],category=_.findKey(modules,function(val){return _.contains(val,dependency)});if(!validate(module))throw new TypeError("Invalid module");_.isString(category)&&(loaded[category]=loaded[category]||[],loaded[category].push(module))}),self.getModules()})},getModules:function(category){return _.isString(category)?loaded[category]||[]:_(loaded).values().flatten().uniq().value()},getCategories:function(){return _.keys(loaded)}};return validate=_.isFunction(validate)?validate:_.isPlainObject,_.forEach(requiredModules,function(moduleList,category){if(_.isEmpty(category)||!_.isString(category)
)throw new TypeError("Modules must belong to a category");if(!_.isArray(moduleList))throw new TypeError("A list of modules must be an array");if(!_.all(moduleList,validate))throw new TypeError("The list does not contain valid modules");loaded[category]?loaded[category]=loaded[category].concat(moduleList):loaded[category]=moduleList}),specs&&_(specs).functions().forEach(function(method){loader[method]=function(){return specs[method].apply(loader,[].slice.call(arguments))}}),loader}}),define("core/mouseEvent",[],function(){"use strict";var dispatchEvent,allowedEvents=["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout"
,"mouseover","mouseup","show"];return dispatchEvent=document.dispatchEvent?function(element,eventName,event){return!!element&&(element.dispatchEvent(event),!0)}:document.fireEvent?function(element,eventName,event){return!!element&&(element.fireEvent("on"+eventName,event),!0)}:function(){return!1},function(element,eventName,eventOptions){var event;return-1!==allowedEvents.indexOf(eventName)&&(event=function(eventName,eventOptions){var event;try{event=new MouseEvent(eventName,eventOptions)}catch(e){(event=document.createEvent("MouseEvents")).initMouseEvent(eventName,eventOptions.bubbles||!1,eventOptions.cancelable||!1,eventOptions.view||null,
eventOptions.detail||0,eventOptions.screenX||0,eventOptions.screenY||0,eventOptions.clientX||0,eventOptions.clientY||0,eventOptions.ctrlKey||!1,eventOptions.altKey||!1,eventOptions.shiftKey||!1,eventOptions.metaKey||!1,eventOptions.button||0,eventOptions.relatedTarget||null)}return event}(eventName,eventOptions),dispatchEvent(element,eventName,event))}}),define("core/plugin",["lodash","core/delegator","core/promise"],function(_,delegator,Promise){"use strict";return function(provider,defaults){var pluginName;if(!_.isPlainObject(provider)||!_.isString(provider.name)||_.isEmpty(provider.name)||!_.isFunction(provider.init))throw new TypeError(
"A plugin should be defined at least by a name property and an init method");return pluginName=provider.name,defaults=defaults||{},function(host,areaBroker,config){var plugin,delegate,states={},pluginContent={};if(!_.isObject(host)||!_.isFunction(host.on)||!_.isFunction(host.trigger))throw new TypeError("A plugin host should be a valid eventified object");return config=_.defaults(config||{},defaults),delegate=delegator(plugin={install:function(){var self=this;return delegate("install").then(function(){self.trigger("install")})},init:function(content){var self=this;return states={},content&&(pluginContent=content),delegate("init",content).then(function(){
self.setState("init",!0).trigger("init")})},render:function(){var self=this;return delegate("render").then(function(){self.setState("ready",!0).trigger("render").trigger("ready")})},finish:function(){var self=this;return delegate("finish").then(function(){self.setState("finish",!0).trigger("finish")})},destroy:function(){var self=this;return delegate("destroy").then(function(){config={},states={},self.setState("init",!1),self.trigger("destroy")})},trigger:function(name){var args=[].slice.call(arguments,1);return host.trigger.apply(host,["plugin-"+name+"."+pluginName,plugin].concat(args)),this},getHost:function(){return host},getAreaBroker:function(){
return areaBroker},getConfig:function(){return config},setConfig:function(name,value){return _.isPlainObject(name)?config=_.defaults(name,config):config[name]=value,this},getState:function(name){return!!states[name]},setState:function(name,active){if(!_.isString(name)||_.isEmpty(name))throw new TypeError("The state must have a name");return states[name]=!!active,this},getContent:function(){return pluginContent},setContent:function(content){return pluginContent=content,this},getName:function(){return pluginName},show:function(){var self=this;return delegate("show").then(function(){self.setState("visible",!0).trigger("show")})},hide:function(){var self=this
;return delegate("hide").then(function(){self.setState("visible",!1).trigger("hide")})},enable:function(){var self=this;return delegate("enable").then(function(){self.setState("enabled",!0).trigger("enable")})},disable:function(){var self=this;return delegate("disable").then(function(){self.setState("enabled",!1).trigger("disable")})}},provider,{eventifier:!1,wrapper:function(response){return Promise.resolve(response)}}),_.isString(defaults.hostName)&&!_.isEmpty(defaults.hostName)&&(plugin["get"+defaults.hostName.charAt(0).toUpperCase()+defaults.hostName.slice(1)]=plugin.getHost),plugin}}}),define("core/pluginifier",["jquery","lodash"],function($,_){
"use strict";var basePlugin={options:function(dataNs,ns,options){return this.each(function(){var $elt=$(this),currentOptions=$elt.data(dataNs);currentOptions&&$elt.data(dataNs,_.merge(currentOptions,options))})},disable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.addClass(options.disableClass||"disabled").trigger("disable."+ns)})},enable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.removeClass(options.disableClass||"disabled").trigger("enable."+ns)})}};return{register:function(pluginName,plugin,config){var ns=(config=config||{}
).ns||pluginName.toLowerCase(),dataNs=config.dataNs||"ui."+ns,expose=config.expose||[];return _.isFunction($.fn[pluginName])?$.error("A plugin named "+pluginName+" is already registered"):_.isPlainObject(plugin)&&_.isFunction(plugin.init)?(_.assign(plugin,_.transform(basePlugin,function(result,prop,key){_.isFunction(prop)&&(result[key]=_.partial(basePlugin[key],dataNs,ns))})),_.forEach(expose,function(toExposeName){var privateMethod=toExposeName,publicMethod=toExposeName;/^_/.test(expose)?publicMethod=publicMethod.replace(/^_/,""):privateMethod="_"+privateMethod,_.isFunction(plugin[privateMethod])&&!_.isFunction(plugin[publicMethod])&&(
plugin[publicMethod]=function(){var returnValue,args=Array.prototype.slice.call(arguments,0);return this.each(function(){returnValue=plugin[privateMethod].apply(plugin,[$(this)].concat(args))}),returnValue||this})}),void($.fn[pluginName]=function(method){if(plugin[method]){if(!/^_/.test(method))return plugin[method].apply(this,Array.prototype.slice.call(arguments,1));$.error("Trying to call a private method `"+method+"`")}else if("object"==typeof method||!method)return plugin.init.apply(this,arguments);$.error("Method "+method+" does not exist on plugin")})):$.error("The object to register as a jQuery plugin must be a plain object with an `init` method.")}}}
),define("core/pluginLoader",["lodash","core/moduleLoader"],function(_,moduleLoaderFactory){"use strict";return function(requiredPlugins){return moduleLoaderFactory(requiredPlugins,_.isFunction,{getPlugins:function(category){return this.getModules(category)}})}}),define("core/providerLoader",["lodash","core/moduleLoader"],function(_,moduleLoaderFactory){"use strict";function validateProvider(provider){return _.isPlainObject(provider)&&_.isFunction(provider.init)&&_.isString(provider.name)&&!_.isEmpty(provider.name)}return function(requiredProviders){return moduleLoaderFactory(requiredProviders,validateProvider,{getProviders:function(category){
return this.getModules(category)}})}}),define("core/requireIfExists",["core/promise"],function(Promise){"use strict";return function(uri){return new Promise(function(resolve){require([uri],resolve,function(err){var failedId=err.requireModules&&err.requireModules[0];if(failedId!==uri)throw err;requirejs.undef(failedId),define(failedId,function(){return null}),require([failedId],resolve)})})}}),define("core/taskQueue",["lodash","core/promise","core/eventifier","core/dataProvider/request","core/polling"],function(_,Promise,eventifier,request,polling){"use strict";var _defaults={url:{}};return function(config){config=_.defaults(config||{},_defaults);var poll,
pollingIntervals=[{iteration:10,interval:1e3},{iteration:10,interval:1e4},{iteration:10,interval:3e4},{iteration:0,interval:6e4}],api=eventifier({getStatus:function(taskId){var status;if(!config.url||!config.url.status)throw new TypeError("config.url.status is not configured while getStatus() is being called");return(status=request(config.url.status,{taskId:taskId}).then(function(taskData){return taskData&&taskData.status?Promise.resolve(taskData):Promise.reject(new Error("failed to get task data"))})).catch(function(err){api.trigger("error",err)}),status},pollStatus:function(taskId){var loop=0;if(!config.url||!config.url.status)throw new TypeError(
"config.url.status is not configured while getStatus() is being called");var _updateInterval=function(pollingInstance){var pollingInterval;loop?loop--:(pollingInterval=pollingIntervals.shift())&&pollingInterval.iteration&&pollingInterval.interval&&(loop=pollingInterval.iteration,pollingInstance.setInterval(pollingInterval.interval))};return api.pollStop(),poll=polling({action:function(){var done=this.async();api.getStatus(taskId).then(function(taskData){"finished"===taskData.status?(api.trigger("finished",taskData),poll.stop()):(api.trigger("running",taskData),_updateInterval(poll),done.resolve())}).catch(function(){done.reject()})}}),_updateInterval(poll),
poll.start(),api.trigger("pollStart"),api},pollStop:function(){return poll&&(poll.stop(),api.trigger("pollStop")),api},remove:function(taskId){var status;if(!config.url||!config.url.remove)throw new TypeError("config.url.remove is not configured while remove is being called");return(status=request(config.url.remove,{taskId:taskId}).then(function(taskData){return taskData&&"archived"===taskData.status?Promise.resolve(taskData):Promise.reject(new Error("removed task status should be archived"))})).catch(function(res){api.trigger("error",res)}),status}});return api}}),define("tpl!ui/component/tpl/component",["handlebars"],function(hb){return hb.template(
function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="component"></div>'})}),define("ui/component",["jquery","lodash","core/eventifier","tpl!ui/component/tpl/component"],function($,_,eventifier,defaultTpl){"use strict";var _slice=[].slice;function delegatedResize(){var width=this.config.width,height=this.config.height,$container=this.getContainer(),$element=this.getElement();$container&&("auto"===width&&(width=$container.width()),"auto"===height&&(height=$container.height())),$element&&(_.isNumber(width)&&$element.css({width:width+"px"}),_.isNumber(
height)&&$element.css({height:height+"px"})),this._width=width,this._height=height}return function(specs,defaults){var $container,componentTpl=defaultTpl,componentState={},componentApi={init:function(config){return this.config=_(config||{}).omit(function(value){return null==value}).defaults(defaults||{}).value(),componentState={},this.trigger("init"),this.config.renderTo&&($container=$(this.config.renderTo),this.render()),this},destroy:function(){return this.trigger("destroy"),this.$component&&this.$component.remove(),this.$component=null,componentState={},this},render:function(container){return container&&($container=$(container)),this.$component=$(
componentTpl(this.config)),$container&&(this.config.replace&&$container.empty(),$container.append(this.$component)),this.setState("rendered",!0),delegatedResize.call(this),this.trigger("render",this.$component),this},setSize:function(width,height){return this.config.width=width,this.config.height=height,this.is("rendered")&&delegatedResize.call(this),this.trigger("setsize",width,height),this},getSize:function(){if(this.is("rendered"))return{width:this._width||0,height:this._height||0}},getOuterSize:function(includeMargin){var $component;if(this.is("rendered"))return $component=this.getElement(),includeMargin=includeMargin||!1,{width:Math.round(
$component.outerWidth(includeMargin)),height:Math.round($component.outerHeight(includeMargin))}},show:function(){return this.trigger("show",this),this.setState("hidden",!1)},hide:function(){return this.trigger("hide",this),this.setState("hidden",!0)},enable:function(){return this.trigger("enable",this),this.setState("disabled",!1)},disable:function(){return this.trigger("disable",this),this.setState("disabled",!0)},is:function(state){return!!componentState[state]},setState:function(state,flag){return flag=!!flag,componentState[state]=flag,this.$component&&this.$component.toggleClass(state,flag),this.trigger("state",state,flag,this),this},
getContainer:function(){return $container},getElement:function(){return this.$component},getTemplate:function(){return componentTpl},setTemplate:function(template){var tpl=template||defaultTpl;return componentTpl=tpl,_.isFunction(componentTpl)||(componentTpl=function(){return tpl}),this.trigger("template",componentTpl),this},getConfig:function(){return this.config||defaults||{}}};return specs&&_(specs).functions().forEach(function(method){componentApi[method]=function(){return specs[method].apply(componentApi,_slice.call(arguments))}}),eventifier(componentApi)}}),define("util/regexEscape",[],function(){"use strict";return function(s){return s.replace(
/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}),define("util/wrapLongWords",["util/regexEscape"],function(regexEscape){"use strict";var getCutTerm=function(longWord,chunkExp){for(var cutTerms=longWord.match(chunkExp),i=cutTerms.length,oldFirst="",newFirst="",offenders=[".",":",";"];i--;)newFirst=cutTerms[i].charAt(0),-1<offenders.indexOf(newFirst)&&(cutTerms[i]=cutTerms[i].substr(1)),-1<offenders.indexOf(oldFirst)&&(cutTerms[i]=cutTerms[i]+oldFirst),oldFirst=newFirst;return cutTerms.join(" ")};return function(str,threshold){str=str.toString().replace(/([\w])</g,"$1 <");for(var cut,chunkExp=new RegExp(".{1,"+threshold+"}","g"),longWords=str.match(new RegExp(
"[\\S]{"+threshold+",}","g"))||[],i=longWords.length;i--;)cut=getCutTerm(longWords[i],chunkExp),str=str.replace(new RegExp(regexEscape(longWords[i]),"g"),cut);return str}}),define("util/encode",[],function(){"use strict";var _reQuot=/"/g,_reApos=/'/g,encodeHTML=function(html){return document.createElement("a").appendChild(document.createTextNode(html)).parentNode.innerHTML};return{html:encodeHTML,attribute:function(html){return encodeHTML(html).replace(_reQuot,"&quot;").replace(_reApos,"&apos;")},encodeBase64:function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode("0x"+p1)}))},
decodeBase64:function(str){return decodeURIComponent(Array.prototype.map.call(atob(str),function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}}),define("tpl!ui/feedback/feedback",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="',buffer+=escapeExpression(stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(
helper=depth0&&depth0.id)?helper.call(depth0,{hash:{},data:data}):helper)+'" class="feedback feedback-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+" ",((stack1=helpers.if.call(depth0,depth0&&depth0.popup,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"popup"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <span class="icon-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level
)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    <div>\n        ',options={hash:{},data:data},((stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify)?helper.call(depth0,depth0&&depth0.msg,options):helperMissing.call(depth0,"dompurify",depth0&&depth0.msg,options))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <span title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Close message",options):helperMissing.call(depth0,"__","Close message",options)))+'" class="icon-close" data-close=":parent .feedback"></span>\n</div>'})}),define("ui/feedback",["jquery","lodash",
"core/format","ui/component","util/wrapLongWords","util/encode","tpl!ui/feedback/feedback"],function($,_,format,component,wrapLongWords,encode,tpl){"use strict";var currents=[],levels=["info","success","warning","danger","error"],defaultOptions={timeout:{info:2e3,success:2e3,warning:4e3,danger:4e3,error:8e3},wrapLongWordsAfter:40,encodeHtml:!0,popup:!0};return function($container,config){if($container&&$container.length||($container=$("#feedback-box")),!$container.length)throw new TypeError("The feedback needs to belong to an existing container");return component({message:function(level,msg,params,options){var displayedMessage=msg;return level&&_.contains(
levels,level)||(level="info"),_.isPlainObject(params)&&(options=params,params=[]),this.config=_.defaults(options||{},this.config),this.config.level=level,this.config.encodeHtml&&(displayedMessage=encode.html(displayedMessage)),this.config.wrapLongWordsAfter&&(displayedMessage=wrapLongWords(displayedMessage,this.config.wrapLongWordsAfter)),_.isArray(params)&&params.length&&(displayedMessage=format.apply(format,[displayedMessage].concat(params))),this.config.msg=displayedMessage,this},info:function(msg,params,options){return this.message("info",msg,params,options).open()},success:function(msg,params,options){return this.message("success",msg,params,options
).open()},warning:function(msg,params,options){return this.message("warning",msg,params,options).open()},danger:function(msg,params,options){return this.message("danger",msg,params,options).open()},error:function(msg,params,options){return this.message("error",msg,params,options).open()},open:function(){return _(currents).reject(this).invoke("close"),this.display()},close:function(){this.is("rendered")&&this.destroy()},display:function(){return this.is("rendered")?this.show():this.render($container),this}},defaultOptions).setTemplate(tpl).on("init",function(){this.config.id="feedback-"+(currents.length+1),currents.push(this),$container.trigger(
"create.feedback")}).on("render",function(){var self=this,$component=this.getElement(),$closer=$(".icon-close",$component),timeout=_.isPlainObject(this.config.timeout)?this.config.timeout[this.config.level]:this.config.timeout;$closer.off("click").on("click",function(e){e.preventDefault(),self.destroy()}),_.isNumber(timeout)&&0<timeout&&_.delay(function(){self.close()},timeout),$container.trigger("display.feedback")}).on("destroy",function(){$container.trigger("close.feedback"),_.remove(currents,this)}).init(config)}}),define("core/taskQueue/taskQueueModel",["jquery","lodash","core/promise","core/eventifier","core/polling","core/dataProvider/request",
"ui/feedback","jquery.fileDownload"],function($,_,Promise,eventifier,polling,request,feedback){"use strict";var _defaults={url:{get:"",archive:"",all:"",download:""},pollSingleIntervals:[{iteration:4,interval:1e3}],pollAllIntervals:[{iteration:10,interval:5e3},{iteration:0,interval:1e4}]};function hasSameState(task1,task2){return task1.status===task2.status||("created"===task1.status||"in_progress"===task1.status)&&("created"===task2.status||"in_progress"===task2.status)}return function(config){var model,_cache,singlePollings={};return config=_.defaults(config||{},_defaults),model=eventifier({setEndpoints:function(urls){return _.assign(config.url,urls||{}),
this},get:function(taskId){var status;if(!config.url||!config.url.get)throw new TypeError("config.url.get is not configured while get() is being called");return(status=request(config.url.get,{taskId:taskId},"GET",{},!0).then(function(taskData){return taskData&&taskData.status?(_cache?_cache[taskData.id]?hasSameState(_cache[taskData.id],taskData)||model.trigger("singletaskstatuschange",taskData):model.trigger("singletaskadded",taskData):_cache={},_cache[taskData.id]=taskData):Promise.reject(new Error("failed to get task data"))})).catch(function(err){model.trigger("error",err)}),status},getCached:function(taskId){return _cache&&_cache[taskId]?Promise.resolve(
_cache[taskId]):this.get(taskId)},getAll:function(){var status;if(!config.url||!config.url.all)throw new TypeError("config.url.all is not configured while getAll() is being called");return(status=request(config.url.all,{limit:100},"GET",{},!0).then(function(taskData){var newCache={};return taskData?(_cache?(_.forEach(taskData,function(task){var id=task.id;_cache[id]?hasSameState(_cache[id],task)||model.trigger("multitaskstatuschange",task):model.trigger("multitaskadded",task),newCache[id]=task}),_.forEach(_.difference(_.keys(_cache),_.keys(newCache)),function(id){model.trigger("taskremoved",_cache[id])})):_.forEach(taskData,function(task){
newCache[task.id]=task}),_cache=newCache,taskData):Promise.reject(new Error("failed to get all task data"))})).catch(function(err){model.trigger("error",err)}),status},archive:function(taskId){var status;if(!config.url||!config.url.archive)throw new TypeError("config.url.archive is not configured while archive() is being called");return(status=request(config.url.archive,{taskId:taskId},"GET",{},!0)).catch(function(res){model.trigger("error",res)}),status},pollAll:function(immediate){var self=this,loop=0,pollingIntervals=function(){if(config.pollAllIntervals&&_.isArray(config.pollAllIntervals))return _.cloneDeep(config.pollAllIntervals)}(),
_updateInterval=function(pollingInstance){var pollingInterval;loop?loop--:(pollingInterval=pollingIntervals.shift())&&void 0!==pollingInterval.iteration&&pollingInterval.interval&&(loop=pollingInterval.iteration,pollingInstance.setInterval(pollingInterval.interval))};if(!config.url||!config.url.all)throw new TypeError("config.url.all is not configured while pollAll() is being called");return this.globalPolling||(this.globalPolling=polling({action:function(){var statusArr,done=this.async();model.getAll().then(function(taskDataArray){if(model.trigger("pollAll",taskDataArray),-1===(statusArr=_.map(taskDataArray,"status")).indexOf("in_progress"
)&&-1===statusArr.indexOf("created"))return done.reject();_updateInterval(self.globalPolling),done.resolve()}).catch(function(){done.reject()})}}),_updateInterval(this.globalPolling)),this.globalPolling.start(),this.trigger("pollAllStart"),immediate&&this.globalPolling.next(),model},pollAllStop:function(){return this.globalPolling&&(this.globalPolling.stop(),this.trigger("pollAllStop")),this},pollSingle:function(taskId){var self=this,loop=0,pollingIntervals=function(){if(config.pollSingleIntervals&&_.isArray(config.pollSingleIntervals))return _.cloneDeep(config.pollSingleIntervals)}(),_updateInterval=function(pollingInstance){var pollingInterval
;return loop?(loop--,!0):!!((pollingInterval=pollingIntervals.shift())&&pollingInterval.iteration&&pollingInterval.interval)&&(loop=pollingInterval.iteration,pollingInstance.setInterval(pollingInterval.interval),!0)};if(!config.url||!config.url.get)throw new TypeError("config.url.get is not configured while pollSingle() is being called");return singlePollings[taskId]&&singlePollings[taskId].stop(),new Promise(function(resolve){var poll=polling({action:function(){var done=this.async();self.get(taskId).then(function(taskData){"completed"===taskData.status||"failed"===taskData.status?(poll.stop(),self.trigger("pollSingleFinished",taskId,taskData),resolve({
finished:!0,task:taskData})):_updateInterval(poll)?(self.trigger("pollSingle",taskId,taskData),done.resolve()):(self.trigger("pollSingleFinished",taskId,taskData),resolve({finished:!1,task:taskData}))}).catch(function(){done.reject()})}});_updateInterval(poll),singlePollings[taskId]=poll.start(),self.trigger("pollSingleStart",taskId)})},pollSingleStop:function(taskId){return singlePollings&&singlePollings[taskId]&&(singlePollings[taskId].stop(),this.trigger("pollSingleStop",taskId)),this},create:function(url,data){var taskCreate,self=this;return(taskCreate=request(url,data,"POST",{},!0).then(function(creationResult){
return creationResult&&creationResult.task&&creationResult.task.id?(self.trigger("created",creationResult),self.pollSingle(creationResult.task.id).then(function(result){return creationResult.extra&&(result.extra=creationResult.extra),result.finished?self.trigger("fastFinished",result):self.trigger("enqueued",result),result})):Promise.reject(new Error("failed to get task data"))})).catch(function(err){model.trigger("error",err)}),taskCreate},download:function(taskId){if(!config.url||!config.url.download)throw new TypeError("config.url.download is not configured while download() is being called");return new Promise(function(resolve,reject){$.fileDownload(
config.url.download,{httpMethod:"POST",data:{taskId:taskId},successCallback:function(result){resolve(result)},failCallback:function(err){reject(err)}})})},redirect:function(taskId){return this.getCached(taskId).then(function(taskData){var redirectUrl=(taskData||{}).redirectUrl;if(!redirectUrl)throw new TypeError("config.redirectUrl is not configured while redirect() is being called");if(0!==redirectUrl.indexOf("http"))throw new TypeError("redirectUrl does not look like a proper url: "+redirectUrl);return request(taskData.redirectUrl)}).then(function(response){_.isEmpty(response)||(window.location.href=response)}).catch(function(err){
throw err&&202===err.code&&err.response&&err.response.errorMessage&&feedback().error(err.response.errorMessage),err})}})}}),define("core/taskQueue/taskQueue",["util/url","core/taskQueue/taskQueueModel"],function(urlHelper,taskQueueModelFactory){"use strict";return taskQueueModelFactory({url:{get:urlHelper.route("get","TaskQueueWebApi","tao"),archive:urlHelper.route("archive","TaskQueueWebApi","tao"),all:urlHelper.route("getAll","TaskQueueWebApi","tao"),download:urlHelper.route("download","TaskQueueWebApi","tao")},pollSingleIntervals:[{iteration:3,interval:1e3}],pollAllIntervals:[{iteration:1,interval:8e3},{iteration:0,interval:5e3}]})}),define("core/timer",[
],function(){"use strict";return function(config){var initConfig=config||{},begin=now(),last=begin,duration=initConfig.startDuration||0,state={},timer={start:function(startDuration){return begin=now(),last=begin,duration=startDuration||0,state.running=!0,state.started=!0,this},tick:function(){var elapsed,timestamp=now();return state.running&&(elapsed=timestamp-last,last=timestamp),elapsed},pause:function(){return state.running&&(duration+=now()-begin,state.running=!1),this},resume:function(){return state.running||(begin=now(),last=begin,state.started=!0,state.running=!0),this},stop:function(){return state.running&&(duration+=now()-begin),state.running=!1,
state.started=!1,this},getDuration:function(){return state.running?duration+(now()-begin):duration},is:function(stateName){return!!state[stateName]},add:function(time){return time=parseFloat(time),duration+=time,last-=time,this},sub:function(time){return time=parseFloat(time),duration-=time,last+=time,this}};function now(){return window.performance.now()}return!1===initConfig.autoStart||timer.start(initConfig.startDuration),timer}}),define("core/validator/Report",[],function(){var Report=function(type,data){this.type=type,this.data=data};return Report.prototype.isError=function(){return"failure"===this.type||"error"===this.type},Report}),define(
"core/validator/validators",["jquery","lodash","i18n"],function($,_,__){"use strict";var validators={numeric:{name:"numeric",message:__("must be numeric"),options:{},validate:function(value,callback){var parsedValue=parseFloat(value),r=parsedValue.toString()===value.toString()&&_.isNumber(parsedValue)&&!_.isNaN(parsedValue);"function"==typeof callback&&callback.call(null,r)}},notEmpty:{name:"notEmpty",message:__("this is required"),options:{},validate:function(value,callback){var r;r=!!_.isNumber(value)||!_.isEmpty(value),"function"==typeof callback&&callback.call(null,r)}},pattern:{name:"pattern",message:__("does not match"),options:{pattern:"",
modifier:"igm"},validate:function(value,callback,options){var regex=new RegExp(options.pattern,options.modifier||""),r=null!==value.match(regex);return"function"==typeof callback&&callback.call(null,r),r}},length:{name:"length",message:__("required length"),options:{min:0,max:0},validate:function(value,callback,options){var r=!1;value.length>=options.min&&(r=!options.max||value.length<=options.max),"function"==typeof callback&&callback.call(null,r)}},fileExists:{name:"fileExists",message:__("no file not found in this location"),options:{baseUrl:""},validate:function(value,callback,options){value?new RegExp(
"^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])?)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(value)||/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/.test(value)?callback(!0):$.ajax({type:"HEAD",url:options.baseUrl+encodeURIComponent(value),success:function(){callback(!0)},error:function(jqXHR,textStatus,errorThrown){callback(!1)}}):callback(!1)}},validRegex:{name:"validRegex",message:__("invalid regular expression"),options:{},validate:function(value,callback){if("function"==typeof callback){var valid=!1;if(""!==value)try{new RegExp("^"+value+"$"),valid=!0}catch(e){valid=!1
}else valid=!0;callback(valid)}}}};return{validators:validators,register:function(name,validator,force){if(_.isPlainObject(name)&&name.name&&!validator&&(name=(validator=name).name),!_.isString(name)||_.isEmpty(name))throw new Error("Please name your validator");if(!_.isObject(validator)||!_.isString(validator.message)||!_.isFunction(validator.validate))throw new Error("A validator must be an object with a message and a validate method, but given : "+JSON.stringify(validator));validators[name]&&!force||(validators[name]=validator)}}}),define("core/validator/Validator",["lodash","async","core/validator/Report","core/validator/validators"],function(_,async,
Report,validators){"use strict";var _defaultOptions={lazy:!1},Validator=function(rules,options){this.options=_.merge(_.cloneDeep(_defaultOptions),options),this.rules=[],this.addRules(rules)};return Validator.getDefaultOptions=function(){return _.clone(_defaultOptions)},Validator.prototype.validate=function(value,arg1,arg2){var callback,callstack=[],options=_.cloneDeep(this.options);return _.isFunction(arg1)?callback=arg1:_.isObject(arg1)&&(_.merge(options,arg1),_.isFunction(arg2)&&(callback=arg2)),_.each(this.rules,function(rule){var message,validatorOptions={};callstack.push(function(cb){!function(value,rule,callback,options){options=_.merge(_.cloneDeep(
rule.options),options),rule.validate(value,callback,options)}(value,rule,function(success){if(success)cb(null,new Report("success",{validator:rule.name}));else{message=rule.options.message||rule.message;var report=new Report("failure",{validator:rule.name,message:message});options.lazy?cb(new Error("lazy mode"),report):cb(null,report)}},validatorOptions)})}),async.series(callstack,function(err,results){_.isFunction(callback)&&callback(results)}),this},Validator.prototype.addRule=function(rule){var _rules=validators.validators;return _.isString(rule)&&_rules[rule]?this.rules.push(_rules[rule]):(rule=function(rule){var ret=null,_rules=validators.validators
;return _.isString(rule)&&_rules[rule]?ret=_rules[rule]:_.isObject(rule)&&rule.name&&(_rules[rule.name]?ret=_.merge(_.cloneDeep(_rules[rule.name]),rule):rule.message&&_.isFunction(rule.validate)&&(ret=rule)),ret}(rule))&&this.rules.push(rule),this},Validator.prototype.addRules=function(rules){var _this=this;return _.each(rules,function(rule){_this.addRule(rule)}),this},Validator}),define("tpl!ui/actionbar/tpl/main",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",
escapeExpression=this.escapeExpression,self=this;function program6(depth0,data){return" conditional hidden"}function program8(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program10(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'"></span>'}return buffer+='<aside class="action-bar ',((stack1=helpers.if.call(depth0,depth0&&depth0.vertical,{hash:{},inverse:self.program(3,function(depth0,data){return"horizontal-action-bar"},data),fn:self.program(1,function(depth0,data){return"vertical-action-bar"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' clearfix">\n    ',((stack1=helpers.each.call(depth0,depth0&&depth0.buttons,{hash:{},inverse:self.noop,fn:self.program(5,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-info small ',((stack1=helpers.if.call(depth0,depth0&&depth0.conditional,{hash:{},
inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n        ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n    </button>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</aside>"})}),define("ui/actionbar",["jquery","lodash","i18n","ui/component","tpl!ui/actionbar/tpl/main"],function($,_,__,component,mainTpl){"use strict";var actionbar={getButton:function(id){if(this.is("rendered"))return this.buttons[id]},getButtonElement:function(id){if(this.is("rendered"))return this.controls.$buttons[id]},showButton:function(id){
var $btn=this.getButtonElement(id);return $btn&&$btn.removeClass("hidden"),this},hideButton:function(id){var $btn=this.getButtonElement(id);return $btn&&$btn.addClass("hidden"),this},toggleButton:function(id,condition){var $btn=this.getButtonElement(id);return $btn&&(void 0!==condition&&(condition=!condition),$btn.toggleClass("hidden",condition)),this},showConditionals:function(){return this.is("rendered")&&this.controls.$conditional.removeClass("hidden"),this},hideConditionals:function(){return this.is("rendered")&&this.controls.$conditional.addClass("hidden"),this},toggleConditionals:function(condition){return this.is("rendered")&&(void 0!==condition&&(
condition=!condition),this.controls.$conditional.toggleClass("hidden",condition)),this},showAll:function(){return this.is("rendered")&&this.controls.$all.removeClass("hidden"),this},hideAll:function(){return this.is("rendered")&&this.controls.$all.addClass("hidden"),this},toggleAll:function(condition){return this.is("rendered")&&(void 0!==condition&&(condition=!condition),this.controls.$all.toggleClass("hidden",condition)),this}};return function(config){return component(actionbar).setTemplate(mainTpl).on("destroy",function(){this.buttons=null,this.controls=null}).on("render",function(){var self=this,$component=this.getElement();this.setState("horizontal",
$component.hasClass("horizontal-action-bar")),this.setState("vertical",$component.hasClass("vertical-action-bar")),this.buttons={},this.controls={$buttons:{},$conditional:$component.find("button.conditional"),$all:$component.find("button")},_.forEach(this.config.buttons,function(button){self.buttons[button.id]=button,self.controls.$buttons[button.id]=$component.find('[data-control="'+button.id+'"]')}),this.$component.on("click","button",function(e){var buttonId=$(this).closest("button").data("control"),button=self.getButton(buttonId);e.preventDefault(),button&&button.action&&button.action.call(self,buttonId,button),self.trigger("button",buttonId,button)})}
).init(config)}}),define("ui/adder",["jquery","lodash","handlebars","core/pluginifier","core/dataattrhandler"],function($,_,Handlebars,Pluginifier,DataAttrHandler){"use strict";var ns="adder",dataNs="ui."+ns,positions=["append","prepend"],defaults={bindEvent:"click",disableClass:"disabled",position:"append",templateData:function(dataCallback){dataCallback({})}},Adder={init:function(options){if("function"==typeof(options=_.defaults(options||{},defaults)).content)options._template=options.content;else{var $content=options.content;"SCRIPT"===$content.prop("tagName")&&"text/template"===$content.attr("type")?options._template=Handlebars.compile($content.html()
):options._html=$content.html()}return _.contains(positions,options.position)?this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),Adder._add($elt)}),$elt.trigger("create."+ns))}):$.error("Unsupported position option")},_add:function($elt){var options=$elt.data(dataNs),$target=options.target,position=options.position+"To",applyTemplate=function($content,position,$target,data){$content[position]($target),$target.trigger("add",[$content,data]),$elt.trigger("add."+ns,[$target,$content,data])};"function"==typeof options._template?options.templateData(
function(data){applyTemplate($($.parseHTML(options._template(data))),position,$target,data)}):applyTemplate($($.parseHTML(options._html)),position,$target)},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Adder,{expose:["add"]}),function($container){new DataAttrHandler("add",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$elt.adder({target:$target,bindEvent:!1,content:$($elt.attr("data-content"))})}).trigger(function($elt){$elt.adder("add")})}}
),define("lib/unmatrix/unmatrix",[],function(){"use strict";function parse(str){if("none"===str)return{translateX:0,translateY:0,rotate:0,skew:0,scaleX:1,scaleY:1};var m=function(str){var m=[];if(window.WebKitCSSMatrix)return[(m=new window.WebKitCSSMatrix(str)).a,m.b,m.c,m.d,m.e,m.f];var n,rdigit=/[\d\.\-]+/g;for(;n=rdigit.exec(str);)m.push(+n);return m}(str),A=m[0],B=m[1],C=m[2],D=m[3];if(A*D==B*C)throw new Error("transform#unmatrix: matrix is singular");var scaleX=Math.sqrt(A*A+B*B),skew=(A/=scaleX)*C+(B/=scaleX)*D;C-=A*skew,D-=B*skew;var scaleY=Math.sqrt(C*C+D*D);return skew/=scaleY,A*(D/=scaleY)<B*(C/=scaleY)&&(A=-A,B=-B,skew=-skew,scaleX=-scaleX),{
translateX:m[4],translateY:m[5],rotate:rtod(Math.atan2(B,A)),skew:rtod(Math.atan(skew)),scaleX:round(scaleX),scaleY:round(scaleY)}}function rtod(radians){return round(180*radians/Math.PI)}function round(n){return Math.round(100*n)/100}return function(input){return parse("string"!=typeof input?(el=input,(_style=window.getComputedStyle(el)).getPropertyValue("transform")||_style.getPropertyValue("-webkit-transform")||_style.getPropertyValue("-ms-transform")):input);var el,_style}}),define("ui/transformer",["jquery","lodash","lib/unmatrix/unmatrix"],function($,_,_unmatrix){"use strict";var ns="transformer",vendorPrefixes=["webkit","ms"],prefix=function(){
var i=vendorPrefixes.length,style=window.getComputedStyle(document.body,null);if(style.getPropertyValue("transform"))return"";for(;i--;)if(void 0!==style[vendorPrefixes[i]+"Transform"])return"-"+vendorPrefixes[i]+"-"}(),_getTransformation=function(elem){var _style=window.getComputedStyle(elem,null),matrix=_style.getPropertyValue("transform")||_style.getPropertyValue("-webkit-transform")||_style.getPropertyValue("-ms-transform")||"none";return{matrix:matrix,obj:_unmatrix(matrix)}};function _transform($elem,transforms){var oriTrans,elem,_style,cssObj={},defaults=_unmatrix("none"),classNames=[];transforms=function(transforms){for(var xy=["translate","scale"],
i=xy.length;i--;)transforms[xy[i]]&&(_.isArray(transforms[xy[i]])&&2===transforms[xy[i]].length?(transforms[xy[i]+"X"]=transforms[xy[i]][0],transforms[xy[i]+"Y"]=transforms[xy[i]][1]):(transforms[xy[i]+"X"]=transforms[xy[i]],transforms[xy[i]+"Y"]=transforms[xy[i]]),delete transforms[xy[i]]);return transforms}(transforms),$elem.data("oriTrans")||((oriTrans=_getTransformation($elem[0])).origin=(elem=$elem[0],(_style=window.getComputedStyle(elem,null)).getPropertyValue("transform-origin")||_style.getPropertyValue("-webkit-transform-origin")||_style.getPropertyValue("-ms-transform-origin")||"50% 50% 0"),$elem.data("oriTrans",oriTrans)),
cssObj[prefix+"transform"]="",_.forIn(transforms,function(value,key){if(_.isNaN(value))return!0;value=parseFloat(value),$elem.data("oriTrans").obj[key]!==defaults[key]&&(-1<key.indexOf("scale")?value*=$elem.data("oriTrans").obj[key]:value+=$elem.data("oriTrans").obj[key]),void 0!==defaults[key]&&value!==defaults[key]&&(-1<key.indexOf("translate")?value+="px":("rotate"===key||-1<key.indexOf("skew"))&&(value+="deg"),cssObj[prefix+"transform"]+=key+"("+value+") ",classNames.push("transform-"+key.replace(/(X|Y)$/i,"")))}),cssObj[prefix+"transform"]=$.trim(cssObj[prefix+"transform"]),$elem.css(cssObj),$elem.removeClass(
"transform-translate transform-rotate transform-skew transform-scale"),$elem.addClass(_.unique(classNames).join(" ")),$elem.trigger("transform."+ns,transforms)}return{translate:function($elem,valueX,valueY){_transform($elem,{translateX:valueX,translateY:valueY=valueY||valueX})},translateXY:function($elem,valueX,valueY){_transform($elem,{translateX:valueX,translateY:valueY})},translateX:function($elem,value){_transform($elem,{translateX:value})},translateY:function($elem,value){_transform($elem,{translateY:value})},rotate:function($elem,value){_transform($elem,{rotate:value})},skew:function($elem,value){_transform($elem,{skew:value})},scale:function($elem,
valueX,valueY){_transform($elem,{scaleX:valueX,scaleY:valueY=valueY||valueX})},scaleX:function($elem,value){_transform($elem,{scaleX:value})},scaleY:function($elem,value){_transform($elem,{scaleY:value})},reset:function($elem){var cssObj={};$elem.data("oriTrans")&&(cssObj[prefix+"transform"]=$elem.data("oriTrans").matrix,cssObj[prefix+"transform-origin"]=$elem.data("oriTrans").origin,$elem.css(cssObj),$elem.removeClass("transform-translate transform-rotate transform-skew transform-scale"),$elem.trigger("reset."+ns,$elem.data("oriTrans")))},getTransformation:function(elem){return elem instanceof $&&(elem=elem[0]),_getTransformation(elem)},
setTransformOrigin:function($elem,value){var cssObj={};cssObj[prefix+"transform-origin"]=value,$elem.css(cssObj)}}}),define("ui/component/placeable",["lodash","ui/transformer"],function(_,transformer){"use strict";var defaultConfig={initialX:0,initialY:0},placeableComponent={_translate:function(xOffsetAbsolute,yOffsetAbsolute){var $element=this.getElement();transformer.translateXY($element,xOffsetAbsolute,yOffsetAbsolute),this._translateX=xOffsetAbsolute,this._translateY=yOffsetAbsolute,this._x=xOffsetAbsolute+this.config.initialX,this._y=yOffsetAbsolute+this.config.initialY,this.trigger("move",this._x,this._y)},center:function(){var centerX,centerY,
$container=this.getContainer(),$element=this.getElement();return this.is("rendered")&&!this.is("disabled")&&$container.length&&(centerX=$container.width()/2-$element.width()/2,centerY=$container.height()/2-$element.height()/2,this.moveTo(centerX,centerY),this.trigger("center",centerX,centerY)),this},moveBy:function(xOffsetRelative,yOffsetRelative){var xOffsetAbsolute,yOffsetAbsolute;return this.is("rendered")&&!this.is("disabled")&&(xOffsetAbsolute=this._translateX+xOffsetRelative,yOffsetAbsolute=this._translateY+yOffsetRelative,this._translate(xOffsetAbsolute,yOffsetAbsolute)),this},moveTo:function(x,y){var xOffsetAbsolute,yOffsetAbsolute;return this.is(
"rendered")&&!this.is("disabled")&&(xOffsetAbsolute=x-this.config.initialX,yOffsetAbsolute=y-this.config.initialY,this._translate(xOffsetAbsolute,yOffsetAbsolute)),this},moveToX:function(x){return this.moveTo(x,this._y)},moveToY:function(y){return this.moveTo(this._x,y)},resetPosition:function(){var $element=this.getElement();return this.is("rendered")&&($element.css({left:this.config.initialX,top:this.config.initialY}),this._translate(0,0)),this},getPosition:function(){var position;return this.is("rendered")&&(position={x:this._x||0,y:this._y||0}),position}};function makePlaceable(component,config){return _.assign(component,placeableComponent),
component.off(".makePlaceable").on("init.makePlaceable",function(){_.defaults(this.config,config||{},defaultConfig)}).on("render.makePlaceable",function(){this.getElement().css({position:"absolute"}),this.resetPosition()})}return makePlaceable.isPlaceable=function(component){return Object.keys(placeableComponent).every(function(method){return"function"==typeof component[method]})},makePlaceable}),define("ui/component/alignable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){"use strict";var defaultConfig={},alignDefaults_hPos="center",alignDefaults_vPos="center",alignableComponent={alignWith:function($element,options){
var alignedCoords=this._getAlignedCoords($element,options);return this.moveTo(alignedCoords.x,alignedCoords.y)},hAlignWith:function($element,hPos,hOrigin,hOffset){var alignedCoords=this._getAlignedCoords($element,{hPos:hPos,hOrigin:hOrigin,hOffset:hOffset});return this.moveToX(alignedCoords.x)},vAlignWith:function($element,vPos,vOrigin,vOffset){var alignedCoords=this._getAlignedCoords($element,{vPos:vPos,vOrigin:vOrigin,vOffset:vOffset});return this.moveToY(alignedCoords.y)},_getAlignedCoords:function($element,options){var componentOuterSize,containerOffset,elementOffset,elementWidth,elementHeight,x,y,hPos,vPos,hOrigin,vOrigin,$container=this.getContainer()
;switch(options=options||{},componentOuterSize=this.getOuterSize(),containerOffset=$container.offset(),elementOffset=$element.offset(),elementWidth=$element.outerWidth(),elementHeight=$element.outerHeight(),hPos=options.hPos||alignDefaults_hPos,vPos=options.vPos||alignDefaults_vPos,hOrigin=options.hOrigin||this._getDefaultHOrigin(options.hPos),vOrigin=options.vOrigin||this._getDefaultVOrigin(options.vPos),x=elementOffset.left-containerOffset.left,y=elementOffset.top-containerOffset.top,hPos){case"center":x+=elementWidth/2;break;case"right":x+=elementWidth}switch(hOrigin){case"center":x-=componentOuterSize.width/2;break;case"right":x-=componentOuterSize.width
}switch(x+=options.hOffset||0,vPos){case"center":y+=elementHeight/2;break;case"bottom":y+=elementHeight}switch(vOrigin){case"center":y-=componentOuterSize.height/2;break;case"bottom":y-=componentOuterSize.height}return{x:x,y:y+=options.vOffset||0}},_getDefaultHOrigin:function(hPos){var hOrigin;switch(hPos){default:case"center":hOrigin="center";break;case"left":hOrigin="right";break;case"right":hOrigin="left"}return hOrigin},_getDefaultVOrigin:function(vPos){var vOrigin;switch(vPos){default:case"center":vOrigin="center";break;case"top":vOrigin="bottom";break;case"bottom":vOrigin="top"}return vOrigin}};return function(component,config){return _.assign(
component,alignableComponent),makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(".makeAlignable").on("init.makeAlignable",function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("tpl!ui/animable/absorbable/tpl/absorb",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="absorbable"></div>'})}),define("css!ui/animable/absorbable/css/absorb",[],function(){}),define("ui/animable/absorbable/absorbable",["lodash","core/promise","ui/component",
"ui/component/alignable","tpl!ui/animable/absorbable/tpl/absorb","css!ui/animable/absorbable/css/absorb"],function(_,Promise,componentFactory,makeAlignable,absorbTpl){"use strict";var defaultConfig={animationDuration:1},absorbableComponent={absorb:function($target){var self=this,$component=this.getElement(),targetWidth=$target.width(),targetHeight=$target.height(),animationDuration=parseInt(this.config.animationDuration,10)||defaultConfig.animationDuration,animatedComponent=makeAlignable(componentFactory()).setTemplate(absorbTpl).init().render($component).setSize(targetWidth,targetHeight).alignWith($target,{hPos:"center",vPos:"center",hOrigin:"center",
vOrigin:"center"});return"static"===$component.css("position")&&$component.css("position","relative"),new Promise(function(resolve){_.delay(function(){animatedComponent.getElement().addClass("animate").css({transitionDuration:animationDuration+"s"}),animatedComponent.setSize(10,10).alignWith($component,{hPos:"center",vPos:"center",hOrigin:"center",vOrigin:"center",hOffset:targetWidth/2-5,vOffset:targetHeight/2-5}),_.delay(function(){animatedComponent.destroy(),resolve(self)},1e3*animationDuration+10)},10)})},absorbBurst:function($target,delayArray){var animations=[],self=this;return delayArray=_.isArray(delayArray)?delayArray:[0],_.forEach(delayArray,
function(startTimeOffset){animations.push(new Promise(function(resolve){_.delay(function(){self.absorb($target).then(resolve)},startTimeOffset)}))}),Promise.all(animations)}};return function(component,config){return _.assign(component,absorbableComponent),component.off(".makeAbsorbable").on("init.makeAbsorbable",function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("tpl!ui/animable/pulsable/tpl/pulse",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="pulsable animate"></div>'})}),
define("css!ui/animable/pulsable/css/pulse",[],function(){}),define("ui/animable/pulsable/pulsable",["jquery","lodash","core/promise","ui/component","ui/component/alignable","tpl!ui/animable/pulsable/tpl/pulse","css!ui/animable/pulsable/css/pulse"],function($,_,Promise,componentFactory,makeAlignable,pulseTpl){"use strict";var defaultConfig={pulseCount:3},pulsableComponent={pulse:function(pulseCount){var $component,pulseNb,animatedComponent,self=this;return this.config&&this.is("rendered")?("static"===($component=this.getElement()).css("position")&&$component.css("position","relative"),pulseNb=parseInt(
pulseCount||this.config.pulseCount||defaultConfig.pulseCount,10),animatedComponent=makeAlignable(componentFactory()).setTemplate(pulseTpl).init().render($component).alignWith($component,{hPos:"center",vPos:"center",hOrigin:"center",vOrigin:"center"}),new Promise(function(resolve){_.delay(function(){animatedComponent.destroy(),resolve(self)},1e3*pulseNb)})):Promise.resolve(this)}};return function(component,config){return _.assign(component,pulsableComponent),component.off(".makePulsable").on("init.makePulsable",function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("util/capitalize",["lodash"],function(_){"use strict";return function(input,
allWords){var ucFirst=function(str){return str.charAt(0).toUpperCase()+str.substr(1)};return _.isString(input)?!1!==allWords&&-1<input.indexOf(" ")?_.map(input.split(" "),ucFirst).join(" "):ucFirst(input):input}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("lib/popper/popper",factory):global.Popper=factory()}(this,function(){"use strict";for(var isBrowser="undefined"!=typeof window&&"undefined"!=typeof document,longerTimeoutBrowsers=["Edge","Trident","Firefox"],timeoutDuration=0,i=0;i<longerTimeoutBrowsers.length;i+=1)if(
isBrowser&&0<=navigator.userAgent.indexOf(longerTimeoutBrowsers[i])){timeoutDuration=1;break}var debounce=isBrowser&&window.Promise?function(fn){var called=!1;return function(){called||(called=!0,window.Promise.resolve().then(function(){called=!1,fn()}))}}:function(fn){var scheduled=!1;return function(){scheduled||(scheduled=!0,setTimeout(function(){scheduled=!1,fn()},timeoutDuration))}};function isFunction(functionToCheck){return functionToCheck&&"[object Function]"==={}.toString.call(functionToCheck)}function getStyleComputedProperty(element,property){if(1!==element.nodeType)return[];var css=element.ownerDocument.defaultView.getComputedStyle(element,null)
;return property?css[property]:css}function getParentNode(element){return"HTML"===element.nodeName?element:element.parentNode||element.host}function getScrollParent(element){if(!element)return document.body;switch(element.nodeName){case"HTML":case"BODY":return element.ownerDocument.body;case"#document":return element.body}var _getStyleComputedProp=getStyleComputedProperty(element),overflow=_getStyleComputedProp.overflow,overflowX=_getStyleComputedProp.overflowX,overflowY=_getStyleComputedProp.overflowY;return/(auto|scroll|overlay)/.test(overflow+overflowY+overflowX)?element:getScrollParent(getParentNode(element))}var isIE11=isBrowser&&!(
!window.MSInputMethodContext||!document.documentMode),isIE10=isBrowser&&/MSIE 10/.test(navigator.userAgent);function isIE(version){return 11===version?isIE11:10===version?isIE10:isIE11||isIE10}function getOffsetParent(element){if(!element)return document.documentElement;for(var noOffsetParent=isIE(10)?document.body:null,offsetParent=element.offsetParent||null;offsetParent===noOffsetParent&&element.nextElementSibling;)offsetParent=(element=element.nextElementSibling).offsetParent;var nodeName=offsetParent&&offsetParent.nodeName;return nodeName&&"BODY"!==nodeName&&"HTML"!==nodeName?-1!==["TH","TD","TABLE"].indexOf(offsetParent.nodeName
)&&"static"===getStyleComputedProperty(offsetParent,"position")?getOffsetParent(offsetParent):offsetParent:element?element.ownerDocument.documentElement:document.documentElement}function getRoot(node){return null!==node.parentNode?getRoot(node.parentNode):node}function findCommonOffsetParent(element1,element2){if(!(element1&&element1.nodeType&&element2&&element2.nodeType))return document.documentElement;var order=element1.compareDocumentPosition(element2)&Node.DOCUMENT_POSITION_FOLLOWING,start=order?element1:element2,end=order?element2:element1,range=document.createRange();range.setStart(start,0),range.setEnd(end,0);var element,nodeName,
commonAncestorContainer=range.commonAncestorContainer;if(element1!==commonAncestorContainer&&element2!==commonAncestorContainer||start.contains(end))return"BODY"===(nodeName=(element=commonAncestorContainer).nodeName)||"HTML"!==nodeName&&getOffsetParent(element.firstElementChild)!==element?getOffsetParent(commonAncestorContainer):commonAncestorContainer;var element1root=getRoot(element1);return element1root.host?findCommonOffsetParent(element1root.host,element2):findCommonOffsetParent(element1,getRoot(element2).host)}function getScroll(element){var upperSide="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",
nodeName=element.nodeName;if("BODY"!==nodeName&&"HTML"!==nodeName)return element[upperSide];var html=element.ownerDocument.documentElement;return(element.ownerDocument.scrollingElement||html)[upperSide]}function getBordersSize(styles,axis){var sideA="x"===axis?"Left":"Top",sideB="Left"===sideA?"Right":"Bottom";return parseFloat(styles["border"+sideA+"Width"],10)+parseFloat(styles["border"+sideB+"Width"],10)}function getSize(axis,body,html,computedStyle){return Math.max(body["offset"+axis],body["scroll"+axis],html["client"+axis],html["offset"+axis],html["scroll"+axis],isIE(10)?parseInt(html["offset"+axis])+parseInt(computedStyle["margin"+(
"Height"===axis?"Top":"Left")])+parseInt(computedStyle["margin"+("Height"===axis?"Bottom":"Right")]):0)}function getWindowSizes(document){var body=document.body,html=document.documentElement,computedStyle=isIE(10)&&getComputedStyle(html);return{height:getSize("Height",body,html,computedStyle),width:getSize("Width",body,html,computedStyle)}}var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(
Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),defineProperty=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function getClientRect(offsets){return _extends({},offsets,{right:offsets.left+offsets.width,
bottom:offsets.top+offsets.height})}function getBoundingClientRect(element){var rect={};try{if(isIE(10)){rect=element.getBoundingClientRect();var scrollTop=getScroll(element,"top"),scrollLeft=getScroll(element,"left");rect.top+=scrollTop,rect.left+=scrollLeft,rect.bottom+=scrollTop,rect.right+=scrollLeft}else rect=element.getBoundingClientRect()}catch(e){}var result={left:rect.left,top:rect.top,width:rect.right-rect.left,height:rect.bottom-rect.top},sizes="HTML"===element.nodeName?getWindowSizes(element.ownerDocument):{},width=sizes.width||element.clientWidth||result.right-result.left,height=sizes.height||element.clientHeight||result.bottom-result.top,
horizScrollbar=element.offsetWidth-width,vertScrollbar=element.offsetHeight-height;if(horizScrollbar||vertScrollbar){var styles=getStyleComputedProperty(element);horizScrollbar-=getBordersSize(styles,"x"),vertScrollbar-=getBordersSize(styles,"y"),result.width-=horizScrollbar,result.height-=vertScrollbar}return getClientRect(result)}function getOffsetRectRelativeToArbitraryNode(children,parent){var fixedPosition=2<arguments.length&&void 0!==arguments[2]&&arguments[2],isIE10=isIE(10),isHTML="HTML"===parent.nodeName,childrenRect=getBoundingClientRect(children),parentRect=getBoundingClientRect(parent),scrollParent=getScrollParent(children),
styles=getStyleComputedProperty(parent),borderTopWidth=parseFloat(styles.borderTopWidth,10),borderLeftWidth=parseFloat(styles.borderLeftWidth,10);fixedPosition&&isHTML&&(parentRect.top=Math.max(parentRect.top,0),parentRect.left=Math.max(parentRect.left,0));var offsets=getClientRect({top:childrenRect.top-parentRect.top-borderTopWidth,left:childrenRect.left-parentRect.left-borderLeftWidth,width:childrenRect.width,height:childrenRect.height});if(offsets.marginTop=0,offsets.marginLeft=0,!isIE10&&isHTML){var marginTop=parseFloat(styles.marginTop,10),marginLeft=parseFloat(styles.marginLeft,10);offsets.top-=borderTopWidth-marginTop,
offsets.bottom-=borderTopWidth-marginTop,offsets.left-=borderLeftWidth-marginLeft,offsets.right-=borderLeftWidth-marginLeft,offsets.marginTop=marginTop,offsets.marginLeft=marginLeft}return(isIE10&&!fixedPosition?parent.contains(scrollParent):parent===scrollParent&&"BODY"!==scrollParent.nodeName)&&(offsets=function(rect,element){var subtract=2<arguments.length&&void 0!==arguments[2]&&arguments[2],scrollTop=getScroll(element,"top"),scrollLeft=getScroll(element,"left"),modifier=subtract?-1:1;return rect.top+=scrollTop*modifier,rect.bottom+=scrollTop*modifier,rect.left+=scrollLeft*modifier,rect.right+=scrollLeft*modifier,rect}(offsets,parent)),offsets}
function getFixedPositionOffsetParent(element){if(!element||!element.parentElement||isIE())return document.documentElement;for(var el=element.parentElement;el&&"none"===getStyleComputedProperty(el,"transform");)el=el.parentElement;return el||document.documentElement}function getBoundaries(popper,reference,padding,boundariesElement){var fixedPosition=4<arguments.length&&void 0!==arguments[4]&&arguments[4],boundaries={top:0,left:0},offsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,reference);if("viewport"===boundariesElement)boundaries=function(element){
var excludeScroll=1<arguments.length&&void 0!==arguments[1]&&arguments[1],html=element.ownerDocument.documentElement,relativeOffset=getOffsetRectRelativeToArbitraryNode(element,html),width=Math.max(html.clientWidth,window.innerWidth||0),height=Math.max(html.clientHeight,window.innerHeight||0),scrollTop=excludeScroll?0:getScroll(html),scrollLeft=excludeScroll?0:getScroll(html,"left");return getClientRect({top:scrollTop-relativeOffset.top+relativeOffset.marginTop,left:scrollLeft-relativeOffset.left+relativeOffset.marginLeft,width:width,height:height})}(offsetParent,fixedPosition);else{var boundariesNode=void 0;"scrollParent"===boundariesElement?"BODY"===(
boundariesNode=getScrollParent(getParentNode(reference))).nodeName&&(boundariesNode=popper.ownerDocument.documentElement):boundariesNode="window"===boundariesElement?popper.ownerDocument.documentElement:boundariesElement;var offsets=getOffsetRectRelativeToArbitraryNode(boundariesNode,offsetParent,fixedPosition);if("HTML"!==boundariesNode.nodeName||function isFixed(element){var nodeName=element.nodeName;return"BODY"!==nodeName&&"HTML"!==nodeName&&("fixed"===getStyleComputedProperty(element,"position")||isFixed(getParentNode(element)))}(offsetParent))boundaries=offsets;else{var _getWindowSizes=getWindowSizes(popper.ownerDocument),height=_getWindowSizes.height,
width=_getWindowSizes.width;boundaries.top+=offsets.top-offsets.marginTop,boundaries.bottom=height+offsets.top,boundaries.left+=offsets.left-offsets.marginLeft,boundaries.right=width+offsets.left}}var isPaddingNumber="number"==typeof(padding=padding||0);return boundaries.left+=isPaddingNumber?padding:padding.left||0,boundaries.top+=isPaddingNumber?padding:padding.top||0,boundaries.right-=isPaddingNumber?padding:padding.right||0,boundaries.bottom-=isPaddingNumber?padding:padding.bottom||0,boundaries}function computeAutoPlacement(placement,refRect,popper,reference,boundariesElement){var padding=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(
-1===placement.indexOf("auto"))return placement;var boundaries=getBoundaries(popper,reference,padding,boundariesElement),rects={top:{width:boundaries.width,height:refRect.top-boundaries.top},right:{width:boundaries.right-refRect.right,height:boundaries.height},bottom:{width:boundaries.width,height:boundaries.bottom-refRect.bottom},left:{width:refRect.left-boundaries.left,height:boundaries.height}},sortedAreas=Object.keys(rects).map(function(key){return _extends({key:key},rects[key],{area:(_ref=rects[key],_ref.width*_ref.height)});var _ref}).sort(function(a,b){return b.area-a.area}),filteredAreas=sortedAreas.filter(function(_ref2){var width=_ref2.width,
height=_ref2.height;return width>=popper.clientWidth&&height>=popper.clientHeight}),computedPlacement=0<filteredAreas.length?filteredAreas[0].key:sortedAreas[0].key,variation=placement.split("-")[1];return computedPlacement+(variation?"-"+variation:"")}function getReferenceOffsets(state,popper,reference){var fixedPosition=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return getOffsetRectRelativeToArbitraryNode(reference,fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,reference),fixedPosition)}function getOuterSizes(element){var styles=element.ownerDocument.defaultView.getComputedStyle(element),x=parseFloat(
styles.marginTop)+parseFloat(styles.marginBottom),y=parseFloat(styles.marginLeft)+parseFloat(styles.marginRight);return{width:element.offsetWidth+y,height:element.offsetHeight+x}}function getOppositePlacement(placement){var hash={left:"right",right:"left",bottom:"top",top:"bottom"};return placement.replace(/left|right|bottom|top/g,function(matched){return hash[matched]})}function getPopperOffsets(popper,referenceOffsets,placement){placement=placement.split("-")[0];var popperRect=getOuterSizes(popper),popperOffsets={width:popperRect.width,height:popperRect.height},isHoriz=-1!==["right","left"].indexOf(placement),mainSide=isHoriz?"top":"left",
secondarySide=isHoriz?"left":"top",measurement=isHoriz?"height":"width",secondaryMeasurement=isHoriz?"width":"height";return popperOffsets[mainSide]=referenceOffsets[mainSide]+referenceOffsets[measurement]/2-popperRect[measurement]/2,popperOffsets[secondarySide]=placement===secondarySide?referenceOffsets[secondarySide]-popperRect[secondaryMeasurement]:referenceOffsets[getOppositePlacement(secondarySide)],popperOffsets}function find(arr,check){return Array.prototype.find?arr.find(check):arr.filter(check)[0]}function runModifiers(modifiers,data,ends){return(void 0===ends?modifiers:modifiers.slice(0,function(arr,prop,value){if(Array.prototype.findIndex
)return arr.findIndex(function(cur){return cur[prop]===value});var match=find(arr,function(obj){return obj[prop]===value});return arr.indexOf(match)}(modifiers,"name",ends))).forEach(function(modifier){modifier.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var fn=modifier.function||modifier.fn;modifier.enabled&&isFunction(fn)&&(data.offsets.popper=getClientRect(data.offsets.popper),data.offsets.reference=getClientRect(data.offsets.reference),data=fn(data,modifier))}),data}function isModifierEnabled(modifiers,modifierName){return modifiers.some(function(_ref){var name=_ref.name;return _ref.enabled&&name===modifierName})}
function getSupportedPropertyName(property){for(var prefixes=[!1,"ms","Webkit","Moz","O"],upperProp=property.charAt(0).toUpperCase()+property.slice(1),i=0;i<prefixes.length;i++){var prefix=prefixes[i],toCheck=prefix?""+prefix+upperProp:property;if(void 0!==document.body.style[toCheck])return toCheck}return null}function getWindow(element){var ownerDocument=element.ownerDocument;return ownerDocument?ownerDocument.defaultView:window}function setupEventListeners(reference,options,state,updateBound){state.updateBound=updateBound,getWindow(reference).addEventListener("resize",state.updateBound,{passive:!0});var scrollElement=getScrollParent(reference)
;return function attachToScrollParents(scrollParent,event,callback,scrollParents){var isBody="BODY"===scrollParent.nodeName,target=isBody?scrollParent.ownerDocument.defaultView:scrollParent;target.addEventListener(event,callback,{passive:!0}),isBody||attachToScrollParents(getScrollParent(target.parentNode),event,callback,scrollParents),scrollParents.push(target)}(scrollElement,"scroll",state.updateBound,state.scrollParents),state.scrollElement=scrollElement,state.eventsEnabled=!0,state}function disableEventListeners(){var reference,state;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(reference=this.reference,state=this.state
,getWindow(reference).removeEventListener("resize",state.updateBound),state.scrollParents.forEach(function(target){target.removeEventListener("scroll",state.updateBound)}),state.updateBound=null,state.scrollParents=[],state.scrollElement=null,state.eventsEnabled=!1,state))}function isNumeric(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(n)}function setStyles(element,styles){Object.keys(styles).forEach(function(prop){var unit="";-1!==["width","height","top","right","bottom","left"].indexOf(prop)&&isNumeric(styles[prop])&&(unit="px"),element.style[prop]=styles[prop]+unit})}function isModifierRequired(modifiers,requestingName,requestedName){
var requesting=find(modifiers,function(_ref){return _ref.name===requestingName}),isRequired=!!requesting&&modifiers.some(function(modifier){return modifier.name===requestedName&&modifier.enabled&&modifier.order<requesting.order});if(!isRequired){var _requesting="`"+requestingName+"`",requested="`"+requestedName+"`";console.warn(requested+" modifier is required by "+_requesting+" modifier in order to work, be sure to include it before "+_requesting+"!")}return isRequired}var placements=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],
validPlacements=placements.slice(3);function clockwise(placement){var counter=1<arguments.length&&void 0!==arguments[1]&&arguments[1],index=validPlacements.indexOf(placement),arr=validPlacements.slice(index+1).concat(validPlacements.slice(0,index));return counter?arr.reverse():arr}var BEHAVIORS_FLIP="flip",BEHAVIORS_CLOCKWISE="clockwise",BEHAVIORS_COUNTERCLOCKWISE="counterclockwise";function parseOffset(offset,popperOffsets,referenceOffsets,basePlacement){var offsets=[0,0],useHeight=-1!==["right","left"].indexOf(basePlacement),fragments=offset.split(/(\+|\-)/).map(function(frag){return frag.trim()}),divider=fragments.indexOf(find(fragments,function(frag){
return-1!==frag.search(/,|\s/)}));fragments[divider]&&-1===fragments[divider].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var splitRegex=/\s*,\s*|\s+/,ops=-1!==divider?[fragments.slice(0,divider).concat([fragments[divider].split(splitRegex)[0]]),[fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider+1))]:[fragments];return(ops=ops.map(function(op,index){var measurement=(1===index?!useHeight:useHeight)?"height":"width",mergeWithPrevious=!1;return op.reduce(function(a,b){return""===a[a.length-1]&&-1!==["+","-"].indexOf(b)?(a[a.length-1]=b,mergeWithPrevious=!0,a
):mergeWithPrevious?(a[a.length-1]+=b,mergeWithPrevious=!1,a):a.concat(b)},[]).map(function(str){return function(str,measurement,popperOffsets,referenceOffsets){var split=str.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),value=+split[1],unit=split[2];if(!value)return str;if(0!==unit.indexOf("%"))return"vh"!==unit&&"vw"!==unit?value:("vh"===unit?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*value;var element=void 0;switch(unit){case"%p":element=popperOffsets;break;case"%":case"%r":default:element=referenceOffsets}return getClientRect(element)[measurement]/100*value}(str,
measurement,popperOffsets,referenceOffsets)})})).forEach(function(op,index){op.forEach(function(frag,index2){isNumeric(frag)&&(offsets[index]+=frag*("-"===op[index2-1]?-1:1))})}),offsets}var Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(data){var placement=data.placement,basePlacement=placement.split("-")[0],shiftvariation=placement.split("-")[1];if(shiftvariation){var _data$offsets=data.offsets,reference=_data$offsets.reference,popper=_data$offsets.popper,isVertical=-1!==["bottom","top"].indexOf(basePlacement),
side=isVertical?"left":"top",measurement=isVertical?"width":"height",shiftOffsets={start:defineProperty({},side,reference[side]),end:defineProperty({},side,reference[side]+reference[measurement]-popper[measurement])};data.offsets.popper=_extends({},popper,shiftOffsets[shiftvariation])}return data}},offset:{order:200,enabled:!0,fn:function(data,_ref){var offset=_ref.offset,placement=data.placement,_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,basePlacement=placement.split("-")[0],offsets=void 0;return offsets=isNumeric(+offset)?[+offset,0]:parseOffset(offset,popper,reference,basePlacement),"left"===basePlacement?(
popper.top+=offsets[0],popper.left-=offsets[1]):"right"===basePlacement?(popper.top+=offsets[0],popper.left+=offsets[1]):"top"===basePlacement?(popper.left+=offsets[0],popper.top-=offsets[1]):"bottom"===basePlacement&&(popper.left+=offsets[0],popper.top+=offsets[1]),data.popper=popper,data},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(data,options){var boundariesElement=options.boundariesElement||getOffsetParent(data.instance.popper);data.instance.reference===boundariesElement&&(boundariesElement=getOffsetParent(boundariesElement));var transformProp=getSupportedPropertyName("transform"),popperStyles=data.instance.popper.style,
top=popperStyles.top,left=popperStyles.left,transform=popperStyles[transformProp];popperStyles.top="",popperStyles.left="",popperStyles[transformProp]="";var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,boundariesElement,data.positionFixed);popperStyles.top=top,popperStyles.left=left,popperStyles[transformProp]=transform,options.boundaries=boundaries;var order=options.priority,popper=data.offsets.popper,check={primary:function(placement){var value=popper[placement];if("left"===placement){var overlap=boundaries.width-(popper.left+popper.width);if(!options.escapeWithReference&&overlap<0){var padding=options.padding||0
;value=boundaries.width-popper.width-padding}}return popper[placement]<boundaries[placement]&&!options.escapeWithReference&&(value=Math.max(popper[placement],boundaries[placement])),defineProperty({},placement,value)},secondary:function(placement){var mainSide="right"===placement?"left":"top",value=popper[mainSide];return popper[placement]>boundaries[placement]&&!options.escapeWithReference&&(value=Math.min(popper[mainSide],boundaries[placement]-("right"===placement?popper.width:popper.height))),defineProperty({},mainSide,value)}};return order.forEach(function(placement){var side=-1!==["left","top"].indexOf(placement)?"primary":"secondary";popper=_extends({}
,popper,check[side](placement))}),data.offsets.popper=popper,data},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(data){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,placement=data.placement.split("-")[0],floor=Math.floor,isVertical=-1!==["top","bottom"].indexOf(placement),side=isVertical?"right":"bottom",opSide=isVertical?"left":"top",measurement=isVertical?"width":"height";return popper[side]<floor(reference[opSide])&&(data.offsets.popper[opSide]=floor(reference[opSide])-popper[measurement]),popper[opSide]>floor(
reference[side])&&(data.offsets.popper[opSide]=floor(reference[side])),data}},arrow:{order:500,enabled:!0,fn:function(data,options){var _data$offsets$arrow;if(!isModifierRequired(data.instance.modifiers,"arrow","keepTogether"))return data;var arrowElement=options.element;if("string"==typeof arrowElement){if(!(arrowElement=data.instance.popper.querySelector(arrowElement)))return data}else if(!data.instance.popper.contains(arrowElement))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),data;var placement=data.placement.split("-")[0],_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,
isVertical=-1!==["left","right"].indexOf(placement),len=isVertical?"height":"width",sideCapitalized=isVertical?"Top":"Left",side=sideCapitalized.toLowerCase(),altSide=isVertical?"left":"top",opSide=isVertical?"bottom":"right",arrowElementSize=getOuterSizes(arrowElement)[len];if(reference[opSide]-arrowElementSize<popper[side]&&(data.offsets.popper[side]-=popper[side]-(reference[opSide]-arrowElementSize)),reference[side]+arrowElementSize>popper[opSide]){var clientWidth=Math.max(document.documentElement.clientWidth,document.documentElement.innerWidth||0);clientWidth<popper[opSide]+arrowElementSize&&!isVertical?(data.offsets.popper[opSide]=clientWidth-2,
data.offsets.popper[side]=data.offsets.popper[opSide]-data.popper.width):data.offsets.popper[side]+=reference[side]+arrowElementSize-popper[opSide]}data.offsets.popper=getClientRect(data.offsets.popper);var center=reference[side]+reference[len]/2-arrowElementSize/2,css=getStyleComputedProperty(data.instance.popper),popperMarginSide=parseFloat(css["margin"+sideCapitalized],10),popperBorderSide=parseFloat(css["border"+sideCapitalized+"Width"],10),sideValue=center-data.offsets.popper[side]-popperMarginSide-popperBorderSide;return sideValue=Math.max(Math.min(popper[len]-arrowElementSize,sideValue),0),data.arrowElement=arrowElement,data.offsets.arrow=(
defineProperty(_data$offsets$arrow={},side,Math.round(sideValue)),defineProperty(_data$offsets$arrow,altSide,""),_data$offsets$arrow),data},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(data,options){if(isModifierEnabled(data.instance.modifiers,"inner"))return data;if(data.flipped&&data.placement===data.originalPlacement)return data;var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,options.boundariesElement,data.positionFixed),placement=data.placement.split("-")[0],placementOpposite=getOppositePlacement(placement),variation=data.placement.split("-")[1]||"",flipOrder=[];switch(options.behavior){
case BEHAVIORS_FLIP:flipOrder=[placement,placementOpposite];break;case BEHAVIORS_CLOCKWISE:flipOrder=clockwise(placement);break;case BEHAVIORS_COUNTERCLOCKWISE:flipOrder=clockwise(placement,!0);break;default:flipOrder=options.behavior}return flipOrder.forEach(function(step,index){if(placement!==step||flipOrder.length===index+1)return data;placement=data.placement.split("-")[0],placementOpposite=getOppositePlacement(placement);var popperOffsets=data.offsets.popper,refOffsets=data.offsets.reference,floor=Math.floor,overlapsRef="left"===placement&&floor(popperOffsets.right)>floor(refOffsets.left)||"right"===placement&&floor(popperOffsets.left)<floor(
refOffsets.right)||"top"===placement&&floor(popperOffsets.bottom)>floor(refOffsets.top)||"bottom"===placement&&floor(popperOffsets.top)<floor(refOffsets.bottom),overflowsLeft=floor(popperOffsets.left)<floor(boundaries.left),overflowsRight=floor(popperOffsets.right)>floor(boundaries.right),overflowsTop=floor(popperOffsets.top)<floor(boundaries.top),overflowsBottom=floor(popperOffsets.bottom)>floor(boundaries.bottom),overflowsBoundaries="left"===placement&&overflowsLeft||"right"===placement&&overflowsRight||"top"===placement&&overflowsTop||"bottom"===placement&&overflowsBottom,isVertical=-1!==["top","bottom"].indexOf(placement),
flippedVariation=!!options.flipVariations&&(isVertical&&"start"===variation&&overflowsLeft||isVertical&&"end"===variation&&overflowsRight||!isVertical&&"start"===variation&&overflowsTop||!isVertical&&"end"===variation&&overflowsBottom);(overlapsRef||overflowsBoundaries||flippedVariation)&&(data.flipped=!0,(overlapsRef||overflowsBoundaries)&&(placement=flipOrder[index+1]),flippedVariation&&(variation=function(variation){return"end"===variation?"start":"start"===variation?"end":variation}(variation)),data.placement=placement+(variation?"-"+variation:""),data.offsets.popper=_extends({},data.offsets.popper,getPopperOffsets(data.instance.popper,
data.offsets.reference,data.placement)),data=runModifiers(data.instance.modifiers,data,"flip"))}),data},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(data){var placement=data.placement,basePlacement=placement.split("-")[0],_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,isHoriz=-1!==["left","right"].indexOf(basePlacement),subtractLength=-1===["top","left"].indexOf(basePlacement);return popper[isHoriz?"left":"top"]=reference[basePlacement]-(subtractLength?popper[isHoriz?"width":"height"]:0),data.placement=getOppositePlacement(placement),
data.offsets.popper=getClientRect(popper),data}},hide:{order:800,enabled:!0,fn:function(data){if(!isModifierRequired(data.instance.modifiers,"hide","preventOverflow"))return data;var refRect=data.offsets.reference,bound=find(data.instance.modifiers,function(modifier){return"preventOverflow"===modifier.name}).boundaries;if(refRect.bottom<bound.top||refRect.left>bound.right||refRect.top>bound.bottom||refRect.right<bound.left){if(!0===data.hide)return data;data.hide=!0,data.attributes["x-out-of-boundaries"]=""}else{if(!1===data.hide)return data;data.hide=!1,data.attributes["x-out-of-boundaries"]=!1}return data}},computeStyle:{order:850,enabled:!0,fn:function(
data,options){var x=options.x,y=options.y,popper=data.offsets.popper,legacyGpuAccelerationOption=find(data.instance.modifiers,function(modifier){return"applyStyle"===modifier.name}).gpuAcceleration;void 0!==legacyGpuAccelerationOption&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var gpuAcceleration=void 0!==legacyGpuAccelerationOption?legacyGpuAccelerationOption:options.gpuAcceleration,offsetParent=getOffsetParent(data.instance.popper),offsetParentRect=getBoundingClientRect(offsetParent),styles={position:popper.position},offsets={left:Math.floor(popper.left),
top:Math.round(popper.top),bottom:Math.round(popper.bottom),right:Math.floor(popper.right)},sideA="bottom"===x?"top":"bottom",sideB="right"===y?"left":"right",prefixedProperty=getSupportedPropertyName("transform"),left=void 0,top=void 0;if(top="bottom"===sideA?"HTML"===offsetParent.nodeName?-offsetParent.clientHeight+offsets.bottom:-offsetParentRect.height+offsets.bottom:offsets.top,left="right"===sideB?"HTML"===offsetParent.nodeName?-offsetParent.clientWidth+offsets.right:-offsetParentRect.width+offsets.right:offsets.left,gpuAcceleration&&prefixedProperty)styles[prefixedProperty]="translate3d("+left+"px, "+top+"px, 0)",styles[sideA]=0,styles[sideB]=0,
styles.willChange="transform";else{var invertTop="bottom"===sideA?-1:1,invertLeft="right"===sideB?-1:1;styles[sideA]=top*invertTop,styles[sideB]=left*invertLeft,styles.willChange=sideA+", "+sideB}var attributes={"x-placement":data.placement};return data.attributes=_extends({},attributes,data.attributes),data.styles=_extends({},styles,data.styles),data.arrowStyles=_extends({},data.offsets.arrow,data.arrowStyles),data},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(data){var element,attributes;return setStyles(data.instance.popper,data.styles),element=data.instance.popper,attributes=data.attributes,Object.keys(attributes
).forEach(function(prop){!1!==attributes[prop]?element.setAttribute(prop,attributes[prop]):element.removeAttribute(prop)}),data.arrowElement&&Object.keys(data.arrowStyles).length&&setStyles(data.arrowElement,data.arrowStyles),data},onLoad:function(reference,popper,options,modifierOptions,state){var referenceOffsets=getReferenceOffsets(state,popper,reference,options.positionFixed),placement=computeAutoPlacement(options.placement,referenceOffsets,popper,reference,options.modifiers.flip.boundariesElement,options.modifiers.flip.padding);return popper.setAttribute("x-placement",placement),setStyles(popper,{position:options.positionFixed?"fixed":"absolute"}),
options},gpuAcceleration:void 0}}},Popper=function(){function Popper(reference,popper){var _this=this,options=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Popper),this.scheduleUpdate=function(){return requestAnimationFrame(_this.update)},this.update=debounce(this.update.bind(this)),this.options=_extends({},Popper.Defaults,options),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=reference&&reference.jquery?reference[0]:reference,this.popper=popper&&popper.jquery?popper[0]:popper,
this.options.modifiers={},Object.keys(_extends({},Popper.Defaults.modifiers,options.modifiers)).forEach(function(name){_this.options.modifiers[name]=_extends({},Popper.Defaults.modifiers[name]||{},options.modifiers?options.modifiers[name]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(name){return _extends({name:name},_this.options.modifiers[name])}).sort(function(a,b){return a.order-b.order}),this.modifiers.forEach(function(modifierOptions){modifierOptions.enabled&&isFunction(modifierOptions.onLoad)&&modifierOptions.onLoad(_this.reference,_this.popper,_this.options,modifierOptions,_this.state)}),this.update()
;var eventsEnabled=this.options.eventsEnabled;eventsEnabled&&this.enableEventListeners(),this.state.eventsEnabled=eventsEnabled}return createClass(Popper,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var data={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};data.offsets.reference=getReferenceOffsets(this.state,this.popper,this.reference,this.options.positionFixed),data.placement=computeAutoPlacement(this.options.placement,data.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),data.originalPlacement=data.placement,
data.positionFixed=this.options.positionFixed,data.offsets.popper=getPopperOffsets(this.popper,data.offsets.reference,data.placement),data.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",data=runModifiers(this.modifiers,data),this.state.isCreated?this.options.onUpdate(data):(this.state.isCreated=!0,this.options.onCreate(data))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,isModifierEnabled(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",
this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[getSupportedPropertyName("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=setupEventListeners(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return disableEventListeners.call(this)}}]),Popper}();return Popper.Utils=("undefined"!=typeof window?window:global).PopperUtils,Popper.placements=placements,
Popper.Defaults=Defaults,Popper}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("./popper")):"function"==typeof define&&define.amd?define("lib/popper/tooltip",["./popper"],factory):global.Tooltip=factory(global.Popper)}(this,function(Popper){"use strict";Popper=Popper&&Popper.hasOwnProperty("default")?Popper.default:Popper;var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,
descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DEFAULT_OPTIONS={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0,
arrowSelector:".tooltip-arrow, .tooltip__arrow",innerSelector:".tooltip-inner, .tooltip__inner"},Tooltip=function(){function Tooltip(reference,options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Tooltip),_initialiseProps.call(this),options=_extends({},DEFAULT_OPTIONS,options),reference.jquery&&(reference=reference[0]),this.reference=reference;var events="string"==typeof(this.options=options).trigger?options.trigger.split(" ").filter(function(trigger){return-1!==["click","hover","focus"].indexOf(trigger)}):[];this._isOpen=!1,this._popperOptions={},
this._setEventListeners(reference,events,options)}return createClass(Tooltip,[{key:"_create",value:function(reference,template,title,allowHtml){var tooltipGenerator=window.document.createElement("div");tooltipGenerator.innerHTML=template.trim();var tooltipNode=tooltipGenerator.childNodes[0];tooltipNode.id="tooltip_"+Math.random().toString(36).substr(2,10),tooltipNode.setAttribute("aria-hidden","false");var titleNode=tooltipGenerator.querySelector(this.options.innerSelector);return this._addTitleContent(reference,title,allowHtml,titleNode),tooltipNode}},{key:"_addTitleContent",value:function(reference,title,allowHtml,titleNode){if(
1===title.nodeType||11===title.nodeType)allowHtml&&titleNode.appendChild(title);else if((functionToCheck=title)&&"[object Function]"==={}.toString.call(functionToCheck)){var titleText=title.call(reference);allowHtml?titleNode.innerHTML=titleText:titleNode.textContent=titleText}else allowHtml?titleNode.innerHTML=title:titleNode.textContent=title;var functionToCheck}},{key:"_show",value:function(reference,options){if(this._isOpen&&!this._isOpening)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.visibility="visible",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.update(),this
;var title=reference.getAttribute("title")||options.title;if(!title)return this;var tooltipNode=this._create(reference,options.template,title,options.html);reference.setAttribute("aria-describedby",tooltipNode.id);var container=this._findContainer(options.container,reference);return this._append(tooltipNode,container),this._popperOptions=_extends({},options.popperOptions,{placement:options.placement}),this._popperOptions.modifiers=_extends({},this._popperOptions.modifiers,{arrow:{element:this.options.arrowSelector},offset:{offset:options.offset}}),options.boundariesElement&&(this._popperOptions.modifiers.preventOverflow={
boundariesElement:options.boundariesElement}),this.popperInstance=new Popper(reference,tooltipNode,this._popperOptions),this._tooltipNode=tooltipNode,this}},{key:"_hide",value:function(){return this._isOpen&&(this._isOpen=!1,this._tooltipNode.style.visibility="hidden",this._tooltipNode.setAttribute("aria-hidden","true")),this}},{key:"_dispose",value:function(){var _this=this;return this._events.forEach(function(_ref){var func=_ref.func,event=_ref.event;_this.reference.removeEventListener(event,func)}),this._events=[],this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||(
this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null)),this}},{key:"_findContainer",value:function(container,reference){return"string"==typeof container?container=window.document.querySelector(container):!1===container&&(container=reference.parentNode),container}},{key:"_append",value:function(tooltipNode,container){var _this2=this;container.appendChild(tooltipNode),setTimeout(function(){_this2._isOpen&&_this2.hide(),_this2.show()})}},{key:"_setEventListeners",value:function(reference,events,options){var _this3=this,directEvents=[],oppositeEvents=[];events.forEach(function(event){switch(event){case"hover":directEvents.push(
"mouseenter"),oppositeEvents.push("mouseleave");break;case"focus":directEvents.push("focus"),oppositeEvents.push("blur");break;case"click":directEvents.push("click"),oppositeEvents.push("click")}}),directEvents.forEach(function(event){var func=function(evt){!0!==_this3._isOpening&&(evt.usedByTooltip=!0,_this3._scheduleShow(reference,options.delay,options,evt))};_this3._events.push({event:event,func:func}),reference.addEventListener(event,func)}),oppositeEvents.forEach(function(event){var func=function(evt){!0!==evt.usedByTooltip&&_this3._scheduleHide(reference,options.delay,options,evt)};_this3._events.push({event:event,func:func}),
reference.addEventListener(event,func),"click"===event&&options.closeOnClickOutside&&document.addEventListener("mousedown",function(e){if(_this3._isOpening){var popper=_this3.popperInstance.popper;reference.contains(e.target)||popper.contains(e.target)||func(e)}},!0)})}},{key:"_scheduleShow",value:function(reference,delay,options){var _this4=this;this._isOpening=!0;var computedDelay=delay&&delay.show||delay||0;this._showTimeout=window.setTimeout(function(){return _this4._show(reference,options)},computedDelay)}},{key:"_scheduleHide",value:function(reference,delay,options,evt){var _this5=this;this._isOpening=!1;var computedDelay=delay&&delay.hide||delay||0
;window.setTimeout(function(){if(window.clearTimeout(_this5._showTimeout),!1!==_this5._isOpen&&document.body.contains(_this5._tooltipNode)){if("mouseleave"===evt.type)if(_this5._setTooltipNodeEvent(evt,reference,delay,options))return;_this5._hide(reference,options)}},computedDelay)}},{key:"_updateTitleContent",value:function(title){if(void 0!==this._tooltipNode){var titleNode=this._tooltipNode.querySelector(this.options.innerSelector);this._clearTitleContent(titleNode,this.options.html,this.reference.getAttribute("title")||this.options.title),this._addTitleContent(this.reference,title,this.options.html,titleNode),this.options.title=title,
this.popperInstance.update()}else void 0!==this.options.title&&(this.options.title=title)}},{key:"_clearTitleContent",value:function(titleNode,allowHtml,lastTitle){1===lastTitle.nodeType||11===lastTitle.nodeType?allowHtml&&titleNode.removeChild(lastTitle):allowHtml?titleNode.innerHTML="":titleNode.textContent=""}}]),Tooltip}(),_initialiseProps=function(){var _this6=this;this.show=function(){return _this6._show(_this6.reference,_this6.options)},this.hide=function(){return _this6._hide()},this.dispose=function(){return _this6._dispose()},this.toggle=function(){return _this6._isOpen?_this6.hide():_this6.show()},this.updateTitleContent=function(title){
return _this6._updateTitleContent(title)},this._events=[],this._setTooltipNodeEvent=function(evt,reference,delay,options){var relatedreference=evt.relatedreference||evt.toElement||evt.relatedTarget;return!!_this6._tooltipNode.contains(relatedreference)&&(_this6._tooltipNode.addEventListener(evt.type,function callback(evt2){var relatedreference2=evt2.relatedreference||evt2.toElement||evt2.relatedTarget;_this6._tooltipNode.removeEventListener(evt.type,callback),reference.contains(relatedreference2)||_this6._scheduleHide(reference,options.delay,options,evt2)}),!0)}};return Tooltip}),define("tpl!ui/tooltip/default",["handlebars"],function(hb){return hb.template(
function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="tooltip ',buffer+=(0,this.escapeExpression)((helper=helpers.class)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.class)?helper.call(depth0,{hash:{},data:data}):helper)+'" role="tooltip">\n    <div class="tooltip-arrow"></div>\n    <div class="tooltip-inner tooltip-body"></div>\n</div>'})}),define("ui/tooltip",["jquery","lodash","core/dataattrhandler","lib/popper/popper","lib/popper/tooltip","tpl!ui/tooltip/default"],function($,_,
DataAttrHandler,Popper,Tooltip,defaultTpl){"use strict";var themes=["dark","default","info","warning","error","success","danger"],themesMap={default:defaultTpl({class:"tooltip-plain"}),dark:defaultTpl({class:"tooltip-dark"}),error:defaultTpl({class:"tooltip-red"}),success:defaultTpl({class:"tooltip-green"}),info:defaultTpl({class:"tooltip-blue"}),warning:defaultTpl({class:"tooltip-orange"}),danger:defaultTpl({class:"tooltip-danger"})},defaultOptions={template:themesMap.default,html:!0,trigger:"hover focus",popperOptions:{positionFixed:!0,placement:"auto",modifiers:{preventOverflow:{escapeWithReference:!1,enabled:!0,padding:6,boundariesElement:"viewport"}}}},
checkHTMLInstance=function(el){return el instanceof Element||el instanceof HTMLDocument||el.jquery};return{lookup:function($container){var themeName;if(!$container||!checkHTMLInstance($container))throw new TypeError("Tooltip should be connected to DOM Element");$("[data-tooltip]",$container).each(function(){var opt,el,inst,$content=DataAttrHandler.getTarget("tooltip",$(this));themeName=_.contains(themes,$(this).data("tooltip-theme"))?$(this).data("tooltip-theme"):"default",opt={template:themesMap[themeName]},$content.length&&(opt=_.merge(defaultOptions,opt,{title:$content[0]})),inst=new Tooltip(el=this,opt),$(el).data("$tooltip")&&($(el).data("$tooltip"
).dispose(),$(el).removeData("$tooltip")),$(el).data("$tooltip",inst)})},create:function(el,message,options){var calculatedOptions,themeName,template;if(calculatedOptions=options?_.merge(defaultOptions,options):defaultOptions,themeName=_.contains(themes,calculatedOptions.theme)?calculatedOptions.theme:"default",template={template:themesMap[themeName]},!el&&!checkHTMLInstance(el))throw new TypeError("Tooltip should be connected to DOM Element");if(!message&&!checkHTMLInstance(el)&&"string"!=typeof message)throw new TypeError("Tooltip should have messsage to show");return new Tooltip(el,_.merge(calculatedOptions,template,{title:message}))},error:function(
element,message,options){var theme={theme:"error"};return this.create(element,message,options?_.merge(theme,options):theme)},success:function(element,message,options){var theme={theme:"success"};return this.create(element,message,options?_.merge(theme,options):theme)},info:function(element,message,options){var theme={theme:"info"};return this.create(element,message,options?_.merge(theme,options):theme)},warning:function(element,message,options){var theme={theme:"warning"};return this.create(element,message,options?_.merge(theme,options):theme)},danger:function(element,message,options){var theme={theme:"danger"};return this.create(element,message,
options?_.merge(theme,options):theme)}}}),define("ui/autocomplete",["jquery","lodash","i18n","util/capitalize","ui/tooltip","jquery.autocomplete"],function($,_,__,capitalize,tooltip){"use strict";var NS="autocompleter",tooltipConfigTooMany={container:$("body").get(0),trigger:"manual"},toolTipMessage=__("Too many suggestions match your query. Only a few are listed"),defaults={pluginName:"autocomplete",url:null,params:null,paramsRoot:null,ontologyParam:"rootNode",queryParam:"query",type:"GET",ontology:null,value:null,label:null,valueField:"id",labelField:"http://www.w3.org/2000/01/rdf-schema#label",isProvider:!1,preventSubmit:!1,delay:250,minChars:3,
tooManySuggestions:!1,addWilcard:!1},autocompleter={init:function(element,options){return this.$element=$(element),this.$element.is(":input")||(this.$element=this.$element.find(":input")),this.tooltip=tooltip.info(this.$element,toolTipMessage,tooltipConfigTooMany),options=_.assign(_.clone(options||{}),_.pick(this.$element.data(),["url","ontology","paramsRoot","ontologyParam","queryParam","type","valueField","labelField","isProvider","preventSubmit","delay","minChars"])),this.on("keyup keydown keypress",this._onKeyEvent.bind(this)),this.on("focus",this._onFocus.bind(this)),this.on("blur",this._onBlur.bind(this)),this.$element[this.pluginName](
this.parseOptions(options)),this},destroy:function(){return this.applyPlugin("dispose"),this.$element&&(this.$element.off("."+NS),this.tooltip.dispose()),this.$element=null,this},parseOptions:function(options){var self=this,pluginOptions={};return _.forOwn(options,function(value,name){var setterName="set"+capitalize(name);self[setterName]?self[setterName](value):"on"===name.substr(0,2)?self.on(name.substr(2),value):options[name]=value}),_.assign(pluginOptions,{onSelect:this._onSelect.bind(this),onSearchStart:this._onSearchStart.bind(this),onSearchComplete:this._onSearchComplete.bind(this),onSearchError:this._onSearchError.bind(this),
onInvalidateSelection:this._onInvalidateSelection.bind(this),beforeRender:this._onBeforeRender.bind(this),transformResult:this._transformResult.bind(this),deferRequestBy:this.delay||0,preventBadQueries:!1,triggerSelectOnValidInput:!1,autoSelectFirst:!0,minChars:this.minChars||1,serviceUrl:this.url,type:this.getType(),params:this.getParams(),paramName:this.getQueryParam(),ajaxSettings:{dataType:"json"}}),pluginOptions},setOptions:function(options){return this.applyPlugin("setOptions",[this.parseOptions(options)]),this},applyElement:function(action,params){var $element=this.$element;if($element)return $element[action].apply($element,params)},
applyPlugin:function(action,params){var $element=this.$element,$plugin=$element&&$element[this.pluginName]();if($plugin)return $plugin[action].apply($plugin,params)},showTooltipTooMany:function(){this.$element&&this.tooltip.show()},hideTooltipTooMany:function(){this.$element&&this.tooltip.hide()},trigger:function(eventName,params){return this.applyElement("triggerHandler",[adjustEventName(eventName),params])},on:function(eventName,callback){return this.applyElement("on",[adjustEventName(eventName),callback]),this},off:function(eventName,callback){return this.applyElement("off",[adjustEventName(eventName),callback]),this},getElement:function(){
return this.$element},hasTooManySuggestions:function(){return!!this.tooManySuggestions},getValue:function(){return this.value},setValue:function(value,label){return this.value=value,_.isUndefined(label)||this.setLabel(label),this},getLabel:function(){return this.label},setLabel:function(label){return this.label=label,this.$element&&this.$element.val(label),this},getOntology:function(){return this.ontology},setOntology:function(ontology){return this.ontology=ontology,this},getValueField:function(){return this.valueField},setValueField:function(valueField){return this.valueField=valueField,this},getLabelField:function(){return this.labelField},
setLabelField:function(labelField){return this.labelField=labelField,this},getIsProvider:function(){return this.isProvider},setIsProvider:function(isProvider){return this.isProvider=toBoolean(isProvider),this},getPreventSubmit:function(){return this.preventSubmit},setPreventSubmit:function(preventSubmit){return this.preventSubmit=toBoolean(preventSubmit),this},getParamsRoot:function(){return this.paramsRoot},setParamsRoot:function(paramsRoot){return this.paramsRoot=paramsRoot,this},getParams:function(){var params=_.merge({},this.params||{}),searchParams=params;return this.paramsRoot&&(searchParams=params[this.paramsRoot]||{},
params[this.paramsRoot]=searchParams),this.ontology&&(searchParams[this.ontologyParam]=this.ontology),params},setParams:function(params){return this.params=params,this},getQueryParam:function(){return this.adjustParam(this.queryParam)},setQueryParam:function(queryParam){return this.queryParam=queryParam,this},getOntologyParam:function(){return this.adjustParam(this.ontologyParam)},setOntologyParam:function(ontologyParam){return this.ontologyParam=ontologyParam,this},getUrl:function(){return this.url},setUrl:function(url){return this.url=url,this},getType:function(){return this.type||"GET"},setType:function(type){return this.type=type,this},getDelay:function(
){return this.delay},setDelay:function(delay){return this.delay=Math.max(0,Number(delay)),this},getMinChars:function(){return this.minChars},setMinChars:function(minChars){return this.minChars=Math.max(1,Number(minChars)),this},enable:function(){return this.applyPlugin("enable"),this},disable:function(){return this.applyPlugin("disable"),this},hide:function(){return this.applyPlugin("hide"),this},clear:function(){return this.tooManySuggestions=!1,this.applyPlugin("clear"),this},clearCache:function(){return this.applyPlugin("clearCache"),this},reset:function(){return this.setValue(null,""),this.clear(),this.applyPlugin("hide"),this},_onKeyEvent:function(event
){this.preventSubmit&&13===event.which&&event.preventDefault()},_onSelect:function(suggestion){var value=suggestion&&suggestion.data,label=suggestion&&suggestion.value;if(!1===this.trigger("beforeSelectItem",[value,label,this]))return!1;this.value=value,this.label=label,this.isProvider&&(this.$element.val(""),this.clear()),this.trigger("selectItem",[value,label,this])},_onSearchStart:function(params){var query,queryParam=this.getQueryParam();if(!1===this.trigger("searchStart",[params,this]))return!1;this.addWilcard&&params&&params[queryParam]&&("*"!==(query=params[queryParam]||"").substr(-1)&&(query+="*"),params[queryParam]=query)},
_onSearchComplete:function(query,suggestions){return suggestions&&suggestions.length||this.clear(),this.trigger("searchComplete",[query,suggestions,this])},_onSearchError:function(query,jqXHR,textStatus,errorThrown){return this.trigger("searchError",[query,jqXHR,textStatus,errorThrown,this])},_onInvalidateSelection:function(){return this.trigger("invalidateSelection",[this])},_onBeforeRender:function($container){this.trigger("beforeRender",[$container,this])},_onFocus:function(event){this.hasTooManySuggestions()&&this.showTooltipTooMany()},_onBlur:function(event){this.hideTooltipTooMany()},_transformResult:function(response){var self=this,results={
suggestions:[]};return _.isString(response)&&(response=JSON.parse(response)),response.records&&(results.suggestions=_.map(response.data,function(dataItem){return{value:dataItem[self.labelField],data:dataItem[self.valueField]}})),this.tooManySuggestions=response.total&&1<response.total,this.hasTooManySuggestions()?this.showTooltipTooMany():this.hideTooltipTooMany(),results},adjustParam:function(param){return this.paramsRoot&&(param=this.paramsRoot+"["+param+"]"),param}},adjustEventName=function(eventName){return _(eventName.split(" ")).map(function(name){return-1===(name=name.toLowerCase()).indexOf(".")&&(name+="."+NS),name}).join(" ")},toBoolean=function(
value){return _.isString(value)&&("false"!==value.toLowerCase()&&"0"!==value||(value=!1)),!!value};return function(element,options){var autocomplete=_.clone(autocompleter,!0);return _.defaults(autocomplete,defaults),autocomplete.init(element,options)}}),define("ui/autoscroll",["jquery","core/promise"],function($,Promise){"use strict";return function(element,container){return new Promise(function(resolve){var currentScrollTop,minScrollTop,maxScrollTop,scrollTop,$element=$(element),$container=$(container||$element.parent());$element.length&&$container.length?(currentScrollTop=$container.scrollTop(),minScrollTop=(maxScrollTop=$element.offset(
).top-$container.offset().top+currentScrollTop)-$container.height()+$element.outerHeight(),(scrollTop=Math.max(Math.min(maxScrollTop,currentScrollTop),minScrollTop))!==currentScrollTop?$container.animate({scrollTop:scrollTop}).promise().done(resolve):resolve()):resolve()})}}),define("ui/hider",["jquery","lodash","core/eventifier"],function($,_){"use strict";function jqWrap(element){return element instanceof $?element:$(element)}return{show:function(element){return jqWrap(element).removeClass("hidden")},hide:function(element){return jqWrap(element).addClass("hidden")},toggle:function(element,state){return void 0!==state&&(state=!state),jqWrap(element
).toggleClass("hidden",state)},isHidden:function(element,real){var $elt=jqWrap(element);return real?$elt.hasClass("hidden")||"none"===$elt.css("display")||"hidden"===$elt.css("visibility"):$elt.hasClass("hidden")}}}),define("tpl!ui/badge/tpl/badge",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="badge-component">\n    <div class="loader"></div>\n    <span class="badge-border"></span>\n    <span class="badge"></span>\n</div>'})}),define("css!ui/badge/css/badge",[],function(){}),define(
"ui/badge/badge",["jquery","lodash","i18n","ui/hider","ui/component","tpl!ui/badge/tpl/badge","css!ui/badge/css/badge"],function($,_,__,hider,component,badgeTpl){"use strict";var _defaults={loading:!1,type:"info",value:0},_allowedTypes=["success","warning","error","info"],badgeApi={update:function(config){var displayValue,$component=this.getElement(),$border=$component.find(".badge-border"),$badge=$component.find(".badge").removeClass("badge-info badge-success badge-warning badge-error icon-result-ok"),$loader=$component.find(".loader");if(_.assign(this.config,config),this.config&&this.config.value){if(displayValue=99<(displayValue=parseInt(this.config.value
,10))?"99+":displayValue,-1===_allowedTypes.indexOf(this.config.type))throw new Error("Invalid badge type : ".this.config.type);$badge.addClass("badge-"+this.config.type).html(displayValue),this.config.loading?(hider.show($loader),hider.hide($border)):(hider.hide($loader),hider.show($border))}else hider.hide($loader),hider.hide($border),$badge.addClass("icon-result-ok").empty();return this}};return function(config){var initConfig=_.defaults(config||{},_defaults);return component(badgeApi).setTemplate(badgeTpl).on("render",function(){this.update(this.config)}).init(initConfig)}}),define("tpl!ui/breadcrumbs/tpl/breadcrumbs",["handlebars"],function(hb){
return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program4(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <a href="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</a>\n        "}function program5(depth0,data){var stack1,helper,buffer="";return buffer+=" - ",stack1=(helper=helpers.data)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.data)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)}function program7(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <span class="a">',
stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</span>\n        "}function program9(depth0,data){var stack1,buffer="";return buffer+='\n        <ul class="entries plain">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.entries,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1
),buffer+="\n        </ul>\n        "}function program10(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <li data-breadcrumb="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n                <a href="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.data,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</a>\n            </li>\n            "}return buffer+='<ul class="breadcrumbs plain',((stack1=helpers.if.call(depth0,depth0&&depth0.cls,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.cls
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    ',((stack1=helpers.each.call(depth0,depth0&&depth0.breadcrumbs,{hash:{},inverse:self.noop,fn:self.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <li class="breadcrumb" data-breadcrumb="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.url,{hash:{},
inverse:self.program(7,program7,data),fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.entries,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </li>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</ul>"})}),define("ui/breadcrumbs",["jquery","lodash","i18n","ui/component","tpl!ui/breadcrumbs/tpl/breadcrumbs"],function($,_,__,component,breadcrumbsTpl){"use strict";var breadcrumbs={update:function(breadcrumbs){var $component,$oldComponent=this.getContainer()
;return this.config.breadcrumbs=breadcrumbs,this.trigger("update",breadcrumbs,this),$component=this.render(),$oldComponent&&(this.config.renderTo?this.config.replace||$oldComponent.remove():$oldComponent.replaceWith($component)),$component}},removeLastLink=function(){var breadcrumbs=this.config.breadcrumbs;breadcrumbs&&breadcrumbs.length&&((breadcrumbs=_.cloneDeep(this.config.breadcrumbs))[breadcrumbs.length-1].url=null,this.config.breadcrumbs=breadcrumbs)};return function(config){return component(breadcrumbs).on("init",removeLastLink).on("update",removeLastLink).setTemplate(breadcrumbsTpl).init(config)}}),define("ui/btngrouper",["jquery","lodash",
"core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";var ns="btngrouper",dataNs="ui."+ns,defaults={bindEvent:"click",activeClass:"active",disableClass:"disabled",innerElt:"li",action:"toggle"},availableActions=["toggle","switch"],BtnGrouper={init:function(options){return options=_.defaults(options||{},defaults),_.contains(availableActions,options.action)?this.each(function(){var $elt=$(this);if(!$elt.data(dataNs)){if($elt.data(dataNs,options),"toggle"===options.action){var $activeElt=$elt.find(options.innerElt+"."+options.activeClass);0===$activeElt.length?$elt.find(options.innerElt+":first").addClass(
options.activeClass):1<$activeElt.length&&$elt.find(options.innerElt+"."+options.activeClass).not(":first").removeClass(options.activeClass)}!1!==options.bindEvent&&$elt.on(options.bindEvent,options.innerElt,function(e){e.preventDefault();var action="_"+options.action;"function"==typeof BtnGrouper[action]&&BtnGrouper[action]($elt,$(this))}),$elt.trigger("create."+ns)}}):$.error("Action "+options.action+" not supported")},_toggle:function($elt){var options=$elt.data(dataNs);$elt.find(options.innerElt).toggleClass(options.activeClass),$elt.trigger("toggle."+ns).trigger("change")},_switch:function($elt,$target){var options=$elt.data(dataNs);$target.toggleClass(
options.activeClass),$elt.trigger("switch."+ns).trigger("change")},value:function(){var value=[];return this.each(function(){var $elt=$(this),options=$elt.data(dataNs),eltValue=$elt.find(options.innerElt).filter("."+options.activeClass).text();$.isArray(eltValue)?value.concat(eltValue):value.push(eltValue)}),1===value.length?value[0]:value},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent,options.innerElt),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,BtnGrouper,{expose:["toggle","switch"]}),function($container){new DataAttrHandler(
"button-group",{container:$container,inner:"li",bubbled:!0,listenerEvent:"click",namespace:dataNs,useTarget:!1}).init(function($elt,$target){$elt.on("create."+ns,function(e){e.namespace===ns&&$elt.btngrouper($elt.data("button-group"),$target)}),$elt.btngrouper({action:$elt.data("button-group")})})}}),define("tpl!ui/bulkActionPopup/tpl/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,
helperMissing=helpers.helperMissing,self=this;function program2(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <div class="single" data-resource="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.allowedResources)||!1===stack1?stack1:stack1[0])||!1===stack1?stack1:stack1.id)===functionType?stack1.apply(depth0):stack1)+'">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"The action will be applied to",options):helperMissing.call(depth0,"__","The action will be applied to",options)))+" ",stack1=(helper=helpers.resourceType
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceType)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+' <span class="resource-label">'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.allowedResources)||!1===stack1?stack1:stack1[0])||!1===stack1?stack1:stack1.label)===functionType?stack1.apply(depth0):stack1)+"</span>\n        </p>\n    </div>\n        "}function program4(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <div class="multiple">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"The action will be applied to the following",options):helperMissing.call(depth0,"__","The action will be applied to the following",options)))+' <span class="resource-count">',stack1=(helper=helpers.resourceCount)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceCount)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span> ",stack1=(helper=helpers.resourceTypes)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceTypes)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+':\n        </p>\n        <ul class="plain applicables">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.allowedResources,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n    </div>\n        "}function program5(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <li data-resource="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'">\n                <span class="resource-label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n            </li>\n            "}function program8(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <div class="single" data-resource="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.deniedResources)||!1===stack1?stack1:stack1[0])||!1===stack1?stack1:stack1.id)===functionType?stack1.apply(depth0):stack1
)+'">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"The action will not be applied to ",options):helperMissing.call(depth0,"__","The action will not be applied to ",options)))+" ",stack1=(helper=helpers.resourceType)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceType)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+' <span class="resource-label">'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.deniedResources)||!1===stack1?stack1:stack1[0]
)||!1===stack1?stack1:stack1.label)===functionType?stack1.apply(depth0):stack1)+"</span>\n        </p>\n    </div>\n        "}function program10(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n    <p>\n        "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"The action will not be applied to the following",options):helperMissing.call(depth0,"__","The action will not be applied to the following",options)))+" ",stack1=(helper=helpers.resourceTypes)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resourceTypes)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+':\n    </p>\n    <ul class="plain no-applicables">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.deniedResources,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </ul>\n        "}function program11(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <li data-resource="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <span class="resource-label">',
stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span>\n            <span class="reason">(',stack1=(helper=helpers.reason)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.reason)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+")</span>\n        </li>\n            "}return buffer+='<div class="bulk-action-popup">\n    <h2 class="title">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0
,"Action",options):helperMissing.call(depth0,"__","Action",options)))+": ",stack1=(helper=helpers.actionName)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.actionName)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h2>\n\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.resourceCount,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+="\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.single,{hash:{},inverse:self.program(4,program4,data),fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    \n    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.deniedResources)||!1===stack1?stack1:stack1.length,{hash:{},inverse:self.noop,fn:self.program(7,function(depth0,data){var stack1,buffer="";return buffer+="\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.singleDenied,{hash:{},inverse:self.program(10,program10,data),fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    \n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.reason,{hash:{},
inverse:self.noop,fn:self.program(13,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <div class="reason">\n        <p>\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Please provide a reason",options):helperMissing.call(depth0,"__","Please provide a reason",options)))+':\n        </p>\n        <div class="categories"></div>\n        <div class="comment">\n            <textarea placeholder="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"comment...",options):helperMissing.call(depth0,"__","comment...",
options)))+'"></textarea>\n        </div>\n    </div>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    \n    <div class="actions">\n        <button class="btn btn-info small done">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"OK",options):helperMissing.call(depth0,"__","OK",options)))+'</button>\n        <a href="#" class="btn cancel" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"cancel the action",options):helperMissing.call(depth0,"__","cancel the action",options)))+'">'+escapeExpression((options={hash:{},
data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"cancel",options):helperMissing.call(depth0,"__","cancel",options)))+"</a>\n    </div>\n    \n</div>"})}),define("util/namespace",["lodash"],function(_){"use strict";var reSplit=/\s/g,namespaceHelper={split:function(names,normalize){return!_.isString(names)||_.isEmpty(names)?[]:(normalize&&(names=names.toLowerCase()),_(names.trim().split(reSplit)).compact().uniq().value())},getName:function(namespaced){return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(0,namespaced.indexOf(".")):namespaced},getNamespace:function(namespaced,defaultNs){
return!_.isString(namespaced)||_.isEmpty(namespaced)?"":-1<namespaced.indexOf(".")?namespaced.substr(namespaced.indexOf(".")+1):defaultNs||"@"},namespaceAll:function(names,namespace,normalize){var suffix;return _.isArray(names)||(names=namespaceHelper.split(names,normalize)),normalize&&(namespace=namespace.toLowerCase()),suffix=namespace?"."+namespace:"",_(names).map(function(sh){return sh.indexOf(".")<0?sh+suffix:sh}).compact().uniq().value().join(" ")}};return namespaceHelper}),define("util/shortcut/registry",["jquery","lodash","util/namespace"],function($,_,namespaceHelper){"use strict";var modifiers={ctrl:"ctrlKey",alt:"altKey",option:"altKey",
shift:"shiftKey",meta:"metaKey",cmd:"metaKey",win:"metaKey"},translateKeys={escape:"esc",arrowdown:"down",arrowleft:"left",arrowright:"right",arrowup:"up"},specialKeys={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"meta",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",145:"scrolllock",144:"numlock"};function registerEvent(target,eventName,listener){target.addEventListener?target.addEventListener(eventName,listener,!1
):target.attachEvent?target.attachEvent("on"+eventName,listener):target["on"+eventName]=listener}function unregisterEvent(target,eventName,listener){target.removeEventListener?target.removeEventListener(eventName,listener,!1):target.detachEvent?target.detachEvent("on"+eventName,listener):target["on"+eventName]=null}function normalizeCommand(descriptor){var key=translateKeys[descriptor.key]||descriptor.key,parts=[];return descriptor.ctrlKey&&parts.push("control"),descriptor.altKey&&parts.push("alt"),descriptor.shiftKey&&parts.push("shift"),descriptor.metaKey&&parts.push("meta"),descriptor.scrollDown&&parts.push("scrollDown"),descriptor.scrollUp&&parts.push(
"scrollUp"),descriptor.clickLeft&&parts.push("clickLeft"),descriptor.clickRight&&parts.push("clickRight"),descriptor.clickMiddle&&parts.push("clickMiddle"),descriptor.clickBack&&parts.push("clickBack"),descriptor.clickForward&&parts.push("clickForward"),key&&parts.indexOf(key)<0&&parts.push(key),parts.join("+")}function parseCommand(shortcut){var parts=namespaceHelper.getName(shortcut).split("+"),descriptor={keyboardInvolved:!1,mouseClickInvolved:!1,mouseWheelInvolved:!1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,key:null,scrollUp:null,scrollDown:null,clickLeft:null,clickRight:null,clickMiddle:null,clickBack:null,clickForward:null};return _.forEach(parts,
function(part){if(modifiers[part])descriptor[modifiers[part]]=!0;else if(0<=part.indexOf("mouse")){if(descriptor.keyboardInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");0<=part.indexOf("scroll")&&(descriptor.mouseWheelInvolved=!0,descriptor.scrollUp=0<=part.indexOf("up"),descriptor.scrollDown=0<=part.indexOf("down")),0<=part.indexOf("click")&&(descriptor.mouseClickInvolved=!0,descriptor.clickLeft=0<=part.indexOf("left"),descriptor.clickRight=0<=part.indexOf("right"),descriptor.clickMiddle=0<=part.indexOf("middle"),descriptor.clickBack=0<=part.indexOf("back"),descriptor.clickForward=0<=part.indexOf("forward"))}else{if(
descriptor.mouseClickInvolved||descriptor.mouseWheelInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");descriptor.keyboardInvolved=!0,descriptor.key=part}}),descriptor}return function(root,defaultOptions){var keyboardIsRegistered=!1,mouseClickIsRegistered=!1,mouseWheelIsRegistered=!1,keyboardCount=0,mouseClickCount=0,mouseWheelCount=0,shortcuts={},handlers={},states={};function getHandlers(command,namespace){return handlers[namespace]=handlers[namespace]||{},handlers[namespace][command]=handlers[namespace][command]||[],handlers[namespace][command]}function getCommandHandlers(command){return _.reduce(handlers,function(acc,
nsHandlers){return nsHandlers[command]&&(acc=acc.concat(nsHandlers[command])),acc},[])}function setOptions(descriptor,options){descriptor.options=_.defaults(_.merge(descriptor.options||{},options),defaultOptions)}function unregisterKeyboard(){--keyboardCount<=0&&(keyboardCount=0,keyboardIsRegistered&&(unregisterEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!1))}function unregisterMouseClick(){--mouseClickCount<=0&&(mouseClickCount=0,mouseClickIsRegistered&&(unregisterEvent(root,"click",onMouseClick),mouseClickIsRegistered=!1))}function unregisterMouseWheel(){--mouseWheelCount<=0&&(mouseWheelCount=0,mouseWheelIsRegistered&&(unregisterEvent(root,
"wheel",onMouseWheel),mouseWheelIsRegistered=!1))}function registerCommand(command,descriptor){(shortcuts[command]=descriptor).keyboardInvolved&&(keyboardIsRegistered||(registerEvent(root,"keydown",onKeyboard),keyboardIsRegistered=!0),keyboardCount++),descriptor.mouseClickInvolved&&(mouseClickIsRegistered||(registerEvent(root,"click",onMouseClick),mouseClickIsRegistered=!0),mouseClickCount++),descriptor.mouseWheelInvolved&&(mouseWheelIsRegistered||(registerEvent(root,"wheel",onMouseWheel),mouseWheelIsRegistered=!0),mouseWheelCount++)}function onKeyboard(event){processShortcut(event,{keyboardInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,
shiftKey:event.shiftKey,metaKey:event.metaKey,key:function(event){var code=event.which||event.keyCode,character=32<=code?String.fromCharCode(code).toLowerCase():"",key=event.key&&event.key.toLowerCase(),keyName=event.code&&event.code.toLowerCase();return keyName&&(0===keyName.indexOf("key")?(key<"a"||"z"<key)&&"a"<=character&&character<="z"&&(key=character):0===keyName.indexOf("digit")&&(key=keyName.substr(5))),specialKeys[code]||key||character}(event)})}function onMouseClick(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,metaKey:event.metaKey},function(event){var buttons={
clickLeft:!1,clickRight:!1,clickMiddle:!1,clickBack:!1,clickForward:!1};if(event.buttons)buttons.clickLeft=!!(1&event.buttons),buttons.clickRight=!!(2&event.buttons),buttons.clickMiddle=!!(4&event.buttons),buttons.clickBack=!!(8&event.buttons),buttons.clickForward=!!(16&event.buttons);else switch(event.button){case 0:buttons.clickLeft=!0;break;case 1:buttons.clickMiddle=!0;break;case 2:buttons.clickRight=!0;break;case 3:buttons.clickBack=!0;break;case 4:buttons.clickForward=!0}return buttons}(event)))}function onMouseWheel(event){processShortcut(event,_.merge({mouseClickInvolved:!0,ctrlKey:event.ctrlKey,altKey:event.altKey,shiftKey:event.shiftKey,
metaKey:event.metaKey},function(event){return{scrollUp:event.deltaY<0,scrollDown:0<event.deltaY}}(event)))}function processShortcut(event,descriptor){var shortcutHandlers,$target,command=normalizeCommand(descriptor),shortcut=shortcuts[command];if(shortcut&&!states.disabled){if(!0===shortcut.options.avoidInput&&($target=$(event.target)).closest('[type="text"],textarea').length&&(!shortcut.options.allowIn||!$target.closest(shortcut.options.allowIn).length))return;!1===shortcut.options.propagate&&event.stopPropagation(),!0===shortcut.options.prevent&&event.preventDefault(),(shortcutHandlers=getCommandHandlers(command))&&_.forEach(shortcutHandlers,function(
handler){handler(event,command)})}}return root.jquery&&(root=root.get(0)),{set:function(shortcut,options){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor)}),this},add:function(shortcut,handler,options){return _.isFunction(handler)&&_.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),descriptor=parseCommand(normalized),command=normalizeCommand(descriptor);setOptions(descriptor,options),registerCommand(command,descriptor),
getHandlers(command,namespace).push(handler)}),this},remove:function(shortcut){return _.forEach(namespaceHelper.split(shortcut,!0),function(normalized){var namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(parseCommand(normalized));!function(command,namespace){namespace&&!command?handlers[namespace]={}:_.forEach(handlers,function(nsHandlers,ns){!nsHandlers[command]||"*"!==namespace&&namespace!==ns||(nsHandlers[command]=[])})}(command,namespace),getCommandHandlers(command).length||function(command){var descriptor=shortcuts[command];shortcuts[command]=null,descriptor&&(descriptor.keyboardInvolved&&unregisterKeyboard(),
descriptor.mouseClickInvolved&&unregisterMouseClick(),descriptor.mouseWheelInvolved&&unregisterMouseWheel())}(command)}),this},exists:function(shortcut){var normalized=String(shortcut).trim().toLowerCase(),namespace=namespaceHelper.getNamespace(normalized,"*"),command=normalizeCommand(parseCommand(normalized)),shortcutExists=!1;return shortcuts[command]?shortcutExists="*"===namespace||!!getHandlers(command,namespace).length:command||(shortcutExists=!_.isEmpty(handlers[namespace])),shortcutExists},clear:function(){return shortcuts={},handlers={},mouseWheelCount=mouseClickCount=keyboardCount=0,unregisterKeyboard(),unregisterMouseClick(),unregisterMouseWheel(),
this},getState:function(name){return!!states[name]},setState:function(name,state){return states[name]=!!state,this},enable:function(){return this.setState("disabled",!1),this},disable:function(){return this.setState("disabled",!0),this}}}}),define("ui/keyNavigation/navigator",["jquery","lodash","core/eventifier","util/shortcut/registry"],function($,_,eventifier,shortcutRegistry){"use strict";var _navigationGroups={},_ns=".ui-key-navigator",_defaults={defaultPosition:0,keepState:!1,replace:!1,loop:!1,propagateTab:!0},keyNavigatorFactory=function(config){var id,navigables,keyNavigator,$group,_cursor={position:-1,navigable:null},getCurrentCursor=function(){
var isFocused=!1;return document.activeElement&&_.forEach(navigables,function(navigable,index){if(navigable.isVisible()&&navigable.isEnabled()&&(document.activeElement===navigable.getElement().get(0)||(!$(document.activeElement).hasClass("key-navigation-highlight")||$(document.activeElement).data("key-navigatior-id")!==id)&&$.contains(navigable.getElement().get(0),document.activeElement)))return _cursor.position=index,_cursor.navigable=navigable,!(isFocused=!0)}),isFocused?_cursor:null},getClosestPositionRight=function(fromPosition){var pos;for(pos=fromPosition;pos<navigables.length;pos++)if(navigables[pos]&&navigables[pos].isVisible(
)&&navigables[pos].isEnabled())return pos;return-1},getClosestPositionLeft=function(fromPosition){var pos;for(pos=fromPosition;0<=pos;pos--)if(navigables[pos]&&navigables[pos].isVisible()&&navigables[pos].isEnabled())return pos;return-1};if(config=_.defaults(config||{},_defaults),id=config.id||_.uniqueId("navigator_"),navigables=config.elements||[],_navigationGroups[id]){if(!config.replace)throw new TypeError("the navigation group id is already in use : "+id);_navigationGroups[id].destroy()}if(_.each(navigables,function(navigable){navigable.init(),navigable.getElement().data("key-navigatior-id",id)}),config.group){if(!($group=$(config.group)).length
)throw new TypeError("group element does not exist");$group.addClass("key-navigation-group").attr("data-navigation-id",id)}return keyNavigator=eventifier({getId:function(){return id},getGroup:function(){return $group},isFocused:function(){return!!getCurrentCursor()},next:function(){var pos,cursor=getCurrentCursor();return cursor?(0<=(pos=getClosestPositionRight(cursor.position+1))?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionRight(0)):this.trigger("upperbound"),this.trigger("next",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},previous:function(){var pos,cursor=getCurrentCursor();return cursor?(0<=(
pos=getClosestPositionLeft(cursor.position-1))?this.focusPosition(pos):config.loop?this.focusPosition(getClosestPositionLeft(navigables.length-1)):this.trigger("lowerbound"),this.trigger("previous",getCurrentCursor())):this.focusPosition(getClosestPositionRight(0)),this},activate:function(target){var cursor=getCurrentCursor();return cursor&&this.trigger("activate",cursor,target),this},goto:function(groupId){return _navigationGroups[groupId]?_navigationGroups[groupId].focus():this.trigger("error",new Error("goto an unknown navigation group")),this},focus:function(originNavigator){var pos
;return config.keepState&&_cursor&&0<=_cursor.position?pos=_cursor.position:_.isFunction(config.defaultPosition)?(pos=config.defaultPosition(navigables))<0&&(pos=0):pos=config.defaultPosition,this.focusPosition(getClosestPositionRight(pos),originNavigator),this},focusPosition:function(position,originNavigator){return navigables[position]&&(_cursor.navigable&&this.trigger("blur",this.getCursor(),originNavigator),_cursor.position=position,navigables[_cursor.position].focus(),_cursor.navigable=navigables[_cursor.position],this.trigger("focus",this.getCursor(),originNavigator)),this},first:function(){return this.focusPosition(getClosestPositionRight(0)),this},
last:function(){return this.focusPosition(getClosestPositionLeft(navigables.length-1)),this},destroy:function(){return _.each(navigables,function(navigable){navigable.getElement().off(_ns),navigable.destroy(),navigable.shortcuts&&navigable.shortcuts.clear()}),delete _navigationGroups[id],this},blur:function(){var cursor=this.getCursor();return cursor&&cursor.navigable&&cursor.navigable.getElement().blur(),this},getCursor:function(){return _.clone(_cursor)},getNavigables:function(){return _.clone(navigables)}}),_.each(navigables,function(navigable){if(!((navElement=navigable)&&_.isFunction(navElement.init)&&_.isFunction(navElement.destroy)&&_.isFunction(
navElement.getElement)&&_.isFunction(navElement.isVisible)&&_.isFunction(navElement.isEnabled)&&_.isFunction(navElement.focus)))throw new TypeError("not a valid navigable element");var navElement;navigable.shortcuts=shortcutRegistry(navigable.getElement()).add("tab shift+tab",function(e,key){keyNavigator.trigger(key,e.target)},{propagate:!!config.propagateTab,prevent:!0}).add("enter",function(e){$(e.target).is(":text,textarea")||(e.preventDefault(),keyNavigator.activate(e.target))},{propagate:!1}).add("up down left right",function(e,key){var $target=$(e.target);$target.is(":text,textarea")||($target.is("img")||$target.hasClass("key-navigation-scrollable"
)||e.preventDefault(),keyNavigator.trigger(key,e.target))},{propagate:!1}),navigable.getElement().on("keyup"+_ns,function(e){32===(e.keyCode?e.keyCode:e.charCode)&&(e.target!==this&&$(e.target).is(":input")?e.stopPropagation():(e.preventDefault(),keyNavigator.activate(e.target)))}).on("blur"+_ns,function(){var cursor=keyNavigator.getCursor();cursor&&cursor.navigable&&keyNavigator.trigger("blur",cursor)})}),_navigationGroups[id]=keyNavigator};return keyNavigatorFactory.get=function(id){if(_navigationGroups[id])return _navigationGroups[id]},keyNavigatorFactory}),define("ui/keyNavigation/navigableDomElement",["jquery","lodash","core/eventifier"],function($,_,
eventifier){"use strict";var navigableDomElement=function($element){return $element=$($element),eventifier({init:function(){if(!$element.length)throw new TypeError("dom element does not exist");return $element.attr("tabindex",-1),$element.addClass("key-navigation-highlight"),this},destroy:function(){return $element.removeClass("key-navigation-highlight"),this},getElement:function(){return $element},isVisible:function(){return $element.is(":visible")},isEnabled:function(){return!$element.is(":disabled")},focus:function(){return $element.focus(),this}})};return navigableDomElement.createFromDoms=function($elements){var list=[];return $elements.each(function(){
list.push(navigableDomElement($(this)))}),list},navigableDomElement}),define("util/shortcut",["util/shortcut/registry"],function(shortcutRegistry){"use strict";return shortcutRegistry(window,{propagate:!1,prevent:!0})}),define("ui/modal",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,DataAttrHandler){"use strict";var dataNs="ui.modal",defaults={modalCloseClass:"modal-close",modalOverlayClass:"modal-bg",startClosed:!1,disableClosing:!1,width:"responsive",minWidth:0,minHeight:0,vCenter:!0,$context:null,animate:400},modal={init:function(options){return(options=$.extend(!0,{},defaults,options)).animate&&(
"number"!=typeof options.animate?options.animate=defaults.animate:options.animate=Math.max(100,options.animate)),$(this).each(function(){var $modal=$(this);if(options.modalOverlay="__modal-bg-"+($modal.attr("id")||(new Date).getTime()),$modal.data(dataNs,options),0===$("#"+options.modalOverlay).length){var $overlay=$("<div/>").attr({id:options.modalOverlay,class:options.modalOverlayClass});options.$context instanceof $&&options.$context.length?($overlay.css("position","absolute"),options.$context.append($overlay)):$modal.after($overlay)}0!==$("."+options.modalCloseClass,$modal).length||options.disableClosing||$(
'<div class="'+options.modalCloseClass+'"><span class="icon-close"></span></div>').appendTo($modal),options.startClosed||modal._open($modal),$modal.trigger("create.modal")})},_destroy:function($element){return $element.each(function(){var $modal=$(this),options=$modal.data(dataNs);$modal.removeData(dataNs),$("#"+options.modalOverlay).remove(),$modal.hide(),$element.trigger("destroyed.modal")})},_bindEvents:function($element){var options=$element.data(dataNs);options&&("responsive"===options.width&&$(window).on("resize.modal",function(e){e.preventDefault(),modal._resize($element)}),options.disableClosing||($("."+options.modalCloseClass,$element).on(
"click.modal",function(e){e.preventDefault(),closeModal($element,"close")}),$("#"+options.modalOverlay).on("click.modal",function(e){e.preventDefault(),closeModal($element,"overlay")}),options.disableEscape||$(document).on("keydown.modal",function(e){27===e.keyCode&&(e.preventDefault(),closeModal($element,"escape"))})))},_unBindEvents:function($element){var options=$element.data(dataNs);options&&"responsive"===options.width&&$(window).off("resize.modal"),$element.off("click.modal"),options&&!options.disableClosing&&($("."+options.modalCloseClass,$element).off("click.modal"),$("#"+options.modalOverlay).off("click.modal"),$(document).off("keydown.modal"))},
_open:function($element){var topOffset,onOpen,$overlay,to,modalHeight=$element.outerHeight(),windowHeight=$(window).height(),options=$element.data(dataNs);void 0!==options&&(onOpen=function(){$element.addClass("opened"),modal._bindEvents($element),$element.trigger("opened.modal")},topOffset=options.top?options.top:options.vCenter||windowHeight<modalHeight?40:(windowHeight-modalHeight)/2,options.top||$element.parent().hasClass("no-scroll-offset")||$element.parents().map(function(){"BODY"!==this.tagName&&"HTML"!==this.tagName&&(topOffset+=parseInt($(this).scrollTop(),10))}),to={opacity:"1",top:topOffset+"px"},modal._resize($element),$overlay=$(
"#"+options.modalOverlay),$element.show(),options.animate&&$element.is(":visible")?($element.css({top:"-"+modalHeight+"px",display:"block"}),$overlay.fadeIn(options.animate-100),$element.animate(to,options.animate,onOpen)):($overlay.show(),$element.css(to),onOpen()))},_close:function($element){closeModal($element,"api")},_resize:function($element){var options=$element.data(dataNs),windowWidth=parseInt($(window).width(),10),css={},modalWidth="responsive"===options.width?.7*windowWidth:parseInt(options.width,10);css.width=Math.max(modalWidth,options.minWidth),options.minHeight&&(css.minHeight=parseInt(options.minHeight)+"px"),$element.css(css)}}
;function closeModal($element,reason){var options=$element.data(dataNs),$overlay=$("#"+options.modalOverlay),onClose=function(){$element.removeClass("opened"),$element.css("display","none"),$element.trigger("closed.modal",reason)};modal._unBindEvents($element),options.animate&&$element.is(":visible")?($overlay.fadeOut(options.animate-100),$element.animate({opacity:"0",top:"-1000px"},options.animate,onClose)):($overlay.hide(),$element.hide(),onClose())}return Pluginifier.register("modal",modal,{expose:["open","close","destroy"]}),function($container){new DataAttrHandler("modal",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,
$target){$target.modal()})}}),define("ui/bulkActionPopup",["jquery","lodash","i18n","tpl!ui/bulkActionPopup/tpl/layout","ui/component","ui/keyNavigation/navigator","ui/keyNavigation/navigableDomElement","util/shortcut/registry","util/shortcut","util/namespace","ui/modal","select2"],function($,_,__,layoutTpl,component,keyNavigator,navigableDomElement,shortcutRegistry,globalShortcut,namespaceHelper){"use strict";var _ns="bulk-action-popup";return function(config){var state={reasons:null,comment:""},instance=component({validate:function(){var $error,$element=this.getElement();return $element&&($(".feedback-error",$element).remove(),0!==$("select, textarea",
$element).filter(function(){return 0===$.trim($(this).val()).length}).length)?($error=$('<div class="feedback-error small"></div>').text(__("All fields are required")),$element.find(".actions").prepend($error),!1):(this.trigger("ok",state),this.destroy(),!0)},cancel:function(){this.trigger("cancel"),this.destroy()}}).setTemplate(layoutTpl).on("destroy",function(){globalShortcut.enable(),this.dialogShortcut&&(this.dialogShortcut.disable(),this.dialogShortcut.clear(),this.dialogShortcut=null),this.navigator&&(this.navigator.destroy(),this.navigator=null),this.getElement().removeClass("modal").modal("destroy")}).on("action-ok",function(){this.validate()}).on(
"action-cancel",function(){this.cancel()}).on("render",function(){var $reason,modalConfig,self=this,$element=this.getElement();modalConfig={disableEscape:!0,width:!this.config.single||this.config.deniedResources.length||this.config.reason?800:600},instance.getElement().addClass("modal").on("closed.modal",function(){instance.destroy()}).modal(modalConfig).focus(),_.isObject(this.config.categoriesSelector)&&($reason=$element.find(".reason").children(".categories"),this.config.categoriesSelector.render($reason)),$element.on(namespaceHelper.namespaceAll("selected.cascading-combobox",_ns),function(e,reasons){state.reasons=reasons,
self.config.allowShortcuts&&initNavigator(),self.trigger("change",state)}).on(namespaceHelper.namespaceAll("change",_ns),"textarea",function(){state.comment=$(this).val(),self.trigger("change",state)}).on(namespaceHelper.namespaceAll("click",_ns),".actions .done",function(e){e.preventDefault(),self.trigger("action-ok")}).on(namespaceHelper.namespaceAll("click",_ns),".actions .cancel",function(e){e.preventDefault(),self.trigger("action-cancel")}),this.config.allowShortcuts&&(initNavigator(),globalShortcut.disable(),this.dialogShortcut=shortcutRegistry($("body"),{avoidInput:!0,propagate:!1,prevent:!0}).add(namespaceHelper.namespaceAll("Tab",_ns,!0),function(){
self.navigator.next()},{avoidInput:!1}).add(namespaceHelper.namespaceAll("Shift+Tab",_ns,!0),function(){self.navigator.previous()},{avoidInput:!1}).add(namespaceHelper.namespaceAll("esc",_ns,!0),function(e,shortcut){instance.trigger("action-cancel",shortcut)}).add(namespaceHelper.namespaceAll("enter",_ns,!0),function(e,shortcut){instance.trigger("action-ok",shortcut)}))});function initNavigator(){var $element=instance.getElement();instance.navigator=keyNavigator({id:_ns,replace:!0,loop:!0,group:$element,defaultPosition:1,elements:navigableDomElement.createFromDoms($element.find(":input:not(button,select.select2-offscreen)").add($element))}).on("activate",
function(cursor,target){$(target).is($element)&&instance.validate()}).focus()}return instance.init(_.defaults(config,{deniedResources:[],reason:!1,allowShortcuts:!0,reasonRequired:!1,resourceCount:config.allowedResources.length,single:1===config.allowedResources.length,singleDenied:config.deniedResources&&1===config.deniedResources.length,resourceTypes:config.resourceType+"s"}))}}),define("tpl!ui/button/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",
escapeExpression=this.escapeExpression;return buffer+='<button class="',((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="btn-",stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)},data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.small,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){return" small"},data),data:data}))||0===stack1)&&(
buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.cls,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.cls)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((
stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(7,function(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon icon-',stack1=(helper=helpers.icon
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <span class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n</button>"})}),define("ui/button",["lodash","ui/component","tpl!ui/button/tpl/button"],function(_,component,buttonTpl){"use strict";var defaults={small:!0};return function(config){
return component({getId:function(){return this.config.id}},defaults).setTemplate(buttonTpl).on("render",function(){var self=this;this.getElement().on("click",function(e){e.preventDefault(),self.trigger("click",self.config.id)})}).init(config)}}),define("ui/stacker",["jquery"],function($){"use strict";var ns=".stacker",indexes={};function isElementValid($element){return $element instanceof $&&$element.length}return function(scope){return function(scope){indexes[scope]||(indexes[scope]=1e3)}(scope=scope||"global"),{bringToFront:function($element){isElementValid($element)&&!function($element,scope){return parseInt($element.css("z-index"),10)>=indexes[scope]}(
$element,scope)&&($element.get(0).style.zIndex=function(scope){return indexes[scope]+=10,indexes[scope]}(scope))},autoBringToFront:function($element){var self=this;isElementValid($element)&&($element.off("mousedown"+ns),$element.on("mousedown"+ns,function(){self.bringToFront($element)}))},reset:function($element){isElementValid($element)&&($element.get(0).style.zIndex="auto")},getCurrent:function(){return indexes[scope]}}}}),define("ui/component/stackable",["lodash","ui/stacker"],function(_,stackerFactory){"use strict";var defaultConfig={stackingScope:""},stackableComponent={bringToFront:function(){var $element=this.getElement();this._stacker.bringToFront(
$element)}};return function(component,config){return _.assign(component,stackableComponent),component.off(".makeStackable").on("init.makeStackable",function(){_.defaults(this.config,config||{},defaultConfig),this._stacker=stackerFactory(this.config.stackingScope)}).on("show.makeStackable",function(){this.bringToFront()}).on("render.makeStackable",function(){var $element=this.getElement();this._stacker.reset($element),this._stacker.autoBringToFront($element),this.bringToFront()})}}),define("ui/interactUtils",["jquery","lodash","interact","core/mouseEvent"],function($,_,interact,triggerMouseEvent){"use strict";var simulateDrop;function iFrameDragFixCb(){
_.isFunction(simulateDrop)&&simulateDrop(),interact.stop()}return{iFrameDragFixOn:function(simulateDropCb){simulateDrop=simulateDropCb,document.body.addEventListener("mouseleave",iFrameDragFixCb)},iFrameDragFixOff:function(){document.body.removeEventListener("mouseleave",iFrameDragFixCb)},tapOn:function(element,cb,delay){var domElement,eventOptions={bubbles:!0};element&&(domElement=element instanceof $?element.get(0):element,triggerMouseEvent(domElement,"mousedown",eventOptions),triggerMouseEvent(domElement,"mouseup",eventOptions),cb&&_.delay(cb,delay||0))},moveElement:function(element,dx,dy){var domElement=element instanceof $?element.get(0):element,x=(
parseFloat(domElement.getAttribute("data-x"))||0)+dx,y=(parseFloat(domElement.getAttribute("data-y"))||0)+dy,transform="translate("+x+"px, "+y+"px) translateZ(0px)";domElement.style.webkitTransform=transform,domElement.style.transform=transform,domElement.setAttribute("data-x",x),domElement.setAttribute("data-y",y)},restoreOriginalPosition:function(element){var domElement=element instanceof $?element.get(0):element;domElement.style.webkitTransform="translate(0px, 0px) translateZ(0px)",domElement.style.transform="translate(0px, 0px) translateZ(0px)",domElement.setAttribute("data-x",0),domElement.setAttribute("data-y",0)}}}),define("util/position",[],function(
){"use strict";return{isInside:function(container,element){var containerCoords,elementCoords;if(container instanceof HTMLElement&&element instanceof HTMLElement&&(containerCoords=container.getBoundingClientRect(),elementCoords=element.getBoundingClientRect(),"object"==typeof containerCoords&&"object"==typeof elementCoords)
)return elementCoords.top>=containerCoords.top&&elementCoords.top<=containerCoords.bottom&&elementCoords.left>=containerCoords.left&&elementCoords.left<=containerCoords.right&&elementCoords.bottom<=containerCoords.bottom&&elementCoords.bottom>=containerCoords.top&&elementCoords.right<=containerCoords.right&&elementCoords.right>=containerCoords.left},isOver:function(container,element){var containerCoords,elementCoords;if(container instanceof HTMLElement&&element instanceof HTMLElement&&(containerCoords=container.getBoundingClientRect(),elementCoords=element.getBoundingClientRect(),"object"==typeof containerCoords&&"object"==typeof elementCoords)
)return elementCoords.top>=containerCoords.top&&elementCoords.top<=containerCoords.bottom&&elementCoords.left>=containerCoords.left&&elementCoords.left<=containerCoords.right}}}),define("tpl!ui/dynamicComponent/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="dynamic-component-container">\n    <div class="dynamic-component-title-bar">\n        <h3>',stack1=(helper=helpers.title
)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h3>\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.resizable,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var helper,options,buffer="";return buffer+='\n        <a title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Reset the original size",options):helperMissing.call(depth0,"__","Reset the original size",options)))+'" class="reset" href="#"></a>\n        '},data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+='\n        <a title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Close",options):helperMissing.call(depth0,"__","Close",options)))+'" class="closer" href="#"></a>\n    </div>\n    <div class="dynamic-component-content">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.draggableContainer,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){return'\n        <div class="dynamic-component-layer"></div>\n        '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>"})}),define("ui/dynamicComponent",["jquery","lodash",
"interact","ui/component","ui/component/stackable","ui/transformer","ui/interactUtils","util/position","lib/uuid","tpl!ui/dynamicComponent/layout"],function($,_,interact,componentFactory,makeStackable,transformer,interactUtils,position,uuid,layoutTpl){"use strict";var _defaults={title:"",resizable:!0,draggable:!0,width:240,height:360,minWidth:150,maxWidth:600,minHeight:100,maxHeight:900,largeWidthThreshold:380,smallWidthThreshold:200,draggableContainer:"parent",preserveAspectRatio:!0,top:0,left:0},dynamicComponent={reset:function(){return this.is("rendered")&&!this.is("disabled")&&(this.resetPosition(),this.resetSize(),this.trigger("reset")),this},
resetPosition:function(){var $element=this.getElement();return this.is("rendered")&&!this.is("disabled")&&(interactUtils.restoreOriginalPosition($element),this.setCoords(),$element.css({left:this.config.left,top:this.config.top}),this.trigger("move",this.position)),this},setCoords:function(){var $element=this.getElement();this.position.x=parseFloat($element.attr("data-x"))+this.config.left,this.position.y=parseFloat($element.attr("data-y"))+this.config.top},setContentSize:function(width,height){var $element,$titleBar;return this.is("rendered")&&!this.is("disabled")&&($element=this.getElement(),$titleBar=$(".dynamic-component-title-bar",$element),
this.config.width=width+$element.outerWidth()-$element.width(),this.config.height=height+$element.outerHeight()-$element.height()+$titleBar.outerHeight(),this.resetSize()),this},resetSize:function(){var $element,$content,$titleBar,self=this;return this.is("rendered")&&!this.is("disabled")&&($element=this.getElement(),$content=$(".dynamic-component-content",$element),$titleBar=$(".dynamic-component-title-bar",$element),$element.css({width:this.config.width+"px",height:this.config.height+"px"}),_.defer(function(){self.position.width=self.config.width,self.position.height=self.config.height,self.position.contentWidth=$titleBar.width(),
self.position.contentHeight=$element.height()-$titleBar.outerHeight(),$content.css({width:self.position.contentWidth+"px",height:self.position.contentHeight+"px"}),self.trigger("resize",self.position)})),this}};return function(specs,defaults){var component;return defaults=_.defaults(defaults||{},_defaults),specs=_.defaults(specs||{},dynamicComponent),component=componentFactory(specs,defaults).setTemplate(layoutTpl).on("init",function(){this.id=uuid()}).on("render",function(){var interactElement,self=this,$element=this.getElement(),config=this.config,$content=$(".dynamic-component-content",$element),$titleBar=$(".dynamic-component-title-bar",$element),
$contentOverlay=$(".dynamic-component-layer",$element),pixelRatio=window.devicePixelRatio;function getRestriction(){var draggableContainer=getDraggableContainer();return draggableContainer?{restriction:draggableContainer,endOnly:!1}:{restriction:"parent",endOnly:!1}}function getDraggableContainer(){var draggableContainer=config.draggableContainer;return draggableContainer instanceof $&&draggableContainer.length&&(draggableContainer=draggableContainer[0]),draggableContainer}self.position={x:this.config.left,y:this.config.top,width:this.config.width,height:this.config.height},this.resetPosition(),this.resetSize(),$titleBar.on("click touchstart",".closer",
function(e){e.preventDefault(),self.hide()}).on("click touchstart",".reset",function(e){e.preventDefault(),self.resetSize()}),this.trigger("rendercontent",$content),interactElement=interact($element[0]),config.draggable&&(interactElement.draggable({inertia:!1,autoScroll:!0,manualStart:!0,restrict:_.merge(getRestriction(),{elementRect:{left:0,right:1,top:0,bottom:1}}),onmove:function(event){interactUtils.moveElement($element,event.dx,event.dy)},onend:function(){self.setCoords()}}),interact($titleBar[0]).on("down",function(event){var interaction=event.interaction,handle=event.currentTarget;interaction.start({name:"drag",edges:{top:handle.dataset.top,
left:handle.dataset.left,bottom:handle.dataset.bottom,right:handle.dataset.right}},interactElement,$element[0])}),$(window).on("resize.dynamic-component-"+self.id,function(){var container;window.devicePixelRatio!==pixelRatio&&(pixelRatio=window.devicePixelRatio,container=getDraggableContainer(),!1===position.isInside(container,$element[0])&&self.resetPosition())})),config.resizable&&interactElement.resizable({preserveAspectRatio:config.preserveAspectRatio,autoScroll:!0,restrict:getRestriction(),edges:{left:!0,right:!0,bottom:!0,top:!0},onmove:function(e){
var width=e.rect.width<config.minWidth?config.minWidth:e.rect.width>config.maxWidth?config.maxWidth:e.rect.width,height=e.rect.height<config.minHeight?config.minHeight:e.rect.height>config.maxHeight?config.maxHeight:e.rect.height;width<=config.smallWidthThreshold?$element.addClass("small").removeClass("large"):width>=config.largeWidthThreshold?$element.addClass("large").removeClass("small"):$element.removeClass("small").removeClass("large"),interactUtils.moveElement($element,width>config.minWidth&&width<config.maxWidth?e.deltaRect.left:0,height>config.minHeight&&height<config.maxHeight?e.deltaRect.top:0),self.position.width=width,self.position.height=height,
self.setCoords(),$element.css({width:width+"px",height:height+"px"}),_.defer(function(){self.position.contentWidth=$titleBar.width(),self.position.contentHeight=$element.height()-$titleBar.outerHeight(),$content.css({width:self.position.contentWidth+"px",height:self.position.contentHeight+"px"}),self.trigger("resize",self.position)})}}),interactElement.on("dragstart resizeinertiastart resizestart",function(){$contentOverlay.addClass("dragging-active")}).on("dragend resizeend",function(){$contentOverlay.removeClass("dragging-active")}),$element.on("mousedown",function(){/\-resize/.test($("html").css("cursor"))&&!$contentOverlay.hasClass("dragging-active"
)&&$contentOverlay.addClass("dragging-active")})}).on("destroy",function(){$(window).off("resize.dynamic-component-"+this.id)}),makeStackable(component,{stackingScope:defaults.stackingScope})}}),define("tpl!lib/calculator/template",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},
'<div class="calcContainer">\n    <form action="">\n        <input type="text" class="calcDisplay" readonly="readonly"/>\n\n        <button type="button" value="%" data-key="%" class="calcFunction calcFirst calcPercentage">&#37;</button>\n        <button type="button" value="sqrt" data-key="sqrt" class="calcFunction calcSqrt">&radic;</button>\n        <button type="button" value="pow" data-key="pow" class="calcFunction calcPower">x<sup class="letter">y</sup></button>\n        <button type="button" value="1/x" data-key="1/x" class="calcFunction calcInverse"><sup class="digit">1</sup>&frasl;<sub>x</sub></button>\n\n        <button type="button" value="C" data-key="C" class="calcClear calcFirst">C</button>\n        <button type="button" value="CE" data-key="CE" class="calcClear">CE</button>\n        <button type="button" value="DEL" data-key="DEL" class="calcClear">DEL</button>\n        <button type="button" value="/" data-key="/" class="calcFunction calcDivision">&divide;</button>\n\n        <button type="button" value="7" data-key="7" class="calcInput calcDigit calcFirst">7</button>\n        <button type="button" value="8" data-key="8" class="calcInput calcDigit">8</button>\n        <button type="button" value="9" data-key="9" class="calcInput calcDigit">9</button>\n        <button type="button" value="*" data-key="*" class="calcFunction calcMultiplication">&times;</button>\n\n        <button type="button" value="4" data-key="4" class="calcFirst calcDigit calcInput">4</button>\n        <button type="button" value="5" data-key="5" class="calcInput calcDigit">5</button>\n        <button type="button" value="6" data-key="6" class="calcInput calcDigit">6</button>\n        <button type="button" value="-" data-key="-" class="calcFunction calcSubtraction">&minus;</button>\n\n        <button type="button" value="1" data-key="1" class="calcFirst calcDigit calcInput">1</button>\n        <button type="button" value="2" data-key="2" class="calcInput calcDigit">2</button>\n        <button type="button" value="3" data-key="3" class="calcInput calcDigit">3</button>\n        <button type="button" value="+" data-key="+" class="calcFunction calcSum">+</button>\n\n        <button type="button" value="+/-" data-key="+/-" class="calcFirst calcInput calcPlusMinus">&plusmn;</button>\n        <button type="button" value="0" data-key="0" class="calcInput calcDigit">0</button>\n        <button type="button" value="." data-key="." class="calcInput calcDot">.</button>\n        <input type="submit" value="=" data-key="=" class="calcFunction calcSubmit calcEqual"/>\n    </form>\n</div>'
})}),define("lib/gamp/gamp",[],function(){"use strict";function gamp(){for(var val,digits,point,i=arguments.length-1,factor=-1/0;0<=i;)factor=Math.max(factor,(val=arguments[i--],digits=void 0,digits=String(val),(point=digits.indexOf("."))<0?1:Math.pow(10,digits.length-point-1)));return Math.abs(factor)}return gamp.normalize=function(val,factor){return Math.round(factor*Number(val))},gamp.round=function(val,digits){return Number(Number(val).toPrecision(void 0===digits?16:digits))},gamp.add=function(a,b){var factor=gamp(a,b);return gamp.round((gamp.normalize(a,factor)+gamp.normalize(b,factor))/factor)},gamp.sub=function(a,b){var factor=gamp(a,b)
;return gamp.round((gamp.normalize(a,factor)-gamp.normalize(b,factor))/factor)},gamp.mul=function(a,b){var factor=gamp(a,b);return gamp.round(gamp.normalize(a,factor)*gamp.normalize(b,factor)/(factor*factor),15)},gamp.div=function(a,b){var factor=gamp(a,b);return gamp.round(gamp.normalize(a,factor)/gamp.normalize(b,factor))},gamp.pow=function(a,b){var factor=gamp(a),ta=gamp.normalize(a,factor),ib=Math.floor(b),fb=b-ib,res=ib?Math.pow(ta,ib)/Math.pow(factor,ib):1;return fb&&(res=gamp.div(gamp.mul(res,Math.pow(ta,fb)),Math.pow(factor,fb))),gamp.round(res,15)},gamp}),define("lib/calculator/index",["jquery","lodash","tpl!lib/calculator/template","i18n",
"lib/gamp/gamp"],function($,_,templateTpl,__,gamp){"use strict";var JSCALC={},calculators={},nextID=0,_defaults={template:templateTpl};function createCalc(calcMod,config){var calcTemplate,forms,form,display,operation,lastKeyDown,total=0,clearNext=!0,dot=/\./,lastNum=null,getLastNum=!1,operationPressed=!1,calcObj={},id=nextID;if(config=_.defaults(config||{},_defaults),!_.isFunction(config.template))throw new TypeError("invalid template in configuration");function setFocus(){display.focus()}function calculate(val){switch(total&&!isNaN(total)||(total=0),operation){case"+":total=gamp.add(total,val);break;case"-":total=gamp.sub(total,val);break;case"*":
total=gamp.mul(total,val);break;case"/":total=gamp.div(total,val);break;case"pow":total=gamp.pow(total,val)}display.value=total}function handleInput(e){var key,code,val,target,isOperation=!1;switch((e=e||window.event).type){case"keydown":switch(lastKeyDown=code=e.keyCode,code){case 27:key="C";break;case 8:key="DEL";break;case 46:key="CE";break;case 111:case 191:key="/";break;default:return!0}break;case"keypress":if(13===(code=e.charCode||e.keyCode)||9===code||37===lastKeyDown||39===lastKeyDown)return!0;if(27===code||8===code||46===lastKeyDown)return!1;key=188===lastKeyDown?".":String.fromCharCode(code).toLowerCase();break;case"click":if("INPUT"!==(
target=e.target||e.srcElement).tagName&&"BUTTON"!==target.tagName||"button"!==target.type)return!0;key=target.value;break;case"calculatorPressMethod":key=e.calckey;break;default:return!0}switch(val=parseFloat(display.value),key){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":clearNext?(display.value=key,clearNext=!1):"."===key&&dot.test(display.value)||(display.value+=key);break;case"*":case"+":case"-":case"/":case"pow":operationPressed||(0===total||null!==lastNum?total=val:calculate(val),clearNext=getLastNum=!(lastNum=null)),operation=key,isOperation=!0;break;case"C":display.blur(),total=0,lastNum=null,getLastNum=!(
clearNext=!(operation="")),display.value="0";break;case"CE":display.value="0",clearNext=!0;break;case"DEL":display.value=display.value.slice(0,display.value.length-1);break;case"+/-":display.value=gamp.mul(val,-1);break;case"%":val&&(display.value=gamp.div(gamp.mul(total,val),100));break;case"sqrt":display.value=0<=val?Math.sqrt(val):__("Invalid input for function");break;case"a":case"c":case"v":case"x":if(e.ctrlKey)return!0;break;case"1/x":case"r":display.value=val?gamp.div(1,val):__("Cannot divide by zero");break;case"=":form.onsubmit()}return operationPressed=isOperation,setFocus(),isOperation||$(display).trigger("change"),_initButtonHighlight(form,key),
!1}return calcTemplate=config.template.call(null),nextID+=1,calcMod.innerHTML+=calcTemplate,forms=calcMod.getElementsByTagName("form"),form=forms[forms.length-1],(display=form.getElementsByTagName("input")[0]).setAttribute("autocomplete","off"),display.value="0",display.onkeydown=display.onkeypress=form.onclick=handleInput,form.onsubmit=function(){return getLastNum&&(lastNum=parseFloat(display.value)||0,getLastNum=!1),calculate(lastNum),clearNext=!0,setFocus(),$(display).trigger("change"),_initButtonHighlight(form,"="),!1},calcObj.focus=function(){setFocus()},calcObj.press=function(button){var buttons,num,i;if("number"==typeof button)buttons=button.toString(
).split("");else{if("string"!=typeof button||!button)return this;buttons=[button]}for(num=buttons.length,i=0;i<num;i+=1)handleInput({type:"calculatorPressMethod",calckey:buttons[i]});return this},calcObj.remove=function(){display.onkeydown=display.onkeypress=form.onclick=null,calcMod.removeChild(form.parentNode),delete calculators[id],calcObj=null},calcObj.container=calcMod,calculators[id]=calcObj}function _initButtonHighlight(form,key){var $btn=$(form).find('[data-key="'+key+'"]');$btn.addClass("triggered"),setTimeout(function(){$btn.removeClass("triggered")},160)}return JSCALC.get=function(container){if(!container||1!==container.nodeType)return null;var id
,calc,calcs=calculators;for(id in calcs)if(calcs.hasOwnProperty(id)&&container===calcs[id].container){calc=calcs[id];break}return calc||null},JSCALC.getCalcs=function(){var id,calcArray=[],calcs=calculators;for(id in calcs)calcs.hasOwnProperty(id)&&(calcArray[calcArray.length]=calcs[id]);return calcArray},JSCALC.init=function(elem,config){var calcMod,len,i,calcMods=[],args=!1,newCalcs=[];if("string"==typeof elem&&(elem=document.getElementById(elem)),"object"==typeof elem&&1===elem.nodeType?(elem.className?-1===elem.className.indexOf("calc")&&(elem.className+=" calc"):elem.className="calc",calcMods[0]=elem,args=!0):elem instanceof $?elem.each(function(){
calcMods.push(this),args=!0}):$(".calc").each(function(){calcMods.push(this),args=!0}),len=calcMods.length)for(i=0;i<len;i+=1)calcMod=calcMods[i],JSCALC.get(calcMod)||(newCalcs[newCalcs.length]=createCalc(calcMod,config));return args?newCalcs[0]||null:newCalcs},JSCALC.removeAll=function(){var id,calcs=calculators;for(id in calcs)calcs.hasOwnProperty(id)&&calcs[id].remove()},JSCALC}),define("ui/calculator",["jquery","lodash","i18n","ui/dynamicComponent","lib/calculator/index"],function($,_,__,dynamicComponent,calculatorBuild){"use strict";var _defaults={title:__("Calculator"),preserveAspectRatio:!1,width:240,height:360,minWidth:150,minHeight:220,
alternativeTemplate:null},computeFontSize=function(width,height){return(width*(10/240)+height*(10/340))/2},calculator={press:function(key){return this.calc.press(key),this}};function adjustFontSize($text,fontRatio,fontSize){var len,width=$text.width(),height=$text.height(),charWidth=fontSize/fontRatio;$text.is(":input")?width<=(len=$text.val().length)*charWidth&&(fontSize=Math.max(height/4,Math.min(width/len*(fontRatio||1.6),fontSize))):fontSize=computeFontSize(width,height),$text.css("fontSize",fontSize)}return function(config){return config=_.defaults(config||{},_defaults),dynamicComponent(calculator).on("rendercontent",function($content){var $input,
$element,$sample,fontRatio,self=this,calcConfig={};_.isFunction(config.alternativeTemplate)&&(calcConfig.template=config.alternativeTemplate),this.calc=calculatorBuild.init($content,calcConfig),$input=$content.find("input.calcDisplay").on("change",function(){adjustFontSize($input,self.fontRatio,self.fontSize)}),this.fontSize=parseFloat($input.css("font-size")),this.fontRatio=($element=$input,$sample=$("<div />").text("0").css({"font-family":$element.css("font-family"),"font-size":"10px","line-height":"10px",position:"absolute",padding:"0",top:-1e3,left:-1e3}).appendTo("body"),fontRatio=$sample.height()/$sample.width(),$sample.remove(),fontRatio)}).after(
"show",function(){var self=this;_.defer(function(){var $display=self.getElement().find(".calcDisplay"),strLength=$display.val().length+1;$display.focus(),$display[0].setSelectionRange(strLength,strLength)})}).on("reset",function(){this.calc.press("C")}).on("resize",function(){var $element=this.getElement();$element&&(adjustFontSize($element.find("form"),this.fontRatio,this.fontSize),adjustFontSize($element.find("input.calcDisplay"),this.fontRatio,this.fontSize))}).on("destroy",function(){this.calc&&this.calc.remove()}).init(config)}}),define("tpl!ui/bulkActionPopup/tpl/select",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<span class="cascading-combo-box">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.comboboxLabel,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="<label>",stack1=(helper=helpers.comboboxLabel)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.comboboxLabel)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</label>"
},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <select class="" data-id="',stack1=(helper=helpers.comboboxId)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.comboboxId)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-has-search="false">\n        <option></option>\n        ',((stack1=helpers.each.call(depth0,depth0&&depth0.options,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <option value="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-categories="',stack1=(helper=helpers.categories)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.categories)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</option>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </select>\n</span>"})}),define(
"ui/cascadingComboBox",["jquery","lodash","i18n","ui/component","tpl!ui/bulkActionPopup/tpl/select","select2"],function($,_,__,component,selectTpl){"use strict";var selectedValues={};return function(options){return component().on("render",function($container){if(_.isArray(options.categoriesDefinitions)&&_.isArray(options.categories)){var $comboBox=function createCombobox(level,categoriesDefinitions,categories){if(!categoriesDefinitions[level])throw"missing category definition on level : "+level;var _categories,$comboBox,categoryDef=categoriesDefinitions[level];if(categoryDef.id)return _categories=_.map(categories,function(cat){var _cat=_.clone(cat)
;return _cat.categories&&(_cat.categories=JSON.stringify(_cat.categories)),_cat}),$comboBox=$(selectTpl({comboboxId:categoryDef.id,comboboxLabel:categoryDef.label||"",options:_categories})),(categoriesDefinitions[level].$comboBox=$comboBox).on("change",function(){var subCategories,$subComboBox,$selected=$comboBox.find(":selected");selectedValues={},_.forEach(categoriesDefinitions,function(category,key){category.$comboBox&&level<key&&(category.$comboBox.remove(),category.$comboBox=null)}),subCategories=$selected.data("categories"),_.isArray(subCategories)&&subCategories.length&&($subComboBox=createCombobox(level+1,categoriesDefinitions,subCategories))&&(
categoriesDefinitions[level+1].$comboBox=$subComboBox,$comboBox.after($subComboBox)),_.forEach(categoriesDefinitions,function(value){if(value.$comboBox){var $select=value.$comboBox.find("select");selectedValues[value.id]=$select.val()}}),$comboBox.trigger("selected.cascading-combobox",[selectedValues])}),$comboBox.find("select").select2({dropdownAutoWidth:!0,placeholder:categoryDef.placeholder||__("select..."),minimumResultsForSearch:-1}),$comboBox}(0,options.categoriesDefinitions,options.categories);$container.append($comboBox)}}).init(options)}}),define("ui/ckeditor/dtdHandler",["lodash"],function(_){"use strict";return function(){var dtd,X,Y,P,F,FO,M,E,T,
DFO,dtdMode="html",dtds={},html5Only=["article","aside","bdi","command","datalist","details","dialog","figcaption","figure","footer","header","keygen","main","mark","meter","nav","output","progress","rp","rt","ruby","section","summary","time","wbr","hgroup"],getParentsOf=function(child){var element,parents=[];for(element in child=_normalizeElement(child),dtds[dtdMode])dtds[dtdMode].hasOwnProperty(element)&&0!==element.indexOf("$")&&child in dtds[dtdMode][element]&&parents.push(element);return parents},getChildrenOf=function(parent){return(parent=_normalizeElement(parent))in dtds[dtdMode]?_.keys(dtds[dtdMode][parent]):[]};function _normalizeElement(element){
if(_.isObject(element)&&!_.isArray(element)){if("nodeName"in element)return element.nodeName.toLowerCase();if(0 in element&&"nodeName"in element[0])return element[0].nodeName.toLowerCase()}else if(_.isString(element))return element.toLowerCase();throw new Error("Unknown element "+element)}return dtds.html=(X=_.extend,Y=function(source,removed){var i,name,substracted=_.cloneDeep(source);for(i=1;i<arguments.length;i++)for(name in removed=arguments[i])delete substracted[name];return substracted},F={},FO={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,
nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},M={command:1,link:1,meta:1,noscript:1,script:1,style:1},E={},DFO={center:1,dir:1,noframes:1},X(P={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},T={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),X(F,FO,P,DFO),X(dtd={a:Y(P,{a:1,button:1}),abbr:P,address:F,area:E,
article:X({style:1},F),aside:X({style:1},F),audio:X({source:1,track:1},F),b:P,base:E,bdi:P,bdo:P,blockquote:F,body:F,br:E,button:Y(P,{a:1,button:1}),canvas:P,caption:F,cite:P,code:P,col:E,colgroup:{col:1},command:E,datalist:X({option:1},P),dd:F,del:P,details:X({summary:1},F),dfn:P,div:X({style:1},F),dl:{dt:1,dd:1},dt:F,em:P,embed:E,fieldset:X({legend:1},F),figcaption:F,figure:X({figcaption:1},F),footer:F,form:F,h1:P,h2:P,h3:P,h4:P,h5:P,h6:P,head:X({title:1,base:1},M),header:F,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:E,html:X({head:1,body:1},F,M),i:P,iframe:T,img:E,input:E,ins:P,kbd:P,keygen:E,label:P,legend:P,li:F,link:E,map:F,mark:P,menu:X({li:1},F),
meta:E,meter:Y(P,{meter:1}),nav:F,noscript:X({link:1,meta:1,style:1},P),object:X({param:1},P),ol:{li:1},optgroup:{option:1},option:T,output:P,p:P,param:E,pre:P,progress:Y(P,{progress:1}),q:P,rp:P,rt:P,ruby:X({rp:1,rt:1},P),s:P,samp:P,script:T,section:X({style:1},F),select:{optgroup:1,option:1},small:P,source:E,span:P,strong:P,style:T,sub:P,summary:P,sup:P,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:F,textarea:T,tfoot:{tr:1},th:F,thead:{tr:1},time:Y(P,{time:1}),title:T,tr:{th:1,td:1},track:E,u:P,ul:{li:1},var:P,video:X({source:1,track:1},F),wbr:E,acronym:P,applet:X({param:1},F),basefont:E,big:P,center:F,dialog:E,dir:{li:1},
font:P,isindex:E,noframes:F,strike:P,tt:P},{$block:X({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},FO,DFO),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1,table:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,
meta:1,param:1,source:1,track:1,wbr:1},$inline:P,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:X({body:1,head:1,html:1},dtd.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,
textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),dtd),dtds.qti=function(){for(var element,listCnt,child,actCnt,action,tmp,intersection,actions=["remove","add"],actLnt=actions.length,overrides={pre:{add:[],remove:["img","object","big","small","sub","sup"]},table:{remove:["col"]}},qtiDtd=_.cloneDeep(dtds.html),h5Len=html5Only.length;h5Len--;)delete qtiDtd[html5Only[h5Len]];for(
element in qtiDtd)qtiDtd.hasOwnProperty(element)&&(intersection=_.intersection(_.keys(qtiDtd[element]),html5Only)).length&&(overrides[element]||(overrides[element]={remove:[]}),overrides[element].remove=overrides[element].remove.concat(intersection));for(element in overrides)if(overrides.hasOwnProperty(element)&&qtiDtd.hasOwnProperty(element))for(actCnt=0;actCnt<actLnt;actCnt++)if((action=actions[actCnt])in overrides[element])if(listCnt=overrides[element][action].length,"remove"!==action||"all"!==overrides[element][action])for(;listCnt--;)child=overrides[element][action][listCnt],tmp=_.cloneDeep(qtiDtd[element]),"remove"===action?(delete tmp[child],
qtiDtd[element]=tmp):"add"===action&&void 0!==qtiDtd[child]&&(tmp[child]=1,qtiDtd[element]=tmp[child]);else qtiDtd[element]={};return qtiDtd}(),{getDtd:function(){return dtds[dtdMode]},getChildrenOf:getChildrenOf,getParentsOf:getParentsOf,isChildOf:function(child,of){return _.contains(getChildrenOf(of),_normalizeElement(child))},isParentOf:function(parent,of){return _.contains(getParentsOf(of),_normalizeElement(parent))},getMode:function(){return dtdMode},setMode:function(mode){if("xhtml"===mode.toLowerCase()&&(mode="html"),!_.contains(["html","qti"],mode))throw new Error("Unknown mode "+mode);return dtdMode=mode,this}}}()}),define(
"ui/ckeditor/ckConfigurator",["jquery","lodash","ckeditor","ui/ckeditor/dtdHandler"],function($,_,ckeditor,dtdHandler){"use strict";var toolbarPresets,ckConfig,_switchDtd,originalConfig=_.cloneDeep(window.CKEDITOR.config);return ckConfig={disableAutoInline:!0,entities:!(toolbarPresets={inline:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar","TaoQtiTable","TaoTooltip"]},{name:"links",items:["Link"]}],flow:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar","TaoQtiTable","TaoTooltip"]},{name:"links",items:["Link"]}],block:[{name:"basicstyles",
items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["Image","SpecialChar","TaoQtiTable","TaoTooltip"]},{name:"links",items:["Link"]},{name:"styles",items:["Format"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Blockquote","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]}],extendedText:[{name:"basicstyles",items:["Bold","Italic","Underline","Subscript","Superscript"]},{name:"insert",items:["SpecialChar","TaoTab","TaoUnTab"]},{name:"paragraph",items:["NumberedList","BulletedList"]},{name:"clipboard",items:["Cut","Copy","Paste"]},{name:"history",items:["Undo","Redo"]},{name:"textcolor",items:["TextColor"]},{
name:"font",items:["Font"]},{name:"fontsize",items:["FontSize"]}],htmlField:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"exponent",items:["Subscript","Superscript"]},{name:"fontstyles",items:["TextColor","Font","FontSize"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"indent",items:["TaoTab","TaoUnTab"]},{name:"history",items:["Undo","Redo"]},{name:"list",items:["NumberedList","BulletedList"]},{name:"insert",items:["Link","SpecialChar"]}]}),entities_processNumerical:!0,autoParagraph:!1,extraPlugins:"confighelper",floatSpaceDockedOffsetY:0,forcePasteAsPlainText:!0,skin:"tao",
language:"en",removePlugins:"",linkShowAdvancedTab:!1,justifyClasses:["txt-lft","txt-ctr","txt-rgt","txt-jty"],linkShowTargetTab:!1,coreStyles_underline:{element:"span",attributes:{class:"txt-underline"}},coreStyles_highlight:{element:"span",attributes:{class:"txt-highlight"}},specialChars:["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";",["&lt;","Less than"],["&le;","Less than or equal to"],"&asymp;","=","&ne;",["&ge;","Greater than or equal to"],["&gt;","Greater than"],"?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^",
"_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;",
"&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"],
disableNativeTableHandles:!0},(_switchDtd=function(dtdMode){dtdHandler.setMode(dtdMode),window.CKEDITOR.dtd=dtdHandler.getDtd()})("qti"),{getConfig:function(editor,toolbarType,options){var toolbar,toolbars,config,dtdMode,positionedPlugins={};if("reset"===toolbarType)return originalConfig;for(toolbar in(options=options||{}).resourcemgr=options.resourcemgr||{},toolbars=_.clone(toolbarPresets,!0),"qti"!==(dtdMode=options.dtdMode||"html")&&0!==toolbarType.indexOf("qti")||(toolbarType=toolbarType.slice(3).toLowerCase(),ckConfig.allowedContent=!0,ckConfig.autoParagraph=!1,dtdMode="qti"),"qti"===dtdMode&&(options.qtiMedia&&(positionedPlugins.TaoQtiMedia={
insertAfter:"SpecialChar"}),options.qtiImage&&(positionedPlugins.TaoQtiImage={insertAfter:"SpecialChar"}),options.qtiInclude&&(positionedPlugins.TaoQtiInclude={insertAfter:"SpecialChar"}),options.underline&&(positionedPlugins.TaoUnderline={insertAfter:"Italic"}),options.highlight&&(options.underline?positionedPlugins.TaoHighlight={insertAfter:"TaoUnderline"}:positionedPlugins.TaoHighlight={insertAfter:"Italic"}),options.mathJax&&(positionedPlugins.TaoQtiMaths={insertAfter:"SpecialChar"})),options.toolbar&&(toolbars[toolbarType]=_.clone(options.toolbar)),toolbars)toolbars.hasOwnProperty(toolbar)&&(ckConfig["toolbar_"+toolbar]=toolbars[toolbar])
;return void 0!==toolbars[toolbarType]&&(ckConfig.toolbar=toolbars[toolbarType]),void 0!==options.positionedPlugins&&(options.positionedPlugins={}),!1!==options.positionedPlugins&&(positionedPlugins=_.assign(positionedPlugins,_.clone(options.positionedPlugins)),function(ckConfig,positionedPlugins){var itCnt,itLen,method,plugin,index,separator,idxItem,numToReplace,stringVal,i,tbCnt=ckConfig.toolbar.length,stringVals={};for(positionedPlugins=positionedPlugins||{},ckConfig.extraPlugins=function(positionedPluginArr,extraPlugins){for(var pluginIndex=positionedPluginArr.length,extraPluginArr=extraPlugins.split(",");pluginIndex--;
)positionedPluginArr[pluginIndex]=positionedPluginArr[pluginIndex].toLowerCase();return(extraPluginArr=_.compact(_.union(extraPluginArr,positionedPluginArr))).join(",")}(_.keys(positionedPlugins),ckConfig.extraPlugins),i=0;i<tbCnt;i++)_.isString(ckConfig.toolbar[i])&&(stringVals[i]=ckConfig.toolbar[i],ckConfig.toolbar[i]={items:[]});for(plugin in positionedPlugins){for(method=function(pluginProps){for(var propIndex=pluginProps.length;propIndex--;)if(0===pluginProps[propIndex].indexOf("insert")||"replace"===pluginProps[propIndex])return pluginProps[propIndex];throw new Error("Missing key insertBefore | insertAfter | replace in positionedPlugins")}(_.keys(
positionedPlugins[plugin])),idxItem=positionedPlugins[plugin][method].toLowerCase(),separator=positionedPlugins[plugin].separator||!1,index=-1;tbCnt--;){for(itLen=ckConfig.toolbar[tbCnt].items.length,itCnt=0;itCnt<itLen;itCnt++)if(ckConfig.toolbar[tbCnt].items[itCnt].toLowerCase()===idxItem){index=itCnt;break}if(-1<index){numToReplace="replace"===method?1:0,"insertAfter"===method&&index++,separator&&(ckConfig.toolbar[tbCnt].items.splice(index,numToReplace,"-"),index++),ckConfig.toolbar[tbCnt].items.splice(index,numToReplace,plugin);break}}tbCnt=ckConfig.toolbar.length}for(stringVal in stringVals)ckConfig.toolbar[stringVal]=stringVals[stringVal]}(ckConfig,
positionedPlugins)),config=_.assign({},_.cloneDeep(originalConfig),ckConfig,_.omit(options,["qtiImage","qtiInclude","underline","highlight","mathJax","toolbar","positionedPlugins"])),editor.on("focus",function(){_switchDtd(dtdMode)}),editor.on("instanceReady",function(e){$(e.editor.element.$).removeAttr("title")}),window.CKEDITOR.on("dialogDefinition",function(e){var linkTypes,wanted,linkIndex;if("link"===e.data.name){for(linkIndex=(linkTypes=e.data.definition.getContents("info").get("linkType").items).length;linkIndex--;)"anchor"===linkTypes[linkIndex][1]||(wanted=linkIndex);linkTypes.splice(wanted+1,1)}}),config}}}),define("tpl!ui/class/tpl/selector",[
"handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="class-selector">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.classUri,{hash:{},inverse:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <a href="#" class="selected truncate empty">',stack1=(helper=helpers.placeholder)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.placeholder
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n    "},data),fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <a href="#" class="selected truncate" data-uri="',stack1=(helper=helpers.classUri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.classUri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="options folded">\n        <ul>',((stack1=(helper=helpers.tree)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.tree)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</ul>\n    </div>\n</div>"})}),define("tpl!ui/class/tpl/listItem",["handlebars"],function(hb){
return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<li>\n    <a href="#" data-uri="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+'" title="',buffer+=escapeExpression(stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(
depth0,{hash:{},data:data}):helper)+'">',buffer+=escapeExpression(stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+"</a>\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.childList,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <ul>\n            ",((stack1=(helper=helpers.childList)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.childList)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),
buffer+="\n        </ul>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</li>"})}),define("css!ui/class/css/selector",[],function(){}),define("ui/class/selector",["jquery","lodash","i18n","ui/component","tpl!ui/class/tpl/selector","tpl!ui/class/tpl/listItem","css!ui/class/css/selector.css"],function($,_,__,component,selectorTpl,listItemTpl){"use strict";var defaultConfig={classes:[],placeholder:__("Select a class")};return function($container,config){var $selected,$options,classList={},buildTree=function(classes){return _.reduce(classes,function nodeToListItem(acc,node){var item;return node.uri&&node.label&&(item=_.clone(node),
classList[item.uri]=item,node.children&&node.children.length&&(item.childList=_.reduce(node.children,nodeToListItem,"")),acc+=listItemTpl(item)),acc},"")},classSelector=component({setValue:function(uri){return this.config.classUri===uri||_.isUndefined(classList[uri])||(this.config.classUri=uri,this.is("rendered")&&$selected.length&&($selected.text(classList[uri].label).attr({title:classList[uri].label,"data-uri":uri}).data("uri",uri).removeClass("empty"),this.trigger("change",uri,classList[uri]))),this},getValue:function(){return this.config.classUri},getClassNode:function(){var node=null;return this.config.classUri&&classList[this.config.classUri]&&(
node=classList[this.config.classUri]),node},empty:function(){return this.is("rendered")&&$selected.length&&this.config.classUri&&(this.config=_.omit(this.config,"classUri"),$selected.text(this.config.placeholder).removeAttr("title").data("uri",null).removeAttr("data-uri").addClass("empty"),this.trigger("change")),this},hasNode:function(node){var uri;return!(!node||!classList)&&(uri=_.isString(node)?node:node.uri,_.has(classList,uri))},removeNode:function(node){var uri;return!!this.hasNode(node)&&((uri=_.isString(node)?node:node.uri)===this.config.classUri&&this.empty(),classList=_.omit(classList,uri),this.is("rendered")&&$('[data-uri="'+uri+'"]',
this.getElement()).parent("li").remove(),!this.hasNode(node))},addNode:function(node,parentUri){var subTree,$parentNode;return this.is("rendered")&&node&&!this.hasNode(node)&&(subTree=buildTree([node]),parentUri&&($parentNode=$('[data-uri="'+parentUri+'"]',$options)),$parentNode&&$parentNode.length||($parentNode=$("[data-uri]:first-child",$options)),$parentNode.parent("li").children("ul").length?$parentNode.parent("li").children("ul").append(subTree):$parentNode.parent("li").append("<ul>"+subTree+"</ul>")),this},updateNode:function(node){return node&&node.uri&&this.hasNode(node)&&classList[node.uri].label!==node.label&&(classList[node.uri].label=node.label,
this.is("rendered")&&$('[data-uri="'+node.uri+'"]',this.getElement()).attr("title",node.label).text(node.label)),this},updateNodes:function(nodes){var self=this;return _.forEach(nodes,function(node){node.children&&self.updateNodes(node.children),self.updateNode(node)}),this}},defaultConfig).setTemplate(selectorTpl).on("init",function(){this.config.tree=buildTree(this.config.classes),this.config.classUri&&classList[this.config.classUri]&&(this.config.label=classList[this.config.classUri].label),this.render($container)}).on("render",function(){var self=this,$component=this.getElement();$selected=$(".selected",$component),$options=$(".options",$component),
$selected.on("click",function(e){e.preventDefault(),$options.toggleClass("folded")}),$options.on("click","a",function(e){e.preventDefault(),self.setValue($(this).data("uri")),$options.toggleClass("folded")})}).on("destroy",function(){classList={}});return _.defer(function(){classSelector.init(config)}),classSelector}}),define("ui/component/containable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){"use strict";var ns=".makeContainable",defaultConfig={},containableComponent={containIn:function($container,options){var self=this;return self.off("move"+ns).on("move"+ns,function(){self.off("move"+ns),self._containComponent(
$container,options),self.containIn($container,options)}),self},_containComponent:function($container,optionsParam){var options=optionsParam||{},position=this.getPosition(),size=this.getOuterSize(),containerSize_width=$container.innerWidth(),containerSize_height=$container.innerHeight(),newX=position.x,newY=position.y,paddingTop=options.paddingTop||options.padding||0,paddingRight=options.paddingRight||options.padding||0,paddingBottom=options.paddingBottom||options.padding||0,paddingLeft=options.paddingLeft||options.padding||0;position.x<paddingLeft?newX=0+paddingLeft:position.x+size.width>containerSize_width-paddingRight&&(
newX=containerSize_width-size.width-paddingRight),position.y<paddingTop?newY=0+paddingTop:position.y+size.height>containerSize_height-paddingBottom&&(newY=containerSize_height-size.height-paddingBottom),newX===position.x&&newY===position.y||(this.moveTo(newX,newY),this.trigger("contained",newX,newY))}};return function(component,config){return _.assign(component,containableComponent),makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(ns).on("init"+ns,function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("ui/component/draggable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){
"use strict";return function(component,config){return makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(".makeDraggable").on("init.makeDraggable",function(){_.defaults(this.config,config||{})}).on("render.makeDraggable",function(){var self=this,$element=this.getElement(),element=$element[0],rootNode=document.querySelector("html");this.config.dragRestriction||(this.config.dragRestriction=this.getContainer()[0]),interact(element).draggable({autoScroll:!0,restrict:{restriction:this.config.dragRestriction,elementRect:{left:0,right:1,top:0,bottom:1}},onmove:function(event){var xOffset=Math.round(event.dx),yOffset=Math.round(event.dy)
;self.moveBy(xOffset,yOffset),self.trigger("dragmove",xOffset,yOffset)}}).on("dragstart",function(){self.setState("moving",!0),self.trigger("dragstart")}).on("dragend",function(){self.setState("moving",!1),self.trigger("dragend")}),$element.off(".makeDraggable").on("click.makeDraggable",function(){_.delay(function(){self.is("sizing")||self.is("moving")||!rootNode||(rootNode.style.cursor="default")},25)})})}}),define("ui/component/resizable",["lodash","interact","ui/component/placeable"],function(_,interact,makePlaceable){"use strict";var defaultConfig={minWidth:50,minHeight:50,edges:{left:!0,right:!0,bottom:!0,top:!0}},resizableComponent={
_getCappedValue:function(value,min,max){var capped=value;return _.isUndefined(max)||_.isNull(max)||(capped=Math.min(capped,max)),_.isUndefined(min)||_.isNull(min)||(capped=Math.max(capped,min)),capped},resizeTo:function(newWidth,newHeight,resizeFromLeft,resizeFromTop){var currentSize,newX,newY,position,shouldMove=!1;return this.is("rendered")&&!this.is("disabled")&&(this.trigger("beforeresize",newWidth,newHeight,resizeFromLeft,resizeFromTop),currentSize=this.getSize(),newWidth=this._getCappedValue(newWidth,this.config.minWidth,this.config.maxWidth),newHeight=this._getCappedValue(newHeight,this.config.minHeight,this.config.maxHeight),
position=this.getPosition(),resizeFromLeft&&newWidth!==currentSize.width&&(newX=position.x+currentSize.width-newWidth,shouldMove=!0),resizeFromTop&&newHeight!==currentSize.height&&(newY=position.y+currentSize.height-newHeight,shouldMove=!0),shouldMove&&this.moveTo(newX||position.x,newY||position.y),this.setSize(newWidth,newHeight),position=this.getPosition(),this.trigger("resize",newWidth,newHeight,resizeFromLeft,resizeFromTop,position.x,position.y)),this}};return function(component,config){return _.assign(component,resizableComponent),makePlaceable.isPlaceable(component)||makePlaceable(component),component.off(".makeResizable").on("init.makeResizable",
function(){_.defaults(this.config,config||{},defaultConfig)}).on("render.makeResizable",function(){var self=this,element=this.getElement()[0];this.config.resizeRestriction||(this.config.resizeRestriction=this.getContainer()[0]),interact(element).resizable({autoScroll:!0,restrict:{restriction:this.config.resizeRestriction},edges:this.config.edges}).on("resizemove",function(event){self.resizeTo(event.rect.width,event.rect.height,event.edges.left,event.edges.top)}).on("resizestart",function(){self.setState("sizing",!0),self.trigger("resizestart")}).on("resizeend",function(){self.setState("sizing",!1),self.trigger("resizeend")})})}}),define(
"tpl!ui/component/tpl/window",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="window-component">\n    <div class="window-component-title-bar">\n        <div class="window-component-title">',buffer+=(0,this.escapeExpression)((helper=helpers.windowTitle)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.windowTitle)?helper.call(depth0,{hash:{},data:data}):helper
)+'</div>\n        <div class="window-component-controls"> </div>\n    </div>\n    <div class="window-component-body"></div>\n</div>'})}),define("ui/component/windowed",["lodash","i18n","jquery","ui/component/placeable","tpl!ui/component/tpl/window"],function(_,__,$,makePlaceable,windowTpl){"use strict";var eventNs=".windowed",cssNs=".window-component",defaultConfig={hasCloser:!0,hasBin:!1},controlsPresets={bin:{id:"bin",order:100,icon:"bin",description:__("Delete"),event:"delete"},closer:{id:"closer",order:200,icon:"result-nok",description:__("Close"),event:"close",onclick:function(){this.hide()}}},windowedComponentAPI={getControls:function(){
return this.getElement().find(cssNs+"-controls")},getTitle:function(){return this.getElement().find(cssNs+"-title")},getBody:function(){return this.getElement().find(cssNs+"-body")},addControl:function(controlOptions){if(!_.isString(controlOptions.id)||_.isEmpty(controlOptions.id))throw new Error("control must have an id");if(!_.isString(controlOptions.icon)||_.isEmpty(controlOptions.icon))throw new Error("control must have an icon");if(!(_.isFunction(controlOptions.onclick)||_.isString(controlOptions.event)&&""!==controlOptions.event.trim()))throw new Error("control must have valid onclick or event parameter");return _.isArray(this._windowControls)||(
this._windowControls=[]),this._windowControls.push(controlOptions),this},addPresets:function(){return this.config.hasCloser&&this.addControl(controlsPresets.closer),this.config.hasBin&&this.addControl(controlsPresets.bin),this},_renderControls:function(){var self=this,$controlsArea=this.getControls(),controlsCallbacks={},controlsEvents={};return _.isArray(this._windowControls)&&($controlsArea.empty(),this._windowControls.sort(function(a,b){return(a.order||0)-(b.order||0)}),this._windowControls.forEach(function(control){var $control=$("<button>",{class:"icon-"+control.icon,"data-control":control.id,title:control.description});$controlsArea.append($control),
controlsCallbacks[control.id]=control.onclick,controlsEvents[control.id]=control.event}),$controlsArea.off("click"+eventNs).on("click"+eventNs,function(e){var controlId=$(e.target).data("control");e.stopPropagation(),_.isFunction(controlsCallbacks[controlId])&&controlsCallbacks[controlId].call(self),_.isString(controlsEvents[controlId])&&self.trigger(controlsEvents[controlId])})),this}};return function(component,config){return _.assign(component,windowedComponentAPI),makePlaceable.isPlaceable(component)||makePlaceable(component),component.setTemplate(windowTpl).off(eventNs).on("init"+eventNs,function(){_.defaults(this.config,config||{},defaultConfig),
this.addPresets()}).on("render"+eventNs,function(){this._renderControls()}).on("destroy"+eventNs,function(){this.getControls().off(eventNs)})}}),define("ui/container",["jquery","lodash"],function($,_){"use strict";function getCssClass(selector){var parts;return parts=[],_.forEach(selector.split(" "),function(elem){elem&&"."===elem.charAt(0)&&parts.push(elem.substr(1))}),parts.join(" ")}return function(containerSelector){var $container,containerCls;return{init:function(cssScope){if(!cssScope||!_.isString(cssScope))throw new TypeError("You must provide a CSS scope for the container manager!");return containerCls=getCssClass(cssScope),$container=$(
containerSelector=cssScope),this},destroy:function(){return $container=null,this},hasScope:function(scope){return!(!$container||!$container.is(scope))},changeScope:function(scope){return $container&&($container.removeClass().addClass(containerCls),scope&&$container.addClass(getCssClass(scope))),this},find:function(selector){return $container.find(selector)},write:function(content){return $container.html(content),this},getData:function(){return $container.data()},setData:function(data){return $container.removeData().data(data),this},removeData:function(){return $container.removeData(),this},hasValue:function(name){var data=this.getData();return void 0!==(
data&&data[name])},getValue:function(name){var data=this.getData();return data&&data[name]},setValue:function(name,value){return $container.data(name,value),this},getElement:function(){return $container},getSelector:function(){return containerSelector}}.init(containerSelector||".container")}}),define("tpl!ui/contextualPopup/popup",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){
return'<button class="btn btn-info small done">done</button>'}function program4(depth0,data){var helper,options,buffer="";return buffer+='<a href="#" class="btn cancel" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"cancel",options):helperMissing.call(depth0,"__","cancel",options)))+'">cancel</a>'}return buffer+='<div class="contextual-popup" style="top:'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.popup)||!1===stack1?stack1:stack1.top)?stack1.apply(depth0):stack1)+"px; left:"+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.popup
)||!1===stack1?stack1:stack1.left)?stack1.apply(depth0):stack1)+'px">\n    <div class="arrow" style="left:'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.arrow)||!1===stack1?stack1:stack1.left)?stack1.apply(depth0):stack1)+'px"></div>\n    <div class="arrow-cover" style="left:'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.arrow)||!1===stack1?stack1:stack1.leftCover)?stack1.apply(depth0):stack1)+'px"></div>\n    <div class="popup-content">',((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.content)?helper.call(depth0,{hash:{},data:data}
):helper)||0===stack1)&&(buffer+=stack1),buffer+='</div>\n    <div class="footer">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.controls,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+="\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.controls)||!1===stack1?stack1:stack1.done,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.controls)||!1===stack1?stack1:stack1.cancel,{hash:{},inverse:self.noop,fn:self.program(4,program4,data
),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>"})}),define("ui/contextualPopup",["jquery","lodash","tpl!ui/contextualPopup/popup"],function($,_,popupTpl){"use strict";var _ns=".contextual-popup",_defaults={controls:!1,style:{},position:"bottom",callbacks:{}};function _hide($element){$element.hide(),$element.trigger("hide"+_ns)}function _done($element){_hide($element),$element.trigger("done"+_ns)}function _cancel($element){_hide($element),$element.trigger("cancel"+_ns)}var _styleDefaults={popupWidth:500,arrowWidth:6,marginTop:15,marginLeft:15}
;function _computePosition($anchor,$container){var $contextualPopup=$anchor.children(".contextual-popup"),options=$anchor.data("contextual-popup-options"),styleOpts=_.defaults(options.style||{},_styleDefaults),popupWidth=styleOpts.popupWidth,popupHeight=$contextualPopup.outerHeight(),arrowWidth=styleOpts.arrowWidth,marginTop=styleOpts.marginTop,marginLeft=styleOpts.marginLeft,_anchor_left=($anchor.offset().top,$anchor.offset().left),_anchor_w=$anchor.innerWidth(),_anchor_h=$anchor.innerHeight(),_container_left=($container.offset().top,$container.offset().left),_container_w=$container.innerWidth(),_popup={top:_anchor_h+marginTop,
left:-popupWidth/2+_anchor_w/2,w:popupWidth};switch(options.position){case"top":_popup.top=-marginTop-popupHeight,$contextualPopup.removeClass("bottom").addClass("top");break;case"bottom":_popup.top=_anchor_h+marginTop,$contextualPopup.removeClass("top").addClass("bottom")}var offset=_anchor_left-_container_left;return offset+marginLeft+_anchor_w/2<_popup.w/2?_popup.left=-offset+marginLeft:_container_w-(offset+_anchor_w/2+marginLeft)<_popup.w/2&&(_popup.left=-offset+_container_w-marginLeft-_popup.w),{popup:_popup,arrow:{left:-_popup.left+_anchor_w/2-arrowWidth,leftCover:-_popup.left+_anchor_w/2-arrowWidth-6}}}return function($anchor,$container,options){
var destroyed=!1;options=_.defaults(options,_defaults),$anchor.data("contextual-popup-options",options);var positions=_computePosition($anchor,$container),$element=$(popupTpl({popup:positions.popup,arrow:positions.arrow,controls:options.controls}));function setContent(content){(content instanceof $||_.isString(content))&&$element.find(".popup-content").empty().append(content)}function runCallback(name){var result=!0;return options.callbacks[name]&&_.isFunction(options.callbacks[name])&&(result=options.callbacks[name]()),result}$anchor.find(".contextual-popup").remove(),$element.addClass(options.position),$element.css("width",options.style.popupWidth),
$anchor.append($element),$element.off(_ns).on("click"+_ns,".done",function(){runCallback("beforeDone")&&_done($element)}).on("click"+_ns,".cancel",function(){runCallback("beforeCancel")&&_cancel($element)}),options.content&&setContent(options.content);var popup={getPopup:function(){return $element},setContent:setContent,reposition:function(){var pos=_computePosition($anchor,$container);$element.css({top:pos.popup.top,left:pos.popup.left}),$element.children(".arrow").css("left",pos.arrow.left),$element.children(".arrow-cover").css("left",pos.arrow.leftCover)},done:function(){_done($element)},cancel:function(){_cancel($element)},hide:function(){_hide($element)
},show:function(){$element.show(),$element.trigger("show"+_ns)},destroy:function(){destroyed||(runCallback("beforeDestroy"),destroyed=!0,$element.remove(),$element.trigger("destroy"+_ns))},isVisible:function(){return $element.is(":visible")}};return popup.reposition(),popup}}),define("tpl!ui/datalist/tpl/main",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program3(depth0,
data){return" hidden"}function program6(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <button class="btn-info small ',((stack1=helpers.if.call(depth0,depth0&&depth0.massAction,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+=">\n                ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n            </button>\n            "}function program7(depth0,data){return" mass-action hidden"}function program9(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program11(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>'}function program13(depth0,data){return"\n                <col/>\n                "}return buffer+='<div class="datalist">\n    <h1 ',((stack1=helpers.unless.call(depth0,
depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){return'class="hidden"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</h1>\n    <h2>\n        <span class="empty-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textEmpty,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">',stack1=(helper=helpers.textEmpty)?helper.call(depth0,{hash:{},
data:data}):typeof(helper=depth0&&depth0.textEmpty)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span>\n        <span class="available-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textNumber,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span class="label">',stack1=(helper=helpers.textNumber)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.textNumber)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'</span>: <span class="count"></span></span>\n        <span class="loading',((stack1=helpers.unless.call(depth0,depth0&&depth0.textLoading,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span>',stack1=(helper=helpers.textLoading)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.textLoading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span>...</span>\n    </h2>\n    <div class="list">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.tools,{hash:{},inverse:self.noop,fn:self.program(5,function(depth0,data){
var stack1,buffer="";return buffer+='\n        <aside class="action-bar clearfix">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.tools,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </aside>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n        <table class="matrix">\n            <colgroup>\n                ',((stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                <col/>\n                ",((
stack1=helpers.if.call(depth0,depth0&&depth0.actions,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </colgroup>\n            <thead>\n                <tr>\n                    ",((stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},inverse:self.noop,fn:self.program(15,function(depth0,data){return'\n                    <th class="checkboxes"><input type="checkbox" name="checkall" value="1" /></th>\n                    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n                    <th class="label">',stack1=(helper=helpers.labelText)?helper.call(
depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.labelText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</th>\n                    ",((stack1=helpers.if.call(depth0,depth0&&depth0.actions,{hash:{},inverse:self.noop,fn:self.program(17,function(depth0,data){var helper,options,buffer="";return buffer+='\n                    <th class="actions">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Actions",options):helperMissing.call(depth0,"__","Actions",options)))+"</th>\n                    "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                </tr>\n            </thead>\n            <tbody></tbody>\n        </table>\n    </div>\n</div>"})}),define("tpl!ui/datalist/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <td class="checkboxes"><input type="checkbox" name="cb[',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" value="1" /></td>\n    '}function program4(depth0,data,depth1,depth2){var stack1,buffer="";return buffer+='\n    <td class="actions">\n        ',((stack1=helpers.each.call(depth0,depth2&&depth2.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(5,program5,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </td>\n    "}function program5(depth0,data,depth2){var stack1,buffer="";return buffer+="\n            ",((stack1=helpers.with.call(depth0,depth2&&depth2.line,{hash:{},inverse:self.noop,
fn:self.programWithDepth(6,program6,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        "}function program6(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(7,program7,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            "}function program7(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                    ",((stack1=helpers.with.call(depth0,depth2,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                "}function program8(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <button class="btn-info small" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data
}))||0===stack1)&&(buffer+=stack1),buffer+="\n            ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n        </button>\n                    "}function program9(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program11(depth0,data){var stack1,helper,buffer=""
;return buffer+='<span class="icon icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>'}return(stack1=helpers.each.call(depth0,depth0&&depth0.list,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n<tr data-id="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    ',((
stack1=helpers.if.call(depth0,depth1&&depth1.selectable,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <td class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</td>\n    ",((stack1=helpers.if.call(depth0,depth1&&depth1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(4,program4,data,depth0,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</tr>\n"},data,depth0),data:data}))||0===stack1?stack1:""})}),
define("ui/datalist",["jquery","lodash","i18n","ui/component","tpl!ui/datalist/tpl/main","tpl!ui/datalist/tpl/list"],function($,_,__,component,mainTpl,listTpl){"use strict";var _defaults={keyName:"id",labelName:"label",labelText:__("Label"),title:!1,textNumber:__("Available"),textEmpty:__("There is nothing to list!"),textLoading:__("Loading"),selectable:!1},datalist={update:function(data){var count,self=this,controls=this.controls||{},config=this.config||{},$list=controls.$list,$numberValue=controls.$numberValue,renderData={selectable:config.selectable,actions:config.actions,list:[]},list=renderData.list;return this.setLoading(!0),$list&&($list.empty(),
data&&data.length?(_.forEach(data,function(line){var id=line[config.keyName],label=line[config.labelName];_.isFunction(config.labelTransform)&&(label=config.labelTransform.call(self,label,line)),list.push({id:id,label:label,line:line})}),$list.append(listTpl(renderData)),$numberValue&&(count=data.length,_.isFunction(config.countRenderer)&&(count=config.countRenderer.call(self,count)),$numberValue.text(count)),this.setState("empty",!1),this.setState("loaded",!0)):(this.setState("empty",!0),this.setState("loaded",!1)),controls.$checkboxes=this.controls.$list.find("td.checkboxes input"),controls.$massAction.toggleClass("hidden",!0),
this.pendingSelection&&this.setSelection(this.pendingSelection)),self.trigger("update",data),this.setLoading(!1),this},getSelection:function(){var $checkboxes=this.controls&&this.controls.$checkboxes,selection=[];return $checkboxes?$checkboxes.filter(":checked").each(function(){var id=$(this).closest("tr").data("id");id&&selection.push(id)}):this.pendingSelection&&(selection=this.pendingSelection),selection},setSelection:function(selection){var controls=this.controls||{},$list=controls.$list;return this.pendingSelection=$list?(controls.$checkboxes.prop("checked",!1),selection&&_.forEach(selection,function(id){$list.find(
'[data-id="'+id+'"] input[type="checkbox"]').prop("checked",!0)}),this._onSelection(),null):selection,this},_onSelection:function(){var controls=this.controls||{},$checkboxes=controls.$checkboxes,$checkAll=controls.$checkAll,$checked=$checkboxes.filter(":checked");$checked.length===$checkboxes.length?$checkAll.prop("checked",!0):$checkAll.prop("checked",!1),controls.$massAction.toggleClass("hidden",!$checked.length),this.trigger("select",this.getSelection())},setLoading:function(flag){return flag&&this.setState("loaded",!1),this.setState("loading",flag)},setTitle:function(title){var $title=this.controls&&this.controls.$title;return this.config.title=title,
$title&&(!1===title?$title.addClass("hidden"):$title.html(title).removeClass("hidden")),this},setTextNumber:function(text){var $numberLabel=this.controls&&this.controls.$numberLabel,$textAvailable=this.controls&&this.controls.$textAvailable;return this.config.textNumber=text,$numberLabel&&(!1!==text?$numberLabel.html(text).removeClass("hidden"):$textAvailable&&$textAvailable.addClass("hidden")),this},setTextEmpty:function(text){var $textEmpty=this.controls&&this.controls.$textEmpty;return this.config.textEmpty=text,$textEmpty&&(!1===text?$textEmpty.addClass("hidden"):$textEmpty.html(text).removeClass("hidden")),this},setTextLoading:function(text){
var $textLoading=this.controls&&this.controls.$textLoading;return this.config.textLoading=text,$textLoading&&(!1===text?$textLoading.addClass("hidden"):$textLoading.html(text).removeClass("hidden")),this}};return function(config,data){var initConfig=config||{},actions={},tools={};return initConfig.tools&&_.forEach(initConfig.tools,function(tool){tools[tool.id]=tool}),initConfig.actions&&_.forEach(initConfig.actions,function(action){actions[action.id]=action}),component(datalist,_defaults).setTemplate(mainTpl).on("destroy",function(){this.controls=null,this.pendingSelection=null}).on("render",function(){var self=this;this.controls={
$title:this.$component.find("h1"),$textEmpty:this.$component.find(".empty-list"),$textAvailable:this.$component.find(".available-list"),$textLoading:this.$component.find(".loading span"),$numberLabel:this.$component.find(".available-list .label"),$numberValue:this.$component.find(".available-list .count"),$actionBar:this.$component.find(".list .action-bar"),$massAction:this.$component.find(".list .mass-action"),$checkAll:this.$component.find(".list th.checkboxes input"),$checkboxes:this.$component.find(".list td.checkboxes input"),$list:this.$component.find(".list tbody")},this.controls.$actionBar.on("click","button",function(e){var buttonId=$(this).closest(
"button").data("control"),button=tools[buttonId],selection=self.getSelection();e.preventDefault(),button&&button.action&&button.action.call(self,selection,buttonId),self.trigger("tool",selection,buttonId)}),this.controls.$list.on("click","button",function(e){var $this=$(this),lineId=$this.closest("tr").data("id"),buttonId=$this.closest("button").data("control"),button=actions[buttonId];e.preventDefault(),button&&button.action&&button.action.call(self,lineId,buttonId),self.trigger("action",lineId,buttonId)}),this.setState("selectable",this.config.selectable),this.controls.$list.on("click","td.label",function(){var $checkbox;self.config.selectable&&((
$checkbox=$(this).closest("tr").find('input[type="checkbox"]')).prop("checked")?$checkbox.prop("checked",!1):$checkbox.prop("checked",!0),self._onSelection())}),this.controls.$list.on("click",'input[type="checkbox"]',function(){self._onSelection()}),this.controls.$checkAll.on("click",function(){var $checkboxes=self.controls.$checkboxes;this.checked?$checkboxes.prop("checked",!0):$checkboxes.prop("checked",!1),self._onSelection()}),data?this.update(data):(this.setState("empty",!0),this.setState("loaded",!1))}).init(initConfig)}}),define("tpl!ui/datatable/tpl/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,
data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program4(depth0,data){var stack1,helper;return stack1=(helper=helpers.empty)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.empty)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program6(depth0,data,depth2){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.labels
)||!1===stack1?stack1:stack1.empty)===functionType?stack1.apply(depth0):stack1)}function program8(depth0,data){var stack1,helper;return stack1=(helper=helpers.available)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.available)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program10(depth0,data,depth2){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.available)===functionType?stack1.apply(depth0):stack1)}function program12(depth0,data){var stack1,helper;return stack1=(
helper=helpers.loading)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.loading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program14(depth0,data,depth2){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.loading)===functionType?stack1.apply(depth0):stack1)}function program17(depth0,data){var stack1,buffer="";return buffer+='\n            <button class="btn-info small tool-',((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(20,program20,data),
fn:self.program(18,program18,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.massAction,{hash:{},inverse:self.noop,fn:self.program(22,program22,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n                <span class="icon-',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.program(28,program28,data),fn:self.program(26,program26,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"></span> ',((
stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.program(32,program32,data),fn:self.program(30,program30,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </button>\n        "}function program18(depth0,data){var stack1,helper;return stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program20(depth0,data){var stack1;return escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)}function program22(depth0,data){
return" invisible"}function program24(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program26(depth0,data){var stack1,helper;return stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program28(depth0,data){var stack1;return(stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},
inverse:self.program(20,program20,data),fn:self.program(18,program18,data),data:data}))||0===stack1?stack1:""}function program30(depth0,data){var stack1,helper;return stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program32(depth0,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.noop,fn:self.program(20,program20,data),data:data}))||0===stack1?stack1:""}function program34(depth0,data){return"\n                <col/>\n                "}function program41(
depth0,data){return' class="actions"'}function program43(depth0,data){var stack1,helper,buffer="";return buffer+=' class="sortable" data-sort-by="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.sorttype,{hash:{},inverse:self.noop,fn:self.program(44,program44,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' tabindex="0"'}function program44(depth0,data){var stack1,helper,buffer="";return buffer+='data-sort-type="',stack1=(helper=helpers.sorttype
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.sorttype)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program46(depth0,data){var stack1,helper,buffer="";return buffer+='\n                        <aside data-column="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="filter column\n                            ',((stack1=helpers.if.call(depth0,depth0&&depth0.customFilter,{hash:{},inverse:self.program(49,program49,data),
fn:self.program(47,program47,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                        </aside>\n                        "}function program47(depth0,data){var stack1,buffer="";return buffer+=' customInput" >\n                                ',((stack1=typeof(stack1=null==(stack1=depth0&&depth0.customFilter)||!1===stack1?stack1:stack1.template)===functionType?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+="\n                            "}function program49(depth0,data){var stack1,helper,buffer="";return buffer+=' ">\n                                <input type="text" value="" name="filter[',stack1=(
helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" placeholder="'+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.filterable)||!1===stack1?stack1:stack1.placeholder)===functionType?stack1.apply(depth0):stack1)+'">\n                                <button class="icon-find" type="button"></button>\n                            '}function program54(depth0,data){var stack1,helper,buffer="";return buffer+='\n                        <td class="checkboxes"><input type="checkbox" name="cb[',stack1=(helper=helpers.id
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" value="1" /></td>\n                        '}function program56(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                            ",((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:self.programWithDepth(73,program73,data,depth1),fn:self.programWithDepth(57,program57,data,depth0,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        "}function program57(depth0,data,depth1,depth2){var stack1,helper,buffer=""
;return buffer+='\n                            <td class="actions ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n                                ',((stack1=helpers.each.call(depth0,depth1&&depth1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(58,program58,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                            </td>\n                            "}function program58(depth0,data,depth3){var stack1,buffer=""
;return buffer+="\n                                    ",((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(71,program71,data),fn:self.programWithDepth(59,program59,data,depth3),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                                "}function program59(depth0,data,depth4){var stack1,buffer="";return buffer+="\n                                        ",((stack1=helpers.with.call(depth0,depth4,{hash:{},inverse:self.noop,fn:self.programWithDepth(60,program60,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                    "}function program60(depth0,data,
depth1){var stack1,buffer="";return buffer+="\n                                            ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(61,program61,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                        "}function program61(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.if.call(depth0,depth2&&depth2.disabled,{hash:{},inverse:self.programWithDepth(68,program68,data,depth2),fn:self.programWithDepth(62,program62,data,depth2),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+="\n                                            "}function program62(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                    ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(63,program63,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                                "}function program63(depth0,data){var stack1,helper,buffer="";return buffer+='\n                                <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' disabled="disabled">',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="</button>\n                                                    "}function program64(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '}function program66(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)}
function program68(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                    ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(69,program69,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                                "}function program69(depth0,data){var stack1,helper,buffer="";return buffer+='\n                                <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                    "}function program71(depth0,data){var stack1,buffer=""
;return buffer+='\n                                <button class="btn-info small '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                    "}function program73(depth0,data,depth2){var stack1,helper,options,buffer="";return buffer+='\n                            <td class="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',options={hash:{},data:data},stack1=(helper=helpers.property||depth0&&depth0.property)?helper.call(depth0,depth0&&depth0.id,depth2,options):helperMissing.call(depth0,"property",depth0&&depth0.id,depth2,options),options={hash:{},data:data},((
stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify)?helper.call(depth0,stack1,options):helperMissing.call(depth0,"dompurify",stack1,options))||0===stack1)&&(buffer+=stack1),buffer+="</td>\n                            "}function program75(depth0,data,depth2){var stack1,buffer="";return buffer+='\n                        <td class="actions">\n                            ',((stack1=helpers.each.call(depth0,null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(76,program76,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                        </td>\n                        "}function program76(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                ",((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(86,program86,data),fn:self.programWithDepth(77,program77,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                            "}function program77(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                                    ",((stack1=helpers.with.call(depth0,depth2,{hash:{},inverse:self.noop,fn:self.programWithDepth(78,program78,data,depth0),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+="\n                                "}function program78(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                        ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(79,program79,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                    "}function program79(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                                            ",((stack1=helpers.if.call(depth0,depth2&&depth2.disabled,{hash:{},inverse:self.programWithDepth(83,program83,data,
depth2),fn:self.programWithDepth(80,program80,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                        "}function program80(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(81,program81,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                            "}function program81(depth0,data){var stack1,helper,buffer="";return buffer+='\n                            <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(
depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' disabled="disabled">',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1
),buffer+="</button>\n                                                "}function program83(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(84,program84,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                            "}function program84(depth0,data){var stack1,helper,buffer="";return buffer+='\n                            <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                "}
function program86(depth0,data){var stack1,buffer="";return buffer+='\n                            <button class="btn-info small '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"><span class="icon-'+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"></span> '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+"</button>\n                                "}function program89(depth0,data){var stack1,buffer=""
;return buffer+='\n                <div class="empty">\n                    '+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.emptyText)===functionType?stack1.apply(depth0):stack1)+"\n                </div>\n            "}return buffer+='<div class="datatable-wrapper">\n\n    ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.filter,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+='\n    <aside class="filter" data-column="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options
)||!1===stack1?stack1:stack1.filter)||!1===stack1?stack1:stack1.columns)===functionType?stack1.apply(depth0):stack1)+'">\n        <input type="text" value="" name="filter" placeholder="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.filter)===functionType?stack1.apply(depth0):stack1)+'">\n        <button class="icon-find" type="button"></button>\n    </aside>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.with.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.status,{hash:{},
inverse:self.noop,fn:self.programWithDepth(3,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n    <h2>\n        <span class="empty-list hidden">',((stack1=helpers.if.call(depth0,depth0&&depth0.empty,{hash:{},inverse:self.programWithDepth(6,program6,data,depth1),fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='</span>\n        <span class="available-list hidden"><span class="text">',((stack1=helpers.if.call(depth0,depth0&&depth0.available,{hash:{},inverse:self.programWithDepth(10,program10,data,depth1),fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='</span>: <span class="count">',stack1=(helper=helpers.count)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.count)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span></span>\n        <span class="loading">',((stack1=helpers.if.call(depth0,depth0&&depth0.loading,{hash:{},inverse:self.programWithDepth(14,program14,data,depth1),fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="...</span>\n    </h2>\n    "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.if.call(depth0,null==(
stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.tools,{hash:{},inverse:self.noop,fn:self.program(16,function(depth0,data){var stack1,buffer="";return buffer+='\n    <aside class="action-bar clearfix">\n        ',((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.tools,{hash:{},inverse:self.noop,fn:self.program(17,program17,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </aside>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='\n\n    <div class="datatable-pagination-top"></div>\n\n    <div class="datatable-container">\n        <table class="matrix datatable">\n            <colgroup>\n                ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(34,program34,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.program(34,program34,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.program(36,function(depth0,data){return"\n                </col>\n                "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </colgroup>\n            <thead>\n                <tr>\n                    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(38,function(depth0,data){
return'\n                    <th class="checkboxes"><input type="checkbox" name="checkall" value="1" /></th>\n                    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.program(40,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n                    <th",((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:self.noop,fn:self.program(41,program41,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n                        <div ",((
stack1=helpers.if.call(depth0,depth0&&depth0.sortable,{hash:{},inverse:self.noop,fn:self.program(43,program43,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</div>\n                        ",((stack1=helpers.if.call(depth0,depth0&&depth0.filterable,{hash:{},inverse:self.noop,fn:self.program(46,program46,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    </th>\n                    "},data),data:data}))||0===stack1
)&&(buffer+=stack1),buffer+="\n                    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.program(51,function(depth0,data){var stack1,buffer="";return buffer+='\n                    <th class="actions">'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.actions)===functionType?stack1.apply(depth0):stack1)+"</th>\n                    "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                </tr>\n            </thead>\n            <tbody>\n                ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.dataset)||!1===stack1?stack1:stack1.data,{hash:{},inverse:self.noop,fn:self.programWithDepth(53,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n                    <tr data-item-identifier="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n                        ',((stack1=helpers.if.call(depth0,null==(
stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(54,program54,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",((stack1=helpers.each.call(depth0,null==(stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.programWithDepth(56,program56,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",((stack1=helpers.if.call(depth0,null==(stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(75,program75,data,depth1),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    </tr>\n                "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </tbody>\n        </table>\n        ",((stack1=helpers.unless.call(depth0,null==(stack1=depth0&&depth0.dataset)||!1===stack1?stack1:stack1.data,{hash:{},inverse:self.noop,fn:self.program(88,function(depth0,data){var stack1,buffer="";return buffer+="\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.emptyText,{hash:{},inverse:self.noop,fn:self.program(89,program89,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="datatable-pagination-bottom"></div>\n</div>'})}),define("tpl!ui/datatable/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer=""
;return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '},data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){var stack1,helper;return stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)},data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+="</button>"})}),define("ui/datatable/filterStrategy/multiple",["jquery","lodash","i18n"],function($,_,__){"use strict";return{init:function(){},getQueryData:function($table,$filterElement,options){var data={filtercolumns:{}};if(0!==$(".filter",$table).length)return _.forEach($(".filter",$table),function(filter){var name,model,filterValue,$filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter);0!==$filterInput.length&&(model=_.find(options.model,function(o){return o.id===column}),name=$filterInput.attr("name").replace(
/^filter\[(.+)\]$/,"$1"),$filterInput.val()&&(filterValue=$filterInput.val(),model&&"function"==typeof model.filterTransform&&(filterValue=model.filterTransform(filterValue)),data.filtercolumns[name]=filterValue))}),data},getFiltersData:function($table,$filterElement,options){var data={filtercolumns:{}};return _.forEach($(".filter",$table),function(filter){var name,filterValue,$filter=$(filter),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter);0!==$filterInput.length&&(name=$filterInput.attr("name").replace(/^filter\[(.+)\]$/,"$1"),$filterInput.val()&&(filterValue=$filterInput.val(),
data.filtercolumns[name]=filterValue))}),data},render:function($table,options){_.forEach($(".filter",$table),function(filter){var model,name,$filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter);0!==$filterInput.length&&(model=_.find(options.model,function(o){return o.id===column}),name=$filterInput.attr("name").replace(/^filter\[(.+)\]$/,"$1"),options.filtercolumns&&options.filtercolumns[name]&&$filterInput.val(options.filtercolumns[name]),model&&model.customFilter&&"function"==typeof model.customFilter.callback&&model.customFilter.callback($filterInput))})}}}),define(
"ui/datatable/filterStrategy/single",["jquery","lodash"],function($,_){"use strict";return{init:function(){},getQueryData:function($table,$filter,options){var data={},column=$filter.data("column"),model=_.find(options.model,function(o){return o.id===column});if(0!==$filter.length)return data.filterquery=$filter.find(":input").filter(function(){return $(this).val()}).val(),model&&"function"==typeof model.filterTransform&&(data.filterquery=model.filterTransform(data.filterquery)),data.filtercolumns=column?column.split(","):options.filtercolumns,data},getFiltersData:function($table,$filter,options){var data={},column=$filter.data("column");if(0!==$filter.length
)return data.filterquery=$filter.find(":input").filter(function(){return $(this).val()}).val(),data.filtercolumns=column?column.split(","):options.filter.columns,data},render:function($table,options){var filterColumns=options.filtercolumns?options.filtercolumns:[];_.forEach($(".filter",$table),function(filter){var $filter=$(filter),column=$filter.data("column"),filterSelector=options.filterSelector||"select, input",$filterInput=$(filterSelector,$filter),model=_.find(options.model,function(o){return o.id===column});options.filterquery&&column===filterColumns.join()&&$filterInput.val(options.filterquery).addClass("focused"),
model&&model.customFilter&&"function"==typeof model.customFilter.callback&&model.customFilter.callback($filterInput)})}}}),define("ui/datatable/filterStrategy/filterStrategy",["jquery","lodash","i18n","core/providerRegistry","ui/datatable/filterStrategy/multiple","ui/datatable/filterStrategy/single"],function($,_,__,providerRegistry,multipleStrategy,singleStrategy){"use strict";var filter;return(filter=providerRegistry(function filterStrategy(datatableOptions){var strategy;return{init:function(){var strategyId=datatableOptions.filterStrategy||"single";return strategy=filterStrategy.getProvider(strategyId),this},getQueryData:function($table,$filter,options){
return strategy.getQueryData($table,$filter,options)},getFiltersData:function($table,$filter,options){return strategy.getFiltersData($table,$filter,options)},render:function($table,options){return strategy.render($table,options)}}.init()})).registerProvider("single",singleStrategy),filter.registerProvider("multiple",multipleStrategy),filter}),define("tpl!ui/pagination/providers/tpl/pages",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,
escapeExpression=this.escapeExpression;return buffer+='<div class="grid-row clearfix pagination">\n    <ul class="pages">\n        <li class="first-page"><span class="icon-fast-backward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"First page",options):helperMissing.call(depth0,"__","First page",options)))+'"></span></li>\n        <li class="previous"><span class="icon-backward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options))
)+'"></span></li>\n        <li class="next"><span class="icon-forward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+'"></span></li>\n        <li class="last-page"><span class="icon-fast-forward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Last page",options):helperMissing.call(depth0,"__","Last page",options)))+'"></span></li>\n    </ul>\n</div>'})}),define("tpl!ui/pagination/providers/tpl/pages/page",["handlebars"],function(hb){return hb.template(function(
Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<li class="page"><span>',buffer+=(0,this.escapeExpression)((helper=helpers.page)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.page)?helper.call(depth0,{hash:{},data:data}):helper)+"</span></li>"})}),define("ui/pagination/providers/pages",["jquery","lodash","i18n","tpl!ui/pagination/providers/tpl/pages","tpl!ui/pagination/providers/tpl/pages/page"],function($,_,__,tpl,pageTpl){"use strict";return{init:function(){var $paginationTpl,generatePage=function(
page){return $(pageTpl({page:page}))},separator=function(){var $page=generatePage("...");return $page.addClass("separator"),$page},generatePart=function(from,to,activePage){var i,$page,pages=[];for(i=from;i<=to;i++)$page=generatePage(i),i===activePage&&$page.addClass("active"),pages.push($page);return pages},getForwardBtn=function(){return $(".next",$paginationTpl)};return{render:function($container){$paginationTpl=$(tpl()),$container.append($paginationTpl)},forwardButton:function(){return getForwardBtn()},backwardButton:function(){return $(".previous",$paginationTpl)},pageButtons:function(){return $(".page",$paginationTpl)},firstPageButton:function(){
return $(".first-page",$paginationTpl)},lastPageButton:function(){return $(".last-page",$paginationTpl)},setPages:function(page,total){var list,$point,pages=function(page,total){var pages=[];return pages=total<=7?pages.concat(generatePart(1,total,page)):page<5?(pages=(pages=pages.concat(generatePart(1,5,page))).concat(separator())).concat(generatePart(total,total,page)):total-3<=page?(pages=(pages=pages.concat(generatePart(1,1,page))).concat(separator())).concat(generatePart(total-3,total,page)):(pages=(pages=(pages=(pages=pages.concat(generatePart(1,1,page))).concat(separator())).concat(generatePart(page-1,page+1,page))).concat(separator())).concat(
generatePart(total,total,page))}(page,total);$(".page",$paginationTpl).remove(),list=pages,$point=getForwardBtn(),_.each(list,function($page){$page.insertBefore($point)})},disableButton:function($btn){$btn.hasClass("disabled")||$btn.addClass("disabled")},enableButton:function($btn){$btn.hasClass("disabled")&&$btn.removeClass("disabled")},destroy:function(){$paginationTpl.remove()},disable:function(){var self=this;this.disableButton(this.backwardButton()),this.disableButton(this.firstPageButton()),$(".page",$paginationTpl).each(function(){self.disableButton($(this))}),this.disableButton(this.lastPageButton()),this.disableButton(this.forwardButton())},
enable:function(){var self=this;$(".page",$paginationTpl).each(function(){self.enableButton($(this))})}}}}}),define("tpl!ui/pagination/providers/tpl/simple",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="grid-row clearfix pagination">\n    <div class="col-6">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Page",options
):helperMissing.call(depth0,"__","Page",options)))+' <strong class="page">',buffer+=escapeExpression((helper=helpers.activePage)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.activePage)?helper.call(depth0,{hash:{},data:data}):helper)+"</strong> "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+' <span class="total">',buffer+=escapeExpression((helper=helpers.totalPages)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.totalPages)?helper.call(depth0,{hash:{},data:data}):helper
)+'</span></div>\n    <div class="col-6 txt-rgt">\n        <button class="btn-info small"><span class="icon-backward"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+'</button>\n        <button class="btn-info small">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+'<span class="icon-forward r"></span></button>\n    </div>\n</div>'})}),define("ui/pagination/providers/simple",["jquery","lodash","i18n",
"tpl!ui/pagination/providers/tpl/simple"],function($,_,__,tpl){"use strict";return{init:function(){var $paginationTpl;return{render:function($container){$paginationTpl=$(tpl()),$container.append($paginationTpl)},forwardButton:function(){return $(".icon-forward",$paginationTpl).parents("button")},backwardButton:function(){return $(".icon-backward",$paginationTpl).parents("button")},setPages:function(page,total){$(".page",$paginationTpl).text(page),$(".total",$paginationTpl).text(total)},disableButton:function($btn){$btn.attr("disabled","disabled")},enableButton:function($btn){$btn.attr("disabled")&&$btn.removeAttr("disabled")},pageButtons:function(){return!1
},firstPageButton:function(){return!1},lastPageButton:function(){return!1},destroy:function(){$paginationTpl.remove()},disable:function(){this.disableButton(this.backwardButton()),this.disableButton(this.forwardButton())},enable:function(){}}}}}),define("ui/pagination/paginationStrategy",["core/providerRegistry","ui/pagination/providers/pages","ui/pagination/providers/simple"],function(providerRegistry,pagesProvider,simpleProvider){"use strict";var paginationProvider;return(paginationProvider=providerRegistry(function paginationStrategy(mode){return paginationStrategy.getProvider(mode||"simple")})).registerProvider("simple",simpleProvider),
paginationProvider.registerProvider("pages",pagesProvider),paginationProvider}),define("ui/pagination",["jquery","lodash","i18n","ui/component","ui/pagination/paginationStrategy"],function($,_,__,component,paginationStrategy){"use strict";var _defaults={mode:"simple",activePage:1,totalPages:1};function calculateActivePage(page,pages){return(page=parseInt(page))<1&&(page=1),pages<page&&(page=pages),page}return function(config){var paginationComponent,provider,totalPages,activePage;return config=_.defaults(config||{},_defaults),(paginationComponent=component({setPage:function(page){!1===(page=calculateActivePage(page,this.getTotal()))?this.trigger("error",__(
"Undefined amount of the pages for pagination")):(activePage=page,provider.setPages(this.getActivePage(),this.getTotal()),this.trigger("change"))},nextPage:function(){this.setPage(this.getActivePage()+1),this.trigger("next")},previousPage:function(){this.setPage(this.getActivePage()-1),this.trigger("prev")},getActivePage:function(){return activePage},getTotal:function(){return totalPages},refresh:function(){this.getActivePage()===this.getTotal()?(provider.disableButton(provider.forwardButton()),!1!==provider.lastPageButton()&&provider.disableButton(provider.lastPageButton())):(provider.enableButton(provider.forwardButton()),!1!==provider.lastPageButton(
)&&provider.enableButton(provider.lastPageButton())),1===this.getActivePage()?(provider.disableButton(provider.backwardButton()),!1!==provider.firstPageButton()&&provider.disableButton(provider.firstPageButton())):(provider.enableButton(provider.backwardButton()),!1!==provider.firstPageButton()&&provider.enableButton(provider.firstPageButton()))}})).on("change enable",function(){provider.enable(),this.refresh()}).on("render",function(){var self=this;_.isUndefined(config.totalPages)&&this.trigger("error",__("Undefined amount of the totalPages for pagination")),!1===(totalPages=function(totalPages){return!((totalPages=totalPages||1)<1)&&totalPages}(
config.totalPages))&&this.trigger("error",__("Undefined amount of the pages for pagination")),activePage=calculateActivePage(config.activePage||1,totalPages),(provider=paginationStrategy(config.mode).init()).render(this.getContainer()),this.setPage(this.getActivePage()),provider.forwardButton().off("click").on("click",function(){self.getActivePage()>=self.getTotal()||self.nextPage()}),provider.backwardButton().off("click").on("click",function(){1!==self.getActivePage()&&self.previousPage()}),!1!==provider.pageButtons()&&provider.pageButtons().off("click").on("click",function(){var page=parseInt($(this).text());page&&self.setPage(page)}),
!1!==provider.firstPageButton()&&provider.firstPageButton().off("click").on("click",function(){self.setPage(1)}),!1!==provider.lastPageButton()&&provider.lastPageButton().off("click").on("click",function(){self.setPage(self.getTotal())})}).on("disable",function(){provider.disable()}).on("destroy",function(){provider.destroy()}).init(config),paginationComponent}}),define("tpl!ui/dialog/tpl/body",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",
escapeExpression=this.escapeExpression;return buffer+='<div class="preview-modal-feedback modal">\n    <div class="modal-body clearfix">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.heading,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <h4 class="strong">',stack1=(helper=helpers.heading)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.heading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h4>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n        <p class="message">',
stack1=(helper=helpers.message)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.message)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</p>\n\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.content,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <div class="content">',((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.content)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>\n        "},data),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n        <div class="buttons rgt"></div>\n    </div>\n</div>'})}),define("tpl!ui/dialog/tpl/buttons",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '}return(stack1=helpers.each.call(depth0,depth0&&depth0.buttons,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+" small ",stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" type="button">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        <span class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(
stack1)+"</span>\n    </button>\n"},data),data:data}))||0===stack1?stack1:""})}),define("ui/dialog",["jquery","lodash","i18n","tpl!ui/dialog/tpl/body","tpl!ui/dialog/tpl/buttons","ui/keyNavigation/navigator","ui/keyNavigation/navigableDomElement","util/shortcut/registry","ui/modal"],function($,_,__,bodyTpl,buttonsTpl,keyNavigator,navigableDomElement,shortcutRegistry){"use strict";var _definedButtons={ok:{id:"ok",type:"info",label:__("Ok"),close:!0},cancel:{id:"cancel",type:"regular",label:__("Cancel"),close:!0},yes:{id:"yes",type:"info",label:__("Yes"),close:!0},no:{id:"no",type:"regular",label:__("No"),close:!0}},_defaults={message:"",content:"",width:500,
animate:!1,autoRender:!1,autoDestroy:!1,renderTo:"body",buttons:"cancel,ok"},dialog={init:function(options){var self=this,events={},initOptions=_.omit(options||{},function(value,key){var omit=!1;return 2<key.length&&"on"===key.substr(0,2)&&(events[key.substr(2)]=value,omit=!0),omit});return _.defaults(this,initOptions,_defaults),this.$html=$(bodyTpl(this)),this.$buttons=this.$html.find(".buttons"),this.rendered=!1,this.destroyed=!1,this.$buttons.on("click.modal","button",this._onButtonClick.bind(this)),this.setButtons(this.buttons),_.forEach(events,function(callback,eventName){eventName.indexOf(".")<0&&(eventName+=".modal"),self.on(eventName.toLowerCase(),
callback)}),this.autoRender&&this.render(),this},destroy:function(){return this.destroyed||(this._destroy(),this.rendered=!1,this.destroyed=!0,this.trigger("destroy.modal"),this.$buttons.off(".modal"),this.$html.off(".modal").remove(),this.$html=null,this.$buttons=null),this},setButtons:function(buttons){var self=this;return this.destroyed||(buttons||(buttons=_defaults.buttons),_.isArray(buttons)||_.isString(buttons)&&(buttons=buttons.split(",")),this.buttons={},_.forEach(buttons,function(btn){_.isString(btn)&&(btn=btn.trim(),btn=_definedButtons[btn]||{id:btn,type:"info",label:btn}),btn.type||(btn.type="regular"),self.buttons[btn.id]=btn}),
this.$buttons.html(buttonsTpl(this))),this},render:function(to){return this.destroyed||($(to||this.renderTo).append(this.$html),this._install(),this.rendered=!0),this},show:function(){return this.destroyed||(this.rendered?this._open():this.render()),this},hide:function(){return!this.destroyed&&this.rendered&&(this._close(),this.autoDestroy&&this.destroy()),this},on:function(eventName){var dom=this.$html;return dom&&dom.on.apply(dom,arguments),this},off:function(eventName){var dom=this.$html;return dom&&dom.off.apply(dom,arguments),this},trigger:function(eventName,extraParameters){var dom=this.$html;return dom&&(void 0===extraParameters&&(extraParameters=[]),
_.isArray(extraParameters)||(extraParameters=[extraParameters]),(extraParameters=Array.prototype.slice.call(extraParameters)).push(this),dom.trigger(eventName,extraParameters)),this},getDom:function(){return this.$html},_onButtonClick:function(event){var id=$(event.target).closest("button").data("control"),btn=this.buttons[id];btn&&this._execute(btn)},_execute:function(btn){btn.action&&btn.action.apply(this,[btn,this]),this.trigger(btn.id+"btn.modal",[btn]),btn.close&&this.hide()},focus:function(button){var focusPosition=-1;button&&(focusPosition=_.findIndex(this.navigator.getNavigables(),function(navigable){return navigable.getElement().is(
'[data-control="'+button+'"]')})),0<=focusPosition?this.navigator.focusPosition(focusPosition):this.navigator.focus()},_install:function(){var $buttons,self=this;this.destroyed||($buttons=this.$buttons.find("button"),this.navigator=keyNavigator({elements:navigableDomElement.createFromDoms($buttons)}).on("right down",function(){this.next()}).on("left up",function(){this.previous()}).on("tab",function(){this.getCursor().position===$buttons.length-1?this.first():this.next()}).on("shift+tab",function(){0===this.getCursor().position?this.last():this.previous()}).on("activate",function(cursor){cursor.navigable.getElement().click()}),
this.globalShortcut=shortcutRegistry($("body")).add("tab shift+tab",function(){self.navigator.isFocused()||self.navigator.focus()})),this.$html.modal({width:this.width,animate:this.animate,disableClosing:this.disableClosing,disableEscape:this.disableEscape}).on("closed.modal",function(){self.autoDestroy&&self.destroy()})},_open:function(){this.$html.modal("open")},_close:function(){this.$html.modal("close")},_destroy:function(){this.$html.modal("destroy"),this.navigator&&this.navigator.destroy(),this.globalShortcut&&this.globalShortcut.clear()}};return function(options){var instance=_.clone(dialog,!0);return instance.init(options),instance}}),define(
"ui/dialog/alert",["lodash","ui/dialog"],function(_,dialog){"use strict";return function(message,action){var dlg=dialog({message:message,buttons:"ok",autoRender:!0,autoDestroy:!0});return _.isFunction(action)&&dlg.on("closed.modal",action),dlg}}),define("layout/logout-event",["jquery","lodash","i18n","util/url","ui/dialog/alert"],function($,_,__,url,alert){"use strict";var defaults={message:__("You have been logged out. Please login again"),redirectUrl:url.route("logout","Main","tao")};return function(options){options=_.defaults(options||{},defaults),alert(options.message,function(){window.location=options.redirectUrl})}}),define("layout/loading-bar",[
"jquery"],function($){"use strict";var $loadingBar=$(".loading-bar"),originalHeight=$loadingBar.height(),$win=$(window),$doc=$(document),$contentWrap=$(".content-wrap"),headerElements={$versionWarning:$contentWrap.find(".version-warning"),$header:$contentWrap.find("header:first()")},headerHeight=getHeaderHeight(headerElements);function getHeaderHeight(headerElements){var $element;for($element in headerHeight=0,headerElements)headerElements[$element].length&&headerElements[$element].is(":visible")&&(headerHeight+=headerElements[$element].outerHeight());return headerHeight}function updateHeight(){$loadingBar.hasClass("loading")&&((headerHeight=getHeaderHeight(
headerElements))<=$win.scrollTop()?$loadingBar.addClass("fixed"):$loadingBar.removeClass("fixed"),$loadingBar.hasClass("loadingbar-covered")?$loadingBar.height($doc.height()):$loadingBar.height(""))}return $win.on("scroll.loadingbar",function(){updateHeight()}),{start:function(covered){void 0===covered&&(covered=!0),$loadingBar.hasClass("loading")&&$loadingBar.stop(),$loadingBar.addClass("loading"),$loadingBar.toggleClass("loadingbar-covered",covered),updateHeight()},stop:function(){$loadingBar.removeClass("loading fixed").height(originalHeight)}}}),define("util/httpErrorParser",[],function(){"use strict";return{parse:function(xhr,options,errorThrown){
var msg,json,error;try{msg=(json=JSON.parse(xhr.responseText)).message?json.message:errorThrown}catch(e){msg=errorThrown}return(error=new Error(msg)).response=xhr,error.code=xhr.status,error.errorThrown=errorThrown,error}}}),define("ui/datatable",["jquery","lodash","i18n","core/pluginifier","tpl!ui/datatable/tpl/layout","tpl!ui/datatable/tpl/button","ui/datatable/filterStrategy/filterStrategy","ui/pagination","ui/feedback","layout/logout-event","layout/loading-bar","core/logger","util/httpErrorParser"],function($,_,__,Pluginifier,layout,btnTpl,filterStrategyFactory,paginationComponent,feedback,logoutEvent,loadingBar,loggerFactory,httpErrorParser){
"use strict";var ns="datatable",dataNs="ui."+ns,defaults={start:0,rows:25,page:1,sortby:"id",sortorder:"asc",sorttype:"string",paginationStrategyTop:"none",paginationStrategyBottom:"simple",labels:{filter:__("Filter"),empty:__("Nothing to list!"),available:__("Available"),loading:__("Loading"),actions:__("Actions")}},logger=loggerFactory("ui/datatable"),disablePaginations=function(paginations){paginations&&paginations.length&&_.forEach(paginations,function(pagination){pagination.disable()})},enablePaginations=function(paginations){paginations&&paginations.length&&_.forEach(paginations,function(pagination){pagination.enable()})},dataTable={init:function(
options,data){return options=_.defaults(options,defaults),this.each(function(){var $elt=$(this),currentOptions=$elt.data(dataNs);$elt.paginations=[],currentOptions?(options&&$elt.data(dataNs,_.merge(currentOptions,options)),dataTable._refresh($elt,data)):($elt.data(dataNs,options),$elt.one("load."+ns,function(){$elt.trigger("create."+ns)}),data?dataTable._render($elt,data):dataTable._query($elt))})},_refresh:function($elt,data){data?this._render($elt,data):this._query($elt)},_query:function($elt,$filter){var parameters,ajaxConfig,self=this,options=$elt.data(dataNs);loadingBar.start(),$filter||($filter=$(".filter",$elt)),options=_.assign({},options,
this._getFilterStrategy($elt).getQueryData($elt,$filter,options)),parameters=_.merge({},_.pick(options,["rows","page","sortby","sortorder","sorttype","filterquery","filtercolumns"]),options.params||{}),ajaxConfig={url:options.url,data:parameters,dataType:"json",type:options.querytype||"GET"},disablePaginations($elt.paginations),$elt.trigger("query."+ns,[ajaxConfig]),options.status&&$elt.find(".loading").removeClass("hidden"),$.ajax(ajaxConfig).done(function(response){self._render($elt,response),loadingBar.stop()}).fail(function(response,option,err){var requestErr=httpErrorParser.parse(response,option,err);logger.error(requestErr.message),
requestErr.code=response.status,enablePaginations(this.paginations),$elt.trigger("error."+ns,[requestErr]),self._render($elt,{}),loadingBar.stop()})},_render:function($elt,dataset){var $rendering,$statusEmpty,$statusAvailable,$statusCount,$sortBy,$sortElement,$checkAll,$checkboxes,$rows,amount,transforms,self=this,options=_.cloneDeep($elt.data(dataNs)),$massActionBtns=$(),model=[],join=function(input){return"object"!=typeof input?input:input.join(", ")};dataset=dataset||{},$elt.trigger("beforeload."+ns,[_.cloneDeep(dataset)]),_.forEach(options.model,function(field,key){options.filter||(field.filterable=!1),_.isUndefined(field.order)&&(field.order=key+1),
field.filterable&&"object"!=typeof field.filterable&&(field.filterable={placeholder:__("Filter")}),field.transform&&(field.transform=_.isFunction(field.transform)?field.transform:join),void 0===field.visible?model.push(field):"function"==typeof field.visible&&field.visible()?model.push(field):!0===field.visible&&model.push(field)}),model.sort(function(a,b){return a.order-b.order}),options.sortby&&(options=this._sortOptions($elt,options.sortby,options.sortorder,options.sorttype)),_.some(options.model,"transform")&&(transforms=_.where(options.model,"transform"),_.forEach(dataset.data,function(row,index){_.forEach(transforms,function(field){
row[field.id]=field.transform(row[field.id],row,field,index,dataset.data)})})),options.model=model,$rendering=$(layout({options:options,dataset:dataset})),_.forEach(dataset.readonly,function(values,id){if(!0===values)$('[data-item-identifier="'+id+'"] button',$rendering).addClass("disabled");else if(values&&"object"==typeof values)for(var action in values)values.hasOwnProperty(action)&&!0===values[action]&&$('[data-item-identifier="'+id+'"] button.'+action,$rendering).addClass("disabled")});var attachActionListeners=function(actions){_.forEach(actions,function(action,name){var css;_.isFunction(action)||(name=action.id||name,action=action.action||function(){}
),css="."+name,$rendering.off("click",css).on("click",css,function(e){var $btn=$(this);if(e.preventDefault(),!$btn.hasClass("disabled")){var identifier=$btn.closest("[data-item-identifier]").data("item-identifier");action.apply($btn,[identifier,_.first(_.where(dataset.data,{id:identifier}))])}})})};if(options.actions&&attachActionListeners(options.actions),_.some(options.model,"type")){var types=_.where(options.model,"type");_.forEach(types,function(field){"actions"===field.type&&field.actions&&attachActionListeners(field.actions)})}function renderPagination($container,mode){return paginationComponent({mode:mode,activePage:dataset.page,
totalPages:dataset.total}).on("change",function(){self._setPage($elt,this.getActivePage())}).on("prev",function(){$elt.trigger("backward."+ns)}).on("next",function(){$elt.trigger("forward."+ns)}).render($container)}_.forEach(options.tools,function(action,name){var css,massAction=!0;_.isFunction(action)||(name=action.id||name,massAction=action.massAction,action=action.action||function(){}),css=".tool-"+name,massAction&&($massActionBtns=$massActionBtns.add($rendering.find(css))),$rendering.off("click",css).on("click",css,function(e){var $btn=$(this);e.preventDefault(),$btn.hasClass("disabled")||action.apply($btn,[self._selection($elt)])})}),_.forEach(
options.listeners,function(callback,event){var ev=[event,ns].join(".");$elt.off(ev).on(ev,callback)}),$elt.paginations=[],"none"!==options.paginationStrategyTop&&$elt.paginations.push(renderPagination($(".datatable-pagination-top",$rendering),options.paginationStrategyTop)),"none"!==options.paginationStrategyBottom&&$elt.paginations.push(renderPagination($(".datatable-pagination-bottom",$rendering),options.paginationStrategyBottom)),disablePaginations($elt.paginations),$rows=$rendering.find("tbody tr"),$sortBy=$rendering.find("th [data-sort-by]"),$sortElement=$rendering.find('[data-sort-by="'+options.sortby+'"]'),$checkAll=$rendering.find(
"th.checkboxes input"),$checkboxes=$rendering.find("td.checkboxes input"),options.rowSelection&&($("table.datatable",$rendering).addClass("hoverable"),$rendering.on("click","tbody td",function(e){if($(e.target).hasClass("checkboxes")||$(e.target).hasClass("actions"))return!1;var currentRow=$(this).parent();$rows.removeClass("selected"),currentRow.toggleClass("selected"),$elt.trigger("selected."+ns,_.where(dataset.data,{id:currentRow.data("item-identifier")}))})),$sortBy.on("click keyup",function(e){var column,type;"keyup"===e.type&&13!==e.keyCode||(e.preventDefault(),column=$(this).data("sort-by"),type=$(this).data("sort-type"),self._sort($elt,column,void 0,
type))}),options.filter&&(self._getFilterStrategy($elt).render($rendering,options),_.forEach($(".filter",$rendering),function(filter){var $filter=$(filter),$filterBtn=$("button",$filter),$filterInput=$("select, input",$filter);$filterInput.is("select")?$filterInput.on("change",function(){self._filter($elt,$filter)}):($filterBtn.off("click").on("click",function(e){e.preventDefault(),self._filter($elt,$filter)}),$filterInput.off("keypress").on("keypress",function(e){13===e.which&&(e.preventDefault(),self._filter($elt,$filter))}))})),$checkAll.click(function(){this.checked?($checkAll.prop("checked",!0),$checkboxes.prop("checked",!0)):($checkAll.prop("checked",
!1),$checkboxes.prop("checked",!1)),$massActionBtns.length&&$massActionBtns.toggleClass("invisible",!$checkboxes.filter(":checked").length),$elt.trigger("select."+ns)}),$checkboxes.click(function(){$checkboxes.filter(":checked").length===$checkboxes.length?$checkAll.prop("checked",!0):$checkAll.prop("checked",!1),$massActionBtns.length&&$massActionBtns.toggleClass("invisible",!$checkboxes.filter(":checked").length),$elt.trigger("select."+ns)}),$("th.sorted",$rendering).removeClass("sorted"),$sortElement.addClass("sorted").addClass("sorted_"+options.sortorder),options.status&&($statusEmpty=$rendering.find(".empty-list"),$statusCount=(
$statusAvailable=$rendering.find(".available-list")).find(".count"),$rendering.find(".loading").addClass("hidden"),(amount=dataset.amount||dataset.length)?($statusCount.text(amount),$statusAvailable.removeClass("hidden"),$statusEmpty.addClass("hidden")):($statusEmpty.removeClass("hidden"),$statusAvailable.addClass("hidden"))),$elt.html($rendering),options.filter&&options.filterquery&&$rendering.find("[name=filter].focused").focus(),enablePaginations($elt.paginations),$elt.trigger("load."+ns,[dataset])},_setPage:function($elt,page){var options=$elt.data(dataNs);options.page!==page&&(options.page=page,$elt.data(dataNs,options),$elt.trigger("setpage."+ns),
this._query($elt))},_filter:function($elt,$filter){var options=$elt.data(dataNs),filtersData=this._getFilterStrategy($elt).getFiltersData($elt,$filter,options);options.page=1,$elt.data(dataNs,_.assign(options,filtersData)),$elt.trigger("filter."+ns,[options]),this._query($elt,$filter)},_getFilterStrategy:function($elt){var options=$elt.data(dataNs);return filterStrategyFactory(options)},_sort:function($elt,sortBy,asc,sortType){var options=this._sortOptions($elt,sortBy,asc,sortType);$elt.trigger("sort."+ns,[options.sortby,options.sortorder,options.sorttype]),this._query($elt)},_sortOptions:function($elt,sortBy,asc,sortType){var options=$elt.data(dataNs)
;return void 0!==asc?("asc"!==asc&&"desc"!==asc&&(asc=asc?"asc":"desc"),options.sortorder=asc):"asc"===options.sortorder&&options.sortby===sortBy?options.sortorder="desc":options.sortorder="asc",options.sortby=sortBy,options.sorttype=sortType,$elt.data(dataNs,options),_.cloneDeep(options)},_selection:function($elt){var $selected=$elt.find("[data-item-identifier]").has("td.checkboxes input:checked"),selection=[];return $selected.each(function(){selection.push($(this).data("item-identifier"))}),selection},_highlightRow:function($elt,rowId){this._addRowClass($elt,rowId,"highlight")},_addRowClass:function($elt,rowId,className){var $row=$elt.find(
'[data-item-identifier="'+rowId+'"]');$row.hasClass(className)||$row.addClass(className)},_removeRowClass:function($elt,rowId,className){var $row=$elt.find('[data-item-identifier="'+rowId+'"]');$row.hasClass(className)&&$row.removeClass(className)}};Pluginifier.register(ns,dataTable,{expose:["refresh","sort","filter","selection","render","highlightRow","addRowClass","removeRowClass"]})}),define("tpl!ui/dateRange/tpl/select",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)
).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="daterange">\n    <label>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"From",options):helperMissing.call(depth0,"__","From",options)))+'</label><input type="text" name="periodStart" value="',buffer+=escapeExpression((helper=helpers.startDate)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.startDate)?helper.call(depth0,{hash:{},data:data}):helper)+'"/>\n    <label>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"to",options
):helperMissing.call(depth0,"__","to",options)))+'</label><input type="text" name="periodEnd" value="',buffer+=escapeExpression((helper=helpers.endDate)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.endDate)?helper.call(depth0,{hash:{},data:data}):helper)+'"/>\n    <button class="small btn-info" data-control="filter" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Apply date range",options):helperMissing.call(depth0,"__","Apply date range",options)))+'">\n        <span class="icon icon-filter"></span> '+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Apply",options):helperMissing.call(depth0,"__","Apply",options)))+'\n    </button>\n    <button class="small" data-control="reset">\n        <span class="icon icon-reset"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Reset",options):helperMissing.call(depth0,"__","Reset",options)))+"\n    </button>\n</div>"})}),define("jquery.timePicker",["jquery","jqueryui"],function(jQuery){var $=jQuery;if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.3"}});var Timepicker=function(){
this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,
microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,
millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_newInst:function($input,o){var tp_inst=new Timepicker,
inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,
tp_inst)},onClose:function(dateText,dp_inst){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=o[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(
tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"==tp_inst._defaults.controlType&&void 0===jQuery.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(
timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(0<tzl&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,
tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,
tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(
tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(dp_inst){
var currDT=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT),this._limitMinMaxDateTime(dp_inst,!1),this._injectTimePicker()},_parseTime:function(timeString,withDate){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj)return!1;$.extend(this,parseRes.timeObj)}catch(err){
return $.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat),!1}return!0}var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);return!!timeObj&&($.extend(this,timeObj),!0)},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",show=null,max={},gridSize={},size=null,i=0,l=0;if(0===$dp.find("div.ui-timepicker-div").length&&o.showTimepicker){var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":""
)+'"><dl><dt class="ui_tpicker_time_label"'+(o.showTime?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time"'+(o.showTime?"":noDisplay)+"></dd>";for(i=0,l=this.units.length;i<l;i++){if(show=null!==o["show"+(uitem=(litem=this.units[i]).substr(0,1).toUpperCase()+litem.substr(1))]?o["show"+uitem]:this.support[litem],max[litem]=parseInt(o[litem+"Max"]-(o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem],10),gridSize[litem]=0,html+='<dt class="ui_tpicker_'+litem+'_label"'+(show?"":noDisplay)+">"+o[litem+"Text"]+'</dt><dd class="ui_tpicker_'+litem+'"><div class="ui_tpicker_'+litem+'_slider"'+(show?"":noDisplay)+"></div>",show&&0<o[litem+"Grid"]){if(
html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"==litem)for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+"</td>"}else for(var m=o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10))gridSize[litem]++,html+='<td data-for="'+litem+'">'+(m<10?"0":"")+m+"</td>";html+="</tr></table></div>"}html+="</dd>"}var showTz=null!==o.showTimezone?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label"'+(showTz?"":noDisplay)+">"+o.timezoneText+"</dt>",
html+='<dd class="ui_tpicker_timezone" '+(showTz?"":noDisplay)+"></dd>";var $tp=$(html+="</dl></div>");for(!0===o.timeOnly&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>"),$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),i=0,l=tp_inst.units.length;i<l;i++)show=null!==o["show"+(uitem=(litem=tp_inst.units[i]).substr(0,1).toUpperCase()+litem.substr(1))]?o["show"+uitem]:this.support[litem],tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]),
show&&0<o[litem+"Grid"]&&(size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]),$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":size/(-2*gridSize[litem])+"%",marginRight:o.isRTL?size/(-2*gridSize[litem])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/gi),f=$t.data("for");"hour"==f&&(-1!==ap.indexOf("p")&&n<12?n+=12:-1!==ap.indexOf("a")&&12===n&&(n=0)),tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n),tp_inst._onTimeChange(),tp_inst._onSelectHandler()}).css({cursor:"pointer",
width:100/gridSize[litem]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=$tp.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val("object"==typeof val?val.value:val).text("object"==typeof val?val.label:val)})),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone)-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()==this.timezone?selectLocalTimezone(tp_inst):this.timezone_select.val(this.timezone
);else void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(o.timezone):selectLocalTimezone(tp_inst);this.timezone_select.change(function(){tp_inst._onTimeChange(),tp_inst._onSelectHandler()});var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length?$buttonPanel.before($tp):$dp.append($tp),this.$timeObj=$tp.find(".ui_tpicker_time"),null!==this.inst){var timeDefined=this.timeDefined;this._onTimeChange(),this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl,setTimeout(function(){if(0===$tp.find(
".ui-slider-access").length){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(!0);sliderAccessWidth&&$tp.find("table:visible").each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=oldMarginLeft*newWidth/oldWidth+"%",css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft,$g.css(css)})}},10)}}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,
dp_inst.selectedMonth,dp_inst.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(dp_inst,"minDateTime")&&void 0!==$.datepicker._get(dp_inst,"minDateTime")&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=o.hourMin,this.minuteMinOriginal=o.minuteMin,this.secondMinOriginal=o.secondMin,this.millisecMinOriginal=o.millisecMin,
this.microsecMinOriginal=o.microsecMin),dp_inst.settings.timeOnly||minDateTimeDate.getTime()==dp_date.getTime()?(this._defaults.hourMin=minDateTime.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=minDateTime.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=minDateTime.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=minDateTime.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,
this._defaults.microsecMin=minDateTime.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(
this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(dp_inst,"maxDateTime")&&void 0!==$.datepicker._get(dp_inst,"maxDateTime")&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(
this.hourMaxOriginal=o.hourMax,this.minuteMaxOriginal=o.minuteMax,this.secondMaxOriginal=o.secondMax,this.millisecMaxOriginal=o.millisecMax,this.microsecMaxOriginal=o.microsecMax),dp_inst.settings.timeOnly||maxDateTimeDate.getTime()==dp_date.getTime()?(this._defaults.hourMax=maxDateTime.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=maxDateTime.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=maxDateTime.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,
this._defaults.millisecMax=maxDateTime.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=maxDateTime.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,
this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(void 0!==adjustSliders&&!0===adjustSliders){var hourMax=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),minMax=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin
)%this._defaults.stepMinute,10),secMax=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),millisecMax=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);microsecMax=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10),this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(
this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:secMax}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)
),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:microsecMax}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){var hour=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),minute=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),second=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),millisec=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),microsec=!!this.microsec_slider&&this.control.value(this,
this.microsec_slider,"microsec"),timezone=!!this.timezone_select&&this.timezone_select.val(),o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;"object"==typeof hour&&(hour=!1),"object"==typeof minute&&(minute=!1),"object"==typeof second&&(second=!1),"object"==typeof millisec&&(millisec=!1),"object"==typeof microsec&&(microsec=!1),"object"==typeof timezone&&(timezone=!1),!1!==hour&&(hour=parseInt(hour,10)),!1!==minute&&(minute=parseInt(minute,10)),!1!==second&&(second=parseInt(second,10)),!1!==millisec&&(millisec=parseInt(millisec,10)),!1!==microsec&&(microsec=parseInt(microsec,10))
;var ampm=o[hour<12?"amNames":"pmNames"][0],hasChanged=hour!=this.hour||minute!=this.minute||second!=this.second||millisec!=this.millisec||microsec!=this.microsec||0<this.ampm.length&&hour<12!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&timezone!=this.timezone;hasChanged&&(!1!==hour&&(this.hour=hour),!1!==minute&&(this.minute=minute),!1!==second&&(this.second=second),!1!==millisec&&(this.millisec=millisec),!1!==microsec&&(this.microsec=microsec),!1!==timezone&&(this.timezone=timezone),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=ampm),
this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&(pickerTimeFormat===o.timeFormat?this.$timeObj.text(this.formattedTime+pickerTimeSuffix):this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix)),this.timeDefined=!0,hasChanged&&this._updateDateTime()},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect,inputEl=this.$input?this.$input[0]:null;onSelect&&inputEl&&onSelect.apply(inputEl,[this.formattedDateTime,this])},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dt=$.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear,
dp_inst.selectedMonth,dp_inst.selectedDay)),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=null!==dt&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,null===dt?new Date:dt,formatCfg);var formattedDateTime=this.formattedDate;if(""===dp_inst.lastVal&&(dp_inst.currentYear=dp_inst.selectedYear,dp_inst.currentMonth=dp_inst.selectedMonth,dp_inst.currentDay=dp_inst.selectedDay),!0===this._defaults.timeOnly?formattedDateTime=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||timeAvailable)&&(
formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=formattedDateTime,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(
altFormattedDateTime=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===dt?new Date:dt,formatCfg):this.formattedDate)&&(altFormattedDateTime+=altSeparator),this._defaults.altTimeFormat?altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix:altFormattedDateTime+=this.formattedTime+altTimeSuffix,this.$altInput.val(altFormattedDateTime)}else this.$input.val(formattedDateTime);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue)
;var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!=inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",null).slider({orientation:"horizontal",value:rtl?-1*val:val,min:rtl?-1*max:min,max:rtl?-1*min:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?-1*ui.value:ui.value),tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},
options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if("string"==typeof opts)return"min"==opts||"max"==opts?void 0!==val?obj.slider(opts,-1*val):Math.abs(obj.slider(opts)):obj.slider(opts);var min=opts.min,max=opts.max;return opts.min=opts.max=null,void 0!==min&&(opts.max=-1*min),void 0!==max&&(opts.min=-1*max),obj.slider(opts)}return"string"==typeof opts&&void 0!==val?obj.slider(opts,val):obj.slider(opts)},value:function(tp_inst,obj,unit,val){return tp_inst._defaults.isRTL?void 0!==val?obj.slider("value",-1*val):Math.abs(obj.slider("value")):void 0!==val?obj.slider("value",val):obj.slider("value")}},select:{create:function(tp_inst,obj,
unit,val,min,max,step){for(var sel='<select class="ui-timepicker-select" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat,i=min;i<=max;i+=step)sel+='<option value="'+i+'"'+(i==val?" selected":"")+">",sel+="hour"==unit?$.datepicker.formatTime($.trim(format.replace(/[^ht ]/gi,"")),{hour:i},tp_inst._defaults):"millisec"==unit||"microsec"==unit||10<=i?i:"0"+i.toString(),sel+="</option>";return sel+="</select>",obj.children("select").remove(),$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange(),tp_inst._onSelectHandler()}),obj},options:function(
tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if("string"==typeof opts){if(void 0===val)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),o.step||$t.data("step"))},value:function(tp_inst,obj,unit,val){var $t=obj.children("select");return void 0!==val?$t.val(val):$t.val()}}}}),$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);return"object"==typeof o&&(tmp_args[0]=$.extend(o,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){
var tmp_args=arguments;return"string"==typeof(o=o||{})?"getDate"==o?$.fn.datepicker.apply($(this[0]),tmp_args):this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)}):this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}),$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec),parseRex.date.setMicroseconds(t.microsec)}return parseRes.date},
$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),strictParse=(timeFormat.replace(/\'.*?\'/g,"").indexOf("Z"),function(f,s,o){var treg,regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var amNames,pmNames,markers,ml=match.length;switch(match.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===ml?"(\\d?\\d)":"(\\d{"+ml+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return amNames=o.amNames,pmNames=o.pmNames,markers=[],amNames&&$.merge(markers,amNames),pmNames&&$.merge(
markers,pmNames),"("+(markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")})).join("|")+")?";default:return"("+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds)for(var i=0;i<finds.length;i++)-1==orders[finds[i].toString().charAt(0)]&&(orders[finds[i].toString().charAt(0)]=i+1);return orders}(f),ampm="",resTime={hour:0,minute:0,second:0,millisec:0,microsec:0}
;return!!(treg=s.match(new RegExp(regstr,"i")))&&(-1!==order.t&&(void 0===treg[order.t]||0===treg[order.t].length?(ampm="",resTime.ampm=""):(ampm=-1!==$.inArray(treg[order.t].toUpperCase(),o.amNames)?"AM":"PM",resTime.ampm=o["AM"==ampm?"amNames":"pmNames"][0])),-1!==order.h&&("AM"==ampm&&"12"==treg[order.h]?resTime.hour=0:"PM"==ampm&&"12"!=treg[order.h]?resTime.hour=parseInt(treg[order.h],10)+12:resTime.hour=Number(treg[order.h])),-1!==order.m&&(resTime.minute=Number(treg[order.m])),-1!==order.s&&(resTime.second=Number(treg[order.s])),-1!==order.l&&(resTime.millisec=Number(treg[order.l])),-1!==order.c&&(resTime.microsec=Number(treg[order.c])),
-1!==order.z&&void 0!==treg[order.z]&&(resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z])),resTime)});return"function"==typeof o.parse?o.parse(timeFormat,timeString,o):"loose"===o.parse?function(f,s,o){try{var d=new Date("2012-01-01 "+s);if(isNaN(d.getTime())&&(d=new Date("2012-01-01T"+s),isNaN(d.getTime())&&(d=new Date("01/01/2012 "+s),isNaN(d.getTime()))))throw"Unable to parse time with native Date: "+s;return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:-1*d.getTimezoneOffset()}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log(
"Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return!1}(timeFormat,timeString,o):strictParse(timeFormat,timeString,o)},$.datepicker.formatTime=function(format,time,options){options=options||{},options=$.extend({},$.timepicker._defaults,options),time=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:0},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);return 11<hour&&(ampmName=options.pmNames[0]),tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|('.*?'|".*?"))/g,function(match){switch(match){case"HH":return("0"+hour).slice(-2);case"H":return hour;case"hh":return("0"+convert24to12(hour)).slice(-2)
;case"h":return convert24to12(hour);case"mm":return("0"+time.minute).slice(-2);case"m":return time.minute;case"ss":return("0"+time.second).slice(-2);case"s":return time.second;case"l":return("00"+time.millisec).slice(-3);case"c":return("00"+time.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!0);case"T":return ampmName.charAt(0).toUpperCase();case"TT":return ampmName.toUpperCase();case"t":return ampmName.charAt(0).toLowerCase();case"tt":return ampmName.toLowerCase();default:
return match.replace(/\'/g,"")||"'"}}),tmptime=$.trim(tmptime)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");tp_inst?(tp_inst._limitMinMaxDateTime(inst,!0),inst.inline=inst.stay_open=!0,this._base_selectDate(id,dateStr),inst.inline=inst.stay_open=!1,this._notifyChange(inst),this._updateDatepicker(inst)):this._base_selectDate(id,dateStr)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if(!(
$.datepicker._curInst&&$.datepicker._curInst!=inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input||"boolean"==typeof inst.stay_open&&!1!==inst.stay_open)){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");tp_inst&&tp_inst._addTimePicker(inst)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&$.datepicker._get(inst,"constrainInput")){var ampm=tp_inst.support.ampm,tz=null!==tp_inst._defaults.showTimezone?tp_inst._defaults.showTimezone:tp_inst.support.timezone,
dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(""):"")+tp_inst._defaults.amNames.join("")+tp_inst._defaults.pmNames.join("")+dateChars,chr=String.fromCharCode(void 0===event.charCode?event.keyCode:event.charCode);return event.ctrlKey||chr<" "||!dateChars||-1<datetimeChars.indexOf(chr)
}return $.datepicker._base_doKeyPress(event)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat;var date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,
altTimeFormat=null!==tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix,tp_inst._defaults.timeOnly||tp_inst._defaults.altFieldTimeOnly||null===date||(altFormattedDateTime=tp_inst._defaults.altFormat?$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime:tp_inst.formattedDate+altSeparator+altFormattedDateTime),$(altField).val(altFormattedDateTime)}}else $.datepicker._base_updateAlternate(inst)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,
$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!=inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}return $.datepicker._base_doKeyUp(event)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,"timepicker");selectLocalTimezone(tp_inst);var now=new Date;this._setTime(inst,now),$(".ui-datepicker-today",$dp).click()},
$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(tp_inst._defaults.showTimepicker=!1,tp_inst._updateDateTime(inst))}},$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(tp_inst._defaults.showTimepicker=!0,tp_inst._addTimePicker(inst),tp_inst._updateDateTime(inst))}},$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults
;tp_inst.hour=date?date.getHours():defaults.hour,tp_inst.minute=date?date.getMinutes():defaults.minute,tp_inst.second=date?date.getSeconds():defaults.second,tp_inst.millisec=date?date.getMilliseconds():defaults.millisec,tp_inst.microsec=date?date.getMicroseconds():defaults.microsec,tp_inst._limitMinMaxDateTime(inst,!0),tp_inst._onTimeChange(),tp_inst._updateDateTime(inst)}},$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(inst){var tp_date,tp_inst=this._get(inst,"timepicker");if(tp_inst)this._setDateFromField(inst),date&&("string"==typeof date?(tp_inst._parseTime(date,withDate),(tp_date=new Date).setHours(
tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),tp_date.setMicroseconds(tp_inst.microsec)):tp_date=new Date(date.getTime()),"Invalid Date"==tp_date.toString()&&(tp_date=void 0),this._setTime(inst,tp_date))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker"),tp_date=date instanceof Date?new Date(date.getTime()):date;tp_inst&&null!=tp_inst.timezone&&(date=$.timepicker.timezoneAdjust(date,tp_inst.timezone),tp_date=$.timepicker.timezoneAdjust(tp_date,tp_inst.timezone)),this._updateDatepicker(inst),
this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(target,tp_date,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){void 0===inst.lastVal&&this._setDateFromField(inst,noDefault);var date=this._getDate(inst);return date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)&&(date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),date.setMicroseconds(tp_inst.microsec),null!=tp_inst.timezone&&(date=$.timepicker.timezoneAdjust(date,
tp_inst.timezone))),date}return this._base_getDateDatepicker(target,noDefault)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(!(0<=err.indexOf(":")))throw err;date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings),$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}return date},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,
"timepicker");return tp_inst?(tp_inst._updateDateTime(inst),tp_inst.$input.val()):this._base_formatDate(inst)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(target,name,value){var name_clone,inst=this._getInst(target);if(!inst)return null;var tp_inst=this._get(inst,"timepicker");if(tp_inst){var prop,min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={};if("string"==typeof name){if("minDate"===name||"minDateTime"===name)min=value;else if("maxDate"===name||"maxDateTime"===name)max=value;else if("onSelect"===name)onselect=value;else if(overrides.hasOwnProperty(name)){if(
void 0===value)return overrides[name];fns[name]=value,name_clone={}}}else if("object"==typeof name)for(prop in name.minDate?min=name.minDate:name.minDateTime?min=name.minDateTime:name.maxDate?max=name.maxDate:name.maxDateTime&&(max=name.maxDateTime),overrides)overrides.hasOwnProperty(prop)&&name[prop]&&(fns[prop]=name[prop]);for(prop in fns)fns.hasOwnProperty(prop)&&(overrides[prop]=fns[prop],name_clone||(name_clone=$.extend({},name)),delete name_clone[prop]);if(name_clone&&isEmptyObject(name_clone))return;min?(min=0===min?new Date:new Date(min),tp_inst._defaults.minDate=min,tp_inst._defaults.minDateTime=min):max?(max=0===max?new Date:new Date(max),
tp_inst._defaults.maxDate=max,tp_inst._defaults.maxDateTime=max):onselect&&(tp_inst._defaults.onSelect=onselect)}return void 0===value?this._base_optionDatepicker.call($.datepicker,target,name):this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj)if(obj.hasOwnProperty(obj))return!1;return!0},extendRemove=function(target,props){for(var name in $.extend(target,props),props)null!==props[name]&&void 0!==props[name]||(target[name]=props[name]);return target},detectSupport=function(timeFormat){var tf=timeFormat.replace(/\'.*?\'/g,"").toLowerCase(),isIn=function(f,t){
return-1!==f.indexOf(t)};return{hour:isIn(tf,"h"),minute:isIn(tf,"m"),second:isIn(tf,"s"),millisec:isIn(tf,"l"),microsec:isIn(tf,"c"),timezone:isIn(tf,"z"),ampm:isIn("t")&&isIn(timeFormat,"h"),iso8601:isIn(timeFormat,"Z")}},convert24to12=function(hour){return 12<hour&&(hour-=12),0===hour&&(hour=12),String(hour)},splitDateTime=function(dateFormat,dateTimeString,dateSettings,timeSettings){try{var separator=timeSettings&&timeSettings.separator?timeSettings.separator:$.timepicker._defaults.separator,timePartsLen=(timeSettings&&timeSettings.timeFormat?timeSettings.timeFormat:$.timepicker._defaults.timeFormat).split(separator).length,allParts=dateTimeString.split(
separator),allPartsLen=allParts.length;if(1<allPartsLen)return[allParts.splice(0,allPartsLen-timePartsLen).join(separator),allParts.splice(0,timePartsLen).join(separator)]}catch(err){if($.timepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+err+"\ndateTimeString"+dateTimeString+"\ndateFormat = "+dateFormat+"\nseparator = "+timeSettings.separator+"\ntimeFormat = "+timeSettings.timeFormat),0<=err.indexOf(":")){var dateStringLength=dateTimeString.length-(err.length-err.indexOf(":")-2);dateTimeString.substring(dateStringLength);return[$.trim(dateTimeString.substring(0,dateStringLength)),
$.trim(dateTimeString.substring(dateStringLength))]}throw err}return[dateTimeString,""]},parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,splitRes=splitDateTime(dateFormat,dateTimeString,dateSettings,timeSettings);if(date=$.datepicker._base_parseDate(dateFormat,splitRes[0],dateSettings),""===splitRes[1])return{date:date};var timeString=splitRes[1],parsedTime=$.datepicker.parseTime(timeFormat,timeString,timeSettings);if(null===parsedTime)throw"Wrong time format";return{date:date,timeObj:parsedTime}},selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){
var now=void 0!==date?date:new Date;tp_inst.timezone_select.val(-1*now.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||840<tzMinutes)return tzMinutes;var minutes=tzMinutes%60,iso=iso8601?":":"",tz=(0<=tzMinutes?"+":"-")+("0"+(101*((tzMinutes-minutes)/60)).toString()).slice(-2)+iso+("0"+(101*minutes).toString()).slice(-2);return"+00:00"==tz?"Z":tz},$.timepicker.timezoneOffsetNumber=function(tzString){return"Z"===(tzString=tzString.toString().replace(":","")).toUpperCase()?0:/^(\-|\+)\d{4}$/.test(tzString)?("-"==tzString.substr(0,1)?-1:1)*(60*parseInt(tzString.substr(1,2),10
)+parseInt(tzString.substr(3,2),10)):tzString},$.timepicker.timezoneAdjust=function(date,toTimezone){var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz)){var diff=-1*date.getTimezoneOffset()-toTz;date.setMinutes(date.getMinutes()+diff)}return date},$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)},$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange("datetimepicker",startTime,endTime,options)},$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange("datepicker",startTime,endTime,options)},
$.timepicker.handleRange=function(method,startTime,endTime,options){function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(null!==startdt){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval),maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval),0<options.minInterval&&enddt<minDate?endTime[method]("setDate",minDate):0<options.maxInterval&&maxDate<enddt?endTime[method]("setDate",maxDate):enddt<startdt&&other[method]("setDate",changeddt)}}function selected(
changed,other,option){if(changed.val()){var date=changed[method].call(changed,"getDate");null!==date&&0<options.minInterval&&("minDate"==option&&date.setMilliseconds(date.getMilliseconds()+options.minInterval),"maxDate"==option&&date.setMilliseconds(date.getMilliseconds()-options.minInterval)),date.getTime&&other[method].call(other,"option",option,date)}}return options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options),$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,"minDate")}},options,options.start)),$.fn[method].call(endTime,
$.extend({onClose:function(dateText,inst){checkDates($(this),startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,"maxDate")}},options,options.end)),checkDates(startTime,endTime),selected(startTime,endTime,"minDate"),selected(endTime,startTime,"maxDate"),$([startTime.get(0),endTime.get(0)])},$.timepicker.log=function(err){window.console&&console.log(err)},Date.prototype.getMicroseconds||(Date.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(m){return this.microseconds=m,this}),$.timepicker.version="1.3"}}),define("ui/dateRange",["jquery","lodash","ui/component",
"tpl!ui/dateRange/tpl/select","jquery.timePicker"],function($,_,component,formTpl){"use strict";var _defaults={pickerType:"datepicker",pickerConfig:{dateFormat:"yy-mm-dd"},startDate:"",endDate:"",renderTo:null,startInput:null,endInput:null};return function(config){var $periodStart,$periodEnd,componentDateRange,$filterBtn,$resetBtn,initConfig=_.defaults(config||{},_defaults),periodStart=initConfig.startDate||"",periodEnd=initConfig.endDate||"",hasInputs=function(){var isDefined=!1;return initConfig.startInput&&initConfig.endInput&&(isDefined=!0),isDefined};return componentDateRange=component({getStart:function(){return periodStart},getEnd:function(){
return periodEnd}}),hasInputs()?($periodStart=initConfig.startInput,$periodEnd=initConfig.endInput):componentDateRange.setTemplate(formTpl),componentDateRange.on("render",function(){var self=this,$form=this.getElement();hasInputs()||($periodStart=$form.find("input[name=periodStart]"),$periodEnd=$form.find("input[name=periodEnd]"),$filterBtn=$form.find('[data-control="filter"]'),$resetBtn=$form.find('[data-control="reset"]')),$.timepicker.triggeredHandleRange=function(method,startTime,endTime,options){function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(
null!==startdt){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval),maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval),0<options.minInterval&&enddt<minDate?endTime[method]("setDate",minDate):0<options.maxInterval&&maxDate<enddt?endTime[method]("setDate",maxDate):enddt<startdt&&other[method]("setDate",changeddt)}}function selected(changed,other,option,isStart){var date;changed.val()&&(date=changed[method].call(changed,"getDate"),isStart?periodStart=changed.val():periodEnd=changed.val(),null!==date&&0<options.minInterval&&(
"minDate"==option&&date.setMilliseconds(date.getMilliseconds()+options.minInterval),"maxDate"==option&&date.setMilliseconds(date.getMilliseconds()-options.minInterval)),date.getTime&&(other[method].call(other,"option",option,date),isStart?periodEnd=other.val():periodStart=other.val()))}return options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options),$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime),self.trigger("close","start",periodStart)},onSelect:function(selectedDateTime){self.trigger("change","start",selectedDateTime),selected($(this),endTime,"minDate",!0)}},options,options.start)),
$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates($(this),startTime),self.trigger("close","end",periodEnd)},onSelect:function(selectedDateTime){self.trigger("change","end",selectedDateTime),selected($(this),startTime,"maxDate",!1)}},options,options.end)),checkDates(startTime,endTime),selected(startTime,endTime,"minDate",!0),selected(endTime,startTime,"maxDate",!1),$([startTime.get(0),endTime.get(0)])},$.timepicker.triggeredHandleRange(initConfig.pickerType,$periodStart,$periodEnd,{start:initConfig.pickerConfig,end:initConfig.pickerConfig}),$filterBtn&&$filterBtn.length&&$filterBtn.on("click",function(event){event.preventDefault()
,periodStart=$periodStart.val(),periodEnd=$periodEnd.val(),self.trigger("submit")}),$resetBtn&&$resetBtn.length&&$resetBtn.on("click",function(event){event.preventDefault(),$periodStart.val(""),$periodEnd.val(""),$filterBtn.click()})}).on("destroy",function(){hasInputs()&&($periodStart.datepicker("destroy"),$periodEnd.datepicker("destroy"))}).init(initConfig),componentDateRange}}),define("tpl!ui/deleter/undo",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",
escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="undobox feedback-info">\n    <span class="icon-info"></span>\n        ',buffer+=escapeExpression((helper=helpers.undoMessage)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.undoMessage)?helper.call(depth0,{hash:{},data:data}):helper)+'\n        <a class="undo" href="#">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Undo",options):helperMissing.call(depth0,"__","Undo",options)))+'</a>\n    <span title="'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Remove Message",options):helperMissing.call(depth0,"__","Remove Message",options)))+'" class="icon-close" data-close=":parent .undobox"></span>\n</div>'})}),define("ui/deleter",["jquery","lodash","i18n","core/pluginifier","core/dataattrhandler","tpl!ui/deleter/undo"],function($,_,__,Pluginifier,DataAttrHandler,undoTmpl){"use strict";var ns="deleter",dataNs="ui."+ns,defaults={bindEvent:"click",undo:!1,undoTimeout:5e3,undoMessage:__("Element deleted."),undoContainer:!1,confirm:!1,confirmMessage:__("Are you sure you want to delete it?"),disableClass:"disabled"},deleter={init:function(options){
return options=_.defaults(options,defaults),this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),deleter._delete($elt)}),$elt.trigger("create."+ns))})},_delete:function($elt){var $target,$parent,$evtTrigger,$placeholder,$undoBox,undoRemove,timeout,self=deleter,performDelete=!0,options=$elt.data(dataNs),realRemove=function(){performDelete&&$target&&($target.remove(),$evtTrigger.trigger("deleted."+ns))};options&&!$elt.hasClass(options.disableClass)&&($target=options.target,!0===options.confirm&&(performDelete=window.confirm(options.confirmMessage)),
performDelete&&($parent=$target.parent(),$evtTrigger=0<$target.has($elt).length?$parent:$elt,$elt.trigger("delete."+ns,[$target]),$target.trigger("delete",[options.undo]),$placeholder=$('<span style="display:none;" />').insertAfter($target),$target.detach(),options.undo?($(document).off(".unundo."+ns),($undoBox=self._createUndoBox(options)).find(".undo").click(function(e){e.preventDefault(),"number"==typeof timeout&&clearTimeout(timeout),performDelete=!1,$undoBox.remove(),$target.insertBefore($placeholder),$placeholder.remove(),$elt.trigger("undo."+ns,[$target]),$target.trigger("undo."+ns)}),undoRemove=function(){$undoBox&&$undoBox.length&&($undoBox.remove()
,$placeholder.remove()),realRemove(),$(document).off(".unundo."+ns)},$(document).one("mousedown.unundo."+ns,function(e){return e.preventDefault(),e.stopImmediatePropagation(),0!==$undoBox.find(e.target).length&&$(e.target).hasClass("undo")||"number"!=typeof timeout||(clearTimeout(timeout),undoRemove()),_.delay(function(){$(e.target).trigger("mousedown")},10),!1}),timeout=setTimeout(function(){undoRemove()},options.undoTimeout)):realRemove()))},_createUndoBox:function(options){var $undoContainer=options.undoContainer||$("#feedback-messages-main");return $undoContainer.length||($undoContainer=$('<div id="feedback-messages-main" class="tao-scope"></div>'
).appendTo("body")),$(undoTmpl(options)).appendTo($undoContainer)},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,deleter,{expose:["delete"]}),function($container){new DataAttrHandler("delete",{container:$container,listenerEvent:"click",namespace:dataNs,bubbled:!0}).init(function($elt,$target){var options={target:$target,bindEvent:!1,undo:!0},confirm=$elt.data("delete-confirm"),undo=$elt.data("delete-undo");confirm&&(options.confirm=!0,options.undo=!1,0<confirm.length&&(
options.confirmMessage=confirm)),null!=undo&&(!1===undo?options.undo=!1:(options.confirm=!1,options.undo=!0,0<undo.length&&(options.undoMessage=undo))),$elt.deleter(options)}).trigger(function($elt){$elt.deleter("delete")})}}),define("ui/dialog/confirm",["lodash","i18n","ui/dialog"],function(_,__,dialog){"use strict";return function(message,accept,refuse,options){var dialogOptions,dlg,accepted=!1,_options={buttons:{labels:{ok:__("Ok"),cancel:__("Cancel")}}};return dialogOptions={message:message,autoRender:!0,autoDestroy:!0,onOkBtn:function(){accepted=!0,_.isFunction(accept)&&accept.call(this)},buttons:{ok:{id:"ok",type:"info",label:(options=_.defaults(
options||{},_options)).buttons.labels.ok||__("Ok"),close:!0},cancel:{id:"cancel",type:"regular",label:options.buttons.labels.cancel||__("Cancel"),close:!0}}},dlg=dialog(dialogOptions),_.isFunction(refuse)&&dlg.on("closed.modal",function(){accepted||refuse.call(this)}),dlg}}),define("ui/resource/selectable",["jquery","lodash"],function($,_){"use strict";return function(component,config){var selection={},nodes={},isAComponent=_.all(["on","trigger","init","render","is","getElement"],function(method){return _.isFunction(component[method])});if(!_.isObject(component)||!isAComponent)throw new TypeError("Selectable expects a component");return _.assign(component,{
getNodes:function(){return nodes},getNode:function(uri){return!(!uri||!_.isPlainObject(nodes[uri]))&&nodes[uri]},setNodes:function(newNodes){_.isArray(newNodes)?nodes=_.reduce(newNodes,function(acc,node){return node.uri&&(acc[node.uri]=node),acc},{}):_.isObject(newNodes)&&(nodes=newNodes)},addNode:function(uri,node){return!!_.isPlainObject(node)&&(nodes[uri]=node,this.trigger("add",uri,node),!0)},removeNode:function(uri){return!!this.hasNode(uri)&&(selection[uri]&&this.unselect(uri),nodes=_.omit(nodes,uri),this.trigger("remove",uri),!0)},hasNode:function(uri){return void 0!==nodes[uri]},getSelection:function(){return selection},clearSelection:function(){
return 0<_.size(selection)&&(selection={}),this.is("rendered")&&($(".selected",this.getElement()).removeClass("selected"),this.trigger("change",selection)),this},select:function(uris,only){var $component,currentConfig=_.defaults(component.getConfig()||{},config||{});return this.is("rendered")&&($component=this.getElement(),only&&(selection={},$(".selected",this.getElement()).removeClass("selected")),_.isArray(uris)||(uris=[uris]),_(uris).reject(function(uri){return void 0!==selection[uri]||!nodes[uri]}).forEach(function(uri){var $node=$('[data-uri="'+uri+'"]',$component),selectNode=$node.length;selectNode&&currentConfig&&_.isFunction(
currentConfig.preventSelection)&&currentConfig.preventSelection(uri,nodes[uri],$node)&&(selectNode=!1),selectNode&&($node.addClass("selected"),selection[uri]=nodes[uri])}),this.trigger("change",selection)),this},unselect:function(uris){var $component;return this.is("rendered")&&($component=this.getElement(),_.isArray(uris)||(uris=[uris]),_(uris).filter(function(uri){return void 0!==selection[uri]||!nodes[uri]}).forEach(function(uri){var $node=$('[data-uri="'+uri+'"]',$component);$node.length&&($node.removeClass("selected"),selection=_.omit(selection,uri))}),this.trigger("change",selection)),this},selectAll:function(){return this.select(_.keys(nodes))}})}}),
define("tpl!ui/resource/tpl/tree",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="";return buffer+='<div class="resource-tree ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <ul></ul>\n</div>'})}),define("tpl!ui/resource/tpl/treeNode",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,data){return" selectable"}function program4(depth0,data){var stack1,helper,buffer="";return buffer+='data-access="',stack1=(helper=helpers.accessMode)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.accessMode)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program6(depth0,data){var stack1,helper,buffer=""
;return buffer+="\n        ",((stack1=(helper=helpers.childList)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.childList)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="\n    "}return helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="class',(
(stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-count="',stack1=(helper=helpers.count)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.count)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},
inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        <span class="class-toggler clickable" tabindex="0"></span>\n        <span class="icon-folder"></span>\n        ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'\n        <span class="selector clickable" tabindex="0"></span>\n    </a>\n    <ul>\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.childList,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    </ul>\n    <div class="more hidden">\n        <a href="#" class="btn-info small"><span class="icon-download"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Load more",options):helperMissing.call(depth0,"__","Load more",options)))+"</a>\n    </div>\n</li>\n"},data),data:data},((stack1=helper?helper.call(depth0,
depth0&&depth0.type,"class",options):helperMissing.call(depth0,"equal",depth0&&depth0.type,"class",options))||0===stack1)&&(buffer+=stack1),buffer+="\n\n",helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.noop,fn:self.program(8,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="instance',((stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},inverse:self.noop,fn:self.program(2,program2,
data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"  ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(
stack1)+'">\n        <span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>\n        ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'\n        <span class="selector clickable" tabindex="0"></span>\n    </a>\n</li>\n'},data),data:data},((stack1=helper?helper.call(depth0,depth0&&depth0.type,"instance",options):helperMissing.call(depth0
,"equal",depth0&&depth0.type,"instance",options))||0===stack1)&&(buffer+=stack1),buffer})}),define("ui/resource/tree",["jquery","lodash","i18n","ui/component","ui/resource/selectable","ui/hider","tpl!ui/resource/tpl/tree","tpl!ui/resource/tpl/treeNode"],function($,_,__,component,selectable,hider,treeTpl,treeNodeTpl){"use strict";var defaultConfig={multiple:!0},updateCount=function($classNode,update){var count=0;$classNode&&$classNode.length&&$classNode.hasClass("class")&&(count=$classNode.data("count"),(count+=update)<0&&(count=0),$classNode.attr("data-count",count).data("count",count))};return function($container,config){var resourceTree=selectable(
component({query:function(params){return this.is("loading")||this.trigger("query",_.defaults(params||{},{classUri:this.classUri})),this},update:function(nodes,params){var $root,$component,self=this;function reduceNode(acc,node){return node.selectable=!1,self.hasNode(node.uri)||params&&0<params.offset&&"class"===node.type||"class"===node.type&&!node.state&&!self.config.selectClass?acc:("class"===node.type&&self.config.selectClass&&(node.classUri=node.uri,node.selectable=!0,node.state||(node.state="empty"),self.addNode(node.uri,_.omit(node,["count","state","children"]))),"instance"===node.type&&(node.selectable=!0,self.addNode(node.uri,_.omit(node,["count",
"state","children"])),node.icon=config.icon),node.children&&node.children.length&&(node.childList=reduceNodes(node.children)),acc+=treeNodeTpl(node))}function reduceNodes(nodeList){return _.sortBy(nodeList,function(a,b){return b.label-a.label}).reduce(reduceNode,"")}return this.is("rendered")&&($component=this.getElement(),params&&params.classUri&&($root=$('.class[data-uri="'+params.classUri+'"]',$component)),$root&&$root.length||($root=$component),nodes[0].uri===$root.data("uri")&&(nodes=nodes[0].children||[]),$root.children("ul").append(reduceNodes(nodes)),params&&_.isNumber(params.updateCount)&&updateCount($root,params.updateCount),function needMore($node
){var $more=$node.children(".more"),totalCount=$node.data("count"),instancesCount=$node.children("ul").children(".instance").length;0<totalCount&&0<instancesCount&&instancesCount<totalCount?hider.show($more):hider.hide($more),$node.children("ul").find(".class").each(function(){needMore($(this))})}($root),function indentChildren($list,level){var indent;$list.length&&(indent=15*level,level++,$list.children("li").each(function(){var $target=$(this);$target.children("a").css("padding-left",indent+"px"),indentChildren($target.children("ul"),level)}),$list.siblings(".more").css("padding-left",indent+"px"))}($component.children("ul"),0),$root.removeClass("closed"
).toggleClass("empty",!$root.children("ul").children("li").length),this.trigger("update")),this}},defaultConfig));return resourceTree.setTemplate(treeTpl).on("init",function(){this.classUri=this.config.classUri,this.setState("multiple",!!this.config.multiple),this.render($container)}).on("render",function(){var self=this,$component=this.getElement(),toggleClass=function($class){$class.hasClass("closed")?function($class){$class.hasClass("closed")&&($class.children("ul").children("li").length?$class.removeClass("closed"):self.query({classUri:$class.data("uri")}))}($class):function($class){$class.addClass("closed")}($class)}
;self.config.selectClass?$component.on("click",".class",function(e){var $class=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),$(e.target).hasClass("class-toggler")?$class.hasClass("empty")||toggleClass($class):$class.hasClass("selected")?self.unselect($class.data("uri")):"denied"!==$class.data("access")&&self.select($class.data("uri"),!self.is("multiple"))}):$component.on("click",".class:not(.empty)",function(e){var $class=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),toggleClass($class)}),$component.on("click",".instance:not([data-access=denied])",function(e){var $instance=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),
$instance.hasClass("selected")?self.unselect($instance.data("uri")):self.select($instance.data("uri"),!self.is("multiple"))}),$component.on("click",".more",function(e){var $root=$(e.currentTarget).parent(".class");e.preventDefault(),e.stopPropagation(),self.query({classUri:$root.data("uri"),offset:$root.children("ul").children(".instance").length})}),this.config.nodes?this.update(this.config.nodes):this.query()}).on("query",function(){this.setState("loading",!0)}).on("update",function(){this.setState("loading",!1)}).on("remove",function(uri){var $node,$parents,$parent;this.is("rendered")&&uri&&($parents=($node=$('[data-uri="'+uri+'"]',this.getElement())
).parents(".class"),$node.hasClass("instance")&&updateCount($parents,-1),1===($parent=$parents.first()).children("ul").children("li").length&&$parent.removeClass("closed").addClass("empty"),$node.remove())}),_.defer(function(){resourceTree.init(config)}),resourceTree}}),define("tpl!ui/resource/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="resource-list ',((
stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <ul></ul>\n    <div class="more hidden">\n        <a href="#" class="btn-info small"><span class="icon-download"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Load more",options):helperMissing.call(depth0,"__","Load more",options)))+"</a>\n    </div>\n</div>"})}),define("tpl!ui/resource/tpl/listNode",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.selected,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'class="selected"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' class="',stack1=(
helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='data-access="',stack1=(helper=helpers.accessMode)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.accessMode)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(
stack1)+"</a>\n</li>"})}),define("ui/resource/list",["jquery","lodash","i18n","ui/component","ui/resource/selectable","ui/hider","tpl!ui/resource/tpl/list","tpl!ui/resource/tpl/listNode"],function($,_,__,component,selectable,hider,listTpl,listNodeTpl){"use strict";var defaultConfig={multiple:!0};return function($container,config){var $list,$loadMore,resourceList=selectable(component({query:function(params){this.is("loading")||this.trigger("query",_.defaults(params||{},{classUri:this.classUri}))},update:function(resources){var self=this;this.is("rendered")&&($list.append(_.reduce(resources.nodes,function(acc,node){return node.icon=self.config.icon,
acc+=listNodeTpl(node)},"")),_.forEach(resources.nodes,function(node){self.addNode(node.uri,node)}),resources.total>_.size(self.getNodes())?hider.show($loadMore):hider.hide($loadMore),this.trigger("update"))}},defaultConfig));return resourceList.setTemplate(listTpl).on("init",function(){this.classUri=this.config.classUri,this.setState("multiple",!!this.config.multiple),this.render($container)}).on("render",function(){var self=this,$component=this.getElement();$list=$component.children("ul"),$loadMore=$(".more",$component),$component.on("click","li",function(e){var $instance=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),$instance.hasClass(
"selected")?self.unselect($instance.data("uri")):self.select($instance.data("uri"),!self.is("multiple"))}),$loadMore.on("click",function(e){e.preventDefault(),self.query({offset:_.size(self.getNodes())})}),this.config.nodes?this.update(this.config.nodes):this.query()}).on("query",function(){this.setState("loading",!0)}).on("update",function(){this.setState("loading",!1)}).on("remove",function(uri){this.is("rendered")&&$('[data-uri="'+uri+'"]',this.getElement()).remove()}),_.defer(function(){resourceList.init(config)}),resourceList}}),define("tpl!ui/generis/validator/validator",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="ui-generis-validator"></div>'})}),define("css!ui/generis/validator/validator",[],function(){}),define("ui/generis/validator/validator",["jquery","lodash","i18n","ui/component","tpl!ui/generis/validator/validator","css!ui/generis/validator/validator"],function($,_,__,componentFactory,tpl){"use strict";return function(options){var validator;return options=options||{},(validator=componentFactory({run:function(value){return this.errors=_(this.validations).reject(function(validation){
return validation.predicate instanceof RegExp?validation.predicate.test(value):"function"==typeof validation.predicate?validation.predicate(value):void 0},this).sortBy("precedence").map(function(validation){return validation.message}).value(),this},clear:function(){return this.errors=[],this.is("rendered")&&this.getElement().empty(),this},display:function(){var $this=this.getElement();return this.is("rendered")&&($this.empty(),_.each(this.errors,function(error){$this.append($("<div>",{class:"validation-error"}).text(error))})),this},addValidation:function(validation){return this.validations.push(validation),this},removeValidations:function(){
return this.validations=[],this}}).setTemplate(tpl).init()).errors=[],validator.validations=options.validations||[],validator}}),define("tpl!ui/generis/widget/widget",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<label for="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'">\n    ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.required,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <abbr title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"This field is required",options):helperMissing.call(depth0,"__","This field is required",options)))+'">*</abbr>\n    '},
data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</label>"})}),define("css!ui/generis/widget/widget",[],function(){}),define("ui/generis/widget/widget",["jquery","lodash","i18n","handlebars","ui/component","ui/generis/validator/validator","tpl!ui/generis/widget/widget","css!ui/generis/widget/widget"],function($,_,__,Handlebars,componentFactory,generisValidatorFactory,ptl){"use strict";return Handlebars.registerPartial("ui-generis-widget-label",ptl),function(options,spec){var widget;return options=options||{},(widget=componentFactory(_.assign({get:function(){var ret=this.config.value||"";return this.is("rendered")&&(ret=this.getElement().find(
'[name="'+this.config.uri+'"]').val()),ret},set:function(value){return this.config.value=value,this.is("rendered")&&this.getElement().find('[name="'+this.config.uri+'"]').val(value),this.config.value},setValidator:function(validator){return"function"==typeof(validator=validator||[]).is?this.validator=validator:this.validator=generisValidatorFactory({validations:validator}),this.is("rendered")?this.validator.render(this.getElement()):this.on("render.setValidator",function(){this.validator.render(this.getElement()),this.off("render.setValidator")}),this},validate:function(){var input;return this.validator&&(this.validator.run(this.get()),
this.validator.display(),this.is("rendered")&&(input=this.getElement().find(".right > :input, .right > .check-box-input"),this.validator.errors.length?input.addClass("error"):input.removeClass("error"))),this},serialize:function(){return{name:this.config.uri,value:this.get()}}},spec),{label:__("Label"),required:!1}).on("render",function(){var $input=this.getElement().find(".right :input"),self=this;$input.on("change blur",function(){self.trigger("change",self.serialize())})})).setValidator(options.validator),widget}}),define("tpl!ui/generis/widget/checkBox/checkBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,
data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,data){return'\n                        checked="true"\n                        '}return buffer+='<div class="ui-generis-widget check-box">\n    <div class="left">\n        ',((stack1=self.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),
buffer+='\n    </div>\n    <div class="right">\n        <div class="check-box-input">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.range,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,function(depth0,data,depth1){var stack1,helper,options,buffer="";return buffer+='\n            <div class="option">\n                <label>\n                    <input\n                        type="checkbox"\n                        name="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(depth0):stack1)+'"\n                        value="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(
depth0):stack1)+'"\n                        ',helper=helpers.includes||depth1&&depth1.includes,options={hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data},((stack1=helper?helper.call(depth0,depth1&&depth1.values,depth0&&depth0.uri,options):helperMissing.call(depth0,"includes",depth1&&depth1.values,depth0&&depth0.uri,options))||0===stack1)&&(buffer+=stack1),buffer+='>\n                    <span class="icon-checkbox"></span>\n                    '+escapeExpression(typeof(stack1=depth0&&depth0.label)===functionType?stack1.apply(depth0):stack1)+"\n                </label>\n            </div>\n            "},data,depth0),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+="\n        </div>\n    </div>\n</div>"})}),define("ui/generis/widget/checkBox/checkBox",["jquery","lodash","i18n","ui/generis/widget/widget","tpl!ui/generis/widget/checkBox/checkBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(widget=widgetFactory({validator:validator},{get:function(){var ret=this.config.values||[];return this.is("rendered")&&(ret=[],this.getElement().find(".option input:checked").map(function(){ret.push($(this).val())})),ret},set:function(values){return Array.isArray(values
)?this.config.values=values:this.config.values.push(values),this.is("rendered")&&_.each(this.config.values,function(value){this.getElement().find("input[name="+value+"]").prop("checked",!0)}),this.config.values}}).setTemplate(tpl).init({label:config.label,range:config.range||[],required:config.required||!1,uri:config.uri,values:config.values||[]})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:function(value){return 0<value.length},precedence:1}),widget}}),define("tpl!ui/generis/widget/comboBox/comboBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="ui-generis-widget combo-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <select name="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}
):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <option value="">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Choose a value...",options):helperMissing.call(depth0,"__","Choose a value...",options)))+"</option>\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.range,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,buffer="";return buffer+='\n            <option value="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(depth0
):stack1)+'">'+escapeExpression(typeof(stack1=depth0&&depth0.label)===functionType?stack1.apply(depth0):stack1)+"</option>\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </select>\n    </div>\n</div>"})}),define("ui/generis/widget/comboBox/comboBox",["jquery","lodash","i18n","ui/generis/widget/widget","tpl!ui/generis/widget/comboBox/comboBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(widget=widgetFactory({validator:validator},{}).setTemplate(tpl).init({label:config.label,range:config.range||[],required:config.required||!1,
uri:config.uri,value:config.value||""})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:/\S+/,precedence:1}),widget}}),define("tpl!ui/generis/widget/hiddenBox/hiddenBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-widget hidden-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(
partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper)+'" type="password">\n    </div>\n</div>\n\n<div class="ui-generis-widget hidden-box confirmation">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0&&depth0.confirmation,helpers,partials,data)
)||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.confirmation)||!1===stack1?stack1:stack1.uri)?stack1.apply(depth0):stack1)+'" type="password">\n    </div>\n</div>'})}),define("ui/generis/widget/hiddenBox/hiddenBox",["jquery","lodash","i18n","ui/generis/widget/widget","tpl!ui/generis/widget/hiddenBox/hiddenBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(widget=widgetFactory({validator:validator},{get:function(){var $el,ret={
value:this.config.value,confirmation:this.config.confirmation.value};return this.is("rendered")&&($el=this.getElement(),ret.value=$el.find('[name="'+this.config.uri+'"]').val(),ret.confirmation=$el.find('[name="'+this.config.confirmation.uri+'"]').val()),ret},set:function(value){var $el;return this.config.value=this.config.confirmation.value=value,this.is("rendered")&&(($el=this.getElement()).find('[name="'+this.config.uri+'"]').val(value),$el.find('[name="'+this.config.confirmation.uri+'"]').val(value)),{value:this.config.value,confirmation:this.config.confirmation.value}},serialize:function(){return{name:this.config.uri,value:this.get().value}}}
).setTemplate(tpl).init({confirmation:{label:__("%s Confirmation",config.label),uri:config.uri+"_confirmation",value:config.value||""},label:config.label,required:config.required||!1,uri:config.uri,value:config.value||""})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:function(value){return/\S+/.test(value.value)},precedence:1}),widget.validator.addValidation({message:__("Fields must match"),predicate:function(value){return value.value===value.confirmation},precedence:2}),widget}}),define("tpl!ui/generis/widget/textBox/textBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers
,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-widget text-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(
helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper)+'" value="',buffer+=escapeExpression(stack1=(helper=helpers.value)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.value)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    </div>\n</div>'})}),define("ui/generis/widget/textBox/textBox",["jquery","lodash","i18n","ui/generis/widget/widget","tpl!ui/generis/widget/textBox/textBox"],function($,_,__,widgetFactory,tpl){"use strict";return function(options,config){var widget,validator=options.validator||[];return(widget=widgetFactory({validator:validator},{}).setTemplate(tpl).init({label:config.label,
required:config.required||!1,uri:config.uri,value:config.value||""})).config.required&&widget.validator.addValidation({message:__("This field is required"),predicate:/\S+/,precedence:1}),widget}}),define("ui/generis/widget/loader",["lodash","ui/generis/widget/checkBox/checkBox","ui/generis/widget/comboBox/comboBox","ui/generis/widget/hiddenBox/hiddenBox","ui/generis/widget/textBox/textBox"],function(_,checkBoxFactory,comboBoxFactory,hiddenBoxFactory,textBoxFactory){"use strict";var _widgetFactories={"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#CheckBox":checkBoxFactory,"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#ComboBox":comboBoxFactory,
"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#StateWidget":comboBoxFactory,"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#HiddenBox":hiddenBoxFactory,"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextBox":textBoxFactory};return function(uri){return uri&&_.contains(Object.keys(_widgetFactories),uri)?_widgetFactories[uri]:_widgetFactories["http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextBox"]}}),define("tpl!ui/generis/form/form",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,
buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-form">\n    <h2>',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</h2>\n    <form action="',stack1=(helper=helpers.formAction)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.formAction)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" method="',stack1=(helper=helpers.formMethod)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.formMethod)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        <fieldset></fieldset>\n        <div class="toolbar">\n            ',((stack1=helpers.if.call(depth0,depth0&&depth0.reset,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <button type="reset" class="btn-neutral small">\n                <span class="icon-reset"/> ',stack1=(helper=helpers.resetText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resetText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+"\n            </button>\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n            <button type="submit" class="btn-info small">\n                <span class="icon-save"/> ',stack1=(helper=helpers.submitText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.submitText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n            </button>\n        </div>\n    </form>\n</div>"})}),define("css!ui/generis/form/form",[],function(){}),define("ui/generis/form/form",["jquery","lodash","i18n","ui/component","ui/generis/widget/loader",
"ui/generis/widget/checkBox/checkBox","ui/generis/widget/comboBox/comboBox","ui/generis/widget/hiddenBox/hiddenBox","ui/generis/widget/textBox/textBox","tpl!ui/generis/form/form","css!ui/generis/form/form"],function($,_,__,componentFactory,widgetLoader,checkBoxFactory,comboBoxFactory,hiddenBoxFactory,textBoxFactory,tpl){"use strict";return function(options,config){var form;return options=options||{},(config=config||{}).form=config.form||{},config.submit=config.submit||{},(form=componentFactory({addWidget:function(widgetOptions){var widget=widgetLoader(widgetOptions.widget)({},widgetOptions);return this.widgets.push(widget),this.is("rendered")?widget.render(
this.getElement().find("form > fieldset")):this.on("render."+widget.config.uri,function(){widget.render(this.getElement().find("form > fieldset")),this.off("render."+this.config.uri)}),this},getWidget:function(uri){return _.find(this.widgets,function(widget){return widget.config.uri===uri})},removeWidget:function(uri){return _.remove(this.widgets,function(widget){if(widget.config.uri===uri)return widget.destroy(),!0}),this},validate:function(){return this.errors=_(this.widgets).map(function(widget){return widget.validate(),{uri:widget.config.uri,errors:widget.validator.errors}}).reject(function(data){return!data.errors||0===data.errors.length}).value(),this
},serializeArray:function(){return _.map(this.widgets,function(widget){return widget.serialize()})},getValues:function(){return _.reduce(this.serializeArray(),function(acc,field){return(_.isString(field.name)&&!_.isEmpty(field.name)&&_.isString(field.value)&&!_.isEmpty(field.value)||_.isArray(field.value)&&0<field.value.length)&&(acc[field.name]=field.value),acc},{})},toggleLoading:function(isLoading){return void 0===isLoading&&(isLoading=!this.is("loading")),isLoading?(this.trigger("loading"),this.disable()):(this.trigger("loaded"),this.enable()),this.setState("loading",isLoading),this}},{formAction:"#",formMethod:"get",submitText:__("Save"),title:__(
"Generis Form"),reset:!0,resetText:__("Reset")}).setTemplate(tpl).init(config).on("render",function(){var $form=this.getElement().find("form"),self=this;$form.on("submit",function(e){return e.preventDefault(),self.trigger("submit",self.serializeArray()),!1}),$form.on("reset",function(){self.trigger("reset",self.serializeArray())})})).data=options,form.errors=[],form.widgets=[],_.each(options.properties||[],function(property){property.range&&"string"==typeof property.range&&(property.range=options.values[property.range]),form.addWidget(property)}),form}}),define("tpl!ui/resource/tpl/filters",["handlebars"],function(hb){return hb.template(function(Handlebars,
depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="filters">\n</div>'})}),define("ui/resource/filters",["jquery","lodash","i18n","ui/component","ui/generis/form/form","tpl!ui/resource/tpl/filters"],function($,_,__,component,generisFormFactory,filtersTpl){"use strict";var supportedWidgets=["http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextBox","http://www.tao.lu/datatypes/WidgetDefinitions.rdf#CheckBox","http://www.tao.lu/datatypes/WidgetDefinitions.rdf#ComboBox","http://www.tao.lu/datatypes/WidgetDefinitions.rdf#TextArea",
"http://www.tao.lu/datatypes/WidgetDefinitions.rdf#StateWidget"],defaultConfig={title:__("Search by properties"),applyLabel:__("Apply")};return function($container,config){var filters=component({getValues:function(){return this.is("rendered")&&this.form?this.form.getValues():null},setValue:function(uri,value){var widget;return this.is("rendered")&&this.form&&(widget=this.form.getWidget(uri))&&widget.set(value),this},reset:function(){return this.update(this.config.data)},update:function(data){var properties,self=this;return this.is("rendered")&&(this.getElement().empty(),properties=_.filter(data.properties,function(property){return _.contains(supportedWidgets
,property.widget)}),this.form=generisFormFactory({properties:properties,values:data.ranges},{submitText:this.config.applyLabel,title:this.config.title}).on("submit reset",function(){self.trigger("change",this.getValues())}).render(this.getElement())),this},getTextualQuery:function(){var result,self=this;return this.is("rendered")&&(result=_.reduce(this.form.getValues(),function(acc,value,uri){var displayValue,widget=self.form.getWidget(uri);return widget&&(_.isEmpty(acc)||(acc+=__(" AND ")),acc+=widget.config.label+__(" is "),displayValue=widget.config.range?_.map(_.isArray(value)?value:[value],function(val){var selectedValue=_.find(widget.config.range,{
uri:val});return selectedValue&&selectedValue.label}):value,_.isString(displayValue)&&(acc+=displayValue),_.isArray(displayValue)&&(acc+=displayValue.join(", "))),acc},"")),result}},defaultConfig);return filters.setTemplate(filtersTpl).on("init",function(){this.render($container)}).on("render",function(){this.config.data&&this.update(this.config.data)}),_.defer(function(){filters.init(config)}),filters}}),define("tpl!ui/resource/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",
functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program4(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <a href="#" data-view-format="'+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.active,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=" ",((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+='><span class="',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span></a>\n        '}function program5(depth0,data){return'class="active"'}function program7(depth0,data){var stack1,helper,buffer="";return buffer+='title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program10(depth0,data){var helper,options,
buffer="";return buffer+='\n            <a href="#" class="filters-opener" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Advanced search, add filters",options):helperMissing.call(depth0,"__","Advanced search, add filters",options)))+'"><span class="icon-add"></span></a>\n            '}function program12(depth0,data){return"hidden"}function program14(depth0,data){return'\n        <div class="filters-container folded"></div>\n        '}return buffer+='<div class="resource-selector ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(1,function(
depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.showContext,{hash:{},inverse:self.noop,fn:self.program(3,function(depth0,data){var stack1,buffer="";return buffer+='\n    <nav class="context">\n        <div class="class-context"></div>\n        ',((stack1=helpers.each.call(depth0,depth0&&depth0.formats,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </nav>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.if.call(depth0,
depth0&&depth0.showSelection,{hash:{},inverse:self.noop,fn:self.program(9,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <nav class="selection">\n        <div class="search">\n            <input type="text" placeholder="',stack1=(helper=helpers.searchPlaceholder)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.searchPlaceholder)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" />\n            ',((stack1=helpers.if.call(depth0,depth0&&depth0.filters,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='\n        </div>\n        <div class="selection-control">\n            <a href="#" class="selection-toggle ',((stack1=helpers.unless.call(depth0,depth0&&depth0.switchMode,{hash:{},inverse:self.noop,fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Toggle multiple/single selection",options):helperMissing.call(depth0,"__","Toggle multiple/single selection",options)))+'">\n                <span class="icon-multi-select"></span>\n            </a>\n            <label class="selection-indicator ',((
stack1=helpers.unless.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n                <input type="checkbox">\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.filters,{hash:{},inverse:self.noop,fn:self.program(14,program14,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </nav>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n    <main>\n        <span class="hidden no-results">',stack1=(helper=helpers.noResultsText
)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.noResultsText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    </main>\n\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(16,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <footer>\n        <div class="get-selection">\n           <span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Selected",options):helperMissing.call(depth0,"__","Selected",options)))+" ",stack1=(
helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+' : </span><span class="selected-num">0</span>\n        </div>\n    </footer>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"})}),define("css!ui/resource/css/selector",[],function(){}),define("ui/resource/selector",["jquery","lodash","i18n","core/promise","ui/component","ui/hider","ui/class/selector","ui/resource/tree","ui/resource/list","ui/resource/filters","tpl!ui/resource/tpl/selector","css!ui/resource/css/selector.css"],function($,_,__,
Promise,component,hider,classesSelectorFactory,treeFactory,listFactory,filtersFactory,selectorTpl){"use strict";var labelUri="http://www.w3.org/2000/01/rdf-schema#label",nodeTypes={instance:"instance",class:"class"},selectionModes={single:"single",multiple:"multiple",both:"both"},defaultConfig={type:__("resources"),noResultsText:_("No resources found"),searchPlaceholder:__("Search"),icon:"item",selectionMode:selectionModes.single,selectClass:!1,filters:!1,showContext:!0,showSelection:!0,formats:{list:{icon:"icon-ul",title:__("View resources as a list"),componentFactory:listFactory},tree:{icon:"icon-tree",title:__("View resources as a tree"),
componentFactory:treeFactory,active:!0}},limit:30},resourceSelectorFactory=function($container,config){var $classContainer,$resultArea,$noResults,$searchField,$viewFormats,$selectNum,$selectCtrl,$selectCtrlLabel,$filterToggle,$filterContainer,$selectionToggle,resourceSelector=component({empty:function(){return this.is("rendered")&&this.selectionComponent&&(this.selectionComponent.destroy(),this.selectionComponent=null),this.trigger("empty")},reset:function(){return this.is("rendered")&&(this.empty(),this.searchQuery={},this.config.filters&&(this.filtersComponent&&this.filtersComponent.reset(),$searchField.val("").attr("title",null).attr("placeholder",
this.config.searchPlaceholder))),this.trigger("reset")},getSelection:function(){return this.selectionComponent?this.selectionComponent.getSelection():null},clearSelection:function(){return this.selectionComponent&&this.selectionComponent.clearSelection(),this},setSearchQuery:function(query){return this.searchQuery={},this.searchQuery[labelUri]="",_.isString(query)&&!_.isEmpty(query)&&(this.searchQuery[labelUri]=query),_.isPlainObject(query)&&(this.searchQuery=query),this},getSearchQuery:function(){return 0===_.size(this.searchQuery)&&(this.searchQuery[labelUri]=""),this.searchQuery},query:function(params){var defaultParams,search;return this.is("rendered"
)&&!this.is("loading")&&(this.setState("loading",!0),params=params||{},search=this.getSearchQuery(),defaultParams={classUri:this.classUri,format:this.format,limit:this.config.limit,search:_.isObject(search)?JSON.stringify(search):""},this.trigger("query",_.defaults(params,defaultParams))),this},changeFormat:function(format){var $viewFormat;return this.is("rendered")&&this.format!==format&&(1!==($viewFormat=$viewFormats.filter('[data-view-format="'+format+'"]')).length||$viewFormat.hasClass("active")||($viewFormats.removeClass("active"),$viewFormat.addClass("active"),this.empty(),this.format=format,this.trigger("formatchange",format))),this},
changeSelectionMode:function(newMode){return this.is("rendered")&&this.config.selectionMode!==newMode&&selectionModes[newMode]&&(this.config.multiple&&this.clearSelection(),this.config.multiple=newMode===selectionModes.multiple,this.selectionComponent.setState("multiple",this.config.multiple),this.setState("multiple",this.config.multiple),this.config.multiple?hider.show($selectCtrlLabel):hider.hide($selectCtrlLabel),this.trigger("selectionmodechange",newMode)),this},update:function(resources,params){var componentFactory,self=this;if(this.is("rendered")&&this.format){if(
componentFactory=this.config.formats[this.format]&&this.config.formats[this.format].componentFactory,!_.isFunction(componentFactory))return this.trigger("error",new TypeError("Unable to load the component for the format "+this.format));hider.hide($noResults),params.updateClasses&&this.classSelector&&this.classSelector.updateNodes(function filterClasses(resources){return _(resources).filter({type:nodeTypes.class}).map(function(resource){var classNode=_.pick(resource,["uri","label"]);return resource.children&&(classNode.children=filterClasses(resource.children)),classNode}).value()}(resources)),this.selectionComponent?this.selectionComponent.update(resources,
params):this.selectionComponent=componentFactory($resultArea,_.defaults({classUri:this.classUri,nodes:resources},this.config)).on("query",function(queryParams){self.query(queryParams)}).on("update",function(){0===_.size(this.getNodes())&&0===$("li",$resultArea).length&&hider.show($noResults),self.trigger("update")}).on("change",function(selected){self.trigger("change",selected)}).on("error",function(err){self.trigger("error",err)}),this.setState("loading",!1)}return this},updateFilters:function(filterConfig){return this.is("rendered")&&!1!==filterConfig&&this.filtersComponent&&this.filtersComponent.update(filterConfig),this},removeNode:function(node){
var uri=_.isString(node)?node:node.uri;return this.hasNode(uri)&&(this.getNodeType(node)===nodeTypes.class&&this.classSelector&&this.classSelector.removeNode(node),this.selectionComponent.removeNode(uri)),this},addNode:function(node,parentUri){return this.is("rendered")&&node&&node.uri&&this.selectionComponent&&(this.selectionComponent.hasNode(node.uri)||(node.type||(node.type=nodeTypes.instance),this.selectionComponent.update([node],{classUri:parentUri||this.classUri,format:this.format,limit:this.config.limit,updateCount:node.type===nodeTypes.instance&&1}),this.getNodeType(node)===nodeTypes.class&&this.classSelector&&this.classSelector.addNode(node,
parentUri))),this},hasNode:function(node){var uri;return!!(node&&this.is("rendered")&&this.selectionComponent)&&(uri=_.isString(node)?node:node.uri,this.selectionComponent.hasNode(uri))},getNodeType:function(node){var uri,foundNode;return!!(node&&this.is("rendered")&&this.selectionComponent)&&(uri=_.isString(node)?node:node.uri,(foundNode=this.selectionComponent.getNode(uri))&&foundNode.type)},select:function(node){var uri=_.isString(node)?node:node.uri;return this.hasNode(uri)&&(this.is("multiple")||this.selectionComponent.clearSelection(),this.selectionComponent.select(uri),$('[data-uri="'+uri+'"]',$resultArea)[0].scrollIntoView({behavior:"smooth"})),this
},selectDefaultNode:function(node,fallback){var $resource;return this.is("rendered")&&(this.hasNode(node)?this.select(node):!1!==fallback&&(($resource=this.getElement().find("."+nodeTypes.instance)).length||($resource=this.getElement().find("."+nodeTypes.class)),$resource.length&&this.select($resource.first().data("uri")))),this},refresh:function(node){var queryParams={updateClasses:!0};return this.is("rendered")&&(this.on("update.refresh",function(){this.off("update.refresh"),this.selectDefaultNode(node)}),node&&node.uri&&(queryParams.selectedUri=node.uri),this.reset().query(queryParams)),this}},defaultConfig).setTemplate(selectorTpl).on("init",function(){
this.searchQuery={},this.classUri=this.config.classUri,this.format=this.config.format||_.findKey(this.config.formats,{active:!0}),this.config.switchMode=this.config.selectionMode===selectionModes.both,this.config.multiple=this.config.selectionMode===selectionModes.multiple,this.setState("multiple",this.config.multiple),this.render($container)}).on("render",function(){var self=this;return new Promise(function(resolve){var $component=self.getElement();$classContainer=$(".class-context",$component),$resultArea=$("main",$component),$noResults=$(".no-results",$resultArea),$searchField=$(".search input",$component),$filterToggle=$(".filters-opener",$component),
$filterContainer=$(".filters-container",$component),$viewFormats=$(".context > a",$component),$selectNum=$(".selected-num",$component),$selectCtrl=$(".selection-control input",$component),$selectCtrlLabel=$(".selection-control label",$component),$selectionToggle=$(".selection-toggle",$component),$searchField.on("keyup",_.debounce(function(e){var value=$(this).val().trim();(2<value.length||0===value.length||13===e.which)&&(self.config.filters&&$(this).attr("title",null).attr("placeholder",self.config.searchPlaceholder),self.empty().changeFormat("list").setSearchQuery(value).query())},300)),$viewFormats.on("click",function(e){var format=$(this).data(
"view-format");e.preventDefault(),self.reset().changeFormat(format).query()}),self.config.selectionMode===selectionModes.both&&($selectionToggle.on("click",function(e){e.preventDefault(),self.changeSelectionMode(self.config.multiple?selectionModes.single:selectionModes.multiple)}),$resultArea.on("mousedown",function(e){e.ctrlKey&&!self.config.multiple&&self.changeSelectionMode(selectionModes.multiple)}),$resultArea.on("click",function(){self.changeSelectionMode(selectionModes.single)})),$selectCtrl.on("change",function(){!1===$(this).prop("checked")?self.selectionComponent.clearSelection():self.selectionComponent.selectAll()}),!1!==self.config.filters&&(
self.filtersComponent=filtersFactory($filterContainer,{classUri:self.classUri,data:self.config.filters}).on("change",function(values){var textualQuery=this.getTextualQuery();$searchField.val("").attr("title",textualQuery).attr("placeholder",textualQuery),self.empty().changeFormat("list").setSearchQuery(values).query(),$filterContainer.addClass("folded")}),$filterToggle.on("click",function(e){var searchVal;e.preventDefault(),$filterContainer.hasClass("folded")?(searchVal=$searchField.val().trim(),_.isEmpty(searchVal)||self.filtersComponent.setValue(labelUri,searchVal),$filterContainer.removeClass("folded")):$filterContainer.addClass("folded")})),
self.classSelector=classesSelectorFactory($classContainer,self.config),self.classSelector.on("render",resolve).on("change",function(uri){uri&&uri!==self.classUri&&(self.classUri=uri,$filterContainer.length&&$filterContainer.addClass("folded"),self.trigger("classchange",uri),self.reset().query())}),self.query()})}).on("change",function(selected){var nodesCount=_.size(this.selectionComponent.getNodes()),selectedCount=_.size(selected);$selectNum.text(selectedCount),0===selectedCount?($selectCtrlLabel.attr("title",__("Select loaded %s",this.config.type)),$selectCtrl.prop("checked",!1).prop("indeterminate",!1)):selectedCount===nodesCount?($selectCtrlLabel.attr(
"title",__("Clear selection")),$selectCtrl.prop("checked",!0).prop("indeterminate",!1)):($selectCtrlLabel.attr("title",__("Select loaded %s",this.config.type)),$selectCtrl.prop("checked",!1).prop("indeterminate",!0))});return _.defer(function(){resourceSelector.init(config)}),resourceSelector};return resourceSelectorFactory.selectionModes=selectionModes,resourceSelectorFactory.nodeTypes=nodeTypes,resourceSelectorFactory}),define("tpl!ui/loadingButton/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{}
;var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<button class="loading-button btn-',buffer+=escapeExpression((helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.type)?helper.call(depth0,{hash:{},data:data}):helper)+' small" type="button" title="',buffer+=escapeExpression((helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    <span class="spinner-icon icon-loop spinning"></span>\n    <span class="start-icon icon-',buffer+=escapeExpression((helper=helpers.icon
)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.icon)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    <span class="action-label">',buffer+=escapeExpression((helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n    <span class="terminated-label">',buffer+=escapeExpression((helper=helpers.terminatedLabel)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.terminatedLabel)?helper.call(depth0,{hash:{},data:data}):helper)+"</span>\n</button>"})}),define(
"css!ui/loadingButton/css/button",[],function(){}),define("ui/loadingButton/loadingButton",["jquery","lodash","i18n","ui/component","tpl!ui/loadingButton/tpl/button","css!ui/loadingButton/css/button"],function($,_,__,component,buttonTpl){"use strict";var _defaults={type:"info",icon:"property-advanced",title:"",label:"OK",terminatedLabel:"FINISHED"},buttonApi={start:function(){this.setState("started",!0),this.trigger("started")},terminate:function(){return this.is("started")&&(this.setState("started",!1),this.setState("terminated",!0),this.disable(),this.trigger("terminated")),this},reset:function(){return this.is("terminated")&&(this.setState("terminated",!1
),this.enable(),this.trigger("reset")),this}};return function(config){var initConfig=_.defaults(config||{},_defaults);return component(buttonApi).setTemplate(buttonTpl).on("enable",function(){this.getElement().removeProp("disabled")}).on("disable",function(){this.getElement().prop("disabled",!0)}).on("render",function(){var self=this;this.getElement().on("click",function(e){e.preventDefault(),self.is("disabled")||self.is("started")||self.is("terminated")||self.start()})}).init(initConfig)}}),define("ui/form",["jquery"],function($){"use strict";return function($container){var selector=$container.selector||".tao-scope";!function(selector){$(document).on(
"click",selector+" .pseudo-label-box",function(e){e.preventDefault();var $box=$(this),$radios=$box.find("input:radio").not("[disabled]").not(".disabled"),$checkboxes=$box.find("input:checkbox").not("[disabled]").not(".disabled");$radios.length&&($radios.not(":checked").prop("checked",!0),$radios.trigger("change")),$checkboxes.length&&($checkboxes.prop("checked",!$checkboxes.prop("checked")),$checkboxes.trigger("change"))})}(selector),function(selector){$(document).on("click",selector+" .disabled, "+selector+" :disabled",function(e){return e.preventDefault(),!1})}(selector)}}),define("tpl!ui/report/layout",["handlebars"],function(hb){return hb.template(
function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="component-report',((stack1=helpers.if.call(depth0,depth0&&depth0.noBorder,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return" no-border"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.detailsButtonVisible,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var helper,options,buffer=""
;return buffer+='\n    <label class="fold pseudo-label-box">\n        <span class="check-txt hide">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Hide detailed report",options):helperMissing.call(depth0,"__","Hide detailed report",options)))+'</span>\n        <span class="check-txt show">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Show detailed report",options):helperMissing.call(depth0,"__","Show detailed report",options)))+'</span>\n        <input type="checkbox"/>\n        <span class="icon-checkbox"></span>\n    </label>\n    '},data
),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="content">',stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.content)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</div>\n</div>"})}),define("tpl!ui/report/feedback",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing
;return buffer+='<div class="feedback-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+" ",((stack1=helpers.if.call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:this.program(3,function(depth0,data){return"leaf"},data),fn:this.program(1,function(depth0,data){return"hierarchical"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <span class="icon-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){return" hierarchical-icon"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"></span>\n    <div class="message">',options={hash:{},data:data},((stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify)?helper.call(depth0,depth0&&depth0.message,options):helperMissing.call(depth0,"dompurify",depth0&&depth0.message,options))||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    ",((stack1=helpers.each.call(depth0,depth0&&depth0.children,{hash:{},inverse:this.noop,
fn:this.program(7,function(depth0,data){var stack1,buffer="";return buffer+="\n        ",((stack1=typeof depth0===functionType?depth0.apply(depth0):depth0)||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="actions">\n        ',((stack1=helpers.each.call(depth0,depth0&&depth0.actions,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <button data-trigger="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper
,buffer+=escapeExpression(stack1)+'" class="action btn-info" title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+"</button>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>"})}),define("ui/report",["jquery","lodash","i18n","ui/form","ui/component","tpl!ui/report/layout","tpl!ui/report/feedback"],function($,_,__,form,component,layoutTpl,feedbackTpl){"use strict";var _defaults={showDetailsButton:!0,actions:[]},authorizedTypes=["success","info","warning","error"],report={isDetailed:function(){return this.is("detailed")},showDetails:function(){return this.is("rendered")&&(this.setState("detailed",!0),this.getElement().find(".fold input").prop("checked",!0),this.trigger("showDetails")),this
},hideDetails:function(){return this.is("rendered")&&(this.setState("detailed"),this.getElement().find(".fold input").prop("checked",!1),this.trigger("hideDetails")),this}};return function(config,data){var initConfig=_.defaults(config||{},_defaults);return data&&_.isArray(data.children)&&data.children.length&&(initConfig.detailsButtonVisible=initConfig.showDetailsButton),component(report).setTemplate(layoutTpl).on("render",function(){var self=this,$content=this.getElement().find(".content"),$checkbox=this.getElement().find(".fold input");$content.append(function _renderFeebacks(data,actions){var children=[];if(!data.type||-1===authorizedTypes.indexOf(
data.type))throw new TypeError("Unkown report type: "+data.type);return _.isArray(data.children)&&data.children.length&&_.each(data.children,function(child){children.push(_renderFeebacks(child))}),data.hasChildren=0<children.length,data.children=children,data.actions=actions,feedbackTpl(data)}(_.cloneDeep(data),this.config.actions)),$content.on("click",".action",function(){var actionId=$(this).data("trigger");self.trigger("action-"+actionId),self.trigger("action",actionId)}),$checkbox.on("change",_.throttle(function(){self.isDetailed()?self.hideDetails():self.showDetails()},100))}).init(initConfig)}}),define("tpl!ui/taskQueueButton/tpl/report",["handlebars"]
,function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="task-report-container">\n    <div class="section-header flex-container-full">\n        <h2>',buffer+=(0,this.escapeExpression)((helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'</h2>\n    </div>\n    <div class="main-container flex-container-full report"></div>\n</div>'})}),define("css!ui/taskQueueButton/css/taskable",[],
function(){}),define("ui/taskQueueButton/taskable",["jquery","lodash","i18n","core/promise","ui/report","ui/feedback","layout/loading-bar","tpl!ui/taskQueueButton/tpl/report","css!ui/taskQueueButton/css/taskable"],function($,_,__,Promise,reportFactory,feedback,loadingBar,reportTpl){"use strict";var defaultConfig={},taskableComponent={setTaskConfig:function(config){return _.assign(this.config,config),this},createTask:function(){var taskQueue,requestUrl,self=this,requestData={};return _.isFunction(this.config.taskCreationData)?requestData=this.config.taskCreationData.call(this):_.isPlainObject(this.config.taskCreationData)&&(
requestData=this.config.taskCreationData),this.config.taskCreationUrl?(requestUrl=this.config.taskCreationUrl,this.config.taskQueue?(taskQueue=this.config.taskQueue,loadingBar.start(),taskQueue.pollAllStop(),void taskQueue.create(requestUrl,requestData).then(function(result){var infoBox,message,task=result.task;result.finished?task.hasFile?taskQueue.download(task.id).then(function(){return taskQueue.archive(task.id)}).then(function(){self.trigger("finished",result),taskQueue.pollAll()}).catch(function(err){self.trigger("error",err),taskQueue.pollAll()}):taskQueue.archive(task.id).then(function(){self.trigger("finished",result),taskQueue.pollAll()}).catch(
function(err){self.trigger("error",err),taskQueue.pollAll()}):(message=__("<strong> %s </strong> has been moved to the background.",task.taskLabel),infoBox=feedback(null,{encodeHtml:!1,timeout:{info:8e3}}).info(message),taskQueue.trigger("taskcreated",{task:task,sourceDom:infoBox.getElement()}),self.trigger("enqueued",result)),loadingBar.stop()}).catch(function(err){taskQueue.pollAll(),loadingBar.stop(),self.trigger("error",err)})):this.trigger("error","the taskQueue model is required to create a task")):this.trigger("error","the request url is required to create a task")},displayReport:function(report,title,result){var $reportContainer,self=this;if(
this.config.taskReportContainer instanceof $)return $reportContainer=$(reportTpl({title:title})),this.config.taskReportContainer.html($reportContainer),reportFactory({actions:[{id:"continue",icon:"right",title:"continue",label:__("Continue")}]},report).on("action-continue",function(){self.trigger("continue",result)}).render($reportContainer.find(".report"))}};return function(component,config){return _.assign(component,taskableComponent),component.off(".taskable").on("init.taskable",function(){_.defaults(this.config,config||{},defaultConfig)})}}),define("ui/taskQueueButton/standardButton",["jquery","lodash","i18n","core/promise","ui/report","ui/feedback",
"layout/loading-bar","ui/loadingButton/loadingButton","ui/taskQueueButton/taskable"],function($,_,__,Promise,reportFactory,feedback,loadingBar,loadingButton,makeTaskable){"use strict";var defaultConfig={};return function(config){return config=_.defaults(config||{},defaultConfig),makeTaskable(loadingButton(config)).on("started",function(){this.createTask()}).on("finished",function(){this.terminate().reset()}).on("enqueued",function(){this.terminate().reset()})}}),define("tpl!ui/destination/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,
Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="destination-selector">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n    <h2>",stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h2>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    <div>\n        ",((
stack1=helpers.if.call(depth0,depth0&&depth0.description,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <p>",stack1=(helper=helpers.description)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.description)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</p>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        <div class="selector-container"></div>\n        <div class="actions">\n        </div>\n    </div>\n</div>'})}),define("css!ui/destination/css/selector",[],function(){}),define(
"ui/destination/selector",["jquery","lodash","i18n","ui/component","ui/dialog/confirm","ui/resource/selector","ui/loadingButton/loadingButton","ui/taskQueueButton/standardButton","tpl!ui/destination/tpl/selector","css!ui/destination/css/selector.css"],function($,_,__,component,confirmDialog,resourceSelectorFactory,loadingButtonFactory,taskCreationButtonFactory,selectorTpl){"use strict";var defaultConfig={title:__("Copy to"),description:__("Select a destination"),actionName:__("Copy"),icon:"copy"};return function($container,config){var destinationSelector=component({update:function(results,params){this.resourceSelector&&this.resourceSelector.update(results,
params)}},defaultConfig).setTemplate(selectorTpl).on("init",function(){this.render($container)}).on("render",function(){var button,self=this,$component=this.getElement(),getSelectedUri=function(){var uris,select=self.resourceSelector.getSelection();if(_.isPlainObject(select)&&(uris=_.pluck(select,"uri")).length)return uris[0]};(button=this.config.taskQueue?taskCreationButtonFactory({type:"info",icon:this.config.icon,label:this.config.actionName,terminatedLabel:"Interrupted",taskQueue:this.config.taskQueue,taskCreationData:this.config.taskCreationData||{},taskCreationUrl:this.config.taskCreationUrl,taskReportContainer:$container}).on("finished",function(
result){self.trigger("finished",result,button),this.reset()}).on("continue",function(){self.trigger("continue")}):loadingButtonFactory({type:"info",icon:this.config.icon,label:this.config.actionName,terminatedLabel:"Interrupted"})).on("started",function(){function triggerAction(){self.trigger("select",getSelectedUri())}self.config.confirm?confirmDialog(self.config.confirm,triggerAction,function(){button.terminate().reset()}):triggerAction()}).on("error",function(err){self.trigger("error",err)}).render($component.find(".actions")).disable(),this.resourceSelector=resourceSelectorFactory($(".selector-container",$component),{selectionMode:"single",
selectClass:!0,classUri:this.config.classUri,showContext:!1,showSelection:!1,preventSelection:this.config.preventSelection}),this.resourceSelector.spread(this,["query","error","update"]),this.resourceSelector.on("change",function(selected){selected&&0<_.size(selected)?(button.enable(),_.isPlainObject(button.config.taskCreationData)&&(button.config.taskCreationData.classUri=getSelectedUri())):button.disable()})});return _.defer(function(){destinationSelector.init(config)}),destinationSelector}}),define("ui/disabler",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";var ns="disabler",
dataNs="ui."+ns,defaults={bindEvent:"click",disabledClass:"disabled"},Disabler={init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this);$elt.data(dataNs)||($elt.data(dataNs,options),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){Disabler._toogle($elt),e.preventDefault()}),$elt.trigger("create."+ns))})},enable:function(){this.each(function(){Disabler._enable($(this))})},_enable:function($elt){var options=$elt.data(dataNs),$target=options.target;$target.removeClass(options.disabledClass).find(":input").prop("disabled",!1),$elt.trigger("enable."+ns,[$target]),$target.find(":input").addBack(
).trigger("enable")},disable:function(){this.each(function(){Disabler._disable($(this))})},_disable:function($elt){var options=$elt.data(dataNs),$target=options.target;$target.addClass(options.disabledClass).find(":input").prop("disabled",!0),$elt.trigger("disable."+ns,[$target]),$target.find(":input").addBack().trigger("disable")},toggle:function(){this.each(function(){Disabler._toggle($(this))})},_toggle:function($elt){var options=$elt.data(dataNs);$elt.is(":radio,:checkbox")?$elt.prop("checked")?this._disable($elt):this._enable($elt):options.target.hasClass(options.disabledClass)?this._enable($elt):this._disable($elt)},destroy:function(){this.each(
function(){var $elt=$(this),options=$elt.data(dataNs);!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Disabler),function($container){new DataAttrHandler("disable",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$elt.disabler({target:$target,bindEvent:!1})}).trigger(function($elt){$elt.disabler("toggle")})}}),define("ui/documentViewer/viewerFactory",["lodash","core/promise","core/providerRegistry","core/delegator","ui/component"],function(_,Promise,providerRegistry,delegator,component){"use strict";var defaults={width:"auto",height:"auto",
fitToWidth:!1,allowSearch:!1,caseSensitiveSearch:!1,highlightAllMatches:!1},mandatory=["load"];return providerRegistry(function viewerFactory(documentType,config){var viewer=viewerFactory.getProvider(documentType),documentViewer=component({getType:function(){return this.config.type},getUrl:function(){return this.config.url}},defaults),delegate=delegator(documentViewer,viewer,{name:documentType+"Viewer",eventifier:!1,wrapper:function(response){return Promise.resolve(response)}});return _.isFunction(viewer.getTemplate)&&documentViewer.setTemplate(viewer.getTemplate()),documentViewer.on("init",function(){var self=this;delegate("init").then(function(){
self.trigger("initialized")}).catch(function(err){self.trigger("error",err)})}).on("destroy",function(){var self=this;delegate("unload").then(function(){self.trigger("unloaded")}).catch(function(err){self.trigger("error",err)})}).on("render",function(){var self=this;delegate("load").then(function(){self.trigger("loaded")}).catch(function(err){self.trigger("error",err)})}).on("setsize",function(width,height){var self=this;delegate("setSize",width,height).then(function(){self.trigger("resized",width,height)}).catch(function(err){self.trigger("error",err)})}).init(config)},function(provider){return _.each(mandatory,function(name){if(!_.isFunction(provider[name]
))throw new TypeError("The viewer provider MUST implement the "+name+"() method!")}),!0})}),define("tpl!ui/documentViewer/documentViewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="document-viewer"></div>'})}),define("ui/documentViewer",["lodash","ui/component","ui/documentViewer/viewerFactory","tpl!ui/documentViewer/documentViewer"],function(_,component,viewerFactory,documentViewerTpl){"use strict";var defaults={width:"auto",height:"auto",fitToWidth:!1,allowSearch:!1,caseSensitiveSearch:!1,
highlightAllMatches:!1};function documentViewerFactory(config){var documentType,documentUrl,viewer;return component({getType:function(){return documentType||null},getUrl:function(){return documentUrl||null},getViewer:function(){return viewer||null},load:function(url,type){var self=this;if(_.isEmpty(url)||!_.isString(url))throw new TypeError("You must provide the URL of the document!");if(_.isEmpty(type)||!_.isString(type))throw new TypeError("You must provide a document type!");return viewer&&viewer.destroy(),documentUrl=url,viewer=viewerFactory(documentType=type,_.merge({type:documentType,url:documentUrl,replace:!0},_.pick(this.config,_.keys(defaults)))
).on("loaded",function(){self.trigger("loaded",documentUrl,documentType)}).on("unloaded",function(){self.trigger("unloaded",documentUrl,documentType)}).on("resized",function(width,height){self.trigger("resized",width,height)}).on("error",function(err){self.trigger("error",err)}),this.trigger("load",documentUrl,documentType),this.is("rendered")&&viewer.render(this.getElement()),this},unload:function(){return viewer&&viewer.destroy(),this.trigger("unload",documentUrl,documentType),documentUrl=documentType=viewer=null,this}},defaults).setTemplate(documentViewerTpl).on("init",function(){documentUrl=documentType=viewer=null}).on("destroy",function(){this.unload()
}).on("render",function(){viewer&&viewer.render(this.getElement())}).on("setsize",function(width,height){viewer&&viewer.setSize(width,height)}).init(config)}return documentViewerFactory.registerProvider=function(type,provider){return viewerFactory.registerProvider(type,provider),this},documentViewerFactory.clearProviders=function(){return viewerFactory.clearProviders(),this},documentViewerFactory}),define("tpl!ui/documentViewer/providers/pdfViewer/fallback/viewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{}
,"<iframe ></iframe>"})}),define("ui/documentViewer/providers/pdfViewer/fallback/viewer",["jquery","core/promise","tpl!ui/documentViewer/providers/pdfViewer/fallback/viewer"],function($,Promise,viewerTpl){"use strict";return function($container){var template=viewerTpl(),$viewer=null;return{load:function(url){return new Promise(function(resolve){($viewer=$container.html(template).find("iframe")).one("load.provider",resolve).attr("src",url)})},unload:function(){$container.empty(),$viewer=null},setSize:function(width,height){$viewer&&$viewer.width(width).height(height)}}}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/areaBroker",["lodash",
"core/areaBroker"],function(_,areaBroker){"use strict";return _.partial(areaBroker,["bar","actions","info","content"])}),define("tpl!ui/documentViewer/providers/pdfViewer/pdfjs/match",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<span class="highlight ',buffer+=escapeExpression((helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.cls)?helper.call(depth0,{hash:{},data:data}):helper
)+'" data-match="',buffer+=escapeExpression((helper=helpers.index)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.index)?helper.call(depth0,{hash:{},data:data}):helper)+'">',buffer+=escapeExpression((helper=helpers.text)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.text)?helper.call(depth0,{hash:{},data:data}):helper)+"</span>"})}),define("ui/documentViewer/providers/pdfViewer/pdfjs/searchEngine",["lodash","tpl!ui/documentViewer/providers/pdfViewer/pdfjs/match"],function(_,matchTpl){"use strict";var charactersToNormalize={"":"'","":"'","":"'","":"'","":'"',"":'"',"":'"',"":'"',
"":"1/4","":"1/2","":"3/4"},normalizationRegex=new RegExp("["+Object.keys(charactersToNormalize).join("")+"]","g");function normalizeSpecialChars(text){return text.replace(normalizationRegex,function(ch){return charactersToNormalize[ch]})}function highlight(text,index,cls){return matchTpl({text:text,index:index,cls:cls}).trim()}function highlightInText(text,start,end,index,cls){return text.substring(0,start)+highlight(text.substring(start,end),index,cls)+text.substring(end)}function renderMatches(matches,pageContent,selectedMatch){var positions=function(matches,pageContent){var refinedMatches=[],textItems=pageContent.content.items,count=textItems.length,
cursor=0,strPos=0;return _.forEach(matches,function(match,index){for(var matchStart=match[0],matchEnd=match[1],position={index:index};cursor<count&&matchStart>=strPos+textItems[cursor].str.length;)strPos+=textItems[cursor].str.length,cursor++;for(position.begin={node:cursor,offset:matchStart-strPos};cursor<count&&matchEnd>strPos+textItems[cursor].str.length;)strPos+=textItems[cursor].str.length,cursor++;position.end={node:cursor,offset:matchEnd-strPos},refinedMatches.push(position)}),refinedMatches}(matches,pageContent),matchIndex=positions.length-1,nodes=pageContent.nodes,selected=matchIndex===selectedMatch;_.forEachRight(nodes,function(node,nodeIndex){for(
var match,startInNode,endInNode,nodeInMatch,cls,nodeText=pageContent.content.items[nodeIndex].str;0<=matchIndex;){if(startInNode=(match=positions[matchIndex]).begin.node===nodeIndex,endInNode=match.end.node===nodeIndex,nodeInMatch=nodeIndex>match.begin.node&&nodeIndex<match.end.node,cls=selected?" selected":"",startInNode&&endInNode)nodeText=highlightInText(nodeText,match.begin.offset,match.end.offset,match.index,cls),matchIndex--;else{if(!startInNode){if(endInNode){nodeText=highlightInText(nodeText,0,match.end.offset,match.index,"end"+cls);break}if(nodeInMatch){nodeText=highlight(nodeText,match.index,"middle"+cls);break}break}nodeText=highlightInText(
nodeText,match.begin.offset,nodeText.length,match.index,"begin"+cls),matchIndex--}selected=matchIndex===selectedMatch}node.innerHTML=nodeText})}return function(config){var textManager=null,currentQuery=null,currentMatch=null,matches=[],pages=[],count=0;if(textManager=(config=config||{}).textManager,!_.isPlainObject(textManager))throw new TypeError("You must provide a textManager to give access to the PDF text content! [config.textManager is missing]");return{getPages:function(){return pages},getMatches:function(){return matches},getMatchCount:function(){return count},clearMatches:function(){currentMatch=null,matches=[],pages=[],count=0},
setTextManager:function(manager){textManager=manager},getTextManager:function(){return textManager},getQuery:function(){return currentQuery},getCurrentMatch:function(){return currentMatch},previousMatch:function(){var pageIndex,loop=!1;return currentMatch&&(currentMatch.index?currentMatch.index--:(loop=!(pageIndex=_.indexOf(pages,currentMatch.page)),currentMatch.page=pages[(pageIndex+pages.length-1)%pages.length],currentMatch.index=matches[currentMatch.page-1].length-1),currentMatch.overall=(currentMatch.overall+count-2)%count+1),loop},nextMatch:function(){var pageIndex,loop=!1;return currentMatch&&(
currentMatch.index+1<matches[currentMatch.page-1].length?currentMatch.index++:(loop=(pageIndex=_.indexOf(pages,currentMatch.page))===pages.length-1,currentMatch.page=pages[(pageIndex+1)%pages.length],currentMatch.index=0),currentMatch.overall=currentMatch.overall%count+1),loop},search:function(query,pageNum){return matches=null,textManager.getContents().then(function(pageContents){var contentText=_.map(pageContents,"text"),firstPage=0,firstMatch=0;return matches=function(query,contentText,config){var normalizedQuery=normalizeSpecialChars(query);return config.caseSensitive||(normalizedQuery=normalizedQuery.toLowerCase()),_.times(contentText.length,function(
pageIndex){var pageContent=normalizeSpecialChars(contentText[pageIndex]);return config.caseSensitive||(pageContent=pageContent.toLowerCase()),function(query,text){var index,queryLen=query.length,end=0,matches=[];if(queryLen)for(;end=(index=text.indexOf(query,end))+queryLen,-1!==index&&matches.push([index,end]),-1!==index;);return matches}(normalizedQuery,pageContent)})}(query,contentText,config),currentQuery=query,currentMatch=null,pages=[],count=0,_.forEach(matches,function(pageMatches,pageIndex){var page=pageIndex+1;0<pageMatches.length&&(pages.push(page),!firstPage&&pageNum<=page&&(firstPage=page,firstMatch=count)),count+=pageMatches.length}),firstPage||(
firstPage=pages[0]||0),firstPage&&(currentMatch={overall:firstMatch+1,page:firstPage,index:0}),firstPage})},updateMatches:function(pageNum){return textManager.getPageContent(pageNum).then(function(pageContent){var selectedMatch;return currentMatch&&currentMatch.page===pageNum&&(selectedMatch=currentMatch.index),pageContent&&renderMatches(matches[pageNum-1],pageContent,selectedMatch),pageNum})},destroy:function(){config=pages=matches=currentMatch=currentQuery=textManager=null}}}}),define("tpl!ui/documentViewer/providers/pdfViewer/pdfjs/findBar",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[
4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;function program1(depth0,data){return"checked "}return buffer+='<button class="small search" data-control="pdf-search" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Search",options):helperMissing.call(depth0,"__","Search",options)))+'"><span class="icon icon-find"></span></button>\n<div class="pdf-find-bar hidden">\n    <label for="pdf-search-query">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Search",options):helperMissing.call(depth0,"__","Search",options)))+':</label>\n    <input type="text" id="pdf-search-query" data-control="pdf-search-query" placeholder="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Type your search",options):helperMissing.call(depth0,"__","Type your search",options)))+'"/>\n    <button class="small search" data-control="pdf-search-prev" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous match",options):helperMissing.call(depth0,"__",
"Previous match",options)))+'"><span class="icon icon-left"></span></button>\n    <button class="small search" data-control="pdf-search-next" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next match",options):helperMissing.call(depth0,"__","Next match",options)))+'"><span class="icon icon-right"></span></button>\n    <input type="checkbox" id="highlight-all" data-control="highlight-all" value="1" ',((stack1=helpers.if.call(depth0,depth0&&depth0.highlightAll,{hash:{},inverse:this.noop,fn:this.program(1,program1,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='/><label for="highlight-all">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Highlight all",options):helperMissing.call(depth0,"__","Highlight all",options)))+'</label>\n    <input type="checkbox" id="case-sensitive-search" data-control="case-sensitive-search" value="1" ',((stack1=helpers.if.call(depth0,depth0&&depth0.caseSensitive,{hash:{},inverse:this.noop,fn:this.program(1,program1,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='/><label for="case-sensitive-search">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Case sensitive",options):helperMissing.call(depth0,"__","Case sensitive",options)))+'</label>\n    <span class="pdf-search-info" data-control="pdf-search-info">\n        <span class="pdf-search-position hidden" data-control="pdf-search-position">\n            <span class="pdf-search-index" data-control="pdf-search-index"></span>/<span class="pdf-search-count" data-control="pdf-search-count"></span>\n        </span>\n        <span class="pdf-search-loop hidden" data-control="pdf-search-loop-begin">\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"End of document reached. Continuing from the beginning.",options):helperMissing.call(depth0,"__","End of document reached. Continuing from the beginning.",options)))+'\n        </span>\n        <span class="pdf-search-loop hidden" data-control="pdf-search-loop-end">\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Start of document reached. Continuing from the end.",options):helperMissing.call(depth0,"__","Start of document reached. Continuing from the end.",options)))+"\n        </span>\n    </span>\n</div>"})}),define("ui/documentViewer/providers/pdfViewer/pdfjs/findBar",["jquery",
"lodash","ui/autoscroll","ui/hider","ui/documentViewer/providers/pdfViewer/pdfjs/searchEngine","tpl!ui/documentViewer/providers/pdfViewer/pdfjs/findBar"],function($,_,autoscroll,hider,searchEngineFactory,findBarTpl){"use strict";function toggleState($element,enabled){enabled?$element.removeAttr("disabled"):$element.attr("disabled",!0)}return function(config){var controls,$container,throttledSearchStart=_.throttle(function(){var typedQuery=controls.$searchQuery.val();typedQuery!==query&&(query=typedQuery,navigating=!0,doSearch())},250),events=null,broker=null,searchEngine=null,query=null,pageNum=0,enabled=!0,loopBegin=!1,loopEnd=!1,navigating=!1
;function doSearch(){loopEnd=loopBegin=!1,query?searchEngine&&(events.trigger("searching",query),searchEngine.search(query,pageNum).then(function(page){events.trigger("searchdone",query,page),page?jumpTo(page):refresh()}).catch(function(err){events.trigger("error",err)})):(searchEngine&&searchEngine.clearMatches(),refresh()),updateControls()}function jumpTo(page){events.trigger("setpage",page)}function refresh(){events.trigger("refresh")}function matchUpdated(page){navigating&&(navigating=!1,broker&&searchEngine&&autoscroll(getSelectectMatchElement(),broker.getContentArea())),updateControls(),events.trigger("matchesupdated",page)}function jumpToMatch(){
var match;searchEngine&&(match=searchEngine.getCurrentMatch())&&(navigating=!0,pageNum!==match.page?jumpTo(match.page):function(){var match;broker&&searchEngine&&(getSelectectMatchElement().removeClass("selected"),(match=searchEngine.getCurrentMatch(),broker.getContentArea().find('[data-match="'+match.index+'"]')).addClass("selected"),matchUpdated(pageNum))}())}function moveBy(direction){loopEnd=loopBegin=!1,searchEngine&&(direction<0?loopEnd=searchEngine.previousMatch():loopBegin=searchEngine.nextMatch(),jumpToMatch()),updateControls(),focusOnInput()}function getSelectectMatchElement(){return broker.getContentArea().find(".highlight.selected")}
function focusOnInput(){controls.$searchQuery.focus()}function readCaseSensitiveOption(){config.caseSensitive=controls.$caseSensitive.is(":checked")}function applyHighlightAllOption(){broker&&broker.getContentArea().toggleClass("highlight-all",controls.$highlightAll.is(":checked"))}function updateControls(){var match,matchCount=0,matchIndex=0;searchEngine&&(matchCount=searchEngine.getMatchCount(),matchIndex=(match=searchEngine.getCurrentMatch())&&match.overall),enabled||hider.isHidden(controls.$searchBar)||hider.hide(controls.$searchBar),toggleState(controls.$searchButton,enabled),toggleState(controls.$searchQuery,enabled),toggleState(controls.$caseSensitive
,enabled),toggleState(controls.$highlightAll,enabled),toggleState(controls.$prevMatch,enabled&&1<matchCount),toggleState(controls.$nextMatch,enabled&&1<matchCount),controls.$matchIndex.text(matchIndex),controls.$matchCount.text(matchCount),hider.toggle(controls.$searchPosition,enabled&&0<matchCount),hider.toggle(controls.$searchLoopBegin,enabled&&loopBegin),hider.toggle(controls.$searchLoopEnd,enabled&&loopEnd)}if(config=config||{},!_.isPlainObject(config.events))throw new TypeError("You must provide an events hub! [config.events is missing]");if(!_.isPlainObject(config.areaBroker))throw new TypeError(
"You must provide an areaBroker to give access to the UI! [config.areaBroker is missing]");if(!_.isPlainObject(config.textManager))throw new TypeError("You must provide a textManager to give access to the PDF text content! [config.textManager is missing]");return searchEngine=searchEngineFactory(config),broker=config.areaBroker,events=config.events,broker.getActionsArea().prepend(findBarTpl(config)),$container=broker.getBarArea(),controls={$searchBar:$(".pdf-find-bar",$container),$searchButton:$('[data-control="pdf-search"]',$container),$searchQuery:$('[data-control="pdf-search-query"]',$container),$prevMatch:$('[data-control="pdf-search-prev"]',$container),
$nextMatch:$('[data-control="pdf-search-next"]',$container),$caseSensitive:$('[data-control="case-sensitive-search"]',$container),$highlightAll:$('[data-control="highlight-all"]',$container),$matchIndex:$('[data-control="pdf-search-index"]',$container),$matchCount:$('[data-control="pdf-search-count"]',$container),$searchPosition:$('[data-control="pdf-search-position"]',$container),$searchLoopBegin:$('[data-control="pdf-search-loop-begin"]',$container),$searchLoopEnd:$('[data-control="pdf-search-loop-end"]',$container)},readCaseSensitiveOption(),applyHighlightAllOption(),controls.$searchButton.on("click",function(){hider.toggle(controls.$searchBar),
hider.isHidden(controls.$searchBar)||focusOnInput()}),controls.$prevMatch.on("click",function(){moveBy(-1)}),controls.$nextMatch.on("click",function(){moveBy(1)}),controls.$caseSensitive.on("change",function(){navigating=!0,readCaseSensitiveOption(),doSearch(),focusOnInput()}),controls.$highlightAll.on("change",function(){applyHighlightAllOption(),focusOnInput()}),controls.$searchQuery.on("keypress",function(event){switch(event.keyCode){case 27:hider.hide(controls.$searchBar);break;default:throttledSearchStart()}}),events.on("enable.findbar",function(){enabled=!0,updateControls()}).on("disable.findbar",function(){enabled=!1,updateControls()}).on(
"pagechange.findbar",function(page){pageNum=page,updateControls()}).on("allrendered.findbar",function(page){(function(page){var textManager=searchEngine&&searchEngine.getTextManager();textManager&&textManager.getDocument()&&(events.trigger("matchesupdating",page),searchEngine.updateMatches(page).then(matchUpdated))})(pageNum=page),updateControls()}).trigger("init.findbar"),{getSearchEngine:function(){return searchEngine},destroy:function(){searchEngine&&searchEngine.destroy(),controls.$searchButton&&controls.$searchButton.remove(),controls.$searchBar&&controls.$searchBar.remove(),controls={},broker=searchEngine=config=null,events.trigger("destroy.findbar"),
events.off(".findbar"),events=null}}}}),define("tpl!ui/documentViewer/providers/pdfViewer/pdfjs/page",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="pdf-page hidden" data-page="',buffer+=(0,this.escapeExpression)((helper=helpers.page)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.page)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    <canvas class="pdf-content"></canvas>\n    <div class="pdf-text"></div>\n</div>'})}),define(
"ui/documentViewer/providers/pdfViewer/pdfjs/pageView",["jquery","core/promise","ui/hider","tpl!ui/documentViewer/providers/pdfViewer/pdfjs/page"],function($,Promise,hider,pageTpl){"use strict";var DEFAULT_SCALE=1,MIN_SCALE=.25,MAX_SCALE=10;return function($container,config){var $pageView,$textLayer,$drawLayer,canvas,context,scale,pageNum,textManager=null,rendered=!1,view={get pageNum(){return pageNum},set pageNum(num){pageNum=parseInt(num,10),$pageView.attr("data-page",num)},isRendered:function(){return rendered},getContainer:function(){return $container},getElement:function(){return $pageView},getDrawLayerElement:function(){return $drawLayer},
getTextLayerElement:function(){return $textLayer},getCanvas:function(){return canvas},getRenderingContext:function(){return context},setTextManager:function(manager){textManager=manager},getTextManager:function(){return textManager},render:function(page,fitToWidth){var viewport,textViewport,renderContext,promises=[],renderScale=scale*(96/72);return rendered=!1,viewport=page.getViewport(renderScale),renderContext={canvasContext:view.getRenderingContext(),viewport:viewport},function(viewport,fitToWidth){var width,height,ratio=viewport.width/(viewport.height||1)||1,parentWidth=$container.width(),parentHeight=$container.height(),parentOffset=$container.offset()
;function setSize(w,h){$pageView.width(w).height(h).offset({left:parentOffset.left+Math.max(0,(parentWidth-w)/2)}),$drawLayer.width(w).height(h),$textLayer.width(w).height(h)}fitToWidth?parentHeight<(height=(width=parentWidth)/ratio)&&(setSize(Math.max(1,parentWidth/2),height),parentWidth=$container.prop("scrollWidth"),height=(width=parentWidth)/ratio):1<=ratio?(height=Math.min(parentHeight,parentWidth/ratio),width=Math.min(parentWidth,height*ratio)):(width=Math.min(parentWidth,parentHeight*ratio),height=Math.min(parentHeight,width/ratio)),setSize(width,height),canvas.width=viewport.width,canvas.height=viewport.height}(viewport,fitToWidth),promises.push(
page.render(renderContext).promise),textManager&&($textLayer.empty(),textViewport=viewport.clone({scale:renderScale*$textLayer.width()/viewport.width}),promises.push(textManager.renderPage(page.pageIndex+1,textViewport).then(function(renderedContent){$textLayer&&$textLayer.append(renderedContent)}))),Promise.all(promises).then(function(){rendered=!0})},show:function(){hider.show($pageView)},hide:function(){hider.hide($pageView)},destroy:function(){$pageView.remove(),config=textManager=context=canvas=$drawLayer=$textLayer=$pageView=$container=null}};return textManager=(config=config||{}).textManager,pageNum=config.pageNum,$pageView=$(pageTpl({page:pageNum})),
$textLayer=$pageView.find(".pdf-text"),$drawLayer=$pageView.find("canvas"),canvas=$drawLayer.get(0),context=canvas.getContext("2d"),scale=function(scale){return Math.min(Math.max(MIN_SCALE,parseInt(scale,10)||DEFAULT_SCALE),MAX_SCALE)}(function(context){return(window.devicePixelRatio||1)/(context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||1)}(context)*DEFAULT_SCALE),$container.append($pageView),view}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/pagesManager",["lodash","core/promise",
"ui/documentViewer/providers/pdfViewer/pdfjs/pageView"],function(_,Promise,pageViewFactory){"use strict";return function($container,config){var pageCount,activeView=null,textManager=null,views=null,pagesManager={get pageCount(){return pageCount},getContainer:function(){return $container},setTextManager:function(manager){textManager=manager,_.forEach(views,function(view){view&&view.setTextManager(manager)})},getTextManager:function(){return textManager},getView:function(pageNum){var index,view;return pageNum=Math.min(Math.max(1,parseInt(pageNum,10)||1),pageCount),(view=views[index=pageNum-1])||(views[index]=view=pageViewFactory($container,{pageNum:pageNum,
textManager:textManager})),view},getActiveView:function(){return activeView},setActiveView:function(page){var oldActiveView=activeView;activeView=pagesManager.getView(page),oldActiveView&&oldActiveView!==activeView&&oldActiveView.hide(),activeView&&(activeView.pageNum=page,activeView.show())},renderPage:function(page,fitToWidth){return activeView?activeView.render(page,fitToWidth):Promise.resolve()},destroy:function(){_.forEach(views,function(view){view&&view.destroy()}),config=views=textManager=activeView=$container=null}};return textManager=(config=config||{}).textManager,pageCount=Math.max(1,parseInt(config.pageCount,10)||1),views=new Array(pageCount),
pagesManager}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/textManager",["lodash","core/promise"],function(_,Promise){"use strict";return function(config){var pdfDoc=null,PDFJS=null,pageContents=null,textRenderTasks=null;function cancelRenderingTask(pageIndex){textRenderTasks&&textRenderTasks[pageIndex]&&(textRenderTasks[pageIndex].cancel(),textRenderTasks[pageIndex]=null)}function cancelAllRenderingTasks(){var pageIndex;if(textRenderTasks)for(pageIndex=textRenderTasks.length;pageIndex--;)cancelRenderingTask(pageIndex)}function getTextContent(){var numPages=pdfDoc.numPages,promises=[];return _.times(numPages,function(pageIndex){var pageNum
;promises.push((pageNum=pageIndex+1,pdfDoc.getPage(pageNum).then(function(page){return page.getTextContent({normalizeWhitespace:!0})})).then(function(textContent){var strings=_.map(textContent.items,"str");return{content:textContent,strings:strings,text:strings.join(""),nodes:[]}}))}),Promise.all(promises)}if(PDFJS=(config=config||{}).PDFJS,!_.isPlainObject(PDFJS))throw new TypeError("You must provide the entry point to the PDF.js library! [config.PDFJS is missing]");return{setDocument:function(doc){cancelAllRenderingTasks(),pdfDoc=doc,pageContents=null},getDocument:function(){return pdfDoc},getContents:function(){return pdfDoc?(numPages=pdfDoc.numPages,
pageContents?Promise.resolve(pageContents):getTextContent().then(function(content){return textRenderTasks=new Array(numPages),pageContents=content})):Promise.reject(new Error("You must assign a document to get the content from!"));var numPages},getText:function(){return this.getContents().then(function(content){return _.map(content,"text")})},getFullText:function(){return this.getContents().then(function(content){return _.map(content,"text").join(" ")})},getPageContent:function(pageNum){return this.getContents().then(function(content){return content[Math.min(Math.max(0,pageNum-1),content.length-1)]})},getPageText:function(pageNum){return this.getContents(
).then(function(content){return content[Math.min(Math.max(0,pageNum-1),content.length-1)].text})},renderPage:function(pageNum,viewport,timeout){return this.getContents().then(function(content){var pageIndex=Math.min(Math.max(0,pageNum-1),content.length-1),pageContent=content[pageIndex],textLayerFrag=document.createDocumentFragment();return cancelRenderingTask(pageIndex),pageContent.nodes=[],textRenderTasks[pageIndex]=PDFJS.renderTextLayer({textContent:pageContent.content,textDivs:pageContent.nodes,container:textLayerFrag,viewport:viewport,timeout:timeout}),textRenderTasks[pageIndex].promise.then(function(){return textRenderTasks[pageIndex]=null,textLayerFrag
},function(){textRenderTasks[pageIndex]=null})})},destroy:function(){cancelAllRenderingTasks(),config=pageContents=PDFJS=pdfDoc=null}}}}),define("ui/documentViewer/providers/pdfViewer/pdfjs/wrapper",["lodash","core/promise","ui/documentViewer/providers/pdfViewer/pdfjs/pagesManager","ui/documentViewer/providers/pdfViewer/pdfjs/textManager"],function(_,Promise,pagesManagerFactory,textManagerFactory){"use strict";var BASE64_MARKER=";base64,";function processUri(uri){var base64Index;return 0<=(base64Index=(uri=String(uri)).indexOf(BASE64_MARKER))?function(data){for(var raw=window.atob(data),rawLength=raw.length,array=new Uint8Array(new ArrayBuffer(rawLength)
);rawLength--;)array[rawLength]=raw.charCodeAt(rawLength);return array}(uri.substring(base64Index+BASE64_MARKER.length)):uri}return function($container,config){var pdfDoc=null,pageNum=1,pageCount=1,pageNumPending=null,pageRendering=null,pagesManager=null,textManager=null,states={},PDFJS=null,events=null,wrapper={get wrapped(){return PDFJS},load:function(url){return pdfDoc=null,states={},events.trigger("loading",url),PDFJS.getDocument(processUri(url)).then(function(doc){states.destroyed||(pageNum=1,pageCount=(pdfDoc=doc).numPages,textManager.setDocument(pdfDoc),states.loaded=!0,events.trigger("loaded",url))})},renderPage:function(num){return pdfDoc?(
pageRendering?pageNumPending=num:(events.trigger("rendering",num),states.rendered=!1,states.rendering=!0,pageRendering=pdfDoc.getPage(num).then(function(page){if(pagesManager)return pagesManager.renderPage(page,config.fitToWidth).then(function(){var nextPage=pageNumPending;if(pageRendering=pageNumPending=null,!states.destroyed){if(states.rendered=!0,states.rendering=!1,events.trigger("rendered",num),null!==nextPage)return wrapper.renderPage(nextPage);events.trigger("allrendered",num)}})})),pageRendering):Promise.resolve(num)},getState:function(name){return!!states[name]},getDocument:function(){return pdfDoc},getPageCount:function(){return pageCount},
getPage:function(){return pageNum},setPage:function(page){return pageNum=Math.min(Math.max(1,page||0),pageCount),pagesManager.setActiveView(pageNum),events.trigger("pagechange",pageNum),wrapper.renderPage(pageNum)},getTextManager:function(){return textManager},getPagesManager:function(){return pagesManager},refresh:function(){return events.trigger("refreshing",pageNum),pagesManager.setActiveView(pageNum),wrapper.renderPage(pageNum)},destroy:function(){pagesManager&&pagesManager.destroy(),textManager&&textManager.destroy(),pdfDoc&&pdfDoc.destroy(),states={destroyed:!0},config=PDFJS=$container=pagesManager=pageRendering=pageNumPending=pdfDoc=null,
events.trigger("destroy.wrapper"),events=null}};if(PDFJS=(config=config||{}).PDFJS,events=config.events,!_.isPlainObject(PDFJS))throw new TypeError("You must provide the entry point to the PDF.js library! [config.PDFJS is missing]");if(!_.isPlainObject(events))throw new TypeError("You must provide an events hub! [config.events is missing]");return textManager=textManagerFactory({PDFJS:PDFJS}),pagesManager=pagesManagerFactory($container,{pageCount:1,textManager:textManager}),events.on("setpage.wrapper",function(page){wrapper.setPage(page)}).on("refresh.wrapper",function(){wrapper.refresh()}).trigger("init.wrapper"),wrapper}}),define(
"tpl!ui/documentViewer/providers/pdfViewer/pdfjs/viewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="pdf-bar">\n    <div class="pdf-actions">\n        <button class="small navigation" data-control="pdf-page-prev" data-direction="-1" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous page",options
):helperMissing.call(depth0,"__","Previous page",options)))+'"><span class="icon icon-step-backward"></span><span class="text">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+'</span></button>\n        <button class="small navigation" data-control="pdf-page-next" data-direction="1" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next page",options):helperMissing.call(depth0,"__","Next page",options))
)+'"><span class="icon icon-step-forward"></span><span class="text">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options)))+"</span></button>\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.fitToWidth,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var helper,options,buffer="";return buffer+='\n        <input type="checkbox" id="fit-to-width" data-control="fit-to-width" value="1" checked /> <label for="fit-to-width">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(
depth0,"Fit to width",options):helperMissing.call(depth0,"__","Fit to width",options)))+"</label>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="pdf-info">\n        <label for="pdf-page-num">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Page",options):helperMissing.call(depth0,"__","Page",options)))+':</label>\n        <input class="info" id="pdf-page-num" data-control="pdf-page-num" value="1" />\n        <label>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"of",options
):helperMissing.call(depth0,"__","of",options)))+'</label>\n        <span class="info" data-control="pdf-page-count">1</span>\n    </div>\n</div>\n<div class="pdf-container"></div>'})}),define("ui/documentViewer/providers/pdfViewer/pdfjs/viewer",["jquery","lodash","core/eventifier","ui/documentViewer/providers/pdfViewer/pdfjs/areaBroker","ui/documentViewer/providers/pdfViewer/pdfjs/findBar","ui/documentViewer/providers/pdfViewer/pdfjs/wrapper","tpl!ui/documentViewer/providers/pdfViewer/pdfjs/viewer"],function($,_,eventifier,areaBroker,findBarFactory,wrapperFactory,viewerTpl){"use strict";function toggleState($element,enabled){enabled?$element.removeAttr(
"disabled"):$element.attr("disabled",!0)}return function($container,config){var template=viewerTpl(config),events=eventifier(),controls={},broker=null,findBar=null,pdfConfig=null,pdf=null,PDFJS=null,enabled=!0;function updateControls(){var page=pdf.getPage(),pageCount=pdf.getPageCount();page!==parseInt(controls.$pageNum.val(),10)&&controls.$pageNum.val(page),toggleState(controls.$pagePrev,enabled&&1<page),toggleState(controls.$pageNext,enabled&&page<pageCount),toggleState(controls.$pageNum,enabled&&1<pageCount)}function disable(){events.trigger("disable")}function jumpPage(page){events.trigger("setpage",page)}function movePage(step){jumpPage(pdf.getPage(
)+step)}if(PDFJS=(config=config||{}).PDFJS,pdfConfig=_.merge({events:events},_.pick(config,["PDFJS","fitToWidth"])),!_.isPlainObject(PDFJS))throw new TypeError("You must provide the entry point to the PDF.js library! [config.PDFJS is missing]");return{load:function(url){return $container.html(template),PDFJS.PDFJS.disableRange=!0,events.on("enable",function(){enabled=!0,updateControls()}).on("disable",function(){enabled=!1,updateControls()}).on("loaded",function(){controls.$pageCount.html(pdf.getPageCount()),events.trigger("enable")}).on("pagechange rendered",function(){updateControls()}),broker=areaBroker($container,{bar:$(".pdf-bar",$container),actions:$(
".pdf-actions",$container),info:$(".pdf-info",$container),content:$(".pdf-container",$container)}),controls={$navigation:$container.find(".navigation"),$pagePrev:$container.find('[data-control="pdf-page-prev"]'),$pageNext:$container.find('[data-control="pdf-page-next"]'),$pageNum:$container.find('[data-control="pdf-page-num"]'),$pageCount:$container.find('[data-control="pdf-page-count"]'),$fitToWidth:$container.find('[data-control="fit-to-width"]')},pdf=wrapperFactory(broker.getContentArea(),pdfConfig),config.allowSearch&&(findBar=findBarFactory({events:events,areaBroker:broker,textManager:pdf.getTextManager(),caseSensitive:config.caseSensitiveSearch,
highlightAll:config.highlightAllMatches})),this.setSize($container.width(),$container.height()),controls.$fitToWidth.on("change",function(){pdfConfig.fitToWidth=controls.$fitToWidth.is(":checked"),events.trigger("refresh")}),controls.$navigation.on("click",function(){movePage(parseInt($(this).data("direction"),10)||1)}),controls.$pageNum.on("change",function(){jumpPage(parseInt(controls.$pageNum.val(),10)||pdf.getPage())}).on("keydown",function(event){switch(event.keyCode){case 38:movePage(1),event.stopPropagation(),event.preventDefault();break;case 40:movePage(-1),event.stopPropagation(),event.preventDefault()}}),disable(),pdf.load(url)},unload:function(){
disable(),findBar&&findBar.destroy(),pdf&&pdf.destroy(),events.removeAllListeners(),$container.empty(),controls={},broker=findBar=pdf=pdfConfig=null},setSize:function(width,height){var contentHeight,$bar,$content;if(pdf)return $bar=broker.getBarArea(),$content=broker.getContentArea(),contentHeight=height-$bar.outerHeight(),$bar.width(width),$content.width(width).height(contentHeight),events.trigger("resized",width,height,contentHeight),pdf.refresh()}}}}),define("tpl!ui/documentViewer/providers/pdfViewer/viewer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="pdf-viewer"></div>'})}),define("ui/documentViewer/providers/pdfViewer",["lodash","core/requireIfExists","ui/documentViewer/providers/pdfViewer/fallback/viewer","ui/documentViewer/providers/pdfViewer/pdfjs/viewer","tpl!ui/documentViewer/providers/pdfViewer/viewer"],function(_,requireIfExists,fallbackFactory,pdfjsFactory,viewerTpl){"use strict";return{getTemplate:function(){return viewerTpl},init:function(){this.pdf=null},load:function(){var self=this,$element=this.getElement();return requireIfExists("pdfjs-dist/build/pdf").then(function(pdfjs){var config=_.clone(self.config)
;return self.pdf=pdfjs?(config.PDFJS=pdfjs,pdfjsFactory($element,config)):fallbackFactory($element,config),self.pdf.load(self.getUrl())}).then(function(){self.setSize($element.width(),$element.height())})},unload:function(){this.pdf&&this.pdf.unload(),this.is("rendered")&&this.getElement().empty(),this.pdf=null},setSize:function(width,height){this.pdf&&this.pdf.setSize(width,height)}}}),define("tpl!ui/dropdown/tpl/dropdown",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",
escapeExpression=this.escapeExpression;return buffer+='<div class="dropdown-container">\n    <div class="dropdown ',buffer+=escapeExpression(stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.cls)?helper.call(depth0,{hash:{},data:data}):helper),((stack1=helpers.if.call(depth0,depth0&&depth0.isOpen,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return" open"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" id="',buffer+=escapeExpression(stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.id)?helper.call(depth0,{
hash:{},data:data}):helper)+'" data-control="',buffer+=escapeExpression(stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.id)?helper.call(depth0,{hash:{},data:data}):helper)+'" role="navigation">\n        <div class="dropdown-header a toggler" aria-haspopup="true" tabindex="0">\n        </div>\n        <ul class="dropdown-submenu plain" aria-label="submenu">\n        </ul>\n    </div>\n</div>'})}),define("tpl!ui/dropdown/tpl/list-item",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,
Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<li class="dropdown-item ',stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.cls)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" id="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    ",((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}
):typeof(helper=depth0&&depth0.content)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="\n</li>"})}),define("ui/dropdown",["jquery","lodash","ui/component","tpl!ui/dropdown/tpl/dropdown","tpl!ui/dropdown/tpl/list-item"],function($,_,component,dropdownTpl,itemTpl){"use strict";var defaults={isOpen:!1,activatedBy:"hover"};return function(config,data){var dropdownSpecs={getId:function(){return this.config.id},open:function(){return this.is("open")||(this.controls.$dropdown.addClass("open"),this.setState("open",!0)),this},close:function(){return this.is("open")&&(this.controls.$dropdown.removeClass("open"),
this.setState("open",!1)),this},toggle:function(){return this.is("open")?this.close():this.open(),this},setHeader:function(html){return"string"==typeof html&&(data.header=html,this.is("rendered")&&this.controls.$headerItem.html(html)),this},setItems:function(items){var self=this;return Array.isArray(items)&&(data.items=items,this.is("rendered")&&(this.controls.$listContainer.empty(),_.forEach(items,function(item){self.controls.$listContainer.append(itemTpl(item))}))),this},addItem:function(item){return item.content&&"string"==typeof item.content&&item.content.length&&(data.items.push(item),this.is("rendered")&&this.controls.$listContainer.append(itemTpl(item
))),this},removeItem:function(index){return 0<=index&&index<data.items.length&&(data.items.splice(index,1),this.is("rendered")&&this.controls.$listContainer.children().get(index).remove()),this},clearItems:function(){return data.items=[],this.is("rendered")&&this.controls.$listContainer.empty(),this}};return data=_.defaults({},data,{header:"",items:[]}),component(dropdownSpecs,defaults).setTemplate(dropdownTpl).on("init",function(){this.setState("open",this.config.isOpen)}).on("render",function(){var $component=this.getElement();this.controls={$dropdown:$component.find(".dropdown"),$toggler:$component.find(".dropdown-header:after"),
$headerItem:$component.find(".dropdown-header"),$listContainer:$component.find(".dropdown-submenu")},_.isEmpty(data)||(this.setHeader(data.header),this.setItems(data.items)),this.trigger("wireup")}).on("wireup",function(){var self=this,$component=this.getElement();"hover"===this.config.activatedBy?($component.on("mouseenter",self.open).on("mouseleave",self.close),this.controls.$toggler.on("click",self.toggle).on("focus",self.open)):"click"===this.config.activatedBy&&this.controls.$headerItem.on("click",self.toggle),$component.on("focus",self.open).on("blur",self.close),this.controls.$listContainer.on("click","li",function(){var id=$(this).closest("li").attr(
"id");self.trigger("item-click",id),self.trigger("item-click-"+id)})}).on("item-click",function(){this.close()}).init(config)}}),define("ui/durationer",["jquery","lodash","i18n","core/pluginifier","handlebars","moment"],function($,_,__,Pluginifier,Handlebars,moment){"use strict";var ns="durationer",dataNs="ui."+ns,defaults={format:"HH:mm:ss",separator:":",wrapperClass:"duration-ctrl-wrapper",ctrlClass:"duration-ctrl",disableClass:"disabled",title:{hours:__("hours"),minutes:__("minutes"),seconds:__("seconds")}},fieldTmpl=Handlebars.compile(
"<input type='text' id='{{id}}-{{type}}' data-duration-type='{{type}}' class='{{ctrlClass}}' value='{{value}}' title='{{title}}' />"),Durationer={init:function(options){var self=Durationer;return options=_.defaults(options||{},defaults),this.each(function(){var $elt=$(this);if(!$elt.data(dataNs))if($elt.is('input[type="text"]')){options.id=$elt.attr("id")||$elt.attr("name")||"durationer-"+(new Date).getTime();var duration=moment($elt.val(),options.format);$elt.hide(),self._insertField($elt,options,duration.hours(),"hours"),self._insertField($elt,options,duration.minutes(),"minutes"),self._insertField($elt,options,duration.seconds(),"seconds"),
options.separator&&$elt.siblings("."+options.wrapperClass+":not(:last)").after('<span class="separator">:</span>'),options.$ctrls=$elt.siblings("."+options.wrapperClass).children("input"),options.$ctrls.on("change",function(){self._syncToField($elt)}),$elt.on("change",function(e){e.namespace!==ns&&self._syncFromField($elt)}),$elt.data(dataNs,options),$elt.trigger("create."+ns)}else $.error("The durationer plugin applies only on input element of type text")})},_insertField:function($elt,options,value,type){var data=_.defaults({type:type,value:value,title:options.title[type]},options);$(fieldTmpl(data)).insertBefore($elt).val(value).incrementer({min:0,
max:"hours"===type?23:59,incrementerWrapperClass:options.wrapperClass})},_syncFromField:function($elt){var options=$elt.data(dataNs),current=moment($elt.val(),options.format);options.$ctrls.each(function(){var $field=$(this);current[$field.data("duration-type")]&&$field.val(current[$field.data("duration-type")]())})},_syncToField:function($elt){var options=$elt.data(dataNs),current=moment($elt.val(),options.format);options.$ctrls.each(function(){var $field=$(this);!isNaN($field.val())&&current[$field.data("duration-type")]&&current[$field.data("duration-type")]($field.val())}),$elt.val(current.format(options.format)),$elt.trigger("update."+ns).trigger(
"change")},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.siblings("."+options.wrapperClass).remove(),$elt.siblings(".separator").remove(),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Durationer),function($container){$container.find("[data-duration]").each(function(){var $elt=$(this),format=$elt.data("duration"),options=0<$.trim(format).length?{format:format}:{};$elt.durationer(options)})}}),define("ui/filesender",["jquery","lodash","layout/logout-event"],function($,_,logoutEvent){"use strict";var FileSender={_opts:{frame:"__postFrame_",loaded:function(data){}},_init:function(
options){var xhr,fd,self=FileSender,opts=_.defaults(options,self._opts),xhr2="undefined"!=typeof XMLHttpRequest&&(new XMLHttpRequest).upload&&"undefined"!=typeof FormData,fileParamName=options.fileParamName||"content",fileNameParamName=options.fileNameParamName||"contentName";if(!(this.attr("action")||opts.url&&0!==opts.url.trim().length))throw new Error("An url is required in the options or at least an action ");if(0===this.find("input[type='file']").length)throw new Error("This plugin is used to post files, your form should include an input element of type file.");if(!this||!this.is("form"))throw new Error("This plugin can only be called on a FORM element"
);xhr2&&(xhr=new XMLHttpRequest,fd=new FormData(this[0]),options.file&&options.file instanceof File&&(fd.append(fileParamName,options.file),fd.append(fileNameParamName,encodeURIComponent(options.file.name))),xhr.open("POST",opts.url,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.onreadystatechange=function(){if(4===xhr.readyState)if(200===xhr.status){var result=$.parseJSON(xhr.responseText);result.error?"function"==typeof opts.failed&&opts.failed(result.error):"function"==typeof opts.loaded&&opts.loaded(result)}else 403===xhr.status&&logoutEvent(),"function"==typeof opts.failed&&opts.failed()},xhr.send(fd))}};$.fn.sendfile=function(options
){return FileSender._init.call(this,options)}}),define("tpl!ui/filter/template",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+="<div>\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <label class="form_desc">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</label>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="item-filter"></div>\n</div>'})}),define("ui/selecter",["jquery","select2"],function($){"use strict";return function($container){$("select.select2",$container).each(function(){var $elt=$(this),hasSearch=!(!1===$elt.data("has-search")),hasPlaceholder=!(!$elt.attr("placeholder")&&!$elt.data("placeholder")),widthMethod=$elt.data("width")||"resolve",hasSelectedIndex=function(options){for(var i=options.length,selected=!1;i--;)if(
"string"==typeof options[i].getAttribute("selected")){selected=!0;break}return selected}(this.options),settings={width:widthMethod};hasPlaceholder&&this.options[0]&&this.options[0].text&&($elt.prepend("<option>"),hasSelectedIndex||(this.selectedIndex=this.options[0])),hasSearch||(settings.minimumResultsForSearch=-1),$elt.select2(settings)})}}),define("ui/filter",["jquery","lodash","i18n","core/eventifier","tpl!ui/filter/template","ui/selecter"],function($,_,__,eventifier,filterTpl){"use strict";var defaults={placeholder:__("Filter by value"),width:300,minimumResultsForSearch:10,minimumInputLength:3,enable:!0,quietMillis:2e3,label:!1};return function(
$container,options){var selected={uri:"",code:"",name:""};return options=_.defaults(options||{},defaults),eventifier({render:function(format){var self=this,$component=$(filterTpl(options)),$list=$(".item-filter",$component);return $list.select2({placeholder:options.placeholder,allowClear:!0,width:options.width,minimumResultsForSearch:options.minimumResultsForSearch,minimumInputLength:options.minimumInputLength,maximumInputLength:200,formatResult:_.isFunction(options.formatter)?options.formatter:function(data){return _.template(format)(data)},ajax:{quietMillis:options.quietMillis,data:function(term,page){return{q:term,page:page}},transport:function(params){
self.trigger("request",params)},results:function(data,page){var more=25*page<data.total;return{results:data.items,more:more}},cache:!0}}),$list.select2("enable",options.enable),$list.on("change.select2",function(){selected=$list.select2("data"),self.trigger("change",selected&&selected.uri?selected.uri:"")}),$container.append($component),this},enable:function(){$(".item-filter",$container).select2("enable",!0)},disable:function(){$(".item-filter",$container).select2("enable",!1)},getSelected:function(){return selected},reset:function(){$(".item-filter",$container).select2("val","")},destroy:function(){var $list=$(".item-filter",$container)
;return $list.select2("destroy"),$list.remove(),this.trigger("destroy"),this}})}}),define("ui/validator",["jquery","lodash","core/validator/Report","core/validator/Validator"],function($,_,Report,Validator){"use strict";function isCreated($elt){return"object"==typeof $elt.data("validator-config")}$.fn.validator=function(options,arg1,arg2){var ret,opts={},method="",args=[];return"object"==typeof options?opts=$.extend({},$.fn.validator.defaults,options):void 0===options?opts=$.extend({},$.fn.validator.defaults):"string"==typeof options&&"function"==typeof methods[options]&&(method=options,args=Array.prototype.slice.call(arguments,1)),this.each(function(){
var $this=$(this);isCreated($this)||create($this,opts),method&&(isCreated($this)?ret=methods[method].apply($(this),args):$.error("call of method of validator when it is not initialized"))}),void 0===ret?this:ret},$.fn.validator.defaults={allowEmpty:!1,validator:{lazy:!1}};var methods={destroy:function(){destroy($(this))},validate:function(arg1,arg2){var callback,options={};_.isFunction(arg1)?callback=arg1:_.isObject(arg1)&&(_.merge(options,arg1),_.isFunction(arg2)&&(callback=arg2)),validate($(this),callback,options)},getValidator:function(){return $(this).data("validator-instance")}},tokenize=function(inputStr){var ret=[],tokens=inputStr.split(/;/)
;return _.each(tokens,function(token){token=$.trim(token);var key,options={},rightStr=token.replace(/\$(\w*)/,function($0,k){return key=k,""});if(key){var optionsStr=rightStr.replace(/^\((.*)\)$/,"$1");(optionsStr=optionsStr.replace(/(\w+)=((\"(\\.|[^\"])*\")|(\'(\\.|[^\'])*\')),?/g,function($0,optionName,optionValue){return optionValue=optionValue.replace(/^["'](.*)["']$/g,"$1"),options[optionName]=optionValue,""})).replace(/(\w*)=([^\s]*)(,)?/g,function($0,optionName,optionValue){","===optionValue.charAt(optionValue.length-1)&&(optionValue=optionValue.substring(0,optionValue.length-1)),options[optionName]=optionValue}),ret.push({name:key,options:options})}
}),ret},create=function($elt,options){if(!isCreated($elt)){var rules=function($elt){var rulesStr=$elt.data("validate");return rulesStr?tokenize(rulesStr):{}}($elt);options.rules&&(rules=_.merge(rules,options.rules),delete options.rules),options=_.merge(options,function($elt){var optionsStr=$elt.data("validate-option"),optionsArray=optionsStr?tokenize(optionsStr):{},availableCoreValidatorOptions=_.keys(Validator.getDefaultOptions()),options=_.clone($.fn.validator.defaults);return _.each(optionsArray,function(optionArray){0<=_.indexOf(availableCoreValidatorOptions,optionArray.name
)?options.validator[optionArray.name]=optionArray.options:options[optionArray.name]=optionArray.options}),options}($elt)||{}),$elt.data("validator-config",_.clone(options)),createValidator($elt,rules,options)}},destroy=function($elts){$elts.removeData("validator-instance validator-config"),$elts.off(".validator")},createValidator=function($elt,rules,options){$elt.data("validator-instance",new Validator(rules,options.validator||{})),options.event&&bindEvents($elt,options)},bindEvents=function($elt,options){var events=_.isArray(options.event)?options.event:[options.event];0<events.length&&_.isFunction(options.validated)&&_.forEach(events,function(event){
switch(_.isString(event)&&(event={type:event}),event.type){case"keyup":case"keydown":$elt.on(event.type,function(){var v=$elt.val();event.length?v&&v.length>event.length&&validate($elt,options.validated,{}):validate($elt,options.validated,{})});break;case"change":case"blur":$elt.on(event.type,function(){validate($elt,options.validated,{})});break;default:$.error("unknown event type to be bound to validation : "+event.type)}})},validate=function($elt,callback,options){var value=$elt.val(),execCallback=function(results){var valid;$elt.trigger("validated",{elt:$elt[0],results:results}),_.isFunction(callback)&&(valid=0===_.where(results,{type:"failure"}).length,
callback.call($elt[0],valid,results))};$elt.data("validator-config").allowEmpty&&""===value?execCallback([new Report("success",{validator:"allowEmpty"})]):$elt.data("validator-instance").validate(value,options||{},execCallback)}}),define("ui/formValidator/highlighters/message",["jquery","lodash","i18n"],function($,_,__){"use strict";var defaultOptions={errorClass:"error",errorMessageClass:"validate-error"};return function(options){return options=_.merge(defaultOptions,options),{highlight:function($field,message){this.unhighlight($field),$field.addClass(options.errorClass),$field.after("<span class='"+options.errorMessageClass+"'>"+message+"</span>")},
unhighlight:function($field){$field.removeClass(options.errorClass),$field.next("."+options.errorMessageClass).remove()},destroy:function($field){}}}}),define("ui/formValidator/highlighters/tooltip",["jquery","lodash","i18n","ui/tooltip"],function($,_,__,tooltip){"use strict";var defaultOptions={tooltip:{trigger:"manual"}};return function(options){return options=_.merge(defaultOptions,options),{highlight:function($field,message){var fieldTooltip;(fieldTooltip=tooltip.error($field,message,options.tooltip)).show(),$field.data("$tooltip",fieldTooltip),$field.addClass(options.errorClass)},unhighlight:function($field){$field.removeClass(options.errorClass),
$field.data("$tooltip").dispose(),$field.removeData("$tooltip")},destroy:function($field){$field.data("$tooltip")&&($field.data("$tooltip").dispose(),$field.removeData("$tooltip"))}}}}),define("ui/formValidator/highlighters/highlighter",["jquery","lodash","i18n","ui/formValidator/highlighters/message","ui/formValidator/highlighters/tooltip"],function($,_,__,messageHighlighter,tooltipHighlighter){"use strict";var defaultOptions={type:"message"};function highlighterFactory(options){var provider;return{init:function(){return options=$.extend(!0,defaultOptions,options),provider=function(options){if(highlighterFactory.providers[options.type]
)return highlighterFactory.providers[options.type](options);throw new TypeError("Provider "+name+" is not registered.")}(options),this},highlight:function($field,message){provider.highlight($field,message)},unhighlight:function($field){provider.unhighlight($field)},destroy:function($field){provider.destroy($field)}}.init()}return highlighterFactory.providers={},highlighterFactory.register=function(name,provider){highlighterFactory.providers[name]=provider},highlighterFactory.register("message",messageHighlighter),highlighterFactory.register("tooltip",tooltipHighlighter),highlighterFactory}),define("ui/formValidator/formValidator",["jquery","lodash","i18n",
"ui/validator","ui/formValidator/highlighters/highlighter"],function($,_,__,jQueryValidator,highlighterFactory){"use strict";var defaultOptions={highlighter:{type:"message",errorClass:"error"},container:$(document),selector:"[data-validate]",validateOnInit:!1,events:["change","blur"]};return function(options){var highlighter,$toValidate,validator,state={valid:!0,errors:[]};function afterFieldValidate($field,valid,report){var firstErrorData;state.valid=state.valid&&valid,valid?highlightField($field,!0):(highlightField($field,!1,(firstErrorData=_.pluck(_.filter(report,{type:"failure"}),"data")[0]).message),state.errors.push($.extend(!0,{field:$field},
firstErrorData)))}function highlightField($field,success,message){_.isUndefined(highlighter)&&(highlighter=highlighterFactory(validator.options.highlighter)),highlighter=highlighter,success?highlighter.unhighlight($field):highlighter.highlight($field,message)}function getFieldsToValidate(){var $container;return _.isUndefined($toValidate)&&($container=validator.getContainer(),$toValidate=$container.find(validator.options.selector)),$toValidate}return(validator={init:function(){return this.options=_.defaults(options||{},defaultOptions),($toValidate=getFieldsToValidate()).validator({event:this.options.events,validated:function(valid,report){afterFieldValidate(
$(this),valid,report)}}),options.validateOnInit&&this.validate(),this},validate:function(){return $toValidate=getFieldsToValidate(),state={valid:!0,errors:[]},$toValidate.validator("validate",function(valid,report){afterFieldValidate($(this),valid,report)}),state.valid},getState:function(){return state},destroy:function(){getFieldsToValidate().each(function(){highlighter&&highlighter.destroy($(this))})},getContainer:function(){return this.options.container&&this.options.container.length?this.options.container:$(document)}}).init()}}),define("ui/groupedComboBox",["jquery","lodash","i18n","ui/component","tpl!ui/bulkActionPopup/tpl/select","select2"],function($
,_,__,component,selectTpl){"use strict";var selectedValues={};return function(options){return component().on("render",function($container){_.isArray(options.categoriesDefinitions)&&_.isArray(options.categories)&&options.categoriesDefinitions.forEach(function(k,i){var $comboBox=function(level,categoriesDefinitions,categories,selected){if(!categoriesDefinitions[level]||!categories[level])throw"missing category definition on level : "+level;selected=selected||[];var $comboBox,categoryDef=categoriesDefinitions[level];if(categoryDef.id)return($comboBox=$(selectTpl({comboboxId:categoryDef.id,comboboxLabel:categoryDef.label||"",options:categories[level]}))).find(
"select").val(selected[level]||""),$comboBox.on("change",function(){var $selected=$comboBox.find(":selected");selectedValues[categoryDef.id]=$selected.val(),$comboBox.trigger("selected.cascading-combobox",[selectedValues])}),$comboBox.find("select").select2({allowClear:!0,dropdownAutoWidth:!0,placeholder:categoryDef.placeholder||__("select..."),minimumResultsForSearch:-1}),$comboBox}(i,options.categoriesDefinitions,options.categories,options.selected);$container.append($comboBox)})}).init(options)}}),define("ui/groupvalidator",["jquery","lodash","ui/validator"],function($,_){$.fn.groupValidator=function(options){return options=_.defaults(options||{},
$.fn.groupValidator.defaults),this.each(function(){var $container=options.$container=$(this),states=[],callback=function(valid,results){var $elt=$(this);states[$elt.attr("name")]=valid,options.callback.call(this,valid,results,options),$elt.trigger("validated.single",[valid]),$container.trigger("validated.group",[!1===_(states).values().contains(!1),this])},$toValidate=$("[data-validate]",$container).validator({event:options.events,validated:callback});options.validateOnInit&&$toValidate.validator("validate",{},callback)})},$.fn.groupValidator.defaults={validateOnInit:!1,errorClass:"error",errorMessageClass:"validate-error",events:["change","blur"],
callback:function(valid,results,options){var rule,$elt=$(this);$elt.siblings("."+options.errorMessageClass).remove(),!1===valid?(rule=_.where(results,{type:"failure"})[0],$elt.addClass(options.errorClass),rule&&rule.data.message&&$elt.after("<span class='"+options.errorMessageClass+"'>"+rule.data.message+"</span>")):$elt.removeClass(options.errorClass)}}}),define("ui/highlighter",["lodash","jquery"],function(_,$){"use strict";var containersBlackList=["textarea","math","script",".select2-container"];return function(options){var currentGroupId,textNodesIndex,className=options.className,containerSelector=options.containerSelector,isWrapping=!1,hasWrapped=!1
;function getContainer(){return $(containerSelector).get(0)}function isWrappingNode(node){return isElement(node)&&"span"===node.tagName.toLowerCase()&&node.className===className}function isWrappable(node){return isText(node)&&0===$(node).closest(containersBlackList.join(",")).length&&0<node.textContent.trim().length}function getWrapper(groupId){var wrapper=document.createElement("span");return wrapper.className=className,wrapper.setAttribute("data-hl-group",groupId+""),wrapper}function isElement(node){return node&&"object"==typeof node&&node.nodeType===window.Node.ELEMENT_NODE}function isText(node){
return node&&"object"==typeof node&&node.nodeType===window.Node.TEXT_NODE}function isHotNode(node){return isWrappingNode(node)||isWrappable(node)}return{highlightRanges:function(ranges){ranges.forEach(function(range){var rangeInfos;(function(range){return($.contains(getContainer(),range.commonAncestorContainer)||getContainer().isSameNode(range.commonAncestorContainer))&&!range.collapsed})(range)&&(currentGroupId=function(){for(var id=currentGroupId||1;0!==$(getContainer()).find("[data-hl-group="+id+"]").length;)id++;return id}(),isWrappable(range.commonAncestorContainer)&&!isWrappingNode(range.commonAncestorContainer.parentNode)?range.surroundContents(
getWrapper(currentGroupId)):(rangeInfos={startNode:isElement(range.startContainer)?range.startContainer.childNodes[range.startOffset]:range.startContainer,startNodeContainer:range.startContainer,startOffset:range.startOffset,endNode:isElement(range.endContainer)?range.endContainer.childNodes[range.endOffset-1]:range.endContainer,endNodeContainer:range.endContainer,endOffset:range.endOffset},hasWrapped=isWrapping=!1,function wrapTextNodesInRange(rootNode,rangeInfos){var currentNode,i,node,groupId,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length&&!hasWrapped;i++)if((currentNode=childNodes[i]).isSameNode(rangeInfos.startNode)&&(isText(
rangeInfos.startNodeContainer)&&0!==rangeInfos.startOffset?(rangeInfos.startNode=currentNode.splitText(rangeInfos.startOffset),rangeInfos.startOffset=0):isWrapping=!0),currentNode.isSameNode(rangeInfos.endNode)&&isText(rangeInfos.endNodeContainer)&&(0!==rangeInfos.endOffset?currentNode.splitText(rangeInfos.endOffset):isWrapping=!1),isText(currentNode)?(node=currentNode,groupId=currentGroupId,isWrapping&&!isWrappingNode(node.parentNode)&&isWrappable(node)&&$(node).wrap($(getWrapper(groupId)))):isElement(currentNode)&&wrapTextNodesInRange(currentNode,rangeInfos),currentNode.isSameNode(rangeInfos.endNode)){hasWrapped=!(isWrapping=!1);break}}(
range.commonAncestorContainer,rangeInfos))),range.commonAncestorContainer.normalize(),currentGroupId=0,isWrapping=!1,function reindexGroups(rootNode){var i,currentNode,parent,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)isWrappable(currentNode=childNodes[i])?isWrappingNode(parent=currentNode.parentNode)?(!1===isWrapping&&currentGroupId++,isWrapping=!0,parent.setAttribute("data-hl-group",currentGroupId)):isWrapping=!1:isElement(currentNode)&&reindexGroups(currentNode)}(getContainer()),function mergeAdjacentWrappingNodes(rootNode){var i,currentNode,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)if(isWrappingNode(
currentNode=childNodes[i]))for(;isWrappingNode(currentNode.nextSibling);)currentNode.firstChild.textContent+=currentNode.nextSibling.firstChild.textContent,currentNode.parentNode.removeChild(currentNode.nextSibling);else isElement(currentNode)&&mergeAdjacentWrappingNodes(currentNode)}(getContainer())})},highlightFromIndex:function(highlightIndex){var rootNode=getContainer();rootNode&&(rootNode.normalize(),textNodesIndex=0,function restoreHighlight(rootNode,highlightIndex){var i,currentNode,parent,nodeInfos,nodesToSkip,range,initialChildCount,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)isWrappable(currentNode=childNodes[i])?(
parent=currentNode.parentNode,initialChildCount=parent.childNodes.length,!0===(nodeInfos=highlightIndex[textNodesIndex]).highlighted&&(_.isArray(nodeInfos.inlineRanges)?(nodeInfos.inlineRanges.reverse(),nodeInfos.inlineRanges.forEach(function(inlineRange){(range=document.createRange()).setStart(currentNode,inlineRange.startOffset||0),range.setEnd(currentNode,inlineRange.endOffset||currentNode.textContent.length),range.surroundContents(getWrapper(inlineRange.groupId))})):((range=document.createRange()).selectNodeContents(currentNode),range.surroundContents(getWrapper(nodeInfos.groupId))),nodesToSkip=parent.childNodes.length-initialChildCount,i+=nodesToSkip),
textNodesIndex++):isElement(currentNode)&&restoreHighlight(currentNode,highlightIndex)}(rootNode,highlightIndex))},getHighlightIndex:function(){var highlightIndex=[],rootNode=getContainer();return rootNode&&(rootNode.normalize(),textNodesIndex=0,function buildHighlightIndex(rootNode,highlightIndex){var i,currentNode,nodeInfos,inlineRange,inlineOffset,nodesToSkip,childNodes=rootNode.childNodes;for(i=0;i<childNodes.length;i++)if(isWrappable(currentNode=childNodes[i])&&!isWrappingNode(currentNode.nextSibling))highlightIndex[textNodesIndex]={highlighted:!1},textNodesIndex++;else if(isWrappingNode(currentNode)&&!isWrappable(currentNode.nextSibling)
)highlightIndex[textNodesIndex]={highlighted:!0,groupId:currentNode.getAttribute("data-hl-group")},textNodesIndex++;else if(isHotNode(currentNode)&&isHotNode(currentNode.nextSibling)){for(nodeInfos={highlighted:!0,inlineRanges:[]},nodesToSkip=-1,inlineOffset=0;currentNode;)isWrappingNode(currentNode)&&(inlineRange={groupId:currentNode.getAttribute("data-hl-group")},isText(currentNode.previousSibling)&&(inlineRange.startOffset=inlineOffset),isText(currentNode.nextSibling)&&(inlineRange.endOffset=inlineOffset+currentNode.textContent.length),nodeInfos.inlineRanges.push(inlineRange)),inlineOffset+=currentNode.textContent.length,currentNode=isHotNode(
currentNode.nextSibling)?currentNode.nextSibling:null,nodesToSkip++;i+=nodesToSkip,highlightIndex[textNodesIndex]=nodeInfos,textNodesIndex++}else isElement(currentNode)&&buildHighlightIndex(currentNode,highlightIndex)}(rootNode,highlightIndex)),highlightIndex},clearHighlights:function(){$(getContainer()).find("."+className).each(function(){var $wrapped=$(this);$wrapped.replaceWith($wrapped.text())})}}}}),define("ui/incrementer",["jquery","lodash","core/pluginifier","lib/gamp/gamp"],function($,_,Pluginifier,gamp){"use strict";var ns="incrementer",dataNs="ui."+ns,defaults={disableClass:"disabled",step:1,min:null,max:null,zero:!1,incrementerClass:"incrementer",
incrementerCtrlClass:"incrementer-ctrl",incrementerWrapperClass:"incrementer-ctrl-wrapper",decimal:0},Incrementer={init:function(options){var self=Incrementer;return options=_.defaults(options||{},defaults),this.each(function(){var $ctrl,currentValue,$elt=$(this),wrapper=$("<span>",{class:options.incrementerWrapperClass});$elt.data(dataNs)||($elt.is('input[type="text"]')?(currentValue=parseFloat($elt.val()).toFixed(options.decimal),$elt.wrap(wrapper),$elt.data(dataNs,options).addClass(options.incrementerClass).after(
'<span class="ctrl '+options.incrementerCtrlClass+'"><a href="#" class="inc" title="+'+options.step+'" tabindex="-1"></a><a href="#" class="dec" title="-'+options.step+'" tabindex="-1"></a></span>').on("keydown",function(e){38===e.which?(self._inc($elt),this.select()):40===e.which&&(self._dec($elt),this.select())}).on("keyup",_.debounce(function(){var value=$elt.val(),negative="-"===value.charAt(0),options=$elt.data(dataNs);value=parseFloat(value.replace(/[^\d\.]/g,"")),isNaN(value)?$elt.val(""):(value=negative?-value:value,null===options.min||_.isNumber(options.min)&&value>=options.min||!0===options.zero&&0===value?$elt.val(value):($elt.val(options.min),
value=options.min),null===options.max||_.isNumber(options.max)&&value<=options.max?$elt.val(value):$elt.val(options.max)),$elt.trigger("change")},600)).on("focus",function(){this.select()}).on("disable.incrementer",function(){$elt.prop("disabled",!0).addClass("disabled"),$ctrl.find(".inc,.dec").prop("disabled",!0).addClass("disabled")}).on("enable.incrementer",function(){$elt.prop("disabled",!1).removeClass("disabled"),$ctrl.find(".inc,.dec").removeProp("disabled").removeClass("disabled")}),(_.isNaN(currentValue)||null!==options.min&&currentValue<options.min||null!==options.max&&currentValue>options.max)&&$elt.val(options.min||0),($ctrl=$elt.next(
"."+options.incrementerCtrlClass)).find(".inc").click(function(e){e.preventDefault(),$(this).prop("disabled")||self._inc($elt)}),$ctrl.find(".dec").click(function(e){e.preventDefault(),$(this).prop("disabled")||self._dec($elt)}),$elt.trigger("create."+ns)):$.error("The incrementer plugin applies only on input element of the type text"))})},_toFixedDown:function(number,precision){var m=Math.pow(10,precision||0);return Math.floor(number*m)/m},_decimalPlaces:function(number){var match=(""+number).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return match?Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0)):0},_inc:function($elt){var value,
options=$elt.data(dataNs),current=parseFloat($elt.val()||0);value=gamp.add(current,options.step),_.isNumber(options.min)&&value<options.min&&(value=options.min),(null===options.max||_.isNumber(options.max)&&value<=options.max)&&($elt.val(value),$elt.trigger("increment."+ns,[value]).trigger("change"))},_dec:function($elt){var value,options=$elt.data(dataNs),current=parseFloat($elt.val()||0);value=gamp.sub(current,options.step),!0===options.zero&&_.isNumber(options.min)&&value<options.min&&(value=0),(null===options.min||_.isNumber(options.min)&&value>=options.min||!0===options.zero&&0===value)&&($elt.val(value),$elt.trigger("decrement."+ns,[value]).trigger(
"change"))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.off("keyup keydown").siblings("."+options.incrementerCtrlClass).remove(),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Incrementer),function($container){$container.find("[data-increment]").each(function(){var min,max,$elt=$(this),decimal=Incrementer._decimalPlaces($elt.attr("data-increment")),step=parseFloat($elt.attr("data-increment")),zero=!!$elt.data("zero"),options={};options.zero=zero,_.isNaN(step)||(options.step=step),_.isNaN(decimal)||(options.decimal=decimal),$elt.attr("data-min")&&(min=parseFloat($elt.attr("data-min")),_.isNaN(min)||(
options.min=min)),$elt.attr("data-max")&&(max=parseFloat($elt.attr("data-max")),_.isNaN(max)||(options.max=max)),$elt.incrementer(options)})}}),define("ui/inplacer",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function($,_,Pluginifier,DataAttrHandler){"use strict";var ns="inplacer",dataNs="ui."+ns,defaults={disableClass:"disabled",bindEvent:"click",inplaceClass:"inplace",mapping:{textarea:["p","div"]}};function getText($elt){var text="";return $elt.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&""!==$.trim(this.nodeValue)&&(text+=$.trim(this.nodeValue))}),text}var InPlacer={init:function(options){return options=$.extend(!0,{},
defaults,options),this.each(function(){var $elt=$(this);if(!$elt.data(dataNs)){var $target=options.target;/^#/.test($target.selector)||$.error("The target selector must referr to the of an element id or to the element to create."),0===$target.length?($elt.after("<input id='"+$target.selector.replace("#","")+"' type='hidden' />"),options.target=$($target.selector)):"INPUT"!==$target.prop("tagName")&&$.error("The target must be an input element."),$elt.data(dataNs,options),$elt.addClass(options.inplaceClass),InPlacer._sync($elt,$target),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){0===$elt.children(":text").length&&(e.preventDefault(),
InPlacer._edit($elt))}),$elt.trigger("create."+ns)}})},_toggle:function($elt){0<$elt.children(":text").length?this._leave($elt):this._edit($elt)},_edit:function($elt){var $editor,self=this,options=$elt.data(dataNs),$target=options.target,text=getText($elt),width=options.width||$elt.width()+"px";if(function($elt){$elt.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&(this.nodeValue="")})}($elt),_.contains(options.mapping.textarea,$elt.prop("tagName").toLowerCase())){var height=options.height||$elt.height()+"px";$editor=$elt.append("<textarea>"+text+"</textarea>").children(":input").width(width).height(height)}else $editor=$elt.prepend($("<input>",
{type:"text"})).children(":input").width(width).focus().val(text);$editor.off("click").change(function(e){e.stopPropagation()}).keyup(function(e){13===e.which&&self._leave($elt)}).blur(function(){self._leave($elt)}).focus(),self._sync($elt,$target),$elt.trigger("edit."+ns,[$target.val()])},_leave:function($elt){var $target=$elt.data(dataNs).target,$input=$elt.children(":input"),content=$input.val();$input.remove(),function($elt,text){var set=!1;$elt.contents().filter(function(){if(this.nodeType===Node.TEXT_NODE&&!1===set)return set=!0,void(this.nodeValue=text)}),!1===set&&$elt.prepend(text)}($elt,content),this._sync($elt,$target),$elt.trigger("leave."+ns,[
$target.val()]),$elt.trigger("change")},_sync:function($elt,$target){0<$elt.children(":text").length?$target.val($elt.children(":text").val()):$target.val(getText($elt))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.removeClass(options.inplaceClass),!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.removeData(dataNs),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,InPlacer,{expose:["toggle","leave","edit"]}),function($container){new DataAttrHandler("in-place",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){var options={target:$target,bindEvent:!1}
;$elt.data("width")&&(options.width=$elt.data("width")),$elt.inplacer(options)}).trigger(function($elt){$elt.inplacer("toggle")})}}),define("ui/keyNavigation/navigableGroupElement",["jquery","lodash","core/eventifier"],function($,_,eventifier){"use strict";var _ns=".navigable-group-element",navigableGroupElementFactory=function(keyNavigator){var $group;if(!keyNavigator)throw new TypeError("the navigation group does not exist");if(!($group=keyNavigator.getGroup()).length||!$.contains(document,$group[0]))throw new TypeError("the group dom element does not exist");return eventifier({init:function(){return $group.on("focusin"+_ns,function(){$group.addClass(
"focusin")}).on("focusout"+_ns,function(){_.defer(function(){document.activeElement&&$.contains($group.get(0),document.activeElement)||$group.removeClass("focusin")})}),this},destroy:function(){return $group.removeClass("focusin").off(_ns),this},getElement:function(){return $group},isVisible:function(){var hasVisibleNavigable=!1;return!!$group.is(":visible")&&(_.forEach(keyNavigator.getNavigables(),function(nav){if(nav.isVisible())return!(hasVisibleNavigable=!0)}),hasVisibleNavigable)},isEnabled:function(){var hasEnabledNavigable=!1;return!$group.is(":disabled")&&(_.forEach(keyNavigator.getNavigables(),function(nav){if(nav.isEnabled())return!(
hasEnabledNavigable=!0)}),hasEnabledNavigable)},focus:function(){return keyNavigator.focus(this),this}})};return navigableGroupElementFactory.createFromNavigators=function(keyNavigators){var list=[];return _.each(keyNavigators,function(keyNavigator){list.push(navigableGroupElementFactory(keyNavigator))}),list},navigableGroupElementFactory}),define("tpl!ui/listbox/tpl/main",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;function program3(depth0,data){
return" hidden"}return buffer+='<div class="listbox">\n    <h1 ',((stack1=helpers.unless.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'class="hidden"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",buffer+=escapeExpression(stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'</h1>\n    <h2>\n        <span class="empty-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textEmpty,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+='">',buffer+=escapeExpression(stack1=(helper=helpers.textEmpty)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.textEmpty)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n        <span class="available-list',((stack1=helpers.unless.call(depth0,depth0&&depth0.textNumber,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span class="label">',buffer+=escapeExpression(stack1=(helper=helpers.textNumber)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.textNumber)?helper.call(depth0,{hash:{},data:data}
):helper)+'</span>: <span class="count"></span></span>\n        <span class="loading',((stack1=helpers.unless.call(depth0,depth0&&depth0.textLoading,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"><span>',buffer+=escapeExpression(stack1=(helper=helpers.textLoading)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.textLoading)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>...</span>\n    </h2>\n    <div class="list"></div>\n</div>'})}),define("tpl!ui/listbox/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper;return stack1=(helper=helpers.width)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.width)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program4(depth0,data,depth2){var stack1;return(stack1=helpers.if.call(depth0,depth2&&depth2.width,{hash:{},inverse:self.program(7,program7,data),fn:self.programWithDepth(5,program5,data,depth2),data:data})
)||0===stack1?stack1:""}function program5(depth0,data,depth3){var stack1;return escapeExpression(typeof(stack1=depth3&&depth3.width)===functionType?stack1.apply(depth0):stack1)}function program7(depth0,data){return"12"}function program9(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.cls)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.cls)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)}function program11(depth0,data){var stack1,helper,buffer="";return buffer+='<div class="content clearfix">',((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},
data:data}):typeof(helper=depth0&&depth0.content)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>"}function program13(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="text-html">',((stack1=(helper=helpers.html)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.html)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</span>"}function program15(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="text-link"><span class="icon-play"></span>',stack1=(helper=helpers.text)?helper.call(depth0,{
hash:{},data:data}):typeof(helper=depth0&&depth0.text)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>"}return buffer+='<ul class="list-box flex-grid plain">\n    ',((stack1=helpers.each.call(depth0,depth0&&depth0.list,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n    <li class="entry flex-col-',((stack1=helpers.if.call(depth0,depth0&&depth0.width,{hash:{},inverse:self.programWithDepth(4,program4,data,depth1),fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,
depth0&&depth0.cls,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n        <a class="block box" href="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <h3 class="title">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h3>\n            ",((stack1=helpers.if.call(depth0,
depth0&&depth0.content,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n            <div class="bottom clearfix">\n                ',((stack1=helpers.if.call(depth0,depth0&&depth0.html,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",((stack1=helpers.if.call(depth0,depth0&&depth0.text,{hash:{},inverse:self.noop,fn:self.program(15,program15,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </div>\n        </a>\n    </li>\n    "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n</ul>"})}),define("ui/listbox",["jquery","lodash","i18n","ui/component","tpl!ui/listbox/tpl/main","tpl!ui/listbox/tpl/list"],function($,_,__,component,mainTpl,listTpl){"use strict";var _defaults={title:!1,textNumber:__("Available"),textEmpty:__("There is nothing to list!"),textLoading:__("Loading"),flex:12},listBox={update:function(list){var count,$list=this.controls&&this.controls.$list,$numberValue=this.controls&&this.controls.$numberValue;return this.setLoading(!0),$list&&($list.empty(),list&&list.length?($list.append(listTpl({list:list,width:this.config.flex})),$numberValue&&(count=list.length,_.isFunction(this.config.countRenderer)&&(
count=this.config.countRenderer(count)),$numberValue.text(count)),this.setState("empty",!1),this.setState("loaded",!0)):(this.setState("empty",!0),this.setState("loaded",!1))),this.setLoading(!1),this},setLoading:function(flag){return flag&&this.setState("loaded",!1),this.setState("loading",flag)},setTitle:function(title){var $title=this.controls&&this.controls.$title;return this.config.title=title,$title&&(!1===title?$title.addClass("hidden"):$title.html(title).removeClass("hidden")),this},setTextNumber:function(text){var $numberLabel=this.controls&&this.controls.$numberLabel,$textAvailable=this.controls&&this.controls.$textAvailable
;return this.config.textNumber=text,$numberLabel&&(!1!==text?$numberLabel.html(text).removeClass("hidden"):$textAvailable&&$textAvailable.addClass("hidden")),this},setTextEmpty:function(text){var $textEmpty=this.controls&&this.controls.$textEmpty;return this.config.textEmpty=text,$textEmpty&&(!1===text?$textEmpty.addClass("hidden"):$textEmpty.html(text).removeClass("hidden")),this},setTextLoading:function(text){var $textLoading=this.controls&&this.controls.$textLoading;return this.config.textLoading=text,$textLoading&&(!1===text?$textLoading.addClass("hidden"):$textLoading.html(text).removeClass("hidden")),this},setSize:function(){return console.warn(
"The setSize() method has been disabled in the listbox component as its size is handled by CSS flex box"),this}};return function(config){var initConfig=config||{};return initConfig.flex=initConfig.width,component(listBox,_defaults).setTemplate(mainTpl).on("destroy",function(){this.controls=null}).on("render",function(){this.controls={$title:this.$component.find("h1"),$textEmpty:this.$component.find(".empty-list"),$textAvailable:this.$component.find(".available-list"),$textLoading:this.$component.find(".loading span"),$numberLabel:this.$component.find(".available-list .label"),$numberValue:this.$component.find(".available-list .count"),
$list:this.$component.find(".list")},this.config.list?this.update(this.config.list):(this.setState("empty",!0),this.setState("loaded",!1))}).init(_.omit(initConfig,"width"))}}),define("util/strPad",[],function(){"use strict";return function(input,pad_length,pad_string,pad_type){var pad_to_go,half="",str_pad_repeater=function(s,len){for(var collect="";collect.length<len;)collect+=s;return collect=collect.substr(0,len)};return input=input.toString(),pad_string=void 0!==pad_string?pad_string:" ","STR_PAD_LEFT"!==pad_type&&"STR_PAD_RIGHT"!==pad_type&&"STR_PAD_BOTH"!==pad_type&&(pad_type="STR_PAD_RIGHT"),0<(pad_to_go=pad_length-(input+="").length)&&(
"STR_PAD_LEFT"===pad_type?input=str_pad_repeater(pad_string,pad_to_go)+input:"STR_PAD_RIGHT"===pad_type?input+=str_pad_repeater(pad_string,pad_to_go):"STR_PAD_BOTH"===pad_type&&(input=(input=(half=str_pad_repeater(pad_string,Math.ceil(pad_to_go/2)))+input+half).substr(0,pad_length))),input}}),define("ui/liststyler",["jquery","lodash","core/pluginifier","util/strPad","util/capitalize"],function($,_,Pluginifier,strPad,capitalize){"use strict";var ns="liststyler",currStyle="",defaults={selected:null},listStyles={none:"",disc:"",circle:"",square:"",decimal:"1","decimal-leading-zero":"01","lower-alpha":"a","upper-alpha":"A","lower-roman":"i","upper-roman":"I",
"lower-greek":"",armenian:"",georgian:""};function formatState(state){var symbol=listStyles[state.id];return $("<span/>",{text:state.text,"data-symbol":symbol})}var ListStyler={init:function(options){return this.each(function(){var selectBox,selectedStyle,$elt=$(this);options=$.extend(!0,{},defaults,options),selectBox=this,selectedStyle=options.selected,_.forOwn(listStyles,function(symbol,style){selectBox.options.add(new Option(capitalize(style.replace(/-/g," ")),style,!1,style===selectedStyle))}),currStyle=options.selected,$elt.on("change",function(){$elt.trigger("stylechange."+ns,{newStyle:this.value,oldStyle:currStyle}),currStyle=this.value}),
$elt.select2({formatResult:formatState,width:"element",minimumResultsForSearch:1/0}),$elt.trigger("create."+ns)})},destroy:function(){this.each(function(){$(this).trigger("destroy."+ns)})}};Pluginifier.register(ns,ListStyler)}),define("tpl!ui/lock/lock",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="feedback-',buffer+=escapeExpression((helper=helpers.level)?helper.call(depth0,{hash:{},
data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n<span class="icon-lock ',buffer+=escapeExpression((helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+"-color ",buffer+=escapeExpression((helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    ',buffer+=escapeExpression((helper=helpers.msg)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.msg
)?helper.call(depth0,{hash:{},data:data}):helper)+'\n    <div class="txt-rgt button-container">\n        <button class="btn btn-info small check-in"><span class="icon-unlock info"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Check-in",options):helperMissing.call(depth0,"__","Check-in",options)))+'</button>\n        <button class="btn btn-info small release"><span class="icon-result-nok info"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Release",options):helperMissing.call(depth0,"__","Release",options))
)+'</button>\n    </div>\n\n    <div class="message-container button-container" style="display: none;">\n            <label>\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Message",options):helperMissing.call(depth0,"__","Message",options)))+'\n            </label>\n            <input type="text" name="message" class="message">\n            <button class="btn-info small commit">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Commit",options):helperMissing.call(depth0,"__","Commit",options)))+"</button>\n    </div>\n</div>"})
}),define("helpers",["lodash","jquery","context","layout/loading-bar","jqueryui"],function(_,$,context,loadingBar){"use strict";return{init:function(){$.postJson=function(url,data,callback){$.post(url,data,callback,"json")}},getMainContainer:function(){var sectionIndex;return console.warn("deprecated, use section instead"),context.section||(sectionIndex=$(".section-container").tabs("options","selected"),$(".content-panel").eq(sectionIndex).find(".content-block")),$("#panel-"+context.section+" .content-block")},getMainContainerSelector:function($tabs){console.warn("deprecated, use section instead");var $container=this.getMainContainer();return!!(
$container&&0<$container.length)&&$container.selector},selectTabByName:function(name){console.warn("deprecated, use section instead"),$("#"+name).click()},getTabIndexByName:function(name){console.warn("deprecated, use section instead");for(var elts=$("div#tabs ul.ui-tabs-nav li a"),i=0;i<elts.length;){var elt=elts[i];if(elt&&elt.id&&elt.id===name)return i;i++}return-1},openTab:function(title,url,open){console.warn("deprecated, use section instead"),open=open||!0;var idx=this.getTabIndexByUrl(url),$tabs=$("#tabs");-1==idx&&($tabs.tabs("add",url,title),idx=$tabs.tabs("length")-1),open&&$tabs.tabs("select",idx)},getTabIndexByUrl:function(url){console.warn(
"deprecated, use section instead");var elts=$("#tabs ul.ui-tabs-nav li a"),i=0,ret=-1;return elts.each(function(){var href=$.data(this,"href.tabs");url!==href?i++:ret=i}),ret},closeTab:function(index){console.warn("deprecated, use section instead"),-1<index&&$("#tabs").tabs("remove",index)},updateTabUrl:function(tabObj,tabName,url){console.warn("deprecated, use section instead");var index=this.getTabIndexByName(tabName);tabObj.tabs("url",index,url),tabObj.tabs("enable",index)},loading:function(){console.warn("deprecated, this should be automated"),$(window).on("click",function(e){return e.stopPropagation(),e.preventDefault(),!1}),loadingBar.start()},
loaded:function(){console.warn("deprecated, this should be automated"),$(window).off("click"),loadingBar.stop()},_load:function(selector,url,data){url=url||"",data?data.nc=(new Date).getTime():data={nc:(new Date).getTime()},$(selector).hide().empty().show(),-1===url.indexOf("?")?$(selector).load(url,data):(url+="&"+$.param(data),$(selector).load(url))},_href:function(ref){return-1<ref.indexOf("?")?ref+"&nc="+(new Date).getTime():ref+"?nc="+(new Date).getTime()},_autoFx:function(){console.warn("deprecated"),setTimeout(function(){$(".auto-highlight").effect("highlight",{color:"#9FC9FF"},2500)},1e3),setTimeout(function(){$(".auto-hide").fadeOut("slow")},3e3),
setTimeout(function(){$(".auto-slide").slideUp(1500)},11e3)},textCutter:function(selector,maxLength){console.warn("deprecated, use css instead"),maxLength||(maxLength=100),$(selector).each(function(){$(this).text().length>maxLength&&!$(this).hasClass("text-cutted")&&($(this).prop("title",$(this).text()),$(this).css("cursor","pointer"),$(this).html($(this).text().substring(0,maxLength)+"[...<img src='"+context.taobase_www+"img/bullet_add.png' />]"),$(this).addClass("text-cutted"))})},createMessage:function(message){console.warn("deprecated, use feedback instead"),$("#info-box").length?$("#info-box").html(message).show():$("body").append(
"<div id='info-box' class='ui-widget-header ui-corner-all auto-slide' >"+message+"</div>"),this._autoFx()},createErrorMessage:function(message){this.createMessage(message),$("#info-box").addClass("ui-state-error")},createInfoMessage:function(message){this.createMessage(message),$("#info-box").removeClass("ui-state-error")},isFlashPluginEnabled:function(){return void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&!1!==new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")},loadCss:function(url){console.warn("deprecated");var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",
link.href=url,document.getElementsByTagName("head")[0].appendChild(link)},_url:function(action,controller,extension,params){var url;if("string"!=typeof action||"string"!=typeof controller||"string"!=typeof extension)throw new TypeError("All parts are required to build an URL");return url=context.root_url+extension+"/"+controller+"/"+action,_.isString(params)?url+="?"+params:_.isPlainObject(params)&&(url+="?"+$.param(params)),url}}}),define("ui/lock",["jquery","lodash","i18n","tpl!ui/lock/lock","helpers","ui/feedback"],function($,_,__,tpl,helpers,feedback){"use strict";var $lockBox,currents=[],categories={hasLock:"info",locked:"error"},states={
created:"created",displayed:"displayed",closed:"closed"},defaultOptions={msg:__("This resource is locked"),releaseUrl:helpers._url("release","Lock","tao"),commitUrl:helpers._url("commitResource","History","taoRevision")};var lockApi={level:null,category:null,message:function(category,msg,options){return category&&_.contains(_.keys(categories),category)||(category="hasLock"),this.setState(states.created),this.category=category,this.level=_.result(categories,this.category),this.options=_.defaults(options||{},defaultOptions),this.content=tpl({level:this.level,msg:msg}),this._trigger("create"),this},hasLock:function(msg,options){return this.message("hasLock",msg
,options).open()},locked:function(msg,options){return this.message("locked",msg,options).open()},open:function(){return this._trigger("open"),this.display(),this},close:function(){this.isInState(states.displayed)&&(this.setState(states.closed),$("#"+this.id).remove(),this._trigger("close"),_.remove(currents,{_state:states.closed}))},display:function(){var self=this;return self.content&&(self.setState(states.displayed),$(self.content).attr("id",self.id).appendTo(self._container),self._trigger("display"),void 0===this.options.uri?($(".release",self._container).hide(),$(".check-in",self._container).hide()):($(".release",self._container).on("click",function(){
self.release()}),$(".check-in",self._container).on("click",function(){self.commit()}))),self},release:function(){var self=this;return""!==self.options.releaseUrl?$.ajax({url:self.options.releaseUrl,type:"POST",data:{uri:self.options.uri},dataType:"json",success:function(response){response.success?self._trigger("released",response):self._trigger("failed",response)},error:function(){self._trigger("failed")}}):self._trigger("failed"),this},commit:function(){var self=this;return""!==self.options.commitUrl?($(".message-container",self._container).slideToggle(),$(".commit",self._container).off("click").on("click",function(){var message=$(".message",self._container
).val();""!==message?$.ajax({url:self.options.commitUrl,type:"POST",data:{id:self.options.uri,message:message},dataType:"json",success:function(response){response.success?self._trigger("committed",response):self._trigger("failed",response)},error:function(){self._trigger("failed")}}):self._trigger("failed",{message:__("Please give a message to your commit")})})):self._trigger("failed"),this},register:function(){var msg=this._container.data("msg")||defaultOptions.msg,id=this._container.data("id");return this.message("hasLock",msg,{uri:id,released:function(response){feedback().success(response.message),this.close()},committed:function(response){feedback(
).success(response.commitMessage),this.close()},failed:function(response){void 0!==response&&void 0!==response.message?feedback().error(response.message):feedback().error("Unknown Error")}}).open()},_trigger:function(eventName,data){this._container.trigger(eventName+".lock",[this]),_.isFunction(this.options[eventName])&&this.options[eventName].call(this,data)}},lockState={_state:null,isInState:function(verify){return _.isString(verify)&&(verify=[verify]),_.contains(verify,this._state)},setState:function(state){if(!_.contains(states,state))throw new Error("Unkown state "+state);this._state=state}};return function($container){var _container;if($container||(
$lockBox=$("#lock-box")),!(_container=$container||$lockBox)||!_container.length)throw new Error("The lock needs to belong to an existing container");_.forEach(currents,function(lockRef){null!==lockRef&&lockRef._container.get(0)===_container.get(0)&&lockRef.close()});var receiver,provider,lk=_.extend({id:"lock-"+(currents.length+1),_container:_container},lockState);return currents.push(lk),receiver=lk,_(provider=lockApi).functions().forEach(function(methodName){receiver[methodName]=function(){return provider[methodName].apply(receiver,arguments)}}),receiver}}),define("tpl!ui/login/tpl/login",["handlebars"],function(hb){return hb.template(function(Handlebars,
depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;function program3(depth0,data){return' autocomplete="off"'}function program5(depth0,data){var stack1,buffer="";return buffer+='\n                <div class="form-error">\n                    '+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.fieldMessages)||!1===stack1?stack1:stack1.login)===functionType?stack1.apply(depth0):stack1)+"\n                </div>\n            "}
return buffer+='<div class="xhtml_form login-component">\n    <form action="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" method="post" id="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" name="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+'">\n        <input type="hidden" class="global" name="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'_sent" value="1">\n        ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.message)||!1===stack1?stack1:stack1.error,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,buffer="";return buffer+='\n            <div class="xhtml_form_error">'+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.message
)||!1===stack1?stack1:stack1.error)===functionType?stack1.apply(depth0):stack1)+"</div>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        <div>\n            <label class="form_desc" for="login">\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Login",options):helperMissing.call(depth0,"__","Login",options)))+'\n            </label><input type="text" name="login" id="login" autofocus="autofocus"',((stack1=helpers.if.call(depth0,depth0&&depth0.disableAutocomplete,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+=">\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.fieldMessages)||!1===stack1?stack1:stack1.login,{hash:{},inverse:this.noop,fn:this.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n        <div>\n            <label class="form_desc" for="password">\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Password",options):helperMissing.call(depth0,"__","Password",options)))+'\n            </label><input type="password" name="password" id="password"',((stack1=helpers.if.call(depth0,
depth0&&depth0.disableAutocomplete,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.fieldMessages)||!1===stack1?stack1:stack1.password,{hash:{},inverse:this.noop,fn:this.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n        <div class="form-toolbar"><input type="submit" id="connect" name="connect" disabled="disabled" class="disabled" value="Log in"></div>\n    </form>\n</div>'})}),define("tpl!ui/login/tpl/fakeForm",["handlebars"],function(hb){return hb.template(
function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="";return buffer+='<div class="form loginForm fakeForm">',((stack1=(helper=(helpers=this.merge(helpers,Handlebars.helpers)).form)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.form)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>"})}),define("tpl!ui/login/tpl/passwordReveal",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer=""
;return buffer+='<span class="viewable-hiddenbox">',((stack1=(helper=(helpers=this.merge(helpers,Handlebars.helpers)).elements)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.elements)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+='<span class="viewable-hiddenbox-toggle" tabindex="0"><span class="icon-preview"></span><span class="icon-eye-slash" style="display: none;"></span></span></span>'})}),define("ui/login/login",["jquery","lodash","i18n","ui/component","lib/uuid","ui/feedback","util/url","tpl!ui/login/tpl/login","tpl!ui/login/tpl/fakeForm","tpl!ui/login/tpl/passwordReveal"],
function($,_,__,component,uuid,feedback,urlUtil,loginTpl,fakeFormTpl,pwdRevealTpl){"use strict";var _defaultConfig={disableAutocomplete:!1,enablePasswordReveal:!1,message:{error:"",info:null},fieldMessages:{},name:"loginForm",url:urlUtil.route("login","Main","tao")};return function($container,config){var loginComponent=component({isAutocompleteDisabled:function(){return this.config.disableAutocomplete},isPasswordRevealEnabled:function(){return this.config.enablePasswordReveal},getMessages:function(){return this.config.message},getFieldMessages:function(){return this.config.fieldMessages},createFakeForm:function(){var $fakeFormDom=this.getElement().clone()
;return $fakeFormDom.html(fakeFormTpl({form:$fakeFormDom.find("form").html()}))},getRealForm:function(){return this.getElement().find("form")},getFakeForm:function(){return this.getContainer().find("div.fakeForm")},getForm:function(){return this.isAutocompleteDisabled()?this.getFakeForm():this.getRealForm()},manipulateFormDom:function(){var $form,$pwdInput,$pwdLabel;$pwdInput=($form=this.getForm()).find("input[type=password]"),$pwdLabel=$form.find("label[for="+$pwdInput.attr("name")+"]"),$pwdInput.replaceWith(pwdRevealTpl({elements:$pwdLabel[0].outerHTML+$pwdInput[0].outerHTML})),$pwdLabel.remove()},attachPasswordRevealEvents:function(){var $form,$pwdInput,
$inputToggle,$viewIcon,$hideIcon,self=this,autoHide=function(event){event.target.isSameNode($pwdInput)||event.target.isSameNode($hideIcon[0])||event.target.isSameNode($inputToggle[0])||hide()},show=function(){$viewIcon.hide(),$hideIcon.show(),$pwdInput.type="text",$pwdInput.autocomplete="off",window.addEventListener("mousedown",autoHide),$pwdInput.focus()},hide=function(){$hideIcon.hide(),$viewIcon.show(),$pwdInput.type="password",$pwdInput.autocomplete=self.isAutocompleteDisabled()?"off":"on",window.removeEventListener("mousedown",autoHide)};$form=this.getForm(),$pwdInput=$form.find("input[type=password]")[0],$inputToggle=$form.find(
".viewable-hiddenbox-toggle"),$viewIcon=$form.find("span.icon-preview"),$hideIcon=$form.find("span.icon-eye-slash"),hide(),$inputToggle.on("click",function(){"password"===$pwdInput.type?show():hide()}),$inputToggle.on("keyup",function(e){" "===e.key&&("password"===$pwdInput.type?show():hide())})},displayMessages:function(messages){var $fields=this.getForm().find(":input");!messages.error&&this.getForm().find(".form-error").length&&(messages.error=__("All fields are required")),_.forEach(messages,function(message,level){message&&(feedback().message(level,message).open(),$fields.addClass(level))})}},_defaultConfig).setTemplate(loginTpl).on("init",function(){
this.render($container)}).on("render",function(){var $fakeForm,$loginForm=this.getRealForm(),self=this,submitForm=function(){$fakeForm.find(":input").each(function(){var $field=$(this);$loginForm.find('input[name="'+$field.attr("name")+'"]').val($field.val())}),self.trigger("submit"),$loginForm.submit()};this.isAutocompleteDisabled()&&($fakeForm=this.createFakeForm(),this.hide(),this.getElement().find("form").attr("id","loginForm"),this.getContainer().prepend($fakeForm),$fakeForm.find('input[type="submit"], button[type="submit"]').off("click").on("click",function(e){e.preventDefault(),submitForm()}),$fakeForm.on("keypress",function(e){"Enter"===e.key&&(
e.preventDefault(),submitForm())})),this.isPasswordRevealEnabled()&&(this.manipulateFormDom(),this.attachPasswordRevealEvents()),this.getForm().find("[name=connect]").removeAttr("disabled").removeClass("disabled"),this.displayMessages(this.getMessages())});return _.defer(function(){loginComponent.init(config)}),loginComponent}}),define("ui/maths/calculator/core/areaBroker",["lodash","core/areaBroker"],function(_,areaBroker){"use strict";return _.partial(areaBroker,["screen","input","keyboard"])}),define("tpl!ui/maths/calculator/core/tpl/historyUp",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<svg class="arrow-up" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><path d="M16 1l-15 15h9v16h12v-16h9z"></path></svg>'})}),define("tpl!ui/maths/calculator/core/tpl/historyDown",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},
'<svg class="arrow-down" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><path d="M16 31l15-15h-9v-16h-12v16h-9z"></path></svg>'})}),define("tpl!ui/maths/calculator/core/tpl/backspace",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},
'<svg class="backspace-outline" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M19 21H9c-1.436 0-3.145-.88-3.977-2.046l-2.619-3.667c-.629-.881-1.157-1.621-1.188-1.661-.246-.344-.249-.894-.008-1.241.018-.025.561-.783 1.204-1.686L5.02 7.046C5.855 5.879 7.566 5 9 5h10c1.654 0 3 1.346 3 3v10c0 1.654-1.346 3-3 3zM3.229 12.999l.806 1.125 2.618 3.667C7.104 18.424 8.223 19 9.001 19h10c.552 0 1-.45 1-1.001V8c0-.551-.448-1-1-1h-10c-.776 0-1.897.576-2.351 1.209l-2.608 3.652-.813 1.138z"/><path d="M13.707 13l2.646-2.646a.502.502 0 0 0 0-.707.502.502 0 0 0-.707 0L13 12.293l-2.646-2.646a.5.5 0 0 0-.707.707L12.293 13l-2.646 2.646a.5.5 0 0 0 .707.708L13 13.707l2.646 2.646a.5.5 0 1 0 .708-.706L13.707 13z"/></svg>'
})}),define("ui/maths/calculator/core/labels",["i18n","tpl!ui/maths/calculator/core/tpl/historyUp","tpl!ui/maths/calculator/core/tpl/historyDown","tpl!ui/maths/calculator/core/tpl/backspace"],function(__,historyUpTpl,historyDownTpl,backspaceTpl){"use strict";return{NUM0:"0",NUM1:"1",NUM2:"2",NUM3:"3",NUM4:"4",NUM5:"5",NUM6:"6",NUM7:"7",NUM8:"8",NUM9:"9",DOT:".",EXP10:"e",POW10:"10<sup>x</sup>",LPAR:"(",RPAR:")",COMMA:",",SPACER:"",SUB:"-",ADD:"+",POS:"",NEG:"",MUL:"",DIV:"",MOD:__("modulo"),POW:"^",POW2:"x<sup>2</sup>",POW3:"x<sup>3</sup>",POWY:"x<sup>y</sup>",POWMINUSONE:"x<sup>1</sup>",FAC:"!",ASSIGN:"=",ANS:__("Ans"),PI:"",E:"e",NAN:__("Error"),
INFINITY:__("Infinity"),ERROR:__("Syntax error"),EXP:__("exp"),EXPX:"e<sup>x</sup>",SQRT:"",CBRT:"<sup>3</sup>",NTHRT:"<sup>y</sup>x",FLOOR:__("floor"),CEIL:__("ceil"),ROUND:__("round"),TRUNC:__("trunc"),SIN:__("sin"),COS:__("cos"),TAN:__("tan"),ASIN:__("sin")+"<sup>1</sup>",ACOS:__("cos")+"<sup>1</sup>",ATAN:__("tan")+"<sup>1</sup>",SINH:__("sinh"),COSH:__("cosh"),TANH:__("tanh"),ASINH:__("sinh")+"<sup>1</sup>",ACOSH:__("cosh")+"<sup>1</sup>",ATANH:__("tanh")+"<sup>1</sup>",LN:__("ln"),LOG:__("log")+"<sub>10</sub>",ABS:__("abs"),RAND:__("random"),CLEAR:__("C"),CLEARALL:__("AC"),EXECUTE:"=",HISTORYUP:historyUpTpl(),HISTORYDOWN:historyDownTpl(),
BACKSPACE:backspaceTpl(),DEGREE:__("Deg"),RADIAN:__("Rad"),SIGN:"&plusmn;"}}),define("ui/maths/calculator/core/terms",["i18n","ui/maths/calculator/core/labels"],function(__,labels){"use strict";return{NUM0:{label:labels.NUM0,value:"0",type:"digit",description:__("Digit 0"),exponent:null},NUM1:{label:labels.NUM1,value:"1",type:"digit",description:__("Digit 1"),exponent:null},NUM2:{label:labels.NUM2,value:"2",type:"digit",description:__("Digit 2"),exponent:null},NUM3:{label:labels.NUM3,value:"3",type:"digit",description:__("Digit 3"),exponent:null},NUM4:{label:labels.NUM4,value:"4",type:"digit",description:__("Digit 4"),exponent:null},NUM5:{label:labels.NUM5,
value:"5",type:"digit",description:__("Digit 5"),exponent:null},NUM6:{label:labels.NUM6,value:"6",type:"digit",description:__("Digit 6"),exponent:null},NUM7:{label:labels.NUM7,value:"7",type:"digit",description:__("Digit 7"),exponent:null},NUM8:{label:labels.NUM8,value:"8",type:"digit",description:__("Digit 8"),exponent:null},NUM9:{label:labels.NUM9,value:"9",type:"digit",description:__("Digit 9"),exponent:null},DOT:{label:labels.DOT,value:".",type:"digit",description:__("Dot"),exponent:null},EXP10:{label:labels.EXP10,value:"e",type:"digit",description:__("Power of 10"),exponent:"right"},LPAR:{label:labels.LPAR,value:"(",type:"aggregator",description:__(
"Left parenthesis"),exponent:null},RPAR:{label:labels.RPAR,value:")",type:"aggregator",description:__("Right parenthesis"),exponent:null},COMMA:{label:labels.COMMA,value:",",type:"separator",description:__("Arguments separator"),exponent:null},SUB:{label:labels.SUB,value:"-",type:"operator",description:__("Binary operator -"),exponent:null},NEG:{label:labels.NEG,value:labels.NEG,type:"operator",description:__("Unary operator -"),exponent:null},ADD:{label:labels.ADD,value:"+",type:"operator",description:__("Binary operator +"),exponent:null},POS:{label:labels.POS,value:labels.POS,type:"operator",description:__("Unary operator +"),exponent:null},MUL:{
label:labels.MUL,value:"*",type:"operator",description:__("Binary operator *"),exponent:null},DIV:{label:labels.DIV,value:"/",type:"operator",description:__("Binary operator /"),exponent:null},MOD:{label:labels.MOD,value:"%",type:"operator",description:__("Binary operator modulo"),exponent:null},POW:{label:labels.POW,value:"^",type:"operator",description:__("Power of"),exponent:"right"},FAC:{label:labels.FAC,value:"!",type:"operator",description:__("Factorial"),exponent:null},ASSIGN:{label:labels.ASSIGN,value:"=",type:"operator",description:__("Assign"),exponent:null},ANS:{label:labels.ANS,value:"ans",type:"variable",description:__("Last result"),
exponent:null},PI:{label:labels.PI,value:"PI",type:"constant",description:__("Value of PI"),exponent:null},E:{label:labels.E,value:"E",type:"constant",description:__("Value of E"),exponent:null},NAN:{label:labels.NAN,value:"NaN",type:"error",description:__("Error in value"),exponent:null},INFINITY:{label:labels.INFINITY,value:"Infinity",type:"error",description:__("Error in result"),exponent:null},ERROR:{label:labels.ERROR,value:"#",type:"error",description:__("Error in syntax"),exponent:null},EXP:{label:labels.EXP,value:"exp",type:"function",description:__("Exponent"),exponent:"right"},SQRT:{label:labels.SQRT,value:"sqrt",type:"function",description:__(
"Square root"),exponent:null},CBRT:{label:labels.CBRT,value:"cbrt",type:"function",description:__("Cube root"),exponent:null},NTHRT:{label:labels.SQRT,value:"nthrt",type:"function",description:__("Nth root"),exponent:"left"},FLOOR:{label:labels.FLOOR,value:"floor",type:"function",description:__("Round to lower whole number"),exponent:null},CEIL:{label:labels.CEIL,value:"ceil",type:"function",description:__("Round to upper whole number"),exponent:null},ROUND:{label:labels.ROUND,value:"round",type:"function",description:__("Round to closest whole number"),exponent:null},TRUNC:{label:labels.TRUNC,value:"trunc",type:"function",description:__("Whole number part"
),exponent:null},SIN:{label:labels.SIN,value:"sin",type:"function",description:__("Sine"),exponent:null},COS:{label:labels.COS,value:"cos",type:"function",description:__("Cosine"),exponent:null},TAN:{label:labels.TAN,value:"tan",type:"function",description:__("Tangent"),exponent:null},ASIN:{label:labels.ASIN,value:"asin",type:"function",description:__("Arc sine"),exponent:null},ACOS:{label:labels.ACOS,value:"acos",type:"function",description:__("Arc cosine"),exponent:null},ATAN:{label:labels.ATAN,value:"atan",type:"function",description:__("Arc tangent"),exponent:null},SINH:{label:labels.SINH,value:"sinh",type:"function",description:__("Hyperbolic sine"),
exponent:null},COSH:{label:labels.COSH,value:"cosh",type:"function",description:__("Hyperbolic cosine"),exponent:null},TANH:{label:labels.TANH,value:"tanh",type:"function",description:__("Hyperbolic tangent"),exponent:null},ASINH:{label:labels.ASINH,value:"asinh",type:"function",description:__("Hyperbolic arc sine"),exponent:null},ACOSH:{label:labels.ACOSH,value:"acosh",type:"function",description:__("Hyperbolic arc cosine"),exponent:null},ATANH:{label:labels.ATANH,value:"atanh",type:"function",description:__("Hyperbolic arc tangent"),exponent:null},LN:{label:labels.LN,value:"ln",type:"function",description:__("Natural logarithm"),exponent:null},LOG:{
label:labels.LN,value:"log",type:"function",description:__("Natural logarithm"),exponent:null},LG:{label:labels.LOG,value:"lg",type:"function",description:__("Base-10 logarithm"),exponent:null},LOG10:{label:labels.LOG,value:"log10",type:"function",description:__("Base-10 logarithm"),exponent:null},ABS:{label:labels.ABS,value:"abs",type:"function",description:__("Absolute value"),exponent:null},RAND:{label:labels.RAND,value:"random",type:"function",description:__("Random value"),exponent:null}}}),define("tpl!ui/maths/calculator/core/tpl/terms",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4
,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,self=this,functionType="function",escapeExpression=this.escapeExpression;function program2(depth0,data){return"<sup>"}function program4(depth0,data){return" term-elide"}function program6(depth0,data){return"</sup>"}return(stack1=helpers.each.call(depth0,depth0,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,buffer="";return((stack1=helpers.each.call(depth0,depth0&&depth0.startExponent,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='<span class="term term-',stack1=(
helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.elide,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" data-value="',stack1=(helper=helpers.value)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.value)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-token="',stack1=(helper=helpers.token)?helper.call(depth0,{hash:{},data:data}
):typeof(helper=depth0&&depth0.token)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-type="',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',((stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</span>",((stack1=helpers.each.call(depth0,depth0&&depth0.endExponent,{hash:{},inverse:self.noop,
fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer},data),data:data}))||0===stack1?stack1:""})}),define("ui/maths/calculator/core/tokens",["lodash","ui/maths/calculator/core/terms","tpl!ui/maths/calculator/core/tpl/terms"],function(_,registeredTerms,termsTpl){"use strict";var rePrefixedTerm=/^@[a-zA-Z_]\w*$/,reErrorValue=/(NaN|[+-]?Infinity)/,reAnsVar=new RegExp("\\b"+registeredTerms.ANS.value+"\\b","g"),signOperators=["NEG","POS","SUB","ADD"],continueExponent=["POW","NTHRT"],tokensHelper={getType:function(token){var type,term;return"string"!=typeof token?(type=token&&token.type||null,(term=registeredTerms[type]
)&&term.type||type):token},isDigit:function(type){return"digit"===tokensHelper.getType(type)},isOperator:function(type){return"operator"===tokensHelper.getType(type)},isOperand:function(type){return"operator"!==(type=tokensHelper.getType(type))&&"aggregator"!==type&&"separator"!==type},isValue:function(type){return"digit"===(type=tokensHelper.getType(type))||"constant"===type||"variable"===type||"term"===type||"error"===type},isAggregator:function(type){return"aggregator"===tokensHelper.getType(type)},isError:function(type){return"error"===tokensHelper.getType(type)},isConstant:function(type){return"constant"===tokensHelper.getType(type)},
isVariable:function(type){return"variable"===(type=tokensHelper.getType(type))||"term"===type},isFunction:function(type){return"function"===tokensHelper.getType(type)},isIdentifier:function(type){return"constant"===(type=tokensHelper.getType(type))||"variable"===type||"term"===type||"function"===type||"error"===type},isSeparator:function(type){return"operator"===(type=tokensHelper.getType(type))||"aggregator"===type||"separator"===type},isModifier:function(type){return"operator"===(type=tokensHelper.getType(type))||"function"===type},stringValue:function(expression){var type=typeof expression;return"string"!==type&&(
expression&&void 0!==expression.result?expression=expression.result:expression&&void 0!==expression.value?expression=expression.value:"object"!==type&&"undefined"!==type&&null!==expression||(expression=""),expression=String(expression)),expression},containsError:function(expression){return reErrorValue.test(tokensHelper.stringValue(expression))},renderLastResult:function(expression,value){return tokensHelper.stringValue(expression).replace(reAnsVar,tokensHelper.stringValue(value))},renderSign:function(expression){return tokensHelper.stringValue(expression).replace(registeredTerms.SUB.value,registeredTerms.NEG.label).replace(registeredTerms.ADD.value,
registeredTerms.POS.label)},render:function(tokens,variables){var previous,exponents=[],terms=[];function toSignOperator(term,token){previous&&!tokensHelper.isModifier(previous.type)&&"LPAR"!==previous.token||(term.label=registeredTerms[token].label,term.token=token)}return variables=variables||{},_.forEach(tokens,function(token,index){var registeredTerm=registeredTerms[token.type],term={type:token.type,token:token.type,value:token.value,label:token.value,description:token.value,exponent:null,startExponent:[],endExponent:[],prefixed:rePrefixedTerm.test(token.value),elide:!1};registeredTerm?(_.merge(term,registeredTerm),
"ANS"===term.token&&void 0!==variables[term.value]&&(term.label=tokensHelper.renderSign(String(variables.ans||"0")))):"term"===term.token&&(void 0!==variables[term.value]?term.type="variable":term.type="unknown"),"SUB"===term.token?toSignOperator(term,"NEG"):"ADD"===term.token&&toSignOperator(term,"POS"),terms.push(term),term.exponent&&exponents.push(index),previous=term}),_.forEach(exponents,function(index){var term=terms[index];"left"===term.exponent&&0<index?function(index,terms){var parenthesis=0,next=terms[index],term=terms[--index];function nextTerm(){next=term,term=terms[--index]}if(term&&(tokensHelper.isOperand(term.type)||"RPAR"===term.token)){if(
term.endExponent.push(term.endExponent.length),"RPAR"===term.token){for(parenthesis++;0<index&&0<parenthesis;)nextTerm(),"RPAR"===term.token?parenthesis++:"LPAR"===term.token&&parenthesis--;0<index&&tokensHelper.isFunction(terms[index-1])&&!terms[index-1].prefixed&&nextTerm()}else if(tokensHelper.isDigit(term.type)){for(;index&&tokensHelper.isDigit(term.type);)nextTerm();tokensHelper.isDigit(term.type)||(term=next)}term.startExponent.push(term.startExponent.length)}}(index,terms):"right"===term.exponent&&index<terms.length-1&&function(index,terms){var shouldContinue,last=terms.length-1,parenthesis=0,startAt=index,previous=terms[index],term=terms[++index]
;function nextTerm(){previous=term,term=terms[++index]}function previousTerm(){term=previous,previous=terms[--index]}if(term&&(tokensHelper.isOperand(term.type)||"LPAR"===term.token||0<=signOperators.indexOf(term.token))){term.startExponent.push(term.startExponent.length);do{for(shouldContinue=!1;index<last&&(tokensHelper.isFunction(term.type)||0<=signOperators.indexOf(term.token));)nextTerm();if(term||previousTerm(),"LPAR"===term.token)for(parenthesis++;index<last&&0<parenthesis;)nextTerm(),"LPAR"===term.token?parenthesis++:"RPAR"===term.token&&parenthesis--;else if(tokensHelper.isDigit(term.type)){for(;index<last&&tokensHelper.isDigit(term.type);)nextTerm(
);term&&tokensHelper.isDigit(term.type)||previousTerm()}for(;index<last&&"FAC"===terms[index+1].token;)nextTerm();index<last&&0<=continueExponent.indexOf(terms[index+1].token)&&(nextTerm(),nextTerm(),shouldContinue=!0)}while(shouldContinue);term.endExponent.push(term.endExponent.length),0<startAt&&startAt<last&&"POW"===terms[startAt].token&&terms[startAt+1].startExponent.length&&(terms[startAt].elide=!0)}}(index,terms)}),termsTpl(terms)}};return tokensHelper}),function(root,factory){"function"==typeof define&&define.amd?define("lib/moo/moo",[],factory):"object"==typeof module&&module.exports?module.exports=factory():root.moo=factory()}(this,function(){
"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,hasSticky="boolean"==typeof(new RegExp).sticky;function isRegExp(o){return o&&"[object RegExp]"===toString.call(o)}function isObject(o){return o&&"object"==typeof o&&!isRegExp(o)&&!Array.isArray(o)}function reCapture(s){return"("+s+")"}function reUnion(regexps){return regexps.length?"(?:"+regexps.map(function(s){return"(?:"+s+")"}).join("|")+")":"(?!)"}function regexpOrLiteral(obj){if("string"==typeof obj)return"(?:"+obj.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")";if(isRegExp(obj)){if(obj.ignoreCase)throw new Error("RegExp /i flag not allowed");if(obj.global
)throw new Error("RegExp /g flag is implied");if(obj.sticky)throw new Error("RegExp /y flag is implied");if(obj.multiline)throw new Error("RegExp /m flag is implied");if(obj.unicode)throw new Error("RegExp /u flag is not allowed");return obj.source}throw new Error("Not a pattern: "+obj)}function ruleOptions(type,obj){if(isObject(obj)||(obj={match:obj}),obj.include)throw new Error("Matching rules cannot also include states");var options={defaultType:type,lineBreaks:!!obj.error||!!obj.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var key in obj)hasOwnProperty.call(obj,key)&&(options[key]=obj[key]);if(
"string"==typeof options.type&&type!==options.type)throw new Error("Type transform cannot be a string (type '"+options.type+"' for token '"+type+"')");var match=options.match;return options.match=Array.isArray(match)?match:match?[match]:[],options.match.sort(function(a,b){return isRegExp(a)&&isRegExp(b)?0:isRegExp(b)?-1:isRegExp(a)?1:b.length-a.length}),options}function toRules(spec){return Array.isArray(spec)?function(array){for(var result=[],i=0;i<array.length;i++){var obj=array[i];if(obj.include)for(var include=[].concat(obj.include),j=0;j<include.length;j++)result.push({include:include[j]});else{if(!obj.type)throw new Error(
"Rule has no type: "+JSON.stringify(obj));result.push(ruleOptions(obj.type,obj))}}return result}(spec):function(object){for(var keys=Object.getOwnPropertyNames(object),result=[],i=0;i<keys.length;i++){var key=keys[i],thing=object[key],rules=[].concat(thing);if("include"!==key){var match=[];rules.forEach(function(rule){isObject(rule)?(match.length&&result.push(ruleOptions(key,match)),result.push(ruleOptions(key,rule)),match=[]):match.push(rule)}),match.length&&result.push(ruleOptions(key,match))}else for(var j=0;j<rules.length;j++)result.push({include:rules[j]})}return result}(spec)}var defaultErrorRule=ruleOptions("error",{lineBreaks:!0,shouldThrow:!0})
;function compileRules(rules,hasStates){for(var errorRule=null,fast=Object.create(null),fastAllowed=!0,groups=[],parts=[],i=0;i<rules.length;i++)rules[i].fallback&&(fastAllowed=!1);for(i=0;i<rules.length;i++){var options=rules[i];if(options.include)throw new Error("Inheritance is not allowed in stateless lexers");if(options.error||options.fallback){if(errorRule)throw!options.fallback==!errorRule.fallback?new Error("Multiple "+(options.fallback?"fallback":"error")+" rules not allowed (for token '"+options.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+options.defaultType+"')");errorRule=options}var match=options.match;if(
fastAllowed)for(;match.length&&"string"==typeof match[0]&&1===match[0].length;){fast[match.shift().charCodeAt(0)]=options}if(options.pop||options.push||options.next){if(!hasStates)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+options.defaultType+"')");if(options.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+options.defaultType+"')")}if(0!==match.length){fastAllowed=!1,groups.push(options);var pat=reUnion(match.map(regexpOrLiteral)),regexp=new RegExp(pat);if(regexp.test(""))throw new Error("RegExp matches empty string: "+regexp);if(0<new RegExp("|"+pat).exec(""
).length-1)throw new Error("RegExp has capture groups: "+regexp+"\nUse (?:  ) instead");if(!options.lineBreaks&&regexp.test("\n"))throw new Error("Rule should declare lineBreaks: "+regexp);parts.push(reCapture(pat))}}var fallbackRule=errorRule&&errorRule.fallback,flags=hasSticky&&!fallbackRule?"ym":"gm",suffix=hasSticky||fallbackRule?"":"|";return{regexp:new RegExp(reUnion(parts)+suffix,flags),groups:groups,fast:fast,error:errorRule||defaultErrorRule}}function checkStateGroup(g,name,map){var state=g&&(g.push||g.next);if(state&&!map[state])throw new Error("Missing state '"+state+"' (in token '"+g.defaultType+"' of state '"+name+"')");if(g&&g.pop&&1!=+g.pop
)throw new Error("pop must be 1 (in token '"+g.defaultType+"' of state '"+name+"')")}var Lexer=function(states,state){this.startState=state,this.states=states,this.buffer="",this.stack=[],this.reset()};Lexer.prototype.reset=function(data,info){return this.buffer=data||"",this.index=0,this.line=info?info.line:1,this.col=info?info.col:1,this.queuedToken=info?info.queuedToken:null,this.queuedThrow=info?info.queuedThrow:null,this.setState(info?info.state:this.startState),this.stack=info&&info.stack?info.stack.slice():[],this},Lexer.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,
queuedThrow:this.queuedThrow}},Lexer.prototype.setState=function(state){if(state&&this.state!==state){this.state=state;var info=this.states[state];this.groups=info.groups,this.error=info.error,this.re=info.regexp,this.fast=info.fast}},Lexer.prototype.popState=function(){this.setState(this.stack.pop())},Lexer.prototype.pushState=function(state){this.stack.push(this.state),this.setState(state)};var eat=hasSticky?function(re,buffer){return re.exec(buffer)}:function(re,buffer){var match=re.exec(buffer);return 0===match[0].length?null:match};function tokenToString(){return this.value}if(Lexer.prototype._getGroup=function(match){for(
var groupCount=this.groups.length,i=0;i<groupCount;i++)if(void 0!==match[i+1])return this.groups[i];throw new Error("Cannot find token type for matched text")},Lexer.prototype.next=function(){var index=this.index;if(this.queuedGroup){var token=this._token(this.queuedGroup,this.queuedText,index);return this.queuedGroup=null,this.queuedText="",token}var buffer=this.buffer;if(index!==buffer.length){if(group=this.fast[buffer.charCodeAt(index)])return this._token(group,buffer.charAt(index),index);var re=this.re;re.lastIndex=index;var match=eat(re,buffer),error=this.error;if(null==match)return this._token(error,buffer.slice(index,buffer.length),index)
;var group=this._getGroup(match),text=match[0];return error.fallback&&match.index!==index?(this.queuedGroup=group,this.queuedText=text,this._token(error,buffer.slice(index,match.index),index)):this._token(group,text,index)}},Lexer.prototype._token=function(group,text,offset){var lineBreaks=0;if(group.lineBreaks){var matchNL=/\n/g,nl=1;if("\n"===text)lineBreaks=1;else for(;matchNL.exec(text);)lineBreaks++,nl=matchNL.lastIndex}var token={type:"function"==typeof group.type&&group.type(text)||group.defaultType,value:"function"==typeof group.value?group.value(text):text,text:text,toString:tokenToString,offset:offset,lineBreaks:lineBreaks,line:this.line,
col:this.col},size=text.length;if(this.index+=size,this.line+=lineBreaks,0!==lineBreaks?this.col=size-nl+1:this.col+=size,group.shouldThrow)throw new Error(this.formatError(token,"invalid syntax"));return group.pop?this.popState():group.push?this.pushState(group.push):group.next&&this.setState(group.next),token},"undefined"!=typeof Symbol&&Symbol.iterator){var LexerIterator=function(lexer){this.lexer=lexer};LexerIterator.prototype.next=function(){var token=this.lexer.next();return{value:token,done:!token}},LexerIterator.prototype[Symbol.iterator]=function(){return this},Lexer.prototype[Symbol.iterator]=function(){return new LexerIterator(this)}}
return Lexer.prototype.formatError=function(token,message){var value=token.text,index=token.offset,eol=token.lineBreaks?value.indexOf("\n"):value.length,start=Math.max(0,index-token.col+1),firstLine=this.buffer.substring(start,index+eol);return message+=" at line "+token.line+" col "+token.col+":\n\n",message+="  "+firstLine+"\n",message+="  "+Array(token.col).join(" ")+"^"},Lexer.prototype.clone=function(){return new Lexer(this.states,this.state)},Lexer.prototype.has=function(tokenType){return!0},{compile:function(rules){var result=compileRules(toRules(rules));return new Lexer({start:result},"start")},states:function(states,start){
var all=states.$all?toRules(states.$all):[];delete states.$all;var keys=Object.getOwnPropertyNames(states);start||(start=keys[0]);for(var ruleMap=Object.create(null),i=0;i<keys.length;i++)ruleMap[key=keys[i]]=toRules(states[key]).concat(all);for(i=0;i<keys.length;i++)for(var rules=ruleMap[key=keys[i]],included=Object.create(null),j=0;j<rules.length;j++){var rule=rules[j];if(rule.include){var splice=[j,1];if(rule.include!==key&&!included[rule.include]){included[rule.include]=!0;var newRules=ruleMap[rule.include];if(!newRules)throw new Error("Cannot include nonexistent state '"+rule.include+"' (in state '"+key+"')");for(var k=0;k<newRules.length;k++){
var newRule=newRules[k];-1===rules.indexOf(newRule)&&splice.push(newRule)}}rules.splice.apply(rules,splice),j--}}var map=Object.create(null);for(i=0;i<keys.length;i++){var key;map[key=keys[i]]=compileRules(ruleMap[key],!0)}for(i=0;i<keys.length;i++){var name=keys[i],state=map[name],groups=state.groups;for(j=0;j<groups.length;j++)checkStateGroup(groups[j],name,map);var fastKeys=Object.getOwnPropertyNames(state.fast);for(j=0;j<fastKeys.length;j++)checkStateGroup(state.fast[fastKeys[j]],name,map)}return new Lexer(map,start)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(map){for(var reverseMap=Object.create(null),
byLength=Object.create(null),types=Object.getOwnPropertyNames(map),i=0;i<types.length;i++){var tokenType=types[i],item=map[tokenType];(Array.isArray(item)?item:[item]).forEach(function(keyword){if((byLength[keyword.length]=byLength[keyword.length]||[]).push(keyword),"string"!=typeof keyword)throw new Error("keyword must be string (in keyword '"+tokenType+"')");reverseMap[keyword]=tokenType})}function str(x){return JSON.stringify(x)}var source="";for(var length in source+="switch (value.length) {\n",byLength){var keywords=byLength[length];source+="case "+length+":\n",source+="switch (value) {\n",keywords.forEach(function(keyword){
var tokenType=reverseMap[keyword];source+="case "+str(keyword)+": return "+str(tokenType)+"\n"}),source+="}\n"}return source+="}\n",Function("value",source)}}}),define("ui/maths/calculator/core/tokenizer",["lodash","ui/maths/calculator/core/terms","ui/maths/calculator/core/tokens","lib/moo/moo"],function(_,registeredTerms,tokensHelper,moo){"use strict";var ignoredTokens={SPACE:{match:/\s+/,lineBreaks:!0}},reKeyword=/[a-zA-Z_]\w*/,rePrefixedKeyword=new RegExp("@"+reKeyword.source),reKeywordOnly=new RegExp("^"+reKeyword.source+"$"),keywords=_.pick(registeredTerms,filterKeyword),symbols=_.omit(registeredTerms,filterKeyword);function filterKeyword(term){
return term.value.match(reKeywordOnly)}return function(config){var keywordsTransform,lexer;return(config=config||{}).keywords=_.defaults(_.mapValues(keywords,"value"),config.keywords),config.symbols=_.defaults(_.mapValues(symbols,"value"),config.symbols),keywordsTransform=moo.keywords(config.keywords),lexer=moo.compile(_.defaults({},ignoredTokens,{prefixed:{match:rePrefixedKeyword,type:function(token){return keywordsTransform(token.substring(1))}},term:{match:reKeyword,type:keywordsTransform},syntaxError:moo.error},config.symbols)),{iterator:function(expression){return lexer.reset(tokensHelper.stringValue(expression)),function(){for(var term;(
term=lexer.next())&&ignoredTokens[term.type];);return term}},tokenize:function(expression){var term,terms=[];for(lexer.reset(tokensHelper.stringValue(expression));(term=lexer.next())&&!ignoredTokens[term.type]&&terms.push(term),term;);return terms}}}}),function(globalScope){"use strict";var Decimal,inexact,noConflict,quadrant,EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",
LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058"
,
PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789"
,DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P={
name:"[object Decimal]"};function digitsToString(d){var i,k,ws,indexOfLastWord=d.length-1,str="",w=d[0];if(0<indexOfLastWord){for(str+=w,i=1;i<indexOfLastWord;i++)ws=d[i]+"",(k=LOG_BASE-ws.length)&&(str+=getZeroString(k)),str+=ws;w=d[i],(k=LOG_BASE-(ws=w+"").length)&&(str+=getZeroString(k))}else if(0===w)return"0";for(;w%10==0;)w/=10;return str+w}function checkInt32(i,min,max){if(i!==~~i||i<min||max<i)throw Error(invalidArgument+i)}function checkRoundingDigits(d,i,rm,repeating){var di,k,rd;for(k=d[0];10<=k;k/=10)--i;return--i<0?(i+=LOG_BASE,di=0):(di=Math.ceil((i+1)/LOG_BASE),i%=LOG_BASE),k=mathpow(10,LOG_BASE-i),rd=d[di]%k|0,null==repeating?i<3?(
0==i?rd=rd/100|0:1==i&&(rd=rd/10|0),rm<4&&99999==rd||3<rm&&49999==rd||5e4==rd||0==rd):(rm<4&&rd+1==k||3<rm&&rd+1==k/2)&&(d[di+1]/k/100|0)==mathpow(10,i-2)-1||(rd==k/2||0==rd)&&0==(d[di+1]/k/100|0):i<4?(0==i?rd=rd/1e3|0:1==i?rd=rd/100|0:2==i&&(rd=rd/10|0),(repeating||rm<4)&&9999==rd||!repeating&&3<rm&&4999==rd):((repeating||rm<4)&&rd+1==k||!repeating&&3<rm&&rd+1==k/2)&&(d[di+1]/k/1e3|0)==mathpow(10,i-3)-1}function convertBase(str,baseIn,baseOut){for(var j,arrL,arr=[0],i=0,strL=str.length;i<strL;){for(arrL=arr.length;arrL--;)arr[arrL]*=baseIn;for(arr[0]+=NUMERALS.indexOf(str.charAt(i++)),j=0;j<arr.length;j++)arr[j]>baseOut-1&&(void 0===arr[j+1]&&(arr[j+1]=0),
arr[j+1]+=arr[j]/baseOut|0,arr[j]%=baseOut)}return arr.reverse()}P.absoluteValue=P.abs=function(){var x=new this.constructor(this);return x.s<0&&(x.s=1),finalise(x)},P.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)},P.comparedTo=P.cmp=function(y){var i,j,xdL,ydL,x=this,xd=x.d,yd=(y=new x.constructor(y)).d,xs=x.s,ys=y.s;if(!xd||!yd)return xs&&ys?xs!==ys?xs:xd===yd?0:!xd^xs<0?1:-1:NaN;if(!xd[0]||!yd[0])return xd[0]?xs:yd[0]?-ys:0;if(xs!==ys)return xs;if(x.e!==y.e)return x.e>y.e^xs<0?1:-1;for(i=0,j=(xdL=xd.length)<(ydL=yd.length)?xdL:ydL;i<j;++i)if(xd[i]!==yd[i])return xd[i]>yd[i]^xs<0?1:-1;return xdL===ydL?0:ydL<xdL^xs<0?1:-1},
P.cosine=P.cos=function(){var pr,rm,x=this,Ctor=x.constructor;return x.d?x.d[0]?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+LOG_BASE,Ctor.rounding=1,x=function(Ctor,x){var k,y,len=x.d.length;y=len<32?(k=Math.ceil(len/3),Math.pow(4,-k).toString()):(k=16,"2.3283064365386962890625e-10");Ctor.precision+=k,x=taylorSeries(Ctor,1,x.times(y),new Ctor(1));for(var i=k;i--;){var cos2x=x.times(x);x=cos2x.times(cos2x).minus(cos2x).times(8).plus(1)}return Ctor.precision-=k,x}(Ctor,toLessThanHalfPi(Ctor,x)),Ctor.precision=pr,Ctor.rounding=rm,finalise(2==quadrant||3==quadrant?x.neg():x,pr,rm,!0)):new Ctor(1):new Ctor(NaN)},
P.cubeRoot=P.cbrt=function(){var e,m,n,r,rep,s,sd,t,t3,t3plusx,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);for(external=!1,(s=x.s*Math.pow(x.s*x,1/3))&&Math.abs(s)!=1/0?r=new Ctor(s.toString()):(n=digitsToString(x.d),(s=((e=x.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=Math.pow(n,1/3),e=mathfloor((e+1)/3)-(e%3==(e<0?-1:2)),(r=new Ctor(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=x.s),sd=(e=Ctor.precision)+3;;)if(t3plusx=(t3=(t=r).times(t).times(t)).plus(x),r=divide(t3plusx.plus(x).times(t),t3plusx.plus(t3),sd+2,1),digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){if("9999"!=(
n=n.slice(sd-3,sd+1))&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(finalise(r,e+1,1),m=!r.times(r).times(r).eq(x));break}if(!rep&&(finalise(t,e+1,0),t.times(t).times(t).eq(x))){r=t;break}sd+=4,rep=1}return external=!0,finalise(r,e,Ctor.rounding,m)},P.decimalPlaces=P.dp=function(){var w,d=this.d,n=NaN;if(d){if(n=((w=d.length-1)-mathfloor(this.e/LOG_BASE))*LOG_BASE,w=d[w])for(;w%10==0;w/=10)n--;n<0&&(n=0)}return n},P.dividedBy=P.div=function(y){return divide(this,new this.constructor(y))},P.dividedToIntegerBy=P.divToInt=function(y){var Ctor=this.constructor;return finalise(divide(this,new Ctor(y),0,1,1),Ctor.precision,Ctor.rounding)},
P.equals=P.eq=function(y){return 0===this.cmp(y)},P.floor=function(){return finalise(new this.constructor(this),this.e+1,3)},P.greaterThan=P.gt=function(y){return 0<this.cmp(y)},P.greaterThanOrEqualTo=P.gte=function(y){var k=this.cmp(y);return 1==k||0===k},P.hyperbolicCosine=P.cosh=function(){var k,n,pr,rm,len,x=this,Ctor=x.constructor,one=new Ctor(1);if(!x.isFinite())return new Ctor(x.s?1/0:NaN);if(x.isZero())return one;pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+4,Ctor.rounding=1,n=(len=x.d.length)<32?(k=Math.ceil(len/3),Math.pow(4,-k).toString()):(k=16,"2.3283064365386962890625e-10"),x=taylorSeries(Ctor,1,x.times(n),new Ctor(
1),!0);for(var cosh2_x,i=k,d8=new Ctor(8);i--;)cosh2_x=x.times(x),x=one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));return finalise(x,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.hyperbolicSine=P.sinh=function(){var k,pr,rm,len,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);if(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+4,Ctor.rounding=1,(len=x.d.length)<3)x=taylorSeries(Ctor,2,x,x,!0);else{k=16<(k=1.4*Math.sqrt(len))?16:0|k,x=taylorSeries(Ctor,2,x=x.times(Math.pow(5,-k)),x,!0);for(var sinh2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k--;)sinh2_x=x.times(x),x=x.times(d5.plus(sinh2_x.times(
d16.times(sinh2_x).plus(d20))))}return finalise(x,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.hyperbolicTangent=P.tanh=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+7,Ctor.rounding=1,divide(x.sinh(),x.cosh(),Ctor.precision=pr,Ctor.rounding=rm)):new Ctor(x.s)},P.inverseCosine=P.acos=function(){var halfPi,x=this,Ctor=x.constructor,k=x.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding;return-1!==k?0===k?x.isNeg()?getPi(Ctor,pr,rm):new Ctor(0):new Ctor(NaN):x.isZero()?getPi(Ctor,pr+4,rm).times(.5):(Ctor.precision=pr+6,Ctor.rounding=1,x=x.asin(),halfPi=getPi(Ctor,pr+4,rm
).times(.5),Ctor.precision=pr,Ctor.rounding=rm,halfPi.minus(x))},P.inverseHyperbolicCosine=P.acosh=function(){var pr,rm,x=this,Ctor=x.constructor;return x.lte(1)?new Ctor(x.eq(1)?0:NaN):x.isFinite()?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(Math.abs(x.e),x.sd())+4,Ctor.rounding=1,external=!1,x=x.times(x).minus(1).sqrt().plus(x),external=!0,Ctor.precision=pr,Ctor.rounding=rm,x.ln()):new Ctor(x)},P.inverseHyperbolicSine=P.asinh=function(){var pr,rm,x=this,Ctor=x.constructor;return!x.isFinite()||x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+2*Math.max(Math.abs(x.e),x.sd())+6,Ctor.rounding=1,external=!1,
x=x.times(x).plus(1).sqrt().plus(x),external=!0,Ctor.precision=pr,Ctor.rounding=rm,x.ln())},P.inverseHyperbolicTangent=P.atanh=function(){var pr,rm,wpr,xsd,x=this,Ctor=x.constructor;return x.isFinite()?0<=x.e?new Ctor(x.abs().eq(1)?x.s/0:x.isZero()?x:NaN):(pr=Ctor.precision,rm=Ctor.rounding,xsd=x.sd(),Math.max(xsd,pr)<2*-x.e-1?finalise(new Ctor(x),pr,rm,!0):(Ctor.precision=wpr=xsd-x.e,x=divide(x.plus(1),new Ctor(1).minus(x),wpr+pr,1),Ctor.precision=pr+4,Ctor.rounding=1,x=x.ln(),Ctor.precision=pr,Ctor.rounding=rm,x.times(.5))):new Ctor(NaN)},P.inverseSine=P.asin=function(){var halfPi,k,pr,rm,x=this,Ctor=x.constructor;return x.isZero()?new Ctor(x):(k=x.abs(
).cmp(1),pr=Ctor.precision,rm=Ctor.rounding,-1!==k?0===k?((halfPi=getPi(Ctor,pr+4,rm).times(.5)).s=x.s,halfPi):new Ctor(NaN):(Ctor.precision=pr+6,Ctor.rounding=1,x=x.div(new Ctor(1).minus(x.times(x)).sqrt().plus(1)).atan(),Ctor.precision=pr,Ctor.rounding=rm,x.times(2)))},P.inverseTangent=P.atan=function(){var i,j,k,n,px,t,r,wpr,x2,x=this,Ctor=x.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(x.isFinite()){if(x.isZero())return new Ctor(x);if(x.abs().eq(1)&&pr+4<=PI_PRECISION)return(r=getPi(Ctor,pr+4,rm).times(.25)).s=x.s,r}else{if(!x.s)return new Ctor(NaN);if(pr+4<=PI_PRECISION)return(r=getPi(Ctor,pr+4,rm).times(.5)).s=x.s,r}for(Ctor.precision=wpr=pr+10,
Ctor.rounding=1,i=k=Math.min(28,wpr/LOG_BASE+2|0);i;--i)x=x.div(x.times(x).plus(1).sqrt().plus(1));for(external=!1,j=Math.ceil(wpr/LOG_BASE),n=1,x2=x.times(x),r=new Ctor(x),px=x;-1!==i;)if(px=px.times(x2),t=r.minus(px.div(n+=2)),px=px.times(x2),void 0!==(r=t.plus(px.div(n+=2))).d[j])for(i=j;r.d[i]===t.d[i]&&i--;);return k&&(r=r.times(2<<k-1)),external=!0,finalise(r,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.isFinite=function(){return!!this.d},P.isInteger=P.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2},P.isNaN=function(){return!this.s},P.isNegative=P.isNeg=function(){return this.s<0},P.isPositive=P.isPos=function(){
return 0<this.s},P.isZero=function(){return!!this.d&&0===this.d[0]},P.lessThan=P.lt=function(y){return this.cmp(y)<0},P.lessThanOrEqualTo=P.lte=function(y){return this.cmp(y)<1},P.logarithm=P.log=function(base){var isBase10,d,denominator,k,inf,num,sd,r,Ctor=this.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(null==base)base=new Ctor(10),isBase10=!0;else{if(d=(base=new Ctor(base)).d,base.s<0||!d||!d[0]||base.eq(1))return new Ctor(NaN);isBase10=base.eq(10)}if(d=this.d,this.s<0||!d||!d[0]||this.eq(1))return new Ctor(d&&!d[0]?-1/0:1!=this.s?NaN:d?0:1/0);if(isBase10)if(1<d.length)inf=!0;else{for(k=d[0];k%10==0;)k/=10;inf=1!==k}if(external=!1,
num=naturalLogarithm(this,sd=pr+5),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),checkRoundingDigits((r=divide(num,denominator,sd,1)).d,k=pr,rm))do{if(num=naturalLogarithm(this,sd+=10),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),r=divide(num,denominator,sd,1),!inf){+digitsToString(r.d).slice(k+1,k+15)+1==1e14&&(r=finalise(r,pr+1,0));break}}while(checkRoundingDigits(r.d,k+=10,rm));return external=!0,finalise(r,pr,rm)},P.minus=P.sub=function(y){var d,e,i,j,k,len,pr,rm,xd,xe,xLTy,yd,x=this,Ctor=x.constructor;if(y=new Ctor(y),!x.d||!y.d)return x.s&&y.s?x.d?y.s=-y.s:y=new Ctor(y.d||x.s!==y.s?x:NaN):y=new Ctor(NaN),y;if(
x.s!=y.s)return y.s=-y.s,x.plus(y);if(xd=x.d,yd=y.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0]){if(yd[0])y.s=-y.s;else{if(!xd[0])return new Ctor(3===rm?-0:0);y=new Ctor(x)}return external?finalise(y,pr,rm):y}if(e=mathfloor(y.e/LOG_BASE),xe=mathfloor(x.e/LOG_BASE),xd=xd.slice(),k=xe-e){for(len=(xLTy=k<0)?(d=xd,k=-k,yd.length):(d=yd,e=xe,xd.length),(i=Math.max(Math.ceil(pr/LOG_BASE),len)+2)<k&&(k=i,d.length=1),d.reverse(),i=k;i--;)d.push(0);d.reverse()}else{for((xLTy=(i=xd.length)<(len=yd.length))&&(len=i),i=0;i<len;i++)if(xd[i]!=yd[i]){xLTy=xd[i]<yd[i];break}k=0}for(xLTy&&(d=xd,xd=yd,yd=d,y.s=-y.s),len=xd.length,i=yd.length-len;0<i;--i)xd[len++]=0;for(
i=yd.length;k<i;){if(xd[--i]<yd[i]){for(j=i;j&&0===xd[--j];)xd[j]=BASE-1;--xd[j],xd[i]+=BASE}xd[i]-=yd[i]}for(;0===xd[--len];)xd.pop();for(;0===xd[0];xd.shift())--e;return xd[0]?(y.d=xd,y.e=getBase10Exponent(xd,e),external?finalise(y,pr,rm):y):new Ctor(3===rm?-0:0)},P.modulo=P.mod=function(y){var q,x=this,Ctor=x.constructor;return y=new Ctor(y),!x.d||!y.s||y.d&&!y.d[0]?new Ctor(NaN):!y.d||x.d&&!x.d[0]?finalise(new Ctor(x),Ctor.precision,Ctor.rounding):(external=!1,9==Ctor.modulo?(q=divide(x,y.abs(),0,3,1)).s*=y.s:q=divide(x,y,0,Ctor.modulo,1),q=q.times(y),external=!0,x.minus(q))},P.naturalExponential=P.exp=function(){return naturalExponential(this)},
P.naturalLogarithm=P.ln=function(){return naturalLogarithm(this)},P.negated=P.neg=function(){var x=new this.constructor(this);return x.s=-x.s,finalise(x)},P.plus=P.add=function(y){var carry,d,e,i,k,len,pr,rm,xd,yd,x=this,Ctor=x.constructor;if(y=new Ctor(y),!x.d||!y.d)return x.s&&y.s?x.d||(y=new Ctor(y.d||x.s===y.s?x:NaN)):y=new Ctor(NaN),y;if(x.s!=y.s)return y.s=-y.s,x.minus(y);if(xd=x.d,yd=y.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0])return yd[0]||(y=new Ctor(x)),external?finalise(y,pr,rm):y;if(k=mathfloor(x.e/LOG_BASE),e=mathfloor(y.e/LOG_BASE),xd=xd.slice(),i=k-e){for((len=(len=i<0?(d=xd,i=-i,yd.length):(d=yd,e=k,xd.length))<(k=Math.ceil(
pr/LOG_BASE))?k+1:len+1)<i&&(i=len,d.length=1),d.reverse();i--;)d.push(0);d.reverse()}for((len=xd.length)-(i=yd.length)<0&&(i=len,d=yd,yd=xd,xd=d),carry=0;i;)carry=(xd[--i]=xd[i]+yd[i]+carry)/BASE|0,xd[i]%=BASE;for(carry&&(xd.unshift(carry),++e),len=xd.length;0==xd[--len];)xd.pop();return y.d=xd,y.e=getBase10Exponent(xd,e),external?finalise(y,pr,rm):y},P.precision=P.sd=function(z){var k,x=this;if(void 0!==z&&z!==!!z&&1!==z&&0!==z)throw Error(invalidArgument+z);return x.d?(k=getPrecision(x.d),z&&x.e+1>k&&(k=x.e+1)):k=NaN,k},P.round=function(){var x=this,Ctor=x.constructor;return finalise(new Ctor(x),x.e+1,Ctor.rounding)},P.sine=P.sin=function(){var pr,rm,
x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+LOG_BASE,Ctor.rounding=1,x=function(Ctor,x){var k,len=x.d.length;if(len<3)return taylorSeries(Ctor,2,x,x);k=16<(k=1.4*Math.sqrt(len))?16:0|k,x=x.times(Math.pow(5,-k)),x=taylorSeries(Ctor,2,x,x);for(var sin2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k--;)sin2_x=x.times(x),x=x.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));return x}(Ctor,toLessThanHalfPi(Ctor,x)),Ctor.precision=pr,Ctor.rounding=rm,finalise(2<quadrant?x.neg():x,pr,rm,!0)):new Ctor(NaN)},P.squareRoot=P.sqrt=function(){var m,n,sd,r,
rep,t,x=this,d=x.d,e=x.e,s=x.s,Ctor=x.constructor;if(1!==s||!d||!d[0])return new Ctor(!s||s<0&&(!d||d[0])?NaN:d?x:1/0);for(external=!1,r=0==(s=Math.sqrt(+x))||s==1/0?(((n=digitsToString(d)).length+e)%2==0&&(n+="0"),s=Math.sqrt(n),e=mathfloor((e+1)/2)-(e<0||e%2),new Ctor(n=s==1/0?"1e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)):new Ctor(s.toString()),sd=(e=Ctor.precision)+3;;)if(r=(t=r).plus(divide(x,t,sd+2,1)).times(.5),digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){if("9999"!=(n=n.slice(sd-3,sd+1))&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(finalise(r,e+1,1),m=!r.times(r).eq(x));break}if(!rep&&(finalise(t,e+1,
0),t.times(t).eq(x))){r=t;break}sd+=4,rep=1}return external=!0,finalise(r,e,Ctor.rounding,m)},P.tangent=P.tan=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+10,Ctor.rounding=1,(x=x.sin()).s=1,x=divide(x,new Ctor(1).minus(x.times(x)).sqrt(),pr+10,0),Ctor.precision=pr,Ctor.rounding=rm,finalise(2==quadrant||4==quadrant?x.neg():x,pr,rm,!0)):new Ctor(NaN)},P.times=P.mul=function(y){var carry,e,i,k,r,rL,t,xdL,ydL,x=this,Ctor=x.constructor,xd=x.d,yd=(y=new Ctor(y)).d;if(y.s*=x.s,!(xd&&xd[0]&&yd&&yd[0]))return new Ctor(
!y.s||xd&&!xd[0]&&!yd||yd&&!yd[0]&&!xd?NaN:xd&&yd?0*y.s:y.s/0);for(e=mathfloor(x.e/LOG_BASE)+mathfloor(y.e/LOG_BASE),(xdL=xd.length)<(ydL=yd.length)&&(r=xd,xd=yd,yd=r,rL=xdL,xdL=ydL,ydL=rL),r=[],i=rL=xdL+ydL;i--;)r.push(0);for(i=ydL;0<=--i;){for(carry=0,k=xdL+i;i<k;)t=r[k]+yd[i]*xd[k-i-1]+carry,r[k--]=t%BASE|0,carry=t/BASE|0;r[k]=(r[k]+carry)%BASE|0}for(;!r[--rL];)r.pop();return carry?++e:r.shift(),y.d=r,y.e=getBase10Exponent(r,e),external?finalise(y,Ctor.precision,Ctor.rounding):y},P.toBinary=function(sd,rm){return toStringBinary(this,2,sd,rm)},P.toDecimalPlaces=P.toDP=function(dp,rm){var x=this,Ctor=x.constructor;return x=new Ctor(x),void 0===dp?x:(
checkInt32(dp,0,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finalise(x,dp+x.e+1,rm))},P.toExponential=function(dp,rm){var str,x=this,Ctor=x.constructor;return str=void 0===dp?finiteToString(x,!0):(checkInt32(dp,0,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finiteToString(x=finalise(new Ctor(x),dp+1,rm),!0,dp+1)),x.isNeg()&&!x.isZero()?"-"+str:str},P.toFixed=function(dp,rm){var str,y,x=this,Ctor=x.constructor;return str=void 0===dp?finiteToString(x):(checkInt32(dp,0,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finiteToString(y=finalise(new Ctor(x),dp+x.e+1,rm),!1,dp+y.e+1)),x.isNeg()&&!x.isZero()?"-"+str:str},
P.toFraction=function(maxD){var d,d0,d1,d2,e,k,n,n0,n1,pr,q,r,x=this,xd=x.d,Ctor=x.constructor;if(!xd)return new Ctor(x);if(n1=d0=new Ctor(1),k=(e=(d=new Ctor(d1=n0=new Ctor(0))).e=getPrecision(xd)-x.e-1)%LOG_BASE,d.d[0]=mathpow(10,k<0?LOG_BASE+k:k),null==maxD)maxD=0<e?d:n1;else{if(!(n=new Ctor(maxD)).isInt()||n.lt(n1))throw Error(invalidArgument+n);maxD=n.gt(d)?0<e?d:n1:n}for(external=!1,n=new Ctor(digitsToString(xd)),pr=Ctor.precision,Ctor.precision=e=xd.length*LOG_BASE*2;q=divide(n,d,0,1,1),1!=(d2=d0.plus(q.times(d1))).cmp(maxD);)d0=d1,d1=d2,d2=n1,n1=n0.plus(q.times(d2)),n0=d2,d2=d,d=n.minus(q.times(d2)),n=d2;return d2=divide(maxD.minus(d0),d1,0,1,1),
n0=n0.plus(d2.times(n1)),d0=d0.plus(d2.times(d1)),n0.s=n1.s=x.s,r=divide(n1,d1,e,1).minus(x).abs().cmp(divide(n0,d0,e,1).minus(x).abs())<1?[n1,d1]:[n0,d0],Ctor.precision=pr,external=!0,r},P.toHexadecimal=P.toHex=function(sd,rm){return toStringBinary(this,16,sd,rm)},P.toNearest=function(y,rm){var x=this,Ctor=x.constructor;if(x=new Ctor(x),null==y){if(!x.d)return x;y=new Ctor(1),rm=Ctor.rounding}else{if(y=new Ctor(y),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),!x.d)return y.s?x:y;if(!y.d)return y.s&&(y.s=x.s),y}return y.d[0]?(external=!1,x=divide(x,y,0,rm,1).times(y),external=!0,finalise(x)):(y.s=x.s,x=y),x},P.toNumber=function(){return+this},
P.toOctal=function(sd,rm){return toStringBinary(this,8,sd,rm)},P.toPower=P.pow=function(y){var e,k,pr,r,rm,s,x=this,Ctor=x.constructor,yn=+(y=new Ctor(y));if(!(x.d&&y.d&&x.d[0]&&y.d[0]))return new Ctor(mathpow(+x,yn));if((x=new Ctor(x)).eq(1))return x;if(pr=Ctor.precision,rm=Ctor.rounding,y.eq(1))return finalise(x,pr,rm);if((e=mathfloor(y.e/LOG_BASE))>=y.d.length-1&&(k=yn<0?-yn:yn)<=9007199254740991)return r=intPow(Ctor,x,k,pr),y.s<0?new Ctor(1).div(r):finalise(r,pr,rm);if((s=x.s)<0){if(e<y.d.length-1)return new Ctor(NaN);if(0==(1&y.d[e])&&(s=1),0==x.e&&1==x.d[0]&&1==x.d.length)return x.s=s,x}return(e=0!=(k=mathpow(+x,yn))&&isFinite(k)?new Ctor(k+""
).e:mathfloor(yn*(Math.log("0."+digitsToString(x.d))/Math.LN10+x.e+1)))>Ctor.maxE+1||e<Ctor.minE-1?new Ctor(0<e?s/0:0):(external=!1,Ctor.rounding=x.s=1,k=Math.min(12,(e+"").length),(r=naturalExponential(y.times(naturalLogarithm(x,pr+k)),pr)).d&&checkRoundingDigits((r=finalise(r,pr+5,1)).d,pr,rm)&&(e=pr+10,+digitsToString((r=finalise(naturalExponential(y.times(naturalLogarithm(x,e+k)),e),e+5,1)).d).slice(pr+1,pr+15)+1==1e14&&(r=finalise(r,pr+1,0))),r.s=s,external=!0,finalise(r,pr,Ctor.rounding=rm))},P.toPrecision=function(sd,rm){var str,x=this,Ctor=x.constructor;return str=void 0===sd?finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos):(checkInt32(sd,1,
MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finiteToString(x=finalise(new Ctor(x),sd,rm),sd<=x.e||x.e<=Ctor.toExpNeg,sd)),x.isNeg()&&!x.isZero()?"-"+str:str},P.toSignificantDigits=P.toSD=function(sd,rm){var Ctor=this.constructor;return void 0===sd?(sd=Ctor.precision,rm=Ctor.rounding):(checkInt32(sd,1,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8)),finalise(new Ctor(this),sd,rm)},P.toString=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()&&!x.isZero()?"-"+str:str},P.truncated=P.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)},
P.valueOf=P.toJSON=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()?"-"+str:str};var divide=function(){function multiplyInteger(x,k,base){var temp,carry=0,i=x.length;for(x=x.slice();i--;)temp=x[i]*k+carry,x[i]=temp%base|0,carry=temp/base|0;return carry&&x.unshift(carry),x}function compare(a,b,aL,bL){var i,r;if(aL!=bL)r=bL<aL?1:-1;else for(i=r=0;i<aL;i++)if(a[i]!=b[i]){r=a[i]>b[i]?1:-1;break}return r}function subtract(a,b,aL,base){for(var i=0;aL--;)a[aL]-=i,i=a[aL]<b[aL]?1:0,a[aL]=i*base+a[aL]-b[aL];for(;!a[0]&&1<a.length;)a.shift()}return function(x,y,pr,rm,dp,base){var cmp,e,i,k,logBase,
more,prod,prodL,q,qd,rem,remL,rem0,sd,t,xi,xL,yd0,yL,yz,Ctor=x.constructor,sign=x.s==y.s?1:-1,xd=x.d,yd=y.d;if(!(xd&&xd[0]&&yd&&yd[0]))return new Ctor(x.s&&y.s&&(xd?!yd||xd[0]!=yd[0]:yd)?xd&&0==xd[0]||!yd?0*sign:sign/0:NaN);for(e=base?(logBase=1,x.e-y.e):(base=BASE,logBase=LOG_BASE,mathfloor(x.e/logBase)-mathfloor(y.e/logBase)),yL=yd.length,xL=xd.length,qd=(q=new Ctor(sign)).d=[],i=0;yd[i]==(xd[i]||0);i++);if(yd[i]>(xd[i]||0)&&e--,null==pr?(sd=pr=Ctor.precision,rm=Ctor.rounding):sd=dp?pr+(x.e-y.e)+1:pr,sd<0)qd.push(1),more=!0;else{if(sd=sd/logBase+2|0,i=0,1==yL){for(yd=yd[k=0],sd++;(i<xL||k)&&sd--;i++)t=k*base+(xd[i]||0),qd[i]=t/yd|0,k=t%yd|0;more=k||i<xL
}else{for(1<(k=base/(yd[0]+1)|0)&&(yd=multiplyInteger(yd,k,base),xd=multiplyInteger(xd,k,base),yL=yd.length,xL=xd.length),xi=yL,remL=(rem=xd.slice(0,yL)).length;remL<yL;)rem[remL++]=0;for((yz=yd.slice()).unshift(0),yd0=yd[0],yd[1]>=base/2&&++yd0;k=0,(cmp=compare(yd,rem,yL,remL))<0?(rem0=rem[0],yL!=remL&&(rem0=rem0*base+(rem[1]||0)),1<(k=rem0/yd0|0)?(base<=k&&(k=base-1),1==(cmp=compare(prod=multiplyInteger(yd,k,base),rem,prodL=prod.length,remL=rem.length))&&(k--,subtract(prod,yL<prodL?yz:yd,prodL,base))):(0==k&&(cmp=k=1),prod=yd.slice()),(prodL=prod.length)<remL&&prod.unshift(0),subtract(rem,prod,remL,base),-1==cmp&&(cmp=compare(yd,rem,yL,remL=rem.length)
)<1&&(k++,subtract(rem,yL<remL?yz:yd,remL,base)),remL=rem.length):0===cmp&&(k++,rem=[0]),qd[i++]=k,cmp&&rem[0]?rem[remL++]=xd[xi]||0:(rem=[xd[xi]],remL=1),(xi++<xL||void 0!==rem[0])&&sd--;);more=void 0!==rem[0]}qd[0]||qd.shift()}if(1==logBase)q.e=e,inexact=more;else{for(i=1,k=qd[0];10<=k;k/=10)i++;q.e=i+e*logBase-1,finalise(q,dp?pr+q.e+1:pr,rm,more)}return q}}();function finalise(x,sd,rm,isTruncated){var digits,i,j,k,rd,roundUp,w,xd,xdi,Ctor=x.constructor;out:if(null!=sd){if(!(xd=x.d))return x;for(digits=1,k=xd[0];10<=k;k/=10)digits++;if((i=sd-digits)<0)i+=LOG_BASE,j=sd,rd=(w=xd[xdi=0])/mathpow(10,digits-j-1)%10|0;else if(xdi=Math.ceil((i+1)/LOG_BASE),(
k=xd.length)<=xdi){if(!isTruncated)break out;for(;k++<=xdi;)xd.push(0);w=rd=0,j=(i%=LOG_BASE)-LOG_BASE+(digits=1)}else{for(w=k=xd[xdi],digits=1;10<=k;k/=10)digits++;rd=(j=(i%=LOG_BASE)-LOG_BASE+digits)<0?0:w/mathpow(10,digits-j-1)%10|0}if(isTruncated=isTruncated||sd<0||void 0!==xd[xdi+1]||(j<0?w:w%mathpow(10,digits-j-1)),roundUp=rm<4?(rd||isTruncated)&&(0==rm||rm==(x.s<0?3:2)):5<rd||5==rd&&(4==rm||isTruncated||6==rm&&(0<i?0<j?w/mathpow(10,digits-j):0:xd[xdi-1])%10&1||rm==(x.s<0?8:7)),sd<1||!xd[0])return xd.length=0,roundUp?(sd-=x.e+1,xd[0]=mathpow(10,(LOG_BASE-sd%LOG_BASE)%LOG_BASE),x.e=-sd||0):xd[0]=x.e=0,x;if(0==i?(xd.length=xdi,k=1,xdi--):(xd.length=xdi+1
,k=mathpow(10,LOG_BASE-i),xd[xdi]=0<j?(w/mathpow(10,digits-j)%mathpow(10,j)|0)*k:0),roundUp)for(;;){if(0==xdi){for(i=1,j=xd[0];10<=j;j/=10)i++;for(j=xd[0]+=k,k=1;10<=j;j/=10)k++;i!=k&&(x.e++,xd[0]==BASE&&(xd[0]=1));break}if(xd[xdi]+=k,xd[xdi]!=BASE)break;xd[xdi--]=0,k=1}for(i=xd.length;0===xd[--i];)xd.pop()}return external&&(x.e>Ctor.maxE?(x.d=null,x.e=NaN):x.e<Ctor.minE&&(x.e=0,x.d=[0])),x}function finiteToString(x,isExp,sd){if(!x.isFinite())return nonFiniteToString(x);var k,e=x.e,str=digitsToString(x.d),len=str.length;return isExp?(sd&&0<(k=sd-len)?str=str.charAt(0)+"."+str.slice(1)+getZeroString(k):1<len&&(str=str.charAt(0)+"."+str.slice(1)),str=str+(
x.e<0?"e":"e+")+x.e):e<0?(str="0."+getZeroString(-e-1)+str,sd&&0<(k=sd-len)&&(str+=getZeroString(k))):len<=e?(str+=getZeroString(e+1-len),sd&&0<(k=sd-e-1)&&(str=str+"."+getZeroString(k))):((k=e+1)<len&&(str=str.slice(0,k)+"."+str.slice(k)),sd&&0<(k=sd-len)&&(e+1===len&&(str+="."),str+=getZeroString(k))),str}function getBase10Exponent(digits,e){var w=digits[0];for(e*=LOG_BASE;10<=w;w/=10)e++;return e}function getLn10(Ctor,sd,pr){if(LN10_PRECISION<sd)throw external=!0,pr&&(Ctor.precision=pr),Error(precisionLimitExceeded);return finalise(new Ctor(LN10),sd,1,!0)}function getPi(Ctor,sd,rm){if(PI_PRECISION<sd)throw Error(precisionLimitExceeded);return finalise(
new Ctor(PI),sd,rm,!0)}function getPrecision(digits){var w=digits.length-1,len=w*LOG_BASE+1;if(w=digits[w]){for(;w%10==0;w/=10)len--;for(w=digits[0];10<=w;w/=10)len++}return len}function getZeroString(k){for(var zs="";k--;)zs+="0";return zs}function intPow(Ctor,x,n,pr){var isTruncated,r=new Ctor(1),k=Math.ceil(pr/LOG_BASE+4);for(external=!1;;){if(n%2&&truncate((r=r.times(x)).d,k)&&(isTruncated=!0),0===(n=mathfloor(n/2))){n=r.d.length-1,isTruncated&&0===r.d[n]&&++r.d[n];break}truncate((x=x.times(x)).d,k)}return external=!0,r}function isOdd(n){return 1&n.d[n.d.length-1]}function maxOrMin(Ctor,args,ltgt){for(var y,x=new Ctor(args[0]),i=0;++i<args.length;){if(!(
y=new Ctor(args[i])).s){x=y;break}x[ltgt](y)&&(x=y)}return x}function naturalExponential(x,sd){var denominator,guard,j,pow,sum,t,wpr,rep=0,i=0,k=0,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(!x.d||!x.d[0]||17<x.e)return new Ctor(x.d?x.d[0]?x.s<0?0:1/0:1:x.s?x.s<0?0:x:NaN);for(wpr=null==sd?(external=!1,pr):sd,t=new Ctor(.03125);-2<x.e;)x=x.times(t),k+=5;for(wpr+=guard=Math.log(mathpow(2,k))/Math.LN10*2+5|0,denominator=pow=sum=new Ctor(1),Ctor.precision=wpr;;){if(pow=finalise(pow.times(x),wpr,1),denominator=denominator.times(++i),digitsToString((t=sum.plus(divide(pow,denominator,wpr,1))).d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){for(
j=k;j--;)sum=finalise(sum.times(sum),wpr,1);if(null!=sd)return Ctor.precision=pr,sum;if(!(rep<3&&checkRoundingDigits(sum.d,wpr-guard,rm,rep)))return finalise(sum,Ctor.precision=pr,rm,external=!0);Ctor.precision=wpr+=10,denominator=pow=t=new Ctor(1),i=0,rep++}sum=t}}function naturalLogarithm(y,sd){var c,c0,denominator,e,numerator,rep,sum,t,wpr,x1,x2,n=1,x=y,xd=x.d,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(x.s<0||!xd||!xd[0]||!x.e&&1==xd[0]&&1==xd.length)return new Ctor(xd&&!xd[0]?-1/0:1!=x.s?NaN:xd?0:x);if(wpr=null==sd?(external=!1,pr):sd,Ctor.precision=wpr+=10,c0=(c=digitsToString(xd)).charAt(0),!(Math.abs(e=x.e)<15e14))return t=getLn10(Ctor,
wpr+2,pr).times(e+""),x=naturalLogarithm(new Ctor(c0+"."+c.slice(1)),wpr-10).plus(t),Ctor.precision=pr,null==sd?finalise(x,pr,rm,external=!0):x;for(;c0<7&&1!=c0||1==c0&&3<c.charAt(1);)c0=(c=digitsToString((x=x.times(y)).d)).charAt(0),n++;for(e=x.e,1<c0?(x=new Ctor("0."+c),e++):x=new Ctor(c0+"."+c.slice(1)),sum=numerator=x=divide((x1=x).minus(1),x.plus(1),wpr,1),x2=finalise(x.times(x),wpr,1),denominator=3;;){if(numerator=finalise(numerator.times(x2),wpr,1),digitsToString((t=sum.plus(divide(numerator,new Ctor(denominator),wpr,1))).d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){if(sum=sum.times(2),0!==e&&(sum=sum.plus(getLn10(Ctor,wpr+2,pr).times(e+"")))
,sum=divide(sum,new Ctor(n),wpr,1),null!=sd)return Ctor.precision=pr,sum;if(!checkRoundingDigits(sum.d,wpr-10,rm,rep))return finalise(sum,Ctor.precision=pr,rm,external=!0);Ctor.precision=wpr+=10,t=numerator=x=divide(x1.minus(1),x1.plus(1),wpr,1),x2=finalise(x.times(x),wpr,1),denominator=rep=1}sum=t,denominator+=2}}function nonFiniteToString(x){return String(x.s*x.s/0)}function parseDecimal(x,str){var e,i,len;for(-1<(e=str.indexOf("."))&&(str=str.replace(".","")),0<(i=str.search(/e/i))?(e<0&&(e=i),e+=+str.slice(i+1),str=str.substring(0,i)):e<0&&(e=str.length),i=0;48===str.charCodeAt(i);i++);for(len=str.length;48===str.charCodeAt(len-1);--len);if(
str=str.slice(i,len)){if(len-=i,x.e=e=e-i-1,x.d=[],i=(e+1)%LOG_BASE,e<0&&(i+=LOG_BASE),i<len){for(i&&x.d.push(+str.slice(0,i)),len-=LOG_BASE;i<len;)x.d.push(+str.slice(i,i+=LOG_BASE));str=str.slice(i),i=LOG_BASE-str.length}else i-=len;for(;i--;)str+="0";x.d.push(+str),external&&(x.e>x.constructor.maxE?(x.d=null,x.e=NaN):x.e<x.constructor.minE&&(x.e=0,x.d=[0]))}else x.e=0,x.d=[0];return x}function parseOther(x,str){var base,Ctor,divisor,i,isFloat,len,p,xd,xe;if("Infinity"===str||"NaN"===str)return+str||(x.s=NaN),x.e=NaN,x.d=null,x;if(isHex.test(str))base=16,str=str.toLowerCase();else if(isBinary.test(str))base=2;else{if(!isOctal.test(str))throw Error(
invalidArgument+str);base=8}for(isFloat=0<=(i=(str=0<(i=str.search(/p/i))?(p=+str.slice(i+1),str.substring(2,i)):str.slice(2)).indexOf(".")),Ctor=x.constructor,isFloat&&(i=(len=(str=str.replace(".","")).length)-i,divisor=intPow(Ctor,new Ctor(base),i,2*i)),i=xe=(xd=convertBase(str,base,BASE)).length-1;0===xd[i];--i)xd.pop();return i<0?new Ctor(0*x.s):(x.e=getBase10Exponent(xd,xe),x.d=xd,external=!1,isFloat&&(x=divide(x,divisor,4*len)),p&&(x=x.times(Math.abs(p)<54?Math.pow(2,p):Decimal.pow(2,p))),external=!0,x)}function taylorSeries(Ctor,n,x,y,isHyperbolic){var j,t,u,x2,pr=Ctor.precision,k=Math.ceil(pr/LOG_BASE);for(external=!1,x2=x.times(x),u=new Ctor(y);;){
if(t=divide(u.times(x2),new Ctor(n++*n++),pr,1),u=isHyperbolic?y.plus(t):y.minus(t),y=divide(t.times(x2),new Ctor(n++*n++),pr,1),void 0!==(t=u.plus(y)).d[k]){for(j=k;t.d[j]===u.d[j]&&j--;);if(-1==j)break}j=u,u=y,y=t,t=j,0}return external=!0,t.d.length=k+1,t}function toLessThanHalfPi(Ctor,x){var t,isNeg=x.s<0,pi=getPi(Ctor,Ctor.precision,1),halfPi=pi.times(.5);if((x=x.abs()).lte(halfPi))return quadrant=isNeg?4:1,x;if((t=x.divToInt(pi)).isZero())quadrant=isNeg?3:2;else{if((x=x.minus(t.times(pi))).lte(halfPi))return quadrant=isOdd(t)?isNeg?2:3:isNeg?4:1,x;quadrant=isOdd(t)?isNeg?1:4:isNeg?3:2}return x.minus(pi).abs()}function toStringBinary(x,baseOut,sd,rm){
var base,e,i,k,len,roundUp,str,xd,y,Ctor=x.constructor,isExp=void 0!==sd;if(isExp?(checkInt32(sd,1,MAX_DIGITS),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8)):(sd=Ctor.precision,rm=Ctor.rounding),x.isFinite()){for(isExp?(base=2,16==baseOut?sd=4*sd-3:8==baseOut&&(sd=3*sd-2)):base=baseOut,0<=(i=(str=finiteToString(x)).indexOf("."))&&(str=str.replace(".",""),(y=new Ctor(1)).e=str.length-i,y.d=convertBase(finiteToString(y),10,base),y.e=y.d.length),e=len=(xd=convertBase(str,10,base)).length;0==xd[--len];)xd.pop();if(xd[0]){if(i<0?e--:((x=new Ctor(x)).d=xd,x.e=e,xd=(x=divide(x,y,sd,rm,0,base)).d,e=x.e,roundUp=inexact),i=xd[sd],k=base/2,
roundUp=roundUp||void 0!==xd[sd+1],roundUp=rm<4?(void 0!==i||roundUp)&&(0===rm||rm===(x.s<0?3:2)):k<i||i===k&&(4===rm||roundUp||6===rm&&1&xd[sd-1]||rm===(x.s<0?8:7)),xd.length=sd,roundUp)for(;++xd[--sd]>base-1;)xd[sd]=0,sd||(++e,xd.unshift(1));for(len=xd.length;!xd[len-1];--len);for(i=0,str="";i<len;i++)str+=NUMERALS.charAt(xd[i]);if(isExp){if(1<len)if(16==baseOut||8==baseOut){for(i=16==baseOut?4:3,--len;len%i;len++)str+="0";for(len=(xd=convertBase(str,base,baseOut)).length;!xd[len-1];--len);for(i=1,str="1.";i<len;i++)str+=NUMERALS.charAt(xd[i])}else str=str.charAt(0)+"."+str.slice(1);str=str+(e<0?"p":"p+")+e}else if(e<0){for(;++e;)str="0"+str;str="0."+str
}else if(++e>len)for(e-=len;e--;)str+="0";else e<len&&(str=str.slice(0,e)+"."+str.slice(e))}else str=isExp?"0p+0":"0";str=(16==baseOut?"0x":2==baseOut?"0b":8==baseOut?"0o":"")+str}else str=nonFiniteToString(x);return x.s<0?"-"+str:str}function truncate(arr,len){if(arr.length>len)return arr.length=len,!0}function abs(x){return new this(x).abs()}function acos(x){return new this(x).acos()}function acosh(x){return new this(x).acosh()}function add(x,y){return new this(x).plus(y)}function asin(x){return new this(x).asin()}function asinh(x){return new this(x).asinh()}function atan(x){return new this(x).atan()}function atanh(x){return new this(x).atanh()}
function atan2(y,x){y=new this(y),x=new this(x);var r,pr=this.precision,rm=this.rounding,wpr=pr+4;return y.s&&x.s?y.d||x.d?!x.d||y.isZero()?(r=x.s<0?getPi(this,pr,rm):new this(0)).s=y.s:!y.d||x.isZero()?(r=getPi(this,wpr,1).times(.5)).s=y.s:r=x.s<0?(this.precision=wpr,this.rounding=1,r=this.atan(divide(y,x,wpr,1)),x=getPi(this,wpr,1),this.precision=pr,this.rounding=rm,y.s<0?r.minus(x):r.plus(x)):this.atan(divide(y,x,wpr,1)):(r=getPi(this,wpr,1).times(0<x.s?.25:.75)).s=y.s:r=new this(NaN),r}function cbrt(x){return new this(x).cbrt()}function ceil(x){return finalise(x=new this(x),x.e+1,2)}function config(obj){if(!obj||"object"!=typeof obj)throw Error(
decimalError+"Object expected");var i,p,v,useDefaults=!0===obj.defaults,ps=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(i=0;i<ps.length;i+=3)if(p=ps[i],useDefaults&&(this[p]=DEFAULTS[p]),void 0!==(v=obj[p])){if(!(mathfloor(v)===v&&ps[i+1]<=v&&v<=ps[i+2]))throw Error(invalidArgument+p+": "+v);this[p]=v}if(p="crypto",useDefaults&&(this[p]=DEFAULTS[p]),void 0!==(v=obj[p])){if(!0!==v&&!1!==v&&0!==v&&1!==v)throw Error(invalidArgument+p+": "+v);if(v){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(cryptoUnavailable)
;this[p]=!0}else this[p]=!1}return this}function cos(x){return new this(x).cos()}function cosh(x){return new this(x).cosh()}function div(x,y){return new this(x).div(y)}function exp(x){return new this(x).exp()}function floor(x){return finalise(x=new this(x),x.e+1,3)}function hypot(){var i,n,t=new this(0);for(external=!1,i=0;i<arguments.length;)if((n=new this(arguments[i++])).d)t.d&&(t=t.plus(n.times(n)));else{if(n.s)return external=!0,new this(1/0);t=n}return external=!0,t.sqrt()}function isDecimalInstance(obj){return obj instanceof Decimal||obj&&"[object Decimal]"===obj.name||!1}function ln(x){return new this(x).ln()}function log(x,y){return new this(x).log(
y)}function log2(x){return new this(x).log(2)}function log10(x){return new this(x).log(10)}function max(){return maxOrMin(this,arguments,"lt")}function min(){return maxOrMin(this,arguments,"gt")}function mod(x,y){return new this(x).mod(y)}function mul(x,y){return new this(x).mul(y)}function pow(x,y){return new this(x).pow(y)}function random(sd){var d,e,k,n,i=0,r=new this(1),rd=[];if(void 0===sd?sd=this.precision:checkInt32(sd,1,MAX_DIGITS),k=Math.ceil(sd/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(d=crypto.getRandomValues(new Uint32Array(k));i<k;)429e7<=(n=d[i])?d[i]=crypto.getRandomValues(new Uint32Array(1))[0]:rd[i++]=n%1e7;else{if(
!crypto.randomBytes)throw Error(cryptoUnavailable);for(d=crypto.randomBytes(k*=4);i<k;)214e7<=(n=d[i]+(d[i+1]<<8)+(d[i+2]<<16)+((127&d[i+3])<<24))?crypto.randomBytes(4).copy(d,i):(rd.push(n%1e7),i+=4);i=k/4}else for(;i<k;)rd[i++]=1e7*Math.random()|0;for(k=rd[--i],sd%=LOG_BASE,k&&sd&&(n=mathpow(10,LOG_BASE-sd),rd[i]=(k/n|0)*n);0===rd[i];i--)rd.pop();if(i<0)rd=[e=0];else{for(e=-1;0===rd[0];e-=LOG_BASE)rd.shift();for(k=1,n=rd[0];10<=n;n/=10)k++;k<LOG_BASE&&(e-=LOG_BASE-k)}return r.e=e,r.d=rd,r}function round(x){return finalise(x=new this(x),x.e+1,this.rounding)}function sign(x){return(x=new this(x)).d?x.d[0]?x.s:0*x.s:x.s||NaN}function sin(x){return new this(x
).sin()}function sinh(x){return new this(x).sinh()}function sqrt(x){return new this(x).sqrt()}function sub(x,y){return new this(x).sub(y)}function tan(x){return new this(x).tan()}function tanh(x){return new this(x).tanh()}function trunc(x){return finalise(x=new this(x),x.e+1,1)}(Decimal=function clone(obj){var i,p,ps;function Decimal(v){var e,i,t,x=this;if(!(x instanceof Decimal))return new Decimal(v);if(v instanceof(x.constructor=Decimal))return x.s=v.s,x.e=v.e,void(x.d=(v=v.d)?v.slice():v);if("number"==(t=typeof v)){if(0===v)return x.s=1/v<0?-1:1,x.e=0,void(x.d=[0]);if(x.s=v<0?(v=-v,-1):1,v===~~v&&v<1e7){for(e=0,i=v;10<=i;i/=10)e++;return x.e=e,void(x.d=[v
])}return 0*v!=0?(v||(x.s=NaN),x.e=NaN,void(x.d=null)):parseDecimal(x,v.toString())}if("string"!==t)throw Error(invalidArgument+v);return 45===v.charCodeAt(0)?(v=v.slice(1),x.s=-1):x.s=1,isDecimal.test(v)?parseDecimal(x,v):parseOther(x,v)}if(Decimal.prototype=P,Decimal.ROUND_UP=0,Decimal.ROUND_DOWN=1,Decimal.ROUND_CEIL=2,Decimal.ROUND_FLOOR=3,Decimal.ROUND_HALF_UP=4,Decimal.ROUND_HALF_DOWN=5,Decimal.ROUND_HALF_EVEN=6,Decimal.ROUND_HALF_CEIL=7,Decimal.ROUND_HALF_FLOOR=8,Decimal.EUCLID=9,Decimal.config=Decimal.set=config,Decimal.clone=clone,Decimal.isDecimal=isDecimalInstance,Decimal.abs=abs,Decimal.acos=acos,Decimal.acosh=acosh,Decimal.add=add,
Decimal.asin=asin,Decimal.asinh=asinh,Decimal.atan=atan,Decimal.atanh=atanh,Decimal.atan2=atan2,Decimal.cbrt=cbrt,Decimal.ceil=ceil,Decimal.cos=cos,Decimal.cosh=cosh,Decimal.div=div,Decimal.exp=exp,Decimal.floor=floor,Decimal.hypot=hypot,Decimal.ln=ln,Decimal.log=log,Decimal.log10=log10,Decimal.log2=log2,Decimal.max=max,Decimal.min=min,Decimal.mod=mod,Decimal.mul=mul,Decimal.pow=pow,Decimal.random=random,Decimal.round=round,Decimal.sign=sign,Decimal.sin=sin,Decimal.sinh=sinh,Decimal.sqrt=sqrt,Decimal.sub=sub,Decimal.tan=tan,Decimal.tanh=tanh,Decimal.trunc=trunc,void 0===obj&&(obj={}),obj&&!0!==obj.defaults)for(ps=["precision","rounding","toExpNeg","toExpPos"
,"maxE","minE","modulo","crypto"],i=0;i<ps.length;)obj.hasOwnProperty(p=ps[i++])||(obj[p]=this[p]);return Decimal.config(obj),Decimal}(DEFAULTS)).default=Decimal.Decimal=Decimal,LN10=new Decimal(LN10),PI=new Decimal(PI),"function"==typeof define&&define.amd?define("lib/decimal/decimal",[],function(){return Decimal}):"undefined"!=typeof module&&module.exports?module.exports=Decimal:(globalScope||(globalScope="undefined"!=typeof self&&self&&self.self==self?self:window),noConflict=globalScope.Decimal,Decimal.noConflict=function(){return globalScope.Decimal=noConflict,Decimal},globalScope.Decimal=Decimal)}(this),function(global,factory){
"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("lib/expr-eval/expr-eval",factory):global.exprEval=factory()}(this,function(){"use strict";var INUMBER="INUMBER",IOP1="IOP1",IOP2="IOP2",IOP3="IOP3",IVAR="IVAR",IFUNCOP="IFUNCOP",IFUNCALL="IFUNCALL",IEXPR="IEXPR",IMEMBER="IMEMBER";function Instruction(type,value){this.type=type,this.value=null!=value?value:0}function unaryInstruction(value){return new Instruction(IOP1,value)}function binaryInstruction(value){return new Instruction(IOP2,value)}function ternaryInstruction(value){return new Instruction(IOP3,value)}
function expressionToString(tokens,toJS){for(var n1,n2,n3,f,nstack=[],i=0;i<tokens.length;i++){var item=tokens[i],type=item.type;if(type===INUMBER)"number"==typeof item.value&&item.value<0?nstack.push("("+item.value+")"):nstack.push(escapeValue(item.value));else if(type===IOP2)n2=nstack.pop(),n1=nstack.pop(),f=item.value,toJS?"^"===f?nstack.push("Math.pow("+n1+", "+n2+")"):"and"===f?nstack.push("(!!"+n1+" && !!"+n2+")"):"or"===f?nstack.push("(!!"+n1+" || !!"+n2+")"):"||"===f?nstack.push("(String("+n1+") + String("+n2+"))"):"=="===f?nstack.push("("+n1+" === "+n2+")"):"!="===f?nstack.push("("+n1+" !== "+n2+")"):nstack.push("("+n1+" "+f+" "+n2+")"):nstack.push(
"("+n1+" "+f+" "+n2+")");else if(type===IOP3){if(n3=nstack.pop(),n2=nstack.pop(),n1=nstack.pop(),"?"!==(f=item.value))throw new Error("invalid Expression");nstack.push("("+n1+" ? "+n2+" : "+n3+")")}else if(type===IVAR)nstack.push(item.value);else if(type===IOP1)n1=nstack.pop(),"-"===(f=item.value)||"+"===f?nstack.push("("+f+n1+")"):toJS?"not"===f?nstack.push("(!"+n1+")"):"!"===f?nstack.push("fac("+n1+")"):nstack.push(f+"("+n1+")"):"!"===f?nstack.push("("+n1+"!)"):nstack.push("("+f+" "+n1+")");else if(type===IFUNCALL){for(var argCount=item.value,args=[];0<argCount--;)args.unshift(nstack.pop());f=nstack.pop(),nstack.push(f+"("+args.join(", ")+")")}else if(
type===IMEMBER)n1=nstack.pop(),nstack.push(n1+"."+item.value);else{if(type!==IEXPR)throw new Error("invalid Expression");nstack.push("("+expressionToString(item.value,toJS)+")")}}if(1<nstack.length)throw new Error("invalid Expression (parity)");return String(nstack[0])}function escapeValue(v){return"string"==typeof v?JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):v}function contains(array,obj){for(var i=0;i<array.length;i++)if(array[i]===obj)return!0;return!1}function getSymbols(tokens,symbols,options){for(var withMembers=!!(options=options||{}).withMembers,prevVar=null,i=0;i<tokens.length;i++){var item=tokens[i]
;item.type!==IVAR||contains(symbols,item.value)?item.type===IMEMBER&&withMembers&&null!==prevVar?prevVar+="."+item.value:item.type===IEXPR?getSymbols(item.value,symbols,options):null!==prevVar&&(contains(symbols,prevVar)||symbols.push(prevVar),prevVar=null):withMembers?prevVar=(null!==prevVar&&(contains(symbols,prevVar)||symbols.push(prevVar)),item.value):symbols.push(item.value)}null===prevVar||contains(symbols,prevVar)||symbols.push(prevVar)}function Expression(tokens,parser){this.tokens=tokens,this.parser=parser,this.unaryOps=parser.unaryOps,this.binaryOps=parser.binaryOps,this.ternaryOps=parser.ternaryOps,this.functions=parser.functions}
Instruction.prototype.toString=function(){switch(this.type){case INUMBER:case IOP1:case IOP2:case IOP3:case IVAR:case IFUNCOP:return this.value;case IFUNCALL:return"CALL "+this.value;case IMEMBER:return"."+this.value;default:return"Invalid Instruction"}},Expression.prototype.simplify=function(values){return values=values||{},new Expression(function simplify(tokens,unaryOps,binaryOps,ternaryOps,values){for(var n1,n2,n3,f,nstack=[],newexpression=[],i=0;i<tokens.length;i++){var item=tokens[i],type=item.type;if(type===INUMBER)nstack.push(item);else if(type===IVAR&&values.hasOwnProperty(item.value))item=new Instruction(INUMBER,values[item.value]),nstack.push(item
);else if(type===IOP2&&1<nstack.length)n2=nstack.pop(),n1=nstack.pop(),f=binaryOps[item.value],item=new Instruction(INUMBER,f(n1.value,n2.value)),nstack.push(item);else if(type===IOP3&&2<nstack.length)n3=nstack.pop(),n2=nstack.pop(),n1=nstack.pop(),"?"===item.value?nstack.push(n1.value?n2.value:n3.value):(f=ternaryOps[item.value],item=new Instruction(INUMBER,f(n1.value,n2.value,n3.value)),nstack.push(item));else if(type===IOP1&&0<nstack.length)n1=nstack.pop(),f=unaryOps[item.value],item=new Instruction(INUMBER,f(n1.value)),nstack.push(item);else if(type===IEXPR){for(;0<nstack.length;)newexpression.push(nstack.shift());newexpression.push(new Instruction(IEXPR
,simplify(item.value,unaryOps,binaryOps,ternaryOps,values)))}else if(type===IMEMBER&&0<nstack.length)n1=nstack.pop(),nstack.push(new Instruction(INUMBER,n1.value[item.value]));else{for(;0<nstack.length;)newexpression.push(nstack.shift());newexpression.push(item)}}for(;0<nstack.length;)newexpression.push(nstack.shift());return newexpression}(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,values),this.parser)},Expression.prototype.substitute=function(variable,expr){return expr instanceof Expression||(expr=this.parser.parse(String(expr))),new Expression(function substitute(tokens,variable,expr){for(var newexpression=[],i=0;i<tokens.length;i++){
var item=tokens[i],type=item.type;if(type===IVAR&&item.value===variable)for(var j=0;j<expr.tokens.length;j++){var replitem,expritem=expr.tokens[j];replitem=expritem.type===IOP1?unaryInstruction(expritem.value):expritem.type===IOP2?binaryInstruction(expritem.value):expritem.type===IOP3?ternaryInstruction(expritem.value):new Instruction(expritem.type,expritem.value),newexpression.push(replitem)}else type===IEXPR?newexpression.push(new Instruction(IEXPR,substitute(item.value,variable,expr))):newexpression.push(item)}return newexpression}(this.tokens,variable,expr),this.parser)},Expression.prototype.evaluate=function(values){return values=values||{},
function evaluate(tokens,expr,values){for(var n1,n2,n3,f,nstack=[],i=0;i<tokens.length;i++){var item=tokens[i],type=item.type;if(type===INUMBER)nstack.push(item.value);else if(type===IOP2)n2=nstack.pop(),n1=nstack.pop(),"and"===item.value?nstack.push(!!n1&&!!evaluate(n2,expr,values)):"or"===item.value?nstack.push(!!n1||!!evaluate(n2,expr,values)):(f=expr.binaryOps[item.value],nstack.push(f(n1,n2)));else if(type===IOP3)n3=nstack.pop(),n2=nstack.pop(),n1=nstack.pop(),"?"===item.value?nstack.push(evaluate(n1?n2:n3,expr,values)):(f=expr.ternaryOps[item.value],nstack.push(f(n1,n2,n3)));else if(type===IVAR)if(item.value in expr.functions)nstack.push(
expr.functions[item.value]);else{var v=values[item.value];if(void 0===v)throw new Error("undefined variable: "+item.value);nstack.push(v)}else if(type===IOP1)n1=nstack.pop(),f=expr.unaryOps[item.value],nstack.push(f(n1));else if(type===IFUNCOP){if(n2=nstack.pop(),n1=nstack.pop(),!(f=expr.functions[item.value]).apply||!f.call)throw new Error(f+" is not a function");nstack.push(f.apply(void 0,[n1,n2]))}else if(type===IFUNCALL){for(var argCount=item.value,args=[];0<argCount--;)args.unshift(nstack.pop());if(!(f=nstack.pop()).apply||!f.call)throw new Error(f+" is not a function");nstack.push(f.apply(void 0,args))}else if(type===IEXPR)nstack.push(item.value);else{
if(type!==IMEMBER)throw new Error("invalid Expression");n1=nstack.pop(),nstack.push(n1[item.value])}}if(1<nstack.length)throw new Error("invalid Expression (parity)");return nstack[0]}(this.tokens,this,values)},Expression.prototype.toString=function(){return expressionToString(this.tokens,!1)},Expression.prototype.symbols=function(options){options=options||{};var vars=[];return getSymbols(this.tokens,vars,options),vars},Expression.prototype.variables=function(options){options=options||{};var vars=[];getSymbols(this.tokens,vars,options);var functions=this.functions;return vars.filter(function(name){return!(name in functions)})},
Expression.prototype.toJSFunction=function(param,variables){var expr=this,f=new Function(param,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+expressionToString(this.simplify(variables).tokens,!0)+"; }");return function(){return f.apply(expr,arguments)}};var TOP="TOP";function Token(type,value,index){this.type=type,this.value=value,this.index=index}function TokenStream(parser,expression){this.pos=0,this.current=null,this.unaryOps=parser.unaryOps,this.binaryOps=parser.binaryOps,this.ternaryOps=parser.ternaryOps,this.functions=parser.functions,this.consts=parser.consts,this.expression=expression,
this.savedPosition=0,this.savedCurrent=null,this.options=parser.options}Token.prototype.toString=function(){return this.type+": "+this.value},TokenStream.prototype.newToken=function(type,value,pos){return new Token(type,value,null!=pos?pos:this.pos)},TokenStream.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},TokenStream.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},TokenStream.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator(
)||this.isString()||this.isParen()||this.isComma()||this.isNamedOp()||this.isFuncOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},TokenStream.prototype.isString=function(){var r=!1,startPos=this.pos,quote=this.expression.charAt(startPos);if("'"===quote||'"'===quote)for(var index=this.expression.indexOf(quote,startPos+1);0<=index&&this.pos<this.expression.length;){if(this.pos=index+1,"\\"!==this.expression.charAt(index-1)){var rawString=this.expression.substring(startPos+1,index);this.current=this.newToken("TSTRING",this.unescape(rawString),startPos),r=!0;break}
index=this.expression.indexOf(quote,index+1)}return r},TokenStream.prototype.isParen=function(){var c=this.expression.charAt(this.pos);return("("===c||")"===c)&&(this.current=this.newToken("TPAREN",c),this.pos++,!0)},TokenStream.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},TokenStream.prototype.isConst=function(){for(var startPos=this.pos,i=startPos;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()&&(i===this.pos||"_"!==c&&"."!==c&&(c<"0"||"9"<c)))break}if(startPos<i){var str=this.expression.substring(startPos,i);if(
str in this.consts)return this.current=this.newToken("TNUMBER",this.consts[str]),this.pos+=str.length,!0}return!1},TokenStream.prototype.isNamedOp=function(){for(var startPos=this.pos,i=startPos;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()&&(i===this.pos||"_"!==c&&(c<"0"||"9"<c)))break}if(startPos<i){var str=this.expression.substring(startPos,i);if(this.isOperatorEnabled(str)&&(str in this.binaryOps||str in this.unaryOps||str in this.ternaryOps))return this.current=this.newToken(TOP,str),this.pos+=str.length,!0}return!1},TokenStream.prototype.isFuncOp=function(){var str,c=this.expression.charAt(this.pos),
startPos=this.pos+1,i=startPos;if("@"===c){for(;i<this.expression.length&&((c=this.expression.charAt(i)).toUpperCase()!==c.toLowerCase()||!(i===startPos||"_"!==c&&(c<"0"||"9"<c)));i++);if(startPos<i&&(str=this.expression.substring(startPos,i))in this.functions)return this.current=this.newToken("TFUNCOP",str),this.pos=startPos+str.length,!0}return!1},TokenStream.prototype.isName=function(){for(var startPos=this.pos,i=startPos,hasLetter=!1;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()){if(i===this.pos&&("$"===c||"_"===c)){"_"===c&&(hasLetter=!0);continue}if(i===this.pos||!hasLetter||"_"!==c&&(c<"0"||"9"<c)
)break}else hasLetter=!0}if(hasLetter){var str=this.expression.substring(startPos,i);return this.current=this.newToken("TNAME",str),this.pos+=str.length,!0}return!1},TokenStream.prototype.isWhitespace=function(){for(var r=!1,c=this.expression.charAt(this.pos);!(" "!==c&&"\t"!==c&&"\n"!==c&&"\r"!==c||(r=!0,this.pos++,this.pos>=this.expression.length));)c=this.expression.charAt(this.pos);return r};var codePointPattern=/^[0-9a-f]{4}$/i;TokenStream.prototype.unescape=function(v){var index=v.indexOf("\\");if(index<0)return v;for(var buffer=v.substring(0,index);0<=index;){var c=v.charAt(++index);switch(c){case"'":buffer+="'";break;case'"':buffer+='"';break
;case"\\":buffer+="\\";break;case"/":buffer+="/";break;case"b":buffer+="\b";break;case"f":buffer+="\f";break;case"n":buffer+="\n";break;case"r":buffer+="\r";break;case"t":buffer+="\t";break;case"u":var codePoint=v.substring(index+1,index+5);codePointPattern.test(codePoint)||this.parseError("Illegal escape sequence: \\u"+codePoint),buffer+=String.fromCharCode(parseInt(codePoint,16)),index+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+c+'"')}++index;var backslash=v.indexOf("\\",index);buffer+=v.substring(index,backslash<0?v.length:backslash),index=backslash}return buffer},TokenStream.prototype.isComment=function(){
return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},TokenStream.prototype.isRadixInteger=function(){var radix,validDigit,pos=this.pos;if(pos>=this.expression.length-2||"0"!==this.expression.charAt(pos))return!1;if(++pos,"x"===this.expression.charAt(pos))radix=16,validDigit=/^[0-9a-f]$/i,++pos;else{if("b"!==this.expression.charAt(pos))return!1;radix=2,validDigit=/^[01]$/i,++pos}for(var valid=!1,startPos=pos;pos<this.expression.length;){var c=this.expression.charAt(pos);if(!validDigit.test(c))break;pos++,valid=!0}
return valid&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(startPos,pos),radix)),this.pos=pos),valid},TokenStream.prototype.isNumber=function(){for(var c,valid=!1,pos=this.pos,startPos=pos,resetPos=pos,foundDot=!1,foundDigits=!1;pos<this.expression.length&&("0"<=(c=this.expression.charAt(pos))&&c<="9"||!foundDot&&"."===c);)"."===c?foundDot=!0:foundDigits=!0,pos++,valid=foundDigits;if(valid&&(resetPos=pos),"e"===c||"E"===c){pos++;for(var acceptSign=!0,validExponent=!1;pos<this.expression.length;){if(c=this.expression.charAt(pos),!acceptSign||"+"!==c&&"-"!==c){if(!("0"<=c&&c<="9"))break;acceptSign=!(validExponent=!0)
}else acceptSign=!1;pos++}validExponent||(pos=resetPos)}return this.pos=valid?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(startPos,pos))),pos):resetPos,valid},TokenStream.prototype.isOperator=function(){var startPos=this.pos,c=this.expression.charAt(this.pos);if("+"===c||"-"===c||"*"===c||"/"===c||"%"===c||"^"===c||"?"===c||":"===c||"."===c)this.current=this.newToken(TOP,c);else if(""===c||""===c)this.current=this.newToken(TOP,"*");else if(">"===c)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(TOP,">="),this.pos++):this.current=this.newToken(TOP,">");else if("<"===c)"="===this.expression.charAt(
this.pos+1)?(this.current=this.newToken(TOP,"<="),this.pos++):this.current=this.newToken(TOP,"<");else if("|"===c){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(TOP,"||"),this.pos++}else if("="===c){if("="!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(TOP,"=="),this.pos++}else{if("!"!==c)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(TOP,"!="),this.pos++):this.current=this.newToken(TOP,c)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=startPos,!1)};var optionNameMap={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder",
"^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional"};function ParserState(parser,tokenStream,options){this.parser=parser,this.tokens=tokenStream,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==options.allowMemberAccess}TokenStream.prototype.isOperatorEnabled=function(op){var optionName=function(op){return optionNameMap.hasOwnProperty(op)?optionNameMap[op]:op}(op),operators=this.options.operators||{}
;return"in"===optionName?!!operators.in:!(optionName in operators&&!operators[optionName])},TokenStream.prototype.getCoordinates=function(){for(var column,line=0,newline=-1;line++,column=this.pos-newline,0<=(newline=this.expression.indexOf("\n",newline+1))&&newline<this.pos;);return{line:line,column:column}},TokenStream.prototype.parseError=function(msg){var coords=this.getCoordinates();throw new Error("parse error ["+coords.line+":"+coords.column+"]: "+msg)},ParserState.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},ParserState.prototype.tokenMatches=function(token,value){return void 0===value||(
Array.isArray(value)?contains(value,token.value):"function"==typeof value?value(token):token.value===value)},ParserState.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},ParserState.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},ParserState.prototype.accept=function(type,value){return!(this.nextToken.type!==type||!this.tokenMatches(this.nextToken,value))&&(this.next(),!0)},ParserState.prototype.expect=function(type,value){if(!this.accept(type,value)){var coords=this.tokens.getCoordinates();throw new Error(
"parse error ["+coords.line+":"+coords.column+"]: Expected "+(value||type))}},ParserState.prototype.parseAtom=function(instr){if(this.accept("TNAME"))instr.push(new Instruction(IVAR,this.current.value));else if(this.accept("TNUMBER"))instr.push(new Instruction(INUMBER,this.current.value));else if(this.accept("TSTRING"))instr.push(new Instruction(INUMBER,this.current.value));else{if(!this.accept("TPAREN","("))throw new Error("unexpected "+this.nextToken);this.parseExpression(instr),this.expect("TPAREN",")")}},ParserState.prototype.parseExpression=function(instr){this.parseConditionalExpression(instr)},ParserState.prototype.parseConditionalExpression=function(
instr){for(this.parseOrExpression(instr);this.accept(TOP,"?");){var trueBranch=[],falseBranch=[];this.parseConditionalExpression(trueBranch),this.expect(TOP,":"),this.parseConditionalExpression(falseBranch),instr.push(new Instruction(IEXPR,trueBranch)),instr.push(new Instruction(IEXPR,falseBranch)),instr.push(ternaryInstruction("?"))}},ParserState.prototype.parseOrExpression=function(instr){for(this.parseAndExpression(instr);this.accept(TOP,"or");){var falseBranch=[];this.parseAndExpression(falseBranch),instr.push(new Instruction(IEXPR,falseBranch)),instr.push(binaryInstruction("or"))}},ParserState.prototype.parseAndExpression=function(instr){for(
this.parseComparison(instr);this.accept(TOP,"and");){var trueBranch=[];this.parseComparison(trueBranch),instr.push(new Instruction(IEXPR,trueBranch)),instr.push(binaryInstruction("and"))}};var COMPARISON_OPERATORS=["==","!=","<","<=",">=",">","in"];ParserState.prototype.parseComparison=function(instr){for(this.parseAddSub(instr);this.accept(TOP,COMPARISON_OPERATORS);){var op=this.current;this.parseAddSub(instr),instr.push(binaryInstruction(op.value))}};var ADD_SUB_OPERATORS=["+","-","||"];ParserState.prototype.parseAddSub=function(instr){for(this.parseTerm(instr);this.accept(TOP,ADD_SUB_OPERATORS);){var op=this.current;this.parseTerm(instr),instr.push(
binaryInstruction(op.value))}};var TERM_OPERATORS=["*","/","%"];function add(a,b){return Number(a)+Number(b)}function sub(a,b){return a-b}function mul(a,b){return a*b}function div(a,b){return a/b}function mod(a,b){return a%b}function concat(a,b){return""+a+b}function equal(a,b){return a===b}function notEqual(a,b){return a!==b}function greaterThan(a,b){return b<a}function lessThan(a,b){return a<b}function greaterThanEqual(a,b){return b<=a}function lessThanEqual(a,b){return a<=b}function andOperator(a,b){return Boolean(a&&b)}function orOperator(a,b){return Boolean(a||b)}function inOperator(a,b){return contains(b,a)}function sinh(a){return(Math.exp(a)-Math.exp(
-a))/2}function cosh(a){return(Math.exp(a)+Math.exp(-a))/2}function tanh(a){return a===1/0?1:a===-1/0?-1:(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}function asinh(a){return a===-1/0?a:Math.log(a+Math.sqrt(a*a+1))}function acosh(a){return Math.log(a+Math.sqrt(a*a-1))}function atanh(a){return Math.log((1+a)/(1-a))/2}function log10(a){return Math.log(a)*Math.LOG10E}function neg(a){return-a}function not(a){return!a}function trunc(a){return a<0?Math.ceil(a):Math.floor(a)}function random(a){return Math.random()*(a||1)}function factorial(a){return gamma(a+1)}ParserState.prototype.parseTerm=function(instr){for(this.parseFactor(instr);this.accept(TOP,
TERM_OPERATORS);){var op=this.current;this.parseFactor(instr),instr.push(binaryInstruction(op.value))}},ParserState.prototype.parseFactor=function(instr){var unaryOps=this.tokens.unaryOps;if(this.save(),this.accept(TOP,function(token){return token.value in unaryOps}))if("-"!==this.current.value&&"+"!==this.current.value&&"TPAREN"===this.nextToken.type&&"("===this.nextToken.value)this.restore(),this.parseExponential(instr);else{var op=this.current;this.parseFactor(instr),instr.push(unaryInstruction(op.value))}else this.parseExponential(instr)},ParserState.prototype.parseExponential=function(instr){for(this.parsePostfixExpression(instr);this.accept(TOP,"^");
)this.parseFactor(instr),instr.push(binaryInstruction("^"))},ParserState.prototype.parsePostfixExpression=function(instr){for(this.parseFunctionOperator(instr);this.accept(TOP,"!");)instr.push(unaryInstruction("!"))},ParserState.prototype.parseFunctionOperator=function(instr){var op,functions=this.tokens.functions;function isCustomOperator(token){return token.value in functions}for(this.parseFunctionCall(instr);this.accept("TFUNCOP",isCustomOperator);)op=this.current,this.parseFactor(instr),instr.push(new Instruction(IFUNCOP,op.value))},ParserState.prototype.parseFunctionCall=function(instr){var unaryOps=this.tokens.unaryOps;if(this.accept(TOP,function(token
){return token.value in unaryOps})){var op=this.current;this.parseAtom(instr),instr.push(unaryInstruction(op.value))}else for(this.parseMemberExpression(instr);this.accept("TPAREN","(");)if(this.accept("TPAREN",")"))instr.push(new Instruction(IFUNCALL,0));else{var argCount=this.parseArgumentList(instr);instr.push(new Instruction(IFUNCALL,argCount))}},ParserState.prototype.parseArgumentList=function(instr){for(var argCount=0;!this.accept("TPAREN",")");)for(this.parseExpression(instr),++argCount;this.accept("TCOMMA");)this.parseExpression(instr),++argCount;return argCount},ParserState.prototype.parseMemberExpression=function(instr){for(this.parseAtom(instr
);this.accept(TOP,".");){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),instr.push(new Instruction(IMEMBER,this.current.value))}};var GAMMA_G=4.7421875,GAMMA_P=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function gamma(n){var t,x;if(function(value){return isFinite(value)&&value===Math.round(value)}(n)){if(n<=0)return isFinite(n
)?1/0:NaN;if(171<n)return 1/0;for(var value=n-2,res=n-1;1<value;)res*=value,value--;return 0===res&&(res=1),res}if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*gamma(1-n));if(171.35<=n)return 1/0;if(85<n){var twoN=n*n,threeN=twoN*n,fourN=threeN*n,fiveN=fourN*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*twoN)-139/(51840*threeN)-571/(2488320*fourN)+163879/(209018880*fiveN)+5246819/(75246796800*fiveN*n))}--n,x=GAMMA_P[0];for(var i=1;i<GAMMA_P.length;++i)x+=GAMMA_P[i]/(n+i);return t=n+GAMMA_G+.5,Math.sqrt(2*Math.PI)*Math.pow(t,n+.5)*Math.exp(-t)*x}function stringLength(s){return String(s).length}function hypot(){for(var sum=0,larg=0,
i=0;i<arguments.length;i++){var div,arg=Math.abs(arguments[i]);larg<arg?(sum=sum*(div=larg/arg)*div+1,larg=arg):sum+=0<arg?(div=arg/larg)*div:arg}return larg===1/0?1/0:larg*Math.sqrt(sum)}function condition(cond,yep,nope){return cond?yep:nope}function roundTo(value,exp){return void 0===exp||0==+exp?Math.round(value):(value=+value,exp=-+exp,isNaN(value)||"number"!=typeof exp||exp%1!=0?NaN:(value=value.toString().split("e"),+((value=(value=Math.round(+(value[0]+"e"+(value[1]?+value[1]-exp:-exp)))).toString().split("e"))[0]+"e"+(value[1]?+value[1]+exp:exp))))}function Parser(options){this.options=options||{},this.unaryOps={sin:Math.sin,cos:Math.cos,
tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||sinh,cosh:Math.cosh||cosh,tanh:Math.tanh||tanh,asinh:Math.asinh||asinh,acosh:Math.acosh||acosh,atanh:Math.atanh||atanh,sqrt:Math.sqrt,log:Math.log,ln:Math.log,lg:Math.log10||log10,log10:Math.log10||log10,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||trunc,"-":neg,"+":Number,exp:Math.exp,not:not,length:stringLength,"!":factorial},this.binaryOps={"+":add,"-":sub,"*":mul,"/":div,"%":mod,"^":Math.pow,"||":concat,"==":equal,"!=":notEqual,">":greaterThan,"<":lessThan,">=":greaterThanEqual,"<=":lessThanEqual,and:andOperator,or:orOperator,in:inOperator},
this.ternaryOps={"?":condition},this.functions={random:random,fac:factorial,min:Math.min,max:Math.max,hypot:Math.hypot||hypot,pyt:Math.hypot||hypot,pow:Math.pow,atan2:Math.atan2,if:condition,gamma:gamma,roundTo:roundTo},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Parser.prototype.parse=function(expr){var instr=[],parserState=new ParserState(this,new TokenStream(this,expr),{allowMemberAccess:this.options.allowMemberAccess});return parserState.parseExpression(instr),parserState.expect("TEOF","EOF"),new Expression(instr,this)},Parser.prototype.evaluate=function(expr,variables){return this.parse(expr).evaluate(variables)};var sharedParser=new Parser
;return Parser.parse=function(expr){return sharedParser.parse(expr)},Parser.evaluate=function(expr,variables){return sharedParser.parse(expr).evaluate(variables)},{Parser:Parser,Expression:Expression}}),define("util/mathsEvaluator",["lodash","lib/decimal/decimal","lib/expr-eval/expr-eval"],function(_,Decimal,exprEval){"use strict";var Parser=exprEval.Parser,defaultConfig={internalPrecision:100,degree:!1},defaultDecimalConfig={defaults:!0},decimalConfigEntries=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],parserConfigEntries=["operators"];function toPrecisionNumber(number,precision){var dot=number.indexOf(".");return 0<dot&&(
number=number.substr(0,dot+precision+1)),number}return function(config){var localConfig=_.defaults({},config,defaultConfig),decimalConfig=_.pick(localConfig,decimalConfigEntries),parserConfig=_.pick(localConfig,parserConfigEntries),parser=new Parser(parserConfig),ConfiguredDecimal=Decimal.set(_.isEmpty(decimalConfig)?defaultDecimalConfig:decimalConfig),EPSILON=new ConfiguredDecimal(2).pow(-52),PI=new ConfiguredDecimal(toPrecisionNumber(
"3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989"
,localConfig.internalPrecision)),E=new ConfiguredDecimal(toPrecisionNumber(
"2.7182818284590452353602874713526624977572470936999595749669676277240766303535475945713821785251664274274663919320030599218174135966290435729003342952605956307381323286279434907632338298807531952510190115738341879307021540891499348841675092447614606680822648001684774118537423454424371075390777449920695517027618386062613313845830007520449338265602976067371132007093287091274437470472306969772093101416928368190255151086574637721112523897844250569536967707854499699679468644549059879316368892300987931277361782154249992295763514822082698951936680331825288693984964651058209392398294887933203625094431173012381970684161403970198376793206832823764648042953118023287825098194558153017567173613320698112509961818815930416903515988885193458072738667385894228792284998920868058257492796104841984443634632449684875602336248270419786232090021609902353043699418491463140934317381436405462531520961836908887070167683964243781405927145635490613031072085103837505101157477041718986106873969655212671546889570350354"
,localConfig.internalPrecision)),mapAPI={unary:[{entry:"sin",action:function(a){return trigoOperator("sin",a)}},{entry:"cos",action:function(a){return trigoOperator("cos",a)}},{entry:"tan",action:function(a){return trigoOperator("tan",a)}},{entry:"asin",action:function(a){return inverseTrigoOperator("asin",a)}},{entry:"acos",action:function(a){return inverseTrigoOperator("acos",a)}},{entry:"atan",action:function(a){return inverseTrigoOperator("atan",a)}},{entry:"sinh",mapTo:"sinh"},{entry:"cosh",mapTo:"cosh"},{entry:"tanh",mapTo:"tanh"},{entry:"asinh",mapTo:"asinh"},{entry:"acosh",mapTo:"acosh"},{entry:"atanh",mapTo:"atanh"},{entry:"sqrt",mapTo:"sqrt"},{
entry:"cbrt",mapTo:"cbrt"},{entry:"log",mapTo:"log"},{entry:"ln",mapTo:"ln"},{entry:"lg",mapTo:"log"},{entry:"log10",mapTo:"log"},{entry:"abs",mapTo:"abs"},{entry:"ceil",mapTo:"ceil"},{entry:"floor",mapTo:"floor"},{entry:"round",mapTo:"round"},{entry:"trunc",mapTo:"trunc"},{entry:"-",mapTo:"neg"},{entry:"+",action:decimalNumber},{entry:"exp",mapTo:"exp"},{entry:"not",action:function(a){return!native(a)}},{entry:"!",action:useOrigin}],binary:[{entry:"+",mapTo:"add"},{entry:"-",mapTo:"sub"},{entry:"*",mapTo:"mul"},{entry:"/",mapTo:"div"},{entry:"%",mapTo:"mod"},{entry:"^",mapTo:"pow"},{entry:"==",mapTo:"equals"},{entry:"!=",action:function(a,b){
return!binaryOperator("equals",a,b)}},{entry:">",mapTo:"gt"},{entry:"<",mapTo:"lt"},{entry:">=",mapTo:"gte"},{entry:"<=",mapTo:"lte"},{entry:"and",action:function(a,b){return Boolean(native(a)&&native(b))}},{entry:"or",action:function(a,b){return Boolean(native(a)||native(b))}},{entry:"in",action:function(array,obj){return obj=native(obj),void 0!==_.find(array,function(el){return native(el)===obj})}}],ternaryOps:[{entry:"?",action:useOrigin}],functions:[{entry:"random",action:function(dp){return ConfiguredDecimal.random(dp)}},{entry:"fac",action:useOrigin},{entry:"min",mapTo:"min"},{entry:"max",mapTo:"max"},{entry:"hypot",action:useOrigin},{entry:"pyt",
action:useOrigin},{entry:"pow",mapTo:"pow"},{entry:"atan2",action:function(y,x){var result=functionOperator("atan2",y,x);return localConfig.degree?radianToDegree(result):result}},{entry:"if",action:useOrigin},{entry:"gamma",action:useOrigin},{entry:"roundTo",action:useOrigin},{entry:"nthrt",action:function(n,x){return x=decimalNumber(x),n=parseInt(n,10),x.isNeg()&&n%2!=1?decimalNumber(NaN):x.abs().pow(decimalNumber(1).div(n)).mul(Decimal.sign(x))}}],consts:[{entry:"PI",value:PI},{entry:"E",value:E},{entry:"EPSILON",value:EPSILON}]};function checkZero(number){return number.absoluteValue().lessThan(EPSILON)?new ConfiguredDecimal(0):number}function native(
number){return Decimal.isDecimal(number)?number.toNumber():"true"===number||!0===number||"false"!==number&&!1!==number&&number}function useOrigin(){var args=[].slice.call(arguments);return args.pop().apply(this,args.map(native))}function decimalNumber(number){return Decimal.isDecimal(number)||(number=new ConfiguredDecimal(number)),number}function radianToDegree(value){return decimalNumber(value).mul(180).div(PI)}function unaryOperator(operator,operand){if(operand=decimalNumber(operand),!_.isFunction(operand[operator]))throw new TypeError(operator+" is not a valid operator!");return operand[operator]()}function binaryOperator(operator,left,right){if(
left=decimalNumber(left),!_.isFunction(left[operator]))throw new TypeError(operator+" is not a valid operator!");return left[operator](decimalNumber(right))}function functionOperator(operator){var operands=[].slice.call(arguments,1);if(!_.isFunction(ConfiguredDecimal[operator]))throw new TypeError(operator+" is not a valid function!");return ConfiguredDecimal[operator].apply(ConfiguredDecimal,operands.map(decimalNumber))}function trigoOperator(operator,operand){if(!_.isFunction(Decimal[operator]))throw new TypeError(operator+" is not a valid operator!");return operand=localConfig.degree?decimalNumber(operand).mul(PI).div(180):decimalNumber(operand),
"tan"===operator&&operand.equals(PI.div(2))?new ConfiguredDecimal(NaN):checkZero(ConfiguredDecimal[operator](operand))}function inverseTrigoOperator(operator,operand){var result=checkZero(unaryOperator(operator,operand));return localConfig.degree?radianToDegree(result):result}function mapping(wrapper,origin,api){var fn;fn=api.value?api.value:api.action?_.partialRight(api.action,origin[api.entry]):_.partial(wrapper,api.mapTo),origin[api.entry]=fn}return _.forEach(mapAPI.unary,_.partial(mapping,unaryOperator,parser.unaryOps)),_.forEach(mapAPI.binary,_.partial(mapping,binaryOperator,parser.binaryOps)),_.forEach(mapAPI.ternaryOps,_.partial(mapping,
functionOperator,parser.ternaryOps)),_.forEach(mapAPI.functions,_.partial(mapping,functionOperator,parser.functions)),_.forEach(mapAPI.consts,_.partial(mapping,null,parser.consts)),function(expression,variables){var result;return _.isPlainObject(expression)&&(variables=variables||expression.variables,expression=expression.expression),{expression:expression,variables:variables,result:result=parser.parse(expression).evaluate(variables),value:native(result)}}}}),define("tpl!ui/maths/calculator/core/tpl/board",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="calculator">\n    <div class="screen"></div>\n    <div class="input"></div>\n    <div class="keyboard"></div>\n</div>'})}),define("ui/maths/calculator/core/board",["jquery","lodash","i18n","core/promise","core/collections","ui/component","ui/maths/calculator/core/areaBroker","ui/maths/calculator/core/terms","ui/maths/calculator/core/tokens","ui/maths/calculator/core/tokenizer","util/mathsEvaluator","tpl!ui/maths/calculator/core/tpl/board"],function($,_,__,Promise,collections,componentFactory,areaBrokerFactory,registeredTerms,tokensHelper,tokenizerFactory,mathsEvaluatorFactory,boardTpl
){"use strict";var defaultConfig={expression:"",position:0},rePrefixedTerm=/^@[a-zA-Z_]\w*$/;return function($container,pluginFactories,config){var mathsEvaluator,areaBroker,plugins={},expression="",variables=new collections.Map,commands=new collections.Map,position=0,tokenizer=tokenizerFactory(),tokens=null,calculator=componentFactory({getExpression:function(){return expression},setExpression:function(expr){return expression=String(expr||""),tokens=null,this.trigger("expressionchange",expression),this},getPosition:function(){return position},setPosition:function(pos){return position=Math.max(0,Math.min(parseInt(pos,10)||0,expression.length)),this.trigger(
"positionchange",position),this},getTokens:function(){return null===tokens&&(tokens=tokenizer.tokenize(expression)),tokens},getToken:function(){return this.getTokens()[this.getTokenIndex()]||null},getTokenIndex:function(){var index=0;return _.forEach(this.getTokens(),function(token,idx){position>=token.offset&&(index=idx)}),index},getTokenizer:function(){return tokenizer},getVariable:function(name){return variables.get(name)},hasVariable:function(name){return variables.has(name)},setVariable:function(name,value){var errValue;try{value=mathsEvaluator(value)}catch(err){errValue=value&&value.expression||value,(value=mathsEvaluator("0")).expression=errValue}
return variables.set(name,value),this.trigger("variableadd",name,value),this},deleteVariable:function(name){return variables.delete(name),this.trigger("variabledelete",name),this},getVariables:function(){var defs={};return variables.forEach(function(value,name){defs[name]=value.result}),defs},setVariables:function(defs){var self=this;return _.forEach(defs,function(value,name){self.setVariable(name,value)}),this},deleteVariables:function(){return variables.clear(),this.trigger("variabledelete",null),this.setLastResult("0"),this},setLastResult:function(result){return result&&!tokensHelper.containsError(result)||(result="0"),this.setVariable(
registeredTerms.ANS.value,result),this},getLastResult:function(){return this.getVariable(registeredTerms.ANS.value)},setCommand:function(name,label,description){return commands.set(name,{name:name,label:label,description:description}),this.trigger("commandadd",name),this},getCommand:function(name){return commands.get(name)},getCommands:function(){var defs={};return commands.forEach(function(value,name){defs[name]=value}),defs},hasCommand:function(name){return commands.has(name)},deleteCommand:function(name){return commands.delete(name),this.trigger("commanddelete",name),this},addTerm:function(name,term){var isIdentifier,needsSpace,value,
tokensList=this.getTokens(),index=this.getTokenIndex(),currentToken=tokensList[index],nextToken=tokensList[index+1];function tokenNeedsSpace(token){return tokensHelper.isIdentifier(token)||isIdentifier&&!tokensHelper.isSeparator(token)}return _.isPlainObject(term)&&void 0!==term.value?(value=term.value,tokensHelper.isOperator(term.type)||rePrefixedTerm.test(term.value)||1!==tokensList.length||("NUM0"!==currentToken.type||"DOT"===name)&&"ANS"!==currentToken.type?(expression&&!tokensHelper.isSeparator(term.type)&&(isIdentifier=tokensHelper.isIdentifier(term.type),needsSpace=tokenNeedsSpace(currentToken),position&&needsSpace&&(value=" "+value),(
!position&&needsSpace||position<expression.length&&tokenNeedsSpace(nextToken))&&(value+=" ")),this.insert(value)):this.replace(value),this.trigger("termadd",name,term),this.trigger("termadd-"+name,term),this):this.trigger("termerror",new TypeError("Invalid term: "+name))},useTerm:function(name){var term;return rePrefixedTerm.test(name)?(name=name.substring(1),(term=_.clone(registeredTerms[name])).value="@"+term.value):term=registeredTerms[name],void 0===term?this.trigger("termerror",new TypeError("Invalid term: "+name)):this.addTerm(name,term)},useTerms:function(names){return"string"==typeof names&&(names=names.split(/\s+/)),_.forEach(names,
this.useTerm.bind(this)),this},useVariable:function(name){return variables.has(name)?this.addTerm("VAR_"+name.toUpperCase(),{label:name,value:name,type:"variable",description:__("Variable %s",name)}):this.trigger("termerror",new TypeError("Invalid variable: "+name))},useCommand:function(name){return commands.has(name)?(this.trigger.apply(this,["command"].concat([].slice.call(arguments))),this.trigger.apply(this,["command-"+name].concat([].slice.call(arguments,1))),this):this.trigger("commanderror",new TypeError("Invalid command: "+name))},replace:function(newExpression,newPosition){var oldExpression=expression,oldPosition=position;return this.setExpression(
newExpression).setPosition(void 0!==newPosition?newPosition:expression.length),this.trigger("replace",oldExpression,oldPosition),this},insert:function(subExpression){var oldExpression=expression,oldPosition=position;return this.setExpression(expression.substr(0,position)+subExpression+expression.substr(position)).setPosition(position+subExpression.length),this.trigger("insert",oldExpression,oldPosition),this},clear:function(){return this.setExpression("").setPosition(0),this.trigger("clear"),this},evaluate:function(){var result=null;try{result=expression.trim()?mathsEvaluator(expression,this.getVariables()):mathsEvaluator("0"),this.trigger("evaluate",result)
}catch(e){this.trigger("syntaxerror",e)}return result},runPlugins:function(method){var execStack=[];return _.forEach(plugins,function(plugin){_.isFunction(plugin[method])&&execStack.push(plugin[method]())}),Promise.all(execStack)},getPlugins:function(){return _.toArray(plugins)},getPlugin:function(name){return plugins[name]},getAreaBroker:function(){return areaBroker},setupMathsEvaluator:function(){return mathsEvaluator=mathsEvaluatorFactory(this.getConfig().maths),this},getMathsEvaluator:function(){return mathsEvaluator}},defaultConfig).setTemplate(boardTpl).before("init",function(){this.setupMathsEvaluator(),this.setLastResult("0"),
this.config.expression&&this.setExpression(this.config.expression),this.config.position&&this.setPosition(this.config.position),this.setCommand("clear",__("Clear"),__("Clear expression")).setCommand("clearAll",__("Clear All"),__("Clear all data")).setCommand("execute",__("Execute"),__("Compute the expression")).setCommand("var",__("Variable"),__("Use a variable")).setCommand("term",__("Term"),__("Use a term")).on("command-term",this.useTerms.bind(this)).on("command-var",this.useVariable.bind(this)).on("command-execute",this.evaluate.bind(this)).on("command-clearAll",this.deleteVariables.bind(this)).on("command-clear command-clearAll",this.clear.bind(this))}
).after("evaluate",function(result){this.setLastResult(result)}).after("init",function(){this.render($container)}).before("render",function(){var self=this,pluginsConfig=this.getConfig().plugins||{},$element=this.getElement();return areaBroker=areaBrokerFactory($element,{screen:$element.find(".screen"),input:$element.find(".input"),keyboard:$element.find(".keyboard")}),_.forEach(pluginFactories,function(pluginFactory){var plugin=pluginFactory(self,self.getAreaBroker()),pluginName=plugin.getName();pluginsConfig[pluginName]&&plugin.setConfig(pluginsConfig[pluginName]),plugins[plugin.getName()]=plugin}),this.runPlugins("install").then(function(){
return self.runPlugins("init")}).then(function(){return self.runPlugins("render")}).then(function(){self.trigger("ready")}).catch(function(err){self.trigger("error",err)})}).on("destroy",function(){var self=this;return this.runPlugins("destroy").then(function(){self.off(".calculator"),mathsEvaluator=areaBroker=tokenizer=null,variables.clear(),plugins={}})});return _.defer(function(){calculator.init(config)}),calculator}}),define("ui/maths/calculator/core/plugin",["lodash","core/plugin"],function(_,pluginFactory){"use strict";return function(provider,defaultConfig){return pluginFactory(provider,_.defaults({hostName:"calculator"},defaultConfig))}}),define(
"ui/maths/calculator/plugins/core/degrad",["i18n","util/namespace","ui/maths/calculator/core/plugin"],function(__,nsHelper,pluginFactory){"use strict";return pluginFactory({name:"degrad",install:function(){this.getCalculator().setCommand("degree",__("Degree"),__("Set the trigonometric function to work in degrees")).setCommand("radian",__("Radian"),__("Set the trigonometric function to work in radians"))},init:function(){var calculator=this.getCalculator();function getMathsConfig(){var config=calculator.getConfig();return config.maths||(config.maths={}),config.maths}function setupMathsEvaluator(){var config=calculator.getConfig(),
degree=config.maths&&config.maths.degree;calculator.setState("degree",degree).setState("radian",!degree).setupMathsEvaluator()}setupMathsEvaluator(),calculator.on(nsHelper.namespaceAll("command-degree","degrad"),function(){getMathsConfig().degree=!0,setupMathsEvaluator()}).on(nsHelper.namespaceAll("command-radian","degrad"),function(){getMathsConfig().degree=!1,setupMathsEvaluator()})},destroy:function(){this.getCalculator().deleteCommand("degree").deleteCommand("radian").setState("degree",!1).setState("radian",!1).off(".degrad")}})}),define("ui/maths/calculator/plugins/core/history",["lodash","i18n","util/namespace","ui/maths/calculator/core/terms",
"ui/maths/calculator/core/tokens","ui/maths/calculator/core/plugin"],function(_,__,nsHelper,registeredTerms,tokensHelper,pluginFactory){"use strict";return pluginFactory({name:"history",install:function(){this.getCalculator().setCommand("historyClear",__("Clear History"),__("Clear history")).setCommand("historyGet",__("Get History"),__("Get the history list")).setCommand("historyUp",__("Previous"),__("Remind the previous expression in the history")).setCommand("historyDown",__("Next"),__("Remind the next expression in the history"))},init:function(){var history,cursor,calculator=this.getCalculator(),current="";function reset(){history=[],cursor=0}
function getMemoryAt(position){return 0<=position&&position<history.length?history[position]:position===history.length?{value:current}:null}function remind(position){var memory,expression=calculator.getExpression();cursor===history.length&&position!==cursor?current=expression:history[cursor].current=expression,(memory=getMemoryAt(position))&&(cursor=position,calculator.replace(memory.current||memory.value),memory.current=null)}reset(),calculator.on(nsHelper.namespaceAll("evaluate","history"),function(){var expression=tokensHelper.renderLastResult(calculator.getExpression(),calculator.getLastResult()),last=getMemoryAt(history.length-1),memory=getMemoryAt(
cursor);last&&expression===last.value||history.push({value:expression}),memory.current=null,cursor=history.length}).on(nsHelper.namespaceAll("command-historyClear command-clearAll","history"),reset).on(nsHelper.namespaceAll("command-historyUp","history"),function(){remind(cursor-1)}).on(nsHelper.namespaceAll("command-historyDown","history"),function(){remind(cursor+1)}).on(nsHelper.namespaceAll("command-historyGet","history"),function(){calculator.trigger("history",_.pluck(history,"value"))}).on(nsHelper.namespaceAll("destroy","history"),function(){reset()})},destroy:function(){this.getCalculator().deleteCommand("historyClear").deleteCommand("historyUp"
).deleteCommand("historyDown").deleteCommand("historyGet").off(".history")}})}),define("ui/maths/calculator/plugins/core/remind",["lodash","i18n","util/namespace","ui/maths/calculator/core/plugin"],function(_,__,nsHelper,pluginFactory){"use strict";return pluginFactory({name:"remind",install:function(){this.getCalculator().setCommand("remind",__("Remind"),__("Remind the recorded value")).setCommand("remindLast",__("Remind Last"),__("Remind the last value")).setCommand("remindStore",__("Store"),__("Store the value a variable")).setCommand("remindClear",__("Clear"),__("Clear the stored variables"))},init:function(){var calculator=this.getCalculator()
;calculator.on(nsHelper.namespaceAll("evaluate","remind"),function(result){calculator.setVariable("last",result)}).on(nsHelper.namespaceAll("command-remind","remind"),function(){calculator.hasVariable("mem")&&calculator.useVariable("mem")}).on(nsHelper.namespaceAll("command-remindLast","remind"),function(){calculator.hasVariable("last")&&calculator.useVariable("last")}).on(nsHelper.namespaceAll("command-remindStore","remind"),function(){calculator.hasVariable("last")&&calculator.setVariable("mem",calculator.getVariable("last"))}).on(nsHelper.namespaceAll("command-remindClear command-clearAll destroy","remind"),function(){calculator.hasVariable("mem"
)&&calculator.deleteVariable("mem")}).on(nsHelper.namespaceAll("destroy","remind"),function(){calculator.hasVariable("last")&&calculator.deleteVariable("last")})},destroy:function(){this.getCalculator().deleteCommand("remind").deleteCommand("remindLast").deleteCommand("remindStore").deleteCommand("remindClear").off(".remind")}})}),define("ui/maths/calculator/plugins/core/stepNavigation",["lodash","i18n","util/namespace","ui/maths/calculator/core/plugin"],function(_,__,nsHelper,pluginFactory){"use strict";var pluginName="stepNavigation";return pluginFactory({name:pluginName,install:function(){this.getCalculator().setCommand("stepMoveLeft",__("Move Left"),__(
"Move the cursor one step on the left")).setCommand("stepMoveRight",__("Move Right"),__("Move the cursor one step on the right")).setCommand("stepDeleteLeft",__("Delete Left"),__("Delete the term on the left side of the cursor")).setCommand("stepDeleteRight",__("Delete Right"),__("Delete the term on the right side of the cursor"))},init:function(){var calculator=this.getCalculator();function remove(expression,position,length){length&&(expression=calculator.getExpression(),calculator.setExpression(expression.substr(0,position)+expression.substr(position+length)).setPosition(position))}function removeToken(expression,token){var from,length;if(token){for(
expression=calculator.getExpression(),from=token.offset,length=token.value.length;from+length<expression.length&&" "===expression.charAt(from+length);)length++;remove(expression,from,length)}}calculator.on(nsHelper.namespaceAll("command-stepMoveLeft",pluginName),function(){var position=calculator.getPosition(),tokens=calculator.getTokens(),index=calculator.getTokenIndex(),token=calculator.getToken(),offset=position;token&&0<position?position===token.offset&&(token=0<index?tokens[index-1]:null):token=null,(offset=token?token.offset:0)!==position&&calculator.setPosition(offset)}).on(nsHelper.namespaceAll("command-stepMoveRight",pluginName),function(){
var expression=calculator.getExpression(),position=calculator.getPosition(),tokens=calculator.getTokens(),index=calculator.getTokenIndex(),token=calculator.getToken(),offset=expression.length;token&&index<tokens.length-1&&(token=tokens[index+1])&&(offset=token.offset),offset!==position&&calculator.setPosition(offset)}).on(nsHelper.namespaceAll("command-stepDeleteLeft",pluginName),function(){var expression=calculator.getExpression(),position=calculator.getPosition(),tokens=calculator.getTokens(),index=calculator.getTokenIndex(),token=calculator.getToken();token&&(position>token.offset?removeToken(expression,token):0<index?removeToken(expression,
tokens[index-1]):0<position&&remove(expression,0,token.offset))}).on(nsHelper.namespaceAll("command-stepDeleteRight",pluginName),function(){var expression=calculator.getExpression(),position=calculator.getPosition(),token=calculator.getToken();token&&position>=token.offset&&position<token.offset+token.value.length&&removeToken(expression,token)})},destroy:function(){this.getCalculator().deleteCommand("stepMoveLeft").deleteCommand("stepMoveRight").deleteCommand("stepDeleteLeft").deleteCommand("stepDeleteRight").off("."+pluginName)}})}),define("ui/maths/calculator/pluginsLoader",["context","core/pluginLoader","ui/maths/calculator/plugins/core/degrad",
"ui/maths/calculator/plugins/core/history","ui/maths/calculator/plugins/core/remind","ui/maths/calculator/plugins/core/stepNavigation"],function(context,pluginLoaderFactory,pluginDegradFactory,pluginHistoryFactory,pluginRemindFactory,pluginStepNavigationFactory){"use strict";return function(loadedPlugins,dynamicPlugins){var defaultPlugins={core:[pluginDegradFactory,pluginHistoryFactory,pluginRemindFactory,pluginStepNavigationFactory]};return pluginLoaderFactory(_.merge({},defaultPlugins,loadedPlugins)).addList(dynamicPlugins).load(context.bundle)}}),define("css!ui/maths/calculator/css/calculator",[],function(){}),define(
"ui/maths/calculator/calculatorComponent",["lodash","i18n","core/promise","util/namespace","ui/dynamicComponent","ui/maths/calculator/core/board","ui/maths/calculator/pluginsLoader","css!ui/maths/calculator/css/calculator.css"],function(_,__,Promise,nsHelper,dynamicComponent,calculatorBoardFactory,pluginsLoader){"use strict";var defaultConfig={title:__("Calculator"),preserveAspectRatio:!1,width:240,height:360,minWidth:150,minHeight:220,alternativeTemplate:null};return function(config){var calculator,calculatorComponent;return calculatorComponent=dynamicComponent({getCalculator:function(){return calculator}},defaultConfig).on("rendercontent",function($content
){var self=this;return pluginsLoader(this.getConfig().loadedPlugins,this.getConfig().dynamicPlugins).then(function(loadedPlugins){return new Promise(function(resolve){calculator=calculatorBoardFactory($content,loadedPlugins,self.getConfig().calculator).on("ready",function(){var initialWidth=self.getElement().width(),initialHeight=self.getElement().height(),initialFontSize=parseInt(self.getCalculator().getElement().css("fontSize"),10)||10;self.on("resize",function(){self.getElement()&&self.getCalculator().getElement().css("fontSize",initialFontSize*Math.min(self.getElement().width()/initialWidth,self.getElement().height()/initialHeight))}).setContentSize(
calculator.getElement().outerWidth(),calculator.getElement().outerHeight()).setState("ready").trigger("ready"),resolve()})})})}).on("destroy",function(){return new Promise(function(resolve){calculator?calculator.after("destroy",function(){calculator=null,resolve()}).destroy():resolve()})}),_.defer(function(){calculatorComponent.init(config)}),calculatorComponent}}),define("tpl!ui/maths/calculator/plugins/keyboard/templateKeyboard/defaultTemplate",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer=""
;return buffer+='<div class="calculator-keyboard">\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="SQRT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SQRT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="LPAR"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.LPAR)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="RPAR"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.RPAR)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="clear"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.CLEAR)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="clearAll"><span>',((stack1="function"==typeof(
stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.CLEARALL)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="CBRT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.CBRT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM7"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM7
)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM8"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM8)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM9"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM9)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="DIV"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.DIV)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="POW NUM2"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POW2)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM4"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM4)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM5"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM5)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM6"><span>',((
stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM6)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="MUL"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.MUL)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="POW NUM3"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels
)||!1===stack1?stack1:stack1.POW3)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM1"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM1)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM2"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM2)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM3"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM3)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="SUB"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SUB)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="POW"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POWY)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM0"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM0)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="DOT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.DOT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key execute" data-command="execute"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.EXECUTE)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="ADD"><span>',((
stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SUB)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+="</span></button>\n    </div>\n</div>"})}),define("ui/maths/calculator/plugins/keyboard/templateKeyboard/templateKeyboard",["jquery","lodash","util/namespace","ui/maths/calculator/core/plugin","ui/maths/calculator/core/labels","tpl!ui/maths/calculator/plugins/keyboard/templateKeyboard/defaultTemplate"],function($,_,nsHelper,pluginFactory,labels,defaultKeyboardTpl){"use strict";var pluginName="templateKeyboard";return pluginFactory({name:pluginName,init:function(){},render:function(){
var calculator=this.getCalculator(),areaBroker=calculator.getAreaBroker(),pluginConfig=this.getConfig(),templateConfig=_.merge({labels:labels},pluginConfig);if(!_.isFunction(pluginConfig.layout))throw new TypeError("The keyboard plugin requires a template to render!");this.$layout=$(pluginConfig.layout(templateConfig)).on(nsHelper.namespaceAll("click",pluginName),".key",function(){var $key=$(this).closest(".key"),command=$key.data("command"),param=$key.data("param");command&&calculator.useCommand(command,param)}),areaBroker.getKeyboardArea().append(this.$layout)},destroy:function(){var calculator=this.getCalculator();this.$layout&&(this.$layout.off(
"."+pluginName).remove(),this.$layout=null),calculator.off("."+pluginName)}},{layout:defaultKeyboardTpl})}),define("ui/scroller",["lodash","jquery","core/promise","ui/autoscroll","util/shortcut"],function(_,$,Promise,autoscroll,shortcuts){"use strict";var ns=".scroller";return{scrollTo:function(element,container,scrollSpeed){return new Promise(function(resolve){var currentScrollTop,scrollTop,$element=$(element),$container=$(container||$element.parent());$element.length&&$container.length?(currentScrollTop=$container.scrollTop(),(scrollTop=$element.offset().top-$container.offset().top+currentScrollTop)!==currentScrollTop?$container.animate({
scrollTop:scrollTop},scrollSpeed).promise().done(resolve):resolve()):resolve()})},disableScrolling:function(){["MouseScrollUp","MouseScrollDown","ArrowUp","ArrowDown"].forEach(function(shortcutName){shortcuts.add(shortcutName+ns,function(e){e.preventDefault()},{prevent:!1})})},enableScrolling:function(){shortcuts.remove(ns)}}}),define("tpl!ui/maths/calculator/plugins/screen/simpleScreen/history",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="";return buffer+='<div class="history-line">\n    <div class="history-expression">',((stack1=(
helper=(helpers=this.merge(helpers,Handlebars.helpers)).expression)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.expression)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+='</div>\n    <div class="history-result">',((stack1=(helper=helpers.result)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.result)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>\n</div>"})}),define("tpl!ui/maths/calculator/plugins/screen/simpleScreen/defaultTemplate",["handlebars"],function(hb){return hb.template(function(Handlebars,
depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="";return buffer+='<div class="calculator-screen simple-screen">\n    <div class="screen-panel history">',((stack1=(helper=(helpers=this.merge(helpers,Handlebars.helpers)).history)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.history)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+='</div>\n    <div class="screen-panel expression">',((stack1=(helper=helpers.expression)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.expression)?helper.call(depth0,{
hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>\n</div>"})}),define("ui/maths/calculator/plugins/screen/simpleScreen/simpleScreen",["jquery","lodash","i18n","util/namespace","ui/scroller","ui/maths/calculator/core/terms","ui/maths/calculator/core/tokens","ui/maths/calculator/core/plugin","tpl!ui/maths/calculator/plugins/screen/simpleScreen/history","tpl!ui/maths/calculator/plugins/screen/simpleScreen/defaultTemplate"],function($,_,__,nsHelper,scrollHelper,registeredTerms,tokensHelper,pluginFactory,historyTpl,defaultScreenTpl){"use strict";var pluginName="simpleScreen";return pluginFactory({name:pluginName,init:function(){
var calculator=this.getCalculator();function reset(){calculator.replace(calculator.getConfig().expression||"0")}reset(),calculator.after(nsHelper.namespaceAll("expressionchange",pluginName),function(expression){expression.trim()||_.defer(reset)}).after(nsHelper.namespaceAll("evaluate",pluginName),function(){calculator.replace(registeredTerms.ANS.value)}).on(nsHelper.namespaceAll("clear",pluginName),reset)},render:function(){var self=this,calculator=this.getCalculator(),areaBroker=calculator.getAreaBroker(),pluginConfig=this.getConfig(),tokenizer=calculator.getTokenizer();function autoScroll($container,sel){scrollHelper.scrollTo($container.find(
":last-child "+(sel||"")),$container)}function showExpression(tokens){self.controls.$expression.html(tokensHelper.render(tokens,calculator.getVariables())),autoScroll(self.controls.$expression)}if(!_.isFunction(pluginConfig.layout))throw new TypeError("The screen plugin requires a template to render!");this.$layout=$(pluginConfig.layout(_.defaults({expression:tokensHelper.render(calculator.getTokens(),calculator.getVariables())},pluginConfig))),this.controls={$history:this.$layout.find(".history"),$expression:this.$layout.find(".expression")},calculator.on(nsHelper.namespaceAll("command-clearAll",pluginName),function(){self.controls.$history.empty()}).on(
nsHelper.namespaceAll("expressionchange",pluginName),function(){calculator.setState("error",!1),showExpression(calculator.getTokens())}).on(nsHelper.namespaceAll("evaluate",pluginName),function(result){self.controls.$history.html(historyTpl({expression:tokensHelper.render(calculator.getTokens(),calculator.getVariables()),result:tokensHelper.render(tokenizer.tokenize(result),calculator.getVariables())})),autoScroll(self.controls.$history,".history-result")}).after(nsHelper.namespaceAll("evaluate",pluginName),function(result){tokensHelper.containsError(result.value)&&showExpression(tokenizer.tokenize(result))}).on(nsHelper.namespaceAll("syntaxerror",pluginName
),function(){calculator.setState("error",!0),showExpression(tokenizer.tokenize(calculator.getExpression()+"#"))}),areaBroker.getScreenArea().append(this.$layout)},destroy:function(){var calculator=this.getCalculator();this.$layout&&(this.$layout.off("."+pluginName).remove(),this.$layout=null),this.controls=null,calculator.off("."+pluginName)}},{layout:defaultScreenTpl})}),define("ui/maths/calculator/defaultCalculator",["lodash","ui/maths/calculator/calculatorComponent","ui/maths/calculator/plugins/keyboard/templateKeyboard/templateKeyboard","ui/maths/calculator/plugins/screen/simpleScreen/simpleScreen"],function(_,calculatorComponent,pluginKeyboardFactory,
pluginScreenFactory){"use strict";return function(config){var defaultPluginsConfig={};return config&&config.keyboardLayout&&(defaultPluginsConfig.templateKeyboard={layout:config.keyboardLayout}),config&&config.screenLayout&&(defaultPluginsConfig.simpleScreen={layout:config.screenLayout}),config=_.merge({loadedPlugins:{keyboard:[pluginKeyboardFactory],screen:[pluginScreenFactory]},calculator:{plugins:defaultPluginsConfig}},_.omit(config,["keyboardLayout","screenLayout"])),calculatorComponent(config)}}),define("tpl!ui/maths/calculator/tpl/basicKeyboard",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="";return buffer+='<div class="calculator-keyboard">\n    <div class="row">\n        <button class="key command" data-command="historyUp"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.HISTORYUP)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="historyDown"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.HISTORYDOWN)?stack1.apply(depth0):stack1
)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="stepDeleteLeft"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.BACKSPACE)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="clear"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.CLEARALL)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="LPAR"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.LPAR)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="RPAR"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.RPAR)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="POW"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POWY)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="SQRT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SQRT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operand" data-command="term" data-param="NUM7"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM7)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM8"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM8)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM9"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM9)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="DIV"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.DIV)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operand" data-command="term" data-param="NUM4"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM4)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM5"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM5)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM6"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM6)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="MUL"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.MUL)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operand" data-command="term" data-param="NUM1"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM1)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM2"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM2)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM3"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM3)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="SUB"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SUB)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operand" data-command="term" data-param="NUM0"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM0)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="DOT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.DOT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key execute" data-command="execute"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.EXECUTE)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="ADD"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.ADD)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+="</span></button>\n    </div>\n</div>"})}),define("tpl!ui/maths/calculator/tpl/basicScreen",["handlebars"],function(hb){
return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="";return buffer+='<div class="calculator-screen simple-screen">\n    <div class="screen-panel expression">',((stack1=(helper=(helpers=this.merge(helpers,Handlebars.helpers)).expression)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.expression)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>\n</div>"})}),define("ui/maths/calculator/basicCalculator",["lodash","ui/maths/calculator/defaultCalculator",
"tpl!ui/maths/calculator/tpl/basicKeyboard","tpl!ui/maths/calculator/tpl/basicScreen"],function(_,defaultCalculatorFactory,keyboardTpl,screenTpl){"use strict";return function(config){return defaultCalculatorFactory(_.merge({calculator:{plugins:{templateKeyboard:{layout:keyboardTpl},simpleScreen:{layout:screenTpl}}}},config))}}),define("ui/maths/calculator/plugins/modifiers/sign",["lodash","i18n","util/namespace","ui/maths/calculator/core/plugin","ui/maths/calculator/core/tokens","ui/maths/calculator/core/terms"],function(_,__,nsHelper,pluginFactory,tokensHelper,registeredTerms){"use strict";var refuseExplicitPositive=["LPAR","SUB","ADD","MUL","DIV","MOD",
"POW","ASSIGN"],strategies=[function(index,tokens){var token=tokens[index]||null,type=tokensHelper.getType(token),result=null;if(tokensHelper.isDigit(type)&&0<=index){for(;index&&tokensHelper.isDigit(type);)token=tokens[--index]||null,type=tokensHelper.getType(token);result=tokensHelper.isDigit(type)&&0===index?insertNegativeSign(token):applySignChange(index,tokens)}return result},function(index,tokens){var token=tokens[index]||null,type=tokensHelper.getType(token),result=null;return tokensHelper.isOperator(type)&&0<=index&&("SUB"===token.type?result=replaceByPositiveSign(token,index,tokens):"ADD"===token.type?result=replaceByNegativeSign(token
):"FAC"===token.type&&0<index&&(result=applyStrategies(index-1,tokens))),result},function(index,tokens){var token=tokens[index]||null,type=tokensHelper.getType(token),result=null;return tokensHelper.isIdentifier(type)&&0<=index&&(result=0===index?insertNegativeSign(token):applySignChange(index-1,tokens)),result},function(index,tokens){var token=tokens[index]||null,type=tokensHelper.getType(token),result=null,count=0;if(tokensHelper.isAggregator(type)&&0<=index){for("RPAR"===token.type&&count++;index&&("LPAR"!==token.type||count);)"RPAR"===(token=tokens[--index]||null).type&&count++,"LPAR"===token.type&&count--;count||"LPAR"!==token.type||(
result=0===index?insertNegativeSign(token):applySignChange(index-1,tokens))}return result}];function applyStrategies(index,tokens){var result=null;return _.forEach(strategies,function(strategy){return!(result=strategy(index,tokens))}),result}function applySignChange(index,tokens){var token=tokens[index]||null,nextToken=tokens[index+1]||null,type=tokensHelper.getType(token),result=null;return token&&(tokensHelper.isOperator(type)?"SUB"===token.type?result=replaceByPositiveSign(token,index,tokens):"ADD"===token.type?result=replaceByNegativeSign(token):nextToken&&(result=insertNegativeSign(nextToken)):nextToken&&(tokensHelper.isFunction(type
)||"LPAR"===token.type)&&(result=insertNegativeSign(nextToken))),result}function insertNegativeSign(token){return{offset:token.offset,length:0,sign:registeredTerms.SUB.value,move:registeredTerms.SUB.value.length}}function replaceByNegativeSign(token){return{offset:token.offset,length:token.value.length,sign:registeredTerms.SUB.value,move:registeredTerms.SUB.value.length-token.value.length}}function replaceByPositiveSign(token,index,tokens){var allowExplicit=index&&function(token){return!token||-1===refuseExplicitPositive.indexOf(token.type)&&!tokensHelper.isFunction(tokensHelper.getType(token))}(tokens[index-1]);return{offset:token.offset,
length:token.value.length,sign:allowExplicit?registeredTerms.ADD.value:"",move:(allowExplicit?registeredTerms.ADD.value.length:0)-token.value.length}}return pluginFactory({name:"sign",install:function(){this.getCalculator().setCommand("sign",__("Sign change"),__("Change the sign of the current operand"))},init:function(){var calculator=this.getCalculator();calculator.before(nsHelper.namespaceAll("command-sign","sign"),function(){calculator.getExpression()===registeredTerms.ANS.value&&calculator.replace(tokensHelper.stringValue(calculator.getLastResult()))}).on(nsHelper.namespaceAll("command-sign","sign"),function(){var result,tokens=calculator.getTokens(),
index=calculator.getTokenIndex(),expression=calculator.getExpression();"0"!==expression&&(result=applyStrategies(index,tokens))&&(expression=function(str,index,length,sub){return str.substring(0,index)+sub+str.substring(index+length)}(expression,result.offset,result.length,result.sign),calculator.replace(expression,calculator.getPosition()+result.move))})},destroy:function(){this.getCalculator().deleteCommand("sign").off(".sign")}})}),define("tpl!ui/maths/calculator/tpl/scientificKeyboard",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,
Handlebars.helpers),data=data||{};var stack1,buffer="";return buffer+='<div class="calculator-keyboard">\n    <div class="row">\n        <button class="key switch first" data-command="degree"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.DEGREE)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key switch last" data-command="radian"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.RADIAN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <span class="spacer">',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SPACER)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span>\n        <span class="spacer">',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SPACER)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span>\n        <button class="key command" data-command="historyUp"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.HISTORYUP)?stack1.apply(depth0):stack1
)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="historyDown"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.HISTORYDOWN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="stepDeleteLeft"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.BACKSPACE)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key command" data-command="clear"><span>',
((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.CLEARALL)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="SIN"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SIN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="COS"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels
)||!1===stack1?stack1:stack1.COS)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="TAN"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.TAN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key constant" data-command="term" data-param="PI"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.PI)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="LPAR"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.LPAR)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="RPAR"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.RPAR)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key variable" data-command="var" data-param="ans"><span>',((
stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.ANS)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="DIV"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.DIV)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="ASIN"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels
)||!1===stack1?stack1:stack1.ASIN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="ACOS"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.ACOS)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="ATAN"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.ATAN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="FAC"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.FAC)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM7"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM7)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM8"><span>',((
stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM8)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM9"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM9)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="MUL"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.MUL)?stack1.apply(
depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="POW NUM2"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POW2)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="POW NUM3"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POW3)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="POW"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POWY)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="POW SUB NUM1"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POWMINUSONE)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM4"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM4)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM5"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM5)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM6"><span>',((
stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM6)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="SUB"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SUB)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="SQRT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels
)||!1===stack1?stack1:stack1.SQRT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="CBRT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.CBRT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="@NTHRT"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NTHRT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="MUL NUM1 NUM0 POW"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.POW10)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM1"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM1)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM2"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM2)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM3"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM3)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="ADD"><span>',((
stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.ADD)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n    </div>\n    <div class="row">\n        <button class="key operator" data-command="term" data-param="LOG10"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.LOG)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="LN"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels
)||!1===stack1?stack1:stack1.LN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operator" data-command="term" data-param="EXP"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.EXPX)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key constant" data-command="term" data-param="E"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.E)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),
buffer+='</span></button>\n        <button class="key operator" data-command="sign"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.SIGN)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="NUM0"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.NUM0)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key operand" data-command="term" data-param="DOT"><span>',((
stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.DOT)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+='</span></button>\n        <button class="key execute" data-command="execute"><span>',((stack1="function"==typeof(stack1=null==(stack1=depth0&&depth0.labels)||!1===stack1?stack1:stack1.EXECUTE)?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+="</span></button>\n    </div>\n</div>"})}),define("tpl!ui/maths/calculator/tpl/scientificScreen",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
data=data||{};var stack1,helper,buffer="";return buffer+='<div class="calculator-screen simple-screen">\n    <div class="screen-panel history">',((stack1=(helper=(helpers=this.merge(helpers,Handlebars.helpers)).history)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.history)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+='</div>\n    <div class="screen-panel expression">',((stack1=(helper=helpers.expression)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.expression)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),
buffer+="</div>\n</div>"})}),define("ui/maths/calculator/scientificCalculator",["lodash","i18n","ui/maths/calculator/defaultCalculator","ui/maths/calculator/plugins/modifiers/sign","tpl!ui/maths/calculator/tpl/scientificKeyboard","tpl!ui/maths/calculator/tpl/scientificScreen"],function(_,__,defaultCalculatorFactory,pluginSign,keyboardTpl,screenTpl){"use strict";var defaultConfig={title:__("Scientific Calculator"),width:450,height:400,minWidth:250,minHeight:220};return function(config){return defaultCalculatorFactory(_.merge({loadedPlugins:{modifiers:[pluginSign]},calculator:{plugins:{templateKeyboard:{layout:keyboardTpl},simpleScreen:{layout:screenTpl}}}},
defaultConfig,config))}}),define("tpl!ui/mediaEditor/plugins/mediaDimension/tpl/mediaDimension",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="media-sizer media-sizer-synced">\n\n    <div class="media-sizer-responsive-toggle">\n        <label>\n        <input type="checkbox" ',((stack1=helpers.if.call(depth0,depth0&&depth0.responsive,{hash:{},inverse:this.noop,fn:this.program(1,
function(depth0,data){return'checked="checked"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' class="media-mode-switch"/>\n        <span class="icon-checkbox"></span>\n        '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Responsive mode",options):helperMissing.call(depth0,"__","Responsive mode",options)))+'\n        </label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="warning"></span>\n\n        <div class="tooltip-content">\n            '+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Media resize along with their container, e.g. 50% means half of the container size not half of the media size.",options):helperMissing.call(depth0,"__","Media resize along with their container, e.g. 50% means half of the container size not half of the media size.",options)))+'\n        </div>\n    </div>\n\n\n    <div class="media-sizer-percent">\n        <label for="media-sizer-percent-width">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Size",options):helperMissing.call(depth0,"__","Size",options))
)+'</label>\n        <span class="item-editor-unit-input-box" style="display:-moz-box;">\n            <input type="text" name="width" id="media-sizer-percent-width" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n            <span class="unit-indicator">%</span>\n        </span>\n\n        <div class="media-sizer-reset media-sizer-reset-percent" data-unit="percent">\n            <span class="icon-reset"></span>\n        </div>\n\n        <div class="media-sizer-slider-box">\n            <div class="media-sizer-slider"></div>\n        </div>\n    </div>\n\n    <div class="media-sizer-pixel">\n        <div class="media-sizer-sync">\n            <span class="icon-link"></span>\n        </div>\n        <div>\n            <label for="media-sizer-pixel-width">'+escapeExpression(
(options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Width",options):helperMissing.call(depth0,"__","Width",options)))+'</label>\n            <span class="item-editor-unit-input-box" style="display:-moz-box;">\n                <input type="text" name="width" id="media-sizer-pixel-width" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n                <span class="unit-indicator">px</span>\n            </span>\n            </div>\n        <div>\n            <label for="media-sizer-pixel-height">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Height",
options):helperMissing.call(depth0,"__","Height",options)))+'</label>\n            <span class="item-editor-unit-input-box" style="display:-moz-box;">\n                <input type="text" name="height" id="media-sizer-pixel-height" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n                <span class="unit-indicator">px</span>\n            </span>\n        </div>\n        <div class="media-sizer-reset media-sizer-reset-pixel" data-unit="pixel">\n            <span class="icon-reset"></span>\n        </div>\n    </div>\n</div>'})}),define("ui/mediaEditor/plugins/mediaDimension/helper",["lib/gamp/gamp"],function(gamp){"use strict"
;var parseVal=function(val,precision){return"string"==typeof val&&(val=parseFloat(val)),val||(val=0),gamp.round(val,precision)},getActualRatio=function(conf){return 0<conf.sizeProps.px.current.width&&0<conf.sizeProps.px.current.height&&(conf.sizeProps.ratio.current=gamp.round(conf.sizeProps.px.current.width/conf.sizeProps.px.current.height,conf.precision)),(conf.denyCustomRatio?conf.sizeProps.ratio.natural:conf.sizeProps.ratio.current)||1},applyNewPercent=function(val,conf){return conf.sizeProps["%"].current.width=val,100<conf.sizeProps["%"].current.width&&(conf.sizeProps["%"].current.width=100),conf.sizeProps["%"].current.width<1&&(
conf.sizeProps["%"].current.width=1),conf};return{applyDimensions:function(conf,dimensions){return conf.precision=conf&&conf.hasOwnProperty("precision")?parseInt(conf.precision,10):5,dimensions&&(dimensions.hasOwnProperty("width")&&(conf=function(conf,width,maxWidth){var ratio=getActualRatio(conf),val=parseVal(width,conf.precision);return conf.sizeProps.px.current.width=val,(conf=applyNewPercent(gamp.round(100*val/maxWidth,conf.precision),conf)).syncDimensions?conf.sizeProps.px.current.height=gamp.round(val/ratio,conf.precision):getActualRatio(conf),conf}(conf,dimensions.width,dimensions.maxWidth)),dimensions.hasOwnProperty("height")&&(conf=function(conf,
height,maxWidth){var ratio=getActualRatio(conf),val=parseVal(height,conf.precision);return conf.sizeProps.px.current.height=val,conf.syncDimensions?(conf.sizeProps.px.current.width=gamp.round(val*ratio,conf.precision),conf=applyNewPercent(gamp.round(100*val/maxWidth,conf.precision),conf)):getActualRatio(conf),conf}(conf,dimensions.height,dimensions.maxWidth)),dimensions.hasOwnProperty("percent")&&(conf=function(conf,percent,maxWidth){return(percent=parseVal(percent,conf.precision))<0?percent=0:100<percent&&(percent=100),(conf=applyNewPercent(gamp.round(percent,conf.precision),conf)).sizeProps.ratio.current=conf.sizeProps.ratio.natural,
conf.sizeProps.px.current.width=gamp.round(maxWidth*conf.sizeProps["%"].current.width/100,conf.precision),conf.sizeProps.px.current.height=gamp.round(conf.sizeProps.px.current.width/conf.sizeProps.ratio.natural,conf.precision),conf}(conf,dimensions.percent,dimensions.maxWidth))),conf},round:function(val,precision){return gamp.round(val,0<precision&&precision<100?precision:5)},getMediaContainerWidth:function(media){return media.$container.innerWidth()}}}),define("css!ui/mediaEditor/plugins/mediaDimension/style",[],function(){}),define("ui/mediaEditor/plugins/mediaDimension/mediaDimensionComponent",["jquery","lodash","ui/component",
"tpl!ui/mediaEditor/plugins/mediaDimension/tpl/mediaDimension","ui/mediaEditor/plugins/mediaDimension/helper","nouislider","ui/tooltip","css!ui/mediaEditor/plugins/mediaDimension/style"],function($,_,component,tpl,helper){"use strict";var defaultConfig={showResponsiveToggle:!0,showSync:!0,showReset:!0,sizeProps:{px:{current:{width:0,height:0}},"%":{current:{width:0,height:null}},ratio:{natural:1,current:1},currentUtil:"%",slider:{min:1,max:100,start:100}},denyCustomRatio:!1,syncDimensions:!0,width:0,height:0,minWidth:0,maxWidth:0,precision:5};return function($container,media,config){var $blocks,$slider,$fields,$template,initialConfig,
calculateCurrentSizes=function(conf){var mediaContainerWidth=helper.getMediaContainerWidth(media);return helper.applyDimensions(conf,{width:mediaContainerWidth<conf.sizeProps.px.natural.width?mediaContainerWidth:conf.sizeProps.px.natural.width,maxWidth:helper.getMediaContainerWidth(media)})},mediaDimensionComponent=component({reset:function(){var syncDim=initialConfig.syncDimensions;return this.is("rendered")&&(initialConfig.sizeProps.px.current.width=media.$node[0].naturalWidth,initialConfig.sizeProps.px.current.height=media.$node[0].naturalHeight,initialConfig.sizeProps.ratio.current=initialConfig.sizeProps.ratio.natural,initialConfig.syncDimensions=!0,
initialConfig=calculateCurrentSizes(initialConfig),mediaDimensionComponent.update(),initialConfig.syncDimensions=syncDim,this.trigger("reset",initialConfig)),this},update:function(){$slider.val(initialConfig.sizeProps["%"].current.width),$fields["%"].width.val(Math.round(initialConfig.sizeProps["%"].current.width)),$fields.px.width.val(Math.round(initialConfig.sizeProps.px.current.width)),$fields.px.height.val(Math.round(initialConfig.sizeProps.px.current.height)),this.trigger("change",initialConfig)}},defaultConfig);return mediaDimensionComponent.on("init",function(){var mediaProps={px:{current:{width:media.width,height:media.height},natural:{
width:media.$node[0].naturalWidth?media.$node[0].naturalWidth:media.width,height:media.$node[0].naturalHeight?media.$node[0].naturalHeight:media.height}},"%":{current:{width:100}}};(initialConfig=this.getConfig()).sizeProps=_.defaults(mediaProps,initialConfig.sizeProps,defaultConfig.sizeProps),initialConfig.sizeProps.ratio.natural=helper.round(initialConfig.sizeProps.px.natural.width/initialConfig.sizeProps.px.natural.height,initialConfig.precision),initialConfig.responsive=void 0===initialConfig.responsive||initialConfig.responsive,initialConfig.sizeProps.currentUtil=initialConfig.responsive?"%":"px",this.render($container)}).on("render",function(){
var $mediaSizer,$elt,_blocks,$responsiveToggleField,checkMode,field,dimensions,_fields;initialConfig=this.getConfig(),($template=$(tpl({responsive:initialConfig.responsive}))).appendTo(this.getContainer()),$mediaSizer=$template.find(".media-sizer"),!0!==initialConfig.syncDimensions||$mediaSizer.hasClass("media-sizer-synced")||$mediaSizer.addClass("media-sizer-synced"),_blocks={},$responsiveToggleField=($elt=$template).find(".media-mode-switch"),checkMode=function(){$responsiveToggleField.is(":checked")?(initialConfig.responsive=!0,_blocks.px.hide(),_blocks["%"].show(),initialConfig.sizeProps.currentUtil="%"):(initialConfig.responsive=!1,_blocks["%"].hide(),
_blocks.px.show(),initialConfig.sizeProps.currentUtil="px"),$fields&&($fields["%"].width.val()>$slider.max&&$fields["%"].width.val($slider.max),initialConfig=helper.applyDimensions(initialConfig,{percent:$fields["%"].width.val(),maxWidth:helper.getMediaContainerWidth(media)}),mediaDimensionComponent.update())},initialConfig.showResponsiveToggle||$elt.addClass("media-sizer-responsivetoggle-off"),_(["px","%"]).forEach(function(unit){_blocks[unit]=$elt.find(".media-sizer-"+("px"===unit?"pixel":"percent")),_blocks[unit].prop("unit",unit),_blocks[unit].find("input").data("unit",unit)}),$responsiveToggleField.on("click",function(){checkMode()}),
$responsiveToggleField.prop("checked",initialConfig.responsive),checkMode(),$blocks=_blocks,$slider=function($elt){var slider;return(slider=$elt.find(".media-sizer-slider")).prop("unit","%"),slider.noUiSlider({start:initialConfig.sizeProps.slider.start,range:{min:initialConfig.sizeProps.slider.min,max:initialConfig.sizeProps.slider.max}}).on("slide",function(){var percent=parseFloat($(this).val()+"");helper.applyDimensions(initialConfig,{percent:percent,maxWidth:helper.getMediaContainerWidth(media)}),mediaDimensionComponent.update()}),slider}($template),dimensions=["width","height"],_fields={},_($blocks).forOwn(function($block,unit){_fields[unit]={},
$blocks[unit].find("input").each(function(){_(dimensions).forEach(function(dim){field=$blocks[unit].find('[name="'+dim+'"]'),_fields[unit][dim]=field.length?field:$("<input>"),_fields[unit][dim].prop({unit:unit,dimension:dim}),_fields[unit][dim].val(initialConfig.sizeProps[unit].current[dim]),_fields[unit][dim].on("keydown",function(e){var chars,$field=$(this),c=e.keyCode,specChars=(chars=[8,37,39,46],-1===$field.val().indexOf(".")&&(chars.push(190),chars.push(110)),chars),allowed=_.contains(specChars,c)||48<=c&&c<=57||96<=c&&c<=105;return allowed||e.preventDefault(),allowed}),_fields[unit][dim].on("keyup blur sliderchange",function(){var newDimensions,val,
$field=$(this),value=$field.val().replace(/,/g,".");$field.val(value),"string"!=typeof(val=value)&&(val+=""),val.match(/\.[0]*$/)||(value>$field.data("max")?($field.val($field.data("max")),value=$field.data("max")+""):value<$field.data("min")&&($field.val($field.data("min")),value=$field.data("min")+""),(newDimensions="%"===$field.prop("unit")?{percent:initialConfig.sizeProps["%"].current.width=value}:"height"===$field.prop("dimension")?{height:value}:{width:value}).maxWidth=helper.getMediaContainerWidth(media),initialConfig=helper.applyDimensions(initialConfig,newDimensions),mediaDimensionComponent.update())})})})}),$fields=_fields,function($elt){
var $mediaSizer=$elt.find(".media-sizer"),$btn=$elt.find(".media-sizer-sync");initialConfig.showSync||($btn.hide(),$mediaSizer.addClass("media-sizer-sync-off")),$btn.on("click",function(){var $sizerEl=$(this).parents(".media-sizer");$sizerEl.toggleClass("media-sizer-synced"),initialConfig.syncDimensions=$sizerEl.hasClass("media-sizer-synced")})}($template),function($elt){var $btn=$elt.find(".media-sizer-reset");initialConfig.showReset||$elt.find(".media-sizer").addClass("media-sizer-reset-off"),$btn.on("click",function(e){return e.preventDefault(),mediaDimensionComponent.reset(),!1})}($template),void 0===media.width?initialConfig=calculateCurrentSizes(
initialConfig):initialConfig.responsive?initialConfig=helper.applyDimensions(initialConfig,{percent:media.width,maxWidth:helper.getMediaContainerWidth(media)}):(initialConfig.sizeProps.px.current={width:media.width,height:media.height},initialConfig.sizeProps["%"].current.width=helper.round(100*media.width/helper.getMediaContainerWidth(media),initialConfig.precision)),mediaDimensionComponent.update()}).on("destroy",function(){$template.remove()}),_.defer(function(){mediaDimensionComponent.init(config)}),mediaDimensionComponent}}),define("tpl!ui/mediaEditor/tpl/editor",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,
data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="";return buffer+='<div class="media-editor">\n    ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.mediaAlignment)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'<div class="media-align"></div>'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.mediaDimension)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){
return'<div class="media-dimension"></div>'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"})}),define("ui/mediaEditor/mediaEditorComponent",["jquery","lodash","ui/component","ui/mediaEditor/plugins/mediaDimension/mediaDimensionComponent","tpl!ui/mediaEditor/tpl/editor"],function($,_,component,mediaDimensionComponent,tpl){"use strict";var defaultConfig={mediaDimension:{active:!1}};return function($container,media,config){var plugins=[],mediaEditorComponent=component({},defaultConfig);return mediaEditorComponent.setTemplate(tpl).on("init",function(){if(!media||!media.$node||!media.$node.length)throw new Error(
"mediaEditorComponent requires media.$node");if(!media||!media.$container||!media.$container.length)throw new Error("mediaEditorComponent requires media.$container");this.render($container)}).on("render",function(){var plugin,self=this,$dimensionTools=$(".media-dimension",this.getTemplate());this.getConfig().mediaDimension.active&&(plugin=mediaDimensionComponent($dimensionTools,media,{responsive:media.responsive}).on("change",function(conf){media.responsive=conf.responsive,conf.responsive?(media.width=conf.sizeProps["%"].current.width,media.height=null):(media.width=conf.sizeProps.px.current.width,media.height=conf.sizeProps.px.current.height),self.trigger(
"change",media)}),plugins.push(plugin))}).on("destroy",function(){_.forEach(plugins,function(plugin){plugin.destroy()})}),_.defer(function(){mediaEditorComponent.init(config)}),mediaEditorComponent}}),define("tpl!ui/mediaplayer/tpl/player",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,data){var stack1,buffer="";return buffer+="\n            ",((
stack1=helpers.each.call(depth0,depth0&&depth0.sources,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        "}function program3(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <div class="media video youtube" data-video-src="',stack1=(helper=helpers.src)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.src)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-video-id="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0
,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-type="youtube"></div>\n            '}function program5(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n        <video class="media video" poster="',stack1=(helper=helpers.poster)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.poster)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" controls ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.cors,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+=">\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.sources,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Your browser doesnt support the video player.",options):helperMissing.call(depth0,"__","Your browser doesnt support the video player.",options)))+"\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.link,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n        </video>\n        "}function program6(depth0,data){return"crossorigin"}function program8(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <source src="',stack1=(helper=helpers.src)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.src)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" type="',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            '}function program10(depth0,data){var stack1,
helper,options,buffer="";return buffer+='\n            <a href="',stack1=(helper=helpers.link)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.link)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Please download the video and view offline.",options):helperMissing.call(depth0,"__","Please download the video and view offline.",options)))+"</a>\n            "}function program13(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n            <a href="',stack1=(
helper=helpers.link)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.link)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Please download the track and listen offline.",options):helperMissing.call(depth0,"__","Please download the track and listen offline.",options)))+"</a>\n            "}return buffer+='<div class="mediaplayer ',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data
}):helper,buffer+=escapeExpression(stack1)+'">\n    <div class="player">\n    ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.video,{hash:{},inverse:self.program(12,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n        <audio class="media audio" controls ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.cors,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.sources,{hash:{},inverse:self.noop,fn:self.program(8,
program8,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Your browser doesnt support the audio player.",options):helperMissing.call(depth0,"__","Your browser doesnt support the audio player.",options)))+"\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.link,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </audio>\n    "},data),fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+="\n        ",((
stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.is)||!1===stack1?stack1:stack1.youtube,{hash:{},inverse:self.program(5,program5,data),fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        <div class="overlay">\n            <a class="action play" data-control="play"><span class="icon icon-play" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Play",options):helperMissing.call(depth0,"__","Play",options))
)+'"></span></a>\n            <a class="action play" data-control="pause"><span class="icon icon-pause" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Pause",options):helperMissing.call(depth0,"__","Pause",options)))+'"></span></a>\n        </div>\n    </div>\n    <div class="controls">\n        <div class="bar">\n            <div class="control actions playback">\n                <a class="action play" data-control="play" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Play",options):helperMissing.call(depth0,"__","Play",
options)))+'"><span class="icon icon-play"></span></a>\n                <a class="action play" data-control="pause" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Pause",options):helperMissing.call(depth0,"__","Pause",options)))+'"><span class="icon icon-pause"></span></a>\n            </div>\n            <div class="control seek"><div class="slider"></div></div>\n            <div class="control infos timer">\n                <span class="info time" data-control="time-cur" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Current playback position",options):helperMissing.call(depth0,"__","Current playback position",options)))+'">00:00</span>\n                <span class="info time" data-control="time-end" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Total duration",options):helperMissing.call(depth0,"__","Total duration",options)))+'">00:00</span>\n            </div>\n            <div class="control actions sound">\n                <div class="volume"><div class="slider"></div></div>\n                <a class="action mute" data-control="mute" title="'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Mute",options):helperMissing.call(depth0,"__","Mute",options)))+'"><span class="icon icon-sound"></span></a>\n                <a class="action mute" data-control="unmute" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Restore sound",options):helperMissing.call(depth0,"__","Restore sound",options)))+'"><span class="icon icon-mute"></span></a>\n            </div>\n        </div>\n    </div>\n    <div class="error">\n        <div class="message">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__
)?helper.call(depth0,"This media cannot be played!",options):helperMissing.call(depth0,"__","This media cannot be played!",options)))+"</div>\n    </div>\n</div>"})}),define("css!ui/mediaplayer/css/player",[],function(){}),define("ui/mediaplayer",["jquery","lodash","i18n","async","urlParser","core/eventifier","core/mimetype","core/store","tpl!ui/mediaplayer/tpl/player","css!ui/mediaplayer/css/player","nouislider"],function($,_,__,async,UrlParser,eventifier,mimetype,store,playerTpl){"use strict";var _ns=".mediaplayer",_reYoutube=/([?&\/]v[=\/])([\w-]+)([&\/]?)/,_reAppleMobiles=/ip(hone|od)/i,_slice=[].slice,_defaults={type:"video/mp4",video:{width:480,
height:270,minWidth:200,minHeight:200},audio:{width:400,height:30,minWidth:200,minHeight:36},options:{volume:Math.floor(80),startMuted:!1,maxPlays:0,replayTimeout:0,canPause:!0,canSeek:!0,loop:!1,autoStart:!1}},_mimeTypes={"video/webm":'video/webm; codecs="vp8, vorbis"',"video/mp4":'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',"video/ogg":'video/ogg; codecs="theora, vorbis"',"audio/mpeg":"audio/mpeg;","audio/mp4":'audio/mp4; codecs="mp4a.40.5"',"audio/ogg":'audio/ogg; codecs="vorbis"',"audio/wav":'audio/wav; codecs="1"'},_extractYoutubeId=function(url){var res=_reYoutube.exec(url);return res&&res[2]||url},_ensureNumber=function(value){return value=parseFloat(
value),isFinite(value)?value:0},_leadingZero=function(n,len){for(var value=n.toString();value.length<len;)value="0"+value;return value},_timerFormat=function(time){var seconds=Math.floor(time%60),minutes=Math.floor(time/60)%60,hours=Math.floor(time/3600),parts=[];return hours&&parts.push(hours),parts.push(_leadingZero(minutes,2)),parts.push(_leadingZero(seconds,2)),parts.join(":")},_checkSupport=function(media,mimeType){var support=!!media.canPlayType;return mimeType&&support&&(support=!!media.canPlayType(_mimeTypes[mimeType]||mimeType).replace(/no/,"")),support},_support={canPlay:function(type,mime){if(type)switch(type.toLowerCase()){case"audio":
return this.canPlayAudio(mime);case"youtube":case"video":return this.canPlayVideo(mime);default:return!1}return this.canPlayAudio()&&this.canPlayVideo()},canPlayAudio:function(mime){return this._mediaAudio||(this._mediaAudio=document.createElement("audio")),_checkSupport(this._mediaAudio,mime)},canPlayVideo:function(mime){return this._mediaVideo||(this._mediaVideo=document.createElement("video")),_checkSupport(this._mediaVideo,mime)},canControl:function(){return!_reAppleMobiles.test(navigator.userAgent)}},_youtubeManager={injected:!1,ready:!1,pending:[],add:function(elem,player,options){this.ready?this.create(elem,player,options):(this.pending.push([elem,
player,options]),this.injected||this.injectApi())},remove:function(elem,player){var pending=this.pending;_.forEach(pending,function(args,idx){args&&elem===args[0]&&player===args[1]&&(pending[idx]=null)})},create:function(elem,player,options){var $elem;if(!this.ready)return this.add(elem,player,options);options||(options={}),$elem=$(elem),new window.YT.Player($elem.get(0),{height:$elem.width(),width:$elem.height(),videoId:$elem.data("videoId"),playerVars:{autoplay:0,controls:options.controls?1:0,rel:0,showinfo:0,wmode:"transparent",modestbranding:1,disablekb:1,playsinline:1,enablejsapi:1,origin:location.hostname},events:{onReady:player.onReady.bind(player),
onStateChange:player.onStateChange.bind(player)}})},apiReady:function(){var self=this,pending=this.pending;this.pending=[],this.ready=!0,_.forEach(pending,function(args){args&&self.create.apply(self,args)})},isApiReady:function(){var apiReady=void 0!==window.YT&&void 0!==window.YT.Player;return apiReady&&!this.ready&&_youtubeManager.apiReady(),apiReady},injectApi:function(){var self=this;self.isApiReady()||require(["https://www.youtube.com/iframe_api"],function(){var check=function(){self.isApiReady()||setTimeout(check,100)};check()}),this.injected=!0}},_nativePlayer=function(mediaplayer){var $media,media,player,played;return mediaplayer&&(player={
init:function(){var mediaElem,result=!1;return $media=mediaplayer.$media,media=null,played=!1,$media&&((mediaElem=$media.get(0))&&mediaElem.canPlayType&&(media=mediaElem,result=!0),mediaplayer.is("nogui")||$media.removeAttr("controls"),$media.on("play"+_ns,function(){played=!0,mediaplayer._onPlay()}).on("pause"+_ns,function(){mediaplayer._onPause()}).on("ended"+_ns,function(){played=!1,mediaplayer._onEnd()}).on("timeupdate"+_ns,function(){mediaplayer._onTimeUpdate()}).on("loadstart",function(){media.networkState===HTMLMediaElement.NETWORK_NO_SOURCE&&mediaplayer._onError()}).on("error"+_ns,function(){
media.networkState===HTMLMediaElement.NETWORK_NO_SOURCE?mediaplayer._onError():(mediaplayer._onRecoverError(),media.networkState===HTMLMediaElement.NETWORK_LOADING&&mediaplayer.is("playing")&&mediaplayer.render())}).on("loadedmetadata"+_ns,function(){mediaplayer.is("error")&&mediaplayer._onRecoverError(),mediaplayer._onReady()})),result},destroy:function(){$media&&$media.off(_ns).attr("controls",""),this.stop(),media=$media=null,played=!1},getPosition:function(){return media?media.currentTime:0},getDuration:function(){return media?media.duration:0},getVolume:function(){var value=0;return media&&(value=100*parseFloat(media.volume)+0),value},
setVolume:function(value){media&&(media.volume=(parseFloat(value)-0)/100)},setSize:function(width,height){$media&&$media.width(width).height(height)},seek:function(value){media&&(media.currentTime=parseFloat(value),played||this.play())},play:function(){media&&media.play()},pause:function(){media&&media.pause()},stop:function(){media&&played&&(media.currentTime=media.duration)},mute:function(state){media&&(media.muted=!!state)},isMuted:function(){return!!media&&!!media.muted},addMedia:function(url,type){return type=type||_defaults.type,!(media&&!_checkSupport(media,type))&&(!(!url||!$media)&&($media.append('<source src="'+url+'" type="'+(
_mimeTypes[type]||type)+'" />'),!0))},setMedia:function(url,type){return!!$media&&($media.empty(),this.addMedia(url,type))}}),player},_players={audio:_nativePlayer,video:_nativePlayer,youtube:function(mediaplayer){var $media,media,player,interval,destroyed,initWidth,initHeight;function loopEvents(callback){_.forEach(["onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange"],callback)}return mediaplayer&&(player={init:function(){return $media=mediaplayer.$media,media=null,destroyed=!1,$media&&_youtubeManager.add($media,this,{controls:mediaplayer.is("nogui")}),!!$media},onReady:function(event){var callbacks=this._callbacks
;media=event.target,$media=$(media.getIframe()),this._callbacks=null,destroyed?this.destroy():(initWidth&&initHeight&&this.setSize(initWidth,initHeight),mediaplayer._onReady(),callbacks&&_.forEach(callbacks,function(cb){cb()}))},onStateChange:function(event){if(this.stopPolling(),!destroyed)switch(event.data){case 0:mediaplayer._onEnd();break;case 1:mediaplayer._onPlay(),this.startPolling();break;case 2:mediaplayer._onPause()}},stopPolling:function(){interval&&(clearInterval(interval),interval=null)},startPolling:function(){interval=setInterval(function(){mediaplayer._onTimeUpdate()},mediaplayerFactory.youtubePolling)},destroy:function(){destroyed=!0,media?(
loopEvents(function(ev){media.removeEventListener(ev)}),media.destroy()):_youtubeManager.remove($media,this),this.stopPolling(),media=$media=null},getPosition:function(){return media?media.getCurrentTime():0},getDuration:function(){return media?media.getDuration():0},getVolume:function(){var value=0;return media&&(value=100*media.getVolume()/100+0),value},setVolume:function(value){media&&media.setVolume((parseFloat(value)-0)/100*100)},setSize:function(width,height){$media&&$media.width(width).height(height),media?media.setSize(width,height):(initWidth=width,initHeight=height)},seek:function(value){media&&media.seekTo(parseFloat(value),!0)},play:function(){
media&&media.playVideo()},pause:function(){media&&media.pauseVideo()},stop:function(){media&&(media.stopVideo(),mediaplayer._onEnd())},mute:function(state){media&&media[state?"mute":"unMute"]()},isMuted:function(){return!!media&&media.isMuted()},addMedia:function(url){var id=_extractYoutubeId(url),cb=id&&function(){media.cueVideoById(id)};return!!cb&&(media?cb():(this._callbacks=this._callbacks||[],this._callbacks.push(cb)),!0)},setMedia:function(url){var id=_extractYoutubeId(url),cb=id&&function(){media.loadVideoById(id)};return!!cb&&(media?cb():this._callbacks=[cb],!0)}}),player}},mediaplayer={init:function(config){var self=this;return this.config=_.omit(
config||{},function(value){return null==value}),_.defaults(this.config,_defaults.options),this._setType(this.config.type||_defaults.type),this._reset(),this._updateVolumeFromStore(),this._initEvents(),this._initSources(function(){self.is("youtube")||_.each(self.config.sources,function(source){if(source&&source.type&&0===source.type.indexOf("audio"))return self._setType(source.type),self._initType(),!1}),self.config.renderTo&&_.defer(function(){self.render()})}),this},destroy:function(){return this.trigger("destroy"),this.player&&this.player.destroy(),this.$component&&(this._unbindEvents(),this._destroySlider(this.$seekSlider),this._destroySlider(
this.$volumeSlider),this.$component.remove()),this._reset(),this},render:function(to){var renderTo=to||this.config.renderTo||this.$container;return this.$component&&this.destroy(),this._initState(),this._buildDom(),this._updateDuration(0),this._updatePosition(0),this._bindEvents(),this._playingState(!1,!0),this._initPlayer(),this._initSize(),this.resize(this.config.width,this.config.height),this.config.is.rendered=!0,renderTo&&(this.$container=$(renderTo).append(this.$component)),this.trigger("render",this.$component),this},seek:function(time,internal){return this._canPlay()&&(this._updatePosition(time,internal),this.execute("seek",this.position),this.is(
"ready")||(this.autoStartAt=this.position),this.loop=!!this.config.loop),this},play:function(time){return this._canPlay()&&(void 0!==time&&this.seek(time),this.execute("play"),this.is("ready")||(this.autoStart=!0),this.loop=!!this.config.loop,this.timerId&&cancelAnimationFrame(this.timerId)),this},pause:function(time){return this._canPause()&&(void 0!==time&&this.seek(time),this.execute("pause"),this.is("ready")||(this.autoStart=!1)),this},resume:function(){return this._canResume()&&this.play(),this},stop:function(){return this.loop=!1,this.execute("stop"),this.is("ready")||(this.autoStart=!1),this},restart:function(){return this.play(0),this},
rewind:function(){return this.seek(0),this},mute:function(state){return void 0===state&&(state=!0),this.execute("mute",state),this._setState("muted",state),this.is("ready")||(this.startMuted=state),this},unmute:function(){return this.mute(!1),this},setVolume:function(value,internal){return this._updateVolume(value,internal),this.execute("setVolume",this.volume),this},getVolume:function(){return this.volume},getPosition:function(){return this.position},getDuration:function(){return this.duration},getTimesPlayed:function(){return this.timesPlayed},getType:function(){return this.type},getContainer:function(){var $container
;return!this.$container&&this.$component&&($container=this.$component.parent()).length&&(this.$container=$container),this.$container},getElement:function(){return this.$component},getSources:function(){return this.config.sources.slice()},setSource:function(src,callback){return this._getSource(src,function(source){this.config.sources=[source],this.is("rendered")&&this.player.setMedia(source.src,source.type),callback&&callback.call(this,source)}),this},addSource:function(src,callback){return this._getSource(src,function(source){this.config.sources.push(source),this.is("rendered")&&this.player.addMedia(source.src,source.type),callback&&callback.call(this,source
)}),this},is:function(state){return!!this.config.is[state]},resize:function(width,height){var type=this.is("video")?"video":"audio",defaults=_defaults[type]||_defaults.video;return width=Math.max(defaults.minWidth,width),height=Math.max(defaults.minHeight,height),this.config.width=width,this.config.height=height,this.$component&&(height-=this.$component.outerHeight()-this.$component.height(),width-=this.$component.outerWidth()-this.$component.width(),this.$component.width(width).height(height),this.is("nogui")||(height-=this.$controls.outerHeight())),this.execute("setSize",width,height),this},enable:function(){return this._fromState("disabled"),this},
disable:function(){return this._toState("disabled"),this.trigger("disabled"),this},show:function(){return this._fromState("hidden"),this},hide:function(){return this._toState("hidden"),this},_setType:function(type){-1!==type.indexOf("youtube")?this.type="youtube":0===type.indexOf("audio")?this.type="audio":this.type="video"},_initType:function(){var is=this.config.is;is.youtube="youtube"===this.type,is.video="video"===this.type||"youtube"===this.type,is.audio="audio"===this.type},_getSource:function(src,callback){var source,self=this;function done(){var type;"string"==typeof(type=source.type)&&0===type.indexOf("application")&&(source.type=function(source){
var type="video/ogg",url=source&&source.src||source,ext=url&&url.substr(-4);return".ogg"!==ext&&".oga"!==ext||(type="audio/ogg"),type}(source)),self.is("youtube")&&(source.id=_extractYoutubeId(source.src)),callback.call(self,source)}source=_.isString(src)?{src:src}:_.clone(src),this.is("youtube")&&!source.type&&(source.type=_defaults.type),source.type?done():mimetype.getResourceType(source.src,function(err,type){err&&(type=_defaults.type),source.type=type,done()})},_initSources:function(callback){var self=this,sources=function(config){var sources=config.sources||[],url=config.url;return _.isArray(sources)||(sources=[sources]),url&&(_.isArray(config.url)||(
url=[url]),sources=sources.concat(url)),sources}(this.config);this.config.sources=[],async.each(sources,function(source,cb){self.addSource(source,function(src){cb(null,src)})},callback)},_initEvents:function(){var triggerEvent;eventifier(this),triggerEvent=this.trigger,this.trigger=function(eventName){return this.$component&&this.$component.trigger(eventName+_ns,_slice.call(arguments,1)),triggerEvent.apply(this,arguments)}},_initSize:function(){var type=this.is("video")?"video":"audio",defaults=_defaults[type]||_defaults.video;this.config.width=_.parseInt(this.config.width)||defaults.width,this.config.height=_.parseInt(this.config.height)||defaults.height},
_initPlayer:function(){var error,player=_players[this.type];error=!_support.canPlay(this.type)||(_.isFunction(player)&&(this.player=player(this)),!this.player||!this.player.init()),this._setState("error",error),this._setState("nogui",!_support.canControl()),this._setState("loading",!0)},_initState:function(){var page,isCORS=!1;this.is("youtube")||(page=new UrlParser(window.location),isCORS=_.some(this.config.sources,function(source){return!page.sameDomain(source.src)})),this._setState("cors",isCORS),this._setState("ready",!1)},_reset:function(){this.config.is={},this._initType(),this.$component=null,this.$container=null,this.$player=null,this.$media=null,
this.$controls=null,this.$seek=null,this.$seekSlider=null,this.$sound=null,this.$volume=null,this.$volumeControl=null,this.$volumeSlider=null,this.$position=null,this.$duration=null,this.player=null,this.duration=0,this.position=0,this.timesPlayed=0,this.volume=this.config.volume,this.autoStart=this.config.autoStart,this.autoStartAt=this.config.autoStartAt,this.startMuted=this.config.startMuted},_buildDom:function(){this.$component=$(playerTpl(this.config)),this.$player=this.$component.find(".player"),this.$media=this.$component.find(".media"),this.$controls=this.$component.find(".controls"),this.$seek=this.$controls.find(".seek .slider"),
this.$sound=this.$controls.find(".sound"),this.$volumeControl=this.$controls.find(".volume"),this.$volume=this.$controls.find(".volume .slider"),this.$position=this.$controls.find('[data-control="time-cur"]'),this.$duration=this.$controls.find('[data-control="time-end"]'),this.$volumeSlider=this._renderSlider(this.$volume,this.volume,0,100,!0)},_renderSlider:function($elt,value,min,max,vertical){var orientation,direction;return direction=vertical?(orientation="vertical","rtl"):(orientation="horizontal","ltr"),$elt.noUiSlider({start:_ensureNumber(value)||0,step:1,connect:"lower",orientation:orientation,direction:direction,animate:!0,range:{min:_ensureNumber(
min)||0,max:_ensureNumber(max)||0}})},_destroySlider:function($elt){$elt&&$elt.get(0).destroy()},_bindEvents:function(){var self=this,overing=!1;this.$component.on("contextmenu"+_ns,function(event){event.preventDefault()}),this.$controls.on("click"+_ns,".action",function(event){var id=$(event.target).closest(".action").data("control");_.isFunction(self[id])&&self[id]()}),this.$player.on("click"+_ns,function(){self.is("playing")?self.pause():self.play()}),this.$seek.on("change"+_ns,function(event,value){self.seek(value,!0)}),$(document).on("updateVolume"+_ns,function(event,value){self.setVolume(value)}),this.$volume.on("change"+_ns,function(event,value){
self.unmute(),$(document).trigger("updateVolume"+_ns,value),self.setVolume(value,!0)}),this.$sound.on("mouseover"+_ns,"a",function(){var position;overing||self.$volumeControl.hasClass("up")||self.$volumeControl.hasClass("down")||(overing=!0,(position=self.$controls[0].getBoundingClientRect())&&position.top&&position.top<200?self.$volumeControl.addClass("down"):self.$volumeControl.addClass("up"),self.overingTimer=_.delay(function(){self.$volumeControl&&self.$volumeControl.removeClass("up down"),overing=!1},15e3),self.$volumeControl.one("mouseleave"+_ns,function(){self.$volumeControl.removeClass("up down"),overing=!1}))})},_unbindEvents:function(){
this.$component.off(_ns),this.$player.off(_ns),this.$controls.off(_ns),this.$seek.off(_ns),this.$volume.off(_ns),this.overingTimer&&clearTimeout(this.overingTimer),$(document).off(_ns)},_updateVolumeSlider:function(value){this.$volumeSlider&&this.$volumeSlider.val(value)},_updateVolume:function(value,internal){this.volume=Math.max(0,Math.min(100,parseFloat(value))),this._storeVolume(this.volume),internal||this._updateVolumeSlider(value)},_updatePositionSlider:function(value){this.$seekSlider&&this.$seekSlider.val(value)},_updatePositionLabel:function(value){this.$position&&this.$position.text(_timerFormat(value))},_updatePosition:function(value,internal){
this.position=Math.max(0,Math.min(this.duration,parseFloat(value))),internal||this._updatePositionSlider(this.position),this._updatePositionLabel(this.position)},_updateDurationSlider:function(value){this.$seekSlider&&(this._destroySlider(this.$seekSlider),this.$seekSlider=null),value&&isFinite(value)&&(this.$seekSlider=this._renderSlider(this.$seek,0,0,value),this.$seekSlider.attr("disabled",!this.config.canSeek))},_updateDurationLabel:function(value){this.$duration&&(value&&isFinite(value)?this.$duration.text(_timerFormat(value)).show():this.$duration.hide())},_updateDuration:function(value){this.duration=Math.abs(parseFloat(value)),
this._updateDurationSlider(this.duration),this._updateDurationLabel(this.duration)},_onReady:function(){this._updateDuration(this.player.getDuration()),this._setState("ready",!0),this._setState("canplay",!0),this._setState("canpause",this.config.canPause),this._setState("canseek",this.config.canSeek),this._setState("loading",!1),this.trigger("ready"),this.setVolume(this.volume),this.mute(!!this.startMuted),this.autoStartAt?this.seek(this.autoStartAt):this.autoStart&&this.play()},_storeVolume:function(volume){return store("mediaVolume").then(function(volumeStore){volumeStore.setItem("volume",volume)})},_updateVolumeFromStore:function(){var self=this
;return store("mediaVolume").then(function(volumeStore){return volumeStore.getItem("volume")}).then(function(volume){_.isNumber(volume)&&(self.volume=Math.max(0,Math.min(100,parseFloat(volume))),self.setVolume(self.volume))})},_onError:function(){this._setState("error",!0),this._setState("loading",!1),this.trigger("error")},_onRecoverError:function(){this._setState("error",!1),this.trigger("recovererror")},_onPlay:function(){this._playingState(!0),this.trigger("play")},_onPause:function(){this._playingState(!1),this.trigger("pause")},_onEnd:function(){this.timesPlayed++,this._playingState(!1,!0),this._updatePosition(0),this._playLimitReached()?(
this._disableGUI(),this.trigger("limitreached")):this.loop?this.restart():0<parseInt(this.config.replayTimeout,10)&&(this.replayTimeoutStartMs=(new window.Date).getTime(),this._replayTimeout()),this.trigger("ended")},_onTimeUpdate:function(){this._updatePosition(this.player.getPosition()),this.trigger("update")},_replayTimeout:function(){var nowMs=(new window.Date).getTime(),elapsedSeconds=Math.floor((nowMs-this.replayTimeoutStartMs)/1e3);this.timerId=requestAnimationFrame(this._replayTimeout.bind(this)),elapsedSeconds>=parseInt(this.config.replayTimeout,10)&&(this._disableGUI(),this.disable(),cancelAnimationFrame(this.timerId))},_disableGUI:function(){
this._setState("ready",!1),this._setState("canplay",!1)},_playLimitReached:function(){return this.config.maxPlays&&this.timesPlayed>=this.config.maxPlays},_canPlay:function(){return this.is("ready")&&!this.is("disabled")&&!this.is("hidden")&&!this._playLimitReached()},_canPause:function(){return!!this.config.canPause},_canSeek:function(){return!!this.config.canSeek},_canResume:function(){return this.is("paused")&&this._canPlay()},_setState:function(name,value){return value=!!value,this.config.is[name]=value,this.$component&&this.$component.toggleClass(name,value),this},_fromState:function(stateName){return this._setState(stateName,!1),this.resume(),this},
_toState:function(stateName){return this.pause(),this._setState(stateName,!0),this},_playingState:function(state,ended){return this._setState("playing",!!state),this._setState("paused",!state),this._setState("ended",!!ended),this},execute:function(command){var ctx=this.player,method=ctx&&ctx[command];if(_.isFunction(method))return method.apply(ctx,_slice.call(arguments,1))}},mediaplayerFactory=function(config){return _.clone(mediaplayer).init(config)};return mediaplayerFactory.canPlay=function(type,mime){return _support.canPlay(type,mime)},mediaplayerFactory.canPlayAudio=function(mime){return _support.canPlayAudio(mime)},
mediaplayerFactory.canPlayVideo=function(mime){return _support.canPlayVideo(mime)},mediaplayerFactory.canControl=function(){return _support.canControl()},mediaplayerFactory.youtubePolling=100,mediaplayerFactory}),define("tpl!ui/mediasizer/mediasizer",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression
;return buffer+='<div class="media-sizer media-sizer-synced">\n\n    <div class="media-sizer-responsive-toggle">\n        <label>\n        <input type="checkbox" ',((stack1=helpers.if.call(depth0,depth0&&depth0.responsive,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'checked="checked"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' class="media-mode-switch"/>\n        <span class="icon-checkbox"></span>\n        '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Responsive mode",options):helperMissing.call(depth0,"__","Responsive mode",options))
)+'\n        </label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="warning"></span>\n\n        <div class="tooltip-content">\n            '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Media resize along with their container, e.g. 50% means half of the container size not half of the media size.",options):helperMissing.call(depth0,"__","Media resize along with their container, e.g. 50% means half of the container size not half of the media size.",options))
)+'\n        </div>\n    </div>\n\n\n    <div class="media-sizer-percent">\n        <label for="media-sizer-percent-width">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Size",options):helperMissing.call(depth0,"__","Size",options))
)+'</label>\n        <span class="item-editor-unit-input-box">\n            <input type="text" name="width" id="media-sizer-percent-width" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n        </span>\n\n        <div class="media-sizer-reset media-sizer-reset-percent" data-unit="percent">\n            <span class="icon-reset"></span>\n        </div>\n\n        <div class="media-sizer-slider-box">\n            <div class="media-sizer-slider"></div>\n        </div>\n    </div>\n\n    <div class="media-sizer-pixel">\n        <label for="media-sizer-pixel-width">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Width",options):helperMissing.call(depth0,"__","Width",options)))+'</label>\n        <span class="item-editor-unit-input-box">\n            <input type="text" name="width" id="media-sizer-pixel-width" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n        </span>\n\n        <label for="media-sizer-pixel-height">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Height",options):helperMissing.call(depth0,"__","Height",options))
)+'</label>\n        <span class="item-editor-unit-input-box">\n            <input type="text" name="height" id="media-sizer-pixel-height" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n        </span>\n\n        <div class="media-sizer-sync">\n            <span class="icon-link"></span>\n        </div>\n\n        <div class="media-sizer-reset media-sizer-reset-pixel" data-unit="pixel">\n            <span class="icon-reset"></span>\n        </div>\n\n        <div class="media-sizer-slider-box">\n            <div class="media-sizer-slider"></div>\n            <div class="media-sizer-cover"></div>\n        </div>\n    </div>\n</div>'})}),
define("ui/mediasizer",["jquery","lodash","core/pluginifier","tpl!ui/mediasizer/mediasizer","nouislider","ui/tooltip"],function($,_,Pluginifier,tpl){"use strict";var MediaSizer,ns="mediasizer",dataNs="ui."+ns,defaults={disableClass:"disabled",applyToMedium:!0,denyCustomRatio:!0,responsive:!0,showResponsiveToggle:!0,showReset:!0,showSync:!0};function _round(value,precision){var factor=Math.pow(10,precision);return Math.round(value*factor)/factor}MediaSizer={_publicArgs:function($elt,options){var params=this._getValues($elt);return params.$target=options.target||$(),params.$resetBtn=options.$resetBtn,params},_getSizeProps:function($elt){var $medium,
naturalWidth,naturalHeight,containerWidth,displaySize,maxWidth,_maxWidth,$parentContainer,options=$elt.data(dataNs),minWidth=_.isNumber(options.minWidth)?options.minWidth:0;return containerWidth=options.hasTarget?(displaySize=($medium=options.target)[0].getBoundingClientRect(),options.width=displaySize.width,options.height=displaySize.height,naturalWidth=$medium[0].naturalWidth||options.width,naturalHeight=$medium[0].naturalHeight||options.height,$parentContainer=options.parentSelector?$medium.parents(options.parentSelector):$medium.parent().parent(),options.maxWidth?options.maxWidth:"none"!==(_maxWidth=$parentContainer.css("max-width"))?parseInt(_maxWidth
):$parentContainer.innerWidth()):(naturalWidth=options.width,naturalHeight=options.height,options.maxWidth||options.width),maxWidth=Math.max(containerWidth,naturalWidth),{px:{natural:{width:naturalWidth,height:naturalHeight},current:{width:options.width,height:options.height}},"%":{natural:{width:100,height:null},current:{width:100*options.width/containerWidth,height:null}},ratio:{natural:naturalWidth/naturalHeight,current:options.width/options.height},containerWidth:containerWidth,sliders:{"%":{min:100*minWidth/maxWidth,max:100,start:100*options.width/containerWidth},px:{min:minWidth,max:maxWidth,start:options.width}},currentUnit:"%"}},
_initSyncBtn:function($elt){var options=$elt.data(dataNs),$mediaSizer=$elt.find(".media-sizer"),self=this,$syncBtn=$elt.find(".media-sizer-sync");return options.showSync||($syncBtn.hide(),$mediaSizer.addClass("media-sizer-sync-off")),$syncBtn.on("click",function(){$mediaSizer.toggleClass("media-sizer-synced"),options.syncDimensions=$mediaSizer.hasClass("media-sizer-synced"),options.syncDimensions&&self._sync($elt,options.$fields.px.width,"blur")}),$syncBtn},_initResetBtn:function($elt){var options=$elt.data(dataNs),$resetBtn=$elt.find(".media-sizer-reset");return options.showReset||$elt.find(".media-sizer").addClass("media-sizer-reset-off"),$resetBtn.on(
"click",function(){options.$fields.px.width.val(options.originalSizeProps.px.current.width).trigger("sliderchange")}),$resetBtn},_initBlocks:function($elt){var options=$elt.data(dataNs),_blocks={},$responsiveToggleField=$elt.find(".media-mode-switch"),self=this,_checkMode=function(){$responsiveToggleField.is(":checked")?(_blocks.px.hide(),_blocks["%"].show(),options.sizeProps.currentUnit="%",options.$fields&&options.$fields["%"].width.val()>options.sizeProps.sliders["%"].max&&(options.$fields["%"].width.val(options.sizeProps.sliders["%"].max),self._sync($elt,options.$fields["%"].width,"blur"))):(_blocks["%"].hide(),_blocks.px.show(),
options.sizeProps.currentUnit="px")};return options.showResponsiveToggle||$elt.find(".media-sizer").addClass("media-sizer-responsivetoggle-off"),_(["px","%"]).forEach(function(unit){_blocks[unit]=$elt.find(".media-sizer-"+("px"===unit?"pixel":"percent")),_blocks[unit].prop("unit",unit),_blocks[unit].find("input").data("unit",unit).after($("<span>",{class:"unit-indicator",text:unit}))}),$responsiveToggleField.on("click",function(){_checkMode(),$elt.trigger("responsiveswitch."+ns,[$responsiveToggleField.is(":checked")]),$elt.trigger("sizechange."+ns,self._publicArgs($elt,options))}),_checkMode(),_blocks},_initSliders:function($elt){var options=$elt.data(dataNs
),_sliders={};return _(options.$blocks).forOwn(function($block,unit){_sliders[unit]=$block.find(".media-sizer-slider"),_sliders[unit].prop("unit",unit),_sliders[unit].noUiSlider({start:options.sizeProps.sliders[unit].start,range:{min:options.sizeProps.sliders[unit].min,max:options.sizeProps.sliders[unit].max}}).on("slide",function(){var $slider=$(this),_unit=$slider.prop("unit");options.$fields[_unit].width.val(_round($slider.val(),0)).trigger("sliderchange")})}),_sliders},_sync:function($elt,$field,eventType){var heightValue,ratio,otherBlockUnit,otherBlockWidthValue,otherBlockHeightValue,currentValues,options=$elt.data(dataNs),unit=$field.prop("unit"),
dimension=$field.prop("dimension"),value=parseFloat($field.val());if(eventType="sliderchange"===eventType?"sliderEvent":"fieldEvent",!isNaN(value)){if(0<options.sizeProps.px.current.width&&0<options.sizeProps.px.current.height&&(options.sizeProps.ratio.current=options.sizeProps.px.current.width/options.sizeProps.px.current.height),ratio=(ratio=options.denyCustomRatio?options.sizeProps.ratio.natural:options.sizeProps.ratio.current)||1,"height"===dimension&&"px"===unit){if(options.sizeProps.px.current.height=value,!options.syncDimensions)return options.sizeProps["%"].current.height=null,options.applyToMedium&&(currentValues=this._getValues($elt),
options.target.attr("width",currentValues.width),options.target.attr("height",currentValues.height)),void $elt.trigger("sizechange."+ns,this._publicArgs($elt,options));options.sizeProps.px.current.width=value*ratio,options.sizeProps.ratio.current=options.sizeProps.px.current.width/options.sizeProps.px.current.height,options.$fields.px.width.val(_round(options.sizeProps.px.current.width,0)),value=parseFloat(options.$fields.px.width.val())}otherBlockWidthValue="px"===unit?(otherBlockUnit="%",100*value/options.sizeProps.containerWidth):(otherBlockUnit="px",value*options.sizeProps.containerWidth/100),options.sizeProps[unit].current.width=value,
options.sizeProps[otherBlockUnit].current.width=otherBlockWidthValue,options.syncDimensions&&(heightValue=value/ratio,otherBlockHeightValue=otherBlockWidthValue/ratio,options.sizeProps[unit].current.height=heightValue,options.$fields[unit].height.val(_round(heightValue,0)),options.sizeProps[otherBlockUnit].current.height=otherBlockHeightValue,options.$fields[otherBlockUnit].height.val(_round(otherBlockHeightValue,0))),"sliderEvent"!==eventType&&options.$sliders[unit].val(value),options.$sliders[otherBlockUnit].val(otherBlockWidthValue),options.$fields[otherBlockUnit].width.val(_round(otherBlockWidthValue,0)),options.sizeProps["%"].current.height=null,
options.applyToMedium&&(currentValues=this._getValues($elt),options.target.attr("width",currentValues.width),options.target.attr("height",currentValues.height||"auto")),$elt.trigger("sizechange."+ns,this._publicArgs($elt,options))}},_initFields:function($elt){var field,options=$elt.data(dataNs),dimensions=["width","height"],_fields={},self=this;return _(options.$blocks).forOwn(function($block,unit){_fields[unit]={},options.$blocks[unit].find("input").each(function(){_(dimensions).forEach(function(dim){field=options.$blocks[unit].find('[name="'+dim+'"]'),_fields[unit][dim]=field.length?field:$("<input>"),_fields[unit][dim].prop({unit:unit,dimension:dim}),
_fields[unit][dim].val(_round(options.sizeProps[unit].current[dim],0)),_fields[unit][dim].data({min:0,max:options.sizeProps.sliders[unit].max}),_fields[unit][dim].on("keydown",function(e){var chars,$field=$(this),c=e.keyCode,specChars=(chars=[8,37,39,46],-1===$field.val().indexOf(".")&&(chars.push(190),chars.push(110)),chars);return _.contains(specChars,c)||48<=c&&c<=57||96<=c&&c<=105}),_fields[unit][dim].on("keyup blur sliderchange",function(e){var $field=$(this),value=$field.val().replace(/,/g,".");$field.val(value),value>$field.data("max")?$field.val($field.data("max")):value<$field.data("min")&&$field.val($field.data("min")),self._sync($elt,$(this),
e.type)})})})}),_fields},_getValues:function($elt){var options=$elt.data(dataNs),attr={};return _.forOwn(options.sizeProps[options.sizeProps.currentUnit].current,function(value,dimension){value=_.isNull(value)?"":_round(value,0).toString(),"%"===options.sizeProps.currentUnit&&""!==value&&(value+=options.sizeProps.currentUnit),attr[dimension]=value}),attr},init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this);if(options.hasTarget=options.target&&options.target.length,options.width=options.width||options.naturalWidth,options.height=options.height||options.naturalHeight,
options.naturalWidth=options.naturalWidth||options.width,options.naturalHeight=options.naturalHeight||options.height,options.hasSize=options.width&&options.height&&_.isNumber(options.width)&&_.isNumber(options.height),!options.hasTarget&&!options.hasSize)throw new Error("MediaSizer::init() You must either set width and height or a target element");if(!options.hasTarget&&options.applyToMedium)throw new Error("MediaSizer::init() options.applyToMedium can only be true if a target element is provided");options.hasTarget&&options.hasSize&&(delete options.width,delete options.height,options.hasSize=!1),$elt.data(dataNs)||($elt.html(tpl({
responsive:void 0===options.responsive||!!options.responsive})),$elt.data(dataNs,options),options.sizeProps=MediaSizer._getSizeProps($elt),options.originalSizeProps=_.cloneDeep(options.sizeProps),options.syncDimensions=$elt.find(".media-sizer").hasClass("media-sizer-synced"),options.$blocks=MediaSizer._initBlocks($elt),options.$fields=MediaSizer._initFields($elt),options.$sliders=MediaSizer._initSliders($elt),options.$syncBtn=MediaSizer._initSyncBtn($elt),options.$resetBtn=MediaSizer._initResetBtn($elt),$elt.trigger("create."+ns,MediaSizer._publicArgs($elt,options)))})},destroy:function(){this.each(function(){$(this).trigger("destroy."+ns)})}},
Pluginifier.register(ns,MediaSizer)}),define("ui/movableComponent",["lodash","interact","ui/component","ui/component/draggable","ui/component/resizable","ui/component/stackable"],function(_,interact,componentFactory,makeDraggable,makeResizable,makeStackable){"use strict";var defaultConfig={initialX:0,initialY:0,width:250,height:100,minWidth:75,minHeight:25};return function(specs,defaults){var component;return defaults=_.defaults(defaults||{},defaultConfig),component=componentFactory(specs,defaults),makeDraggable(component),makeResizable(component),makeStackable(component),component.on("render",function(){this.setSize(this.config.width,this.config.height
).center()}),component}}),define("ui/pageStatus",["lodash","core/eventifier"],function(_,eventifier){"use strict";var hiddenProp,visibilityChangeEvent,defaults={track:["load","visibility","focus"]};return void 0!==document.hidden?(hiddenProp="hidden",visibilityChangeEvent="visibilitychange"):void 0!==document.mozHidden?(hiddenProp="mozHidden",visibilityChangeEvent="mozvisibilitychange"):void 0!==document.msHidden?(hiddenProp="msHidden",visibilityChangeEvent="msvisibilitychange"):void 0!==document.webkitHidden&&(hiddenProp="webkitHidden",visibilityChangeEvent="webkitvisibilitychange"),function(options){var win,pageStatus;return options=_.defaults(options||{},
defaults),win=options.window||window,pageStatus=eventifier({}),_.contains(options.track,"load")&&(win.addEventListener("load",function(){pageStatus.trigger("statuschange","load")}),win.addEventListener("unload",function(){pageStatus.trigger("statuschange","unload")})),_.contains(options.track,"visibility")&&win.addEventListener(visibilityChangeEvent,function(e){_.defer(function(){!0===win.document[hiddenProp]?pageStatus.trigger("statuschange","hide",e.timeStamp):pageStatus.trigger("statuschange","show",e.timeStamp)})}),_.contains(options.track,"focus")&&(win.addEventListener("blur",_.debounce(function(e){e.target===win&&pageStatus.trigger("statuschange",
"blur",e.timeStamp)},200,{leading:!0,trailing:!1})),win.addEventListener("focus",_.debounce(function(e){e.target===win&&pageStatus.trigger("statuschange","focus",e.timeStamp)},200,{leading:!0,trailing:!1}))),pageStatus.on("statuschange",function(status){var args=[status].concat([].slice.call(arguments,1));pageStatus.trigger.apply(pageStatus,args)}),pageStatus}}),define("iframeNotifier",["jquery","lodash"],function($,_){function hasAccess(windowElt){return!(!window.__knownParent__||!windowElt||windowElt===window)}return{parent:function(eventName,args){_.defer(function(){hasAccess(window.parent)&&window.parent.$&&(0,window.parent.$)(window.parent.document
).trigger(eventName,args||[])})},top:function(eventName,args){_.defer(function(){hasAccess(window.top)&&window.top.$&&(0,window.top.$)(window.top.document).trigger(eventName,args||[])})}}}),define("ui/previewer",["jquery","lodash","i18n","core/mimetype","core/pluginifier","ui/mediaplayer","iframeNotifier","ui/documentViewer","ui/documentViewer/providers/pdfViewer"],function($,_,__,mimeType,Pluginifier,mediaplayer,iframeNotifier,documentViewer,pdfViewer){"use strict";var ns="previewer",dataNs="ui."+ns,defaults={containerClass:"previewer"},_defaultSize={video:{width:480,height:300},audio:{width:290,height:36},pdf:{width:340,height:500}},previewGenerator={
placeHolder:_.template("<p class='nopreview' data-type='${type}'>${desc}</p>"),youtubeTemplate:_.template("<div data-src=${jsonurl} data-type='video/youtube'></div>"),videoTemplate:_.template("<div data-src=${jsonurl} data-type='${mime}'></div>"),audioTemplate:_.template("<div data-src=${jsonurl} data-type='${mime}'></div>"),imageTemplate:_.template("<img src=${jsonurl} alt='${name}' />"),pdfTemplate:_.template("<div class='pdfpreview'></div>"),flashTemplate:_.template("<object data=${jsonurl} type='application/x-shockwave-flash'><param name='movie' value=${jsonurl}></param></object>"),mathmlTemplate:_.template("<iframe src=${jsonurl}></iframe>"),
xmlTemplate:_.template("<pre>${xml}</pre>"),htmlTemplate:_.template("<iframe src=${jsonurl}></iframe>"),generate:function(type,data){var tmpl=this[type+"Template"];if(data.jsonurl=JSON.stringify(data.url),_.isFunction(tmpl))return tmpl(data)}};documentViewer.registerProvider("pdf",pdfViewer);var previewer={init:function(options){var self=previewer;return options=_.defaults(options||{},defaults),this.each(function(){var $elt=$(this);$elt.data(dataNs)?$elt.previewer("update",options):($elt.hasClass(options.containerClass)||$elt.addClass(options.containerClass),$elt.data(dataNs,options),self._update($elt),$elt.trigger("create."+ns))})},update:function(data){
return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);$elt.data(dataNs,_.merge(options,data)),previewer._update($elt)})},_setPlayer:function($elt,player){$elt.data("player",player)},_clearPlayer:function($elt){$elt&&$elt.data("player")&&($elt.data("player").destroy(),$elt.removeData("player"))},_update:function($elt){var player,$content,$controls,content,type,self=previewer,options=$elt.data(dataNs);self._clearPlayer($elt),options&&(type=options.type||mimeType.getFileType({mime:options.mime,name:options.url}),options.url&&(options.name||(options.name=options.url.substring(options.url.lastIndexOf("/")+1,options.url.lastIndexOf("."))),
content=previewGenerator.generate(type,options)),content||(content=previewGenerator.placeHolder({desc:__("No preview available"),type:options.type||options.mime||""})),($content=$(content)).on("load",function(){iframeNotifier.parent("imageloaded")}),options.width&&$content.attr("width",options.width),options.height&&$content.attr("height",options.height),$elt.empty().html($content),options.url&&("audio"===type||"video"===type?(player=mediaplayer({url:options.url,type:options.mime,renderTo:$content}).on("ready",function(){var defSize=_defaultSize[this.getType()]||_defaultSize.video,width=options.width||defSize.width,height=options.height||defSize.height
;this.resize(width,height)}),self._setPlayer($elt,player),$("body").off("keydown.mediaelement").on("keydown.mediaelement",function(event){27===event.keyCode&&self._clearPlayer($elt)}),($controls=$(".actions a:nth-child(1), .actions a:nth-child(3), .icon-close, .upload-switcher, .select-action, .files li>span","#mediaManager")).off("mousedown.mediaelement").on("mousedown.mediaelement",function(event){event.stopPropagation(),$(this).closest(".mediaplayer").length||($controls.off("mousedown.mediaelement"),self._clearPlayer($elt))})):"pdf"===type&&(documentViewer({renderTo:$content,replace:!0,width:options.width||_defaultSize.pdf.width,
height:options.height||_defaultSize.pdf.height}).load(options.url,"pdf"),_.defer(function(){iframeNotifier.parent("imageloaded")}))),$elt.trigger("update."+ns))},destroy:function(){this.each(function(){var $elt=$(this);previewer._clearPlayer($elt),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,previewer),function($container){$container.find("[data-preview]").each(function(){var $elt=$(this);$elt.previewer({url:$elt.data("preview"),type:$elt.data("preview-type"),mime:$elt.data("preview-mime"),width:$elt.width(),height:$elt.height()})})}}),define("ui/progressbar",["jquery","lodash","core/pluginifier"],function($,_,Pluginifier){"use strict"
;var ns="progressbar",dataNs="ui."+ns,defaults={disableClass:"disabled",style:"info",value:0,showProgress:!1},progressBar={init:function(options){return options=_.defaults(options||{},defaults),this.each(function(){var $pgElt,percent,$elt=$(this);$elt.data(dataNs)||(options.value=parseInt(options.value,10),$elt.data(dataNs,options),percent=options.value+"%",$pgElt=$("<span></span>").width(percent).attr("title",percent),options.showProgress&&$pgElt.text(percent),$elt.addClass("progressbar").addClass(options.style).empty().append($pgElt),$elt.trigger("create."+ns))})},_update:function($elt,value){var $pgElt,percent,options=$elt.data(dataNs);0<=(value=parseInt(
value,10))&&value<=100&&(percent=value+"%",($pgElt=$elt.children("span")).width(value+"%").attr("title",percent),options.showProgress&&$pgElt.text(percent),options.value=value,$elt.data(dataNs,options),$elt.trigger("update."+ns,value))},_value:function($elt,value){var options=$elt.data(dataNs);return void 0!==value?progressBar._update($elt,value):options.value},destroy:function(){return this.each(function(){var $elt=$(this);$elt.data(dataNs)&&($elt.removeClass("progressbar").empty().removeData(dataNs),$elt.trigger("destroy."+ns))})}};Pluginifier.register(ns,progressBar,{expose:["update","value"]})}),define("ui/resourcemgr/fileBrowser",["jquery","lodash"],
function($,_){"use strict";var ns="resourcemgr";return function(options){var root=options.root||"/",path=options.path||"/",$container=options.$target,$fileBrowser=$(".file-browser .file-browser-wrapper",$container),$divContainer=$("."+root,$fileBrowser),$folderContainer=$(".folders",$divContainer),fileTree={};function getFolderContent(tree,path,cb){var content=getByPath(tree,path);content&&(content.children||content.empty)?cb(content):function(path){var parameters={};return parameters[options.pathParam]=path,$.getJSON(options.browseUrl,_.merge(parameters,options.params))}(path).done(function(data){tree.path?data.children?(_.find(content.children,"path")||(
tree.empty=!0),function setToPath(tree,path,data){var done=!1;tree&&(tree.path===path?tree.children=data:tree.children&&_.forEach(tree.children,function(child){if(done=setToPath(child,path,data))return!1}));return done}(tree,path,data.children)):tree.empty=!0:tree=_.merge(tree,data),cb(data)})}function getByPath(tree,path){var match;return tree&&(tree.path&&0===tree.path.indexOf(path)?match=tree:tree.children&&_.forEach(tree.children,function(child){if(match=getByPath(child,path))return!1})),match}function updateFolders(data,$parent,recurse){recurse&&data&&data.path&&(void 0===data.relPath&&(data.relPath=data.path),$(
'<li><a data-path="'+data.path+'" data-display="'+data.relPath+'" href="#">'+data.label+"</a></li>").appendTo($parent)),data&&data.children&&_.isArray(data.children)&&!data.empty&&_.forEach(data.children,function(child){updateFolders(child,$parent,!0)})}$folderContainer.append('<li class="root"><a class="root-folder" href="#"></a></li>'),getFolderContent(fileTree,path,function(content){var $rootNode=$(".root-folder",$folderContainer),$innerList=$("<ul></ul>").insertAfter($rootNode);content.children&&$rootNode.addClass("opened"),updateFolders(content,$innerList),$(".file-browser").find("li.active").removeClass("active"),$("li.root",$folderContainer).addClass(
"active"),$rootNode.attr("data-path",content.path).text(content.label),$container.trigger("folderselect."+ns,[content.label,content.children,content.path])}),$divContainer.off("click",".folders a").on("click",".folders a",function(e){e.preventDefault();var $selected=$(this),$folders=$(".folders li",$fileBrowser),fullPath=$selected.data("path");$selected.data("display");getFolderContent(getByPath(fileTree,fullPath),fullPath,function(content){if(content){var $innerList=$selected.siblings("ul");!$innerList.length&&content.children&&_.find(content.children,"path")&&!content.empty?(updateFolders(content,$innerList=$("<ul></ul>").insertAfter($selected)),
$selected.addClass("opened")):$innerList.length&&("none"===$innerList.css("display")?($innerList.show(),$selected.addClass("opened")):$selected.parent("li").hasClass("active")&&($innerList.hide(),$selected.removeClass("opened"))),$folders.removeClass("active"),$selected.parent("li").addClass("active"),$container.trigger("folderselect."+ns,[content.label,content.children,content.path])}})}),$container.on("filenew."+ns,function(e,file,path){var subTree=getByPath(fileTree,path);subTree&&(subTree.children||(subTree.children=[]),_.find(subTree.children,{name:file.name})||(subTree.children.push(file),$container.trigger("folderselect."+ns,[subTree.label,
subTree.children,path])))}),$container.on("filedelete."+ns,function(e,path){!function removeFromPath(tree,path){var done=!1;var removed=[];tree&&tree.children&&(removed=_.remove(tree.children,function(child){return child.path===path||child.name&&tree.path+child.name===path}),(done=0<removed.length)||_.forEach(tree.children,function(child){if(done=removeFromPath(child,path))return!1}));return done}(fileTree,path)})}}),define("util/bytes",[],function(){"use strict";return{hrSize:function(bytes){var unit=0;for(bytes=bytes||0;1024<=bytes;)bytes/=1024,unit++;return bytes.toFixed(2)+["B","kB","MB","GB","TB"][unit]}}}),define("ui/resourcemgr/filePreview",["jquery",
"lodash","util/bytes","context","ui/previewer"],function($,_,bytes,context){"use strict";var ns="resourcemgr";return function(options){var $container=options.$target,$filePreview=$(".file-preview",$container),$previewer=$(".previewer",$container),$propType=$(".prop-type",$filePreview),$propSize=$(".prop-size",$filePreview),$propUrl=$(".prop-url",$filePreview),$link=$("a",$propUrl),$selectButton=$(".select-action",$filePreview),currentSelection=[];$container.on("fileselect."+ns,function(e,file){file&&file.file?(!function(file){$previewer.previewer(file),$propType.text(file.type+" ("+file.mime+")"),$propSize.text(bytes.hrSize(file.size)),$link.attr("href",
file.download).attr("download",file.file),$link.hasClass("hidden")&&$link.removeClass("hidden");$selectButton.removeAttr("disabled")}(file),currentSelection=file):($previewer.previewer("update",{url:!1}),$propType.empty(),$propSize.empty(),$("a",$propUrl).addClass("hidden"),$selectButton.attr("disabled","disabled"))}),$selectButton.on("click",function(e){e.preventDefault();var data=_.pick(currentSelection,["file","type","mime","size","alt"]);context.mediaSources&&0===context.mediaSources.length&&-1<data.file.indexOf("local/")&&(data.file=data.file.substring(6)),$container.trigger("select."+ns,[[data]])})}}),define("tpl!ui/resourcemgr/tpl/fileSelect",[
"handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return(stack1=helpers.each.call(depth0,depth0&&depth0.files,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n<li data-type="',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'" data-file="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-display="',stack1=(helper=helpers.display)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.display)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-mime="',stack1=(helper=helpers.mime)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.mime)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'" data-size="',stack1=(helper=helpers.size)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.size)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-url="',stack1=(helper=helpers.viewUrl)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.viewUrl)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-download="',stack1=(helper=helpers.downloadUrl)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.downloadUrl)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+'" data-alt="',stack1=(helper=helpers.alt)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.alt)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    <span class="desc truncate">',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'</span>\n    <div class="actions">\n        <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <a href="#" class="tlb-button-off select" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Select this file",options):helperMissing.call(depth0,"__","Select this file",options)))+'"><span class="icon-move-item"></span></a>\n                            <a href="',stack1=(
helper=helpers.downloadUrl)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.downloadUrl)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" download="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" target="_blank" class="tlb-button-off download" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Download this file",options):helperMissing.call(depth0,"__","Download this file",
options)))+'"><span class="icon-download"></span></a>\n                            <a href="#" class="tlb-button-off" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Remove this file",options):helperMissing.call(depth0,"__","Remove this file",options)))+'" data-delete=":parent li"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n</li>\n'},data),data:data}))||0===stack1?stack1:""})}),define(
"tpl!ui/uploader/uploader",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="file-upload grid-row">\n    <span class="btn-info btn-browse small col-5"><span class="icon-folder-open"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Browse...",options):helperMissing.call(depth0,"__","Browse...",options))
)+'</span>\n    <span class="file-name col-7 truncate placeholder">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"No file selected",options):helperMissing.call(depth0,"__","No file selected",options)))+'</span>\n    <input type="file" name="',stack1=(helper=helpers.inputName)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.inputName)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n</div>\n\x3c!--<div class="grid-row" style="display:none;">--\x3e\n\x3c!--<ul class="file-list"></ul>--\x3e\n\x3c!--</div>--\x3e\n<div class="grid-row">\n    <div class="file-drop col-12" data-drop-msg="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Drop the files to upload",options):helperMissing.call(depth0,"__","Drop the files to upload",options)))+'">\n        <div class="dragholder">\n            ~ '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"or",options):helperMissing.call(
depth0,"__","or",options)))+" ~\n            <br/>\n            ",((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.program(5,function(depth0,data){var helper,options,buffer="";return buffer+="\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Drag file here",options):helperMissing.call(depth0,"__","Drag file here",options)))+"\n            "},data),fn:this.program(3,function(depth0,data){var helper,options,buffer="";return buffer+="\n            "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,
"Drag files here",options):helperMissing.call(depth0,"__","Drag files here",options)))+"\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n    </div>\n</div>\n<div class="grid-row">\n    <div class="progressbar col-12"></div>\n    <br/>\n</div>\n<div class="grid-row">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.showResetButton,{hash:{},inverse:this.noop,fn:this.program(7,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <button type="button" class="btn-info btn-reset small"><span class="icon-eraser"></span>'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Reset",options):helperMissing.call(depth0,"__","Reset",options)))+"</button>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.showUploadButton,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-success btn-upload small"><span class="icon-upload"></span>',stack1=(helper=helpers.uploadBtnText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uploadBtnText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+"</button>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"})}),define("tpl!ui/uploader/fileEntry",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<li data-file-name="',buffer+=escapeExpression((helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    ',
buffer+=escapeExpression((helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'\n    <span class="size">',buffer+=escapeExpression((helper=helpers.size)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.size)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n    <span class="status"></span>\n    <a href="#" data-role="delete"><span class="icon-close"></span></a>\n</li>'})}),define("ui/uploader",["jquery","lodash","i18n","async","core/pluginifier","context","util/bytes","tpl!ui/uploader/uploader",
"tpl!ui/uploader/fileEntry","ui/filesender","ui/progressbar"],function($,_,__,async,Pluginifier,context,bytes,uploaderTpl,fileEntryTpl){"use strict";var ns="uploader",dataNs="ui."+ns,defaults={upload:!0,read:!1,multiple:!1,uploadQueueSize:3,inputName:"content",showResetButton:!0,showUploadButton:!0,browseBtnClass:"btn-browse",uploadBtnClass:"btn-upload",resetBtnClass:"btn-reset",fileNameClass:"file-name",dropZoneClass:"file-drop",progressBarClass:"progressbar",dragOverClass:"drag-hover",formAttributes:{class:"uploader uploaderContainer"},defaultErrMsg:__("Unable to upload file"),uploadBtnText:__("Upload"),fileSelect:function(files,done){return _.isFunction(
done)?done(files):files}},tests={filereader:"undefined"!=typeof FileReader,dnd:"draggable"in document.createElement("span")},uploader={init:function(options){var self=uploader;return options=_.defaults(options||{},defaults),this.each(function(){var $builtInForm,$elt=$(this);if(!$elt.data(dataNs)){$elt.html(uploaderTpl(options)),($builtInForm=options.$form&&options.$form.length?options.$form:$elt.find("form")).length||($builtInForm=$elt.closest("form")),$builtInForm.length||($elt.wrap($("<form>",options.formAttributes)),$builtInForm=$elt.parent()),options.$input=$("input[type=file]",$elt),options.$browseBtn=$("."+options.browseBtnClass,$elt),
options.$fileName=$("."+options.fileNameClass,$elt),options.$dropZone=$("."+options.dropZoneClass,$elt),options.$progressBar=$("."+options.progressBarClass,$elt),options.$form=$builtInForm,options.$uploadBtn=$("."+options.uploadBtnClass,$elt),options.$resetBtn=$("."+options.resetBtnClass,$elt),options.useDropZone=tests.dnd,options.dropZonePlaceholder=options.$dropZone.html(),options.fileNamePlaceholder=options.$fileName.text(),options.files=[],$elt.data(dataNs,options),self._reset($elt);var dragOutHandler=function(e){e.preventDefault(),e.stopPropagation(),options.$dropZone.removeClass(options.dragOverClass)};if(!tests.filereader)throw new Error(
"FileReader API not supported! Please use a compliant browser!");options.$input.on("change",function(e){var finalFiles=[];_.forEach(e.target.files,function(file){finalFiles.push(file)}),self._selectFiles($elt,finalFiles)}),options.$input.on("mousedown",function(e){return e.preventDefault(),$(this).blur(),!1}),options.useDropZone?($(document).off("drop."+ns).on("drop."+ns,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1}),$(document).off("dragover."+ns).on("dragover."+ns,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1}),options.$dropZone.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),
options.$dropZone.addClass(options.dragOverClass)}).on("dragend",dragOutHandler).on("dragleave",dragOutHandler).on("drop",function(e){var files=[];if(dragOutHandler(e),e.target.files?files=_.values(e.target.files):e.originalEvent.files?files=_.values(e.originalEvent.files):e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&(files=_.values(e.originalEvent.dataTransfer.files)),files&&files.length){var append=0<options.$dropZone.children("ul").length;options.multiple||(append=!(files=[files[0]])),self._selectFiles($elt,files,append)}return!1})):options.$dropZone.hide(),$elt.on("fileselect."+ns,function(){0===options.files.length&&self._reset($elt
),options.upload&&options.$uploadBtn.off("click").on("click",function(e){e.preventDefault(),self._upload($elt,options.files)}).removeProp("disabled"),options.read&&self._read($elt,options.files),options.$resetBtn.off("click").on("click",function(e){e.preventDefault(),self._reset($elt)}).removeProp("disabled")}),$elt.trigger("create."+ns)}})},_selectFiles:function($elt,files,append){var listContent,self=this,options=$elt.data(dataNs),updateFileName=function(){var length=options.files.length;options.$fileName.text(length+" "+__(1<length?"files selected":"file selected")).removeClass("placeholder")};files.length<=0&&!append&&self._reset($elt),
0<files.length&&options.fileSelect.call($elt,files,function(filteredFiles){options.files=append?options.files.concat(filteredFiles):filteredFiles,options.useDropZone?(updateFileName(),listContent=_.reduce(filteredFiles,function(acc,file){return acc+fileEntryTpl({name:file.name,size:bytes.hrSize(file.size)})},""),append?options.$dropZone.children("ul").append(listContent):options.$dropZone.html("<ul>"+listContent+"</ul>"),options.$dropZone.off("click."+ns).on("click."+ns,"[data-role=delete]",function(e){var $fileEntry=$(this).parent(),name=$fileEntry.data("file-name");e.preventDefault(),e.stopPropagation(),name&&(options.files=_.reject(options.files,{
name:name}),0===options.files.length?self._reset($elt):updateFileName(),$fileEntry.remove())})):(options.files=options.files.slice(0,1),options.$fileName.text(files[0].name).removeClass("placeholder")),$elt.trigger("fileselect."+ns)})},_files:function($elt){var files=[],options=$elt.data(dataNs);return options&&(files=options.files),files},_reset:function($elt){var options=$elt.data(dataNs);options.$fileName.text(options.fileNamePlaceholder).addClass("placeholder"),options.$dropZone.empty().html(options.dropZonePlaceholder),options.$uploadBtn.prop("disabled",!0),options.$resetBtn.prop("disabled",!0),options.$progressBar&&options.$progressBar.removeClass(
"success").progressbar("destroy").progressbar({value:0}),$elt.trigger("reset."+ns)},_upload:function($elt){var length,$fileEntries,entryHeight,q,errors=[],options=$elt.data(dataNs);options&&options.files.length&&(length=options.files.length,$fileEntries=$("ul",options.$dropZone),entryHeight=$("li:first",$fileEntries).outerHeight(),q=async.queue(function(file,done){var $fileEntry=$('li[data-file-name="'+file.name+'"]',$fileEntries),$status=$(".status",$fileEntry),index=$fileEntries.children().index($fileEntry);options.$dropZone.stop(!0,!0).animate({scrollTop:index*entryHeight},25),$status.removeClass("success").removeClass("error").addClass("sending"),
options.$form.sendfile({url:options.uploadUrl,file:file,loaded:function(result){$status.removeClass("sending").removeClass("error").addClass("success"),done(null,result)},failed:function(message){message=message||options.defaultErrMsg,$status.removeClass("sending").removeClass("success").addClass("error").attr("title",message),done(new Error(message))}})},options.uploadQueueSize||1),options.$uploadBtn.prop("disabled",!0),options.$resetBtn.prop("disabled",!0),options.$progressBar.progressbar("value",0),_.forEach(options.files,function(file,index){_.delay(function(){q.push(file,function(err,result){var complete=(index+1)/length*100;err?(errors.push(err),
$elt.trigger("fail."+ns,[file,err])):$elt.trigger("upload."+ns,[file,result]),options.$progressBar.progressbar("value",complete),100<=complete&&(errors.length===length?options.$progressBar.addClass("error"):0<errors.length?options.$progressBar.addClass("warning"):options.$progressBar.addClass("success"),$elt.trigger("end."+ns))})},50)}))},_read:function($elt){var options=$elt.data(dataNs);options&&options.files.length&&_.forEach(options.files,function(file){file.name,file.size,file.type;var reader=new FileReader;reader.onload=function(e){options.$progressBar.progressbar("value",100),$elt.trigger("readend."+ns,[file,e.target.result])},
reader.onloadstart=function(e){options.$progressBar.progressbar("value",0),$elt.trigger("readstart."+ns,[file])},options.$progressBar.length&&(reader.onprogress=function(e){var percentProgress=Math.ceil(Math.round(e.loaded)/Math.round(e.total)*100);options.$progressBar.progressbar("value",percentProgress)}),reader.readAsDataURL(file)})},destroy:function(){this.each(function(){var $elt=$(this);$(document).off("drop."+ns).off("dragover."+ns),$elt.empty(),$elt.trigger("destroy."+ns)})}};Pluginifier.register(ns,uploader,{expose:["reset","selectFiles","upload","read"]})}),define("ui/resourcemgr/fileSelector",["jquery","lodash","async","i18n","core/mimetype",
"tpl!ui/resourcemgr/tpl/fileSelect","ui/feedback","ui/uploader","context"],function($,_,async,__,mimeType,fileSelectTpl,feedback,uploader,context){"use strict";var ns="resourcemgr";return function(options){var root=options.root||"/",disableUpload=options.disableUpload||!1,$container=options.$target,$fileSelector=$(".file-selector",$container),$fileContainer=$(".files",$fileSelector),$placeholder=$(".empty",$fileSelector),$uploader=$(".file-upload-container",$fileSelector),parentSelector="#"+$container.attr("id")+" .file-selector",$pathTitle=$fileSelector.find("h1 > .title"),$browserTitle=$(".file-browser > h1",$container);disableUpload?$(".upload-switcher",
$fileSelector).remove():function(currentPath){var errors=[],$switcher=$(".upload-switcher a",$fileSelector);$uploader.on("upload.uploader",function(e,file,result){var path=$('[data-display="'+currentPath+'"]').data("path")||$('[data-display="/'+currentPath+'"]').data("path");path||(path=currentPath),$container.trigger("filenew."+ns,[result,path])}),$uploader.on("fail.uploader",function(e,file,err){errors.push(__("Unable to upload file %s : %s",file.name,err.message))}),$uploader.on("end.uploader",function(){0===errors.length?_.delay(switchUpload,500):feedback().error("<ul><li>"+errors.join("</li><li>")+"</li></ul>",{encodeHtml:!1}),errors=[]}),
$uploader.uploader({upload:!0,multiple:!0,uploadUrl:options.uploadUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+currentPath,fileSelect:function(files,done){var givenLength=files.length,fileNames=[];if($fileContainer.find("li > .desc").each(function(){fileNames.push($(this).text().toLowerCase())}),options.params.filters){var i,filters=[];if(_.isString(options.params.filters))filters=options.params.filters.split(",");else for(i in options.params.filters)filters.push(options.params.filters[i].mime);(files=_.filter(files,function(file){var checkType=file.type.replace(/^["']+|['"]+$/g,"");return _.contains(filters,checkType)})
).length!==givenLength&&feedback().error("Unauthorized files have been removed")}async.filter(files,function(file,cb){var result=!0;if(options.fileExistsUrl){var pathParam=currentPath+"/"+file.name;pathParam.replace("//","/"),$.getJSON(options.fileExistsUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+pathParam,function(response){response&&!0===response.exists&&(result=window.confirm("Do you want to override "+file.name+"?")),cb(result)})}else _.contains(fileNames,file.name.toLowerCase())&&(result=window.confirm("Do you want to override "+file.name+"?")),cb(result)},done)}}),$container.on("folderselect."+ns,function(e,fullPath,data,uri){
currentPath=uri,$uploader.uploader("options",{uploadUrl:options.uploadUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+currentPath+"&relPath="+currentPath})}),$switcher.click(function(e){e.preventDefault(),switchUpload()});var switchUpload=function(){"none"===$fileContainer.css("display")?($uploader.hide(),$fileContainer.show(),$switcher.filter(".upload").css({display:"inline-block"}),$switcher.filter(".listing").hide(),$browserTitle.text(__("Browse folders:"))):($fileContainer.hide(),$placeholder.hide(),$uploader.show(),$switcher.filter(".upload").hide(),$switcher.filter(".listing").css({display:"inline-block"}),$browserTitle.text(__("Upload into:"
)),$uploader.uploader("reset"))}}(root);$container.on("folderselect."+ns,function(e,fullPath,data,activePath){var tokens,start,end,$element,text,$dummy,textSize;$pathTitle.text((text=fullPath,$dummy=($element=$pathTitle).clone().detach().css({position:"absolute",visibility:"hidden","text-overflow":"clip",width:"auto"}).text(text).insertAfter($element),textSize=$dummy.width(),$dummy.remove(),textSize>$element.width()?(tokens=fullPath.replace(/\/$/,"").split("/"),start=tokens.length-3,end=tokens.length-1,_.map(tokens,function(token,index){return start<index&&token?index<end?token[0]:token:void 0}).filter(Boolean).join("/")):fullPath)),_.isArray(data)&&(
function(path,files){$fileContainer.empty(),files.length?($placeholder.hide(),$fileContainer.append(fileSelectTpl({files:files}))):"none"!==$fileContainer.css("display")&&$placeholder.show()}(0,_.filter(data,function(item){return!!item.uri}).map(function(file){return file.type=mimeType.getFileType(file),void 0===file.identifier?file.display=(fullPath+"/"+file.name).replace("//","/"):file.display=file.identifier+file.name,file.viewUrl=options.downloadUrl+"?"+$.param(options.params)+"&"+options.pathParam+"="+encodeURIComponent(file.uri),file.downloadUrl=file.viewUrl+"&svgzsupport=true",file})),activePath&&$('li[data-file="'+activePath+'"]').trigger("click"))})
,$(parentSelector).off("click",".files li").on("click",".files li",function(e){var $selected=$(this),$files=$(".files > li",$fileSelector),data=_.clone($selected.data());$files.removeClass("active"),$selected.addClass("active"),$container.trigger("fileselect."+ns,[data])}),$(parentSelector).off("click",".files li a.select").on("click",".files li a.select",function(e){e.preventDefault();var data=_.pick($(this).parents("li").data(),["file","type","mime","size","alt"]);context.mediaSources&&0===context.mediaSources.length&&-1<data.file.indexOf("local/")&&(data.file=data.file.substring(6)),$container.trigger("select."+ns,[[data]])}),$fileContainer.on(
"delete.deleter",function(e,$target){var path,params={};"deleter"===e.namespace&&$target.length&&(path=$target.data("file"),params[options.pathParam]=path,$.getJSON(options.deleteUrl,_.merge(params,options.params),function(response){response.deleted&&$container.trigger("filedelete."+ns,[path])}))})}}),define("tpl!ui/resourcemgr/tpl/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing
;return buffer+='<div class="resourcemgr modal">\n\n    <h2>',buffer+=escapeExpression((helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'</h2>\n\n    <div class="file-wrapper">\n    \n        \x3c!-- left section: items selection --\x3e\n        <section class="file-browser">\n            <h1>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Browse resources",options):helperMissing.call(depth0,"__","Browse resources",options))
)+'</h1>\n            <div class="file-browser-wrapper"></div>\n        </section>\n \n        \x3c!-- test editor  --\x3e\n        <section class="file-selector">\n\n            <h1>\n                <div class="title lft"></div>\n                <div class="upload-switcher rgt">\n                    <a href="#" class="btn-info small upload"><span class="icon-add"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Add file(s)",options):helperMissing.call(depth0,"__","Add file(s)",options))
)+'</a>\n                    <a href="#" class="btn-info small listing"><span class="icon-undo"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Back to listing",options):helperMissing.call(depth0,"__","Back to listing",options)))+'</a>\n                </div>\n            </h1>\n\n            <div class="empty">\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"No files",options):helperMissing.call(depth0,"__","No files",options))
)+'\n            </div>\n\n            <ul class="files"></ul>\n\n            <div class="file-upload-container"></div>\n\n        </section>\n\n        <section class="file-preview">\n\n            <h1>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Preview",options):helperMissing.call(depth0,"__","Preview",options)))+'</h1>\n\n            <div class="previewer">\n                <p class="nopreview">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"No Preview available",options):helperMissing.call(depth0,"__","No Preview available",options))
)+'</p>\n            </div>\n       \n            <h2 class="toggler" data-toggle="~ .file-properties">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"File Properties",options):helperMissing.call(depth0,"__","File Properties",options)))+'</h2>\n\n            <div class="file-properties">\n\n                <div class="grid-row">\n                    <div class="col-2">\n                        '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Type",options):helperMissing.call(depth0,"__","Type",options))
)+'\n                    </div>\n                    <div class="col-10 prop-type"></div>\n                </div>\n\n                <div class="grid-row">\n                    <div class="col-2">\n                        '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Size",options):helperMissing.call(depth0,"__","Size",options))
)+'\n                    </div>\n                    <div class="col-10 prop-size"></div>\n                </div>\n            \n                <div class="grid-row prop-url">\n                    <div class="actions">\n                        <a href="#" download="" target="_blank" class="tlb-button-off download hidden" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Download this file",options):helperMissing.call(depth0,"__","Download this file",options))
)+'">\n                            <button class="btn-info small">\n                                <span class="icon-download"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Download this file",options):helperMissing.call(depth0,"__","Download this file",options)))+'\n                            </button>\n                        </a>\n                    </div>\n                </div>\n            </div>\n\n            <h2 class="toggler" data-toggle="~ .actions">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Actions",options
):helperMissing.call(depth0,"__","Actions",options)))+'</h2>\n\n            <div class="actions">\n                <button class="btn-success select-action small" disabled>\n                    <span class="icon-move-item"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Select",options):helperMissing.call(depth0,"__","Select",options)))+"\n                </button>\n            </div>\n\n        </section>\n\n    </div>\n</div>"})}),define("ui/resourcemgr",["jquery","lodash","core/pluginifier","core/dataattrhandler","ui/modal","ui/resourcemgr/fileBrowser","ui/resourcemgr/filePreview",
"ui/resourcemgr/fileSelector","tpl!ui/resourcemgr/tpl/layout"],function($,_,Pluginifier,DataAttrHandler,modal,fileBrowser,filePreview,fileSelector,layout){"use strict";var ns="resourcemgr",dataNs="ui."+ns,defaults={mediaSources:[{root:"local",path:"/"}],open:!0,appendContainer:".tao-scope:first",title:""},resourceMgr={init:function(options){var self=resourceMgr;return options=_.defaults(options,defaults),this.each(function(){var $target,$elt=$(this);if($elt.data(dataNs))(options=$elt.data(dataNs)).open&&self._open($elt);else{$elt.data(dataNs,options),_.functions(options).forEach(function(eventName){$elt.on(eventName+"."+ns,function(){
options[eventName].apply($elt,arguments)})}),($target=options.$target||self._createTarget($elt)).modal({startClosed:!0,minWidth:"responsive"}),$target.on("select."+ns,function(e,files){self._close($elt),$elt.trigger(e,[files])}),$target.on("closed.modal",function(){$elt.trigger("close."+ns)});var $fileBrowser=$(".file-browser .file-browser-wrapper",$target);options.mediaSourcesUrl?$.getJSON(options.mediaSourcesUrl).done(function(data){for(var mediaSources=data||defaults.mediaSources,i=0;i<mediaSources.length;i++)options.root=mediaSources[i].root,options.path=mediaSources[i].path,$fileBrowser.append(
'<div class="'+options.root+'"><ul class="folders"></ul></div>'),fileBrowser(options)}).fail(function(){for(var i=0;i<defaults.mediaSources.length;i++)options.root=defaults.mediaSources[i].root,options.path=defaults.mediaSources[i].path,$fileBrowser.append('<div class="'+options.root+'"><ul class="folders"></ul></div>'),fileBrowser(options)}):options.path&&options.root&&($fileBrowser.append('<div class="'+options.root+'"><ul class="folders"></ul></div>'),fileBrowser(options)),$fileBrowser.find("li.root:last").addClass("active"),fileSelector(options),filePreview(options),$elt.trigger("create."+ns,[$target[0]]),options.open&&self._open($elt)}})},
_createTarget:function($elt){var options=$elt.data(dataNs);return options&&(options.targetId="resourcemgr-"+$(document).find(".resourcemgr").length,options.$target=$(layout({title:options.title||""})),options.$target.attr("id",options.targetId).css("display","none").appendTo(options.appendContainer),$elt.data(dataNs,options)),options.$target},_open:function($elt){var options=$elt.data(dataNs);options&&options.$target&&(options.$target.modal("open"),$elt.trigger("open."+ns))},_close:function($elt){var options=$elt.data(dataNs);options&&options.$target&&options.$target.modal("close")},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(
dataNs);$elt.data(dataNs,null),void 0!==options.bindEvent&&!1!==options.bindEvent&&$elt.off(options.bindEvent),options.targetId&&$("#"+options.targetId).remove(),$(window).off("resize.resourcemgr"),$elt.trigger("destroy."+ns)})}};Pluginifier.register(ns,resourceMgr)}),define("tpl!ui/switch/tpl/switch",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;function program3(depth0,data){return"active"}return buffer+='<div class="switch" title="',
buffer+=escapeExpression(stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    <input type="checkbox" name="',buffer+=escapeExpression(stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.name)?helper.call(depth0,{hash:{},data:data}):helper)+'" ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.on)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"checked"},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='>\n    <label>\n        <span class="off ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.off)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.off)||!1===stack1?stack1:stack1.label)?stack1.apply(depth0):stack1)+'</span>\n        <span class="on  ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.on)||!1===stack1?stack1:stack1.active,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='">'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.on)||!1===stack1?stack1:stack1.label)?stack1.apply(depth0):stack1)+"</span>\n    </label>\n</div>"})}),define("css!ui/switch/css/switch",[],function(){}),define("ui/switch/switch",["jquery","lodash","i18n","ui/component","lib/uuid","tpl!ui/switch/tpl/switch","css!ui/switch/css/switch.css"],function($,_,__,component,uuid,switchTpl){"use strict";var states_on="on",states_off="off",defaultConfig={on:{label:__("On")},off:{label:__("Off"),active:!0},title:""};return function($container,config){var onElt,offElt,switchComponent=component({getName:function(){return this.config.name
},isOn:function(){return this.is(states_on)},isOff:function(){return!this.is(states_on)},setOn:function(){return this.isOn()||this.setState(states_on,!0),this.is("rendered")&&(offElt.removeClass("active"),onElt.addClass("active"),this.trigger("change",states_on).trigger(states_on)),this},setOff:function(){return this.isOff()||this.setState(states_on,!1),this.is("rendered")&&(onElt.removeClass("active"),offElt.addClass("active"),this.trigger("change",states_off).trigger(states_off)),this},toggle:function(){return this.isOn()?this.setOff():this.setOn()},getValue:function(){return this.is(states_on)?states_on:states_off}},defaultConfig).setTemplate(switchTpl
).on("init",function(){this.config.name||(this.config.name="switch-"+uuid()),this.config.on=_.defaults(this.config.on,defaultConfig.on),this.config.off=_.defaults(this.config.off,defaultConfig.off),!0===this.config.on.active?(this.config.off.active=!1,this.setOn()):this.setOff(),this.render($container)}).on("render",function(){var self=this,$component=this.getElement();onElt=$("."+states_on,$component),offElt=$("."+states_off,$component),$(":checkbox",$component).on("change",function(e){e.preventDefault(),self.toggle()})});return _.defer(function(){switchComponent.init(config)}),switchComponent}}),define("ui/tableModel",["lodash","jquery"],function(_,$){
"use strict";return function($table){var cellsByRow;function update(){var rowsInOrder=[].concat($table.find("thead tr").toArray()).concat($table.find("tbody tr").toArray()).concat($table.find("tfoot tr").toArray());cellsByRow=[],rowsInOrder.forEach(function(row){var $rowCells=$(row).find("th,td");cellsByRow.push($rowCells)})}if(!$table||!$table.is("table"))throw new TypeError("$table should contain a reference to a table element");return update(),{getRowCount:function(){return cellsByRow.length},getRowCells:function(index){return index<0&&(index+=cellsByRow.length),cellsByRow[index]||$()},getColCount:function(){return cellsByRow[0].length},
getColCells:function(index){var columnCells=[];return _.isFinite(index)&&cellsByRow.forEach(function($row){var cell=$row.get(index);cell&&columnCells.push(cell)}),columnCells.length?$(columnCells):$()},update:update}}}),define("tpl!ui/taskQueue/tpl/status",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="task-queue-status"></div>'})}),define("tpl!ui/taskQueue/tpl/statusMessage",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,
">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="message">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.name,{hash:{},inverse:this.program(3,function(depth0,data){var helper,options,buffer="";return buffer+="\n        "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Status",options):helperMissing.call(depth0,"__","Status",options)))+"\n    "},data),fn:this.program(1,function(depth0,data){var stack1,helper,options,buffer=""
;return buffer+="\n        "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Status of",options):helperMissing.call(depth0,"__","Status of",options)))+' <span class="task-name">',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    : <span class="task-status">',stack1=(helper=helpers.status)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.status
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n</div>"})}),define("ui/taskQueue/status",["jquery","lodash","i18n","core/dataProvider/request","core/polling","core/taskQueue","ui/component","ui/report","tpl!ui/taskQueue/tpl/status","tpl!ui/taskQueue/tpl/statusMessage"],function($,_,__,request,polling,taskQueue,component,report,statusTpl,messageTpl){"use strict";var _status={loading:__("Loading status"),created:__("Not started"),running:__("In progress"),finished:__("Completed")},_defaults={serviceUrl:"",taskId:"",taskStatus:_status.loading,showDetailsButton:!0,actions:[]},statusComponent={
start:function(){return this.taskQueueApi&&this.taskQueueApi.pollStatus(this.config.taskId),this},stop:function(){return this.taskQueueApi&&this.taskQueueApi.pollStop(),this}};return function(config){var taskQueueStatus;if(config=_.defaults(config||{},_defaults),_.isEmpty(config.serviceUrl))throw new TypeError("The task queue status needs to be configured with a service url");var createReport=function(reportType,message,taskReport){var innerTaskReport,reportData={type:reportType,message:message};return _.isPlainObject(taskReport)&&taskReport.type&&_.isArray(taskReport.children)&&taskReport.children.length&&(innerTaskReport=taskReport.children[0],
reportData.type=innerTaskReport.type,reportData.children=taskReport.children),report({replace:!0,noBorder:!0,showDetailsButton:config.showDetailsButton,actions:config.actions},reportData).on("action",function(actionId){taskQueueStatus.trigger("action-"+actionId),taskQueueStatus.trigger("action",actionId)}).on("showDetails",function(){taskQueueStatus.trigger("showDetails")}).on("hideDetails",function(){taskQueueStatus.trigger("hideDetails")}).render(taskQueueStatus.getElement()).showDetails()};return taskQueueStatus=component(statusComponent).setTemplate(statusTpl).on("destroy",function(){this.taskQueueApi&&this.taskQueueApi.pollStop()}).on("render",function(
){var self=this;config.data&&"finished"===config.data.status?self.report=createReport(config.data.report.type||"info",messageTpl({name:config.data.label,status:_status.finished}),config.data.report||{}):(self.report=createReport("info",__("Loading task status ...")),this.taskQueueApi=taskQueue({url:{status:config.serviceUrl}}).on("running",function(taskData){"running"!==self.status&&(self.report=createReport("info",messageTpl({name:taskData.label,status:_status.running})),self.status="running",self.trigger("statechange",self.status)),self.trigger("running",taskData)}).on("finished",function(taskData){"finished"!==self.status&&(self.report=createReport(
taskData.report.type||"info",messageTpl({name:taskData.label,status:_status.finished}),taskData.report||{}),self.status="finished",self.trigger("finished",taskData),self.trigger("statechange",self.status))}).on("error",function(err){self.trigger("error",err)}))}).init(config)}}),define("tpl!ui/taskQueue/tpl/report",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="report-container"></div>'})}),define("ui/taskQueue/table",["jquery","lodash","i18n","moment","core/taskQueue","ui/component",
"ui/taskQueue/status","tpl!ui/taskQueue/tpl/report","ui/datatable","ui/modal","jquery.fileDownload"],function($,_,__,moment,taskQueueApi,component,taskQueueStatusFactory,reportTpl){"use strict";var _defaults={context:"",urls:{listing:"",remove:"",download:""},status:{loading:__("Loading status"),created:__("Not started"),running:__("In progress"),finished:__("Completed"),finishedSuccess:__("Completed"),finishedError:__("Completed - Error")},statusFilter:["loading","created","running","finished","finishedSuccess","finishedError"]},isReport=function(report){return _.isPlainObject(report)&&report.type&&report.message};return function(config){var tasks,errorRows
;if(config=_.defaults(config,_defaults),_.isEmpty(config.context))throw new TypeError("The task queue provider needs to be initalized with a context");return component({showReport:function(taskId){var status,data,$report=this.$component.find(".report-container"),$dataTable=this.$component.find(".datatable-wrapper");$report.length||($report=$(reportTpl()),this.$component.append($report)),$dataTable.hide();var task=_.find(tasks,{id:taskId});return task&&"finished"===task.status&&task.report&&(data=task),status=taskQueueStatusFactory({replace:!0,taskId:taskId,serviceUrl:this.config.statusUrl,showDetailsButton:!1,actions:[{id:"back",icon:"backward",title:__(
"Back to listing"),label:__("Back")}],data:data}).on("action-back",function(){status.destroy(),$dataTable.show()}).render($report).start(),this},remove:function(taskId){var self=this;return this.taskQueueApi.remove(taskId).then(function(){self.$component.datatable("refresh"),self.trigger("removed",taskId)}).catch(function(err){self.trigger("error",err)}),this},download:function(taskId){var self=this;return $.fileDownload(this.config.downloadUrl,{data:{taskId:taskId},failCallback:function(){self.trigger("error",__("File download failed"))}}),this}},config).on("init",function(){this.taskQueueApi=taskQueueApi({url:{status:this.config.serviceUrl,
remove:this.config.removeUrl}})}).on("render",function(){var self=this,$component=this.getElement(),actions=[{id:"delete",icon:"bin",title:__("Remove"),disabled:function(){return this.status!==config.status.finished&&this.status!==config.status.finishedError&&this.status!==config.status.finishedSuccess},action:function(id){self.remove(id)}},{id:"report",icon:"templates",title:__("View report"),disabled:function(){return this.status===config.status.created},action:function(id){self.showReport(id)}}];void 0!==this.config.downloadUrl&&""!==this.config.downloadUrl&&actions.push({id:"download",icon:"download",title:__("Download"),disabled:function(){
return this.status!==config.status.finished&&this.status!==config.status.finishedSuccess},action:function(id){self.download(id)}}),$component.addClass("task-queue-table").on("beforeload.datatable",function(e,dataSet){dataSet&&dataSet.data&&(tasks=dataSet.data)}).on("query.datatable",function(){errorRows=[],self.trigger("loading")}).on("load.datatable",function(){_.isArray(errorRows)&&errorRows.length&&_.forEach(errorRows,function(id){$component.datatable("addRowClass",id,"error")}),self.trigger("loaded")}).datatable({url:this.config.dataUrl,rows:this.config.rows,sortorder:"desc",filtercolumns:{type:this.config.context,status:this.config.statusFilter},
status:{empty:__("No Task yet"),available:__("Task Listing"),loading:__("Loading")},tools:[{id:"refresh",icon:"reset",title:__("Refresh"),label:__("Refresh"),action:function(){self.$component.datatable("refresh"),self.trigger("refresh")}}],model:[{id:"label",label:__("Task Name")},{id:"creationDate",label:__("Created"),transform:function(value){return date=value,self.config,moment.unix(date).fromNow();var date}},{id:"status",label:__("Status"),transform:function(value,row){return"finished"===row.status?function(report){if(isReport(report)&&_.isArray(report.children)&&isReport(report.children[0]))return"error"===report.children[0].type}(row.report)?(
errorRows.push(row.id),config.status.finishedError):config.status.finishedSuccess:config.status[row.status]||""}},{id:"actions",label:__("Actions"),type:"actions",actions:actions}],selectable:!1})}).on("reload",function(){this.$component&&this.$component.datatable("refresh")})}}),define("tpl!ui/taskQueueButton/tpl/treeButton",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression
;return buffer+='<div class="tree-button-component">\n    <a class="li-inner">\n        <span class="spinner-icon icon-loop spinning"></span>\n        <span class="glyph start-icon icon-',buffer+=escapeExpression((helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.icon)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n        ',buffer+=escapeExpression((helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper)+"\n    </a>\n</div>"})}),define("css!ui/taskQueueButton/css/treeButton",[],function(){}),
define("ui/taskQueueButton/treeButton",["jquery","lodash","i18n","ui/feedback","ui/component","layout/loading-bar","ui/taskQueueButton/taskable","tpl!ui/taskQueueButton/tpl/treeButton","css!ui/taskQueueButton/css/treeButton"],function($,_,__,feedback,component,loadingBar,makeTaskable,buttonTpl){"use strict";var _defaults={icon:"property-advanced",label:"OK"},buttonApi={start:function(){return this.createTask(),this.setState("started",!0),this.trigger("start"),this},stop:function(){return this.is("started")&&(this.setState("started",!1),this.trigger("stop")),this}};return function(config){var initConfig=_.defaults(config||{},_defaults);return makeTaskable(
component(buttonApi)).on("finished",function(){this.stop()}).on("enqueued",function(){this.stop()}).setTemplate(buttonTpl).init(initConfig)}}),define("ui/themeLoader",["jquery","lodash"],function($,_){"use strict";var prefix="custom-theme-",$container=$("head").length?$("head"):$("body"),triggerThemeChange=function(themeId){_.delay(function(){$(document).trigger("themechange.themeloader",[themeId])},200)},getLink=function(id){return $('link[data-id="'+id+'"][data-type^="'+prefix+'"]',$container)},isAttached=function(id){return 0<getLink(id).length},enable=function($nodes){$nodes.prop("disabled",!1).removeProp("disabled").removeAttr("disabled")},
disable=function($nodes){return $nodes.prop("disabled",!0).attr("disabled",!0)};return function(config){var defaultTheme,activeTheme,themes,i,styles={};if(!_.isPlainObject(config))throw new TypeError("Theme loader configuration is required");if(!_.isString(config.base))throw new TypeError("Theme loader configuration is an object with a base property configuration");if(!_.isArray(config.available)||!config.available.length)throw new TypeError("No theme declared in the configuration");for(i in config.available)if(!_.isPlainObject(config.available[i])||_.isEmpty(config.available[i].id)||_.isEmpty(config.available[i].path))throw new TypeError(
"There is a theme that does not contain an id or a path");return defaultTheme=config.default||_.first(_.pluck(config.available,"id")),activeTheme=defaultTheme,themes=(themes=[{id:"base",path:config.base,name:"TAO"}]).concat(config.available),_.forEach(themes,function(theme){isAttached(theme.id)?styles[theme.id]=getLink(theme.id):styles[theme.id]=function(theme){var type="base"===theme.id?prefix+"base":prefix+"theme";return $("<link>").attr({rel:"stylesheet",type:"text/css",href:theme.path,"data-type":type,"data-name":theme.name||theme.id,"data-id":theme.id})}(theme)}),{load:function(preload){return _.forEach(styles,function($link,id){isAttached(id)||(
preload||id!==activeTheme||$link.on("load",function(){triggerThemeChange(id)}),disable($link),$container.append($link)),preload||("base"!==id&&id!==defaultTheme?disable($link):(enable($link),triggerThemeChange(activeTheme=id)))}),this},unload:function(){return disable($('link[data-type^="'+prefix+'"]',$container)),this},change:function(id){return _.contains(["base","default"],id)&&!isAttached(id)&&(id=defaultTheme),isAttached(id)&&(disable($('link[data-type="'+prefix+'theme"]',$container)),enable(getLink(id)),triggerThemeChange(activeTheme=id)),this},getActiveTheme:function(){return activeTheme}}}}),define("ui/themes",["lodash","module"],function(_,module){
"use strict";var themesConfig;return{getConfig:function(){var initialConfig;return themesConfig||(initialConfig=module.config(),themesConfig=_.cloneDeep(initialConfig)),themesConfig},getDefaultNamespacePrefix:function(){return"items"},get:function(what,ns){var config=this.getConfig();if(ns?what+="_"+ns:config.activeNamespace&&config[what+"_"+config.activeNamespace]&&(what+="_"+config.activeNamespace),_.isPlainObject(config[what]))return config[what]},getAvailable:function(what,ns){var available=[],themes=this.get(what,ns);return themes&&_.isArray(themes.available)&&(available=themes.available),available},getActiveNamespace:function(){return this.getConfig(
).activeNamespace},setActiveNamespace:function(ns){this.getConfig().activeNamespace=ns},getCurrentThemeData:function(what){var themeNamespace=this.getActiveNamespace();return what||(what=this.getDefaultNamespacePrefix()),this.get(what,themeNamespace)}}}),define("ui/toggler",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,DataAttrHandler){"use strict";var ns="toggler",dataNs="ui."+ns,defaults={disableClass:"disabled",bindEvent:"click",openedClass:"opened",closedClass:"closed"},Toggler={init:function(options){return options=$.extend(!0,{},defaults,options),this.each(function(){var $elt=$(this),$target=options.target,
openedClass=options.openedClass,closedClass=options.closedClass;$elt.data(dataNs)||(options.hideText&&(options.showText=$elt.text()),$elt.data(dataNs,options),$elt.hasClass(closedClass)||$elt.hasClass(openedClass)||$elt.addClass("none"===$target.css("display")?closedClass:openedClass),$target.on("toggle."+ns,function(e,$toggler){e.stopPropagation(),$toggler.is($elt)||("none"===$target.css("display")?$elt.addClass(closedClass).removeClass(openedClass):$elt.removeClass(closedClass).addClass(openedClass))}),!1!==options.bindEvent&&$elt.on(options.bindEvent,function(e){e.preventDefault(),Toggler._toggle($(this))}),$elt.trigger("create."+ns))})},_toggle:function(
$elt){var action,options=$elt.data(dataNs),$target=options.target,triggerEvents=function(){$elt.trigger("toggle."+ns,[$target]).trigger(action+"."+ns,[$target]),$target.trigger("toggle."+ns,[$elt])};$elt.is(":radio,:checkbox")?action=$elt.prop("checked")?"open":"close":(action=$elt.hasClass(options.closedClass)?"open":"close",$elt.toggleClass(options.closedClass).toggleClass(options.openedClass)),"open"===action?($target.fadeIn(200,triggerEvents),options.hideText&&$elt.text(options.hideText)):($target.fadeOut(300,triggerEvents),options.showText&&$elt.text(options.showText))},destroy:function(){this.each(function(){var $elt=$(this),options=$elt.data(dataNs)
;!1!==options.bindEvent&&$elt.off(options.bindEvent),$elt.trigger("destroy."+ns)})}};return Pluginifier.register(ns,Toggler,{expose:["toggle"]}),function($container){new DataAttrHandler("toggle",{container:$container,listenerEvent:"click",bubbled:!0,namespace:dataNs}).init(function($elt,$target){var opts={target:$target,bindEvent:!1};$elt.data("hide-text")&&(opts.hideText=$elt.data("hide-text")),$elt.toggler(opts)}).trigger(function($elt){$elt.toggler("toggle")})}}),define("ui/tooltipster",["ui/tooltip"],function(tooltip){"use strict";return tooltip}),define("tpl!ui/tristateCheckboxGroup/list",["handlebars"],function(hb){return hb.template(function(
Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<ul class="tristate-checkbox-group plain" data-serial="',buffer+=(0,this.escapeExpression)((helper=helpers.serial)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.serial)?helper.call(depth0,{hash:{},data:data}):helper)+'"></ul>'})}),define("tpl!ui/tristateCheckboxGroup/li",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),
data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<li>\n    <label>\n        <input type="checkbox" value="',buffer+=escapeExpression((helper=helpers.value)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.value)?helper.call(depth0,{hash:{},data:data}):helper)+'" name="tristate-checkbox-',buffer+=escapeExpression((helper=helpers.serial)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.serial)?helper.call(depth0,{hash:{},data:data}):helper)+'"/>\n        <span class="icon icon-checkbox"></span>\n        <span class="label">',buffer+=escapeExpression((
helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper)+"</span>\n    </label>\n</li>"})}),define("ui/tristateCheckboxGroup",["jquery","lodash","i18n","ui/component","tpl!ui/tristateCheckboxGroup/list","tpl!ui/tristateCheckboxGroup/li","ui/tooltip"],function($,_,__,component,layoutTpl,elementTpl,tooltip){"use strict";var tristateCheckboxGroup={getValues:function(){var values={checked:[],indeterminate:[]},$list=this.getElement();return $list.find("input:checked").each(function(){values.checked.push($(this).val())}),$list.find("input:indeterminate").each(
function(){values.indeterminate.push($(this).val())}),values},setValues:function(values){var $list=this.getElement();return $list.find("input").prop("checked",!1).prop("indeterminate",!1),_.isArray(values.checked)&&_.each(values.checked,function(v){$list.find('input[value="'+v+'"]').prop("checked",!0)}),_.isArray(values.indeterminate)&&_.each(values.indeterminate,function(v){$list.find('input[value="'+v+'"]:not(:checked)').prop("indeterminate",!0)}),this},setElements:function(elements){var $cbox,$list=this.getElement(),self=this;return _.each(elements,function(data){data&&(($cbox=$list.find('input[value="'+data.value+'"]')).length?(
data.label&&$cbox.siblings(".label").text(data.label),$cbox.find("input").prop("checked",!1).prop("indeterminate",!1)):(data.serial=self.config.serial,$cbox=$(elementTpl(data)).appendTo($list).find("input")),data.checked?$cbox.prop("checked",!0):data.indeterminate&&$cbox.prop("indeterminate",!0))}),this},tooltip:null};return function(config){return config=_.defaults(config||{},{serial:_.uniqueId("tscb"),list:[],maxSelection:0,maxMessage:__("Maximum selection reached")}),component(tristateCheckboxGroup).setTemplate(layoutTpl).on("render",function(){var self=this,$list=this.getElement();$list.on("change",function(e){var $input,$icon,
maxSelection=self.config.maxSelection;maxSelection&&$list.find("input:checked,input:indeterminate").length>maxSelection?($input=$(e.target)).is(":checked")&&(($icon=$input.siblings(".icon").addClass("cross").each(function(){self.tooltip=tooltip.warning(this,self.config.maxMessage),self.tooltip.show()})).parent("label").on("mouseleave",function(){self.tooltip&&self.tooltip.dispose()}),_.delay(function(){$input.prop("checked",!1),$icon.removeClass("cross")},150)):self.trigger("change",self.getValues())}),this.setElements(this.config.list)}).init(config)}}),define("ui/waitForMedia",["jquery"],function($){var _ns=".wait";$.fn.waitForMedia=function(
allLoadedCallback){function allLoaded($container){$container.trigger("all-loaded"+_ns),"function"==typeof allLoadedCallback&&allLoadedCallback.call($container[0])}return this.each(function(){var $container=$(this),$img=$container.find("img[src]"),count=$img.length,loaded=0,imageLoaded=function(){$(this).trigger("loaded"+_ns).off("load"+_ns).off("error"+_ns),++loaded===count&&allLoaded($container)};0!==count?$img.each(function(){this.complete?imageLoaded.call(this):$(this).on("load.wait error"+_ns,imageLoaded)}):allLoaded($container)})}}),define("css!ui/waitingDialog/css/waitingDialog",[],function(){}),define("ui/waitingDialog/waitingDialog",["jquery",
"lodash","i18n","ui/component","ui/dialog","css!ui/waitingDialog/css/waitingDialog"],function($,_,__,component,dialog){"use strict";var defaultConfig={message:__("Waiting"),waitContent:__("Please wait while ..."),waitButtonText:__("Please wait"),waitButtonIcon:"clock",proceedContent:__("Wait is over"),proceedButtonText:__("Proceed"),showSecondary:!1};return function(config){var $button,$secondaryButton,$betweenButtonsText,$content,waitingDialog=component({beginWait:function(){return this.is("waiting")||(this.setState("waiting",!0),$content.text(this.config.waitContent),$button.prop("disabled",!0).find(".label").text(this.config.waitButtonText).end().find(
"[class^='icon-']").removeClass("hidden"),config.showSecondary&&($secondaryButton.removeProp("disabled"),$secondaryButton.removeClass("hidden"),this.config.buttonSeparatorText&&$betweenButtonsText.removeClass("hidden")),this.trigger("wait")),this},endWait:function(){return this.is("waiting")&&(this.setState("waiting",!1),$content.text(this.config.proceedContent),$button.removeProp("disabled").find(".label").text(this.config.proceedButtonText).end().find("[class^='icon-']").addClass("hidden"),config.showSecondary&&($secondaryButton.prop("disabled",!0),$secondaryButton.addClass("hidden"),this.config.buttonSeparatorText&&$betweenButtonsText.addClass("hidden")),
this.trigger("unwait")),this},destroy:function(){return this.dialog&&this.dialog.destroy(),this.trigger("destroy")}},defaultConfig).on("init",function(){var self=this,buttons=[{id:"waiting",type:"info",icon:this.config.waitButtonIcon,label:this.config.waitButtonText,close:!0}];this.config.showSecondary&&this.config.secondaryButtonText&&buttons.push({id:"secondary",type:"info",icon:this.config.secondaryButtonIcon,label:this.config.secondaryButtonText,close:!1}),this.dialog=dialog({message:this.config.message,content:this.config.waitContent||"",width:this.config.width,autoRender:!1,disableClosing:!0,disableEscape:!0,buttons:buttons}),$content=$(".content",
this.dialog.getDom()),$button=$('[data-control="waiting"]',this.dialog.getDom()),this.config.showSecondary&&(this.dialog.getDom().addClass("has-secondary"),($secondaryButton=$('[data-control="secondary"]',this.dialog.getDom())).on("click",function(){self.trigger("secondaryaction")}),this.config.buttonSeparatorText&&($betweenButtonsText=$("<span>").text(__("or")).addClass("between-buttons-text").insertBefore($secondaryButton))),this.beginWait(),this.render()}).on("render",function(){var self=this;this.dialog.on("closed.modal",function(){self.is("waiting")||self.trigger("proceed")}).render(this.config.container||"body")});return _.defer(function(){
waitingDialog.init(config||{})}),waitingDialog}}),define("util/adaptSize",["jquery","util/capitalize"],function($,capitalize){"use strict";var _resize;return _resize=function($elements,dimensions){$elements.each(function(){for(var dimension in dimensions)dimensions.hasOwnProperty(dimension)&&$(this)[dimension]("auto")}),$elements.each(function(){for(var dimension in dimensions)dimensions.hasOwnProperty(dimension)&&(dimensions[dimension]=Math.max(Math.floor(dimensions[dimension]||0),$(this)["outer"+capitalize(dimension)]()))}),$elements.css(dimensions)},{width:function($elements,minWidth){_resize($elements,{width:minWidth})},height:function($elements,
minHeight){_resize($elements,{height:minHeight})},both:function($elements,minWidth,minHeight){_resize($elements,{height:minHeight,width:minWidth})}}}),define("util/config",["lodash"],function(_){"use strict";return{build:function(config,defaults){return _.defaults(config||{},defaults)},from:function(source,entries,defaults){var config={};return _.forEach(entries,function(value,name){if(void 0!==source[name])config[name]=source[name];else if(value)throw new Error('The config entry "'+name+'" is required!')}),_.defaults(config,defaults)}}}),define("util/dom",["jquery"],function($){return{contains:function(elt){return elt instanceof $&&(elt=elt[0]),$.contains(
document,elt)}}}),define("util/download",["lodash"],function(_){"use strict";return function(filename,content){var element;if(_.isEmpty(filename)||!_.isString(filename))throw new TypeError("Invalid filename");if(_.isUndefined(content))throw new TypeError("Invalid content");return _.isString(content)||(content=JSON.stringify(content)),(element=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(content)),element.setAttribute("download",filename),element.style.display="none",document.body.appendChild(element),element.click(),document.body.removeChild(element),!0}}),define("util/image",[],function(){"use strict"
;return{getSize:function(src,timeout,cb){var timeoutId,img=document.createElement("img");"function"==typeof timeout&&(cb=timeout,timeout=2),img.onload=function(){timeoutId&&(clearTimeout(timeoutId),cb({width:img.naturalWidth||img.width,height:img.naturalHeight||img.height}))},img.onerror=function(){timeoutId&&(clearTimeout(timeoutId),cb(null))},timeoutId=setTimeout(function(){cb(null)},1e3*timeout),img.src=src}}}),define("util/locale",["module","moment"],function(module,moment){"use strict";var configuration=module.config();return{getConfig:function(){return configuration},setConfig:function(config){configuration=config||{}},getDecimalSeparator:function(){
return this.getConfig()&&this.getConfig().decimalSeparator?this.getConfig().decimalSeparator:"."},getThousandsSeparator:function(){return this.getConfig()&&this.getConfig().thousandsSeparator?this.getConfig().thousandsSeparator:""},getDateTimeFormat:function(){return this.getConfig()&&this.getConfig().dateTimeFormat?this.getConfig().dateTimeFormat:"DD/MM/YYYY HH:mm:ss"},parseFloat:function(numStr){var thousandsSeparator=this.getThousandsSeparator(),decimalSeparator=this.getDecimalSeparator();return thousandsSeparator.length&&(numStr=numStr.replace(new RegExp("\\"+thousandsSeparator,"g"),"")),"."!==decimalSeparator&&(numStr=numStr.replace(new RegExp("\\.","g"
),"_").replace(new RegExp("\\"+decimalSeparator,"g"),".")),parseFloat(numStr)},parseInt:function(number,numericBase){var thousandsSeparator=this.getThousandsSeparator();return thousandsSeparator.length&&(number=number.replace(new RegExp("\\"+thousandsSeparator,"g"),"")),parseInt(number,numericBase)},formatDateTime:function(timestamp){return moment(timestamp,"X").format(this.getDateTimeFormat())}}}),define("util/strLimiter",[],function(){"use strict";return{limitByWordCount:function(str,maxWordCount){for(var textArr=str.match(/(([\S]+)|([\s]+))/g),newText=/\s+/.test(textArr[0])?textArr.shift():"";maxWordCount&&textArr.length;)newText+=textArr.shift(),
textArr.length&&(newText+=textArr.shift()),maxWordCount--;return newText=newText.replace(/\s+$/,"")},limitByCharCount:function(str,maxCharCount){return str.substr(0,maxCharCount)}}}),define("util/typeCaster",["lodash"],function(_){"use strict";return{strToBool:function(value,defaultValue){return _.isBoolean(value)?value:_.isString(value)?"true"===value.toLowerCase():defaultValue||!1}}}),define("uri",[],function(){return{encode:function(uri){var encoded=uri;return/^http/.test(uri)&&(encoded=encoded.replace(/:\/\//g,"_2_").replace(/#/g,"_3_").replace(/:/g,"_4_").replace(/\//g,"_1_").replace(/\./g,"_0_")),encoded},decode:function(uri){var encoded=uri
;return/^http/.test(uri)&&(encoded=encoded.replace(/_0_/g,".").replace(/_1_/g,"/").replace(/_2_/g,"://").replace(/_3_/g,"#").replace(/_4_/g,":")),encoded}}}),define("jquery.sizechange",["jquery","lodash"],function($,_){"use strict";$.fn.sizeChange=function(cb){var $this=this,running=!1;if(cb=cb||$.noop(),0===$this.length)return $this;var execCb=_.throttle(function(done){cb(),_.delay(done,1),done(),$this.find("img").one("load",function(){cb()})},10);if(window.MutationObserver||window.WebKitMutationObserver){var MutationObserver=window.MutationObserver||window.WebKitMutationObserver,mutationOptions={childList:"IFRAME"!==this[0].nodeName,subtree:!0,
attributes:!0,attributeFilter:["style","width","height"]},observer=new MutationObserver(function(mutations){for(var i in mutations)if(null!==mutations[i].addedNodes||null!==mutations[i].attributeName)return stop(),void execCb(start)}),start=function(){$this.each(function(){observer.observe(this,mutationOptions)})},stop=function(){observer.disconnect()};start()}else{if(!function(){var p=document.createElement("p"),flag=!1;if(p.addEventListener)p.addEventListener("DOMAttrModified",function(){flag=!0},!1);else{if(!p.attachEvent)return!1;p.attachEvent("onDOMAttrModified",function(){flag=!0})}return p.setAttribute("id","__dummy_domtest_target"),flag}()
)throw new Error("Event listening not supported");var runs=function(){running=!1};$this.on("DOMAttrModified",function(event){"style"!==event.attrName||running||(running=!0,execCb(runs))}),$this.on("DOMNodeRemoved DOMNodeInserted DOMNodeInsertedIntoDocument DOMNodeRemovedFromDocument",function(event){1!==event.target.nodeType||running||(running=!0,execCb(runs))})}return this}}),define("iframeResizer",["jquery","iframeNotifier","jquery.sizechange"],function($,iframeNotifier){"use strict";return{autoHeight:function($frame,restrict,plus){var self=this;return restrict=restrict||"body",plus=plus||0,$frame.on("load",function(){var $frameContent=$frame.contents(),
height=$frameContent.height(),sizing=!1,resizePop=function(){!1===sizing&&(sizing=!0,setTimeout(function(){self._adaptHeight($frame,height,plus),sizing=!1},1))};self._adaptHeight($frame,height);try{var onSizeChange=function(){var newHeight=$frameContent.height();height<newHeight&&(height=newHeight,resizePop()),height<newHeight&&(height=newHeight,resizePop())};$frameContent.find(restrict).sizeChange(onSizeChange),$frameContent.on("resize",onSizeChange)}catch(e){console.warning("Fallback to set interval"),setInterval(function(){var newHeight=$frameContent.height();height<newHeight&&(height=newHeight,resizePop())},10)}}),$frame},eventHeight:function($frame,diff
){var self=this;$frame.on("load.eventHeight",function(){var newdiff=parseInt($frame.contents().height(),10)-parseInt($frame.height(),10);diff<newdiff&&(diff=newdiff),self._adaptHeight($frame,$frame.contents().height()+diff)}),$(document).on("heightchange",function(e,height,plus){plus=plus||0,self._adaptHeight($frame,height+plus+diff)})},_notifyParent:function(height,plus){iframeNotifier.parent("heightchange",[height,plus||0])},_adaptHeight:function($frame,height,plus){$frame.height(height),this._notifyParent(height,plus)}}}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head"
)[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c))}(
'/*-- Chart --*/\n.c3 svg {\n  font: 10px sans-serif;\n  -webkit-tap-highlight-color: transparent; }\n\n.c3 path, .c3 line {\n  fill: none;\n  stroke: #000; }\n\n.c3 text {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none; }\n\n.c3-legend-item-tile,\n.c3-xgrid-focus,\n.c3-ygrid,\n.c3-event-rect,\n.c3-bars path {\n  shape-rendering: crispEdges; }\n\n.c3-chart-arc path {\n  stroke: #fff; }\n\n.c3-chart-arc rect {\n  stroke: white;\n  stroke-width: 1; }\n\n.c3-chart-arc text {\n  fill: #fff;\n  font-size: 13px; }\n\n/*-- Axis --*/\n/*-- Grid --*/\n.c3-grid line {\n  stroke: #aaa; }\n\n.c3-grid text {\n  fill: #aaa; }\n\n.c3-xgrid, .c3-ygrid {\n  stroke-dasharray: 3 3; }\n\n/*-- Text on Chart --*/\n.c3-text.c3-empty {\n  fill: #808080;\n  font-size: 2em; }\n\n/*-- Line --*/\n.c3-line {\n  stroke-width: 1px; }\n\n/*-- Point --*/\n.c3-circle._expanded_ {\n  stroke-width: 1px;\n  stroke: white; }\n\n.c3-selected-circle {\n  fill: white;\n  stroke-width: 2px; }\n\n/*-- Bar --*/\n.c3-bar {\n  stroke-width: 0; }\n\n.c3-bar._expanded_ {\n  fill-opacity: 1;\n  fill-opacity: 0.75; }\n\n/*-- Focus --*/\n.c3-target.c3-focused {\n  opacity: 1; }\n\n.c3-target.c3-focused path.c3-line, .c3-target.c3-focused path.c3-step {\n  stroke-width: 2px; }\n\n.c3-target.c3-defocused {\n  opacity: 0.3 !important; }\n\n/*-- Region --*/\n.c3-region {\n  fill: steelblue;\n  fill-opacity: .1; }\n\n/*-- Brush --*/\n.c3-brush .extent {\n  fill-opacity: .1; }\n\n/*-- Select - Drag --*/\n/*-- Legend --*/\n.c3-legend-item {\n  font-size: 12px; }\n\n.c3-legend-item-hidden {\n  opacity: 0.15; }\n\n.c3-legend-background {\n  opacity: 0.75;\n  fill: white;\n  stroke: lightgray;\n  stroke-width: 1; }\n\n/*-- Title --*/\n.c3-title {\n  font: 14px sans-serif; }\n\n/*-- Tooltip --*/\n.c3-tooltip-container {\n  z-index: 10; }\n\n.c3-tooltip {\n  border-collapse: collapse;\n  border-spacing: 0;\n  background-color: #fff;\n  empty-cells: show;\n  -webkit-box-shadow: 7px 7px 12px -9px #777777;\n  -moz-box-shadow: 7px 7px 12px -9px #777777;\n  box-shadow: 7px 7px 12px -9px #777777;\n  opacity: 0.9; }\n\n.c3-tooltip tr {\n  border: 1px solid #CCC; }\n\n.c3-tooltip th {\n  background-color: #aaa;\n  font-size: 14px;\n  padding: 2px 5px;\n  text-align: left;\n  color: #FFF; }\n\n.c3-tooltip td {\n  font-size: 13px;\n  padding: 3px 6px;\n  background-color: #fff;\n  border-left: 1px dotted #999; }\n\n.c3-tooltip td > span {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  margin-right: 6px; }\n\n.c3-tooltip td.value {\n  text-align: right; }\n\n/*-- Area --*/\n.c3-area {\n  stroke-width: 0;\n  opacity: 0.2; }\n\n/*-- Arc --*/\n.c3-chart-arcs-title {\n  dominant-baseline: middle;\n  font-size: 1.3em; }\n\n.c3-chart-arcs .c3-chart-arcs-background {\n  fill: #e0e0e0;\n  stroke: #FFF; }\n\n.c3-chart-arcs .c3-chart-arcs-gauge-unit {\n  fill: #000;\n  font-size: 16px; }\n\n.c3-chart-arcs .c3-chart-arcs-gauge-max {\n  fill: #777; }\n\n.c3-chart-arcs .c3-chart-arcs-gauge-min {\n  fill: #777; }\n\n.c3-chart-arc .c3-gauge-value {\n  fill: #000;\n  /*  font-size: 28px !important;*/ }\n\n.c3-chart-arc.c3-target g path {\n  opacity: 1; }\n\n.c3-chart-arc.c3-target.c3-focused g path {\n  opacity: 1; }\n.absorbable{z-index:1;border-radius:0%;background:#e6e6e6;opacity:0}.absorbable.animate{transform:translateZ(0);transition-timing-function:cubic-bezier(0.2, 0.6, 1, 0.4);-webkit-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;-moz-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;-ms-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;-o-animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1;animation:absorbable-opacity 2s cubic-bezier(0.2, 0.6, 1, 0.4) 1}@-o-keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}@-moz-keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}@-webkit-keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}@keyframes absorbable-opacity{0%{opacity:0}20%{opacity:0.3;border-radius:20%}60%{opacity:0.9}100%{border-radius:50%}}\n\n/*# sourceMappingURL=absorb.css.map */.pulsable{z-index:1;display:block;border-radius:50%;position:absolute;background:#e6e6e6;width:1px;height:1px;top:0px;left:0px;box-shadow:0 0 0 rgba(230,230,230,0.6)}@-o-keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}@-moz-keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}@-webkit-keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}@keyframes pulsable-pulse{0%{box-shadow:0 0 0 0 rgba(230,230,230,0.6)}50%{box-shadow:0 0 0 200px rgba(230,230,230,0)}100%{box-shadow:0 0 0 0 rgba(230,230,230,0)}}.pulsable.animate{-webkit-animation:pulsable-pulse 1s ease-out infinite;-moz-animation:pulsable-pulse 1s ease-out infinite;-ms-animation:pulsable-pulse 1s ease-out infinite;-o-animation:pulsable-pulse 1s ease-out infinite;animation:pulsable-pulse 1s ease-out infinite}\n\n/*# sourceMappingURL=pulse.css.map */.badge-component{position:relative}.badge-component .loader:not(.hidden){position:relative;top:-1px;width:25px;height:25px;border-radius:50%;-webkit-animation:badge-component-rotate 1.4s infinite linear;-moz-animation:badge-component-rotate 1.4s infinite linear;-ms-animation:badge-component-rotate 1.4s infinite linear;-o-animation:badge-component-rotate 1.4s infinite linear;animation:badge-component-rotate 1.4s infinite linear;background:-webkit-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:-moz-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:-ms-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:-o-linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);background:linear-gradient(left, #e6e6e6 10%, rgba(230,230,230,0) 42%);-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0)}@-o-keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes badge-component-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.badge-component .loader:not(.hidden):before{width:50%;height:50%;background:#e6e6e6;border-radius:100% 0 0 0;position:absolute;top:0;left:0;content:\'\'}.badge-component .loader:not(.hidden):after{background:#333;width:75%;height:75%;border-radius:50%;content:\'\';margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}.badge-component .badge{background:#e6e6e6;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;font-size:12px;font-size:1.2rem;width:19px;height:19px;border-radius:50%;position:absolute;top:2px;left:3px;padding-top:1px;text-align:center;display:inline-block}.badge-component .badge.badge-info{color:#e7eff4;background:#3e7da7}.badge-component .badge.badge-success{color:#e7f4ed;background:#3ea76f}.badge-component .badge.badge-warning{color:#faf0ee;background:#d16c55}.badge-component .badge.badge-error{color:#f8e7ea;background:#ba122b}.badge-component .badge.icon-result-ok::before{top:3px;position:relative;color:blue}.badge-component .badge-border{background:#e6e6e6;width:21px;height:21px;border-radius:50%;position:absolute;top:1px;left:2px}\n\n/*# sourceMappingURL=badge.css.map */.class-selector{padding:5px;position:relative;opacity:0}.class-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.class-selector a.selected{display:inline-block;position:relative;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;padding:3px 20px 3px 10px;text-decoration:none;width:100%;background-color:#fff}.class-selector a.selected.empty{color:#a4a9b1}.class-selector a.selected:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e611";position:absolute;right:10px;top:7px}.class-selector .options{position:absolute;width:100%;background-color:#f3f1ef;border:solid 1px #ddd;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-moz-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-ms-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-o-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);left:0;margin-top:7px;overflow-y:auto;z-index:100;min-height:100px;max-height:450px;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.class-selector .options.folded{overflow:hidden;min-height:0;max-height:0;border-width:0;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.class-selector .options ul{list-style-type:none;padding:0;margin:0 0 0 15px}.class-selector .options ul li{padding-top:3px}.class-selector .options ul li a{text-decoration:none;color:#222}.class-selector .options ul li a:hover{color:#0e5d91;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.class-selector .options ul li:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e60c";color:#d8ae5b;top:2px;-webkit-text-shadow:1px 1px 0 #ad8b49;-moz-text-shadow:1px 1px 0 #ad8b49;text-shadow:1px 1px 0 #ad8b49;margin-right:4px}.class-selector .options>ul{margin:5px 0 0 7px}\n\n/*# sourceMappingURL=selector.css.map */.ui-generis-validator{color:#ba122b;text-align:right;width:99%}.ui-generis-validator input.error,.ui-generis-validator select.error,.ui-generis-validator textarea.error{border-color:#ba122b;color:#ba122b}\n\n/*# sourceMappingURL=validator.css.map */.ui-generis-widget{margin:10px 0px}.ui-generis-widget>.left{display:inline-block;margin-top:8px;width:34%;vertical-align:top}.ui-generis-widget>.right{display:inline-block;min-width:150px;width:65%}.ui-generis-widget>.right>input,.ui-generis-widget>.right>select,.ui-generis-widget>.right>textarea{background-color:white;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;color:#222;font-family:"Franklin Gothic","Franklin Gothic Medium","Source Sans Pro",sans-serif;padding:8px;width:100%}.ui-generis-widget>.right>input,.ui-generis-widget>.right>select{font:inherit;height:36px}.ui-generis-widget>.right>.check-box-input{color:#222;display:inline-block;font-family:"Franklin Gothic","Franklin Gothic Medium","Source Sans Pro",sans-serif;padding:4px;width:100%}.ui-generis-widget>.right>.check-box-input>.option{padding-top:4px}.ui-generis-widget>.right input.error,.ui-generis-widget>.right select.error,.ui-generis-widget>.right textarea.error,.ui-generis-widget>.right .check-box-input.error{border-color:#ba122b;color:#ba122b}.ui-generis-widget .validation-container{color:#ba122b;text-align:right;width:99%}\n\n/*# sourceMappingURL=widget.css.map */.ui-generis-form{border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;background-color:#f3f1ef;padding:20px;position:relative;margin:20px;width:500px}.ui-generis-form h2{margin-top:0}.ui-generis-form .toolbar{margin-top:30px;text-align:right}@-o-keyframes spinner{to{transform:rotate(360deg)}}@-moz-keyframes spinner{to{transform:rotate(360deg)}}@-webkit-keyframes spinner{to{transform:rotate(360deg)}}@keyframes spinner{to{transform:rotate(360deg)}}\n\n/*# sourceMappingURL=form.css.map */.resource-selector{position:relative;height:100%;display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;opacity:0;background-color:#f3f1ef;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}.resource-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .resource-list{position:relative;height:100%;opacity:0}.resource-selector .resource-list.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .resource-list.multiple ul li a:after{display:block;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-list ul{list-style-type:none;padding:0;margin:0}.resource-selector .resource-list ul li{position:relative;height:40px;padding:10px;border-bottom:solid 1px #ddd;-webkit-transition:background-color, 200ms, linear, 0s;-moz-transition:background-color, 200ms, linear, 0s;-ms-transition:background-color, 200ms, linear, 0s;-o-transition:background-color, 200ms, linear, 0s;transition:background-color, 200ms, linear, 0s}.resource-selector .resource-list ul li a{-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s;color:#222;display:inline-block;width:100%;padding-right:25px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.resource-selector .resource-list ul li a:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e69b";color:#0e5d91;position:absolute;right:17px;top:12px;display:none}.resource-selector .resource-list ul li a:hover{text-decoration:none}.resource-selector .resource-list ul li a>span{color:#0e5d91;margin-right:4px;font-size:16px;font-size:1.6rem;vertical-align:top}.resource-selector .resource-list ul li.selected,.resource-selector .resource-list ul li:hover{background-color:#3e7da7;cursor:pointer;-webkit-transition:background-color, 200ms, linear, 0s;-moz-transition:background-color, 200ms, linear, 0s;-ms-transition:background-color, 200ms, linear, 0s;-o-transition:background-color, 200ms, linear, 0s;transition:background-color, 200ms, linear, 0s}.resource-selector .resource-list ul li.selected a,.resource-selector .resource-list ul li:hover a{color:#fff;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .resource-list ul li.selected a:after,.resource-selector .resource-list ul li:hover a:after{color:#fff}.resource-selector .resource-list ul li.selected a>span,.resource-selector .resource-list ul li:hover a>span{color:#fff}.resource-selector .resource-list ul li.selected a:after{content:"\\e69d"}.resource-selector .resource-list ul li[data-access=denied]>a [class^="icon-"],.resource-selector .resource-list ul li[data-access=denied]>a [class*=" icon-"],.resource-selector .resource-list ul li[data-access=partial]>a [class^="icon-"],.resource-selector .resource-list ul li[data-access=partial]>a [class*=" icon-"]{position:relative}.resource-selector .resource-list ul li[data-access=denied]>a [class^="icon-"]:after,.resource-selector .resource-list ul li[data-access=denied]>a [class*=" icon-"]:after,.resource-selector .resource-list ul li[data-access=partial]>a [class^="icon-"]:after,.resource-selector .resource-list ul li[data-access=partial]>a [class*=" icon-"]:after{content:"\\e629";color:#555;position:absolute;left:7px;top:6px}.resource-selector .resource-list ul li[data-access=denied]{color:#a4a9b1;background-color:#fff}.resource-selector .resource-list ul li[data-access=denied]:hover,.resource-selector .resource-list ul li[data-access=denied]:hover>a,.resource-selector .resource-list ul li[data-access=denied]>a,.resource-selector .resource-list ul li[data-access=denied] [class^="icon-"]:before,.resource-selector .resource-list ul li[data-access=denied] [class*=" icon-"]:before{cursor:auto;background-color:#fff;color:#a4a9b1 !important}.resource-selector .resource-tree{position:relative;height:100%;opacity:0}.resource-selector .resource-tree.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .resource-tree.multiple ul li.selectable>a>.selector{display:inline-block}.resource-selector .resource-tree .clickable:hover:before{content:" ";display:inline-block;position:absolute;width:25px;height:25px;top:7.5px;left:0;border-radius:50%;background-color:#b9bfc3;opacity:.5}.resource-selector .resource-tree .clickable:focus{outline:0 none}.resource-selector .resource-tree ul{list-style-type:none;padding:0;margin:0}.resource-selector .resource-tree ul li{position:relative;cursor:pointer}.resource-selector .resource-tree ul li>a{height:40px;line-height:40px;display:block;width:100%;padding-right:30px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:solid 1px #ddd;color:#222}.resource-selector .resource-tree ul li.class .class-toggler{display:inline-block;position:relative;width:25px;height:40px;text-align:center}.resource-selector .resource-tree ul li.class .class-toggler:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e611";font-size:15px;font-size:1.5rem;position:relative}.resource-selector .resource-tree ul li.class.empty .class-toggler{visibility:hidden}.resource-selector .resource-tree ul li.class>a>.icon-folder:before{content:"\\e60d";color:#d8ae5b;margin-right:4px}.resource-selector .resource-tree ul li.class>a:hover{background-color:#e7eff4;color:#222;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.class.selected>a{background-color:#3e7da7;color:#fff;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.class.selected>a:before,.resource-selector .resource-tree ul li.class.selected>a:after{color:#fff}.resource-selector .resource-tree ul li.class.selected>a:hover{background-color:#266d9c;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.class.selected>a .clickable:hover:before{background-color:#518ab0}.resource-selector .resource-tree ul li.class.closed>a>.class-toggler:after{content:"\\e60f"}.resource-selector .resource-tree ul li.class.closed>a>.icon-folder:before{content:"\\e60c"}.resource-selector .resource-tree ul li.class.closed>ul{display:none}.resource-selector .resource-tree ul li.instance>a>[class^="icon-"],.resource-selector .resource-tree ul li.instance>a>[class*=" icon-"]{color:#0e5d91;margin-right:4px;padding-left:25px;font-size:16px;font-size:1.6rem}.resource-selector .resource-tree ul li.instance:hover{background-color:#e7eff4;color:#222;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.instance.selected{background-color:#3e7da7;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.instance.selected>a,.resource-selector .resource-tree ul li.instance.selected>a>[class^="icon-"],.resource-selector .resource-tree ul li.instance.selected>a>[class*=" icon-"]{color:#fff}.resource-selector .resource-tree ul li.instance.selected:hover{background-color:#266d9c;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.instance.selected .clickable:hover:before{background-color:#518ab0}.resource-selector .resource-tree ul li>a>.selector{display:none;position:absolute;top:0;right:8px;line-height:40px;height:40px;width:25px;text-align:center}.resource-selector .resource-tree ul li>a>.selector:after{-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s;font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e69b";font-size:15px;font-size:1.5rem;color:#0e5d91;line-height:40px;position:relative}.resource-selector .resource-tree ul li.selected>a>.selector:after{content:"\\e69d"}.resource-selector .resource-tree ul li.selected>a>.selector:after,.resource-selector .resource-tree ul li.selected>a:hover>.selector:after{color:#fff}.resource-selector .resource-tree ul li[data-access=denied]>a [class^="icon-"],.resource-selector .resource-tree ul li[data-access=denied]>a [class*=" icon-"],.resource-selector .resource-tree ul li[data-access=partial]>a [class^="icon-"],.resource-selector .resource-tree ul li[data-access=partial]>a [class*=" icon-"]{position:relative}.resource-selector .resource-tree ul li[data-access=denied]>a [class^="icon-"]:after,.resource-selector .resource-tree ul li[data-access=denied]>a [class*=" icon-"]:after,.resource-selector .resource-tree ul li[data-access=partial]>a [class^="icon-"]:after,.resource-selector .resource-tree ul li[data-access=partial]>a [class*=" icon-"]:after{content:"\\e629";color:#555;position:absolute;left:7px;top:6px}.resource-selector .resource-tree ul li[data-access=denied]{color:#a4a9b1;background-color:#fff}.resource-selector .resource-tree ul li[data-access=denied]:hover,.resource-selector .resource-tree ul li[data-access=denied]:hover>a,.resource-selector .resource-tree ul li[data-access=denied]>a,.resource-selector .resource-tree ul li[data-access=denied] [class^="icon-"]:before,.resource-selector .resource-tree ul li[data-access=denied] [class*=" icon-"]:before{cursor:auto;background-color:#fff;color:#a4a9b1 !important}.resource-selector .resource-tree ul li a:hover{text-decoration:none}.resource-selector .filters{position:relative;height:100%;opacity:0}.resource-selector .filters.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .filters .ui-generis-form{margin:0;padding:10px;width:100%;background-color:#f3f1ef;border:none}.resource-selector .filters .ui-generis-form h2{margin:0}.resource-selector .filters .ui-generis-form .left{width:100%}.resource-selector .filters .ui-generis-form .toolbar{margin:0}.resource-selector nav{height:40px;-ms-flex:0 1 40px;-webkit-flex:0 1 40px;flex:0 1 40px;border-top:solid 1px #ddd}.resource-selector .context{display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;padding-right:16px}.resource-selector .context .class-context{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;overflow:hidden}.resource-selector .context .class-context .class-selector{position:static}.resource-selector .context .class-context .class-selector .options{max-height:calc(100% - 120px)}.resource-selector .context .class-context .class-selector .options.folded{max-height:0}.resource-selector .context>a{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none}.resource-selector .context>a:hover,.resource-selector .context>a.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection{display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;padding-right:16px}.resource-selector .selection .selection-control{-ms-flex:0 0 80px;-webkit-flex:0 0 80px;flex:0 0 80px}.resource-selector .selection .selection-control>label{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none;width:36px;padding:10px 0 0 8px;margin:0}.resource-selector .selection .selection-control>label:hover,.resource-selector .selection .selection-control>label.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection .selection-control>a{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none;width:38px}.resource-selector .selection .selection-control>a:hover,.resource-selector .selection .selection-control>a.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection .selection-control .selection-toggle .icon-multi-select:before{font-size:16px;font-size:1.6rem}.resource-selector .selection .selection-control .selection-toggle.hidden{display:inline-block !important;visibility:hidden}.resource-selector .selection .search{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;position:relative;padding:6px 6px 6px 5px}.resource-selector .selection .search:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e61f";position:absolute;left:12px;top:12px;opacity:.4}.resource-selector .selection .search input{-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;max-width:inherit;width:100%;padding:4px 25px}.resource-selector .selection .search>a.filters-opener{position:absolute;right:12px;top:10px;font-size:16px;font-size:1.6rem;text-decoration:none}.resource-selector .selection .filters-container{position:absolute;width:100%;background-color:#f3f1ef;border:solid 1px #ddd;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-moz-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-ms-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-o-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);left:0;top:80px;overflow-y:auto;z-index:100;max-height:calc(100% - 110px);-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.resource-selector .selection .filters-container.folded{overflow:hidden;max-height:0;border-width:0;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.resource-selector main{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;min-height:150px;border-top:solid 1px #ddd;background-color:#fff;height:100%;overflow-y:scroll}.resource-selector main .no-results{display:inline-block;width:100%;text-align:center;margin:10px auto;opacity:.75}.resource-selector main .more{height:45px;padding:10px}.resource-selector main.loading .more{opacity:0.65;cursor:inherit}.resource-selector footer{height:30px;-ms-flex:0 1 30px;-webkit-flex:0 1 30px;flex:0 1 30px;border-top:solid 1px #ddd;background-color:#f3f1ef;text-align:center;padding:5px}\n\n/*# sourceMappingURL=selector.css.map */.loading-button [class^="icon-"],.loading-button [class*=" icon-"]{padding:0}.loading-button .action-label,.loading-button .terminated-label{margin-left:9px}.loading-button .spinner-icon,.loading-button .terminated-label{display:none}.loading-button.started{cursor:default;opacity:0.5}.loading-button.started .spinner-icon{display:inline-block;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0);-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-ms-transform-origin:50% 50%;-o-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-animation:loading-button-rotate 1.4s infinite linear;-moz-animation:loading-button-rotate 1.4s infinite linear;-ms-animation:loading-button-rotate 1.4s infinite linear;-o-animation:loading-button-rotate 1.4s infinite linear;animation:loading-button-rotate 1.4s infinite linear}@-o-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.loading-button.started .start-icon{display:none}.loading-button.terminated .action-label{display:none}.loading-button.terminated .terminated-label{display:inline-block}\n\n/*# sourceMappingURL=button.css.map */div.task-report-container{width:100%}\n\n/*# sourceMappingURL=taskable.css.map */.destination-selector{position:relative;width:400px;opacity:0}.destination-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.destination-selector>div{border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;background-color:#f3f1ef;padding:20px;height:500px;position:relative}.destination-selector>div>p{font-weight:bold}.destination-selector .selector-container{position:relative;height:calc(100% - 90px)}.destination-selector .actions{margin-top:30px;text-align:right}\n\n/*# sourceMappingURL=selector.css.map */.calculator{position:relative;font-family:monospace, sans-serif;font-size:12px;width:100%;height:100%;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;-ms-align-content:stretch;-webkit-align-content:stretch;align-content:stretch}.calculator sup,.calculator sub{font-size:0.75em}.calculator sup{top:-.5em}.calculator sub{bottom:-.5em}.calculator .screen,.calculator .input{position:relative;-ms-flex:0 0 auto;-webkit-flex:0 0 auto;flex:0 0 auto}.calculator .focus{outline:2px solid #0e5d91}.calculator .keyboard{position:relative;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1}.calculator .calculator-keyboard{position:relative;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;-ms-align-content:stretch;-webkit-align-content:stretch;align-content:stretch;background:#f3f1ef;color:#222;width:100%;height:100%;padding-top:8px}.calculator .calculator-keyboard .row{position:relative;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-align-content:stretch;-webkit-align-content:stretch;align-content:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%}.calculator .calculator-keyboard .spacer{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;width:3.2em;height:100%}.calculator .calculator-keyboard span{position:relative;display:inline-block;z-index:1;font-size:1.3em !important}.calculator .calculator-keyboard button{position:relative;background-color:#f3f1ef;color:#222 !important;display:inline-block;border-radius:0;border:none;padding:0;text-align:center;text-shadow:none;cursor:pointer;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;width:3.2em;height:100%;font-size:1em !important}.calculator .calculator-keyboard button:not(.switch):before{content:" ";border-radius:50%;display:inline-block;position:absolute;z-index:0;top:calc(50% - 1.6em + 2px);left:calc(50% - 1.6em + 2px);width:calc(3.2em - 4px);height:calc(3.2em - 4px)}.calculator .calculator-keyboard button:hover:before{background:#a4a9b1}.calculator .calculator-keyboard button.disabled{visibility:hidden}.calculator .calculator-keyboard button.switch span{color:#222 !important;border-color:#919191 !important;border-top:1px solid;border-bottom:1px solid;height:auto;width:100%;padding:4px 0.5em;font-size:1em !important}.calculator .calculator-keyboard button.switch.first span{border-left:1px solid;border-top-left-radius:2px;border-bottom-left-radius:2px}.calculator .calculator-keyboard button.switch.last span{border-right:1px solid;border-top-right-radius:2px;border-bottom-right-radius:2px}.calculator .calculator-keyboard button.switch:before{content:" ";border-radius:2px;display:inline-block;position:absolute;z-index:0;top:calc(50% - .5em - 4px);bottom:calc(50% - .5em - 4px);left:3px;right:3px}.calculator .calculator-keyboard button.operand span{font-weight:bold;font-size:1.7em !important}.calculator .calculator-keyboard button.command span{color:#0e5d91 !important}.calculator .calculator-keyboard button.execute:before{background:#3e7da7}.calculator .calculator-keyboard button.execute span{font-weight:bold;color:#fff !important;font-size:1.7em !important}.calculator .calculator-keyboard button svg{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor}.calculator .calculator-keyboard button svg.backspace-outline{width:1.2em;height:1.2em}.calculator.degree .calculator-keyboard button.switch[data-command="degree"]:before{background:#3e7da7}.calculator.degree .calculator-keyboard button.switch[data-command="degree"] span{color:#fff !important}.calculator.radian .calculator-keyboard button.switch[data-command="radian"]:before{background:#3e7da7}.calculator.radian .calculator-keyboard button.switch[data-command="radian"] span{color:#fff !important}.calculator .simple-screen{position:relative;width:100%;font-size:1.3em !important;color:#222;font-family:monospace}.calculator .simple-screen .screen-panel{position:relative;width:100%;overflow:auto;word-break:break-all;text-align:left;padding:8px 8px}.calculator .simple-screen .history{font-size:1em !important;border:1px solid #ddd;color:#4e4e4e;height:calc(16px + 3.9em);line-height:1.3em}.calculator .simple-screen .history .history-line .history-expression{text-align:left}.calculator .simple-screen .history .history-line .history-expression,.calculator .simple-screen .history .history-line .history-expression .term{font-weight:lighter}.calculator .simple-screen .history .history-line .history-result{text-align:right;font-weight:bolder}.calculator .simple-screen .history .history-line .history-result:before{content:"=";display:inline-block;font-weight:lighter;padding-right:.2em}.calculator .simple-screen .expression{font-size:1.3em !important;background:#fff;color:#222;height:calc(16px + 3.2em);line-height:1.6em}.calculator .simple-screen .term{padding:0}.calculator .simple-screen .term.term-operator:not([data-token="POW"]):not([data-token="FAC"]):not([data-token="NEG"]):not([data-token="POS"]){padding:0 .2em}.calculator .simple-screen .term.term-operator[data-token="FAC"],.calculator .simple-screen .term.term-operator[data-token="NEG"],.calculator .simple-screen .term.term-operator[data-token="POS"]{margin-left:-.1em;margin-right:-.1em}.calculator .simple-screen .term.term-function:not([data-token="SQRT"]):not([data-token="CBRT"]){padding-right:.2em}.calculator .simple-screen .term.term-operand{font-weight:bold}.calculator .simple-screen .term.term-modificator{font-weight:lighter}.calculator .simple-screen .term.term-constant{font-style:italic;font-weight:bold}.calculator .simple-screen .term.term-variable{font-weight:bold;color:#3e7da7}.calculator .simple-screen .term.term-unknown{color:#d8ae5b;text-decoration:underline wavy #ba122b}.calculator .simple-screen .term.term-elide{display:none}.calculator .simple-screen .term.term-error{color:#ba122b}.calculator .simple-screen .term.term-syntaxError{color:#ba122b;text-decoration:underline wavy #ba122b}.calculator.error .screen .expression{background:#f1d0d5}\n\n/*# sourceMappingURL=calculator.css.map */.media-sizer {\n    max-width: 300px;\n}\n\n.media-sizer label {\n    min-width: 80px;\n    line-height: 22px;\n}\n\n.media-sizer input[type="text"] {\n    width: 68px !important;\n    min-width: 68px !important;\n    text-align: right;\n    padding-right: 24px;\n}\n\n.media-sizer .media-sizer-pixel-width,\n.media-sizer .media-sizer-pixel-height\n{\n    width: 80px;\n}\n\n.media-sizer.media-sizer-reset-off .item-editor-unit-input-box {\n    right: -22px;\n}\n\n.media-sizer.media-sizer-reset-off .media-sizer-sync {\n    right: 69px;\n}\n\n.media-sizer.media-sizer-responsivetoggle-off .media-sizer-responsive-toggle,\n.media-sizer.media-sizer-sync-off .media-sizer-sync,\n.media-sizer.media-sizer-reset-off .media-sizer-reset\n{\n    display:none;\n}\n\n.media-sizer .item-editor-unit-input-box {\n    position: relative;\n    display:-moz-box; /* fix for FF */\n    right: -3px;\n}\n\n.media-sizer .media-sizer-reset,\n.media-sizer .media-sizer-sync {\n    border: 2px solid transparent;\n    border-radius: 2px;\n    position: absolute;\n    top: 10px;\n    height: 38px;\n    width: 12px;\n    z-index: 1000;\n    opacity: .85;\n    cursor: pointer;\n}\n\n.media-sizer .media-sizer-reset:hover,\n.media-sizer .media-sizer-sync:hover {\n    color: #3e7da7;\n}\n\n.media-sizer .media-sizer-reset span,\n.media-sizer .media-sizer-sync span\n{\n    position: absolute;\n    top: 8px;\n    background: #f3f1ef;\n    padding: 3px;\n    border-radius: 8px\n}\n\n.media-sizer .media-sizer-sync {\n    border-right: none;\n    left: 70px;\n}\n\n.media-sizer .media-sizer-sync span {\n    -webkit-transform: rotate(45deg);\n    -moz-transform: rotate(45deg);\n    -o-transform: rotate(45deg);\n    left: -11px;\n}\n\n.media-sizer .media-sizer-reset {\n    border-left: none;\n    border-color: #ccc;\n    left: 160px;\n}\n\n.media-sizer .media-sizer-reset span {\n    -webkit-transform: rotate(45deg);\n    -moz-transform: rotate(45deg);\n    -o-transform: rotate(45deg);\n    right: -11px;\n}\n\n.media-sizer .media-sizer-reset.media-sizer-reset-percent {\n    border: none;\n    height: 12px;\n    top: -4px;\n}\n\n.media-sizer .unit-indicator {\n    margin: -24px;\n}\n\n.media-sizer .media-sizer-slider-box {\n    padding-top: 10px;\n    position: relative;\n}\n\n.media-sizer .media-sizer-cover {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 30px;\n    background: #f3f1ef;\n    opacity: .55;\n    display: block;\n    z-index: 15;\n}\n\n.media-sizer .media-sizer-pixel {\n    display: none;\n    position: relative;\n}\n\n.media-sizer .media-sizer-percent {\n    display: block;\n    position: relative;\n}\n\n.media-sizer.media-sizer-synced .media-sizer-cover {\n    display:none;\n}\n\n.media-sizer.media-sizer-synced .media-sizer-sync {\n    border-color: #ccc;\n    opacity: 1;\n}\n.mediaplayer{position:relative;border:1px solid #333;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;background:#000}.mediaplayer .icon-sound:before{content:"\\e6af"}.mediaplayer .icon-mute:before{content:"\\e69e"}.mediaplayer .error{display:none}.mediaplayer .player{position:relative}.mediaplayer .player iframe{pointer-events:none}.mediaplayer .player .overlay{position:absolute;z-index:1;top:0;left:0;bottom:0;right:0;opacity:1;background:transparent none}.mediaplayer .player .action{position:absolute;z-index:2;top:50%;left:50%;width:64px;height:64px;margin-top:-32px;margin-left:-32px;text-align:center;text-decoration:none;display:none;font-size:64px;font-size:6.4rem;color:#fff}.mediaplayer .player .action .icon{-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;padding:6px 12px;background-color:#000;opacity:0.2}.mediaplayer .player .action .icon:hover{opacity:0.6}.mediaplayer .controls{visibility:hidden;position:relative;padding:5px;display:table;table-layout:fixed;width:100%;border-top:1px solid #333}.mediaplayer .controls .bar{display:table-row}.mediaplayer .controls .control{display:table-cell}.mediaplayer .controls .actions{position:relative;-webkit-transition:all, .1, ease-in-out, 0s;-moz-transition:all, .1, ease-in-out, 0s;-ms-transition:all, .1, ease-in-out, 0s;-o-transition:all, .1, ease-in-out, 0s;transition:all, .1, ease-in-out, 0s}.mediaplayer .controls .actions .action{text-align:center;line-height:2.2rem;width:2.2rem;height:2.2rem;text-decoration:none;color:#dcdcdc;-webkit-transition:all, .2, ease-in-out, 0s;-moz-transition:all, .2, ease-in-out, 0s;-ms-transition:all, .2, ease-in-out, 0s;-o-transition:all, .2, ease-in-out, 0s;transition:all, .2, ease-in-out, 0s}.mediaplayer .controls .actions .action:hover{opacity:1}.mediaplayer .controls .actions .action .icon{line-height:2.2rem}.mediaplayer .controls .actions .play{opacity:0.7;border-right:1px solid #333}.mediaplayer .controls .actions .mute{opacity:0.8;border-left:1px solid #333}.mediaplayer .controls .slider{cursor:pointer;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;-webkit-transition:all, .1, ease-in-out, 0s;-moz-transition:all, .1, ease-in-out, 0s;-ms-transition:all, .1, ease-in-out, 0s;-o-transition:all, .1, ease-in-out, 0s;transition:all, .1, ease-in-out, 0s;background:#fff}.mediaplayer .controls .slider .noUi-background{-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;background:#fff}.mediaplayer .controls .slider.noUi-connect,.mediaplayer .controls .slider .noUi-connect{-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;background:#333}.mediaplayer .controls .slider .noUi-handle{width:11px;height:11px;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;background:#858585}.mediaplayer .controls .slider .noUi-handle:hover{background:#5c5c5c}.mediaplayer .controls .slider .noUi-handle:after{display:none}.mediaplayer .controls .slider.noUi-horizontal{height:9px}.mediaplayer .controls .slider.noUi-horizontal .noUi-handle{top:-2px}.mediaplayer .controls .slider.noUi-vertical{width:9px}.mediaplayer .controls .slider.noUi-vertical .noUi-handle{left:-2px}.mediaplayer .controls .infos{cursor:default;margin:0 1rem;line-height:2.2rem;color:#999;font-size:10px;font-size:1rem;font-weight:bold}.mediaplayer .controls .infos [data-control="time-end"]:before{content:\' / \'}.mediaplayer .controls .timer{width:8rem;text-align:center}.mediaplayer .controls .seek{position:relative;height:1rem;margin-top:5px;padding-left:1rem}.mediaplayer .controls .playback{margin-right:1rem;width:2.2rem}.mediaplayer .controls .sound{width:2.2rem;height:2.2rem}.mediaplayer .controls .sound .volume{cursor:default;position:absolute;z-index:3;background-color:#000;padding:0 10px 0 10px;height:0;top:0;left:-1px;opacity:0;border:solid 1px #333;-webkit-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;-moz-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;-ms-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;-o-transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms;transition:height 300ms ease-out, top 300ms ease-out, opacity 50ms linear 250ms}.mediaplayer .controls .sound .volume.up,.mediaplayer .controls .sound .volume.down{height:120px;padding:10px 10px 5px 10px;opacity:1}.mediaplayer .controls .sound .volume.up .slider,.mediaplayer .controls .sound .volume.down .slider{opacity:1;transition:opacity 50ms linear 200ms;-webkit-transition:opacity 50ms linear 200ms;-moz-transition:opacity 50ms linear 200ms;-ms-transition:opacity 50ms linear 200ms;-o-transition:opacity 50ms linear 200ms;transition:opacity 50ms linear 200ms}.mediaplayer .controls .sound .volume.up{top:-125px;-webkit-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;-moz-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;-ms-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;-o-transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear;transition:height 300ms ease-out 50ms, top 300ms ease-out 50ms, opacity 50ms linear}.mediaplayer .controls .sound .volume.down{top:29px;-webkit-transition:height 300ms ease-out 50ms, opacity 50ms linear;-moz-transition:height 300ms ease-out 50ms, opacity 50ms linear;-ms-transition:height 300ms ease-out 50ms, opacity 50ms linear;-o-transition:height 300ms ease-out 50ms, opacity 50ms linear;transition:height 300ms ease-out 50ms, opacity 50ms linear}.mediaplayer .controls .sound .slider{opacity:0}.mediaplayer .controls .sound .slider .noUi-handle{cursor:pointer;width:9px;height:9px}.mediaplayer .controls .sound .slider.noUi-horizontal{width:50px;height:7px}.mediaplayer .controls .sound .slider.noUi-vertical{width:7px;height:100px}.mediaplayer .controls [data-control="play"]{display:none}.mediaplayer .controls [data-control="pause"]{display:none}.mediaplayer .controls [data-control="mute"]{display:inline-block}.mediaplayer .controls [data-control="unmute"]{display:none}.mediaplayer.video .sound .volume,.mediaplayer.youtube .sound .volume{width:2.2rem;bottom:2.2rem;right:0}.mediaplayer.audio .sound .volume{height:2.2rem;right:2.2rem;bottom:0}.mediaplayer.ready .controls{visibility:visible}.mediaplayer.ready.paused.canplay .overlay{cursor:pointer}.mediaplayer.ready.paused.canplay .player:hover [data-control="play"]{display:inline-block}.mediaplayer.ready.paused.canplay.youtube.ended .player:hover [data-control="play"]{display:none}.mediaplayer.ready.playing.canpause .overlay{cursor:pointer}.mediaplayer.ready.playing.canpause .player:hover [data-control="pause"]{display:inline-block}.mediaplayer.playing.canpause .controls [data-control="pause"]{display:inline-block}.mediaplayer.paused.canplay .controls [data-control="play"]{display:inline-block}.mediaplayer.paused.canplay .controls [data-control="pause"]{display:none}.mediaplayer.muted .controls [data-control="mute"]{display:none}.mediaplayer.muted .controls [data-control="unmute"]{display:inline-block}.mediaplayer.nogui .player iframe{pointer-events:inherit}.mediaplayer.nogui .overlay{display:none !important}.mediaplayer.nogui .controls{display:none !important}.mediaplayer.error .media,.mediaplayer.error .controls{display:none}.mediaplayer.error .error{display:table;text-align:center;width:100%;height:100%}.mediaplayer.error .error .message{color:#ba122b;display:table-cell;vertical-align:middle}.mediaplayer.loading::before{content:\'\';box-sizing:border-box;position:absolute;top:50%;left:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:1px solid #ccc;border-top-color:#07d;animation:spinner .6s linear infinite}@keyframes spinner{to{transform:rotate(360deg)}}\n\n/*# sourceMappingURL=player.css.map */.switch{display:inline-block;position:relative}.switch input{position:absolute;width:100%;height:100%;z-index:100;opacity:0;cursor:pointer}.switch label{border:solid 1px #a4a9b1;background-color:#f3f1ef;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;padding:1px}.switch label span{display:inline-block;position:relative;min-width:50px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;text-align:center}.switch input ~ label .on{color:#222;background-color:#f3f1ef;transition:background-color .4s ease-out}.switch input ~ label .off{color:white;background-color:#a4a9b1;transition:background-color .4s ease-out}.switch input:checked ~ label .on{color:white;background-color:#0e5d91;transition:background-color .4s ease-out}.switch input:checked ~ label .off{color:#222;background-color:#f3f1ef;transition:background-color .4s ease-out}.switch input:focus ~ label{border:solid 1px #0e5d91}\n\n/*# sourceMappingURL=switch.css.map */.tree-button-component .spinner-icon{font-size:17px;font-size:1.7rem;width:17px;height:17px;display:none;margin:12px auto 4px}.tree-button-component.started{background:#ddd;color:#666}.tree-button-component.started .li-inner{cursor:progress}.tree-button-component.started .spinner-icon{display:block;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0);-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-ms-transform-origin:50% 50%;-o-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-animation:tree-button-rotate 1.4s infinite linear;-moz-animation:tree-button-rotate 1.4s infinite linear;-ms-animation:tree-button-rotate 1.4s infinite linear;-o-animation:tree-button-rotate 1.4s infinite linear;animation:tree-button-rotate 1.4s infinite linear}@-o-keyframes tree-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes tree-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes tree-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes tree-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.tree-button-component.started .start-icon{display:none !important}\n\n/*# sourceMappingURL=treeButton.css.map */.modal.has-secondary .message{font-weight:bold}.modal.has-secondary .buttons{width:100%;text-align:center}.modal.has-secondary .buttons button.waiting:disabled{background-color:transparent !important;color:#222 !important;opacity:1 !important;font-size:1.6rem !important;text-shadow:none !important;text-transform:none}.modal.has-secondary .buttons .between-buttons-text{color:#7a7a7a;padding:0 1rem;font-size:12px;font-size:1.2rem}.modal.has-secondary .button-subtext{font-size:11px;font-size:1.1rem;color:#7a7a7a;text-align:center;margin-top:1.5rem}\n\n/*# sourceMappingURL=waitingDialog.css.map */'
),define("loader/vendor.bundle",function(){});
//# sourceMappingURL=vendor.min.js.map