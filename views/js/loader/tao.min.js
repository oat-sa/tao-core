!function(){"use strict";var loaderScript=document.getElementById("amd-loader"),configUrl=loaderScript.getAttribute("data-config"),bundle=loaderScript.getAttribute("data-bundle"),loadController=function(){var controllerOptions={},controllerPath=loaderScript.getAttribute("data-controller"),params=loaderScript.getAttribute("data-params");try{controllerOptions=JSON.parse(params)}catch(err){controllerOptions={}}window.require([controllerPath],function(controller){var startController=function(){window.started||(window.started=!0,controller.start(controllerOptions))};document.addEventListener("readystatechange",startController,!1),
"complete"===document.readyState&&startController()})};window.require([configUrl],function(){window.loadBundles||(window.loaded={},window.loadBundles=function(bundles){bundles=(bundles=(bundles=bundles||[]).concat(window.bundles)).filter(function(item,index){return item&&bundles.indexOf(item)===index&&!0!==window.loaded[item]}),require(bundles,function(){bundles.forEach(function(item){window.loaded[item]=!0}),loadController()})}),bundle||window.bundles&&window.bundles.length?window.loadBundles([bundle]):loadController()})}(),define("loader/bootstrap",function(){}),function(){"use strict";function lib$es6$promise$utils$$isFunction(x){
return"function"==typeof x}var lib$es6$promise$asap$$vertxNext,lib$es6$promise$asap$$customSchedulerFn,lib$es6$promise$utils$$isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},lib$es6$promise$asap$$len=0,lib$es6$promise$asap$$asap=function(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback,lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg,2===(lib$es6$promise$asap$$len+=2)&&(lib$es6$promise$asap$$customSchedulerFn?lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush):lib$es6$promise$asap$$scheduleFlush())}
;var lib$es6$promise$asap$$browserWindow="undefined"!=typeof window?window:void 0,lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{},lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver,lib$es6$promise$asap$$isNode="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),lib$es6$promise$asap$$isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,
1)}}var lib$es6$promise$asap$$scheduleFlush,channel,iterations,observer,node,nextTick,version,lib$es6$promise$asap$$queue=new Array(1e3);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){(0,lib$es6$promise$asap$$queue[i])(lib$es6$promise$asap$$queue[i+1]),lib$es6$promise$asap$$queue[i]=void 0,lib$es6$promise$asap$$queue[i+1]=void 0}lib$es6$promise$asap$$len=0}function lib$es6$promise$$internal$$noop(){}lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$isNode?(nextTick=process.nextTick,version=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(version
)&&"0"===version[1]&&"10"===version[2]&&(nextTick=setImmediate),function(){nextTick(lib$es6$promise$asap$$flush)}):lib$es6$promise$asap$$BrowserMutationObserver?(iterations=0,observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}):lib$es6$promise$asap$$isWorker?((channel=new MessageChannel).port1.onmessage=lib$es6$promise$asap$$flush,function(){channel.port2.postMessage(0)}):void 0===lib$es6$promise$asap$$browserWindow&&"function"==typeof require?function(){try{var vertx=require("vertx")
;return lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext,function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}():lib$es6$promise$asap$$useSetTimeout();var lib$es6$promise$$internal$$PENDING=void 0,lib$es6$promise$$internal$$FULFILLED=1,lib$es6$promise$$internal$$REJECTED=2,lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor)!function(promise,thenable){
thenable._state===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,thenable._result):thenable._state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,thenable._result):lib$es6$promise$$internal$$subscribe(thenable,void 0,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}(promise,maybeThenable);else{var then=function(promise){try{return promise.then}catch(error){return lib$es6$promise$$internal$$GET_THEN_ERROR.error=error,lib$es6$promise$$internal$$GET_THEN_ERROR}}(maybeThenable)
;then===lib$es6$promise$$internal$$GET_THEN_ERROR?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error):void 0===then?lib$es6$promise$$internal$$fulfill(promise,maybeThenable):lib$es6$promise$utils$$isFunction(then)?function(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=!1,error=function(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}(then,thenable,function(value){sealed||(sealed=!0,thenable!==value?lib$es6$promise$$internal$$resolve(promise,value):lib$es6$promise$$internal$$fulfill(promise,value))},function(
reason){sealed||(sealed=!0,lib$es6$promise$$internal$$reject(promise,reason))},promise._label);!sealed&&error&&(sealed=!0,lib$es6$promise$$internal$$reject(promise,error))},promise)}(promise,maybeThenable,then):lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}function lib$es6$promise$$internal$$resolve(promise,value){var x;promise===value?lib$es6$promise$$internal$$reject(promise,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(x=value)||"object"==typeof x&&null!==x?lib$es6$promise$$internal$$handleMaybeThenable(promise,value):lib$es6$promise$$internal$$fulfill(promise,value)}
function lib$es6$promise$$internal$$publishRejection(promise){promise._onerror&&promise._onerror(promise._result),lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._result=value,promise._state=lib$es6$promise$$internal$$FULFILLED,0!==promise._subscribers.length&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise))}function lib$es6$promise$$internal$$reject(promise,reason){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._state=lib$es6$promise$$internal$$REJECTED,promise._result=reason,lib$es6$promise$asap$$asap(
lib$es6$promise$$internal$$publishRejection,promise))}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onerror=null,subscribers[length]=child,subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment,subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection,0===length&&parent._state&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child,callback,
detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var value,error,succeeded,failed,hasCallback=lib$es6$promise$utils$$isFunction(callback);if(hasCallback){if((value=function(callback,detail){try{return callback(detail)}catch(e){
return lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e,lib$es6$promise$$internal$$TRY_CATCH_ERROR}}(callback,detail))===lib$es6$promise$$internal$$TRY_CATCH_ERROR?(failed=!0,error=value.error,value=null):succeeded=!0,promise===value)return void lib$es6$promise$$internal$$reject(promise,new TypeError("A promises callback cannot return that same promise."))}else value=detail,succeeded=!0;promise._state!==lib$es6$promise$$internal$$PENDING||(hasCallback&&succeeded?lib$es6$promise$$internal$$resolve(promise,value):failed?lib$es6$promise$$internal$$reject(promise,error):settled===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,
value):settled===lib$es6$promise$$internal$$REJECTED&&lib$es6$promise$$internal$$reject(promise,value))}function lib$es6$promise$enumerator$$Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(lib$es6$promise$$internal$$noop),this._validateInput(input)?(this._input=input,this.length=input.length,this._remaining=input.length,this._init(),0===this.length?lib$es6$promise$$internal$$fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&lib$es6$promise$$internal$$fulfill(this.promise,this._result))):lib$es6$promise$$internal$$reject(this.promise,this._validationError())}
lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)},lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){for(var length=this.length,promise=this.promise,input=this._input,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++
)this._eachEntry(input[i],i)},lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var x,c=this._instanceConstructor;"object"==typeof(x=entry)&&null!==x?entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING?(entry._onerror=null,this._settledAt(entry._state,i,entry._result)):this._willSettleAt(c.resolve(entry),i):(this._remaining--,this._result[i]=entry)},lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===lib$es6$promise$$internal$$PENDING&&(this._remaining--,state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(
promise,value):this._result[i]=value),0===this._remaining&&lib$es6$promise$$internal$$fulfill(promise,this._result)},lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,void 0,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};var lib$es6$promise$promise$race$$default=function(entries){var promise=new this(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries))return lib$es6$promise$$internal$$reject(promise,new TypeError(
"You must pass an array to race.")),promise;var length=entries.length;function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++)lib$es6$promise$$internal$$subscribe(this.resolve(entries[i]),void 0,onFulfillment,onRejection);return promise};var lib$es6$promise$promise$resolve$$default=function(object){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$resolve(promise,
object),promise};var lib$es6$promise$promise$reject$$default=function(reason){var promise=new this(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$reject(promise,reason),promise},lib$es6$promise$promise$$counter=0;var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++,this._state=void 0,this._result=void 0,this._subscribers=[],lib$es6$promise$$internal$$noop!==resolver&&(lib$es6$promise$utils$$isFunction(resolver)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
}(),this instanceof lib$es6$promise$promise$$Promise||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(promise,resolver){try{resolver(function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}(this,resolver))}lib$es6$promise$promise$$Promise.all=function(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise},lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default,
lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default,lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default,lib$es6$promise$promise$$Promise._setScheduler=function(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn},lib$es6$promise$promise$$Promise._setAsap=function(asapFn){lib$es6$promise$asap$$asap=asapFn},lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap,lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var state=this._state;if(
state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection)return this;var child=new this.constructor(lib$es6$promise$$internal$$noop),result=this._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})}else lib$es6$promise$$internal$$subscribe(this,child,onFulfillment,onRejection);return child},catch:function(onRejection){return this.then(null,onRejection)}};var lib$es6$promise$polyfill$$default=function(){var local;if("undefined"!=typeof global)local=global;else if("undefined"!=typeof self
)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;P&&"[object Promise]"===Object.prototype.toString.call(P.resolve())&&!P.cast||(local.Promise=lib$es6$promise$promise$$default)},lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};"function"==typeof define&&define.amd?define("lib/polyfill/es6-promise",[],function(){return lib$es6$promise$umd$$ES6Promise}):"undefined"!=typeof module&&module.exports?module.exports=lib$es6$promise$umd$$ES6Promise:void 0!==this&&(
this.ES6Promise=lib$es6$promise$umd$$ES6Promise),lib$es6$promise$polyfill$$default()}.call(this),define("lib/uuid",[],function(){var CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(len,radix){var i,r,chars=CHARS,uuid=[];if(radix=radix||chars.length,len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else for(uuid[8]=uuid[13]=uuid[18]=uuid[23]="-",uuid[14]="4",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?3&r|8:r]);return uuid.join("")}}),define("i18n",["json!i18ntr/messages.json","core/format"],function(i18nTr,format){"use strict";var translations=i18nTr.translations;return function(
message){var localized=translations[message]||message;return 1<arguments.length&&(localized=format.apply(null,[localized].concat([].slice.call(arguments,1)))),localized}}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("lib/dompurify/purify",factory):global.DOMPurify=factory()}(this,function(){"use strict";var freeze$1=Object.freeze||function(x){return x},html=freeze$1(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup",
"content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),
svg=freeze$1(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),svgFilters=freeze$1(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR",
"feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mathMl=freeze$1(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),text=freeze$1(["#text"]),freeze$2=Object.freeze||function(x){return x},html$1=freeze$2(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan",
"coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),svg$1=freeze$2([
"accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform",
"height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount",
"repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1",
"y2","z","zoomandpan"]),mathMl$1=freeze$2(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze$2(["xlink:href",
"xml:id","xlink:title","xml:space","xmlns:xlink"]),hasOwnProperty=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,apply$1=("undefined"!=typeof Reflect&&Reflect).apply;function addToSet(set,array){setPrototypeOf&&setPrototypeOf(set,null);for(var l=array.length;l--;){var element=array[l];if("string"==typeof element){var lcElement=element.toLowerCase();lcElement!==element&&(Object.isFrozen(array)||(array[l]=lcElement),element=lcElement)}set[element]=!0}return set}function clone(object){var newObject={},property=void 0;for(property in object)apply$1(hasOwnProperty,object,[property])&&(newObject[property]=object[property]);return newObject}apply$1||(
apply$1=function(fun,thisValue,args){return fun.apply(thisValue,args)});var seal=Object.seal||function(x){return x},MUSTACHE_EXPR=seal(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ERB_EXPR=seal(/<%[\s\S]*|[\s\S]*%>/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){
return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var apply=("undefined"!=typeof Reflect&&Reflect).apply,arraySlice=Array.prototype.slice,freeze=Object.freeze,getGlobal=function(){return"undefined"==typeof window?null:window};apply||(apply=function(fun,thisValue,args){return fun.apply(thisValue,args)});var _createTrustedTypesPolicy=function(trustedTypes,document){if("object"!==(void 0===trustedTypes?"undefined":_typeof(trustedTypes)
)||"function"!=typeof trustedTypes.createPolicy)return null;var suffix=null;document.currentScript&&document.currentScript.hasAttribute("data-tt-policy-suffix")&&(suffix=document.currentScript.getAttribute("data-tt-policy-suffix"));var policyName="dompurify"+(suffix?"#"+suffix:"");try{return trustedTypes.createPolicy(policyName,{createHTML:function(html$$1){return html$$1}})}catch(e){return console.warn("TrustedTypes policy "+policyName+" could not be created."),null}};return function createDOMPurify(){var window=0<arguments.length&&void 0!==arguments[0]?arguments[0]:getGlobal(),DOMPurify=function(root){return createDOMPurify(root)};if(
DOMPurify.version="1.0.9",DOMPurify.removed=[],!window||!window.document||9!==window.document.nodeType)return DOMPurify.isSupported=!1,DOMPurify;var originalDocument=window.document,useDOMParser=!1,removeTitle=!1,document=window.document,DocumentFragment=window.DocumentFragment,HTMLTemplateElement=window.HTMLTemplateElement,Node=window.Node,NodeFilter=window.NodeFilter,_window$NamedNodeMap=window.NamedNodeMap,NamedNodeMap=void 0===_window$NamedNodeMap?window.NamedNodeMap||window.MozNamedAttrMap:_window$NamedNodeMap,Text=window.Text,Comment=window.Comment,DOMParser=window.DOMParser,TrustedTypes=window.TrustedTypes;if("function"==typeof HTMLTemplateElement){
var template=document.createElement("template");template.content&&template.content.ownerDocument&&(document=template.content.ownerDocument)}var trustedTypesPolicy=_createTrustedTypesPolicy(TrustedTypes,originalDocument),emptyHTML=trustedTypesPolicy?trustedTypesPolicy.createHTML(""):"",_document=document,implementation=_document.implementation,createNodeIterator=_document.createNodeIterator,getElementsByTagName=_document.getElementsByTagName,createDocumentFragment=_document.createDocumentFragment,importNode=originalDocument.importNode,hooks={};DOMPurify.isSupported=implementation&&void 0!==implementation.createHTMLDocument&&9!==document.documentMode
;var MUSTACHE_EXPR$$1=MUSTACHE_EXPR,ERB_EXPR$$1=ERB_EXPR,DATA_ATTR$$1=DATA_ATTR,ARIA_ATTR$$1=ARIA_ATTR,IS_SCRIPT_OR_DATA$$1=IS_SCRIPT_OR_DATA,ATTR_WHITESPACE$$1=ATTR_WHITESPACE,IS_ALLOWED_URI$$1=IS_ALLOWED_URI,ALLOWED_TAGS=null,DEFAULT_ALLOWED_TAGS=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(svgFilters),_toConsumableArray(mathMl),_toConsumableArray(text))),ALLOWED_ATTR=null,DEFAULT_ALLOWED_ATTR=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(mathMl$1),_toConsumableArray(xml))),FORBID_TAGS=null,FORBID_ATTR=null,ALLOW_ARIA_ATTR=!0,ALLOW_DATA_ATTR=!0,
ALLOW_UNKNOWN_PROTOCOLS=!1,SAFE_FOR_JQUERY=!1,SAFE_FOR_TEMPLATES=!1,WHOLE_DOCUMENT=!1,SET_CONFIG=!1,FORCE_BODY=!1,RETURN_DOM=!1,RETURN_DOM_FRAGMENT=!1,RETURN_DOM_IMPORT=!1,SANITIZE_DOM=!0,KEEP_CONTENT=!0,IN_PLACE=!1,USE_PROFILES={},FORBID_CONTENTS=addToSet({},["audio","head","math","script","style","template","svg","video"]),DATA_URI_TAGS=addToSet({},["audio","video","img","source","image"]),URI_SAFE_ATTRIBUTES=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),CONFIG=null,formElement=document.createElement("form"),_parseConfig=function(cfg){CONFIG&&CONFIG===cfg||(cfg&&"object"===(
void 0===cfg?"undefined":_typeof(cfg))||(cfg={}),ALLOWED_TAGS="ALLOWED_TAGS"in cfg?addToSet({},cfg.ALLOWED_TAGS):DEFAULT_ALLOWED_TAGS,ALLOWED_ATTR="ALLOWED_ATTR"in cfg?addToSet({},cfg.ALLOWED_ATTR):DEFAULT_ALLOWED_ATTR,FORBID_TAGS="FORBID_TAGS"in cfg?addToSet({},cfg.FORBID_TAGS):{},FORBID_ATTR="FORBID_ATTR"in cfg?addToSet({},cfg.FORBID_ATTR):{},USE_PROFILES="USE_PROFILES"in cfg&&cfg.USE_PROFILES,ALLOW_ARIA_ATTR=!1!==cfg.ALLOW_ARIA_ATTR,ALLOW_DATA_ATTR=!1!==cfg.ALLOW_DATA_ATTR,ALLOW_UNKNOWN_PROTOCOLS=cfg.ALLOW_UNKNOWN_PROTOCOLS||!1,SAFE_FOR_JQUERY=cfg.SAFE_FOR_JQUERY||!1,SAFE_FOR_TEMPLATES=cfg.SAFE_FOR_TEMPLATES||!1,WHOLE_DOCUMENT=cfg.WHOLE_DOCUMENT||!1,
RETURN_DOM=cfg.RETURN_DOM||!1,RETURN_DOM_FRAGMENT=cfg.RETURN_DOM_FRAGMENT||!1,RETURN_DOM_IMPORT=cfg.RETURN_DOM_IMPORT||!1,FORCE_BODY=cfg.FORCE_BODY||!1,SANITIZE_DOM=!1!==cfg.SANITIZE_DOM,KEEP_CONTENT=!1!==cfg.KEEP_CONTENT,IN_PLACE=cfg.IN_PLACE||!1,IS_ALLOWED_URI$$1=cfg.ALLOWED_URI_REGEXP||IS_ALLOWED_URI$$1,SAFE_FOR_TEMPLATES&&(ALLOW_DATA_ATTR=!1),RETURN_DOM_FRAGMENT&&(RETURN_DOM=!0),USE_PROFILES&&(ALLOWED_TAGS=addToSet({},[].concat(_toConsumableArray(text))),ALLOWED_ATTR=[],!0===USE_PROFILES.html&&(addToSet(ALLOWED_TAGS,html),addToSet(ALLOWED_ATTR,html$1)),!0===USE_PROFILES.svg&&(addToSet(ALLOWED_TAGS,svg),addToSet(ALLOWED_ATTR,svg$1),addToSet(ALLOWED_ATTR,
xml)),!0===USE_PROFILES.svgFilters&&(addToSet(ALLOWED_TAGS,svgFilters),addToSet(ALLOWED_ATTR,svg$1),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.mathMl&&(addToSet(ALLOWED_TAGS,mathMl),addToSet(ALLOWED_ATTR,mathMl$1),addToSet(ALLOWED_ATTR,xml))),cfg.ADD_TAGS&&(ALLOWED_TAGS===DEFAULT_ALLOWED_TAGS&&(ALLOWED_TAGS=clone(ALLOWED_TAGS)),addToSet(ALLOWED_TAGS,cfg.ADD_TAGS)),cfg.ADD_ATTR&&(ALLOWED_ATTR===DEFAULT_ALLOWED_ATTR&&(ALLOWED_ATTR=clone(ALLOWED_ATTR)),addToSet(ALLOWED_ATTR,cfg.ADD_ATTR)),cfg.ADD_URI_SAFE_ATTR&&addToSet(URI_SAFE_ATTRIBUTES,cfg.ADD_URI_SAFE_ATTR),KEEP_CONTENT&&(ALLOWED_TAGS["#text"]=!0),WHOLE_DOCUMENT&&addToSet(ALLOWED_TAGS,["html","head",
"body"]),ALLOWED_TAGS.table&&addToSet(ALLOWED_TAGS,["tbody"]),freeze&&freeze(cfg),CONFIG=cfg)},_forceRemove=function(node){DOMPurify.removed.push({element:node});try{node.parentNode.removeChild(node)}catch(err){node.outerHTML=emptyHTML}},_removeAttribute=function(name,node){try{DOMPurify.removed.push({attribute:node.getAttributeNode(name),from:node})}catch(err){DOMPurify.removed.push({attribute:null,from:node})}node.removeAttribute(name)},_initDocument=function(dirty){var doc=void 0,leadingWhitespace=void 0;if(FORCE_BODY)dirty="<remove></remove>"+dirty;else{var matches=dirty.match(/^[\s]+/);(leadingWhitespace=matches&&matches[0])&&(dirty=dirty.slice(
leadingWhitespace.length))}if(useDOMParser)try{doc=(new DOMParser).parseFromString(dirty,"text/html")}catch(err){}if(removeTitle&&addToSet(FORBID_TAGS,["title"]),!doc||!doc.documentElement){var body=(doc=implementation.createHTMLDocument("")).body;body.parentNode.removeChild(body.parentNode.firstElementChild),body.outerHTML=trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty}return leadingWhitespace&&doc.body.insertBefore(document.createTextNode(leadingWhitespace),doc.body.childNodes[0]||null),getElementsByTagName.call(doc,WHOLE_DOCUMENT?"html":"body")[0]};DOMPurify.isSupported&&(function(){try{_initDocument(
'<svg><p><style><img src="</style><img src=x onerror=1//">').querySelector("svg img")&&(useDOMParser=!0)}catch(err){}}(),function(){try{_initDocument("<x/><title>&lt;/title&gt;&lt;img&gt;").querySelector("title").innerHTML.match(/<\/title/)&&(removeTitle=!0)}catch(err){}}());var _createIterator=function(root){return createNodeIterator.call(root.ownerDocument||root,root,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,function(){return NodeFilter.FILTER_ACCEPT},!1)},_isNode=function(obj){return"object"===(void 0===Node?"undefined":_typeof(Node))?obj instanceof Node:obj&&"object"===(void 0===obj?"undefined":_typeof(obj)
)&&"number"==typeof obj.nodeType&&"string"==typeof obj.nodeName},_executeHook=function(entryPoint,currentNode,data){hooks[entryPoint]&&hooks[entryPoint].forEach(function(hook){hook.call(DOMPurify,currentNode,data,CONFIG)})},_sanitizeElements=function(currentNode){var elm,content=void 0;if(_executeHook("beforeSanitizeElements",currentNode,null),!((elm=currentNode)instanceof Text||elm instanceof Comment||"string"==typeof elm.nodeName&&"string"==typeof elm.textContent&&"function"==typeof elm.removeChild&&elm.attributes instanceof NamedNodeMap&&"function"==typeof elm.removeAttribute&&"function"==typeof elm.setAttribute))return _forceRemove(currentNode),!0
;var tagName=currentNode.nodeName.toLowerCase();if(_executeHook("uponSanitizeElement",currentNode,{tagName:tagName,allowedTags:ALLOWED_TAGS}),ALLOWED_TAGS[tagName]&&!FORBID_TAGS[tagName])return!SAFE_FOR_JQUERY||currentNode.firstElementChild||currentNode.content&&currentNode.content.firstElementChild||!/</g.test(currentNode.textContent)||(DOMPurify.removed.push({element:currentNode.cloneNode()}),currentNode.innerHTML?currentNode.innerHTML=currentNode.innerHTML.replace(/</g,"&lt;"):currentNode.innerHTML=currentNode.textContent.replace(/</g,"&lt;")),SAFE_FOR_TEMPLATES&&3===currentNode.nodeType&&(content=(content=(content=currentNode.textContent).replace(
MUSTACHE_EXPR$$1," ")).replace(ERB_EXPR$$1," "),currentNode.textContent!==content&&(DOMPurify.removed.push({element:currentNode.cloneNode()}),currentNode.textContent=content)),_executeHook("afterSanitizeElements",currentNode,null),!1;if(KEEP_CONTENT&&!FORBID_CONTENTS[tagName]&&"function"==typeof currentNode.insertAdjacentHTML)try{var htmlToInsert=currentNode.innerHTML;currentNode.insertAdjacentHTML("AfterEnd",trustedTypesPolicy?trustedTypesPolicy.createHTML(htmlToInsert):htmlToInsert)}catch(err){}return _forceRemove(currentNode),!0},_isValidAttribute=function(lcTag,lcName,value){if(SANITIZE_DOM&&("id"===lcName||"name"===lcName)&&(
value in document||value in formElement))return!1;if(SAFE_FOR_TEMPLATES&&(value=(value=value.replace(MUSTACHE_EXPR$$1," ")).replace(ERB_EXPR$$1," ")),ALLOW_DATA_ATTR&&DATA_ATTR$$1.test(lcName));else if(ALLOW_ARIA_ATTR&&ARIA_ATTR$$1.test(lcName));else{if(!ALLOWED_ATTR[lcName]||FORBID_ATTR[lcName])return!1;if(URI_SAFE_ATTRIBUTES[lcName]);else if(IS_ALLOWED_URI$$1.test(value.replace(ATTR_WHITESPACE$$1,"")));else if("src"!==lcName&&"xlink:href"!==lcName||"script"===lcTag||0!==value.indexOf("data:")||!DATA_URI_TAGS[lcTag])if(ALLOW_UNKNOWN_PROTOCOLS&&!IS_SCRIPT_OR_DATA$$1.test(value.replace(ATTR_WHITESPACE$$1,"")));else if(value)return!1}return!0},
_sanitizeAttributes=function(currentNode){var attr=void 0,value=void 0,lcName=void 0,idAttr=void 0,l=void 0;_executeHook("beforeSanitizeAttributes",currentNode,null);var attributes=currentNode.attributes;if(attributes){var hookEvent={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ALLOWED_ATTR};for(l=attributes.length;l--;){var _attr=attr=attributes[l],name=_attr.name,namespaceURI=_attr.namespaceURI;if(value=attr.value.trim(),lcName=name.toLowerCase(),hookEvent.attrName=lcName,hookEvent.attrValue=value,hookEvent.keepAttr=!0,_executeHook("uponSanitizeAttribute",currentNode,hookEvent),value=hookEvent.attrValue,
"name"===lcName&&"IMG"===currentNode.nodeName&&attributes.id)idAttr=attributes.id,attributes=apply(arraySlice,attributes,[]),_removeAttribute("id",currentNode),_removeAttribute(name,currentNode),attributes.indexOf(idAttr)>l&&currentNode.setAttribute("id",idAttr.value);else{if("INPUT"===currentNode.nodeName&&"type"===lcName&&"file"===value&&(ALLOWED_ATTR[lcName]||!FORBID_ATTR[lcName]))continue;"id"===name&&currentNode.setAttribute(name,""),_removeAttribute(name,currentNode)}if(hookEvent.keepAttr){var lcTag=currentNode.nodeName.toLowerCase();if(_isValidAttribute(lcTag,lcName,value))try{namespaceURI?currentNode.setAttributeNS(namespaceURI,name,value
):currentNode.setAttribute(name,value),DOMPurify.removed.pop()}catch(err){}}}_executeHook("afterSanitizeAttributes",currentNode,null)}},_sanitizeShadowDOM=function _sanitizeShadowDOM(fragment){var shadowNode=void 0,shadowIterator=_createIterator(fragment);for(_executeHook("beforeSanitizeShadowDOM",fragment,null);shadowNode=shadowIterator.nextNode();)_executeHook("uponSanitizeShadowNode",shadowNode,null),_sanitizeElements(shadowNode)||(shadowNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(shadowNode.content),_sanitizeAttributes(shadowNode));_executeHook("afterSanitizeShadowDOM",fragment,null)};return DOMPurify.sanitize=function(dirty,cfg){
var body=void 0,importedNode=void 0,currentNode=void 0,oldNode=void 0,returnNode=void 0;if(dirty||(dirty="\x3c!--\x3e"),"string"!=typeof dirty&&!_isNode(dirty)){if("function"!=typeof dirty.toString)throw new TypeError("toString is not a function");if("string"!=typeof(dirty=dirty.toString()))throw new TypeError("dirty is not a string, aborting")}if(!DOMPurify.isSupported){if("object"===_typeof(window.toStaticHTML)||"function"==typeof window.toStaticHTML){if("string"==typeof dirty)return window.toStaticHTML(dirty);if(_isNode(dirty))return window.toStaticHTML(dirty.outerHTML)}return dirty}if(SET_CONFIG||_parseConfig(cfg),DOMPurify.removed=[],IN_PLACE);else if(
dirty instanceof Node)1===(importedNode=(body=_initDocument("\x3c!--\x3e")).ownerDocument.importNode(dirty,!0)).nodeType&&"BODY"===importedNode.nodeName?body=importedNode:body.appendChild(importedNode);else{if(!RETURN_DOM&&!WHOLE_DOCUMENT&&-1===dirty.indexOf("<"))return trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty;if(!(body=_initDocument(dirty)))return RETURN_DOM?null:emptyHTML}body&&FORCE_BODY&&_forceRemove(body.firstChild);for(var nodeIterator=_createIterator(IN_PLACE?dirty:body);currentNode=nodeIterator.nextNode();)3===currentNode.nodeType&&currentNode===oldNode||_sanitizeElements(currentNode)||(
currentNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(currentNode.content),_sanitizeAttributes(currentNode),oldNode=currentNode);if(oldNode=null,IN_PLACE)return dirty;if(RETURN_DOM){if(RETURN_DOM_FRAGMENT)for(returnNode=createDocumentFragment.call(body.ownerDocument);body.firstChild;)returnNode.appendChild(body.firstChild);else returnNode=body;return RETURN_DOM_IMPORT&&(returnNode=importNode.call(originalDocument,returnNode,!0)),returnNode}var serializedHTML=WHOLE_DOCUMENT?body.outerHTML:body.innerHTML;return trustedTypesPolicy?trustedTypesPolicy.createHTML(serializedHTML):serializedHTML},DOMPurify.setConfig=function(cfg){_parseConfig(cfg),
SET_CONFIG=!0},DOMPurify.clearConfig=function(){CONFIG=null,SET_CONFIG=!1},DOMPurify.isValidAttribute=function(tag,attr,value){CONFIG||_parseConfig({});var lcTag=tag.toLowerCase(),lcName=attr.toLowerCase();return _isValidAttribute(lcTag,lcName,value)},DOMPurify.addHook=function(entryPoint,hookFunction){"function"==typeof hookFunction&&(hooks[entryPoint]=hooks[entryPoint]||[],hooks[entryPoint].push(hookFunction))},DOMPurify.removeHook=function(entryPoint){hooks[entryPoint]&&hooks[entryPoint].pop()},DOMPurify.removeHooks=function(entryPoint){hooks[entryPoint]&&(hooks[entryPoint]=[])},DOMPurify.removeAllHooks=function(){hooks={}},DOMPurify}()}),define(
"tpl!ui/component/tpl/component",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="component"></div>'})}),define("tpl!ui/feedback/feedback",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="',buffer+=escapeExpression(stack1=(
helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.id)?helper.call(depth0,{hash:{},data:data}):helper)+'" class="feedback feedback-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+" ",((stack1=helpers.if.call(depth0,depth0&&depth0.popup,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"popup"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <span class="icon-',buffer+=escapeExpression(stack1=(helper=helpers.level)?helper.call(
depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.level)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    <div>\n        ',options={hash:{},data:data},((stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify)?helper.call(depth0,depth0&&depth0.msg,options):helperMissing.call(depth0,"dompurify",depth0&&depth0.msg,options))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <span title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Close message",options):helperMissing.call(depth0,"__","Close message",options))
)+'" class="icon-close" data-close=":parent .feedback"></span>\n</div>'})}),define("tpl!ui/dialog/tpl/body",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="preview-modal-feedback modal">\n    <div class="modal-body clearfix">\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.heading,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer=""
;return buffer+='\n        <h4 class="strong">',stack1=(helper=helpers.heading)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.heading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h4>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n        <p class="message">',stack1=(helper=helpers.message)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.message)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</p>\n\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.content,{hash:{},
inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <div class="content">',((stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.content)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n\n        <div class="buttons rgt"></div>\n    </div>\n</div>'})}),define("tpl!ui/dialog/tpl/buttons",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program2(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '}return(stack1=helpers.each.call(depth0,depth0&&depth0.buttons,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <button class="btn-',stack1=(
helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+" small ",stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-control="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" type="button">\n        ',((stack1=helpers.if.call(
depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        <span class="label">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    </button>\n"},data),data:data}))||0===stack1?stack1:""})}),define("layout/logout-event",["jquery","lodash","i18n","util/url","ui/dialog/alert"],function($,_,__,url,alert){"use strict";var defaults={message:__("You have been logged out. Please login again"),redirectUrl:url.route(
"logout","Main","tao")};return function(options){options=_.defaults(options||{},defaults),alert(options.message,function(){window.location=options.redirectUrl})}}),define("controller/app",["lodash","jquery","core/historyRouter","core/logger","core/eventifier","core/statifier","util/url","ui/feedback","layout/logout-event"],function(_,$,historyRouterFactory,loggerFactory,eventifier,statifier,urlUtil,feedback,logoutEvent){"use strict";var historyRouter,redirectUrl,appLogger=loggerFactory("controller/app"),appController=eventifier(statifier({start:function(options){var currentRoute;appController.apply(),
currentRoute=options&&options.forwardTo?options.forwardTo:window.location+"",options&&options.redirectUrl&&(redirectUrl=options.redirectUrl||{}),historyRouter.forward(currentRoute)},apply:function(selector,target){return selector=selector||".router",target=target||document,$(target).off("click.appController").on("click.appController",selector,function(e){var $elt,href;e.preventDefault(),(href=($elt=$(this)).attr("href"))||(href=$("[href]:first-child",$elt).attr("href")),href&&historyRouter.redirect(href)}),this},getRouter:function(){return historyRouter},getLogger:function(){return appLogger},onError:function(err){var message=err&&err.message||err,options={
message:message};return appLogger.error(err),403===err.code?(options=_.defaults(options,redirectUrl||{}),logoutEvent(options)):feedback().error(message),this}}));return historyRouter=historyRouterFactory().on("dispatching",function(url){appController.setState("dispatching"),appController.trigger("change",url)}).on("dispatched",function(url){appController.setState("dispatching",!1),appController.trigger("started",url)}),appController}),define("layout/loading-bar",["jquery"],function($){"use strict";var $loadingBar=$(".loading-bar"),originalHeight=$loadingBar.height(),$win=$(window),$doc=$(document),$contentWrap=$(".content-wrap"),headerElements={
$versionWarning:$contentWrap.find(".version-warning"),$header:$contentWrap.find("header:first()")},headerHeight=getHeaderHeight(headerElements);function getHeaderHeight(headerElements){var $element;for($element in headerHeight=0,headerElements)headerElements[$element].length&&headerElements[$element].is(":visible")&&(headerHeight+=headerElements[$element].outerHeight());return headerHeight}function updateHeight(){$loadingBar.hasClass("loading")&&((headerHeight=getHeaderHeight(headerElements))<=$win.scrollTop()?$loadingBar.addClass("fixed"):$loadingBar.removeClass("fixed"),$loadingBar.hasClass("loadingbar-covered")?$loadingBar.height($doc.height()
):$loadingBar.height(""))}return $win.on("scroll.loadingbar",function(){updateHeight()}),{start:function(covered){void 0===covered&&(covered=!0),$loadingBar.hasClass("loading")&&$loadingBar.stop(),$loadingBar.addClass("loading"),$loadingBar.toggleClass("loadingbar-covered",covered),updateHeight()},stop:function(){$loadingBar.removeClass("loading fixed").height(originalHeight)}}}),define("helpers",["lodash","jquery","context","layout/loading-bar","jqueryui"],function(_,$,context,loadingBar){"use strict";return{init:function(){$.postJson=function(url,data,callback){$.post(url,data,callback,"json")}},getMainContainer:function(){var sectionIndex
;return console.warn("deprecated, use section instead"),context.section||(sectionIndex=$(".section-container").tabs("options","selected"),$(".content-panel").eq(sectionIndex).find(".content-block")),$("#panel-"+context.section+" .content-block")},getMainContainerSelector:function($tabs){console.warn("deprecated, use section instead");var $container=this.getMainContainer();return!!($container&&0<$container.length)&&$container.selector},selectTabByName:function(name){console.warn("deprecated, use section instead"),$("#"+name).click()},getTabIndexByName:function(name){console.warn("deprecated, use section instead");for(var elts=$("div#tabs ul.ui-tabs-nav li a")
,i=0;i<elts.length;){var elt=elts[i];if(elt&&elt.id&&elt.id===name)return i;i++}return-1},openTab:function(title,url,open){console.warn("deprecated, use section instead"),open=open||!0;var idx=this.getTabIndexByUrl(url),$tabs=$("#tabs");-1==idx&&($tabs.tabs("add",url,title),idx=$tabs.tabs("length")-1),open&&$tabs.tabs("select",idx)},getTabIndexByUrl:function(url){console.warn("deprecated, use section instead");var elts=$("#tabs ul.ui-tabs-nav li a"),i=0,ret=-1;return elts.each(function(){var href=$.data(this,"href.tabs");url!==href?i++:ret=i}),ret},closeTab:function(index){console.warn("deprecated, use section instead"),-1<index&&$("#tabs").tabs("remove",
index)},updateTabUrl:function(tabObj,tabName,url){console.warn("deprecated, use section instead");var index=this.getTabIndexByName(tabName);tabObj.tabs("url",index,url),tabObj.tabs("enable",index)},loading:function(){console.warn("deprecated, this should be automated"),$(window).on("click",function(e){return e.stopPropagation(),e.preventDefault(),!1}),loadingBar.start()},loaded:function(){console.warn("deprecated, this should be automated"),$(window).off("click"),loadingBar.stop()},_load:function(selector,url,data){url=url||"",data?data.nc=(new Date).getTime():data={nc:(new Date).getTime()},$(selector).hide().empty().show(),-1===url.indexOf("?")?$(selector
).load(url,data):(url+="&"+$.param(data),$(selector).load(url))},_href:function(ref){return-1<ref.indexOf("?")?ref+"&nc="+(new Date).getTime():ref+"?nc="+(new Date).getTime()},_autoFx:function(){console.warn("deprecated"),setTimeout(function(){$(".auto-highlight").effect("highlight",{color:"#9FC9FF"},2500)},1e3),setTimeout(function(){$(".auto-hide").fadeOut("slow")},3e3),setTimeout(function(){$(".auto-slide").slideUp(1500)},11e3)},textCutter:function(selector,maxLength){console.warn("deprecated, use css instead"),maxLength||(maxLength=100),$(selector).each(function(){$(this).text().length>maxLength&&!$(this).hasClass("text-cutted")&&($(this).prop("title",$(
this).text()),$(this).css("cursor","pointer"),$(this).html($(this).text().substring(0,maxLength)+"[...<img src='"+context.taobase_www+"img/bullet_add.png' />]"),$(this).addClass("text-cutted"))})},createMessage:function(message){console.warn("deprecated, use feedback instead"),$("#info-box").length?$("#info-box").html(message).show():$("body").append("<div id='info-box' class='ui-widget-header ui-corner-all auto-slide' >"+message+"</div>"),this._autoFx()},createErrorMessage:function(message){this.createMessage(message),$("#info-box").addClass("ui-state-error")},createInfoMessage:function(message){this.createMessage(message),$("#info-box").removeClass(
"ui-state-error")},isFlashPluginEnabled:function(){return void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&!1!==new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")},loadCss:function(url){console.warn("deprecated");var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url,document.getElementsByTagName("head")[0].appendChild(link)},_url:function(action,controller,extension,params){var url;if("string"!=typeof action||"string"!=typeof controller||"string"!=typeof extension)throw new TypeError("All parts are required to build an URL")
;return url=context.root_url+extension+"/"+controller+"/"+action,_.isString(params)?url+="?"+params:_.isPlainObject(params)&&(url+="?"+$.param(params)),url}}}),define("tpl!ui/deleter/undo",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="undobox feedback-info">\n    <span class="icon-info"></span>\n        ',buffer+=escapeExpression((helper=helpers.undoMessage)?helper.call(depth0,{hash:{},
data:data}):"function"==typeof(helper=depth0&&depth0.undoMessage)?helper.call(depth0,{hash:{},data:data}):helper)+'\n        <a class="undo" href="#">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Undo",options):helperMissing.call(depth0,"__","Undo",options)))+'</a>\n    <span title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Remove Message",options):helperMissing.call(depth0,"__","Remove Message",options)))+'" class="icon-close" data-close=":parent .undobox"></span>\n</div>'})}),define("lib/gamp/gamp",[],function(){"use strict"
;function gamp(){for(var val,digits,point,i=arguments.length-1,factor=-1/0;0<=i;)factor=Math.max(factor,(val=arguments[i--],digits=void 0,digits=String(val),(point=digits.indexOf("."))<0?1:Math.pow(10,digits.length-point-1)));return Math.abs(factor)}return gamp.normalize=function(val,factor){return Math.round(factor*Number(val))},gamp.round=function(val,digits){return Number(Number(val).toPrecision(void 0===digits?16:digits))},gamp.add=function(a,b){var factor=gamp(a,b);return gamp.round((gamp.normalize(a,factor)+gamp.normalize(b,factor))/factor)},gamp.sub=function(a,b){var factor=gamp(a,b);return gamp.round((gamp.normalize(a,factor)-gamp.normalize(b,factor)
)/factor)},gamp.mul=function(a,b){var factor=gamp(a,b);return gamp.round(gamp.normalize(a,factor)*gamp.normalize(b,factor)/(factor*factor),15)},gamp.div=function(a,b){var factor=gamp(a,b);return gamp.round(gamp.normalize(a,factor)/gamp.normalize(b,factor))},gamp.pow=function(a,b){var factor=gamp(a),ta=gamp.normalize(a,factor),ib=Math.floor(b),fb=b-ib,res=ib?Math.pow(ta,ib)/Math.pow(factor,ib):1;return fb&&(res=gamp.div(gamp.mul(res,Math.pow(ta,fb)),Math.pow(factor,fb))),gamp.round(res,15)},gamp}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(
"lib/popper/popper",factory):global.Popper=factory()}(this,function(){"use strict";for(var isBrowser="undefined"!=typeof window&&"undefined"!=typeof document,longerTimeoutBrowsers=["Edge","Trident","Firefox"],timeoutDuration=0,i=0;i<longerTimeoutBrowsers.length;i+=1)if(isBrowser&&0<=navigator.userAgent.indexOf(longerTimeoutBrowsers[i])){timeoutDuration=1;break}var debounce=isBrowser&&window.Promise?function(fn){var called=!1;return function(){called||(called=!0,window.Promise.resolve().then(function(){called=!1,fn()}))}}:function(fn){var scheduled=!1;return function(){scheduled||(scheduled=!0,setTimeout(function(){scheduled=!1,fn()},timeoutDuration))}}
;function isFunction(functionToCheck){return functionToCheck&&"[object Function]"==={}.toString.call(functionToCheck)}function getStyleComputedProperty(element,property){if(1!==element.nodeType)return[];var css=element.ownerDocument.defaultView.getComputedStyle(element,null);return property?css[property]:css}function getParentNode(element){return"HTML"===element.nodeName?element:element.parentNode||element.host}function getScrollParent(element){if(!element)return document.body;switch(element.nodeName){case"HTML":case"BODY":return element.ownerDocument.body;case"#document":return element.body}var _getStyleComputedProp=getStyleComputedProperty(element),
overflow=_getStyleComputedProp.overflow,overflowX=_getStyleComputedProp.overflowX,overflowY=_getStyleComputedProp.overflowY;return/(auto|scroll|overlay)/.test(overflow+overflowY+overflowX)?element:getScrollParent(getParentNode(element))}var isIE11=isBrowser&&!(!window.MSInputMethodContext||!document.documentMode),isIE10=isBrowser&&/MSIE 10/.test(navigator.userAgent);function isIE(version){return 11===version?isIE11:10===version?isIE10:isIE11||isIE10}function getOffsetParent(element){if(!element)return document.documentElement;for(var noOffsetParent=isIE(10)?document.body:null,
offsetParent=element.offsetParent||null;offsetParent===noOffsetParent&&element.nextElementSibling;)offsetParent=(element=element.nextElementSibling).offsetParent;var nodeName=offsetParent&&offsetParent.nodeName;return nodeName&&"BODY"!==nodeName&&"HTML"!==nodeName?-1!==["TH","TD","TABLE"].indexOf(offsetParent.nodeName)&&"static"===getStyleComputedProperty(offsetParent,"position")?getOffsetParent(offsetParent):offsetParent:element?element.ownerDocument.documentElement:document.documentElement}function getRoot(node){return null!==node.parentNode?getRoot(node.parentNode):node}function findCommonOffsetParent(element1,element2){if(!(
element1&&element1.nodeType&&element2&&element2.nodeType))return document.documentElement;var order=element1.compareDocumentPosition(element2)&Node.DOCUMENT_POSITION_FOLLOWING,start=order?element1:element2,end=order?element2:element1,range=document.createRange();range.setStart(start,0),range.setEnd(end,0);var element,nodeName,commonAncestorContainer=range.commonAncestorContainer;if(element1!==commonAncestorContainer&&element2!==commonAncestorContainer||start.contains(end))return"BODY"===(nodeName=(element=commonAncestorContainer).nodeName)||"HTML"!==nodeName&&getOffsetParent(element.firstElementChild)!==element?getOffsetParent(commonAncestorContainer
):commonAncestorContainer;var element1root=getRoot(element1);return element1root.host?findCommonOffsetParent(element1root.host,element2):findCommonOffsetParent(element1,getRoot(element2).host)}function getScroll(element){var upperSide="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",nodeName=element.nodeName;if("BODY"!==nodeName&&"HTML"!==nodeName)return element[upperSide];var html=element.ownerDocument.documentElement;return(element.ownerDocument.scrollingElement||html)[upperSide]}function getBordersSize(styles,axis){var sideA="x"===axis?"Left":"Top",sideB="Left"===sideA?"Right":"Bottom";return parseFloat(
styles["border"+sideA+"Width"],10)+parseFloat(styles["border"+sideB+"Width"],10)}function getSize(axis,body,html,computedStyle){return Math.max(body["offset"+axis],body["scroll"+axis],html["client"+axis],html["offset"+axis],html["scroll"+axis],isIE(10)?parseInt(html["offset"+axis])+parseInt(computedStyle["margin"+("Height"===axis?"Top":"Left")])+parseInt(computedStyle["margin"+("Height"===axis?"Bottom":"Right")]):0)}function getWindowSizes(document){var body=document.body,html=document.documentElement,computedStyle=isIE(10)&&getComputedStyle(html);return{height:getSize("Height",body,html,computedStyle),width:getSize("Width",body,html,computedStyle)}}
var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),defineProperty=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj},
_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function getClientRect(offsets){return _extends({},offsets,{right:offsets.left+offsets.width,bottom:offsets.top+offsets.height})}function getBoundingClientRect(element){var rect={};try{if(isIE(10)){rect=element.getBoundingClientRect();var scrollTop=getScroll(element,"top"),scrollLeft=getScroll(element,"left");rect.top+=scrollTop,rect.left+=scrollLeft,rect.bottom+=scrollTop,rect.right+=scrollLeft}else rect=element.getBoundingClientRect()}catch(e){}
var result={left:rect.left,top:rect.top,width:rect.right-rect.left,height:rect.bottom-rect.top},sizes="HTML"===element.nodeName?getWindowSizes(element.ownerDocument):{},width=sizes.width||element.clientWidth||result.right-result.left,height=sizes.height||element.clientHeight||result.bottom-result.top,horizScrollbar=element.offsetWidth-width,vertScrollbar=element.offsetHeight-height;if(horizScrollbar||vertScrollbar){var styles=getStyleComputedProperty(element);horizScrollbar-=getBordersSize(styles,"x"),vertScrollbar-=getBordersSize(styles,"y"),result.width-=horizScrollbar,result.height-=vertScrollbar}return getClientRect(result)}
function getOffsetRectRelativeToArbitraryNode(children,parent){var fixedPosition=2<arguments.length&&void 0!==arguments[2]&&arguments[2],isIE10=isIE(10),isHTML="HTML"===parent.nodeName,childrenRect=getBoundingClientRect(children),parentRect=getBoundingClientRect(parent),scrollParent=getScrollParent(children),styles=getStyleComputedProperty(parent),borderTopWidth=parseFloat(styles.borderTopWidth,10),borderLeftWidth=parseFloat(styles.borderLeftWidth,10);fixedPosition&&isHTML&&(parentRect.top=Math.max(parentRect.top,0),parentRect.left=Math.max(parentRect.left,0));var offsets=getClientRect({top:childrenRect.top-parentRect.top-borderTopWidth,
left:childrenRect.left-parentRect.left-borderLeftWidth,width:childrenRect.width,height:childrenRect.height});if(offsets.marginTop=0,offsets.marginLeft=0,!isIE10&&isHTML){var marginTop=parseFloat(styles.marginTop,10),marginLeft=parseFloat(styles.marginLeft,10);offsets.top-=borderTopWidth-marginTop,offsets.bottom-=borderTopWidth-marginTop,offsets.left-=borderLeftWidth-marginLeft,offsets.right-=borderLeftWidth-marginLeft,offsets.marginTop=marginTop,offsets.marginLeft=marginLeft}return(isIE10&&!fixedPosition?parent.contains(scrollParent):parent===scrollParent&&"BODY"!==scrollParent.nodeName)&&(offsets=function(rect,element){
var subtract=2<arguments.length&&void 0!==arguments[2]&&arguments[2],scrollTop=getScroll(element,"top"),scrollLeft=getScroll(element,"left"),modifier=subtract?-1:1;return rect.top+=scrollTop*modifier,rect.bottom+=scrollTop*modifier,rect.left+=scrollLeft*modifier,rect.right+=scrollLeft*modifier,rect}(offsets,parent)),offsets}function getFixedPositionOffsetParent(element){if(!element||!element.parentElement||isIE())return document.documentElement;for(var el=element.parentElement;el&&"none"===getStyleComputedProperty(el,"transform");)el=el.parentElement;return el||document.documentElement}function getBoundaries(popper,reference,padding,boundariesElement){
var fixedPosition=4<arguments.length&&void 0!==arguments[4]&&arguments[4],boundaries={top:0,left:0},offsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,reference);if("viewport"===boundariesElement)boundaries=function(element){var excludeScroll=1<arguments.length&&void 0!==arguments[1]&&arguments[1],html=element.ownerDocument.documentElement,relativeOffset=getOffsetRectRelativeToArbitraryNode(element,html),width=Math.max(html.clientWidth,window.innerWidth||0),height=Math.max(html.clientHeight,window.innerHeight||0),scrollTop=excludeScroll?0:getScroll(html),scrollLeft=excludeScroll?0:getScroll(html,"left")
;return getClientRect({top:scrollTop-relativeOffset.top+relativeOffset.marginTop,left:scrollLeft-relativeOffset.left+relativeOffset.marginLeft,width:width,height:height})}(offsetParent,fixedPosition);else{var boundariesNode=void 0;"scrollParent"===boundariesElement?"BODY"===(boundariesNode=getScrollParent(getParentNode(reference))).nodeName&&(boundariesNode=popper.ownerDocument.documentElement):boundariesNode="window"===boundariesElement?popper.ownerDocument.documentElement:boundariesElement;var offsets=getOffsetRectRelativeToArbitraryNode(boundariesNode,offsetParent,fixedPosition);if("HTML"!==boundariesNode.nodeName||function isFixed(element){
var nodeName=element.nodeName;return"BODY"!==nodeName&&"HTML"!==nodeName&&("fixed"===getStyleComputedProperty(element,"position")||isFixed(getParentNode(element)))}(offsetParent))boundaries=offsets;else{var _getWindowSizes=getWindowSizes(popper.ownerDocument),height=_getWindowSizes.height,width=_getWindowSizes.width;boundaries.top+=offsets.top-offsets.marginTop,boundaries.bottom=height+offsets.top,boundaries.left+=offsets.left-offsets.marginLeft,boundaries.right=width+offsets.left}}var isPaddingNumber="number"==typeof(padding=padding||0);return boundaries.left+=isPaddingNumber?padding:padding.left||0,boundaries.top+=isPaddingNumber?padding:padding.top||0,
boundaries.right-=isPaddingNumber?padding:padding.right||0,boundaries.bottom-=isPaddingNumber?padding:padding.bottom||0,boundaries}function computeAutoPlacement(placement,refRect,popper,reference,boundariesElement){var padding=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===placement.indexOf("auto"))return placement;var boundaries=getBoundaries(popper,reference,padding,boundariesElement),rects={top:{width:boundaries.width,height:refRect.top-boundaries.top},right:{width:boundaries.right-refRect.right,height:boundaries.height},bottom:{width:boundaries.width,height:boundaries.bottom-refRect.bottom},left:{width:refRect.left-boundaries.left,
height:boundaries.height}},sortedAreas=Object.keys(rects).map(function(key){return _extends({key:key},rects[key],{area:(_ref=rects[key],_ref.width*_ref.height)});var _ref}).sort(function(a,b){return b.area-a.area}),filteredAreas=sortedAreas.filter(function(_ref2){var width=_ref2.width,height=_ref2.height;return width>=popper.clientWidth&&height>=popper.clientHeight}),computedPlacement=0<filteredAreas.length?filteredAreas[0].key:sortedAreas[0].key,variation=placement.split("-")[1];return computedPlacement+(variation?"-"+variation:"")}function getReferenceOffsets(state,popper,reference){
var fixedPosition=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return getOffsetRectRelativeToArbitraryNode(reference,fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,reference),fixedPosition)}function getOuterSizes(element){var styles=element.ownerDocument.defaultView.getComputedStyle(element),x=parseFloat(styles.marginTop)+parseFloat(styles.marginBottom),y=parseFloat(styles.marginLeft)+parseFloat(styles.marginRight);return{width:element.offsetWidth+y,height:element.offsetHeight+x}}function getOppositePlacement(placement){var hash={left:"right",right:"left",bottom:"top",top:"bottom"};return placement.replace(
/left|right|bottom|top/g,function(matched){return hash[matched]})}function getPopperOffsets(popper,referenceOffsets,placement){placement=placement.split("-")[0];var popperRect=getOuterSizes(popper),popperOffsets={width:popperRect.width,height:popperRect.height},isHoriz=-1!==["right","left"].indexOf(placement),mainSide=isHoriz?"top":"left",secondarySide=isHoriz?"left":"top",measurement=isHoriz?"height":"width",secondaryMeasurement=isHoriz?"width":"height";return popperOffsets[mainSide]=referenceOffsets[mainSide]+referenceOffsets[measurement]/2-popperRect[measurement]/2,
popperOffsets[secondarySide]=placement===secondarySide?referenceOffsets[secondarySide]-popperRect[secondaryMeasurement]:referenceOffsets[getOppositePlacement(secondarySide)],popperOffsets}function find(arr,check){return Array.prototype.find?arr.find(check):arr.filter(check)[0]}function runModifiers(modifiers,data,ends){return(void 0===ends?modifiers:modifiers.slice(0,function(arr,prop,value){if(Array.prototype.findIndex)return arr.findIndex(function(cur){return cur[prop]===value});var match=find(arr,function(obj){return obj[prop]===value});return arr.indexOf(match)}(modifiers,"name",ends))).forEach(function(modifier){modifier.function&&console.warn(
"`modifier.function` is deprecated, use `modifier.fn`!");var fn=modifier.function||modifier.fn;modifier.enabled&&isFunction(fn)&&(data.offsets.popper=getClientRect(data.offsets.popper),data.offsets.reference=getClientRect(data.offsets.reference),data=fn(data,modifier))}),data}function isModifierEnabled(modifiers,modifierName){return modifiers.some(function(_ref){var name=_ref.name;return _ref.enabled&&name===modifierName})}function getSupportedPropertyName(property){for(var prefixes=[!1,"ms","Webkit","Moz","O"],upperProp=property.charAt(0).toUpperCase()+property.slice(1),i=0;i<prefixes.length;i++){var prefix=prefixes[i],
toCheck=prefix?""+prefix+upperProp:property;if(void 0!==document.body.style[toCheck])return toCheck}return null}function getWindow(element){var ownerDocument=element.ownerDocument;return ownerDocument?ownerDocument.defaultView:window}function setupEventListeners(reference,options,state,updateBound){state.updateBound=updateBound,getWindow(reference).addEventListener("resize",state.updateBound,{passive:!0});var scrollElement=getScrollParent(reference);return function attachToScrollParents(scrollParent,event,callback,scrollParents){var isBody="BODY"===scrollParent.nodeName,target=isBody?scrollParent.ownerDocument.defaultView:scrollParent
;target.addEventListener(event,callback,{passive:!0}),isBody||attachToScrollParents(getScrollParent(target.parentNode),event,callback,scrollParents),scrollParents.push(target)}(scrollElement,"scroll",state.updateBound,state.scrollParents),state.scrollElement=scrollElement,state.eventsEnabled=!0,state}function disableEventListeners(){var reference,state;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(reference=this.reference,state=this.state,getWindow(reference).removeEventListener("resize",state.updateBound),state.scrollParents.forEach(function(target){target.removeEventListener("scroll",state.updateBound)}),
state.updateBound=null,state.scrollParents=[],state.scrollElement=null,state.eventsEnabled=!1,state))}function isNumeric(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(n)}function setStyles(element,styles){Object.keys(styles).forEach(function(prop){var unit="";-1!==["width","height","top","right","bottom","left"].indexOf(prop)&&isNumeric(styles[prop])&&(unit="px"),element.style[prop]=styles[prop]+unit})}function isModifierRequired(modifiers,requestingName,requestedName){var requesting=find(modifiers,function(_ref){return _ref.name===requestingName}),isRequired=!!requesting&&modifiers.some(function(modifier){
return modifier.name===requestedName&&modifier.enabled&&modifier.order<requesting.order});if(!isRequired){var _requesting="`"+requestingName+"`",requested="`"+requestedName+"`";console.warn(requested+" modifier is required by "+_requesting+" modifier in order to work, be sure to include it before "+_requesting+"!")}return isRequired}var placements=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],validPlacements=placements.slice(3);function clockwise(placement){var counter=1<arguments.length&&void 0!==arguments[1]&&arguments[1],
index=validPlacements.indexOf(placement),arr=validPlacements.slice(index+1).concat(validPlacements.slice(0,index));return counter?arr.reverse():arr}var BEHAVIORS_FLIP="flip",BEHAVIORS_CLOCKWISE="clockwise",BEHAVIORS_COUNTERCLOCKWISE="counterclockwise";function parseOffset(offset,popperOffsets,referenceOffsets,basePlacement){var offsets=[0,0],useHeight=-1!==["right","left"].indexOf(basePlacement),fragments=offset.split(/(\+|\-)/).map(function(frag){return frag.trim()}),divider=fragments.indexOf(find(fragments,function(frag){return-1!==frag.search(/,|\s/)}));fragments[divider]&&-1===fragments[divider].indexOf(",")&&console.warn(
"Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var splitRegex=/\s*,\s*|\s+/,ops=-1!==divider?[fragments.slice(0,divider).concat([fragments[divider].split(splitRegex)[0]]),[fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider+1))]:[fragments];return(ops=ops.map(function(op,index){var measurement=(1===index?!useHeight:useHeight)?"height":"width",mergeWithPrevious=!1;return op.reduce(function(a,b){return""===a[a.length-1]&&-1!==["+","-"].indexOf(b)?(a[a.length-1]=b,mergeWithPrevious=!0,a):mergeWithPrevious?(a[a.length-1]+=b,mergeWithPrevious=!1,a):a.concat(b)},[]).map(function(str){return function(str,
measurement,popperOffsets,referenceOffsets){var split=str.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),value=+split[1],unit=split[2];if(!value)return str;if(0!==unit.indexOf("%"))return"vh"!==unit&&"vw"!==unit?value:("vh"===unit?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*value;var element=void 0;switch(unit){case"%p":element=popperOffsets;break;case"%":case"%r":default:element=referenceOffsets}return getClientRect(element)[measurement]/100*value}(str,measurement,popperOffsets,referenceOffsets)})})).forEach(function(op,index){op.forEach(function(frag,index2){isNumeric(
frag)&&(offsets[index]+=frag*("-"===op[index2-1]?-1:1))})}),offsets}var Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(data){var placement=data.placement,basePlacement=placement.split("-")[0],shiftvariation=placement.split("-")[1];if(shiftvariation){var _data$offsets=data.offsets,reference=_data$offsets.reference,popper=_data$offsets.popper,isVertical=-1!==["bottom","top"].indexOf(basePlacement),side=isVertical?"left":"top",measurement=isVertical?"width":"height",shiftOffsets={start:defineProperty({},side,reference[side]),
end:defineProperty({},side,reference[side]+reference[measurement]-popper[measurement])};data.offsets.popper=_extends({},popper,shiftOffsets[shiftvariation])}return data}},offset:{order:200,enabled:!0,fn:function(data,_ref){var offset=_ref.offset,placement=data.placement,_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,basePlacement=placement.split("-")[0],offsets=void 0;return offsets=isNumeric(+offset)?[+offset,0]:parseOffset(offset,popper,reference,basePlacement),"left"===basePlacement?(popper.top+=offsets[0],popper.left-=offsets[1]):"right"===basePlacement?(popper.top+=offsets[0],popper.left+=offsets[1]
):"top"===basePlacement?(popper.left+=offsets[0],popper.top-=offsets[1]):"bottom"===basePlacement&&(popper.left+=offsets[0],popper.top+=offsets[1]),data.popper=popper,data},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(data,options){var boundariesElement=options.boundariesElement||getOffsetParent(data.instance.popper);data.instance.reference===boundariesElement&&(boundariesElement=getOffsetParent(boundariesElement));var transformProp=getSupportedPropertyName("transform"),popperStyles=data.instance.popper.style,top=popperStyles.top,left=popperStyles.left,transform=popperStyles[transformProp];popperStyles.top="",popperStyles.left="",
popperStyles[transformProp]="";var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,boundariesElement,data.positionFixed);popperStyles.top=top,popperStyles.left=left,popperStyles[transformProp]=transform,options.boundaries=boundaries;var order=options.priority,popper=data.offsets.popper,check={primary:function(placement){var value=popper[placement];if("left"===placement){var overlap=boundaries.width-(popper.left+popper.width);if(!options.escapeWithReference&&overlap<0){var padding=options.padding||0;value=boundaries.width-popper.width-padding}}return popper[placement]<boundaries[placement]&&!options.escapeWithReference&&(
value=Math.max(popper[placement],boundaries[placement])),defineProperty({},placement,value)},secondary:function(placement){var mainSide="right"===placement?"left":"top",value=popper[mainSide];return popper[placement]>boundaries[placement]&&!options.escapeWithReference&&(value=Math.min(popper[mainSide],boundaries[placement]-("right"===placement?popper.width:popper.height))),defineProperty({},mainSide,value)}};return order.forEach(function(placement){var side=-1!==["left","top"].indexOf(placement)?"primary":"secondary";popper=_extends({},popper,check[side](placement))}),data.offsets.popper=popper,data},priority:["left","right","top","bottom"],padding:5,
boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(data){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,placement=data.placement.split("-")[0],floor=Math.floor,isVertical=-1!==["top","bottom"].indexOf(placement),side=isVertical?"right":"bottom",opSide=isVertical?"left":"top",measurement=isVertical?"width":"height";return popper[side]<floor(reference[opSide])&&(data.offsets.popper[opSide]=floor(reference[opSide])-popper[measurement]),popper[opSide]>floor(reference[side])&&(data.offsets.popper[opSide]=floor(reference[side])),data}},arrow:{order:500,enabled:!0,fn:function(data,options){
var _data$offsets$arrow;if(!isModifierRequired(data.instance.modifiers,"arrow","keepTogether"))return data;var arrowElement=options.element;if("string"==typeof arrowElement){if(!(arrowElement=data.instance.popper.querySelector(arrowElement)))return data}else if(!data.instance.popper.contains(arrowElement))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),data;var placement=data.placement.split("-")[0],_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,isVertical=-1!==["left","right"].indexOf(placement),len=isVertical?"height":"width",sideCapitalized=isVertical?"Top":"Left",
side=sideCapitalized.toLowerCase(),altSide=isVertical?"left":"top",opSide=isVertical?"bottom":"right",arrowElementSize=getOuterSizes(arrowElement)[len];if(reference[opSide]-arrowElementSize<popper[side]&&(data.offsets.popper[side]-=popper[side]-(reference[opSide]-arrowElementSize)),reference[side]+arrowElementSize>popper[opSide]){var clientWidth=Math.max(document.documentElement.clientWidth,document.documentElement.innerWidth||0);clientWidth<popper[opSide]+arrowElementSize&&!isVertical?(data.offsets.popper[opSide]=clientWidth-2,data.offsets.popper[side]=data.offsets.popper[opSide]-data.popper.width
):data.offsets.popper[side]+=reference[side]+arrowElementSize-popper[opSide]}data.offsets.popper=getClientRect(data.offsets.popper);var center=reference[side]+reference[len]/2-arrowElementSize/2,css=getStyleComputedProperty(data.instance.popper),popperMarginSide=parseFloat(css["margin"+sideCapitalized],10),popperBorderSide=parseFloat(css["border"+sideCapitalized+"Width"],10),sideValue=center-data.offsets.popper[side]-popperMarginSide-popperBorderSide;return sideValue=Math.max(Math.min(popper[len]-arrowElementSize,sideValue),0),data.arrowElement=arrowElement,data.offsets.arrow=(defineProperty(_data$offsets$arrow={},side,Math.round(sideValue)),defineProperty(
_data$offsets$arrow,altSide,""),_data$offsets$arrow),data},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(data,options){if(isModifierEnabled(data.instance.modifiers,"inner"))return data;if(data.flipped&&data.placement===data.originalPlacement)return data;var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,options.boundariesElement,data.positionFixed),placement=data.placement.split("-")[0],placementOpposite=getOppositePlacement(placement),variation=data.placement.split("-")[1]||"",flipOrder=[];switch(options.behavior){case BEHAVIORS_FLIP:flipOrder=[placement,placementOpposite];break;case BEHAVIORS_CLOCKWISE:
flipOrder=clockwise(placement);break;case BEHAVIORS_COUNTERCLOCKWISE:flipOrder=clockwise(placement,!0);break;default:flipOrder=options.behavior}return flipOrder.forEach(function(step,index){if(placement!==step||flipOrder.length===index+1)return data;placement=data.placement.split("-")[0],placementOpposite=getOppositePlacement(placement);var popperOffsets=data.offsets.popper,refOffsets=data.offsets.reference,floor=Math.floor,overlapsRef="left"===placement&&floor(popperOffsets.right)>floor(refOffsets.left)||"right"===placement&&floor(popperOffsets.left)<floor(refOffsets.right)||"top"===placement&&floor(popperOffsets.bottom)>floor(refOffsets.top
)||"bottom"===placement&&floor(popperOffsets.top)<floor(refOffsets.bottom),overflowsLeft=floor(popperOffsets.left)<floor(boundaries.left),overflowsRight=floor(popperOffsets.right)>floor(boundaries.right),overflowsTop=floor(popperOffsets.top)<floor(boundaries.top),overflowsBottom=floor(popperOffsets.bottom)>floor(boundaries.bottom),overflowsBoundaries="left"===placement&&overflowsLeft||"right"===placement&&overflowsRight||"top"===placement&&overflowsTop||"bottom"===placement&&overflowsBottom,isVertical=-1!==["top","bottom"].indexOf(placement),flippedVariation=!!options.flipVariations&&(
isVertical&&"start"===variation&&overflowsLeft||isVertical&&"end"===variation&&overflowsRight||!isVertical&&"start"===variation&&overflowsTop||!isVertical&&"end"===variation&&overflowsBottom);(overlapsRef||overflowsBoundaries||flippedVariation)&&(data.flipped=!0,(overlapsRef||overflowsBoundaries)&&(placement=flipOrder[index+1]),flippedVariation&&(variation=function(variation){return"end"===variation?"start":"start"===variation?"end":variation}(variation)),data.placement=placement+(variation?"-"+variation:""),data.offsets.popper=_extends({},data.offsets.popper,getPopperOffsets(data.instance.popper,data.offsets.reference,data.placement)),data=runModifiers(
data.instance.modifiers,data,"flip"))}),data},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(data){var placement=data.placement,basePlacement=placement.split("-")[0],_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference,isHoriz=-1!==["left","right"].indexOf(basePlacement),subtractLength=-1===["top","left"].indexOf(basePlacement);return popper[isHoriz?"left":"top"]=reference[basePlacement]-(subtractLength?popper[isHoriz?"width":"height"]:0),data.placement=getOppositePlacement(placement),data.offsets.popper=getClientRect(popper),data}},hide:{order:800,enabled:!0,fn:function(
data){if(!isModifierRequired(data.instance.modifiers,"hide","preventOverflow"))return data;var refRect=data.offsets.reference,bound=find(data.instance.modifiers,function(modifier){return"preventOverflow"===modifier.name}).boundaries;if(refRect.bottom<bound.top||refRect.left>bound.right||refRect.top>bound.bottom||refRect.right<bound.left){if(!0===data.hide)return data;data.hide=!0,data.attributes["x-out-of-boundaries"]=""}else{if(!1===data.hide)return data;data.hide=!1,data.attributes["x-out-of-boundaries"]=!1}return data}},computeStyle:{order:850,enabled:!0,fn:function(data,options){var x=options.x,y=options.y,popper=data.offsets.popper,
legacyGpuAccelerationOption=find(data.instance.modifiers,function(modifier){return"applyStyle"===modifier.name}).gpuAcceleration;void 0!==legacyGpuAccelerationOption&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var gpuAcceleration=void 0!==legacyGpuAccelerationOption?legacyGpuAccelerationOption:options.gpuAcceleration,offsetParent=getOffsetParent(data.instance.popper),offsetParentRect=getBoundingClientRect(offsetParent),styles={position:popper.position},offsets={left:Math.floor(popper.left),top:Math.round(popper.top),bottom:Math.round(popper.bottom),
right:Math.floor(popper.right)},sideA="bottom"===x?"top":"bottom",sideB="right"===y?"left":"right",prefixedProperty=getSupportedPropertyName("transform"),left=void 0,top=void 0;if(top="bottom"===sideA?"HTML"===offsetParent.nodeName?-offsetParent.clientHeight+offsets.bottom:-offsetParentRect.height+offsets.bottom:offsets.top,left="right"===sideB?"HTML"===offsetParent.nodeName?-offsetParent.clientWidth+offsets.right:-offsetParentRect.width+offsets.right:offsets.left,gpuAcceleration&&prefixedProperty)styles[prefixedProperty]="translate3d("+left+"px, "+top+"px, 0)",styles[sideA]=0,styles[sideB]=0,styles.willChange="transform";else{
var invertTop="bottom"===sideA?-1:1,invertLeft="right"===sideB?-1:1;styles[sideA]=top*invertTop,styles[sideB]=left*invertLeft,styles.willChange=sideA+", "+sideB}var attributes={"x-placement":data.placement};return data.attributes=_extends({},attributes,data.attributes),data.styles=_extends({},styles,data.styles),data.arrowStyles=_extends({},data.offsets.arrow,data.arrowStyles),data},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(data){var element,attributes;return setStyles(data.instance.popper,data.styles),element=data.instance.popper,attributes=data.attributes,Object.keys(attributes).forEach(function(prop){
!1!==attributes[prop]?element.setAttribute(prop,attributes[prop]):element.removeAttribute(prop)}),data.arrowElement&&Object.keys(data.arrowStyles).length&&setStyles(data.arrowElement,data.arrowStyles),data},onLoad:function(reference,popper,options,modifierOptions,state){var referenceOffsets=getReferenceOffsets(state,popper,reference,options.positionFixed),placement=computeAutoPlacement(options.placement,referenceOffsets,popper,reference,options.modifiers.flip.boundariesElement,options.modifiers.flip.padding);return popper.setAttribute("x-placement",placement),setStyles(popper,{position:options.positionFixed?"fixed":"absolute"}),options},
gpuAcceleration:void 0}}},Popper=function(){function Popper(reference,popper){var _this=this,options=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Popper),this.scheduleUpdate=function(){return requestAnimationFrame(_this.update)},this.update=debounce(this.update.bind(this)),this.options=_extends({},Popper.Defaults,options),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=reference&&reference.jquery?reference[0]:reference,this.popper=popper&&popper.jquery?popper[0]:popper,
this.options.modifiers={},Object.keys(_extends({},Popper.Defaults.modifiers,options.modifiers)).forEach(function(name){_this.options.modifiers[name]=_extends({},Popper.Defaults.modifiers[name]||{},options.modifiers?options.modifiers[name]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(name){return _extends({name:name},_this.options.modifiers[name])}).sort(function(a,b){return a.order-b.order}),this.modifiers.forEach(function(modifierOptions){modifierOptions.enabled&&isFunction(modifierOptions.onLoad)&&modifierOptions.onLoad(_this.reference,_this.popper,_this.options,modifierOptions,_this.state)}),this.update()
;var eventsEnabled=this.options.eventsEnabled;eventsEnabled&&this.enableEventListeners(),this.state.eventsEnabled=eventsEnabled}return createClass(Popper,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var data={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};data.offsets.reference=getReferenceOffsets(this.state,this.popper,this.reference,this.options.positionFixed),data.placement=computeAutoPlacement(this.options.placement,data.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),data.originalPlacement=data.placement,
data.positionFixed=this.options.positionFixed,data.offsets.popper=getPopperOffsets(this.popper,data.offsets.reference,data.placement),data.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",data=runModifiers(this.modifiers,data),this.state.isCreated?this.options.onUpdate(data):(this.state.isCreated=!0,this.options.onCreate(data))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,isModifierEnabled(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",
this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[getSupportedPropertyName("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=setupEventListeners(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return disableEventListeners.call(this)}}]),Popper}();return Popper.Utils=("undefined"!=typeof window?window:global).PopperUtils,Popper.placements=placements,
Popper.Defaults=Defaults,Popper}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(require("./popper")):"function"==typeof define&&define.amd?define("lib/popper/tooltip",["./popper"],factory):global.Tooltip=factory(global.Popper)}(this,function(Popper){"use strict";Popper=Popper&&Popper.hasOwnProperty("default")?Popper.default:Popper;var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,
descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DEFAULT_OPTIONS={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0,
arrowSelector:".tooltip-arrow, .tooltip__arrow",innerSelector:".tooltip-inner, .tooltip__inner"},Tooltip=function(){function Tooltip(reference,options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Tooltip),_initialiseProps.call(this),options=_extends({},DEFAULT_OPTIONS,options),reference.jquery&&(reference=reference[0]),this.reference=reference;var events="string"==typeof(this.options=options).trigger?options.trigger.split(" ").filter(function(trigger){return-1!==["click","hover","focus"].indexOf(trigger)}):[];this._isOpen=!1,this._popperOptions={},
this._setEventListeners(reference,events,options)}return createClass(Tooltip,[{key:"_create",value:function(reference,template,title,allowHtml){var tooltipGenerator=window.document.createElement("div");tooltipGenerator.innerHTML=template.trim();var tooltipNode=tooltipGenerator.childNodes[0];tooltipNode.id="tooltip_"+Math.random().toString(36).substr(2,10),tooltipNode.setAttribute("aria-hidden","false");var titleNode=tooltipGenerator.querySelector(this.options.innerSelector);return this._addTitleContent(reference,title,allowHtml,titleNode),tooltipNode}},{key:"_addTitleContent",value:function(reference,title,allowHtml,titleNode){if(
1===title.nodeType||11===title.nodeType)allowHtml&&titleNode.appendChild(title);else if((functionToCheck=title)&&"[object Function]"==={}.toString.call(functionToCheck)){var titleText=title.call(reference);allowHtml?titleNode.innerHTML=titleText:titleNode.textContent=titleText}else allowHtml?titleNode.innerHTML=title:titleNode.textContent=title;var functionToCheck}},{key:"_show",value:function(reference,options){if(this._isOpen&&!this._isOpening)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.visibility="visible",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.update(),this
;var title=reference.getAttribute("title")||options.title;if(!title)return this;var tooltipNode=this._create(reference,options.template,title,options.html);reference.setAttribute("aria-describedby",tooltipNode.id);var container=this._findContainer(options.container,reference);return this._append(tooltipNode,container),this._popperOptions=_extends({},options.popperOptions,{placement:options.placement}),this._popperOptions.modifiers=_extends({},this._popperOptions.modifiers,{arrow:{element:this.options.arrowSelector},offset:{offset:options.offset}}),options.boundariesElement&&(this._popperOptions.modifiers.preventOverflow={
boundariesElement:options.boundariesElement}),this.popperInstance=new Popper(reference,tooltipNode,this._popperOptions),this._tooltipNode=tooltipNode,this}},{key:"_hide",value:function(){return this._isOpen&&(this._isOpen=!1,this._tooltipNode.style.visibility="hidden",this._tooltipNode.setAttribute("aria-hidden","true")),this}},{key:"_dispose",value:function(){var _this=this;return this._events.forEach(function(_ref){var func=_ref.func,event=_ref.event;_this.reference.removeEventListener(event,func)}),this._events=[],this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||(
this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null)),this}},{key:"_findContainer",value:function(container,reference){return"string"==typeof container?container=window.document.querySelector(container):!1===container&&(container=reference.parentNode),container}},{key:"_append",value:function(tooltipNode,container){var _this2=this;container.appendChild(tooltipNode),setTimeout(function(){_this2._isOpen&&_this2.hide(),_this2.show()})}},{key:"_setEventListeners",value:function(reference,events,options){var _this3=this,directEvents=[],oppositeEvents=[];events.forEach(function(event){switch(event){case"hover":directEvents.push(
"mouseenter"),oppositeEvents.push("mouseleave");break;case"focus":directEvents.push("focus"),oppositeEvents.push("blur");break;case"click":directEvents.push("click"),oppositeEvents.push("click")}}),directEvents.forEach(function(event){var func=function(evt){!0!==_this3._isOpening&&(evt.usedByTooltip=!0,_this3._scheduleShow(reference,options.delay,options,evt))};_this3._events.push({event:event,func:func}),reference.addEventListener(event,func)}),oppositeEvents.forEach(function(event){var func=function(evt){!0!==evt.usedByTooltip&&_this3._scheduleHide(reference,options.delay,options,evt)};_this3._events.push({event:event,func:func}),
reference.addEventListener(event,func),"click"===event&&options.closeOnClickOutside&&document.addEventListener("mousedown",function(e){if(_this3._isOpening){var popper=_this3.popperInstance.popper;reference.contains(e.target)||popper.contains(e.target)||func(e)}},!0)})}},{key:"_scheduleShow",value:function(reference,delay,options){var _this4=this;this._isOpening=!0;var computedDelay=delay&&delay.show||delay||0;this._showTimeout=window.setTimeout(function(){return _this4._show(reference,options)},computedDelay)}},{key:"_scheduleHide",value:function(reference,delay,options,evt){var _this5=this;this._isOpening=!1;var computedDelay=delay&&delay.hide||delay||0
;window.setTimeout(function(){if(window.clearTimeout(_this5._showTimeout),!1!==_this5._isOpen&&document.body.contains(_this5._tooltipNode)){if("mouseleave"===evt.type)if(_this5._setTooltipNodeEvent(evt,reference,delay,options))return;_this5._hide(reference,options)}},computedDelay)}},{key:"_updateTitleContent",value:function(title){if(void 0!==this._tooltipNode){var titleNode=this._tooltipNode.querySelector(this.options.innerSelector);this._clearTitleContent(titleNode,this.options.html,this.reference.getAttribute("title")||this.options.title),this._addTitleContent(this.reference,title,this.options.html,titleNode),this.options.title=title,
this.popperInstance.update()}else void 0!==this.options.title&&(this.options.title=title)}},{key:"_clearTitleContent",value:function(titleNode,allowHtml,lastTitle){1===lastTitle.nodeType||11===lastTitle.nodeType?allowHtml&&titleNode.removeChild(lastTitle):allowHtml?titleNode.innerHTML="":titleNode.textContent=""}}]),Tooltip}(),_initialiseProps=function(){var _this6=this;this.show=function(){return _this6._show(_this6.reference,_this6.options)},this.hide=function(){return _this6._hide()},this.dispose=function(){return _this6._dispose()},this.toggle=function(){return _this6._isOpen?_this6.hide():_this6.show()},this.updateTitleContent=function(title){
return _this6._updateTitleContent(title)},this._events=[],this._setTooltipNodeEvent=function(evt,reference,delay,options){var relatedreference=evt.relatedreference||evt.toElement||evt.relatedTarget;return!!_this6._tooltipNode.contains(relatedreference)&&(_this6._tooltipNode.addEventListener(evt.type,function callback(evt2){var relatedreference2=evt2.relatedreference||evt2.toElement||evt2.relatedTarget;_this6._tooltipNode.removeEventListener(evt.type,callback),reference.contains(relatedreference2)||_this6._scheduleHide(reference,options.delay,options,evt2)}),!0)}};return Tooltip}),define("tpl!ui/tooltip/default",["handlebars"],function(hb){return hb.template(
function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="tooltip ',buffer+=(0,this.escapeExpression)((helper=helpers.class)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.class)?helper.call(depth0,{hash:{},data:data}):helper)+'" role="tooltip">\n    <div class="tooltip-arrow"></div>\n    <div class="tooltip-inner tooltip-body"></div>\n</div>'})}),function(root,factory){"function"==typeof define&&define.amd?define("lib/polyfill/svg4everybody/svg4everybody",[],function(){
return root.svg4everybody=factory()}):"object"==typeof exports?module.exports=factory():root.svg4everybody=factory()}(this,function(){function embed(svg,target){if(target){var fragment=document.createDocumentFragment(),viewBox=!svg.getAttribute("viewBox")&&target.getAttribute("viewBox");viewBox&&svg.setAttribute("viewBox",viewBox);for(var clone=target.cloneNode(!0);clone.childNodes.length;)fragment.appendChild(clone.firstChild);var group=document.createElementNS("http://www.w3.org/2000/svg","g");group.setAttribute("class","use"),group.appendChild(fragment),svg.appendChild(group)}}function loadreadystatechange(xhr){xhr.onreadystatechange=function(){if(
4===xhr.readyState){var cachedDocument=xhr._cachedDocument;cachedDocument||((cachedDocument=xhr._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=xhr.responseText,xhr._cachedTarget={}),xhr._embeds.splice(0).map(function(item){var target=xhr._cachedTarget[item.id];target||(target=xhr._cachedTarget[item.id]=cachedDocument.getElementById(item.id)),embed(item.svg,target)})}},xhr.onreadystatechange()}return function(rawopts){var polyfill,opts=Object(rawopts);polyfill="polyfill"in opts?opts.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(
navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537;var requests={},requestAnimationFrame=window.requestAnimationFrame||setTimeout,uses=document.getElementsByTagName("use");polyfill&&function oninterval(){for(var index=0;index<uses.length;){var use=uses[index],svg=use.parentNode;if(svg&&/svg/i.test(svg.nodeName)){var src=use.getAttribute("xlink:href");if(polyfill&&(!opts.validate||opts.validate(src,svg,use))){svg.removeChild(use);var srcSplit=src.split("#"),url=srcSplit.shift(),id=srcSplit.join("#");if(url.length){var xhr=requests[url];xhr||((xhr=requests[url]=new XMLHttpRequest).open("GET",url),xhr.send(),xhr._embeds=[]),xhr._embeds.push({
svg:svg,id:id}),loadreadystatechange(xhr)}else embed(svg,document.getElementById(id))}}else++index}requestAnimationFrame(oninterval,67)}()}}),define("ui",["ui/toggler","ui/disabler","ui/adder","ui/deleter","ui/incrementer","ui/inplacer","ui/btngrouper","ui/durationer","ui/selecter","ui/modal","ui/tooltip","ui/form","ui/validator","ui/groupvalidator"],function(toggler,disabler,adder,deleter,incrementer,inplacer,btngrouper,durationer,selecter,modal,tooltip,form){"use strict";return{startEventComponents:function($container){adder($container),btngrouper($container),deleter($container),disabler($container),toggler($container),inplacer($container),modal($container
),form($container),this.startDomComponent($container)},startDomComponent:function($container){incrementer($container),durationer($container),selecter($container),(/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537)&&require(["lib/polyfill/svg4everybody/svg4everybody"],function(svg4everybody){svg4everybody()}),tooltip.lookup($container)}}}),define("controller/backoffice",["jquery","lodash","i18n","context","helpers","core/router","ui","core/history","ui/feedback","layout/logout-event"],function($,_,__,context,
helpers,router,ui,history,feedback,logoutEvent){"use strict";return{start:function(){var $doc=$(document),$container=$("body > .content-wrap");history.fixBrokenBrowsers(),$doc.ajaxComplete(function(event,request,settings){var urls,forward;_.contains(settings.dataTypes,"html")&&(urls=[settings.url],(forward=request.getResponseHeader("X-Tao-Forward"))&&urls.push(forward),router.dispatch(urls,function(){ui.startDomComponent($container)}))}),router.dispatchUrl(helpers._url(context.action,context.module,context.extension)),$doc.ajaxError(function(event,request,settings){var ajaxResponse,errorMessage=__("Unknown Error");if(
404!==request.status||"HEAD"!==settings.type){if(404===request.status||500===request.status)try{errorMessage=null!==(ajaxResponse=$.parseJSON(request.responseText))&&void 0!==ajaxResponse.success&&void 0!==ajaxResponse.type&&void 0!==ajaxResponse.message&&void 0!==ajaxResponse.data?request.status+": "+ajaxResponse.message:request.status+": "+request.responseText}catch(err){errorMessage=request.status+": "+request.responseText}403===request.status?logoutEvent():feedback().error(errorMessage)}}),ui.startEventComponents($container)}}}),define("controller/entry",["jquery","lodash","i18n","ui/feedback"],function($,_,__,feedback){"use strict";return{
start:function(){var errorMessage=$("#entry-point-box").data("errormessage");errorMessage&&feedback().error(errorMessage)}}}),define("lock",["jquery","helpers"],function($,helpers){function Lock(resourceUri){this.uri=resourceUri}return Lock.prototype.release=function(cb,err){var releaseUrl=helpers._url("release","Lock","tao"),options={data:{uri:this.uri},type:"POST",dataType:"json"};$.ajax(releaseUrl,options).success(cb).fail(err)},Lock}),define("layout/generisRouter",["jquery","lodash","core/eventifier","util/url"],function($,_,eventifier,urlUtil){"use strict";var topState,generisRouter=eventifier({pushSectionState:function(baseUrl,sectionId,restoreWith){
var stateUrl,parsedUrl=urlUtil.parse(baseUrl),currentQuery=_.mapValues(parsedUrl.query,function(value,key){return"uri"===key?decodeURIComponent(value):value}),newQuery=_.clone(currentQuery),baseUrlHasSection=currentQuery.section,newState={sectionId:sectionId,restoreWith:restoreWith||"activate",nodeUri:currentQuery.uri};baseUrlHasSection?sectionId!==currentQuery.section&&(newQuery.section=sectionId,delete newQuery.uri,delete newState.nodeUri):newQuery.section=sectionId,sectionId&&!_.isEqual(currentQuery,newQuery)&&(stateUrl=urlUtil.build(parsedUrl.path,newQuery),baseUrlHasSection?(window.history.pushState(newState,null,stateUrl),this.trigger(
"pushsectionstate",stateUrl)):(window.history.replaceState(newState,null,stateUrl),this.trigger("replacesectionstate",stateUrl)),topState=newState)},pushNodeState:function(baseUrl,nodeUri){var stateUrl,parsedUrl=urlUtil.parse(baseUrl),currentQuery=_.mapValues(parsedUrl.query,function(value,key){return"uri"===key?decodeURIComponent(value):value}),newQuery=_.clone(currentQuery),baseUrlHasUri=currentQuery.uri,currentState=window.history.state||{},newState={sectionId:currentState.sectionId||currentQuery.section||"",restoreWith:currentState.restoreWith||"activate",nodeUri:nodeUri};nodeUri!==currentQuery.uri&&(newQuery.uri=nodeUri),nodeUri&&!_.isEqual(currentQuery
,newQuery)&&(stateUrl=urlUtil.build(parsedUrl.path,newQuery),baseUrlHasUri?(window.history.pushState(newState,null,stateUrl),this.trigger("pushnodestate",stateUrl)):(window.history.replaceState(newState,null,stateUrl),this.trigger("replacenodestate",stateUrl)),topState=newState)},restoreState:function(fromPopState){var state=window.history.state||{};this.hasRestorableState()&&(fromPopState?(topState=topState||{}).sectionId!==state.sectionId?this.trigger("section"+state.restoreWith,state.sectionId):state.nodeUri&&this.trigger("urichange",state.nodeUri,state.sectionId):this.trigger("section"+state.restoreWith,state.sectionId),topState=state)},
hasRestorableState:function(){var state=window.history.state;return state&&state.restoreWith&&state.sectionId},init:function(){$(window).on("popstate.generisRouter",function(){generisRouter.restoreState(!0)})},destroy:function(){$(window).off(".generisRouter")}});return generisRouter}),define("layout/section",["jquery","lodash","context","util/url","layout/generisRouter"],function($,_,context,url,generisRouter){"use strict";return{scope:$(".section-container"),sections:{},selected:null,init:function($scope,options){var $openersContainer,self=this,restore=!0,parsedUrl=url.parse(location.href),defaultSection=parsedUrl.query.section,
defaultUri=decodeURIComponent(parsedUrl.query.uri);if(this.options=options||{},this.scope=$scope||this.scope||$(".section-container"),$openersContainer=$(".tab-container",this.scope),this.selected=null,$("li",$openersContainer).each(function(index){var $sectionOpener=$(this),$link=$sectionOpener.children("a"),id=$link.attr("href").replace("#panel-",""),$panel=$("#panel-"+id),isActive=defaultSection?defaultSection===id:0===index;$panel.removeClass("hidden"),self.sections[id]={id:id,url:$link.data("url"),name:$link.text(),panel:$panel,opener:$sectionOpener,type:$panel.find(".section-trees").children().length?"tree":"content",active:isActive,activated:!1,
disabled:$sectionOpener.hasClass("disabled"),defaultUri:isActive&&defaultUri?defaultUri:""}}),0===_(this.sections).where({active:!0}).size())for(var id in this.sections){restore=!(this.sections[id].active=!0);break}if(this._bindOpener($openersContainer),this.scope.trigger("init.section"),generisRouter.off(".sectionManager").on("sectionactivate.sectionManager",function(sectionId){self.get(sectionId)._activate()}).on("sectionshow.sectionManager",function(sectionId){self.get(sectionId)._show()}),!1===this.options.history||!restore||!generisRouter.hasRestorableState())return this.activate();generisRouter.restoreState()},_bindOpener:function($openersContainer){
var self=this;return $openersContainer.off("click.section","li").on("click.section","li",function(e){e.preventDefault();var id=$(this).children("a").attr("href").replace("#panel-","");self.sections[id].disabled||self.get(id).activate()}),$("li:not(.hidden)",$openersContainer).length<2?$openersContainer.hide():$openersContainer.show(),this},activate:function(){return this.selected||this.current(),!1!==this.options.history&&generisRouter.pushSectionState(location.href,this.selected.id,"activate"),this._activate()},_activate:function(){return this._show(),!1===this.selected.activated&&(this.selected.activated=!0,this.scope.trigger("activate.section",[
this.selected])),this},show:function(){return this.selected||this.current(),!1!==this.options.history&&generisRouter.pushSectionState(location.href,this.selected.id,"show"),this._show()},_show:function(){var self=this,active=_(this.sections).where({active:!0}).first();return this.selected&&this.selected.id!==active.id?(_.forEach(this.sections,function(section){section.active=!1}),this.sections[this.selected.id].active=!0):this.current(),_.where(this.sections,{active:!1}).forEach(function(section){section.opener.removeClass("active"),section.panel.hide(),self.scope.trigger("hide.section",[section])}),_.where(this.sections,{active:!0}).forEach(function(section
){section.opener.addClass("active"),section.panel.show(),self.scope.trigger("show.section",[section])}),this},refresh:function(){return this.sections={},this.init()},enable:function(){return this.selected||this.current(),!0===this.selected.disabled&&(this.selected.disabled=!1,this.selected.opener.removeClass("disabled"),this.scope.trigger("enable.section",[this.selected])),this},disable:function(){return this.selected||this.current(),!1===this.selected.disabled&&(this.selected.disabled=!0,this.selected.opener.addClass("disabled"),this.scope.trigger("disable.section",[this.selected])),this},current:function(){return this.selected=_(this.sections).where({
active:!0}).first(),this},create:function(data){var $sectionOpener,$sectionPanel,section,$openersContainer=this.scope.find(".tab-container");if(!_.isObject(data))throw new TypeError("The create() method requires an object with section data as parameter.");if(!_.isString(data.id)||!_.isString(data.url)||!_.isString(data.name))throw new TypeError("The create() method requires data with id, url and name to create a new section.");return void 0===data.visible&&(data.visible=!0),this.get(data.id),(section=this.selected&&this.selected.id===data.id?this.selected:void 0)||($sectionPanel=$('<div id="panel-'+data.id+'" class="clear"></div>'),
!0===data.contentBlock&&$sectionPanel.append('<section class="content-container"><ul class="plain action-bar content-action-bar horizontal-action-bar"></ul><div class="content-block"></div></section>'),$sectionOpener=$('<li class="small '+(data.visible?"":"hidden")+'"><a title="'+data.name+'" data-url="'+data.url+'" href="#panel-'+data.id+'">'+data.name+"</a></li>"),$openersContainer.append($sectionOpener),this.scope.append($sectionPanel),section={id:data.id,url:data.url,name:data.name,panel:$sectionPanel,opener:$sectionOpener,type:"content",active:!1},this.sections[data.id]=section),section.url=section.url===data.url||void 0===data.url?section.url:data.url,
this.selected=section,data.content?!0===data.contentBlock?this.updateContentBlock(data.content):section.panel.html(data.content):!0===data.contentBlock?this.loadContentBlock():this.load(),this._bindOpener($openersContainer),this},get:function(value){var section;if(!_.isString(value))throw new TypeError("The get() method requires a string parameter, the section id or url.");return(section=this.sections[value]||this.sections[value.replace("panel-","")]||_(this.sections).where({url:value}).first()||_(this.sections).where({url:context.root_url+value}).first())?this.selected=section:this.current(),this},load:function(url,data,loaded){var self=this
;return this.selected||this.current(),url=url||this.selected.url,"tree"===this.selected.type?this.selected.panel.addClass("content-panel"):this.selected.panel.removeClass("content-panel"),this.selected.panel.empty().load(url,data,function(response){self.scope.trigger("load.section",[self.selected,response]),_.isFunction(loaded)&&loaded()}),this},loadContentBlock:function(url,data,loaded){var $contentblock;return this.selected||this.current(),url=url||this.selected.url,"tree"===this.selected.type?this.selected.panel.addClass("content-panel"):this.selected.panel.removeClass("content-panel"),($contentblock=$(".content-block",this.selected.panel)).length?(
$contentblock.empty().load(url,data,loaded),this):this.load(url,data,loaded)},updateContentBlock:function(html){var $contentblock=$(".content-block",this.selected.panel);return $contentblock.length?$contentblock.empty().html(html):this.selected.panel.empty().html(html),this},on:function(eventName,cb){var self=this;return this.scope.on(eventName+".section",function(e){cb.apply(self,Array.prototype.slice.call(arguments,1))}),this},off:function(eventName){return this.scope.off(eventName+".section"),this}}}),define("controller/Lock/locked",["jquery","i18n","helpers","lock","layout/section","ui/feedback"],function($,__,helpers,Lock,sectionApi,feedback){
"use strict";return{start:function(){$(".forcerelease").click(function(e){e.preventDefault(),$.ajax({url:helpers._url("forceRelease","Lock","tao"),type:"POST",data:{uri:$(this).data("id")},dataType:"json",success:function(response){response.success?(feedback().success(__("The lock has been released")),$(".tree").trigger("refresh.taotree")):feedback().error(__("Unable to release the lock"))},error:function(){feedback().error(__("Unable to release the lock"))}})})}}}),define("layout/version-warning",["jquery","jquery.cookie"],function($){"use strict";var versionWarning=$(".version-warning");function hideWarning(slide){var callback=function(){
document.documentElement.className+=" no-version-warning",versionWarning.trigger("hiding.versionwarning")};slide?versionWarning.slideUp("slow",function(){versionWarning.slideUp("slow",callback)}):(versionWarning.hide(),callback())}return{init:function(){$.cookie("versionWarning")?hideWarning(!1):versionWarning.find(".close-trigger").on("click",function(){$.cookie("versionWarning",!0,{path:"/"}),hideWarning(!0)})}}}),define("tpl!ui/login/tpl/login",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,
options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;function program3(depth0,data){return' autocomplete="off"'}function program5(depth0,data){var stack1,buffer="";return buffer+='\n                <div class="form-error">\n                    '+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.fieldMessages)||!1===stack1?stack1:stack1.login)===functionType?stack1.apply(depth0):stack1)+"\n                </div>\n            "}return buffer+='<div class="xhtml_form login-component">\n    <form action="',stack1=(helper=helpers.url)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.url)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" method="post" id="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" name="',stack1=(helper=helpers.name)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        <input type="hidden" class="global" name="',stack1=(helper=helpers.name)?helper.call(depth0,{
hash:{},data:data}):typeof(helper=depth0&&depth0.name)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'_sent" value="1">\n        ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.message)||!1===stack1?stack1:stack1.error,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,buffer="";return buffer+='\n            <div class="xhtml_form_error">'+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.message)||!1===stack1?stack1:stack1.error)===functionType?stack1.apply(depth0):stack1)+"</div>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='\n        <div>\n            <label class="form_desc" for="login">\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Login",options):helperMissing.call(depth0,"__","Login",options)))+'\n            </label><input type="text" name="login" id="login" autofocus="autofocus"',((stack1=helpers.if.call(depth0,depth0&&depth0.disableAutocomplete,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.fieldMessages)||!1===stack1?stack1:stack1.login,{
hash:{},inverse:this.noop,fn:this.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n        <div>\n            <label class="form_desc" for="password">\n                '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Password",options):helperMissing.call(depth0,"__","Password",options)))+'\n            </label><input type="password" name="password" id="password"',((stack1=helpers.if.call(depth0,depth0&&depth0.disableAutocomplete,{hash:{},inverse:this.noop,fn:this.program(3,program3,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+=">\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.fieldMessages)||!1===stack1?stack1:stack1.password,{hash:{},inverse:this.noop,fn:this.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n        <div class="form-toolbar"><input type="submit" id="connect" name="connect" disabled="disabled" class="disabled" value="Log in"></div>\n    </form>\n</div>'})}),define("tpl!ui/login/tpl/fakeForm",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer=""
;return buffer+='<div class="form loginForm fakeForm">',((stack1=(helper=(helpers=this.merge(helpers,Handlebars.helpers)).form)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.form)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</div>"})}),define("tpl!ui/login/tpl/passwordReveal",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="";return buffer+='<span class="viewable-hiddenbox">',((stack1=(helper=(helpers=this.merge(helpers,Handlebars.helpers)).elements
)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.elements)?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+='<span class="viewable-hiddenbox-toggle" tabindex="0"><span class="icon-preview"></span><span class="icon-eye-slash" style="display: none;"></span></span></span>'})}),define("controller/login",["jquery","lodash","i18n","module","layout/loading-bar","layout/version-warning","ui/login/login"],function($,_,__,module,loadingBar,versionWarning,loginComponent){"use strict";var _defaults={disableAutocomplete:!1,enablePasswordReveal:!1,message:{error:""}};return{start:function(){
var conf=_.defaults({},module.config(),_defaults);loginComponent($("#login-box-inner-container"),conf).on("init",function(){loadingBar.start()}).after("render",function(){versionWarning.init(),loadingBar.stop()}).on("submit.login",function(){loadingBar.start()})}}}),define("form/post-render-props",["jquery","i18n","ui/feedback"],function($,__,feedback){"use strict";function _toggleModeBtn(newMode){var $modeToggle=$(".property-mode");"disabled"===newMode?$modeToggle.addClass("disabled"):$modeToggle.removeClass("disabled")}function _upgradeButtons($container,type){"radio"!==type&&"checkbox"!==type&&(type="radio");var selector=".form_checklst",notSelector=""
;"radio"===type&&(selector=".form_radlst",notSelector=".form_checklst, "),$container.find(selector).not(notSelector+".property-"+type+"-list").each(function(){var $radioList=$(this);$radioList.addClass("property-"+type+"-list"),$radioList.parent().addClass("property-"+type+"-list-box"),$radioList.each(function(){var $block=$(this),$inputs=$block.find("input");$inputs.length<=2&&$block.find("br").remove(),$inputs.each(function(){var $input=$(this),$label=$block.find('label[for="'+this.id+'"]'),$icon=$("<span>",{class:"icon-"+type});$label.prepend($icon),$label.prepend($input)})})})}function getPropertyContainer(){var $propertyContainer=$(
".content-block .property-container");return $propertyContainer.length||($propertyContainer=$("<div>",{class:"property-container"}),$(".content-block .form-group").first().before($propertyContainer)),$propertyContainer}function _hideProperties($container){$(".property",$container).each(function(){for(var $currentTarget=$(this);!_.isEqual($currentTarget.parent()[0],$container[0]);)$currentTarget=$currentTarget.parent();$currentTarget.hide()}),_toggleModeBtn("disabled")}function _showProperties($container){$(".property",$container).each(function(){for(var $currentTarget=$(this);!_.isEqual($currentTarget.parent()[0],$container[0]);
)$currentTarget=$currentTarget.parent();$currentTarget.show()});var elt=$('[class*="property-type"]',$container).parent("div").next("div");new RegExp(["list","tree"].join("$|").concat("$")).test($('[class*="property-type"]',$container).val())?"none"===elt.css("display")&&(elt.show(),elt.find("select").removeAttr("disabled")):"none"!==elt.css("display")&&(elt.css("display","none"),elt.find("select").prop("disabled","disabled")),_toggleModeBtn("enabled")}function _hideIndexes($container){$(".index",$container).each(function(){for(var $currentTarget=$(this);!_.isEqual($currentTarget.parent()[0],$container[0]);)$currentTarget=$currentTarget.parent()
;$currentTarget.hide()}),$(".index-remover",$container).each(function(){$(this).parent().hide()})}function _showIndexes($container){$(".index",$container).each(function(){for(var $currentTarget=$(this);!_.isEqual($currentTarget.parent()[0],$container[0]);)$currentTarget=$currentTarget.parent();$currentTarget.show()}),$(".index-remover",$container).each(function(){$(this).parent().show()})}return{init:function($properties){var $container=$(".content-block .xhtml_form:first form");$container.length&&(function($container){var $copyField,isInstanceForm=document.getElementById("tao.forms.instance"),$idField=$container.find("#id"),value=$idField.val(),$label=$(
"<span>",{class:"form_desc",text:__("Resource Identifier")}),$button=$("<span>",{class:"icon-clipboard clipboard-command",title:__("Copy to clipboard")}).on("click",function(){var success;try{$copyField.select(),success=document.execCommand("copy"),$copyField.blur(),success?feedback().success(__("Resource Identifier has been copied to the clipboard")):feedback().error(__("Resource Identifier could not be copied to the clipboard"))}catch(err){feedback().error(__("Your browser does not support copying to the clipboard"))}}),$fieldBox=$("<span>",{class:"uri-container"});$(".uri-container").length||isInstanceForm&&$idField.length&&($copyField=$idField.clone(
).val("").attr({readonly:!0,type:"text"}),$idField.remove(),$fieldBox.append([$copyField,$button]),$container.find("div").first().after($("<div>").append([$label,$fieldBox])),$fieldBox.height($copyField.outerHeight()),$copyField.addClass("final").val(value))}($container),$properties&&$properties.length||($properties=$container.children('div[id*="property_"]').not(".property-block")),$properties.length&&(function($properties){var $propertyContainer=getPropertyContainer(),hasAlreadyProperties=!!$propertyContainer.find(".property-block").length;$properties.each(function(){var $property=$(this);if(void 0!==$property.attr){var type=function(){var $propertyMode=$(
".property-mode");switch($property.attr("id").replace(/_?property_[\d]+/,"")){case"ro":return"readonly-property";case"parent":return"parent-property";default:var $editIcon=$property.find(".icon-edit"),$editContainer=$property.children("div:first"),$indexIcon=$property.find(".icon-find");return $editContainer.addClass("property-edit-container"),_hideProperties($editContainer),_hideIndexes($editContainer),$propertyMode.hasClass("property-mode-simple")?$indexIcon.hide():$propertyMode.hasClass("property-mode-advanced")&&$indexIcon.show(),$editIcon.on("click",function(){$editContainer.parent().hasClass("property-edit-container-open")?$($(".property",
$editContainer)[0]).is(":visible")?$editContainer.slideToggle(function(){$editContainer.parent().toggleClass("property-edit-container-open"),_hideProperties($editContainer)}):(_hideIndexes($editContainer),_showProperties($editContainer)):(_hideIndexes($editContainer),_showProperties($editContainer),$editContainer.slideToggle(function(){$editContainer.parent().toggleClass("property-edit-container-open")}))}),$indexIcon.on("click",function(){$(".property-mode").hasClass("property-mode-advanced")&&($editContainer.parent().hasClass("property-edit-container-open")?$($(".index",$editContainer)[0]).is(":visible")?$editContainer.slideToggle(function(){
$editContainer.parent().toggleClass("property-edit-container-open"),_hideIndexes($editContainer)}):(_hideProperties($editContainer),_showIndexes($editContainer)):(_hideProperties($editContainer),_showIndexes($editContainer),$editContainer.slideToggle(function(){$editContainer.parent().toggleClass("property-edit-container-open")})))}),"regular-property"}}();$property.addClass(hasAlreadyProperties?"property-block "+type:"property-block-first property-block "+type),$propertyContainer.append($property),hasAlreadyProperties=!0}})}($properties),_upgradeButtons($container,"radio"),_upgradeButtons($container,"checkbox"),_toggleModeBtn("disabled"),function($container
){var $editContainer,$error=$container.find(".error");$error.length&&($editContainer=$error.closest(".property-edit-container")).length&&(_hideIndexes($editContainer),_showProperties($editContainer),$editContainer.slideToggle(function(){$editContainer.parent().toggleClass("property-edit-container-open")}))}($container)))},getPropertyContainer:getPropertyContainer}}),define("form/property",["jquery","lodash","form/post-render-props"],function($,_,postRenderProps){return{add:function(classUri,url){var $existingProperties=$(".property-block"),index=$existingProperties.length;$existingProperties.each(function(){index=Math.max(parseInt(this.id.replace(/[\D]+/,"")
),index)}),index++,$.ajax({url:url,type:"POST",data:{index:index,id:classUri},dataType:"html",success:function(response){var $response=$(response),property=$response.first();1<$response.length&&$response.last().appendTo(property);postRenderProps.init(property)}})},remove:function(uri,classUri,url,successCallback){$.ajax({url:url,type:"POST",data:{uri:uri,classUri:classUri},dataType:"html",success:function(){_.isFunction(successCallback)&&successCallback()}})}}}),define("lib/jsTree/plugins/jquery.tree.contextmenu",["jquery","jquery.tree"],function($){$.extend($.tree.plugins,{contextmenu:{object:$("<ul id='jstree-contextmenu' class='tree-context' />"),data:{
t:!1,a:!1,r:!1},defaults:{class_name:"hover",items:{create:{label:"Create",icon:"create",visible:function(NODE,TREE_OBJ){return 1!=NODE.length?0:TREE_OBJ.check("creatable",NODE)},action:function(NODE,TREE_OBJ){TREE_OBJ.create(!1,TREE_OBJ.get_node(NODE[0]))},separator_after:!0},rename:{label:"Rename",icon:"rename",visible:function(NODE,TREE_OBJ){return 1==NODE.length&&TREE_OBJ.check("renameable",NODE)},action:function(NODE,TREE_OBJ){TREE_OBJ.rename(NODE)}},remove:{label:"Delete",icon:"remove",visible:function(NODE,TREE_OBJ){var ok=!0;return $.each(NODE,function(){return 0==TREE_OBJ.check("deletable",this)&&(ok=!1),!1}),ok},action:function(NODE,TREE_OBJ){
$.each(NODE,function(){TREE_OBJ.remove(this)})}}}},show:function(obj,t){var opts=$.extend(!0,{},$.tree.plugins.contextmenu.defaults,t.settings.plugins.contextmenu);obj=$(obj),$.tree.plugins.contextmenu.object.empty();var str="";for(var i in opts.items)if(opts.items.hasOwnProperty(i)&&!1!==opts.items[i]){var r=1;"function"==typeof opts.items[i].visible&&(r=opts.items[i].visible.call(null,$.tree.plugins.contextmenu.data.a,t)),-1!=r&&(0,!0===opts.items[i].separator_before&&(str+="<li class='separator'><span>&nbsp;</span></li>"),str+='<li><a href="#" rel="'+i+'" class="'+i+" "+(0==r?"disabled":"")+'">',opts.items[i].icon?str+="<ins "+(
-1==opts.items[i].icon.indexOf("/")?" class='"+opts.items[i].icon+"' ":" style='background-image:url(\""+(0==r?opts.items[i].icon.replace(".png","_disabled.png"):opts.items[i].icon)+"\");' ")+">&nbsp;</ins>":str+="<ins>&nbsp;</ins>",str+="<span>"+opts.items[i].label+"</span></a></li>",!0===opts.items[i].separator_after&&(str+="<li class='separator'><span>&nbsp;</span></li>"))}var tmp=obj.children("a:visible").offset();$.tree.plugins.contextmenu.object.attr("class","tree-context tree-"+t.settings.ui.theme_name.toString()+"-context").html(str);var h=$.tree.plugins.contextmenu.object.height(),w=$.tree.plugins.contextmenu.object.width(),x=tmp.left,
y=tmp.top+parseInt(obj.children("a:visible").height())+2,max_y=$(window).height()+$(window).scrollTop(),max_x=$(window).width()+$(window).scrollLeft();max_y<y+h&&(y=Math.max(max_y-h-2,0)),max_x<x+w&&(x=Math.max(max_x-w-2,0)),$.tree.plugins.contextmenu.object.css({left:x,top:y}).fadeIn("fast")},hide:function(){if($.tree.plugins.contextmenu.data.t){var opts=$.extend(!0,{},$.tree.plugins.contextmenu.defaults,$.tree.plugins.contextmenu.data.t.settings.plugins.contextmenu);$.tree.plugins.contextmenu.data.r&&$.tree.plugins.contextmenu.data.a&&$.tree.plugins.contextmenu.data.a.children("a, span").removeClass(opts.class_name),$.tree.plugins.contextmenu.data={a:!1,
r:!1,t:!1},$.tree.plugins.contextmenu.object.fadeOut("fast")}},exec:function(cmd){if(0!=$.tree.plugins.contextmenu.data.t){var opts=$.extend(!0,{},$.tree.plugins.contextmenu.defaults,$.tree.plugins.contextmenu.data.t.settings.plugins.contextmenu);try{opts.items[cmd].action.apply(null,[$.tree.plugins.contextmenu.data.a,$.tree.plugins.contextmenu.data.t])}catch(e){}}},callbacks:{oninit:function(){if(!$.tree.plugins.contextmenu.css){$.tree.plugins.contextmenu.css=this.add_sheet({
str:"#jstree-contextmenu { display:none; position:absolute; z-index:2000; list-style-type:none; margin:0; padding:0; left:-2000px; top:-2000px; } .tree-context { margin:20px; padding:0; width:180px; border:1px solid #979797; padding:2px; background:#f5f5f5; list-style-type:none; }.tree-context li { height:22px; margin:0 0 0 27px; padding:0; background:#ffffff; border-left:1px solid #e0e0e0; }.tree-context li a { position:relative; display:block; height:22px; line-height:22px; margin:0 0 0 -28px; text-decoration:none; color:black; padding:0; }.tree-context li a ins { text-decoration:none; float:left; width:16px; height:16px; margin:0 0 0 0; background-color:#f0f0f0; border:1px solid #f0f0f0; border-width:3px 5px 3px 6px; line-height:16px; }.tree-context li a span { display:block; background:#f0f0f0; margin:0 0 0 29px; padding-left:5px; }.tree-context li.separator { background:#f0f0f0; height:2px; line-height:2px; font-size:1px; border:0; margin:0; padding:0; }.tree-context li.separator span { display:block; margin:0px 0 0px 27px; height:1px; border-top:1px solid #e0e0e0; border-left:1px solid #e0e0e0; line-height:1px; font-size:1px; background:white; }.tree-context li a:hover { border:1px solid #d8f0fa; height:20px; line-height:20px; }.tree-context li a:hover span { background:#e7f4f9; margin-left:28px; }.tree-context li a:hover ins { background-color:#e7f4f9; border-color:#e7f4f9; border-width:2px 5px 2px 5px; }.tree-context li a.disabled { color:gray; cursor: inherit }.tree-context li a.disabled ins { }.tree-context li a.disabled:hover { border:0; height:22px; line-height:22px; }.tree-context li a.disabled:hover span { background:#f0f0f0; margin-left:29px; }.tree-context li a.disabled:hover ins { border-color:#f0f0f0; background-color:#f0f0f0; border-width:3px 5px 3px 6px; }"
})}},onrgtclk:function(n,t,e){var opts=$.extend(!0,{},$.tree.plugins.contextmenu.defaults,t.settings.plugins.contextmenu);0!=(n=$(n)).size()&&($.tree.plugins.contextmenu.data.t=t,n.children("a:eq(0)").hasClass("clicked")?($.tree.plugins.contextmenu.data.r=!1,$.tree.plugins.contextmenu.data.a=t.selected_arr&&1<t.selected_arr.length?t.selected_arr:t.selected):($.tree.plugins.contextmenu.data.a=n,$.tree.plugins.contextmenu.data.r=!0,n.children("a").addClass(opts.class_name),e.target.blur()),$.tree.plugins.contextmenu.show(n,t),e.preventDefault(),e.stopPropagation())},onchange:function(){$.tree.plugins.contextmenu.hide()},beforedata:function(){
$.tree.plugins.contextmenu.hide()},ondestroy:function(){$.tree.plugins.contextmenu.hide()}}}}),$(function(){$.tree.plugins.contextmenu.object.hide().appendTo("body"),$.tree.plugins.contextmenu.object.first().on("click","a",function(event){return $(this).hasClass("disabled")||($.tree.plugins.contextmenu.exec.apply(null,[$(this).attr("rel")]),$.tree.plugins.contextmenu.hide()),event.stopPropagation(),event.preventDefault(),!1}),$(document).on("mousedown",function(event){0==$(event.target).parents("#jstree-contextmenu").size()&&$.tree.plugins.contextmenu.hide()})})}),define("uiForm",["module","jquery","lodash","i18n","helpers","context","form/property",
"form/post-render-props","util/encode","ckeditor","ui/ckeditor/ckConfigurator","lib/jsTree/plugins/jquery.tree.contextmenu"],function(module,$,_,__,helpers,context,property,postRenderProps,encode,ckeditor,ckConfigurator){"use strict";var getUrl=function(action){var conf=module.config();return context.root_url+conf.extension+"/"+conf.module+"/"+action};return{htmlEditors:{},init:function(){var self=this;this.counter=0,this.initGenerisFormPattern=new RegExp(["add","edit","mode","PropertiesAuthoring"].join("|"),"i"),this.initTranslationFormPattern=/translate/,this.htmlEditors={},$(document).ajaxComplete(function(event,request,settings){var testedUrl
;"html"!==settings.dataType&&settings.dataType||(testedUrl=-1!==settings.url.indexOf("?")?settings.url.substr(0,settings.url.indexOf("?")):settings.url,self.initRendering(),self.initElements(),self.initGenerisFormPattern.test(testedUrl)&&self.initOntoForms(),self.initTranslationFormPattern.test(testedUrl)&&self.initTranslationForm())}),this.initRendering()},initRendering:function(){var $authoringBtnParent,self=this,$toolBar=$(".content-block .xhtml_form:first").find(".form-toolbar"),$authoringBtn=$(".authoringOpener"),$testAuthoringBtn=$(".test-authoring"),$rdfImportForm=$(".rdfImport #import"),$rdfExportForm=$(".rdfExport #export");$(
".form_desc ~.form_radlst").parent().addClass("bool-list"),$('.form_desc + input[type="hidden"]').prev().addClass("hidden-input-label"),$authoringBtn.length&&!$authoringBtn.hasClass("btn-info")&&($authoringBtnParent=$authoringBtn.parent(),$authoringBtn.prepend($("<span>",{class:"icon-edit"})),$authoringBtn.addClass("btn-info small"),$authoringBtn.appendTo($toolBar),$authoringBtnParent.remove()),$testAuthoringBtn.length&&$testAuthoringBtn.prependTo($toolBar),$rdfImportForm.length&&($("span.form_desc:empty",$rdfImportForm).hide(),$("span.form-elt-info",$rdfImportForm).css({display:"block",width:"100%"}),$(".form-elt-container.file-uploader",$rdfImportForm
).css({width:"65%",float:"right"})),$rdfExportForm.length&&($("div:first",$rdfExportForm).find('input[type="text"]').css("width","calc(65% - 23px)"),$("div:not(.form-toolbar):last span",$rdfExportForm).css("float","right").closest("div").find('[id*="ns_filter"]').addClass("btn-default small")),$("body").off("submit",".xhtml_form form").on("submit",".xhtml_form form",function(e){var $form=$(this);return e.preventDefault(),self.submitForm($form,self.getFormData($form))}),$(".form-submitter").off("click").on("click",function(e){e.preventDefault(),$(e.target).closest(".xhtml_form form").trigger("submit")}),postRenderProps.init()},getFormData:function($form){
var formData={},clazz={},properties=[],indexes=[];if($('[id="tao.forms.class"]').length)return $("input.global",$form[0]).each(function(){var $global=$(this),name=$global.attr("name");-1<name.indexOf("class_")?(name=name.replace("class_",""),clazz[name]=$global.val()):formData[name]=$global.val()}),0!==clazz.length&&(formData.class=clazz),$(".regular-property",$form[0]).each(function(){var property={},name="",isArray=!1,range=[];$('[id*="http_2_www_0_w3_0_org_1_2000_1_01_1_rdf-schema_3_range-TreeBox"]',this).find(".checked").each(function(){range.push($(this).parent().attr("id"))}),0!==range.length&&(
property["http_2_www_0_w3_0_org_1_2000_1_01_1_rdf-schema_3_range"]=range),$(":input.property",this).each(function(){var $property=$(this);name=$property.attr("name").replace(/(property_)?[^_]+_/,""),isArray=name.indexOf("[]")===name.length-2,"checkbox"===$property.attr("type")&&isArray?(name=name.substr(0,name.length-2),$property.is(":checked")&&(_.isArray(property[name])||(property[name]=[]),property[name].push($property.val()))):"radio"===$property.attr("type")?$property.is(":checked")&&(property[name]=$property.val()):property[name]=$property.val()}),$(":input.index",this).each(function(){var i,found=!1,name="",$index=$(this);for(i in indexes
)indexes[i]&&$index.attr("data-related-index")===indexes[i].uri&&(name=$index.attr("name").replace(/(index_)?[^_]+_/,""),"radio"===$index.attr("type")||"checkbox"===$index.attr("type")?$index.is(":checked")&&(indexes[i][name]=$index.val()):indexes[i][name]=$index.val(),found=!0);if(!found){var index={};index.uri=$index.attr("data-related-index"),name=$index.attr("name").replace(/(index_)?[^_]+_/,""),"radio"===$index.attr("type")?$index.is(":checked")&&(index[name]=$index.val()):index[name]=$index.val(),indexes.push(index)}}),property.indexes=indexes,properties.push(property)}),formData.properties=properties,formData},initElements:function(){var $uriElm,
$classUriElm,self=this;$(".form-refresher").off("click").on("click",function(){var $form=$(this).parents("form");return $(":input[name='"+$form.attr("name")+"_sent']").remove(),$form.submit()}),$uriElm=$("#uri"),$classUriElm=$("#classUri"),$(".form-translator").off("click").on("click",function(){return $uriElm.length&&$classUriElm.length&&helpers.getMainContainer().load(getUrl("translateInstance"),{uri:$uriElm.val(),classUri:$classUriElm.val()}),!1}),$(".html-area").each(function(){var propertyUri=this.id,editor=ckeditor.replace(this);editor.config=ckConfigurator.getConfig(editor,"htmlField",{resize_enabled:!1}),self.htmlEditors[propertyUri]=editor}),$(
".box-checker").off("click").on("click",function(){var $checker=$(this),regexpId=new RegExp("^"+$checker.prop("id").replace("_checker",""),"i");return $checker.hasClass("box-checker-uncheck")?($(":checkbox:not(:disabled)").each(function(){regexpId.test(this.id)&&(this.checked=!1,$(this).change())}),$checker.removeClass("box-checker-uncheck"),$checker.text(__("Check all"))):($(":checkbox:not(:disabled)").each(function(){regexpId.test(this.id)&&(this.checked=!0,$(this).change())}),$checker.addClass("box-checker-uncheck"),$checker.text(__("Uncheck all"))),!1})},initOntoForms:function(){$(".authoringOpener").click(function(){var $wantedPanel,tabUrl=getUrl(
"authoring"),tabId="panel-"+module.config().module.toLowerCase()+"_authoring",$tabContainer=$("#tabs"),$panel=(($wantedPanel=$tabContainer.find("#"+tabId)).length||($wantedPanel=$("<div>",{id:tabId,class:"clear content-panel"}).hide(),$tabContainer.find(".content-panel").after($wantedPanel)),$wantedPanel);$.ajax({type:"GET",url:tabUrl,data:{uri:$("#uri").val(),classUri:$("#classUri").val()},dataType:"html",success:function(responseHtml){$tabContainer.find(".content-panel").not($panel).hide(),window.location.hash=tabId,(responseHtml=$(responseHtml)).find("#authoringBack").click(function(){var $myPanel=$(this).parents(".content-panel"),
$otherPanel=$myPanel.prev();$myPanel.hide(),$otherPanel.show()}),$panel.html(responseHtml).show()}})}),$("input.editVersionedFile").each(function(){var infoUrl=context.root_url+"tao/File/getPropertyFileInfo",data={uri:$("#uri").val(),propertyUri:$(this).siblings("label.form_desc").prop("for")},$_this=$(this);$.ajax({type:"GET",url:infoUrl,data:data,dataType:"json",success:function(r){$_this.after("<span>"+r.name+"</span>")}})}).click(function(){var data={uri:$("#uri").val(),propertyUri:$(this).siblings("label.form_desc").prop("for")};return helpers.getMainContainer().load(getUrl("editVersionedFile"),data),!1}),$(".property-deleter").off("click").on("click",
function(){if(window.confirm(__("Please confirm property deletion!"))){var $groupNode=$(this).closest(".form-group");property.remove($(this).data("uri"),$("#id").val(),helpers._url("removeClassProperty","PropertiesAuthoring","tao"),function(){$groupNode.remove()})}}),$(".property-adder").off("click").on("click",function(e){e.preventDefault(),property.add($("#id").val(),helpers._url("addClassProperty","PropertiesAuthoring","tao"))}),$(".index-adder").off("click").on("click",function(e){e.preventDefault();var $prependTo=$(this).closest("div"),$groupNode=$(this).closest(".form-group");if($groupNode.length){var max=0,$propertyindex=$(".property-uri",$groupNode),
propertyindex=parseInt($propertyindex.attr("id").replace(/[\D]+/,""));$groupNode.find("[data-index]").each(function(){max<$(this).data("index")&&(max=$(this).data("index"))}),max+=1;var uri=$groupNode.find(".property-uri").val();$.ajax({type:"GET",url:helpers._url("addPropertyIndex","PropertiesAuthoring","tao"),data:{uri:uri,index:max,propertyIndex:propertyindex},dataType:"json",success:function(response){$prependTo.before(response.form)}})}}),$(".property-edit-container").off("click",".index-remover").on("click",".index-remover",function(e){e.preventDefault();var $groupNode=$(this).closest(".form-group"),uri=$groupNode.find(".property-uri").val(),
$editContainer=$($groupNode[0]).children(".property-edit-container");$.ajax({type:"POST",url:helpers._url("removePropertyIndex","PropertiesAuthoring","tao"),data:{uri:uri,indexProperty:$(this).attr("id")},dataType:"json",success:function(response){$('[id*="'+response.id+'"], [data-related-index="'+response.id+'"]').each(function(){for(var $currentTarget=$(this);!_.isEqual($currentTarget.parent()[0],$editContainer[0])&&void 0!==$currentTarget.parent()[0];)$currentTarget=$currentTarget.parent();$currentTarget.remove()})}})}),$(".property-mode").off("click").on("click",function(){var url,$btn=$(this),mode="simple";if(!$btn.hasClass("disabled")
)return $btn.hasClass("property-mode-advanced")&&(mode="advanced"),url=$btn.parents("form").prop("action"),helpers.getMainContainer().load(url,{property_mode:mode,uri:$("#uri").val(),id:$("#id").val(),classUri:$("#classUri").val()}),!1}),$(".property-template").each(function(){$(this).closest("div").hide()});var $propertyType=$(".property-type"),$propertyListValues=$(".property-listvalues");$propertyType.on("change",function(){var $this=$(this),$elt=$this.parent("div").next("div"),propertiesTypes=["list","tree"];new RegExp(propertiesTypes.join("$|").concat("$")).test($this.val())?"none"===$elt.css("display")&&($elt.show(),$elt.find("select").removeAttr(
"disabled")):"none"!==$elt.css("display")&&($elt.css("display","none"),$elt.find("select").prop("disabled",!1),$elt.find('select option[value=" "]').prop("selected",!0)),$.each(propertiesTypes,function(i,rangedPropertyName){if(new RegExp(rangedPropertyName+"$").test($this.val()))return $elt.find("select").html($elt.closest(".property-edit-container").find("."+rangedPropertyName+"-template").html()),!0})}).trigger("change"),$propertyListValues.off("change"),$propertyListValues.on("change",function(){var $this=$(this),elt=$this.parent("div");if("new"===$this.val()){var rangeId=$this.prop("id"),dialogId=rangeId.replace("_range","_dialog"),
treeId=rangeId.replace("_range","_tree"),closerId=rangeId.replace("_range","_closer");elt.append("<div id='"+dialogId+"' style='display:none;' > <span class='ui-state-highlight' style='margin:15px;'>"+__("Right click the tree to manage your lists")+"</span><br /><br /><div id='"+treeId+"' ></div> <div style='text-align:center;margin-top:30px;'> <a id='"+closerId+"' class='ui-state-default ui-corner-all' href='#'>"+__("Save")+"</a> </div> </div>");var $dialogElm=$("#"+dialogId);$dialogElm.dialog({width:350,height:400,autoOpen:!1,title:__("Manage data list")}),$dialogElm.bind("dialogclose",function(event,ui){$.tree.reference("#"+treeId).destroy(),
$dialogElm.dialog("destroy"),$dialogElm.remove()}),$("#"+closerId).click(function(){$("#"+dialogId).dialog("close")}),$dialogElm.bind("dialogopen",function(event,ui){var url=context.root_url+"taoBackOffice/Lists/",dataUrl=url+"getListsData",renameUrl=url+"rename",createUrl=url+"create",removeListUrl=url+"removeList",removeListEltUrl=url+"removeListElement";$("#"+treeId).tree({data:{type:"json",async:!0,opts:{method:"POST",url:dataUrl}},types:{default:{renameable:!0,deletable:!0,creatable:!0,draggable:!1}},ui:{theme_name:"custom"},callback:{onrename:function(NODE,TREE_OBJ){var data={uri:$(NODE).prop("id"),newName:TREE_OBJ.get_text(NODE)};$(NODE).hasClass(
"node-instance")&&(data.classUri=$(TREE_OBJ.parent(NODE)).prop("id")),$.ajax({url:renameUrl,type:"POST",data:data,dataType:"json",success:function(response){response.renamed||TREE_OBJ.rename(NODE,response.oldName)}})},ondestroy:function(TREE_OBJ){var $rangeElm=$("#"+rangeId);$rangeElm.find("option").each(function(){var $option=$(this);""!==$option.val()&&"new"!==$option.val()&&$option.remove()}),$("#"+treeId+" .node-root .node-class").each(function(){$rangeElm.find("option[value='new']").before("<option value='"+$(this).prop("id")+"'>"+$(this).children("a:first").text()+"</option>")}),$rangeElm.parent("div").children("ul.form-elt-list").remove(),
$rangeElm.val("")}},plugins:{contextmenu:{items:{create:{label:__("Create"),icon:context.taobase_www+"img/add.png",visible:function(NODE,TREE_OBJ){return!$(NODE).hasClass("node-instance")&&TREE_OBJ.check("creatable",NODE)},action:function(NODE,TREE_OBJ){return $(NODE).hasClass("node-class")&&$.ajax({url:createUrl,type:"POST",data:{classUri:$(NODE).prop("id"),type:"instance"},dataType:"json",success:function(response){response.uri&&TREE_OBJ.select_branch(TREE_OBJ.create({data:response.label,attributes:{id:response.uri,class:"node-instance"}},TREE_OBJ.get_node(NODE[0])))}}),$(NODE).hasClass("node-root")&&$.ajax({url:createUrl,type:"POST",data:{classUri:"root",
type:"class"},dataType:"json",success:function(response){response.uri&&TREE_OBJ.select_branch(TREE_OBJ.create({data:response.label,attributes:{id:response.uri,class:"node-class"}},TREE_OBJ.get_node(NODE[0])))}}),!1}},rename:{label:__("Rename"),icon:context.taobase_www+"img/rename.png",visible:function(NODE,TREE_OBJ){return!$(NODE).hasClass("node-root")&&TREE_OBJ.check("renameable",NODE)}},remove:{label:__("Remove"),icon:context.taobase_www+"img/delete.png",visible:function(NODE,TREE_OBJ){return!$(NODE).hasClass("node-root")&&TREE_OBJ.check("deletable",NODE)},action:function(NODE,TREE_OBJ){var removeUrl;return $(NODE).hasClass("node-root")||($(NODE).hasClass(
"node-class")&&(removeUrl=removeListUrl),$(NODE).hasClass("node-instance")&&(removeUrl=removeListEltUrl),$.ajax({url:removeUrl,type:"POST",data:{uri:$(NODE).prop("id")},dataType:"json",success:function(response){response.deleted&&TREE_OBJ.remove(NODE)}})),!1}}}}}})}),$dialogElm.dialog("open")}else{$(elt).parent("div").children("ul.form-elt-list").remove();var classUri=$this.val();""!==classUri&&" "!==classUri&&($this.parent("div").children("div.form-error").remove(),$.ajax({url:context.root_url+"taoBackOffice/Lists/getListElements",type:"POST",data:{listUri:classUri},dataType:"json",success:function(response){var property,html="<ul class='form-elt-list'>"
;for(property in response)response.hasOwnProperty(property)&&(html+="<li>"+encode.html(response[property])+"</li>");html+="</ul>",$(elt).parent("div").append(html)}}))}}).trigger("change"),$propertyListValues.each(function(){var listControl,listField=$(this);0===listField.parent().find("img").length&&((listControl=$("<img title='manage lists' class='manage-lists' style='cursor:pointer;' />")).prop("src",context.taobase_www+"img/add.png"),listControl.click(function(){listField.val("new"),listField.change()}),listControl.insertAfter(listField))}),$propertyListValues.each(function(){var elt=$(this).parent("div");elt.hasClass("form-elt-highlight"
)||"none"===elt.css("display")||elt.addClass("form-elt-highlight")})},initTranslationForm:function(){var self=this;$("#translate_lang").change(function(){var trLang=$(this).val();""!==trLang&&($("#translation_form").find(":input").each(function(){/^http/.test($(this).prop("name"))&&$(this).val("")}),$.post(getUrl("getTranslatedData"),{uri:$("#uri").val(),classUri:$("#classUri").val(),lang:trLang},function(response){var index,formElt;for(index in response)(formElt=$(":input[name='"+index+"']")).hasClass("html-area")&&self.htmlEditors[index]?self.htmlEditors[index].setData(response[index]):formElt.val(response[index])},"json"))})},submitForm:function(myForm,
serialize){var $container,self=this;try{if("multipart/form-data"===myForm.prop("enctype")&&myForm.find(".file-uploader").length)return!1;if(!($container=myForm.closest(".content-block"))||0===$container.length)return!0;$(".html-area",myForm).each(function(){self.htmlEditors[this.id]&&self.htmlEditors[this.id].updateElement()}),serialize=void 0!==serialize?serialize:myForm.serializeArray(),$container.load(myForm.prop("action"),serialize)}catch(exp){return!1}return!1}}}),define("layout/actions/binder",["lodash"],function(_){"use strict";var bindings={};return{register:function(name,binding){bindings[name]=binding},exec:function(action,context){var name;if(
action&&action.binding&&(name=action.binding,_.isFunction(bindings[name])))return bindings[name].call(action,context)}}}),define("layout/permissions",["lodash","uri"],function(_,uriUtil){"use strict";var permissionStore={},supportedRights=[];return{setSupportedRights:function(rights){_.isArray(rights)&&(supportedRights=_.filter(rights,_.isString))},getRights:function(){return supportedRights},isSupported:function(right){return _.contains(supportedRights,right)},addPermissions:function(uri,permissions){return _.isString(uri)&&_.isArray(permissions)&&(permissionStore[uri]=_.intersection(permissions,_.values(this.getRights()))),_.isUndefined(permissions
)&&_.isPlainObject(uri)&&(permissions=uri,_.forEach(permissions,function(value,key){this.addPermissions(key,value)},this)),this},getPermissions:function(uri){return permissionStore[uri]},hasPermission:function(uri,permission){return 0===supportedRights.length||void 0!==permissionStore[uri]&&_.contains(permissionStore[uri],permission)},clear:function(){return permissionStore={},this},isContextAllowed:function(requiredRights,resourceContext){var self=this;return!requiredRights||0===_.size(requiredRights)||0===supportedRights.length||!!_.isPlainObject(resourceContext)&&_.all(requiredRights,function(right,requiredParameter){var parameterValue
;return"ids"===requiredParameter&&(requiredParameter="id"),!(void 0===resourceContext[requiredParameter]||!self.isSupported(right))&&(parameterValue=uriUtil.decode(resourceContext[requiredParameter]),self.hasPermission(parameterValue,right))})},getResourceAccessMode:function(uri){var self=this,mode="allowed",rights=this.getRights(),count=_.reduce(rights,function(acc,right){return self.hasPermission(uri,right)&&acc++,acc},0);return 0<rights.length&&count!==rights.length&&(mode=0===count?"denied":"partial"),mode}}}),define("provider/resources",["lodash","i18n","util/url","core/promise","core/dataProvider/request","layout/permissions"],function(_,__,urlUtil,
Promise,request,permissionsManager){"use strict";var defaultConfig={getClasses:{url:urlUtil.route("getAll","RestClass","tao")},getResources:{url:urlUtil.route("getAll","RestResource","tao")},getClassProperties:{url:urlUtil.route("create","RestResource","tao")},copyTo:{},moveTo:{}},computeNodeAccessMode=function computeNodeAccessMode(nodes){return _.map(nodes,function(node){return node.accessMode=permissionsManager.getResourceAccessMode(node.uri),_.isArray(node.children)&&(node.children=computeNodeAccessMode(node.children)),node})};return function(config){return config=_.defaults(config||{},defaultConfig),{getClasses:function(classUri){return request(
config.getClasses.url,{classUri:classUri})},getResources:function(params,computePermissions){return request(config.getResources.url,params).then(function(results){var resources,currentRights;return resources=results&&results.resources?results.resources:results,computePermissions&&results.permissions&&(currentRights=permissionsManager.getRights(),results.permissions.supportedRights&&results.permissions.supportedRights.length&&0===currentRights.length&&permissionsManager.setSupportedRights(results.permissions.supportedRights),results.permissions.data&&permissionsManager.addPermissions(results.permissions.data),
resources.nodes?resources.nodes=computeNodeAccessMode(resources.nodes):resources=computeNodeAccessMode(resources)),resources})},getClassProperties:function(classUri){return request(config.getClassProperties.url,{classUri:classUri})},copyTo:function(uri,destinationClassUri){return _.isEmpty(config.copyTo.url)?Promise.reject("Please define the action URL"):_.isEmpty(uri)?Promise.reject("The URI of the resource to copy must be defined"):_.isEmpty(destinationClassUri)?Promise.reject("The URI of the destination class must be defined"):request(config.copyTo.url,{uri:uri,destinationClassUri:destinationClassUri},"POST")},moveTo:function(ids,destinationClassUri){
var params={destinationClassUri:destinationClassUri};return ids?_.isArray(ids)||(ids=[ids]):ids=[],1===ids.length?params.uri=ids[0]:params.ids=ids,_.isEmpty(config.moveTo.url)?Promise.reject("Please define the action URL"):_.isEmpty(ids)||_.some(ids,_.isEmpty)?Promise.reject("The URI of the resource to move must be defined"):_.isEmpty(destinationClassUri)?Promise.reject("The URI of the destination class must be defined"):request(config.moveTo.url,params,"POST")}}}}),define("tpl!ui/class/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,
Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="class-selector">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.classUri,{hash:{},inverse:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n    <a href="#" class="selected truncate empty">',stack1=(helper=helpers.placeholder)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.placeholder)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n    "},data),fn:this.program(1,function(depth0,data){var stack1
,helper,buffer="";return buffer+='\n    <a href="#" class="selected truncate" data-uri="',stack1=(helper=helpers.classUri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.classUri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},
data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="options folded">\n        <ul>',((stack1=(helper=helpers.tree)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.tree)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="</ul>\n    </div>\n</div>"})}),define("tpl!ui/class/tpl/listItem",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,
buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<li>\n    <a href="#" data-uri="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+'" title="',buffer+=escapeExpression(stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+'">',buffer+=escapeExpression(stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label
)===functionType?helper.call(depth0,{hash:{},data:data}):helper)+"</a>\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.childList,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <ul>\n            ",((stack1=(helper=helpers.childList)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.childList)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</li>"})}),define("css!ui/class/css/selector",[],function(){}),define(
"tpl!ui/resource/tpl/tree",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="";return buffer+='<div class="resource-tree ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <ul></ul>\n</div>'})}),define("tpl!ui/resource/tpl/treeNode",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,data){return" selectable"}function program4(depth0,data){var stack1,helper,buffer="";return buffer+='data-access="',stack1=(helper=helpers.accessMode)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.accessMode)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program6(depth0,data){var stack1,helper,buffer=""
;return buffer+="\n        ",((stack1=(helper=helpers.childList)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.childList)===functionType?helper.call(depth0,{hash:{},data:data}):helper)||0===stack1)&&(buffer+=stack1),buffer+="\n    "}return helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="class',(
(stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" data-count="',stack1=(helper=helpers.count)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.count)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},
inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        <span class="class-toggler clickable" tabindex="0"></span>\n        <span class="icon-folder"></span>\n        ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'\n        <span class="selector clickable" tabindex="0"></span>\n    </a>\n    <ul>\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.childList,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    </ul>\n    <div class="more hidden">\n        <a href="#" class="btn-info small"><span class="icon-download"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Load more",options):helperMissing.call(depth0,"__","Load more",options)))+"</a>\n    </div>\n</li>\n"},data),data:data},((stack1=helper?helper.call(depth0,
depth0&&depth0.type,"class",options):helperMissing.call(depth0,"equal",depth0&&depth0.type,"class",options))||0===stack1)&&(buffer+=stack1),buffer+="\n\n",helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.noop,fn:self.program(8,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="instance',((stack1=helpers.if.call(depth0,depth0&&depth0.selectable,{hash:{},inverse:self.noop,fn:self.program(2,program2,
data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"  ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(
stack1)+'">\n        <span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>\n        ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'\n        <span class="selector clickable" tabindex="0"></span>\n    </a>\n</li>\n'},data),data:data},((stack1=helper?helper.call(depth0,depth0&&depth0.type,"instance",options):helperMissing.call(depth0
,"equal",depth0&&depth0.type,"instance",options))||0===stack1)&&(buffer+=stack1),buffer})}),define("tpl!ui/resource/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="resource-list ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='">\n    <ul></ul>\n    <div class="more hidden">\n        <a href="#" class="btn-info small"><span class="icon-download"></span> '+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Load more",options):helperMissing.call(depth0,"__","Load more",options)))+"</a>\n    </div>\n</div>"})}),define("tpl!ui/resource/tpl/listNode",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",
escapeExpression=this.escapeExpression;return buffer+='<li data-uri="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.selected,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){return'class="selected"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' class="',stack1=(helper=helpers.state)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.state)===functionType?helper.call(depth0,{hash:{},data:data}):helper,
buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.accessMode,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+='data-access="',stack1=(helper=helpers.accessMode)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.accessMode)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n    <a href="#" title="',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</a>\n</li>"})}),define("tpl!ui/generis/validator/validator",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){
return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="ui-generis-validator"></div>'})}),define("css!ui/generis/validator/validator",[],function(){}),define("tpl!ui/generis/widget/widget",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<label for="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(
helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n    ',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.required,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <abbr title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"This field is required",options
):helperMissing.call(depth0,"__","This field is required",options)))+'">*</abbr>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</label>"})}),define("css!ui/generis/widget/widget",[],function(){}),define("tpl!ui/generis/widget/checkBox/checkBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program2(depth0,
data){return'\n                        checked="true"\n                        '}return buffer+='<div class="ui-generis-widget check-box">\n    <div class="left">\n        ',((stack1=self.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <div class="check-box-input">\n            ',((stack1=helpers.each.call(depth0,depth0&&depth0.range,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,function(depth0,data,depth1){var stack1,helper,options,buffer=""
;return buffer+='\n            <div class="option">\n                <label>\n                    <input\n                        type="checkbox"\n                        name="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(depth0):stack1)+'"\n                        value="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(depth0):stack1)+'"\n                        ',helper=helpers.includes||depth1&&depth1.includes,options={hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data},((stack1=helper?helper.call(depth0,depth1&&depth1.values,depth0&&depth0.uri,options
):helperMissing.call(depth0,"includes",depth1&&depth1.values,depth0&&depth0.uri,options))||0===stack1)&&(buffer+=stack1),buffer+='>\n                    <span class="icon-checkbox"></span>\n                    '+escapeExpression(typeof(stack1=depth0&&depth0.label)===functionType?stack1.apply(depth0):stack1)+"\n                </label>\n            </div>\n            "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </div>\n    </div>\n</div>"})}),define("tpl!ui/generis/widget/comboBox/comboBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="ui-generis-widget combo-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <select name="',stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.uri
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <option value="">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Choose a value...",options):helperMissing.call(depth0,"__","Choose a value...",options)))+"</option>\n            ",((stack1=helpers.each.call(depth0,depth0&&depth0.range,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,buffer="";return buffer+='\n            <option value="'+escapeExpression(typeof(stack1=depth0&&depth0.uri)===functionType?stack1.apply(depth0):stack1)+'">'+escapeExpression(
typeof(stack1=depth0&&depth0.label)===functionType?stack1.apply(depth0):stack1)+"</option>\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n        </select>\n    </div>\n</div>"})}),define("tpl!ui/generis/widget/hiddenBox/hiddenBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-widget hidden-box">\n    <div class="left">\n        ',((
stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper)+'" type="password">\n    </div>\n</div>\n\n<div class="ui-generis-widget hidden-box confirmation">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0&&depth0.confirmation,
helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="'+escapeExpression("function"==typeof(stack1=null==(stack1=depth0&&depth0.confirmation)||!1===stack1?stack1:stack1.uri)?stack1.apply(depth0):stack1)+'" type="password">\n    </div>\n</div>'})}),define("tpl!ui/generis/widget/textBox/textBox",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),partials=this.merge(partials,Handlebars.partials),data=data||{};var stack1,helper,buffer="",
escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-widget text-box">\n    <div class="left">\n        ',((stack1=this.invokePartial(partials["ui-generis-widget-label"],"ui-generis-widget-label",depth0,helpers,partials,data))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="right">\n        <input name="',buffer+=escapeExpression(stack1=(helper=helpers.uri)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.uri)?helper.call(depth0,{hash:{},data:data}):helper)+'" value="',buffer+=escapeExpression(stack1=(helper=helpers.value)?helper.call(depth0,{hash:{},data:data}
):"function"==typeof(helper=depth0&&depth0.value)?helper.call(depth0,{hash:{},data:data}):helper)+'">\n    </div>\n</div>'})}),define("tpl!ui/generis/form/form",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="ui-generis-form">\n    <h2>',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}
):helper,buffer+=escapeExpression(stack1)+'</h2>\n    <form action="',stack1=(helper=helpers.formAction)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.formAction)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" method="',stack1=(helper=helpers.formMethod)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.formMethod)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n        <fieldset></fieldset>\n        <div class="toolbar">\n            ',((stack1=helpers.if.call(depth0,depth0&&depth0.reset,{hash:{},inverse:this.noop,
fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n            <button type="reset" class="btn-neutral small">\n                <span class="icon-reset"/> ',stack1=(helper=helpers.resetText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.resetText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n            </button>\n            "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n            <button type="submit" class="btn-info small">\n                <span class="icon-save"/> ',stack1=(helper=helpers.submitText)?helper.call(depth0,{
hash:{},data:data}):typeof(helper=depth0&&depth0.submitText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"\n            </button>\n        </div>\n    </form>\n</div>"})}),define("css!ui/generis/form/form",[],function(){}),define("tpl!ui/resource/tpl/filters",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){return this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{},'<div class="filters">\n</div>'})}),define("tpl!ui/resource/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,
partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program4(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <a href="#" data-view-format="'+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.active,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=" ",((
stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='><span class="',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span></a>\n        '}function program5(depth0,data){return'class="active"'}function program7(depth0,data){var stack1,helper,buffer="";return buffer+='title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program10(depth0,data){var helper,options,buffer="";return buffer+='\n            <a href="#" class="filters-opener" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Advanced search, add filters",options):helperMissing.call(depth0,"__","Advanced search, add filters",options)))+'"><span class="icon-add"></span></a>\n            '}function program12(depth0,data){return"hidden"}function program14(depth0,data){return'\n        <div class="filters-container folded"></div>\n        '}
return buffer+='<div class="resource-selector ',((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){return"multiple"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.showContext,{hash:{},inverse:self.noop,fn:self.program(3,function(depth0,data){var stack1,buffer="";return buffer+='\n    <nav class="context">\n        <div class="class-context"></div>\n        ',((stack1=helpers.each.call(depth0,depth0&&depth0.formats,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n    </nav>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.showSelection,{hash:{},inverse:self.noop,fn:self.program(9,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <nav class="selection">\n        <div class="search">\n            <input type="text" placeholder="',stack1=(helper=helpers.searchPlaceholder)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.searchPlaceholder)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" />\n            ',((stack1=helpers.if.call(depth0,
depth0&&depth0.filters,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n        </div>\n        <div class="selection-control">\n            <a href="#" class="selection-toggle ',((stack1=helpers.unless.call(depth0,depth0&&depth0.switchMode,{hash:{},inverse:self.noop,fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Toggle multiple/single selection",options):helperMissing.call(depth0,"__","Toggle multiple/single selection",options))
)+'">\n                <span class="icon-multi-select"></span>\n            </a>\n            <label class="selection-indicator ',((stack1=helpers.unless.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n                <input type="checkbox">\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        ',((stack1=helpers.if.call(depth0,depth0&&depth0.filters,{hash:{},inverse:self.noop,fn:self.program(14,program14,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </nav>\n    "},data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+='\n\n    <main>\n        <span class="hidden no-results">',stack1=(helper=helpers.noResultsText)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.noResultsText)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</span>\n    </main>\n\n    ",((stack1=helpers.if.call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.noop,fn:self.program(16,function(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n    <footer>\n        <div class="get-selection">\n           <span>'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Selected",options):helperMissing.call(depth0,"__","Selected",options)))+" ",stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+' : </span><span class="selected-num">0</span>\n        </div>\n    </footer>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"})}),define("css!ui/resource/css/selector",[],function(){}),define("tpl!ui/loadingButton/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,
helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="",escapeExpression=this.escapeExpression;return buffer+='<button class="loading-button btn-',buffer+=escapeExpression((helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.type)?helper.call(depth0,{hash:{},data:data}):helper)+' small" type="button" title="',buffer+=escapeExpression((helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper
)+'">\n    <span class="spinner-icon icon-loop spinning"></span>\n    <span class="start-icon icon-',buffer+=escapeExpression((helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.icon)?helper.call(depth0,{hash:{},data:data}):helper)+'"></span>\n    <span class="action-label">',buffer+=escapeExpression((helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.label)?helper.call(depth0,{hash:{},data:data}):helper)+'</span>\n    <span class="terminated-label">',buffer+=escapeExpression((helper=helpers.terminatedLabel)?helper.call(depth0,{hash:{},data:data}
):"function"==typeof(helper=depth0&&depth0.terminatedLabel)?helper.call(depth0,{hash:{},data:data}):helper)+"</span>\n</button>"})}),define("css!ui/loadingButton/css/button",[],function(){}),define("tpl!ui/report/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var stack1,helper,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="component-report',((stack1=helpers.if.call(depth0,depth0&&depth0.noBorder,{hash:{},inverse:this.noop,fn:this.program(1,function(
depth0,data){return" no-border"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.detailsButtonVisible,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var helper,options,buffer="";return buffer+='\n    <label class="fold pseudo-label-box">\n        <span class="check-txt hide">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Hide detailed report",options):helperMissing.call(depth0,"__","Hide detailed report",options)))+'</span>\n        <span class="check-txt show">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Show detailed report",options):helperMissing.call(depth0,"__","Show detailed report",options)))+'</span>\n        <input type="checkbox"/>\n        <span class="icon-checkbox"></span>\n    </label>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="content">',stack1=(helper=helpers.content)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.content)?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</div>\n</div>"})}),define("tpl!ui/report/feedback",["handlebars"],function(hb){return hb.template(function(
Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="feedback-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+" ",((stack1=helpers.if.call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:this.program(3,function(depth0,data){return"leaf"},data),fn:this.program(1,
function(depth0,data){return"hierarchical"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='">\n    <span class="icon-',stack1=(helper=helpers.type)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.type)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.hasChildren,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){return" hierarchical-icon"},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"></span>\n    <div class="message">',options={hash:{},data:data},((stack1=(
helper=helpers.dompurify||depth0&&depth0.dompurify)?helper.call(depth0,depth0&&depth0.message,options):helperMissing.call(depth0,"dompurify",depth0&&depth0.message,options))||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    ",((stack1=helpers.each.call(depth0,depth0&&depth0.children,{hash:{},inverse:this.noop,fn:this.program(7,function(depth0,data){var stack1,buffer="";return buffer+="\n        ",((stack1=typeof depth0===functionType?depth0.apply(depth0):depth0)||0===stack1)&&(buffer+=stack1),buffer+="\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="actions">\n        ',((stack1=helpers.each.call(depth0,
depth0&&depth0.actions,{hash:{},inverse:this.noop,fn:this.program(9,function(depth0,data){var stack1,helper,buffer="";return buffer+='\n        <button data-trigger="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" class="action btn-info" title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"><span class="icon-',stack1=(helper=helpers.icon)?helper.call(
depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span>',stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</button>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n</div>"})}),define("tpl!ui/taskQueueButton/tpl/report",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<div class="task-report-container">\n    <div class="section-header flex-container-full">\n        <h2>',buffer+=(0,this.escapeExpression)((helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.title)?helper.call(depth0,{hash:{},data:data}):helper)+'</h2>\n    </div>\n    <div class="main-container flex-container-full report"></div>\n</div>'})}),define("css!ui/taskQueueButton/css/taskable",[],function(){}),define("tpl!ui/destination/tpl/selector",["handlebars"],function(hb){return hb.template(function(Handlebars,
depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="destination-selector">\n    ',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n    <h2>",stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</h2>\n    "},data),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    <div>\n        ",((stack1=helpers.if.call(depth0,depth0&&depth0.description,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <p>",stack1=(helper=helpers.description)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.description)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</p>\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='\n        <div class="selector-container"></div>\n        <div class="actions">\n        </div>\n    </div>\n</div>'})}),define("css!ui/destination/css/selector",[],function(){}),define("layout/actions/common",["module","jquery","i18n","lodash","context","layout/section","layout/actions/binder","layout/permissions","provider/resources","ui/destination/selector","uri","ui/feedback","ui/dialog/confirm","util/httpErrorParser"],function(module,$,__,_,appContext,section,binder,permissionsManager,resourceProviderFactory,destinationSelectorFactory,uri,feedback,confirmDialog,httpErrorParser){"use strict";var messages={confirmMove:__(
"The properties of the source class will be replaced by those of the destination class. This might result in a loss of metadata. Continue anyway?")},emptyPanel=function(){return section.current().updateContentBlock('<div class="main-container flex-container-form-main"></div>'),$(section.selected.panel).find(".main-container")};return function(){binder.register("load",function(actionContext){section.current().loadContentBlock(this.url,_.pick(actionContext,["uri","classUri","id"]))}),binder.register("loadClass",function(actionContext){section.current().loadContentBlock(this.url,{classUri:actionContext.classUri,id:uri.decode(actionContext.classUri)})}),
binder.register("subClass",function(actionContext){var classUri=uri.decode(actionContext.classUri),self=this;return new Promise(function(resolve,reject){$.ajax({url:self.url,type:"POST",data:{classUri:actionContext.classUri,id:classUri,type:"class"},dataType:"json",success:function(response){return response.uri?(actionContext.tree&&$(actionContext.tree).trigger("addnode.taotree",[{uri:uri.decode(response.uri),label:response.label,parent:uri.decode(actionContext.classUri),cssClass:"node-class"}]),resolve({uri:uri.decode(response.uri),label:response.label,classUri:uri.decode(actionContext.classUri),type:"class"})):reject(new Error(__(
"Adding the new class has failed")))},error:function(xhr,options,err){reject(httpErrorParser.parse(xhr,options,err))}})})}),binder.register("instanciate",function(actionContext){var self=this,classUri=uri.decode(actionContext.classUri);return new Promise(function(resolve,reject){$.ajax({url:self.url,type:"POST",data:{classUri:actionContext.classUri,id:classUri,type:"instance"},dataType:"json",success:function(response){return response.uri?(actionContext.tree&&$(actionContext.tree).trigger("addnode.taotree",[{uri:uri.decode(response.uri),label:response.label,parent:uri.decode(actionContext.classUri),cssClass:"node-instance"}]),resolve({uri:uri.decode(
response.uri),label:response.label,classUri:uri.decode(actionContext.classUri),type:"instance"})):reject(new Error(__("Adding the new resource has failed")))},error:function(xhr,options,err){reject(httpErrorParser.parse(xhr,options,err))}})})}),binder.register("duplicateNode",function(actionContext){var self=this;return new Promise(function(resolve,reject){$.ajax({url:self.url,type:"POST",data:{uri:actionContext.id,classUri:uri.decode(actionContext.classUri)},dataType:"json",success:function(response){return response.uri?(actionContext.tree&&$(actionContext.tree).trigger("addnode.taotree",[{uri:uri.decode(response.uri),label:response.label,parent:uri.decode(
actionContext.classUri),cssClass:"node-instance"}]),resolve({uri:uri.decode(response.uri),label:response.label,classUri:uri.decode(actionContext.classUri),type:"instance"})):reject(new Error(__("Node duplication has failed")))},error:function(xhr,options,err){reject(httpErrorParser.parse(xhr,options,err))}})})}),binder.register("removeNode",function(actionContext){var self=this,data={},tokenName=module.config().xsrfTokenName;return data.uri=uri.decode(actionContext.uri),data.classUri=uri.decode(actionContext.classUri),data.id=actionContext.id,data[tokenName]=$.cookie(tokenName),new Promise(function(resolve,reject){confirmDialog(__("Please confirm deletion"),
function(){$.ajax({url:self.url,type:"POST",data:data,dataType:"json",success:function(response){if(response.deleted)return actionContext.tree&&$(actionContext.tree).trigger("removenode.taotree",[{id:actionContext.uri||actionContext.classUri}]),resolve({uri:actionContext.uri||actionContext.classUri});reject(response.msg||__("Unable to delete the selected resource"))},error:function(xhr,options,err){reject(httpErrorParser.parse(xhr,options,err))}})},function(){reject({cancel:!0})})})}),binder.register("removeNodes",function(actionContexts){var classes,instances,self=this,tokenName=module.config().xsrfTokenName,confirmMessage="",data={};return _.isArray(
actionContexts)||(actionContexts=[actionContexts]),classes=_.filter(actionContexts,{type:"class"}),instances=_.filter(actionContexts,{type:"instance"}),data[tokenName]=$.cookie(tokenName),data.ids=_.pluck(actionContexts,"id"),1===actionContexts.length?confirmMessage=__("Please confirm deletion"):1<actionContexts.length&&(instances.length&&(confirmMessage=1===instances.length?__("an instance"):__("%s instances",instances.length)),classes.length&&(confirmMessage&&(confirmMessage+=__(" and ")),1===classes.length?confirmMessage=__("a class"):confirmMessage+=__("%s classes",classes.length)),confirmMessage=__("Please confirm deletion of %s.",confirmMessage)),
new Promise(function(resolve,reject){confirmDialog(confirmMessage,function(){$.ajax({url:self.url,type:"POST",data:data,dataType:"json",success:function(response){response.success&&response.deleted?resolve(response.deleted):reject(new Error(response.msg||__("Unable to delete the selected resources")))},error:function(xhr,options,err){reject(httpErrorParser.parse(xhr,options,err))}})},function(){reject({cancel:!0})})})}),binder.register("moveNode",function(actionContext){var data=_.pick(actionContext,["id","uri","destinationClassUri","confirmed"]);!function _moveNode(url){$.ajax({url:url,type:"POST",data:data,dataType:"json",success:function(response){
var message,i;if(response&&"diff"===response.status){for(message=__("Moving this element will replace the properties of the previous class by those of the destination class :"),message+="\n",i=0;i<response.data.length;i++)response.data[i].label&&(message+="- "+response.data[i].label+"\n");if(message+=__("Please confirm this operation.")+"\n",window.confirm(message))return data.confirmed=!0,_moveNode(url)}else if(response&&!0===response.status)return void $(actionContext.tree).trigger("openbranch.taotree",[{id:actionContext.destinationClassUri}]);$(actionContext.tree).trigger("rollback.taotree")}})}(this.url)}),binder.register("launchEditor",function(
actionContext){var data=_.pick(actionContext,["id"]);$.ajax({url:this.url,type:"GET",data:data,dataType:"html",success:function(response){var $response=$($.parseHTML(response,document,!0));$response.is('[data-content-target="wide"]')||$response.find('[data-content-target="wide"]').length?section.create({id:"authoring",name:__("Authoring"),url:this.url,content:$response,visible:!1}).show():section.updateContentBlock($response)}})}),binder.register("copyTo",function(actionContext){var $container=emptyPanel(),resourceProvider=resourceProviderFactory({copyTo:{url:this.url}});return new Promise(function(resolve,reject){destinationSelectorFactory($container,{
classUri:actionContext.rootClassUri,preventSelection:function(nodeUri,node,$node){return!(!($node.length&&"partial"===$node.data("access")||"denied"===$node.data("access"))||permissionsManager.hasPermission(nodeUri,"WRITE")||(feedback().warning(__("You are not allowed to write in the class %s",node.label)),0))}}).on("query",function(params){var self=this;params.classOnly=!0,resourceProvider.getResources(params,!0).then(function(resources){self.update(resources,params)}).catch(function(err){self.trigger("error",err)})}).on("select",function(destinationClassUri){var self=this;_.isEmpty(destinationClassUri)||(this.disable(),resourceProvider.copyTo(
actionContext.id,destinationClassUri).then(function(result){return result&&result.uri?(feedback().success(__("Resource copied")),actionContext.tree&&$(actionContext.tree).trigger("refresh.taotree",[result]),resolve(result)):reject(new Error(__("Unable to copy the resource")))}).catch(function(err){self.trigger("error",err)}))}).on("error",reject)})}),binder.register("moveTo",function(actionContext){var $container=emptyPanel(),tree=actionContext.tree,resourceProvider=resourceProviderFactory({moveTo:{url:this.url}});return _.isArray(actionContext)||(actionContext=[actionContext]),new Promise(function(resolve,reject){var rootClassUri=_.pluck(actionContext,
"rootClassUri").pop(),selectedUri=_.pluck(actionContext,"id");destinationSelectorFactory($container,{title:__("Move to"),actionName:__("Move"),icon:"move-item",classUri:rootClassUri,confirm:messages.confirmMove,preventSelection:function(nodeUri,node,$node){var uriList=[];return($node.length&&"partial"===$node.data("access")||"denied"===$node.data("access"))&&!permissionsManager.hasPermission(nodeUri,"WRITE")?(feedback().warning(__("You are not allowed to write in the class %s",node.label)),!0):(uriList=[nodeUri],$node.parents(".class").each(function(){this.dataset.uri!==rootClassUri&&uriList.push(this.dataset.uri)}),!!_.intersection(selectedUri,uriList
).length&&(feedback().warning(__("You cannot move the selected resources in the class %s",node.label)),!0))}}).on("query",function(params){var self=this;params.classOnly=!0,resourceProvider.getResources(params,!0).then(function(resources){self.update(resources,params)}).catch(function(err){self.trigger("error",err)})}).on("select",function(destinationClassUri){var self=this;_.isEmpty(destinationClassUri)||(this.disable(),resourceProvider.moveTo(selectedUri,destinationClassUri).then(function(results){var failed=[],success=[];return _.forEach(results,function(result,uri){var resource=_.find(actionContext,{uri:uri});result.success?success.push(resource
):failed.push(result.message)}),success.length?failed.length?feedback().warning(__("Some resources have not been moved: %s",failed.join(", "))):feedback().success(__("Resources moved")):feedback().error(__("Unable to move the resources")),tree&&$(tree).trigger("refresh.taotree",[destinationClassUri]),resolve(destinationClassUri)}).catch(function(err){self.trigger("error",err)}))}).on("error",reject)})})}}),define("layout/actions",["jquery","lodash","core/eventifier","core/promise","lib/uuid","layout/actions/binder","layout/actions/common","layout/permissions"],function($,_,eventifier,Promise,uuid,binder,commonActions,permissionsManager){"use strict"
;var actions={},resourceContext={};return eventifier({init:function($scope){$scope&&$scope.length?this.$scope=$scope:this.$scope=$(document),commonActions(),this._lookup(),this.updateContext(),this._listenUpdates(),this._bind()},_lookup:function(){var self=this;$(".action-bar .action",this.$scope).each(function(){var id,$this=$(this);if($this.data("action")){if($this.attr("id"))id=$this.attr("id");else{for(;id="action-"+uuid(8,16),self._actions[id];);$this.attr("id",id)}actions[id]={id:id,name:$this.attr("title"),binding:$this.data("action"),url:$("a",$this).attr("href"),context:$this.data("context"),multiple:$this.data("multiple"),rights:$this.data("rights"
),state:{disabled:$this.hasClass("disabled"),hidden:$this.hasClass("hidden"),active:$this.hasClass("active")}}}})},_bind:function(){var self=this,actionSelector=this.$scope.selector+" .action-bar .action";$(document).off("click",actionSelector).on("click",actionSelector,function(e){var selected;e.preventDefault(),(selected=actions[$(this).attr("id")])&&!1===selected.state.disabled&&!1===selected.state.hidden&&self.exec(selected)})},_listenUpdates:function(){var self=this,treeSelector=this.$scope.selector+" .tree";$(document).off("change.taotree.actions",treeSelector).on("change.taotree.actions",treeSelector,function(e,context){(context=context||{}).tree=this
,self.updateContext(context)})},updateContext:function(context){var hasClasses,hasInstances,current;context=context||{},_.isArray(context)?(hasClasses=_.some(context,{type:"class"}),hasInstances=_.some(context,{type:"instance"}),_.forEach(actions,function(action){var hasPermissionDenied=_.some(context,function(resource){return!permissionsManager.isContextAllowed(action.rights,resource)});context.length&&action.multiple&&!hasPermissionDenied&&"none"!==action.context&&("*"===action.context||"resource"===action.context||"instance"===action.context&&hasInstances&&!hasClasses||"class"===action.context&&hasClasses&&!hasInstances
)?action.state.hidden=!1:action.state.hidden=!0})):(current=context.type?context.type:context.uri?"instance":context.classUri?"class":"none",_.forEach(actions,function(action){var allowed=permissionsManager.isContextAllowed(action.rights,context);action.multiple||!1===allowed||"none"===current&&"*"!==action.context||"*"!==action.context&&"resource"!==action.context&&current!==action.context?action.state.hidden=!0:action.state.hidden=!1})),resourceContext=context,this.trigger("contextchange",context),this.updateState()},updateState:function(){_.forEach(actions,function(action,id){var $elt=$("#"+id);_.forEach(["hidden","disabled","active"],function(state){
!0===action.state[state]?$elt.addClass(state):$elt.removeClass(state)})})},exec:function(action,context){var self=this;if(_.isString(action)&&(action=_.isPlainObject(actions[action])?actions[action]:_.find(actions,{name:action})),_.isPlainObject(action))return _.forEach(actions,function(otherAction){otherAction.state.active=!1}),action.state.active=!0,this.updateState(),Promise.resolve(binder.exec(action,context||resourceContext)).then(function(actionData){var events=[action.id,action.binding];self.trigger(events.join(" "),context||resourceContext,actionData)}).catch(function(err){if(err&&err.cancel)return self.trigger("cancel",action.id);self.trigger(
"error",err)})},getBy:function(actionName){return _.isPlainObject(actions[actionName])?actions[actionName]:_.find(actions,{name:actionName})}})}),define("layout/nav",["jquery","lodash"],function($,_){"use strict";var _width,$body=$("body"),$navContainer=$("header.dark-bar"),$nav=$navContainer.find($("nav")),$mainMenu=$nav.find(".main-menu"),$settingsMenu=$nav.find(".settings-menu"),navIsOversized=!1,expandedMinWidth=(_width=$navContainer.find("img").parent().outerWidth(),$mainMenu.add($settingsMenu).each(function(){var oldDisplay=window.getComputedStyle(this,null).getPropertyValue("display");this.style.display="block",_width+=$(this).outerWidth(),
this.style.display=oldDisplay}),_width+20),checkHeight=function(){$mainMenu.length&&$settingsMenu.length&&($mainMenu.offset().top!==$settingsMenu.offset().top?($body.addClass("oversized-nav"),navIsOversized=!0):navIsOversized&&expandedMinWidth<=$navContainer.width()&&($body.removeClass("oversized-nav"),navIsOversized=!1))};return{init:function(){$("[data-action]",$nav).off("click").on("click",function(e){e.preventDefault();var binding=$(this).data("action");binding&&require([binding],function(controller){controller&&"function"==typeof controller.start&&controller.start()})}),checkHeight(),$(window).off("resize.navheight").on("resize.navheight",_.debounce(
function(){checkHeight()},100))}}}),define("tpl!ui/datatable/tpl/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;function program4(depth0,data){var stack1,helper;return stack1=(helper=helpers.empty)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.empty)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program6(
depth0,data,depth2){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.empty)===functionType?stack1.apply(depth0):stack1)}function program8(depth0,data){var stack1,helper;return stack1=(helper=helpers.available)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.available)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program10(depth0,data,depth2){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.labels
)||!1===stack1?stack1:stack1.available)===functionType?stack1.apply(depth0):stack1)}function program12(depth0,data){var stack1,helper;return stack1=(helper=helpers.loading)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.loading)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program14(depth0,data,depth2){var stack1;return escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.loading)===functionType?stack1.apply(depth0):stack1)}function program17(depth0,data){var stack1,buffer=""
;return buffer+='\n            <button class="btn-info small tool-',((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(20,program20,data),fn:self.program(18,program18,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.massAction,{hash:{},inverse:self.noop,fn:self.program(22,program22,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='>\n                <span class="icon-',((stack1=helpers.if.call(depth0,
depth0&&depth0.icon,{hash:{},inverse:self.program(28,program28,data),fn:self.program(26,program26,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='"></span> ',((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.program(32,program32,data),fn:self.program(30,program30,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </button>\n        "}function program18(depth0,data){var stack1,helper;return stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program20(depth0,
data){var stack1;return escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)}function program22(depth0,data){return" invisible"}function program24(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program26(depth0,data){var stack1,helper;return stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(
depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program28(depth0,data){var stack1;return(stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(20,program20,data),fn:self.program(18,program18,data),data:data}))||0===stack1?stack1:""}function program30(depth0,data){var stack1,helper;return stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)}function program32(depth0,data){var stack1;return(stack1=helpers.unless.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.noop,
fn:self.program(20,program20,data),data:data}))||0===stack1?stack1:""}function program34(depth0,data){return"\n                <col/>\n                "}function program41(depth0,data){return' class="actions"'}function program43(depth0,data){var stack1,helper,buffer="";return buffer+=' class="sortable" data-sort-by="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'" ',((stack1=helpers.if.call(depth0,depth0&&depth0.sorttype,{hash:{},inverse:self.noop,fn:self.program(44,program44,data),data:data}))||0===stack1)&&(
buffer+=stack1),buffer+=' tabindex="0"'}function program44(depth0,data){var stack1,helper,buffer="";return buffer+='data-sort-type="',stack1=(helper=helpers.sorttype)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.sorttype)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'}function program46(depth0,data){var stack1,helper,buffer="";return buffer+='\n                        <aside data-column="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1
)+'" class="filter column\n                            ',((stack1=helpers.if.call(depth0,depth0&&depth0.customFilter,{hash:{},inverse:self.program(49,program49,data),fn:self.program(47,program47,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                        </aside>\n                        "}function program47(depth0,data){var stack1,buffer="";return buffer+=' customInput" >\n                                ',((stack1=typeof(stack1=null==(stack1=depth0&&depth0.customFilter)||!1===stack1?stack1:stack1.template)===functionType?stack1.apply(depth0):stack1)||0===stack1)&&(buffer+=stack1),buffer+="\n                            "}
function program49(depth0,data){var stack1,helper,buffer="";return buffer+=' ">\n                                <input type="text" value="" name="filter[',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" placeholder="'+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.filterable)||!1===stack1?stack1:stack1.placeholder)===functionType?stack1.apply(depth0):stack1)+'">\n                                <button class="icon-find" type="button"></button>\n                            '}function program54(
depth0,data){var stack1,helper,buffer="";return buffer+='\n                        <td class="checkboxes"><input type="checkbox" name="cb[',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+']" value="1" /></td>\n                        '}function program56(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                            ",((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:self.programWithDepth(73,program73,data,depth1),fn:self.programWithDepth(57,program57,data,depth0,depth1
),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        "}function program57(depth0,data,depth1,depth2){var stack1,helper,buffer="";return buffer+='\n                            <td class="actions ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n                                ',((stack1=helpers.each.call(depth0,depth1&&depth1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(58,program58,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                            </td>\n                            "}function program58(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                    ",((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(71,program71,data),fn:self.programWithDepth(59,program59,data,depth3),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                                "}function program59(depth0,data,depth4){var stack1,buffer="";return buffer+="\n                                        ",((stack1=helpers.with.call(depth0,depth4,{hash:{},inverse:self.noop,fn:self.programWithDepth(60,program60,data,
depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                    "}function program60(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                            ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(61,program61,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                        "}function program61(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.if.call(depth0,depth2&&depth2.disabled,{hash:{},
inverse:self.programWithDepth(68,program68,data,depth2),fn:self.programWithDepth(62,program62,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                            "}function program62(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                    ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(63,program63,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                                "}function program63(depth0,data){var stack1,helper,buffer=""
;return buffer+='\n                                <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' disabled="disabled">',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,
depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                    "}function program64(depth0,data){var stack1,helper,buffer="";return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '}function program66(depth0,data){var stack1,helper,buffer="";return buffer+=" ",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(
helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)}function program68(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                    ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(69,program69,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                                "}function program69(depth0,data){var stack1,helper,buffer="";return buffer+='\n                                <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},
data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="</button>\n                                                    "}function program71(depth0,data){var stack1,buffer="";return buffer+='\n                                <button class="btn-info small '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((
stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                    "}function program73(depth0,data,depth2){var stack1,helper,options,buffer="";return buffer+='\n                            <td class="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">',options={hash:{},data:data},stack1=(helper=helpers.property||depth0&&depth0.property)?helper.call(depth0,
depth0&&depth0.id,depth2,options):helperMissing.call(depth0,"property",depth0&&depth0.id,depth2,options),options={hash:{},data:data},((stack1=(helper=helpers.dompurify||depth0&&depth0.dompurify)?helper.call(depth0,stack1,options):helperMissing.call(depth0,"dompurify",stack1,options))||0===stack1)&&(buffer+=stack1),buffer+="</td>\n                            "}function program75(depth0,data,depth2){var stack1,buffer="";return buffer+='\n                        <td class="actions">\n                            ',((stack1=helpers.each.call(depth0,null==(stack1=depth2&&depth2.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,
fn:self.programWithDepth(76,program76,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                        </td>\n                        "}function program76(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                ",((stack1=helpers.if.call(depth0,depth0&&depth0.id,{hash:{},inverse:self.program(86,program86,data),fn:self.programWithDepth(77,program77,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                            "}function program77(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                                    ",((stack1=helpers.with.call(depth0,depth2
,{hash:{},inverse:self.noop,fn:self.programWithDepth(78,program78,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                "}function program78(depth0,data,depth1){var stack1,buffer="";return buffer+="\n                                        ",((stack1=helpers.unless.call(depth0,depth1&&depth1.hidden,{hash:{},inverse:self.noop,fn:self.programWithDepth(79,program79,data,depth1),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                    "}function program79(depth0,data,depth2){var stack1,buffer="";return buffer+="\n                                            ",((stack1=helpers.if.call(
depth0,depth2&&depth2.disabled,{hash:{},inverse:self.programWithDepth(83,program83,data,depth2),fn:self.programWithDepth(80,program80,data,depth2),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                        "}function program80(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(81,program81,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                            "}function program81(depth0,data){var stack1,helper,buffer=""
;return buffer+='\n                            <button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=' disabled="disabled">',((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,
depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                "}function program83(depth0,data,depth3){var stack1,buffer="";return buffer+="\n                                                ",((stack1=helpers.with.call(depth0,depth3,{hash:{},inverse:self.noop,fn:self.program(84,program84,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                                            "}function program84(depth0,data){var stack1,helper,buffer="";return buffer+='\n                            <button class="btn-info small '
,stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:self.noop,fn:self.program(64,program64,data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:self.noop,fn:self.program(66,program66,data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+="</button>\n                                                "}function program86(depth0,data){var stack1,buffer="";return buffer+='\n                            <button class="btn-info small '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"><span class="icon-'+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+'"></span> '+escapeExpression(typeof(stack1=null==data||!1===data?data:data.key)===functionType?stack1.apply(depth0):stack1)+"</button>\n                                "}
function program89(depth0,data){var stack1,buffer="";return buffer+='\n                <div class="empty">\n                    '+escapeExpression(typeof(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.emptyText)===functionType?stack1.apply(depth0):stack1)+"\n                </div>\n            "}return buffer+='<div class="datatable-wrapper">\n\n    ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.filter,{hash:{},inverse:self.noop,fn:self.program(1,function(depth0,data){var stack1,buffer="";return buffer+='\n    <aside class="filter" data-column="'+escapeExpression(typeof(
stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.filter)||!1===stack1?stack1:stack1.columns)===functionType?stack1.apply(depth0):stack1)+'">\n        <input type="text" value="" name="filter" placeholder="'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.filter)===functionType?stack1.apply(depth0):stack1)+'">\n        <button class="icon-find" type="button"></button>\n    </aside>\n    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.with.call(depth0,null==(stack1=depth0&&depth0.options
)||!1===stack1?stack1:stack1.status,{hash:{},inverse:self.noop,fn:self.programWithDepth(3,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n    <h2>\n        <span class="empty-list hidden">',((stack1=helpers.if.call(depth0,depth0&&depth0.empty,{hash:{},inverse:self.programWithDepth(6,program6,data,depth1),fn:self.program(4,program4,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='</span>\n        <span class="available-list hidden"><span class="text">',((stack1=helpers.if.call(depth0,depth0&&depth0.available,{hash:{},inverse:self.programWithDepth(10,program10,data,depth1),fn:self.program(8,program8,data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+='</span>: <span class="count">',stack1=(helper=helpers.count)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.count)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</span></span>\n        <span class="loading">',((stack1=helpers.if.call(depth0,depth0&&depth0.loading,{hash:{},inverse:self.programWithDepth(14,program14,data,depth1),fn:self.program(12,program12,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="...</span>\n    </h2>\n    "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n    ",((stack1=helpers.if.call(
depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.tools,{hash:{},inverse:self.noop,fn:self.program(16,function(depth0,data){var stack1,buffer="";return buffer+='\n    <aside class="action-bar clearfix">\n        ',((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.tools,{hash:{},inverse:self.noop,fn:self.program(17,program17,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n    </aside>\n    "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+='\n\n    <div class="datatable-pagination-top"></div>\n\n    <div class="datatable-container">\n        <table class="matrix datatable">\n            <colgroup>\n                ',((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(34,program34,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.program(34,program34,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.program(36,function(depth0,data){return"\n                </col>\n                "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </colgroup>\n            <thead>\n                <tr>\n                    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(38,function(depth0,data){
return'\n                    <th class="checkboxes"><input type="checkbox" name="checkall" value="1" /></th>\n                    '},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.program(40,function(depth0,data){var stack1,helper,buffer="";return buffer+="\n                    <th",((stack1=helpers.if.call(depth0,depth0&&depth0.type,{hash:{},inverse:self.noop,fn:self.program(41,program41,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">\n                        <div ",((
stack1=helpers.if.call(depth0,depth0&&depth0.sortable,{hash:{},inverse:self.noop,fn:self.program(43,program43,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</div>\n                        ",((stack1=helpers.if.call(depth0,depth0&&depth0.filterable,{hash:{},inverse:self.noop,fn:self.program(46,program46,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    </th>\n                    "},data),data:data}))||0===stack1
)&&(buffer+=stack1),buffer+="\n                    ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.program(51,function(depth0,data){var stack1,buffer="";return buffer+='\n                    <th class="actions">'+escapeExpression(typeof(stack1=null==(stack1=null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.labels)||!1===stack1?stack1:stack1.actions)===functionType?stack1.apply(depth0):stack1)+"</th>\n                    "},data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n                </tr>\n            </thead>\n            <tbody>\n                ",((stack1=helpers.each.call(depth0,null==(stack1=depth0&&depth0.dataset)||!1===stack1?stack1:stack1.data,{hash:{},inverse:self.noop,fn:self.programWithDepth(53,function(depth0,data,depth1){var stack1,helper,buffer="";return buffer+='\n                    <tr data-item-identifier="',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n                        ',((stack1=helpers.if.call(depth0,null==(
stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.selectable,{hash:{},inverse:self.noop,fn:self.program(54,program54,data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",((stack1=helpers.each.call(depth0,null==(stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.model,{hash:{},inverse:self.noop,fn:self.programWithDepth(56,program56,data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n\n                        ",((stack1=helpers.if.call(depth0,null==(stack1=depth1&&depth1.options)||!1===stack1?stack1:stack1.actions,{hash:{},inverse:self.noop,fn:self.programWithDepth(75,program75,data,depth1),
data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n                    </tr>\n                "},data,depth0),data:data}))||0===stack1)&&(buffer+=stack1),buffer+="\n            </tbody>\n        </table>\n        ",((stack1=helpers.unless.call(depth0,null==(stack1=depth0&&depth0.dataset)||!1===stack1?stack1:stack1.data,{hash:{},inverse:self.noop,fn:self.program(88,function(depth0,data){var stack1,buffer="";return buffer+="\n            ",((stack1=helpers.if.call(depth0,null==(stack1=depth0&&depth0.options)||!1===stack1?stack1:stack1.emptyText,{hash:{},inverse:self.noop,fn:self.program(89,program89,data),data:data}))||0===stack1)&&(buffer+=stack1),
buffer+="\n        "},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+='\n    </div>\n    <div class="datatable-pagination-bottom"></div>\n</div>'})}),define("tpl!ui/datatable/tpl/button",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<button class="btn-info small ',stack1=(helper=helpers.id)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{
hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"',((stack1=helpers.if.call(depth0,depth0&&depth0.title,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,data){var stack1,helper,buffer="";return buffer+=' title="',stack1=(helper=helpers.title)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.title)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"'},data),data:data}))||0===stack1)&&(buffer+=stack1),buffer+=">",((stack1=helpers.if.call(depth0,depth0&&depth0.icon,{hash:{},inverse:this.noop,fn:this.program(3,function(depth0,data){var stack1,helper,buffer=""
;return buffer+='<span class="icon-',stack1=(helper=helpers.icon)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.icon)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'"></span> '},data),data:data}))||0===stack1)&&(buffer+=stack1),((stack1=helpers.if.call(depth0,depth0&&depth0.label,{hash:{},inverse:this.noop,fn:this.program(5,function(depth0,data){var stack1,helper;return stack1=(helper=helpers.label)?helper.call(depth0,{hash:{},data:data}):typeof(helper=depth0&&depth0.label)===functionType?helper.call(depth0,{hash:{},data:data}):helper,escapeExpression(stack1)},data),data:data})
)||0===stack1)&&(buffer+=stack1),buffer+="</button>"})}),define("tpl!ui/pagination/providers/tpl/pages",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="grid-row clearfix pagination">\n    <ul class="pages">\n        <li class="first-page"><span class="icon-fast-backward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"First page"
,options):helperMissing.call(depth0,"__","First page",options)))+'"></span></li>\n        <li class="previous"><span class="icon-backward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+'"></span></li>\n        <li class="next"><span class="icon-forward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options))
)+'"></span></li>\n        <li class="last-page"><span class="icon-fast-forward" title="'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Last page",options):helperMissing.call(depth0,"__","Last page",options)))+'"></span></li>\n    </ul>\n</div>'})}),define("tpl!ui/pagination/providers/tpl/pages/page",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,buffer="";return buffer+='<li class="page"><span>',buffer+=(0,this.escapeExpression)((
helper=helpers.page)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.page)?helper.call(depth0,{hash:{},data:data}):helper)+"</span></li>"})}),define("tpl!ui/pagination/providers/tpl/simple",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],data=data||{};var helper,options,buffer="",helperMissing=(helpers=this.merge(helpers,Handlebars.helpers)).helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="grid-row clearfix pagination">\n    <div class="col-6">'+escapeExpression((options={hash:{},data:data},(
helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Page",options):helperMissing.call(depth0,"__","Page",options)))+' <strong class="page">',buffer+=escapeExpression((helper=helpers.activePage)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(helper=depth0&&depth0.activePage)?helper.call(depth0,{hash:{},data:data}):helper)+"</strong> "+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+' <span class="total">',buffer+=escapeExpression((helper=helpers.totalPages)?helper.call(depth0,{hash:{},data:data}):"function"==typeof(
helper=depth0&&depth0.totalPages)?helper.call(depth0,{hash:{},data:data}):helper)+'</span></div>\n    <div class="col-6 txt-rgt">\n        <button class="btn-info small"><span class="icon-backward"></span>'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Previous",options):helperMissing.call(depth0,"__","Previous",options)))+'</button>\n        <button class="btn-info small">'+escapeExpression((options={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Next",options):helperMissing.call(depth0,"__","Next",options))
)+'<span class="icon-forward r"></span></button>\n    </div>\n</div>'})}),define("layout/search",["jquery","lodash","i18n","layout/section","layout/actions","ui/feedback","ui/datatable"],function($,_,__,section,actionManager,feedback){"use strict";return{init:function(){var searchHandler,running=!1,$container=$(".action-bar .search-area"),$searchInput=$("input",$container),$searchBtn=$("button",$container);$container&&$container.length&&(searchHandler=_.throttle(function(query){!1===running&&(running=!0,$.ajax({url:$container.data("url"),type:"POST",data:{query:query},dataType:"json"}).done(function(response){var data,$tableContainer
;response&&response.result&&!0===response.result?(data=response,$tableContainer=$('<div class="flex-container-full"></div>'),section.updateContentBlock($tableContainer),$tableContainer.datatable({url:data.url,model:_.values(data.model),actions:{open:function(id){actionManager.trigger("refresh",{uri:id})}},params:{params:data.params,filters:data.filters,rows:20}})):feedback().warning(__("No results found"))}).complete(function(){running=!1}))},100),$searchBtn.off("click").on("click",function(e){e.preventDefault(),searchHandler($searchInput.val())}),$searchInput.off("keypress").on("keypress",function(e){var query=$searchInput.val();13===e.which&&(
e.preventDefault(),searchHandler(query))}))}}}),function(name,definition,global){"use strict";"function"==typeof define?define("lib/store/idbstore",definition):"undefined"!=typeof module&&module.exports?module.exports=definition():global.IDBStore=definition()}(0,function(){"use strict";var defaultErrorHandler=function(error){throw error},defaultSuccessHandler=function(){},defaults={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:defaultErrorHandler,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},IDBStore=function(kwArgs,onStoreReady){
for(var key in void 0===onStoreReady&&"function"==typeof kwArgs&&(onStoreReady=kwArgs),"[object Object]"!=Object.prototype.toString.call(kwArgs)&&(kwArgs={}),defaults)this[key]=void 0!==kwArgs[key]?kwArgs[key]:defaults[key];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,onStoreReady&&(this.onStoreReady=onStoreReady);var env="object"==typeof window?window:self,availableImplementations=this.implementationPreference.filter(function(implName){return implName in env});this.implementation=availableImplementations[0],this.idb=env[this.implementation],this.keyRange=env.IDBKeyRange||env.webkitIDBKeyRange||env.mozIDBKeyRange,
this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},proto={constructor:IDBStore,version:"1.7.0",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var openRequest=this.idb.open(this.dbName,this.dbVersion),preventSuccessCallback=!1;openRequest.onerror=function(error){var gotVersionErr=!1
;"error"in error.target?gotVersionErr="VersionError"==error.target.error.name:"errorCode"in error.target&&(gotVersionErr=12==error.target.errorCode),gotVersionErr?this.onError(new Error("The version number provided is lower than the existing one.")):this.onError(error)}.bind(this),openRequest.onsuccess=function(event){if(!preventSuccessCallback)if(this.db)this.onStoreReady();else if(this.db=event.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var emptyTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=emptyTransaction.objectStore(this.storeName)
;var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(!indexName)return preventSuccessCallback=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(preventSuccessCallback=!0,this.onError(new Error('Cannot modify index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),existingIndexes.splice(existingIndexes.indexOf(indexName),1)
}else preventSuccessCallback=!0,this.onError(new Error('Cannot create new index "'+indexName+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),existingIndexes.length&&(preventSuccessCallback=!0,this.onError(new Error('Cannot delete index(es) "'+existingIndexes.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),preventSuccessCallback||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),
openRequest.onupgradeneeded=function(event){if(this.db=event.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=event.target.transaction.objectStore(this.storeName);else{var optionalParameters={autoIncrement:this.autoIncrement};null!==this.keyPath&&(optionalParameters.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,optionalParameters)}var existingIndexes=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(indexData){var indexName=indexData.name;if(indexName||(preventSuccessCallback=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(
indexData),this.hasIndex(indexName)){var actualIndex=this.store.index(indexName);this.indexComplies(actualIndex,indexData)||(this.store.deleteIndex(indexName),this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})),existingIndexes.splice(existingIndexes.indexOf(indexName),1)}else this.store.createIndex(indexName,indexData.keyPath,{unique:indexData.unique,multiEntry:indexData.multiEntry})},this),existingIndexes.length&&existingIndexes.forEach(function(_indexName){this.store.deleteIndex(_indexName)},this)}.bind(this)},deleteDatabase:function(onSuccess,onError){if(this.idb.deleteDatabase){this.db.close()
;var deleteRequest=this.idb.deleteDatabase(this.dbName);deleteRequest.onsuccess=onSuccess,deleteRequest.onerror=onError}else onError(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(key,value,onSuccess,onError){null!==this.keyPath&&(onError=onSuccess,onSuccess=value,value=key),onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var putRequest,hasSuccess=!1,result=null,putTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);return putTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},putTransaction.onabort=onError,putTransaction.onerror=onError,(
putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),putTransaction.objectStore(this.storeName).put(value)):putTransaction.objectStore(this.storeName).put(value,key)).onsuccess=function(event){hasSuccess=!0,result=event.target.result},putRequest.onerror=onError,putTransaction},get:function(key,onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,getTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);getTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getTransaction.onabort=onError,getTransaction.onerror=onError
;var getRequest=getTransaction.objectStore(this.storeName).get(key);return getRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getRequest.onerror=onError,getTransaction},remove:function(key,onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,removeTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);removeTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},removeTransaction.onabort=onError,removeTransaction.onerror=onError;var deleteRequest=removeTransaction.objectStore(this.storeName).delete(key)
;return deleteRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},deleteRequest.onerror=onError,removeTransaction},batch:function(dataArray,onSuccess,onError){if(onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),"[object Array]"!=Object.prototype.toString.call(dataArray))onError(new Error("dataArray argument must be of type Array."));else if(0===dataArray.length)return onSuccess(!0);var count=dataArray.length,called=!1,hasSuccess=!1,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(hasSuccess)},
batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(){0!==--count||called||(hasSuccess=called=!0)};return dataArray.forEach(function(operation){var type=operation.type,key=operation.key,value=operation.value,onItemError=function(err){batchTransaction.abort(),called||(called=!0,onError(err,type,key))};if("remove"==type){var deleteRequest=batchTransaction.objectStore(this.storeName).delete(key);deleteRequest.onsuccess=onItemSuccess,deleteRequest.onerror=onItemError}else if("put"==type){var putRequest;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(value),batchTransaction.objectStore(this.storeName).put(
value)):batchTransaction.objectStore(this.storeName).put(value,key)).onsuccess=onItemSuccess,putRequest.onerror=onItemError}},this),batchTransaction},putBatch:function(dataArray,onSuccess,onError){var batchData=dataArray.map(function(item){return{type:"put",value:item}});return this.batch(batchData,onSuccess,onError)},upsertBatch:function(dataArray,options,onSuccess,onError){"function"==typeof options&&(onError=onSuccess=options,options={}),onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),options||(options={}),"[object Array]"!=Object.prototype.toString.call(dataArray)&&onError(new Error(
"dataArray argument must be of type Array."));var keyField=options.keyField||this.keyPath,count=dataArray.length,called=!1,hasSuccess=!1,index=0,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);batchTransaction.oncomplete=function(){hasSuccess?onSuccess(dataArray):onError(!1)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){dataArray[index++][keyField]=event.target.result,0!==--count||called||(hasSuccess=called=!0)};return dataArray.forEach(function(record){var putRequest,key=record.key;(putRequest=null!==this.keyPath?(this._addIdPropertyIfNeeded(record),
batchTransaction.objectStore(this.storeName).put(record)):batchTransaction.objectStore(this.storeName).put(record,key)).onsuccess=onItemSuccess,putRequest.onerror=function(err){batchTransaction.abort(),called||(called=!0,onError(err))}},this),batchTransaction},removeBatch:function(keyArray,onSuccess,onError){var batchData=keyArray.map(function(key){return{type:"remove",key:key}});return this.batch(batchData,onSuccess,onError)},getBatch:function(keyArray,onSuccess,onError,arrayType){if(onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler),arrayType||(arrayType="sparse"),"[object Array]"!=Object.prototype.toString.call(keyArray)
)onError(new Error("keyArray argument must be of type Array."));else if(0===keyArray.length)return onSuccess([]);var data=[],count=keyArray.length,hasSuccess=!1,result=null,batchTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);batchTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},batchTransaction.onabort=onError,batchTransaction.onerror=onError;var onItemSuccess=function(event){event.target.result||"dense"==arrayType?data.push(event.target.result):"sparse"==arrayType&&data.length++,0===--count&&(hasSuccess=!0,result=data)};return keyArray.forEach(function(key){var getRequest=batchTransaction.objectStore(
this.storeName).get(key);getRequest.onsuccess=onItemSuccess,getRequest.onerror=function(err){!0,onError(result=err),batchTransaction.abort()}},this),batchTransaction},getAll:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var getAllTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY),store=getAllTransaction.objectStore(this.storeName);return store.getAll?this._getAllNative(getAllTransaction,store,onSuccess,onError):this._getAllCursor(getAllTransaction,store,onSuccess,onError),getAllTransaction},_getAllNative:function(getAllTransaction,store,onSuccess,onError){var hasSuccess=!1
,result=null;getAllTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var getAllRequest=store.getAll();getAllRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},getAllRequest.onerror=onError},_getAllCursor:function(getAllTransaction,store,onSuccess,onError){var all=[],hasSuccess=!1,result=null;getAllTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},getAllTransaction.onabort=onError,getAllTransaction.onerror=onError;var cursorRequest=store.openCursor();cursorRequest.onsuccess=function(event){var cursor=event.target.result
;cursor?(all.push(cursor.value),cursor.continue()):(hasSuccess=!0,result=all)},cursorRequest.onError=onError},clear:function(onSuccess,onError){onError||(onError=defaultErrorHandler),onSuccess||(onSuccess=defaultSuccessHandler);var hasSuccess=!1,result=null,clearTransaction=this.db.transaction([this.storeName],this.consts.READ_WRITE);clearTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},clearTransaction.onabort=onError,clearTransaction.onerror=onError;var clearRequest=clearTransaction.objectStore(this.storeName).clear();return clearRequest.onsuccess=function(event){hasSuccess=!0,result=event.target.result},
clearRequest.onerror=onError,clearTransaction},_addIdPropertyIfNeeded:function(dataObj){void 0===dataObj[this.keyPath]&&(dataObj[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(indexName){return this.store.indexNames.contains(indexName)},normalizeIndexData:function(indexData){indexData.keyPath=indexData.keyPath||indexData.name,indexData.unique=!!indexData.unique,indexData.multiEntry=!!indexData.multiEntry},indexComplies:function(actual,expected){return["keyPath","unique","multiEntry"].every(function(key){if("multiEntry"==key&&void 0===actual[key]&&!1===expected[key])return!0;if(
"keyPath"!=key||"[object Array]"!=Object.prototype.toString.call(expected[key]))return expected[key]==actual[key];var exp=expected.keyPath,act=actual.keyPath;if("string"==typeof act)return exp.toString()==act;if("function"!=typeof act.contains&&"function"!=typeof act.indexOf)return!1;if(act.length!==exp.length)return!1;for(var i=0,m=exp.length;i<m;i++)if(!(act.contains&&act.contains(exp[i])||act.indexOf(-1!==exp[i])))return!1;return!0})},iterate:function(onItem,options){var directionType="desc"==(options=mixin({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:defaultErrorHandler,limit:1/0,offset:0,
allowItemRejection:!1},options||{})).order.toLowerCase()?"PREV":"NEXT";options.filterDuplicates&&(directionType+="_NO_DUPLICATE");var hasSuccess=!1,cursorTransaction=this.db.transaction([this.storeName],this.consts[options.writeAccess?"READ_WRITE":"READ_ONLY"]),cursorTarget=cursorTransaction.objectStore(this.storeName);options.index&&(cursorTarget=cursorTarget.index(options.index));var recordCount=0;cursorTransaction.oncomplete=function(){hasSuccess?options.onEnd?options.onEnd():onItem(null):options.onError(null)},cursorTransaction.onabort=options.onError,cursorTransaction.onerror=options.onError;var cursorRequest=cursorTarget.openCursor(options.keyRange,
this.consts[directionType]);return cursorRequest.onerror=options.onError,cursorRequest.onsuccess=function(event){var cursor=event.target.result;if(cursor)if(options.offset)cursor.advance(options.offset),options.offset=0;else{var onItemReturn=onItem(cursor.value,cursor,cursorTransaction);options.allowItemRejection&&!1===onItemReturn||recordCount++,options.autoContinue&&(recordCount+options.offset<options.limit?cursor.continue():hasSuccess=!0)}else hasSuccess=!0},cursorTransaction},query:function(onSuccess,options){var result=[],processedItems=0;return(options=options||{}).autoContinue=!0,options.writeAccess=!1,options.allowItemRejection=!!options.filter,
options.onEnd=function(){onSuccess(result,processedItems)},this.iterate(function(item){processedItems++;var accept=!options.filter||options.filter(item);return!1!==accept&&result.push(item),accept},options)},count:function(onSuccess,options){var onError=(options=mixin({index:null,keyRange:null},options||{})).onError||defaultErrorHandler,hasSuccess=!1,result=null,cursorTransaction=this.db.transaction([this.storeName],this.consts.READ_ONLY);cursorTransaction.oncomplete=function(){(hasSuccess?onSuccess:onError)(result)},cursorTransaction.onabort=onError,cursorTransaction.onerror=onError;var cursorTarget=cursorTransaction.objectStore(this.storeName)
;options.index&&(cursorTarget=cursorTarget.index(options.index));var countRequest=cursorTarget.count(options.keyRange);return countRequest.onsuccess=function(evt){hasSuccess=!0,result=evt.target.result},countRequest.onError=onError,cursorTransaction},makeKeyRange:function(options){var keyRange,hasLower=void 0!==options.lower,hasUpper=void 0!==options.upper;switch(!0){case void 0!==options.only:keyRange=this.keyRange.only(options.only);break;case hasLower&&hasUpper:keyRange=this.keyRange.bound(options.lower,options.upper,options.excludeLower,options.excludeUpper);break;case hasLower:keyRange=this.keyRange.lowerBound(options.lower,options.excludeLower);break
;case hasUpper:keyRange=this.keyRange.upperBound(options.upper,options.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return keyRange}},empty={};function mixin(target,source){var name,s;for(name in source)(s=source[name])!==empty[name]&&s!==target[name]&&(target[name]=s);return target}return IDBStore.prototype=proto,IDBStore.version=proto.version,IDBStore},this),define("layout/tree/provider/jstree",["jquery","lodash","i18n","context","core/store","core/promise","util/url","layout/generisRouter","layout/actions","layout/section","layout/permissions","ui/feedback",
"uri","jquery.tree"],function($,_,__,context,store,Promise,urlUtil,generisRouter,actionManager,sectionManager,permissionsManager,feedback,uri){"use strict";return{name:"jstree",init:function($container,options){var lastOpened,lastSelected,moreNode={data:__("More"),type:"more",attributes:{class:"more"}},serverParams=_.defaults(options.serverParameters||{},{extension:context.shownExtension,perspective:context.shownStructure,section:context.section,classUri:options.rootClassUri?options.rootClassUri:void 0,hideInstances:options.hideInstances||0,filter:"*",offset:0,limit:30}),events={refresh:function(data){var treeState,node,tree=$.tree.reference($container);if(
tree){if(data&&data.loadNode&&(node=$container.find('[data-uri="'+data.loadNode+'"]')).length)return void tree.select_branch(node);treeState=_.merge($container.data("tree-state")||{},data),treeState=_.omit(treeState,"selectNode"),data&&data.loadNode?(tree.deselect_branch(tree.selected),tree.settings.selected=!1,treeState.selectNode=data.loadNode):data&&data.selectNode&&(tree.deselect_branch(tree.selected),tree.settings.selected=!1),setTreeState(treeState),tree.refresh()}},rollback:function(){var treeState,tree=$.tree.reference($container);tree&&((treeState=$container.data("tree-state")).rollback?(tree.rollback(treeState.rollback),setTreeState(_.omit(
treeState,"rollback"))):$container.trigger("refresh.taotree"))},addnode:function(data){var tree=$.tree.reference($container),parentNode=tree.get_node($("#"+uri.encode(data.parent),$container).get(0)),params=_.clone(serverParams);params.classUri=data.parent,"node-class"===data.cssClass?params.hideInstances=1:params.loadNode=data.uri,$.ajax(tree.settings.data.opts.url,{type:tree.settings.data.opts.method,dataType:tree.settings.data.type,async:tree.settings.data.async,data:params,success:function(response){var treeData=getTreeData(response),items=treeData.children||treeData,node=_.filter(items,function(child){
return child.attributes&&child.attributes["data-uri"]===data.uri});node.length&&tree.select_branch(tree.create(node[0],parentNode))}})},removenode:function(data){var tree=$.tree.reference($container),node=tree.get_node($("#"+data.id,$container).get(0));tree.remove(node)},selectnode:function(data){var tree=$.tree.reference($container),node=tree.get_node($("#"+data.id,$container).get(0));$("li a",$container).removeClass("clicked"),tree.select_branch(node)},openbranch:function(data){var tree=$.tree.reference($container),node=tree.get_node($("#"+data.id,$container).get(0));$("li a",$container).removeClass("clicked"),tree.open_branch(node)}},treeOptions={data:{
type:"json",async:!0,opts:{method:"GET",url:options.url}},ui:{theme_name:"css",theme_path:context.taobase_www+"js/lib/jsTree/themes/css/style.css"},types:{default:{renameable:!1,deletable:!0,creatable:!0,draggable:function($node){return $node.hasClass("node-instance")&&!$node.hasClass("node-undraggable")&&options.actions&&options.actions.moveInstance}}},callback:{ondelete:function(){$container.trigger("delete.taotree",Array.prototype.slice.call(arguments))},beforedata:function($node){var treeData=$container.data("tree-state"),params=_.clone(serverParams);return $node&&$node.length&&(params.classUri=$node.data("uri")),lastSelected&&(
params.selected=lastSelected),treeData&&(_.isString(treeData.filter)&&treeData.filter.length&&(params.filter=treeData.filter,treeData=_.omit(treeData,"filter")),_.isString(treeData.loadNode)&&treeData.loadNode.length&&(params.selected=treeData.loadNode,treeData.selectNode=uri.encode(treeData.loadNode),treeData=_.omit(treeData,"loadNode")),setTreeState(treeData)),params},ondata:function(data){var treeData;return data.error?(feedback().error(data.error),[]):((treeData=getTreeData(data)).children&&(treeData.state="open"),computeSelectionAccess(treeData),needMore(treeData),addTitle(treeData),treeData)},onload:function(tree){var $lastSelected,$selectNode,
$firstClass=$(".node-class:not(.private):first",$container),$firstInstance=$(".node-instance:not(.private):first",$container),selectNode=($container.data("tree-state")||{}).selectNode||options.selectNode,nodeSelection=function(){if(selectNode){if(($selectNode=$("#"+selectNode,$container)).length&&!$selectNode.hasClass("private"))return tree.select_branch($selectNode)}else if(void 0!==tree.selected)return tree.selected;return lastSelected&&($lastSelected=$("#"+lastSelected,$container)).length&&!$lastSelected.hasClass("private")?(lastSelected=null,tree.select_branch($lastSelected)):$firstInstance.length?tree.select_branch($firstInstance):tree.select_branch($(
".node-class,.node-instance",$container).get(0))};$firstClass.hasClass("leaf")?tree.select_branch($firstClass):tree.open_branch($firstClass,!1,function(){_.delay(nodeSelection,10)}),$container.trigger("ready.taotree")},oninit:function(){options.actions&&options.actions.init&&actionManager.exec(options.actions.init,{uri:$container.data("rootnode")})},beforeopen:function(node){lastOpened=$(node)},onselect:function(node,tree){var $node=$(node),nodeId=$node.attr("id"),nodeUri=$node.data("uri"),$parentNode=tree.parent($node),nodeContext={rootClassUri:options.rootClassUri};return $("a.clicked",$container).parent("li").not('[id="'+nodeId+'"]').removeClass("clicked"
),$node.hasClass("more")?function($node,$parentNode,tree){var current=$parentNode.children("ul").children("li.node-instance").length,left=$parentNode.data("count")-current,params=_.defaults({classUri:$parentNode.attr("id"),subclasses:0,offset:current,limit:left<0?30:left<30?left:30},serverParams);$.ajax(tree.settings.data.opts.url,{type:tree.settings.data.opts.method,dataType:tree.settings.data.type,async:tree.settings.data.async,data:params}).done(function(response){var treeData=getTreeData(response);treeData&&_.isArray(treeData.children)&&(treeData=treeData.children),_.isArray(treeData)&&(_.forEach(treeData,function(newNode){
"instance"===newNode.type&&tree.create(newNode,$parentNode)}),tree.deselect_branch($node),tree.remove($node),0<left-treeData.length&&tree.create(moreNode,$parentNode))})}($node,$parentNode,tree):($node.hasClass("node-class")&&($node.hasClass("closed")&&tree.open_branch($node),nodeContext.classUri=nodeId,nodeContext.id=nodeUri,nodeContext.context=["class","resource"],0<_.intersection(_.pluck(options.actions,"context"),["class","resource","*"]).length&&(generisRouter.pushNodeState(location.href,uri.decode(nodeContext.classUri)),executePossibleAction(options.actions,nodeContext,["delete"]))),$node.hasClass("node-instance")&&(nodeContext.uri=nodeId,
nodeContext.classUri=$parentNode.attr("id"),nodeContext.id=nodeUri,nodeContext.context=["instance","resource"],store("taotree").then(function(treeStore){treeStore.setItem(context.section,nodeId).then(function(){generisRouter.pushNodeState(location.href,uri.decode(nodeContext.uri)),executePossibleAction(options.actions,nodeContext,["moveInstance","delete"])})})),$container.trigger("select.taotree",[nodeContext]).trigger("change.taotree",[nodeContext])),!1},onmove:function(node,refNode,type,tree,rollback){return!!options.actions.moveInstance&&($(refNode).hasClass("node-instance")&&"inside"===type?($.tree.rollback(rollback),!1):(
"after"!==type&&"before"!==type||(refNode=tree.parent(refNode)),refNode instanceof $||refNode instanceof window.HTMLElement?(setTreeState(_.merge($container.data("tree-state"),{rollback:rollback})),actionManager.exec(options.actions.moveInstance,{uri:$(node).data("uri"),destinationClassUri:$(refNode).data("uri")}),void $container.trigger("change.taotree")):($.tree.rollback(rollback),!1)))}}};function setTreeState(treeState){$container.data("tree-state",treeState)}function computeSelectionAccess(node){_.isArray(node)?_.forEach(node,computeSelectionAccess):(node.type&&(addClassToNode(node,function(node){var nodeId=node.attributes["data-uri"],
rights=permissionsManager.getRights(),count=_.reduce(rights,function(acc,right){return permissionsManager.hasPermission(nodeId,right)&&acc++,acc},0);return 0!==rights.length&&count!==rights.length?0!==count?"permissions-partial":"permissions-none":"permissions-full"}(node)),function(actionType,node){var action=options.actions[actionType];return!(node&&action&&node.permissions&&action.rights)||permissionsManager.isContextAllowed(action.rights,{uri:node.attributes["data-uri"],classUri:node.attributes["data-classUri"],id:node.attributes.id})}("moveInstance",node)||addClassToNode(node,"node-undraggable")),node.children&&_.forEach(node.children,
computeSelectionAccess))}function addTitle(node){_.isArray(node)?_.forEach(node,addTitle):(node.attributes&&node.data&&(node.attributes.title=node.data),node.children&&_.forEach(node.children,addTitle))}function needMore(node){_.isArray(node)&&lastOpened&&lastOpened.length&&30<lastOpened.data("count")?node.push(moreNode):(node.count&&(node.attributes["data-count"]=node.count,node.children&&node.count>node.children.length&&node.children.push(moreNode)),node.children&&_.forEach(node.children,needMore),_.isArray(node)&&_.forEach(node,needMore))}function executePossibleAction(actions,nodeContext,exclude){var possibleActions;_.isArray(exclude)||(exclude=[]),0<(
possibleActions=_.filter(actions,function(action,name){return _.contains(nodeContext.context,action.context)&&!_.contains(exclude,name)})).length&&actionManager.exec(possibleActions[0],nodeContext)}function addClassToNode(node,clazz){node&&node.attributes&&(node.attributes.class=node.attributes.class||"",node.attributes.class.length?node.attributes.class=node.attributes.class+" "+clazz:node.attributes.class=clazz)}function getTreeData(response){var currentRights,treeData=response.tree||response;return response.permissions&&(currentRights=permissionsManager.getRights(),
response.permissions.supportedRights&&response.permissions.supportedRights.length&&0===currentRights.length&&permissionsManager.setSupportedRights(response.permissions.supportedRights),response.permissions.data&&permissionsManager.addPermissions(response.permissions.data)),treeData}return new Promise(function(resolve){_.forEach(events,function(callback,name){$container.off(name+".taotree").on(name+".taotree",function(){callback.apply(this,Array.prototype.slice.call(arguments,1))})}),actionManager.on("refresh",function(node){var params=node;node&&node.uri&&(params={loadNode:uri.encode(params.uri)}),$container.is(":visible")&&$container.trigger(
"refresh.taotree",[params])}),$container.hasClass("tree")||store("taotree").then(function(treeStore){treeStore.getItem(context.section).then(function(node){node&&(lastSelected=node),setTreeState({loadNode:options.loadNode}),$container.tree(treeOptions),sectionManager.on("show.section",function(section){options.sectionId===section.id&&$container.trigger("refresh.taotree")}),generisRouter.on("urichange",function(nodeUri,sectionId){options.sectionId===sectionId&&$container.trigger("refresh.taotree",[{loadNode:uri.encode(nodeUri)}])})})}),$container.on("ready.taotree",function(){resolve()})})}}}),define("layout/tree/provider/resourceSelector",["lodash","i18n",
"core/promise","core/store","core/logger","layout/actions","layout/generisRouter","layout/permissions","provider/resources","ui/resource/selector"],function(_,__,Promise,store,loggerFactory,actionManager,generisRouter,permissionsManager,resourceProviderFactory,resourceSelectorFactory){"use strict";var logger=loggerFactory("layout/tree/provider/resourceSelector"),resourceProvider=resourceProviderFactory();return{name:"resource-selector",init:function($container,options){return new Promise(function(resolve){store("taotree").then(function(treeStore){return Promise.all([resourceProvider.getClasses(options.rootClassUri),resourceProvider.getClassProperties(
options.rootClassUri),treeStore.getItem(options.id)]).then(function(results){var classes=results[0],filters=results[1],defaultNode=results[2],preloadNode=void 0!==options.loadNode;resourceSelectorFactory($container,{icon:options.icon||"test",searchPlaceholder:__("Filter"),selectionMode:"both",selectClass:!0,classUri:options.rootClassUri,classes:classes,filters:filters}).on("init",function(){actionManager.exec(options.actions.init,{uri:options.rootClassUri})}).on("render",function(){var self=this;actionManager.on("removeNodes",function(actionContext,nodes){self.setState("loading",!0),_.forEach(nodes,self.removeNode,self),self.changeSelectionMode("single"),
self.setState("loading",!1),self.selectDefaultNode(defaultNode)}),actionManager.on("removeNode",function(actionContext,node){self.removeNode(node),self.selectDefaultNode(defaultNode)}),actionManager.on("subClass instanciate duplicateNode",function(actionContext,node){self.after("update.add",function(){self.off("update.add"),self.select(node)}).changeSelectionMode("single").query({classUri:node.classUri})}),actionManager.on("copyTo moveTo",function(actionContext,node){self.refresh(node||defaultNode)}),actionManager.on("refresh",function(node){self.refresh(node||defaultNode)}),generisRouter.on("urichange",function(nodeUri,sectionId){
options.sectionId===sectionId&&self.refresh(nodeUri)}),resolve()}).on("query",function(params){var self=this;preloadNode&&(params.selectedUri=options.loadNode,preloadNode=!1),resourceProvider.getResources(params,!0).then(function(resources){self.update(resources,params)}).catch(function(err){logger.error(err)})}).on("update.first",function(){this.off("update.first"),this.selectDefaultNode(options.loadNode||defaultNode)}).on("selectionmodechange",function(mode){"single"===mode&&defaultNode&&this.selectDefaultNode(defaultNode)}).on("change",function(selection){var self=this,length=_.size(selection),getContext=function(resource){return _.defaults(resource,{
id:resource.uri,rootClassUri:self.classUri})};self.is("loading")||(1===length?_.forEach(selection,function(resource){var selectedContext=getContext(resource);actionManager.updateContext(selectedContext),"class"===selectedContext.type&&actionManager.exec(options.actions.selectClass,selectedContext),"instance"===selectedContext.type&&actionManager.exec(options.actions.selectInstance,selectedContext),generisRouter.pushNodeState(location.href,resource.uri),defaultNode=resource,treeStore.setItem(options.id,defaultNode)}):actionManager.updateContext(_.transform(selection,function(acc,resource){return acc.push(getContext(resource)),acc},[])))}).on("error",function(
err){logger.error(err)})})})})}}}),define("layout/tree/loader",["module","core/providerRegistry","layout/tree/provider/jstree","layout/tree/provider/resourceSelector"],function(module,providerRegistry,jsTreeProvider,resourceSelectorProvider){"use strict";var treeProviderRegistry=providerRegistry({}),providerExists=function(providerName){return providerName&&-1!==treeProviderRegistry.getAvailableProviders().indexOf(providerName)};return treeProviderRegistry.registerProvider(jsTreeProvider.name,jsTreeProvider),treeProviderRegistry.registerProvider(resourceSelectorProvider.name,resourceSelectorProvider),function(providerName){var providerToLoad="jstree",
config=module.config();return providerExists(providerName)?providerToLoad=providerName:providerExists(config.treeProvider)&&(providerToLoad=config.treeProvider),treeProviderRegistry.getProvider(providerToLoad)}}),define("layout/section-height",["jquery","lodash"],function($,_){"use strict";var $versionWarning=$(".version-warning:visible"),$window=$(window),$footer=$("body > footer");function setHeights($scope){var treeHeight,idealHeight,$visibleActionBarBox,$visibleActionBar,$mainButtons,$visibleButtons,$requiredRows,containerHeight=function($scope){var winHeight=$window.innerHeight(),footerHeight=$footer.outerHeight(),headerHeight=$("header.dark-bar"
).outerHeight()+($versionWarning.length?$versionWarning.outerHeight():0),actionBarHeight=$scope.find(".content-container .action-bar").outerHeight(),$tabs=$(".section-container > .tab-container:visible");return winHeight-headerHeight-footerHeight-actionBarHeight-($tabs.length?$tabs.outerHeight():0)}($scope),$contentBlock=$scope.find(".content-block"),$tree=$scope.find(".taotree");$tree.length&&($contentBlock.css({height:containerHeight,maxHeight:containerHeight}),treeHeight=containerHeight-($visibleActionBarBox=$(".tree-action-bar-box"),$visibleActionBar=$visibleActionBarBox.find(".tree-action-bar"),$mainButtons=$visibleActionBar.find("li"),
$visibleButtons=$mainButtons.filter(":visible"),$requiredRows=Math.max(Math.ceil($mainButtons.length/4),2),$visibleButtons.length||($visibleButtons=$('<li class="dummy"><a/></li>'),$visibleActionBar.append($visibleButtons)),idealHeight=$visibleButtons.outerHeight(!0)*$requiredRows+parseInt($visibleActionBarBox.css("margin-bottom"))+parseInt($visibleActionBarBox.css("margin-top")),$visibleActionBarBox.find(".dummy").remove(),idealHeight),$tree.css({maxHeight:treeHeight}),"resource-selector"===$tree.data("type")&&$tree.css({height:treeHeight}))}return{init:function($scope){$window.off("resize.sectionheight").on("resize.sectionheight",_.debounce(function(){
setHeights($scope)},50)),$versionWarning.off("hiding.versionwarning").on("hiding.versionwarning",function(){$versionWarning=$(".version-warning:visible"),setHeights($scope)}),$(window).trigger("resize.navheight")},setHeights:setHeights}}),define("controller/main",["module","jquery","lodash","context","core/router","helpers","uiForm","util/url","core/logger","ui/feedback","layout/generisRouter","layout/section","layout/actions","layout/version-warning","layout/loading-bar","layout/nav","layout/search","layout/tree/loader","layout/section-height"],function(module,$,_,context,router,helpers,uiForm,urlUtil,loggerFactory,feedback,generisRouter,sections,
actionManager,versionWarning,loadingBar,nav,search,treeLoader,sectionHeight){"use strict";var logger=loggerFactory("controller/main");return{start:function(){var config=module.config(),$doc=$(document);versionWarning.init(),generisRouter.init(),$doc.ajaxSend(function(){loadingBar.start()}),$doc.ajaxComplete(function(){loadingBar.stop()}),nav.init(),actionManager.on("error",function(err){logger.error(err),feedback().error(err)}),actionManager.on("contextchange",function(actionContext){_.isArray(actionContext)&&1!==actionContext.length&&sections.current().updateContentBlock('<div class="main-container flex-container-form-main"></div>')}),sections.on("activate"
,function(section){if(window.scrollTo(0,0),section&&section.id)switch(context.section=section.id,actionManager.init(section.panel),search.init(),section.type){case"tree":section.panel.addClass("content-panel"),sectionHeight.init(section.panel),$(".taotree",section.panel).each(function(){var $treeElt=$(this),$actionBar=$(".tree-action-bar-box",section.panel);(function($container,section){var treeProvider,treeActions=_.reduce($container.data("actions"),function(acc,id,key){var action=actionManager.getBy(id);return action&&(acc[key]=action),acc},{}),treeUrl=urlUtil.build([context.root_url,$container.data("url")]),treeType=$container.data("type")
;return treeProvider=treeLoader(treeType),treeType||$container.data("type",treeProvider.name),treeProvider.init($container,{id:$container.attr("id"),url:treeUrl,rootClassUri:$container.data("rootnode"),icon:$container.data("icon"),actions:treeActions,sectionId:section.id,loadNode:section.defaultUri})})($treeElt,section).then(function(){$actionBar.addClass("active"),sectionHeight.setHeights(section.panel)}).catch(function(err){logger.error(err)})}),$(".navi-container",section.panel).show();break;case"content":this.loadContentBlock()}}).init(),helpers.init(),uiForm.init(),config&&_.isArray(config.extraRoutes)&&config.extraRoutes.length&&router.dispatch(
config.extraRoutes)}}}),define("controller/passwordRecovery",["jquery","i18n","module","ui/feedback","layout/version-warning"],function($,__,module,feedback,versionWarning){"use strict";var feedbackType,conf=module.config();if(versionWarning.init(),conf.message)for(feedbackType in conf.message)conf.message[feedbackType]&&feedback()[feedbackType](conf.message[feedbackType])}),define("controller/routes",[],function(){"use strict";return{Main:{actions:{index:"controller/main",entry:"controller/entry",getSectionActions:"controller/main/actions",getSectionTrees:"controller/main/trees",login:"controller/login"}},PasswordRecovery:{actions:{
index:"controller/passwordRecovery"}},Lock:{actions:{locked:"controller/Lock/locked"}},ExtensionsManager:{actions:{index:"controller/settings/extensionManager"}},Users:{deps:"controller/users/disable-edit",actions:{index:"controller/users/index",add:"controller/users/add"}}}}),define("controller/settings/extensionManager",["jquery","i18n","context","helpers","ui/feedback"],function($,__,context,helpers,feedback){var ext_installed=[],toInstall=[],indexCurrentToInstall=-1,percentByExt=0,installError=0;function progressConsole(msg){$("#installProgress .console").append("<p>"+msg+"</p>"),$("#installProgress .console").prop({scrollTop:$(
"#installProgress .console").prop("scrollHeight")})}function installNextExtension(){var ext=toInstall[indexCurrentToInstall];$("#installProgress p.status").text(__("Installing extension %s...").replace("%s",ext)),progressConsole(__("Installing extension %s...").replace("%s",ext)),$.ajax({type:"POST",url:helpers._url("install","ExtensionsManager","tao"),data:"id="+ext,dataType:"json",success:function(data){helpers.loaded(),data.success?(progressConsole(__("> Extension %s succesfully installed.").replace("%s",ext)),$("li.ext-id.ext-"+ext).addClass("installed"),$("tr#"+ext).slideUp("normal",function(){var $tr=$("<tr></tr>").appendTo($(
"#extensions-manager-container tbody")).hide(),$orig=$("tr#"+ext+" td");$tr.append('<td class="ext-id bordered">'+$($orig[0]).text()+"</td>"),$tr.append('<td class="author">'+$($orig[1]).text()+"</td>"),$tr.append('<td class="version">'+$($orig[2]).text()+"</td>"),$tr.slideDown("normal",function(){var $noAvailableExtElement;$("tr#"+ext).remove(),styleTables(),0==$("#available-extensions-container table tbody tr").length&&(($noAvailableExtElement=$("<div/>")).attr("id","noExtensions").addClass("ui-state-highlight").text(__("No extensions available.")),$("#available-extensions-container").empty().append($noAvailableExtElement)),$("#installProgress .bar"
).animate({width:"+="+percentByExt+"%"},1e3,function(){++indexCurrentToInstall>=toInstall.length?(toInstall=[],$("#installProgress .bar").animate({backgroundColor:"#bb6",width:"100%"},1e3),(progressConsole(__("Post install processing")),$.ajax({type:"GET",url:helpers._url("postInstall","ExtensionsManager","tao")})).done(function(data){helpers.loaded(),$("#installProgress .bar").animate({backgroundColor:"#6b6"},1e3),$("#installProgress p.status").text(__("Installation done.")),progressConsole(__("> Installation done.")),progressConsole(__("... reloading page.")),setTimeout(function(){window.location.reload(!0)},1e3)})):installNextExtension()})})})):(
installError=1,progressConsole("Installation of "+ext+" failed")),feedback().info(data.message)}}),installError&&progressConsole(__("A fatal error occured during the installation process."))}function styleTables(){$("#Extensions_manager table tr").removeClass("extensionOdd").removeClass("extensionEven"),$("#Extensions_manager table tr:nth-child(even)").addClass("extensionEven"),$("#Extensions_manager table tr:nth-child(odd)").addClass("extensionOdd")}return{start:function(){styleTables(),$("#installProgress").hide(),$("#extensions-manager-container .ext-id").each(function(){var ext=$(this).text();ext_installed.push(ext),$(".ext-id.ext-"+ext).addClass(
"installed")}),$("#available-extensions-container tr input").click(function(event){event.stopPropagation()}),$("#available-extensions-container tr input:checkbox").click(function(){var $installButton=$("#installButton");0<$(this).parent().parent().parent().find("input:checkbox:checked").length?$installButton.attr("disabled",!1):$installButton.attr("disabled",!0)}),$("#available-extensions-container #installButton").click(function(event){if(toInstall=[],$("#available-extensions-container input:checked").each(function(){var ext=$(this).prop("name").split("_")[1],deps=function getDependencies(extension){var dependencies=[];return $(
"#"+extension+" .dependencies li:not(.installed)").each(function(){var ext=$(this).attr("rel"),deps=getDependencies(ext);deps.push(ext),dependencies=dependencies.concat(deps)}),dependencies}(ext);deps.length&&(toInstall=toInstall.concat(deps)),toInstall.push(ext)}),!(toInstall=function(orig){for(var a=[],i=0;i<orig.length;i++)$.inArray(orig[i],a)<0&&a.push(orig[i]);return a}(toInstall)).length)return window.alert(__("Nothing to install !")),!1;percentByExt=100/toInstall.length,$("#installProgress p.status").text(__("%s extension(s) to install.").replace("%s",toInstall.length)),$("#installProgress .bar").width(0),$("#installProgress .console").empty(),
progressConsole(__("Do you wish to install the following extension(s):\n%s?").replace("%s",toInstall.join(", "))),$("#installProgress").dialog({modal:!0,width:400,height:300,buttons:[{text:__("No"),click:function(){$(this).dialog("close")}},{text:__("Yes"),click:function(){progressConsole(__("Preparing installation...")),$(".ui-widget-overlay").css({height:"100%",width:"100%",position:"fixed"}),$(".ui-dialog-buttonpane").remove(),indexCurrentToInstall=installError=0,installNextExtension()}}]}),$(".ui-dialog").css({position:"fixed",top:"33%"}),event.preventDefault()})}}}),define("users",["jquery","i18n","context"],function($,__,context){return{
checkLogin:function(id,url){var $login=$("input[id='"+id+"']");0<$login.length&&$login.blur(function(){var elt=$(this),trimmedValue=elt.val().replace(/^\s+/g,"").replace(/\s+$/g,""),value=elt.val();""===trimmedValue?$("span.login-info").remove():$.postJson(url,{login:value},function(data){$("span.login-info").remove(),data.available?elt.after("<span class='login-info'><img src='"+context.taobase_www+"img/tick.png' /> "+__("Login available")+"</span>"):elt.after("<span class='login-info ui-state-error'><img src='"+context.taobase_www+"img/exclamation.png' class='icon' /> "+__("This Login is already in use")+"</span>")})})}}}),define("controller/users/add",[
"jquery","module","helpers","users"],function($,module,helpers,users){"use strict";return{start:function(){var conf=module.config(),url=helpers._url("checkLogin","Users","tao");users.checkLogin(conf.loginId,url),!0===conf.exit&&setTimeout(function(){window.location=helpers._url("index","Main","tao",{structure:"users",ext:"tao",section:"list_users"})},1e3)}}}),define("controller/users/disable-edit",["layout/section"],function(section){"use strict";return{start:function(){section.get("edit_user").disable()}}}),define("controller/users/index",["module","jquery","i18n","util/url","layout/section","ui/feedback","ui/dialog/confirm","ui/datatable"],function(module,
$,__,urlHelper,section,feedback,dialogConfirm){"use strict";var runUserAction=function(uri,action,confirmMessage){var tokenName=module.config().xsrfTokenName,data={};data.uri=uri,data[tokenName]=$.cookie(tokenName),dialogConfirm(confirmMessage,function(){$.ajax({url:urlHelper.route(action,"Users","tao"),data:data,type:"POST"}).done(function(response){response.success?feedback().success(response.message):feedback().error(response.message),$("#user-list").datatable("refresh")})})},editUser=function(uri){section.get("edit_user").enable().loadContentBlock(urlHelper.route("edit","Users","tao"),{uri:uri}).show()},removeUser=function(uri,row){runUserAction(uri,
"delete",__("Please confirm deletion of user %s",row.login))},lockUser=function(uri,row){runUserAction(uri,"lock",__("Please confirm locking of account %s",row.login))},unlockUser=function(uri,row){runUserAction(uri,"unlock",__("Please confirm unlocking of account %s",row.login))};return{start:function(){var $userList=$("#user-list");section.on("show",function(section){"list_users"===section.id&&$userList.datatable("refresh")});var actions={edit:editUser,remove:removeUser,lock:lockUser,unlock:unlockUser};$userList.on("load.datatable",function(e,dataset){_.forEach(dataset.data,function(row){var lockBtn='[data-item-identifier="'+row.id+'"] button.lock',
unlockBtn='[data-item-identifier="'+row.id+'"] button.unlock';row.lockable?$(row.locked?lockBtn:unlockBtn,$userList).hide():_.forEach([lockBtn,unlockBtn],function(btn){$(btn,$userList).hide()})})}).datatable({url:urlHelper.route("data","Users","tao"),paginationStrategyBottom:"pages",filter:!0,actions:actions,model:[{id:"login",label:__("Login"),sortable:!0},{id:"firstname",label:__("First Name"),sortable:!0},{id:"lastname",label:__("Last Name"),sortable:!0},{id:"email",label:__("Email"),sortable:!0},{id:"roles",label:__("Roles"),sortable:!1},{id:"dataLg",label:__("Data Language"),sortable:!0,visible:$userList.data("user-data-lang-enabled")},{id:"guiLg",
label:__("Interface Language"),sortable:!0},{id:"status",label:__("Account status"),sortable:!0,transform:function(value){return'<span class="icon-'+("enabled"===value?"result-ok":"lock")+'"></span> '+value}}]})}}}),function(){"use strict";var reqFeedback=document.getElementById("browser-check"),tests=[{name:"ES5 Global JSON",test:function(){return"JSON"in window&&"function"==typeof JSON.parse&&"function"==typeof JSON.stringify}},{name:"ES5 Extension",test:function(){return"function"==typeof Function.prototype.bind&&"function"==typeof String.prototype.trim}},{name:"localstorage",test:function(){return"localStorage"in window}},{name:"querySelector",
test:function(){return"querySelector"in window.document&&"querySelectorAll"in window.document}},{name:"file reader",test:function(){return"File"in window&&"FileReader"in window}}],testCounter=0;if(document.documentElement.className=document.documentElement.className.replace("no-js",""),reqFeedback)for(;testCounter<tests.length;){if("function"==typeof tests[testCounter].test&&!tests[testCounter].test()){reqFeedback.style.display="block",reqFeedback.className=reqFeedback.className.replace("hidden",""),document.documentElement.className=document.documentElement.className+" no-js";break}testCounter++}}(),define("layout/requirement-check",function(){}),define(
"report",["jquery","context","i18n"],function($,context,__){"use strict";return{fold:function(){var $content=$(".report > .feedback-nesting-0 > div"),$top=$(".report > .feedback-nesting-0");"none"===$content.css("display")?($content.css("display","block"),$top.css("background-color","transparent"),$top.css("border-color","transparent"),$("#fold > span.check-txt").text(__("Hide detailed report"))):($content.css("display","none"),$top.hasClass("feedback-success")?($top.css("border-color","#3ea76f"),$top.css("background-color","#e6f4ed")):$top.hasClass("feedback-warning")?($top.css("border-color","#dfbe7b"),$top.css("background-color","#fbf6ee")):$top.hasClass(
"feedback-error")?($top.css("border-color","#c74155"),$top.css("background-color","#f8e7e9")):($top.css("border-color","#3e7da7"),$top.css("background-color","#e6eef4")),$("#fold > span.check-txt").text(__("Show detailed report")))}}}),define("serviceApi/PseudoStorage",[],function(){function PseudoStorage(){}return PseudoStorage.prototype.get=function(callback){return"function"==typeof callback&&callback(null),null},PseudoStorage.prototype.set=function(state,callback){"function"==typeof callback&&callback()},PseudoStorage}),define("serviceApi/ServiceApi",["jquery","urlParser"],function($,UrlParser){"use strict";function ServiceApi(baseUrl,parameters,
serviceCallId,stateStorage,userService,paused){this.baseUrl=baseUrl,this.parameters=parameters,this.connected=!1,this.serviceCallId=serviceCallId,this.state=stateStorage,this.userService=userService,this.hasBeenPaused=paused}return ServiceApi.SIG_SUCCESS=0,ServiceApi.SIG_ERROR=1,ServiceApi.prototype.loadInto=function(frame,connected){var self=this,$frame=$(frame),callUrl=this.getCallUrl(),isCORSAllowed=new UrlParser(callUrl).checkCORS();$frame.on("load",function(e){$(document).on("serviceready",function(){self.connect(frame,function(){$(document).off("serviceready"),"function"==typeof connected&&connected()})}),!0===isCORSAllowed&&(
frame.contentWindow.__knownParent__=!0)}),$frame.attr("src",callUrl)},ServiceApi.prototype.connect=function(frame,connected){!1===this.connected&&frame.contentWindow&&"function"==typeof frame.contentWindow.onServiceApiReady&&(frame.contentWindow.onServiceApiReady(this),this.connected=!0,"function"==typeof connected&&connected())},ServiceApi.prototype.getCallUrl=function(){var params=this.parameters||{};return params.serviceCallId=this.serviceCallId,this.baseUrl+"?"+$.param(params)},ServiceApi.prototype.getUserPropertyValues=function(property,callback){this.userService.get(property,callback)},ServiceApi.prototype.getServiceCallId=function(){
return this.serviceCallId},ServiceApi.prototype.getState=function(){return this.state.get()},ServiceApi.prototype.setState=function(state,callback){return this.state.set(state,callback)},ServiceApi.prototype.getHasBeenPaused=function(){return this.hasBeenPaused},ServiceApi.prototype.setHasBeenPaused=function(paused){this.hasBeenPaused=paused},ServiceApi.prototype.getParameter=function(identifier){return void 0!==this.parameters[identifier]?this.parameters[identifier]:null},ServiceApi.prototype.onFinish=function(callback){return this.onFinishCallback=callback,this},ServiceApi.prototype.onKill=function(callback){return this.onKillCallback=callback,this},
ServiceApi.prototype.onExit=function(callback){return this.onExitCallback=callback,this},ServiceApi.prototype.kill=function(callback){"function"==typeof this.onKillCallback?this.onKillCallback(callback):callback(0)},ServiceApi.prototype.exit=function(callback){"function"==typeof this.onExitCallback?this.onExitCallback(callback):callback(0)},ServiceApi.prototype.finish=function(valueArray){"function"==typeof this.onFinishCallback&&this.onFinishCallback(valueArray)},ServiceApi}),define("serviceApi/StateStorage",["jquery"],function($){"use strict";function StateStorage(state,submitUrl){this.state=state,this.submitUrl=submitUrl}
return StateStorage.prototype.get=function(callback){return"function"==typeof callback&&callback(this.state),this.state},StateStorage.prototype.set=function(state,callback){state===this.state?"function"==typeof callback&&callback():(this.state=state,$.ajax({url:this.submitUrl,data:{state:state},type:"post",dataType:"json",success:"function"==typeof callback?callback:null}))},StateStorage}),define("serviceApi/UserInfoService",["jquery"],function($){function UserInfoService(requestUrl,data){this.data=data,this.requestUrl=requestUrl}return UserInfoService.prototype.get=function(property,callback){this.data.hasOwnProperty(property
)?"function"==typeof callback&&callback(this.data[property]):$.ajax({url:this.requestUrl,data:{property:property},type:"post",dataType:"json",success:function(service,callback){return function(r){for(key in r.data)service.data[key]=r.data[key];"function"==typeof callback&&callback(service.data[property])}}(this,callback)})},UserInfoService}),define("generis.tree",["jquery","i18n","class"],function($,__,Class){return Class.extend({init:function(selector,dataUrl,options,treeOptions){var self=this;this.STATE_BROWSING=0,this.STATE_FILTERING=1,this.selector=selector,this.options=options,this.dataUrl=dataUrl,this.metaClasses=[],this.lastOpened=null,
this.state=this.STATE_BROWSING,this.paginate=void 0!==options.paginate?options.paginate:0,this.serverParameters=void 0!==options.serverParameters?options.serverParameters:new Array,this.defaultServerParameters={hideInstances:!1|this.options.hideInstances,filter:$("#filter-content-"+options.actionId).val(),offset:0,limit:this.options.paginate},this.treeOptions={data:{type:"json",async:!0,opts:{method:"POST",url:this.dataUrl}},types:{default:{renameable:!1,deletable:!0,creatable:!0}},callback:{beforeopen:function(NODE,TREE_OBJ){self.lastOpened=NODE}}},$.extend(!0,this.treeOptions,treeOptions);var classes=$(selector).attr("class")
;"string"==typeof classes&&null!=classes.match("tree")||$(selector).tree(this.treeOptions)},createMeta:function(meta){this.metaClasses[meta.id]={displayed:meta.displayed?meta.displayed:0,count:meta.count?meta.count:0,position:meta.position?meta.position:0}},extractMeta:function(DATA){var nodes=new Array,nodeId=null;if(DATA instanceof Array?(this.lastOpened&&this.state!=this.STATE_FILTERING?nodeId=this.lastOpened.id:(nodeId="DEFAULT_ROOT",this.createMeta({id:nodeId,count:0})),nodes=DATA):(nodeId=DATA.attributes.id,void 0!==DATA.children&&(nodes=DATA.children),this.createMeta({id:DATA.attributes.id,count:DATA.count})),nodes){for(var countClass=0,
i=0;i<nodes.length;i++)"class"==nodes[i].type&&(this.extractMeta(nodes[i]),countClass++);var countInstances=nodes.length-countClass;this.setMeta(nodeId,"position",countInstances),this.setMeta(nodeId,"displayed",countInstances),DATA instanceof Array||!DATA.state||"closed"==DATA.state?DATA instanceof Array&&this.getMeta(nodeId,"displayed")<this.getMeta(nodeId,"count")&&nodes.push(this.getPaginateActionNodes()):this.getMeta(nodeId,"displayed")<this.getMeta(nodeId,"count")&&nodes.push(this.getPaginateActionNodes())}},setServerParameter:function(key,value,reload){this.serverParameters[key]=value,void 0!==reload&&reload&&(this.isRefreshing=!0,this.getTree(
).refresh())},getTree:function(){return $.tree.reference(this.selector)},getMeta:function(classId,metaName,value){return this.metaClasses[classId][metaName]},setMeta:function(classId,metaName,value){this.metaClasses[classId][metaName]=value},getPaginateActionNodes:function(){return returnValue=[{data:__("all"),attributes:{class:"paginate paginate-all"}},{data:this.paginate+__(" next"),attributes:{class:"paginate paginate-more"}}],returnValue},showPaginate:function(NODE,TREE_OBJ){for(var DATA=this.getPaginateActionNodes(),i=0;i<DATA.length;i++)TREE_OBJ.create(DATA[i],TREE_OBJ.get_node(NODE[0]))},hidePaginate:function(NODE,TREE_OBJ){$(NODE).find(".paginate"
).each(function(){$(this).remove()})},refreshPaginate:function(NODE,TREE_OBJ){var nodeId=$(NODE)[0].id;this.hidePaginate(NODE,TREE_OBJ),this.getMeta(nodeId,"displayed")<this.getMeta(nodeId,"count")&&this.showPaginate(NODE,TREE_OBJ)},getClassUri:function(NODE){var parents=$(NODE).parents("li");return 0==parents.length?$(NODE).prop("id"):$(parents[0]).prop("id")},callGetSectionActions:function(NODE,TREE_OBJ){null!=NODE&&($(NODE).hasClass("node-class")?$(NODE).prop("id"):($(NODE).prop("id"),this.getClassUri(NODE)))}})}),define("generis.tree.select",["jquery","lodash","i18n","context","generis.tree","helpers","ui/feedback","jquery.tree",
"lib/jsTree/plugins/jquery.tree.checkbox"],function($,_,__,context,GenerisTreeClass,helpers,feedback){return GenerisTreeClass.extend({init:function(selector,dataUrl,options){this.loadedData=null,this.checkedNodes=void 0!==options.checkedNodes?options.checkedNodes.slice(0):[],this.hiddenNodes=void 0!==options.hiddenNodes?options.hiddenNodes.slice(0):[],options.callback&&options.callback.checkPaginate&&(this.checkPaginate=options.callback.checkPaginate),this.checkResourcePermissions=void 0!==options.checkResourcePermissions&&options.checkResourcePermissions;var instance=this,treeOptions={types:{default:{draggable:!(this.DISPLAY_SELECTED=1)}},ui:{
theme_name:"checkbox",theme_path:context.taobase_www+"js/lib/jsTree/themes/css/style.css"},callback:{beforecheck:function(NODE,TREE_OBJ){var nodeId=$(NODE).prop("id");return(!instance.isRefreshing||-1!==$.inArray(nodeId,instance.checkedNodes))&&(!NODE.hasClass("node-class")||instance.getMeta(nodeId,"displayed")===instance.getMeta(nodeId,"count")||(instance.paginateInstances(NODE,TREE_OBJ,{limit:0,checkedNodes:"*"}),!1))},beforeuncheck:function(NODE,TREE_OBJ){var nodeId=$(NODE).prop("id"),indice=$.inArray(nodeId,instance.checkedNodes);return!$(NODE).hasClass("node-class")&&-1<indice&&instance.checkedNodes.splice(indice,1),!0},beforedata:function(NODE,TREE_OBJ
){var returnValue=instance.defaultServerParameters;for(var key in NODE&&(returnValue.classUri=$(NODE).prop("id")),instance.serverParameters)null!==instance.serverParameters[key]&&(returnValue[key]=instance.serverParameters[key]);return returnValue},onopen:function(NODE,TREE_OBJ){instance.checkedNodes&&instance.check(instance.checkedNodes)},onload:function(TREE_OBJ){instance.check(instance.checkedNodes),instance.options.loadCallback&&instance.options.loadCallback(TREE_OBJ),instance.isRefreshing=!1},onchange:function(NODE,TREE_OBJ){instance.options.onChangeCallback&&!instance.isRefreshing&&instance.options.onChangeCallback(NODE,TREE_OBJ)},onselect:function(
NODE,TREE_OBJ){if($(NODE).hasClass("paginate-more"))instance.paginateInstances($(NODE).parent().parent(),TREE_OBJ);else{if(!$(NODE).hasClass("paginate-all"))return!0;var parentNodeId=$(NODE).parent().parent().prop("id"),limit=instance.getMeta(parentNodeId,"count")-instance.getMeta(parentNodeId,"displayed");instance.paginateInstances($(NODE).parent().parent(),TREE_OBJ,{limit:limit})}},ondata:function(DATA,TREE_OBJ){if(instance.checkResourcePermissions){var children,filteredChildren,permissions=DATA.permissions;children=DATA.tree.children?DATA.tree.children:DATA.tree,filteredChildren=instance.checkPermissionsRecursively(children,permissions),
DATA.tree.children?DATA.tree.children=filteredChildren:DATA.tree=filteredChildren,DATA=DATA.tree}return DATA.children&&(DATA.state="open"),instance.loadedData=DATA,instance.extractMeta(DATA),instance.removeHiddenNodes(DATA.children||DATA),DATA}},plugins:{checkbox:{three_state:!0}}};for(var i in this.serverParameters)treeOptions.data.opts[i]=this.serverParameters[i];this._super(selector,dataUrl,options,treeOptions),$("#saver-action-"+this.options.actionId).click({instance:this},function(e){e.data.instance.saveData()})},checkPermissionsRecursively:function checkPermissionsRecursively(children,permissions){var filteredChildren=[],recursiveCheck=[]
;return _.each(children,function(dataObj){var key=dataObj.attributes["data-uri"];dataObj.children&&0<dataObj.children.length?(recursiveCheck=checkPermissionsRecursively(dataObj.children,permissions),permissions.data[key]&&-1!==permissions.data[key].indexOf("READ")&&(dataObj.children=recursiveCheck,filteredChildren.push(dataObj))):permissions.data[key]&&-1!==permissions.data[key].indexOf("READ")&&filteredChildren.push(dataObj)}),filteredChildren},removeHiddenNodes:function(nodes){var self=this,hiddenNodes=this.hiddenNodes;_.isArray(nodes)&&hiddenNodes&&_.isArray(hiddenNodes)&&_.remove(nodes,function(node){if("instance"===node.type)return 0<=_.indexOf(
hiddenNodes,node.attributes["data-uri"]);"class"===node.type&&node.children&&self.removeHiddenNodes(node.children)})},trace:function(){},paginateInstances:function(NODE,TREE_OBJ,pOptions,callback){var instance,nodeId=NODE[0].id,instancesLeft=this.getMeta(nodeId,"count")-this.getMeta(nodeId,"displayed"),options={classUri:nodeId,subclasses:0,offset:this.getMeta(nodeId,"position"),limit:instancesLeft<this.paginate?instancesLeft:this.paginate};options=$.extend(options,pOptions),$.post(this.dataUrl,options,(instance=this,function(DATA){instance.hidePaginate(NODE,TREE_OBJ);for(var i=0;i<DATA.length;i++
)DATA[i].attributes.class=instance.options.instanceClass+" node-instance node-draggable",$("#"+DATA[i].attributes.id,$(TREE_OBJ.container)).length||TREE_OBJ.create(DATA[i],TREE_OBJ.get_node(NODE[0])),"*"==options.checkedNodes&&instance.checkedNodes.push(DATA[i].attributes.id);instance.setMeta(nodeId,"displayed",instance.getMeta(nodeId,"displayed")+DATA.length),instance.setMeta(nodeId,"position",instance.getMeta(nodeId,"position")+DATA.length),instance.refreshPaginate(NODE,TREE_OBJ),options.checkedNodes&&("*"==options.checkedNodes?$(NODE).find("ul:first").children().each(function(){$(this).hasClass("node-instance")&&$(this).find(
"a:not(.checked, .undetermined)").each(function(){instance.checkedNodes.push($(this).parent().prop("id"))})}):instance.checkedNodes=options.checkedNodes),instance.check(instance.checkedNodes),callback&&callback(NODE,TREE_OBJ),instance.checkPaginate&&instance.checkPaginate(NODE,TREE_OBJ)}),"json")},check:function(elements){var self=this;$.each(elements,function(i,elt){if(null!=elt){var NODE=$(self.selector).find("li[id='"+elt+"']");0<NODE.length&&$(NODE).hasClass("node-instance")&&$.tree.plugins.checkbox.check(NODE)}})},getChecked:function(){var unchecked=[];$.each($.tree.plugins.checkbox.get_unchecked(this.getTree()),function(i,NODE){$(NODE).hasClass(
"node-instance")&&unchecked.push($(NODE).prop("id"))});var returnValue=$.grep(this.checkedNodes,function(value){return-1==unchecked.indexOf(value)});return $.each($.tree.plugins.checkbox.get_checked(this.getTree()),function(i,NODE){if($(NODE).hasClass("node-instance")){var value=$(NODE).prop("id");-1==returnValue.indexOf(value)&&returnValue.push(value)}}),returnValue},saveData:function(){var instance=this,toSend={};if("object"==typeof this.options.saveData)for(var key in this.options.saveData)toSend[key]=this.options.saveData[key];helpers.loading();var nodes=this.getChecked();toSend.instances=JSON.stringify(nodes);var uriField,classUriField=null;if(
this.options.relatedFormId){var uriEltSelector="#"+this.options.relatedFormId+" :input[name=uri]";$(uriEltSelector).length&&(uriField=$(uriEltSelector));var classUriEltSelector="#"+this.options.relatedFormId+" :input[name=classUri]";$(classUriEltSelector).length&&(classUriField=$(classUriEltSelector))}uriField||(uriField=$("input[name=uri]")),classUriField||(classUriField=$("input[name=classUri]")),uriField&&(toSend.uri=uriField.val()),classUriField&&(toSend.classUri=classUriField.val()),$.ajax({url:this.options.saveUrl,type:"POST",data:toSend,dataType:"json",success:function(response){response.saved&&(
instance.options.saveCallback&&instance.options.saveCallback(toSend),feedback().info(__("Selection saved successfully")))},complete:function(){helpers.loaded()}})}})}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c))}(
'.class-selector{padding:5px;position:relative;opacity:0}.class-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.class-selector a.selected{display:inline-block;position:relative;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;padding:3px 20px 3px 10px;text-decoration:none;width:100%;background-color:#fff}.class-selector a.selected.empty{color:#a4a9b1}.class-selector a.selected:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e611";position:absolute;right:10px;top:7px}.class-selector .options{position:absolute;width:100%;background-color:#f3f1ef;border:solid 1px #ddd;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-moz-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-ms-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-o-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);left:0;margin-top:7px;overflow-y:auto;z-index:100;min-height:100px;max-height:450px;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.class-selector .options.folded{overflow:hidden;min-height:0;max-height:0;border-width:0;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.class-selector .options ul{list-style-type:none;padding:0;margin:0 0 0 15px}.class-selector .options ul li{padding-top:3px}.class-selector .options ul li a{text-decoration:none;color:#222}.class-selector .options ul li a:hover{color:#0e5d91;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.class-selector .options ul li:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e60c";color:#d8ae5b;top:2px;-webkit-text-shadow:1px 1px 0 #ad8b49;-moz-text-shadow:1px 1px 0 #ad8b49;text-shadow:1px 1px 0 #ad8b49;margin-right:4px}.class-selector .options>ul{margin:5px 0 0 7px}\n\n/*# sourceMappingURL=selector.css.map */.ui-generis-validator{color:#ba122b;text-align:right;width:99%}.ui-generis-validator input.error,.ui-generis-validator select.error,.ui-generis-validator textarea.error{border-color:#ba122b;color:#ba122b}\n\n/*# sourceMappingURL=validator.css.map */.ui-generis-widget{margin:10px 0px}.ui-generis-widget>.left{display:inline-block;margin-top:8px;width:34%;vertical-align:top}.ui-generis-widget>.right{display:inline-block;min-width:150px;width:65%}.ui-generis-widget>.right>input,.ui-generis-widget>.right>select,.ui-generis-widget>.right>textarea{background-color:white;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;color:#222;font-family:"Franklin Gothic","Franklin Gothic Medium","Source Sans Pro",sans-serif;padding:8px;width:100%}.ui-generis-widget>.right>input,.ui-generis-widget>.right>select{font:inherit;height:36px}.ui-generis-widget>.right>.check-box-input{color:#222;display:inline-block;font-family:"Franklin Gothic","Franklin Gothic Medium","Source Sans Pro",sans-serif;padding:4px;width:100%}.ui-generis-widget>.right>.check-box-input>.option{padding-top:4px}.ui-generis-widget>.right input.error,.ui-generis-widget>.right select.error,.ui-generis-widget>.right textarea.error,.ui-generis-widget>.right .check-box-input.error{border-color:#ba122b;color:#ba122b}.ui-generis-widget .validation-container{color:#ba122b;text-align:right;width:99%}\n\n/*# sourceMappingURL=widget.css.map */.ui-generis-form{border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;background-color:#f3f1ef;padding:20px;position:relative;margin:20px;width:500px}.ui-generis-form h2{margin-top:0}.ui-generis-form .toolbar{margin-top:30px;text-align:right}@-o-keyframes spinner{to{transform:rotate(360deg)}}@-moz-keyframes spinner{to{transform:rotate(360deg)}}@-webkit-keyframes spinner{to{transform:rotate(360deg)}}@keyframes spinner{to{transform:rotate(360deg)}}\n\n/*# sourceMappingURL=form.css.map */.resource-selector{position:relative;height:100%;display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;opacity:0;background-color:#f3f1ef;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}.resource-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .resource-list{position:relative;height:100%;opacity:0}.resource-selector .resource-list.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .resource-list.multiple ul li a:after{display:block;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-list ul{list-style-type:none;padding:0;margin:0}.resource-selector .resource-list ul li{position:relative;height:40px;padding:10px;border-bottom:solid 1px #ddd;-webkit-transition:background-color, 200ms, linear, 0s;-moz-transition:background-color, 200ms, linear, 0s;-ms-transition:background-color, 200ms, linear, 0s;-o-transition:background-color, 200ms, linear, 0s;transition:background-color, 200ms, linear, 0s}.resource-selector .resource-list ul li a{-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s;color:#222;display:inline-block;width:100%;padding-right:25px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.resource-selector .resource-list ul li a:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e69b";color:#0e5d91;position:absolute;right:17px;top:12px;display:none}.resource-selector .resource-list ul li a:hover{text-decoration:none}.resource-selector .resource-list ul li a>span{color:#0e5d91;margin-right:4px;font-size:16px;font-size:1.6rem;vertical-align:top}.resource-selector .resource-list ul li.selected,.resource-selector .resource-list ul li:hover{background-color:#3e7da7;cursor:pointer;-webkit-transition:background-color, 200ms, linear, 0s;-moz-transition:background-color, 200ms, linear, 0s;-ms-transition:background-color, 200ms, linear, 0s;-o-transition:background-color, 200ms, linear, 0s;transition:background-color, 200ms, linear, 0s}.resource-selector .resource-list ul li.selected a,.resource-selector .resource-list ul li:hover a{color:#fff;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .resource-list ul li.selected a:after,.resource-selector .resource-list ul li:hover a:after{color:#fff}.resource-selector .resource-list ul li.selected a>span,.resource-selector .resource-list ul li:hover a>span{color:#fff}.resource-selector .resource-list ul li.selected a:after{content:"\\e69d"}.resource-selector .resource-list ul li[data-access=denied]>a [class^="icon-"],.resource-selector .resource-list ul li[data-access=denied]>a [class*=" icon-"],.resource-selector .resource-list ul li[data-access=partial]>a [class^="icon-"],.resource-selector .resource-list ul li[data-access=partial]>a [class*=" icon-"]{position:relative}.resource-selector .resource-list ul li[data-access=denied]>a [class^="icon-"]:after,.resource-selector .resource-list ul li[data-access=denied]>a [class*=" icon-"]:after,.resource-selector .resource-list ul li[data-access=partial]>a [class^="icon-"]:after,.resource-selector .resource-list ul li[data-access=partial]>a [class*=" icon-"]:after{content:"\\e629";color:#555;position:absolute;left:7px;top:6px}.resource-selector .resource-list ul li[data-access=denied]{color:#a4a9b1;background-color:#fff}.resource-selector .resource-list ul li[data-access=denied]:hover,.resource-selector .resource-list ul li[data-access=denied]:hover>a,.resource-selector .resource-list ul li[data-access=denied]>a,.resource-selector .resource-list ul li[data-access=denied] [class^="icon-"]:before,.resource-selector .resource-list ul li[data-access=denied] [class*=" icon-"]:before{cursor:auto;background-color:#fff;color:#a4a9b1 !important}.resource-selector .resource-tree{position:relative;height:100%;opacity:0}.resource-selector .resource-tree.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .resource-tree.multiple ul li.selectable>a>.selector{display:inline-block}.resource-selector .resource-tree .clickable:hover:before{content:" ";display:inline-block;position:absolute;width:25px;height:25px;top:7.5px;left:0;border-radius:50%;background-color:#b9bfc3;opacity:.5}.resource-selector .resource-tree .clickable:focus{outline:0 none}.resource-selector .resource-tree ul{list-style-type:none;padding:0;margin:0}.resource-selector .resource-tree ul li{position:relative;cursor:pointer}.resource-selector .resource-tree ul li>a{height:40px;line-height:40px;display:block;width:100%;padding-right:30px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-bottom:solid 1px #ddd;color:#222}.resource-selector .resource-tree ul li.class .class-toggler{display:inline-block;position:relative;width:25px;height:40px;text-align:center}.resource-selector .resource-tree ul li.class .class-toggler:after{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e611";font-size:15px;font-size:1.5rem;position:relative}.resource-selector .resource-tree ul li.class.empty .class-toggler{visibility:hidden}.resource-selector .resource-tree ul li.class>a>.icon-folder:before{content:"\\e60d";color:#d8ae5b;margin-right:4px}.resource-selector .resource-tree ul li.class>a:hover{background-color:#e7eff4;color:#222;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.class.selected>a{background-color:#3e7da7;color:#fff;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.class.selected>a:before,.resource-selector .resource-tree ul li.class.selected>a:after{color:#fff}.resource-selector .resource-tree ul li.class.selected>a:hover{background-color:#266d9c;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.class.selected>a .clickable:hover:before{background-color:#518ab0}.resource-selector .resource-tree ul li.class.closed>a>.class-toggler:after{content:"\\e60f"}.resource-selector .resource-tree ul li.class.closed>a>.icon-folder:before{content:"\\e60c"}.resource-selector .resource-tree ul li.class.closed>ul{display:none}.resource-selector .resource-tree ul li.instance>a>[class^="icon-"],.resource-selector .resource-tree ul li.instance>a>[class*=" icon-"]{color:#0e5d91;margin-right:4px;padding-left:25px;font-size:16px;font-size:1.6rem}.resource-selector .resource-tree ul li.instance:hover{background-color:#e7eff4;color:#222;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.instance.selected{background-color:#3e7da7;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.instance.selected>a,.resource-selector .resource-tree ul li.instance.selected>a>[class^="icon-"],.resource-selector .resource-tree ul li.instance.selected>a>[class*=" icon-"]{color:#fff}.resource-selector .resource-tree ul li.instance.selected:hover{background-color:#266d9c;-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s}.resource-selector .resource-tree ul li.instance.selected .clickable:hover:before{background-color:#518ab0}.resource-selector .resource-tree ul li>a>.selector{display:none;position:absolute;top:0;right:8px;line-height:40px;height:40px;width:25px;text-align:center}.resource-selector .resource-tree ul li>a>.selector:after{-webkit-transition:all, 200ms, linear, 0s;-moz-transition:all, 200ms, linear, 0s;-ms-transition:all, 200ms, linear, 0s;-o-transition:all, 200ms, linear, 0s;transition:all, 200ms, linear, 0s;font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e69b";font-size:15px;font-size:1.5rem;color:#0e5d91;line-height:40px;position:relative}.resource-selector .resource-tree ul li.selected>a>.selector:after{content:"\\e69d"}.resource-selector .resource-tree ul li.selected>a>.selector:after,.resource-selector .resource-tree ul li.selected>a:hover>.selector:after{color:#fff}.resource-selector .resource-tree ul li[data-access=denied]>a [class^="icon-"],.resource-selector .resource-tree ul li[data-access=denied]>a [class*=" icon-"],.resource-selector .resource-tree ul li[data-access=partial]>a [class^="icon-"],.resource-selector .resource-tree ul li[data-access=partial]>a [class*=" icon-"]{position:relative}.resource-selector .resource-tree ul li[data-access=denied]>a [class^="icon-"]:after,.resource-selector .resource-tree ul li[data-access=denied]>a [class*=" icon-"]:after,.resource-selector .resource-tree ul li[data-access=partial]>a [class^="icon-"]:after,.resource-selector .resource-tree ul li[data-access=partial]>a [class*=" icon-"]:after{content:"\\e629";color:#555;position:absolute;left:7px;top:6px}.resource-selector .resource-tree ul li[data-access=denied]{color:#a4a9b1;background-color:#fff}.resource-selector .resource-tree ul li[data-access=denied]:hover,.resource-selector .resource-tree ul li[data-access=denied]:hover>a,.resource-selector .resource-tree ul li[data-access=denied]>a,.resource-selector .resource-tree ul li[data-access=denied] [class^="icon-"]:before,.resource-selector .resource-tree ul li[data-access=denied] [class*=" icon-"]:before{cursor:auto;background-color:#fff;color:#a4a9b1 !important}.resource-selector .resource-tree ul li a:hover{text-decoration:none}.resource-selector .filters{position:relative;height:100%;opacity:0}.resource-selector .filters.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.resource-selector .filters .ui-generis-form{margin:0;padding:10px;width:100%;background-color:#f3f1ef;border:none}.resource-selector .filters .ui-generis-form h2{margin:0}.resource-selector .filters .ui-generis-form .left{width:100%}.resource-selector .filters .ui-generis-form .toolbar{margin:0}.resource-selector nav{height:40px;-ms-flex:0 1 40px;-webkit-flex:0 1 40px;flex:0 1 40px;border-top:solid 1px #ddd}.resource-selector .context{display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;padding-right:16px}.resource-selector .context .class-context{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;overflow:hidden}.resource-selector .context .class-context .class-selector{position:static}.resource-selector .context .class-context .class-selector .options{max-height:calc(100% - 120px)}.resource-selector .context .class-context .class-selector .options.folded{max-height:0}.resource-selector .context>a{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none}.resource-selector .context>a:hover,.resource-selector .context>a.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection{display:box;display:-ms-flexbox;display:-webkit-flexbox;display:flexbox;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;flex-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;flex-line-pack:start;-ms-flex-line-pack:start;-webkit-align-content:flex-start;align-content:flex-start;flex-align:stretch;-ms-flex-align:stretch;-webkit-align-items:stretch;align-items:stretch;padding-right:16px}.resource-selector .selection .selection-control{-ms-flex:0 0 80px;-webkit-flex:0 0 80px;flex:0 0 80px}.resource-selector .selection .selection-control>label{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none;width:36px;padding:10px 0 0 8px;margin:0}.resource-selector .selection .selection-control>label:hover,.resource-selector .selection .selection-control>label.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection .selection-control>a{display:inline-block;width:40px;height:40px;padding:10px 0 0 12px;color:#222;border-left:solid 1px #fff;text-shadow:0 0 0 transparent;text-decoration:none;width:38px}.resource-selector .selection .selection-control>a:hover,.resource-selector .selection .selection-control>a.active{color:#3e7da7;-webkit-transition:color, 200ms, linear, 0s;-moz-transition:color, 200ms, linear, 0s;-ms-transition:color, 200ms, linear, 0s;-o-transition:color, 200ms, linear, 0s;transition:color, 200ms, linear, 0s}.resource-selector .selection .selection-control .selection-toggle .icon-multi-select:before{font-size:16px;font-size:1.6rem}.resource-selector .selection .selection-control .selection-toggle.hidden{display:inline-block !important;visibility:hidden}.resource-selector .selection .search{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;position:relative;padding:6px 6px 6px 5px}.resource-selector .selection .search:before{font-family:\'tao\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\e61f";position:absolute;left:12px;top:12px;opacity:.4}.resource-selector .selection .search input{-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;max-width:inherit;width:100%;padding:4px 25px}.resource-selector .selection .search>a.filters-opener{position:absolute;right:12px;top:10px;font-size:16px;font-size:1.6rem;text-decoration:none}.resource-selector .selection .filters-container{position:absolute;width:100%;background-color:#f3f1ef;border:solid 1px #ddd;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;-moz-border-radius-bottomright:3px;-moz-border-radius-bottomleft:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;-webkit-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-moz-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-ms-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);-o-box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);box-shadow:1px 1px 2px 0 rgba(0,0,0,0.2);left:0;top:80px;overflow-y:auto;z-index:100;max-height:calc(100% - 110px);-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.resource-selector .selection .filters-container.folded{overflow:hidden;max-height:0;border-width:0;-webkit-transition:max-height, 300ms, ease, 0s;-moz-transition:max-height, 300ms, ease, 0s;-ms-transition:max-height, 300ms, ease, 0s;-o-transition:max-height, 300ms, ease, 0s;transition:max-height, 300ms, ease, 0s}.resource-selector main{-ms-order:0;-webkit-order:0;order:0;flex-item-align:stretch;-ms-flex-item-align:stretch;-webkit-align-self:stretch;align-self:stretch;-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;-ms-flex:1 1;-webkit-flex:1 1;flex:1 1;min-height:150px;border-top:solid 1px #ddd;background-color:#fff;height:100%;overflow-y:scroll}.resource-selector main .no-results{display:inline-block;width:100%;text-align:center;margin:10px auto;opacity:.75}.resource-selector main .more{height:45px;padding:10px}.resource-selector main.loading .more{opacity:0.65;cursor:inherit}.resource-selector footer{height:30px;-ms-flex:0 1 30px;-webkit-flex:0 1 30px;flex:0 1 30px;border-top:solid 1px #ddd;background-color:#f3f1ef;text-align:center;padding:5px}\n\n/*# sourceMappingURL=selector.css.map */.loading-button [class^="icon-"],.loading-button [class*=" icon-"]{padding:0}.loading-button .action-label,.loading-button .terminated-label{margin-left:9px}.loading-button .spinner-icon,.loading-button .terminated-label{display:none}.loading-button.started{cursor:default;opacity:0.5}.loading-button.started .spinner-icon{display:inline-block;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0);-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-ms-transform-origin:50% 50%;-o-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-animation:loading-button-rotate 1.4s infinite linear;-moz-animation:loading-button-rotate 1.4s infinite linear;-ms-animation:loading-button-rotate 1.4s infinite linear;-o-animation:loading-button-rotate 1.4s infinite linear;animation:loading-button-rotate 1.4s infinite linear}@-o-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading-button-rotate{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.loading-button.started .start-icon{display:none}.loading-button.terminated .action-label{display:none}.loading-button.terminated .terminated-label{display:inline-block}\n\n/*# sourceMappingURL=button.css.map */div.task-report-container{width:100%}\n\n/*# sourceMappingURL=taskable.css.map */.destination-selector{position:relative;width:400px;opacity:0}.destination-selector.rendered{opacity:1;-webkit-transition:opacity, 300ms, linear, 0s;-moz-transition:opacity, 300ms, linear, 0s;-ms-transition:opacity, 300ms, linear, 0s;-o-transition:opacity, 300ms, linear, 0s;transition:opacity, 300ms, linear, 0s}.destination-selector>div{border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;background-color:#f3f1ef;padding:20px;height:500px;position:relative}.destination-selector>div>p{font-weight:bold}.destination-selector .selector-container{position:relative;height:calc(100% - 90px)}.destination-selector .actions{margin-top:30px;text-align:right}\n\n/*# sourceMappingURL=selector.css.map */'
),define("loader/tao.bundle",function(){});
//# sourceMappingURL=tao.min.js.map