{"version":3,"mappings":"AAsBA,YACA,gBAIAA,oDACAC,mDACAC,gDAEAC,4CACAC,sBACAC,4DACAC,gDACA,IACAF,oCACA,YACAA,oBACA,CACAG,qDACA,+CACAA,iBACAA,kBACAC,oCAEA,EACAC,iEACA,kCACAC,iBAEA,EACA,EAGAH,sCAGAA,qBAGAA,iBAOAA,iDACAI,oBACAA,uCACAA,4CACA,oEACA,GACAC,2BACAD,+BACAJ,sBACA,GACAJ,gBACA,EACA,GAGAD,8CACAK,6BAEAJ,gBAEA,EACA,KAEAU,wCAEAA,MC7FA,4EACA,aAEA,qCASA,4BACA,6CAMA,MAJA,sBACAC,6EAGAA,SACA,CACA,GCrBA,yBACA,8EACA,6EACAC,0BACA,+BA0CA,6BACAC,gBAIAA,6BAEA,mBACAC,MACA,qBACA,6BACA,oCACAC,sBAEA,0BACAC,oBAEAC,kBAEA,CACAC,eACA,CACA,UACA,CAGA,0BACAC,cACAC,gBACA,uBACAC,4CACAF,sCAGA,gBACA,CAkBA,8JAyDA,8BACAf,2EAEAkB,mCACA,4BACA,EAcA,GARAA,0BAMAA,qBAEA,wDAKA,MAFAA,0BAEAA,UACA,GAEAC,kCACAC,gBACAC,eAEAnB,yBACAoB,yCACAC,+CACAC,iBACAC,6BACAC,yCACAC,4GACAC,iBACAC,uBACAC,2BACAC,iCASA,2CACA,gDACAC,mDACA9B,wCAEA,IAEA+B,6EACAC,kEAEAC,mBACAC,wCACAC,gDACAC,oDACAC,wDACAC,uCAGAC,SAKAvB,0HAEAwB,gCACAC,qBACAC,uBACAC,uBACAC,uCACAC,mCACAC,iCAQAC,kBACAC,iLAGAC,kBACAC,uJAGAC,iBAGAC,iBAGAC,mBAGAC,mBAGAC,2BAGAC,mBAKAC,sBAGAC,kBAGAC,cAIAC,cAMAC,cAIAC,uBAMAC,qBAGAC,gBAGAC,gBAIAC,YAGAC,gBAGAC,+FAGAC,oEAGAC,6IAGAC,YAKAC,2CAQAC,wCACAF,wBAKA,uEACAG,QAGA3B,qFACAE,qFACAE,gEACAC,gEACAe,wDACAd,yCACAC,yCACAC,wDACAC,wCACAC,8CACAC,sCACAG,8BACAC,gDACAC,4CACAH,8BACAI,mCACAC,mCACAC,0BAEApB,4DAEAW,qBACAH,oBAGAQ,sBACAD,eAIAM,eACApB,8DACAE,gBACA,yBACA0B,4BACAA,+BAEA,wBACAA,2BACAA,6BACAA,4BAEA,+BACAA,kCACAA,6BACAA,4BAEA,2BACAA,8BACAA,gCACAA,6BAKAD,eACA3B,sCACAA,kCAEA4B,qCAEAD,eACAzB,sCACAA,kCAEA0B,qCAEAD,uBACAC,oDAIAV,eACAlB,0BAIAW,gBACAiB,8CAIA5B,oBACA4B,iCAKAC,QACAA,YAGAL,WACA,EAOAM,yCACA7D,uCACA,IACA8D,iCACA,YACAA,wBACA,CACA,EAQAC,sDACA,IACA/D,wBACAgE,sCACAC,SACA,EACA,YACAjE,wBACAgE,eACAC,SACA,EACA,CACAH,0BACA,EAQAI,+CAEAC,YACAC,yBAEA,cACAC,oCACA,CAEA,kCACAD,sCACAA,oBACAC,4CAEA,CAGA,gBACA,IACAF,sDACA,aAUA,GANAhE,aACAwD,gCAKA,4BACAQ,0CACA,aACAG,eAEAA,+DACAA,4EACA,CAOA,MALAF,oBACAD,+FAIA/C,8DACA,EAWApB,wBACA,WACA,IACA,qFACAmE,+BACAjE,gBAEA,aACA,IACA,WACA,IACA,8DACAiE,yDACAhE,eAEA,aACA,QASAoE,gDACA,6IACA,+BACA,KACA,EAQAC,gDACAC,gDAGA,yNAIA,EAQAC,8BACA,0NACA,EAUAC,gEACApD,mBAIAA,yCACAqD,4CACA,EACA,EAYAC,0DACA,YAMA,GAHAF,wDAGAH,0BAEA,MADAX,8BAKA,+CASA,GANAc,gDACAG,gBACAC,wBACA,GAGA,8CAEA,8FACA,IACA,uCACAC,sHACA,aAGA,MADAnB,6BAEA,CA2BA,MAxBA,mJACA7D,0DAEAgF,sBADAA,sBACAA,2CAEAA,8CAKAvC,+CAEAwC,gCACAA,8CACAA,yCACAD,oCACAhF,0DACAgF,kCAKAL,yDAGA,EAUAO,iEAEA,6FACA,SAaA,GATAzC,qBACA0C,0CACAA,sCAOA7C,gDAEA,qDAGA,8CACA,SAGA,oCAIA,sEAIA,qHAKA,mGAIA,gBAIA,SACA,CACA,QACA,EAaA8C,iEACAC,aACAF,aACAG,cACAC,cACA/F,SAEAmF,0DAEA,sCAIA,eAIA,eACAa,YACAC,aACAC,YACAC,8BACA,MACAnG,oBAGAA,MACA6F,mBACA,eACAO,gBACAC,gCAgBA,GAdAV,wBACAG,0BAGAQ,0BACAA,0BACAA,sBACAnB,4DACAQ,0BAMA,6DACAI,qBACAQ,2CACAhC,mCACAA,mCACAgC,8BACAf,gDAEA,IAGA,8GACA,aAKA,aACAA,kCAEAjB,mCAIA,uBAKA,6CACA,yCAKA,IACA8B,aACAb,oDAGAA,qCAEAhF,uBACA,aAXA,CAYA,CAGA2E,yDACA,EAOAqB,4DACAC,mBACAC,6CAGAvB,sDAEAsB,uCAEAtB,wDAGAE,iCAKAoB,gDACAD,uCAIAZ,iCAIAT,oDACA,EAiPA,MAvOA3E,2CACAsE,aACA6B,oBACAnB,mBACAoB,eACAC,kBASA,GALAhC,QACAA,eAIA,wCAEA,qCACA,sDAGA,IADAA,uBACA,uBACA,uDAMA,2BACA,oFACA,0BACA,kCAEA,kBACA,2CAEA,CACA,YACA,CAUA,GAPA1B,YACAc,kBAIAzD,qBAEAkD,cAEA,0BAGAoB,4BACA6B,qDACA,0DAEA7B,kBAEAA,mCAEA,CAEA,yDACA,qEAOA,GAHAA,0BAGA,MACA,gCAEA,CAGAA,kBACAT,kCAIA,sDAGAmB,sCAEA,mDAKAH,iCAKAG,iDACAgB,wCAIAZ,iCAEAgB,sBAMA,GAHAA,aAGAlD,SACA,aAIA,eACA,2BACAmD,2DAEA/B,iBACA+B,4CAGAA,iBAYA,MATAtD,qBAMAsD,4DAGAA,UACA,CAEA,gEACA,sFACA,EAQArG,kCACAyD,kBACAd,aACA,EAOA3C,iCACAuD,YACAZ,aACA,EAYA3C,oDAEAuD,QACAE,oBAEA6C,yBACAhB,0BACA,4CACA,EASAtF,oDACA,kCAGAuB,wCACAA,qCACA,EASAvB,0CACAuB,mBACAA,uBAEA,EAQAvB,2CACAuB,oBACAA,qBAEA,EAOAvB,oCACAuB,QACA,EAEAvB,SACA,IAhmCAuG,qCACA,QACA,EAEAC,k2BAGAC,kcAEAC,gWAEAC,2QAEAC,yBAEAC,oCACA,QACA,EAEAC,uzBAEAC,++DAEAC,kmBAEAC,8EAEAC,qCACA3H,qCAEA4H,4CACApH,qBAEAA,UACAA,2CACA,gCACA,MAyCAqH,+BACA,QACA,EAEAC,gDACAC,uCACAC,6CACAC,iCACAC,4GACA,CACAC,gDACAC,mFACA,CAEAC,gOAIAC,0CACAC,iBAEAC,iCACAnE,qBAEAoE,+BACA,4CACA,EAEAF,QACAA,yCACA,gCACA,MAWAG,qFACA,iIACA,YACA,GAKAC,aACAC,kCACAnJ,yEACAkJ,uDAGA,kDAEA,IACA,6CACAE,wCACA,cACA,CACA,EACA,UAKA,MADAC,0EACA,IACA,CACA,EA88BAC,yBAEA,aAEA,GAEA,CCtlCAlJ,8FACAmJ,EACAC,EACAC,GACAC,IACAC,MACA,CACA,aAEA,cACAC,2DACAC,4CACA,EAOA,qCACAC,yCACAH,iCACA7J,mCACA,EACA,CACA,GC7BAM,yBACA,SACA,SACA,qBACA,cACA,kBACA,iBACA,WACA,cACA,sBACA,oGACA,gBAiBA2J,2CAoCAC,oCAOAC,8BACA,iBAGAD,sBAIAE,aADAJ,2BACAA,kBAEAhK,mBAGAgK,+BACAD,qCAEAM,mCACA,EASArB,sCAwBA,MAvBAsB,8BACAC,wBAEAd,mFACA,cAGAe,mBAGAC,aACAC,uBACAA,OACAA,gDAKAA,MACAL,4BAEA,GAEA,IACA,EAOAM,+BACA,oBACA,EAOAC,+BACA,gBACA,EAOAC,iCACAf,+BACAE,0BASA,MAPAC,sBACA,gBACAD,4CACAc,sBAEAC,0BAEA,IACA,CACA,IA/IAV,cAKAN,YAuJA,MAVAM,sCACAW,+BACAd,sCACAA,mCACA,GACAc,8BACAd,yCACAA,oCACA,GAEAA,aACA,GC1KA5J,uCACA,YACA,aAqBA,yCACA,aAEA,eADA2K,gBACAC,eACAA,2EACAD,sDAGA,mBACA,CAKA,wBACA,mCACAE,kCAIAF,6CAEAA,+BACAE,8BAEAA,iCAGAA,4CACA,6BACAC,mBAEAD,sCAEAA,uBAEA,CAvDA,kCACAE,oCACAC,eACAC,iBACAC,gCACAN,gBACAO,sDACAC,2CACA,EACAT,6CAoDA,MAJAK,wCACAK,cACA,GAEA,CAKAxB,wBACA,8BACAyB,YAEAT,iCACAA,mBAEAA,gCACAA,sDACAQ,cACA,EACAE,gBACAV,+DACA,CACA,CACA,GCxGA7K,kBACA,SACA,SACA,UACA,qBACA,kCACA,aAEA,aACAwL,gBAOArC,uCACAA,gCACA,CACA,EAEAsC,4BACAxC,gDACA,cACAyC,aAKA,MAJAC,mBACAD,gEACAvC,6DAEAA,8CACA,EAKAyC,yCACA3C,gDACA,gDACA4C,kCACAA,mBAGA,EAWAC,mBACA7C,qDACAE,iCAGA,MAFAe,qBACAA,qBAEA,GACA6B,kBACA,EAOAC,kBACA/C,qDACAE,uBACA4C,iBACA,EAOAE,kCAEA3C,YAEA4C,KACAA,6BAGAA,+BAEA/C,kCACA,sBACAA,4BAGAG,uBACAH,sBAEA,EAUAgD,kDAEA,QAEA,oFACA,8DAUA,MAPA7C,0DAEAF,mBACAE,gBACAF,0BACAE,0BAEAA,GACA,CACA,EAEA,cACA,GC1HAtJ,qCACA,4BAwGAoM,sBAlEAA,oBAVAA,kBAFAA,kBAdAA,SAHA,2BACAC,eACAC,0BACA,mDACA,CASA,uBACAC,sBACAC,iBACA,MACAA,kDAEA,uBACA,CAoFA,MA5EAC,+CACA,8BACA,EAQAA,sCACA,+DACA,EAQAA,2BACA,qBACA,6EACA,EAQAA,2BACA,qBACA,6EACA,EAQAA,2BACA,qBACA,uFACA,EAQAA,2BACA,qBACA,oEACA,EAQAA,8BACAD,gBACAE,4BACAC,iBACAC,QACAC,6CAIA,MAHAD,MACAC,iEAEAJ,kBACA,EAEAA,IACA,GCrGA,yBACA,8EACA,0EACAvM,uBACA,4CAs3CAkM,qBAvLAA,uBACAA,qBAl4BAA,SAjTA,+BACA,cACA,kBACAU,SAGAA,UACApN,yCACAoN,UACAC,IACA,GACA,CACA,CAEA,0BACA,iBACA,kBACAC,YACAA,aACAC,sBACAD,aACAD,IACA,mBAEA,CACA,CAsBA,qCACA,eACA,oFACA,CASA,oDACA,wBACA,SACA,GAEArN,0CACAwN,0CACA,iCACA,CASA,sCACA,0BACA3M,QAEAA,gCACA,CASA,kCAEA,YACA,qBAGA,yBACA,WACA,WACA,kCACA,gBACA,qBAKA,4DACA4M,wCACAC,0CACAC,gDAEA,4DACA9M,QAGA+M,uCACA,CAYA,6BACA,cACAC,OAEA,aACAC,OAEAD,cACA,CASA,kCACA,YACA,gCACA,OAEAE,4CAGAC,wCAEAA,2DACAA,+DAGA,uDAEAC,gDAMA,sHACAC,8BAGAF,aATAnN,sEAUA,CAEA,oCACA,oCAEA,oBAGA,wEACA,CASA,6BACA,wBAIAmE,KAHAmJ,wBAIA,CAUA,mDAEA,gEACA,gCACA,GAGAC,mFACAjE,8BACAkE,4BAGAC,6BACAA,wBACAA,oBACA,0DAIA,qGACAC,4CACAC,wBAGAN,yCAIA,yCACAO,mBACAC,mDAEAA,uDAEA,CAUA,+BACAC,mEAEAC,gDACAX,0BAEA,4CACAvG,4CACAmH,8DACA,kCACA,CAEA,yBACA,CAWA,wCACAC,sEAEAC,mCACAC,qCACAC,uBAKA,MAJAC,8BACAA,gCACAA,+BACAA,gCACAA,IACA,CAYA,wCACAC,+BACAC,sCAEA,kGACA,CAEA,+CACA,oSACA,CAEA,qCACA5J,oBACAkC,8BACA2H,+CAEA,OACAC,iDACAC,8CACA,CACA,CAkEA,gCACA,4BACAC,iCACAC,iCACA,EACA,CASA,wCACA,YAKA,IACA,aACAP,wCACAH,oCACAC,qCACAE,oBACAA,sBACAA,uBACAA,sBACA,KACAA,qCAEA,cAEAQ,SACAC,eACAC,aACAL,2BACAD,2BACA,EAGAO,yEACAN,iEACAD,oEAEAQ,yCACAC,0CAIA,kCACA,6CACAD,2CACAC,0CAEAL,6BACAA,4BACA,CAEA,4BACA,CAEA,kEACAM,2EAEAlC,gBACAmC,gCACAC,6CACAC,yCACAC,uCAEAC,wCACAC,oDACAC,sDAGAP,wBACAG,2CACAA,8CAEA,2BACAP,mDACAD,uDACAJ,yBACAD,0BACA,GAQA,GAPAkB,oBACAA,qBAMA,oBACAC,2CACAC,4CAEAF,sCACAA,yCACAA,yCACAA,0CAGAA,4BACAA,6BACA,CAMA,OAJA1C,8GACA0C,uCAGAA,OACA,CAEA,mEACAG,2EAEAjJ,2CACAkJ,kEACArB,uDACAD,0DAEAP,0CACAC,kDAEA6B,QACAjB,0DACAD,8DACAJ,YACAD,aACA,EAEA,4BACA,CAUA,0BACA,oCACA,uCAGA,wDAGAwB,gCACA,CAUA,+CAEA,4CACA,gCACA,IACA,6BACAC,uDACAA,oBAEA,mCACA,CAaA,sEACAf,2EAIAgB,0BACAhD,yGAGA,kCACAgD,yFACA,CAEA,mBACA,oCACAC,yDACA,mCACAA,sDAEA,6BACAA,oDAEAA,iCAGA,4FAGA,6DACA,yDACA3B,8BACAC,4BAEAyB,8CACAA,qCACAA,iDACAA,mCACA,KAEAA,mBAEA,CAGAE,mBACA,6CAMA,MALAF,0DACAA,uDACAA,2DACAA,6DAEAA,UACA,CAEA,uBACA,qBACA1B,mBAEA,mBACA,CAWA,oFACA,qEAEA,kCACA,iBACA,GAEA0B,sEAEAG,OACAvB,KACAL,uBACAD,iCACA,EACAE,OACAD,qCACAD,wBACA,EACAG,QACAF,uBACAD,uCACA,EACAK,MACAJ,mCACAD,wBACA,CACA,EAEA8B,iDACA,iBACAC,OACA,cACAC,wBACA,EACA,sBACA,oBACA,GAEAC,iDACA,sBACAjC,oBACA,6DACA,GAEAkC,iFAEAC,kCAEA,qDACA,CAYA,wDACAzB,2EAEA0B,+GACA,uFACA,CASA,mCACA1R,0CACAqQ,wCACAsB,+DACAC,+DACAlC,QACAH,4BACAD,6BACA,EACA,aACA,CASA,yCACA,+DACA,oEACA,oBACA,EACA,CAYA,6DACAuC,qCAGAC,kCAGAC,eACAxC,uBACAD,wBACA,EAGA0C,iDACAC,8BACAC,mCACAC,qCACAC,8CASA,MAPAL,8GAEAA,6BADAF,0BACAQ,iEAEAA,sDAGAN,aACA,CAWA,+BAEAO,sBACAC,gBAIAA,oBACA,CAWA,mCAEA,6BACA,mCACA,wBACA,GAIA,iCACA,wBACA,GACA,yBACA,CAYA,2CACA,+FAmBA,MAjBAC,2CACAvD,sBAEA1F,sEAEA,yCACA0F,mCAIAzC,uDACAA,6DAEAA,uBAEA,GAEAA,IACA,CASA,kBAEA,4BAIA,UACAiG,cACApC,UACAqC,eACAzL,cACA0L,WACAnC,UACA,EAGAhE,6GAKAA,gMAGAA,sCAEAA,8CAGAA,wFAEAA,2EAGAA,uCAIA,qBAIA,6BAHA,wBACA,6BAIA,CAQA,mDACA,qCACA,mBACAoG,qBACA,mCACA,EACA,CASA,4CAIA,OAHAC,uCACAC,6DAEAjG,8BACAkG,oBACAC,4CACA,oDACA,cAEA,CACA,WACA,CAOA,mBAsBA,MArBA,2BAGAC,iDACA,2CACA,8BACA,yBACA,0BACA,2BACA,4BACA,gCACA,6DAGA,6BAIA,8BACA,gDAEA,IACA,CAOA,4BACA,wCACA,qDACA,CAEA,6EACAC,uCACA3I,kEACAA,qDAEA2I,QACAC,uFAEAC,0BACA,CAQA,kEAEAC,8BACAC,+EAGA,6CAKA,MAJAH,qFACAE,kCACAA,uBAEAA,KACA,CAQA,gCACA,2BACA,2FAEA,CAQA,+CAcA,MAZAC,sEAGAD,6CACA9I,sDACA,GAGA8I,uBACAA,uBACAA,yBACAA,uBACAA,KACA,CASA,iCACA,2BACAE,0CACA,2DAEA,CASA,sBACA,gDACA,CAUA,mCACAC,2CACA,YAEA,+FACAC,WAEA5S,qCACA,EACA,CAUA,2CACA2S,+CACA,2BACA,WAGA3S,8BAFAA,2CAIA,EACA,CAWA,0BAgBA,MAXA6S,6CAIAC,oDAGAnH,yDACAkH,8CAGAlH,IACA,CAYA,6EAEA6F,oFAKAR,4JAQA,MANA+B,8CAIAF,sEAEA1J,OACA,CASA,uCACA2H,aACAC,YACAgC,2BAIAC,4EACA,kCACA,mBACA,sCACAtK,iJAEAuK,0GAEA9F,mDACA+F,qDAGA1D,QACA2D,wBACA,EAKAxD,SACAb,8BACAC,4BACAH,kCACAD,+BACA,EAEAL,kCACAC,iCAKA6E,uDAWAtE,YACAC,WAqBA,GAhBAA,IAJA,iBAGA,+BACA,0CAEA,wCAGAY,YAIAb,KAFA,gBACA,+BACA,wCAEA,sCAGAa,aAEAsD,kCACAzD,iEACAA,gBACAA,gBACAA,kCACA,IAEA6D,iCACAC,gCACA9D,4BACAA,8BACAA,kCACA,CAGA,gBACA,4BACA,EAOA,MAJA7D,yDACAA,4CACAA,kEAEAA,IACA,CAYA,uEACA4H,0CACA,mBACA,4BACA,GAEAC,2DACA,uFACA,GAEA,mBACAC,oCACAC,gCACAhL,2IACA,CACA,iBACA,CASA,6BACA,wBAGA,uEACA,YAGA,iCAGA,kCAIA,GAHAiL,8DAGA,cACA,YACA,KAIA,iDAEA,MADAjL,+EACAiD,KAEA,GAEAqF,wCACA4C,2BACAb,4BACAc,kCAEAC,oDAEAC,gCACAC,wCACAlG,mCACAmG,gCACAC,mCACAC,kDAaA,GALAN,kDACAlI,8EAIAkI,iDAGA,uGACAO,0DACAzI,0CACAA,yEAEAA,0EAEA,CACAA,0DAGA0I,4DAIA1H,mDACA2H,8DACAC,sEACAC,6EAQA,MALAA,yEAEA7I,+BACAA,+KAEAA,IACA,CASA,+CACA,kBACA,QACA,oBACA,MAEAiF,SACA,CAgDA,iCACA6D,qEAEAC,yCACAhD,0EACA,gCACA,CAeA,4BAEA,sDACA,YAGA,yDAEA,YACA,GAEAvB,qIAEAa,uCACA2D,kDACA/D,2CAEAgE,aAEA,yBACA,oBACAA,wCACA,MACA,yBACAA,+BACA,MACA,gCACAA,kCACA,MACA,QACAA,4BAkDA,MA/CAA,wCACA,gDACA,YAGA5D,uCACA2D,qDAEAzD,mCACA2D,kCAGAC,kBACAC,ySAEAC,+DACAC,kEACAC,4DACAC,qEAEAC,mKAGAtB,oDACAuB,6OAEAN,sDAEApJ,iBAEAoJ,oCACA/D,8BAGAqE,mBACAzE,2CAGAjF,sDAIAA,kIAEAA,uDAEA,GACAA,IACA,CASA,+BACAiI,4BACAb,4BACAc,kCAEA7C,uCACA8D,kBACAhB,oDACAhG,iCACAoG,+BACA5C,wCASA,MAPAyB,yCACApH,0EAEAoH,wCACApH,oDAGAA,IACA,CAcA,oEAEA2J,8CACA9P,gBACAoN,cAGA,UACA,WAGA,0BACA,YACA,aACA,SACA5S,sBACA,MACA,QACA,SACA,QACAA,0BAGA,gCACA,kCACA,8BAEA,SAMA,MAJAuV,MADA,YACA,uEAEA,qEAEAA,cACA,CAGA,YAEA,CAaA,6EACA5F,eAKA6F,uDAIAC,qDACA,kBACA,GAIAC,wDACA,8BACA,IAEAD,0DACA/M,gGAKAiN,0BACAC,yLAqCA,MAlCAA,mCAEAtE,+DACAuE,qBACA,UAGAC,2BACA,+CACAC,gBACAF,qBACAE,GACAF,mBACAE,iBACAF,qBACAE,GAEAA,WAEA,MAEAC,kBACA,8DACA,EACA,GAGAJ,+BACAK,iCACAC,kBACAvG,+CAEA,EACA,GACAA,OACA,CAWA,8BACAK,oBACAgB,yBACA4C,2BACAb,4BACAc,kCAEAsC,sCAEAxG,eAsBA,MApBAA,SADAuG,mBACA,YAEAE,mDAGA,wBACArD,uBACAA,yBACA,yBACAA,uBACAA,yBACA,uBACAA,wBACAA,wBACA,2BACAA,wBACAA,wBAGApH,mBACAA,IACA,CAWA,uCACA,uFAKAA,8CACA0K,yDAMAC,qDACAC,wCACAxH,qBACAD,uBACA0H,sCAEAD,oBACAA,qBACAA,+BAEA,gIAIAA,qBACAA,uBACAA,sCAEApN,iCAEAoE,wBACAwF,2BAEA0D,OACAC,oCACA,4BAEA,uBACA,wDACA,4CACA,+BACAlR,2CACA,CACA,CAKA,MAHAuN,yEACAvN,0DAEAmR,kCACA,EACAC,2CACAxF,2CACA5L,uBAIA,MAHAuN,yEACAvN,yGAEAmR,iCACA,CACA,EASA,MAPApJ,mCACA,sEACAwF,iDACA,GAEApH,2BAEAA,IACA,CASA,wBACAqF,0BACAmF,sCACAU,uCAGA,sBACAjD,4BACAC,kCACAd,4BAEAe,wDACAhG,6BACAwD,wCAEAwF,cACAxN,8CACAkE,sFACA,EAEA7B,oEACA,CAEA,WACA,CASA,oBACA,yEACA,YACA,GAEAoL,gCACAC,sDACA,uCACA,cAEA,2GAEA,kBACA,YAGArL,aACAA,yCACA,MAEA,kBACA,YAGAA,aACAA,yCACA,CAEA,WACA,CASA,wBACAqF,0BACAmF,sCACAvC,2BACAb,4BACAc,kCAEA1C,qDAEA8F,0DAOA,MALAlE,2GAEApH,+CACAA,0CAEAA,IACA,CA15DA,OAJAuL,oEAEAC,mDACAC,kBACApL,wCACA,wEACAoL,kBACA,KACA,CACA,GA6BAC,8CAWAC,2DAgFAtK,yEACAC,sDAwMAsK,8CACA,sCACA,wDAEA,EAEAC,uBACA,wCACA,YACAC,UADA,oBACAA,oBACAA,gDACAA,2BACA,+CACA9E,uDAEA,CAEA,oDAGA,MAFA+E,gEACAC,uDACAC,WACA,CACA,IAMAjB,uCAYA,MAXAnG,YACAmC,+BACAnN,YACAqS,cACAC,gBACAC,WACA,GAEAC,eAGAA,GACA,EAEAC,yCACA,YACAC,MADA,wBAGA,cAFAA,qBAEAA,OACAvF,mDACAjJ,yBAKA,aACA,EA0iCAyO,8KAGAC,oCAoBAC,WACAC,YACAC,sBACAC,mCACA,EA+eAC,WASAC,OAEAnL,UAEAwE,WAEAvF,QACA,EAwCAwD,QAEAzC,UAEAwE,WAEAvF,UAIAwD,QACA,EAmBA2I,iBAEApL,UAEAwE,WAEAvF,mBAMAoM,yCAOAvI,UAMAgG,gCACA,EAWAwC,cAEAtL,UAEAwE,WAEAvF,eACA,EAYAsM,OAEAvL,UAEAwE,WAEAvF,SAEAxM,mBACA,EAaA+Y,MAEAxL,UAEAwE,WAEAvF,QAOAwM,gBAKA3I,UAOAgG,4BACA,EASA4C,OAEA1L,UAEAwE,WAEAvF,QACA,EAYA0M,MAEA3L,UAEAwE,WAEAvF,OACA,EAiBA2M,cAEA5L,UAEAwE,WAEAvF,gBAMAyG,mBAMAnC,WAMAC,SACA,EAiBAqI,YAEA7L,UAEAwE,WAEAvF,cAEA6M,wBAOApG,sBACA,CACA,EAqCAqG,UAKAtI,mBAMAuI,iBAMAC,iBAOAC,mBAQAC,+BAUAC,+BAOAlB,mBACA,EAcAmB,kBASA,qCACAC,YAEA1Q,kEACAoO,4BAEA,+BACA,0CACA,EAGA,6CAGA,kDAGA,YACAuC,eACAC,aACAxH,gBACA,EAGA,kEACA,mDAGA,0BACAI,6FACAkH,2HACA,GAGA,sEACA,iBACA5T,SACA,gCACA,GAEA+T,mBACA,sBACA,GAMA,iDACAC,6DACAA,8FAEA,GAGA,cAEA,6CACAT,eAEA,4BAGA,sCACA,CAoDA,MA9CAhC,sBACAhH,aACAhL,2BACA,wBACA,CACA,GACAgL,cACAhL,4BACA,yBACA,CACA,GACAgL,2BACAhL,yCACA,sCACA,CACA,GACAgL,4BACAhL,0CACA,uCACA,CA0BA,IACAoU,MACA,IA2BA,MAJAA,qEACAA,6BACAA,yBAEAA,MAEA,GAEA,CC1+EA,0BACA,iGACA,wFACAja,qCACA,sCAWA,qCACA,eACA,oFACA,CAZAia,4EAcArC,+CACA,sCACA,wDAEA,EAEAC,uBACA,wCACA,YACAC,UADA,oBACAA,oBACAA,gDACAA,2BACA,+CACA9E,uDAEA,CAEA,oDAGA,MAFA+E,gEACAC,uDACAC,WACA,CACA,IAQAK,yCACA,YACAC,MADA,wBAGA,cAFAA,qBAEAA,OACAvF,mDACAjJ,yBAKA,aACA,EAEAwQ,iBACAC,aACAC,QACAvT,QACAmK,gBACAqJ,SACAlZ,gIACAmZ,sBACAtK,SACAuK,gDACAC,+CACA,EAEAC,mBAoCA,oCACAlD,6BAEAmD,4BAGAvR,6CAEA0K,2CAGA,yBACA,qBAGA,gGACA,qDACA,MAGA,gBACA,uBAGA,iDACA,CAgXA,MAjUA2D,uBACAhH,cAaAhL,2DAEA,0DACAmV,2CACA,+CAGAC,kEAGAA,gDAGA,yEAIA,MAHA,4DAGAA,WACA,CACA,GACApK,uBACAhL,qEACA,2CAEAqV,4CACA,uBAEA,oCACAA,uEACA,KAEAA,gEAEA,CACA,GACArK,YACAhL,wCAGA,kCACA,YAKA,GAHA,gBAGA,kBAIA,MAHA,8CACA,sDACA,6BACA,KAIA,yDAGA,UACA,YAIA,4EAGAqO,0DAGA,+DA2BA,MAzBA,qCAEA,uDACA7C,2BACA,GAEA,yEACA8H,OACA9Y,kCACA,EACAgQ,QACAA,qBACA,CACA,GAEA7G,4BACA,+CACAkN,2CACA,GAGA,0EAEA,8BAEA,IACA,CACA,GACA7F,YACAhL,6BAEA,eAIA,gBAGA,4CACA,qDAEA,MATA,IAUA,CACA,GACAgL,eACAhL,0BACA,eAuBA,MApBA,qCACA,mBACAsV,iBAEAjB,+CACA,GACA,gBAEA,oBACA,aAGA,8BAGA,+CACA,4DACA,yBAGA,IACA,CACA,GACArJ,qBACAhL,mDAQA,MANA,2BACA2U,mDACA,iBAEAA,gCAEAA,SACA,CAWA,GACA3J,cACAhL,8CACA,gBAEA2U,mCAEAzN,sBACAqO,gBACAA,cAEAA,aACA,EACA,CACA,GACAvK,yBACAhL,+DACAwV,aAEAC,gBACAC,kBAEAC,+BAEA,UADAL,OAEAG,gCACAC,mCAEA,UALAJ,OAMAG,2BACAC,6BAEA,UATAJ,OAUAG,2BACAC,oCAGA,GAGAD,qCACA,4BACA,yBAGAG,qBACAJ,0DACA,EACAA,6CACAnH,sCACA,GAGAqH,uCACA,4BACA,wBAGAF,yDACA,EACAA,6CACAnH,uCACA,8CACAxU,kDACA,sBAGA,wCACAwU,yDAGAwH,QACA,KAEA,EACA,CACA,GACA7K,oBACAhL,sDACA,gBAEA,mBAEA,8CACA,+CACA,sCACA,gBACA,CACA,GACAgL,oBACAhL,0DACA,gBAEA,mBAEA,8CACArG,6BAEA,IADAA,yCACA,sBAGAE,6CAMA,4BACA,mEAIA,SACA,MAEA,CAEAic,gCACA,gBACA,CACA,GACA9K,0BACAhL,0CACA,yCAIA,YAHA,yCACA,2BAIA,0EACA,8GACA,wEACA,yBACA,4BACA,CACA,GACAgL,yBACAhL,iEACA,gDACAqV,4CAEAA,yDAEA,CACA,IACAJ,OACA,IAUAC,6CACA,gBAEA,qBACA,oDACA,EAEA,qBACA,qBACA,EAEA,wBACA,wBACA,EAEA,6BACAa,gBACAA,cAEAA,aAEA,EAEA,wCACA,wCACA,EAEA,gBAEA,mEACAC,yEAEAC,iCACA,gFAGAF,2DAGA1H,uCAEA0H,0DAEA,UAEAA,iDAEAA,2DAKA,CACA,EAEA,cAEA,GAEA,CACA,CCzlBA,uBACA,sCACA9b,gEACA,mCACA,iFACA,kBAEA,2BAEA,WAEA,oHAEAic,6CAEA,IACA,wDACAC,uCASA,qEACAC,kCACAA,4BACA9U,sBACA,CACA,CACA,mCAEA+U,kCAEA,uBAEA,uCAEAC,mGACAA,qEACAD,yCAEA,sCAEAnS,mFAEAqS,sBACA,EACA,CACA,EACAF,wBACA,CACA,gCACA,sBAEA,IACA,gCAEA,uCACA,mCACA,uCACA,2DAEA/U,qBAEA,uEAEA,eAEA,sBAEA+U,0EACAA,gBACAA,kBACA/U,QACAkV,KACA,GACAC,yBACA,KAEAF,uCAEA,CACA,KAEA,OAEA,CAEAG,oCACA,CACA,0JACAC,sLAEA,yHAEAA,sBACA,CACA,oBACA,GClFA1c,sBACA,aACA,cACA,WACA,aACA,iBACA,cACA,gBACA,gBACA,cACA,WACA,aACA,UACA,eACA,oBACA,iHACA,aAMA,kCAGA2c,qDACAC,kCACAC,mCAEAF,qCACA,uDACA,mDAEA5c,6EACA+c,eACA,EAEA,CAMA,OAMAC,0CACAC,kBACAC,uBACAC,oBACAC,qBACAC,oBACAC,qBACAC,kBACAC,iBACA,kCACA,EAEAC,uCACAC,wBACAC,uBACAC,qBACAC,sBACAC,0BACA,CACA,CACA,GCnEA7d,gCACA,SACA,SACA,OACA,UACA,UACA,cACA,cACA,eACA,cACA,sBACA,kFACA,aAQA,yCACA,oCACA,iFACA,CAMA,OAIA6J,0BACAoB,kBACAY,qCAGAiS,4BAGA7S,sDACA8S,MACAC,QACA5U,wCACA2U,oBACAC,mDACAA,SACAD,mBAGAE,gCACAC,yCACA,GAEA,GAGAD,kFAIAhT,+DAEAkT,kCADAC,aAIA,0BAEA,IACAA,8CACA,YACAD,yDACA,CAGAC,wCAEA,qEAGA,8CAEAD,aADAE,oCACA,6CAEA,8CAIA,qBACA7T,cAEAC,gCAEA,GAGAyT,4CACA,CACA,CACA,GCvGAle,2BACA,SACA,SACA,OACA,cACA,2BACA,aAKA,OAKA6J,0BACAgC,kCACAsS,6CACAA,cACA1T,8BAEA,CACA,CACA,GCvBAzK,uDAQA,2BACA,oBACA,CAsBA,MAdAse,4CAEAC,iDACA7U,SACAwC,oBACAsS,YACAC,eACA,EAEAtV,2BACAuV,YACAC,SACA,EAEAL,IACA,GC3BAte,gHACA,aAKA,aAKA,gCAWA4e,+EACAC,kCACAC,6DACA,iDACA,GACAC,+BACAC,uCACAC,+BAEA,aACA,gBACAC,oBACAC,oCACAC,wBACA,EAEAJ,kBAGAE,mCAEAH,2BACA,oBACA,yBALAA,2BAQAG,8CACAG,gDAEAL,mBACAtf,iDACA,4CAEAA,oDACA,8CAEA4f,mBACAJ,0EAEAG,gDACA3f,iDACA,0CAEA,EAWA6f,2DACAV,kCACAC,6DACA,iDACA,GACAC,+BACAE,+BAEAO,sCACAC,UACAP,2DACAC,iDACAC,eACA,EAMA,GAJAA,6BACAL,sBAGAK,4CACA,sDAEAH,eACAvf,iDACA,yCAEAA,oDACA,2CAEA4f,iBACA,CACA,EAMAI,iDACA,qCACA,4BAEAC,cACAL,sBAGAA,qCAIAvM,eACA,wDAJA,2DAUA,0DAEAuM,eAEA,EAKAM,iDACA,iCACA,gDACA,EAKApU,qBACArC,iDACA0W,8BACA,EACA,EAKAC,2BACA3W,+BACA,CACA,GAEA,oBACA,GCzKAnJ,yBACA,SACA,SACA,UACA,WACA,uBACA,UACAmJ,EACAC,EACAuC,QACArC,IACAuW,cACA,CACA,aAEA,eA2iBA,MApiBAE,aAEAC,8BACAC,YACAC,cAYA1U,iCACA2U,WACAC,WAEAvB,mCACAwB,uCACAC,mDAHAC,kBAsCA,GAjCA,yBAEA,uDACAA,iDAEA,mBAGApX,kDAEAqX,wBACAC,mCACAlE,4CACAmE,yBACAC,sDAEAD,6BAEAP,mBACA5D,MACAjT,sBACA9C,kBACAoa,aACAC,sBACArC,sEACAsC,gBACAC,aACAC,6CACAV,6CACA,CACA,GAGA,+CACA,6BACA,4BACAF,WACA,KACA,CACA,MAEA,qCAMA,mCAEAP,cACAoB,uBACAvW,wDACAyV,+BACA,GACAzV,oDACAyV,2BACA,GAEA,2EACAN,8BAEA,eAEA,EAQAqB,wCACA,cAoBA,MAlBAX,mBACAU,0BACAvW,oCACAR,sBACAqS,6DACA4E,0BACAA,kBACAhB,uBAEA,GAGA,gDACAI,yBAEAA,yBAGA,IACA,EAUAa,oBAOA,MANA,gBACA,eAEA,2BACAvB,0EAEA,gBACA,EAYAwB,qBAaA,MAZA,cACA,+BACA,2BAOA,wDAGA,IACA,EAWAC,gBAOA,MANA,gBACA,eAEA,2BACAzB,sEAEA,YACA,EAYA0B,oBAEApB,WACAW,mDAoCA,MAjCA,8CACA1X,0CACA+X,iBACA,GACA,2CAEA,eAGA/X,6DACA+X,qCACAA,qBAOAhB,4CAEA,GACA/W,6DACA+X,kCACAA,qBAOAhB,4CACA,GAEA,IACA,EAQAqB,mBAEA,MADA,kBACA,WACA,EAQAC,kBAeA,MAdA,gBACA,eAEA,8BACA,0BACA,6CAOA,sDAEA,IACA,EAQAC,mBAeA,MAdA,gBACA,eAEA,8BACA,0BACA,0CAOA,uDAEA,IACA,EASAC,mBAEA,MADA,2DACA,IACA,EAeAC,yBACArB,qDACAC,eACAqB,cACAV,QAEA,qBACA,8FAEA,uEACA,wGAoDA,MAlDA,mCACAjV,iBAGA,kBACAiV,uEAGAA,UAGAU,mEACA,wBACAA,wLAEArB,gKACAD,yCACA,iCAEAY,SACA5E,WACAjT,aACA9C,eACAoa,oBACAC,sBACArC,eACAsC,SACA,EACA,gCAEAK,2EACA,sBAEAjV,aACA,uBACA,sCAEAiV,iCAIA,uBACA,wBAEA,YAIA,oCAEA,IACA,EAUAW,oBACA,YACA,sBACA,4FAeA,MAXAX,SACA,sBACA,2CACA/X,6CACAA,6DACA+X,QACA,sBAEA,eAGA,IACA,EAaAY,oCACA,cA4BA,MA1BA,gBACA,eAEAzY,2BAEA,4BACA,8CAEA,iDAGA,6DAQA6W,4DAEA/W,sBACA4C,QAEA,GAEA,IACA,EAKAgW,+CACA,kBAGA,4DACAC,sBACAA,sBAEA,EAaAC,4DACA,wBAEA,gBACA,eAEA5Y,2BAEA,4BACA,8CAEA,iDAGA2Y,sDAEAA,sBAGAA,4CACA,MAGA,0BACA,EAQAE,kCACA,0DAOA,MALAF,sBACAA,iCAEA,uCAEA,IACA,EAQAvX,0BACA,cAIA,MAHA,iDACA0X,sDACA,GACA,IACA,EAQAnB,wBAEA,MADA,wCACA,IACA,CACA,EAEAlB,UACA,GAEA/f,MCjlBA,4FACA,gDACA,aAEA,OACA6J,iBAEAV,qCAEAe,mBAEAf,QACAG,8CACAkV,YACAtS,8BACAuS,gBACAC,2BACA2D,kBACA5X,qDACAtB,uCAGAsB,kDAEA,EACA6X,iBACA7X,kDACA,CACA,EAEA,EACA,CACA,CACA,GCdAzK,iCACA,SACA,gBACA,CACA,YAEA,aAUA,4BAEA,wBACAJ,0DACA2iB,+CACA,EAEAC,MAKAD,yCACAA,uCACA,IANAA,sBACAvG,WAOA,CAvBA,yCAyBA,OAIAxQ,sBACArC,gCACAsZ,qBAIAF,6DACApZ,yCACAsZ,eACA,EAEA,CACA,CACA,GChDAziB,2BACA,SACA,SACA,OACA,SACA,UACA,qBACA,yBACA,iBACA,cACA,aACA,uFACA,aAEA,eACA0iB,uBACAC,wBACAC,oBACApZ,SACA8Y,QACA,CACA,EAKA,OAKAzY,0BACAgZ,+CACAC,2DAEAA,2BACA/W,kBACA,6BACAwW,sBACAxW,iBACA,gCACAA,kBACA,GAGA5C,wEACA,CACA,CACA,GCpDAnJ,mCACA,SACA,SACA,eACA,aAMA,wCACA,8CACA,sDACA,SAGA,4DACA+iB,gDAKA,CAQA,kEAEA,IADAlX,8GACA,sBAIAmX,kFACA,8BAIA,iBACAC,6BACA,gDACAA,2BAEA,MAEAC,qCAMAF,gDACAC,kBANAD,+CACAC,kBAMA,CAKA,6BACA,OACA,WACA,kBACA,mBAEA,CAOA,sCACA,qCACA,CAEA,OACAE,uBACAC,oCACAC,iCACA,CACA,GCnFArjB,qCACA,SACA,UACA,eACA,6BACA,aAEA,2EACA,iDAEAsjB,cAQAC,0DACA,4BAEAC,4CACAC,gDACA,EAEAD,uBAEA,GAGAC,gCACAC,kCACAH,4DAEA,KAvBAA,oDAEAE,gCACAF,4DACA,GAqBA,CAEA,+DACA,8CACAI,WACAC,uBAEAC,QAIAA,uCACAD,iEAEAA,wBACAD,oCACA,CACA,GAEAA,eACAA,kCACA,gDACA,EAEAE,wDAEAA,wBAEA,CAEA,+EACA,qEAEAC,eACAC,2DAKAC,mEACA,CAEA,yCACA,gBACA1a,8CACA4C,KACA+X,aACAxF,gBACAyF,UACA,EACA,CAEA,uFACA,uEAEA,mDACA,sBACA,2EAEA,4BACA,OACA,KAEAhY,OACAiY,4DACAC,wCACA,EAEA/B,+CACAoB,sCACAY,+DACA,CACA,CAEA,4BACA,GC/GArkB,kCACA,SACA,UACA,0BACA,2CACA,aAEA,6CACA,mEAOA,MALAskB,8BACAA,kEACAC,0CAGAD,mBACA,CAEA,mHACA,uEAEAE,uCACA9C,SACAvY,gFACAA,0CACAsb,wCAIAtb,2EACAA,yCACA,CACA,CAEA,wCACA,4DACA,yBAGA,MAFAA,6DACAub,wBAIA,yEACA,qBAMA,WALAC,4BACAxb,wDACAA,gEACAA,yBACA,GAIA,6CACAyb,kBACAA,0BACAzb,mCACA,EAEA,CAEA,mDACA,sCACA0b,yBACAC,yCACA,yDACA,GAEAA,yCACA,qGACA,4CACA,iDACA,OAEA,wBACA,WACA,CACAD,0FACAE,qDACA,kEACAC,8DACA,CACA,GAEAH,wDACAI,uDACA,EACA,CAEA,iEACAV,0DACAra,mBAEAgb,iEAGAA,8DAGAF,2DACA,EACA,CAEA,iEACAV,yDACArB,wBACAqB,qCACArB,wCACA,CAEA,OACAzX,kCACA,CACA,GChHAxL,iCACA,SACA,OACA,UACA,cACA,wBACA,uBACA,UACAmJ,EACAE,GACAsC,QACAlB,SACA0a,UACAC,eACA,CACA,aAEA,+CACA,GACAC,uDACAhc,2DACAic,sDACAjc,+DAEA,kBACA,YACA,IACAkc,gBACA7G,qCACA6G,cACA7G,QACAjU,oCAEAA,iCAEA,YACAA,8EACA,CACA,CACA,CAEA,6BACA,sBAEA+a,QACAvf,+BACA,CAOA,gDAIA,4EAIA4F,2DACA,mBACA4Z,+BACAC,6FACAC,sEACAC,8CACA7f,mBAEA,0BACAwf,gBACAA,kBAEAK,mCAEA/Z,uBACAga,QACAC,6CACAF,yCAEAA,uCACAL,iDAGAG,0DACAH,mCACA,EACA,CASA,iCACA,oCACA,qBACAQ,iCAEAA,mCAEA,CASA,0CAGA,oCACAvH,iBAEAxU,2BACAgc,eACA,iBACAhc,wBACAgc,gCAGAna,qFACA,uBACAoa,8CACAA,2DACAA,2BACA,mBACAC,6BAEA,mBACAC,2BAGAD,wBACA,mBACAP,iDACAS,uCAEAT,sBACAA,sBACA,EACA,EACA,EACA,CAQA,gCACA,qEACAU,2BACAA,oBAEAA,2DACAld,mEACAkd,mBACA,CASA,4CACA,8CAIAC,yEAGAC,4BACA,sBACA,4BACA,oBACA,sCAEA,4DACA,SACA,0BACA,aACA,wBACA,WACAC,wCACAC,+CAEAC,wCA6EA,MA3EAD,oDAGAE,gCACAC,6BAEAC,+CACAH,kBACAG,kDACAH,kBAIAF,gCAEAC,iEAWAtd,mDACAsd,sCACAA,oEAEAE,+BACA,IAKAC,6BAEAE,kCArBAF,6BACAE,gCACAL,sCACAA,mEACA,GAoBA,GAGAC,iCAEAvd,yDAEAsd,iEAWAtd,gDACAsd,sCACAA,oEAEAG,4BACA,IAIAD,gCAEAI,+BApBAJ,gCACAI,6BACAN,sCACAA,mEACA,IAoBA,GACA,oBAEA,IACAO,4GACAX,qCACAC,uBACA,CACA,EACA,CAQA,2BACA,0DACA,2BAIAW,wCAGAV,kCACAA,kFAEAA,wBAMAW,mCACAC,oCACAA,uCACAC,2BACAC,wBACAC,+CAVAzb,6DACAuZ,gCAUA,CAEA,oCAEAmC,kCADAd,eAEAc,gBACAd,0DACAA,wBACAG,6BACAE,gCACAL,sCACAA,mEACA,IAIA,CAEA,qCACAtd,0CACA,+BACA,+FACAqe,sBAEA,sDACAA,uCAEAA,qBACA,GACAJ,0BACA,CAEA,qCACAje,8CACA,2BACA,sDACAqe,6CAEAre,8CACA,qBACAgc,yDAIAqC,sBACA,MAEAC,0EAEAC,gCACAC,sDAEAA,0DACA,8BACAF,WACAA,2CAEA,8BACAA,0BACAA,gDAGAL,yBACA,CAEA,kCACAje,2CACA,2BACA,sDACAqe,uCAEAA,qBACA,GACAre,+CACAA,uBACA,EACA,CAEA,kCACAA,2CACA,2BACA,sDACAqe,uCAEAA,qBACA,GACAre,+CACAA,uBACA,EACA,CAMA,kDACAod,4BACA,4CACAqB,6DACAC,iFAEA,4BACAD,+CAEA,CACA,EACA,CAGA,OAIApc,UACAsc,yCACA,CACA,GAIA9nB,MClcA,4FAYA,qBAOA+nB,2BACA,6CACA9S,iCAEA+S,oCACA/S,2DACA,GACAA,QAEA9L,QACAG,QACAkV,YACAtS,MACA+I,YACAsH,WACA,EACAkC,gBACAC,2BAEA,0BACAhe,2BACA,uBACA,4BACAunB,yBACA,CAEAC,8BACA,CACA,EACA,EAOAC,kDAEAhf,QACAG,QACAkV,YACAtS,MACAkc,QACAC,iBACA,EACA5J,gBACAC,mBACAtV,+BACAkf,iBAEA,CACA,EACA,CAEA,EAEA,sBACA,GClDAtoB,mFACA,kBACAuoB,wBACAC,6CACAC,iDACAC,0CAOAC,yBACAC,0CAEA,IACA,oCACA,UAEA,MADAF,sEAEA,CACA,EAEA,OASAG,oKACAC,kBAcA,MAZAL,0BACA,oCAMA,IAJAM,mDACAD,mBAGAC,WACA,QAEA,GAEA,oFACA,CACA,CACA,GC3EA,yBACA,8EACA,iFACA7oB,+CACA,6CAorBAkM,qBAxmBAA,qBAu9BAA,mBArWAA,SArgBA,uCACA,mCACA,YACA,kBACA,gCACA,sCACA4c,qCACAA,aACAC,WACArN,wBACA,QACAqN,qBACArN,wBACA,CACA,CAKA,gDACA,UACAsN,kCACAA,iCACA,CACA,8CACA,yCAMA,MALAC,yBACAtjB,oBACAqE,sBACA,mBACAA,uBACAA,CACA,CACA,8BACAxF,iBACAA,iCACA,CACA,0CACA0kB,iBACA1kB,KACAA,gBACA2kB,4CAEA,CACA,gDACA,kMAQA,GAPA,6CACAC,wBAGAA,qBACAA,yBAEA,cACA,oBACAA,qCAIA,MAHAC,+BACAA,6BACAA,+BACAA,OACA,CACA,+BACA,0CACA,8BACA,cACA,CACA,mBACA,CAuPA,kDACA,kCACA,cAIAC,gCAHA,4CACA,2CAGA,CA+BA,mDAuBA,gCACArJ,YACAsJ,wCACA,2CACA,mCACA,2CACA,GACAtJ,4BACA,CACA,CACA,CACA,gBACAA,gCACAA,eACAuJ,cACAC,cACAC,cACAC,aACAC,uBACA3J,eACA4J,QACAC,cACA7J,qDACAA,wBACA8J,wCACA9J,sDACA,EAEA+J,iBAEAC,mBACAhK,mBACA,oDACA,wEASA,0BACAiK,mBAEAC,uBACA,CACA,4BACA,oBACA,CACA,4BACA,uBACA,gDAEA,wBACA3qB,wCAKA,GAJA,kCACAygB,iDACAA,8CAEA,6BACA,0DACAA,8CACAA,mCACAmK,WACA,0BAEA,EADAnK,4BACA,EACA,KACAA,0DACAA,sDACA,CACA,EAEA,CAIA,uBACA,+BACAoK,iBAEA,6BACAC,eAEA,gCACAC,qBACAP,cACA/J,+BACAA,uBAEA,CACA,kCACA,+CACA,CACA,6BACA,gBACA,OACA,QACA,UACA,QACA,gBAEA,CAIA,8BACA,2DAEA,0JAEA,EADA,6CACA,CACA,qBACAuK,qDAEAC,6CACAxK,qBACAA,qBACAA,4BAEA,IADAyK,+DACA,CACAC,4CACA1K,qBACAA,qBACAA,4BAEA,IADAyK,+DACA,CACA,kBACA,yCAEAzK,oBADAA,mBACA,CACAuK,0CACAA,6BACAI,iDACAA,iCACAC,gDACA,CACA,kBACA,yCAEA5K,oBADAA,mBACA,CACAuK,0CACAA,6BACAI,iDACAA,iCACAC,gDACA,CACAC,gCACA,CAIA,mCACA,6CACAC,MACAD,6DACA,CACA,8BACAN,+BACAI,kCACAC,mCACA,oCACAG,uCACAC,6CACAT,8BACAA,iBACAI,wCACAJ,wCACAK,yCACA,CACA,oCACAK,uCACAC,6CACAX,8BACAA,iBACAI,wCACAJ,wCACAK,yCACA,CACAC,+BACA,CAUA,yCACA,qCACA7K,mEAEAA,uDAEAA,iDAEAuK,MADA,iCACA,EACAvK,sCACA,qBACAA,sDACA,8BACAA,uCACA,CAKA,4BACA,wDACA,YACA,sDACAmL,gBAEA,CAOA,mDACAjQ,wBACAA,qEACA9a,yBACAA,0EACAA,gDACA4f,qBACA5f,gBACA8a,YACAkQ,gBACA7hB,eACA,GACA,CAQA,0BACA,qBACA,2BACA,CACA,CACA,yBACA2gB,wBACA,CAIA,sBAQA,GAPAlK,kBACA,wDACAnO,0FACA,iCACA,EACA,GAEAmO,cAEA,WADAqL,eAGA,0CA0BA,GAzBArL,kDACAA,oEACAsL,gDACA,4BACAC,qBACA,GACAD,+CACAtL,oBACAsL,sCACAtL,wCACAsL,sCACA,6BAGAA,yDAFAA,4CAGAA,yDACA,8BACAA,oCACAA,kDAEA,8BACAA,yDACAA,sDACAA,0DAEA,6BACA,6BACA,2BACA,wBACA,wBACA,EACAA,kDACAA,wDACAA,4DACAA,sEACA,6BACAA,oGACA,oBACAA,+CACAE,cACAC,eACA,GAEA,CACA,CAKA,8BACA,6BAEAzL,6BACAA,kDACAA,oBACAA,kDACAA,oBACAA,UANAA,wBAMA,CACA,IACA,kBACAA,sCACAA,oCAEA,CACA,SAEAjW,2CACAiW,2BACA,CACAA,aACA,CAKA,0BACA,sCACA0L,gEACA,CAUA,iDACA5hB,oBACA4Z,iBACA5Z,wDACAoR,+BACAA,kBACAwI,iCACA,CACA,iBACA,sDAGA,GAFA1D,iEACAA,mCACA,yBAGA,GAFAjE,sCACAiE,oEACAA,yBACA,0EACAA,6CACAA,6BACAA,4BACA,CACAA,4DACAA,6CACAA,qBACAA,yDACAA,gCAEA2L,YACA3L,gDACAA,iDACAjE,yCACA,CACAiE,wBACAjE,kCAEA6P,2EACAA,uEACAA,0EACA5L,6CACA,gDACA,uCACA,8CACAA,2EACAA,qBACA,uCACAA,qFACA,+BACAA,0DAEAA,qBACA,qDACAA,yBACAA,2DACAoJ,kCACApJ,eACAoJ,mCACAA,2CACA,CAEApJ,wCACA,+BAEAzgB,qBADAygB,oBACA,qCACA,CACA,+CACA,2HAuCA,MAtCA6L,yBACAA,gBACAA,uFACA,kCACA,kCACA7L,8BACA6L,kCACAA,gDAEAC,eACAD,uBACAE,uBACAF,qCACA7L,iCACA,6BACA4L,2DACA,iDACAA,yDACA,iDACA,4BACAC,uCAKAA,qCAEA,4BACAG,4CACAH,oCAEA7L,kBACA,4BACA,4BACA,gBACAA,oHAEAkK,uCACA2B,UACA,CACA,oCACAI,mBACA,4BACAV,uBACA,CACA,qCAGA,OAFAW,+CACAC,2CACAC,kCAIA,OAHAC,sCACAC,6CACAC,0CACAngB,aACAogB,EADApgB,qBAEA,GADAogB,oBACA,yDACA,QAIA,CACA,4CAMA,OALAC,oDACAjL,2BACAxB,kBACAmM,2CACAO,uBACAN,wDAQA,OAPAC,sCACAC,4CACA9K,iBACA,QACA6K,wBACA,EACAM,mCACAvgB,aACAogB,EADA,gEAEA,GADAA,oBACA,oCACAI,sBACA,0CACA,yBAKA,MAFA5M,iCACA6M,8CAEA,CACA,uCACAC,4DACAC,2BAEAD,WACArtB,uBACA,gEACAugB,sBACA,0DACAA,mBACAgN,oCAPAxL,OAOA,OACA,oBACAxB,oBACA8M,eAEAG,uCADAC,yBAEA,CACA,oCAMA,OALAC,6EACAC,yDACAC,yQACAC,kDAEAA,gDACAC,mGAGA,8DACAA,kFAGA,uDACA,+DACAA,yGAGA,qDAEA,MADAC,gCACAA,YACA,CACA,qBACA,gCAGAC,8BAEAzN,kBACAyN,4BAEA,OADAC,wCACAthB,IACAuhB,EADAvhB,6BACAuhB,iDACAA,gCACAD,+DAEA1N,qCACAA,wCACA,2DACAuL,cAEA,CACA,yBACAhR,kDACAqT,0DACAC,+CACAC,wDACAC,uDACAA,+DACA/N,qBACA+N,6EAEA/N,sBACA+N,6EACAA,qBACA,uBACA/N,uEAEA,gEAKA,MAJAgO,wCACAA,oCACAJ,2CACArT,wCACA,CACAA,oBACAwT,wBACAF,yBACA,CACA,CACA,uBACAJ,yBACAzN,6CACAA,yBACAA,qBACAA,uBAEA,iCACAqM,KADA,MACAA,mBACArM,0CACAA,4CACAA,2CAEAA,4CACA,CACA,yBA6BA,MA5BAA,uDACAA,qBACAA,sBACAA,+DACAA,kDACAA,+DACAA,kDACAiO,cACAlb,kDACA4O,iDACAthB,mBACA2f,mCACA4L,+CACA5L,+BAEA,CACA,GACAjN,kDACA4O,iDACAthB,mBACA2f,mCACA4L,+CACA5L,+BAEA,CACA,GACAA,6CACAkO,+BACAlO,aACA,CACA,qBACAA,gDACAA,wBACAA,mDACAA,yDACAA,kCACAmO,gEACAC,8CACApO,4DACA,sDAsBA,GArBAA,gEACAA,yDACAA,sDACAA,sCACAA,sBACAA,wBACAqO,wCACArO,wDACAA,wCACAA,2BACAA,2EACAA,+EACAA,mEACAA,qEACAA,2CACAA,4CACAA,0CACAA,0CACAA,4CACAA,uBACAA,6CACAA,2BACAA,+CACA,sDACAA,gEACAA,wDACAA,wCACAA,4BACAA,gFACAA,2CACAA,4CACAA,qFACAA,2CACA,CAUA,MATAA,yBAEAA,oEAEA,IAFAA,2BACAA,uBACAA,4BACAA,sCACAA,sBACAA,2CAEAA,kBACA,CACA,yBACAA,sBAGAyN,iCAFAzN,gEAGA,iCACAzF,SADA,MACAA,4DACAyF,6CAGA,MADAsO,kBACAtO,qBACA,CACA,6BACAuO,yCACAC,8CACA,mDACAA,oGAEA,sCACAxO,mLAEA,CAEA,sBACAA,iDACA,6DACAyO,8FACA,uDAEA,MADAA,sCACA,CACAA,wBACAC,uBACA,CACA,CACA,sCACA,mCACA,kDACA,wCACA,yCAEA1O,0BACA,6CACAA,4CACAA,4CACAkK,8BAEAyB,YACAzB,8BACAgE,+BACA,CACA,6CACA,qDACA,mCACAlO,oBACA,yBACAA,wBACA,4BACAA,2BACAA,sBACAA,kCACA,iBACAA,iDACAA,gDAEAA,sBACA,6BACA2O,kBAEA3O,cACA4O,oBAEA1E,wBACA,CACA,iBACAlK,eACAA,gBACA,iCACAA,gDAEA,sBACAA,wCAGAkK,uBACA,CACA,mBACA,sBACAA,0BACA,gCACA2E,CADA,MACAA,oBACAA,2DAGA,GADA7O,kBACAA,iBACAA,6BACAA,0DACAA,4BAEA,8DACA,0DACA,8CAEA,GADAoJ,0DACAA,yBACAA,oBACAA,4DACAA,uCACA,CACA,KAEApJ,uEAEAA,gBACAA,uBACAA,0BACAA,oDACA,sBAEAA,aACAA,iCACAA,+CACAA,uCACAA,qBAEA,CACA,iBACA,wBACA,sBACA,sBACA,uBACA,uBACA,WACA,SACA,mBACA,iBACA,iBACA,OACA,gBACA,SACA,mBACA,iBACA,aACA,WACA,gBACA,oBACA,mBACA,eACA,eACA,sBACA,qBACA,yBACA,mBACA,SACA,qBACA,IACA,cACA,CACA,UACA,EACA,CACA,uCACAA,4DAEAA,qCACA,CACA,0BACA,wCACA8O,iCACAC,gDACAC,oCACAF,+BACA9O,sCAGAjW,QACAA,iBACA,6BACA,gCACAklB,0BACAD,SACAjlB,iBACA,iCACA,UACA,oBACA,iCACAmlB,gEACA,mCACA,GACAD,uBACAjP,aACA,4DACAA,eACAA,eAGA,CACA,CACA,6BACA,eACAA,gEACAA,iEAEA,+DACAA,8CACAA,qBACAA,qDACAA,8EAEAA,qBACAA,uDACAA,+EAEAmP,YACAnP,cACAkK,8BAEA,CACA,kCACA,iCACA,qDACA,wBACAkF,aACA,iGACApP,qBACAoP,aACA,gGACA,SACA,iEACA,SACA,wBACA,SAEA,OADAC,oFACAjjB,iCAEA,GADAuhB,WACA,sBACAA,eAEA,YACA,sBACA,sBACAA,oCAEA,YACA,6CAEA,uCACA,wDACA0B,KACA,KACA,CACA,GAEA,oBACA,sBACA1B,QACAA,MACAyB,yCACAA,sCACA,WACA,CACA,WACA,CACA,8BACA,8BACA,uCACApP,iCAEA,CACA,yBAWAgP,gCACAM,kCACAC,kDACAC,4DACA,4BACA,cAIA,MAHAxP,4DACAA,sBACAA,wBACAjW,gBAGAiW,WACA,KACA,8BACAuP,cACAC,oBACA,oCACAxP,sCACA,kBACA,QACAyP,WACAjE,aACAkE,iBAGAC,cACA,MACA,QACA5lB,mBACA2lB,gBACA,MACA,OACA,QACAV,mCACAjlB,mBACAiW,cAEA,MACA,QACA,QACA,eAeAA,kBACAA,6BAdA,IADAjW,mBACA,8BACA,iBACAtK,2DACA,gCACAsK,WAGAA,oBACA6lB,qBACA/C,uCAJAA,0BAMA,CAIA,MACA,QACA,QACA9iB,mBACA,8BACAiW,0CACAjW,sBACAA,WACAA,oBACAohB,mCACA0B,uCAEA,YACAA,2BAEA7M,yBACA,8BACAA,yBACAwL,cACAxL,yBAEA,MACA,OACA,iBACA6P,QACA7P,iBACAA,mBACAA,mBACAA,UACA,+BACA5T,0BACA,WACA,sCACA,gBAIArC,aACAA,mBACAiW,sBALAjW,mBACAD,eAMA,CACA,CACA,MACA,QACA,CAEA,CACA,4CACA,cACA,iCACA,+CACAkW,wCACAsK,qBACAP,cACA,MACA,iCACA,+CACA/J,wCACAsK,qBACAP,cACA,CAGAG,2BACA,CACA,2BACA,oCACAnB,OACA,2CACAA,uCAQA,OANA+G,gBACA/G,uBACA/I,gSACA+P,4BACAC,oBACAC,sBACAC,4CACAtD,4BACAoD,iBACAA,mDACAE,uCACAD,WACAC,yCACAC,aAGA,yCAuCA,OAtCA9D,sCACA+D,2CACAC,yBACAC,gDACAC,yBACAC,2CACA,qCACAA,aACAF,oCACA,wDACAA,2BACA,GACA,YAEAN,8BACA,gBACA,qEACAM,2BACA,GACA,gBACAvH,6DACA,aACA,aACAsD,sBACA,OACA+D,WACAA,qDACAK,+CACAH,oCACAG,gDACAH,kCACAC,sBACA,oCACAG,4CACAJ,mCAGA,EACAlkB,oCACAikB,YAEA,CACA,CACA,oBACA,sDACApG,kBACA,CACA,0BACAjK,0CAEA,SADA,uCACA,KACA2O,kBACA5E,aACA,CACA,iCAEA,GADA,kEACA,mBAUA,MATAhgB,KACAA,mBACAA,2BAEA,4BACAiW,yBACAA,8BAEAkK,wBAGA,gDAEA,wBACAlK,eACA2Q,UACA3Q,6CACAA,oCACAkK,uBACAD,mCAEA,2DACA,+BACAG,iBAEA,8BACA,YACA,gDACAtd,6DAGA,CACA,gCACA,yBACA8jB,kFACAC,kEACA,mBACA7Q,qDACA,sBACA,wBACA,wBAEAA,qBACAA,+EACA,0CACA8J,0BACAC,eAEA/J,qBACA8Q,SACA,iBAGA9Q,8CAFAA,+DAGAA,iCACA,kBACA,kBACA6Q,qDAEA,CACA,CACA,0BACAE,WACA,OACA,cACA,aACA,aACA,YACA,aACA,aACA,WACA,wBACA,SACA,SACA,gBACA,gBACA,CACAC,uFACAC,WACAjR,2CACAA,6CACAjN,4CACA4O,2CACAthB,oBACA2f,yCACA,CACA,GACAjN,6CACA4O,4CACAthB,oBACA2f,0CACA,CACA,GACA,sCACA,4DACAiR,mBACAD,gCACA,yCACAE,mCACA,QACAF,mCAEAA,sBACAA,kCACA,wBACAC,kBACAD,gCACA,6CACAE,mCACA,iDAEAne,6CACA4O,4CACAthB,2BACA,GACA0S,6CACA4O,4CACAthB,2BACA,GACA,yDACA2f,yEACA,GACAjN,6CACA4O,4CACAthB,2BACA,GACA0S,6CACA4O,4CACAthB,2BACA,GACA,2BACA2f,0BACAA,2BAEAjN,8CACA,kCACAiN,yBACA,+BACA,kCACAmR,uFACAnR,qEACA,GACAA,cACA,4BACA,qBACA,6BACA,6BACA,4BACA,0BACA,2FACA,YACAoR,UADA,kCAEA,cADAA,6CACAA,WACA,sBACApR,2CACA5J,oBACAib,yBAEA,sCACArR,kCAGAkK,6BACA,CACA,uBACA,qCACA,yDACAlK,qFACAA,qFACAA,mBACA,sCACAkR,mCACA,EACAI,qIACAtR,0CACAA,oEACA,CACA,iDACA,oCAEAkK,yCACAqH,8DACAC,wcACA,6BACAC,mCACAC,+BACAviB,uBACAuiB,iBACAC,4DAGA,GAFA/F,0DACAA,6DACA5L,uBAEA9Q,yBACAwiB,kBACA,0DACA,oCACA,GACA3iB,yDACA6iB,8DACAC,gEAEA,GADAjG,2DACA5L,mBAGA,GADAA,0CACA,WACAA,4CACAA,8CAEA,gBACAA,yCACAA,kDAEA,CACA,gCAEA,gBACA,UACA8R,4CACAC,oDACAC,qDACAC,mDACAC,gCACAC,wDACAvG,mDACAA,oDACAhnB,qHACAob,kDACAA,yCACA,CA1BA,CAXA,CAsCA,CACA,kBACAA,wCAEAkO,+BACAvC,YACA,CACA,yBACA3L,oBACA,iDACA,oCAEAlT,yBAGAkT,YAEA,CACA,uBACAjW,mBACAA,uBACAqoB,4BACA,sBACAC,yCACA,qCACA,qCACA,EACAnC,oCACA,kBAEApmB,UACAwoB,2EACAC,8DACAD,wBACAtS,6CACA,2BAEA,GADAA,6BACA,4BACAA,sCACA,mCACA,+CACAwS,cACAxS,qDAEAA,qCACA,KACA,6BACA,+BACAA,kBAEAA,wCACAA,sCAEA,yDACAA,wEAGA,GADAsK,qBACAiI,mBACA,4DACAvS,4CACAA,0CACAmP,WACAjF,6BACAA,6BACA,CAiBA,GAhBAgE,+BACAvC,YACA5B,cACA/J,wBACAlT,wDAEAylB,mBACA,4BACA,2BAEA,gCACA,2BACAvS,qDAHAkN,uBAKA,2BACA,oDACAlN,8BACAyS,6DACA5kB,kCACA,+BACA,yBACA4kB,gBACA/C,eAEA,CACAjE,gBACA,CAKA,2BACA,uCACA1Y,mCAEAiN,0BACA,2BAEA,2BACAA,qCAFA0S,oDAIA1S,cACA+J,eACA,CACA,2CACA,aACA,8BACA4I,sEACA,0DACAA,6CACA,+BACA,yBACA,aACA,WACAA,yCACA,MACA,eACAA,gBACAjd,+BACAU,wDACA,MACA,YACAuc,gBACAjd,gCACAU,wDACA,MACA,QACA,CACA,IAGA4J,0FACAA,wFACA,4BACAA,sEACA,CACA,kDACA,4CACA,iDACA,wDACAA,+BACA4S,6BACA5S,+CACAA,iDACAA,cACA6S,aACA/I,mBACAC,2BACA0B,eACAvB,yBACA,CACA,6BACA,WACA4I,QACA1c,yBACA,uBACA,uBACA2c,qBACA/S,+BAEA+S,MACA,uBACAA,WACAA,QACA,CACAruB,sCACAsuB,iCACA,EACAD,IACA,GACAE,6BACA,CACA,sBACAjT,sBACAA,mDAEA,4CACA,gCACA,mCACAA,wBACAA,0CACA,KACAA,kBACAkT,eACAN,sDACA5S,kBACA,4BACAA,sBACAA,qBACAA,iDACAA,oBACAA,qBACAA,iDACAA,oBACAA,SACAA,iDACAA,+CACA,8BACAA,kDACA,+BACAA,+DACA,+BACAA,+DACAA,oBACA,wBACA,kCACA,oCACA,oCACAA,oBACA,wBACA,kCACA,oCACA,oCACAjN,4CACA4O,2CACAthB,mBACA2f,yBACAA,wBACA4L,yDACA5L,+BACA,CACA,EACA,CACA,6BACAA,6BACA5f,sCACAA,QAEA4f,gBAKAA,iCACAA,uBACAA,4CACAA,uBACAA,uBAEAA,oGACAA,0BACAA,iDACAA,2CACAA,2CACAA,2CACAA,0BACAA,yCACA,4CACAA,0EAEA,yBACAA,gDACAA,oEAvBAA,uEAwBA,CACA,uBACA,qCACAA,uBACA,OACA,iBACA,OACAA,iFACAA,6DACAA,4BACAA,gCACAA,8CACAA,8CACAA,oDACAA,qBACA,4BACA,gBACA,mBACA,QACA,QACA,8BACAA,kHAEAA,sBACAA,mEACAA,sBACAA,mEACAA,yBACA,yBACAA,6BACA,IACAA,uBACAA,2EACA,CACA,WACAsL,2CACAtL,qDACAkK,yBACAA,uBACA,EACA,CACA,yBACA,iBACAlK,iBACAA,aACA,CACA,kCAEA,yBAEA,6BACA,kCACA,yCACAhe,wDAEA,qBACAge,gDAEAA,gDAEA,CACA,2BACA,oCAEA,MADAjW,yBACAA,CACA,CACA,8BACA,4CACA,gDACA,WAEA,QACA,CACA,qCACA,0DAEA,6CACA,2CACA,CACA,wCACAiW,wDAEAA,kDACA,qDACA2N,gCACA3N,kCACAmT,qEACA,IACApF,4CACA,GACA/N,yBACA,+BACAA,qDACAA,kDACAA,oDACAA,yBACA,+BACAA,qDACAA,mDACAA,oDACA,CACA,4BACA,0BACA5J,yDACA6c,yBACA,kCACAjT,wBACAlO,kBACA,GACAshB,gCAEApT,yBADAA,uBACA,CACA,CAIA,0CACA,4CACA,8BACAA,+BACA,kDACAA,uBACA,oCAEA,GADAA,gEACA,EAEAA,oDACA,yBACAA,uDAEA,oBACAkK,8BACA,CACA,4BACAngB,sBACAspB,kDACAC,iDACAD,yBACAzD,8BAEA,uCACA7lB,kBAEAA,uCACAiW,oCAEAjW,0CACAiW,mCAEA,CACA,wBACAjW,mBACA,gDACA,2CACAiW,sBACAA,mEAEAuT,mLACAC,+BACAC,6BACA,4DACA,gFACAA,cACAA,SACAC,IACAD,SACAE,kBACAA,kCACAC,cACAlI,+CAEA+H,eACAA,SACA/P,0DACAkQ,cACAlI,8CAEA1L,WACA6T,aACA,SACA,uBACA,qCACA7T,sBACAA,gEAEA0D,yBACA,CACA,CAl1DA,UACA0E,4CACA0L,YACA,EACA9T,qEACAA,kBACAA,gBACAA,wCACAA,wCACAA,6BACAA,2BACAA,iBACAA,iBACAA,kCACAA,qBACAA,yBACAA,2BACAA,eACAA,mBACAA,aACAA,qBACAA,mBA49CA,eACA+T,oCACAC,uDACA,EAgWA,MADA3oB,QACA2U,IACA,CAEA,qCAMA,OAJAiU,6BACAC,eACAjB,qDACAkB,aACA/nB,IACA7H,KADA6H,oBACA7H,cACA,IACA,4CACA,SACA,2BACAA,0BACAA,wBAEAA,mDACA4vB,+BACA,CACA,SACArrB,gBACA,CACA,CACA,kDACA,IAv3EAsrB,qBAQA,MAPAA,8CACA,yCAEA,YADAC,gBACAA,yDAEA,QACA,EACAD,8BACA,EAEAjD,OACA,WACA,UACA,cACA,YACA,YACA,gBACA,SACA,gBACA,UACA,gBACA,eACA,wBACA,CACAmD,UACAC,YACAC,WACAlF,cACAmF,mBACAC,YACAC,mCACAC,iCACA,gDACAC,wBACAC,cACAC,iBACAC,iBACAC,mBACAC,eACAC,gBACAC,iBACA7T,WACA8T,iBACA/T,UACAgU,iBACAC,cACAC,2BACA,oDACA,EACAC,4BACA,uCACA3K,uBAEAA,mDAEA,2CAEA,SACA,oDACA,EACA,sBACA,EACA,EACA4K,gBACAC,wBACAC,UACA7B,iBACA8B,kBACAC,cACAC,mPACAC,cACAC,aACAC,YACAC,WACAC,eACAC,aACAC,aACAC,iBACAC,UACAC,iBACAC,WACAC,iBACAC,gBACAC,yBACAC,WACAvjB,gBACAge,uBACAwF,iPACAC,yBACAhD,aACAiD,UACAC,aACAxI,eACAyI,OACA,EAEAC,SACA5I,UACA6I,sDACAC,UACA,SACA,SACA,UACA,YACA,WACA,SACA,WAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WAEA,EACAjK,kDACAkB,iBACAiJ,sBACA,cACA,aACA,WACA,aACA,OACA,WACA,OACA,WACA,OACA,WACA,QACA,YAEA,EACAC,sBACAC,sBACAC,kCACAC,8BACAC,iBACAC,oBACA,EAEAC,mDACApE,wCAiBAqE,uBACA,qCACA,EAoDAC,wBACA9E,uHACA+E,WACAC,aACAC,qCACAxH,2DACA,EACAyH,yBACAzH,kCACA,EACA0H,yBACA1H,kCACA,EACA2H,wBACA3H,gCACA,EACA4H,gCACA5H,uCACA,kDACA,EACA6H,sCACA7H,6DACA,EACA8H,4BACA9H,uCACA,EACA+H,wEACAC,4BACA,iCACA,mEACA,EACAC,yBACAjI,qCACA,EACAkI,gDACAnL,wBACAiD,gCACA,EACA/B,yBACA+B,kCACA,EACAxkB,4BACAwkB,uCACA,EACAmI,wBACAnI,gCACA,EACA3wB,aACAmsB,0BACAwE,qCACA,EACAoI,0BACApI,qCACA,EACAyD,4BACAzD,uCACA,EACAqI,8BACA,4CACA,EACAC,aACA/nB,yBACAyf,yCACA,CACA,EACAU,YACA6G,WACAC,WACAC,iBACAC,iBACAC,qBACAC,KACAC,WACAC,iBACAC,SACAC,iBACAC,aACAC,SACAnL,iBACAkB,iBACAziB,iBACA2sB,iBACA94B,WACAmsB,iBACA4M,iBACA3E,iBACA4E,SACAC,iBACA/nB,YACA,EACA8f,SAEA6H,4CAEAX,gCACA,gEACA,EAEAC,gCACA,6DACA,EAEAC,gCACA,0CACA,EAEAC,8CAEAC,wBACA,+BAEAzN,eADAA,6CAEA,EAEA0N,qEAEAC,wBACA,4CACA,EAEAC,gDAEAC,4CACAC,2BACA,4BACA,EAEAC,4CAEAlL,6CAEAkB,kEAEAziB,gDAEA2sB,wCAEA94B,wBACA,8CACA,EAEAmsB,gDAEA4M,2CAEA3E,2CAEA4E,wCAEAC,uCAEA/nB,4DACA,EAEAgoB,iCACA,uFACA,6CACA,sCACA,4BAGAC,KACA1jB,UACAU,sBACA,mCACA6a,kCACA,SAEA,GADAzE,CAEA,GACA4G,SAXAhL,sCAYA,CACA,EACAiR,8BACA,uFACA,wDACA,sBAEAtF,2BAEAuF,eADAC,WAEA,wBACAA,wCACA,2BACA,sBAGAA,8BACA,8BAEAC,mDACAC,yBACA,qBACAF,oBACAG,gBAEA,wBACA,qBAEAH,8BACA,6BACAA,6CACA,CACAA,WACAnR,0BAEA,uCADA,8CACA,CAEA,OADAuR,uBACAvtB,qDACAwtB,mBACAC,2BACAC,wCACA,kCACAC,8BACA,0CACAC,qBACAhkB,qCACApJ,sBACAyY,uBACA,EAEA,KACAwU,eACAE,eACA/jB,yBACA,wBACA,uDACA,EACA,CACAujB,oCACA,CACA,OAEA,+DACAnR,sEAGA,eACAmR,6BACAA,YACA,CACA,EAYA7I,+BACA,mDACA,EACAuJ,UACAC,SACA,EAEA,mCACAnnB,+BAEA,OADAonB,SACAC,8BACAD,yBAEA,WACA,8DAOA,OALA9J,0BACA/X,QACAvF,0EAEA,EACAsnB,iBACA/hB,OADA+hB,sBACA/hB,kBACA+X,gBAEA,aACA,GAGA,4BAk3DA,kCAEAiK,iFACA,8BACA,EACAC,iDACA,gCACA,GAGA,8CACA,0BACAC,8DAEA3wB,yBACA2wB,8BAGAA,2BAEA,EA6BA,MA3BAtJ,kCACAA,iBACAuJ,wBACA,4BACA,EACAvJ,kCACAA,uEACA,EACAA,uCACAA,mEACA,EACAA,yCACAA,6CACAA,oCAEA,6BACAwJ,qCACA,8BACA,GAEAC,sCACA,iHACA,EACA,6BACAp7B,4BAGA2xB,SAEA,GCl8EA,yBACA,sEACA,8FACAnxB,6CACA,yCAiBAq0B,qBAQA,MAPAA,8CACA,yCAEA,YADAC,gBACAA,yDAEA,QACA,EACAD,8BACA,EAEAwG,yDACAr7B,iBACA,CACAs7B,QACA,EACAC,QACAtM,UACA6I,2NACAC,UACA,iCACA,6CACA,mDACA,mDACA,uCACA,uCACA,iCAEA,EACAC,QACAF,+DACAC,UACA,iCACA,uCACA,2BACA,iCACA,2BACA,iCACA,iCACA,iCACA,uCACA,uCACA,uCACA,uCAEA,CACA,EACAsD,mBACAA,YAEAG,4DACAx7B,iBACA,CACAs7B,QACA,EACAG,SACAxM,UACA6I,+CACAC,UACA,UACA,SACA,WACA,WACA,aACA,UACA,UAEA,EACAC,QACAF,WACA,SACA,MACA,SACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,YACA,UACA,UACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAmJ,sBACAD,uBACAE,qCACAC,oCACA,EACAmD,sBACAA,cAEAE,4DACA17B,iBACA,CACAs7B,QACA,EACAK,YACA1M,UACA6I,8EACAC,UACA,QACA,oBACA,mDACA,kCACA,gCACA,eACA,uBAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,WACA,WACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,SACA,OACA,QACA,MACA,YACA,YACA,SACA,WACA,UACA,SACA,SAEA,EACA/I,iBACAiJ,mBACA,SACA,EACAC,qBACAC,sBACAC,sEACAC,iCACAC,qBACA,EACAoD,yBACAA,cAEAE,4DACA57B,iBACA,CACAs7B,QACA,EACAO,YACA5M,UACA6I,qHACAC,UACA,6CACA,+DACA,6CACA,uCACA,uCACA,6CACA,uCAEA,EACAC,QACAF,WACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,CACAC,UACA,mDACA,2BACA,6CACA,mDACA,6CACA,6CACA,uCACA,6CACA,mDACA,+DACA,mDACA,6CAEA,EACA/I,iBACAiJ,mBACA,QACA,EACAC,0BACAC,uCACAC,iKACAC,iKACAC,qCACAC,kCACA,EACAqD,yBACAA,cAEAE,4DACA97B,iBACA,CACAs7B,QACA,EACAS,WACA9M,UACA6I,qHACAC,UACA,uCACA,+DACA,6CACA,iCACA,yDACA,iCACA,uCAEA,EACAC,QACAF,WACA,qBACA,qBACA,2BACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,CACAC,UACA,uCACA,mDACA,2BACA,iCACA,qBACA,qBACA,qBACA,uCACA,yDACA,mDACA,6CACA,mDAEA,CACA,EACA+D,wBACAA,cAEAE,4DACAh8B,iBACA,CACAs7B,QACA,EACAW,QACAhN,UACA6I,qNACAC,UACA,uCACA,uCACA,mDACA,uCACA,qEACA,mDACA,uCAEA,EACAC,QACAF,WACA,2BACA,uCACA,iCACA,uCACA,eACA,qBACA,iCACA,eACA,uCACA,iCACA,qBACA,2BACA,CACAC,UACA,yDACA,qEACA,iCACA,uCACA,eACA,qBACA,iCACA,iCACA,+DACA,6CACA,6CACA,mDAEA,CACA,EACAiE,qBACAA,cAEAE,4DACAl8B,iBACA,CACAs7B,QACA,EACAa,SACAlN,UACA6I,+CACAC,UACA,WACA,UACA,UACA,WACA,SACA,YACA,WAEA,EACAC,QACAF,WACA,MACA,OACA,UACA,MACA,OACA,OACA,MACA,KACA,MACA,MACA,MACA,MACA,CACAC,UACA,QACA,SACA,UACA,QACA,OACA,OACA,SACA,QACA,WACA,UACA,WACA,WAEA,EACAE,sBACA,cACA,aACA,aACA,aACA,OACA,UACA,OACA,UACA,OACA,UACA,OACA,UACA,QACA,cAEA,EACAjJ,gBACA,EACAkN,uBACAA,cAEAE,4DACAp8B,iBACA,CACAs7B,QACA,EACAe,OACApN,UACA6I,0DACAC,UACA,cACA,kBACA,cACA,cACA,eACA,WACA,SAEA,EACAC,QACAF,WACA,MACA,QACA,WACA,MACA,WACA,WACA,WACA,MACA,cACA,cACA,MACA,MACA,CACAC,UACA,QACA,UACA,cACA,QACA,cACA,cACA,gBACA,QACA,kBACA,gBACA,WACA,WAEA,EACA/I,iBACAiJ,mBACA,SACA,EACAC,sBACAC,2BACAC,qCACAC,gDACAC,qBACAC,mBACA,EACA6D,oBACAA,cAEAE,4DACAt8B,iBACA,CACAs7B,QACA,EACAiB,OACAtN,UACA6I,uDACAC,UACA,WACA,YACA,cACA,eACA,WACA,cACA,cAEA,EACAC,QACAF,WACA,MACA,QACA,MACA,MACA,MACA,MACA,QACA,OACA,OACA,MACA,OACA,OACA,CACAC,UACA,SACA,WACA,SACA,SACA,MACA,UACA,aACA,OACA,OACA,SACA,WACA,UAEA,EACA/I,iBACAiJ,4BACA,SACA,KACA,QACA,MACA,iBACA,MACA,iBACA,KACA,iBACA,SACA,SACA,SACA,QACA,MACA,SACA,SACA,SACA,SACA,SACA,QACA,KACA,iBACA,MAEA,EACA,CACA,EACAqE,oBACAA,cAEAE,4DACAx8B,iBACA,CACAs7B,QACA,EACAmB,QACAxN,UACA6I,6DACAC,UACA,YACA,SACA,UACA,SACA,UACA,SACA,YAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,UACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WAEA,EACAE,mBACA,SACA,EACAjJ,iBACAkJ,uBACAC,sBACA,EACAqE,qBACAA,cAEAE,4DACA18B,iBACA,CACAs7B,QACA,EACAqB,QACA1N,UACA6I,+CACAC,UACA,UACA,SACA,WACA,WACA,aACA,UACA,UAEA,EACAC,QACAF,WACA,MACA,MACA,SACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,UACA,UACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAmJ,sBACAD,uBACAE,qCACAC,oCACA,EACAqE,qBACAA,cAEA7E,UACA5I,UACA6I,sDACAC,UACA,SACA,SACA,UACA,YACA,WACA,SACA,WAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WAEA,EACAjK,kDACAkB,iBACAiJ,sBACA,cACA,aACA,WACA,aACA,OACA,WACA,OACA,WACA,OACA,WACA,QACA,YAEA,EACAC,sBACAC,sBACAC,kCACAC,8BACAC,iBACAC,oBACA,EAEAqE,2DACA58B,iBACA,CACAs7B,QACA,EACAuB,WACA7N,iBACAkJ,4BACAC,uBACAC,gDACAC,mCACApJ,UACA6I,gEACAC,UACA,eACA,QACA,QACA,WACA,kBACA,WACA,SAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,WACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,QACA,SACA,OACA,QACA,QACA,eACA,YACA,UACA,WACA,WAEA,EACAE,mBACA,UACA,CACA,EACA2E,wBACAA,cAEAE,4DACA98B,iBACA,CACAs7B,QACA,EACAyB,SACA9N,UACA6I,4DACAC,UACA,UACA,QACA,SACA,eACA,SACA,UACA,YAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,QACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,aACA,UACA,YACA,YAEA,EACAE,mBACA,YACA,EACAjJ,iBACAkJ,oBACA,EACA4E,sBACAA,cAEAE,4DACAh9B,iBACA,CACAs7B,QACA,EACA2B,UACAhO,UACA6I,wCACAC,UACA,iBACA,eACA,eACA,eACA,eACA,QACA,aAEA,EACAC,QACAF,WACA,OACA,QACA,WACA,MACA,MACA,QACA,QACA,MACA,OACA,MACA,MACA,OACA,CACAC,UACA,UACA,WACA,WACA,SACA,MACA,QACA,QACA,SACA,YACA,WACA,WACA,YAEA,EACA/I,iBACAiJ,mBACA,SACA,EACAE,0BACAD,wBACAE,kCACAC,oCACA,EACA2E,uBACAA,cAEAE,4DACAl9B,iBACA,CACAs7B,QACA,EACA6B,SACAlO,UACA6I,+JACAC,UACA,6CACA,uCACA,6CACA,mDACA,mDACA,2BACA,2BAEA,EACAC,QACAF,WACA,uCACA,iCACA,2BACA,iCACA,eACA,2BACA,iCACA,qBACA,6CACA,iCACA,uCACA,uCACA,CACAC,UACA,uCACA,iCACA,2BACA,iCACA,eACA,2BACA,iCACA,qBACA,6CACA,iCACA,uCACA,uCAEA,EACA/I,iBACAiJ,mBACA,QACA,CACA,EACAiF,sBACAA,cAEAE,4DACAp9B,iBACA,CACAs7B,QACA,EACA+B,SACArO,iBACAC,UACA6I,+CACAC,UACA,YACA,YACA,UACA,cACA,UACA,YACA,WAEA,EACAC,QACAF,WACA,QACA,QACA,SACA,QACA,QACA,UACA,WACA,MACA,OACA,OACA,SACA,QACA,CACAC,UACA,WACA,WACA,YACA,WACA,WACA,aACA,cACA,SACA,UACA,UACA,YACA,WAEA,EACAE,mBACA,SACA,CACA,EACAmF,sBACAA,cAEAE,4DACAt9B,iBACA,CACAs7B,QACA,EACAiC,SACAtO,UACA6I,kEACAC,UACA,aACA,eACA,cACA,YACA,cACA,kBACA,cAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,UACA,OACA,WACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WAEA,EACAE,mBACA,SACA,EACAjJ,iBACAkJ,uBACAC,wBACAC,mCACAC,sCACAE,qBACA,EACA+E,sBACAA,cAEAE,4DACAx9B,iBACA,CACAs7B,QACA,EACAmC,QACAzO,iBACAC,UACA6I,sDACAC,UACA,WACA,QACA,QACA,WACA,QACA,WACA,SAEA,EACAC,QACAF,WACA,OACA,UACA,OACA,MACA,MACA,OACA,OACA,UACA,OACA,MACA,MACA,SACA,CACAC,UACA,UACA,aACA,OACA,QACA,MACA,OACA,UACA,UACA,YACA,UACA,WACA,cAEA,EACAE,4BACA,OACA,GACA,IACA,EACAC,sBACAC,uBACAC,kDACAC,mCACA,EACAmF,qBACAA,cAEAE,4DACA19B,iBACA,CACAs7B,QACA,EACAqC,OACA1O,UACA6I,qHACAC,UACA,6CACA,6CACA,iCACA,6CACA,uCACA,yDACA,6CAEA,EACAC,QACAF,WACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,CACAC,UACA,+DACA,qEACA,6CACA,mDACA,iCACA,6CACA,6CACA,yDACA,qEACA,yDACA,yDACA,+DAEA,EACA/I,iBACAiJ,mBACA,QACA,EACAE,sCACAD,sCACAE,iKACAC,8HACAC,oCACA,EACAoF,oBACAA,cAEAE,4DACA59B,iBACA,CACAs7B,QACA,EACAuC,QACA5O,UACA6I,2EACAC,mNACA,EACAC,QACAF,WACA,2BACA,2BACA,qBACA,2BACA,qBACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,CACAC,UACA,iCACA,uCACA,qBACA,iCACA,qBACA,2BACA,2BACA,uCACA,uCACA,6CACA,uCACA,iCAEA,EACAG,+BACA,EACA0F,qBACAA,cAEAE,4DACA99B,iBACA,CACAs7B,QACA,EACAyC,OACA9O,UACA6I,uLACAC,UACA,uCACA,uCACA,6CACA,uCACA,6CACA,mDACA,uCAEA,EACAC,QACAF,WACA,eACA,eACA,iCACA,uCACA,eACA,qBACA,iCACA,eACA,qBACA,2BACA,eACA,eACA,CACAC,UACA,kCACA,iCACA,iCACA,uCACA,eACA,qBACA,iCACA,kCACA,6CACA,6CACA,uCACA,6CAEA,CACA,EACA+F,oBACAA,cAEAE,4DACAh+B,iBACA,CACAs7B,QACA,EACA2C,UACAjP,iBACAC,UACA6I,2DACAC,UACA,WACA,cACA,SACA,UACA,gBACA,QACA,SAEA,EACAC,QACAF,WACA,MACA,OACA,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,gBACA,eACA,cACA,UACA,UACA,SACA,SACA,UACA,QACA,WACA,UACA,WAEA,CACA,EACAiG,uBACAA,cAEAE,4DACAl+B,iBACA,CACAs7B,QACA,EACA6C,WACAnP,iBACAC,UACA6I,4CACAC,UACA,cACA,gBACA,OACA,SACA,qBACA,YACA,UAEA,EACAC,QACAF,WACA,MACA,MACA,SACA,SACA,SACA,SACA,SACA,MACA,OACA,MACA,MACA,MACA,CACAC,UACA,YACA,aACA,aACA,aACA,WACA,YACA,YACA,YACA,aACA,aACA,WACA,WAEA,EACAE,mBACA,SACA,EACAE,0BACAC,2BACAC,2CACAH,oBACA,EACAgG,wBACAA,cAEAE,4DACAp+B,iBACA,CACAs7B,QACA,EACA+C,YACApP,UACA6I,sDACAC,mEACA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,QACA,QACA,MACA,OACA,OACA,UACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAiJ,mBACA,QACA,CACA,EACAmG,yBACAA,cAEAE,4DACAt+B,iBACA,CACAs7B,QACA,EACAiD,WACAtP,UACA6I,kEACAC,UACA,aACA,eACA,oBACA,kBACA,cACA,gBACA,cAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,SACA,SACA,SACA,YACA,MACA,MACA,SACA,MACA,CACAC,UACA,YACA,aACA,OACA,WACA,SACA,aACA,aACA,cACA,YACA,aACA,cACA,WAEA,EACAE,mBACA,SACA,EACAjJ,iBACAkJ,uBACAC,wBACAI,qBACA,EACA+F,wBACAA,cAEAE,4DACAx+B,iBACA,CACAs7B,QACA,EACAmD,SACAxP,UACA6I,sDACAC,UACA,WACA,YACA,aACA,eACA,aACA,aACA,SAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,QACA,SACA,SACA,SACA,SACA,SACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAiJ,iCACAC,sBACAC,sBACAC,oCACAC,iCACA,EACAmG,sBACAA,cAEAE,4DACA1+B,iBACA,CACAs7B,QACA,EACAqD,UACA1P,UACA6I,2EACAC,UACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,EACAC,QACAF,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,CACAC,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WAEA,CACA,EACA2G,uBACAA,cAEAE,4DACA5+B,iBACA,CACAs7B,QACA,EACAuD,QACA5P,UACA6I,2EACAC,UACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,EACAC,QACAF,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,CACAC,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WAEA,EACAE,mBACA,cACA,CACA,EACA2G,qBACAA,cAEAE,4DACA9+B,iBACA,CACAs7B,QACA,EACAyD,OACA9P,UACA6I,8OACAC,UACA,6CACA,2BACA,uCACA,qBACA,+DACA,iCACA,2BAEA,EACAC,QACAF,WACA,2BACA,uCACA,2BACA,2BACA,2BACA,uCACA,uCACA,2BACA,iCACA,2BACA,mDACA,2BACA,CACAC,UACA,2BACA,uCACA,2BACA,2BACA,2BACA,uCACA,uCACA,2BACA,iCACA,2BACA,mDACA,2BAEA,EACAE,mBACA,QACA,EACAjJ,iBACAkJ,sCACAC,8DACAC,qHACAC,uIACAE,8CACA,EACAuG,oBACAA,cAEAE,4DACAh/B,iBACA,CACAs7B,QACA,EACA2D,QACAhQ,UACA6I,gHACAC,UACA,8CACA,8CACA,8CACA,8CACA,8CACA,2BACA,4BAEA,EACAC,QACAF,WACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,gBACA,qBACA,qBACA,qBACA,qBACA,qBACA,CACAC,UACA,uCACA,iCACA,uCACA,4BACA,iCACA,uCACA,4BACA,iCACA,mDACA,iCACA,uCACA,yDAEA,EACA/I,iBACAiJ,mBACA,QACA,EACAC,0BACAC,4CACAC,2JACAC,mIACAC,qCACAC,kCACA,EACAyG,qBACAA,cAEAE,4DACAl/B,iBACA,CACAs7B,QACA,EACA6D,YACAlQ,UACA6I,+CACAC,UACA,cACA,cACA,cACA,oBACA,iBACA,eACA,wBAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,UACA,QACA,WACA,mBACA,gBACA,QACA,kBACA,iBACA,SACA,YACA,UAEA,EACA/I,iBACAiJ,mBACA,UACA,EACAE,uBACAC,mDACAC,0CACA,EACA6G,yBACAA,cAEAE,4DACAp/B,iBACA,CACAs7B,QACA,EACA+D,SACArQ,iBACAC,UACA6I,+CACAC,UACA,iBACA,YACA,WACA,iBACA,cACA,aACA,YAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,WACA,WACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,gBACA,iBACA,QACA,eACA,QACA,cACA,cACA,UACA,aACA,WACA,YACA,YAEA,EACAG,4BACA,EACAkH,sBACAA,cAEAE,4DACAt/B,iBACA,CACAs7B,QACA,EACAiE,YACAtQ,UACA6I,qHACAC,UACA,uCACA,+DACA,6CACA,iCACA,mDACA,iCACA,uCAEA,EACAC,QACAF,WACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,CACAC,UACA,6CACA,mDACA,2BACA,iCACA,qBACA,2BACA,2BACA,uCACA,yDACA,mDACA,6CACA,mDAEA,EACA/I,iBACAmJ,uCACAD,+BACA,EACAoH,yBACAA,cAEAE,4DACAx/B,iBACA,CACAs7B,QACA,EACAmE,WACAzQ,iBACAC,UACA6I,qHACAC,uPACA,EACAC,QACAF,WACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,+BACA,+BACA,+BACA,CACAC,UACA,4EACA,kFACA,wFACA,wFACA,4EACA,8FACA,4EACA,kFACA,sEACA,kFACA,0GACA,gHAEA,EACAG,yBACA,EACAsH,wBACAA,cAEAE,4DACA1/B,iBACA,CACAs7B,QACA,EACAqE,WACA1Q,UACA6I,sDACAC,UACA,SACA,QACA,SACA,OACA,SACA,SACA,QAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,MACA,QACA,MACA,MACA,QACA,OACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAiJ,mBACA,QACA,CACA,EACAyH,cAEAE,4DACA5/B,iBACA,CACAs7B,QACA,EACAuE,SACA5Q,UACA6I,6IACAC,UACA,yDACA,6CACA,uCACA,mDACA,mDACA,uCACA,qBAEA,EACAC,QACAF,WACA,qBACA,eACA,qBACA,qBACA,eACA,2BACA,iCACA,eACA,qBACA,iCACA,qBACA,eACA,CACAC,UACA,mDACA,+DACA,qBACA,2BACA,eACA,2BACA,6CACA,uCACA,mDACA,+DACA,mDACA,6CAEA,EACA/I,iBACAiJ,mBACA,QACA,CACA,EACA2H,sBACAA,cAEAE,4DACA9/B,iBACA,CACAs7B,QACA,EACAyE,OACA9Q,UACA6I,+CACAC,UACA,SACA,UACA,UACA,WACA,YACA,UACA,WAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,QACA,QACA,MACA,OACA,OACA,WACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAmJ,sBACAD,uBACAE,4CACAC,kCACAJ,4BACA,2BACA,MACA,IACA,CACA,EACA6H,oBACAA,cAEAE,4DACAhgC,iBACA,CACAs7B,QACA,EACA2E,WACAhR,UACA6I,4DACAC,UACA,YACA,SACA,UACA,SACA,UACA,SACA,YAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,UACA,OACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAkJ,uBACAC,uBACAC,oCACAC,oCACAJ,mBACA,SACA,CACA,EACA+H,wBACAA,cAEAE,4DACAlgC,iBACA,CACAs7B,QACA,EACA6E,SACAlR,UACA6I,+MACAC,UACA,iCACA,uCACA,6CACA,6CACA,uCACA,yDACA,+DAEA,EACAC,QACAF,WACA,eACA,qBACA,qBACA,iCACA,eACA,qBACA,2BACA,eACA,qBACA,eACA,qBACA,qBACA,CACAC,UACA,iCACA,uCACA,2BACA,uCACA,eACA,qBACA,iCACA,2BACA,iCACA,uCACA,iCACA,iCAEA,CACA,EACAmI,sBACAA,cAEAE,4DACApgC,iBACA,CACAs7B,QACA,EACA+E,QACApR,UACA6I,oDACAC,UACA,YACA,oBACA,SACA,aACA,WACA,cACA,SAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,WACA,MACA,MACA,CACAC,UACA,eACA,OACA,SACA,gBACA,MACA,WACA,SACA,gBACA,gBACA,mBACA,WACA,gBAEA,EACAG,sBACAC,yBACAC,kDACAC,oDACArJ,iBACAiJ,mBACA,SACA,CACA,EACAmI,qBACAA,cAEAE,4DACAtgC,iBACA,CACAs7B,QACA,EACAiF,YACAtR,UACA6I,yDACAC,UACA,UACA,gBACA,iBACA,eACA,eACA,cACA,YAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,YACA,WACA,QACA,OACA,QACA,QACA,SACA,WACA,UACA,WACA,WAEA,EACAG,yBACA,EACAoI,yBACAA,cAEAE,4DACAxgC,iBACA,CACAs7B,QACA,EACAmF,UACAxR,UACA6I,sDACAC,UACA,gBACA,OACA,aACA,WACA,MACA,SACA,uBAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,WACA,YACA,SACA,UACA,MACA,QACA,QACA,SACA,aACA,YACA,YACA,YAEA,EACA/I,iBACAiJ,mBACA,QACA,CACA,EACAuI,uBACAA,cAEAE,4DACA1gC,iBACA,CACAs7B,QACA,EACAqF,SACA1R,UACA6I,qHACAC,UACA,qEACA,qEACA,6CACA,iCACA,6CACA,6CACA,6CAEA,EACAC,QACAF,WACA,qBACA,qBACA,2BACA,qBACA,qBACA,2BACA,2BACA,qBACA,qBACA,qBACA,qBACA,qBACA,CACAC,UACA,uCACA,6CACA,2BACA,uCACA,qBACA,2BACA,2BACA,uCACA,mDACA,6CACA,uCACA,6CAEA,EACA/I,iBACAiJ,mBACA,QACA,EACAC,0BACAC,uCACAC,2JACAC,qJACAC,qCACAC,kCACA,EACAmI,sBACAA,cAEAE,4DACA5gC,iBACA,CACAs7B,QACA,EACAuF,SACA5R,UACA6I,yGACAC,UACA,iCACA,iCACA,yDACA,iCACA,uFACA,mDACA,yDAEA,EACAC,QACAF,WACA,eACA,qBACA,2BACA,uCACA,2BACA,2BACA,2BACA,qBACA,2BACA,qBACA,2BACA,2BACA,CACAC,UACA,uCACA,mDACA,uCACA,mDACA,2BACA,2BACA,2BACA,6CACA,qEACA,mDACA,yDACA,yDAEA,CACA,EACA6I,sBACAA,cAEAE,4DACA9gC,iBACA,CACAs7B,QACA,EACAyF,QACA9R,UACA6I,0DACAC,UACA,cACA,WACA,SACA,SACA,eACA,SACA,SAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,SACA,SACA,SACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,YACA,aACA,QACA,WACA,SACA,SACA,SACA,SACA,YACA,aACA,WACA,WAEA,EACA/I,iBACAkJ,sBACAD,mBACA,SACA,CACA,EACA6I,qBACAA,cAEAE,4DACAhhC,iBACA,CACAs7B,QACA,EACA2F,WACAhS,UACA6I,2DACAC,UACA,UACA,aACA,QACA,QACA,eACA,QACA,SAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,UACA,QACA,QACA,MACA,QACA,QACA,SACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAkJ,sBACAD,mBACA,SACA,CACA,EACA+I,wBACAA,cAEAE,4DACAlhC,iBACA,CACAs7B,QACA,EACA6F,UACAlS,UACA6I,qDACAC,UACA,SACA,eACA,aACA,kBACA,UACA,WACA,cAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,SACA,MACA,CACAC,UACA,QACA,SACA,OACA,QACA,MACA,UACA,SACA,QACA,UACA,QACA,YACA,UAEA,CACA,EACAmJ,uBACAA,cAEAE,4DACAphC,iBACA,CACAs7B,QACA,EACA+F,SACApS,UACA6I,2DACAC,UACA,UACA,aACA,SACA,QACA,gBACA,QACA,SAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,SACA,UACA,OACA,QACA,MACA,MACA,MACA,SACA,YACA,UACA,WACA,WAEA,EACA/I,iBACAmJ,wBACAD,qBACA,EACAkJ,sBACAA,cAEAE,4DACAthC,iBACA,CACAs7B,QACA,EACAiG,SACAvS,iBACAmJ,qBACAlJ,UACA6I,+DACAC,UACA,YACA,YACA,SACA,SACA,UACA,SACA,YAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,CACAC,UACA,UACA,WACA,OACA,QACA,MACA,OACA,OACA,UACA,YACA,UACA,WACA,WAEA,EACAE,mBACA,SACA,CACA,EACAqJ,sBACAA,cAEAE,4DACAxhC,iBACA,CACAs7B,QACA,EACAmG,MACAxS,UACA6I,uFACAC,UACA,6CACA,uCACA,uCACA,qBACA,mDACA,iCACA,iCAEA,EACAC,QACAF,WACA,iBACA,iBACA,uBACA,uBACA,iBACA,uBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,CACAC,UACA,uCACA,+DACA,uCACA,uCACA,6CACA,mDACA,6CACA,6CACA,6CACA,uCACA,yDACA,6CAEA,EACA/I,iBACAkJ,sCACAE,mJACAC,+GACAJ,mBACA,QACA,CACA,EACAuJ,mBACAA,cAEAE,4DACA1hC,iBACA,CACAs7B,QACA,EACAqG,SACA1S,UACA6I,yDACAC,UACA,QACA,YACA,YACA,mBACA,gBACA,OACA,YAEA,EACAC,QACAF,WACA,MACA,WACA,MACA,MACA,MACA,MACA,MACA,WACA,MACA,MACA,MACA,MACA,CACAC,UACA,OACA,aACA,OACA,QACA,aACA,UACA,SACA,eACA,WACA,OACA,aACA,cAEA,EACA/I,iBACAiJ,mBACA,SACA,EACAC,qBACAC,sBACAC,uDACAC,yBACAC,yBACA,EACAoJ,sBACAA,cAEAE,4DACA5hC,iBACA,CACAs7B,QACA,EACAuG,WACA7S,iBACAC,UACA6I,qHACAC,UACA,uCACA,yDACA,mDACA,uCACA,uCACA,8CACA,uCAEA,EACAC,QACAF,WACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,CACAC,UACA,uCACA,iCACA,mDACA,6CACA,6CACA,6CACA,uCACA,6CACA,mDACA,6CACA,mDACA,6CAEA,CACA,EACA6J,wBACAA,cAEAE,4DACA9hC,iBACA,CACAs7B,QACA,EACAyG,YACA9S,UACA6I,+CACAC,UACA,qBACA,eACA,cACA,mBACA,oBACA,kBACA,oBAEA,EACAC,QACAF,WACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,CACAC,UACA,oBACA,eACA,cACA,mBACA,oBACA,kBACA,oBACA,kBACA,mBACA,0BACA,cACA,cAEA,EACA/I,gBACA,EACA8S,yBACAA,cAEAE,4DACAhiC,iBACA,CACAs7B,QACA,EACA2G,UACAhT,UACA6I,qHACAC,UACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,EACAC,QACAF,WACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,qBACA,qBACA,CACAC,UACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,qBACA,qBAEA,EACAG,0BACAC,0BACAC,uCACAC,qEACA,EACA2J,uBACAA,cAEAE,4DACAliC,iBACA,CACAs7B,QACA,EACA6G,qBACAlT,UACA6I,qHACAC,UACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,EACAC,QACAF,WACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,qBACA,qBACA,CACAC,UACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,qBACA,qBAEA,EACAG,0BACAC,0BACAC,uCACAC,qEACA,EACA6J,qCACAA,WAEA,UACAE,UACAC,WACAC,cACAC,cACAC,aACAC,UACAC,YACAC,SACAC,SACAC,UACAC,UACA,6BACA5H,WACA6H,aACAC,WACAC,YACAC,WACAC,WACAC,WACAC,UACAC,SACAC,UACAC,SACAC,YACAC,aACA7mB,cACA8mB,aACAC,WACAC,YACAC,UACAC,SACAC,UACAC,cACAC,WACAC,cACAC,aACAC,aACAC,WACAC,SACAC,aACAC,WACAC,UACAC,cACAC,YACAC,WACAC,WACAC,UACAC,aACAC,YACAC,WACAC,WACAC,QACAC,WACAC,aACAC,cACAC,YACAC,yBACA,EAEAC,qBAEAlyB,sDAEA,GCztGAlT,sDCuBAA,iBACA,SACA,SACA,SACA,OACA,UACA,UACA,gBACA,yBACA,2BACA,cACA,WACA,6BACA,qBACA,oBACA,eACA,WACA,UACAqlC,OACAl8B,EACAC,EACAC,GACAi8B,QACA35B,QACAjL,SACAwnB,gBACA/C,UACAogB,OACAC,SACAC,eACAC,eACAC,cACAC,QACAC,QACA,CACA,gBAQAC,gCACA,yBACA,iEACA,EAEAC,QAKAC,eAEAx6B,qBACA,cAEArC,oGACA,yGACA,uHACA,6EAEA88B,wDACA5qB,qBACA6qB,8BAEAA,6BACAA,4BAEA,EACA,GAEA,eACA,gFACA,4CACA,oBAEA/8B,0DAGA,iDACA,OACA,KAEAg9B,0CACAC,aACAA,iDACAC,mCAMA,+FACAlmB,qBAGAA,oBACAA,6CACAA,qBAEAA,iDACAA,0BAEA,GACA,oBACA,EAKAmmB,0CAEAnmB,WAEAtU,iDACA06B,0CACAC,oCAEAC,uCACAC,uCACAC,uCAHAC,oBAMAz9B,6DAGAA,+EAGAq9B,4DACAI,2CACAJ,uDACAA,yCACAA,iCACAI,8BAIAH,0BACAA,sCAIAC,wBACAv9B,gDACAA,4CACA09B,gBACA53B,YACA,GACA9F,2DACA8F,YACA63B,aACA,IAGAH,wBACAx9B,2FACAA,0EACA49B,eACAC,4BACAC,+BAGA99B,sFACA,kBAGA,MAFAe,oBAEAiW,8CACA,GAEAhX,yDACAe,mBACAf,sCACAA,yDACA,GAGA+e,sBACA,EAOAgf,2CACAC,aACAC,SACAC,cACAC,WAGA,wCA0GA,MArGAn+B,+CACAo+B,iBACA/gC,0BACA,2BACAA,+BACA4gC,2BAIAD,4BAEA,GACA,mBACAA,sBAIAh+B,mDACAzI,aACA8F,QACAghC,WAGAx5B,SACA7E,oHACA6E,uCACA,GACA,mBACAtN,0EAGAyI,0CACA,sBACA3C,6DAEAghC,2CACA,8CACAhhC,kCACAwgB,2BACA,6BACAtmB,mBAEAA,uCAGA,iCACAsmB,2BACAtmB,gCAIAA,8BAGA,GAEAyI,0CAGAs+B,UACAjhC,QACAkhC,eAHAn7B,EAIA,iBACA+6B,iEACA9gC,uDACA,gEACAkhC,wBACAJ,+BAIAA,8BAGAG,UAGA,WACA,aACAxyB,4CACAzO,uDACA,8BACAkhC,wBACAzyB,0BAIAA,yBAEAqyB,mBACA,CAGA,GAEA5mC,yBACA2mC,yBACA,GAEAF,+BAEAA,QACA,EAEAQ,wCACAxnB,WACAynB,QACAC,aAGA1+B,wDACA,kCAGA,MAFAA,0DAEA2+B,cACA,GAGAF,kBACAC,4BAEA1+B,yDAIA,MAHAy+B,sCACAtC,+GAGA,GAGAn8B,gCACA,wBAGAq8B,kCACAA,8CACA,sCAGA,kCACAuC,+EACA5nB,oCACA,GAEAhX,uCACAu8B,iCACAsC,kBACAC,iBACAC,iBACA,EACA,GAEA/+B,wDACAg/B,kBACAC,wEAwBA,MAtBAD,2CACAh/B,8CACAi/B,yBAEA,gBACAj/B,iBAEA,GACAg/B,4CACAA,iCAGAh/B,8CACAi/B,yBACA,gBACAj/B,iBAEA,GACAg/B,yCACAA,oCAIA,EACA,EAKAE,yBAmEA,kDACA,gDAEAC,iBACA3oC,iCAOA,MALA,+BACA2oC,0BACA3oC,oBAGA2lC,yCACA,CAKA,0DACA,+DACA,SACA,KAEAiD,6DACAC,2FAEA,0EACA,SAGA,SACAl/B,kFACA+Y,2DACA,wDACA,cACA,YAEA,MADApZ,oBACA,IACA,CACA,CAEA,gCACA,8DACA,CAEA,mEACAw/B,uDACAC,qFAEA,sCACA,8CACA,iDAGA,mEACA,sBAKAC,kBAHAF,oBAGAA,wCACA,sDACA,uCACA,MALAt/B,kFAQA;AACA;AACA;AACA;AACA,+EAEAw8B,cACAn8B,QACAo/B,QACAC,OACA,CACAC,SACAC,QACAC,gBACAC,mBACA,CACA,CACA,EAEA,EACA,CAKA,qCACA,gDAEA,IACA,oEACA,mBAEAvoC,gBACAyI,oBACAA,eACA+/B,wDACA,WACAC,oBACAhgC,kCACA,EAEA,CA6FA,uCACAigC,eACAj/B,qCACAud,gCACAC,sDAEA,yBAeA,+BACAxd,2BACAA,wCACAA,2FAjBA,kCACAA,YACA,6CAEAk/B,iDACAA,yBACA,+FACA,CAEAA,yCAEA,CASAlgC,sDACA,0CACA,8BACAmgC,uCACAC,kCACAD,iHACA,2EAEAC,8BAQApgC,4DACAmgC,sCARA,qCACAA,6EAWA,CACA,EACA,CAGA,mCACAngC,yEACA,CAKA,uCACAigC,eACA3hB,wBACA,aAGAte,2DACAkf,qBAEAA,4BACA+gB,wDAEAjgC,QACAG,2DACAkV,WACAtS,MACAs9B,gBACA,EACA9qB,2BACA,wCACAhe,SAEA,uCACAwS,wEAIA9L,yEAGAib,yDACAjb,sBAGAA,cACA+B,kBACA,CACA,GAEA,CAEA,iCACA,+DACA,OACA,KAEAigC,eACA/gB,sDACA,2BACAmhB,qBACAC,yCACAC,+EACAC,2DACAC,oDAEAC,yDACAA,4DAEAD,iCAIAzgC,QACAG,kEACAkV,WACAtS,MACA49B,mBACAC,iBACAC,+BACAxrB,sBACA,EACAC,gBACAC,2BACA,GACA2D,UACAA,eACA,0BACA8C,0DACA,MACA8kB,oCACA,6BACAC,0CACAA,YACA,CACA,GACA,CACAC,qBACAC,oCACA7zB,wBACA6c,2BACA,oBAOA,GANA+W,0BACAF,gCACAI,gBAGA,GACA,6CACA,8DACA,wCACAjjC,yGAEAsiC,qCACA,CAEAA,+BACAA,wDACAvkB,sGACA,KACAukB,iCAEA,CACA,EACA,CAMA,mCACA,+BACA,iGAEAvgC,2DACAua,gDAEAA,mCACAA,+BAEA,EACA,CAEA,8BACA4mB,qDAEAC,2CACAC,6DAEAC,0CACA,CAEA,+BACAC,sCACAvhC,qCACAA,gEAEAwhC,qCACAF,mCACA,CAMA,sCACAG,qCACA,CA9dAzhC,uCACA,+BACA0hC,iEACAC,yBACApqB,kBACA,+CAMA,MAJAqqB,uBACAA,sEACAD,0DAEAC,YACA,IAEA5hC,QACAqV,WACAlV,WACA4C,MACAkc,oBACAC,6BACA,EACA5J,gBACAC,+BACAosB,wDACAprC,2BACAsrC,6BACAA,qDACA,+CACAC,4BACAC,gBACAD,kBACA,GACAvqB,gCACA,CACA,EACA,GAEAvX,gDACAgiC,yDACAj/B,MACA,oBACA,2DACA,EACAk/B,eACAjiC,QACAqV,WACAlV,YACA4C,UACAuS,gBACAC,oBACA0sB,uCACA,CACA,EACA,oBACA,UACA,oBACA,2DACA,EAGA,MADA9F,qEAEA,GA+GAn8B,oEAGAA,yDACAe,mBAEAxJ,iFACA,GAEAyI,sDACAe,sBACAmhC,mCACAlC,0CACA,yBACAtV,OACAyX,6CACAC,sEAGApC,gDACAtV,4BACAA,0BAEA,KAEAA,IACA,+CACA1qB,QACAqV,WACAlV,iEACA4C,qDACAuS,gBACAC,2BACA2sB,gCACA,CACA,EACA,CACA,GAEAliC,oGACAe,sBACAi/B,2CACA/gB,2CAEA3B,qEACAtd,QACAqV,YACAlV,oEACA4C,gDACAuS,gBACAC,2BACA,uFACA8sB,8BACA,2BACA,+FACAhkB,uCAEAA,uBACA,EACA,CACA,EACA,GAEAre,0DACAsiC,cACAxV,cACA3sB,IAEA,8BAgBA,MAZAmiC,2CACAxV,iBAEA3sB,wCAEAg8B,qCACA,mBACA,oBACA,kBACA,6BACA,KAGA,GAiOAn8B,wCACAA,6BACA,GAGA,sCACAuiC,8CAEAC,oEAGAD,kCACAA,sEAEAA,oCACA,8BACAjkB,iEACAA,kCAEA,EACA,EAKAmkB,mDACA,cACAziC,uCACA,yBACA,cACAA,sDACA,oCACAA,eAEA,GACAA,OACA28B,4BACA,gEACA,sBACA7wB,OACA42B,QACA,sBACAA,sCACAA,uDACA1rB,iDAGA0rB,4BAGA,EACA,OACA,CAEA,EACA,EAQAC,oDACA3rB,WACAtU,WAEA,IACA,wFACA,SAKA,GADAA,4CACA,mCACA,SAIA1C,uCACAgX,2BACAA,yCAEA,GAEA4rB,0EAEA5iC,+CACAA,yCACA6I,yBACA+5B,kDAEAA,+BAEA,GAEA5iC,iEACA6I,yBACA+5B,kDAEAA,+BAEA,GAEAlgC,gDAGA,CACA,WACA,QACA,CACA,QACA,CACA,EAEA,aACA,GC79BA7L,sDACA,gBAKAgsC,aAUAC,cAcAC,yCAOAF,sBACA,EASAG,mCACA,SACA,4BAEA3lC,oBACA4C,8BACA,0CAGA,CACA,EAEA,mBACA,GCnDApJ,6BACA,SACA,MACA,qBACA,gBAMAosC,oBAMAC,mBAMAC,oBAOAC,uDACAnjC,oBACAijC,4CAEA,EAMAG,+BACA,sBACA,EAOAC,wCACA,wCACA,EAiBAC,wDAYA,MAXAtjC,2CACAgjC,6EAGAhjC,mDACAujC,gBACAvjC,0CACA,8BACA,SAGA,IACA,EAOAwjC,4CACA,2BACA,EAQAC,6DAGA,6BAGA,0CACAzjC,2CAGA,EAMA0jC,uBAEA,MADAV,oBACA,IACA,EAQAW,2EACA,sBACAC,2EAGA5jC,kCAGAA,uDACA,0BAGA,4BACA6jC,wBAGA,mFAKAC,kEAEA/sB,yCACA,EACA,EAUAgtB,8DACAhtB,WACA8V,eACAmX,wBACAC,0CAIA,MAHAltB,gCACAmtB,MAEAA,GACA,KASA,MAPA,0CACA,UACArX,cAEAA,gBAGAA,IACA,CACA,EAEA,yBACA,GC5LAj2B,6BACA,SACA,OACA,WACA,eACA,4BACA,qBACA,2DACA,aA+CA,mDAgBA,MAfAoJ,sBACAA,uCACAmkC,wCACA,GACAC,YACAC,YACAD,oCAEAA,oBACAD,wEAEAC,iBACAD,gEAGAC,SACA,IA3DAE,gBACAC,YACArkC,6CACA,EACAskC,cACAtkC,gDACA,EACAukC,oBACAvkC,gDACA,EACAwkC,QAGA,EACAC,QAGA,CACA,EAOAC,4DACA,kCAKA,MAJAtpC,oEACA0E,2BACA1E,oDAEAA,IACA,EACA,EAkCA,gDAOA,MALA6jB,6CAKA,CAOAolB,yCACA,yDACA,EAQAC,8DACA,yEACAJ,WACAS,cAkCA,MA/BAT,WADAU,2BACAA,kBAEAA,QAQAC,0CACAF,6CAEAC,qCACAA,4CACA,0BAEA5B,2EAGA4B,0BACA5B,4DAIAkB,gBACAA,uDAEAA,4CAGAA,SACA,6BACA,EAOAK,yDACA,iEACA,EASAC,gEACA1kC,8BACAglC,+CAEAhlC,eACAglC,kEAEAhlC,+BACAglC,mEAGAxI,2BACAxd,QACAimB,wCACAZ,mBACA,oBACA,EAQAM,gDACA,YACAM,uCACA,QAEAC,KAEA,kBACAA,WAFAA,OAIA,gBACA7uC,kBACAA,0CAEAA,eAGA2J,6BACAglC,+CAEAhlC,sCACAglC,kEAEAhlC,+BACAglC,mEAIAxI,mDACA,CACA,CACA,CACA,GC3NA5lC,gCACA,SACA,OACA,SACA,eACA,eACA,iBACA,wBACA,qBACA,qBACA,0BACA,MACA,cACA,oBACA,yBACA,UACAmJ,EACAE,GACAD,EACAglC,QACAxI,QACAzkB,QACAotB,OACAjC,mBACAkC,wBACAC,2BACArmB,IACA3d,SACAk7B,cACA+I,UACA,CACA,gBAEAC,WAEAC,kKACA,EAMAC,mCAEA,MADA1tB,uGACAhY,iDACA,EASA2lC,uCAUAP,oDACAptB,0FACA,GAUAotB,yDACAptB,6CACAkH,gCACA9L,qCACA,EACA,GAaAgyB,+DACAlmB,6CACAolB,kCACAttB,UACA,+BACAstB,wCAGA,uCAKA,MAJAsB,mCACAA,mCAGAnJ,SACAt8B,aACA2a,cACA/X,oDACAuS,eACA,2BACA,kCAaA,MAZAuwB,qBACA7lC,iDACA,CACAif,6BACA6mB,qBACAC,0CACAC,qBACA,EACA,EAIA,CACA/mB,6BACA6mB,qBACA5mB,4CACA7J,YACA,EAEA,sDAEA,EACA,GAaA+vB,qEACApuB,WACAkI,4CACAolB,kCAIA,MAHA,+BACAA,wCAEA7H,SACAt8B,aACA2a,cACA/X,uDACAuS,eACA,2BACA,kCAcA,MAZAuwB,qBACA7lC,iDACA,CACAif,6BACA6mB,qBACAC,0CACAC,wBACA,EACA,EAIA,CACA/mB,6BACA6mB,qBACA5mB,4CACA7J,eACA,EAEA,yDAEA,EACA,GAcA+vB,sEACA,cACA,gBACAjlC,aACA2a,cACA/X,MACAkc,qBACAC,4CACAolB,iCACA,EACAhvB,eACA,2BACA,kCAcA,MAZAuwB,qBACA7lC,iDACA,CACAif,6BACA6mB,qBACAC,0CACAC,wBACA,EACA,EAIA,CACA/mB,6BACA6mB,qBACA5mB,4CACA7J,eACA,EAEA,kDAEA,EACA,GAaA+vB,+DACApuB,WACAjU,QAOA,MALAA,wCACAA,iDACAA,yBACAA,uCAEA,qCACAy5B,cACAt8B,8BACA,kBACAu8B,SACAt8B,aACA2a,cACA/X,UACAuS,eACA,iCACA4D,qCACA5X,6DAEAukC,oBACA7lC,oDACA,CACAoT,4CACA,EACA,EAEAqsB,SACAxgB,6CACA,SAEA/F,sCACAlZ,iDACA0/B,OACAxmB,cACAA,kBAEAhZ,wHACA,EAGAw/B,OACAxmB,6EACA,CAEA,EACA,EACA,kBACAwmB,mBACA,EAEA,EACA,GAUA0F,sEACApuB,WACAivB,kBACAljC,QACAmjC,QACA/a,UAoCA,MAlCAlrB,6BACAkmC,iCAGAD,gDACA/a,qDAEApoB,6CACA,2CACA,GAEA,0BACAkjC,6CACA,0BACA9a,mBACA,qBACA8a,iCAEAA,oDAGAC,iBACAD,iBACAA,6BAEA,mBACAA,6BAEAA,iDAGAA,oEAGA,qCACAzJ,cACAyJ,eACA,kBACAxJ,SACAt8B,aACA2a,cACA/X,UACAuS,eACA,2BACA4D,mCACAumB,0BAEAC,kFAEA,EACA,EACA,kBACAA,mBACA,EAEA,EACA,GAWA0F,6DACAriC,uFAGAqjC,kCACA3J,SACAt8B,QACA2a,cACA/X,UACAuS,eACA,8BACAjV,SACA+C,EAEA,sCAEA,uCAIA,IAFA/C,wHACAA,cACA+C,+BACA8V,yBACA7Y,0CAMA,GAHAA,qDAGA9J,wBAEA,MADAwM,mBACAqjC,mBAEA,CAGApmC,kDACA,EACA,EACAomC,wBACA,GAaAhB,uEACAriC,mCACAsjC,oDAEArmC,QACAG,aACAkV,WACAtS,UACAuS,gBACAC,2BACA,mDAEA+wB,4EACAtuB,QACAS,QACArF,eACA/V,qBACA8C,aACAzD,kBACA6pC,UACA,GACApuB,OAEAH,qCAEA,CACA,EACA,GAUAotB,2DAEA1iC,yBAGA8jC,0CACA7B,QACAxkC,YACA,CACA,GAEA,4CAEAmlC,uCACApmB,oCACAunB,uEAEA,oFACAtD,qDACA7hC,mBACApB,8DACA,gBACA,IAKA,CACA,GACAqB,4BACA,cAGAjL,oBACAkwC,iBACA/B,wBACAiC,yBAEA1vB,6BACA,GACA2vB,oBACA3vB,yBACA,EACA,GACAzV,0CACA,cACAtB,iCACA,eAEAumC,iBACA7B,qEACA+B,4BACAzgC,qBACA3E,0CAGAukC,oBACA7lC,0DAEAy/B,iBAEAC,oDACA,GACAiH,oBACA3vB,yBACA,GAEA,GACAzV,kBACA,EACA,GAUA6jC,uEAEA1iC,yBAGA8jC,2CAMAI,0BACAf,oBACA7lC,8DAEA,EAEA,sCAEA,iEACAulC,oBACAsB,kBACA5nB,qBACAqlB,iCACA,EACAwC,yBACA5nB,oCACAunB,6CAEA,oFACAtD,qDACA7hC,mBACApB,8DACA,gBACA,IAKA,CACA,GACAqB,oBACAjL,oBACAkwC,iBACA/B,wBACAiC,8DACAC,oDACA,GACAplC,gCAEA0E,aACAA,oBACAhG,wCACAgG,oCACAA,iCAGAA,qCACAA,iDAEA3E,0EAEAslC,8DAEAG,iEAGA,GACAxlC,iDACAA,qBACAA,kBACA,EACA,GAUA6jC,2DAEA1iC,yBAGAskC,wBAGAR,0CACA5B,QACAzkC,YACA,CACA,GAMA,MAJAF,4BACA4lC,+BAGA,wCACAoB,0DACAC,wCACAC,6CACA,qCACA,GAGA7B,uCACA7zB,oBACA21B,sBACAC,iBACAnoB,sBACAooB,6BACAb,+DACA,sBAGAc,kFACA,oDACAjmC,mBACApB,8DACA,gBACA,MAKAsnC,kBACAD,wCACA,iCACAC,8BAEA,KAGAvnC,6CACAqB,mBACApB,wEACA,gBACA,KAKA,CACA,GACAqB,4BACA,cAGAjL,oBACAkwC,iBACA/B,wBACAiC,yBAEA1vB,6BACA,GACA2vB,oBACA3vB,yBACA,EACA,GACAzV,0CACA,cAEAtB,iCACA,eAEAumC,iBACA5B,yCACA8B,0BACAe,WACAlyB,WAyBA,MAvBAtV,2CACA,gDACAgG,eACAsP,uBAEAkyB,2BAEA,GAEAlyB,eAEAkyB,cACAnmC,mBACApB,+DACA,CAEAoB,0CANAA,qDAUA0lC,MACAhnC,yDAEAy/B,4BACA,GACAkH,oBACA3vB,yBACA,GAEA,GACAzV,kBACA,EACA,EACA,EAEA,oBACA,GC/vBA1K,yBACA,SACA,SACA,kBACA,eACA,WACA,wBACA,wBACA,qBACA,+EACA,gBASA6wC,YACAC,mBAKAC,0BAOAvlC,2BAGA,YADAwlC,sBACAA,OAEA7nC,YAIA2lC,gBAEA,eACA,qBACA,sBACA,YACA,EAMAmC,2BACA,cACA9nC,wDAEAigC,eACA7sB,GACA,yBAGA,oBACAA,wBACA,CAEA,EACAA,+BACA4D,mBAEAipB,mBACA,CAEAyH,aACAt0B,MACA/V,yBACA0qC,6BACA5nC,8BACAqC,8BACAwlC,gCACA/D,4BACAr6B,OACAiO,oCACAowB,gCACAtwB,+BACA,CACA,CACA,CACA,EACA,EAOAuwB,0BACAlxB,WACAmxB,2DAEAnoC,YACA8X,4BACAvW,sCACA,aACAR,mBACAgW,qCACAA,oEACAC,mBAEA,EACA,EAQAoxB,4CACApxB,WACAqxB,2CAGAroC,YACA8X,2CACAvW,6DACAiB,oBACAA,kBACAwU,2BACA,EACA,EAOAsxB,iDACAtxB,WACAuxB,gCAEA/lC,oBAEAvC,oBACAsoC,0CACAC,+CAEAvoC,mCAEA,0DACA,kEACA,GAUAwoC,sBARAjmC,gBACAimC,iBACA,sBACA,0BACA,mDACA,wDACA,qDAMA,KAKAjwB,QADAhW,aACAA,aAEAA,uDAGAvC,mCAEA,uEAMAwoC,uBAJAA,+BACA,wCACA,4EAOA,IAGAd,wBAMA3wB,sCAEAA,kBACA,EAKA0xB,mCACAzoC,sCACA,mBACAA,yDACA,yBACAe,qBAEAA,uBAEA,EACA,EACA,EAWAgiC,mCACA,cAUA,GATA/iC,qBACAA,iCAEAwoC,uBAGAA,sCAGAxoC,wBASA,MANAA,yCACA0oC,2BACA,GACAF,uBACA,mBAEAxD,QACAxF,sDACAiH,qCACA,sCAOA1vB,kEACA,GACA2vB,sCACAiC,iBAMA5xB,qCAOAA,0BACA,EAEA,EAOA6xB,2BACA,WAQA,MALAJ,QAFAxoC,qCAEAynC,oBAGAznC,kCAEAwoC,MACA,CACA,GAEA,oBACA,GCpSA5xC,sDACA,gBAEAiyC,iBACAC,mCACAC,kCACAC,kCACAC,0CACAC,kBACAC,4BACA,2DAQA,MAPAH,8CACA,8EACA,2BACAI,6BACA,6BACA,GAEAA,SACA,IAMAC,mCACAL,yCAIAA,oDAMAE,0DACAL,mCACAK,oBAPAL,gCACAK,mBASA,EAKA,OAMA9mC,gBAEArC,wBACA8X,aACAvW,uBACAR,mBACA,mCACAgnC,SACAnxC,uCACAJ,iDACAA,kBAEA,EAEA,GAGA8yC,cACAtpC,UACA8X,wBACAvW,GACA,mBACAtB,sBACAqpC,aACA,OAEA,CACA,CACA,GCpFAzyC,wBACA,SACA,iBACA,iBACA,aACA,UACA,WACA,wBACA,sEA6BA,4BACA0yC,qJACAC,4DACAC,kDACAC,0DAEAF,+FAEAC,uEACA,cACAE,2BAEA,GAEAD,oEACAH,4BACAK,qBACAlD,qEACAC,UACAiB,gCACA,EACA,GAEA5nC,6CAEA,iFACAe,WACA,cAEAA,mBACA4oC,4BAEA,EACA,CAOA,0HACAE,8EACA1pC,2CACA2pC,wEACA7C,qEACA8C,gDACAC,iCACAH,UACA1pC,IACA8pC,0DACAC,wEACAC,2DACAC,aACAnD,aACAoD,kCACAC,0BACAR,WACA,GAEAE,gEACAA,6CAMA,uDACApC,uCAEAmC,6EACA,EACA,CAMA,mCACAR,4BACAK,mBACAlD,qBACA,0CACA6C,oCACAgB,sCACA,CACA,cACAhB,iDACAA,+CAFA,CAGA,2CACAgB,oDACA,EACA,CACA,GACA5D,0CACA,CAOA,mFACA8C,mDACAe,yEACAC,0FAEAhB,4DACAiB,qBACAD,4DACAD,wGAEAC,+DACAD,kCAEA,CAzIA,uBACAj5B,eACAo5B,iBACAC,WACAvoC,cACAknC,gCACAsB,gBACAnE,aACAmE,cACAtB,kCACAuB,mBACAC,yBACA,GACApE,UACAiB,gCACA,EACA,CACA,EA0HA,sBACA,GCxJA/wC,sCACA,SACA,SACA,OACA,UACA,aACA,eACA,WACA,uBACA,iBACA,iBACA,qBACA,cACA,MACA,cACA,2HACA,gBAEAm0C,cACAC,WACAC,WACA,EAEA,OAKA7tC,cAqBAgF,uCAmiBA,iCACAK,uCACA,CASA,sCACA,+CACAnH,gDACA4nC,mDACAlkB,gCACAC,0CACA9L,qBACA,EAGA,CAOA,4CAEAnT,qBACAA,6CAGA1E,wCACA4vC,8CACA,mCACAA,yCAGA5vC,eACA0E,gDAEA,CAQA,qCACAmrC,oCAEAnH,sCACAC,0CAIA,MAHAf,iDACAgB,MAEAA,GACA,WAEA,0CACA,mBAEA,UACA,mBAGA,qBACA,CAOA,8BACAlkC,qBACAA,+BAGA1E,6BACAA,iCAEAA,eACA0E,kCAEA,CAEA,wBACAA,4EACA1E,qBAEAA,aACAA,yCAEAA,gDACAA,8BAGAA,eACA0E,kCAEAA,iBACAA,yBAGA,CAEA,6CACAuY,wEACA0rB,gCACAh+B,mBACA5P,mBACA,gCACA,aACA,eACA,+BACA,gBAEA0J,oCACAqV,oCACAC,iCACA+1B,+BACAtoC,WACA,2BACA,mCACAuoC,yCACAA,4BAEArrC,sBACAA,qCACA,2BACA+mC,gCAEA,GACAA,4BACAA,mBACA,wBACAA,kCAGA,EACA,CAYA,4DACA,oBACA/mC,qBACAsrC,YAGAC,uDACA,4DACA,0CACA,GAEA,0BACA5D,kDAEA,CAEA,oCACArsC,wBAEAA,sDAGAA,yBADAA,gCACAA,mCAEA0iC,MAGA,CAQA,kCACAqN,kCACAxG,cAgBA,MAdA5rB,wBACA4rB,6CAEA5rB,sCACAA,6CACA,0BAEAiqB,4EAGAjqB,2BACAiqB,8DAGAmI,QACA,CAQA,iCACA,kBAEAl4B,KAIAm0B,2BAEAA,4CAIAP,6BAGA,IAzwBAyE,WACA1oC,gBACAsS,oBACA7X,YACAkuC,YACA,CACA,EAGAC,sDACAxM,iCACAyM,mCACA5zB,wBAEAkH,0DACA2sB,uCACA5hB,WACA7iB,SACA0kC,QACA,GAGAv5B,QAWA8F,kCAEA2uB,mCADA+E,eAEA,SAGA,yBACAxwC,yDACAA,aAEA,WADAyrC,0BAMA+E,0DACAA,yCAEAhpC,qBACAikC,oCACAA,0BACA+E,oCACAhpC,wBACAikC,oCACAA,2BAGAgF,wBACAhF,cACA,CACA,EAQAiF,gCAEAjF,mCADA+E,UAEA/E,OAEA+E,wCACAA,oBACA/rC,oCAGAgsC,4CAGAtpC,sCAGA,EAWAwpC,kCACAlF,mCACAmF,2EAEA71C,6BAEAA,4BACA,6BACAA,uBAEAA,yBAGA0J,oCACAqV,oCACAC,iCACA+1B,+BACAtoC,YACAwS,8BACA+1B,gCACAc,kCACA7wC,oCACA,gEACA,GACAA,aACAyrC,mBACAA,gCAGA,CACA,EACA,EASAqF,wCACArF,mCACAzrC,qDACAyrC,iBACA,EASAsF,wCACAtF,mCACAzrC,qDACAyE,4CACAgnC,wBACA,EASAuF,wCACAvF,mCACAzrC,qDACAyE,4CACAgnC,sBACA,CACA,EAKAwF,aAGAzpC,MACAsS,YACAg2B,SACAoB,MACA3xB,aACA3a,eACA,CACA,EAGAusC,IACA,iBACA,mEACA,EAGAC,OACA,SACAC,cACAC,aACAC,aACAC,0BACA,0HACA,CACA,CACA,EAGAl6B,UAOAm6B,6BACAtqC,0EACA,EAQAuqC,yCACA3B,wCACAh1C,6BA0BA,MAzBAixC,uBACAjxC,mCAEA42C,eACA52C,8BAIAg1C,WAGArrC,sDACA3J,8BACAg1C,oCAIArrC,0DACA3J,kCACAg1C,kDACAA,sCAGAU,wBAEA11C,MACA,EASA62C,6BAEA,mBACApqC,aACAzB,6BACA,KAGAgqC,2BAGAA,oBACAA,uBAGA8B,iCAEAC,mBAEAC,mBAEAhC,SACA,EAUAiC,gCACAC,6DACAC,kEACA1B,4CACA2B,oDACAC,6CAEAC,kCAKA5G,eAOA4G,yCAKAH,sBACAzG,uCAIAA,sEACA,EAEAwG,6BACAxG,gCAGAA,2CACA/mC,yBACA,GAQAyC,mCACA,EAKAmrC,yBAEAttC,uCACAqnC,yCACA3oB,+BACA,EAEA,EAMA6uB,qCACAC,kBACA,EAWAC,yCAEAzG,eACA0G,gBACA7C,wBACAn1B,0BACAi4B,+BACAC,aACAlH,kCACA3C,iCACA,SAEA4I,oBAGAltC,0BACA+lC,aACAqI,2BACAC,uBAGA9G,yBACA+G,sCAKA/G,+BACAA,0BACAP,wBAEAmH,4BACAA,mDACAA,uBACAA,yCAGAF,yFACA,wBACAv3B,4EACA63B,gEAKAhH,kCACA4G,uBACAA,4CACAA,yDACAA,uBACAA,4CAGAtD,0CACA2D,0DACA93B,uEACA63B,4EACA,EACA,IAQA7rC,WACAgP,wCACAA,2CAGA,EAGA+8B,gEACAluC,+BAKAP,uDACAA,gCAIA,mCACA0uC,8BAGAA,iEAMA1C,yEAGApE,iDACA3oB,wBACAimB,2CACAZ,oCACA0C,SACA,GAEAtkC,uCAfA1C,+BAgBA,CACA,CACA,EAMA2uC,+BACA,qCAGA1uC,yCACAyC,WACAoV,qBACAvW,8BACAsR,4DACA,EACA,GAGA+0B,0CACA,gBACArsC,iBACAjF,QACAs4C,+BACA,GAGAlsC,2BACAA,8CAEA,GAGAA,6BAEAmoC,0CACA2D,uDAEAxC,0CACAtpC,6BACAmsC,mDACAtuC,gCACAmC,qCAEA,GACAgU,yDACAnW,+BACAmC,sEAEA,EACA,EACA,GAEAA,yCACA+8B,SACA,EACA,EACA,EA5hBAsO,WACAb,aA6wBA,kBACA,CACA,CACA,GCn0BAr2C,gDACA,SACA,OACA,eACA,aACA,cACA,iBACA,uBACA,qBACA,qBACA,uBACA,2IACA,gBAEA0oB,+DAEAinB,2CAKA,OAKAnpC,yBAcAgF,uCAEA,qCAEAwoC,0CAEA,oBACArE,kDACAA,0DACAgI,8BACA,EACA9H,0BACAR,oBACA4I,mBACAC,uBACAC,iDAEAC,oCACA5H,0BACA6H,+BACAC,qBACAC,eACAlwB,8BACAgnB,gBACA4I,eACA,GACAvtC,qBACAqmC,yCACA3oB,wBACA,EACA,GACA1d,uBACA,cAEAqmC,6DAIA5wB,4BAEA/W,sCACA+W,mCAEAA,4BACAA,mCACA,GACA4wB,2DACA5wB,sBACAA,mCACA,GACA4wB,mFACA5wB,KACA2F,8BACA3F,uBACAA,iBACA,GACAq4B,8BACAC,+BACA,GACA1H,8DACA5wB,+BACA,GACA4wB,0CACA5wB,+BACA,GAEAN,yDACAnW,+BACAyW,qBAEA,GAEAyoB,SACA,GACAl+B,4BACA,cAEAytC,cACA14C,oCACA04C,gBAIAxI,yCACAE,yBACA1vB,6BACA,GACA2vB,oBACApnB,iBACA,EACA,GACAhe,6BAEA,yBAIA,qDACA,GACAA,wCACA,8BACA,mCAEA,GACAA,mCACAyV,WACAu4B,yBACAC,yCACA,4BACAp8B,gBACA6zB,0BACA,EACA,EAGAjwB,qBAIA,WACA/W,uCACA,yCACA2nC,6CAEA,gCACAA,gEAEA,mCACAA,mEAGAlxB,wDAEAq4B,qBACAP,yCACA,GAEA5G,yEAEA,MADAzD,gCACAA,GACA,OAEA,GACA5iC,yBACAge,iBACA,EACA,EACA,EACA,EACA,CACA,CACA,GC/LA1oB,6BACA,SACA,wBACA,8BACA,wCACA,2EACA,gBAKA44C,0BAKAC,0CAOAC,qDACA,4FACA,EAWA,MARAD,2EACAA,8FAOA,mCACAE,yBACAxwB,uBAOA,MALAuwB,8BACAC,4BACAD,sCACAC,oCAEAF,gDACA,CACA,GC/CA74C,gCACA,SACA,SACA,eAEA,2BAkBAoM,SANA,kDAMAA,UALA4sC,+CACAC,gEACAC,0CACAC,gDAEAC,4DACAC,YAaA,MAXAF,0BACAA,mDACAF,2CAGAI,0DACAC,oDACAA,iDAEAN,6CAEAK,WACA,CASA,oCACA,oCACAE,mCACA5uC,yGACA6uC,4EACAC,uDACAC,6CAEA,oEACA,CAQA,+BACAC,4CACAC,4CACAC,8BACAC,WAEAD,eAKAD,sEACAE,sDACAD,kCAGA,0CACAA,+BAEA,CA3EA,kDACAE,kBACAC,2BA+EA,OAMAxuC,sBAGAuuC,QACA94B,4BACAvW,gDACAuvC,kBACA,OAEA9uC,gBACA8V,6BACAvW,sCACAS,8CACA8uC,kBACA,GAKA9wC,qCACA,EAMA8wC,qBACA,CACA,GC3HAj6C,0BACA,SACA,SACA,SACA,UACA,cACA,UACA,SACA,WACA,cACA,cACA,uBACA,iBACA,iBACA,yBACA,qBACA,aACA,gBACA,qBACA,wBACA,sLACA,kBAEA0oB,yCAUAwxB,0DAGAC,gEACA,qCAIA,MAHAvI,UACAtE,iBAEAA,GACA,MAEA8M,iEAEAC,iCAGAC,kCAOA,MALAD,WAEAxuC,0CAGAyuC,8BACA/9B,yBACAjT,YACA8mC,yCACAI,6BACAK,oBACA3xB,qBACA64B,2BACA,EACA,EAQAwC,sCACA7xB,kBACAje,qBACA,EAMA,OACAZ,aAEA0e,wBACAtd,iBAEAsX,sBACA1C,qBAGA5U,sCAGAA,yCAGAuvC,WAEAzJ,sCAEAA,iDAEA3nC,oDACA6W,sGAEA,GAGAA,iCAMA,GALAvgB,qBAKAyhB,oBAaA,OATAxV,2BAGAolC,kCAIA0J,wBAEAt5B,cACA,WACAA,wCACAu5B,kCAGAvxC,iDACAwxC,kBACAC,mDAEAV,8BACArK,UACA+K,8BACAF,uCACA,GACA5K,kBACA,GAEA3mC,0CACA,MACA,cAGA8W,4BACA,CAEA,GACAzU,OAGA85B,eACAuV,cAGAtyB,kEACAtK,mCAEA,CACA,CACA,GCxKAje,sCACA,SACA,OACA,SACA,cACA,yBACA,+CACA,aACA,yBACA86C,aAGA,GADAv4B,sBACAM,aACA,iCACAA,4BACApY,oDAIA,GCrBAzK,yCACA,aAEA,OACA,MACA,SACA,wBACA,yBACA,4CACA,wCACA,wBACA,CACA,EACA,kBACA,SACA,mCACA,CACA,EACA,MACA,SACA,+BACA,CACA,EACA,mBACA,SACA,4CACA,CACA,EACA,OACA,qCACA,SACA,+BACA,0BACA,CACA,EACA,UACA,SACA,yCACA,CACA,CACA,CACA,GAEAA,MChEA,sCACA,SACA,SACA,OACA,cACA,aACA,CACA,kCACA,aAGA,0BACA,8BACA+6C,4DACAC,+DACAC,eAGAF,uBAEAE,oEACA,+BACAF,uBAGAC,wCACA,gCACAD,8CACA,GAGAjT,8BACA,CAEA,4BACA,8BACAzsB,uBAEAlS,QACAG,yBACA2a,cACAvF,uBACAopB,2CACA76B,6BACA,EACA0R,gBACAlU,4CACA,CACA,EACA,CAEA,4BAEAq9B,2BACAoT,iDACAC,sCACAC,eAGA,sBACAA,gBACAvgC,gBACAwgC,uBACA9pC,iBACA,EACAsM,sEACAs9B,sBAGA1wC,gCAEA,CAEA,OACAZ,oBACA,CACA,GCvDA7J,+CACA,SACA,OACA,WACA,cACA,WACA,iCACA,aAQA,oCACA,oBAOA,MANAmJ,yEACAmyC,yBACAC,0BACAA,eACA9S,sCACA,GACAA,YACA,CAGA,4BACAnyB,MACA/J,EACA,0BACA,wCAEA,QACA,CAEA,8BACApD,wDACAA,oGACA,CAEA,gCACA,yCACAA,wFACAqyC,oEACAryC,QACAqV,YACAlV,uDACA4C,eACAuS,gBACAC,+BAEAxS,cACAsvC,+EAGAryC,8CAEAA,4CACAsyC,8EACAC,yBACAD,wEACAA,+DACAA,gEACAA,kCACAtyC,sBAGAwyC,cAIA,gEACAC,wBAGAzyC,gFAEA0yC,wBACAC,2BACA,EACA,EACA,KAEAC,eACAP,mDAEA/wC,6BACA,CACA,GAEAsxC,cACAP,6EAEA,CAEA,uBAEA,MADAA,gDACAryC,QACAqV,WACAlV,0DACA,EACA,CAEA,qCACAuyC,yCACAG,aACA7yC,8EAEA8yC,8BAEA9yC,iEACAA,8DACAqyC,4CACAA,2CAEAvuC,sBACAvN,0BACA,MACA,IAEAw8C,sBAEA,CAEA,uBAGA/yC,8DACAquC,6BAEAruC,4EACAA,yEACA,CAEA,iCACA,uCACAgzC,iDACAlV,+BACAz/B,qCAEA2B,2EACA,IArIAizC,kBACAJ,aACAH,yBACAQ,eACAN,eAmIA,OACAlyC,uBAGA8xC,cAEAxyC,6BAGAA,2DACA,uBACAizC,wBACAjzC,2CACA,GAEAA,oEACAkS,uBACA,GAEAlS,wEACA,uCACA,2EACAmzC,mCAGAA,kCAEA,GAEAnzC,0EACA,gDAEAkS,wBAGA2gC,aACA7yC,sEACAmyC,wCACAC,0BACAA,cACAS,kCAEAA,mBACA,GACAA,+BACAA,sBAKAK,kCAGAlzC,oGACAA,mCACAA,sCAEAqyC,kHAEAryC,kEACAe,mBACAqyC,8BACA,GACApzC,mEACAe,mBACAsxC,iDACAryC,uCACA4yC,eACAF,wBACAK,sBACA,GAEAK,uBACAttC,UACAD,WACAM,QACAktC,iBACAC,iBACA,KAhCA/8C,4CAiCA,EACA,CACA,CACA,GAEAM,MCzPA,4DASA,4BACA,mCACA,iBACA08C,0BACAj1B,aAGAk1B,+DACA52C,gBACAoD,gGACA,kBACAA,8BAEAA,eACA,cACA,eACAA,8BACA+C,eACAub,yHAEAA,wKAEA,EAGA,EAEA,CAEA,OACAm1B,qBACA,CACA,GCtCA58C,qGACA,aAOA,OACA6J,oBACAgZ,sBACAvZ,6CACAuzC,mCAEA,gBAEA5vC,sBAEAvN,qGACA,MAEA,CACA,CACA,GCvBAM,4EACA,aAMA,OACA6J,iBACAsX,kCACA,CACA,CACA,GCXAnhB,iCACA,SACA,SACA,OACA,WACA,iBACA,eACA,cACA,oBACA,eACA,mEACA,gBAQA88C,iEACA,UACA10B,OACA,EAEA20B,wCACAnX,SACAt8B,0CACA4C,UACA+X,aACA,GACA4rB,wBACAxtB,kBACA5X,qCAEAtB,oCACA,GACA2mC,oBACArlC,qBACA,EACA,EACA,EAMAuyC,gCACA77B,QACAW,iBACAL,SACAS,kEACAZ,MACA,EAOA27B,wCACAH,8EACA,EAOAI,oCACAJ,8EACA,EAOAK,wCACAL,kFACA,EAMA,OACAjzC,iBACA,8BAEAsX,oCACA,2BACAi8B,8BAEA,GAEA,aACAC,cACAl1B,kBACAm1B,cACAC,iBACA,EAGAH,kDACAh0C,wCACAo0C,6DACAC,gEACAC,aACAv0C,iDAEAC,4CACAD,uBACA,EAEA,EACA,cACAG,0CACAq0C,iCACAvqB,UACAyd,gBACA+M,OACA,CACArhC,WACA0yB,kBACA4O,WACA,GACAthC,eACA0yB,uBACA4O,WACA,GACAthC,cACA0yB,sBACA4O,WACA,GACAthC,WACA0yB,kBACA4O,WACA,GACAthC,WACA0yB,kBACA4O,WACA,GACAthC,YACA0yB,0BACA4O,YACAnO,gDACA,GACAnzB,WACA0yB,+BACA4O,WACA,GACAthC,YACA0yB,2BACA4O,YACA9mC,0BACA,2BACA,YACA,OACA,oDACA,CACA,EAEA,EACA,CACA,CACA,GC3IA,WACA,gBAEA+mC,sDAEAC,QACAv3C,uBACAw3C,gBACA,uFACA,CACA,GACAx3C,qBACAw3C,qCACAC,2GACA,CACA,GACAz3C,oBACAw3C,gBACA,6BACA,CACA,GACAx3C,qBACAw3C,gBACA,6EACA,CACA,GACAx3C,mBACAw3C,gBACA,4CACA,CACA,GACAE,cAKA,GAHAt+C,0FAGAk+C,iBACAI,2BACA,2EACAJ,kCACAA,iEACAl+C,6CACA,KACA,CACAs+C,aACA,CAEA,IAGAl+C,gDAEAA,MClFA,6DACA,aAEA,kBAEAm+C,mBACAC,mDACAC,wCAEA,kCACAD,gCACAC,2CACAA,uCAEAl1C,+DAGAi1C,+BACAC,mCACAA,mCACAA,wCAEAA,mCACAA,mCACAA,wCAEAA,iCACAA,mCACAA,yCAIAA,mCACAA,wCAGAl1C,6DAEA,CACA,EAEA,mBACA,GACAnJ,MC3CA,0CAEA,yBACA,CAeA,MAbAs+C,gDAIA,MAHA,6BACAtiC,eAEA,IACA,EAEAsiC,qDACA,6BACAtiC,UAEA,EAEAsiC,aACA,GCFAt+C,iFACA,aAKA,sFACA,qBACA,2BACA,kBAEA,iCACA,wBACA,6BACA,yBACA,CA0JA,MAxJAu+C,0BACAA,uBAEAA,2DACAp+B,WACAq+B,gBACAC,0BACAC,iDAEAF,6BAIAr1C,yCACAgX,8BACAhX,gCACA,8BACAw1C,WAEA,EACA,GACA,qBACAC,uCAEA,GAEAJ,0BACA,EAEAD,uDACA,0CAEA,2DACAK,4CACA,kBACA,8BACAD,YAIA,EAMAJ,2CACA,+BAEA,MADA9+C,yCACA,gCACA,EAEA8+C,uEACA,uCACA,EAGAA,iDACA,yBACA,EAGAA,yCACA,uBACA,EAEAA,uDACA,qCACA,EAGAA,iDACA,yBACA,EAEAA,uDACA,yBACA,EAGAA,6DACA,gDAGA,KAFA,2BAIA,EAOAA,iDAEA,MADA,gCACA,IACA,EAOAA,+CAEA,MADA,8BACA,IACA,EAOAA,+CAEA,MADA,8BACA,IACA,EAKAA,6CACA,uCACA,8BAEAviC,WAEA,EAMAuiC,6CACA,uCACA,8BAEAviC,WAEA,EAMAuiC,iDAEA,0CACA,iCAEA,EAEAA,UAEA,GC3KAv+C,wDACA,aAEA,uCACA,iBACA,wBACA,CA6BA,MA3BA6+C,+CAIA,MAHA,6BACA7iC,qBAEA,UACA,EAEA6iC,oDAEA9rC,mBACA,6BACAiJ,YAGA,iBACA7S,QACAG,mBACA4C,MACA,WACA,EACAsS,YACAC,gBACAC,iDACA,GAEA,EAEAmgC,YACA,GACA7+C,MCtDA,qDAEA,0CACA,eACA,0BACA,CA0CA,MAxCA8+C,2DACA,mCACA,6BACA9iC,8BAGA7S,QACAG,oBACA4C,MACA,iBACA,EACAsS,YACAC,gBACAC,sDACA,kBACAqgC,8BAEA,6BACA/iC,gCAGA,iBAeA,EAEA,EAEA8iC,eACA,GCvCA9+C,qEACA,mCAQAwL,oDACA,cAEA,sBACA,uBAEA,uBACA,qBACA,qBACA,oBACA,qBACA,+BAGA,sEAEA,+FAEA,8BACAwpC,4CACA5hB,oDACA7iB,SACA0kC,2BACA,EAEA,kBACA/oC,MACAsS,YACAg2B,SACAoB,MACA3xB,cACA3a,gBACA,CACA,EACAwsC,OACA,SACAC,cACAC,aACAC,YACA,CACA,EACAj6B,UACAi7B,mCACA92B,oBACA,CACA,CACA,EAEAhX,0CAGA,uCACA,wDACAA,kCAEA,EAMA61C,0BACA,2BACAC,0CACA5R,8BACA35B,sCACA,CACA,EAKAwrC,8BACA9qB,UACAmgB,YAsBA,GApBA4K,uBAUA,kDACA5K,2BAEAA,sBACA,sCAEAngB,aAdAmgB,0BACA,oCACAngB,qBAEA,2DAcA,kBAGA,OADAgrB,cACA7yC,uBAEA,yBACA,2BACA6yC,cAGA,2CACA,+CACA,gDAEA,2DACA,+DACAhrB,0CAEA+qB,sFACA/qB,yCAEA,CACA,EAQAirB,8CACA,iCACA,qCACA,qBACA,yBAEA,EAKAC,mBACA,sCACA,EAKAC,yCACA,0CACA,EAKAC,yCACA,yCACA,EAMAC,kCAQA,MAPAC,eACA,eACA,0CACA,GACA,+BACA,2CACA,GACAA,WACA,EAQAC,qCAEA,OADAR,oCACA5yC,sBACAqzC,mDAEA,EAMAC,2CACA12C,qEACAA,gBACA,EACA,EAQA22C,wCACA,yBACA,0BACA,+DACA,gCAEA,EAKAC,8BACAC,+BACA33B,cAGA,MAFAA,+CACAlf,yBACAkf,QACA,EAEA43B,iDACA73B,YACAC,gBAEA63B,aACA/2C,+BACAkf,6BAEAD,uBACAC,iCAGA,CACA,GAEA,uBACA,GC7OAroB,8BACA,SACA,SACA,OACA,UACA,eACA,UACA,cACA,cACA,0CACA,4DACA,oDAOAwL,wCACA,qBACA,4FACA,yFACA9B,mDACA,mDAEA,8BACA,uFACA,kBAMA,wBAEA,iBACAosC,OACAqK,SACAjK,YACA,CACA,EACAL,IACAuK,sBACAC,mEACA,EACArkC,UAEAskC,oCACA,sCACAnuC,uBACA,kDAKA+tC,6BACA/tC,2EACAA,yEAKA,EAEAouC,yCACAhM,2BACAiM,+CAMA,MAJA,4CACAruC,yCAIA,EAEAikC,mCACA,iDAMA,cAJA8J,QACAR,yCAGAvtC,0BACA,wCACAutC,iDAGA,kBACA,EAEAe,+BACAtuC,uBACAA,sCAEAA,iCACAA,yCAEA,EAKAukC,0BACAvkC,sCAEAA,+BACAA,wCAGAA,wBACA,EACAuuC,iCACAvuC,2DACAA,gDAEA,EAEAglC,oCACAwJ,gBACAC,cACAC,oCAQA,GANA1uC,oDACAwuC,mDAEAxuC,uDACAwuC,yDAEAC,gCAEA,WADAzuC,8DAGA,mCACA,wCAIA,MAHAwuC,mBACAxuC,sFACAA,6DAEA,CACA,QACA,EACAmkC,+BAmBA,MAlBAnkC,uDACAgtC,gDAIAA,gBACAA,mBAIAhtC,yBAGAA,2BAGAA,gDAEAgtC,IACA,CACA,EACAloB,SACA6pB,yBACA,CACA,EAGA,mCACAnL,kDAIA,kDAEAxsC,4EACAe,0BACA,EACA,EAKA62C,2EACAC,mBAGArU,kCAFAsU,SACAC,iBAiBA,MAbAD,UADAD,wBACAA,wBAEAA,eAGAE,wEAGAF,wBACAA,yCAEAA,gCAEAA,cACA,EAQAG,0FACAD,qBACAE,kBAkBA,MAhBAh4C,mCACA,uCAEAi4C,6CACAD,yEACAzU,oEACA0U,gCACAH,iCAGAvU,mEACAuU,8BAGA,GAEAA,gBACA,EAMAI,uDACAnhC,WACAohC,6BAEAn4C,uDACAA,oCACA,uBACA,2DACA,oCACA+W,sCAEA,EAEA,EAEAqhC,iBAOA,EAKAC,+DACAlN,mBACAmN,4EACAh4C,SACA2e,gBACAs5B,aACApxC,uCACA0kC,6DACA,EACAvrC,mCAEAP,OACA,aACAO,QACA,mBACA,yBACA01C,cACA7yC,IAQA,IANA4F,oCACAgtC,gDAGAhtC,8BAEA5F,oBACA4yC,4BACAhtC,+DACAhJ,2DACAy2C,oDAEA,4BACAztC,kDAEAitC,mCAIAjtC,iBACAoiC,OACA,YACApiC,4DACA,CACAA,iBACAoiC,OACA,WACApiC,2DACA,CAGAA,wCAGAzI,uBAEA,2BACAP,QACA69B,iBACAia,WACAW,gBACA,kBAEAxY,iCACAA,6DACAj3B,qDACA,EAEA,GAEAA,4CAIAA,sCAGAA,mCACAA,oCAGA6J,UACAA,wBAEA7J,wBACAA,qCAEA,CACA,QACA,OAEA,EAMA6E,yBACA,cAEA7N,gCACA,cACA,mDACA,eACAA,mCACAA,mCAGA,CACA,EACA,EAMA04C,sBACA,iBACA14C,8EACAA,mCACA24C,kCAEA,GACA,yDACA,kCACA,GAUA,MARA34C,6EACA,sCACA,6BACA,gCACAu2C,uBAEA,CACA,GACAA,WACA,EAKAqC,uBACA5vC,eACA6vC,UACA,0CACA,qCACAA,uCAGA,YAEA1c,kBAQA,4BACA0c,uCAEA,GACAC,oBADAC,SAEA,+BACA,sEACA/4C,2BACA+4C,4BAGA,gFACA/4C,gCACA84C,qCAEA,CAEAC,WACAA,+BAEAD,gBACAA,yCAGAC,WACAF,2BAGAC,gBACAD,qCAGA74C,QACAG,yBACAkV,YACAtS,YACAuS,gBACAC,2BACA2D,gBACAlQ,+BACAA,sCAEA1H,qDAEA0H,oCACAA,qDAGA,EACAgwC,oBACA7c,gBACA,CACA,EACA,CACA,GAEA,6BACA,GChfA,gOACA,sukBCDAtlC","names":["loaderScript","configUrl","bundle","loadController","controllerOptions","controllerPath","params","window","controller","document","startController","bundles","require","define","localized","global","setPrototypeOf","l","lcElement","array","element","set","newObject","property","apply$1","DOMPurify","originalDocument","useDOMParser","removeTitle","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","_window$NamedNodeMap","NamedNodeMap","Text","Comment","DOMParser","TrustedTypes","template","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","getElementsByTagName","createDocumentFragment","importNode","hooks","MUSTACHE_EXPR$$1","ERB_EXPR$$1","DATA_ATTR$$1","ARIA_ATTR$$1","IS_SCRIPT_OR_DATA$$1","ATTR_WHITESPACE$$1","IS_ALLOWED_URI$$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_JQUERY","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","CONFIG","formElement","_parseConfig","cfg","addToSet","freeze","_forceRemove","node","_removeAttribute","attribute","from","_initDocument","doc","leadingWhitespace","dirty","body","_createIterator","_isClobbered","elm","_isNode","_executeHook","hook","_sanitizeElements","tagName","allowedTags","currentNode","content","_isValidAttribute","value","_sanitizeAttributes","attr","lcName","idAttr","attrName","attrValue","keepAttr","allowedAttributes","name","namespaceURI","hookEvent","attributes","_sanitizeShadowDOM","shadowNode","shadowIterator","importedNode","oldNode","returnNode","lcTag","freeze$1","html","svg","svgFilters","mathMl","text","freeze$2","html$1","svg$1","mathMl$1","xml","hasOwnProperty","_ref$1","seal","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","_typeof","_ref","apply","arraySlice","getGlobal","_createTrustedTypesPolicy","suffix","ATTR_NAME","createHTML","console","purify","$","_","__","url","alert","message","redirectUrl","options","appLogger","appController","start","currentRoute","historyRouter","selector","target","e","$elt","href","getRouter","getLogger","onError","logoutEvent","feedback","on","headerHeight","headerElements","$loadingBar","loadingBarHeight","originalHeight","$win","$doc","$contentWrap","$versionWarning","$header","updateHeight","covered","stop","init","getMainContainer","sectionIndex","context","getMainContainerSelector","$container","loading","loadingBar","loaded","_load","data","_url","Math","digits","point","i","factor","gamp","ta","ib","fb","res","called","fn","scheduled","setTimeout","css","overflow","overflowX","overflowY","getScrollParent","isIE11","isIE10","noOffsetParent","offsetParent","nodeName","getOffsetParent","getRoot","order","end","range","isOffsetContainer","commonAncestorContainer","element1root","findCommonOffsetParent","side","upperSide","scrollingElement","subtract","scrollTop","scrollLeft","modifier","rect","sideA","sideB","computedStyle","height","width","right","bottom","result","left","top","sizes","horizScrollbar","vertScrollbar","fixedPosition","isHTML","childrenRect","parentRect","scrollParent","styles","borderTopWidth","borderLeftWidth","offsets","marginTop","marginLeft","excludeScroll","relativeOffset","offset","isFixed","el","boundaries","boundariesNode","padding","rects","sortedAreas","key","area","filteredAreas","computedPlacement","variation","commonOffsetParent","x","y","placement","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","referenceOffsets","Array","arr","modifiersToRun","instance","arrowStyles","flipped","enabled","prefixes","upperProp","prefix","toCheck","isModifierEnabled","isBody","attachToScrollParents","scrollParents","state","getWindow","cancelAnimationFrame","Object","unit","setStyles","setAttributes","popper","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","position","prefixedProperty","invertTop","invertLeft","requesting","isRequired","_requesting","requested","arrowElement","_data$offsets","reference","isVertical","len","sideCapitalized","altSide","opSide","arrowElementSize","clientWidth","center","popperMarginSide","popperBorderSide","sideValue","counter","index","placementOpposite","flipOrder","refOffsets","floor","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariation","split","size","useHeight","fragments","divider","splitRegex","ops","mergeWithPrevious","reduce","a","map","op","isNumeric","basePlacement","parseOffset","boundariesElement","transformProp","popperStyles","transform","check","primary","defineProperty","secondary","shiftvariation","shiftOffsets","refRect","bound","subtractLength","isBrowser","longerTimeoutBrowsers","timeoutDuration","supportsMicroTasks","debounce","classCallCheck","createClass","descriptor","protoProps","staticProps","Constructor","enumerable","configurable","writable","obj","_extends","source","placements","validPlacements","BEHAVIORS","FLIP","CLOCKWISE","COUNTERCLOCKWISE","modifiers","shift","preventOverflow","priority","keepTogether","arrow","flip","behavior","inner","hide","computeStyle","applyStyle","onLoad","Defaults","positionFixed","eventsEnabled","removeOnDestroy","onCreate","onUpdate","Popper","_this","isDestroyed","isCreated","sort","modifierOptions","DEFAULT_OPTIONS","container","delay","title","trigger","arrowSelector","innerSelector","Tooltip","_initialiseProps","tooltipGenerator","tooltipNode","allowHtml","event","_this2","_this3","directEvents","oppositeEvents","events","evt","func","_this5","_this6","relatedreference","callback","viewBox","fragment","group","xhr","cachedDocument","embed","id","loadreadystatechange","requestAnimationFrame","polyfill","newerIEUA","webkitUA","olderEdgeUA","svg4everybody","startEventComponents","adder","btngrouper","deleter","disabler","toggler","inplacer","modal","form","startDomComponent","incrementer","durationer","selecter","initCrossBrowserSvg","tooltip","history","urls","forward","router","uikitLoader","errorMessage","ajaxResponse","hasRequiredProperties","Lock","releaseUrl","type","dataType","success","fail","pushSectionState","parsedUrl","currentQuery","newQuery","baseUrlHasSection","baseUrlHasUri","sectionId","restoreWith","nodeUri","stateUrl","topState","pushNodeState","currentState","newState","restoreState","fromPopState","hasRestorableState","generisRouter","destroy","sectionApi","scope","sections","selected","self","restore","defaultSection","defaultUri","$openersContainer","$sectionOpener","$link","$panel","isActive","panel","opener","active","activated","disabled","off","_bindOpener","section","activate","_activate","show","_show","refresh","enable","disable","current","create","$sectionPanel","get","load","clearContentBlock","$contentblock","loadContentBlock","updateContentBlock","cb","response","error","versionWarning","slide","hideWarning","disableAutocomplete","enablePasswordReveal","disableAutofocus","conf","login","$listElt","$dependsOnSelectbox","$wrapper","_isHiddenDependsOn","toggle","getSupportedTypes","hasAnyDependency","fromMultiple","$secondarySelect","existingOption","allowedOptions","option","newVal","existingAvailableValue","input","isSelect2","filterSelect2Options","filterSelectOptions","method","noToken","propertyUri","parentListValues","processFiltering","$secondaryPropsList","$primaryProp","$secondaryList","clearSecondary","$select2Chosen","$selectElt","$inputElt","primaryPropsMap","$secondaryProps","moveSecondaryProperty","toggleDisableSecondary","addPrimaryPropertyListener","filterSecondaryValues","dependsOn","secondaryProps","successFeedback","failureFeedback","$field","val","$fieldCopy","$button","$label","$fieldBox","first","after","$modeToggle","notSelector","$radioList","$inputs","$block","$icon","$propertyContainer","hasAlreadyProperties","$properties","$editIcon","$editContainer","$indexIcon","_hideProperties","_hideIndexes","$propertyMode","_showProperties","_showIndexes","$property","_initializeCopyToClipboard","_wrapPropsInContainer","_upgradeButtons","_toggleModeBtn","_showErrors","_checkRegularPropertyLabels","$error","$currentTarget","elt","propertiesTypes","re","$parentHeadingLabel","$editBlockLabel","getPropertyContainer","add","$existingProperties","script","postRenderProps","remove","uri","classUri","successCallback","config","featuresVisibilityList","featuresKeys","logger","buildRegexp","lookupPath","isVisible","matchingPath","exactMatch","timeout","immediate","elem","className","condition","findParent","numInput","wrapper","date1","getDaysInMonth","parseConfig","setupLocale","setupInputs","setupDates","setupHelperFunctions","build","bindEvents","setHoursFromDate","updateValue","setCalendarWidth","positionCalendar","triggerEvent","daysWidth","setDefaultTime","timeWrapper","setHoursFromInputs","hours","limitMinHours","compareDates","limitMaxHours","minutes","seconds","setHours","date","min_hr","min_minutes","max_hr","max_minutes","changeYear","handler","setupMobile","bind","onMouseOver","updateTime","triggerChange","incrementNumInput","buildDays","toggleClass","dayElement","dateIsEnabled","isDateSelected","isDateInRange","targetNode","startMonth","endMonth","m","month","startIndex","endIndex","c","givenMonth","loopDelta","numMonthDays","isEnabled","focusOnDay","dayFocused","startElem","getFirstAvailableDay","getNextAvailableDay","focusOnDayElem","firstOfMonth","prevMonthDays","daysInMonth","dayNumber","days","dayContainer","clearNode","frag","d","monthNavFragment","monthElement","yearInput","yearElement","currentMonth","buildMonths","updateNavigationCurrentMonth","separator","hourInput","military2ampm","updateWeekdays","firstDayOfWeek","weekdays","weekWrapper","weekNumbers","setDefaultHours","triggerChangeEvent","h","eventTarget_1","isCalendarElement","isInput","lostFocus","isIgnored","isNewYear","dateToCheck","bool","allowInput","allowKeydown","allowInlineKeydown","isTimeObj","focusAndClose","selectDate","changeMonth","elems","hoverDate","lastChild","containsDisabled","minRange","t","maxRange","prevMonth","_loop_1","dayElem","timestamp","outOfRange","initialDate","isBetween","wasOpen","dateObj","inverseDateObj","redraw","boolOpts","userConfig","formats","flatpickr","HOOKS","pluginConf","concat","tokenRegex","positionElement","calendarHeight","distanceFromBottom","inputBounds","showOnTop","rightMost","centerMost","bodyWidth","centerLeft","centerBefore","centerAfter","centerIndex","centerStyle","isSelectable","day","selectedDate","shouldChangeMonth","selectedIndex","single","CALLBACKS","dates","setSelectedDate","jumpToDate","slice","rule","to","filter","preloadedDate","monthToStr","join","isPrevMonth","isNextMonth","min","isKeyDown","newValue","max","int","isMinuteElem","isHourElem","l10n","locale","showMonths","nodes","call","instances","__assign","s","defaults","_disable","_enable","altFormat","altInput","altInputClass","animate","ariaDateFormat","clickOpens","closeOnSelect","conjunction","dateFormat","defaultHour","defaultMinute","defaultSeconds","disableMobile","enableSeconds","enableTime","errorHandler","getWeek","hourIncrement","ignoredFocusElements","inline","minuteIncrement","mode","nextArrow","noCalendar","now","onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition","plugins","prevArrow","shorthandCurrentMonth","static","time_24hr","wrap","english","shorthand","longhand","months","ordinal","rangeSeparator","weekAbbreviation","scrollTitle","toggleTitle","amPM","yearAriaLabel","pad","arrayify","do_nothing","revFormat","D","F","G","H","J","K","M","S","U","W","Y","Z","j","n","u","w","createDateFormatter","frmt","createDateParser","date_orig","parsedDate","format","datestr","timeless","matched","token_1","isBackSlash","escaped","regexStr","match","duration","DAY","args","_i","_a","HTMLCollection","HTMLElement","_flatpickr","en","jQuery","Date","fp","l10ns","Arabic","fp$1","Austria","fp$2","Azerbaijan","fp$3","Belarusian","fp$4","Bulgarian","fp$5","Bangla","fp$6","Catalan","fp$7","Czech","fp$8","Welsh","fp$9","Danish","fp$a","German","fp$b","Esperanto","fp$c","Spanish","fp$d","Estonian","fp$e","Persian","fp$f","Finnish","fp$g","Faroese","fp$h","French","fp$i","Greek","fp$j","Hebrew","fp$k","Hindi","fp$l","Croatian","fp$m","Hungarian","fp$n","Indonesian","fp$o","Icelandic","fp$p","Italian","fp$q","Japanese","fp$r","Korean","fp$s","Khmer","fp$t","Kazakh","fp$u","Lithuanian","fp$v","Latvian","fp$w","Macedonian","fp$x","Mongolian","fp$y","Malaysian","fp$z","Burmese","fp$A","Dutch","fp$B","Norwegian","fp$C","Punjabi","fp$D","Polish","fp$E","Portuguese","fp$F","Romanian","fp$G","Russian","fp$H","Sinhala","fp$I","Slovak","fp$J","Slovenian","fp$K","Albanian","fp$L","Serbian","fp$M","Swedish","fp$N","Thai","fp$O","Turkish","fp$P","Ukrainian","fp$Q","Vietnamese","fp$R","Mandarin","fp$S","MandarinTraditional","ar","at","az","be","bg","bn","cat","cs","cy","da","de","eo","es","et","fa","fi","fo","fr","gr","he","hi","hr","hu","is","it","ja","ko","km","kz","lt","lv","mk","mn","ms","my","nl","no","pa","pl","pt","ro","ru","si","sk","sl","sq","sr","sv","th","tr","uk","vn","zh","zh_tw","exports","module","helpers","encode","ckeditor","ckConfigurator","dateTimePicker","confirmDialog","request","urlUtil","getUrl","UiForm","htmlEditors","secondaryPropertiesCheckbox","notEmptyCheckbox","testedUrl","settings","authoringRequestSuffix","initRendering","$toolBar","$authoringBtn","$testAuthoringBtn","$rdfImportForm","$rdfExportForm","$authoringBtnParent","display","float","closest","find","addClass","getFormData","formData","clazz","properties","indexes","$global","isArray","found","$index","initElements","$uriElm","$classUriElm","$form","editor","replaceField","setup","controlButtons","$checker","regexpId","initOntoForms","extension","typeSelectVal","listSelectVal","dependencies","dependsOnValue","dependantPropName","resolve","reject","buttons","labels","ok","cancel","buildClassPropertiesAuthoringURL","$groupNode","$this","propertyListSelect","$propValuesSelect","propValue","listUri","dependsId","$dependsOnSelect","$typeSelect","$listSelect","propertyUriToSend","class_uri","list_uri","property_uri","backendValues","accumulator","currentValues","values","haveSameData","showPropertyList","fieldIndex","rangeSelect","showDependsOnProperty","clearPropertyListValues","showPropertyListValues","filterDependsOnProperty","tabId","$tabContainer","$wantedPanel","responseHtml","$otherPanel","$myPanel","infoUrl","$_this","$prependTo","$propertyindex","propertyindex","$toRemove","$btn","$propertyListValues","$propertyType","initTranslationForm","formElt","submitForm","serialize","bindings","actionBinder","register","exec","permissionStore","supportedRights","permissionsManager","setSupportedRights","getRights","isSupported","addPermissions","permissions","getPermissions","hasPermission","clear","isContextAllowed","requiredRights","requiredParameter","parameterValue","getResourceAccessMode","rights","count","acc","applyClassSignatures","resources","signature","defaultConfig","getClasses","getResources","getClassProperties","copyTo","moveTo","computeNodeAccessMode","currentRights","results","computePermissions","Promise","destinationClassUri","ids","binder","resourceProviderFactory","destinationSelectorFactory","taskQueue","messages","confirmMove","emptyPanel","commonActions","currentSection","actionContext","label","parent","cssClass","confirmMessage","classes","actionContexts","_moveNode","wideDifferenciator","$response","visible","resourceProvider","preventSelection","then","catch","refreshTree","taskCreationData","taskCreationUrl","button","tree","rootClassUri","selectedUri","selectedData","actionName","icon","confirm","$node","uriList","failed","actions","resourceContext","actionManager","$scope","_lookup","binding","multiple","hidden","_bind","actionSelector","_listenUpdates","treeSelector","updateContext","hasClasses","hasInstances","action","updateState","otherAction","err","getBy","$body","$navContainer","$nav","$mainMenu","$settingsMenu","navIsOversized","expandedMinWidth","_width","checkHeight","searchComponent","$searchBtn","$searchInput","$resultsBtn","createSearchModalInstance","getItem","criterias","placeholder","isResultPage","searchModalInstance","classesUrl","classMappingUrl","statusUrl","searchOnInit","hideResourceSelector","hideCriteria","updateViewAfterSeachStoreUpdate","$resultsCounterContainer","$searchAreaButtonsContainer","storedSearchResults","searchStore","panelId","store","initializeEvents","manageSearchStoreUpdate","pageRange","nodeTypes","more","addClassToNode","nodeId","async","treeData","exclude","possibleActions","moreNode","class","serverParams","perspective","hideInstances","limit","treeState","setTreeState","rollback","addnode","parentNode","items","removenode","selectnode","openbranch","treeOptions","opts","ui","types","renameable","deletable","creatable","draggable","ondelete","beforedata","lastSelected","ondata","computeSelectionAccess","needMore","addTitle","onload","$firstClass","$firstInstance","selectNode","nodeSelection","selectNodeById","oninit","beforeopen","lastOpened","onselect","classActions","$parentNode","nodeContext","not","removeClass","loadMore","executePossibleAction","treeStore","onmove","refNode","setUpTree","loadNode","sectionManager","filters","defaultNode","preloadNode","resourceSelectorFactory","searchPlaceholder","selectionMode","selectClass","changeSelectionMode","query","length","getContext","defaultProvider","treeProviderRegistry","providerExists","providerToLoad","$visibleActionBarBox","$visibleActionBar","$mainButtons","$visibleButtons","$requiredRows","idealHeight","parseInt","footerHeight","actionBarHeight","$tabs","tabHeight","containerHeight","$contentBlock","$tree","treeHeight","$window","$footer","setHeights","sectionTree","treeActions","treeUrl","treeType","treeProvider","handleError","nav","search","sectionHeight","$treeElt","$actionBar","uiForm","feedbackType","$formSourceList","$formRadioOptions","$selectedRadio","$formTextArea","$formErrors","tooltipOptions","closeOnClickOutside","ext","deps","progressConsole","$tr","$orig","styleTables","noAvailableExtensions","indexCurrentToInstall","hasNextExtensionToInstall","installError","toInstall","postInstall","installNextExtension","$noAvailableExtElement","ext_installed","percentByExt","$installButton","$modalContainer","disableEscape","disableClosing","$login","trimmedValue","checkLogin","users","runUserAction","dialogConfirm","editUser","removeUser","lockUser","unlockUser","$userList","edit","lock","unlock","lockBtn","unlockBtn","row","paginationStrategyBottom","model","sortable","reqFeedback","tests","test","String","testCounter","fold","$content","$top","PseudoStorage","ServiceApi","$frame","callUrl","isCORSAllowed","connected","frame","StateStorage","UserInfoService","service","createMeta","displayed","extractMeta","DATA","countClass","setServerParameter","getTree","getMeta","setMeta","getPaginateActionNodes","returnValue","showPaginate","TREE_OBJ","hidePaginate","refreshPaginate","getClassUri","parents","callGetSectionActions","NODE","default","theme_name","theme_path","beforecheck","beforeuncheck","indice","onopen","onchange","servOptions","$NODE","$nodeParent","checkbox","convertDataWithPermissions","converted","children","filteredChildren","checkPermissionsRecursively","recursiveCheck","dataObj","removeHiddenNodes","hiddenNodes","trace","paginateInstances","instancesLeft","subclasses","each","getChecked","unchecked","saveData","toSend","classUriField","uriField","complete"],"sources":["bootstrap.js","../i18n.js","../lib/dompurify/purify.js","../layout/logout-event.js","../controller/app.js","../layout/loading-bar.js","../helpers.js","../lib/gamp/gamp.js","../lib/popper/popper.js","../lib/popper/tooltip.js","../lib/polyfill/svg4everybody/svg4everybody.js","../uikitLoader.js","../controller/backoffice.js","../controller/entry.js","../lock.js","../layout/generisRouter.js","../layout/section.js","../controller/Lock/locked.js","../layout/version-warning.js","../controller/login.js","../form/depends-on-property.js","../form/filter-selects-values.js","../form/secondary-property.js","../form/post-render-props.js","../form/property.js","../services/features.js","../lib/flatpickr/flatpickr.js","../lib/flatpickr/l10n/index.js","../lib/flatpickr/flatpickr!css","../uiForm.js","../layout/actions/binder.js","../layout/permissions.js","../provider/resources.js","../layout/actions/common.js","../layout/actions.js","../layout/nav.js","../layout/search.js","../layout/tree/provider/jstree.js","../layout/tree/provider/resourceSelector.js","../layout/tree/loader.js","../layout/section-height.js","../controller/main.js","../controller/passwordRecovery.js","../controller/routes.js","../controller/security/cspHeaderForm.js","../controller/settings/extensionManager.js","../users.js","../controller/users/add.js","../controller/users/disable-edit.js","../controller/users/index.js","../layout/requirement-check.js","../report.js","../serviceApi/PseudoStorage.js","../serviceApi/ServiceApi.js","../serviceApi/StateStorage.js","../serviceApi/UserInfoService.js","../generis.tree.js","../generis.tree.select.js","onLayerEnd0.js","module-create.js"],"sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016-2018 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * Bootstrap the app, start the entry controller\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\n(function(){\n    'use strict';\n\n\n\n    var loaderScript = document.getElementById('amd-loader');\n    var configUrl = loaderScript.getAttribute('data-config');\n    var bundle  = loaderScript.getAttribute('data-bundle');\n\n    var loadController = function loadController(){\n        var controllerOptions = {};\n        var controllerPath = loaderScript.getAttribute('data-controller');\n        var params = loaderScript.getAttribute('data-params');\n        try{\n            controllerOptions = JSON.parse(params);\n        } catch(err){\n            controllerOptions = {};\n        }\n        window.require([controllerPath], function(controller) {\n            var startController = function startController(){\n                if(!window.started){\n                    window.started = true;\n                    controller.start(controllerOptions);\n                }\n            };\n            document.addEventListener('readystatechange', startController, false);\n            if (document.readyState === 'complete') {\n                startController();\n            }\n        });\n    };\n\n    //always start to load the config\n    window.require([configUrl], function() {\n\n        //define the global loading mechanism\n        if(!window.loadBundles){\n            //keep tracl of loaded bundles, even if require does it,\n            //this prevent some unecessary cycles\n            window.loaded = {};\n\n            /**\n             * Loading entry point for inter bundle dependency,\n             * always take the bundles from the params and window.bundles\n             * @param {String[]} [bundles] - an optional list of bundle to load\n             */\n            window.loadBundles = function loadBundles(bundles){\n                bundles = bundles || [];\n                bundles = bundles.concat(window.bundles)\n                bundles = bundles.filter( function(item, index){\n                    return item && bundles.indexOf(item) === index && window.loaded[item] !== true;\n                });\n                require(bundles, function(){\n                    bundles.forEach( function( item ) {\n                        window.loaded[item] = true;\n                    });\n                    loadController();\n                });\n            }\n        }\n\n        if(bundle || (window.bundles && window.bundles.length)) {\n            window.loadBundles([bundle]);\n        } else {\n            loadController();\n        }\n    });\n})();\n\ndefine(\"loader/bootstrap\", function(){});\n\n","define('i18n',['json!i18ntr/messages.json', 'core/format'], function(i18nTr, format){\n    'use strict';\n\n    var translations = i18nTr.translations;\n\n    /**\n     * Common translation method.\n     * @see /locales/#lang#/messages_po.js\n     *\n     * @param {String} message should be the string in the default language (usually english) used as the key in the gettext translations\n     * @returns {String} translated message\n     */\n    return function __(message){\n        var localized =  translations[message] || message;\n\n        if(arguments.length > 1){\n            localized = format.apply(null, [localized].concat([].slice.call(arguments, 1)));\n        }\n\n        return localized;\n    };\n});\n\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define('lib/dompurify/purify',factory) :\n\t(global.DOMPurify = factory());\n}(this, (function () { 'use strict';\n\nvar freeze$1 = Object.freeze || function (x) {\n  return x;\n};\n\nvar html = freeze$1(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n// SVG\nvar svg = freeze$1(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'audio', 'canvas', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'video', 'view', 'vkern']);\n\nvar svgFilters = freeze$1(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\nvar mathMl = freeze$1(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']);\n\nvar text = freeze$1(['#text']);\n\nvar freeze$2 = Object.freeze || function (x) {\n  return x;\n};\n\nvar html$1 = freeze$2(['accept', 'action', 'align', 'alt', 'autocomplete', 'background', 'bgcolor', 'border', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'coords', 'crossorigin', 'datetime', 'default', 'dir', 'disabled', 'download', 'enctype', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'integrity', 'ismap', 'label', 'lang', 'list', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'multiple', 'name', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns']);\n\nvar svg$1 = freeze$2(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'tabindex', 'targetx', 'targety', 'transform', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n\nvar mathMl$1 = freeze$2(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n\nvar xml = freeze$2(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\nvar hasOwnProperty = Object.hasOwnProperty;\nvar setPrototypeOf = Object.setPrototypeOf;\n\nvar _ref$1 = typeof Reflect !== 'undefined' && Reflect;\nvar apply$1 = _ref$1.apply;\n\nif (!apply$1) {\n  apply$1 = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\n/* Add properties to a lookup table */\nfunction addToSet(set, array) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  var l = array.length;\n  while (l--) {\n    var element = array[l];\n    if (typeof element === 'string') {\n      var lcElement = element.toLowerCase();\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!Object.isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n\n/* Shallow clone an object */\nfunction clone(object) {\n  var newObject = {};\n  var property = void 0;\n  for (property in object) {\n    if (apply$1(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n  return newObject;\n}\n\nvar seal = Object.seal || function (x) {\n  return x;\n};\n\nvar MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nvar ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\nvar DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nvar ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nvar IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nvar IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nvar ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g // eslint-disable-line no-control-regex\n);\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar _ref = typeof Reflect !== 'undefined' && Reflect;\nvar apply = _ref.apply;\n\nvar arraySlice = Array.prototype.slice;\nvar freeze = Object.freeze;\n\nvar getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\nvar _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n  if ((typeof trustedTypes === 'undefined' ? 'undefined' : _typeof(trustedTypes)) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  var suffix = null;\n  var ATTR_NAME = 'data-tt-policy-suffix';\n  if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML: function createHTML(html$$1) {\n        return html$$1;\n      }\n    });\n  } catch (e) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\n\nfunction createDOMPurify() {\n  var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n  var DOMPurify = function DOMPurify(root) {\n    return createDOMPurify(root);\n  };\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = '1.0.9';\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  var originalDocument = window.document;\n  var useDOMParser = false;\n  var removeTitle = false;\n\n  var document = window.document;\n  var DocumentFragment = window.DocumentFragment,\n      HTMLTemplateElement = window.HTMLTemplateElement,\n      Node = window.Node,\n      NodeFilter = window.NodeFilter,\n      _window$NamedNodeMap = window.NamedNodeMap,\n      NamedNodeMap = _window$NamedNodeMap === undefined ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n      Text = window.Text,\n      Comment = window.Comment,\n      DOMParser = window.DOMParser,\n      TrustedTypes = window.TrustedTypes;\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n\n  if (typeof HTMLTemplateElement === 'function') {\n    var template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  var trustedTypesPolicy = _createTrustedTypesPolicy(TrustedTypes, originalDocument);\n  var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n\n  var _document = document,\n      implementation = _document.implementation,\n      createNodeIterator = _document.createNodeIterator,\n      getElementsByTagName = _document.getElementsByTagName,\n      createDocumentFragment = _document.createDocumentFragment;\n  var importNode = originalDocument.importNode;\n\n\n  var hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = implementation && typeof implementation.createHTMLDocument !== 'undefined' && document.documentMode !== 9;\n\n  var MUSTACHE_EXPR$$1 = MUSTACHE_EXPR,\n      ERB_EXPR$$1 = ERB_EXPR,\n      DATA_ATTR$$1 = DATA_ATTR,\n      ARIA_ATTR$$1 = ARIA_ATTR,\n      IS_SCRIPT_OR_DATA$$1 = IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE$$1 = ATTR_WHITESPACE;\n  var IS_ALLOWED_URI$$1 = IS_ALLOWED_URI;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n\n  var ALLOWED_TAGS = null;\n  var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(svgFilters), _toConsumableArray(mathMl), _toConsumableArray(text)));\n\n  /* Allowed attribute names */\n  var ALLOWED_ATTR = null;\n  var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(mathMl$1), _toConsumableArray(xml)));\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  var FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  var FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  var ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  var ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for jQuery's $() factory? */\n  var SAFE_FOR_JQUERY = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  var SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  var WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  var SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  var FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  var RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  var RETURN_DOM_FRAGMENT = false;\n\n  /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n   * `Node` is imported into the current `Document`. If this flag is not enabled the\n   * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n   * DOMPurify. */\n  var RETURN_DOM_IMPORT = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  var SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  var KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  var IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  var USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  var FORBID_CONTENTS = addToSet({}, ['audio', 'head', 'math', 'script', 'style', 'template', 'svg', 'video']);\n\n  /* Tags that are safe for data: URIs */\n  var DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image']);\n\n  /* Attributes safe for values like \"javascript:\" */\n  var URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'summary', 'title', 'value', 'style', 'xmlns']);\n\n  /* Keep a reference to config to pass to hooks */\n  var CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  var formElement = document.createElement('form');\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  var _parseConfig = function _parseConfig(cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || (typeof cfg === 'undefined' ? 'undefined' : _typeof(cfg)) !== 'object') {\n      cfg = {};\n    }\n    /* Set configuration parameters */\n    ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_JQUERY = cfg.SAFE_FOR_JQUERY || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n\n    IS_ALLOWED_URI$$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$$1;\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(text)));\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html);\n        addToSet(ALLOWED_ATTR, html$1);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl);\n        addToSet(ALLOWED_ATTR, mathMl$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  var _forceRemove = function _forceRemove(node) {\n    DOMPurify.removed.push({ element: node });\n    try {\n      node.parentNode.removeChild(node);\n    } catch (err) {\n      node.outerHTML = emptyHTML;\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  var _removeAttribute = function _removeAttribute(name, node) {\n    try {\n      DOMPurify.removed.push({\n        attribute: node.getAttributeNode(name),\n        from: node\n      });\n    } catch (err) {\n      DOMPurify.removed.push({\n        attribute: null,\n        from: node\n      });\n    }\n    node.removeAttribute(name);\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  var _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    var doc = void 0;\n    var leadingWhitespace = void 0;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      var matches = dirty.match(/^[\\s]+/);\n      leadingWhitespace = matches && matches[0];\n      if (leadingWhitespace) {\n        dirty = dirty.slice(leadingWhitespace.length);\n      }\n    }\n\n    /* Use DOMParser to workaround Firefox bug (see comment below) */\n    if (useDOMParser) {\n      try {\n        doc = new DOMParser().parseFromString(dirty, 'text/html');\n      } catch (err) {}\n    }\n\n    /* Remove title to fix a mXSS bug in older MS Edge */\n    if (removeTitle) {\n      addToSet(FORBID_TAGS, ['title']);\n    }\n\n    /* Otherwise use createHTMLDocument, because DOMParser is unsafe in\n    Safari (see comment below) */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createHTMLDocument('');\n      var _doc = doc,\n          body = _doc.body;\n\n      body.parentNode.removeChild(body.parentNode.firstElementChild);\n      body.outerHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    }\n\n    if (leadingWhitespace) {\n      doc.body.insertBefore(document.createTextNode(leadingWhitespace), doc.body.childNodes[0] || null);\n    }\n\n    /* Work on whole document or just its body */\n    return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n  };\n\n  // Firefox uses a different parser for innerHTML rather than\n  // DOMParser (see https://bugzilla.mozilla.org/show_bug.cgi?id=1205631)\n  // which means that you *must* use DOMParser, otherwise the output may\n  // not be safe if used in a document.write context later.\n  //\n  // So we feature detect the Firefox bug and use the DOMParser if necessary.\n  //\n  // MS Edge, in older versions, is affected by an mXSS behavior. The second\n  // check tests for the behavior and fixes it if necessary.\n  if (DOMPurify.isSupported) {\n    (function () {\n      try {\n        var doc = _initDocument('<svg><p><style><img src=\"</style><img src=x onerror=1//\">');\n        if (doc.querySelector('svg img')) {\n          useDOMParser = true;\n        }\n      } catch (err) {}\n    })();\n    (function () {\n      try {\n        var doc = _initDocument('<x/><title>&lt;/title&gt;&lt;img&gt;');\n        if (doc.querySelector('title').innerHTML.match(/<\\/title/)) {\n          removeTitle = true;\n        }\n      } catch (err) {}\n    })();\n  }\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  var _createIterator = function _createIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, function () {\n      return NodeFilter.FILTER_ACCEPT;\n    }, false);\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  var _isClobbered = function _isClobbered(elm) {\n    if (elm instanceof Text || elm instanceof Comment) {\n      return false;\n    }\n    if (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function') {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  var _isNode = function _isNode(obj) {\n    return (typeof Node === 'undefined' ? 'undefined' : _typeof(Node)) === 'object' ? obj instanceof Node : obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && typeof obj.nodeType === 'number' && typeof obj.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    hooks[entryPoint].forEach(function (hook) {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  var _sanitizeElements = function _sanitizeElements(currentNode) {\n    var content = void 0;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    var tagName = currentNode.nodeName.toLowerCase();\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName: tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Keep content except for black-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName] && typeof currentNode.insertAdjacentHTML === 'function') {\n        try {\n          var htmlToInsert = currentNode.innerHTML;\n          currentNode.insertAdjacentHTML('AfterEnd', trustedTypesPolicy ? trustedTypesPolicy.createHTML(htmlToInsert) : htmlToInsert);\n        } catch (err) {}\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Convert markup to cover jQuery behavior */\n    if (SAFE_FOR_JQUERY && !currentNode.firstElementChild && (!currentNode.content || !currentNode.content.firstElementChild) && /</g.test(currentNode.textContent)) {\n      DOMPurify.removed.push({ element: currentNode.cloneNode() });\n      if (currentNode.innerHTML) {\n        currentNode.innerHTML = currentNode.innerHTML.replace(/</g, '&lt;');\n      } else {\n        currentNode.innerHTML = currentNode.textContent.replace(/</g, '&lt;');\n      }\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = content.replace(MUSTACHE_EXPR$$1, ' ');\n      content = content.replace(ERB_EXPR$$1, ' ');\n      if (currentNode.textContent !== content) {\n        DOMPurify.removed.push({ element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n\n    /* Sanitize attribute content to be template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      value = value.replace(MUSTACHE_EXPR$$1, ' ');\n      value = value.replace(ERB_EXPR$$1, ' ');\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && DATA_ATTR$$1.test(lcName)) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && ARIA_ATTR$$1.test(lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      return false;\n\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (IS_ALLOWED_URI$$1.test(value.replace(ATTR_WHITESPACE$$1, ''))) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if ((lcName === 'src' || lcName === 'xlink:href') && lcTag !== 'script' && value.indexOf('data:') === 0 && DATA_URI_TAGS[lcTag]) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (ALLOW_UNKNOWN_PROTOCOLS && !IS_SCRIPT_OR_DATA$$1.test(value.replace(ATTR_WHITESPACE$$1, ''))) {\n      // This attribute is safe\n      /* Check for binary attributes */\n      // eslint-disable-next-line no-negated-condition\n    } else if (!value) {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    } else {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} node to sanitize\n   */\n  // eslint-disable-next-line complexity\n  var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    var attr = void 0;\n    var value = void 0;\n    var lcName = void 0;\n    var idAttr = void 0;\n    var l = void 0;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    var attributes = currentNode.attributes;\n\n    /* Check if we have attributes; if not we might have a text node */\n\n    if (!attributes) {\n      return;\n    }\n\n    var hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      var _attr = attr,\n          name = _attr.name,\n          namespaceURI = _attr.namespaceURI;\n\n      value = attr.value.trim();\n      lcName = name.toLowerCase();\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n\n      /* Remove attribute */\n      // Safari (iOS + Mac), last tested v8.0.5, crashes if you try to\n      // remove a \"name\" attribute from an <img> tag that has an \"id\"\n      // attribute at the time.\n      if (lcName === 'name' && currentNode.nodeName === 'IMG' && attributes.id) {\n        idAttr = attributes.id;\n        attributes = apply(arraySlice, attributes, []);\n        _removeAttribute('id', currentNode);\n        _removeAttribute(name, currentNode);\n        if (attributes.indexOf(idAttr) > l) {\n          currentNode.setAttribute('id', idAttr.value);\n        }\n      } else if (\n      // This works around a bug in Safari, where input[type=file]\n      // cannot be dynamically set after type has been removed\n      currentNode.nodeName === 'INPUT' && lcName === 'type' && value === 'file' && (ALLOWED_ATTR[lcName] || !FORBID_ATTR[lcName])) {\n        continue;\n      } else {\n        // This avoids a crash in Safari v9.0 with double-ids.\n        // The trick is to first set the id to be empty and then to\n        // remove the attribute\n        if (name === 'id') {\n          currentNode.setAttribute(name, '');\n        }\n        _removeAttribute(name, currentNode);\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Is `value` valid for this attribute? */\n      var lcTag = currentNode.nodeName.toLowerCase();\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n        DOMPurify.removed.pop();\n      } catch (err) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    var shadowNode = void 0;\n    var shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    var body = void 0;\n    var importedNode = void 0;\n    var currentNode = void 0;\n    var oldNode = void 0;\n    var returnNode = void 0;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    if (!dirty) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw new TypeError('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw new TypeError('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    if (IN_PLACE) {\n      /* No special handling necessary for in-place sanitization */\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!-->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else {\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : emptyHTML;\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (RETURN_DOM_IMPORT) {\n        /* AdoptNode() is not used because internal state is not reset\n               (e.g. the past names map of a HTMLFormElement), this is safe\n               in theory but we would rather not risk another attack vector.\n               The state that is cloned by importNode() is explicitly defined\n               by the specs. */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    return trustedTypesPolicy ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    var lcTag = tag.toLowerCase();\n    var lcName = attr.toLowerCase();\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    hooks[entryPoint].push(hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint].pop();\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nvar purify = createDOMPurify();\n\nreturn purify;\n\n})));\n//# sourceMappingURL=purify.js.map\n;\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016-2017 (original work) Open Assessment Technologies SA;\n *\n */\n\n/**\n * Notify user about logout\n *\n * @author Alexander Zagovorichev <zagovorichev@1pt.com>\n */\ndefine('layout/logout-event',['jquery', 'lodash', 'i18n', 'util/url', 'ui/dialog/alert'], function (\n    $,\n    _,\n    __,\n    url,\n    alert\n) {\n    'use strict';\n\n    var defaults = {\n        message: __('You have been logged out. Please login again'),\n        redirectUrl: url.route('logout', 'Main', 'tao')\n    };\n\n    /**\n     * @param {Object} options\n     * @param {String} [options.message] - Message to be displayed before redirect\n     * @param {String} [options.redirectUrl] - Target URI\n     */\n    return function logoutEvent(options) {\n        options = _.defaults(options || {}, defaults);\n        alert(options.message, function () {\n            window.location = options.redirectUrl;\n        });\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('controller/app',[\n    'lodash',\n    'jquery',\n    'core/historyRouter',\n    'core/logger',\n    'core/eventifier',\n    'core/statifier',\n    'util/url',\n    'ui/feedback',\n    'layout/logout-event'\n], function (_, $, historyRouterFactory, loggerFactory, eventifier, statifier, urlUtil, feedback, logoutEvent) {\n    'use strict';\n\n    /**\n     * Shared router that will manage the page for each controller\n     * @type {historyRouter}\n     */\n    var historyRouter;\n\n    /**\n     *\n     */\n    var redirectUrl;\n\n    /**\n     * Creates a logger for the app\n     * @type {logger}\n     */\n    var appLogger = loggerFactory('controller/app');\n\n    /**\n     * Defines an application controller that will manage the routes through the history.\n     * It will start by dispatching the current location, in order to keep history consistency.\n     * To properly use this application controller you need to take care of it in each controller\n     * that is intended to be routed through the history. See samples below.\n     *\n     * @example\n     *  // Defines a controller that is routable through the history\n     *  return {\n     *      // Will be called each time the history routes the action to this controller\n     *      start: function start() {\n     *          // Take care of the application controller by applying a hook on each routable links\n     *          return appController.apply('.link');\n     *\n     *          // You can also be notified of a change in the route,\n     *          // and release some resources as this controller will be destroyed.\n     *          // Pay attention to the event namespace, it must be unique.\n     *          appController.on('change.myController', function() {\n     *              // Release the event, as this controller will be destroyed\n     *              appController.off('change.myController');\n     *\n     *              // Release resources\n     *              ...\n     *          });\n     *\n     *          // Do the stuff of the controller\n     *          ...\n     *\n     *          // If you need to change the current route you can rely on the router brought by the appController\n     *          appController.getRouter().redirect(url);\n     *  };\n     *\n     * @typedef {appController}\n     */\n    var appController = eventifier(statifier({\n        /**\n         * App controller entry point: set up the router.\n         * @param {Object} options\n         * @param {String} [options.forwardTo] - an optional route of a client controller to forward\n         * @param {String} [options.redirectUrl] - an optional url to redirect client on authorisation errors\n         */\n        start: function start(options){\n            var currentRoute;\n\n            // all links that are tagged with the \"router\" class are dispatched using the history router\n            appController.apply();\n\n            // dispatch the current route\n            if (options && options.forwardTo) {\n                currentRoute = options.forwardTo;\n            } else {\n                currentRoute = window.location + '';\n            }\n\n            if (options && options.redirectUrl) {\n                redirectUrl = options.redirectUrl || {};\n            }\n            historyRouter.forward(currentRoute);\n        },\n\n        /**\n         * Catch all links below the target, when they have the provided selector,\n         * then dispatch them using the history router.\n         * @param {String} [selector] - The CSS signature of links to catch (default: \".router\")\n         * @param {String|HTMLElement|jQuery} [target] - The container from which catch links (default: document)\n         * @returns {appController}\n         */\n        apply: function apply(selector, target) {\n            selector = selector || '.router';\n            target = target || document;\n\n            $(target).off('click.appController').on('click.appController', selector, function (e) {\n                var $elt, href;\n\n                // prevent the browser to actually change the page from this link\n                e.preventDefault();\n\n                // try to get the target of the link\n                $elt = $(this);\n                href = $elt.attr('href');\n                if (!href) {\n                    href = $('[href]:first-child', $elt).attr('href');\n                }\n\n                // use the history router to change the current view\n                // the called controller will have in charge to get the data and update the view accordingly\n                if (href) {\n                    historyRouter.redirect(href);\n                }\n            });\n\n            return this;\n        },\n\n        /**\n         * Exposes the router so other controllers can dispatch a route\n         *\n         * @returns {router} the router\n         */\n        getRouter: function getRouter() {\n            return historyRouter;\n        },\n\n        /**\n         * Exposes the logger so other controllers can log application level events\n         *\n         * @returns {logger} the router\n         */\n        getLogger: function getLogger() {\n            return appLogger;\n        },\n\n        /**\n         * Catches errors\n         * @param {Object} err\n         * @returns {appController}\n         */\n        onError: function onError(err) {\n            var message = err && err.message || err;\n            var options = {message: message};\n\n            appLogger.error(err);\n            if (err.code === 403){\n                options = _.defaults(options, redirectUrl ||  {});\n                logoutEvent(options);\n            }else{\n                feedback().error(message);\n            }\n            return this;\n        }\n    }));\n\n    // setup the history router\n    historyRouter = historyRouterFactory()\n        .on('dispatching', function (url) {\n            appController.setState('dispatching');\n            appController.trigger('change', url);\n        })\n        .on('dispatched', function (url) {\n            appController.setState('dispatching', false);\n            appController.trigger('started', url);\n        });\n\n    return appController;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n */\n\n/**\n * Loading bar a.k.a. Knight Rider\n *\n * @author dieter <dieter@taotesting.com>\n */\ndefine('layout/loading-bar',['jquery'],\n    function ($) {\n        'use strict';\n\n        var $loadingBar = $('.loading-bar'),\n            originalHeight = $loadingBar.height(),\n            $win = $(window),\n            $doc = $(document),\n            $contentWrap = $('.content-wrap'),\n            headerElements = {\n                $versionWarning: $contentWrap.find('.version-warning'),\n                $header: $contentWrap.find('header:first()')\n            },\n            headerHeight = getHeaderHeight(headerElements);\n\n        /**\n         * the TAO header can have three different forms\n         * 1. version warning on alpha/beta + main navi\n         * 2. main navi only on regular version\n         * 3. nothing in the case of LTI\n         *\n         * @param headerElements\n         */\n        function getHeaderHeight(headerElements) {\n            var $element;\n            headerHeight = 0;\n            for ($element in headerElements) {\n                if (headerElements[$element].length && headerElements[$element].is(':visible')) {\n                    headerHeight += headerElements[$element].outerHeight();\n                }\n            }\n            return headerHeight;\n        }\n\n        /**\n         * Update height of cover element\n         */\n        function updateHeight() {\n            var loadingBarHeight = $doc.height();\n            if (!$loadingBar.hasClass('loading')) {\n                return;\n            }\n            // status of height would change for instance when version warning is hidden\n            headerHeight = getHeaderHeight(headerElements);\n\n            if (headerHeight <= $win.scrollTop()) {\n                $loadingBar.addClass('fixed');\n            } else {\n                $loadingBar.removeClass('fixed');\n            }\n\n            if ($loadingBar.hasClass('loadingbar-covered')) {\n                if (window.devicePixelRatio !== 1) {\n                    loadingBarHeight--;\n                }\n                $loadingBar.height(loadingBarHeight);\n            } else {\n                $loadingBar.height('');\n            }\n        }\n\n        $win.on('scroll.loadingbar', function () {\n            updateHeight();\n        });\n\n        return {\n            /**\n             * Show loading bar\n             * @param {Boolean} [covered = true] - - whether overlay HTML element should be added (disable GUI).\n             */\n            start: function (covered) {\n                if (typeof covered === 'undefined') {\n                    covered = true;\n                }\n                if ($loadingBar.hasClass('loading')) {\n                    $loadingBar.stop();\n                }\n                $loadingBar.addClass('loading');\n                $loadingBar.toggleClass('loadingbar-covered', covered);\n                updateHeight();\n            },\n            stop: function () {\n                $loadingBar.removeClass('loading fixed').height(originalHeight);\n            }\n        };\n    });\n\n","/*\n * Helpers\n *\n * @deprecated Do not use it anymore. Only here for backward compat.\n */\ndefine('helpers',[\n    'lodash',\n    'jquery',\n    'context',\n    'layout/loading-bar'\n], function (_, $, context, loadingBar) {\n    'use strict';\n\n    var Helpers = {\n        init: function () {\n            /**\n             * Extends the JQuery post method for convenience use with Json\n             * @param {String} url\n             * @param {Object} data\n             * @param {Function} callback\n             */\n            $.postJson = function (url, data, callback) {\n                $.post(url, data, callback, \"json\");\n            };\n        },\n\n        getMainContainer: function () {\n            console.warn('deprecated, use section instead');\n            var sectionId,\n                sectionIndex;\n            if (!context.section) {\n                sectionIndex = $('.section-container').tabs('options', 'selected');\n                $('.content-panel').eq(sectionIndex).find('.content-block');\n            }\n            return $('#panel-' + context.section + ' .content-block');\n        },\n\n        /**\n         * @return {String} the current main container jQuery selector (from the opened tab)\n         */\n        getMainContainerSelector: function ($tabs) {\n            console.warn('deprecated, use section instead');\n            var $container = this.getMainContainer();\n            if ($container && $container.length > 0) {\n                return $container.selector;\n            }\n            return false;\n        },\n\n        /*\n         * Navigation and ajax helpers\n         */\n\n        /**\n         * Begin an async request, while loading:\n         * - show the loader img\n         * - disable the submit buttons\n         */\n        loading: function () {\n            console.warn('deprecated, this should be automated');\n            $(window).on('click', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                return false;\n            });\n            loadingBar.start();\n        },\n\n        /**\n         * Complete an async request, once loaded:\n         *  - hide the loader img\n         *  - enable back the submit buttons\n         */\n        loaded: function () {\n            console.warn('deprecated, this should be automated');\n            $(window).off('click');\n            loadingBar.stop();\n        },\n\n        /**\n         * Load url asyncly into selector container\n         * @param {String} selector\n         * @param {String} url\n         */\n        _load: function (selector, url, data) {\n\n            url = url || '';\n\n            if (data) {\n                data.nc = new Date().getTime();\n            }\n            else {\n                data = {nc: new Date().getTime()};\n            }\n            $(selector).hide().empty().show();\n            if (url.indexOf('?') === -1) {\n                $(selector).load(url, data);\n            }\n            else {\n                url += '&' + ($.param(data));\n                $(selector).load(url);\n            }\n        },\n\n        /*\n         * others\n         */\n\n        /**\n         * simple _url implementation, requires layout_header to set some global variables\n         * @deprecated use util/url#route instead\n         */\n        _url: function (action, controller, extension, params) {\n\n            var url;\n\n            if(typeof action !== 'string' || typeof controller !== 'string' || typeof extension !== 'string'){\n                throw new TypeError('All parts are required to build an URL');\n            }\n\n            url = context.root_url + extension + '/' + controller + '/' + action;\n\n            if(_.isString(params)) {\n                url += '?' + params;\n            } else if (_.isPlainObject(params)) {\n                url += '?' + $.param(params);\n            }\n            return url;\n        }\n    };\n\n    return Helpers;\n});\n\n","/**\n * Gamp v0.2.1 - A simple arithmetic API with workaround to floating-point issue\n *\n * https://github.com/jsconan/gamp\n *\n * Copyright (c) 2016 Jean-Sbastien CONAN\n * Released under the MIT license.\n */\n\n// 2016 - OAT - modified AMD loader to be able to compile it\ndefine('lib/gamp/gamp',[],function() {\n    'use strict';\n\n    /**\n     * Computes the precision of a decimal number.\n     * This precision will be then used as a correction factor to normalize\n     * the value in order to prevent the floating-point round error.\n     * @param {number} val\n     * @returns {number}\n     */\n    function precision(val) {\n        var digits = String(val);\n        var point = digits.indexOf('.');\n        return point < 0 ? 1 : Math.pow(10, digits.length - point - 1);\n    }\n\n    /**\n     * Computes the approached precision for a list of decimal numbers.\n     * This precision will be then used as a correction factor to normalize\n     * the values in order to prevent the floating-point round error.\n     * @param {number} ...\n     * @returns {number}\n     */\n    function gamp() {\n        var i = arguments.length - 1;\n        var factor = -Infinity;\n        while (i >= 0) {\n            factor = Math.max(factor, precision(arguments[i--]));\n        }\n        return Math.abs(factor);\n    }\n\n    /**\n     * Makes the translation of a floating point number to an integer value using a precision factor\n     * @param {number} val\n     * @param {number} factor\n     * @returns {number}\n     */\n    gamp.normalize = function normalize(val, factor) {\n        return Math.round(factor * Number(val));\n    };\n\n    /**\n     * Adjusts the number of digits to prevent round-off error\n     * @param {number} val\n     * @param {number} [digits=16]\n     * @returns {number}\n     */\n    gamp.round = function round(val, digits) {\n        return Number(Number(val).toPrecision('undefined' === typeof digits ? 16 : digits));\n    };\n\n    /**\n     * Computes the addition of two decimal values\n     * @param {number} a\n     * @param {number} b\n     * @returns {number}\n     */\n    gamp.add = function add(a, b) {\n        var factor = gamp(a, b);\n        return gamp.round((gamp.normalize(a, factor) + gamp.normalize(b, factor)) / factor);\n    };\n\n    /**\n     * Computes the subtraction of two decimal values\n     * @param {number} a\n     * @param {number} b\n     * @returns {number}\n     */\n    gamp.sub = function sub(a, b) {\n        var factor = gamp(a, b);\n        return gamp.round((gamp.normalize(a, factor) - gamp.normalize(b, factor)) / factor);\n    };\n\n    /**\n     * Computes the multiplication of two decimal values\n     * @param {number} a\n     * @param {number} b\n     * @returns {number}\n     */\n    gamp.mul = function mul(a, b) {\n        var factor = gamp(a, b);\n        return gamp.round((gamp.normalize(a, factor) * gamp.normalize(b, factor)) / (factor * factor), 15);\n    };\n\n    /**\n     * Computes the division of two decimal values\n     * @param {number} a\n     * @param {number} b\n     * @returns {number}\n     */\n    gamp.div = function div(a, b) {\n        var factor = gamp(a, b);\n        return gamp.round(gamp.normalize(a, factor) / gamp.normalize(b, factor));\n    };\n\n    /**\n     * Computes the power of a decimal value\n     * @param {number} a\n     * @param {number} b\n     * @returns {number}\n     */\n    gamp.pow = function pow(a, b) {\n        var factor = gamp(a);\n        var ta = gamp.normalize(a, factor);\n        var ib = Math.floor(b);\n        var fb = b - ib;\n        var res = ib ? Math.pow(ta, ib) / Math.pow(factor, ib) : 1;\n        if (fb) {\n            res = gamp.div(gamp.mul(res, Math.pow(ta, fb)), Math.pow(factor, fb));\n        }\n        return gamp.round(res, 15);\n    };\n\n    return gamp;\n});\n\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.14.5\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define('lib/popper/popper',factory) :\n\t(global.Popper = factory());\n}(this, (function () { 'use strict';\n\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n    called = true;\n    window.Promise.resolve().then(function () {\n      called = false;\n      fn();\n    });\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nvar supportsMicroTasks = isBrowser && window.Promise;\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var window = element.ownerDocument.defaultView;\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body;\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body;\n    case '#document':\n      return element.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\nvar isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nvar isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nfunction isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  var noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  var offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = element.ownerDocument.documentElement;\n    var scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return parseFloat(styles['border' + sideA + 'Width'], 10) + parseFloat(styles['border' + sideB + 'Width'], 10);\n}\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);\n}\n\nfunction getWindowSizes(document) {\n  var body = document.body;\n  var html = document.documentElement;\n  var computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } else {\n      rect = element.getBoundingClientRect();\n    }\n  } catch (e) {}\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var isIE10 = isIE(10);\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  var borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if (fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = parseFloat(styles.marginTop, 10);\n    var marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var html = element.ownerDocument.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = !excludeScroll ? getScroll(html) : 0;\n  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  return isFixed(getParentNode(element));\n}\n\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nfunction getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  var el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  // NOTE: 1 DOM access here\n\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(popper.ownerDocument),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  var isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0;\n  boundaries.top += isPaddingNumber ? padding : padding.top || 0;\n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;\n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var window = element.ownerDocument.defaultView;\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop) + parseFloat(styles.marginBottom);\n  var y = parseFloat(styles.marginLeft) + parseFloat(styles.marginRight);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier['function']) {\n      // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n\n  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\n/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nfunction getWindow(element) {\n  var ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  // Avoid blurry text by using full pixel integers.\n  // For pixel-perfect positioning, top/bottom prefers rounded\n  // values, while left/right prefers floored values.\n  var offsets = {\n    left: Math.floor(popper.left),\n    top: Math.round(popper.top),\n    bottom: Math.round(popper.bottom),\n    right: Math.floor(popper.right)\n  };\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  var _data$offsets$arrow;\n\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n\n  if (reference[side] + arrowElementSize > popper[opSide] ) {\n    // modification for tao\n    // correction of popper position on very right edge of web page\n    var clientWidth = Math.max(document.documentElement.clientWidth, document.documentElement.innerWidth || 0);\n    if(clientWidth < (popper[opSide] + arrowElementSize) && !isVertical){\n      data.offsets.popper[opSide] = clientWidth-2;\n      data.offsets.popper[side] = data.offsets.popper[opSide] - data.popper.width;\n    }else{\n        data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n    }\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var css = getStyleComputedProperty(data.instance.popper);\n  var popperMarginSide = parseFloat(css['margin' + sideCapitalized], 10);\n  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width'], 10);\n  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n    var flippedVariation = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly   modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * modification for tao: more precise boundary calculation for tooltips on right side of screen\n * on test item authoring page\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  var transformProp = getSupportedPropertyName('transform');\n  var popperStyles = data.instance.popper.style; // assignment to help minification\n  var top = popperStyles.top,\n      left = popperStyles.left,\n      transform = popperStyles[transformProp];\n\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n    var check = {\n        primary: function primary(placement) {\n            var value = popper[placement];\n            // oat modification\n            if (placement === 'left') {\n                var overlap = boundaries.width - (popper.left + popper.width);\n                if (!options.escapeWithReference && overlap < 0) {\n                    var padding = options.padding || 0;\n                    value = boundaries.width - popper.width - padding;\n                }\n            }\n            // end of oat modification\n            if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n                value = Math.max(popper[placement], boundaries[placement]);\n            }\n            return defineProperty({}, placement, value);\n        },\n        secondary: function secondary(placement) {\n            var mainSide = placement === 'right' ? 'left' : 'top';\n            var value = popper[mainSide];\n            if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n                value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n            }\n            return defineProperty({}, mainSide, value);\n        }\n    };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport'\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {HTMLElement|referenceObject} reference - The reference element used to position the popper\n   * @param {HTMLElement} popper - The HTML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedules an update. It will run on the next UI update available.\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nreturn Popper;\n\n})));\n//# sourceMappingURL=popper.js.map\n;\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.3.1\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('./popper')) :\n\ttypeof define === 'function' && define.amd ? define('lib/popper/tooltip',['./popper'], factory) :\n\t(global.Tooltip = factory(global.Popper));\n}(this, (function (Popper) { 'use strict';\n\nPopper = Popper && Popper.hasOwnProperty('default') ? Popper['default'] : Popper;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar DEFAULT_OPTIONS = {\n  container: false,\n  delay: 0,\n  html: false,\n  placement: 'top',\n  title: '',\n  template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n  trigger: 'hover focus',\n  offset: 0,\n  arrowSelector: '.tooltip-arrow, .tooltip__arrow',\n  innerSelector: '.tooltip-inner, .tooltip__inner'\n};\n\nvar Tooltip = function () {\n  /**\n   * Create a new Tooltip.js instance\n   * @class Tooltip\n   * @param {HTMLElement} reference - The DOM node used as reference of the tooltip (it can be a jQuery element).\n   * @param {Object} options\n   * @param {String} options.placement='top'\n   *      Placement of the popper accepted values: `top(-start, -end), right(-start, -end), bottom(-start, -end),\n   *      left(-start, -end)`\n   * @param {String} options.arrowSelector='.tooltip-arrow, .tooltip__arrow' - className used to locate the DOM arrow element in the tooltip.\n   * @param {String} options.innerSelector='.tooltip-inner, .tooltip__inner' - className used to locate the DOM inner element in the tooltip.\n   * @param {HTMLElement|String|false} options.container=false - Append the tooltip to a specific element.\n   * @param {Number|Object} options.delay=0\n   *      Delay showing and hiding the tooltip (ms) - does not apply to manual trigger type.\n   *      If a number is supplied, delay is applied to both hide/show.\n   *      Object structure is: `{ show: 500, hide: 100 }`\n   * @param {Boolean} options.html=false - Insert HTML into the tooltip. If false, the content will inserted with `textContent`.\n   * @param {String} [options.template='<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>']\n   *      Base HTML to used when creating the tooltip.\n   *      The tooltip's `title` will be injected into the `.tooltip-inner` or `.tooltip__inner`.\n   *      `.tooltip-arrow` or `.tooltip__arrow` will become the tooltip's arrow.\n   *      The outermost wrapper element should have the `.tooltip` class.\n   * @param {String|HTMLElement|TitleFunction} options.title='' - Default title value if `title` attribute isn't present.\n   * @param {String} [options.trigger='hover focus']\n   *      How tooltip is triggered - click, hover, focus, manual.\n   *      You may pass multiple triggers; separate them with a space. `manual` cannot be combined with any other trigger.\n   * @param {Boolean} options.closeOnClickOutside=false - Close a popper on click outside of the popper and reference element. This has effect only when options.trigger is 'click'.\n   * @param {String|HTMLElement} options.boundariesElement\n   *      The element used as boundaries for the tooltip. For more information refer to Popper.js'\n   *      [boundariesElement docs](https://popper.js.org/popper-documentation.html)\n   * @param {Number|String} options.offset=0 - Offset of the tooltip relative to its reference. For more information refer to Popper.js'\n   *      [offset docs](https://popper.js.org/popper-documentation.html)\n   * @param {Object} options.popperOptions={} - Popper options, will be passed directly to popper instance. For more information refer to Popper.js'\n   *      [options docs](https://popper.js.org/popper-documentation.html)\n   * @return {Object} instance - The generated tooltip instance\n   */\n  function Tooltip(reference, options) {\n    classCallCheck(this, Tooltip);\n\n    _initialiseProps.call(this);\n\n    // apply user options over default ones\n    options = _extends({}, DEFAULT_OPTIONS, options);\n\n    reference.jquery && (reference = reference[0]);\n\n    // cache reference and options\n    this.reference = reference;\n    this.options = options;\n\n    // get events list\n    var events = typeof options.trigger === 'string' ? options.trigger.split(' ').filter(function (trigger) {\n      return ['click', 'hover', 'focus'].indexOf(trigger) !== -1;\n    }) : [];\n\n    // set initial state\n    this._isOpen = false;\n    this._popperOptions = {};\n\n    // set event listeners\n    this._setEventListeners(reference, events, options);\n  }\n\n  //\n  // Public methods\n  //\n\n  /**\n   * Reveals an element's tooltip. This is considered a \"manual\" triggering of the tooltip.\n   * Tooltips with zero-length titles are never displayed.\n   * @method Tooltip#show\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Hides an elements tooltip. This is considered a manual triggering of the tooltip.\n   * @method Tooltip#hide\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Hides and destroys an elements tooltip.\n   * @method Tooltip#dispose\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Toggles an elements tooltip. This is considered a manual triggering of the tooltip.\n   * @method Tooltip#toggle\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Updates the tooltip's title content\n   * @method Tooltip#updateTitleContent\n   * @memberof Tooltip\n   * @param {String|HTMLElement} title - The new content to use for the title\n   */\n\n\n  //\n  // Private methods\n  //\n\n  createClass(Tooltip, [{\n    key: '_create',\n\n\n    /**\n     * Creates a new tooltip node\n     * @memberof Tooltip\n     * @private\n     * @param {HTMLElement} reference\n     * @param {String} template\n     * @param {String|HTMLElement|TitleFunction} title\n     * @param {Boolean} allowHtml\n     * @return {HTMLElement} tooltipNode\n     */\n    value: function _create(reference, template, title, allowHtml) {\n      // create tooltip element\n      var tooltipGenerator = window.document.createElement('div');\n      tooltipGenerator.innerHTML = template.trim();\n      var tooltipNode = tooltipGenerator.childNodes[0];\n\n      // add unique ID to our tooltip (needed for accessibility reasons)\n      tooltipNode.id = 'tooltip_' + Math.random().toString(36).substr(2, 10);\n\n      // set initial `aria-hidden` state to `false` (it's visible!)\n      tooltipNode.setAttribute('aria-hidden', 'false');\n\n      // add title to tooltip\n      var titleNode = tooltipGenerator.querySelector(this.options.innerSelector);\n      this._addTitleContent(reference, title, allowHtml, titleNode);\n\n      // return the generated tooltip node\n      return tooltipNode;\n    }\n  }, {\n    key: '_addTitleContent',\n    value: function _addTitleContent(reference, title, allowHtml, titleNode) {\n      if (title.nodeType === 1 || title.nodeType === 11) {\n        // if title is a element node or document fragment, append it only if allowHtml is true\n        allowHtml && titleNode.appendChild(title);\n      } else if (isFunction(title)) {\n        // if title is a function, call it and set textContent or innerHtml depending by `allowHtml` value\n        var titleText = title.call(reference);\n        allowHtml ? titleNode.innerHTML = titleText : titleNode.textContent = titleText;\n      } else {\n        // if it's just a simple text, set textContent or innerHtml depending by `allowHtml` value\n        allowHtml ? titleNode.innerHTML = title : titleNode.textContent = title;\n      }\n    }\n  }, {\n    key: '_show',\n    value: function _show(reference, options) {\n      // don't show if it's already visible\n      // or if it's not being showed\n      if (this._isOpen && !this._isOpening) {\n        return this;\n      }\n      this._isOpen = true;\n\n      // if the tooltipNode already exists, just show it\n      if (this._tooltipNode) {\n        this._tooltipNode.style.visibility = 'visible';\n        this._tooltipNode.setAttribute('aria-hidden', 'false');\n        this.popperInstance.update();\n        return this;\n      }\n\n      // get title\n      var title = reference.getAttribute('title') || options.title;\n\n      // don't show tooltip if no title is defined\n      if (!title) {\n        return this;\n      }\n\n      // create tooltip node\n      var tooltipNode = this._create(reference, options.template, title, options.html);\n\n      // Add `aria-describedby` to our reference element for accessibility reasons\n      reference.setAttribute('aria-describedby', tooltipNode.id);\n\n      // append tooltip to container\n      var container = this._findContainer(options.container, reference);\n\n      this._append(tooltipNode, container);\n\n      this._popperOptions = _extends({}, options.popperOptions, {\n        placement: options.placement\n      });\n\n      this._popperOptions.modifiers = _extends({}, this._popperOptions.modifiers, {\n        arrow: {\n          element: this.options.arrowSelector\n        },\n        offset: {\n          offset: options.offset\n        }\n      });\n\n      if (options.boundariesElement) {\n        this._popperOptions.modifiers.preventOverflow = {\n          boundariesElement: options.boundariesElement\n        };\n      }\n\n      this.popperInstance = new Popper(reference, tooltipNode, this._popperOptions);\n\n      this._tooltipNode = tooltipNode;\n\n      return this;\n    }\n  }, {\n    key: '_hide',\n    value: function _hide() /*reference, options*/{\n      // don't hide if it's already hidden\n      if (!this._isOpen) {\n        return this;\n      }\n\n      this._isOpen = false;\n\n      // hide tooltipNode\n      this._tooltipNode.style.visibility = 'hidden';\n      this._tooltipNode.setAttribute('aria-hidden', 'true');\n\n      return this;\n    }\n  }, {\n    key: '_dispose',\n    value: function _dispose() {\n      var _this = this;\n\n      // remove event listeners first to prevent any unexpected behaviour\n      this._events.forEach(function (_ref) {\n        var func = _ref.func,\n            event = _ref.event;\n\n        _this.reference.removeEventListener(event, func);\n      });\n      this._events = [];\n\n      if (this._tooltipNode) {\n        this._hide();\n\n        // destroy instance\n        this.popperInstance.destroy();\n\n        // destroy tooltipNode if removeOnDestroy is not set, as popperInstance.destroy() already removes the element\n        if (!this.popperInstance.options.removeOnDestroy) {\n          this._tooltipNode.parentNode.removeChild(this._tooltipNode);\n          this._tooltipNode = null;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: '_findContainer',\n    value: function _findContainer(container, reference) {\n      // if container is a query, get the relative element\n      if (typeof container === 'string') {\n        container = window.document.querySelector(container);\n      } else if (container === false) {\n        // if container is `false`, set it to reference parent\n        container = reference.parentNode;\n      }\n      return container;\n    }\n\n    /**\n     * Append tooltip to container\n     * makes popper instnce to redraw itself in order to fix word wrap on dynamic content\n     * @memberof Tooltip\n     * @private\n     * @param {HTMLElement} tooltipNode\n     * @param {HTMLElement|String|false} container\n     */\n\n  }, {\n    key: '_append',\n    value: function _append(tooltipNode, container) {\n      var _this2 = this;\n\n      container.appendChild(tooltipNode);\n\n      setTimeout(function () {\n        if (_this2._isOpen) {\n          _this2.hide();\n        }\n        _this2.show();\n      });\n    }\n  }, {\n    key: '_setEventListeners',\n    value: function _setEventListeners(reference, events, options) {\n      var _this3 = this;\n\n      var directEvents = [];\n      var oppositeEvents = [];\n\n      events.forEach(function (event) {\n        switch (event) {\n          case 'hover':\n            directEvents.push('mouseenter');\n            oppositeEvents.push('mouseleave');\n            break;\n          case 'focus':\n            directEvents.push('focus');\n            oppositeEvents.push('blur');\n            break;\n          case 'click':\n            directEvents.push('click');\n            oppositeEvents.push('click');\n            break;\n        }\n      });\n\n      // schedule show tooltip\n      directEvents.forEach(function (event) {\n        var func = function func(evt) {\n          if (_this3._isOpening === true) {\n            return;\n          }\n          evt.usedByTooltip = true;\n          _this3._scheduleShow(reference, options.delay, options, evt);\n        };\n        _this3._events.push({ event: event, func: func });\n        reference.addEventListener(event, func);\n      });\n\n      // schedule hide tooltip\n      oppositeEvents.forEach(function (event) {\n        var func = function func(evt) {\n          if (evt.usedByTooltip === true) {\n            return;\n          }\n          _this3._scheduleHide(reference, options.delay, options, evt);\n        };\n        _this3._events.push({ event: event, func: func });\n        reference.addEventListener(event, func);\n        if (event === 'click' && options.closeOnClickOutside) {\n          document.addEventListener('mousedown', function (e) {\n            if (!_this3._isOpening) {\n              return;\n            }\n            var popper = _this3.popperInstance.popper;\n            if (reference.contains(e.target) || popper.contains(e.target)) {\n              return;\n            }\n            func(e);\n          }, true);\n        }\n      });\n    }\n  }, {\n    key: '_scheduleShow',\n    value: function _scheduleShow(reference, delay, options /*, evt */) {\n      var _this4 = this;\n\n      this._isOpening = true;\n      // defaults to 0\n      var computedDelay = delay && delay.show || delay || 0;\n      this._showTimeout = window.setTimeout(function () {\n        return _this4._show(reference, options);\n      }, computedDelay);\n    }\n  }, {\n    key: '_scheduleHide',\n    value: function _scheduleHide(reference, delay, options, evt) {\n      var _this5 = this;\n\n      this._isOpening = false;\n      // defaults to 0\n      var computedDelay = delay && delay.hide || delay || 0;\n      window.setTimeout(function () {\n        window.clearTimeout(_this5._showTimeout);\n        if (_this5._isOpen === false) {\n          return;\n        }\n        if (!document.body.contains(_this5._tooltipNode)) {\n          return;\n        }\n\n        // if we are hiding because of a mouseleave, we must check that the new\n        // reference isn't the tooltip, because in this case we don't want to hide it\n        if (evt.type === 'mouseleave') {\n          var isSet = _this5._setTooltipNodeEvent(evt, reference, delay, options);\n\n          // if we set the new event, don't hide the tooltip yet\n          // the new event will take care to hide it if necessary\n          if (isSet) {\n            return;\n          }\n        }\n\n        _this5._hide(reference, options);\n      }, computedDelay);\n    }\n  }, {\n    key: '_updateTitleContent',\n    value: function _updateTitleContent(title) {\n      if (typeof this._tooltipNode === 'undefined') {\n        if (typeof this.options.title !== 'undefined') {\n          this.options.title = title;\n        }\n        return;\n      }\n      var titleNode = this._tooltipNode.querySelector(this.options.innerSelector);\n      this._clearTitleContent(titleNode, this.options.html, this.reference.getAttribute('title') || this.options.title);\n      this._addTitleContent(this.reference, title, this.options.html, titleNode);\n      this.options.title = title;\n      this.popperInstance.update();\n    }\n  }, {\n    key: '_clearTitleContent',\n    value: function _clearTitleContent(titleNode, allowHtml, lastTitle) {\n      if (lastTitle.nodeType === 1 || lastTitle.nodeType === 11) {\n        allowHtml && titleNode.removeChild(lastTitle);\n      } else {\n        allowHtml ? titleNode.innerHTML = '' : titleNode.textContent = '';\n      }\n    }\n  }]);\n  return Tooltip;\n}();\n\n/**\n * Title function, its context is the Tooltip instance.\n * @memberof Tooltip\n * @callback TitleFunction\n * @return {String} placement - The desired title.\n */\n\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this6 = this;\n\n  this.show = function () {\n    return _this6._show(_this6.reference, _this6.options);\n  };\n\n  this.hide = function () {\n    return _this6._hide();\n  };\n\n  this.dispose = function () {\n    return _this6._dispose();\n  };\n\n  this.toggle = function () {\n    if (_this6._isOpen) {\n      return _this6.hide();\n    } else {\n      return _this6.show();\n    }\n  };\n\n  this.updateTitleContent = function (title) {\n    return _this6._updateTitleContent(title);\n  };\n\n  this._events = [];\n\n  this._setTooltipNodeEvent = function (evt, reference, delay, options) {\n    var relatedreference = evt.relatedreference || evt.toElement || evt.relatedTarget;\n\n    var callback = function callback(evt2) {\n      var relatedreference2 = evt2.relatedreference || evt2.toElement || evt2.relatedTarget;\n\n      // Remove event listener after call\n      _this6._tooltipNode.removeEventListener(evt.type, callback);\n\n      // If the new reference is not the reference element\n      if (!reference.contains(relatedreference2)) {\n        // Schedule to hide tooltip\n        _this6._scheduleHide(reference, options.delay, options, evt2);\n      }\n    };\n\n    if (_this6._tooltipNode.contains(relatedreference)) {\n      // listen to mouseleave on the tooltip element to be able to hide the tooltip\n      _this6._tooltipNode.addEventListener(evt.type, callback);\n      return true;\n    }\n\n    return false;\n  };\n};\n\nreturn Tooltip;\n\n})));\n//# sourceMappingURL=tooltip.js.map\n;\n","!function(root, factory) {\n    \"function\" == typeof define && define.amd ? // AMD. Register as an anonymous module unless amdModuleId is set\n    define('lib/polyfill/svg4everybody/svg4everybody',[], function() {\n        return root.svg4everybody = factory();\n    }) : \"object\" == typeof exports ? module.exports = factory() : root.svg4everybody = factory();\n}(this, function() {\n    /*! svg4everybody v2.0.3 | github.com/jonathantneal/svg4everybody */\n    function embed(svg, target) {\n        // if the target exists\n        if (target) {\n            // create a document fragment to hold the contents of the target\n            var fragment = document.createDocumentFragment(), viewBox = !svg.getAttribute(\"viewBox\") && target.getAttribute(\"viewBox\");\n            // conditionally set the viewBox on the svg\n            viewBox && svg.setAttribute(\"viewBox\", viewBox);\n            // copy the contents of the clone into the fragment\n            for (// clone the target\n            var clone = target.cloneNode(!0); clone.childNodes.length; ) {\n                fragment.appendChild(clone.firstChild);\n            }\n\n            /* Note that this is a change of the original code.\n             * svg4everybody removes the original <use>. This code wraps\n             * the SVG in a group with the class 'use'. This allows to\n             * change the colors of the SVG for all browsers by using the\n             * CSS selector 'svg use, svg .use'\n             */\n            var group = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n            group.setAttribute('class', 'use');\n            group.appendChild(fragment);\n            svg.appendChild(group);\n        }\n    }\n    function loadreadystatechange(xhr) {\n        // listen to changes in the request\n        xhr.onreadystatechange = function() {\n            // if the request is ready\n            if (4 === xhr.readyState) {\n                // get the cached html document\n                var cachedDocument = xhr._cachedDocument;\n                // ensure the cached html document based on the xhr response\n                cachedDocument || (cachedDocument = xhr._cachedDocument = document.implementation.createHTMLDocument(\"\"), \n                cachedDocument.body.innerHTML = xhr.responseText, xhr._cachedTarget = {}), // clear the xhr embeds list and embed each item\n                xhr._embeds.splice(0).map(function(item) {\n                    // get the cached target\n                    var target = xhr._cachedTarget[item.id];\n                    // ensure the cached target\n                    target || (target = xhr._cachedTarget[item.id] = cachedDocument.getElementById(item.id)), \n                    // embed the target into the svg\n                    embed(item.svg, target);\n                });\n            }\n        }, // test the ready state change immediately\n        xhr.onreadystatechange();\n    }\n    function svg4everybody(rawopts) {\n        function oninterval() {\n            // while the index exists in the live <use> collection\n            for (// get the cached <use> index\n            var index = 0; index < uses.length; ) {\n                // get the current <use>\n                var use = uses[index], svg = use.parentNode;\n                if (svg && /svg/i.test(svg.nodeName)) {\n                    var src = use.getAttribute(\"xlink:href\");\n                    if (polyfill && (!opts.validate || opts.validate(src, svg, use))) {\n                        // remove the <use> element\n                        svg.removeChild(use);\n                        // parse the src and get the url and id\n                        var srcSplit = src.split(\"#\"), url = srcSplit.shift(), id = srcSplit.join(\"#\");\n                        // if the link is external\n                        if (url.length) {\n                            // get the cached xhr request\n                            var xhr = requests[url];\n                            // ensure the xhr request exists\n                            xhr || (xhr = requests[url] = new XMLHttpRequest(), xhr.open(\"GET\", url), xhr.send(), \n                            xhr._embeds = []), // add the svg and id as an item to the xhr embeds list\n                            xhr._embeds.push({\n                                svg: svg,\n                                id: id\n                            }), // prepare the xhr ready state change event\n                            loadreadystatechange(xhr);\n                        } else {\n                            // embed the local id into the svg\n                            embed(svg, document.getElementById(id));\n                        }\n                    }\n                } else {\n                    // increase the index when the previous value was not \"valid\"\n                    ++index;\n                }\n            }\n            // continue the interval\n            requestAnimationFrame(oninterval, 67);\n        }\n        var polyfill, opts = Object(rawopts), newerIEUA = /\\bTrident\\/[567]\\b|\\bMSIE (?:9|10)\\.0\\b/, webkitUA = /\\bAppleWebKit\\/(\\d+)\\b/, olderEdgeUA = /\\bEdge\\/12\\.(\\d+)\\b/;\n        polyfill = \"polyfill\" in opts ? opts.polyfill : newerIEUA.test(navigator.userAgent) || (navigator.userAgent.match(olderEdgeUA) || [])[1] < 10547 || (navigator.userAgent.match(webkitUA) || [])[1] < 537;\n        // create xhr requests object\n        var requests = {}, requestAnimationFrame = window.requestAnimationFrame || setTimeout, uses = document.getElementsByTagName(\"use\");\n        // conditionally start the interval if the polyfill is active\n        polyfill && oninterval();\n    }\n    return svg4everybody;\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('uikitLoader',[\n    'ui/toggler',\n    'ui/disabler',\n    'ui/adder',\n    'ui/deleter',\n    'ui/incrementer',\n    'ui/inplacer',\n    'ui/btngrouper',\n    'ui/durationer',\n    'ui/selecter',\n    'ui/modal',\n    'ui/tooltip',\n    'ui/form',\n    'ui/validator',\n    'ui/groupvalidator'\n], function(toggler, disabler, adder, deleter, incrementer, inplacer, btngrouper, durationer, selecter, modal, tooltip, form) {\n    'use strict';\n\n    /**\n     * svg4everybody is only required by certain legacy browsers to enable the use of external SVG sprites.\n     * The functionality below is based on lib/polyfill/svg4everybody/svg4everybody.js\n     */\n    function initCrossBrowserSvg() {\n\n        // code taken from svg4everybody\n        var newerIEUA = /\\bTrident\\/[567]\\b|\\bMSIE (?:9|10)\\.0\\b/;\n        var webkitUA = /\\bAppleWebKit\\/(\\d+)\\b/;\n        var olderEdgeUA = /\\bEdge\\/12\\.(\\d+)\\b/;\n\n        if(newerIEUA.test(navigator.userAgent) ||\n            (navigator.userAgent.match(olderEdgeUA) || [])[1] < 10547 ||\n            (navigator.userAgent.match(webkitUA) || [])[1] < 537){\n\n            require(['lib/polyfill/svg4everybody/svg4everybody'], function(svg4everybody){\n                svg4everybody();\n            });\n        }\n    }\n\n    /**\n     * @author Bertrand Chevrier <bertrand@taotesting.com>\n     * @exports ui\n     */\n    return {\n\n        /**\n         * Start up the components lookup and data-attr listening\n         * @param {jQueryElement} $container - to lookup within\n         */\n        startEventComponents : function($container){\n            adder($container);\n            btngrouper($container);\n            deleter($container);\n            disabler($container);\n            toggler($container);\n            inplacer($container);\n            modal($container);\n            form($container);\n            this.startDomComponent($container);\n        },\n\n        startDomComponent : function($container){\n            incrementer($container);\n            durationer($container);\n            selecter($container);\n            initCrossBrowserSvg();\n            tooltip.lookup($container);\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('controller/backoffice',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'context',\n    'helpers',\n    'core/router',\n    'uikitLoader',\n    'core/history',\n    'ui/feedback',\n    'layout/logout-event'\n], function ($, _, __, context, helpers, router, uikitLoader, history, feedback, logoutEvent) {\n    'use strict';\n\n    /**\n     * @typedef {{success: boolean, type: string, message: string, data: Object}} Response\n     *\n     * @param {Response} response\n     * @return {boolean}\n     */\n    function hasRequiredProperties(response) {\n        return typeof response !== 'undefined'\n            && !['success', 'type', 'message', 'data'].some(key => typeof response[key] === 'undefined');\n    }\n\n    /**\n     * The backoffice controller.\n     * Starts the ajax based router, the automated error reporting and the UI listeners.\n     */\n    return {\n        /**\n         * Controller entry point\n         */\n        start: function start() {\n            var $doc = $(document);\n            var $container = $('body > .content-wrap');\n\n            //fix backspace going back into the history\n            history.fixBrokenBrowsers();\n\n            //contextual loading, do a dispatch each time an ajax request loads an HTML page\n            $doc.ajaxComplete(function (event, request, settings) {\n                var urls;\n                var forward;\n                if (_.contains(settings.dataTypes, 'html')) {\n                    urls = [settings.url];\n                    forward = request.getResponseHeader('X-Tao-Forward');\n                    if (forward) {\n                        urls.push(forward);\n                    }\n\n                    router.dispatch(urls, function () {\n                        uikitLoader.startDomComponent($container);\n                    });\n                }\n            });\n\n            //dispatch also the current page (or the forward)\n            router.dispatchUrl(helpers._url(context.action, context.module, context.extension));\n\n            //intercept errors\n            //TODO this should belongs to the Router\n            $doc.ajaxError(function (event, request, settings, thrownError) {\n                var ajaxResponse;\n                var errorMessage = __('Unknown Error');\n\n                // Request was manually aborted, isn't a error\n                if (thrownError === 'abort') return;\n\n                try {\n                    ajaxResponse = $.parseJSON(request.responseText);\n                } catch (err) {\n                    errorMessage = `${request.status}: ${request.responseText}`;\n                }\n\n                // Specific error tooManyFolders in sharedStimulus\n                if (ajaxResponse && ajaxResponse.code === 999) { return; }\n\n                if ((request.status === 404 || request.status === 0) && settings.type === 'HEAD') {\n                    //consider it as a \"test\" to check if resource exists\n                    return;\n                } else if (request.status === 404 || request.status === 500) {\n                    if (hasRequiredProperties(ajaxResponse)) {\n                        errorMessage = `${request.status}: ${ajaxResponse.message}`;\n                    } else {\n                        errorMessage = `${request.status}: ${request.responseText}`;\n                    }\n                }\n\n                if (request.status === 403) {\n                    logoutEvent();\n                } else {\n                    feedback().error(errorMessage);\n                }\n            });\n\n            //initialize new components\n            uikitLoader.startEventComponents($container);\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\ndefine('controller/entry',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'ui/feedback'\n], function ($, _, __, feedback) {\n    'use strict';\n\n    /**\n     * The login controller\n     */\n    return {\n\n        /**\n         * Controller entry point\n         */\n        start: function start() {\n            var $container = $('#entry-point-box');\n            var errorMessage = $container.data('errormessage');\n            if (errorMessage) {\n                feedback().error(errorMessage);\n            }\n        }\n    };\n});\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2013\n *  \n */\n\ndefine('lock',['jquery', 'helpers'], function($, helpers){\n\n    /**\n     * Lock management\n     * @exports lock\n     * @constructor\n     * @param {String} resourceUri - the uri of the locked resource\n     */\n    function Lock (resourceUri){\n        this.uri = resourceUri;\n    }\n\n    /**\n     * Release the lock on the current resource\n     * @memberOf Lock\n     * @param {Function} cb - callback once release\n     * @param {Function} err - errorback  unable to release \n     */\n    Lock.prototype.release = function (cb, err){\n\n        var releaseUrl = helpers._url('release', 'Lock', 'tao' );\n        var options = { \n            data: { uri : this.uri },\n            type: 'POST',\n            dataType: 'json'\n        };\n        \n        $.ajax(releaseUrl, options)\n            .success(cb)\n            .fail(err);\n    };\n\n    return Lock;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA;\n */\n/**\n * The purpose of this router is to allow navigation between Generis views entities (sections, tree items...).\n * It does not dispatch any controller (that's the backoffice.js' job) but ensures that the browser history has\n * a consistent state and URLs. On history move, it triggers event listened by the section manager and the tree.\n * Those module actually do the job of restoring the route state.\n **\n * @author Christophe Nol <christophe@taotesting.com>\n */\ndefine('layout/generisRouter',['jquery', 'lodash', 'core/eventifier', 'util/url'], function($, _, eventifier, urlUtil) {\n    'use strict';\n\n    /**\n     * Keep track of the latest known state\n     */\n    let topState;\n\n    /**\n     * The router instance\n     */\n    const generisRouter = eventifier({\n        /**\n         * To be called on section initial loading or section change.\n         * This method create a new history state or replace the current one. It might be called as a convenient way\n         * to add the sectionId to the current browser Url. In that case, history.replaceState() will be used.\n         * Otherwise, history.pushState().\n         *\n         * @param {String} baseUrl - a base on which to build the stateUrl. Most of the time, it is the current URL from the call point.\n         * @param {String} sectionId - to be saved in the state and added to the Url\n         * @param {('activate'|'show')} restoreWith - the method needed to restore the section\n         */\n        pushSectionState: function pushSectionState(baseUrl, sectionId, restoreWith) {\n            const parsedUrl = urlUtil.parse(baseUrl);\n            const currentQuery = _.mapValues(parsedUrl.query, function(value, key) {\n                return key === 'uri' ? decodeURIComponent(value) : value;\n            });\n            const newQuery = _.clone(currentQuery);\n            const baseUrlHasSection = currentQuery.section;\n            const baseUrlHasUri = currentQuery.uri;\n\n            let stateUrl;\n            const newState = {\n                sectionId: sectionId,\n                restoreWith: restoreWith || 'activate',\n                nodeUri: currentQuery.uri\n            };\n\n            if (!baseUrlHasSection) {\n                // adding missing section parameter\n                newQuery.section = sectionId;\n            } else if (sectionId !== currentQuery.section) {\n                // changing section, we need to remove any uri\n                newQuery.section = sectionId;\n                delete newQuery.uri;\n                delete newState.nodeUri;\n            }\n\n            if (sectionId && !_.isEqual(currentQuery, newQuery)) {\n                stateUrl = urlUtil.build(parsedUrl.path, newQuery);\n\n                if (baseUrlHasSection) {\n                    window.history.pushState(newState, null, stateUrl);\n                    this.trigger('pushsectionstate', stateUrl);\n                } else {\n                    window.history.replaceState(newState, null, stateUrl);\n                    this.trigger('replacesectionstate', stateUrl);\n                }\n                topState = newState;\n            } else if (sectionId && baseUrlHasSection && baseUrlHasUri && !this.hasRestorableState()) {\n                // case with redirect to imported resource\n                stateUrl = urlUtil.build(parsedUrl.path, newQuery);\n                window.history.pushState(newState, null, stateUrl);\n                this.trigger('pushsectionstate', stateUrl);\n            }\n        },\n\n        /**\n         * To be called on node selection in the tree.\n         * This method create a new history state or replace the current one. It might be called as a convenient way\n         * to add the Uri parameter to the current browser Url. In that case, history.replaceState() will be used.\n         * Otherwise, history.pushState().\n         *\n         * @param {String} baseUrl - a base on which to build the stateUrl. Most of the time, it is the current URL from the call point.\n         * @param {String} nodeUri - to be saved in the state and added to the Url. Should be given as a plain non-encoded URI (ex: http://tao/mytao.rdf#i151378052813779)\n         */\n        pushNodeState: function pushNodeState(baseUrl, nodeUri) {\n            const parsedUrl = urlUtil.parse(baseUrl);\n            const currentQuery = _.mapValues(parsedUrl.query, function(value, key) {\n                return key === 'uri' ? decodeURIComponent(value) : value;\n            });\n            const newQuery = _.clone(currentQuery);\n            const baseUrlHasUri = currentQuery.uri;\n\n            const currentState = window.history.state || {};\n            const newState = {\n                sectionId: currentState.sectionId || currentQuery.section || '',\n                restoreWith: currentState.restoreWith || 'activate',\n                nodeUri: nodeUri\n            };\n\n            if (nodeUri !== currentQuery.uri) {\n                newQuery.uri = nodeUri;\n            }\n\n            if (nodeUri && !_.isEqual(currentQuery, newQuery)) {\n                const stateUrl = urlUtil.build(parsedUrl.path, newQuery);\n\n                if (baseUrlHasUri) {\n                    window.history.pushState(newState, null, stateUrl);\n                    this.trigger('pushnodestate', stateUrl);\n                } else {\n                    window.history.replaceState(newState, null, stateUrl);\n                    this.trigger('replacenodestate', stateUrl);\n                }\n                topState = newState;\n            }\n        },\n\n        /**\n         * Restore a state from the history, by triggering events relevant to the retrieved state.\n         * @param {Boolean} fromPopState - if this method has been called following a popState event\n         */\n        restoreState: function restoreState(fromPopState) {\n            const state = window.history.state || {};\n            if (this.hasRestorableState()) {\n                // generisRouter has already been used\n                if (fromPopState) {\n                    topState = topState || {};\n\n                    // changing section\n                    if (topState.sectionId !== state.sectionId) {\n                        this.trigger('section' + state.restoreWith, state.sectionId);\n\n                        // changing uri\n                    } else if (state.nodeUri) {\n                        this.trigger('urichange', state.nodeUri, state.sectionId);\n                    }\n\n                    // we are restoring in section initialisation: we only need to deal with the section,\n                    // as uri will be read and set during tree initialisation\n                } else {\n                    this.trigger('section' + state.restoreWith, state.sectionId);\n                }\n                topState = state;\n            }\n        },\n\n        /**\n         * Check that the current state contains the minimum information to restore a state\n         */\n        hasRestorableState: function hasRestorableState() {\n            const state = window.history.state;\n            return state && state.restoreWith && state.sectionId;\n        },\n\n        /**\n         * Add the listener that triggers the actual routing events\n         */\n        init: function init() {\n            $(window).on('popstate.generisRouter', function() {\n                generisRouter.restoreState(true);\n            });\n        },\n\n        /**\n         * Removes the popstate listener\n         */\n        destroy: function destroy() {\n            $(window).off('.generisRouter');\n        }\n    });\n\n    return generisRouter;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/section',[\n    'jquery',\n    'lodash',\n    'context',\n    'util/url',\n    'layout/generisRouter'\n], function(\n    $,\n    _,\n    context,\n    url,\n    generisRouter\n){\n    'use strict';\n\n    var sectionApi;\n\n    /**\n     * The section API provides you all the methods needed to manage sections.\n     * @typedef SectionApi\n     * @exports layout/section\n     */\n    sectionApi = {\n\n        scope : $('.section-container'),\n        sections : {},\n        selected : null,\n\n        /**\n         * Find section into the scope and initiliaze them.\n         *\n         * @param {jQueryElement} $scope - the main scope\n         * @param {Object} [options] - configuration options\n         * @param {Boolean} [options.history = true] - use the history manager\n         * @returns {SectionApi} instance for chaining\n         *\n         * @fires SectionApi#init.section\n         */\n        init : function($scope, options){\n            var self = this;\n            var restore = true;\n            var $openersContainer;\n            var parsedUrl = url.parse(location.href);\n            var defaultSection = parsedUrl.query.section;\n            var defaultUri = decodeURIComponent(parsedUrl.query.uri);\n\n            this.options = options || {};\n\n            this.scope = $scope || this.scope || $('.section-container');\n            $openersContainer = $('.tab-container', this.scope);\n\n            this.selected = null;\n\n            //load sections from the DOM\n            $('li', $openersContainer).each(function(index){\n\n                var $sectionOpener = $(this);\n                var $link = $sectionOpener.children('a');\n                var id = $link.attr('href').replace('#panel-', '');\n                var $panel = $(`#panel-${id}`);\n                var isActive = defaultSection ? defaultSection === id : index === 0;\n\n                $panel.removeClass('hidden');\n\n                self.sections[id] = {\n                    id          : id,\n                    url         : $link.data('url'),\n                    name        : $link.text(),\n                    panel       : $panel,\n                    opener      : $sectionOpener,\n                    type        : $panel.find('.section-trees').children().length ? 'tree' : 'content',\n                    active      : isActive,\n                    activated   : false,\n                    disabled    : $sectionOpener.hasClass('disabled'),\n                    defaultUri  : (isActive && defaultUri) ? defaultUri : ''\n                };\n            });\n\n            //to be sure at least one is active, for example when the given default section does not exists\n            if (_(this.sections).where({'active' : true }).size() === 0) {\n                for (let id in this.sections) {\n                    this.sections[id].active =  true;\n                    restore = false;\n                    break;\n                }\n            }\n\n            this._bindOpener($openersContainer);\n\n            /**\n             * Once the sections are initialized\n             * @event SectionApi#init.section\n             */\n            this.scope.trigger('init.section');\n\n            generisRouter\n                .off('.sectionManager')\n                .on('sectionactivate.sectionManager', function(sectionId) {\n                    self.get(sectionId)._activate();\n                })\n                .on('sectionshow.sectionManager', function(sectionId) {\n                    self.get(sectionId)._show();\n                });\n\n            if (this.options.history !== false && restore && generisRouter.hasRestorableState()) {\n                generisRouter.restoreState();\n            } else {\n                return this.activate();\n            }\n        },\n\n        /**\n         * Bind the openeers (ie. the tabs) to react on click.\n         * Also hide them if there is less than 1 visible.\n         * @param {jQueryElement} $openersContainer - the element that contains the openers\n         * @returns {SectionApi} instance for chaining\n         */\n        _bindOpener : function($openersContainer){\n            var self = this;\n            //bind click on openers\n            $openersContainer\n                .off('click.section', 'li')\n                .on('click.section', 'li', function(e){\n                    e.preventDefault();\n                    let id = $(this).children('a').attr('href').replace('#panel-', '');\n                    let section = self.sections[id];\n                    if(!section.disabled){\n                        self.get(id).activate();\n                    }\n                });\n\n            //display the openers only if there is more than 1 section\n            if ($('li:not(.hidden)', $openersContainer).length < 2) {\n                $openersContainer.hide();\n            } else {\n                $openersContainer.show();\n            }\n\n            return this;\n        },\n\n        /**\n         * Activate the selected current section (by pushing a new state to the history)\n         *\n         * @returns {SectionApi} instance for chaining\n         * @fires SectionApi#activate.section\n         * @fires SectionApi#hide.section\n         * @fires SectionApi#show.section\n         */\n        activate : function(){\n            if (!this.selected) {\n                this.current();\n            }\n            if (this.options.history !== false) {\n                generisRouter.pushSectionState(location.href, this.selected.id, 'activate');\n            }\n            return this._activate();\n        },\n\n        /**\n         * Activate the selected section.\n         * Unlike the public one, this method does the job.\n         *\n         * @private\n         * @returns {SectionApi} instance for chaining\n         * @fires SectionApi#activate.section\n         * @fires SectionApi#hide.section\n         * @fires SectionApi#show.section\n         */\n        _activate : function(){\n            this._show();\n            if (this.selected.activated === false) {\n                this.selected.activated = true;\n\n                /**\n                 * A section is activated\n                 * @event SectionApi#activate.section\n                 * @param {Object} section - the section\n                 */\n                this.scope.trigger('activate.section', [this.selected]);\n            }\n\n            return this;\n        },\n\n        /**\n         * Shows the selected section (by pushing a new state to the history).\n         * Shows is different from activate just by the events\n         * that are send (show doesn't trigger the activate event).\n         *\n         * @returns {SectionApi} instance for chaining\n         * @fires SectionApi#hide.section\n         * @fires SectionApi#show.section\n         */\n        show : function(){\n            if (!this.selected) {\n                this.current();\n            }\n            if (this.options.history !== false) {\n                generisRouter.pushSectionState(location.href, this.selected.id, 'show');\n            }\n            return this._show();\n        },\n\n\n        /**\n         * Shows the selected section.\n         * Unlike the public one, this method does the job.\n         *\n         * @private\n         * @returns {SectionApi} instance for chaining\n         * @fires SectionApi#hide.section\n         * @fires SectionApi#show.section\n         */\n        _show : function(){\n\n            var self = this;\n            var active = _(this.sections).where({'active' : true }).first();\n\n            //switch the active section if set previously\n            if (this.selected && this.selected.id !== active.id) {\n                _.forEach(this.sections, function(section){\n                    section.active = false;\n                });\n                this.sections[this.selected.id].active = true;\n            } else {\n                this.current();\n            }\n\n            _.where(this.sections, {'active' : false }).forEach(function(section){\n                section.opener.removeClass('active');\n                section.panel.hide();\n\n                /**\n                 * A section is hidden\n                 * @event SectionApi#hide.section\n                 * @param {Object} section - the section\n                 */\n                self.scope.trigger('hide.section', [section]);\n\n            });\n            _.where(this.sections, {'active' : true }).forEach(function(section){\n                section.opener.addClass('active');\n                section.panel.show();\n\n                /**\n                 * A section is shown\n                 * @event SectionApi#show.section\n                 * @param {Object} section - the section\n                 */\n                self.scope.trigger('show.section', [section]);\n            });\n\n            return this;\n        },\n\n        /**\n         * refresh the sections.\n         * they are re loaded from the dom.\n         *\n         * @returns {sectionapi} instance for chaining\n         */\n        refresh : function(){\n            this.sections = {};\n            return this.init();\n        },\n\n        /**\n         * Enable the current section\n         *\n         * @returns {sectionapi} instance for chaining\n         * @fires SectionApi#enable.section\n         */\n        enable : function(){\n            if (!this.selected) {\n                this.current();\n            }\n            if (this.selected.disabled === true) {\n                this.selected.disabled = false;\n                this.selected.opener.removeClass('disabled');\n\n                /**\n                 * A section is enabled\n                 * @event SectionApi#enable.section\n                 * @param {Object} section - the section\n                 */\n                this.scope.trigger('enable.section', [this.selected]);\n            }\n            return this;\n        },\n\n        /**\n         * Disable the current section\n         *\n         * @returns {sectionapi} instance for chaining\n         * @fires SectionApi#disable.section\n         */\n        disable : function(){\n            if (!this.selected) {\n                this.current();\n            }\n            if (this.selected.disabled === false) {\n                this.selected.disabled = true;\n                this.selected.opener.addClass('disabled');\n\n                /**\n                 * A section is disabled\n                 * @event SectionApi#disable.section\n                 * @param {Object} section - the section\n                 */\n                this.scope.trigger('disable.section', [this.selected]);\n            }\n            return this;\n        },\n\n        /**\n         * Make the active section the selected. Useful before chaining with another method :\n         * @example section.current().show();\n         *\n         *\n         * @returns {SectionApi} instance for chaining\n         */\n        current : function(){\n            this.selected =  _(this.sections).where({'active' : true }).first();\n            return this;\n        },\n\n        /**\n         * This method enables you to create a new section.\n         * If the section already exists, it may be updated (panel's content)\n         *\n         * @param {Object} data - the section data\n         * @param {String} data.id - the section identifier\n         * @param {String} data.url - the section url\n         * @param {String} data.name - the section name (already translated please)\n         * @param {Boolean} [data.visible] - is the section opener (ie. the tab) shown ?\n         * @param {String} [data.content] - the panel content\n         *\n         * @returns {SectionApi} instance for chaining\n         */\n        create : function(data){\n            var $openersContainer = this.scope.find('.tab-container');\n            var $sectionOpener,\n                $sectionPanel,\n                section;\n\n            if (!_.isObject(data)) {\n                throw new TypeError(\"The create() method requires an object with section data as parameter.\");\n            }\n            if (!_.isString(data.id) || !_.isString(data.url) || !_.isString(data.name)) {\n                throw new TypeError(\"The create() method requires data with id, url and name to create a new section.\");\n            }\n            if (typeof data.visible === 'undefined') {\n                data.visible = true;\n            }\n\n            this.get(data.id);\n            section = this.selected && this.selected.id === data.id ? this.selected : undefined;\n\n\n            if (!section) {\n\n                //TODO use templates\n                $sectionPanel = $(`<div id=\"panel-${data.id}\" class=\"clear\"></div>`);\n                if(data.contentBlock === true){\n                    $sectionPanel.append('<section class=\"content-container\"><ul class=\"plain action-bar content-action-bar horizontal-action-bar\"></ul><div class=\"content-block\"></div></section>');\n                }\n                $sectionOpener = $(`<li class=\"small ${  !data.visible ? 'hidden' : '' }\"><a title=\"${data.name}\" data-url=\"${data.url}\" href=\"#panel-${  data.id }\">${data.name}</a></li>`);\n                $openersContainer.append($sectionOpener);\n                this.scope.append($sectionPanel);\n\n                section =  {\n                    id          : data.id,\n                    url         : data.url,\n                    name        : data.name,\n                    panel       : $sectionPanel,\n                    opener      : $sectionOpener,\n                    type        : 'content',\n                    active      : false\n                };\n                this.sections[data.id] = section;\n            }\n            section.url = section.url === data.url || data.url === undefined ? section.url : data.url;\n            this.selected = section;\n\n            if (data.content) {\n                if (data.contentBlock === true) {\n                    this.updateContentBlock(data.content);\n                } else {\n                    section.panel.html(data.content);\n                }\n\n            } else {\n                if (data.contentBlock === true) {\n                    this.loadContentBlock();\n                } else {\n                    this.load();\n                }\n            }\n\n            this._bindOpener($openersContainer);\n\n            return this;\n        },\n\n        /**\n         * Select a section using either it's id or url.\n         *\n         * @example section.get('manage_items').activate();\n         *\n         * @param {String} value - id, panel id, short or long URL\n         * @returns {SectionApi} instance for chaining\n         */\n        get : function(value){\n            var section;\n            if (!_.isString(value)) {\n                throw new TypeError(\"The get() method requires a string parameter, the section id or url.\");\n            }\n\n            //try to get the section assuming the value is the id or the url.\n            section =\n                this.sections[value] ||\n                this.sections[value.replace('panel-', '')] ||\n                _(this.sections).where({'url' : value }).first() ||\n                _(this.sections).where({'url' : context.root_url + value }).first();\n            if (section) {\n                this.selected = section;\n            } else {\n                this.current();\n            }\n\n            return this;\n        },\n\n        /**\n         * Loads content from a URL to the section's panel.\n         *\n         * @example section.get('manage_items').load();\n         *\n         * @param {String} [url] - the url to load, by default section's URL is used.\n         * @param {Object} [data] - data to add to the request\n         * @param {Function} [loaded] - callback once loaded\n         * @returns {SectionApi} instance for chaining\n         * @fires SectionApi#load.section\n         */\n        load : function load(url, data, loaded){\n            let self = this;\n\n            if (!this.selected) {\n                this.current();\n            }\n            url = url || this.selected.url;\n\n            if (this.selected.type === 'tree') {\n                this.selected.panel.addClass('content-panel');\n            } else {\n                this.selected.panel.removeClass('content-panel');\n            }\n\n            this.selected.panel.empty().load(url, data, function(response){\n\n                /**\n                 * Section content has been loaded\n                 * @event SectionApi#load.section\n                 * @param {Object} section - the section\n                 * @param {String} response - the received content\n                 */\n                self.scope.trigger('load.section', [self.selected, response]);\n\n                if (_.isFunction(loaded)) {\n                    loaded();\n                }\n            });\n\n            return this;\n        },\n\n        /**\n         * Clears content from the content block area.\n         **/\n        clearContentBlock: function clearContentBlock() {\n            if (!this.selected) {\n                return;\n            }\n            const $contentblock = $('.content-block', this.selected.panel);\n            if ($contentblock.length) {\n                $contentblock.empty();\n            }\n        },\n\n        /**\n         * Loads content from a URL but try to target first the content block area before the panel.\n         *\n         * @example section.get('manage_items').loadContentBlock('/taoItems/Items/edit');\n         *\n         * @param {String} [url] - the url to load, by default section's URL is used.\n         * @param {Object} [data] - data to add to the request\n         * @param {Function} [loaded] - callback once loaded\n         * @returns {SectionApi} instance for chaining\n         * @fires SectionApi#load.section\n         */\n        loadContentBlock : function loadContentBlock(url, data, loaded){\n            var $contentblock;\n\n            if (!this.selected) {\n                this.current();\n            }\n            url = url || this.selected.url;\n\n            if (this.selected.type === 'tree') {\n                this.selected.panel.addClass('content-panel');\n            } else {\n                this.selected.panel.removeClass('content-panel');\n            }\n\n            $contentblock = $('.content-block', this.selected.panel);\n\n            if ($contentblock.length) {\n\n                //do not yet trigger event on content block load, but may be required\n                $contentblock.empty().load(url, data, loaded);\n                return this;\n            }\n\n            return this.load(url, data, loaded);\n        },\n\n        /**\n         * Update content block's content or the panel if not found.\n         *\n         * @param {String} [html] - the new content\n         * @returns {SectionApi} instance for chaining\n         */\n        updateContentBlock : function(html){\n            var $contentblock = $('.content-block', this.selected.panel);\n\n            if($contentblock.length){\n                $contentblock.empty().html(html);\n            } else {\n                this.selected.panel.empty().html(html);\n            }\n            return this;\n        },\n\n        /**\n         * Sugar to help you listen for event on sections\n         * @param {String} eventName - the name of the event (without the namespace)\n         * @param {Function} cb - the event callbacks\n         * @returns {SectionApi} instance for chaining\n         */\n        on : function(eventName, cb){\n            let self = this;\n            this.scope.on(`${eventName}.section`, function() {\n                cb.apply(self, Array.prototype.slice.call(arguments, 1));\n            });\n            return this;\n        },\n\n        /**\n         * Sugar to help you remove listeners from sections\n         *\n         * @param {String} eventName - the name of the event (without the namespace)\n         * @returns {SectionApi} instance for chaining\n         */\n        off : function(eventName){\n            this.scope.off(`${eventName  }.section`);\n            return this;\n        }\n    };\n\n    return sectionApi;\n});\n\n","define('controller/Lock/locked',['jquery', 'i18n', 'helpers', 'lock', 'layout/section', 'ui/feedback'], \nfunction($, __, helpers, Lock, sectionApi, feedback){\n    'use strict';\n\t\n    return {\n        start : function(){\n\n\t\t    $(\".forcerelease\").click(function(e) {\n\t\t    \t\n\t\t        e.preventDefault();\n\t\t        \n\t\t        $.ajax({\n                    url: helpers._url('forceRelease', 'Lock', 'tao'),\n                    type: \"POST\",\n                    data : {uri : $(this).data('id')},\n                    dataType: 'json',\n                    success : function(response){\n                        if(response.success){\n        \t\t            feedback().success(__('The lock has been released'));\n                            $('.tree').trigger('refresh.taotree'); \n                        }\n                        else{\n        \t\t            feedback().error(__('Unable to release the lock'));\n                        }\n                    },\n                    error : function(){\n    \t\t            feedback().error(__('Unable to release the lock'));\n                    }\n                });\n\t\t        \n\t\t    });\n        }\n    }\n});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n */\n\ndefine('layout/version-warning',[\n    'jquery',\n    'jquery.cookie'\n],\n    function($){\n\n        'use strict';\n\n\n        var versionWarning = $('.version-warning');\n\n        /**\n         * Hide the warning and add a class to <html>\n         *\n         * @param slide\n         */\n        function hideWarning(slide) {\n\n            var callback = function() {\n                document.documentElement.className += ' no-version-warning';\n                versionWarning.trigger('hiding.versionwarning');\n            };\n\n            if(!slide) {\n                versionWarning.hide();\n                callback();\n            }\n            else {\n                versionWarning.slideUp('slow', function() {\n                    versionWarning.slideUp('slow', callback);\n                });\n            }\n        }\n\n    return {\n        /**\n         * Initialize behaviour of version warning\n         */\n        init : function(){\n            if($.cookie('versionWarning')) {\n                hideWarning(false);\n                return;\n            }\n\n            versionWarning.find('.close-trigger').on('click', function() {\n                $.cookie('versionWarning', true, { path: '/' });\n                hideWarning(true);\n            });\n\n        }\n    };\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * The controller dedicated to the login page.\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('controller/login',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'module',\n    'context',\n    'layout/loading-bar',\n    'layout/version-warning',\n    'ui/login/login',\n    'util/locale',\n    'core/store'\n], function ($, _, __, module, context, loadingBar, versionWarning, loginComponent, locale, store) {\n    'use strict';\n\n    var _defaults = {\n        disableAutocomplete: false,\n        enablePasswordReveal: false,\n        disableAutofocus: false,\n        message: {\n            error: ''\n        }\n    };\n\n    /**\n     * The login controller\n     */\n    return {\n\n        /**\n         * Controller entry point\n         */\n        start: function start() {\n            var conf = _.defaults({}, module.config(), _defaults);\n            var login = loginComponent($('#login-box-inner-container'), conf);\n\n            login.on('init', function() {\n                loadingBar.start();\n            }).after('render', function() {\n                versionWarning.init();\n                loadingBar.stop();\n            }).on('submit.login', function() {\n                loadingBar.start();\n            });\n\n            // adding attr for RTL languages\n            $('.small-navi').attr({dir: locale.getLanguageDirection(context.locale)});\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA ;\n */\n\n define('form/depends-on-property',[\n    'jquery',\n    'lodash'\n], function ($, _) {\n    'use strict';\n    /**\n     * Returns if the depedsOn select is hidden or not\n     * @param {jQuery} $container - the container of the property\n     * @returns {Boolean}\n     */\n    function _isHiddenDependsOn($container) {\n        const $typeElt = $('.property-type', $container);\n        if (!$typeElt || !$typeElt.val() || !$typeElt.val().trim()) {\n            return true;\n        }\n\n        const $listElt = $('.property-listvalues', $container);\n        if ($listElt && $listElt.val() && $listElt.val().trim()) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Toggles the visibility of the dependsOn select\n     * @param {jQuery} $dependsOnSelectbox - the selectbox of the dependsOn\n     * @param {jQuery} $wrapper - the wrapper of the dependsOn selectbox\n     * @param {jQuery} $container - the container of the property\n     */\n    function toggleDependsOn($dependsOnSelectbox, $wrapper, $container) {\n        $container = $container || $('.property-edit-container-open .property-heading-label ~ .property-edit-container');\n        if (!$container.length) {\n            return;\n        }\n\n        $dependsOnSelectbox = $dependsOnSelectbox || $container.find('.property-depends-on');\n        if (!$dependsOnSelectbox.length) {\n           return;\n        }\n\n        if (!$wrapper) {\n            $wrapper = $dependsOnSelectbox;\n            while (!_.isEqual($wrapper.parent()[0], $container[0])) {\n                $wrapper = $wrapper.parent();\n            }\n        }\n\n        if (!_isHiddenDependsOn($container)) {\n            $dependsOnSelectbox.removeAttr('disabled');\n            $wrapper.show();\n            return;\n        }\n\n        $dependsOnSelectbox.prop('disabled', \"disabled\");\n        $wrapper.hide();\n    }\n    /**\n     * Get the supported types for the dependsOn select box to be displayed\n     * @returns {Array}\n     */\n    function getSupportedTypes() {\n        return [\n            'longlist', // List - Single choice - Drop down\n            'multisearchlist', // List - Multiple choice - Search input\n            'singlesearchlist' // List - Single choice - Search input\n        ];\n    }\n\n    /**\n     * Check if the property has any current dependency by checking the dependson selectbox\n     * @param {jQuery} $container\n     * @returns {Boolean}\n     */\n    function hasAnyDependency($container) {\n        return _isHiddenDependsOn($container);\n    }\n\n    return {\n        toggle: toggleDependsOn,\n        getSupportedTypes: getSupportedTypes,\n        hasAnyDependency: hasAnyDependency\n    }\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA ;\n */\n\n define('form/filter-selects-values',[\n    'jquery',\n    'context',\n    'core/request',\n], function ($, context, request) {\n    'use strict';\n\n    function filterSelectOptions(allowedOptions, $secondarySelect, fromMultiple) {\n        const currentValue = $secondarySelect.val().trim();\n\n        if (!fromMultiple) {\n            $secondarySelect.empty().append(new Option('', ' '));\n\n            allowedOptions.forEach(option => {\n                $secondarySelect.append(new Option(option.label, option.uri));\n            });\n        } else {\n            // Remove all except currentValue (if it is allowed to stay) and default \" \"\n            $secondarySelect.find('option').each((i, existingOption) => {\n                if (existingOption.value !== ' '\n                    && (\n                        existingOption.value.trim() !== currentValue\n                        || !allowedOptions.find(opt => opt.uri === currentValue)\n                    )\n                ) {\n                    existingOption.remove();\n                }\n            });\n\n            // Add allowedOptions except currentValue\n            allowedOptions.forEach(option => {\n                if (option.uri.trim() !== currentValue) {\n                    $secondarySelect.append(new Option(option.label, option.uri));\n                }\n            });\n        }\n    }\n\n    function filterSelect2Options(allowedOptions, $secondarySelect) {\n        const input = $secondarySelect.next('input');\n        let newVal = [];\n        let existingAvailableValue;\n\n        if (!input) {\n            return;\n        }\n\n        input.val().split(',').forEach(value => {\n            existingAvailableValue = allowedOptions.find(opt => opt.uri === value);\n\n            if (existingAvailableValue) {\n                newVal.push(existingAvailableValue);\n            };\n        });\n\n        if (newVal.length) {\n            newVal = newVal.map(selectedValue => {\n                return {id: selectedValue.uri, text: selectedValue.label}\n            });\n\n            input.select2('data', newVal.length > 1 ? newVal : newVal[0]);\n        } else {\n            input.select2('val', '');\n        }\n    }\n\n    async function processFiltering($secondarySelect, allowedOptions, persistValues) {\n            const isSelect2 = $secondarySelect.hasClass('select2-container');\n\n            if (isSelect2) {\n                filterSelect2Options(allowedOptions, $secondarySelect);\n\n                return;\n            }\n\n            filterSelectOptions(allowedOptions, $secondarySelect, persistValues);\n    }\n\n    function getAllowedSecondaryValues(data) {\n        return request({\n            url: context.root_url + 'tao/PropertyValues/get',\n            data,\n            method: 'GET',\n            dataType: 'json',\n            noToken: true\n        });\n    }\n\n    async function filterSecondaryValues($container, selectedPrimaryProperty, persistValues) {\n        const $secondaryList = $container.find('.secondary-props-list > li > *');\n\n        for (let secondaryProp of $secondaryList.toArray()) {\n            let allowedOptions = [];\n            const $secondarySelect = $(secondaryProp).find('select, .select2-container');\n\n            if (!$secondarySelect.length) {\n                return;\n            }\n\n            const data = {\n                propertyUri: $secondarySelect.attr('id').replace('s2id_', ''),\n                parentListValues: selectedPrimaryProperty,\n            }\n\n            const response = await getAllowedSecondaryValues(data);\n            allowedOptions.push(...response.data);\n            processFiltering($secondarySelect, allowedOptions, persistValues);\n        }\n    }\n\n    return filterSecondaryValues;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA ;\n */\n\n define('form/secondary-property',[\n    'jquery',\n    'context',\n    './filter-selects-values'\n], function ($, context, filterSecondaryValues) {\n    'use strict';\n\n    function getSecondaryPropsList($primaryProp) {\n        let $secondaryPropsList = $primaryProp.find('.secondary-props-list');\n\n        if (!$secondaryPropsList.length) {\n            $secondaryPropsList = $('<ul class=\"secondary-props-list\"></ul>');\n            $primaryProp.append($secondaryPropsList);\n        }\n\n        return $secondaryPropsList;\n    }\n\n    function toggleDisableSecondary($container, disable = true) {\n        const $secondaryList = $container.find('.secondary-props-list > li > *');\n\n        $secondaryList.each((i, secondaryProp) => {\n            if (disable) {\n                $(secondaryProp).find('[data-depends-on-property]').attr('disabled', 'disabled');\n                $(secondaryProp).addClass('disabled');\n                clearSecondary($(secondaryProp));\n                return;\n            }\n\n            $(secondaryProp).find('[data-depends-on-property]').removeAttr('disabled');\n            $(secondaryProp).removeClass('disabled');\n        });\n    }\n\n    function clearSecondary($secondaryProp) {\n        const $select2Chosen = $secondaryProp.find('.select2-chosen');\n        if ($select2Chosen.length) {\n            $(this).find('> div > input').val('').trigger('change');\n            $select2Chosen.empty();\n            return;\n        }\n\n        const $selectElt = $secondaryProp.find('select[data-depends-on-property]');\n        if ($selectElt.length) {\n            $selectElt.each(function() {\n                $(this).find('option[selected]').removeAttr('selected');\n                $(this).find('option[value=\" \"]').attr('selected', 'selected');\n                $(this).trigger('change');\n            });\n            return;\n        }\n\n        const $inputElt = $secondaryProp.find('input');\n        if ($inputElt.length) {\n            $inputElt.each(function() {\n                $(this).val(null).trigger('change');\n            });\n        }\n    }\n\n    function initializeSecondaryProperties($container) {\n        const $props = $container.children();\n        let primaryPropsMap = new Map();\n        let $secondaryProps = $props.filter(function() {\n            return !!$(this).find('[data-depends-on-property]').length;\n        });\n\n        $secondaryProps.each((i, secondaryProp) => {\n            const primaryPropUri = $(secondaryProp).find('[data-depends-on-property]').data('depends-on-property');\n            let $primaryProp = $($props.filter(function() {\n                return !!$(this).find(`#${primaryPropUri}`).length;\n            })[0]);\n\n            if (!$primaryProp.length) {\n                return;\n            } else {\n                primaryPropsMap.has(primaryPropUri) ? null : primaryPropsMap.set(primaryPropUri, $primaryProp);\n                moveSecondaryProperty($(secondaryProp), $primaryProp);\n                const $primaryElt = $primaryProp.find(`[name=\"${primaryPropUri}\"]`);\n                toggleDisableSecondary($primaryProp, !$primaryElt.val().trim());\n            }\n        });\n\n        primaryPropsMap.forEach(($primaryProp, primaryPropUri) => {\n            addPrimaryPropertyListener($primaryProp, primaryPropUri);\n        })\n    }\n\n    function addPrimaryPropertyListener($primaryProp, primaryPropUri) {\n        $primaryProp.on('change', `[name=\"${primaryPropUri}\"]`, (e) => {\n            if (e.removed || e.added) {\n                // This is from a multiple input (i.e: multiple search input)\n                filterSecondaryValues($primaryProp, e.target.value.split(','), true);\n            } else {\n                // This is from a single input (i.e: single dropdown)\n                filterSecondaryValues($primaryProp, e.target.value.split(','));\n            }\n\n            toggleDisableSecondary($primaryProp, !e.target.value.trim());\n        });\n    }\n\n    function moveSecondaryProperty($secondaryProp, $primaryProp) {\n        const $secondaryPropsList = getSecondaryPropsList($primaryProp);\n        const $wrapper = $('<li></li>');\n        $secondaryPropsList.append($wrapper);\n        $wrapper.append($secondaryProp.detach());\n    }\n\n    return {\n        init: initializeSecondaryProperties,\n    }\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2018 (original work) Open Assessment Technologies SA ;\n */\n\ndefine('form/post-render-props',[\n    'jquery',\n    'i18n',\n    'context',\n    'ui/feedback',\n    './depends-on-property',\n    './secondary-property'\n], function (\n    $,\n    __,\n    context,\n    feedback,\n    dependsOn,\n    secondaryProps\n) {\n    'use strict';\n\n    function _createCopyToClipboardHandler($field) {\n        var\n            successFeedback = $field.data('copy-success-feedback')\n                || __('Resource Identifier has been copied to the clipboard'),\n            failureFeedback = $field.data('copy-failure-feedback')\n                || __('Resource Identifier could not be copied to the clipboard');\n\n        return function () {\n            var success;\n            try {\n                $field.select();\n                success = document.execCommand('copy');\n                $field.blur();\n                if (success) {\n                    feedback().success(successFeedback);\n                } else {\n                    feedback().error(failureFeedback);\n                }\n            } catch (err) {\n                feedback().error(__('Your browser does not support copying to the clipboard'));\n            }\n        }\n    }\n\n    function _cloneField($field) {\n        return $field.clone()\n            // To make MS browsers happy, value needs to be removed and re-added\n            .val('')\n            .attr({readonly: true, type: 'text'});\n    }\n\n    /**\n     * Add a field with URI of an item etc and a button to copy it to the clipboard\n     * @param $container\n     * @private\n     */\n    function _initializeCopyToClipboard($container) {\n        // Early return in case:\n        // 1. isInstanceForm that will not work with jquery|querySelector\n        // 2. The field has already been added\n        if (!document.getElementById('tao.forms.instance') || $('.uri-container').length) {\n            return;\n        }\n\n        $container.find('#id, .copy-to-clipboard').each(function () {\n            var $field = $(this),\n                $fieldCopy = _cloneField($field),\n                $button = $('<span>', {class: 'icon-clipboard clipboard-command', title: __('Copy to clipboard')}),\n                $label = $('<span>', {class: 'form_desc', text: __('Resource Identifier')}),\n                $fieldBox = $('<span>', {class: 'uri-container'}),\n                value = $field.val();\n\n            if ($field.attr('id') === 'id') {\n                $field.remove();\n                $field = $fieldCopy;\n\n                $fieldBox.append([$field, $button]);\n\n                $container.find('div')\n                    .first()\n                    .after($('<div>').append([$label, $fieldBox]));\n                $fieldBox.height($field.outerHeight());\n            } else {\n                $fieldBox.height($field.outerHeight());\n                $field.wrap($fieldBox).parent().append($button);\n            }\n\n            $button.on('click', _createCopyToClipboardHandler($field));\n            $field.addClass('final').val(value);\n        });\n    }\n\n\n    /**\n     * Toggle availability of mode switch (advanced/simple)\n     *\n     * @param newMode\n     * @private\n     */\n    function _toggleModeBtn(newMode) {\n        var $modeToggle = $('.property-mode');\n        if (newMode === 'disabled') {\n            $modeToggle.addClass('disabled');\n        } else {\n            $modeToggle.removeClass('disabled');\n        }\n    }\n\n    /**\n     * Reposition the radio buttons or checkboxes of a property and make them look nice.\n     *\n     * @param $container the container in which to search and upgrade buttons\n     * @param type string the type of input we want to upgrade 'checkbox' or 'radio' by default we use radio\n     * @private\n     */\n    function _upgradeButtons($container, type) {\n\n        //if the type is not radio or checkbox we put by default radio\n        if (type !== 'radio' && type !== 'checkbox') {\n            type = 'radio';\n        }\n        var selector = '.form_checklst';\n        var notSelector = '';\n        if (type === 'radio') {\n            selector = '.form_radlst';\n            notSelector = '.form_checklst, ';\n        }\n\n        $container.find(selector).not(notSelector + '.property-' + type + '-list').each(function () {\n            var $radioList = $(this);\n            $radioList.addClass('property-' + type + '-list');\n            $radioList.parent().addClass('property-' + type + '-list-box');\n            $radioList.each(function () {\n                var $block = $(this),\n                    $inputs = $block.find('input');\n\n                if ($inputs.length <= 2) {\n                    $block.find('br').remove();\n                }\n\n                $inputs.each(function () {\n                    var $input = $(this),\n                        $label = $block.find('label[for=\"' + this.id + '\"]'),\n                        $icon = $('<span>', {'class': 'icon-' + type});\n\n                    $label.prepend($icon);\n                    $label.prepend($input);\n                });\n            });\n        });\n    }\n\n\n    /**\n     * Get reference to property container. If it doesn't' exist create one and add it to the DOM.\n     *\n     * @returns {*|HTMLElement}\n     */\n    function getPropertyContainer() {\n        var $propertyContainer = $('.content-block .property-container');\n        if ($propertyContainer.length) {\n            return $propertyContainer;\n        }\n        $propertyContainer = $('<div>', {'class': 'property-container'});\n        $('.content-block .form-group').first().before($propertyContainer);\n        return $propertyContainer;\n    }\n\n\n    /**\n     * Add properties to the designated container. Also add some CSS classes for easier access.\n     *\n     * @param $properties\n     * @private\n     */\n    function _wrapPropsInContainer($properties) {\n        var $propertyContainer = getPropertyContainer(),\n            // the reason why this is not done via a simple counter is that\n            // the function could have been called multiple times, e.g. when\n            // properties are created dynamically.\n            hasAlreadyProperties = !!$propertyContainer.find('.property-block').length;\n\n\n        $properties.each(function () {\n            var $property = $(this);\n            if ($property.attr !== undefined) {\n                var type = (function () {\n                    var $propertyMode = $('.property-mode');\n\n                    switch ($property.attr('id').replace(/_?property_[\\d]+/, '')) {\n                        case 'ro':\n                            return 'readonly-property';\n                        case 'parent':\n                            return 'parent-property';\n                        default:\n                            var $editIcon = $property.find('.icon-edit'),\n                                $editContainer = $property.children('div:first');\n\n                            var $indexIcon = $property.find('.icon-find');\n\n                            $editContainer.addClass('property-edit-container');\n\n\n                            _hideProperties($editContainer);\n                            _hideIndexes($editContainer);\n\n                            if ($propertyMode.hasClass('property-mode-simple')) {\n                                $indexIcon.hide();\n                            } else if ($propertyMode.hasClass('property-mode-advanced')) {\n                                $indexIcon.show();\n                            }\n\n                            //on click on edit icon show property form or hide it\n                            $editIcon.on('click', function () {\n                                //form is close so open it (hide index, show property)\n                                if (!$editContainer.parent().hasClass('property-edit-container-open')) {\n                                    //hide index and show properties\n                                    _hideIndexes($editContainer);\n                                    _showProperties($editContainer);\n                                    $editContainer.slideToggle(function () {\n                                        $editContainer.parent().toggleClass('property-edit-container-open');\n                                    });\n                                }\n                                //it is open so switch between index and property or close it\n                                else {\n                                    // close form\n                                    if ($($('.property', $editContainer)[0]).is(':visible')) {\n                                        $editContainer.slideToggle(function () {\n                                            $editContainer.parent().toggleClass('property-edit-container-open');\n                                            //hide properties\n                                            _hideProperties($editContainer);\n                                        });\n                                    }\n                                    // hide index and show properties\n                                    else {\n                                        //hide index properties\n                                        _hideIndexes($editContainer);\n                                        //show properties\n                                        _showProperties($editContainer);\n                                    }\n                                }\n                            });\n\n                            //on click on index icon show index form or hide it\n                            $indexIcon.on('click', function () {\n                                //if form property is simple we can show index form\n                                if ($('.property-mode').hasClass('property-mode-advanced')) {\n                                    //form is close so open it (hide property, show index)\n                                    if (!$editContainer.parent().hasClass('property-edit-container-open')) {\n                                        //hide index and show properties\n                                        _hideProperties($editContainer);\n                                        _showIndexes($editContainer);\n                                        $editContainer.slideToggle(function () {\n                                            $editContainer.parent().toggleClass('property-edit-container-open');\n                                        });\n                                    }\n                                    //it is open so switch between index and property or close it\n                                    else {\n                                        // close form\n                                        if ($($('.index', $editContainer)[0]).is(':visible')) {\n                                            $editContainer.slideToggle(function () {\n                                                $editContainer.parent().toggleClass('property-edit-container-open');\n                                                //hide indexes\n                                                _hideIndexes($editContainer);\n                                            });\n                                        }\n                                        // hide properties and show indexes\n                                        else {\n                                            _hideProperties($editContainer);\n                                            //show properties\n                                            _showIndexes($editContainer);\n                                        }\n                                    }\n                                }\n                            });\n                            return 'regular-property';\n                    }\n                }());\n                $property.addClass(!hasAlreadyProperties ? 'property-block-first property-block ' + type : 'property-block ' + type);\n                $propertyContainer.append($property);\n                hasAlreadyProperties = true;\n            }\n        });\n    }\n\n\n    /**\n     * Make properties look nice\n     *\n     * @param $properties (optional)\n     */\n    function init($properties) {\n        var $container = $('.content-block .xhtml_form:first form');\n        if (!$container.length) {\n            return;\n        }\n\n        _initializeCopyToClipboard($container);\n\n        // case no or empty argument -> find all properties not upgraded yet\n        if (!$properties || !$properties.length) {\n            $properties = $container.children('div[id*=\"property_\"]').not('.property-block');\n        }\n        if (!$properties.length) {\n            if ($container.children('[name=\"tao.forms.instance\"]').length) {\n                secondaryProps.init($container);\n            }\n            return;\n        }\n        _wrapPropsInContainer($properties);\n        _upgradeButtons($container, 'radio');\n        _upgradeButtons($container, 'checkbox');\n        _toggleModeBtn('disabled');\n        _showErrors($container);\n        _checkRegularPropertyLabels($properties);\n    }\n\n    function _showErrors($container) {\n        var $editContainer;\n        var $error = $container.find('.error');\n        if ($error.length) {\n            $editContainer = $error.closest('.property-edit-container');\n            if ($editContainer.length) {\n                _hideIndexes($editContainer);\n                _showProperties($editContainer);\n                $editContainer.slideToggle(function () {\n                    $editContainer.parent().toggleClass('property-edit-container-open');\n                });\n            }\n        }\n\n    }\n\n    function _hideProperties($container) {\n        $('.property', $container).each(function () {\n            var $currentTarget = $(this);\n            if ($currentTarget.val() === 'notEmpty' && !context.featureFlags.FEATURE_FLAG_LISTS_DEPENDENCY_ENABLED) {\n                $currentTarget.hide();\n            }\n            while (!_.isEqual($currentTarget.parent()[0], $container[0])) {\n                $currentTarget = $currentTarget.parent();\n            }\n            $currentTarget.hide();\n        });\n        _toggleModeBtn('disabled');\n    }\n\n    function _showProperties($container) {\n        $('.property', $container).each(function () {\n            var $currentTarget = $(this);\n            while (!_.isEqual($currentTarget.parent()[0], $container[0])) {\n                $currentTarget = $currentTarget.parent();\n            }\n            if ($(this).hasClass('property-depends-on')) {\n                if ($(this)[0].length > 1) {\n                    dependsOn.toggle($(this), $currentTarget, $container);\n                }\n                return;\n            }\n            $currentTarget.show();\n        });\n        //show or hide the list values select\n        var elt = $('[class*=\"property-type\"]', $container).parent(\"div\").next(\"div\");\n\n        var propertiesTypes = ['list', 'tree'];\n        var re = new RegExp(propertiesTypes.join('$|').concat('$'));\n\n        if (re.test($('[class*=\"property-type\"]', $container).val())) {\n            if (elt.css('display') === 'none') {\n                elt.show();\n                elt.find('select').removeAttr('disabled');\n            }\n        } else if (elt.css('display') !== 'none') {\n            elt.css('display', 'none');\n            elt.find('select').prop('disabled', \"disabled\");\n        }\n\n        _toggleModeBtn('enabled');\n    }\n\n    function _hideIndexes($container) {\n        $('.index', $container).each(function () {\n            var $currentTarget = $(this);\n            while (!_.isEqual($currentTarget.parent()[0], $container[0])) {\n                $currentTarget = $currentTarget.parent();\n            }\n            $currentTarget.hide();\n        });\n        $('.index-remover', $container).each(function () {\n            $(this).parent().hide();\n        });\n    }\n\n    function _showIndexes($container) {\n        $('.index', $container).each(function () {\n            var $currentTarget = $(this);\n            while (!_.isEqual($currentTarget.parent()[0], $container[0])) {\n                $currentTarget = $currentTarget.parent();\n            }\n            $currentTarget.show();\n        });\n        $('.index-remover', $container).each(function () {\n            $(this).parent().show();\n        });\n    }\n\n    /**\n     * Checks and updates property labels\n     * @param {Object} $properties - properties object\n     */\n    function _checkRegularPropertyLabels($properties) {\n        $properties.each(function() {\n            if($(this).hasClass('regular-property')) {\n                var $parentHeadingLabel = $(this).find('.property-heading-label');\n                var $editBlockLabel = $(this).find('.property-edit-container input[name$=\"_label\"]');\n\n                if ($editBlockLabel.val() !== '') {\n                    $parentHeadingLabel.text($editBlockLabel.val());\n                }\n            }\n        });\n    }\n\n\n    return {\n        /**\n         * Initialize post renderer, this can be done multiple times\n         */\n        init: init,\n        getPropertyContainer: getPropertyContainer\n    };\n});\n\n\n\n","define('form/property',['jquery', 'lodash', 'form/post-render-props'], function ($, _, postRenderProps) {\n\n    /**\n     * The data context for actions\n     * @typedef {Object} ActionContext\n     * @property {String} [uri] - the resource uri\n     * @property {String} [classUri] - the class uri\n     */\n\n    /**\n     * @exports form/property\n     */\n    var propertyManager = {\n\n        /**\n         * Add a new property\n         * @param {String} classUri\n         * @param {String} url\n         */\n        add: function (classUri, url) {\n            var $existingProperties = $('.property-block'),\n                index = $existingProperties.length;\n\n            $existingProperties.each(function () {\n                index = Math.max(parseInt(this.id.replace(/[\\D]+/, '')), index);\n            });\n            index++;\n\n            $.ajax({\n                url: url,\n                type: \"POST\",\n                data: {\n                    index: index,\n                    id: classUri\n                },\n                dataType: 'html',\n                success: function (response) {\n\n                    var $response = $(response),\n                        property = $response.first();\n                    if($response.length > 1){\n                        var script = $response.last();\n                        script.appendTo(property);\n                    }\n\n                    postRenderProps.init(property);\n                }\n            });\n        },\n        /**\n         * Remove  property\n         * @param {String} uri\n         * @param {String} classUri\n         * @param {String} url\n         */\n        remove: function (uri, classUri, url, successCallback) {\n\n            $.ajax({\n                url: url,\n                type: \"POST\",\n                data: {\n                    uri: uri,\n                    classUri: classUri\n                },\n                dataType: 'html',\n                success: function () {\n                    if (_.isFunction(successCallback)) {\n                        successCallback();\n                    }\n                }\n            });\n        }\n\n    };\n\n    return propertyManager;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 Open Assessment Technologies SA;\n */\n\n/**\n * Feature visibility check examples:\n *  configuration: {path/featureA: 'show'}\n *\n *  feature.isVisible('path/featureA') return true\n *  feature.isVisible('path/featureB') return true\n *  feature.isVisible('path/featureB', false) return false\n */\ndefine('services/features',['module', 'core/logger'], function (module, loggerFactory) {\n    'use strict';\n    const config = module.config();\n    const featuresVisibilityList = config.visibility || {};\n    const featuresKeys = Object.keys(featuresVisibilityList);\n    const logger = loggerFactory('services/features');\n\n    /**\n     * Build regexp from lookupPath and converting '*' to '\\S+'\n     * @param {String} lookupPath raw string of path to lookup\n     * @returns {RegExp} regexp to lookup in features list\n     */\n    const buildRegexp = lookupPath => {\n        lookupPath = lookupPath.replace('*', '\\\\S+');\n\n        try {\n            return new RegExp(`^${lookupPath}$`);\n        } catch (e) {\n            logger.warn(`Lookup feature path ${lookupPath} was not found`);\n            return new RegExp('^\\0$');\n        }\n    };\n\n    return {\n        /**\n         * Check if the feature is visible by provided featurePath\n         * and check 'show' or 'hide' status from configuration\n         * second parameter is visibility by default if feature is missed from configuration.\n         * @param {String} featurePath full path to feature ex('items/feature')\n         * @param {Boolean} isVisibleByDefault feature visibility if missed from configurations\n         * @returns {Boolean} true if feature is visible\n         */\n        isVisible(featurePath = '', isVisibleByDefault = true) {\n            let matchingPath = null;\n\n            featuresKeys.some(path => {\n                const exactMatch = path === featurePath;\n\n                if (exactMatch || buildRegexp(path).test(featurePath)) {\n                    matchingPath = path;\n                }\n\n                if (exactMatch) {\n                    return true;\n                }\n            });\n\n            return matchingPath === null ? isVisibleByDefault : featuresVisibilityList[matchingPath] === 'show';\n        }\n    };\n});\n\n","/* flatpickr v4.5.7, @license MIT */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('lib/flatpickr/flatpickr',factory) :\n    (global = global || self, global.flatpickr = factory());\n}(this, function () { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    var HOOKS = [\n        \"onChange\",\n        \"onClose\",\n        \"onDayCreate\",\n        \"onDestroy\",\n        \"onKeyDown\",\n        \"onMonthChange\",\n        \"onOpen\",\n        \"onParseConfig\",\n        \"onReady\",\n        \"onValueUpdate\",\n        \"onYearChange\",\n        \"onPreCalendarPosition\",\n    ];\n    var defaults = {\n        _disable: [],\n        _enable: [],\n        allowInput: false,\n        altFormat: \"F j, Y\",\n        altInput: false,\n        altInputClass: \"form-control input\",\n        animate: typeof window === \"object\" &&\n            window.navigator.userAgent.indexOf(\"MSIE\") === -1,\n        ariaDateFormat: \"F j, Y\",\n        clickOpens: true,\n        closeOnSelect: true,\n        conjunction: \", \",\n        dateFormat: \"Y-m-d\",\n        defaultHour: 12,\n        defaultMinute: 0,\n        defaultSeconds: 0,\n        disable: [],\n        disableMobile: false,\n        enable: [],\n        enableSeconds: false,\n        enableTime: false,\n        errorHandler: function (err) {\n            return typeof console !== \"undefined\" && console.warn(err);\n        },\n        getWeek: function (givenDate) {\n            var date = new Date(givenDate.getTime());\n            date.setHours(0, 0, 0, 0);\n            // Thursday in current week decides the year.\n            date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n            // January 4 is always in week 1.\n            var week1 = new Date(date.getFullYear(), 0, 4);\n            // Adjust to Thursday in week 1 and count number of weeks from date to week1.\n            return (1 +\n                Math.round(((date.getTime() - week1.getTime()) / 86400000 -\n                    3 +\n                    ((week1.getDay() + 6) % 7)) /\n                    7));\n        },\n        hourIncrement: 1,\n        ignoredFocusElements: [],\n        inline: false,\n        locale: \"default\",\n        minuteIncrement: 5,\n        mode: \"single\",\n        nextArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>\",\n        noCalendar: false,\n        now: new Date(),\n        onChange: [],\n        onClose: [],\n        onDayCreate: [],\n        onDestroy: [],\n        onKeyDown: [],\n        onMonthChange: [],\n        onOpen: [],\n        onParseConfig: [],\n        onReady: [],\n        onValueUpdate: [],\n        onYearChange: [],\n        onPreCalendarPosition: [],\n        plugins: [],\n        position: \"auto\",\n        positionElement: undefined,\n        prevArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>\",\n        shorthandCurrentMonth: false,\n        showMonths: 1,\n        static: false,\n        time_24hr: false,\n        weekNumbers: false,\n        wrap: false\n    };\n\n    var english = {\n        weekdays: {\n            shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n            longhand: [\n                \"Sunday\",\n                \"Monday\",\n                \"Tuesday\",\n                \"Wednesday\",\n                \"Thursday\",\n                \"Friday\",\n                \"Saturday\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"May\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Oct\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"January\",\n                \"February\",\n                \"March\",\n                \"April\",\n                \"May\",\n                \"June\",\n                \"July\",\n                \"August\",\n                \"September\",\n                \"October\",\n                \"November\",\n                \"December\",\n            ]\n        },\n        daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n        firstDayOfWeek: 0,\n        ordinal: function (nth) {\n            var s = nth % 100;\n            if (s > 3 && s < 21)\n                return \"th\";\n            switch (s % 10) {\n                case 1:\n                    return \"st\";\n                case 2:\n                    return \"nd\";\n                case 3:\n                    return \"rd\";\n                default:\n                    return \"th\";\n            }\n        },\n        rangeSeparator: \" to \",\n        weekAbbreviation: \"Wk\",\n        scrollTitle: \"Scroll to increment\",\n        toggleTitle: \"Click to toggle\",\n        amPM: [\"AM\", \"PM\"],\n        yearAriaLabel: \"Year\"\n    };\n\n    var pad = function (number) { return (\"0\" + number).slice(-2); };\n    var int = function (bool) { return (bool === true ? 1 : 0); };\n    /* istanbul ignore next */\n    function debounce(func, wait, immediate) {\n        if (immediate === void 0) { immediate = false; }\n        var timeout;\n        return function () {\n            var context = this, args = arguments;\n            timeout !== null && clearTimeout(timeout);\n            timeout = window.setTimeout(function () {\n                timeout = null;\n                if (!immediate)\n                    func.apply(context, args);\n            }, wait);\n            if (immediate && !timeout)\n                func.apply(context, args);\n        };\n    }\n    var arrayify = function (obj) {\n        return obj instanceof Array ? obj : [obj];\n    };\n\n    function toggleClass(elem, className, bool) {\n        if (bool === true)\n            return elem.classList.add(className);\n        elem.classList.remove(className);\n    }\n    function createElement(tag, className, content) {\n        var e = window.document.createElement(tag);\n        className = className || \"\";\n        content = content || \"\";\n        e.className = className;\n        if (content !== undefined)\n            e.textContent = content;\n        return e;\n    }\n    function clearNode(node) {\n        while (node.firstChild)\n            node.removeChild(node.firstChild);\n    }\n    function findParent(node, condition) {\n        if (condition(node))\n            return node;\n        else if (node.parentNode)\n            return findParent(node.parentNode, condition);\n        return undefined; // nothing found\n    }\n    function createNumberInput(inputClassName, opts) {\n        var wrapper = createElement(\"div\", \"numInputWrapper\"), numInput = createElement(\"input\", \"numInput \" + inputClassName), arrowUp = createElement(\"span\", \"arrowUp\"), arrowDown = createElement(\"span\", \"arrowDown\");\n        if (navigator.userAgent.indexOf(\"MSIE 9.0\") === -1) {\n            numInput.type = \"number\";\n        }\n        else {\n            numInput.type = \"text\";\n            numInput.pattern = \"\\\\d*\";\n        }\n        if (opts !== undefined)\n            for (var key in opts)\n                numInput.setAttribute(key, opts[key]);\n        wrapper.appendChild(numInput);\n        wrapper.appendChild(arrowUp);\n        wrapper.appendChild(arrowDown);\n        return wrapper;\n    }\n    function getEventTarget(event) {\n        if (typeof event.composedPath === \"function\") {\n            var path = event.composedPath();\n            return path[0];\n        }\n        return event.target;\n    }\n\n    var do_nothing = function () { return undefined; };\n    var monthToStr = function (monthNumber, shorthand, locale) { return locale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber]; };\n    var revFormat = {\n        D: do_nothing,\n        F: function (dateObj, monthName, locale) {\n            dateObj.setMonth(locale.months.longhand.indexOf(monthName));\n        },\n        G: function (dateObj, hour) {\n            dateObj.setHours(parseFloat(hour));\n        },\n        H: function (dateObj, hour) {\n            dateObj.setHours(parseFloat(hour));\n        },\n        J: function (dateObj, day) {\n            dateObj.setDate(parseFloat(day));\n        },\n        K: function (dateObj, amPM, locale) {\n            dateObj.setHours((dateObj.getHours() % 12) +\n                12 * int(new RegExp(locale.amPM[1], \"i\").test(amPM)));\n        },\n        M: function (dateObj, shortMonth, locale) {\n            dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));\n        },\n        S: function (dateObj, seconds) {\n            dateObj.setSeconds(parseFloat(seconds));\n        },\n        U: function (_, unixSeconds) { return new Date(parseFloat(unixSeconds) * 1000); },\n        W: function (dateObj, weekNum) {\n            var weekNumber = parseInt(weekNum);\n            return new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);\n        },\n        Y: function (dateObj, year) {\n            dateObj.setFullYear(parseFloat(year));\n        },\n        Z: function (_, ISODate) { return new Date(ISODate); },\n        d: function (dateObj, day) {\n            dateObj.setDate(parseFloat(day));\n        },\n        h: function (dateObj, hour) {\n            dateObj.setHours(parseFloat(hour));\n        },\n        i: function (dateObj, minutes) {\n            dateObj.setMinutes(parseFloat(minutes));\n        },\n        j: function (dateObj, day) {\n            dateObj.setDate(parseFloat(day));\n        },\n        l: do_nothing,\n        m: function (dateObj, month) {\n            dateObj.setMonth(parseFloat(month) - 1);\n        },\n        n: function (dateObj, month) {\n            dateObj.setMonth(parseFloat(month) - 1);\n        },\n        s: function (dateObj, seconds) {\n            dateObj.setSeconds(parseFloat(seconds));\n        },\n        u: function (_, unixMillSeconds) {\n            return new Date(parseFloat(unixMillSeconds));\n        },\n        w: do_nothing,\n        y: function (dateObj, year) {\n            dateObj.setFullYear(2000 + parseFloat(year));\n        }\n    };\n    var tokenRegex = {\n        D: \"(\\\\w+)\",\n        F: \"(\\\\w+)\",\n        G: \"(\\\\d\\\\d|\\\\d)\",\n        H: \"(\\\\d\\\\d|\\\\d)\",\n        J: \"(\\\\d\\\\d|\\\\d)\\\\w+\",\n        K: \"\",\n        M: \"(\\\\w+)\",\n        S: \"(\\\\d\\\\d|\\\\d)\",\n        U: \"(.+)\",\n        W: \"(\\\\d\\\\d|\\\\d)\",\n        Y: \"(\\\\d{4})\",\n        Z: \"(.+)\",\n        d: \"(\\\\d\\\\d|\\\\d)\",\n        h: \"(\\\\d\\\\d|\\\\d)\",\n        i: \"(\\\\d\\\\d|\\\\d)\",\n        j: \"(\\\\d\\\\d|\\\\d)\",\n        l: \"(\\\\w+)\",\n        m: \"(\\\\d\\\\d|\\\\d)\",\n        n: \"(\\\\d\\\\d|\\\\d)\",\n        s: \"(\\\\d\\\\d|\\\\d)\",\n        u: \"(.+)\",\n        w: \"(\\\\d\\\\d|\\\\d)\",\n        y: \"(\\\\d{2})\"\n    };\n    var formats = {\n        // get the date in UTC\n        Z: function (date) { return date.toISOString(); },\n        // weekday name, short, e.g. Thu\n        D: function (date, locale, options) {\n            return locale.weekdays.shorthand[formats.w(date, locale, options)];\n        },\n        // full month name e.g. January\n        F: function (date, locale, options) {\n            return monthToStr(formats.n(date, locale, options) - 1, false, locale);\n        },\n        // padded hour 1-12\n        G: function (date, locale, options) {\n            return pad(formats.h(date, locale, options));\n        },\n        // hours with leading zero e.g. 03\n        H: function (date) { return pad(date.getHours()); },\n        // day (1-30) with ordinal suffix e.g. 1st, 2nd\n        J: function (date, locale) {\n            return locale.ordinal !== undefined\n                ? date.getDate() + locale.ordinal(date.getDate())\n                : date.getDate();\n        },\n        // AM/PM\n        K: function (date, locale) { return locale.amPM[int(date.getHours() > 11)]; },\n        // shorthand month e.g. Jan, Sep, Oct, etc\n        M: function (date, locale) {\n            return monthToStr(date.getMonth(), true, locale);\n        },\n        // seconds 00-59\n        S: function (date) { return pad(date.getSeconds()); },\n        // unix timestamp\n        U: function (date) { return date.getTime() / 1000; },\n        W: function (date, _, options) {\n            return options.getWeek(date);\n        },\n        // full year e.g. 2016\n        Y: function (date) { return date.getFullYear(); },\n        // day in month, padded (01-30)\n        d: function (date) { return pad(date.getDate()); },\n        // hour from 1-12 (am/pm)\n        h: function (date) { return (date.getHours() % 12 ? date.getHours() % 12 : 12); },\n        // minutes, padded with leading zero e.g. 09\n        i: function (date) { return pad(date.getMinutes()); },\n        // day in month (1-30)\n        j: function (date) { return date.getDate(); },\n        // weekday name, full, e.g. Thursday\n        l: function (date, locale) {\n            return locale.weekdays.longhand[date.getDay()];\n        },\n        // padded month number (01-12)\n        m: function (date) { return pad(date.getMonth() + 1); },\n        // the month number (1-12)\n        n: function (date) { return date.getMonth() + 1; },\n        // seconds 0-59\n        s: function (date) { return date.getSeconds(); },\n        // Unix Milliseconds\n        u: function (date) { return date.getTime(); },\n        // number of the day of the week\n        w: function (date) { return date.getDay(); },\n        // last two digits of year e.g. 16 for 2016\n        y: function (date) { return String(date.getFullYear()).substring(2); }\n    };\n\n    var createDateFormatter = function (_a) {\n        var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;\n        return function (dateObj, frmt, overrideLocale) {\n            var locale = overrideLocale || l10n;\n            if (config.formatDate !== undefined) {\n                return config.formatDate(dateObj, frmt, locale);\n            }\n            return frmt\n                .split(\"\")\n                .map(function (c, i, arr) {\n                return formats[c] && arr[i - 1] !== \"\\\\\"\n                    ? formats[c](dateObj, locale, config)\n                    : c !== \"\\\\\"\n                        ? c\n                        : \"\";\n            })\n                .join(\"\");\n        };\n    };\n    var createDateParser = function (_a) {\n        var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;\n        return function (date, givenFormat, timeless, customLocale) {\n            if (date !== 0 && !date)\n                return undefined;\n            var locale = customLocale || l10n;\n            var parsedDate;\n            var date_orig = date;\n            if (date instanceof Date)\n                parsedDate = new Date(date.getTime());\n            else if (typeof date !== \"string\" &&\n                date.toFixed !== undefined // timestamp\n            )\n                // create a copy\n                parsedDate = new Date(date);\n            else if (typeof date === \"string\") {\n                // date string\n                var format = givenFormat || (config || defaults).dateFormat;\n                var datestr = String(date).trim();\n                if (datestr === \"today\") {\n                    parsedDate = new Date();\n                    timeless = true;\n                }\n                else if (/Z$/.test(datestr) ||\n                    /GMT$/.test(datestr) // datestrings w/ timezone\n                )\n                    parsedDate = new Date(date);\n                else if (config && config.parseDate)\n                    parsedDate = config.parseDate(date, format);\n                else {\n                    parsedDate =\n                        !config || !config.noCalendar\n                            ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0)\n                            : new Date(new Date().setHours(0, 0, 0, 0));\n                    var matched = void 0, ops = [];\n                    for (var i = 0, matchIndex = 0, regexStr = \"\"; i < format.length; i++) {\n                        var token_1 = format[i];\n                        var isBackSlash = token_1 === \"\\\\\";\n                        var escaped = format[i - 1] === \"\\\\\" || isBackSlash;\n                        if (tokenRegex[token_1] && !escaped) {\n                            regexStr += tokenRegex[token_1];\n                            var match = new RegExp(regexStr).exec(date);\n                            if (match && (matched = true)) {\n                                ops[token_1 !== \"Y\" ? \"push\" : \"unshift\"]({\n                                    fn: revFormat[token_1],\n                                    val: match[++matchIndex]\n                                });\n                            }\n                        }\n                        else if (!isBackSlash)\n                            regexStr += \".\"; // don't really care\n                        ops.forEach(function (_a) {\n                            var fn = _a.fn, val = _a.val;\n                            return (parsedDate = fn(parsedDate, val, locale) || parsedDate);\n                        });\n                    }\n                    parsedDate = matched ? parsedDate : undefined;\n                }\n            }\n            /* istanbul ignore next */\n            if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {\n                config.errorHandler(new Error(\"Invalid date provided: \" + date_orig));\n                return undefined;\n            }\n            if (timeless === true)\n                parsedDate.setHours(0, 0, 0, 0);\n            return parsedDate;\n        };\n    };\n    /**\n     * Compute the difference in dates, measured in ms\n     */\n    function compareDates(date1, date2, timeless) {\n        if (timeless === void 0) { timeless = true; }\n        if (timeless !== false) {\n            return (new Date(date1.getTime()).setHours(0, 0, 0, 0) -\n                new Date(date2.getTime()).setHours(0, 0, 0, 0));\n        }\n        return date1.getTime() - date2.getTime();\n    }\n    var isBetween = function (ts, ts1, ts2) {\n        return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);\n    };\n    var duration = {\n        DAY: 86400000\n    };\n\n    if (typeof Object.assign !== \"function\") {\n        Object.assign = function (target) {\n            var args = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n            }\n            if (!target) {\n                throw TypeError(\"Cannot convert undefined or null to object\");\n            }\n            var _loop_1 = function (source) {\n                if (source) {\n                    Object.keys(source).forEach(function (key) { return (target[key] = source[key]); });\n                }\n            };\n            for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n                var source = args_1[_a];\n                _loop_1(source);\n            }\n            return target;\n        };\n    }\n\n    var DEBOUNCED_CHANGE_MS = 300;\n    function FlatpickrInstance(element, instanceConfig) {\n        var self = {\n            config: __assign({}, flatpickr.defaultConfig),\n            l10n: english\n        };\n        self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n        self._handlers = [];\n        self._bind = bind;\n        self._setHoursFromDate = setHoursFromDate;\n        self._positionCalendar = positionCalendar;\n        self.changeMonth = changeMonth;\n        self.changeYear = changeYear;\n        self.clear = clear;\n        self.close = close;\n        self._createElement = createElement;\n        self.destroy = destroy;\n        self.isEnabled = isEnabled;\n        self.jumpToDate = jumpToDate;\n        self.open = open;\n        self.redraw = redraw;\n        self.set = set;\n        self.setDate = setDate;\n        self.toggle = toggle;\n        function setupHelperFunctions() {\n            self.utils = {\n                getDaysInMonth: function (month, yr) {\n                    if (month === void 0) { month = self.currentMonth; }\n                    if (yr === void 0) { yr = self.currentYear; }\n                    if (month === 1 && ((yr % 4 === 0 && yr % 100 !== 0) || yr % 400 === 0))\n                        return 29;\n                    return self.l10n.daysInMonth[month];\n                }\n            };\n        }\n        function init() {\n            self.element = self.input = element;\n            self.isOpen = false;\n            parseConfig();\n            setupLocale();\n            setupInputs();\n            setupDates();\n            setupHelperFunctions();\n            if (!self.isMobile)\n                build();\n            bindEvents();\n            if (self.selectedDates.length || self.config.noCalendar) {\n                if (self.config.enableTime) {\n                    setHoursFromDate(self.config.noCalendar\n                        ? self.latestSelectedDateObj || self.config.minDate\n                        : undefined);\n                }\n                updateValue(false);\n            }\n            setCalendarWidth();\n            self.showTimeInput =\n                self.selectedDates.length > 0 || self.config.noCalendar;\n            var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n            /* TODO: investigate this further\n        \n              Currently, there is weird positioning behavior in safari causing pages\n              to scroll up. https://github.com/chmln/flatpickr/issues/563\n        \n              However, most browsers are not Safari and positioning is expensive when used\n              in scale. https://github.com/chmln/flatpickr/issues/1096\n            */\n            if (!self.isMobile && isSafari) {\n                positionCalendar();\n            }\n            triggerEvent(\"onReady\");\n        }\n        function bindToInstance(fn) {\n            return fn.bind(self);\n        }\n        function setCalendarWidth() {\n            var config = self.config;\n            if (config.weekNumbers === false && config.showMonths === 1)\n                return;\n            else if (config.noCalendar !== true) {\n                window.requestAnimationFrame(function () {\n                    if (self.calendarContainer !== undefined) {\n                        self.calendarContainer.style.visibility = \"hidden\";\n                        self.calendarContainer.style.display = \"block\";\n                    }\n                    if (self.daysContainer !== undefined) {\n                        var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;\n                        self.daysContainer.style.width = daysWidth + \"px\";\n                        self.calendarContainer.style.width =\n                            daysWidth +\n                                (self.weekWrapper !== undefined\n                                    ? self.weekWrapper.offsetWidth\n                                    : 0) +\n                                \"px\";\n                        self.calendarContainer.style.removeProperty(\"visibility\");\n                        self.calendarContainer.style.removeProperty(\"display\");\n                    }\n                });\n            }\n        }\n        /**\n         * The handler for all events targeting the time inputs\n         */\n        function updateTime(e) {\n            if (self.selectedDates.length === 0) {\n                setDefaultTime();\n            }\n            if (e !== undefined && e.type !== \"blur\") {\n                timeWrapper(e);\n            }\n            var prevValue = self._input.value;\n            setHoursFromInputs();\n            updateValue();\n            if (self._input.value !== prevValue) {\n                self._debouncedChange();\n            }\n        }\n        function ampm2military(hour, amPM) {\n            return (hour % 12) + 12 * int(amPM === self.l10n.amPM[1]);\n        }\n        function military2ampm(hour) {\n            switch (hour % 24) {\n                case 0:\n                case 12:\n                    return 12;\n                default:\n                    return hour % 12;\n            }\n        }\n        /**\n         * Syncs the selected date object time with user's time input\n         */\n        function setHoursFromInputs() {\n            if (self.hourElement === undefined || self.minuteElement === undefined)\n                return;\n            var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== undefined\n                ? (parseInt(self.secondElement.value, 10) || 0) % 60\n                : 0;\n            if (self.amPM !== undefined) {\n                hours = ampm2military(hours, self.amPM.textContent);\n            }\n            var limitMinHours = self.config.minTime !== undefined ||\n                (self.config.minDate &&\n                    self.minDateHasTime &&\n                    self.latestSelectedDateObj &&\n                    compareDates(self.latestSelectedDateObj, self.config.minDate, true) ===\n                        0);\n            var limitMaxHours = self.config.maxTime !== undefined ||\n                (self.config.maxDate &&\n                    self.maxDateHasTime &&\n                    self.latestSelectedDateObj &&\n                    compareDates(self.latestSelectedDateObj, self.config.maxDate, true) ===\n                        0);\n            if (limitMaxHours) {\n                var maxTime = self.config.maxTime !== undefined\n                    ? self.config.maxTime\n                    : self.config.maxDate;\n                hours = Math.min(hours, maxTime.getHours());\n                if (hours === maxTime.getHours())\n                    minutes = Math.min(minutes, maxTime.getMinutes());\n                if (minutes === maxTime.getMinutes())\n                    seconds = Math.min(seconds, maxTime.getSeconds());\n            }\n            if (limitMinHours) {\n                var minTime = self.config.minTime !== undefined\n                    ? self.config.minTime\n                    : self.config.minDate;\n                hours = Math.max(hours, minTime.getHours());\n                if (hours === minTime.getHours())\n                    minutes = Math.max(minutes, minTime.getMinutes());\n                if (minutes === minTime.getMinutes())\n                    seconds = Math.max(seconds, minTime.getSeconds());\n            }\n            setHours(hours, minutes, seconds);\n        }\n        /**\n         * Syncs time input values with a date\n         */\n        function setHoursFromDate(dateObj) {\n            var date = dateObj || self.latestSelectedDateObj;\n            if (date)\n                setHours(date.getHours(), date.getMinutes(), date.getSeconds());\n        }\n        function setDefaultHours() {\n            var hours = self.config.defaultHour;\n            var minutes = self.config.defaultMinute;\n            var seconds = self.config.defaultSeconds;\n            if (self.config.minDate !== undefined) {\n                var min_hr = self.config.minDate.getHours();\n                var min_minutes = self.config.minDate.getMinutes();\n                hours = Math.max(hours, min_hr);\n                if (hours === min_hr)\n                    minutes = Math.max(min_minutes, minutes);\n                if (hours === min_hr && minutes === min_minutes)\n                    seconds = self.config.minDate.getSeconds();\n            }\n            if (self.config.maxDate !== undefined) {\n                var max_hr = self.config.maxDate.getHours();\n                var max_minutes = self.config.maxDate.getMinutes();\n                hours = Math.min(hours, max_hr);\n                if (hours === max_hr)\n                    minutes = Math.min(max_minutes, minutes);\n                if (hours === max_hr && minutes === max_minutes)\n                    seconds = self.config.maxDate.getSeconds();\n            }\n            setHours(hours, minutes, seconds);\n        }\n        /**\n         * Sets the hours, minutes, and optionally seconds\n         * of the latest selected date object and the\n         * corresponding time inputs\n         * @param {Number} hours the hour. whether its military\n         *                 or am-pm gets inferred from config\n         * @param {Number} minutes the minutes\n         * @param {Number} seconds the seconds (optional)\n         */\n        function setHours(hours, minutes, seconds) {\n            if (self.latestSelectedDateObj !== undefined) {\n                self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);\n            }\n            if (!self.hourElement || !self.minuteElement || self.isMobile)\n                return;\n            self.hourElement.value = pad(!self.config.time_24hr\n                ? ((12 + hours) % 12) + 12 * int(hours % 12 === 0)\n                : hours);\n            self.minuteElement.value = pad(minutes);\n            if (self.amPM !== undefined)\n                self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];\n            if (self.secondElement !== undefined)\n                self.secondElement.value = pad(seconds);\n        }\n        /**\n         * Handles the year input and incrementing events\n         * @param {Event} event the keyup or increment event\n         */\n        function onYearInput(event) {\n            var year = parseInt(event.target.value) + (event.delta || 0);\n            if (year / 1000 > 1 ||\n                (event.key === \"Enter\" && !/[^\\d]/.test(year.toString()))) {\n                changeYear(year);\n            }\n        }\n        /**\n         * Essentially addEventListener + tracking\n         * @param {Element} element the element to addEventListener to\n         * @param {String} event the event name\n         * @param {Function} handler the event handler\n         */\n        function bind(element, event, handler, options) {\n            if (event instanceof Array)\n                return event.forEach(function (ev) { return bind(element, ev, handler, options); });\n            if (element instanceof Array)\n                return element.forEach(function (el) { return bind(el, event, handler, options); });\n            element.addEventListener(event, handler, options);\n            self._handlers.push({\n                element: element,\n                event: event,\n                handler: handler,\n                options: options\n            });\n        }\n        /**\n         * A mousedown handler which mimics click.\n         * Minimizes latency, since we don't need to wait for mouseup in most cases.\n         * Also, avoids handling right clicks.\n         *\n         * @param {Function} handler the event handler\n         */\n        function onClick(handler) {\n            return function (evt) {\n                evt.which === 1 && handler(evt);\n            };\n        }\n        function triggerChange() {\n            triggerEvent(\"onChange\");\n        }\n        /**\n         * Adds all the necessary event listeners\n         */\n        function bindEvents() {\n            if (self.config.wrap) {\n                [\"open\", \"close\", \"toggle\", \"clear\"].forEach(function (evt) {\n                    Array.prototype.forEach.call(self.element.querySelectorAll(\"[data-\" + evt + \"]\"), function (el) {\n                        return bind(el, \"click\", self[evt]);\n                    });\n                });\n            }\n            if (self.isMobile) {\n                setupMobile();\n                return;\n            }\n            var debouncedResize = debounce(onResize, 50);\n            self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);\n            if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))\n                bind(self.daysContainer, \"mouseover\", function (e) {\n                    if (self.config.mode === \"range\")\n                        onMouseOver(e.target);\n                });\n            bind(window.document.body, \"keydown\", onKeyDown);\n            if (!self.config.static)\n                bind(self._input, \"keydown\", onKeyDown);\n            if (!self.config.inline && !self.config.static)\n                bind(window, \"resize\", debouncedResize);\n            if (window.ontouchstart !== undefined)\n                bind(window.document, \"click\", documentClick);\n            else\n                bind(window.document, \"mousedown\", onClick(documentClick));\n            bind(window.document, \"focus\", documentClick, { capture: true });\n            if (self.config.clickOpens === true) {\n                bind(self._input, \"focus\", self.open);\n                bind(self._input, \"mousedown\", onClick(self.open));\n            }\n            if (self.daysContainer !== undefined) {\n                bind(self.monthNav, \"mousedown\", onClick(onMonthNavClick));\n                bind(self.monthNav, [\"keyup\", \"increment\"], onYearInput);\n                bind(self.daysContainer, \"mousedown\", onClick(selectDate));\n            }\n            if (self.timeContainer !== undefined &&\n                self.minuteElement !== undefined &&\n                self.hourElement !== undefined) {\n                var selText = function (e) {\n                    return e.target.select();\n                };\n                bind(self.timeContainer, [\"increment\"], updateTime);\n                bind(self.timeContainer, \"blur\", updateTime, { capture: true });\n                bind(self.timeContainer, \"mousedown\", onClick(timeIncrement));\n                bind([self.hourElement, self.minuteElement], [\"focus\", \"click\"], selText);\n                if (self.secondElement !== undefined)\n                    bind(self.secondElement, \"focus\", function () { return self.secondElement && self.secondElement.select(); });\n                if (self.amPM !== undefined) {\n                    bind(self.amPM, \"mousedown\", onClick(function (e) {\n                        updateTime(e);\n                        triggerChange();\n                    }));\n                }\n            }\n        }\n        /**\n         * Set the calendar view to a particular date.\n         * @param {Date} jumpDate the date to set the view to\n         */\n        function jumpToDate(jumpDate) {\n            var jumpTo = jumpDate !== undefined\n                ? self.parseDate(jumpDate)\n                : self.latestSelectedDateObj ||\n                    (self.config.minDate && self.config.minDate > self.now\n                        ? self.config.minDate\n                        : self.config.maxDate && self.config.maxDate < self.now\n                            ? self.config.maxDate\n                            : self.now);\n            try {\n                if (jumpTo !== undefined) {\n                    self.currentYear = jumpTo.getFullYear();\n                    self.currentMonth = jumpTo.getMonth();\n                }\n            }\n            catch (e) {\n                /* istanbul ignore next */\n                e.message = \"Invalid date supplied: \" + jumpTo;\n                self.config.errorHandler(e);\n            }\n            self.redraw();\n        }\n        /**\n         * The up/down arrow handler for time inputs\n         * @param {Event} e the click event\n         */\n        function timeIncrement(e) {\n            if (~e.target.className.indexOf(\"arrow\"))\n                incrementNumInput(e, e.target.classList.contains(\"arrowUp\") ? 1 : -1);\n        }\n        /**\n         * Increments/decrements the value of input associ-\n         * ated with the up/down arrow by dispatching an\n         * \"increment\" event on the input.\n         *\n         * @param {Event} e the click event\n         * @param {Number} delta the diff (usually 1 or -1)\n         * @param {Element} inputElem the input element\n         */\n        function incrementNumInput(e, delta, inputElem) {\n            var target = e && e.target;\n            var input = inputElem ||\n                (target && target.parentNode && target.parentNode.firstChild);\n            var event = createEvent(\"increment\");\n            event.delta = delta;\n            input && input.dispatchEvent(event);\n        }\n        function build() {\n            var fragment = window.document.createDocumentFragment();\n            self.calendarContainer = createElement(\"div\", \"flatpickr-calendar\");\n            self.calendarContainer.tabIndex = -1;\n            if (!self.config.noCalendar) {\n                fragment.appendChild(buildMonthNav());\n                self.innerContainer = createElement(\"div\", \"flatpickr-innerContainer\");\n                if (self.config.weekNumbers) {\n                    var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;\n                    self.innerContainer.appendChild(weekWrapper);\n                    self.weekNumbers = weekNumbers;\n                    self.weekWrapper = weekWrapper;\n                }\n                self.rContainer = createElement(\"div\", \"flatpickr-rContainer\");\n                self.rContainer.appendChild(buildWeekdays());\n                if (!self.daysContainer) {\n                    self.daysContainer = createElement(\"div\", \"flatpickr-days\");\n                    self.daysContainer.tabIndex = -1;\n                }\n                buildDays();\n                self.rContainer.appendChild(self.daysContainer);\n                self.innerContainer.appendChild(self.rContainer);\n                fragment.appendChild(self.innerContainer);\n            }\n            if (self.config.enableTime) {\n                fragment.appendChild(buildTime());\n            }\n            toggleClass(self.calendarContainer, \"rangeMode\", self.config.mode === \"range\");\n            toggleClass(self.calendarContainer, \"animate\", self.config.animate === true);\n            toggleClass(self.calendarContainer, \"multiMonth\", self.config.showMonths > 1);\n            self.calendarContainer.appendChild(fragment);\n            var customAppend = self.config.appendTo !== undefined &&\n                self.config.appendTo.nodeType !== undefined;\n            if (self.config.inline || self.config.static) {\n                self.calendarContainer.classList.add(self.config.inline ? \"inline\" : \"static\");\n                if (self.config.inline) {\n                    if (!customAppend && self.element.parentNode)\n                        self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);\n                    else if (self.config.appendTo !== undefined)\n                        self.config.appendTo.appendChild(self.calendarContainer);\n                }\n                if (self.config.static) {\n                    var wrapper = createElement(\"div\", \"flatpickr-wrapper\");\n                    if (self.element.parentNode)\n                        self.element.parentNode.insertBefore(wrapper, self.element);\n                    wrapper.appendChild(self.element);\n                    if (self.altInput)\n                        wrapper.appendChild(self.altInput);\n                    wrapper.appendChild(self.calendarContainer);\n                }\n            }\n            if (!self.config.static && !self.config.inline)\n                (self.config.appendTo !== undefined\n                    ? self.config.appendTo\n                    : window.document.body).appendChild(self.calendarContainer);\n        }\n        function createDay(className, date, dayNumber, i) {\n            var dateIsEnabled = isEnabled(date, true), dayElement = createElement(\"span\", \"flatpickr-day \" + className, date.getDate().toString());\n            dayElement.dateObj = date;\n            dayElement.$i = i;\n            dayElement.setAttribute(\"aria-label\", self.formatDate(date, self.config.ariaDateFormat));\n            if (className.indexOf(\"hidden\") === -1 &&\n                compareDates(date, self.now) === 0) {\n                self.todayDateElem = dayElement;\n                dayElement.classList.add(\"today\");\n                dayElement.setAttribute(\"aria-current\", \"date\");\n            }\n            if (dateIsEnabled) {\n                dayElement.tabIndex = -1;\n                if (isDateSelected(date)) {\n                    dayElement.classList.add(\"selected\");\n                    self.selectedDateElem = dayElement;\n                    if (self.config.mode === \"range\") {\n                        toggleClass(dayElement, \"startRange\", self.selectedDates[0] &&\n                            compareDates(date, self.selectedDates[0], true) === 0);\n                        toggleClass(dayElement, \"endRange\", self.selectedDates[1] &&\n                            compareDates(date, self.selectedDates[1], true) === 0);\n                        if (className === \"nextMonthDay\")\n                            dayElement.classList.add(\"inRange\");\n                    }\n                }\n            }\n            else {\n                dayElement.classList.add(\"disabled\");\n            }\n            if (self.config.mode === \"range\") {\n                if (isDateInRange(date) && !isDateSelected(date))\n                    dayElement.classList.add(\"inRange\");\n            }\n            if (self.weekNumbers &&\n                self.config.showMonths === 1 &&\n                className !== \"prevMonthDay\" &&\n                dayNumber % 7 === 1) {\n                self.weekNumbers.insertAdjacentHTML(\"beforeend\", \"<span class='flatpickr-day'>\" + self.config.getWeek(date) + \"</span>\");\n            }\n            triggerEvent(\"onDayCreate\", dayElement);\n            return dayElement;\n        }\n        function focusOnDayElem(targetNode) {\n            targetNode.focus();\n            if (self.config.mode === \"range\")\n                onMouseOver(targetNode);\n        }\n        function getFirstAvailableDay(delta) {\n            var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;\n            var endMonth = delta > 0 ? self.config.showMonths : -1;\n            for (var m = startMonth; m != endMonth; m += delta) {\n                var month = self.daysContainer.children[m];\n                var startIndex = delta > 0 ? 0 : month.children.length - 1;\n                var endIndex = delta > 0 ? month.children.length : -1;\n                for (var i = startIndex; i != endIndex; i += delta) {\n                    var c = month.children[i];\n                    if (c.className.indexOf(\"hidden\") === -1 && isEnabled(c.dateObj))\n                        return c;\n                }\n            }\n            return undefined;\n        }\n        function getNextAvailableDay(current, delta) {\n            var givenMonth = current.className.indexOf(\"Month\") === -1\n                ? current.dateObj.getMonth()\n                : self.currentMonth;\n            var endMonth = delta > 0 ? self.config.showMonths : -1;\n            var loopDelta = delta > 0 ? 1 : -1;\n            for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {\n                var month = self.daysContainer.children[m];\n                var startIndex = givenMonth - self.currentMonth === m\n                    ? current.$i + delta\n                    : delta < 0\n                        ? month.children.length - 1\n                        : 0;\n                var numMonthDays = month.children.length;\n                for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {\n                    var c = month.children[i];\n                    if (c.className.indexOf(\"hidden\") === -1 &&\n                        isEnabled(c.dateObj) &&\n                        Math.abs(current.$i - i) >= Math.abs(delta))\n                        return focusOnDayElem(c);\n                }\n            }\n            self.changeMonth(loopDelta);\n            focusOnDay(getFirstAvailableDay(loopDelta), 0);\n            return undefined;\n        }\n        function focusOnDay(current, offset) {\n            var dayFocused = isInView(document.activeElement || document.body);\n            var startElem = current !== undefined\n                ? current\n                : dayFocused\n                    ? document.activeElement\n                    : self.selectedDateElem !== undefined && isInView(self.selectedDateElem)\n                        ? self.selectedDateElem\n                        : self.todayDateElem !== undefined && isInView(self.todayDateElem)\n                            ? self.todayDateElem\n                            : getFirstAvailableDay(offset > 0 ? 1 : -1);\n            if (startElem === undefined)\n                return self._input.focus();\n            if (!dayFocused)\n                return focusOnDayElem(startElem);\n            getNextAvailableDay(startElem, offset);\n        }\n        function buildMonthDays(year, month) {\n            var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;\n            var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12);\n            var daysInMonth = self.utils.getDaysInMonth(month), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? \"prevMonthDay hidden\" : \"prevMonthDay\", nextMonthDayClass = isMultiMonth ? \"nextMonthDay hidden\" : \"nextMonthDay\";\n            var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;\n            // prepend days from the ending of previous month\n            for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {\n                days.appendChild(createDay(prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));\n            }\n            // Start at 1 since there is no 0th day\n            for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {\n                days.appendChild(createDay(\"\", new Date(year, month, dayNumber), dayNumber, dayIndex));\n            }\n            // append days from the next month\n            for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth &&\n                (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {\n                days.appendChild(createDay(nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));\n            }\n            //updateNavigationCurrentMonth();\n            var dayContainer = createElement(\"div\", \"dayContainer\");\n            dayContainer.appendChild(days);\n            return dayContainer;\n        }\n        function buildDays() {\n            if (self.daysContainer === undefined) {\n                return;\n            }\n            clearNode(self.daysContainer);\n            // TODO: week numbers for each month\n            if (self.weekNumbers)\n                clearNode(self.weekNumbers);\n            var frag = document.createDocumentFragment();\n            for (var i = 0; i < self.config.showMonths; i++) {\n                var d = new Date(self.currentYear, self.currentMonth, 1);\n                d.setMonth(self.currentMonth + i);\n                frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));\n            }\n            self.daysContainer.appendChild(frag);\n            self.days = self.daysContainer.firstChild;\n            if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n                onMouseOver();\n            }\n        }\n        function buildMonth() {\n            var container = createElement(\"div\", \"flatpickr-month\");\n            var monthNavFragment = window.document.createDocumentFragment();\n            var monthElement = createElement(\"span\", \"cur-month\");\n            var yearInput = createNumberInput(\"cur-year\", { tabindex: \"-1\" });\n            var yearElement = yearInput.getElementsByTagName(\"input\")[0];\n            yearElement.setAttribute(\"aria-label\", self.l10n.yearAriaLabel);\n            if (self.config.minDate) {\n                yearElement.setAttribute(\"min\", self.config.minDate.getFullYear().toString());\n            }\n            if (self.config.maxDate) {\n                yearElement.setAttribute(\"max\", self.config.maxDate.getFullYear().toString());\n                yearElement.disabled =\n                    !!self.config.minDate &&\n                        self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();\n            }\n            var currentMonth = createElement(\"div\", \"flatpickr-current-month\");\n            currentMonth.appendChild(monthElement);\n            currentMonth.appendChild(yearInput);\n            monthNavFragment.appendChild(currentMonth);\n            container.appendChild(monthNavFragment);\n            return {\n                container: container,\n                yearElement: yearElement,\n                monthElement: monthElement\n            };\n        }\n        function buildMonths() {\n            clearNode(self.monthNav);\n            self.monthNav.appendChild(self.prevMonthNav);\n            if (self.config.showMonths) {\n                self.yearElements = [];\n                self.monthElements = [];\n            }\n            for (var m = self.config.showMonths; m--;) {\n                var month = buildMonth();\n                self.yearElements.push(month.yearElement);\n                self.monthElements.push(month.monthElement);\n                self.monthNav.appendChild(month.container);\n            }\n            self.monthNav.appendChild(self.nextMonthNav);\n        }\n        function buildMonthNav() {\n            self.monthNav = createElement(\"div\", \"flatpickr-months\");\n            self.yearElements = [];\n            self.monthElements = [];\n            self.prevMonthNav = createElement(\"span\", \"flatpickr-prev-month\");\n            self.prevMonthNav.innerHTML = self.config.prevArrow;\n            self.nextMonthNav = createElement(\"span\", \"flatpickr-next-month\");\n            self.nextMonthNav.innerHTML = self.config.nextArrow;\n            buildMonths();\n            Object.defineProperty(self, \"_hidePrevMonthArrow\", {\n                get: function () { return self.__hidePrevMonthArrow; },\n                set: function (bool) {\n                    if (self.__hidePrevMonthArrow !== bool) {\n                        toggleClass(self.prevMonthNav, \"disabled\", bool);\n                        self.__hidePrevMonthArrow = bool;\n                    }\n                }\n            });\n            Object.defineProperty(self, \"_hideNextMonthArrow\", {\n                get: function () { return self.__hideNextMonthArrow; },\n                set: function (bool) {\n                    if (self.__hideNextMonthArrow !== bool) {\n                        toggleClass(self.nextMonthNav, \"disabled\", bool);\n                        self.__hideNextMonthArrow = bool;\n                    }\n                }\n            });\n            self.currentYearElement = self.yearElements[0];\n            updateNavigationCurrentMonth();\n            return self.monthNav;\n        }\n        function buildTime() {\n            self.calendarContainer.classList.add(\"hasTime\");\n            if (self.config.noCalendar)\n                self.calendarContainer.classList.add(\"noCalendar\");\n            self.timeContainer = createElement(\"div\", \"flatpickr-time\");\n            self.timeContainer.tabIndex = -1;\n            var separator = createElement(\"span\", \"flatpickr-time-separator\", \":\");\n            var hourInput = createNumberInput(\"flatpickr-hour\");\n            self.hourElement = hourInput.getElementsByTagName(\"input\")[0];\n            var minuteInput = createNumberInput(\"flatpickr-minute\");\n            self.minuteElement = minuteInput.getElementsByTagName(\"input\")[0];\n            self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;\n            self.hourElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getHours()\n                : self.config.time_24hr\n                    ? self.config.defaultHour\n                    : military2ampm(self.config.defaultHour));\n            self.minuteElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getMinutes()\n                : self.config.defaultMinute);\n            self.hourElement.setAttribute(\"step\", self.config.hourIncrement.toString());\n            self.minuteElement.setAttribute(\"step\", self.config.minuteIncrement.toString());\n            self.hourElement.setAttribute(\"min\", self.config.time_24hr ? \"0\" : \"1\");\n            self.hourElement.setAttribute(\"max\", self.config.time_24hr ? \"23\" : \"12\");\n            self.minuteElement.setAttribute(\"min\", \"0\");\n            self.minuteElement.setAttribute(\"max\", \"59\");\n            self.timeContainer.appendChild(hourInput);\n            self.timeContainer.appendChild(separator);\n            self.timeContainer.appendChild(minuteInput);\n            if (self.config.time_24hr)\n                self.timeContainer.classList.add(\"time24hr\");\n            if (self.config.enableSeconds) {\n                self.timeContainer.classList.add(\"hasSeconds\");\n                var secondInput = createNumberInput(\"flatpickr-second\");\n                self.secondElement = secondInput.getElementsByTagName(\"input\")[0];\n                self.secondElement.value = pad(self.latestSelectedDateObj\n                    ? self.latestSelectedDateObj.getSeconds()\n                    : self.config.defaultSeconds);\n                self.secondElement.setAttribute(\"step\", self.minuteElement.getAttribute(\"step\"));\n                self.secondElement.setAttribute(\"min\", \"0\");\n                self.secondElement.setAttribute(\"max\", \"59\");\n                self.timeContainer.appendChild(createElement(\"span\", \"flatpickr-time-separator\", \":\"));\n                self.timeContainer.appendChild(secondInput);\n            }\n            if (!self.config.time_24hr) {\n                // add self.amPM if appropriate\n                self.amPM = createElement(\"span\", \"flatpickr-am-pm\", self.l10n.amPM[int((self.latestSelectedDateObj\n                    ? self.hourElement.value\n                    : self.config.defaultHour) > 11)]);\n                self.amPM.title = self.l10n.toggleTitle;\n                self.amPM.tabIndex = -1;\n                self.timeContainer.appendChild(self.amPM);\n            }\n            return self.timeContainer;\n        }\n        function buildWeekdays() {\n            if (!self.weekdayContainer)\n                self.weekdayContainer = createElement(\"div\", \"flatpickr-weekdays\");\n            else\n                clearNode(self.weekdayContainer);\n            for (var i = self.config.showMonths; i--;) {\n                var container = createElement(\"div\", \"flatpickr-weekdaycontainer\");\n                self.weekdayContainer.appendChild(container);\n            }\n            updateWeekdays();\n            return self.weekdayContainer;\n        }\n        function updateWeekdays() {\n            var firstDayOfWeek = self.l10n.firstDayOfWeek;\n            var weekdays = self.l10n.weekdays.shorthand.slice();\n            if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n                weekdays = weekdays.splice(firstDayOfWeek, weekdays.length).concat(weekdays.splice(0, firstDayOfWeek));\n            }\n            for (var i = self.config.showMonths; i--;) {\n                self.weekdayContainer.children[i].innerHTML = \"\\n      <span class='flatpickr-weekday'>\\n        \" + weekdays.join(\"</span><span class='flatpickr-weekday'>\") + \"\\n      </span>\\n      \";\n            }\n        }\n        /* istanbul ignore next */\n        function buildWeeks() {\n            self.calendarContainer.classList.add(\"hasWeeks\");\n            var weekWrapper = createElement(\"div\", \"flatpickr-weekwrapper\");\n            weekWrapper.appendChild(createElement(\"span\", \"flatpickr-weekday\", self.l10n.weekAbbreviation));\n            var weekNumbers = createElement(\"div\", \"flatpickr-weeks\");\n            weekWrapper.appendChild(weekNumbers);\n            return {\n                weekWrapper: weekWrapper,\n                weekNumbers: weekNumbers\n            };\n        }\n        function changeMonth(value, is_offset) {\n            if (is_offset === void 0) { is_offset = true; }\n            var delta = is_offset ? value : value - self.currentMonth;\n            if ((delta < 0 && self._hidePrevMonthArrow === true) ||\n                (delta > 0 && self._hideNextMonthArrow === true))\n                return;\n            self.currentMonth += delta;\n            if (self.currentMonth < 0 || self.currentMonth > 11) {\n                self.currentYear += self.currentMonth > 11 ? 1 : -1;\n                self.currentMonth = (self.currentMonth + 12) % 12;\n                triggerEvent(\"onYearChange\");\n            }\n            buildDays();\n            triggerEvent(\"onMonthChange\");\n            updateNavigationCurrentMonth();\n        }\n        function clear(triggerChangeEvent, toInitial) {\n            if (triggerChangeEvent === void 0) { triggerChangeEvent = true; }\n            if (toInitial === void 0) { toInitial = true; }\n            self.input.value = \"\";\n            if (self.altInput !== undefined)\n                self.altInput.value = \"\";\n            if (self.mobileInput !== undefined)\n                self.mobileInput.value = \"\";\n            self.selectedDates = [];\n            self.latestSelectedDateObj = undefined;\n            if (toInitial === true) {\n                self.currentYear = self._initialDate.getFullYear();\n                self.currentMonth = self._initialDate.getMonth();\n            }\n            self.showTimeInput = false;\n            if (self.config.enableTime === true) {\n                setDefaultHours();\n            }\n            self.redraw();\n            if (triggerChangeEvent)\n                // triggerChangeEvent is true (default) or an Event\n                triggerEvent(\"onChange\");\n        }\n        function close() {\n            self.isOpen = false;\n            if (!self.isMobile) {\n                if (self.calendarContainer !== undefined) {\n                    self.calendarContainer.classList.remove(\"open\");\n                }\n                if (self._input !== undefined) {\n                    self._input.classList.remove(\"active\");\n                }\n            }\n            triggerEvent(\"onClose\");\n        }\n        function destroy() {\n            if (self.config !== undefined)\n                triggerEvent(\"onDestroy\");\n            for (var i = self._handlers.length; i--;) {\n                var h = self._handlers[i];\n                h.element.removeEventListener(h.event, h.handler, h.options);\n            }\n            self._handlers = [];\n            if (self.mobileInput) {\n                if (self.mobileInput.parentNode)\n                    self.mobileInput.parentNode.removeChild(self.mobileInput);\n                self.mobileInput = undefined;\n            }\n            else if (self.calendarContainer && self.calendarContainer.parentNode) {\n                if (self.config.static && self.calendarContainer.parentNode) {\n                    var wrapper = self.calendarContainer.parentNode;\n                    wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);\n                    if (wrapper.parentNode) {\n                        while (wrapper.firstChild)\n                            wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);\n                        wrapper.parentNode.removeChild(wrapper);\n                    }\n                }\n                else\n                    self.calendarContainer.parentNode.removeChild(self.calendarContainer);\n            }\n            if (self.altInput) {\n                self.input.type = \"text\";\n                if (self.altInput.parentNode)\n                    self.altInput.parentNode.removeChild(self.altInput);\n                delete self.altInput;\n            }\n            if (self.input) {\n                self.input.type = self.input._type;\n                self.input.classList.remove(\"flatpickr-input\");\n                self.input.removeAttribute(\"readonly\");\n                self.input.value = \"\";\n            }\n            [\n                \"_showTimeInput\",\n                \"latestSelectedDateObj\",\n                \"_hideNextMonthArrow\",\n                \"_hidePrevMonthArrow\",\n                \"__hideNextMonthArrow\",\n                \"__hidePrevMonthArrow\",\n                \"isMobile\",\n                \"isOpen\",\n                \"selectedDateElem\",\n                \"minDateHasTime\",\n                \"maxDateHasTime\",\n                \"days\",\n                \"daysContainer\",\n                \"_input\",\n                \"_positionElement\",\n                \"innerContainer\",\n                \"rContainer\",\n                \"monthNav\",\n                \"todayDateElem\",\n                \"calendarContainer\",\n                \"weekdayContainer\",\n                \"prevMonthNav\",\n                \"nextMonthNav\",\n                \"currentMonthElement\",\n                \"currentYearElement\",\n                \"navigationCurrentMonth\",\n                \"selectedDateElem\",\n                \"config\",\n            ].forEach(function (k) {\n                try {\n                    delete self[k];\n                }\n                catch (_) { }\n            });\n        }\n        function isCalendarElem(elem) {\n            if (self.config.appendTo && self.config.appendTo.contains(elem))\n                return true;\n            return self.calendarContainer.contains(elem);\n        }\n        function documentClick(e) {\n            if (self.isOpen && !self.config.inline) {\n                var eventTarget_1 = getEventTarget(e);\n                var isCalendarElement = isCalendarElem(eventTarget_1);\n                var isInput = eventTarget_1 === self.input ||\n                    eventTarget_1 === self.altInput ||\n                    self.element.contains(eventTarget_1) ||\n                    // web components\n                    // e.path is not present in all browsers. circumventing typechecks\n                    (e.path &&\n                        e.path.indexOf &&\n                        (~e.path.indexOf(self.input) ||\n                            ~e.path.indexOf(self.altInput)));\n                var lostFocus = e.type === \"blur\"\n                    ? isInput &&\n                        e.relatedTarget &&\n                        !isCalendarElem(e.relatedTarget)\n                    : !isInput &&\n                        !isCalendarElement &&\n                        !isCalendarElem(e.relatedTarget);\n                var isIgnored = !self.config.ignoredFocusElements.some(function (elem) {\n                    return elem.contains(eventTarget_1);\n                });\n                if (lostFocus && isIgnored) {\n                    self.close();\n                    if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n                        self.clear(false);\n                        self.redraw();\n                    }\n                }\n            }\n        }\n        function changeYear(newYear) {\n            if (!newYear ||\n                (self.config.minDate && newYear < self.config.minDate.getFullYear()) ||\n                (self.config.maxDate && newYear > self.config.maxDate.getFullYear()))\n                return;\n            var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;\n            self.currentYear = newYearNum || self.currentYear;\n            if (self.config.maxDate &&\n                self.currentYear === self.config.maxDate.getFullYear()) {\n                self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);\n            }\n            else if (self.config.minDate &&\n                self.currentYear === self.config.minDate.getFullYear()) {\n                self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);\n            }\n            if (isNewYear) {\n                self.redraw();\n                triggerEvent(\"onYearChange\");\n            }\n        }\n        function isEnabled(date, timeless) {\n            if (timeless === void 0) { timeless = true; }\n            var dateToCheck = self.parseDate(date, undefined, timeless); // timeless\n            if ((self.config.minDate &&\n                dateToCheck &&\n                compareDates(dateToCheck, self.config.minDate, timeless !== undefined ? timeless : !self.minDateHasTime) < 0) ||\n                (self.config.maxDate &&\n                    dateToCheck &&\n                    compareDates(dateToCheck, self.config.maxDate, timeless !== undefined ? timeless : !self.maxDateHasTime) > 0))\n                return false;\n            if (self.config.enable.length === 0 && self.config.disable.length === 0)\n                return true;\n            if (dateToCheck === undefined)\n                return false;\n            var bool = self.config.enable.length > 0, array = bool ? self.config.enable : self.config.disable;\n            for (var i = 0, d = void 0; i < array.length; i++) {\n                d = array[i];\n                if (typeof d === \"function\" &&\n                    d(dateToCheck) // disabled by function\n                )\n                    return bool;\n                else if (d instanceof Date &&\n                    dateToCheck !== undefined &&\n                    d.getTime() === dateToCheck.getTime())\n                    // disabled by date\n                    return bool;\n                else if (typeof d === \"string\" && dateToCheck !== undefined) {\n                    // disabled by date string\n                    var parsed = self.parseDate(d, undefined, true);\n                    return parsed && parsed.getTime() === dateToCheck.getTime()\n                        ? bool\n                        : !bool;\n                }\n                else if (\n                // disabled by range\n                typeof d === \"object\" &&\n                    dateToCheck !== undefined &&\n                    d.from &&\n                    d.to &&\n                    dateToCheck.getTime() >= d.from.getTime() &&\n                    dateToCheck.getTime() <= d.to.getTime())\n                    return bool;\n            }\n            return !bool;\n        }\n        function isInView(elem) {\n            if (self.daysContainer !== undefined)\n                return (elem.className.indexOf(\"hidden\") === -1 &&\n                    self.daysContainer.contains(elem));\n            return false;\n        }\n        function onKeyDown(e) {\n            // e.key                      e.keyCode\n            // \"Backspace\"                        8\n            // \"Tab\"                              9\n            // \"Enter\"                           13\n            // \"Escape\"     (IE \"Esc\")           27\n            // \"ArrowLeft\"  (IE \"Left\")          37\n            // \"ArrowUp\"    (IE \"Up\")            38\n            // \"ArrowRight\" (IE \"Right\")         39\n            // \"ArrowDown\"  (IE \"Down\")          40\n            // \"Delete\"     (IE \"Del\")           46\n            var isInput = e.target === self._input;\n            var allowInput = self.config.allowInput;\n            var allowKeydown = self.isOpen && (!allowInput || !isInput);\n            var allowInlineKeydown = self.config.inline && isInput && !allowInput;\n            if (e.keyCode === 13 && isInput) {\n                if (allowInput) {\n                    self.setDate(self._input.value, true, e.target === self.altInput\n                        ? self.config.altFormat\n                        : self.config.dateFormat);\n                    return e.target.blur();\n                }\n                else\n                    self.open();\n            }\n            else if (isCalendarElem(e.target) ||\n                allowKeydown ||\n                allowInlineKeydown) {\n                var isTimeObj = !!self.timeContainer &&\n                    self.timeContainer.contains(e.target);\n                switch (e.keyCode) {\n                    case 13:\n                        if (isTimeObj) {\n                            updateTime();\n                            focusAndClose();\n                        }\n                        else\n                            selectDate(e);\n                        break;\n                    case 27: // escape\n                        e.preventDefault();\n                        focusAndClose();\n                        break;\n                    case 8:\n                    case 46:\n                        if (isInput && !self.config.allowInput) {\n                            e.preventDefault();\n                            self.clear();\n                        }\n                        break;\n                    case 37:\n                    case 39:\n                        if (!isTimeObj) {\n                            e.preventDefault();\n                            if (self.daysContainer !== undefined &&\n                                (allowInput === false ||\n                                    (document.activeElement && isInView(document.activeElement)))) {\n                                var delta_1 = e.keyCode === 39 ? 1 : -1;\n                                if (!e.ctrlKey)\n                                    focusOnDay(undefined, delta_1);\n                                else {\n                                    e.stopPropagation();\n                                    changeMonth(delta_1);\n                                    focusOnDay(getFirstAvailableDay(1), 0);\n                                }\n                            }\n                        }\n                        else if (self.hourElement)\n                            self.hourElement.focus();\n                        break;\n                    case 38:\n                    case 40:\n                        e.preventDefault();\n                        var delta = e.keyCode === 40 ? 1 : -1;\n                        if ((self.daysContainer && e.target.$i !== undefined) ||\n                            e.target === self.input) {\n                            if (e.ctrlKey) {\n                                e.stopPropagation();\n                                changeYear(self.currentYear - delta);\n                                focusOnDay(getFirstAvailableDay(1), 0);\n                            }\n                            else if (!isTimeObj)\n                                focusOnDay(undefined, delta * 7);\n                        }\n                        else if (self.config.enableTime) {\n                            if (!isTimeObj && self.hourElement)\n                                self.hourElement.focus();\n                            updateTime(e);\n                            self._debouncedChange();\n                        }\n                        break;\n                    case 9:\n                        if (isTimeObj) {\n                            var elems = [\n                                self.hourElement,\n                                self.minuteElement,\n                                self.secondElement,\n                                self.amPM,\n                            ].filter(function (x) { return x; });\n                            var i = elems.indexOf(e.target);\n                            if (i !== -1) {\n                                var target = elems[i + (e.shiftKey ? -1 : 1)];\n                                if (target !== undefined) {\n                                    e.preventDefault();\n                                    target.focus();\n                                }\n                                else if (e.shiftKey) {\n                                    e.preventDefault();\n                                    self._input.focus();\n                                }\n                            }\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (self.amPM !== undefined && e.target === self.amPM) {\n                switch (e.key) {\n                    case self.l10n.amPM[0].charAt(0):\n                    case self.l10n.amPM[0].charAt(0).toLowerCase():\n                        self.amPM.textContent = self.l10n.amPM[0];\n                        setHoursFromInputs();\n                        updateValue();\n                        break;\n                    case self.l10n.amPM[1].charAt(0):\n                    case self.l10n.amPM[1].charAt(0).toLowerCase():\n                        self.amPM.textContent = self.l10n.amPM[1];\n                        setHoursFromInputs();\n                        updateValue();\n                        break;\n                }\n            }\n            triggerEvent(\"onKeyDown\", e);\n        }\n        function onMouseOver(elem) {\n            if (self.selectedDates.length !== 1 ||\n                (elem &&\n                    (!elem.classList.contains(\"flatpickr-day\") ||\n                        elem.classList.contains(\"disabled\"))))\n                return;\n            var hoverDate = elem\n                ? elem.dateObj.getTime()\n                : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], undefined, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime()), lastDate = self.daysContainer.lastChild\n                .lastChild.dateObj.getTime();\n            var containsDisabled = false;\n            var minRange = 0, maxRange = 0;\n            for (var t = rangeStartDate; t < lastDate; t += duration.DAY) {\n                if (!isEnabled(new Date(t), true)) {\n                    containsDisabled =\n                        containsDisabled || (t > rangeStartDate && t < rangeEndDate);\n                    if (t < initialDate && (!minRange || t > minRange))\n                        minRange = t;\n                    else if (t > initialDate && (!maxRange || t < maxRange))\n                        maxRange = t;\n                }\n            }\n            for (var m = 0; m < self.config.showMonths; m++) {\n                var month = self.daysContainer.children[m];\n                var prevMonth = self.daysContainer.children[m - 1];\n                var _loop_1 = function (i, l) {\n                    var dayElem = month.children[i], date = dayElem.dateObj;\n                    var timestamp = date.getTime();\n                    var outOfRange = (minRange > 0 && timestamp < minRange) ||\n                        (maxRange > 0 && timestamp > maxRange);\n                    if (outOfRange) {\n                        dayElem.classList.add(\"notAllowed\");\n                        [\"inRange\", \"startRange\", \"endRange\"].forEach(function (c) {\n                            dayElem.classList.remove(c);\n                        });\n                        return \"continue\";\n                    }\n                    else if (containsDisabled && !outOfRange)\n                        return \"continue\";\n                    [\"startRange\", \"inRange\", \"endRange\", \"notAllowed\"].forEach(function (c) {\n                        dayElem.classList.remove(c);\n                    });\n                    if (elem !== undefined) {\n                        elem.classList.add(hoverDate < self.selectedDates[0].getTime()\n                            ? \"startRange\"\n                            : \"endRange\");\n                        if (month.contains(elem) ||\n                            !(m > 0 &&\n                                prevMonth &&\n                                prevMonth.lastChild.dateObj.getTime() >= timestamp)) {\n                            if (initialDate < hoverDate && timestamp === initialDate)\n                                dayElem.classList.add(\"startRange\");\n                            else if (initialDate > hoverDate && timestamp === initialDate)\n                                dayElem.classList.add(\"endRange\");\n                            if (timestamp >= minRange &&\n                                (maxRange === 0 || timestamp <= maxRange) &&\n                                isBetween(timestamp, initialDate, hoverDate))\n                                dayElem.classList.add(\"inRange\");\n                        }\n                    }\n                };\n                for (var i = 0, l = month.children.length; i < l; i++) {\n                    _loop_1(i, l);\n                }\n            }\n        }\n        function onResize() {\n            if (self.isOpen && !self.config.static && !self.config.inline)\n                positionCalendar();\n        }\n        function setDefaultTime() {\n            self.setDate(self.config.minDate !== undefined\n                ? new Date(self.config.minDate.getTime())\n                : new Date(), false);\n            setDefaultHours();\n            updateValue();\n        }\n        function open(e, positionElement) {\n            if (positionElement === void 0) { positionElement = self._positionElement; }\n            if (self.isMobile === true) {\n                if (e) {\n                    e.preventDefault();\n                    e.target && e.target.blur();\n                }\n                if (self.mobileInput !== undefined) {\n                    self.mobileInput.focus();\n                    self.mobileInput.click();\n                }\n                triggerEvent(\"onOpen\");\n                return;\n            }\n            if (self._input.disabled || self.config.inline)\n                return;\n            var wasOpen = self.isOpen;\n            self.isOpen = true;\n            if (!wasOpen) {\n                self.calendarContainer.classList.add(\"open\");\n                self._input.classList.add(\"active\");\n                triggerEvent(\"onOpen\");\n                positionCalendar(positionElement);\n            }\n            if (self.config.enableTime === true && self.config.noCalendar === true) {\n                if (self.selectedDates.length === 0) {\n                    setDefaultTime();\n                }\n                if (self.config.allowInput === false &&\n                    (e === undefined ||\n                        !self.timeContainer.contains(e.relatedTarget))) {\n                    setTimeout(function () { return self.hourElement.select(); }, 50);\n                }\n            }\n        }\n        function minMaxDateSetter(type) {\n            return function (date) {\n                var dateObj = (self.config[\"_\" + type + \"Date\"] = self.parseDate(date, self.config.dateFormat));\n                var inverseDateObj = self.config[\"_\" + (type === \"min\" ? \"max\" : \"min\") + \"Date\"];\n                if (dateObj !== undefined) {\n                    self[type === \"min\" ? \"minDateHasTime\" : \"maxDateHasTime\"] =\n                        dateObj.getHours() > 0 ||\n                            dateObj.getMinutes() > 0 ||\n                            dateObj.getSeconds() > 0;\n                }\n                if (self.selectedDates) {\n                    self.selectedDates = self.selectedDates.filter(function (d) { return isEnabled(d); });\n                    if (!self.selectedDates.length && type === \"min\")\n                        setHoursFromDate(dateObj);\n                    updateValue();\n                }\n                if (self.daysContainer) {\n                    redraw();\n                    if (dateObj !== undefined)\n                        self.currentYearElement[type] = dateObj.getFullYear().toString();\n                    else\n                        self.currentYearElement.removeAttribute(type);\n                    self.currentYearElement.disabled =\n                        !!inverseDateObj &&\n                            dateObj !== undefined &&\n                            inverseDateObj.getFullYear() === dateObj.getFullYear();\n                }\n            };\n        }\n        function parseConfig() {\n            var boolOpts = [\n                \"wrap\",\n                \"weekNumbers\",\n                \"allowInput\",\n                \"clickOpens\",\n                \"time_24hr\",\n                \"enableTime\",\n                \"noCalendar\",\n                \"altInput\",\n                \"shorthandCurrentMonth\",\n                \"inline\",\n                \"static\",\n                \"enableSeconds\",\n                \"disableMobile\",\n            ];\n            var userConfig = __assign({}, instanceConfig, JSON.parse(JSON.stringify(element.dataset || {})));\n            var formats = {};\n            self.config.parseDate = userConfig.parseDate;\n            self.config.formatDate = userConfig.formatDate;\n            Object.defineProperty(self.config, \"enable\", {\n                get: function () { return self.config._enable; },\n                set: function (dates) {\n                    self.config._enable = parseDateRules(dates);\n                }\n            });\n            Object.defineProperty(self.config, \"disable\", {\n                get: function () { return self.config._disable; },\n                set: function (dates) {\n                    self.config._disable = parseDateRules(dates);\n                }\n            });\n            var timeMode = userConfig.mode === \"time\";\n            if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {\n                formats.dateFormat =\n                    userConfig.noCalendar || timeMode\n                        ? \"H:i\" + (userConfig.enableSeconds ? \":S\" : \"\")\n                        : flatpickr.defaultConfig.dateFormat +\n                            \" H:i\" +\n                            (userConfig.enableSeconds ? \":S\" : \"\");\n            }\n            if (userConfig.altInput &&\n                (userConfig.enableTime || timeMode) &&\n                !userConfig.altFormat) {\n                formats.altFormat =\n                    userConfig.noCalendar || timeMode\n                        ? \"h:i\" + (userConfig.enableSeconds ? \":S K\" : \" K\")\n                        : flatpickr.defaultConfig.altFormat +\n                            (\" h:i\" + (userConfig.enableSeconds ? \":S\" : \"\") + \" K\");\n            }\n            Object.defineProperty(self.config, \"minDate\", {\n                get: function () { return self.config._minDate; },\n                set: minMaxDateSetter(\"min\")\n            });\n            Object.defineProperty(self.config, \"maxDate\", {\n                get: function () { return self.config._maxDate; },\n                set: minMaxDateSetter(\"max\")\n            });\n            var minMaxTimeSetter = function (type) { return function (val) {\n                self.config[type === \"min\" ? \"_minTime\" : \"_maxTime\"] = self.parseDate(val, \"H:i\");\n            }; };\n            Object.defineProperty(self.config, \"minTime\", {\n                get: function () { return self.config._minTime; },\n                set: minMaxTimeSetter(\"min\")\n            });\n            Object.defineProperty(self.config, \"maxTime\", {\n                get: function () { return self.config._maxTime; },\n                set: minMaxTimeSetter(\"max\")\n            });\n            if (userConfig.mode === \"time\") {\n                self.config.noCalendar = true;\n                self.config.enableTime = true;\n            }\n            Object.assign(self.config, formats, userConfig);\n            for (var i = 0; i < boolOpts.length; i++)\n                self.config[boolOpts[i]] =\n                    self.config[boolOpts[i]] === true ||\n                        self.config[boolOpts[i]] === \"true\";\n            HOOKS.filter(function (hook) { return self.config[hook] !== undefined; }).forEach(function (hook) {\n                self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);\n            });\n            self.isMobile =\n                !self.config.disableMobile &&\n                    !self.config.inline &&\n                    self.config.mode === \"single\" &&\n                    !self.config.disable.length &&\n                    !self.config.enable.length &&\n                    !self.config.weekNumbers &&\n                    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n            for (var i = 0; i < self.config.plugins.length; i++) {\n                var pluginConf = self.config.plugins[i](self) || {};\n                for (var key in pluginConf) {\n                    if (HOOKS.indexOf(key) > -1) {\n                        self.config[key] = arrayify(pluginConf[key])\n                            .map(bindToInstance)\n                            .concat(self.config[key]);\n                    }\n                    else if (typeof userConfig[key] === \"undefined\")\n                        self.config[key] = pluginConf[key];\n                }\n            }\n            triggerEvent(\"onParseConfig\");\n        }\n        function setupLocale() {\n            if (typeof self.config.locale !== \"object\" &&\n                typeof flatpickr.l10ns[self.config.locale] === \"undefined\")\n                self.config.errorHandler(new Error(\"flatpickr: invalid locale \" + self.config.locale));\n            self.l10n = __assign({}, flatpickr.l10ns[\"default\"], (typeof self.config.locale === \"object\"\n                ? self.config.locale\n                : self.config.locale !== \"default\"\n                    ? flatpickr.l10ns[self.config.locale]\n                    : undefined));\n            tokenRegex.K = \"(\" + self.l10n.amPM[0] + \"|\" + self.l10n.amPM[1] + \"|\" + self.l10n.amPM[0].toLowerCase() + \"|\" + self.l10n.amPM[1].toLowerCase() + \")\";\n            self.formatDate = createDateFormatter(self);\n            self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n        }\n        function positionCalendar(customPositionElement) {\n            if (self.calendarContainer === undefined)\n                return;\n            triggerEvent(\"onPreCalendarPosition\");\n            var positionElement = customPositionElement || self._positionElement;\n            var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function (acc, child) { return acc + child.offsetHeight; }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(\" \"), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === \"above\" ||\n                (configPosVertical !== \"below\" &&\n                    distanceFromBottom < calendarHeight &&\n                    inputBounds.top > calendarHeight);\n            var top = window.pageYOffset +\n                inputBounds.top +\n                (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);\n            toggleClass(self.calendarContainer, \"arrowTop\", !showOnTop);\n            toggleClass(self.calendarContainer, \"arrowBottom\", showOnTop);\n            if (self.config.inline)\n                return;\n            var left = window.pageXOffset +\n                inputBounds.left -\n                (configPosHorizontal != null && configPosHorizontal === \"center\"\n                    ? (calendarWidth - inputBounds.width) / 2\n                    : 0);\n            var right = window.document.body.offsetWidth - inputBounds.right;\n            var rightMost = left + calendarWidth > window.document.body.offsetWidth;\n            var centerMost = right + calendarWidth > window.document.body.offsetWidth;\n            toggleClass(self.calendarContainer, \"rightMost\", rightMost);\n            if (self.config.static)\n                return;\n            self.calendarContainer.style.top = top + \"px\";\n            if (!rightMost) {\n                self.calendarContainer.style.left = left + \"px\";\n                self.calendarContainer.style.right = \"auto\";\n            }\n            else if (!centerMost) {\n                self.calendarContainer.style.left = \"auto\";\n                self.calendarContainer.style.right = right + \"px\";\n            }\n            else {\n                var doc = document.styleSheets[0];\n                // some testing environments don't have css support\n                if (doc === undefined)\n                    return;\n                var bodyWidth = window.document.body.offsetWidth;\n                var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);\n                var centerBefore = \".flatpickr-calendar.centerMost:before\";\n                var centerAfter = \".flatpickr-calendar.centerMost:after\";\n                var centerIndex = doc.cssRules.length;\n                var centerStyle = \"{left:\" + inputBounds.left + \"px;right:auto;}\";\n                toggleClass(self.calendarContainer, \"rightMost\", false);\n                toggleClass(self.calendarContainer, \"centerMost\", true);\n                doc.insertRule(centerBefore + \",\" + centerAfter + centerStyle, centerIndex);\n                self.calendarContainer.style.left = centerLeft + \"px\";\n                self.calendarContainer.style.right = \"auto\";\n            }\n        }\n        function redraw() {\n            if (self.config.noCalendar || self.isMobile)\n                return;\n            updateNavigationCurrentMonth();\n            buildDays();\n        }\n        function focusAndClose() {\n            self._input.focus();\n            if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n                navigator.msMaxTouchPoints !== undefined) {\n                // hack - bugs in the way IE handles focus keeps the calendar open\n                setTimeout(self.close, 0);\n            }\n            else {\n                self.close();\n            }\n        }\n        function selectDate(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var isSelectable = function (day) {\n                return day.classList &&\n                    day.classList.contains(\"flatpickr-day\") &&\n                    !day.classList.contains(\"disabled\") &&\n                    !day.classList.contains(\"notAllowed\");\n            };\n            var t = findParent(e.target, isSelectable);\n            if (t === undefined)\n                return;\n            var target = t;\n            var selectedDate = (self.latestSelectedDateObj = new Date(target.dateObj.getTime()));\n            var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth ||\n                selectedDate.getMonth() >\n                    self.currentMonth + self.config.showMonths - 1) &&\n                self.config.mode !== \"range\";\n            self.selectedDateElem = target;\n            if (self.config.mode === \"single\")\n                self.selectedDates = [selectedDate];\n            else if (self.config.mode === \"multiple\") {\n                var selectedIndex = isDateSelected(selectedDate);\n                if (selectedIndex)\n                    self.selectedDates.splice(parseInt(selectedIndex), 1);\n                else\n                    self.selectedDates.push(selectedDate);\n            }\n            else if (self.config.mode === \"range\") {\n                if (self.selectedDates.length === 2) {\n                    self.clear(false, false);\n                }\n                self.latestSelectedDateObj = selectedDate;\n                self.selectedDates.push(selectedDate);\n                // unless selecting same date twice, sort ascendingly\n                if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)\n                    self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n            }\n            setHoursFromInputs();\n            if (shouldChangeMonth) {\n                var isNewYear = self.currentYear !== selectedDate.getFullYear();\n                self.currentYear = selectedDate.getFullYear();\n                self.currentMonth = selectedDate.getMonth();\n                if (isNewYear)\n                    triggerEvent(\"onYearChange\");\n                triggerEvent(\"onMonthChange\");\n            }\n            updateNavigationCurrentMonth();\n            buildDays();\n            updateValue();\n            if (self.config.enableTime)\n                setTimeout(function () { return (self.showTimeInput = true); }, 50);\n            // maintain focus\n            if (!shouldChangeMonth &&\n                self.config.mode !== \"range\" &&\n                self.config.showMonths === 1)\n                focusOnDayElem(target);\n            else if (self.selectedDateElem !== undefined &&\n                self.hourElement === undefined) {\n                self.selectedDateElem && self.selectedDateElem.focus();\n            }\n            if (self.hourElement !== undefined)\n                self.hourElement !== undefined && self.hourElement.focus();\n            if (self.config.closeOnSelect) {\n                var single = self.config.mode === \"single\" && !self.config.enableTime;\n                var range = self.config.mode === \"range\" &&\n                    self.selectedDates.length === 2 &&\n                    !self.config.enableTime;\n                if (single || range) {\n                    focusAndClose();\n                }\n            }\n            triggerChange();\n        }\n        var CALLBACKS = {\n            locale: [setupLocale, updateWeekdays],\n            showMonths: [buildMonths, setCalendarWidth, buildWeekdays]\n        };\n        function set(option, value) {\n            if (option !== null && typeof option === \"object\")\n                Object.assign(self.config, option);\n            else {\n                self.config[option] = value;\n                if (CALLBACKS[option] !== undefined)\n                    CALLBACKS[option].forEach(function (x) { return x(); });\n                else if (HOOKS.indexOf(option) > -1)\n                    self.config[option] = arrayify(value);\n            }\n            self.redraw();\n            updateValue(false);\n        }\n        function setSelectedDate(inputDate, format) {\n            var dates = [];\n            if (inputDate instanceof Array)\n                dates = inputDate.map(function (d) { return self.parseDate(d, format); });\n            else if (inputDate instanceof Date || typeof inputDate === \"number\")\n                dates = [self.parseDate(inputDate, format)];\n            else if (typeof inputDate === \"string\") {\n                switch (self.config.mode) {\n                    case \"single\":\n                    case \"time\":\n                        dates = [self.parseDate(inputDate, format)];\n                        break;\n                    case \"multiple\":\n                        dates = inputDate\n                            .split(self.config.conjunction)\n                            .map(function (date) { return self.parseDate(date, format); });\n                        break;\n                    case \"range\":\n                        dates = inputDate\n                            .split(self.l10n.rangeSeparator)\n                            .map(function (date) { return self.parseDate(date, format); });\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else\n                self.config.errorHandler(new Error(\"Invalid date supplied: \" + JSON.stringify(inputDate)));\n            self.selectedDates = dates.filter(function (d) { return d instanceof Date && isEnabled(d, false); });\n            if (self.config.mode === \"range\")\n                self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        }\n        function setDate(date, triggerChange, format) {\n            if (triggerChange === void 0) { triggerChange = false; }\n            if (format === void 0) { format = self.config.dateFormat; }\n            if ((date !== 0 && !date) || (date instanceof Array && date.length === 0))\n                return self.clear(triggerChange);\n            setSelectedDate(date, format);\n            self.showTimeInput = self.selectedDates.length > 0;\n            self.latestSelectedDateObj = self.selectedDates[0];\n            self.redraw();\n            jumpToDate();\n            setHoursFromDate();\n            updateValue(triggerChange);\n            if (triggerChange)\n                triggerEvent(\"onChange\");\n        }\n        function parseDateRules(arr) {\n            return arr\n                .slice()\n                .map(function (rule) {\n                if (typeof rule === \"string\" ||\n                    typeof rule === \"number\" ||\n                    rule instanceof Date) {\n                    return self.parseDate(rule, undefined, true);\n                }\n                else if (rule &&\n                    typeof rule === \"object\" &&\n                    rule.from &&\n                    rule.to)\n                    return {\n                        from: self.parseDate(rule.from, undefined),\n                        to: self.parseDate(rule.to, undefined)\n                    };\n                return rule;\n            })\n                .filter(function (x) { return x; }); // remove falsy values\n        }\n        function setupDates() {\n            self.selectedDates = [];\n            self.now = self.parseDate(self.config.now) || new Date();\n            // Workaround IE11 setting placeholder as the input's value\n            var preloadedDate = self.config.defaultDate ||\n                ((self.input.nodeName === \"INPUT\" ||\n                    self.input.nodeName === \"TEXTAREA\") &&\n                    self.input.placeholder &&\n                    self.input.value === self.input.placeholder\n                    ? null\n                    : self.input.value);\n            if (preloadedDate)\n                setSelectedDate(preloadedDate, self.config.dateFormat);\n            self._initialDate =\n                self.selectedDates.length > 0\n                    ? self.selectedDates[0]\n                    : self.config.minDate &&\n                        self.config.minDate.getTime() > self.now.getTime()\n                        ? self.config.minDate\n                        : self.config.maxDate &&\n                            self.config.maxDate.getTime() < self.now.getTime()\n                            ? self.config.maxDate\n                            : self.now;\n            self.currentYear = self._initialDate.getFullYear();\n            self.currentMonth = self._initialDate.getMonth();\n            if (self.selectedDates.length > 0)\n                self.latestSelectedDateObj = self.selectedDates[0];\n            if (self.config.minTime !== undefined)\n                self.config.minTime = self.parseDate(self.config.minTime, \"H:i\");\n            if (self.config.maxTime !== undefined)\n                self.config.maxTime = self.parseDate(self.config.maxTime, \"H:i\");\n            self.minDateHasTime =\n                !!self.config.minDate &&\n                    (self.config.minDate.getHours() > 0 ||\n                        self.config.minDate.getMinutes() > 0 ||\n                        self.config.minDate.getSeconds() > 0);\n            self.maxDateHasTime =\n                !!self.config.maxDate &&\n                    (self.config.maxDate.getHours() > 0 ||\n                        self.config.maxDate.getMinutes() > 0 ||\n                        self.config.maxDate.getSeconds() > 0);\n            Object.defineProperty(self, \"showTimeInput\", {\n                get: function () { return self._showTimeInput; },\n                set: function (bool) {\n                    self._showTimeInput = bool;\n                    if (self.calendarContainer)\n                        toggleClass(self.calendarContainer, \"showTimeInput\", bool);\n                    self.isOpen && positionCalendar();\n                }\n            });\n        }\n        function setupInputs() {\n            self.input = self.config.wrap\n                ? element.querySelector(\"[data-input]\")\n                : element;\n            /* istanbul ignore next */\n            if (!self.input) {\n                self.config.errorHandler(new Error(\"Invalid input element specified\"));\n                return;\n            }\n            // hack: store previous type to restore it after destroy()\n            self.input._type = self.input.type;\n            self.input.type = \"text\";\n            self.input.classList.add(\"flatpickr-input\");\n            self._input = self.input;\n            if (self.config.altInput) {\n                // replicate self.element\n                self.altInput = createElement(self.input.nodeName, self.input.className + \" \" + self.config.altInputClass);\n                self._input = self.altInput;\n                self.altInput.placeholder = self.input.placeholder;\n                self.altInput.disabled = self.input.disabled;\n                self.altInput.required = self.input.required;\n                self.altInput.tabIndex = self.input.tabIndex;\n                self.altInput.type = \"text\";\n                self.input.setAttribute(\"type\", \"hidden\");\n                if (!self.config.static && self.input.parentNode)\n                    self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n            }\n            if (!self.config.allowInput)\n                self._input.setAttribute(\"readonly\", \"readonly\");\n            self._positionElement = self.config.positionElement || self._input;\n        }\n        function setupMobile() {\n            var inputType = self.config.enableTime\n                ? self.config.noCalendar\n                    ? \"time\"\n                    : \"datetime-local\"\n                : \"date\";\n            self.mobileInput = createElement(\"input\", self.input.className + \" flatpickr-mobile\");\n            self.mobileInput.step = self.input.getAttribute(\"step\") || \"any\";\n            self.mobileInput.tabIndex = 1;\n            self.mobileInput.type = inputType;\n            self.mobileInput.disabled = self.input.disabled;\n            self.mobileInput.required = self.input.required;\n            self.mobileInput.placeholder = self.input.placeholder;\n            self.mobileFormatStr =\n                inputType === \"datetime-local\"\n                    ? \"Y-m-d\\\\TH:i:S\"\n                    : inputType === \"date\"\n                        ? \"Y-m-d\"\n                        : \"H:i:S\";\n            if (self.selectedDates.length > 0) {\n                self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);\n            }\n            if (self.config.minDate)\n                self.mobileInput.min = self.formatDate(self.config.minDate, \"Y-m-d\");\n            if (self.config.maxDate)\n                self.mobileInput.max = self.formatDate(self.config.maxDate, \"Y-m-d\");\n            self.input.type = \"hidden\";\n            if (self.altInput !== undefined)\n                self.altInput.type = \"hidden\";\n            try {\n                if (self.input.parentNode)\n                    self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);\n            }\n            catch (_a) { }\n            bind(self.mobileInput, \"change\", function (e) {\n                self.setDate(e.target.value, false, self.mobileFormatStr);\n                triggerEvent(\"onChange\");\n                triggerEvent(\"onClose\");\n            });\n        }\n        function toggle(e) {\n            if (self.isOpen === true)\n                return self.close();\n            self.open(e);\n        }\n        function triggerEvent(event, data) {\n            // If the instance has been destroyed already, all hooks have been removed\n            if (self.config === undefined)\n                return;\n            var hooks = self.config[event];\n            if (hooks !== undefined && hooks.length > 0) {\n                for (var i = 0; hooks[i] && i < hooks.length; i++)\n                    hooks[i](self.selectedDates, self.input.value, self, data);\n            }\n            if (event === \"onChange\") {\n                self.input.dispatchEvent(createEvent(\"change\"));\n                // many front-end frameworks bind to the input event\n                self.input.dispatchEvent(createEvent(\"input\"));\n            }\n        }\n        function createEvent(name) {\n            var e = document.createEvent(\"Event\");\n            e.initEvent(name, true, true);\n            return e;\n        }\n        function isDateSelected(date) {\n            for (var i = 0; i < self.selectedDates.length; i++) {\n                if (compareDates(self.selectedDates[i], date) === 0)\n                    return \"\" + i;\n            }\n            return false;\n        }\n        function isDateInRange(date) {\n            if (self.config.mode !== \"range\" || self.selectedDates.length < 2)\n                return false;\n            return (compareDates(date, self.selectedDates[0]) >= 0 &&\n                compareDates(date, self.selectedDates[1]) <= 0);\n        }\n        function updateNavigationCurrentMonth() {\n            if (self.config.noCalendar || self.isMobile || !self.monthNav)\n                return;\n            self.yearElements.forEach(function (yearElement, i) {\n                var d = new Date(self.currentYear, self.currentMonth, 1);\n                d.setMonth(self.currentMonth + i);\n                self.monthElements[i].textContent =\n                    monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) +\n                        \" \";\n                yearElement.value = d.getFullYear().toString();\n            });\n            self._hidePrevMonthArrow =\n                self.config.minDate !== undefined &&\n                    (self.currentYear === self.config.minDate.getFullYear()\n                        ? self.currentMonth <= self.config.minDate.getMonth()\n                        : self.currentYear < self.config.minDate.getFullYear());\n            self._hideNextMonthArrow =\n                self.config.maxDate !== undefined &&\n                    (self.currentYear === self.config.maxDate.getFullYear()\n                        ? self.currentMonth + 1 > self.config.maxDate.getMonth()\n                        : self.currentYear > self.config.maxDate.getFullYear());\n        }\n        function getDateStr(format) {\n            return self.selectedDates\n                .map(function (dObj) { return self.formatDate(dObj, format); })\n                .filter(function (d, i, arr) {\n                return self.config.mode !== \"range\" ||\n                    self.config.enableTime ||\n                    arr.indexOf(d) === i;\n            })\n                .join(self.config.mode !== \"range\"\n                ? self.config.conjunction\n                : self.l10n.rangeSeparator);\n        }\n        /**\n         * Updates the values of inputs associated with the calendar\n         */\n        function updateValue(triggerChange) {\n            if (triggerChange === void 0) { triggerChange = true; }\n            if (self.selectedDates.length === 0)\n                return self.clear(triggerChange);\n            if (self.mobileInput !== undefined && self.mobileFormatStr) {\n                self.mobileInput.value =\n                    self.latestSelectedDateObj !== undefined\n                        ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr)\n                        : \"\";\n            }\n            self.input.value = getDateStr(self.config.dateFormat);\n            if (self.altInput !== undefined) {\n                self.altInput.value = getDateStr(self.config.altFormat);\n            }\n            if (triggerChange !== false)\n                triggerEvent(\"onValueUpdate\");\n        }\n        function onMonthNavClick(e) {\n            e.preventDefault();\n            var isPrevMonth = self.prevMonthNav.contains(e.target);\n            var isNextMonth = self.nextMonthNav.contains(e.target);\n            if (isPrevMonth || isNextMonth) {\n                changeMonth(isPrevMonth ? -1 : 1);\n            }\n            else if (self.yearElements.indexOf(e.target) >= 0) {\n                e.target.select();\n            }\n            else if (e.target.classList.contains(\"arrowUp\")) {\n                self.changeYear(self.currentYear + 1);\n            }\n            else if (e.target.classList.contains(\"arrowDown\")) {\n                self.changeYear(self.currentYear - 1);\n            }\n        }\n        function timeWrapper(e) {\n            e.preventDefault();\n            var isKeyDown = e.type === \"keydown\", input = e.target;\n            if (self.amPM !== undefined && e.target === self.amPM) {\n                self.amPM.textContent =\n                    self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n            }\n            var min = parseFloat(input.getAttribute(\"min\")), max = parseFloat(input.getAttribute(\"max\")), step = parseFloat(input.getAttribute(\"step\")), curValue = parseInt(input.value, 10), delta = e.delta ||\n                (isKeyDown ? (e.which === 38 ? 1 : -1) : 0);\n            var newValue = curValue + step * delta;\n            if (typeof input.value !== \"undefined\" && input.value.length === 2) {\n                var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;\n                if (newValue < min) {\n                    newValue =\n                        max +\n                            newValue +\n                            int(!isHourElem) +\n                            (int(isHourElem) && int(!self.amPM));\n                    if (isMinuteElem)\n                        incrementNumInput(undefined, -1, self.hourElement);\n                }\n                else if (newValue > max) {\n                    newValue =\n                        input === self.hourElement ? newValue - max - int(!self.amPM) : min;\n                    if (isMinuteElem)\n                        incrementNumInput(undefined, 1, self.hourElement);\n                }\n                if (self.amPM &&\n                    isHourElem &&\n                    (step === 1\n                        ? newValue + curValue === 23\n                        : Math.abs(newValue - curValue) > step)) {\n                    self.amPM.textContent =\n                        self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n                }\n                input.value = pad(newValue);\n            }\n        }\n        init();\n        return self;\n    }\n    /* istanbul ignore next */\n    function _flatpickr(nodeList, config) {\n        // static list\n        var nodes = Array.prototype.slice\n            .call(nodeList)\n            .filter(function (x) { return x instanceof HTMLElement; });\n        var instances = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i];\n            try {\n                if (node.getAttribute(\"data-fp-omit\") !== null)\n                    continue;\n                if (node._flatpickr !== undefined) {\n                    node._flatpickr.destroy();\n                    node._flatpickr = undefined;\n                }\n                node._flatpickr = FlatpickrInstance(node, config || {});\n                instances.push(node._flatpickr);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        }\n        return instances.length === 1 ? instances[0] : instances;\n    }\n    /* istanbul ignore next */\n    if (typeof HTMLElement !== \"undefined\") {\n        // browser env\n        HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function (config) {\n            return _flatpickr(this, config);\n        };\n        HTMLElement.prototype.flatpickr = function (config) {\n            return _flatpickr([this], config);\n        };\n    }\n    /* istanbul ignore next */\n    var flatpickr = function (selector, config) {\n        if (typeof selector === \"string\") {\n            return _flatpickr(window.document.querySelectorAll(selector), config);\n        }\n        else if (selector instanceof Node) {\n            return _flatpickr([selector], config);\n        }\n        else {\n            return _flatpickr(selector, config);\n        }\n    };\n    /* istanbul ignore next */\n    flatpickr.defaultConfig = defaults;\n    flatpickr.l10ns = {\n        en: __assign({}, english),\n        \"default\": __assign({}, english)\n    };\n    flatpickr.localize = function (l10n) {\n        flatpickr.l10ns[\"default\"] = __assign({}, flatpickr.l10ns[\"default\"], l10n);\n    };\n    flatpickr.setDefaults = function (config) {\n        flatpickr.defaultConfig = __assign({}, flatpickr.defaultConfig, config);\n    };\n    flatpickr.parseDate = createDateParser({});\n    flatpickr.formatDate = createDateFormatter({});\n    flatpickr.compareDates = compareDates;\n    /* istanbul ignore next */\n    if (typeof jQuery !== \"undefined\") {\n        jQuery.fn.flatpickr = function (config) {\n            return _flatpickr(this, config);\n        };\n    }\n    Date.prototype.fp_incr = function (days) {\n        return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === \"string\" ? parseInt(days, 10) : days));\n    };\n    if (typeof window !== \"undefined\") {\n        window.flatpickr = flatpickr;\n    }\n\n    return flatpickr;\n\n}));\n\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define('lib/flatpickr/l10n/index',['exports'], factory) :\n    (global = global || self, factory(global.index = {}));\n}(this, function (exports) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    var fp = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Arabic = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        }\n    };\n    fp.l10ns.ar = Arabic;\n    fp.l10ns;\n\n    var fp$1 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Austria = {\n        weekdays: {\n            shorthand: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n            longhand: [\n                \"Sonntag\",\n                \"Montag\",\n                \"Dienstag\",\n                \"Mittwoch\",\n                \"Donnerstag\",\n                \"Freitag\",\n                \"Samstag\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jn\",\n                \"Feb\",\n                \"Mr\",\n                \"Apr\",\n                \"Mai\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dez\",\n            ],\n            longhand: [\n                \"Jnner\",\n                \"Februar\",\n                \"Mrz\",\n                \"April\",\n                \"Mai\",\n                \"Juni\",\n                \"Juli\",\n                \"August\",\n                \"September\",\n                \"Oktober\",\n                \"November\",\n                \"Dezember\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        weekAbbreviation: \"KW\",\n        rangeSeparator: \" bis \",\n        scrollTitle: \"Zum ndern scrollen\",\n        toggleTitle: \"Zum Umschalten klicken\"\n    };\n    fp$1.l10ns.at = Austria;\n    fp$1.l10ns;\n\n    var fp$2 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Azerbaijan = {\n        weekdays: {\n            shorthand: [\"Baz\", \"BzE\", \"Ax\", \"r\", \"CAx\", \"Cm\", \"n\"],\n            longhand: [\n                \"Bazar\",\n                \"Bazar ertsi\",\n                \"rnb axam\",\n                \"rnb\",\n                \"Cm axam\",\n                \"Cm\",\n                \"nb\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Yan\",\n                \"Fev\",\n                \"Mar\",\n                \"Apr\",\n                \"May\",\n                \"yn\",\n                \"yl\",\n                \"Avq\",\n                \"Sen\",\n                \"Okt\",\n                \"Noy\",\n                \"Dek\",\n            ],\n            longhand: [\n                \"Yanvar\",\n                \"Fevral\",\n                \"Mart\",\n                \"Aprel\",\n                \"May\",\n                \"yun\",\n                \"yul\",\n                \"Avqust\",\n                \"Sentyabr\",\n                \"Oktyabr\",\n                \"Noyabr\",\n                \"Dekabr\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \".\";\n        },\n        rangeSeparator: \" - \",\n        weekAbbreviation: \"Hf\",\n        scrollTitle: \"Artrmaq n srdrn\",\n        toggleTitle: \"A / Bala\",\n        amPM: [\"G\", \"GS\"]\n    };\n    fp$2.l10ns.az = Azerbaijan;\n    fp$2.l10ns;\n\n    var fp$3 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Belarusian = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        },\n        rangeSeparator: \"  \",\n        weekAbbreviation: \".\",\n        scrollTitle: \"  \",\n        toggleTitle: \"  \",\n        amPM: [\"\", \"\"],\n        yearAriaLabel: \"\"\n    };\n    fp$3.l10ns.be = Belarusian;\n    fp$3.l10ns;\n\n    var fp$4 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Bulgarian = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        }\n    };\n    fp$4.l10ns.bg = Bulgarian;\n    fp$4.l10ns;\n\n    var fp$5 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Bangla = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        }\n    };\n    fp$5.l10ns.bn = Bangla;\n    fp$5.l10ns;\n\n    var fp$6 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Catalan = {\n        weekdays: {\n            shorthand: [\"Dg\", \"Dl\", \"Dt\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"],\n            longhand: [\n                \"Diumenge\",\n                \"Dilluns\",\n                \"Dimarts\",\n                \"Dimecres\",\n                \"Dijous\",\n                \"Divendres\",\n                \"Dissabte\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Gen\",\n                \"Febr\",\n                \"Mar\",\n                \"Abr\",\n                \"Maig\",\n                \"Juny\",\n                \"Jul\",\n                \"Ag\",\n                \"Set\",\n                \"Oct\",\n                \"Nov\",\n                \"Des\",\n            ],\n            longhand: [\n                \"Gener\",\n                \"Febrer\",\n                \"Mar\",\n                \"Abril\",\n                \"Maig\",\n                \"Juny\",\n                \"Juliol\",\n                \"Agost\",\n                \"Setembre\",\n                \"Octubre\",\n                \"Novembre\",\n                \"Desembre\",\n            ]\n        },\n        ordinal: function (nth) {\n            var s = nth % 100;\n            if (s > 3 && s < 21)\n                return \"\";\n            switch (s % 10) {\n                case 1:\n                    return \"r\";\n                case 2:\n                    return \"n\";\n                case 3:\n                    return \"r\";\n                case 4:\n                    return \"t\";\n                default:\n                    return \"\";\n            }\n        },\n        firstDayOfWeek: 1\n    };\n    fp$6.l10ns.cat = Catalan;\n    fp$6.l10ns;\n\n    var fp$7 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Czech = {\n        weekdays: {\n            shorthand: [\"Ne\", \"Po\", \"t\", \"St\", \"t\", \"P\", \"So\"],\n            longhand: [\n                \"Nedle\",\n                \"Pondl\",\n                \"ter\",\n                \"Steda\",\n                \"tvrtek\",\n                \"Ptek\",\n                \"Sobota\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Led\",\n                \"n\",\n                \"Be\",\n                \"Dub\",\n                \"Kv\",\n                \"er\",\n                \"vc\",\n                \"Srp\",\n                \"Z\",\n                \"j\",\n                \"Lis\",\n                \"Pro\",\n            ],\n            longhand: [\n                \"Leden\",\n                \"nor\",\n                \"Bezen\",\n                \"Duben\",\n                \"Kvten\",\n                \"erven\",\n                \"ervenec\",\n                \"Srpen\",\n                \"Z\",\n                \"jen\",\n                \"Listopad\",\n                \"Prosinec\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \".\";\n        },\n        rangeSeparator: \" do \",\n        weekAbbreviation: \"Td.\",\n        scrollTitle: \"Rolujte pro zmnu\",\n        toggleTitle: \"Pepnout dopoledne/odpoledne\",\n        amPM: [\"dop.\", \"odp.\"],\n        yearAriaLabel: \"Rok\"\n    };\n    fp$7.l10ns.cs = Czech;\n    fp$7.l10ns;\n\n    var fp$8 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Welsh = {\n        weekdays: {\n            shorthand: [\"Sul\", \"Llun\", \"Maw\", \"Mer\", \"Iau\", \"Gwe\", \"Sad\"],\n            longhand: [\n                \"Dydd Sul\",\n                \"Dydd Llun\",\n                \"Dydd Mawrth\",\n                \"Dydd Mercher\",\n                \"Dydd Iau\",\n                \"Dydd Gwener\",\n                \"Dydd Sadwrn\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Ion\",\n                \"Chwef\",\n                \"Maw\",\n                \"Ebr\",\n                \"Mai\",\n                \"Meh\",\n                \"Gorff\",\n                \"Awst\",\n                \"Medi\",\n                \"Hyd\",\n                \"Tach\",\n                \"Rhag\",\n            ],\n            longhand: [\n                \"Ionawr\",\n                \"Chwefror\",\n                \"Mawrth\",\n                \"Ebrill\",\n                \"Mai\",\n                \"Mehefin\",\n                \"Gorffennaf\",\n                \"Awst\",\n                \"Medi\",\n                \"Hydref\",\n                \"Tachwedd\",\n                \"Rhagfyr\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function (nth) {\n            if (nth === 1)\n                return \"af\";\n            if (nth === 2)\n                return \"ail\";\n            if (nth === 3 || nth === 4)\n                return \"ydd\";\n            if (nth === 5 || nth === 6)\n                return \"ed\";\n            if ((nth >= 7 && nth <= 10) ||\n                nth == 12 ||\n                nth == 15 ||\n                nth == 18 ||\n                nth == 20)\n                return \"fed\";\n            if (nth == 11 ||\n                nth == 13 ||\n                nth == 14 ||\n                nth == 16 ||\n                nth == 17 ||\n                nth == 19)\n                return \"eg\";\n            if (nth >= 21 && nth <= 39)\n                return \"ain\";\n            // Inconclusive.\n            return \"\";\n        }\n    };\n    fp$8.l10ns.cy = Welsh;\n    fp$8.l10ns;\n\n    var fp$9 = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Danish = {\n        weekdays: {\n            shorthand: [\"sn\", \"man\", \"tir\", \"ons\", \"tors\", \"fre\", \"lr\"],\n            longhand: [\n                \"sndag\",\n                \"mandag\",\n                \"tirsdag\",\n                \"onsdag\",\n                \"torsdag\",\n                \"fredag\",\n                \"lrdag\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"jan\",\n                \"feb\",\n                \"mar\",\n                \"apr\",\n                \"maj\",\n                \"jun\",\n                \"jul\",\n                \"aug\",\n                \"sep\",\n                \"okt\",\n                \"nov\",\n                \"dec\",\n            ],\n            longhand: [\n                \"januar\",\n                \"februar\",\n                \"marts\",\n                \"april\",\n                \"maj\",\n                \"juni\",\n                \"juli\",\n                \"august\",\n                \"september\",\n                \"oktober\",\n                \"november\",\n                \"december\",\n            ]\n        },\n        ordinal: function () {\n            return \".\";\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \" til \",\n        weekAbbreviation: \"uge\"\n    };\n    fp$9.l10ns.da = Danish;\n    fp$9.l10ns;\n\n    var fp$a = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var German = {\n        weekdays: {\n            shorthand: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n            longhand: [\n                \"Sonntag\",\n                \"Montag\",\n                \"Dienstag\",\n                \"Mittwoch\",\n                \"Donnerstag\",\n                \"Freitag\",\n                \"Samstag\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mr\",\n                \"Apr\",\n                \"Mai\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dez\",\n            ],\n            longhand: [\n                \"Januar\",\n                \"Februar\",\n                \"Mrz\",\n                \"April\",\n                \"Mai\",\n                \"Juni\",\n                \"Juli\",\n                \"August\",\n                \"September\",\n                \"Oktober\",\n                \"November\",\n                \"Dezember\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        weekAbbreviation: \"KW\",\n        rangeSeparator: \" bis \",\n        scrollTitle: \"Zum ndern scrollen\",\n        toggleTitle: \"Zum Umschalten klicken\"\n    };\n    fp$a.l10ns.de = German;\n    fp$a.l10ns;\n\n    var english = {\n        weekdays: {\n            shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n            longhand: [\n                \"Sunday\",\n                \"Monday\",\n                \"Tuesday\",\n                \"Wednesday\",\n                \"Thursday\",\n                \"Friday\",\n                \"Saturday\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"May\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Oct\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"January\",\n                \"February\",\n                \"March\",\n                \"April\",\n                \"May\",\n                \"June\",\n                \"July\",\n                \"August\",\n                \"September\",\n                \"October\",\n                \"November\",\n                \"December\",\n            ]\n        },\n        daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n        firstDayOfWeek: 0,\n        ordinal: function (nth) {\n            var s = nth % 100;\n            if (s > 3 && s < 21)\n                return \"th\";\n            switch (s % 10) {\n                case 1:\n                    return \"st\";\n                case 2:\n                    return \"nd\";\n                case 3:\n                    return \"rd\";\n                default:\n                    return \"th\";\n            }\n        },\n        rangeSeparator: \" to \",\n        weekAbbreviation: \"Wk\",\n        scrollTitle: \"Scroll to increment\",\n        toggleTitle: \"Click to toggle\",\n        amPM: [\"AM\", \"PM\"],\n        yearAriaLabel: \"Year\"\n    };\n\n    var fp$b = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Esperanto = {\n        firstDayOfWeek: 1,\n        rangeSeparator: \" is \",\n        weekAbbreviation: \"Sem\",\n        scrollTitle: \"Rulumu por pligrandigi la valoron\",\n        toggleTitle: \"Klaku por alti\",\n        weekdays: {\n            shorthand: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"a\", \"Ven\", \"Sab\"],\n            longhand: [\n                \"dimano\",\n                \"lundo\",\n                \"mardo\",\n                \"merkredo\",\n                \"ado\",\n                \"vendredo\",\n                \"sabato\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Maj\",\n                \"Jun\",\n                \"Jul\",\n                \"Ag\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"januaro\",\n                \"februaro\",\n                \"marto\",\n                \"aprilo\",\n                \"majo\",\n                \"junio\",\n                \"julio\",\n                \"agusto\",\n                \"septembro\",\n                \"oktobro\",\n                \"novembro\",\n                \"decembro\",\n            ]\n        },\n        ordinal: function () {\n            return \"-a\";\n        }\n    };\n    fp$b.l10ns.eo = Esperanto;\n    fp$b.l10ns;\n\n    var fp$c = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Spanish = {\n        weekdays: {\n            shorthand: [\"Dom\", \"Lun\", \"Mar\", \"Mi\", \"Jue\", \"Vie\", \"Sb\"],\n            longhand: [\n                \"Domingo\",\n                \"Lunes\",\n                \"Martes\",\n                \"Mircoles\",\n                \"Jueves\",\n                \"Viernes\",\n                \"Sbado\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Ene\",\n                \"Feb\",\n                \"Mar\",\n                \"Abr\",\n                \"May\",\n                \"Jun\",\n                \"Jul\",\n                \"Ago\",\n                \"Sep\",\n                \"Oct\",\n                \"Nov\",\n                \"Dic\",\n            ],\n            longhand: [\n                \"Enero\",\n                \"Febrero\",\n                \"Marzo\",\n                \"Abril\",\n                \"Mayo\",\n                \"Junio\",\n                \"Julio\",\n                \"Agosto\",\n                \"Septiembre\",\n                \"Octubre\",\n                \"Noviembre\",\n                \"Diciembre\",\n            ]\n        },\n        ordinal: function () {\n            return \"\";\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \" a \"\n    };\n    fp$c.l10ns.es = Spanish;\n    fp$c.l10ns;\n\n    var fp$d = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Estonian = {\n        weekdays: {\n            shorthand: [\"P\", \"E\", \"T\", \"K\", \"N\", \"R\", \"L\"],\n            longhand: [\n                \"Phapev\",\n                \"Esmaspev\",\n                \"Teisipev\",\n                \"Kolmapev\",\n                \"Neljapev\",\n                \"Reede\",\n                \"Laupev\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jaan\",\n                \"Veebr\",\n                \"Mrts\",\n                \"Apr\",\n                \"Mai\",\n                \"Juuni\",\n                \"Juuli\",\n                \"Aug\",\n                \"Sept\",\n                \"Okt\",\n                \"Nov\",\n                \"Dets\",\n            ],\n            longhand: [\n                \"Jaanuar\",\n                \"Veebruar\",\n                \"Mrts\",\n                \"Aprill\",\n                \"Mai\",\n                \"Juuni\",\n                \"Juuli\",\n                \"August\",\n                \"September\",\n                \"Oktoober\",\n                \"November\",\n                \"Detsember\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \".\";\n        },\n        weekAbbreviation: \"Nd\",\n        rangeSeparator: \" kuni \",\n        scrollTitle: \"Keri, et suurendada\",\n        toggleTitle: \"Klpsa, et vahetada\"\n    };\n    fp$d.l10ns.et = Estonian;\n    fp$d.l10ns;\n\n    var fp$e = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Persian = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 6,\n        ordinal: function () {\n            return \"\";\n        }\n    };\n    fp$e.l10ns.fa = Persian;\n    fp$e.l10ns;\n\n    var fp$f = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Finnish = {\n        firstDayOfWeek: 1,\n        weekdays: {\n            shorthand: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"],\n            longhand: [\n                \"Sunnuntai\",\n                \"Maanantai\",\n                \"Tiistai\",\n                \"Keskiviikko\",\n                \"Torstai\",\n                \"Perjantai\",\n                \"Lauantai\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Tammi\",\n                \"Helmi\",\n                \"Maalis\",\n                \"Huhti\",\n                \"Touko\",\n                \"Kes\",\n                \"Hein\",\n                \"Elo\",\n                \"Syys\",\n                \"Loka\",\n                \"Marras\",\n                \"Joulu\",\n            ],\n            longhand: [\n                \"Tammikuu\",\n                \"Helmikuu\",\n                \"Maaliskuu\",\n                \"Huhtikuu\",\n                \"Toukokuu\",\n                \"Keskuu\",\n                \"Heinkuu\",\n                \"Elokuu\",\n                \"Syyskuu\",\n                \"Lokakuu\",\n                \"Marraskuu\",\n                \"Joulukuu\",\n            ]\n        },\n        ordinal: function () {\n            return \".\";\n        }\n    };\n    fp$f.l10ns.fi = Finnish;\n    fp$f.l10ns;\n\n    var fp$g = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Faroese = {\n        weekdays: {\n            shorthand: [\"Sun\", \"Mn\", \"Ts\", \"Mik\", \"Hs\", \"Fr\", \"Ley\"],\n            longhand: [\n                \"Sunnudagur\",\n                \"Mnadagur\",\n                \"Tsdagur\",\n                \"Mikudagur\",\n                \"Hsdagur\",\n                \"Frggjadagur\",\n                \"Leygardagur\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Mai\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Des\",\n            ],\n            longhand: [\n                \"Januar\",\n                \"Februar\",\n                \"Mars\",\n                \"Aprl\",\n                \"Mai\",\n                \"Juni\",\n                \"Juli\",\n                \"August\",\n                \"Septembur\",\n                \"Oktobur\",\n                \"Novembur\",\n                \"Desembur\",\n            ]\n        },\n        ordinal: function () {\n            return \".\";\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \" til \",\n        weekAbbreviation: \"vika\",\n        scrollTitle: \"Rulla fyri at broyta\",\n        toggleTitle: \"Trst fyri at skifta\",\n        yearAriaLabel: \"r\"\n    };\n    fp$g.l10ns.fo = Faroese;\n    fp$g.l10ns;\n\n    var fp$h = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var French = {\n        firstDayOfWeek: 1,\n        weekdays: {\n            shorthand: [\"dim\", \"lun\", \"mar\", \"mer\", \"jeu\", \"ven\", \"sam\"],\n            longhand: [\n                \"dimanche\",\n                \"lundi\",\n                \"mardi\",\n                \"mercredi\",\n                \"jeudi\",\n                \"vendredi\",\n                \"samedi\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"janv\",\n                \"fvr\",\n                \"mars\",\n                \"avr\",\n                \"mai\",\n                \"juin\",\n                \"juil\",\n                \"aot\",\n                \"sept\",\n                \"oct\",\n                \"nov\",\n                \"dc\",\n            ],\n            longhand: [\n                \"janvier\",\n                \"fvrier\",\n                \"mars\",\n                \"avril\",\n                \"mai\",\n                \"juin\",\n                \"juillet\",\n                \"aot\",\n                \"septembre\",\n                \"octobre\",\n                \"novembre\",\n                \"dcembre\",\n            ]\n        },\n        ordinal: function (nth) {\n            if (nth > 1)\n                return \"\";\n            return \"er\";\n        },\n        rangeSeparator: \" au \",\n        weekAbbreviation: \"Sem\",\n        scrollTitle: \"Dfiler pour augmenter la valeur\",\n        toggleTitle: \"Cliquer pour basculer\"\n    };\n    fp$h.l10ns.fr = French;\n    fp$h.l10ns;\n\n    var fp$i = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Greek = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        },\n        weekAbbreviation: \"\",\n        rangeSeparator: \"  \",\n        scrollTitle: \"  \",\n        toggleTitle: \"   \",\n        amPM: [\"\", \"\"]\n    };\n    fp$i.l10ns.gr = Greek;\n    fp$i.l10ns;\n\n    var fp$j = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Hebrew = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        rangeSeparator: \"  \"\n    };\n    fp$j.l10ns.he = Hebrew;\n    fp$j.l10ns;\n\n    var fp$k = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Hindi = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \" \",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \" \",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        }\n    };\n    fp$k.l10ns.hi = Hindi;\n    fp$k.l10ns;\n\n    var fp$l = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Croatian = {\n        firstDayOfWeek: 1,\n        weekdays: {\n            shorthand: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"et\", \"Pet\", \"Sub\"],\n            longhand: [\n                \"Nedjelja\",\n                \"Ponedjeljak\",\n                \"Utorak\",\n                \"Srijeda\",\n                \"etvrtak\",\n                \"Petak\",\n                \"Subota\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Sij\",\n                \"Velj\",\n                \"Ou\",\n                \"Tra\",\n                \"Svi\",\n                \"Lip\",\n                \"Srp\",\n                \"Kol\",\n                \"Ruj\",\n                \"Lis\",\n                \"Stu\",\n                \"Pro\",\n            ],\n            longhand: [\n                \"Sijeanj\",\n                \"Veljaa\",\n                \"Oujak\",\n                \"Travanj\",\n                \"Svibanj\",\n                \"Lipanj\",\n                \"Srpanj\",\n                \"Kolovoz\",\n                \"Rujan\",\n                \"Listopad\",\n                \"Studeni\",\n                \"Prosinac\",\n            ]\n        }\n    };\n    fp$l.l10ns.hr = Croatian;\n    fp$l.l10ns;\n\n    var fp$m = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Hungarian = {\n        firstDayOfWeek: 1,\n        weekdays: {\n            shorthand: [\"V\", \"H\", \"K\", \"Sz\", \"Cs\", \"P\", \"Szo\"],\n            longhand: [\n                \"Vasrnap\",\n                \"Htf\",\n                \"Kedd\",\n                \"Szerda\",\n                \"Cstrtk\",\n                \"Pntek\",\n                \"Szombat\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mr\",\n                \"pr\",\n                \"Mj\",\n                \"Jn\",\n                \"Jl\",\n                \"Aug\",\n                \"Szep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"Janur\",\n                \"Februr\",\n                \"Mrcius\",\n                \"prilis\",\n                \"Mjus\",\n                \"Jnius\",\n                \"Jlius\",\n                \"Augusztus\",\n                \"Szeptember\",\n                \"Oktber\",\n                \"November\",\n                \"December\",\n            ]\n        },\n        ordinal: function () {\n            return \".\";\n        },\n        weekAbbreviation: \"Ht\",\n        scrollTitle: \"Grgessen\",\n        toggleTitle: \"Kattintson a vltshoz\",\n        rangeSeparator: \" - \"\n    };\n    fp$m.l10ns.hu = Hungarian;\n    fp$m.l10ns;\n\n    var fp$n = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Indonesian = {\n        weekdays: {\n            shorthand: [\"Min\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"],\n            longhand: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Mei\",\n                \"Jun\",\n                \"Jul\",\n                \"Agu\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Des\",\n            ],\n            longhand: [\n                \"Januari\",\n                \"Februari\",\n                \"Maret\",\n                \"April\",\n                \"Mei\",\n                \"Juni\",\n                \"Juli\",\n                \"Agustus\",\n                \"September\",\n                \"Oktober\",\n                \"November\",\n                \"Desember\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        }\n    };\n    fp$n.l10ns.id = Indonesian;\n    fp$n.l10ns;\n\n    var fp$o = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Icelandic = {\n        weekdays: {\n            shorthand: [\"Sun\", \"Mn\", \"ri\", \"Mi\", \"Fim\", \"Fs\", \"Lau\"],\n            longhand: [\n                \"Sunnudagur\",\n                \"Mnudagur\",\n                \"rijudagur\",\n                \"Mivikudagur\",\n                \"Fimmtudagur\",\n                \"Fstudagur\",\n                \"Laugardagur\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Ma\",\n                \"Jn\",\n                \"Jl\",\n                \"g\",\n                \"Sep\",\n                \"Okt\",\n                \"Nv\",\n                \"Des\",\n            ],\n            longhand: [\n                \"Janar\",\n                \"Febrar\",\n                \"Mars\",\n                \"Aprl\",\n                \"Ma\",\n                \"Jn\",\n                \"Jl\",\n                \"gst\",\n                \"September\",\n                \"Oktber\",\n                \"Nvember\",\n                \"Desember\",\n            ]\n        },\n        ordinal: function () {\n            return \".\";\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \" til \",\n        weekAbbreviation: \"vika\",\n        yearAriaLabel: \"r\"\n    };\n    fp$o.l10ns.is = Icelandic;\n    fp$o.l10ns;\n\n    var fp$p = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Italian = {\n        weekdays: {\n            shorthand: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"],\n            longhand: [\n                \"Domenica\",\n                \"Luned\",\n                \"Marted\",\n                \"Mercoled\",\n                \"Gioved\",\n                \"Venerd\",\n                \"Sabato\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Gen\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Mag\",\n                \"Giu\",\n                \"Lug\",\n                \"Ago\",\n                \"Set\",\n                \"Ott\",\n                \"Nov\",\n                \"Dic\",\n            ],\n            longhand: [\n                \"Gennaio\",\n                \"Febbraio\",\n                \"Marzo\",\n                \"Aprile\",\n                \"Maggio\",\n                \"Giugno\",\n                \"Luglio\",\n                \"Agosto\",\n                \"Settembre\",\n                \"Ottobre\",\n                \"Novembre\",\n                \"Dicembre\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () { return \"\"; },\n        rangeSeparator: \" al \",\n        weekAbbreviation: \"Se\",\n        scrollTitle: \"Scrolla per aumentare\",\n        toggleTitle: \"Clicca per cambiare\"\n    };\n    fp$p.l10ns.it = Italian;\n    fp$p.l10ns;\n\n    var fp$q = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Japanese = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"1\",\n                \"2\",\n                \"3\",\n                \"4\",\n                \"5\",\n                \"6\",\n                \"7\",\n                \"8\",\n                \"9\",\n                \"10\",\n                \"11\",\n                \"12\",\n            ],\n            longhand: [\n                \"1\",\n                \"2\",\n                \"3\",\n                \"4\",\n                \"5\",\n                \"6\",\n                \"7\",\n                \"8\",\n                \"9\",\n                \"10\",\n                \"11\",\n                \"12\",\n            ]\n        }\n    };\n    fp$q.l10ns.ja = Japanese;\n    fp$q.l10ns;\n\n    var fp$r = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Korean = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"1\",\n                \"2\",\n                \"3\",\n                \"4\",\n                \"5\",\n                \"6\",\n                \"7\",\n                \"8\",\n                \"9\",\n                \"10\",\n                \"11\",\n                \"12\",\n            ],\n            longhand: [\n                \"1\",\n                \"2\",\n                \"3\",\n                \"4\",\n                \"5\",\n                \"6\",\n                \"7\",\n                \"8\",\n                \"9\",\n                \"10\",\n                \"11\",\n                \"12\",\n            ]\n        },\n        ordinal: function () {\n            return \"\";\n        }\n    };\n    fp$r.l10ns.ko = Korean;\n    fp$r.l10ns;\n\n    var fp$s = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Khmer = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \".\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        ordinal: function () {\n            return \"\";\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \"  \",\n        weekAbbreviation: \"\",\n        scrollTitle: \"\",\n        toggleTitle: \"\",\n        yearAriaLabel: \"\"\n    };\n    fp$s.l10ns.km = Khmer;\n    fp$s.l10ns;\n\n    var fp$t = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Kazakh = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"c\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"i\",\n                \"i\",\n                \"i\",\n                \"i\",\n                \"i\",\n                \"\",\n                \"i\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"i\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"i\",\n                \"\",\n                \"\",\n                \"i\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        },\n        rangeSeparator: \"  \",\n        weekAbbreviation: \"\",\n        scrollTitle: \"  \",\n        toggleTitle: \"  \",\n        amPM: [\"\", \"\"],\n        yearAriaLabel: \"\"\n    };\n    fp$t.l10ns.kz = Kazakh;\n    fp$t.l10ns;\n\n    var fp$u = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Lithuanian = {\n        weekdays: {\n            shorthand: [\"S\", \"Pr\", \"A\", \"T\", \"K\", \"Pn\", \"\"],\n            longhand: [\n                \"Sekmadienis\",\n                \"Pirmadienis\",\n                \"Antradienis\",\n                \"Treiadienis\",\n                \"Ketvirtadienis\",\n                \"Penktadienis\",\n                \"etadienis\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Sau\",\n                \"Vas\",\n                \"Kov\",\n                \"Bal\",\n                \"Geg\",\n                \"Bir\",\n                \"Lie\",\n                \"Rgp\",\n                \"Rgs\",\n                \"Spl\",\n                \"Lap\",\n                \"Grd\",\n            ],\n            longhand: [\n                \"Sausis\",\n                \"Vasaris\",\n                \"Kovas\",\n                \"Balandis\",\n                \"Gegu\",\n                \"Birelis\",\n                \"Liepa\",\n                \"Rugpjutis\",\n                \"Rugsejis\",\n                \"Spalis\",\n                \"Lapkritis\",\n                \"Gruodis\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"-a\";\n        },\n        weekAbbreviation: \"Sav\",\n        scrollTitle: \"Keisti laik pels rateliu\",\n        toggleTitle: \"Perjungti laiko format\"\n    };\n    fp$u.l10ns.lt = Lithuanian;\n    fp$u.l10ns;\n\n    var fp$v = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Latvian = {\n        firstDayOfWeek: 1,\n        weekdays: {\n            shorthand: [\"Sv\", \"Pr\", \"Ot\", \"Tr\", \"Ce\", \"Pk\", \"Se\"],\n            longhand: [\n                \"Svtdiena\",\n                \"Pirmdiena\",\n                \"Otrdiena\",\n                \"Trediena\",\n                \"Ceturtdiena\",\n                \"Piektdiena\",\n                \"Sestdiena\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Mai\",\n                \"Jn\",\n                \"Jl\",\n                \"Aug\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"Janvris\",\n                \"Februris\",\n                \"Marts\",\n                \"Aprlis\",\n                \"Maijs\",\n                \"Jnijs\",\n                \"Jlijs\",\n                \"Augusts\",\n                \"Septembris\",\n                \"Oktobris\",\n                \"Novembris\",\n                \"Decembris\",\n            ]\n        },\n        rangeSeparator: \" ldz \"\n    };\n    fp$v.l10ns.lv = Latvian;\n    fp$v.l10ns;\n\n    var fp$w = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Macedonian = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        weekAbbreviation: \".\",\n        rangeSeparator: \"  \"\n    };\n    fp$w.l10ns.mk = Macedonian;\n    fp$w.l10ns;\n\n    var fp$x = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Mongolian = {\n        firstDayOfWeek: 1,\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n        },\n        months: {\n            shorthand: [\n                \"1- \",\n                \"2- \",\n                \"3- \",\n                \"4- \",\n                \"5- \",\n                \"6- \",\n                \"7- \",\n                \"8- \",\n                \"9- \",\n                \"10- \",\n                \"11- \",\n                \"12- \",\n            ],\n            longhand: [\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n                \" \",\n            ]\n        },\n        rangeSeparator: \"- \"\n    };\n    fp$x.l10ns.mn = Mongolian;\n    fp$x.l10ns;\n\n    var fp$y = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Malaysian = {\n        weekdays: {\n            shorthand: [\"Min\", \"Isn\", \"Sel\", \"Rab\", \"Kha\", \"Jum\", \"Sab\"],\n            longhand: [\n                \"Minggu\",\n                \"Isnin\",\n                \"Selasa\",\n                \"Rabu\",\n                \"Khamis\",\n                \"Jumaat\",\n                \"Sabtu\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mac\",\n                \"Apr\",\n                \"Mei\",\n                \"Jun\",\n                \"Jul\",\n                \"Ogo\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dis\",\n            ],\n            longhand: [\n                \"Januari\",\n                \"Februari\",\n                \"Mac\",\n                \"April\",\n                \"Mei\",\n                \"Jun\",\n                \"Julai\",\n                \"Ogos\",\n                \"September\",\n                \"Oktober\",\n                \"November\",\n                \"Disember\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        }\n    };\n    fp$y.l10ns;\n\n    var fp$z = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Burmese = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        }\n    };\n    fp$z.l10ns.my = Burmese;\n    fp$z.l10ns;\n\n    var fp$A = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Dutch = {\n        weekdays: {\n            shorthand: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"],\n            longhand: [\n                \"zondag\",\n                \"maandag\",\n                \"dinsdag\",\n                \"woensdag\",\n                \"donderdag\",\n                \"vrijdag\",\n                \"zaterdag\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"jan\",\n                \"feb\",\n                \"mrt\",\n                \"apr\",\n                \"mei\",\n                \"jun\",\n                \"jul\",\n                \"aug\",\n                \"sept\",\n                \"okt\",\n                \"nov\",\n                \"dec\",\n            ],\n            longhand: [\n                \"januari\",\n                \"februari\",\n                \"maart\",\n                \"april\",\n                \"mei\",\n                \"juni\",\n                \"juli\",\n                \"augustus\",\n                \"september\",\n                \"oktober\",\n                \"november\",\n                \"december\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        weekAbbreviation: \"wk\",\n        rangeSeparator: \" tot \",\n        scrollTitle: \"Scroll voor volgende / vorige\",\n        toggleTitle: \"Klik om te wisselen\",\n        ordinal: function (nth) {\n            if (nth === 1 || nth === 8 || nth >= 20)\n                return \"ste\";\n            return \"de\";\n        }\n    };\n    fp$A.l10ns.nl = Dutch;\n    fp$A.l10ns;\n\n    var fp$B = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Norwegian = {\n        weekdays: {\n            shorthand: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"],\n            longhand: [\n                \"Sndag\",\n                \"Mandag\",\n                \"Tirsdag\",\n                \"Onsdag\",\n                \"Torsdag\",\n                \"Fredag\",\n                \"Lrdag\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Mai\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Des\",\n            ],\n            longhand: [\n                \"Januar\",\n                \"Februar\",\n                \"Mars\",\n                \"April\",\n                \"Mai\",\n                \"Juni\",\n                \"Juli\",\n                \"August\",\n                \"September\",\n                \"Oktober\",\n                \"November\",\n                \"Desember\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \" til \",\n        weekAbbreviation: \"Uke\",\n        scrollTitle: \"Scroll for  endre\",\n        toggleTitle: \"Klikk for  veksle\",\n        ordinal: function () {\n            return \".\";\n        }\n    };\n    fp$B.l10ns.no = Norwegian;\n    fp$B.l10ns;\n\n    var fp$C = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Punjabi = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        }\n    };\n    fp$C.l10ns.pa = Punjabi;\n    fp$C.l10ns;\n\n    var fp$D = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Polish = {\n        weekdays: {\n            shorthand: [\"Nd\", \"Pn\", \"Wt\", \"r\", \"Cz\", \"Pt\", \"So\"],\n            longhand: [\n                \"Niedziela\",\n                \"Poniedziaek\",\n                \"Wtorek\",\n                \"roda\",\n                \"Czwartek\",\n                \"Pitek\",\n                \"Sobota\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Sty\",\n                \"Lut\",\n                \"Mar\",\n                \"Kwi\",\n                \"Maj\",\n                \"Cze\",\n                \"Lip\",\n                \"Sie\",\n                \"Wrz\",\n                \"Pa\",\n                \"Lis\",\n                \"Gru\",\n            ],\n            longhand: [\n                \"Stycze\",\n                \"Luty\",\n                \"Marzec\",\n                \"Kwiecie\",\n                \"Maj\",\n                \"Czerwiec\",\n                \"Lipiec\",\n                \"Sierpie\",\n                \"Wrzesie\",\n                \"Padziernik\",\n                \"Listopad\",\n                \"Grudzie\",\n            ]\n        },\n        rangeSeparator: \" do \",\n        weekAbbreviation: \"tydz.\",\n        scrollTitle: \"Przwi aby zwikszy\",\n        toggleTitle: \"Kliknij aby przeczy\",\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \".\";\n        }\n    };\n    fp$D.l10ns.pl = Polish;\n    fp$D.l10ns;\n\n    var fp$E = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Portuguese = {\n        weekdays: {\n            shorthand: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sb\"],\n            longhand: [\n                \"Domingo\",\n                \"Segunda-feira\",\n                \"Tera-feira\",\n                \"Quarta-feira\",\n                \"Quinta-feira\",\n                \"Sexta-feira\",\n                \"Sbado\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Fev\",\n                \"Mar\",\n                \"Abr\",\n                \"Mai\",\n                \"Jun\",\n                \"Jul\",\n                \"Ago\",\n                \"Set\",\n                \"Out\",\n                \"Nov\",\n                \"Dez\",\n            ],\n            longhand: [\n                \"Janeiro\",\n                \"Fevereiro\",\n                \"Maro\",\n                \"Abril\",\n                \"Maio\",\n                \"Junho\",\n                \"Julho\",\n                \"Agosto\",\n                \"Setembro\",\n                \"Outubro\",\n                \"Novembro\",\n                \"Dezembro\",\n            ]\n        },\n        rangeSeparator: \" at \"\n    };\n    fp$E.l10ns.pt = Portuguese;\n    fp$E.l10ns;\n\n    var fp$F = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Romanian = {\n        weekdays: {\n            shorthand: [\"Dum\", \"Lun\", \"Mar\", \"Mie\", \"Joi\", \"Vin\", \"Sam\"],\n            longhand: [\n                \"Duminic\",\n                \"Luni\",\n                \"Mari\",\n                \"Miercuri\",\n                \"Joi\",\n                \"Vineri\",\n                \"Smbt\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Ian\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Mai\",\n                \"Iun\",\n                \"Iul\",\n                \"Aug\",\n                \"Sep\",\n                \"Oct\",\n                \"Noi\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"Ianuarie\",\n                \"Februarie\",\n                \"Martie\",\n                \"Aprilie\",\n                \"Mai\",\n                \"Iunie\",\n                \"Iulie\",\n                \"August\",\n                \"Septembrie\",\n                \"Octombrie\",\n                \"Noiembrie\",\n                \"Decembrie\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        }\n    };\n    fp$F.l10ns.ro = Romanian;\n    fp$F.l10ns;\n\n    var fp$G = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Russian = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \"\";\n        },\n        rangeSeparator: \"  \",\n        weekAbbreviation: \".\",\n        scrollTitle: \"  \",\n        toggleTitle: \"  \",\n        amPM: [\"\", \"\"],\n        yearAriaLabel: \"\"\n    };\n    fp$G.l10ns.ru = Russian;\n    fp$G.l10ns;\n\n    var fp$H = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Sinhala = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        }\n    };\n    fp$H.l10ns.si = Sinhala;\n    fp$H.l10ns;\n\n    var fp$I = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Slovak = {\n        weekdays: {\n            shorthand: [\"Ned\", \"Pon\", \"Ut\", \"Str\", \"tv\", \"Pia\", \"Sob\"],\n            longhand: [\n                \"Nedea\",\n                \"Pondelok\",\n                \"Utorok\",\n                \"Streda\",\n                \"tvrtok\",\n                \"Piatok\",\n                \"Sobota\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Mj\",\n                \"Jn\",\n                \"Jl\",\n                \"Aug\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"Janur\",\n                \"Februr\",\n                \"Marec\",\n                \"Aprl\",\n                \"Mj\",\n                \"Jn\",\n                \"Jl\",\n                \"August\",\n                \"September\",\n                \"Oktber\",\n                \"November\",\n                \"December\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \" do \",\n        ordinal: function () {\n            return \".\";\n        }\n    };\n    fp$I.l10ns.sk = Slovak;\n    fp$I.l10ns;\n\n    var fp$J = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Slovenian = {\n        weekdays: {\n            shorthand: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"et\", \"Pet\", \"Sob\"],\n            longhand: [\n                \"Nedelja\",\n                \"Ponedeljek\",\n                \"Torek\",\n                \"Sreda\",\n                \"etrtek\",\n                \"Petek\",\n                \"Sobota\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Maj\",\n                \"Jun\",\n                \"Jul\",\n                \"Avg\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"Januar\",\n                \"Februar\",\n                \"Marec\",\n                \"April\",\n                \"Maj\",\n                \"Junij\",\n                \"Julij\",\n                \"Avgust\",\n                \"September\",\n                \"Oktober\",\n                \"November\",\n                \"December\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \" do \",\n        ordinal: function () {\n            return \".\";\n        }\n    };\n    fp$J.l10ns.sl = Slovenian;\n    fp$J.l10ns;\n\n    var fp$K = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Albanian = {\n        weekdays: {\n            shorthand: [\"Di\", \"H\", \"Ma\", \"M\", \"En\", \"Pr\", \"Sh\"],\n            longhand: [\n                \"E Diel\",\n                \"E Hn\",\n                \"E Mart\",\n                \"E Mrkur\",\n                \"E Enjte\",\n                \"E Premte\",\n                \"E Shtun\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Shk\",\n                \"Mar\",\n                \"Pri\",\n                \"Maj\",\n                \"Qer\",\n                \"Kor\",\n                \"Gus\",\n                \"Sht\",\n                \"Tet\",\n                \"Nn\",\n                \"Dhj\",\n            ],\n            longhand: [\n                \"Janar\",\n                \"Shkurt\",\n                \"Mars\",\n                \"Prill\",\n                \"Maj\",\n                \"Qershor\",\n                \"Korrik\",\n                \"Gusht\",\n                \"Shtator\",\n                \"Tetor\",\n                \"Nntor\",\n                \"Dhjetor\",\n            ]\n        }\n    };\n    fp$K.l10ns.sq = Albanian;\n    fp$K.l10ns;\n\n    var fp$L = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Serbian = {\n        weekdays: {\n            shorthand: [\"Ned\", \"Pon\", \"Uto\", \"Sre\", \"et\", \"Pet\", \"Sub\"],\n            longhand: [\n                \"Nedelja\",\n                \"Ponedeljak\",\n                \"Utorak\",\n                \"Sreda\",\n                \"etvrtak\",\n                \"Petak\",\n                \"Subota\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Maj\",\n                \"Jun\",\n                \"Jul\",\n                \"Avg\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"Januar\",\n                \"Februar\",\n                \"Mart\",\n                \"April\",\n                \"Maj\",\n                \"Jun\",\n                \"Jul\",\n                \"Avgust\",\n                \"Septembar\",\n                \"Oktobar\",\n                \"Novembar\",\n                \"Decembar\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        weekAbbreviation: \"Ned.\",\n        rangeSeparator: \" do \"\n    };\n    fp$L.l10ns.sr = Serbian;\n    fp$L.l10ns;\n\n    var fp$M = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Swedish = {\n        firstDayOfWeek: 1,\n        weekAbbreviation: \"v\",\n        weekdays: {\n            shorthand: [\"Sn\", \"Mn\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"],\n            longhand: [\n                \"Sndag\",\n                \"Mndag\",\n                \"Tisdag\",\n                \"Onsdag\",\n                \"Torsdag\",\n                \"Fredag\",\n                \"Lrdag\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"Maj\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Okt\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"Januari\",\n                \"Februari\",\n                \"Mars\",\n                \"April\",\n                \"Maj\",\n                \"Juni\",\n                \"Juli\",\n                \"Augusti\",\n                \"September\",\n                \"Oktober\",\n                \"November\",\n                \"December\",\n            ]\n        },\n        ordinal: function () {\n            return \".\";\n        }\n    };\n    fp$M.l10ns.sv = Swedish;\n    fp$M.l10ns;\n\n    var fp$N = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Thai = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n                \"..\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        rangeSeparator: \"  \",\n        scrollTitle: \"\",\n        toggleTitle: \"\",\n        ordinal: function () {\n            return \"\";\n        }\n    };\n    fp$N.l10ns.th = Thai;\n    fp$N.l10ns;\n\n    var fp$O = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Turkish = {\n        weekdays: {\n            shorthand: [\"Paz\", \"Pzt\", \"Sal\", \"ar\", \"Per\", \"Cum\", \"Cmt\"],\n            longhand: [\n                \"Pazar\",\n                \"Pazartesi\",\n                \"Sal\",\n                \"aramba\",\n                \"Perembe\",\n                \"Cuma\",\n                \"Cumartesi\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Oca\",\n                \"ub\",\n                \"Mar\",\n                \"Nis\",\n                \"May\",\n                \"Haz\",\n                \"Tem\",\n                \"Au\",\n                \"Eyl\",\n                \"Eki\",\n                \"Kas\",\n                \"Ara\",\n            ],\n            longhand: [\n                \"Ocak\",\n                \"ubat\",\n                \"Mart\",\n                \"Nisan\",\n                \"Mays\",\n                \"Haziran\",\n                \"Temmuz\",\n                \"Austos\",\n                \"Eyll\",\n                \"Ekim\",\n                \"Kasm\",\n                \"Aralk\",\n            ]\n        },\n        firstDayOfWeek: 1,\n        ordinal: function () {\n            return \".\";\n        },\n        rangeSeparator: \" - \",\n        weekAbbreviation: \"Hf\",\n        scrollTitle: \"Artrmak iin kaydrn\",\n        toggleTitle: \"A/Kapa\",\n        amPM: [\"\", \"S\"]\n    };\n    fp$O.l10ns.tr = Turkish;\n    fp$O.l10ns;\n\n    var fp$P = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Ukrainian = {\n        firstDayOfWeek: 1,\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"'\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        }\n    };\n    fp$P.l10ns.uk = Ukrainian;\n    fp$P.l10ns;\n\n    var fp$Q = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Vietnamese = {\n        weekdays: {\n            shorthand: [\"CN\", \"T2\", \"T3\", \"T4\", \"T5\", \"T6\", \"T7\"],\n            longhand: [\n                \"Ch nht\",\n                \"Th hai\",\n                \"Th ba\",\n                \"Th t\",\n                \"Th nm\",\n                \"Th su\",\n                \"Th by\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"Th1\",\n                \"Th2\",\n                \"Th3\",\n                \"Th4\",\n                \"Th5\",\n                \"Th6\",\n                \"Th7\",\n                \"Th8\",\n                \"Th9\",\n                \"Th10\",\n                \"Th11\",\n                \"Th12\",\n            ],\n            longhand: [\n                \"Thng mt\",\n                \"Thng hai\",\n                \"Thng ba\",\n                \"Thng t\",\n                \"Thng nm\",\n                \"Thng su\",\n                \"Thng by\",\n                \"Thng tm\",\n                \"Thng chn\",\n                \"Thng mi\",\n                \"Thng 11\",\n                \"Thng 12\",\n            ]\n        },\n        firstDayOfWeek: 1\n    };\n    fp$Q.l10ns.vn = Vietnamese;\n    fp$Q.l10ns;\n\n    var fp$R = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var Mandarin = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        rangeSeparator: \"  \",\n        weekAbbreviation: \"\",\n        scrollTitle: \"\",\n        toggleTitle: \" 12/24 \"\n    };\n    fp$R.l10ns.zh = Mandarin;\n    fp$R.l10ns;\n\n    var fp$S = typeof window !== \"undefined\" && window.flatpickr !== undefined\n        ? window.flatpickr\n        : {\n            l10ns: {}\n        };\n    var MandarinTraditional = {\n        weekdays: {\n            shorthand: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        months: {\n            shorthand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ],\n            longhand: [\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n                \"\",\n            ]\n        },\n        rangeSeparator: \"  \",\n        weekAbbreviation: \"\",\n        scrollTitle: \"\",\n        toggleTitle: \" 12/24 \"\n    };\n    fp$S.l10ns.zh_tw = MandarinTraditional;\n    fp$S.l10ns;\n\n    var l10n = {\n        ar: Arabic,\n        at: Austria,\n        az: Azerbaijan,\n        be: Belarusian,\n        bg: Bulgarian,\n        bn: Bangla,\n        cat: Catalan,\n        cs: Czech,\n        cy: Welsh,\n        da: Danish,\n        de: German,\n        \"default\": __assign({}, english),\n        en: english,\n        eo: Esperanto,\n        es: Spanish,\n        et: Estonian,\n        fa: Persian,\n        fi: Finnish,\n        fo: Faroese,\n        fr: French,\n        gr: Greek,\n        he: Hebrew,\n        hi: Hindi,\n        hr: Croatian,\n        hu: Hungarian,\n        id: Indonesian,\n        is: Icelandic,\n        it: Italian,\n        ja: Japanese,\n        ko: Korean,\n        km: Khmer,\n        kz: Kazakh,\n        lt: Lithuanian,\n        lv: Latvian,\n        mk: Macedonian,\n        mn: Mongolian,\n        ms: Malaysian,\n        my: Burmese,\n        nl: Dutch,\n        no: Norwegian,\n        pa: Punjabi,\n        pl: Polish,\n        pt: Portuguese,\n        ro: Romanian,\n        ru: Russian,\n        si: Sinhala,\n        sk: Slovak,\n        sl: Slovenian,\n        sq: Albanian,\n        sr: Serbian,\n        sv: Swedish,\n        th: Thai,\n        tr: Turkish,\n        uk: Ukrainian,\n        vn: Vietnamese,\n        zh: Mandarin,\n        zh_tw: MandarinTraditional\n    };\n\n    exports.default = l10n;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n\n","\ndefine('css!lib/flatpickr/flatpickr',[],function(){});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015-2019 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * UiForm class enable you to manage form elements, initialize form component and bind common events\n *\n * @author Bertrand Chevrier, <bertrand.chevrier@tudor.lu>\n */\n define('uiForm',[\n    'module',\n    'jquery',\n    'lodash',\n    'i18n',\n    'helpers',\n    'context',\n    'form/property',\n    'form/post-render-props',\n    'form/depends-on-property',\n    'util/encode',\n    'ckeditor',\n    'ui/ckeditor/ckConfigurator',\n    'ui/datetime/picker',\n    'ui/dialog/confirm',\n    'core/request',\n    'util/url',\n], function (\n    module,\n    $,\n    _,\n    __,\n    helpers,\n    context,\n    property,\n    postRenderProps,\n    dependsOn,\n    encode,\n    ckeditor,\n    ckConfigurator,\n    dateTimePicker,\n    confirmDialog,\n    request,\n    urlUtil,\n) {\n    'use strict';\n\n    /**\n     * Create a URL based on action and module\n     *\n     * @param action\n     * @returns {string}\n     */\n    var getUrl = function getUrl(action) {\n        var conf = module.config();\n        return context.root_url + conf.extension + '/' + conf.module + '/' + action;\n    };\n\n    var UiForm = {\n\n        /**\n         * Keep references to CkEditor instances, per field\n         */\n        htmlEditors : {},\n\n        init: function init() {\n            var self = this;\n\n            $('body').off('change', 'input[value=notEmpty]').on('change', 'input[value=notEmpty]', function(event) {\n                let primaryPropertyUri = $(event.target).closest('[id^=\"property_\"]').attr('id').replace('property_', '');\n                const secondaryProperties = $(`option[value=${primaryPropertyUri}][selected='selected']`).closest('[id^=\"property_\"]');\n                let secondaryPropertiesCheckbox = secondaryProperties.find('[value=notEmpty]');\n\n                secondaryPropertiesCheckbox.each((i, notEmptyCheckbox) => {\n                    if (event.target.checked) {\n                        notEmptyCheckbox.disabled = false;\n                    } else {\n                        notEmptyCheckbox.disabled = true;\n                        notEmptyCheckbox.checked = false;\n                    }\n                })\n            });\n\n            this.counter = 0;\n            this.initGenerisFormPattern = new RegExp(['add', 'edit', 'mode', 'PropertiesAuthoring'].join('|'), 'i');\n            this.initTranslationFormPattern = /translate/;\n            this.htmlEditors = {};\n\n            $(document).ajaxComplete(function (event, request, settings) {\n                //initialize regarding the requested action\n                //async request waiting for html or not defined\n                if (settings.dataType !== 'html' && settings.dataType) {\n                    return;\n                }\n\n                const testedUrl = settings.url.indexOf('?') === -1\n                    ? settings.url\n                    : settings.url.substr(0, settings.url.indexOf('?'));\n                const authoringRequestSuffix = 'authoring';\n\n                /**\n                 * Prevent manage-schema form initialization when the targeted url is related to authoring\n                 * associated action is \"launchEditor\"\n                */\n                if (testedUrl.indexOf(authoringRequestSuffix, testedUrl.length - authoringRequestSuffix.length) === -1) {\n                    self.initRendering();\n                }\n\n                self.initElements();\n                if (self.initGenerisFormPattern.test(testedUrl)) {\n                    self.initOntoForms();\n                }\n                if (self.initTranslationFormPattern.test(testedUrl)) {\n                    self.initTranslationForm();\n                }\n            });\n            this.initRendering();\n        },\n\n        /**\n         * make some adjustment on the forms\n         */\n        initRendering: function initRendering() {\n\n            var self = this;\n\n            var $container          = $('.content-block .xhtml_form:first'),\n                $toolBar            = $container.find('.form-toolbar'),\n                $authoringBtn       = $('.authoringOpener'),\n                $authoringBtnParent,\n                $testAuthoringBtn   = $('.test-authoring'),\n                $rdfImportForm      = $('.rdfImport #import'),\n                $rdfExportForm      = $('.rdfExport #export');\n\n            // allows to fix label position for list of radio buttons\n            $('.form_desc ~.form_radlst').parent().addClass('bool-list');\n\n            // allows long labels if the following input is hidden\n            $('.form_desc + input[type=\"hidden\"]').prev().addClass('hidden-input-label');\n\n            // move authoring button to toolbar, unless it is already there\n            if($authoringBtn.length && !$authoringBtn.hasClass('btn-info')) {\n                $authoringBtnParent = $authoringBtn.parent();\n                $authoringBtn.prepend($('<span>', { 'class': 'icon-edit' }));\n                $authoringBtn.addClass('btn-info small');\n                $authoringBtn.appendTo($toolBar);\n                $authoringBtnParent.remove();\n            }\n\n            // move test authoring button\n            if($testAuthoringBtn.length) {\n                $testAuthoringBtn.prependTo($toolBar);\n            }\n\n            // import Ontology styling changes\n            if($rdfImportForm.length) {\n                $('span.form_desc:empty',$rdfImportForm).hide();\n                $('span.form-elt-info',$rdfImportForm).css({\n                    display: 'block',\n                    width: '100%'\n                });\n                $('.form-elt-container.file-uploader',$rdfImportForm).css({\n                    width: '65%',\n                    float: 'right'\n                });\n\n            }\n            if($rdfExportForm.length){\n                $('div:first',$rdfExportForm).find('input[type=\"text\"]').css('width', 'calc(65% - 23px)');\n                $('div:not(.form-toolbar):last span',$rdfExportForm).css('float', 'right')\n                                                                    .closest('div')\n                                                                    .find('[id*=\"ns_filter\"]')\n                                                                    .addClass('btn-default small');\n            }\n\n            $('body').off('submit','.xhtml_form form').on('submit', '.xhtml_form form', function (e) {\n                var $form = $(this);\n                e.preventDefault();\n\n                return self.submitForm($form,  self.getFormData($form));\n            });\n\n            $('.form-submitter').off('click').on('click', function (e) {\n                e.preventDefault();\n                $(this).addClass('current-submitter');\n                $(e.target).closest('.xhtml_form form').trigger('submit');\n            });\n\n            // modify properties\n            postRenderProps.init();\n        },\n\n        /**\n         * Retrieve form fields and pack to internal format for transfering\n         * @param {jQueryElement} $form\n         * @returns {object|undefined}\n         */\n        getFormData: function getFormData($form) {\n            var formData   = {};\n            var clazz      = {};\n            var properties = [];\n            var indexes    = [];\n\n            //for backward compatibility\n            if (!$('[id=\"tao.forms.class\"]').length) {\n                return;\n            }\n\n            //get all global data\n            $('input.global', $form[0]).each(function () {\n                var $global = $(this);\n                var name = $global.attr('name');\n                if (name.indexOf('class_') > -1) {\n                    name = name.replace('class_', '');\n                    clazz[name] = $global.val();\n\n                }\n                else {\n                    formData[name] = $global.val();\n                }\n            });\n            if (clazz.length !== 0) {\n                formData.class = clazz;\n            }\n\n            //get data for each property\n            $('.regular-property', $form[0]).each(function () {\n                var property = {};\n                var name = '',\n                    isArray = false;\n\n                //get range on advanced mode\n                var range = [];\n                $('[id*=\"http_2_www_0_w3_0_org_1_2000_1_01_1_rdf-schema_3_range-TreeBox\"]', this).find('.checked').each(function () {\n                    range.push($(this).parent().attr('id'));\n                });\n                if (range.length !== 0) {\n                    property['http_2_www_0_w3_0_org_1_2000_1_01_1_rdf-schema_3_range'] = range;\n                }\n\n                $(':input.property', this).each(function () {\n                    var $property = $(this);\n                    name = $property.attr('name').replace(/(property_)?[^_]+_/, '');\n\n                    isArray = (name.indexOf('[]') === name.length - 2);\n                    if ($property.attr('type') === 'checkbox' && isArray) {\n                        name = name.substr(0, name.length - 2);\n                        if ($property.is(':checked')) {\n                            if (!_.isArray(property[name])) {\n                                property[name] = [];\n                            }\n                            property[name].push($property.val());\n                        }\n\n                    } else if ($property.attr('type') === 'radio') {\n                        if ($property.is(':checked')) {\n                            property[name] = $property.val();\n                        }\n                    }\n                    else {\n                        property[name] = $property.val();\n                    }\n\n                });\n                //get data for each index\n                $(':input.index', this).each(function () {\n\n                    var i;\n                    var found = false;\n                    var name = '';\n                    var $index = $(this);\n                    for (i in indexes) {\n                        if (indexes[i] && $index.attr('data-related-index') === indexes[i].uri) {\n                            name = $index.attr('name').replace(/(index_)?[^_]+_/, '');\n                            if ($index.attr('type') === 'radio' || $index.attr('type') === 'checkbox') {\n                                if ($index.is(':checked')) {\n                                    indexes[i][name] = $index.val();\n                                }\n                            }\n                            else {\n                                indexes[i][name] = $index.val();\n                            }\n\n                            found = true;\n                        }\n                    }\n                    if (!found) {\n                        var index = {};\n                        index.uri = $index.attr('data-related-index');\n                        name = $index.attr('name').replace(/(index_)?[^_]+_/, '');\n                        if ($index.attr('type') === 'radio') {\n                            if ($index.is(':checked')) {\n                                index[name] = $index.val();\n                            }\n                        }\n                        else {\n                            index[name] = $index.val();\n                        }\n                        indexes.push(index);\n                    }\n\n\n                });\n                //add indexes to related property\n                property.indexes = indexes;\n                properties.push(property);\n            });\n\n            formData.properties = properties;\n\n            return formData;\n        },\n\n        initElements: function initElements() {\n            var self = this;\n            var $uriElm;\n            var $classUriElm;\n\n            //revert form button\n            $(\".form-refresher\").off('click').on('click', function () {\n                var $form = $(this).parents('form');\n                $(\":input[name='\" + $form.attr('name') + \"_sent']\").remove();\n\n                return $form.submit();\n            });\n\n            //translate button\n            $uriElm      = $(\"#uri\"),\n            $classUriElm = $(\"#classUri\");\n\n            $(\".form-translator\").off('click').on('click', function () {\n                if ( $uriElm.length && $classUriElm.length) {\n                    helpers.getMainContainer().load(getUrl('translateInstance'), {'uri': $uriElm.val(), 'classUri': $classUriElm.val()});\n                }\n                return false;\n            });\n\n            //map the wysiwyg editor to the html-area fields\n            $('.html-area').each(function () {\n                var propertyUri = this.id;\n\n                // destroy previously created editors\n                if (ckeditor.instances[propertyUri]) {\n                    ckeditor.instances[propertyUri].destroy(this);\n                    delete self.htmlEditors[propertyUri];\n                }\n\n                var editor = ckeditor.replace(this);\n                editor.config = ckConfigurator.getConfig(editor, 'htmlField', {resize_enabled : false });\n                self.htmlEditors[propertyUri] = editor;\n            });\n\n            $('.datepicker-input').each(function(){\n                dateTimePicker($(this).parent(), {\n                    replaceField : this,\n                    setup : 'datetime',\n                    controlButtons : true\n                });\n            });\n\n            $('.box-checker').off('click').on('click', function () {\n                var $checker = $(this);\n                var regexpId = new RegExp('^' + $checker.prop('id').replace('_checker', ''), 'i');\n\n                if ($checker.hasClass('box-checker-uncheck')) {\n                    $(\":checkbox:not(:disabled)\").each(function () {\n                        if (regexpId.test(this.id)) {\n                            //noinspection JSPotentiallyInvalidUsageOfThis,JSPotentiallyInvalidUsageOfThis\n                            this.checked = false;\n                            $(this).change();\n                        }\n                    });\n                    $checker.removeClass('box-checker-uncheck');\n                    $checker.text(__('Check all'));\n                }\n                else {\n                    $(\":checkbox:not(:disabled)\").each(function () {\n                        if (regexpId.test(this.id)) {\n                            this.checked = true;\n                            $(this).change();\n                        }\n                    });\n                    $checker.addClass('box-checker-uncheck');\n                    $checker.text(__('Uncheck all'));\n                }\n\n                return false;\n            });\n        },\n\n        /**\n         * init special forms controls\n         */\n        initOntoForms: function () {\n\n\n            //open the authoring tool on the authoringOpener button\n            $('.authoringOpener').click(function () {\n                var tabUrl = getUrl('authoring'),\n                    tabId = 'panel-' + module.config().module.toLowerCase() + '_authoring',\n                    $tabContainer = $('#tabs'),\n                    $panel = (function() {\n                        var $wantedPanel = $tabContainer.find('#' + tabId);\n\n                        if(!$wantedPanel.length) {\n                            $wantedPanel = $('<div>', { id: tabId, 'class': 'clear content-panel' }).hide();\n                            $tabContainer.find('.content-panel').after($wantedPanel);\n                        }\n                        return $wantedPanel;\n                    }());\n\n                $.ajax({\n                    type: \"GET\",\n                    url: tabUrl,\n                    data: {\n                        uri: $(\"#uri\").val(),\n                        classUri: $(\"#classUri\").val()\n                    },\n                    dataType: 'html',\n                    success: function (responseHtml) {\n                        $tabContainer.find('.content-panel').not($panel).hide();\n                        window.location.hash = tabId;\n                        responseHtml = $(responseHtml);\n                        responseHtml.find('#authoringBack').click(function () {\n                            var $myPanel = $(this).parents('.content-panel'),\n                                $otherPanel = $myPanel.prev();\n                            $myPanel.hide();\n                            $otherPanel.show();\n                        });\n                        $panel.html(responseHtml).show();\n                    }\n                });\n            });\n\n            $('input.editVersionedFile').each(function () {\n                var infoUrl = context.root_url + 'tao/File/getPropertyFileInfo';\n                var data = {\n                    'uri': $(\"#uri\").val(),\n                    'propertyUri': $(this).siblings('label.form_desc').prop('for')\n                };\n                var $_this = $(this);\n                $.ajax({\n                    type: \"GET\",\n                    url: infoUrl,\n                    data: data,\n                    dataType: 'json',\n                    success: function (r) {\n                        $_this.after('<span>' + r.name + '</span>');\n                    }\n                });\n            }).click(function () {\n                var data = {\n                    'uri': $(\"#uri\").val(),\n                    'propertyUri': $(this).siblings('label.form_desc').prop('for')\n                };\n\n                helpers.getMainContainer().load(getUrl('editVersionedFile'), data);\n                return false;\n            });\n\n            function buildClassPropertiesAuthoringURL(action) {\n                const shownExtensions = context.shownExtension;\n\n                let extension = 'tao';\n                let controller = 'PropertiesAuthoring';\n\n                if (shownExtensions === 'taoItems') {\n                    extension = shownExtensions;\n                    controller = 'Items';\n                }\n\n                return helpers._url(action, controller, extension);\n            }\n\n            /**\n             * Validate if property has a dependency\n             */\n            async function checkForDependency(propertyUri, $groupNode) {\n                if (!context.featureFlags.FEATURE_FLAG_LISTS_DEPENDENCY_ENABLED) {\n                    return [];\n                }\n\n                const typeSelectVal = $groupNode.find('select[id$=\"type\"]').val();\n                const listSelectVal = $groupNode.find('select[id$=\"range\"] option:selected').data('remote-list');\n\n                if (!dependsOn.getSupportedTypes().includes(typeSelectVal) || !listSelectVal) {\n                    return [];\n                }\n\n                try {\n                    const url = urlUtil.route('getDependentProperties', 'PropertyValues', 'tao', { propertyUri })\n                    const response = await request({ url, method: 'GET', dataType: 'json'})\n                    if (response.success && response.data) { return response.data; }\n                    else { throw response; }\n                } catch (err) {\n                    console.error(err);\n                    return null;\n                }\n            }\n\n            function regularConfirmantion() {\n                return window.confirm(__('Please confirm property deletion!'));\n            }\n\n            async function getPropertyRemovalConfirmation($groupNode, uri) {\n                const dependencies = await checkForDependency(uri, $groupNode);\n                const dependsOnValue = $($groupNode).find('select[id$=\"_depends-on-property\"]').val() || ' ';\n\n                return new Promise((resolve, reject) => {\n                    if (!dependencies.length && dependsOnValue === ' ') {\n                        return regularConfirmantion() ? resolve() : reject();\n                    }\n\n                    const name = $groupNode.find('.property-heading-label')[0].innerText;\n                    let dependantPropName;\n\n                    if (!dependencies.length) {\n                        dependantPropName = $($groupNode).find('select[id$=\"_depends-on-property\"] option:selected').text();\n                    } else {\n                        dependantPropName = dependencies.reduce((prev, next, index) => {\n                            const delimiter = index === dependencies.length - 1 ? '' : ', '\n                            return prev + `${next.label}${delimiter}`;\n                        }, '');\n                    }\n\n                    const message = `<b>${name}</b>\n                        ${__('currently has a dependency established with ')}\n                        <b>${dependantPropName}</b>.\n                        ${__('Deleting this property will also remove the dependency')}.\n                        <br><br> ${__('Are you sure you wish to delete it')}?`\n\n                    confirmDialog(\n                        message,\n                        resolve,\n                        reject,\n                        {\n                            buttons: {\n                                labels: {\n                                    ok:__('Delete'),\n                                    cancel: __('Cancel')\n                                }\n                            }\n                        }\n                    );\n                })\n            }\n\n            /**\n             * remove a form group, ie. a property\n             */\n            async function removePropertyGroup() {\n                const $groupNode = $(this).closest(\".form-group\");\n\n                try {\n                    await getPropertyRemovalConfirmation($groupNode, $(this).data(\"uri\"));\n                } catch (err) { return; }\n\n                property.remove(\n                    $(this).data(\"uri\"),\n                    $(\"#id\").val(),\n                    buildClassPropertiesAuthoringURL('removeClassProperty'),\n                    function() {\n                        $groupNode.remove();\n                        $(\"[id$='-class-schema']\").click();\n                    }\n                );\n            }\n\n            //property delete button\n            $(\".property-deleter\").off('click').on('click', removePropertyGroup);\n\n            //property add button\n            $(\".property-adder\").off('click').on('click', function (e) {\n                e.preventDefault();\n\n                property.add($(\"#id\").val(), buildClassPropertiesAuthoringURL('addClassProperty'));\n            });\n\n            $(\".index-adder\").off('click').on('click', function (e) {\n                e.preventDefault();\n                var $prependTo = $(this).closest('div');\n                var $groupNode = $(this).closest(\".form-group\");\n                if ($groupNode.length) {\n                    var max = 0;\n                    var $propertyindex = $('.property-uri', $groupNode);\n                    var propertyindex = parseInt($propertyindex.attr('id').replace(/[\\D]+/, ''));\n\n\n                    $groupNode.find('[data-index]').each(function(){\n                        if(max < $(this).data('index')){\n                            max = $(this).data('index');\n                        }\n                    });\n\n                    max = max + 1;\n                    var uri = $groupNode.find('.property-uri').val();\n                    $.ajax({\n                        type: \"GET\",\n                        url: helpers._url('addPropertyIndex', 'PropertiesAuthoring', 'tao'),\n                        data: {uri : uri, index : max, propertyIndex : propertyindex},\n                        dataType: 'json',\n                        success: function (response) {\n                            $prependTo.before(response.form);\n                        }\n                    });\n                }\n            });\n\n            $('.property-edit-container').off('click', '.index-remover').on('click', '.index-remover', function(e){\n                e.preventDefault();\n                var $groupNode = $(this).closest(\".form-group\");\n                var uri = $groupNode.find('.property-uri').val();\n\n                var $editContainer = $($groupNode[0]).children('.property-edit-container');\n                $.ajax({\n                    type: \"POST\",\n                    url: helpers._url('removePropertyIndex', 'PropertiesAuthoring', 'tao'),\n                    data: {uri : uri, indexProperty : $(this).attr('id')},\n                    dataType: 'json',\n                    success: function (response) {\n                        var $toRemove = $('[id*=\"'+response.id+'\"], [data-related-index=\"'+response.id+'\"]');\n                        $toRemove.each(function(){\n                            var $currentTarget = $(this);\n                            while(!_.isEqual($currentTarget.parent()[0], $editContainer[0]) && $currentTarget.parent()[0] !== undefined){\n                                $currentTarget = $currentTarget.parent();\n                            }\n                            $currentTarget.remove();\n                        });\n                    }\n                });\n            });\n\n            $(\".property-mode\").off('click').on('click', function () {\n                var $btn = $(this);\n                var mode = 'simple';\n                var url;\n\n                if ($btn.hasClass('disabled')) {\n                    return;\n                }\n\n                if ($btn.hasClass('property-mode-advanced')) {\n                    mode = 'advanced';\n                }\n                url = $btn.parents('form').prop('action');\n\n                helpers.getMainContainer().load(url, {\n                    'property_mode': mode,\n                    'uri': $(\"#uri\").val(),\n                    'id': $(\"#id\").val(),\n                    'classUri': $(\"#classUri\").val()\n                });\n\n                return false;\n            });\n\n            /**\n             * display or not the list regarding the property type\n             */\n            function showPropertyList(e, isInit) {\n                var $this = $(this);\n                var $elt = $this.parent(\"div\").next(\"div\");\n                var propertiesTypes = ['list','tree'];\n                var re = new RegExp(propertiesTypes.join('$|').concat('$'));\n\n                if (re.test($this.val())) {\n                    if ($elt.css('display') === 'none') {\n                        $elt.show();\n                        const propertyListSelect = $elt.find('select');\n\n                        if (propertyListSelect.attr('data-disabled-message')) {\n                            propertyListSelect.after(\n                                `<div class=\"form_disabled_message\">${propertyListSelect.attr('data-disabled-message')}</div>`\n                            );\n                        } else {\n                            propertyListSelect.removeAttr('disabled');\n                        }\n                    }\n                }\n\n                else if ($elt.css('display') !== 'none') {\n                    $elt.css('display', 'none');\n                    $elt.find('select').prop('disabled', false);\n                    $elt.find('select option[value=\" \"]').attr('selected', 'selected').trigger('change');\n                }\n\n                $.each(propertiesTypes, function (i, rangedPropertyName) {\n                    var re = new RegExp(rangedPropertyName + '$');\n                    if (re.test($this.val())) {\n                        const $propValuesSelect = $elt.find('select');\n                        const propValue = $propValuesSelect.val();\n                        $propValuesSelect.html($elt.closest('.property-edit-container').find('.' + rangedPropertyName + '-template').html());\n                        const $selectedInTemplate = $propValuesSelect.find('option[selected]');\n\n                        if (!propValue || !propValue.trim()) {\n                            if (!isInit && $selectedInTemplate.length) {\n                                $propValuesSelect.find('option[value=\" \"]').attr('selected', 'selected');\n                            }\n\n                            return true;\n                        }\n\n                        if ($(`option[value=\"${propValue}\"]`, $propValuesSelect).length) {\n                            $propValuesSelect.val(propValue);\n                        }\n\n                        return true;\n                    }\n                });\n            }\n\n\n            function clearPropertyListValues() {\n                $(this).parent(\"div\").parent(\"div\").children(\"ul.form-elt-list\").remove();\n            }\n\n            /**\n             * by selecting a list, the values are displayed\n             */\n            function showPropertyListValues() {\n                const $this = $(this);\n                const elt = $this.parent('div');\n                let classUri;\n\n                //load the instances and display them (the list items)\n                $(elt).parent('div').children('ul.form-elt-list').remove();\n                classUri = $this.val();\n\n                if (classUri && classUri.trim()) {\n                    $this.parent('div').children('div.form-error').remove();\n\n                    $.ajax({\n                        url: context.root_url + 'taoBackOffice/Lists/getListElements',\n                        type: 'GET',\n                        data: {\n                            listUri: classUri,\n                        },\n                        success: function (response) {\n                            let html = '<ul class=\"form-elt-list\">',\n                                property;\n\n                            for (property in response.data.elements) {\n                                if (!Object.prototype.hasOwnProperty.call(response.data.elements, property)) {\n                                    continue;\n                                }\n\n                                html += `<li>${encode.html(response.data.elements[property].label)}</li>`;\n                            }\n\n                            if (response.data.totalCount > response.data.elements.length) {\n                                html += `<li>...</li>`;\n                            }\n\n                            html += '</ul>';\n                            $(elt).after(html);\n                        }\n                    });\n                }\n            }\n\n            function showDependsOnProperty() {\n                if (!context.featureFlags.FEATURE_FLAG_LISTS_DEPENDENCY_ENABLED) {\n                    return;\n                }\n\n                const $this = $(this);\n                const classUri = $(document.getElementById('classUri')).val();\n                let propertyUriToSend;\n                const listUri = $this.val();\n                const dependsId = $(this)[0].id.match(/\\d+_/)[0];\n                const $dependsOnSelect = $(document.getElementById(`${dependsId}depends-on-property`));\n                const $typeSelect = $(document.getElementById(`${dependsId}type`));\n                const $listSelect = $(`#${dependsId}range option:selected`);\n\n                propertyUriToSend = $this.parent().parent().parent()[0].id;\n                propertyUriToSend = propertyUriToSend.replace('property_', '');\n\n                if (!$listSelect.data('remote-list')) {\n                    return;\n                }\n\n                $.ajax({\n                    url: context.root_url + 'tao/PropertyValues/getDependOnPropertyList',\n                    type: \"GET\",\n                    data: {\n                        class_uri: classUri,\n                        list_uri: listUri,\n                        property_uri: propertyUriToSend,\n                        type: $typeSelect.val()\n                    },\n                    dataType: 'json',\n                    success: function (response) {\n                        if (\n                            response\n                            && response.data\n                            && response.data.length !== 0\n                            && dependsOn.getSupportedTypes().includes($typeSelect.val())\n                        ) {\n                            const backendValues = response.data.reduce(\n                                (accumulator, currentValue) => {\n                                    accumulator.push(currentValue.uriEncoded);\n                                    return accumulator;\n                                },\n                                []\n                            );\n                            const currentValues = Object\n                                .values($dependsOnSelect[0].options)\n                                .map(entry => entry.value)\n                                .filter(entry => entry !== ' ');\n                            let haveSameData = false;\n                            currentValues.map(entry => {\n                                if (!backendValues.includes(entry)) {\n                                    haveSameData = true;\n                                }\n                                return;\n                            });\n                            if ($dependsOnSelect[0].length <= 1 || haveSameData) {\n                                let html = `<option value=\" \"> --- ${__('none')} --- </option>`;\n                                for (const propertyData in response.data) {\n                                    html += `<option value=\"${response.data[propertyData].uri}\">${response.data[propertyData].label}</option>`;\n                                }\n                                $dependsOnSelect.empty().append(html);\n                            }\n\n                            $dependsOnSelect.off('change');\n                            $dependsOnSelect.on('change', onDependsOnPropertyChange);\n                            dependsOn.toggle($dependsOnSelect, $dependsOnSelect.parent(), $this.closest('.property-edit-container'));\n                        } else {\n                            $dependsOnSelect.parent().hide();\n                        }\n                    }\n                });\n            }\n\n            /**\n             * Filter the list of options available on the \"depends on\" select\n             * based on the properties that already have a dependency declared\n             */\n            function filterDependsOnProperty() {\n                const $changedProperty = $(this);\n                let primaryPropertyUri = $(this).closest('[id^=\"property_\"]').attr('id').replace('property_', '');\n\n                $(`option[value=${primaryPropertyUri}]`).each((i, option) => {\n                    option.disabled = !!$changedProperty.val().trim();\n\n                    if (option.selected && option.disabled) {\n                        option.parentElement.value = ' ';\n                    }\n                });\n            }\n\n            function onTypeChange(e, flag) {\n                showPropertyList.bind(this)(e, flag === 'initial');\n\n                const fieldIndex = $(this)[0].id.match(/\\d+_/)[0];\n                const rangeSelect = $(document.getElementById(`${fieldIndex}range`));\n\n                showDependsOnProperty.bind(rangeSelect)(e);\n            }\n\n            function onListValuesChange(e) {\n                clearPropertyListValues.bind(this)(e);\n                if (!$(this).val() || !$(this).val().trim()) {\n                    $(this).find('option[value=\" \"]').attr('selected', 'selected');\n                }\n                showPropertyListValues.bind(this)(e);\n                showDependsOnProperty.bind(this)(e);\n            }\n\n            /**\n             * On change of depends on property, the values are filtered\n             * @param {event} e\n             */\n            function onDependsOnPropertyChange(e) {\n                filterDependsOnProperty.bind(this)(e);\n            }\n\n            //bind functions to the drop down:\n\n            $('.property-template').each(function(){\n                $(this).closest('div').hide();\n            });\n\n            //display the values drop down regarding the selected type\n            var $propertyType = $(\".property-type\"),\n                $propertyListValues = $(\".property-listvalues\");\n\n            $propertyType.on('change', onTypeChange).trigger('change', 'initial');\n\n            //display the values of the selected list\n            $propertyListValues.off('change');\n            $propertyListValues.on('change', onListValuesChange).trigger('change');\n\n            $propertyListValues.each(function () {\n                var elt = $(this).parent(\"div\");\n                if (!elt.hasClass('form-elt-highlight') && elt.css('display') !== 'none') {\n                    elt.addClass('form-elt-highlight');\n                }\n            });\n        },\n\n        /**\n         * controls of the translation forms\n         */\n        initTranslationForm: function initTranslationForm () {\n            var self = this;\n            $('#translate_lang').change(function () {\n                var trLang = $(this).val();\n                if (trLang !== '') {\n                    $(\"#translation_form\").find(\":input\").each(function () {\n                        if (/^http/.test($(this).prop('name'))) {\n                            $(this).val('');\n                        }\n                    });\n                    $.post(\n                        getUrl('getTranslatedData'),\n                        {uri: $(\"#uri\").val(), classUri: $(\"#classUri\").val(), lang: trLang},\n                        function (response) {\n                            var index;\n                            var formElt;\n                            for (index in response) {\n                                formElt = $(\":input[name='\" + index + \"']\");\n                                if (formElt.hasClass('html-area') && self.htmlEditors[index]) {\n                                    self.htmlEditors[index].setData(response[index]);\n                                }\n                                else {\n                                    formElt.val(response[index]);\n                                }\n                            }\n                        },\n                        'json'\n                    );\n                }\n            });\n        },\n\n        /**\n         * Ajax form submit -> post the form data and display back the form into the container\n         * @param myForm\n         * @param serialize\n         * @return boolean\n         */\n        submitForm: function submitForm(myForm, serialize) {\n            var self = this;\n            var $container;\n\n            try {\n                if (myForm.prop('enctype') === 'multipart/form-data' && myForm.find(\".file-uploader\").length) {\n                    return false;\n                }\n                else {\n                    //FIXME should use sectionAPI instead\n                    $container = myForm.closest('.content-block');\n                    if (!$container || $container.length === 0) {\n                        return true;//go to the link\n                    }\n                    else {\n                        //if a ckeditor is in the form we need to sync the textarea content\n                        $('.html-area', myForm).each(function(){\n                            if(self.htmlEditors[this.id]){\n                                self.htmlEditors[this.id].updateElement();\n                            }\n                        });\n\n                        serialize = typeof serialize !== 'undefined' ? serialize : myForm.serializeArray();\n\n                        $('.current-submitter', myForm).each(function () {\n                            $(this).removeClass('current-submitter');\n                            if (Array.isArray(serialize)) {\n                                serialize.push({name: this.name, value: this.value});\n                            } else {\n                                serialize[this.name] = this.value;\n                            }\n                        });\n\n                        $('[data-depends-on-property][disabled]', myForm).each(function () {\n                            if (Array.isArray(serialize)) {\n                                serialize.push({name: this.name, value: this.value});\n                            } else {\n                                serialize[this.name] = this.value;\n                            }\n                        });\n\n                        $container.load(myForm.prop('action'), serialize);\n                    }\n                }\n            }\n            catch (exp) {\n                return false;\n            }\n            return false;\n        }\n    };\n\n    return UiForm;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 Open Assessment Technologies SA;\n */\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/actions/binder',['lodash'], function(_){\n    'use strict';\n\n    /**\n     * The list of registered bindings, key are binding name.\n     */\n    var bindings = {};\n\n    /**\n     * Helps you to bind actions' behavior.\n     *\n     * To bind a behavior to an action, you need to register a callback under the same name than 'binding' value in the structure.xml\n     *\n     *\n     * @exports layout/actions/binder\n     */\n    var actionBinder =  {\n\n        /**\n         * Register a new binding\n         *\n         * @example\n         *  binder.register('subClass', function subClass(context){\n         *      //do something with context.uri to create a sub class.\n         *  });\n         *\n         * @param {String} name - the binding name\n         * @param {ActionBinding}\n         *\n         */\n        register : function register(name, binding){\n\n            /**\n             * @callback ActionBinding\n             * @this action - the action object\n             * @param {ActionContext} context - the context\n             */\n            bindings[name] = binding;\n        },\n\n        /**\n         * Execute the binding of an action if one has been registerd\n         * @param {Object} action - the action to execute the binding of\n         * @param {String} action.binding - the action must contain a binding property that match a registerd binding\n         * @param {ActionContext} context - the context in which to execute the binding\n         * @returns {Promise?}\n         */\n        exec : function exec(action, context){\n            var name;\n            if(action && action.binding){\n\n                name = action.binding;\n                if(_.isFunction(bindings[name])){\n                    return bindings[name].call(action, context);\n                }\n            }\n        }\n    };\n\n    return actionBinder;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2018 Open Assessment Technologies SA;\n */\n\n/**\n * Manage resources and actions permissions.\n * The model is based on actions expecting some permissions (requiredRights) for a given parameter.\n * Then each resource has it's own permissions (READ, WRITE, GRANT) that we store.\n *\n * We can check if a resource has a given permission (can read for example)\n * or to validate a context that must contains all required parameters.\n *\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/permissions',[\n    'lodash',\n    'uri',\n], function(_, uriUtil){\n    'use strict';\n\n    /**\n     * store permissions per resource\n     * @type {Object}\n     */\n    var permissionStore = {};\n\n    /**\n     * The list of supported rights\n     * @type {String[]}\n     */\n    var supportedRights = [];\n\n    /**\n     * The permissions manager\n     * @typedef {Object} permissionsManager\n     */\n    var permissionsManager = {\n\n        /**\n         * set the rights, none by defaults\n         * @param {String[]} rights\n         * @returns {permissionsManager} chains\n         */\n        setSupportedRights : function setSupportedRights(rights){\n            if (_.isArray(rights)) {\n                supportedRights = _.filter(rights, _.isString);\n            }\n        },\n\n        /**\n         * Get the current rights\n         * @returns {String[]} the rights\n         */\n        getRights : function getRights(){\n            return supportedRights;\n        },\n\n        /**\n         * Check if the given right is supported\n         * @param {String} right - the right to check\n         * @returns {Boolean}\n         */\n        isSupported : function isSupported(right){\n            return _.contains(supportedRights, right);\n        },\n\n        /**\n         * Add permissions to the store.\n         *\n         * Polymorphic.\n         * @example permissionsManager.addPermissions('http://uri.foo/a', ['READ', 'WRITE']);\n         * @example permissionsManager.addPermissions({\n         *      'http://uri.foo/a' : ['READ', 'WRITE'],\n         *      'http://uri.foo/b' : ['READ']\n         *  });\n         *\n         *\n         * @param {String} [uri] - the resource URI\n         * @param {Array|Object} permissions - either an object where the keys are the URIs or directly the permissions\n         * @returns {permissionsManager} chains\n         */\n        addPermissions : function addPermissions(uri, permissions){\n            if(_.isString(uri) && _.isArray(permissions)){\n                permissionStore[uri] = _.intersection(permissions, _.values(this.getRights()));\n            }\n\n            if(_.isUndefined(permissions) && _.isPlainObject(uri)){\n                permissions = uri;\n                _.forEach(permissions, function(value, key){\n                    this.addPermissions(key, value);\n                }, this);\n            }\n\n            return this;\n        },\n\n        /**\n         * Retrieve the permissions for the given resource\n         * @param {String} uri - the resource URI\n         * @returns {Array} the permissions\n         */\n        getPermissions : function getPermissions(uri){\n            return permissionStore[uri];\n        },\n\n        /**\n         * Check if the given resource has the permission\n         * @param {String} uri - the resource URI\n         * @param {String} permission - the permission to check\n         * @returns {Boolean}\n         */\n        hasPermission : function hasPermission(uri, permission){\n\n            //if no right is defined, it's open bar\n            if( supportedRights.length === 0 ) {\n                return true;\n            }\n            if(typeof permissionStore[uri] !== 'undefined'){\n                return _.contains(permissionStore[uri], permission);\n            }\n            return false;\n        },\n\n        /**\n         * Clear all permissions\n         * @returns {permissionsManager} chains\n         */\n        clear : function clear(){\n            permissionStore = {};\n            return this;\n        },\n\n        /**\n         * Check if the given context is allowed to execute an action with required rights.\n         * @param {Object} requiredRights - the action required rights (parameterName : permission)\n         * @param {Object} resourceContext - the context to verify\n         * @returns {Boolean}\n         */\n        isContextAllowed : function isContextAllowed(requiredRights, resourceContext){\n            var self    = this;\n            if(! requiredRights || _.size(requiredRights) === 0 || supportedRights.length === 0){\n                return true;\n            }\n            if(!_.isPlainObject(resourceContext)){\n                return false;\n            }\n            return _.all(requiredRights, function(right, requiredParameter){\n                var parameterValue;\n\n                // translate muti-id into single-id\n                if (requiredParameter === 'ids') {\n                    requiredParameter = 'id';\n                }\n\n                if(typeof resourceContext[requiredParameter] === 'undefined' || !self.isSupported(right)){\n                    return false;\n                }\n\n                //some values in the context are still URI encoded\n                parameterValue = uriUtil.decode(resourceContext[requiredParameter]);\n\n                return self.hasPermission(parameterValue, right);\n            });\n        },\n\n        /**\n         * For a given resource compute the permission mode:\n         *  - allowed : no supported rights required or has the permission on all supported rights\n         *  - partial : has the permission only on some supported rights\n         *  - denied  : has the permission on none of the supported rights\n         *  @param {String} uri - the resource URI\n         *  @returns {String} the mode\n         */\n        getResourceAccessMode : function getResourcesAccessMode(uri) {\n            var self  = this;\n            var mode  = 'allowed';\n            var rights = this.getRights();\n            var count = _.reduce(rights, function(acc, right){\n                if(self.hasPermission(uri, right)){\n                    acc++;\n                }\n                return acc;\n            }, 0);\n\n            if (rights.length > 0 && count !== rights.length) {\n                if(count === 0){\n                    mode  = 'denied';\n                } else {\n                    mode = 'partial';\n                }\n            }\n            return mode;\n        }\n    };\n\n    return permissionsManager;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * The resource data provider\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('provider/resources',[\n    'lodash',\n    'i18n',\n    'util/url',\n    'core/promise',\n    'core/dataProvider/request',\n    'layout/permissions'\n], function (_, __, urlUtil, Promise, request, permissionsManager) {\n    'use strict';\n\n    /**\n     * Per function requests configuration.\n     */\n    var defaultConfig = {\n        getClasses : {\n            url : urlUtil.route('getAll', 'RestClass', 'tao')\n        },\n        getResources : {\n            url : urlUtil.route('getAll', 'RestResource', 'tao')\n        },\n        getClassProperties : {\n            url : urlUtil.route('create', 'RestResource', 'tao')\n        },\n        copyTo : {\n            //unset because it belongs to sub controllers, see /taoItems/Items/copyInstance,\n            //so it needs to be defined\n        },\n        moveTo : {\n            //unset because it belongs to sub controllers, see /taoItems/Items/moveResource,\n            //so it needs to be defined\n        }\n    };\n\n    /**\n     * Recursively compute the access mode (permissions) for the given resource hierarchy\n     * @param {Object[]} nodes\n     * @returns {Object[]} the nodes augmented of the \"accessMode=<partial|denied|allowed>\" property\n     */\n    var computeNodeAccessMode = function computeNodeAccessMode(nodes){\n        return _.map(nodes, function(node){\n            node.accessMode = permissionsManager.getResourceAccessMode(node.uri);\n            if(_.isArray(node.children)){\n                node.children = computeNodeAccessMode(node.children);\n            }\n            return node;\n        });\n    };\n\n    /**\n     * Enforces signature to classSignature in every child resources\n     *\n     * @param {Array|Object} resources\n     * @param {String} [signature]\n     * @returns {Array|Object}\n     */\n    function applyClassSignatures(resources, signature) {\n        if (_.isArray(resources)) {\n            _.forEach(resources, function(resource) {\n                applyClassSignatures(resource, signature);\n            });\n        } else if (resources) {\n            if (signature) {\n                resources.classSignature = signature;\n            }\n            if (resources.children) {\n                applyClassSignatures(resources.children, resources.signature || signature);\n            }\n            if (resources.nodes) {\n                applyClassSignatures(resources.nodes, resources.classSignature);\n            }\n        }\n        return resources;\n    }\n\n    /**\n     * Creates a configured provider\n     *\n     * @param {Object} [config] - to override the default config\n     * @returns {resourceProvider} the new provider\n     */\n    return function resourceProviderFactory(config){\n\n        config = _.defaults(config || {}, defaultConfig);\n\n        /**\n         * @typedef {resourceProvider}\n         */\n        return {\n\n            /**\n             * Get the list of classes and sub classes\n             * @param {String} classUri - the root class URI\n             * @returns {Promise} that resolves with the classes\n             */\n            getClasses: function getClasses(classUri){\n                return request(config.getClasses.url, { classUri : classUri });\n            },\n\n            /**\n             * Get QTI Items in different formats\n             * @param {Object} [params] - the parameters to pass through the request\n             * @param {Boolean} [computePermissions=false] - do we compute the resource's permissions?\n             * @returns {Promise} that resolves with the classes\n             */\n            getResources : function getResources(params, computePermissions){\n                return request(config.getResources.url, params).then(function(results){\n                    var resources;\n                    var currentRights;\n\n                    if(results && results.resources){\n                        resources = results.resources;\n                    } else {\n                        resources = results;\n                    }\n\n                    //each time we retrieve resources,\n                    //the list of their permission can come along them\n                    //in that case, we update the main permission manager\n                    //and compute the permission mode for each received resource\n                    //by filling the property \"accessMode\"\n                    if(computePermissions && results.permissions){\n                        currentRights = permissionsManager.getRights();\n\n                        if(results.permissions.supportedRights &&\n                            results.permissions.supportedRights.length &&\n                            currentRights.length === 0) {\n\n                            permissionsManager.setSupportedRights(results.permissions.supportedRights);\n\n                        }\n                        if(results.permissions.data){\n                            permissionsManager.addPermissions(results.permissions.data);\n                        }\n\n                        //compute the mode for each resource\n                        if(resources.nodes){\n                            resources.nodes = computeNodeAccessMode(resources.nodes);\n                        } else {\n                            resources = computeNodeAccessMode(resources);\n                        }\n                    }\n                    return resources;\n                }).then(applyClassSignatures);\n            },\n\n            /**\n             * Get the properties of the given resource class\n             * @param {String} classUri - the class URI\n             * @returns {Promise} that resolves with the classes\n             */\n            getClassProperties: function getClassProperties(classUri) {\n                return request(config.getClassProperties.url, { classUri : classUri });\n            },\n\n            /**\n             * Copy a resource into another class\n             * @param {String} uri - the resource to copy\n             * @param {String} destinationClassUri - the destination class\n             * @param {String} signature - the signature for the uri\n             * @returns {Promise<Object>} resolves with the data of the new resource\n             */\n            copyTo : function copyTo(uri, destinationClassUri, signature) {\n                if(_.isEmpty(config.copyTo.url)){\n                    return Promise.reject('Please define the action URL');\n                }\n                if(_.isEmpty(uri)){\n                    return Promise.reject('The URI of the resource to copy must be defined');\n                }\n                if(_.isEmpty(destinationClassUri)){\n                    return Promise.reject('The URI of the destination class must be defined');\n                }\n                // dataProvider request must be tokenised in this case (noToken=false)\n                return request(config.copyTo.url, {\n                    uri : uri,\n                    destinationClassUri : destinationClassUri,\n                    signature: signature\n                }, 'POST', null, true, false);\n            },\n\n            /**\n             * Move resources into another class\n             * @param {String|String[]} ids - the resources to move\n             * @param {String} destinationClassUri - the destination class\n             * @returns {Promise<Object>} resolves with the data of the new resource\n             */\n            moveTo: function moveTo(ids, destinationClassUri) {\n                var params = {\n                    destinationClassUri: destinationClassUri\n                };\n\n                if (!ids) {\n                    ids = [];\n                } else if (!_.isArray(ids)) {\n                    ids = [ids];\n                }\n                if (ids.length === 1) {\n                    params.uri = ids[0];\n                    params.signature = config.moveTo.signature;\n                } else {\n                    params.ids = ids;\n                }\n\n                if (_.isEmpty(config.moveTo.url)) {\n                    return Promise.reject('Please define the action URL');\n                }\n                if (_.isEmpty(ids) || _.some(ids, _.isEmpty)) {\n                    return Promise.reject('The URI of the resource to move must be defined');\n                }\n                if (_.isEmpty(destinationClassUri)) {\n                    return Promise.reject('The URI of the destination class must be defined');\n                }\n\n                // dataProvider request must be tokenised in this case (noToken=false)\n                return request(config.moveTo.url, params, 'POST', null, true, false);\n            }\n        };\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 Open Assessment Technologies SA;\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/actions/common',[\n    'jquery',\n    'i18n',\n    'lodash',\n    'core/promise',\n    'core/request',\n    'layout/section',\n    'layout/actions/binder',\n    'layout/permissions',\n    'provider/resources',\n    'ui/destination/selector',\n    'uri',\n    'ui/feedback',\n    'ui/dialog/confirm',\n    'ui/taskQueue/taskQueue'\n], function (\n    $,\n    __,\n    _,\n    Promise,\n    request,\n    section,\n    binder,\n    permissionsManager,\n    resourceProviderFactory,\n    destinationSelectorFactory,\n    uri,\n    feedback,\n    confirmDialog,\n    taskQueue\n) {\n    'use strict';\n\n    var messages = {\n        // prettier-ignore\n        confirmMove: __('The properties of the source class will be replaced by those of the destination class. This might result in a loss of metadata. Continue anyway?')\n    };\n\n    /**\n     * Cleans up the main panel and creates a container\n     * @returns {jQuery}\n     */\n    var emptyPanel = function cleanupPanel() {\n        section.current().updateContentBlock('<div class=\"main-container flex-container-form-main\"></div>');\n        return $(section.selected.panel).find('.main-container');\n    };\n\n    /**\n     * Register common actions.\n     *\n     * TODO this common actions may be re-structured, split in different files or moved in a more obvious location.\n     *\n     * @exports layout/actions/common\n     */\n    var commonActions = function commonActions() {\n        /**\n         * Register the load action: load the url and into the content container\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} [actionContext.uri]\n         * @param {String} [actionContext.classUri]\n         */\n        binder.register('load', function load(actionContext) {\n            section.current().loadContentBlock(this.url, _.pick(actionContext, ['uri', 'classUri', 'id']));\n        });\n\n        /**\n         * Register the load class action: load the url into the content container\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} actionContext.classUri - the URI of the parent class\n         */\n        binder.register('loadClass', function load(actionContext) {\n            section.current().loadContentBlock(this.url, {\n                classUri: actionContext.classUri,\n                id: uri.decode(actionContext.classUri)\n            });\n        });\n\n        /**\n         * Register the subClass action: creates a sub class\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} actionContext.classUri - the URI of the parent class\n         * @returns {Promise<Object>} resolves with the new class data\n         *\n         * @fires layout/tree#addnode.taotree\n         */\n        binder.register('subClass', function subClass(actionContext) {\n            var classUri = uri.decode(actionContext.classUri);\n            var signature = actionContext.signature;\n            var self = this;\n            if (actionContext.type !== 'class') {\n                signature = actionContext.classSignature;\n            }\n\n            const currentSection = section.current();\n            if (currentSection.clearContentBlock) {\n                currentSection.clearContentBlock();\n            }\n\n            return request({\n                url: self.url,\n                method: 'POST',\n                data: { id: classUri, type: 'class', signature: signature },\n                dataType: 'json'\n            }).then(function (response) {\n                if (response.success && response.uri) {\n                    if (actionContext.tree) {\n                        $(actionContext.tree).trigger('addnode.taotree', [\n                            {\n                                uri: uri.decode(response.uri),\n                                label: response.label,\n                                parent: uri.decode(actionContext.classUri),\n                                cssClass: 'node-class'\n                            }\n                        ]);\n                    }\n\n                    //return format (resourceSelector)\n                    return {\n                        uri: uri.decode(response.uri),\n                        label: response.label,\n                        classUri: uri.decode(actionContext.classUri),\n                        type: 'class'\n                    };\n                } else {\n                    throw new Error(__('Adding the new class has failed'));\n                }\n            });\n        });\n\n        /**\n         * Register the instanciate action: creates a new instance from a class\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} actionContext.classUri - the URI of the class' instance\n         * @returns {Promise<Object>} resolves with the new instance data\n         *\n         * @fires layout/tree#addnode.taotree\n         */\n        binder.register('instanciate', function instanciate(actionContext) {\n            var self = this;\n            var classUri = uri.decode(actionContext.classUri);\n            var signature = actionContext.signature;\n            if (actionContext.type !== 'class') {\n                signature = actionContext.classSignature;\n            }\n            return request({\n                url: self.url,\n                method: 'POST',\n                data: { id: classUri, type: 'instance', signature: signature },\n                dataType: 'json'\n            }).then(function (response) {\n                if (response.success && response.uri) {\n                    //backward compat format for jstree\n                    if (actionContext.tree) {\n                        $(actionContext.tree).trigger('addnode.taotree', [\n                            {\n                                uri: uri.decode(response.uri),\n                                label: response.label,\n                                parent: uri.decode(actionContext.classUri),\n                                cssClass: 'node-instance'\n                            }\n                        ]);\n                    }\n\n                    //return format (resourceSelector)\n                    return {\n                        uri: uri.decode(response.uri),\n                        label: response.label,\n                        classUri: uri.decode(actionContext.classUri),\n                        type: 'instance'\n                    };\n                } else {\n                    throw new Error(__('Adding the new resource has failed'));\n                }\n            });\n        });\n\n        /**\n         * Register the duplicateNode action: creates a clone of a node.\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} actionContext.uri - the URI of the base instance\n         * @param {String} actionContext.classUri - the URI of the class' instance\n         * @returns {Promise<Object>} resolves with the new instance data\n         *\n         * @fires layout/tree#addnode.taotree\n         */\n        binder.register('duplicateNode', function duplicateNode(actionContext) {\n            var self = this;\n            return request({\n                url: self.url,\n                method: 'POST',\n                data: {\n                    uri: actionContext.id,\n                    classUri: uri.decode(actionContext.classUri),\n                    signature: actionContext.signature\n                },\n                dataType: 'json'\n            }).then(function (response) {\n                if (response.success && response.uri) {\n                    //backward compat format for jstree\n                    if (actionContext.tree) {\n                        $(actionContext.tree).trigger('addnode.taotree', [\n                            {\n                                uri: uri.decode(response.uri),\n                                label: response.label,\n                                parent: uri.decode(actionContext.classUri),\n                                cssClass: 'node-instance'\n                            }\n                        ]);\n                    }\n\n                    //return format (resourceSelector)\n                    return {\n                        uri: uri.decode(response.uri),\n                        label: response.label,\n                        classUri: uri.decode(actionContext.classUri),\n                        type: 'instance'\n                    };\n                } else {\n                    throw new Error(__('Node duplication has failed'));\n                }\n            });\n        });\n\n        /**\n         * Register the removeNode action: removes a resource.\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} [actionContext.uri]\n         * @param {String} [actionContext.classUri]\n         *\n         * @fires layout/tree#removenode.taotree\n         */\n        binder.register('removeNode', function remove(actionContext) {\n            var self = this;\n            var data = {};\n\n            data.uri = uri.decode(actionContext.uri);\n            data.classUri = uri.decode(actionContext.classUri);\n            data.id = actionContext.id;\n            data.signature = actionContext.signature;\n\n            return new Promise(function (resolve, reject) {\n                confirmDialog(\n                    __('Please confirm deletion'),\n                    function accept() {\n                        request({\n                            url: self.url,\n                            method: 'POST',\n                            data: data,\n                            dataType: 'json'\n                        }).then(function (response) {\n                            if (response.success && response.deleted) {\n                                feedback().success(response.message || __('Resource deleted'));\n\n                                if (actionContext.tree) {\n                                    $(actionContext.tree).trigger('removenode.taotree', [\n                                        {\n                                            id: actionContext.uri || actionContext.classUri\n                                        }\n                                    ]);\n                                }\n                                return resolve({\n                                    uri: actionContext.uri || actionContext.classUri\n                                });\n                            } else {\n                                if (response.success && !response.deleted) {\n                                    $(actionContext.tree).trigger('refresh.taotree');\n                                    reject(\n                                        response.msg ||\n                                            response.message ||\n                                            // prettier-ignore\n                                            __('Unable to delete the selected resource because you do not have the required rights to delete part of its content.')\n                                    );\n                                }\n\n                                reject(\n                                    response.msg || response.message || __('Unable to delete the selected resource')\n                                );\n                            }\n                        });\n                    },\n                    function cancel() {\n                        reject({ cancel: true });\n                    }\n                );\n            });\n        });\n\n        /**\n         * Register the removeNodes action: removes multiple resources\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object[]|Object} actionContexts - single or multiple action contexts\n         * @returns {Promise<String[]>} with the list of deleted ids/uris\n         */\n        binder.register('removeNodes', function removeNodes(actionContexts) {\n            var self = this;\n            var confirmMessage = '';\n            var data = {};\n            var classes;\n            var instances;\n\n            if (!_.isArray(actionContexts)) {\n                actionContexts = [actionContexts];\n            }\n\n            classes = _.filter(actionContexts, { type: 'class' });\n            instances = _.filter(actionContexts, { type: 'instance' });\n\n            data.ids = _.map(actionContexts, function (elem) {\n                return { id: elem.id, signature: elem.signature };\n            });\n\n            if (actionContexts.length === 1) {\n                confirmMessage = __('Please confirm deletion');\n            } else if (actionContexts.length > 1) {\n                if (instances.length) {\n                    if (instances.length === 1) {\n                        confirmMessage = __('an instance');\n                    } else {\n                        confirmMessage = __('%s instances', instances.length);\n                    }\n                }\n                if (classes.length) {\n                    if (confirmMessage) {\n                        confirmMessage += __(' and ');\n                    }\n                    if (classes.length === 1) {\n                        confirmMessage = __('a class');\n                    } else {\n                        confirmMessage += __('%s classes', classes.length);\n                    }\n                }\n                confirmMessage = __('Please confirm deletion of %s.', confirmMessage);\n            }\n\n            return new Promise(function (resolve, reject) {\n                confirmDialog(\n                    confirmMessage,\n                    function accept() {\n                        request({\n                            url: self.url,\n                            method: 'POST',\n                            data: data,\n                            dataType: 'json'\n                        }).then(function (response) {\n                            if (response.success && response.deleted) {\n                                resolve(response.deleted);\n                            } else {\n                                reject(new Error(response.message || __('Unable to delete the selected resources')));\n                            }\n                        });\n                    },\n                    function cancel() {\n                        reject({ cancel: true });\n                    }\n                );\n            });\n        });\n\n        /**\n         * Register the moveNode action: moves a resource.\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} [actionContext.uri]\n         * @param {String} [actionContext.classUri]\n         */\n        binder.register('moveNode', function remove(actionContext) {\n            var data = _.pick(actionContext, ['id', 'uri', 'destinationClassUri', 'confirmed', 'signature']);\n\n            //wrap into a private function for recusion calls\n            var _moveNode = function _moveNode(url) {\n                request({\n                    url: url,\n                    method: 'POST',\n                    data: data,\n                    dataType: 'json'\n                }).then(function (response) {\n                    var message;\n                    var i;\n\n                    if (response && response.status === true) {\n                        return;\n                    } else if (response && response.status === 'diff') {\n                        // prettier-ignore\n                        message = __('Moving this element will replace the properties of the previous class by those of the destination class :');\n                        message += '\\n';\n                        for (i = 0; i < response.data.length; i++) {\n                            if (response.data[i].label) {\n                                message += `- ${response.data[i].label}\\n`;\n                            }\n                        }\n                        message += `${__('Please confirm this operation.')}\\n`;\n\n                        // eslint-disable-next-line no-alert\n                        if (window.confirm(message)) {\n                            data.confirmed = true;\n                            return _moveNode(url, data);\n                        }\n                    }\n\n                    //ask to rollback the tree\n                    $(actionContext.tree).trigger('rollback.taotree');\n                });\n            };\n            _moveNode(this.url, data);\n        });\n\n        /**\n         * Register the launchEditor action.\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object} actionContext - the current actionContext\n         * @param {String} [actionContext.uri]\n         * @param {String} [actionContext.classUri]\n         *\n         * @fires layout/tree#removenode.taotree\n         */\n        binder.register('launchEditor', function launchEditor(actionContext) {\n            var data = _.pick(actionContext, ['id']);\n            var wideDifferenciator = '[data-content-target=\"wide\"]';\n\n            $.ajax({\n                url: this.url,\n                type: 'GET',\n                data: data,\n                dataType: 'html',\n                success: function (response) {\n                    var $response = $($.parseHTML(response, document, true));\n                    //check if the editor should be displayed widely or in the content area\n                    if ($response.is(wideDifferenciator) || $response.find(wideDifferenciator).length) {\n                        section\n                            .create({\n                                id: 'authoring',\n                                name: __('Authoring'),\n                                url: this.url,\n                                content: $response,\n                                visible: false\n                            })\n                            .show();\n                    } else {\n                        section.updateContentBlock($response);\n                    }\n                }\n            });\n        });\n\n        /**\n         * Register the copyTo action: select a destination class to copy a resource\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object[]|Object} actionContext - single or multiple action contexts\n         * @returns {Promise<String>} with the new resource URI\n         */\n        binder.register('copyTo', function copyTo(actionContext) {\n            //create the container manually...\n            var $container = emptyPanel();\n\n            //get the resource provider configured with the action URL\n            var resourceProvider = resourceProviderFactory({\n                copyTo: {\n                    url: this.url\n                }\n            });\n\n            return new Promise(function (resolve, reject) {\n                //set up a destination selector\n                destinationSelectorFactory($container, {\n                    classUri: actionContext.rootClassUri,\n                    preventSelection: function preventSelection(nodeUri, node, $node) {\n                        //prevent selection on nodes without WRITE permissions\n                        if (($node.length && $node.data('access') === 'partial') || $node.data('access') === 'denied') {\n                            if (!permissionsManager.hasPermission(nodeUri, 'WRITE')) {\n                                feedback().warning(\n                                    __('You are not allowed to write in the class %s', node.label),\n                                    { encodeHtml: false }\n                                );\n                                return true;\n                            }\n                        }\n                        return false;\n                    }\n                })\n                    .on('query', function (params) {\n                        var self = this;\n\n                        //asks only classes\n                        params.classOnly = true;\n                        resourceProvider\n                            .getResources(params, true)\n                            .then(function (resources) {\n                                //ask the server the resources from the component query\n                                self.update(resources, params);\n                            })\n                            .catch(function (err) {\n                                self.trigger('error', err);\n                            });\n                    })\n                    .on('select', function (destinationClassUri) {\n                        var self = this;\n                        if (!_.isEmpty(destinationClassUri)) {\n                            this.disable();\n\n                            resourceProvider\n                                .copyTo(actionContext.id, destinationClassUri, actionContext.signature)\n                                .then(function (result) {\n                                    if (result && result.uri) {\n                                        feedback().success(__('Resource copied'));\n\n                                        //backward compatible for jstree\n                                        if (actionContext.tree) {\n                                            $(actionContext.tree).trigger('refresh.taotree', [result]);\n                                        }\n                                        return resolve(result);\n                                    }\n                                    return reject(new Error(__('Unable to copy the resource')));\n                                })\n                                .catch(function (err) {\n                                    self.trigger('error', err);\n                                });\n                        }\n                    })\n                    .on('error', reject);\n            });\n        });\n\n        /**\n         * Register the copyClassTo action: select a destination class to copy a class\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object[]|Object} actionContext - single or multiple action contexts\n         * @returns {Promise<String>} with the destination class URI\n         */\n        binder.register('copyClassTo', function copyClassTo(actionContext) {\n            //create the container manually...\n            const $container = emptyPanel();\n\n            //get the resource provider configured with the action URL\n            const resourceProvider = resourceProviderFactory();\n\n            /**\n             * wrapped the old jstree API used to refresh the tree and optionally select a resource\n             * @param {String} [uriResource] - the uri resource node to be selected\n             */\n            const refreshTree = uriResource => {\n                if (actionContext.tree) {\n                    $(actionContext.tree).trigger('refresh.taotree', [uriResource]);\n                }\n            };\n\n            return new Promise((resolve, reject) => {\n                //set up a destination selector\n                const destinationSelector = destinationSelectorFactory($container, {\n                    taskQueue: taskQueue,\n                    taskCreationData: {\n                        uri: actionContext.id,\n                        signature: actionContext.signature\n                    },\n                    taskCreationUrl: this.url,\n                    classUri: actionContext.rootClassUri,\n                    preventSelection(nodeUri, node, $node) {\n                        //prevent selection on nodes without WRITE permissions\n                        if (($node.length && $node.data('access') === 'partial') || $node.data('access') === 'denied') {\n                            if (!permissionsManager.hasPermission(nodeUri, 'WRITE')) {\n                                feedback().warning(\n                                    __('You are not allowed to write in the class %s', node.label),\n                                    { encodeHtml: false }\n                                );\n                                return true;\n                            }\n                        }\n                        return false;\n                    }\n                })\n                    .on('query', params => {\n                        params.classOnly = true;\n                        resourceProvider\n                            .getResources(params, true)\n                            .then(resources => destinationSelector.update(resources, params))\n                            .catch(err => destinationSelector.trigger('error', err));\n                    })\n                    .on('finished', (result, button) => {\n                        if (\n                            result.task &&\n                            result.task.report &&\n                            _.isArray(result.task.report.children) &&\n                            result.task.report.children.length &&\n                            result.task.report.children[0]\n                        ) {\n                            if (\n                                result.task.report.children[0].data &&\n                                result.task.report.children[0].data.uriResource\n                            ) {\n                                feedback().info(__('%s completed', result.task.taskLabel), { encodeHtml: false });\n\n                                refreshTree(result.task.report.children[0].data.uriResource);\n                            } else {\n                                button.displayReport(result.task.report.children[0], __('Error'));\n                            }\n                        }\n                    })\n                    .on('continue', () => refreshTree(actionContext.id))\n                    .on('select', resolve)\n                    .on('error', reject);\n            });\n        });\n\n        /**\n         * Register the moveTo action: select a destination class to move resources\n         *\n         * @this the action (once register it is bound to an action object)\n         *\n         * @param {Object|Object[]} actionContext - multiple action contexts\n         * @returns {Promise<String>} with the destination class URI\n         */\n        binder.register('moveTo', function moveTo(actionContext) {\n            //create the container manually...\n            var $container = emptyPanel();\n\n            //backward compatible for jstree\n            var tree = actionContext.tree;\n\n            //get the resource provider configured with the action URL\n            var resourceProvider = resourceProviderFactory({\n                moveTo: {\n                    url: this.url\n                }\n            });\n\n            if (!_.isArray(actionContext)) {\n                actionContext = [actionContext];\n            }\n\n            return new Promise(function (resolve, reject) {\n                var rootClassUri = _.pluck(actionContext, 'rootClassUri').pop();\n                var selectedUri = _.pluck(actionContext, 'id');\n                var selectedData = _.map(actionContext, function (a) {\n                    return { id: a.id, signature: a.signature };\n                });\n\n                //set up a destination selector\n                destinationSelectorFactory($container, {\n                    title: __('Move to'),\n                    actionName: __('Move'),\n                    icon: 'move-item',\n                    classUri: rootClassUri,\n                    confirm: messages.confirmMove,\n                    preventSelection: function preventSelection(nodeUri, node, $node) {\n                        var uriList = [];\n\n                        //prevent selection on nodes without WRITE permissions\n                        if (($node.length && $node.data('access') === 'partial') || $node.data('access') === 'denied') {\n                            if (!permissionsManager.hasPermission(nodeUri, 'WRITE')) {\n                                feedback().warning(\n                                    __('You are not allowed to write in the class %s', node.label),\n                                    { encodeHtml: false }\n                                );\n                                return true;\n                            }\n                        }\n\n                        uriList = [nodeUri];\n                        $node.parents('.class').each(function () {\n                            if (this.dataset.uri !== rootClassUri) {\n                                uriList.push(this.dataset.uri);\n                            }\n                        });\n\n                        //prevent selection on nodes that are already the containers of the resources or the resources themselves\n                        if (_.intersection(selectedUri, uriList).length) {\n                            feedback().warning(\n                                __('You cannot move the selected resources in the class %s', node.label),\n                                { encodeHtml: false }\n                            );\n                            return true;\n                        }\n\n                        return false;\n                    }\n                })\n                    .on('query', function (params) {\n                        var self = this;\n\n                        //asks only classes\n                        params.classOnly = true;\n                        resourceProvider\n                            .getResources(params, true)\n                            .then(function (resources) {\n                                //ask the server the resources from the component query\n                                self.update(resources, params);\n                            })\n                            .catch(function (err) {\n                                self.trigger('error', err);\n                            });\n                    })\n                    .on('select', function (destinationClassUri) {\n                        var self = this;\n\n                        if (!_.isEmpty(destinationClassUri)) {\n                            this.disable();\n\n                            resourceProvider\n                                .moveTo(selectedData, destinationClassUri)\n                                .then(function (results) {\n                                    var failed = [];\n                                    var success = [];\n\n                                    _.forEach(results, function (result, resUri) {\n                                        var resource = _.find(actionContext, { uri: resUri });\n                                        if (result.success) {\n                                            success.push(resource);\n                                        } else {\n                                            failed.push(result.message);\n                                        }\n                                    });\n\n                                    if (!success.length) {\n                                        feedback().error(__('Unable to move the resources'));\n                                    } else if (failed.length) {\n                                        feedback().warning(\n                                            __('Some resources have not been moved: %s', failed.join(', '))\n                                        );\n                                    } else {\n                                        feedback().success(__('Resources moved'));\n                                    }\n\n                                    //backward compatible for jstree\n                                    if (tree) {\n                                        $(tree).trigger('refresh.taotree', [destinationClassUri]);\n                                    }\n                                    return resolve(destinationClassUri);\n                                })\n                                .catch(function (err) {\n                                    self.trigger('error', err);\n                                });\n                        }\n                    })\n                    .on('error', reject);\n            });\n        });\n    };\n\n    return commonActions;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 Open Assessment Technologies SA;\n */\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/actions',[\n    'jquery',\n    'lodash',\n    'core/eventifier',\n    'core/promise',\n    'lib/uuid',\n    'layout/actions/binder',\n    'layout/actions/common',\n    'layout/permissions'\n], function($, _, eventifier, Promise, uuid, binder, commonActions, permissionsManager){\n    'use strict';\n\n    /**\n     * The data context for actions\n     * @typedef {Object} ActionContext\n     * @property {String} [uri] - the resource uri\n     * @property {String} [classUri] - the class uri\n     */\n\n    var actions = {};\n    var resourceContext = {};\n\n    /**\n     * @exports layout/actions\n     */\n    var actionManager = eventifier({\n\n        /**\n         * Initialize the actions for the given scope. It should be done only once.\n         * @constructor\n         * @param {jQueryElement} [$scope = $(document)] - to scope the actions into the page\n         */\n        init: function init($scope){\n\n            if($scope && $scope.length){\n                this.$scope = $scope;\n            } else {\n                this.$scope = $(document);\n            }\n\n            //initialize the registration of common actions\n            commonActions();\n\n            this._lookup();\n            this.updateContext();\n            this._listenUpdates();\n            this._bind();\n        },\n\n        /**\n         * Lookup for existing actions in the page and add them to the _actions property\n         * @private\n         */\n        _lookup : function _lookup(){\n            var self = this;\n            $('.action-bar .action', this.$scope).each(function(){\n\n                var $this = $(this);\n                var id;\n                if($this.data('action')){\n\n                    //use the element id\n                    if($this.attr('id')){\n                        id = $this.attr('id');\n                    } else {\n                        //or generate one\n                        do {\n                            id = 'action-' + uuid(8, 16);\n                        } while (self._actions[id]);\n\n                        $this.attr('id', id);\n                    }\n\n                    actions[id] = {\n                        id      : id,\n                        name    : $this.attr('title'),\n                        binding : $this.data('action'),\n                        url     : $('a', $this).attr('href'),\n                        context : $this.data('context'),\n                        multiple : $this.data('multiple'),\n                        rights  : $this.data('rights'),\n                        state : {\n                            disabled    : $this.hasClass('disabled'),\n                            hidden      : $this.hasClass('hidden'),\n                            active      : $this.hasClass('active')\n                        }\n                    };\n                }\n            });\n        },\n\n        /**\n         * Bind actions' events: try to execute the binding registered for this action.\n         * The behavior depends on the binding name of the action.\n         * @private\n         */\n        _bind : function _bind(){\n            var self = this;\n            var actionSelector = this.$scope.selector + ' .action-bar .action';\n\n            $(document)\n                .off('click', actionSelector)\n                .on('click', actionSelector, function(e){\n                    var selected;\n                    e.preventDefault();\n                    selected  = actions[$(this).attr('id')];\n                    if(selected && selected.state.disabled === false &&  selected.state.hidden === false){\n                        self.exec(selected);\n                    }\n                });\n        },\n\n        /**\n         * Listen for event that could update the actions.\n         * Those events may change the current context.\n         * @private\n         * @deprecated\n         */\n        _listenUpdates : function _listenUpdates(){\n            var self = this;\n            var treeSelector = this.$scope.selector + ' .tree';\n\n            //listen for tree changes\n            $(document)\n                .off('change.taotree.actions', treeSelector)\n                .on('change.taotree.actions', treeSelector, function(e, context){\n                    context = context || {};\n                    context.tree = this;\n                    self.updateContext(context);\n                });\n        },\n\n        /**\n         * Update the current context. Context update may change the visibility of the actions.\n         * @param {ActionContext|ActionContext[]} context - the new context\n         * @fires ActionManager#contextchange event with the new context\n         */\n        updateContext : function updateContext(context){\n            var self = this;\n            var hasClasses, hasInstances, current;\n\n            context = context || {};\n\n            if(_.isArray(context) ) {\n                hasClasses = _.some(context, { type : 'class' });\n                hasInstances = _.some(context, { type : 'instance' });\n\n                _.forEach(actions, function(action){\n                    //if some has not the permissions we deny\n                    var hasPermissionDenied = _.some(context, function(resource){\n                        return !permissionsManager.isContextAllowed(action.rights, resource);\n                    });\n\n                    if( context.length &&\n                        action.multiple &&\n                        !hasPermissionDenied &&\n                        action.context !== 'none' &&\n                        ( (action.context === '*' || action.context === 'resource') ||\n                          (action.context === 'instance' && hasInstances && !hasClasses) ||\n                          (action.context === 'class' && hasClasses && !hasInstances) ) ) {\n\n                        action.state.hidden = false;\n                    } else {\n                        action.state.hidden = true;\n                    }\n                });\n\n            } else {\n\n                if(context.type){\n                    current = context.type;\n                } else {\n                    current = context.uri ? 'instance' : context.classUri ? 'class' : 'none';\n                }\n\n                _.forEach(actions, function(action){\n\n                    var allowed = permissionsManager.isContextAllowed(action.rights, context);\n\n                    if( action.multiple || allowed === false ||\n                        (current === 'none' && action.context !== '*') ||\n                        (action.context !== '*' && action.context !== 'resource' && current !== action.context) ){\n\n                        action.state.hidden = true;\n\n                    } else {\n                        action.state.hidden = false;\n                    }\n                });\n            }\n\n            resourceContext = context;\n\n            /**\n             * @event ActionManager#contextchange\n             * @param {ActionContext|ActionContext[]} context - the new context\n             */\n            self.trigger('contextchange', context);\n\n            self.updateState();\n        },\n\n        /**\n         * Update the state of the actions regarding the values of their state property\n         */\n        updateState : function updateState(){\n            _.forEach(actions, function(action, id){\n                var $elt = $('#' + id);\n                _.forEach(['hidden', 'disabled', 'active'], function(state){\n                    if(action.state[state] === true){\n                        $elt.addClass(state);\n                    } else {\n                        $elt.removeClass(state);\n                    }\n                });\n            });\n        },\n\n        /**\n         * Execute the operation bound to an action (via {@link layout/actions/binder#register});\n         * @param {String|Object} action - can be either the id, the name or the action directly\n         * @param {ActionContext} [context] - an action context, use the current otherwise\n         * @returns {Promise?} always resolves\n         * @fires ActionManager#error if the executed action fails\n         * @fires ActionManager#{actionId} an event with the action id\n         * @fires ActionManager#cancel if the action has been canceled\n         */\n        exec : function exec(action, context){\n            var self = this;\n            if(_.isString(action)){\n                if(_.isPlainObject(actions[action])){\n                    //try to find by id\n                    action = actions[action];\n                } else {\n                    //or by by name\n                    action = _.find(actions, {name : action});\n                }\n            }\n            if(_.isPlainObject(action)){\n\n                //make the executed action active\n                _.forEach(actions, function(otherAction){\n                    otherAction.state.active = false;\n                });\n                action.state.active = true;\n                this.updateState();\n\n                return Promise\n                    .resolve(binder.exec(action, context || resourceContext))\n                    .then(function actionDone(actionData){\n                        var events = [action.id, action.binding];\n\n                        /**\n                         * @event ActionManager#{actionId}\n                         * @param {ActionContext} context - the context the action received\n                         * @param {Object} [actionData] - the data produced by the action\n                         */\n                        self.trigger(events.join(' '), context || resourceContext, actionData);\n                    })\n                    .catch( function actionError(err){\n                        if(err && err.cancel){\n\n                            /**\n                             * @event ActionManager#cancel\n                             * @param {String} actionId - the id of the canceled action\n                             */\n                            return self.trigger('cancel', action.id);\n                        }\n\n                        /**\n                         * @event ActionManager#error\n                         * @param {Error} err - the source error\n                         */\n                        self.trigger('error', err);\n                    });\n            }\n        },\n\n        /**\n         * Helps you to retrieve an action from it's name or id\n         * @param {String} actionName - name or id of the action\n         * @returns {Object} the action\n         */\n        getBy : function(actionName){\n            var action;\n            if(_.isPlainObject(actions[actionName])){\n                //try to find by id\n                action = actions[actionName];\n            } else {\n                //or by by name\n                action = _.find(actions, {name : actionName});\n            }\n            return action;\n        }\n    });\n\n    return actionManager;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n */\n\n/**\n * This component manage the navigation bar of TAO.\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n * @author Dieter Raber <dieter@taotesting.com>\n */\ndefine('layout/nav',['jquery', 'lodash'], function ($, _) {\n    'use strict';\n\n    var $body = $('body'),\n        $navContainer = $('header.dark-bar'),\n        $nav = $navContainer.find($('nav')),\n        $mainMenu = $nav.find('.main-menu'),\n        $settingsMenu = $nav.find('.settings-menu'),\n        navIsOversized = false,\n        expandedMinWidth = (function () {\n            var _width = $navContainer.find('img').parent().outerWidth();\n            $mainMenu.add($settingsMenu).each(function () {\n                var oldDisplay = window.getComputedStyle(this, null).getPropertyValue('display');\n                this.style.display = 'block';\n                _width += $(this).outerWidth();\n                this.style.display = oldDisplay;\n            });\n            // 20 makes sure there is always a bit of distance between the menus\n            return _width + 20;\n        })();\n\n    /**\n     * If logo and main menu leave not enough space for the settings menu\n     * the mobile menu will be shown instead.\n     */\n    var checkHeight = function checkHeight() {\n        if (!$mainMenu.length || !$settingsMenu.length) {\n            return;\n        }\n        // - nav is too wide\n        if ($mainMenu.offset().top !== $settingsMenu.offset().top) {\n            $body.addClass('oversized-nav');\n            navIsOversized = true;\n        }\n        // - body.oversized-nav has been set in a previous call\n        //      find out if there is enough space now\n        else if (navIsOversized && expandedMinWidth <= $navContainer.width()) {\n            $body.removeClass('oversized-nav');\n            navIsOversized = false;\n        }\n        // in all other cases leave things as they are\n    };\n\n    /**\n     * @exports layout/nav\n     */\n    return {\n        /**\n         * Initialize the navigation bar\n         *\n         * @author Bertrand Chevrier <bertrand@taotesting.com>\n         */\n        init: function () {\n            //here the bindings are controllers or even the name of any AMD file to load\n            $('[data-action]', $nav)\n                .off('click')\n                .on('click', function (e) {\n                    e.preventDefault();\n                    let binding = $(this).data('action');\n                    if (binding) {\n                        require([binding], function (controller) {\n                            if (controller && typeof controller.start === 'function') {\n                                controller.start();\n                            }\n                        });\n                    }\n                });\n\n            // check the height of the header on load and on resize\n            checkHeight();\n            $(window)\n                .off('resize.navheight')\n                .on(\n                    'resize.navheight',\n                    _.debounce(function () {\n                        checkHeight();\n                    }, 100)\n                );\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2020 (update and modification) Open Assessment Technologies SA;\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/search',[\n    'jquery',\n    'layout/actions',\n    'ui/searchModal',\n    'core/store',\n    'context',\n    'util/url',\n    'layout/actions/binder'\n], function ($, actionManager, searchModal, store, context, urlHelper, binder) {\n    /**\n     * Seach bar component for TAO action bar. It clears the store and\n     * exposes the container, the indexeddb store that manages\n     * search results, and @init function\n     */\n    const searchComponent = {\n        container: null,\n        searchStore: null,\n        panelId: '',\n        init(panelId) {\n            searchComponent.panelId = panelId;\n            store('search')\n                .then(store => {\n                    store.clear();\n                    searchComponent.searchStore = store;\n                    initializeEvents();\n                    manageSearchStoreUpdate();\n                })\n                .catch(e => {\n                    actionManager.trigger('error', e);\n                });\n        }\n    };\n\n    /**\n     * Sets events to init searchModal instance on search and results icons click, enter keypress\n     * and ctrl + k shortcut\n     */\n    function initializeEvents() {\n        searchComponent.container = searchComponent.panelId ? $(`#panel-${searchComponent.panelId} .action-bar .search-area`) : $('.action-bar .search-area');\n        const $searchBtn = $('button.icon-find', searchComponent.container);\n        const $searchInput = $('input', searchComponent.container);\n        const $resultsBtn = $('button.icon-ul', searchComponent.container);\n\n        $searchBtn.off('.searchComponent').on('click.searchComponent', () => createSearchModalInstance());\n\n        $searchInput.off('.searchComponent').on('keypress.searchComponent', e => {\n            if (e.which === 13) {\n                createSearchModalInstance();\n            }\n        });\n\n        $resultsBtn.off('.searchComponent').on('click.searchComponent', () => {\n            searchComponent.searchStore\n                .getItem('criterias')\n                .then(storedCriterias => createSearchModalInstance(storedCriterias, false))\n                .catch(e => {\n                    actionManager.trigger('error', e);\n                });\n        });\n\n        $(document).on('keydown.searchComponent', e => {\n            if (\n                $('.action-bar .search-area').closest('.content-panel').css('display') === 'flex' &&\n                e.ctrlKey &&\n                e.which == 75\n            ) {\n                e.preventDefault();\n                createSearchModalInstance();\n            }\n        });\n    }\n\n    /**\n     * Creates a searchModal instance and set up searchStoreUpdate listener to update search component visuals when search store changes\n     * @param {string} criterias - stored criterias for the searchComponent to be initialized with\n     * @param {boolean} searchOnInit - if datatable request must be triggered on init, or use the stored results instead\n     */\n    function createSearchModalInstance(criterias, searchOnInit = true) {\n        criterias = criterias || { search: $('input', searchComponent.container).val() };\n        const url = searchComponent.container.data('url');\n        const placeholder = searchComponent.container.find('input').attr('placeholder');\n        const rootClassUri = decodeURIComponent(urlHelper.parse(url).query.rootNode);\n        const isResultPage = context.shownStructure === 'results';\n        const searchModalInstance = searchModal({\n            criterias,\n            url,\n            classesUrl: urlHelper.route('getAll', 'RestResource', 'tao'),\n            classMappingUrl: urlHelper.route('getWithMapping', 'ClassMetadata', 'tao'),\n            statusUrl: urlHelper.route('status', 'AdvancedSearch', 'tao'),\n            searchOnInit,\n            rootClassUri,\n            hideResourceSelector: isResultPage,\n            hideCriteria: isResultPage,\n            placeholder\n        });\n\n        searchModalInstance.on('store-updated', manageSearchStoreUpdate);\n        searchModalInstance.on('refresh', (id, data) => {\n            // in all cases id == resource_uri and node in the resorce tree\n            // after triggering 'refresh' this resource will be selected in tree\n            // on Results page we have 2 cases\n            // 1. GenerisSearch id == delivery_uri\n            // 2. ElasticSearch id == delivery_result_uri and data.delivery == delivery_uri\n            const uri = !isResultPage || !data.delivery ? id : data.delivery;\n            actionManager.trigger('refresh', { uri });\n            // case 2. ElasticSearch - need to store delivery_result_uri in searchComponent for taoOutcomeUi controller\n            isResultPage && data.delivery && searchComponent.container.data('show-result', id);\n        });\n    }\n\n    /**\n     * Callback to searchStoreUpdate event. First checks if current location is the same as the stored one, and if\n     * it is not, clears the store. Then requests stored criterias and results if still necessary, and updates view\n     */\n    function manageSearchStoreUpdate() {\n        searchComponent.searchStore\n            .getItem('context')\n            .then(storedContext => {\n                if (storedContext !== context.shownStructure) {\n                    searchComponent.searchStore.clear();\n                    updateViewAfterSeachStoreUpdate();\n                } else {\n                    let promises = [];\n                    promises.push(searchComponent.searchStore.getItem('criterias'));\n                    promises.push(searchComponent.searchStore.getItem('results'));\n                    return Promise.all(promises).then(values => {\n                        updateViewAfterSeachStoreUpdate(values[0], values[1]);\n                    });\n                }\n            })\n            .catch(e => actionManager.trigger('error', e));\n    }\n\n    /**\n     * Updates template with the received query and results dataset\n     * @param {string} storedCriterias - stored search criterias to be used on component creation\n     * @param {object} storedSearchResults - stored search results dataset, to display number of saved results on .results-counter\n     */\n    function updateViewAfterSeachStoreUpdate(storedCriterias, storedSearchResults) {\n        const $searchInput = $('input', searchComponent.container);\n        const $resultsCounterContainer = $('.results-counter', searchComponent.container);\n        const $searchAreaButtonsContainer = $('.search-area-buttons-container', searchComponent.container);\n\n        $searchInput.val(storedCriterias ? storedCriterias.search : '');\n        if (storedSearchResults) {\n            $searchAreaButtonsContainer.addClass('has-results-counter');\n            $resultsCounterContainer.text(storedSearchResults.totalCount > 99 ? '+99' : storedSearchResults.totalCount);\n        } else {\n            $searchAreaButtonsContainer.removeClass('has-results-counter');\n            $resultsCounterContainer.text('');\n        }\n    }\n\n    return searchComponent;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 Open Assessment Technologies SA;\n */\n\n/**\n * Tree provider : jstree\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/tree/provider/jstree',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'context',\n    'core/store',\n    'core/promise',\n    'util/url',\n    'layout/generisRouter',\n    'layout/actions',\n    'layout/section',\n    'layout/permissions',\n    'ui/feedback',\n    'uri',\n    'jquery.tree'\n], function($, _, __, context, store, Promise, urlUtil, generisRouter, actionManager, sectionManager, permissionsManager, feedback, uri){\n    'use strict';\n\n    var pageRange = 30;\n    var nodeTypes = {\n        more: 'more'\n    };\n\n    return {\n\n        /**\n         * Tree provider name\n         */\n        name : 'jstree',\n\n        /**\n         * The tree factory helps you to instantiate a new tree from the TAO ontology\n         * @exports layout/tree/provider/jstree\n         *\n         * @param {jQueryElement} $container - that will contain the tree\n         * @param {Object} [options] - additional configuration options\n         * @param {String} [options.url] - the endpoint to load data\n         * @param {String} [options.rootClassUri] - the URI of the root class\n         * @param {Object} [options.serverParameters] - add parameters to send to the endpoint (defaults are hideInstance, filter, offset and limit)\n         * @param {Object} [options.actions] - which actions to perform from the tree\n         * @param {String} [options.actions.moveInstance] - the id of the action bound (using actionManager.register) on move\n         * @param {String} [options.actions.selectInstance] - the id of the action bound (using actionManager.register) on item selection\n         * @param {String} [options.actions.selectClass] - the id of the action bound (using actionManager.register) on class selection\n         * @param {String} [options.actions.deleteInstance] - the id of the action bound (using actionManager.register) on delete\n         * @param {String} [options.selectNode] - the URI of the node to be selected by default, the node must be loaded.\n         * @param {String} [options.loadNode] - the URI of a node to be loaded from the server side and selected.\n\n         * @returns {Promise} resolves when the tree is ready\n         */\n        init : function init($container, options){\n            var lastOpened;\n            var lastSelected;\n\n            var moreNode = {\n                data : __('More'),\n                type : nodeTypes.more,\n                attributes : {\n                    class : 'more'\n                }\n            };\n\n            //these are the parameters added to the server call to load data\n            var serverParams = _.defaults(options.serverParameters || {}, {\n                extension       : context.shownExtension,\n                perspective     : context.shownStructure,\n                section         : context.section,\n                // eslint-disable-next-line no-undefined\n                classUri        : options.rootClassUri ? options.rootClassUri : undefined,\n                hideInstances   : options.hideInstances || 0,\n                filter          : '*',\n                offset          : 0,\n                limit           : pageRange\n            });\n\n            //list of events callbacks to be bound to the tree\n            var events = {\n\n                /**\n                 * Refresh the tree\n                 *\n                 * @event layout/tree#refresh.taotree\n                 * @param {Object} [data] - some data to bind to the tree\n                 * @param {String} [data.filter] - reload the tree in filtering mode\n                 * @param {String} [data.selectNode] - reload the tree and select the given node (by URI) if it is already loaded.\n                 * @param {String} [data.loadNode] - the URI of a node to display in filtering mode (it will load only this node)\n                 */\n                refresh : function refresh(data){\n                    var treeState, node;\n                    var tree =  $.tree.reference($container);\n                    if(tree){\n\n                        // try to select the node within the current loaded tree\n                        if (data && data.loadNode) {\n                            node = $container.find('[data-uri=\"' + data.loadNode + '\"]');\n                            if (node.length) {\n                                tree.select_branch(node);\n                                return;\n                            }\n                        }\n\n                        //update the state with data to be used later (ie. filter value, etc.)\n                        treeState = _.merge($container.data('tree-state') || {}, data);\n                        treeState = _.omit(treeState, 'selectNode');\n\n                        if (data && data.loadNode) {\n                            tree.deselect_branch(tree.selected);\n                            tree.settings.selected = false;\n                            treeState.selectNode = data.loadNode;\n                        } else if (data && data.selectNode) { //node will be selected in `onload` function\n                            tree.deselect_branch(tree.selected);\n                            tree.settings.selected = false;\n                        }\n\n                        setTreeState(treeState);\n                        tree.refresh();\n                    }\n                },\n\n                /**\n                 * Rollback the tree.\n                 * The rollback state must have been set in the state previously, otherwise runs a refresh.\n                 *\n                 * @event layout/tree#rollback.taotree\n                 */\n                rollback : function rollback(){\n                    var treeState;\n                    var tree =  $.tree.reference($container);\n                    if(tree){\n\n                        treeState = $container.data('tree-state');\n                        if(treeState.rollback){\n                            $.tree.rollback(treeState.rollback);\n\n                            //remove the rollback infos.\n                            setTreeState(_.omit(treeState, 'rollback'));\n                        } else {\n                            //trigger a full refresh\n                            $container.trigger('refresh.taotree');\n                        }\n                    }\n                },\n\n                /**\n                 * Add a node to the tree.\n                 *\n                 * @event layout/tree#addnode.taotree\n                 * @param {Object} data - the data about the node to add\n                 * @param {String} data.parent - the id/uri of the node that will contain the new node\n                 * @param {String} data.id - the id of the new node\n                 * @param {String} data.cssClass - the css class for the new node (node-instance or node-class at least).\n                 */\n                addnode : function addnode(data) {\n                    var tree =  $.tree.reference($container);\n                    var parentNode = tree.get_node($('#' + uri.encode(data.parent), $container).get(0));\n\n                    var params = _.clone(serverParams);\n\n                    params.classUri = data.parent;\n                    if (data.cssClass === 'node-class') {\n                        params.hideInstances = 1; //load only class nodes\n                    } else {\n                        params.loadNode = data.uri; //load particular instance\n                    }\n                    //load tree branch with new node to get new node permissions\n                    $.ajax(tree.settings.data.opts.url, {\n                        type        : tree.settings.data.opts.method,\n                        dataType    : tree.settings.data.type,\n                        async       : tree.settings.data.async,\n                        data        : params,\n                        success     : function (response) {\n                            var treeData = getTreeData(response);\n                            var items = treeData.children || treeData;\n                            var node = _.filter(items, function (child) {\n                                return child.attributes && child.attributes['data-uri'] === data.uri;\n                            });\n                            if (node.length) {\n                                tree.select_branch(\n                                    tree.create(node[0], parentNode)\n                                );\n                            }\n                        }\n                    });\n                },\n\n                /**\n                 * Remove a node from the tree.\n                 *\n                 * @event layout/tree#removenode.taotree\n                 * @param {Object} data - the data about the node to remove\n                 * @param {String} data.id - the id of the node to remove\n                 */\n                removenode : function removenode(data){\n                    var tree =  $.tree.reference($container);\n                    var node = tree.get_node($('#' + data.id, $container).get(0));\n                    tree.remove(node);\n                },\n\n                /**\n                 * Select a node\n                 *\n                 * @event layout/tree#selectnode.taotree\n                 * @param {Object} data - the data about the node to select\n                 * @param {String} data.id - the id of the node to select\n                 */\n                selectnode : function selectnode(data){\n                    var tree =  $.tree.reference($container);\n                    var node = tree.get_node($('#' + data.id, $container).get(0));\n                    $('li a', $container).removeClass('clicked');\n                    tree.select_branch(node);\n                },\n\n                /**\n                 * Opens a tree branch\n                 *\n                 * @event layout/tree#openbranch.taotree\n                 * @param {Object} data - the data about the node to remove\n                 * @param {String} data.id - the id of the node to remove\n                 */\n                openbranch : function openbranch(data){\n                    var tree =  $.tree.reference($container);\n                    var node = tree.get_node($('#' + data.id, $container).get(0));\n                    $('li a', $container).removeClass('clicked');\n                    tree.open_branch(node);\n                }\n            };\n\n            /**\n             * Options given to the jsTree plugin\n             */\n            var treeOptions = {\n\n                //data call\n                data: {\n                    type: \"json\",\n                    async : true,\n                    opts: {\n                        method : \"GET\",\n                        url: options.url\n                    }\n                },\n\n                //theme\n                ui: {\n                    \"theme_name\" : \"css\",\n                    \"theme_path\" : context.taobase_www + 'js/lib/jsTree/themes/css/style.css'\n                },\n\n                //nodes types\n                types: {\n                    \"default\" : {\n                        renameable\t: false,\n                        deletable\t: true,\n                        creatable\t: true,\n                        draggable\t: function($node) {\n                            return $node.hasClass('node-instance') && !$node.hasClass('node-undraggable') && options.actions && options.actions.moveInstance;\n                        }\n                    }\n                },\n\n                //lifecycle callbacks\n                callback: {\n\n                    /**\n                     * Delete node callback.\n                     * @fires layout/tree#delete.taotree\n                     * @returns {undefined}\n                     */\n                    ondelete: function ondelete() {\n                        $container.trigger('delete.taotree', Array.prototype.slice.call(arguments));\n                    },\n\n                    /**\n                     * Additional parameters to send to the server to retrieve data.\n                     * It uses the serverParams object previously defined\n                     * @param {jQueryElement} [$node] - the node that represents a class. Used to add the classUri to the call\n                     * @returns {Object} params\n                     */\n                    beforedata: function beforedata($node) {\n                        var treeData = $container.data('tree-state');\n                        var params = _.clone(serverParams);\n                        if($node && $node.length){\n                            params.classUri = $node.data('uri');\n                        }\n                        if(lastSelected){\n                            params.selected = lastSelected;\n                        }\n\n                        //check for additionnal parameters in tree state\n                        if(treeData){\n\n                            //the tree has been loaded/refreshed with the filtering\n                            if(_.isString(treeData.filter) && treeData.filter.length){\n                                params.filter = treeData.filter;\n                                treeData = _.omit(treeData, 'filter');\n                            }\n\n                            //the tree has been loaded/refreshed with the loadNode parameter, so it has to be selected\n                            if(_.isString(treeData.loadNode) && treeData.loadNode.length){\n                                params.selected = treeData.loadNode;\n                                treeData.selectNode = uri.encode(treeData.loadNode);\n                                treeData = _.omit(treeData, 'loadNode');\n                            }\n\n                            setTreeState(treeData);\n                        }\n                        return params;\n                    },\n\n                    /**\n                     * Called back once the data are received.\n                     * Used to modify them before building the tree.\n                     *\n                     * @param {Object} data - the received data\n                     * @returns {Object} data the modified data\n                     */\n                    ondata: function ondata(data) {\n\n                        var treeData;\n                        if(data.error){\n                            feedback().error(data.error);\n                            return [];\n                        }\n\n                        treeData = getTreeData(data);\n\n                        //automatically open the children of the received node\n                        if (treeData.children) {\n                            treeData.state = 'open';\n                        }\n\n                        computeSelectionAccess(treeData);\n\n                        needMore(treeData);\n\n                        addTitle(treeData);\n\n                        return treeData;\n                    },\n\n                    /**\n                     * Once the data are loaded and the tree is ready\n                     * Used to modify them before building the tree.\n                     *\n                     * @param {Object} tree - the tree instance\n                     *\n                     * @fires layout/tree#ready.taotree\n                     */\n                    onload: function onload(tree){\n                        var $firstClass     = $(\".node-class:not(.private):first\", $container);\n                        var $firstInstance  = $(\".node-instance:not(.private):first\", $container);\n                        var treeState       = $container.data('tree-state') || {};\n                        var selectNode      = treeState.selectNode || options.selectNode;\n                        var nodeSelection   = function nodeSelection() {\n                            //the node to select is given\n                            if (selectNodeById(selectNode, tree)) {\n                                return;\n                            }\n\n                            //after refreshing tree previously node will be already selected.\n                            if (tree.selected) {\n                                return;\n                            }\n\n                            //if selectNode was not given and there is no selected node on the tree then try to find node to select:\n\n                            //try to select the last one\n                            if (selectNodeById(lastSelected, tree)) {\n                                return;\n                            }\n\n                            //or the 1st instance\n                            if ($firstInstance.length) {\n                                return tree.select_branch($firstInstance);\n                            }\n\n                            //or something\n                            tree.select_branch($('.node-class,.node-instance', $container).get(0));\n                        };\n\n                        if($firstClass.hasClass('leaf')){\n                            tree.select_branch($firstClass);\n                        } else {\n                            //open the first class\n                            tree.open_branch($firstClass, false, function(){\n                                _.delay(nodeSelection, 10); //delay needed as jstree seems to doesn't know the callbacks right now...,\n                            });\n                        }\n\n                        /**\n                         * The tree is now ready\n                         * @event layout/tree#ready.taotree\n                         * @param {Object} [context] - the tree context (uri, classUri)\n                         */\n                        $container.trigger('ready.taotree');\n                    },\n\n                    /**\n                     * After a branch is initialized\n                     */\n                    oninit : function oninit() {\n                        //execute initTree action\n                        if (options.actions && options.actions.init) {\n                            actionManager.exec(options.actions.init, {\n                                uri: $container.data('rootnode')\n                            });\n                        }\n                    },\n\n                    /**\n                     * Before a branch is opened\n                     * @param {HTMLElement} node - the opened node\n                     */\n                    beforeopen: function beforeopen(node) {\n                        lastOpened = $(node);\n                    },\n\n                    /**\n                     * A node is selected.\n                     *\n                     * @param {HTMLElement} node - the opened node\n                     * @param {Object} tree - the tree instance\n                     *\n                     * @fires layout/tree#change.taotree\n                     * @fires layout/tree#select.taotree\n                     */\n                    onselect: function onselect(node, tree) {\n\n                        var $node           = $(node);\n                        var classActions = [];\n                        var nodeId          = $node.attr('id');\n                        var nodeUri         = $node.data('uri');\n                        var $parentNode     = tree.parent($node);\n                        var nodeContext     =  {\n                            rootClassUri:  options.rootClassUri,\n                            signature: $node.data('signature')\n                        };\n\n                        lastSelected = nodeId;\n\n                        //mark all unselected\n                        $('a.clicked', $container)\n                            .parent('li')\n                            .not('[id=\"' + nodeId + '\"]')\n                            .removeClass('clicked');\n\n                        //the more node makes you load more resources\n                        if($node.hasClass('more')){\n                            loadMore($node, $parentNode, tree);\n                            return false;\n                        }\n\n                        //exec the  selectClass action\n                        if ($node.hasClass('node-class')) {\n                            if ($node.hasClass('closed')) {\n                                tree.open_branch($node);\n                            }\n                            nodeContext.classUri = nodeId;\n                            nodeContext.classSignature = $node.data('signature');\n                            nodeContext.id = nodeUri;\n                            nodeContext.context = ['class', 'resource'];\n\n                            //Check if any class-level action is defined in the structures.xml file\n                            classActions = _.intersection(_.pluck(options.actions, 'context'), ['class', 'resource', '*']);\n                            if (classActions.length > 0) {\n                                generisRouter.pushNodeState(location.href, uri.decode(nodeContext.classUri));\n                                executePossibleAction(options.actions, nodeContext, ['delete']);\n                            }\n                        }\n\n                        //exec the  selectInstance action\n                        if ($node.hasClass('node-instance')){\n                            nodeContext.uri = nodeId;\n                            nodeContext.classUri = $parentNode.attr('id');\n                            nodeContext.classSignature = $parentNode.data('signature');\n                            nodeContext.id = nodeUri;\n                            nodeContext.context = ['instance', 'resource'];\n\n                            //the last selected node is stored\n                            store('taotree').then(function(treeStore){\n                                treeStore.setItem(context.section, nodeId).then(function(){\n                                    generisRouter.pushNodeState(location.href, uri.decode(nodeContext.uri));\n                                    executePossibleAction(options.actions, nodeContext, ['moveInstance', 'delete']);\n                                });\n                            });\n                        }\n\n                        /**\n                        * A node has been selected\n                        * @event layout/tree#select.taotree\n                        * @param {Object} [context] - the tree context (uri, classUri)\n                        */\n                        $container\n                            .trigger('select.taotree', [nodeContext])\n                            .trigger('change.taotree', [nodeContext]);\n\n                        return false;\n                    },\n\n                    //when a node is move by drag n'drop\n                    onmove: function onmove(node, refNode, type, tree, rollback) {\n                        if (!options.actions.moveInstance) {\n                            return false;\n                        }\n\n                        //do not move an instance into an instance...\n                        if ($(refNode).hasClass('node-instance') && type === 'inside') {\n                            $.tree.rollback(rollback);\n                            return false;\n                        }\n\n                        if (type === 'after' || type === 'before') {\n                            refNode = tree.parent(refNode);\n                        }\n\n                        if (!(refNode instanceof $) && !(refNode instanceof window.HTMLElement)) {\n                            $.tree.rollback(rollback);\n                            return false;\n                        }\n\n                        //set the rollback data\n                        setTreeState(_.merge($container.data('tree-state'), {rollback : rollback}));\n\n                        //execute the selectInstance action\n                        actionManager.exec(options.actions.moveInstance, {\n                            uri: $(node).data('uri'),\n                            destinationClassUri: $(refNode).data('uri'),\n                            signature: $(node).data('signature'),\n                            tree: node\n                        });\n\n                        $container.trigger('change.taotree');\n                    }\n                }\n            };\n\n            /**\n             * Set up the tree using the defined options\n             * @private\n             */\n            var setUpTree  = function setUpTree(){\n                return new Promise( function (resolve) {\n\n                    //bind events from the definition below\n                    _.forEach(events, function(callback, name){\n                        $container\n                            .off(name + '.taotree')\n                            .on(name + '.taotree', function(){\n                                callback.apply(this, Array.prototype.slice.call(arguments, 1));\n                            });\n                    });\n\n                    //forward some events\n                    actionManager.on('refresh', function(node){\n                        var params = node;\n                        if(node && node.uri){\n                            params = {\n                                loadNode : uri.encode(params.uri)\n                            };\n                        }\n\n                        if($container.is(':visible')){\n                            $container.trigger('refresh.taotree', [params]);\n                        }\n                    });\n\n                    // workaround to fix dublicate tree bindings on multiple page loads\n                    if (!$container.hasClass('tree')) {\n\n                        store('taotree').then(function(treeStore){\n                            treeStore.getItem(context.section).then(function(node){\n                                //create the tree\n                                setTreeState({ loadNode: options.loadNode });\n                                $container.tree(treeOptions);\n                                sectionManager.on('show.section', function (section) {\n                                    if (options.sectionId === section.id) {\n                                        $container.trigger('refresh.taotree');\n                                    }\n                                });\n                                generisRouter.on('urichange', function(nodeUri, sectionId) {\n                                    if (options.sectionId === sectionId) {\n                                        $container.trigger('refresh.taotree', [{loadNode : uri.encode(nodeUri)}]);\n                                    }\n                                });\n                            });\n                        });\n                    }\n                    $container.on('ready.taotree', function() {\n                        resolve();\n                    });\n                });\n            };\n\n            /**\n             * Set tree state\n             * @param treeState\n             */\n            function setTreeState(treeState) {\n                $container.data('tree-state', treeState);\n            }\n\n            /**\n             * Check if a node has access to a type of action regarding it's permissions\n             * @private\n             * @param {String} actionType - in selectClass, selectInstance, moveInstance and delete\n             * @param {Object} node       - the node data as recevied from the server\n             * @returns {Boolean} true if the action is allowed\n             */\n            function hasAccessTo(actionType, node){\n                var action = options.actions[actionType];\n                if(node && action && node.permissions && action.rights){\n                    return permissionsManager.isContextAllowed(action.rights, {\n                        uri : node.attributes['data-uri'],\n                        classUri : node.attributes['data-classUri'],\n                        id : node.attributes.id\n                    });\n                }\n                return true;\n            }\n\n            /**\n             * Check whether the nodes in a tree are selectable. If not, we add the <strong>private</strong> class.\n             * @private\n             * @param {Object} node - the tree node as recevied from the server\n             */\n            function computeSelectionAccess(node){\n\n                if(_.isArray(node)){\n                    _.forEach(node, computeSelectionAccess);\n                    return;\n                }\n                if(node.type && node.type !== nodeTypes.more){\n                    addClassToNode(node, getPermissionClass(node));\n                    if (!hasAccessTo('moveInstance', node)) {\n                        addClassToNode(node, 'node-undraggable');\n                    }\n                }\n                if(node.children){\n                    _.forEach(node.children, computeSelectionAccess);\n                }\n            }\n\n            /**\n             * Get the CSS class to apply to the node regarding the computed permissions\n             * @private\n             * @param {Object} node - the tree node\n             * @returns {String} the CSS class\n             */\n            function getPermissionClass(node){\n                var nodeId = node.attributes['data-uri'];\n\n                var rights = permissionsManager.getRights();\n                var count    = _.reduce(rights, function(acc, right){\n                    if(permissionsManager.hasPermission(nodeId, right)){\n                        acc++;\n                    }\n                    return acc;\n                }, 0);\n\n                if (rights.length === 0 || count === rights.length) {\n                    return 'permissions-full';\n                }\n                if(count === 0){\n                    return 'permissions-none';\n                }\n\n                return 'permissions-partial';\n            }\n\n            /**\n             * Add a title attribute to the nodes\n             * @private\n             * @param {Object} node - the tree node as recevied from the server\n             */\n            function addTitle(node){\n                if(_.isArray(node)){\n                    _.forEach(node, addTitle);\n                    return;\n                }\n                if(node.attributes && node.data){\n                    node.attributes.title = node.data;\n                }\n                if(node.children){\n                    _.forEach(node.children, addTitle);\n                }\n            }\n\n            function needMore(node){\n                if(_.isArray(node) && lastOpened && lastOpened.length && lastOpened.data('count') > pageRange){\n                    node.push(moreNode);\n                } else {\n                    if(node.count){\n                        node.attributes['data-count'] = node.count;\n\n                        if (node.children && node.count > node.children.length) {\n                            node.children.push(moreNode);\n                        }\n                    }\n                    if(node.children){\n                        _.forEach(node.children, needMore);\n                    }\n                    if(_.isArray(node)){\n                        _.forEach(node, needMore);\n                    }\n                }\n            }\n\n            function loadMore($node, $parentNode, tree){\n                var current     = $parentNode.children('ul').children('li.node-instance').length;\n                var count       = $parentNode.data('count');\n                var left        = count - current;\n                var params      = _.defaults({\n                    'classUri'      : $parentNode.attr('id'),\n                    'subclasses'    : 0,\n                    'offset'        : current,\n                    'limit'         : left < 0 ? pageRange : (left < pageRange ? left : pageRange)\n                }, serverParams);\n\n                $.ajax(tree.settings.data.opts.url, {\n                    type        : tree.settings.data.opts.method,\n                    dataType    : tree.settings.data.type,\n                    async       : tree.settings.data.async,\n                    data        : params\n                }).done(function(response){\n                    var treeData = getTreeData(response);\n                    if(treeData && _.isArray(treeData.children)){\n                        treeData = treeData.children;\n                    }\n                    if(_.isArray(treeData)){\n                        _.forEach(treeData, function(newNode){\n                            if(newNode.type === 'instance'){   //yes the server send also the class, even though I ask him gently...\n                                tree.create(newNode, $parentNode);\n                            }\n                        });\n                        tree.deselect_branch($node);\n                        tree.remove($node);\n                        if(left - treeData.length > 0){\n                            tree.create(moreNode, $parentNode);\n                        }\n                    }\n                });\n            }\n\n\n            /**\n            * Function executes first found allowed action for tree node.\n            * @param {object} actions - All tree actions\n            * @param {object} [context] - Node context\n            * @param {object} [context.permissions] - Node permissions\n            * @param {object} [context.context] - The context of the action: (class|instance|resource|*)\n            * @param {array} exclude - list of actions to be excluded.\n            * @returns {undefined}\n            */\n            function executePossibleAction(actions, nodeContext, exclude) {\n                var possibleActions;\n                if (!_.isArray(exclude)) {\n                    exclude = [];\n                }\n\n                possibleActions = _.filter(actions, function (action, name) {\n                    var possible = _.contains(nodeContext.context, action.context);\n                    return possible && !_.contains(exclude, name);\n                });\n                //execute the first allowed action\n                if(possibleActions.length > 0){\n                    actionManager.exec(possibleActions[0], nodeContext);\n                }\n            }\n\n            function addClassToNode(node, clazz){\n                if(node && node.attributes){\n\n                    node.attributes['class'] = node.attributes['class'] || '';\n\n                    if(node.attributes['class'].length) {\n                        node.attributes['class'] = node.attributes['class'] + ' ' + clazz;\n                    } else {\n                        node.attributes['class'] = clazz;\n                    }\n                }\n            }\n\n            /**\n             * Parse a response from a request to get the tree data\n             * and extract the permissions if given\n             * @param {Object} response - from a request\n             * @returns {Object} the tree data\n             */\n            function getTreeData(response){\n                var treeData = response.tree || response;\n                var currentRights;\n\n                if(response.permissions){\n                    currentRights = permissionsManager.getRights();\n\n                    if(response.permissions.supportedRights &&\n                        response.permissions.supportedRights.length &&\n                        currentRights.length === 0) {\n\n                        permissionsManager.setSupportedRights(response.permissions.supportedRights);\n\n                    }\n                    if(response.permissions.data){\n                        permissionsManager.addPermissions(response.permissions.data);\n                    }\n                }\n                return treeData;\n            }\n\n            /**\n             * @param {String} id\n             * @param {Object} tree\n             *\n             * @returns {Boolean} Whether or not the selection succeed\n             */\n            function selectNodeById(id, tree) {\n                var $node;\n\n                if (!id) {\n                    return false;\n                }\n\n                $node = $('#' + id, $container);\n\n                if(!$node.length || $node.hasClass('private')){\n                    return false;\n                }\n\n                tree.select_branch($node);\n\n                return true;\n            }\n\n            return setUpTree();\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 Open Assessment Technologies SA;\n */\n\n/**\n * Tree provider : resource-selector\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/tree/provider/resourceSelector',[\n    'lodash',\n    'i18n',\n    'core/promise',\n    'core/store',\n    'core/logger',\n    'layout/actions',\n    'layout/generisRouter',\n    'layout/permissions',\n    'provider/resources',\n    'ui/resource/selector'\n], function(_, __, Promise, store, loggerFactory, actionManager, generisRouter, permissionsManager, resourceProviderFactory, resourceSelectorFactory){\n    'use strict';\n\n    var logger = loggerFactory('layout/tree/provider/resourceSelector');\n\n    var resourceProvider = resourceProviderFactory();\n\n    /**\n     * The resource-selector tree provider\n     */\n    return {\n\n        /**\n         * Tree provider name\n         */\n        name : 'resource-selector',\n\n        /**\n         * Init is the tree provider entry point\n         * @param {jQueryElement} $container - that will contain the tree\n         * @param {Object} [options] - additional configuration options\n         * @param {String} [options.id] - the tree identifier\n         * @param {String} [options.url] - the endpoint to load data\n         * @param {String} [options.rootClassUri] - the URI of the root class\n         * @param {Object} [options.actions] - which actions to perform from the tree\n         * @param {String} [options.loadNode] - the URI of the node to select by default\n         * @param {String} [options.sectionId] - the section the selector belongs to\n         * @returns {Promise} resolves when the tree is rendered\n         */\n        init: function init($container, options){\n\n            return new Promise(function(resolve){\n\n                store('taotree').then(function(treeStore){\n\n                    return Promise.all([\n                        resourceProvider.getClasses(options.rootClassUri),\n                        resourceProvider.getClassProperties(options.rootClassUri),\n                        treeStore.getItem(options.id)\n                    ])\n                        .then(function(results) {\n                            var classes     = results[0];\n                            var filters     = results[1];\n                            var defaultNode = results[2];\n                            var preloadNode = typeof options.loadNode !== 'undefined';\n\n                            resourceSelectorFactory($container, {\n                                icon : options.icon || 'test',\n                                searchPlaceholder : __('Filter'),\n                                selectionMode: 'both',\n                                selectClass : true,\n                                classUri: options.rootClassUri,\n                                classes: classes,\n                                filters: filters\n                            })\n                                .on('init', function(){\n                                    actionManager.exec(options.actions.init, {\n                                        uri: options.rootClassUri\n                                    });\n                                })\n                                .on('render', function() {\n                                    var self = this;\n\n                                    actionManager.on('removeNodes', function(actionContext, nodes){\n\n                                        //make the component in loading state\n                                        //to prevent handling intermediate changes\n                                        self.setState('loading', true);\n\n                                        _.forEach(nodes, self.removeNode, self);\n                                        self.changeSelectionMode('single');\n\n                                        self.setState('loading', false);\n                                        self.selectDefaultNode(defaultNode);\n                                    });\n                                    actionManager.on('removeNode', function(actionContext, node){\n                                        self.removeNode(node);\n                                        self.selectDefaultNode(defaultNode);\n                                    });\n                                    actionManager.on('subClass instanciate duplicateNode', function(actionContext, node){\n                                        self\n                                            .after('update.add', function() {\n                                                self.off('update.add');\n                                                self.select(node);\n                                            })\n                                            .changeSelectionMode('single')\n                                            .query({classUri: node.classUri});\n                                    });\n                                    actionManager.on('copyTo moveTo', function(actionContext, node){\n                                        self.refresh(node || defaultNode);\n                                    });\n                                    actionManager.on('refresh', function(node){\n                                        self.refresh(node || defaultNode);\n                                    });\n\n                                    generisRouter.on('urichange', function(nodeUri, sectionId) {\n                                        if (options.sectionId === sectionId) {\n                                            self.refresh(nodeUri);\n                                        }\n                                    });\n\n                                    resolve();\n                                })\n                                .on('query', function(params) {\n                                    var self = this;\n\n                                    if(preloadNode){\n                                        params.selectedUri = options.loadNode;\n                                        preloadNode = false;\n                                    }\n\n                                    //ask the server the resources from the component query\n                                    resourceProvider.getResources(params, true)\n                                        .then(function(resources) {\n                                            self.update(resources, params);\n                                        })\n                                        .catch(function(err) {\n                                            logger.error(err);\n                                        });\n                                })\n                                .on('update.first', function(){\n\n                                    this.off('update.first');\n\n                                    //on the 1st update we select the default node\n                                    //or fallback on 1st instance, or even 1st class\n                                    this.selectDefaultNode(options.loadNode || defaultNode);\n                                })\n                                .on('selectionmodechange', function(mode) {\n                                    if (mode === 'single' && defaultNode) {\n                                        this.selectDefaultNode(defaultNode);\n                                    }\n                                })\n                                .on('change', function(selection) {\n                                    var self   = this;\n                                    var length = _.size(selection);\n                                    var getContext = function getContext(resource) {\n                                        return _.defaults(resource, {\n                                            id : resource.uri,\n                                            rootClassUri : self.classUri\n                                        });\n                                    };\n\n                                    //ignore changes while loading or modifying the selector\n                                    if(self.is('loading')){\n                                        return;\n                                    }\n\n                                    if(length === 1){\n                                        _.forEach(selection, function(resource) {\n                                            var selectedContext = getContext(resource);\n                                            actionManager.updateContext(selectedContext);\n\n                                            if(selectedContext.type === 'class'){\n                                                actionManager.exec(options.actions.selectClass, selectedContext);\n                                            }\n                                            if(selectedContext.type === 'instance'){\n                                                actionManager.exec(options.actions.selectInstance, selectedContext);\n                                            }\n\n                                            generisRouter.pushNodeState(location.href, resource.uri);\n\n                                            defaultNode = resource;\n                                            treeStore.setItem(options.id, defaultNode);\n                                        });\n                                    } else {\n                                        actionManager.updateContext( _.transform(selection, function(acc, resource){\n                                            acc.push(getContext(resource));\n                                            return acc;\n                                        }, []));\n                                    }\n                                })\n                                .on('error', function(err){\n                                    logger.error(err);\n                                });\n                        });\n                });\n            });\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 Open Assessment Technologies SA;\n */\n\n/**\n * Loads and register the different tree implementations\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/tree/loader',[\n    'module',\n    'core/providerRegistry',\n    'layout/tree/provider/jstree',\n    'layout/tree/provider/resourceSelector'\n], function(module, providerRegistry, jsTreeProvider, resourceSelectorProvider){\n    'use strict';\n\n    /**\n     * If not config is set, this is the default tree provider\n     */\n    var defaultProvider = 'jstree';\n\n    /**\n     * Contains all tree providers\n     */\n    var treeProviderRegistry = providerRegistry({});\n\n    /**\n     * Check whether a provider exists\n     * @param {String} providerName - the name of the provider\n     * @returns {Boolean} true if the provider is registered\n     */\n    var providerExists = function providerExists(providerName){\n        return providerName && treeProviderRegistry.getAvailableProviders().indexOf(providerName) !== -1;\n    };\n\n    //manually register the providers\n    treeProviderRegistry.registerProvider(jsTreeProvider.name, jsTreeProvider);\n    treeProviderRegistry.registerProvider(resourceSelectorProvider.name, resourceSelectorProvider);\n\n    /**\n     * Let's you load either the default tree provider or a specific one\n     * @param {String} [providerName] - the name of the provider\n     * @returns {treeProvider} the provider\n     */\n    return function loadTree(providerName){\n        var providerToLoad = defaultProvider;\n        var config = module.config();\n\n        if(providerExists(providerName)){\n            providerToLoad = providerName;\n        } else if (providerExists(config.treeProvider)){\n            providerToLoad = config.treeProvider;\n        }\n        return treeProviderRegistry.getProvider(providerToLoad);\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * @author Dieter Raber <dieter@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('layout/section-height',[\n    'jquery',\n    'lodash'\n], function ($, _) {\n\n    'use strict';\n\n\n    var $versionWarning = $('.version-warning:visible'),\n        $window = $(window),\n        $footer = $('body > footer');\n\n    /**\n     * Bar with the tree actions (providing room for at least two rows of buttons)\n     *\n     * @returns {number}\n     */\n    function getTreeActionIdealHeight() {\n        var $visibleActionBarBox = $('.tree-action-bar-box'),\n            $visibleActionBar    = $visibleActionBarBox.find('.tree-action-bar'),\n            $mainButtons         = $visibleActionBar.find('li'),\n            $visibleButtons      = $mainButtons.filter(':visible'),\n            // at least two rows\n            $requiredRows        = Math.max(Math.ceil($mainButtons.length/4), 2),\n            idealHeight;\n\n        if(!$visibleButtons.length) {\n            $visibleButtons = $('<li class=\"dummy\"><a/></li>');\n            $visibleActionBar.append($visibleButtons);\n        }\n\n        idealHeight = ($visibleButtons.outerHeight(true) * $requiredRows) +\n            parseInt($visibleActionBarBox.css('margin-bottom')) +\n            parseInt($visibleActionBarBox.css('margin-top'));\n\n        $visibleActionBarBox.find('.dummy').remove();\n\n        return idealHeight;\n    }\n\n\n    /**\n     * Compute the height of the navi- and content container\n     *\n     * @param $scope jQueryElement\n     * @returns {number}\n     */\n    function getContainerHeight($scope) {\n        var winHeight = $window.innerHeight(),\n            footerHeight = $footer.outerHeight(),\n            headerHeight = $('header.dark-bar').outerHeight() + ($versionWarning.length ? $versionWarning.outerHeight() : 0),\n            actionBarHeight = $scope.find('.content-container .action-bar').outerHeight(),\n            $tabs = $('.section-container > .tab-container:visible'),\n            tabHeight = $tabs.length ? $tabs.outerHeight() : 0;\n\n        return winHeight - headerHeight - footerHeight - actionBarHeight - tabHeight;\n    }\n\n\n    /**\n     * Resize section heights\n     * @private\n     * @param {jQueryElement} $scope - the section scope\n     */\n    function setHeights($scope) {\n        var containerHeight = getContainerHeight($scope),\n            $contentBlock = $scope.find('.content-block'),\n            $tree = $scope.find('.taotree');\n        var treeHeight;\n\n        if (!$tree.length) {\n            return;\n        }\n\n\n        $contentBlock.css( { height: containerHeight, maxHeight: containerHeight });\n        treeHeight = containerHeight - getTreeActionIdealHeight();\n        $tree.css({ maxHeight: treeHeight });\n\n        //bad hack, but the entire module is a joke, so it doesn't hurt that much\n        if($tree.data('type') === 'resource-selector'){\n            $tree.css({ height: treeHeight });\n        }\n    }\n\n    /**\n     * Helps you to manage the section heights\n     * @exports layout/section-height\n     */\n    return {\n\n        /**\n         * Initialize behaviour of section height\n         * @param {jQueryElement} $scope - the section scope\n         */\n        init: function ($scope) {\n\n\n            $window\n                .off('resize.sectionheight')\n                .on('resize.sectionheight', _.debounce(function () {\n                    setHeights($scope);\n                }, 50));\n\n            $versionWarning\n                .off('hiding.versionwarning')\n                .on('hiding.versionwarning', function () {\n                    $versionWarning = $('.version-warning:visible');\n                    setHeights($scope);\n                });\n\n            // Resizing the section can cause scroll bars to appear\n            // and hence the viewport might change. This in return could\n            // cause the <nav>s to nudge\n            $(window).trigger('resize.navheight');\n        },\n\n        /**\n         * Resize section heights\n         * @param {jQueryElement} $scope - the section scope\n         */\n        setHeights: setHeights\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 Open Assessment Technologies SA;\n */\n\n/**\n * Main controller for the backend\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('controller/main',[\n    'module',\n    'jquery',\n    'lodash',\n    'context',\n    'core/router',\n    'helpers',\n    'uiForm',\n    'util/url',\n    'core/logger',\n    'ui/feedback',\n    'layout/generisRouter',\n    'layout/section',\n    'layout/actions',\n    'layout/version-warning',\n    'layout/loading-bar',\n    'layout/nav',\n    'layout/search',\n    'layout/tree/loader',\n    'layout/section-height',\n], function(module, $, _, context, router, helpers, uiForm, urlUtil, loggerFactory, feedback, generisRouter, sections, actionManager,versionWarning, loadingBar, nav, search, treeLoader, sectionHeight){\n    'use strict';\n\n    const logger = loggerFactory('controller/main');\n\n    /**\n     * Loads and set up the given tree for a section, based on the tree provider\n     * @param {jQueryElement} $container - the tree container with accurate data-attr\n     * @param {Object} section - the section the tree belongs to\n     * @param {String} section.id - id of the section\n     * @param {String} [section.defaultUri] - the URI of the node to select by default\n     * @returns {Promise} that resolves once rendered\n     */\n    const sectionTree = function sectionTree($container, section) {\n\n        //get the tree actions\n        const treeActions  = _.reduce($container.data('actions'), (acc, id, key) => {\n            const action = actionManager.getBy(id);\n            if(action){\n                acc[key] = action;\n            }\n            return acc;\n        }, {});\n\n        const treeUrl = urlUtil.build([context.root_url, $container.data('url')]);\n\n        const treeType = $container.data('type');\n\n        //get the current tree based on the type attr, or fallback to jstree\n        const treeProvider = treeLoader(treeType);\n\n        if(!treeType){\n            //fill with the default value\n            $container.data('type', treeProvider.name);\n        }\n\n        return treeProvider.init($container, {\n            id           : $container.attr('id'),\n            url          : treeUrl,\n            rootClassUri : $container.data('rootnode'),\n            icon         : $container.data('icon'),\n            actions      : treeActions,\n            sectionId    : section.id,\n            loadNode     : section.defaultUri\n        });\n    };\n\n    /**\n     * Handle errors by displaying an entry in the logger\n     * and a message to the user\n     *\n     * @param {Error} err - the caught error\n     */\n    const handleError = function handleError(err) {\n        logger.error(err);\n        feedback().error(err);\n    };\n\n    /**\n     * This controller initialize all the layout components used by the backend : sections, actions, tree, loader, etc.\n     * @exports tao/controller/main\n     */\n    return {\n        start() {\n\n            const config = module.config();\n            const $doc = $(document);\n\n            versionWarning.init();\n            generisRouter.init();\n\n            //just before an ajax request\n            $doc.ajaxSend( () => loadingBar.start() );\n\n            //when an ajax request complete\n            $doc.ajaxComplete( () => loadingBar.stop() );\n\n            //navigation bindings\n            nav.init();\n\n            actionManager.on('error', handleError);\n\n            actionManager.on('contextchange', actionContext => {\n                // in case of multi selection, the main panel should be empty\n                if (_.isArray(actionContext) && actionContext.length !== 1) {\n                    sections.current().updateContentBlock('<div class=\"main-container flex-container-form-main\"></div>');\n                }\n            });\n\n            //initialize sections\n            sections.on('activate', section => {\n                window.scrollTo(0, 0);\n\n                // quick work around issue in IE11\n                // IE randomly thinks there is no id and throws an error\n                // I know it's not logical but with this 'fix' everything works fine\n                if (!section || !section.id) {\n                    return;\n                }\n\n                context.section = section.id;\n\n                //initialize actions\n                actionManager.init(section.panel);\n\n\n                //search component\n                search.init(section.id);\n\n                switch (section.type) {\n                    case 'tree':\n                        section.panel.addClass('content-panel');\n                        sectionHeight.init(section.panel);\n\n                        //set up the tree\n                        $('.taotree', section.panel).each(function() {\n                            const $treeElt = $(this);\n                            const $actionBar = $('.tree-action-bar-box', section.panel);\n\n                            sectionTree($treeElt, section)\n                                .then(() => {\n                                    $actionBar.addClass('active');\n                                    sectionHeight.setHeights(section.panel);\n                                })\n                                .catch(handleError);\n                        });\n\n                        $('.navi-container', section.panel).show();\n                        break;\n                    case 'content':\n\n                        //or load the content block\n                        sections.loadContentBlock();\n                        break;\n                }\n            })\n            .init();\n\n            //initialize legacy components\n            helpers.init();\n            uiForm.init();\n\n            //dispatch also extra registered controllers\n            if(config && _.isArray(config.extraRoutes) && config.extraRoutes.length){\n                router.dispatch(config.extraRoutes);\n            }\n        }\n    };\n});\n\n","/**  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *               \n */\n\n/**\n * Recovery password page controller\n * @author Aleh Hutnikau <hutnikau@1pt.com>\n */\ndefine('controller/passwordRecovery',[\n    'jquery',\n    'i18n',\n    'module',\n    'ui/feedback',\n    'layout/version-warning'\n], function ($, __, module, feedback,  versionWarning) {\n    'use strict';\n    var conf = module.config(),\n        feedbackType;\n\n    versionWarning.init();\n    if (conf.message) {\n        for (feedbackType in conf.message) {\n            if (conf.message[feedbackType]) {\n                feedback()[feedbackType](conf.message[feedbackType]);\n            }\n        }\n    }\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'Main': {\n            'actions' : {\n                'index' : 'controller/main',\n                'entry' : 'controller/entry',\n                'getSectionActions' : 'controller/main/actions',\n                'getSectionTrees' : 'controller/main/trees',\n                'login' : 'controller/login'\n            }\n        },\n        'PasswordRecovery': {\n            'actions' : {\n                'index' : 'controller/passwordRecovery'\n            },\n        },\n        'Lock': {\n            'actions' : {\n                'locked' : 'controller/Lock/locked'\n            }\n        },\n        'ExtensionsManager' : {\n            'actions' : {\n                'index' : 'controller/settings/extensionManager'\n            }\n        },\n        'Users' : {\n            'deps' : 'controller/users/disable-edit',\n            'actions' : {\n                'index' : 'controller/users/index',\n                'add'   : 'controller/users/add'\n            }\n        },\n        'Security' : {\n            'actions' : {\n                'index' : 'controller/security/cspHeaderForm'\n            }\n        },\n    };\n});\n\n","define('controller/security/cspHeaderForm',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'ui/feedback',\n    'ui/tooltip'\n],\nfunction($, _, __, feedback, tooltip) {\n    'use strict';\n\n\n    function initializeForm() {\n        var $form = $('form#cspHeader'),\n            $formSourceList = $form.find('#iframeSourceDomains').parent(),\n            $formRadioOptions = $form.find('input[name=iframeSourceOption]'),\n            $selectedRadio;\n\n        // manage radios & visibility of form sections:\n        $formSourceList.hide();\n\n        $selectedRadio = $form.find('input[name=iframeSourceOption]:checked');\n        if ($selectedRadio.val() === 'list') {\n            $formSourceList.show();\n        }\n\n        $formRadioOptions.on('click', function() {\n            var selectedValue = $(this).val();\n            $formSourceList.toggle(selectedValue === 'list');\n        });\n\n        // handle submit:\n        $form.on('submit', _submitForm);\n    }\n\n    function _submitForm(event) {\n        var $form = $('form#cspHeader');\n        event.preventDefault();\n\n        $.ajax({\n            url: $form.attr('action'),\n            method: 'POST',\n            success: function(data) {\n                $form.closest('.content-block').html(data);\n                setTimeout(_showFeedback, 250);\n            },\n            fail: function() {\n                feedback().error(__('Form data not saved.'));\n            }\n        });\n    }\n\n    function _showFeedback() {\n        // DOM content was probably renewed, so make sure we have a fresh reference:\n        var $form = $('form#cspHeader');\n        var $formTextArea = $form.find('#iframeSourceDomains');\n        var $formErrors = $form.find('.form-error');\n        var tooltipOptions;\n\n        // handle errors:\n        if ($formErrors.length > 0) {\n            tooltipOptions = {\n                trigger: 'click',\n                closeOnClickOutside: true,\n                placement: 'right'\n            };\n            tooltip.error($formTextArea, $formErrors.html(), tooltipOptions).show();\n            $formErrors.remove();\n        }\n        else  {\n            feedback().success(__('Saved.'));\n        }\n    }\n\n    return {\n        start : initializeForm\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013-2019 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * Extension manager controller\n */\ndefine('controller/settings/extensionManager',[\n    'jquery',\n    'i18n',\n    'util/url',\n    'ui/feedback',\n    'ui/modal'\n], function($, __, urlUtil, feedback){\n    'use strict';\n\n    var ext_installed = [];\n    var toInstall = [];\n    var indexCurrentToInstall = -1;\n    var percentByExt = 0;\n    var installError = 0;\n\n    function getDependencies(extension) {\n        var dependencies = [];\n        $('#' + extension + ' .dependencies li:not(.installed)').each(function() {\n            var ext = $(this).attr('rel');\n            var deps = getDependencies(ext);\n            deps.push(ext);\n            dependencies = dependencies.concat(deps);\n        });\n        return dependencies;\n    }\n\n    //Give an array with unique values\n    function getUnique(orig){\n        var a = [];\n        var i;\n        for (i = 0; i < orig.length; i++) {\n            if ($.inArray(orig[i], a) < 0) a.push(orig[i]);\n        }\n        return a;\n    }\n\n    function progressConsole(msg) {\n        $('#installProgress .console').append('<p>' + msg + '</p>');\n        $('#installProgress .console').prop({scrollTop: $('#installProgress .console').prop(\"scrollHeight\")});\n    }\n\n    function installNextExtension() {\n        var ext = toInstall[indexCurrentToInstall];\n        $('#installProgress p.status').text(__('Installing extension %s...').replace('%s', ext));\n        progressConsole(__('Installing extension %s...').replace('%s', ext));\n        $.ajax({\n            type: \"POST\",\n            url: urlUtil.route('install', 'ExtensionsManager', 'tao'),\n            data: 'id='+ext,\n            dataType: 'json',\n            success: function success(data) {\n\n                if (data.success) {\n                    progressConsole(__('> Extension %s succesfully installed.').replace('%s', ext));\n\n                    // state that the extension is install in remaining dependencies.\n                    $('li.ext-id.ext-' + ext).addClass('installed');\n\n                    $('tr#'+ext).slideUp('normal', function() {\n                        var $tr = $('<tr></tr>').appendTo($('#extensions-manager-container tbody')).hide();\n                        var $orig = $('tr#' + ext + ' td');\n                        $tr.append('<td class=\"ext-id bordered\">' + $($orig[0]).text() + '</td>');\n                        $tr.append('<td class=\"author\">' + $($orig[1]).text() + '</td>');\n                        $tr.append('<td class=\"version\">' + $($orig[2]).text() + '</td>');\n                        $tr.slideDown('normal', function() {\n                            $('tr#' + ext).remove();\n\n                            // table changed, restyle.\n                            styleTables();\n\n                            // If the available extensions table is empty,\n                            // just inform the user.\n                            if ($('#available-extensions-container table tbody tr').length === 0){\n                                noAvailableExtensions();\n                            }\n\n                            $('#installProgress .bar').animate({width:'+=' + percentByExt + '%'}, 1000, function() {\n                                //Next\n                                indexCurrentToInstall++;\n                                hasNextExtensionToInstall();\n                            });\n                        });\n                    });\n                } else {\n                    installError = 1;\n                    progressConsole('Installation of ' + ext + ' failed');\n                }\n                feedback().info(data.message);\n            }\n        });\n\n        if (installError) {\n            progressConsole(__('A fatal error occured during the installation process.'));\n        }\n    }\n\n    function postInstall(){\n        progressConsole(__('Post install processing'));\n        return $.ajax({\n            type: \"GET\",\n            url: urlUtil.route('postInstall', 'ExtensionsManager', 'tao')\n        });\n    }\n\n    function hasNextExtensionToInstall() {\n        if (indexCurrentToInstall >= toInstall.length) {\n            toInstall = [];\n            $('#installProgress .bar').animate({backgroundColor:'#bb6',width:'100%'}, 1000);\n\n            postInstall().done(function() {\n\n                $('#installProgress .bar').animate({backgroundColor:'#6b6'}, 1000);\n                $('#installProgress p.status').text(__('Installation done.'));\n                progressConsole(__('> Installation done.'));\n                progressConsole(__('... reloading page.'));\n\n                setTimeout(function(){\n                    window.location.reload(true);\n                }, 1000);\n            });\n        } else {\n            installNextExtension();\n        }\n    }\n\n    function styleTables(){\n        // Clean all to make this function able to \"restyle\" after\n        // data refresh.\n        $('#Extensions_manager table tr').removeClass('extensionOdd')\n        .removeClass('extensionEven');\n\n        $('#Extensions_manager table tr:nth-child(even)').addClass('extensionEven');\n        $('#Extensions_manager table tr:nth-child(odd)').addClass('extensionOdd');\n    }\n\n    function noAvailableExtensions(){\n        var $noAvailableExtElement = $('<div/>');\n        $noAvailableExtElement.attr('id', 'noExtensions')\n        .addClass('ui-state-highlight')\n        .text(__('No extensions available.'));\n\n        $('#available-extensions-container').empty().append($noAvailableExtElement);\n    }\n\n    return {\n        start : function start(){\n\n            // Table styling.\n            styleTables();\n\n            $('#installProgress').hide();\n\n            //Detect wich extension is already installed\n            $('#extensions-manager-container .ext-id').each(function() {\n                var ext = $(this).text();\n                ext_installed.push(ext);\n                $('.ext-id.ext-' + ext).addClass('installed');\n            });\n\n            $('#available-extensions-container tr input').click(function(event){\n                event.stopPropagation();\n            });\n\n            $('#available-extensions-container tr input:checkbox').click(function() {\n                var $installButton = $('#installButton');\n                if ($(this).parent().parent().parent().find('input:checkbox:checked').length > 0){\n                    $installButton.attr('disabled', false);\n                }\n                else{\n                    $installButton.attr('disabled', true);\n                }\n            });\n\n            $('#available-extensions-container #installButton').click(function(event) {\n                var $modalContainer = $('#installProgress');\n\n                event.preventDefault();\n\n                //Prepare the list of extension to install in the order of dependency\n                toInstall = [];\n                $('#available-extensions-container input:checked').each(function() {\n                    var ext = $(this).prop('name').split('_')[1];\n                    var deps = getDependencies(ext);\n                    if (deps.length) {\n                        toInstall = toInstall.concat(deps);\n                    }\n                    toInstall.push(ext);\n                });\n                toInstall = getUnique(toInstall);\n                if (!toInstall.length) {\n                    window.alert(__('Nothing to install !'));\n                    return false;\n                }\n                //Let's go\n                percentByExt = 100 / toInstall.length;\n\n                //Show the dialog with the result\n                $('.status', $modalContainer).text(__('%s extension(s) to install.').replace('%s', toInstall.length));\n                $('.bar', $modalContainer).width(0);\n                $('.console', $modalContainer).empty();\n\n                progressConsole(__('Do you wish to install the following extension(s):\\n%s?').replace('%s', toInstall.join(', ')));\n\n                $('[data-control=cancel]', $modalContainer).on('click', function(e){\n                    e.preventDefault();\n                    $modalContainer.modal('close');\n                });\n                $('[data-control=confirm]', $modalContainer).on('click', function(e){\n                    e.preventDefault();\n                    progressConsole(__('Preparing installation...'));\n                    $('.buttons', $modalContainer).remove();\n                    installError = 0;\n                    indexCurrentToInstall = 0;\n                    installNextExtension();\n                });\n\n                $modalContainer.modal({\n                    width : 400,\n                    height : 300,\n                    top : 150,\n                    disableEscape : true,\n                    disableClosing : true\n                });\n            });\n        }\n    };\n});\n\n","define('users',['jquery', 'i18n', 'context'], function($, __, context){\n\n    /**\n     * Enable you to check if the login contained in the field identified by id is unique\n     * An ajax request is sent to the url with the login and a JSON response <code>{\"available\": \"true\"}</code>\n     * @param id\n     * @param url\n     * @return void\n     */\n    function checkLogin(id, url){\n        var $login = $(\"input[id='\" + id + \"']\");\n        if($login.length > 0){\n            $login.blur(function(){\n                var elt = $(this);\n\n                // trim value\n                var trimmedValue = elt.val().replace(/^\\s+/g,'').replace(/\\s+$/g,'');\n                var value = elt.val();\n                $('input#http_2_www_0_tao_0_lu_1_Ontologies_1_generis_0_rdf_3_login ~ div.form-error').remove();\n                if(trimmedValue === ''){\n                    $('span.login-info').remove();\n                } else{\n                    $.postJson(url,\n                        { login: value },\n                        function(data){\n                            $('span.login-info').remove();\n                            if(data.available){\n                                    elt.after(\"<span class='login-info'><img src='\"+context.taobase_www+\"img/tick.png' /> \" + __('Login available') + \"</span>\");\n                            } else{\n                                    elt.after(\"<span class='login-info ui-state-error'><img src='\"+context.taobase_www+\"img/exclamation.png' class='icon' /> \" + __('This Login is already in use') + \"</span>\");\n                            }\n                        }\n                    );\n                }\n            });\n        }\n    }\n\n    return {\n        checkLogin : checkLogin\n    };\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('controller/users/add',['jquery', 'module', 'helpers', 'users'], function($, module, helpers, users) {\n    'use strict';\n       \n    \n    /**\n     * The user add controller\n     * @exports controller/users/add\n     */    \n    return {\n        start : function(){\n            var conf = module.config();\n            var url  = helpers._url('checkLogin', 'Users', 'tao');\n            users.checkLogin(conf.loginId, url);\n            \n            if(conf.exit === true){\n\n                setTimeout(function(){\n                    //TODO would be better to clean up the form and switch the section\n                    window.location = helpers._url('index', 'Main', 'tao', {structure: 'users', ext : 'tao', section : 'list_users'});\n                }, 1000);\n            }\n        }\n    };\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('controller/users/disable-edit',['layout/section'], function(section) {\n    'use strict';\n       \n    /**\n     * Ensure edit section is disabled\n     * @exports controller/users/disable-edit\n     */    \n    return {\n        start : function(){\n            section.get('edit_user').disable();\n        }\n    };\n});\n\n","/**\n * @author Jrme Bogaert <jerome@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('controller/users/index',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/url',\n    'layout/section',\n    'core/request',\n    'ui/feedback',\n    'ui/dialog/confirm',\n    'ui/datatable'\n], function ($, _, __, urlHelper, section, request, feedback, dialogConfirm) {\n    'use strict';\n\n    /**\n     * Make a request to the server for a token-protected user action\n     * @param {String} uri - the user uri\n     * @param {String} action\n     * @param {String} confirmMessage\n     */\n    var runUserAction = function runUserAction(uri, action, confirmMessage) {\n        var data = {\n            uri: uri\n        };\n\n        dialogConfirm(confirmMessage, function() {\n            request({\n                url: urlHelper.route(action, 'Users', 'tao'),\n                data: data,\n                method: 'POST'\n            })\n            .then(function(response) {\n                if (response.success) {\n                    feedback().success(response.message);\n                }\n                $('#user-list').datatable('refresh');\n            })\n            .catch(function(err) {\n                feedback().error(err);\n            });\n        });\n    };\n\n    /**\n     * Edit a user (shows the edit section)\n     * @param {String} uri - the user uri\n     */\n    var editUser = function editUser(uri) {\n        section\n            .get('edit_user')\n            .enable()\n            .loadContentBlock(urlHelper.route('edit', 'Users', 'tao'), {uri : uri})\n            .show();\n    };\n\n    /**\n     * Removes a user\n     * @param {String} uri - the user uri\n     * @param row\n     */\n    var removeUser = function removeUser(uri, row) {\n        runUserAction(uri, 'delete', __('Please confirm deletion of user %s', row.login));\n    };\n\n    /**\n     * Locks a user\n     * @param {String} uri - the user uri\n     * @param row\n     */\n    var lockUser = function lockUser(uri, row) {\n        runUserAction(uri, 'lock', __('Please confirm locking of account %s', row.login));\n    };\n\n    /**\n     * Unlocks blocked user\n     * @param {String} uri - the user uri\n     * @param row\n     */\n    var unlockUser = function unlockUser(uri, row) {\n        runUserAction(uri, 'unlock', __('Please confirm unlocking of account %s', row.login));\n    };\n\n    /**\n     * The user index controller\n     * @exports controller/users/index\n     */\n    return {\n        start : function(){\n            var $userList = $('#user-list');\n\n            section.on('show', function (section) {\n                if (section.id === 'list_users') {\n                    $userList.datatable('refresh');\n                }\n            });\n\n            var actions = {\n                edit: editUser,\n                remove: removeUser,\n                lock: lockUser,\n                unlock: unlockUser\n            };\n\n            // initialize the user manager component\n            $userList.on('load.datatable', function (e, dataset) {\n                _.forEach(dataset.data, function(row) {\n                    var lockBtn = '[data-item-identifier=\"' + row.id + '\"] button.lock';\n                    var unlockBtn = '[data-item-identifier=\"' + row.id + '\"] button.unlock';\n                    if (row.lockable) {\n                        $(row.locked ? lockBtn : unlockBtn, $userList).hide();\n                    } else {\n                        _.forEach([lockBtn, unlockBtn], function (btn) {\n                            $(btn, $userList).hide();\n                        });\n                    }\n                });\n            }).datatable({\n                url: urlHelper.route('data', 'Users', 'tao'),\n                paginationStrategyBottom: 'pages',\n                filter: true,\n                actions: actions,\n                model: [\n                    {\n                        id : 'login',\n                        label : __('Login'),\n                        sortable : true\n                    },{\n                        id : 'firstname',\n                        label : __('First Name'),\n                        sortable : true\n                    },{\n                        id : 'lastname',\n                        label : __('Last Name'),\n                        sortable : true\n                    },{\n                        id : 'email',\n                        label : __('Email'),\n                        sortable : true\n                    },{\n                        id : 'roles',\n                        label : __('Roles'),\n                        sortable : false\n                    },{\n                        id : 'dataLg',\n                        label : __('Data Language'),\n                        sortable : true,\n                        visible : $userList.data('user-data-lang-enabled')\n                    },{\n                        id: 'guiLg',\n                        label : __('Interface Language'),\n                        sortable : true\n                    }, {\n                        id: 'status',\n                        label: __('Account status'),\n                        sortable: true,\n                        transform: function (value) {\n                            var icon = value === 'enabled'\n                                ? 'result-ok'\n                                : 'lock';\n                            return '<span class=\"icon-' + icon + '\"></span> ' + value;\n                        }\n                    }\n                ]\n            });\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * Basic features checks :\n *  - js enabled\n *  - ES5 features\n *  - DOM and browser API\n *\n *\n * js check hides the 'js-check' box if there's JS and remove the 'no-js' class which hide the content.\n * feature check show the 'browser-check' box as soon as one of the check fails.\n *\n * Uses old school JS to ensure it runs on old old browers.\n */\n(function () {\n    'use strict';\n\n    var reqFeedback = document.getElementById('browser-check');\n\n    var tests = [{\n        name : 'ES5 Global JSON',\n        test : function (){\n            return 'JSON' in window && typeof JSON.parse === 'function' && typeof JSON.stringify === 'function';\n        }\n    }, {\n        name : 'ES5 Extension',\n        test : function (){\n            return typeof Function.prototype.bind === 'function' && typeof String.prototype.trim === 'function';\n        }\n    }, {\n        name : 'localstorage',\n        test : function (){\n            return 'localStorage' in window;\n        }\n    }, {\n        name : 'querySelector',\n        test : function (){\n            return 'querySelector' in window.document && 'querySelectorAll' in window.document;\n        }\n    }, {\n        name : 'file reader',\n        test : function (){\n            return 'File' in window && 'FileReader' in window;\n        }\n    }];\n    var testCounter = 0;\n\n    document.documentElement.className = document.documentElement.className.replace('no-js', '');\n\n    //if one of the test fail, we show the warning\n    if(reqFeedback){\n        while(testCounter < tests.length){\n            if(typeof tests[testCounter].test === 'function' && !tests[testCounter].test()){\n                reqFeedback.style.display = 'block';\n                reqFeedback.className = reqFeedback.className.replace('hidden', '');\n                document.documentElement.className = document.documentElement.className + ' no-js';\n                break;\n            }\n            testCounter++;\n        }\n    }\n}());\n\n\ndefine(\"layout/requirement-check\", function(){});\n\n","define('report',['jquery', 'context', 'i18n'], function($, context, __){\n    'use strict';\n\n    var reportModule = {\n\n        fold: function() {\n            var $content = $('.report > .feedback-nesting-0 > div');\n            var $top = $('.report > .feedback-nesting-0');\n\n            if ($content.css('display') === 'none') {\n                $content.css('display', 'block');\n                $top.css('background-color', 'transparent');\n                $top.css('border-color', 'transparent');\n\n                $('#fold > span.check-txt').text(__('Hide detailed report'));\n            }\n            else {\n                $content.css('display', 'none');\n                if ($top.hasClass('feedback-success')) {\n                    $top.css('border-color', '#3ea76f');\n                    $top.css('background-color', '#e6f4ed');\n                }\n                else if ($top.hasClass('feedback-warning')) {\n                    $top.css('border-color', '#dfbe7b');\n                    $top.css('background-color', '#fbf6ee');\n                }\n                else if ($top.hasClass('feedback-error')) {\n                    $top.css('border-color', '#c74155');\n                    $top.css('background-color', '#f8e7e9');\n                }\n                else {\n                    // info\n                    $top.css('border-color', '#3e7da7');\n                    $top.css('background-color', '#e6eef4');\n                }\n\n                $('#fold > span.check-txt').text(__('Show detailed report'));\n            }\n        }\n    }\n\n    return reportModule;\n});\n","define('serviceApi/PseudoStorage',[],function(){\n    \n    function PseudoStorage() {\n    }\n\n    PseudoStorage.prototype.get = function(callback){\n        if (typeof callback === 'function') {\n            callback(null);\n        }\n        return null;\n    };\n\n    PseudoStorage.prototype.set = function(state, callback){\n        if (typeof callback === \"function\") {\n            callback();\n        }\n    };\n\n    return PseudoStorage;\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\ndefine('serviceApi/ServiceApi',['jquery', 'util/urlParser'], function($, UrlParser){\n    'use strict';\n\n    /**\n     * @constructor\n     */\n    function ServiceApi(baseUrl, parameters, serviceCallId, stateStorage, userService, paused){\n        this.baseUrl = baseUrl;\n        this.parameters = parameters;\n        this.connected = false;\n\n        this.serviceCallId = serviceCallId;\n        this.state = stateStorage;\n        this.userService = userService;\n        this.hasBeenPaused = paused;\n    }\n\n    ServiceApi.SIG_SUCCESS = 0;\n    ServiceApi.SIG_ERROR = 1;\n\n    ServiceApi.prototype.loadInto = function(frame, connected){\n        var self = this;\n        var $frame = $(frame);\n        var callUrl = this.getCallUrl();\n        var isCORSAllowed = new UrlParser(callUrl).checkCORS();\n\n        $frame.on('load', function(e){\n             //if we are  in the same domain, we add a variable\n             //to the frame window, so the frame knows it can communicate\n             //with the parent\n            $(document).on('serviceready', function(){\n                self.connect(frame, function(){\n                    $(document).off('serviceready');\n                    if(typeof connected === 'function'){\n                        connected();\n                    }\n                });\n            });\n             if(isCORSAllowed === true){\n                 frame.contentWindow.__knownParent__ = true;\n             }\n         });\n\n        $frame.attr('src', callUrl);\n    };\n\n    ServiceApi.prototype.connect = function(frame, connected){\n        if(this.connected === false && frame.contentWindow){\n            //frame.contentWindow.serviceApi = this;\n            if (typeof(frame.contentWindow.onServiceApiReady) === \"function\") {\n                frame.contentWindow.onServiceApiReady(this);\n                this.connected = true;\n                if(typeof connected === 'function'){\n                    connected();\n                }\n            }\n        }\n    };\n\n    /**\n     * Get the service call URL\n     * @returns {String} the URI\n     */\n    ServiceApi.prototype.getCallUrl = function(){\n        var params = this.parameters || {};\n        params.serviceCallId = this.serviceCallId;\n        return this.baseUrl + '?' + $.param(params);\n    };\n\n    ServiceApi.prototype.getUserPropertyValues = function(property, callback){\n    \tthis.userService.get(property, callback);\n    };\n\n    //Context\n    ServiceApi.prototype.getServiceCallId = function(){\n        return this.serviceCallId;\n    };\n\n    //Context\n    ServiceApi.prototype.getState = function(){\n        return this.state.get();\n    };\n\n    ServiceApi.prototype.setState = function(state, callback){\n        return this.state.set(state, callback);\n    };\n\n    //Context\n    ServiceApi.prototype.getHasBeenPaused = function(){\n        return this.hasBeenPaused;\n    };\n\n    ServiceApi.prototype.setHasBeenPaused = function(paused){\n        this.hasBeenPaused = paused;\n    };\n\n    // Variables\n    ServiceApi.prototype.getParameter = function(identifier){\n        if (typeof(this.parameters[identifier]) !== \"undefined\") {\n            return this.parameters[identifier];\n        } else {\n            return null;\n        }\n    };\n\n    /**\n     * Sets a callback on the finish action\n     * @param {Function} callback\n     * @returns {ServiceApi}\n     */\n    ServiceApi.prototype.onFinish = function(callback) {\n        this.onFinishCallback = callback;\n        return this;\n    };\n\n    /**\n     * Sets a callback on the kill action\n     * @param {Function} callback\n     * @returns {ServiceApi}\n     */\n    ServiceApi.prototype.onKill = function(callback) {\n        this.onKillCallback = callback;\n        return this;\n    };\n\n    /**\n     * Sets a callback on the exit action\n     * @param {Function} callback\n     * @returns {ServiceApi}\n     */\n    ServiceApi.prototype.onExit = function(callback) {\n        this.onExitCallback = callback;\n        return this;\n    };\n\n    /**\n     * @param {Function} callback - Function called if no dedicated callback is found\n     */\n    ServiceApi.prototype.kill = function(callback) {\n    \tif (typeof this.onKillCallback === 'function') {\n    \t\tthis.onKillCallback(callback);\n    \t} else {\n    \t\tcallback(0);\n    \t}\n    };\n\n    /**\n     * Exits the flow\n     * @param {Function} callback - Function called if no dedicated callback is found\n     */\n    ServiceApi.prototype.exit = function(callback) {\n    \tif (typeof this.onExitCallback === 'function') {\n    \t\tthis.onExitCallback(callback);\n    \t} else {\n    \t\tcallback(0);\n    \t}\n    };\n\n    /**\n     * Finishes the flow\n     * @param valueArray - return parameters of the service.\n     */\n    ServiceApi.prototype.finish = function(valueArray) {\n        //return execution to service caller\n        if (typeof this.onFinishCallback === 'function') {\n                this.onFinishCallback(valueArray);\n        }\n    };\n\n    return ServiceApi;\n\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA ;\n */\ndefine('serviceApi/StateStorage',['jquery'], function($){\n    'use strict';\n    \n    function StateStorage(state, submitUrl) {\n        this.state = state;\n        this.submitUrl = submitUrl;\n    }\n\n    StateStorage.prototype.get = function(callback){\n        if (typeof callback === 'function') {\n                callback(this.state);\n        }\n        return this.state;\n    };\n\n    StateStorage.prototype.set = function(state, callback){\n\n        if (state === this.state) {\n            if (typeof callback === \"function\") {\n                    callback();\n            }\n        } else {\n            this.state = state;\n            $.ajax({\n                url : this.submitUrl,\n                data \t\t: {\n                    'state' : state\n                },\n                type        : 'post',\n                dataType\t: 'json',\n                success     : typeof callback === \"function\" ? callback : null\n            });\n        }\n    };\n\n    return StateStorage;\n});\n","define('serviceApi/UserInfoService',['jquery'], function($){\n    \n    function UserInfoService(requestUrl, data) {\n        this.data = data;\n        this.requestUrl = requestUrl;\n    }\n\n    UserInfoService.prototype.get = function(property, callback){\n        if (this.data.hasOwnProperty(property)) {\n            if (typeof callback === \"function\") {\n                    callback(this.data[property]);\n            }\n        } else {\n            $.ajax({\n                url : this.requestUrl,\n                data \t\t: {\n                    'property' : property\n                },\n                type        : 'post',\n                dataType\t: 'json',\n                success     : (function(service, callback) {return function(r) {\n            \t\tfor (key in r.data) {\n            \t\t\tservice.data[key] = r.data[key];\n            \t\t}\n                    if (typeof callback === \"function\") {\n                        callback(service.data[property]);\n                    }\n\n                }})(this, callback)\n                /*\t\n            \tfunction(r){\n                    if(r.success){\n                    \tconsole.log(this.data);\n                    \tthis.data[property] = r.values;\n                    \t//console.log(this.data);\n\t                    if (typeof callback === \"function\") {\n\t                        callback(this.data[property]);\n\t                    }\n                    }\n                }\n                */\n                \n                \n            });\n        }\n    };\n\n    return UserInfoService;\n});\n","/**\n * Mother class of Generis Trees\n *\n * @require jquery >= 1.4.2 [http://jquery.com/]\n * @require jstree = 0.9.9a2 [http://jstree.com/]\n *\n * @author Jehan Bihini\n * @deprecated use layout/tree instead\n */\ndefine('generis.tree',['jquery', 'i18n', 'class'], function($, __, Class) {\n\tvar GenerisTreeClass = Class.extend({\n\t\t/**\n\t\t * Constructor\n\t\t * @param {String} selector the jquery selector of the tree container\n\t\t * @param {String} dataUrl the url to call, it must provide the json data to populate the tree\n\t\t * @param {Object} options\n\t\t * @param {Object} treeOptions\n\t\t */\n\t\tinit: function(selector, dataUrl, options, treeOptions) {\n\t\t\tvar self = this;\n\n\t\t\tthis.STATE_BROWSING = 0;\n\t\t\tthis.STATE_FILTERING = 1;\n\n\t\t\tthis.selector = selector;\t        //jsquery selector of the tree\n\t\t\tthis.options = options;\t\t        //options\n\t\t\tthis.dataUrl = dataUrl;\t\t        //Url used to get tree data\n\t\t\tthis.metaClasses = [];\t  //Store meta data of opened classes\n\t\t\tthis.lastOpened = null;\t\t        //Keep a reference of the last opened node\n\t\t\tthis.state = this.STATE_BROWSING; //Generis tree class state, by default browsing\n\n\t\t\t//Paginate the tree or not\n\t\t\tthis.paginate = typeof options.paginate !== 'undefined' ? options.paginate : 0;\n\t\t\t//Options to pass to the server\n\t\t\tthis.serverParameters = (typeof options.serverParameters !== \"undefined\") ? options.serverParameters : new Array ();\n\t\t\t//Default server parameters\n\t\t\tthis.defaultServerParameters = {\n\t\t\t\thideInstances:  this.options.hideInstances | false,\n\t\t\t\tfilter: \t\t$(\"#filter-content-\" + options.actionId).val(),\n\t\t\t\toffset:\t\t\t0,\n\t\t\t\tlimit:\t\t\tthis.options.paginate\n\t\t\t};\n\n\t\t\tthis.treeOptions = {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"json\",\n\t\t\t\t\tasync : true,\n\t\t\t\t\topts: {\n\t\t\t\t\t\tmethod : \"POST\",\n\t\t\t\t\t\turl: this.dataUrl\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttypes: {\n\t\t\t\t\t\"default\" : {\n\t\t\t\t\t\trenameable\t: false,\n\t\t\t\t\t\tdeletable\t: true,\n\t\t\t\t\t\tcreatable\t: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcallback: {\n\t\t\t\t\tbeforeopen: function(NODE, TREE_OBJ) {\n\t\t\t\t\t\tself.lastOpened = NODE;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t    $.extend(true, this.treeOptions, treeOptions);\n\n\t\t\t// workaround to fix dublicate tree bindings on multiple page loads\n\t\t\tvar classes = $(selector).attr('class');\n\t\t\tif (typeof classes != 'string' || classes.match('tree') == null) {\n\t\t\t\t$(selector).tree(this.treeOptions);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Create meta from class node\n\t\t * @private\n\t\t */\n\t\tcreateMeta: function(meta) {\n\t\t\tthis.metaClasses[meta.id] = {\n\t\t\t\tdisplayed: meta.displayed ? meta.displayed : 0 // Total of elements displayed\n\t\t\t\t, count: meta.count ? meta.count : 0           // Total of elements in the class\n\t\t\t\t, position: meta.position ? meta.position : 0\t // Position of the last element displayed\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Extract meta data from received data\n\t\t */\n\t\textractMeta: function(DATA) {\n\t\t\tvar nodes = new Array();\n\t\t\tvar nodeId = null;\n\n\t\t\tif (!(DATA instanceof Array)) {\n\t\t\t\t//An object is received\n\t\t\t\tnodeId = DATA.attributes.id;\n\t\t\t\tif (typeof DATA.children != 'undefined') {\n\t\t\t\t\tnodes = DATA.children;\n\t\t\t\t}\n\t\t\t\tthis.createMeta({id:DATA.attributes.id, count:DATA.count});\n\t\t\t} else {\n\t\t\t\t//An array of nodes is received\n\t\t\t\t// Get the last opened node\n\t\t\t\tif (this.lastOpened && this.state != this.STATE_FILTERING) {\n\t\t\t\t\tnodeId = this.lastOpened.id;\n\t\t\t\t} else {\n\t\t\t\t\tnodeId = \"DEFAULT_ROOT\";\n\t\t\t\t\tthis.createMeta({id:nodeId, count:0});\n\t\t\t\t}\n\t\t\t\tnodes = DATA;\n\t\t\t}\n\n\t\t\t//Extract meta from children\n\t\t\tif (nodes.length !== 0) {\n\t\t\t\t//Number of classes found\n\t\t\t\tvar countClass =0;\n\t\t\t\tfor (var i=0; i < nodes.length; i++) {\n\t\t\t\t\t// if the children is a class, create meta for this class\n\t\t\t\t\tif (nodes[i].type == 'class') {\n\t\t\t\t\t\tthis.extractMeta (nodes[i]);\n\t\t\t\t\t\tcountClass++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar countInstances = nodes.length - countClass;\n\t\t\t\tthis.setMeta(nodeId, 'position', countInstances); // Position of the last element displayed\n\t\t\t\tthis.setMeta(nodeId, 'displayed',countInstances); // Total of elements displayed\n\n\t\t\t\tif (!(DATA instanceof Array) && DATA.state && DATA.state != 'closed') {\n\t\t\t\t\tif (this.getMeta(nodeId, 'displayed') < this.getMeta(nodeId, 'count')) {\n\t\t\t\t\t\tnodes.push(this.getPaginateActionNodes());\n\t\t\t\t\t}\n\t\t\t\t} else if ((DATA instanceof Array) && this.getMeta(nodeId, 'displayed') < this.getMeta(nodeId, 'count')) {\n\t\t\t\t\tnodes.push(this.getPaginateActionNodes());\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Set a server parameter\n\t\t * @param {string} key\n\t\t * @param {string} value\n\t\t * @param {boolean} reload Reload the tree after parameter updated\n\t\t */\n\t\tsetServerParameter: function(key, value, reload) {\n\t\t\tthis.serverParameters[key] = value;\n\t\t\tif (typeof(reload)!='undefined' && reload){\n\t\t\t\tthis.isRefreshing = true;\n\t\t\t\tthis.getTree().refresh();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @return {Object} the tree instance\n\t\t */\n\t\tgetTree: function() {\n\t\t\treturn $.tree.reference(this.selector);\n\t\t},\n\n\t\t/**\n\t\t * Get node's meta data\n\t\t */\n\t\tgetMeta: function(classId, metaName, value) {\n\t\t\treturn this.metaClasses[classId][metaName];\n\t\t},\n\n\t\t/**\n\t\t * Set node's meta data\n\t\t */\n\t\tsetMeta: function(classId, metaName, value) {\n\t\t\tthis.metaClasses[classId][metaName] = value;\n\t\t},\n\n\t\t/**\n\t\t * Get paginate nodes\n\t\t * @return {array}\n\t\t */\n\t\tgetPaginateActionNodes: function() {\n\t\t\treturnValue = [{\n\t\t\t\t'data' : __('all')\n\t\t\t\t\t, 'attributes' : { 'class':'paginate paginate-all' }\n\t\t\t\t},{\n\t\t\t\t\t'data' : this.paginate+__(' next')\n\t\t\t\t\t, 'attributes' : { 'class':'paginate paginate-more' }\n\t\t\t\t}];\n\t\t\treturn returnValue;\n\t\t},\n\n\t\t/**\n\t\t * Show paginate options\n\t\t * @param NODE\n\t\t * @param TREE_OBJ\n\t\t * @private\n\t\t */\n\t\tshowPaginate: function(NODE, TREE_OBJ) {\n\t\t\tvar DATA = this.getPaginateActionNodes();\n\t\t\tfor (var i = 0; i < DATA.length; i++) {\n\t\t\t\tTREE_OBJ.create(DATA[i], TREE_OBJ.get_node(NODE[0]));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Hide pagination\n\t\t * @param {string} nodeId\n\t\t */\n\t\thidePaginate: function hidePaginate(nodeId) {\n\t\t\t$('#' + nodeId + ' > ul > li.paginate', $(this.selector)).each(function(){\n\t\t\t\t$(this).remove();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Refresh pagination, hide and show if required\n\t\t * @param NODE\n\t\t * @param TREE_OBJ\n\t\t * @private\n\t\t */\n\t\trefreshPaginate: function(NODE, TREE_OBJ) {\n\t\t\tvar nodeId = $(NODE)[0].id;\n\t\t\tthis.hidePaginate (nodeId);\n\t\t\tif (this.getMeta(nodeId, \"displayed\") < this.getMeta(nodeId, \"count\")) {\n\t\t\t\tthis.showPaginate(NODE, TREE_OBJ);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get the Class URI from the tree\n\t\t */\n\t\tgetClassUri: function(NODE) {\n\t\t\tvar parents = $(NODE).parents('li');\n\t\t\tvar classUri = null;\n\t\t\tif (parents.length == 0) classUri = $(NODE).prop('id');\n\t\t\telse classUri = $(parents[0]).prop('id');\n\t\t\treturn classUri;\n\t\t},\n\n\t\tcallGetSectionActions: function(NODE, TREE_OBJ) {\n\t\t\tvar uri = undefined;\n\t\t\tvar classUri = undefined;\n\n\t\t\tif (NODE != undefined) {\n\t\t\t\tif ($(NODE).hasClass('node-class')) {\n\t\t\t\t\tclassUri = $(NODE).prop('id');\n\t\t\t\t} else {\n\t\t\t\t\turi = $(NODE).prop('id');\n\t\t\t\t\tclassUri = this.getClassUri(NODE);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\treturn GenerisTreeClass;\n});\n\n","/**\n * GenerisTreeSelectClass is an easy to use container for the checkbox tree widget,\n * it provides the common behavior for a selectable Class/Instance Rdf resource tree\n *\n * @example new GenerisTreeClass('#tree-container', 'myData.php', {});\n * @see GenerisTreeClass.defaultOptions for options example\n *\n * @require jquery >= 1.3.2 [http://jquery.com/]\n * @require jstree = 0.9.9 [http://jstree.com/]\n *\n * @author Bertrand Chevrier, <bertrand.chevrier@tudor.lu>\n * @author Aliaksandr Katovich, <aliaksandr@taotesting.com>\n * @author Jehan Bihin (class)\n */\n\ndefine('generis.tree.select',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'context',\n    'generis.tree',\n    'helpers',\n    'ui/feedback',\n    'jquery.tree',\n    'lib/jsTree/plugins/jquery.tree.checkbox'\n], function($, _, __, context, GenerisTreeClass, helpers, feedback) {\n    var GenerisTreeSelectClass = GenerisTreeClass.extend({\n        /**\n         * Constructor\n         * @param {String} selector the jquery selector of the tree container\n         * @param {String} dataUrl the url to call, it must provide the json data to populate the tree\n         * @param {Object} options\n         */\n        init: function(selector, dataUrl, options) {\n            this.loadedData = null;\n            this.checkedNodes = typeof options.checkedNodes !== 'undefined' ? options.checkedNodes.slice(0) : [];\n            this.hiddenNodes = typeof options.hiddenNodes !== 'undefined' ? options.hiddenNodes.slice(0) : [];\n            if (options.callback && options.callback.checkPaginate) {\n                this.checkPaginate = options.callback.checkPaginate;\n            }\n            this.checkResourcePermissions =\n                typeof options.checkResourcePermissions !== 'undefined' ? options.checkResourcePermissions : false;\n            var instance = this;\n\n            /**\n             * Display priority DISPLAY_SELECTED.\n             * Display in priority the previously selected instances ..\n             */\n            this.DISPLAY_SELECTED = 1;\n\n            var treeOptions = {\n                types: {\n                    default: {\n                        draggable: false\n                    }\n                },\n                ui: {\n                    theme_name: 'checkbox',\n                    theme_path: context.taobase_www + 'js/lib/jsTree/themes/css/style.css'\n                },\n                callback: {\n                    //before check\n                    beforecheck: function(NODE, TREE_OBJ) {\n                        var nodeId = $(NODE).prop('id');\n                        if (instance.isRefreshing) {\n                            if ($.inArray(nodeId, instance.checkedNodes) === -1) {\n                                return false;\n                            }\n                        }\n\n                        if (NODE.hasClass('node-class')) {\n                            if (instance.getMeta(nodeId, 'displayed') !== instance.getMeta(nodeId, 'count')) {\n                                instance.paginateInstances(NODE, TREE_OBJ, { limit: 0, checkedNodes: '*' });\n                                return false;\n                            }\n                        }\n                        return true;\n                    },\n                    //before check\n                    beforeuncheck: function(NODE, TREE_OBJ) {\n                        var nodeId = $(NODE).prop('id');\n                        var indice = $.inArray(nodeId, instance.checkedNodes);\n\n                        if (!$(NODE).hasClass('node-class') && indice > -1) {\n                            instance.checkedNodes.splice(indice, 1);\n                        }\n\n                        return true;\n                    },\n                    //Before receive data from server, return the POST parameters\n                    beforedata: function(NODE, TREE_OBJ) {\n                        var returnValue = instance.defaultServerParameters;\n                        //If a NODE is given, send its identifier to the server\n                        if (NODE) {\n                            returnValue['classUri'] = $(NODE).prop('id');\n                        }\n                        //Augment with the serverParameters\n                        for (var key in instance.serverParameters) {\n                            if (instance.serverParameters[key] !== null) {\n                                returnValue[key] = instance.serverParameters[key];\n                            }\n                        }\n                        return returnValue;\n                    },\n                    //\n                    onopen: function(NODE, TREE_OBJ) {\n                        if (instance.checkedNodes) {\n                            instance.check(instance.checkedNodes);\n                        }\n                        if (instance.options.onOpenCallback) {\n                            instance.options.onOpenCallback(TREE_OBJ);\n                        }\n                    },\n                    /**\n                     * Triggered actions when data was loaded\n                     * @param {Object} TREE_OBJ - the reference to the tree\n                     */\n                    onload: function(TREE_OBJ) {\n                        instance.check(instance.checkedNodes);\n\n                        if (instance.options.loadCallback) {\n                            instance.options.loadCallback(TREE_OBJ);\n                        }\n\n                        instance.isRefreshing = false;\n                    },\n                    onchange: function(NODE, TREE_OBJ) {\n                        if (instance.options.onChangeCallback && !instance.isRefreshing) {\n                            instance.options.onChangeCallback(NODE, TREE_OBJ);\n                        }\n                    },\n                    //when a node is selected\n                    onselect: function(NODE, TREE_OBJ) {\n                        var servOptions = {};\n                        var $NODE = $(NODE);\n                        var $nodeParent = $NODE.parent().parent();\n\n                        if (instance.serverParameters.hasOwnProperty('order')) {\n                            servOptions.order = instance.serverParameters.order;\n                        }\n                        if (instance.serverParameters.hasOwnProperty('orderdir')) {\n                            servOptions.orderdir = instance.serverParameters.orderdir;\n                        }\n                        if ($NODE.hasClass('paginate-more')) {\n                            instance.paginateInstances($nodeParent, TREE_OBJ, servOptions);\n                            return;\n                        }\n                        if ($NODE.hasClass('paginate-all')) {\n                            var parentNodeId = $nodeParent.prop('id');\n                            servOptions.limit =\n                                instance.getMeta(parentNodeId, 'count') - instance.getMeta(parentNodeId, 'displayed');\n                            instance.paginateInstances($nodeParent, TREE_OBJ, servOptions);\n                            return;\n                        }\n                        return true;\n                    },\n                    ondata: function(DATA, TREE_OBJ) {\n                        if (instance.checkResourcePermissions && DATA.permissions) {\n                            DATA = instance.convertDataWithPermissions(DATA);\n                        }\n\n                        //automatically open the children of the received node\n                        if (DATA.children) {\n                            DATA.state = 'open';\n                        }\n\n                        //saving response data\n                        instance.loadedData = DATA;\n\n                        //extract meta data from children\n                        instance.extractMeta(DATA);\n\n                        //remove hidden nodes from the data\n                        instance.removeHiddenNodes(DATA.children || DATA);\n\n                        return DATA;\n                    }\n                },\n                plugins: {\n                    checkbox: { three_state: true }\n                }\n            };\n\n            //Add server parameters to the treeOptions variable\n            for (var i in this.serverParameters) {\n                treeOptions.data.opts[i] = this.serverParameters[i];\n            }\n\n            //create the tree\n            this._super(selector, dataUrl, options, treeOptions);\n\n            $('#saver-action-' + this.options.actionId).click({ instance: this }, function(e) {\n                e.data.instance.saveData();\n            });\n        },\n        /**\n         * converts and filter raw data to common format to use it with jquery.tree.js component\n         * @returns {Array} - list of tree nodes to form a checkbox list from it\n         */\n        convertDataWithPermissions: function convertDataWithPermissions(rawData) {\n            var converted = rawData;\n            var children;\n            var filteredChildren;\n            var permissions = converted.permissions;\n\n            if (converted.tree.children) {\n                children = converted.tree.children;\n            } else {\n                children = converted.tree;\n            }\n            //checking all the permissions recursively to check if inner classes/instances should be hidden\n            filteredChildren = this.checkPermissionsRecursively(children, permissions);\n\n            //setting filtered children back\n            if (converted.tree.children) {\n                converted.tree.children = filteredChildren;\n            } else {\n                converted.tree = filteredChildren;\n            }\n            return converted.tree;\n        },\n\n        /**\n         * Check permissions (if applicable) on the tree members\n         * @param {Array} children list of nodes\n         * @param {Array} permissions list of permissions returned from backend to check against\n         * @returns {Array}\n         */\n        checkPermissionsRecursively: function checkPermissionsRecursively(children, permissions) {\n            var filteredChildren = [];\n            var recursiveCheck = [];\n\n            _.each(children, function(dataObj) {\n                var key = dataObj.attributes['data-uri'];\n\n                if (dataObj.children && dataObj.children.length > 0) {\n                    recursiveCheck = checkPermissionsRecursively(dataObj.children, permissions);\n                    if (permissions.data[key] && permissions.data[key].indexOf('READ') !== -1) {\n                        dataObj.children = recursiveCheck;\n                        filteredChildren.push(dataObj);\n                    }\n                } else {\n                    if (permissions.data[key] && permissions.data[key].indexOf('READ') !== -1) {\n                        filteredChildren.push(dataObj);\n                    }\n                }\n            });\n\n            return filteredChildren;\n        },\n\n        /**\n         * Remove configured hidden nodes from the DATA\n         * @param {Array} nodes\n         */\n        removeHiddenNodes: function removeHiddenNodes(nodes) {\n            var self = this;\n            var hiddenNodes = this.hiddenNodes;\n\n            if (_.isArray(nodes) && hiddenNodes && _.isArray(hiddenNodes)) {\n                _.remove(nodes, function(node) {\n                    if (node.type === 'instance') {\n                        return _.indexOf(hiddenNodes, node.attributes['data-uri']) >= 0;\n                    } else if (node.type === 'class' && node.children) {\n                        self.removeHiddenNodes(node.children);\n                    }\n                });\n            }\n        },\n\n        trace: function() {\n            /*console.log('TRACE '+\n\t\t\t\targuments.callee.caller\n\t\t\t\t.arguments.callee.caller\n\t\t\t\t.arguments.callee.caller\n\t\t\t\t.arguments.callee.caller\n\t\t\t);*/\n        },\n\n        /**\n         * Paginate function, display more instances\n         */\n        paginateInstances: function(NODE, TREE_OBJ, pOptions, callback) {\n            var nodeId = NODE[0].id;\n            var instancesLeft = this.getMeta(nodeId, 'count') - this.getMeta(nodeId, 'displayed');\n            var options = {\n                classUri: nodeId,\n                subclasses: 0,\n                offset: this.getMeta(nodeId, 'position'),\n                limit: instancesLeft < this.paginate ? instancesLeft : this.paginate\n            };\n            options = $.extend(options, pOptions);\n\n            $.post(\n                this.dataUrl,\n                options,\n                (function(instance) {\n                    return function(DATA) {\n                        var countClass = 0;\n                        var i = 0;\n\n                        if (instance.checkResourcePermissions) {\n                            DATA = instance.convertDataWithPermissions(DATA);\n                        }\n                        //Hide paginate options\n                        instance.hidePaginate(nodeId);\n                        //Display incoming nodes\n                        for (i; i < DATA.length; i++) {\n                            DATA[i].attributes['class'] =\n                                instance.options.instanceClass + ' node-instance node-draggable';\n                            if (!$('#' + DATA[i].attributes['id'], $(TREE_OBJ.container)).length)\n                                TREE_OBJ.create(DATA[i], TREE_OBJ.get_node(NODE[0]));\n                            // If the check all options. Add the incoming nodes to the list of node to check\n                            if (options.checkedNodes === '*') {\n                                instance.checkedNodes.push(DATA[i].attributes.id);\n                            }\n                            countClass += DATA[i].type === 'class';\n                        }\n\n                        // Update meta data\n                        instance.setMeta(\n                            nodeId,\n                            'displayed',\n                            instance.getMeta(nodeId, 'displayed') + DATA.length - countClass\n                        );\n                        instance.setMeta(\n                            nodeId,\n                            'position',\n                            instance.getMeta(nodeId, 'position') + DATA.length - countClass\n                        );\n\n                        //refresh pagination options\n                        instance.refreshPaginate(NODE, TREE_OBJ);\n\n                        //If options checked nodes\n                        if (options.checkedNodes) {\n                            // If options check all, check not checked nodes\n                            if (options.checkedNodes === '*') {\n                                $(NODE)\n                                    .find('ul:first')\n                                    .children()\n                                    .each(function() {\n                                        var $this = $(this);\n\n                                        if ($this.hasClass('node-instance')) {\n                                            $this.find('a:not(.checked, .undetermined)').each(function() {\n                                                instance.checkedNodes.push($this.parent().prop('id'));\n                                            });\n                                        }\n                                    });\n                            } else {\n                                instance.checkedNodes = options.checkedNodes;\n                            }\n                        }\n\n                        instance.check(instance.checkedNodes);\n\n                        //Execute callback;\n                        if (instance.options.onChangeCallback) {\n                            instance.options.onChangeCallback();\n                        }\n\n                        if (callback) {\n                            callback(NODE, TREE_OBJ);\n                        }\n                        if (instance.checkPaginate) {\n                            instance.checkPaginate(NODE, TREE_OBJ);\n                        }\n                    };\n                })(this),\n                'json'\n            );\n        },\n\n        /**\n         * Check the tree instances\n         * @param {Array} elements the list of ids of instances to check\n         */\n        check: function(elements) {\n            var self = this;\n\n            $.each(elements, function(i, elt) {\n                if (elt != null) {\n                    var NODE = $(self.selector).find(\"li[id='\" + elt + \"']\");\n                    if (NODE.length > 0) {\n                        if ($(NODE).hasClass('node-instance')) {\n                            $.tree.plugins.checkbox.check(NODE);\n                        }\n                    }\n                }\n            });\n        },\n\n        /**\n         * Get the checked nodes\n         * @return {array}\n         */\n        getChecked: function() {\n            var unchecked = [];\n            $.each($.tree.plugins.checkbox.get_unchecked(this.getTree()), function(i, NODE) {\n                if ($(NODE).hasClass('node-instance')) {\n                    unchecked.push($(NODE).prop('id'));\n                }\n            });\n            var returnValue = $.grep(this.checkedNodes, function(value) {\n                return unchecked.indexOf(value) == -1;\n            });\n\n            $.each($.tree.plugins.checkbox.get_checked(this.getTree()), function(i, NODE) {\n                if ($(NODE).hasClass('node-instance')) {\n                    var value = $(NODE).prop('id');\n                    if (returnValue.indexOf(value) == -1) {\n                        returnValue.push(value);\n                    }\n                }\n            });\n            return returnValue;\n        },\n\n        /**\n         * save the checked instances in the tree by sending the ids using an ajax request\n         */\n        saveData: function() {\n            var instance = this;\n            var toSend = {};\n            if (typeof this.options.saveData == 'object') {\n                for (var key in this.options.saveData) {\n                    toSend[key] = this.options.saveData[key];\n                }\n            }\n            var index = 0;\n\n            helpers.loading();\n            /*$.each($.tree.plugins.checkbox.get_checked(this.getTree()), function(i, NODE){\n\t\t\t\tif ($(NODE).hasClass('node-instance')) {\n\t\t\t\t\ttoSend2['instance_' + index2] = $(NODE).prop('id');\n\t\t\t\t\tindex2++;\n\t\t\t\t}\n\t\t\t});*/\n\n            var nodes = this.getChecked();\n            toSend['instances'] = JSON.stringify(nodes);\n\n            var uriField,\n                classUriField = null;\n            if (this.options.relatedFormId) {\n                var uriEltSelector = '#' + this.options.relatedFormId + ' :input[name=uri]';\n                if ($(uriEltSelector).length) {\n                    uriField = $(uriEltSelector);\n                }\n\n                var classUriEltSelector = '#' + this.options.relatedFormId + ' :input[name=classUri]';\n                if ($(classUriEltSelector).length) {\n                    classUriField = $(classUriEltSelector);\n                }\n            }\n\n            if (!uriField) {\n                uriField = $('input[name=uri]');\n            }\n            if (!classUriField) {\n                classUriField = $('input[name=classUri]');\n            }\n\n            if (uriField) {\n                toSend.uri = uriField.val();\n            }\n\n            if (classUriField) {\n                toSend.classUri = classUriField.val();\n            }\n\n            $.ajax({\n                url: this.options.saveUrl,\n                type: 'POST',\n                data: toSend,\n                dataType: 'json',\n                success: function(response) {\n                    if (response.saved) {\n                        if (instance.options.saveCallback) {\n                            instance.options.saveCallback(toSend);\n                        }\n                        feedback().info(__('Selection saved successfully'));\n                    } else {\n                        if (instance.options.saveErrorCallback) {\n                            instance.options.saveErrorCallback(response, instance);\n                        }\n                    }\n                },\n                complete: function() {\n                    helpers.loaded();\n                }\n            });\n        }\n    });\n\n    return GenerisTreeSelectClass;\n});\n\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('.flatpickr-calendar {\\n  background: transparent;\\n  opacity: 0;\\n  display: none;\\n  text-align: center;\\n  visibility: hidden;\\n  padding: 0;\\n  -webkit-animation: none;\\n          animation: none;\\n  direction: ltr;\\n  border: 0;\\n  font-size: 14px;\\n  line-height: 24px;\\n  border-radius: 5px;\\n  position: absolute;\\n  width: 307.875px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  -ms-touch-action: manipulation;\\n      touch-action: manipulation;\\n  background: #fff;\\n  -webkit-box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0,0,0,0.08);\\n          box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0,0,0,0.08);\\n}\\n.flatpickr-calendar.open,\\n.flatpickr-calendar.inline {\\n  opacity: 1;\\n  max-height: 640px;\\n  visibility: visible;\\n}\\n.flatpickr-calendar.open {\\n  display: inline-block;\\n  z-index: 99999;\\n}\\n.flatpickr-calendar.animate.open {\\n  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\\n          animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\\n}\\n.flatpickr-calendar.inline {\\n  display: block;\\n  position: relative;\\n  top: 2px;\\n}\\n.flatpickr-calendar.static {\\n  position: absolute;\\n  top: calc(100% + 2px);\\n}\\n.flatpickr-calendar.static.open {\\n  z-index: 999;\\n  display: block;\\n}\\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7) {\\n  -webkit-box-shadow: none !important;\\n          box-shadow: none !important;\\n}\\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1) {\\n  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\\n          box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\\n}\\n.flatpickr-calendar .hasWeeks .dayContainer,\\n.flatpickr-calendar .hasTime .dayContainer {\\n  border-bottom: 0;\\n  border-bottom-right-radius: 0;\\n  border-bottom-left-radius: 0;\\n}\\n.flatpickr-calendar .hasWeeks .dayContainer {\\n  border-left: 0;\\n}\\n.flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\\n  height: 40px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n.flatpickr-calendar.noCalendar.hasTime .flatpickr-time {\\n  height: auto;\\n}\\n.flatpickr-calendar:before,\\n.flatpickr-calendar:after {\\n  position: absolute;\\n  display: block;\\n  pointer-events: none;\\n  border: solid transparent;\\n  content: \\'\\';\\n  height: 0;\\n  width: 0;\\n  left: 22px;\\n}\\n.flatpickr-calendar.rightMost:before,\\n.flatpickr-calendar.rightMost:after {\\n  left: auto;\\n  right: 22px;\\n}\\n.flatpickr-calendar:before {\\n  border-width: 5px;\\n  margin: 0 -5px;\\n}\\n.flatpickr-calendar:after {\\n  border-width: 4px;\\n  margin: 0 -4px;\\n}\\n.flatpickr-calendar.arrowTop:before,\\n.flatpickr-calendar.arrowTop:after {\\n  bottom: 100%;\\n}\\n.flatpickr-calendar.arrowTop:before {\\n  border-bottom-color: #e6e6e6;\\n}\\n.flatpickr-calendar.arrowTop:after {\\n  border-bottom-color: #fff;\\n}\\n.flatpickr-calendar.arrowBottom:before,\\n.flatpickr-calendar.arrowBottom:after {\\n  top: 100%;\\n}\\n.flatpickr-calendar.arrowBottom:before {\\n  border-top-color: #e6e6e6;\\n}\\n.flatpickr-calendar.arrowBottom:after {\\n  border-top-color: #fff;\\n}\\n.flatpickr-calendar:focus {\\n  outline: 0;\\n}\\n.flatpickr-wrapper {\\n  position: relative;\\n  display: inline-block;\\n}\\n.flatpickr-months {\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n}\\n.flatpickr-months .flatpickr-month {\\n  background: transparent;\\n  color: rgba(0,0,0,0.9);\\n  fill: rgba(0,0,0,0.9);\\n  height: 28px;\\n  line-height: 1;\\n  text-align: center;\\n  position: relative;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  overflow: hidden;\\n  -webkit-box-flex: 1;\\n  -webkit-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n}\\n.flatpickr-months .flatpickr-prev-month,\\n.flatpickr-months .flatpickr-next-month {\\n  text-decoration: none;\\n  cursor: pointer;\\n  position: absolute;\\n  top: 0px;\\n  line-height: 16px;\\n  height: 28px;\\n  padding: 10px;\\n  z-index: 3;\\n  color: rgba(0,0,0,0.9);\\n  fill: rgba(0,0,0,0.9);\\n}\\n.flatpickr-months .flatpickr-prev-month.disabled,\\n.flatpickr-months .flatpickr-next-month.disabled {\\n  display: none;\\n}\\n.flatpickr-months .flatpickr-prev-month i,\\n.flatpickr-months .flatpickr-next-month i {\\n  position: relative;\\n}\\n.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\\n.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\\n/*\\n      /*rtl:begin:ignore*/\\n/*\\n      */\\n  left: 0;\\n/*\\n      /*rtl:end:ignore*/\\n/*\\n      */\\n}\\n/*\\n      /*rtl:begin:ignore*/\\n/*\\n      /*rtl:end:ignore*/\\n.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\\n.flatpickr-months .flatpickr-next-month.flatpickr-next-month {\\n/*\\n      /*rtl:begin:ignore*/\\n/*\\n      */\\n  right: 0;\\n/*\\n      /*rtl:end:ignore*/\\n/*\\n      */\\n}\\n/*\\n      /*rtl:begin:ignore*/\\n/*\\n      /*rtl:end:ignore*/\\n.flatpickr-months .flatpickr-prev-month:hover,\\n.flatpickr-months .flatpickr-next-month:hover {\\n  color: #959ea9;\\n}\\n.flatpickr-months .flatpickr-prev-month:hover svg,\\n.flatpickr-months .flatpickr-next-month:hover svg {\\n  fill: #f64747;\\n}\\n.flatpickr-months .flatpickr-prev-month svg,\\n.flatpickr-months .flatpickr-next-month svg {\\n  width: 14px;\\n  height: 14px;\\n}\\n.flatpickr-months .flatpickr-prev-month svg path,\\n.flatpickr-months .flatpickr-next-month svg path {\\n  -webkit-transition: fill 0.1s;\\n  transition: fill 0.1s;\\n  fill: inherit;\\n}\\n.numInputWrapper {\\n  position: relative;\\n  height: auto;\\n}\\n.numInputWrapper input,\\n.numInputWrapper span {\\n  display: inline-block;\\n}\\n.numInputWrapper input {\\n  width: 100%;\\n}\\n.numInputWrapper input::-ms-clear {\\n  display: none;\\n}\\n.numInputWrapper input::-webkit-outer-spin-button,\\n.numInputWrapper input::-webkit-inner-spin-button {\\n  margin: 0;\\n  -webkit-appearance: none;\\n}\\n.numInputWrapper span {\\n  position: absolute;\\n  right: 0;\\n  width: 14px;\\n  padding: 0 4px 0 2px;\\n  height: 50%;\\n  line-height: 50%;\\n  opacity: 0;\\n  cursor: pointer;\\n  border: 1px solid rgba(57,57,57,0.15);\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.numInputWrapper span:hover {\\n  background: rgba(0,0,0,0.1);\\n}\\n.numInputWrapper span:active {\\n  background: rgba(0,0,0,0.2);\\n}\\n.numInputWrapper span:after {\\n  display: block;\\n  content: \\\"\\\";\\n  position: absolute;\\n}\\n.numInputWrapper span.arrowUp {\\n  top: 0;\\n  border-bottom: 0;\\n}\\n.numInputWrapper span.arrowUp:after {\\n  border-left: 4px solid transparent;\\n  border-right: 4px solid transparent;\\n  border-bottom: 4px solid rgba(57,57,57,0.6);\\n  top: 26%;\\n}\\n.numInputWrapper span.arrowDown {\\n  top: 50%;\\n}\\n.numInputWrapper span.arrowDown:after {\\n  border-left: 4px solid transparent;\\n  border-right: 4px solid transparent;\\n  border-top: 4px solid rgba(57,57,57,0.6);\\n  top: 40%;\\n}\\n.numInputWrapper span svg {\\n  width: inherit;\\n  height: auto;\\n}\\n.numInputWrapper span svg path {\\n  fill: rgba(0,0,0,0.5);\\n}\\n.numInputWrapper:hover {\\n  background: rgba(0,0,0,0.05);\\n}\\n.numInputWrapper:hover span {\\n  opacity: 1;\\n}\\n.flatpickr-current-month {\\n  font-size: 135%;\\n  line-height: inherit;\\n  font-weight: 300;\\n  color: inherit;\\n  position: absolute;\\n  width: 75%;\\n  left: 12.5%;\\n  padding: 6.16px 0 0 0;\\n  line-height: 1;\\n  height: 28px;\\n  display: inline-block;\\n  text-align: center;\\n  -webkit-transform: translate3d(0px, 0px, 0px);\\n          transform: translate3d(0px, 0px, 0px);\\n}\\n.flatpickr-current-month span.cur-month {\\n  font-family: inherit;\\n  font-weight: 700;\\n  color: inherit;\\n  display: inline-block;\\n  margin-left: 0.5ch;\\n  padding: 0;\\n}\\n.flatpickr-current-month span.cur-month:hover {\\n  background: rgba(0,0,0,0.05);\\n}\\n.flatpickr-current-month .numInputWrapper {\\n  width: 6ch;\\n  width: 7ch\\\\0;\\n  display: inline-block;\\n}\\n.flatpickr-current-month .numInputWrapper span.arrowUp:after {\\n  border-bottom-color: rgba(0,0,0,0.9);\\n}\\n.flatpickr-current-month .numInputWrapper span.arrowDown:after {\\n  border-top-color: rgba(0,0,0,0.9);\\n}\\n.flatpickr-current-month input.cur-year {\\n  background: transparent;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  color: inherit;\\n  cursor: text;\\n  padding: 0 0 0 0.5ch;\\n  margin: 0;\\n  display: inline-block;\\n  font-size: inherit;\\n  font-family: inherit;\\n  font-weight: 300;\\n  line-height: inherit;\\n  height: auto;\\n  border: 0;\\n  border-radius: 0;\\n  vertical-align: initial;\\n  -webkit-appearance: textfield;\\n  -moz-appearance: textfield;\\n  appearance: textfield;\\n}\\n.flatpickr-current-month input.cur-year:focus {\\n  outline: 0;\\n}\\n.flatpickr-current-month input.cur-year[disabled],\\n.flatpickr-current-month input.cur-year[disabled]:hover {\\n  font-size: 100%;\\n  color: rgba(0,0,0,0.5);\\n  background: transparent;\\n  pointer-events: none;\\n}\\n.flatpickr-weekdays {\\n  background: transparent;\\n  text-align: center;\\n  overflow: hidden;\\n  width: 100%;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n  -webkit-align-items: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  height: 28px;\\n}\\n.flatpickr-weekdays .flatpickr-weekdaycontainer {\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-flex: 1;\\n  -webkit-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n}\\nspan.flatpickr-weekday {\\n  cursor: default;\\n  font-size: 90%;\\n  background: transparent;\\n  color: rgba(0,0,0,0.54);\\n  line-height: 1;\\n  margin: 0;\\n  text-align: center;\\n  display: block;\\n  -webkit-box-flex: 1;\\n  -webkit-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n  font-weight: bolder;\\n}\\n.dayContainer,\\n.flatpickr-weeks {\\n  padding: 1px 0 0 0;\\n}\\n.flatpickr-days {\\n  position: relative;\\n  overflow: hidden;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: start;\\n  -webkit-align-items: flex-start;\\n      -ms-flex-align: start;\\n          align-items: flex-start;\\n  width: 307.875px;\\n}\\n.flatpickr-days:focus {\\n  outline: 0;\\n}\\n.dayContainer {\\n  padding: 0;\\n  outline: 0;\\n  text-align: left;\\n  width: 307.875px;\\n  min-width: 307.875px;\\n  max-width: 307.875px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  display: inline-block;\\n  display: -ms-flexbox;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: flex;\\n  -webkit-flex-wrap: wrap;\\n          flex-wrap: wrap;\\n  -ms-flex-wrap: wrap;\\n  -ms-flex-pack: justify;\\n  -webkit-justify-content: space-around;\\n          justify-content: space-around;\\n  -webkit-transform: translate3d(0px, 0px, 0px);\\n          transform: translate3d(0px, 0px, 0px);\\n  opacity: 1;\\n}\\n.dayContainer + .dayContainer {\\n  -webkit-box-shadow: -1px 0 0 #e6e6e6;\\n          box-shadow: -1px 0 0 #e6e6e6;\\n}\\n.flatpickr-day {\\n  background: none;\\n  border: 1px solid transparent;\\n  border-radius: 150px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  color: #393939;\\n  cursor: pointer;\\n  font-weight: 400;\\n  width: 14.2857143%;\\n  -webkit-flex-basis: 14.2857143%;\\n      -ms-flex-preferred-size: 14.2857143%;\\n          flex-basis: 14.2857143%;\\n  max-width: 39px;\\n  height: 39px;\\n  line-height: 39px;\\n  margin: 0;\\n  display: inline-block;\\n  position: relative;\\n  -webkit-box-pack: center;\\n  -webkit-justify-content: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  text-align: center;\\n}\\n.flatpickr-day.inRange,\\n.flatpickr-day.prevMonthDay.inRange,\\n.flatpickr-day.nextMonthDay.inRange,\\n.flatpickr-day.today.inRange,\\n.flatpickr-day.prevMonthDay.today.inRange,\\n.flatpickr-day.nextMonthDay.today.inRange,\\n.flatpickr-day:hover,\\n.flatpickr-day.prevMonthDay:hover,\\n.flatpickr-day.nextMonthDay:hover,\\n.flatpickr-day:focus,\\n.flatpickr-day.prevMonthDay:focus,\\n.flatpickr-day.nextMonthDay:focus {\\n  cursor: pointer;\\n  outline: 0;\\n  background: #e6e6e6;\\n  border-color: #e6e6e6;\\n}\\n.flatpickr-day.today {\\n  border-color: #959ea9;\\n}\\n.flatpickr-day.today:hover,\\n.flatpickr-day.today:focus {\\n  border-color: #959ea9;\\n  background: #959ea9;\\n  color: #fff;\\n}\\n.flatpickr-day.selected,\\n.flatpickr-day.startRange,\\n.flatpickr-day.endRange,\\n.flatpickr-day.selected.inRange,\\n.flatpickr-day.startRange.inRange,\\n.flatpickr-day.endRange.inRange,\\n.flatpickr-day.selected:focus,\\n.flatpickr-day.startRange:focus,\\n.flatpickr-day.endRange:focus,\\n.flatpickr-day.selected:hover,\\n.flatpickr-day.startRange:hover,\\n.flatpickr-day.endRange:hover,\\n.flatpickr-day.selected.prevMonthDay,\\n.flatpickr-day.startRange.prevMonthDay,\\n.flatpickr-day.endRange.prevMonthDay,\\n.flatpickr-day.selected.nextMonthDay,\\n.flatpickr-day.startRange.nextMonthDay,\\n.flatpickr-day.endRange.nextMonthDay {\\n  background: #569ff7;\\n  -webkit-box-shadow: none;\\n          box-shadow: none;\\n  color: #fff;\\n  border-color: #569ff7;\\n}\\n.flatpickr-day.selected.startRange,\\n.flatpickr-day.startRange.startRange,\\n.flatpickr-day.endRange.startRange {\\n  border-radius: 50px 0 0 50px;\\n}\\n.flatpickr-day.selected.endRange,\\n.flatpickr-day.startRange.endRange,\\n.flatpickr-day.endRange.endRange {\\n  border-radius: 0 50px 50px 0;\\n}\\n.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)),\\n.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)),\\n.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\\n  -webkit-box-shadow: -10px 0 0 #569ff7;\\n          box-shadow: -10px 0 0 #569ff7;\\n}\\n.flatpickr-day.selected.startRange.endRange,\\n.flatpickr-day.startRange.startRange.endRange,\\n.flatpickr-day.endRange.startRange.endRange {\\n  border-radius: 50px;\\n}\\n.flatpickr-day.inRange {\\n  border-radius: 0;\\n  -webkit-box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\\n          box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\\n}\\n.flatpickr-day.disabled,\\n.flatpickr-day.disabled:hover,\\n.flatpickr-day.prevMonthDay,\\n.flatpickr-day.nextMonthDay,\\n.flatpickr-day.notAllowed,\\n.flatpickr-day.notAllowed.prevMonthDay,\\n.flatpickr-day.notAllowed.nextMonthDay {\\n  color: rgba(57,57,57,0.3);\\n  background: transparent;\\n  border-color: transparent;\\n  cursor: default;\\n}\\n.flatpickr-day.disabled,\\n.flatpickr-day.disabled:hover {\\n  cursor: not-allowed;\\n  color: rgba(57,57,57,0.1);\\n}\\n.flatpickr-day.week.selected {\\n  border-radius: 0;\\n  -webkit-box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\\n          box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\\n}\\n.flatpickr-day.hidden {\\n  visibility: hidden;\\n}\\n.rangeMode .flatpickr-day {\\n  margin-top: 1px;\\n}\\n.flatpickr-weekwrapper {\\n  display: inline-block;\\n  float: left;\\n}\\n.flatpickr-weekwrapper .flatpickr-weeks {\\n  padding: 0 12px;\\n  -webkit-box-shadow: 1px 0 0 #e6e6e6;\\n          box-shadow: 1px 0 0 #e6e6e6;\\n}\\n.flatpickr-weekwrapper .flatpickr-weekday {\\n  float: none;\\n  width: 100%;\\n  line-height: 28px;\\n}\\n.flatpickr-weekwrapper span.flatpickr-day,\\n.flatpickr-weekwrapper span.flatpickr-day:hover {\\n  display: block;\\n  width: 100%;\\n  max-width: none;\\n  color: rgba(57,57,57,0.3);\\n  background: transparent;\\n  cursor: default;\\n  border: none;\\n}\\n.flatpickr-innerContainer {\\n  display: block;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  overflow: hidden;\\n}\\n.flatpickr-rContainer {\\n  display: inline-block;\\n  padding: 0;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.flatpickr-time {\\n  text-align: center;\\n  outline: 0;\\n  display: block;\\n  height: 0;\\n  line-height: 40px;\\n  max-height: 40px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  overflow: hidden;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n}\\n.flatpickr-time:after {\\n  content: \\\"\\\";\\n  display: table;\\n  clear: both;\\n}\\n.flatpickr-time .numInputWrapper {\\n  -webkit-box-flex: 1;\\n  -webkit-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n  width: 40%;\\n  height: 40px;\\n  float: left;\\n}\\n.flatpickr-time .numInputWrapper span.arrowUp:after {\\n  border-bottom-color: #393939;\\n}\\n.flatpickr-time .numInputWrapper span.arrowDown:after {\\n  border-top-color: #393939;\\n}\\n.flatpickr-time.hasSeconds .numInputWrapper {\\n  width: 26%;\\n}\\n.flatpickr-time.time24hr .numInputWrapper {\\n  width: 49%;\\n}\\n.flatpickr-time input {\\n  background: transparent;\\n  -webkit-box-shadow: none;\\n          box-shadow: none;\\n  border: 0;\\n  border-radius: 0;\\n  text-align: center;\\n  margin: 0;\\n  padding: 0;\\n  height: inherit;\\n  line-height: inherit;\\n  color: #393939;\\n  font-size: 14px;\\n  position: relative;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  -webkit-appearance: textfield;\\n  -moz-appearance: textfield;\\n  appearance: textfield;\\n}\\n.flatpickr-time input.flatpickr-hour {\\n  font-weight: bold;\\n}\\n.flatpickr-time input.flatpickr-minute,\\n.flatpickr-time input.flatpickr-second {\\n  font-weight: 400;\\n}\\n.flatpickr-time input:focus {\\n  outline: 0;\\n  border: 0;\\n}\\n.flatpickr-time .flatpickr-time-separator,\\n.flatpickr-time .flatpickr-am-pm {\\n  height: inherit;\\n  display: inline-block;\\n  float: left;\\n  line-height: inherit;\\n  color: #393939;\\n  font-weight: bold;\\n  width: 2%;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  -webkit-align-self: center;\\n      -ms-flex-item-align: center;\\n          align-self: center;\\n}\\n.flatpickr-time .flatpickr-am-pm {\\n  outline: 0;\\n  width: 18%;\\n  cursor: pointer;\\n  text-align: center;\\n  font-weight: 400;\\n}\\n.flatpickr-time input:hover,\\n.flatpickr-time .flatpickr-am-pm:hover,\\n.flatpickr-time input:focus,\\n.flatpickr-time .flatpickr-am-pm:focus {\\n  background: #eee;\\n}\\n.flatpickr-input[readonly] {\\n  cursor: pointer;\\n}\\n@-webkit-keyframes fpFadeInDown {\\n  from {\\n    opacity: 0;\\n    -webkit-transform: translate3d(0, -20px, 0);\\n            transform: translate3d(0, -20px, 0);\\n  }\\n  to {\\n    opacity: 1;\\n    -webkit-transform: translate3d(0, 0, 0);\\n            transform: translate3d(0, 0, 0);\\n  }\\n}\\n@keyframes fpFadeInDown {\\n  from {\\n    opacity: 0;\\n    -webkit-transform: translate3d(0, -20px, 0);\\n            transform: translate3d(0, -20px, 0);\\n  }\\n  to {\\n    opacity: 1;\\n    -webkit-transform: translate3d(0, 0, 0);\\n            transform: translate3d(0, 0, 0);\\n  }\\n}\\n');\n","\ndefine(\"loader/tao.bundle\", function(){});\n"]}